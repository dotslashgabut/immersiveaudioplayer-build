(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(r){if(r.ep)return;r.ep=!0;const u=o(r);fetch(r.href,u)}})();var rk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ky(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kd={exports:{}},Ra={};var H0;function n1(){if(H0)return Ra;H0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,u){var p=null;if(u!==void 0&&(p=""+u),r.key!==void 0&&(p=""+r.key),"key"in r){u={};for(var g in r)g!=="key"&&(u[g]=r[g])}else u=r;return r=u.ref,{$$typeof:e,type:s,key:p,ref:r!==void 0?r:null,props:u}}return Ra.Fragment=t,Ra.jsx=o,Ra.jsxs=o,Ra}var G0;function i1(){return G0||(G0=1,Kd.exports=n1()),Kd.exports}var d=i1(),Xd={exports:{}},zt={};var V0;function o1(){if(V0)return zt;V0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function A(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,G={};function J(z,se,ve){this.props=z,this.context=se,this.refs=G,this.updater=ve||_}J.prototype.isReactComponent={},J.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},J.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function fe(){}fe.prototype=J.prototype;function ce(z,se,ve){this.props=z,this.context=se,this.refs=G,this.updater=ve||_}var ge=ce.prototype=new fe;ge.constructor=ce,V(ge,J.prototype),ge.isPureReactComponent=!0;var ze=Array.isArray;function De(){}var we={H:null,A:null,T:null,S:null},ot=Object.prototype.hasOwnProperty;function Ae(z,se,ve){var Be=ve.ref;return{$$typeof:e,type:z,key:se,ref:Be!==void 0?Be:null,props:ve}}function Qe(z,se){return Ae(z.type,se,z.props)}function Pe(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function ut(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ve){return se[ve]})}var ht=/\/+/g;function At(z,se){return typeof z=="object"&&z!==null&&z.key!=null?ut(""+z.key):se.toString(36)}function Mt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(De,De):(z.status="pending",z.then(function(se){z.status==="pending"&&(z.status="fulfilled",z.value=se)},function(se){z.status==="pending"&&(z.status="rejected",z.reason=se)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function j(z,se,ve,Be,et){var w=typeof z;(w==="undefined"||w==="boolean")&&(z=null);var P=!1;if(z===null)P=!0;else switch(w){case"bigint":case"string":case"number":P=!0;break;case"object":switch(z.$$typeof){case e:case t:P=!0;break;case x:return P=z._init,j(P(z._payload),se,ve,Be,et)}}if(P)return et=et(z),P=Be===""?"."+At(z,0):Be,ze(et)?(ve="",P!=null&&(ve=P.replace(ht,"$&/")+"/"),j(et,se,ve,"",function(Oe){return Oe})):et!=null&&(Pe(et)&&(et=Qe(et,ve+(et.key==null||z&&z.key===et.key?"":(""+et.key).replace(ht,"$&/")+"/")+P)),se.push(et)),1;P=0;var ie=Be===""?".":Be+":";if(ze(z))for(var pe=0;pe<z.length;pe++)Be=z[pe],w=ie+At(Be,pe),P+=j(Be,se,ve,w,et);else if(pe=A(z),typeof pe=="function")for(z=pe.call(z),pe=0;!(Be=z.next()).done;)Be=Be.value,w=ie+At(Be,pe++),P+=j(Be,se,ve,w,et);else if(w==="object"){if(typeof z.then=="function")return j(Mt(z),se,ve,Be,et);throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return P}function Ee(z,se,ve){if(z==null)return z;var Be=[],et=0;return j(z,Be,"","",function(w){return se.call(ve,w,et++)}),Be}function le(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(ve){(z._status===0||z._status===-1)&&(z._status=1,z._result=ve)},function(ve){(z._status===0||z._status===-1)&&(z._status=2,z._result=ve)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var bt=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Je={map:Ee,forEach:function(z,se,ve){Ee(z,function(){se.apply(this,arguments)},ve)},count:function(z){var se=0;return Ee(z,function(){se++}),se},toArray:function(z){return Ee(z,function(se){return se})||[]},only:function(z){if(!Pe(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return zt.Activity=b,zt.Children=Je,zt.Component=J,zt.Fragment=o,zt.Profiler=r,zt.PureComponent=ce,zt.StrictMode=s,zt.Suspense=v,zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we,zt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return we.H.useMemoCache(z)}},zt.cache=function(z){return function(){return z.apply(null,arguments)}},zt.cacheSignal=function(){return null},zt.cloneElement=function(z,se,ve){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Be=V({},z.props),et=z.key;if(se!=null)for(w in se.key!==void 0&&(et=""+se.key),se)!ot.call(se,w)||w==="key"||w==="__self"||w==="__source"||w==="ref"&&se.ref===void 0||(Be[w]=se[w]);var w=arguments.length-2;if(w===1)Be.children=ve;else if(1<w){for(var P=Array(w),ie=0;ie<w;ie++)P[ie]=arguments[ie+2];Be.children=P}return Ae(z.type,et,Be)},zt.createContext=function(z){return z={$$typeof:p,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:u,_context:z},z},zt.createElement=function(z,se,ve){var Be,et={},w=null;if(se!=null)for(Be in se.key!==void 0&&(w=""+se.key),se)ot.call(se,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(et[Be]=se[Be]);var P=arguments.length-2;if(P===1)et.children=ve;else if(1<P){for(var ie=Array(P),pe=0;pe<P;pe++)ie[pe]=arguments[pe+2];et.children=ie}if(z&&z.defaultProps)for(Be in P=z.defaultProps,P)et[Be]===void 0&&(et[Be]=P[Be]);return Ae(z,w,et)},zt.createRef=function(){return{current:null}},zt.forwardRef=function(z){return{$$typeof:g,render:z}},zt.isValidElement=Pe,zt.lazy=function(z){return{$$typeof:x,_payload:{_status:-1,_result:z},_init:le}},zt.memo=function(z,se){return{$$typeof:m,type:z,compare:se===void 0?null:se}},zt.startTransition=function(z){var se=we.T,ve={};we.T=ve;try{var Be=z(),et=we.S;et!==null&&et(ve,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(De,bt)}catch(w){bt(w)}finally{se!==null&&ve.types!==null&&(se.types=ve.types),we.T=se}},zt.unstable_useCacheRefresh=function(){return we.H.useCacheRefresh()},zt.use=function(z){return we.H.use(z)},zt.useActionState=function(z,se,ve){return we.H.useActionState(z,se,ve)},zt.useCallback=function(z,se){return we.H.useCallback(z,se)},zt.useContext=function(z){return we.H.useContext(z)},zt.useDebugValue=function(){},zt.useDeferredValue=function(z,se){return we.H.useDeferredValue(z,se)},zt.useEffect=function(z,se){return we.H.useEffect(z,se)},zt.useEffectEvent=function(z){return we.H.useEffectEvent(z)},zt.useId=function(){return we.H.useId()},zt.useImperativeHandle=function(z,se,ve){return we.H.useImperativeHandle(z,se,ve)},zt.useInsertionEffect=function(z,se){return we.H.useInsertionEffect(z,se)},zt.useLayoutEffect=function(z,se){return we.H.useLayoutEffect(z,se)},zt.useMemo=function(z,se){return we.H.useMemo(z,se)},zt.useOptimistic=function(z,se){return we.H.useOptimistic(z,se)},zt.useReducer=function(z,se,ve){return we.H.useReducer(z,se,ve)},zt.useRef=function(z){return we.H.useRef(z)},zt.useState=function(z){return we.H.useState(z)},zt.useSyncExternalStore=function(z,se,ve){return we.H.useSyncExternalStore(z,se,ve)},zt.useTransition=function(){return we.H.useTransition()},zt.version="19.2.3",zt}var j0;function Gf(){return j0||(j0=1,Xd.exports=o1()),Xd.exports}var Q=Gf();const Vf=Ky(Q);var Wd={exports:{}},Ia={},Qd={exports:{}},Zd={};var q0;function l1(){return q0||(q0=1,(function(e){function t(j,Ee){var le=j.length;j.push(Ee);e:for(;0<le;){var bt=le-1>>>1,Je=j[bt];if(0<r(Je,Ee))j[bt]=Ee,j[le]=Je,le=bt;else break e}}function o(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var Ee=j[0],le=j.pop();if(le!==Ee){j[0]=le;e:for(var bt=0,Je=j.length,z=Je>>>1;bt<z;){var se=2*(bt+1)-1,ve=j[se],Be=se+1,et=j[Be];if(0>r(ve,le))Be<Je&&0>r(et,ve)?(j[bt]=et,j[Be]=le,bt=Be):(j[bt]=ve,j[se]=le,bt=se);else if(Be<Je&&0>r(et,le))j[bt]=et,j[Be]=le,bt=Be;else break e}}return Ee}function r(j,Ee){var le=j.sortIndex-Ee.sortIndex;return le!==0?le:j.id-Ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var p=Date,g=p.now();e.unstable_now=function(){return p.now()-g}}var v=[],m=[],x=1,b=null,T=3,A=!1,_=!1,V=!1,G=!1,J=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function ge(j){for(var Ee=o(m);Ee!==null;){if(Ee.callback===null)s(m);else if(Ee.startTime<=j)s(m),Ee.sortIndex=Ee.expirationTime,t(v,Ee);else break;Ee=o(m)}}function ze(j){if(V=!1,ge(j),!_)if(o(v)!==null)_=!0,De||(De=!0,ut());else{var Ee=o(m);Ee!==null&&Mt(ze,Ee.startTime-j)}}var De=!1,we=-1,ot=5,Ae=-1;function Qe(){return G?!0:!(e.unstable_now()-Ae<ot)}function Pe(){if(G=!1,De){var j=e.unstable_now();Ae=j;var Ee=!0;try{e:{_=!1,V&&(V=!1,fe(we),we=-1),A=!0;var le=T;try{t:{for(ge(j),b=o(v);b!==null&&!(b.expirationTime>j&&Qe());){var bt=b.callback;if(typeof bt=="function"){b.callback=null,T=b.priorityLevel;var Je=bt(b.expirationTime<=j);if(j=e.unstable_now(),typeof Je=="function"){b.callback=Je,ge(j),Ee=!0;break t}b===o(v)&&s(v),ge(j)}else s(v);b=o(v)}if(b!==null)Ee=!0;else{var z=o(m);z!==null&&Mt(ze,z.startTime-j),Ee=!1}}break e}finally{b=null,T=le,A=!1}Ee=void 0}}finally{Ee?ut():De=!1}}}var ut;if(typeof ce=="function")ut=function(){ce(Pe)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,At=ht.port2;ht.port1.onmessage=Pe,ut=function(){At.postMessage(null)}}else ut=function(){J(Pe,0)};function Mt(j,Ee){we=J(function(){j(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(j){switch(T){case 1:case 2:case 3:var Ee=3;break;default:Ee=T}var le=T;T=Ee;try{return j()}finally{T=le}},e.unstable_requestPaint=function(){G=!0},e.unstable_runWithPriority=function(j,Ee){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var le=T;T=j;try{return Ee()}finally{T=le}},e.unstable_scheduleCallback=function(j,Ee,le){var bt=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?bt+le:bt):le=bt,j){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=le+Je,j={id:x++,callback:Ee,priorityLevel:j,startTime:le,expirationTime:Je,sortIndex:-1},le>bt?(j.sortIndex=le,t(m,j),o(v)===null&&j===o(m)&&(V?(fe(we),we=-1):V=!0,Mt(ze,le-bt))):(j.sortIndex=Je,t(v,j),_||A||(_=!0,De||(De=!0,ut()))),j},e.unstable_shouldYield=Qe,e.unstable_wrapCallback=function(j){var Ee=T;return function(){var le=T;T=Ee;try{return j.apply(this,arguments)}finally{T=le}}}})(Zd)),Zd}var $0;function s1(){return $0||($0=1,Qd.exports=l1()),Qd.exports}var ef={exports:{}},ei={};var Y0;function a1(){if(Y0)return ei;Y0=1;var e=Gf();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(v,m,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:v,containerInfo:m,implementation:x}}var p=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ei.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(v,m,null,x)},ei.flushSync=function(v){var m=p.T,x=s.p;try{if(p.T=null,s.p=2,v)return v()}finally{p.T=m,s.p=x,s.d.f()}},ei.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(v,m))},ei.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},ei.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,b=g(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:A}):x==="script"&&s.d.X(v,{crossOrigin:b,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ei.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=g(m.as,m.crossOrigin);s.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(v)},ei.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,b=g(x,m.crossOrigin);s.d.L(v,x,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ei.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=g(m.as,m.crossOrigin);s.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(v)},ei.requestFormReset=function(v){s.d.r(v)},ei.unstable_batchedUpdates=function(v,m){return v(m)},ei.useFormState=function(v,m,x){return p.H.useFormState(v,m,x)},ei.useFormStatus=function(){return p.H.useHostTransitionStatus()},ei.version="19.2.3",ei}var J0;function r1(){if(J0)return ef.exports;J0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ef.exports=a1(),ef.exports}var K0;function c1(){if(K0)return Ia;K0=1;var e=s1(),t=Gf(),o=r1();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function p(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function v(n){if(u(n)!==n)throw Error(s(188))}function m(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,a=i;;){var h=l.return;if(h===null)break;var y=h.alternate;if(y===null){if(a=h.return,a!==null){l=a;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===l)return v(h),n;if(y===a)return v(h),i;y=y.sibling}throw Error(s(188))}if(l.return!==a.return)l=h,a=y;else{for(var S=!1,N=h.child;N;){if(N===l){S=!0,l=h,a=y;break}if(N===a){S=!0,a=h,l=y;break}N=N.sibling}if(!S){for(N=y.child;N;){if(N===l){S=!0,l=y,a=h;break}if(N===a){S=!0,a=y,l=h;break}N=N.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function x(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=x(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),Ae=Symbol.for("react.activity"),Qe=Symbol.for("react.memo_cache_sentinel"),Pe=Symbol.iterator;function ut(n){return n===null||typeof n!="object"?null:(n=Pe&&n[Pe]||n["@@iterator"],typeof n=="function"?n:null)}var ht=Symbol.for("react.client.reference");function At(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ht?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case J:return"Profiler";case G:return"StrictMode";case ze:return"Suspense";case De:return"SuspenseList";case Ae:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case _:return"Portal";case ce:return n.displayName||"Context";case fe:return(n._context.displayName||"Context")+".Consumer";case ge:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case we:return i=n.displayName||null,i!==null?i:At(n.type)||"Memo";case ot:i=n._payload,n=n._init;try{return At(n(i))}catch{}}return null}var Mt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},bt=[],Je=-1;function z(n){return{current:n}}function se(n){0>Je||(n.current=bt[Je],bt[Je]=null,Je--)}function ve(n,i){Je++,bt[Je]=n.current,n.current=i}var Be=z(null),et=z(null),w=z(null),P=z(null);function ie(n,i){switch(ve(w,i),ve(et,n),ve(Be,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?u0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=u0(i),n=d0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}se(Be),ve(Be,n)}function pe(){se(Be),se(et),se(w)}function Oe(n){n.memoizedState!==null&&ve(P,n);var i=Be.current,l=d0(i,n.type);i!==l&&(ve(et,n),ve(Be,l))}function B(n){et.current===n&&(se(Be),se(et)),P.current===n&&(se(P),Na._currentValue=le)}var _e,ke;function ye(n){if(_e===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);_e=i&&i[1]||"",ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+n+ke}var be=!1;function Le(n,i){if(!n||be)return"";be=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ae){var Z=ae}Reflect.construct(n,[],Ce)}else{try{Ce.call()}catch(ae){Z=ae}n.call(Ce.prototype)}}else{try{throw Error()}catch(ae){Z=ae}(Ce=n())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ae){if(ae&&Z&&typeof ae.stack=="string")return[ae.stack,Z.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=a.DetermineComponentFrameRoot(),S=y[0],N=y[1];if(S&&N){var D=S.split(`
`),X=N.split(`
`);for(h=a=0;a<D.length&&!D[a].includes("DetermineComponentFrameRoot");)a++;for(;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;if(a===D.length||h===X.length)for(a=D.length-1,h=X.length-1;1<=a&&0<=h&&D[a]!==X[h];)h--;for(;1<=a&&0<=h;a--,h--)if(D[a]!==X[h]){if(a!==1||h!==1)do if(a--,h--,0>h||D[a]!==X[h]){var me=`
`+D[a].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=a&&0<=h);break}}}finally{be=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?ye(l):""}function Ze(n,i){switch(n.tag){case 26:case 27:case 5:return ye(n.type);case 16:return ye("Lazy");case 13:return n.child!==i&&i!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Le(n.type,!1);case 11:return Le(n.type.render,!1);case 1:return Le(n.type,!0);case 31:return ye("Activity");default:return""}}function R(n){try{var i="",l=null;do i+=Ze(n,l),l=n,n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var qe=Object.prototype.hasOwnProperty,L=e.unstable_scheduleCallback,te=e.unstable_cancelCallback,oe=e.unstable_shouldYield,Ne=e.unstable_requestPaint,xe=e.unstable_now,he=e.unstable_getCurrentPriorityLevel,C=e.unstable_ImmediatePriority,U=e.unstable_UserBlockingPriority,$=e.unstable_NormalPriority,M=e.unstable_LowPriority,ne=e.unstable_IdlePriority,I=e.log,ue=e.unstable_setDisableYieldValue,re=null,de=null;function Fe(n){if(typeof I=="function"&&ue(n),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(re,n)}catch{}}var Ke=Math.clz32?Math.clz32:E,rt=Math.log,Ve=Math.LN2;function E(n){return n>>>=0,n===0?32:31-(rt(n)/Ve|0)|0}var at=256,kt=262144,Zt=4194304;function nt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ue(n,i,l){var a=n.pendingLanes;if(a===0)return 0;var h=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var N=a&134217727;return N!==0?(a=N&~y,a!==0?h=nt(a):(S&=N,S!==0?h=nt(S):l||(l=N&~n,l!==0&&(h=nt(l))))):(N=a&~y,N!==0?h=nt(N):S!==0?h=nt(S):l||(l=a&~n,l!==0&&(h=nt(l)))),h===0?0:i!==0&&i!==h&&(i&y)===0&&(y=h&-h,l=i&-i,y>=l||y===32&&(l&4194048)!==0)?i:h}function vt(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ie(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function je(){var n=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),n}function St(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Et(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ft(n,i,l,a,h,y){var S=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var N=n.entanglements,D=n.expirationTimes,X=n.hiddenUpdates;for(l=S&~l;0<l;){var me=31-Ke(l),Ce=1<<me;N[me]=0,D[me]=-1;var Z=X[me];if(Z!==null)for(X[me]=null,me=0;me<Z.length;me++){var ae=Z[me];ae!==null&&(ae.lane&=-536870913)}l&=~Ce}a!==0&&Yt(n,a,0),y!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~i))}function Yt(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var a=31-Ke(i);n.entangledLanes|=i,n.entanglements[a]=n.entanglements[a]|1073741824|l&261930}function En(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var a=31-Ke(l),h=1<<a;h&i|n[a]&i&&(n[a]|=i),l&=~h}}function ai(n,i){var l=i&-i;return l=(l&42)!==0?1:uo(l),(l&(n.suspendedLanes|i))!==0?0:l}function uo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Mi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Fo(){var n=Ee.p;return n!==0?n:(n=window.event,n===void 0?32:D0(n.type))}function yl(n,i){var l=Ee.p;try{return Ee.p=n,i()}finally{Ee.p=l}}var gi=Math.random().toString(36).slice(2),Ye="__reactFiber$"+gi,xt="__reactProps$"+gi,Ft="__reactContainer$"+gi,Qn="__reactEvents$"+gi,Pt="__reactListeners$"+gi,mn="__reactHandles$"+gi,vl="__reactResources$"+gi,Wi="__reactMarker$"+gi;function Po(n){delete n[Ye],delete n[xt],delete n[Qn],delete n[Pt],delete n[mn]}function fo(n){var i=n[Ye];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Ft]||l[Ye]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=v0(n);n!==null;){if(l=n[Ye])return l;n=v0(n)}return i}n=l,l=n.parentNode}return null}function Bo(n){if(n=n[Ye]||n[Ft]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function xl(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function yi(n){var i=n[vl];return i||(i=n[vl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bn(n){n[Wi]=!0}var ql=new Set,$l={};function qn(n,i){po(n,i),po(n+"Capture",i)}function po(n,i){for($l[n]=i,n=0;n<i.length;n++)ql.add(i[n])}var nr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$s={},ir={};function Qc(n){return qe.call(ir,n)?!0:qe.call($s,n)?!1:nr.test(n)?ir[n]=!0:($s[n]=!0,!1)}function Yl(n,i,l){if(Qc(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function bl(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function Vi(n,i,l,a){if(a===null)n.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+a)}}function ni(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function or(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zc(n,i,l){var a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,y=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ys(n){if(!n._valueTracker){var i=or(n)?"checked":"value";n._valueTracker=Zc(n,i,""+n[i])}}function Jl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return n&&(a=or(n)?n.checked?"true":"false":n.value),n=a,n!==l?(i.setValue(n),!0):!1}function Oo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Kl=/[\n"\\]/g;function On(n){return n.replace(Kl,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ho(n,i,l,a,h,y,S,N){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),i!=null?S==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+ni(i)):n.value!==""+ni(i)&&(n.value=""+ni(i)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),i!=null?Xl(n,S,ni(i)):l!=null?Xl(n,S,ni(l)):a!=null&&n.removeAttribute("value"),h==null&&y!=null&&(n.defaultChecked=!!y),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+ni(N):n.removeAttribute("name")}function lr(n,i,l,a,h,y,S,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),i!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Ys(n);return}l=l!=null?""+ni(l):"",i=i!=null?""+ni(i):l,N||i===n.value||(n.value=i),n.defaultValue=i}a=a??h,a=typeof a!="function"&&typeof a!="symbol"&&!!a,n.checked=N?n.checked:!!a,n.defaultChecked=!!a,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),Ys(n)}function Xl(n,i,l){i==="number"&&Oo(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Go(n,i,l,a){if(n=n.options,i){i={};for(var h=0;h<l.length;h++)i["$"+l[h]]=!0;for(l=0;l<n.length;l++)h=i.hasOwnProperty("$"+n[l].value),n[l].selected!==h&&(n[l].selected=h),h&&a&&(n[l].defaultSelected=!0)}else{for(l=""+ni(l),i=null,h=0;h<n.length;h++){if(n[h].value===l){n[h].selected=!0,a&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function Vo(n,i,l){if(i!=null&&(i=""+ni(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+ni(l):""}function ho(n,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(Mt(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=ni(i),n.defaultValue=l,a=n.textContent,a===l&&a!==""&&a!==null&&(n.value=a),Ys(n)}function Qi(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Sl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function k(n,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":a?n.setProperty(i,l):typeof l!="number"||l===0||Sl.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function Y(n,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="");for(var h in i)a=i[h],i.hasOwnProperty(h)&&l[h]!==a&&k(n,h,a)}else for(var y in i)i.hasOwnProperty(y)&&k(n,y,i[y])}function Re(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Se=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ge(n){return Se.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function tt(){}var Tt=null;function mt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sn=null,on=null;function He(n){var i=Bo(n);if(i&&(n=i.stateNode)){var l=n[xt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ho(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+On(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==n&&a.form===n.form){var h=a[xt]||null;if(!h)throw Error(s(90));Ho(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===n.form&&Jl(a)}break e;case"textarea":Vo(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Go(n,!!l.multiple,i,!1)}}}var Rt=!1;function Jt(n,i,l){if(Rt)return n(i,l);Rt=!0;try{var a=n(i);return a}finally{if(Rt=!1,(Sn!==null||on!==null)&&(Hr(),Sn&&(i=Sn,n=on,on=Sn=null,He(i),n)))for(i=0;i<n.length;i++)He(n[i])}}function Cn(n,i){var l=n.stateNode;if(l===null)return null;var a=l[xt]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(n=n.type,a=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!a;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var F=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pt=!1;if(F)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){pt=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{pt=!1}var $e=null,sn=null,Kt=null;function Zi(){if(Kt)return Kt;var n,i=sn,l=i.length,a,h="value"in $e?$e.value:$e.textContent,y=h.length;for(n=0;n<l&&i[n]===h[n];n++);var S=l-n;for(a=1;a<=S&&i[l-a]===h[y-a];a++);return Kt=h.slice(n,1<a?1-a:void 0)}function ri(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ki(){return!0}function jo(){return!1}function kn(n){function i(l,a,h,y,S){this._reactName=l,this._targetInst=h,this.type=a,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(l=n[N],this[N]=l?l(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ki:jo,this.isPropagationStopped=jo,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),i}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=kn(ii),ci=b({},ii,{view:0,detail:0}),ee=kn(ci),ui,It,Rn,ji=b({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rn&&(Rn&&n.type==="mousemove"?(ui=n.screenX-Rn.screenX,It=n.screenY-Rn.screenY):It=ui=0,Rn=n),ui)},movementY:function(n){return"movementY"in n?n.movementY:It}}),eo=kn(ji),mo=b({},ji,{dataTransfer:0}),go=kn(mo),Me=b({},ci,{relatedTarget:0}),lt=kn(Me),Ht=b({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),We=kn(Ht),Tn=b({},ii,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),en=kn(Tn),In=b({},ii,{data:0}),vi=kn(In),Zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fx(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Wl[n])?!!i[n]:!1}function eu(){return fx}var px=b({},ci,{key:function(n){if(n.key){var i=Zn[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ri(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qo[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(n){return n.type==="keypress"?ri(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ri(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hx=kn(px),mx=b({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=kn(mx),gx=b({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),yx=kn(gx),vx=b({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),xx=kn(vx),bx=b({},ji,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Sx=kn(bx),Tx=b({},ii,{newState:0,oldState:0}),wx=kn(Tx),Cx=[9,13,27,32],tu=F&&"CompositionEvent"in window,Js=null;F&&"documentMode"in document&&(Js=document.documentMode);var Ex=F&&"TextEvent"in window&&!Js,gp=F&&(!tu||Js&&8<Js&&11>=Js),yp=" ",vp=!1;function xp(n,i){switch(n){case"keyup":return Cx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ql=!1;function _x(n,i){switch(n){case"compositionend":return bp(i);case"keypress":return i.which!==32?null:(vp=!0,yp);case"textInput":return n=i.data,n===yp&&vp?null:n;default:return null}}function Nx(n,i){if(Ql)return n==="compositionend"||!tu&&xp(n,i)?(n=Zi(),Kt=sn=$e=null,Ql=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gp&&i.locale!=="ko"?null:i.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ax[n.type]:i==="textarea"}function Tp(n,i,l,a){Sn?on?on.push(a):on=[a]:Sn=a,i=Jr(i,"onChange"),0<i.length&&(l=new un("onChange","change",null,l,a),n.push({event:l,listeners:i}))}var Ks=null,Xs=null;function Mx(n){o0(n,0)}function sr(n){var i=xl(n);if(Jl(i))return n}function wp(n,i){if(n==="change")return i}var Cp=!1;if(F){var nu;if(F){var iu="oninput"in document;if(!iu){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),iu=typeof Ep.oninput=="function"}nu=iu}else nu=!1;Cp=nu&&(!document.documentMode||9<document.documentMode)}function _p(){Ks&&(Ks.detachEvent("onpropertychange",Np),Xs=Ks=null)}function Np(n){if(n.propertyName==="value"&&sr(Xs)){var i=[];Tp(i,Xs,n,mt(n)),Jt(Mx,i)}}function kx(n,i,l){n==="focusin"?(_p(),Ks=i,Xs=l,Ks.attachEvent("onpropertychange",Np)):n==="focusout"&&_p()}function Rx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sr(Xs)}function Ix(n,i){if(n==="click")return sr(i)}function zx(n,i){if(n==="input"||n==="change")return sr(i)}function Dx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xi=typeof Object.is=="function"?Object.is:Dx;function Ws(n,i){if(xi(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var h=l[a];if(!qe.call(i,h)||!xi(n[h],i[h]))return!1}return!0}function Ap(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mp(n,i){var l=Ap(n);n=0;for(var a;l;){if(l.nodeType===3){if(a=n+l.textContent.length,n<=i&&a>=i)return{node:l,offset:i-n};n=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ap(l)}}function kp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?kp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Rp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Oo(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Oo(n.document)}return i}function ou(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Ux=F&&"documentMode"in document&&11>=document.documentMode,Zl=null,lu=null,Qs=null,su=!1;function Ip(n,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;su||Zl==null||Zl!==Oo(a)||(a=Zl,"selectionStart"in a&&ou(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Qs&&Ws(Qs,a)||(Qs=a,a=Jr(lu,"onSelect"),0<a.length&&(i=new un("onSelect","select",null,i,l),n.push({event:i,listeners:a}),i.target=Zl)))}function Tl(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var es={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},au={},zp={};F&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function wl(n){if(au[n])return au[n];if(!es[n])return n;var i=es[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in zp)return au[n]=i[l];return n}var Dp=wl("animationend"),Up=wl("animationiteration"),Lp=wl("animationstart"),Lx=wl("transitionrun"),Fx=wl("transitionstart"),Px=wl("transitioncancel"),Fp=wl("transitionend"),Pp=new Map,ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ru.push("scrollEnd");function qi(n,i){Pp.set(n,i),qn(i,[n])}var ar=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ri=[],ts=0,cu=0;function rr(){for(var n=ts,i=cu=ts=0;i<n;){var l=Ri[i];Ri[i++]=null;var a=Ri[i];Ri[i++]=null;var h=Ri[i];Ri[i++]=null;var y=Ri[i];if(Ri[i++]=null,a!==null&&h!==null){var S=a.pending;S===null?h.next=h:(h.next=S.next,S.next=h),a.pending=h}y!==0&&Bp(l,h,y)}}function cr(n,i,l,a){Ri[ts++]=n,Ri[ts++]=i,Ri[ts++]=l,Ri[ts++]=a,cu|=a,n.lanes|=a,n=n.alternate,n!==null&&(n.lanes|=a)}function uu(n,i,l,a){return cr(n,i,l,a),ur(n)}function Cl(n,i){return cr(n,null,null,i),ur(n)}function Bp(n,i,l){n.lanes|=l;var a=n.alternate;a!==null&&(a.lanes|=l);for(var h=!1,y=n.return;y!==null;)y.childLanes|=l,a=y.alternate,a!==null&&(a.childLanes|=l),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(h=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,h&&i!==null&&(h=31-Ke(l),n=y.hiddenUpdates,a=n[h],a===null?n[h]=[i]:a.push(i),i.lane=l|536870912),y):null}function ur(n){if(50<ba)throw ba=0,xd=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ns={};function Bx(n,i,l,a){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(n,i,l,a){return new Bx(n,i,l,a)}function du(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yo(n,i){var l=n.alternate;return l===null?(l=bi(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Op(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function dr(n,i,l,a,h,y){var S=0;if(a=n,typeof n=="function")du(n)&&(S=1);else if(typeof n=="string")S=jb(n,l,Be.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Ae:return n=bi(31,l,i,h),n.elementType=Ae,n.lanes=y,n;case V:return El(l.children,h,y,i);case G:S=8,h|=24;break;case J:return n=bi(12,l,i,h|2),n.elementType=J,n.lanes=y,n;case ze:return n=bi(13,l,i,h),n.elementType=ze,n.lanes=y,n;case De:return n=bi(19,l,i,h),n.elementType=De,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:S=10;break e;case fe:S=9;break e;case ge:S=11;break e;case we:S=14;break e;case ot:S=16,a=null;break e}S=29,l=Error(s(130,n===null?"null":typeof n,"")),a=null}return i=bi(S,l,i,h),i.elementType=n,i.type=a,i.lanes=y,i}function El(n,i,l,a){return n=bi(7,n,a,i),n.lanes=l,n}function fu(n,i,l){return n=bi(6,n,null,i),n.lanes=l,n}function Hp(n){var i=bi(18,null,null,0);return i.stateNode=n,i}function pu(n,i,l){return i=bi(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Gp=new WeakMap;function Ii(n,i){if(typeof n=="object"&&n!==null){var l=Gp.get(n);return l!==void 0?l:(i={value:n,source:i,stack:R(i)},Gp.set(n,i),i)}return{value:n,source:i,stack:R(i)}}var is=[],os=0,fr=null,Zs=0,zi=[],Di=0,$o=null,to=1,no="";function vo(n,i){is[os++]=Zs,is[os++]=fr,fr=n,Zs=i}function Vp(n,i,l){zi[Di++]=to,zi[Di++]=no,zi[Di++]=$o,$o=n;var a=to;n=no;var h=32-Ke(a)-1;a&=~(1<<h),l+=1;var y=32-Ke(i)+h;if(30<y){var S=h-h%5;y=(a&(1<<S)-1).toString(32),a>>=S,h-=S,to=1<<32-Ke(i)+h|l<<h|a,no=y+n}else to=1<<y|l<<h|a,no=n}function hu(n){n.return!==null&&(vo(n,1),Vp(n,1,0))}function mu(n){for(;n===fr;)fr=is[--os],is[os]=null,Zs=is[--os],is[os]=null;for(;n===$o;)$o=zi[--Di],zi[Di]=null,no=zi[--Di],zi[Di]=null,to=zi[--Di],zi[Di]=null}function jp(n,i){zi[Di++]=to,zi[Di++]=no,zi[Di++]=$o,to=i.id,no=i.overflow,$o=n}var $n=null,gn=null,qt=!1,Yo=null,Ui=!1,gu=Error(s(519));function Jo(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ea(Ii(i,n)),gu}function qp(n){var i=n.stateNode,l=n.type,a=n.memoizedProps;switch(i[Ye]=n,i[xt]=a,l){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(l=0;l<Ta.length;l++)Ot(Ta[l],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),lr(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),ho(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||r0(i.textContent,l)?(a.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),a.onScroll!=null&&Ot("scroll",i),a.onScrollEnd!=null&&Ot("scrollend",i),a.onClick!=null&&(i.onclick=tt),i=!0):i=!1,i||Jo(n,!0)}function $p(n){for($n=n.return;$n;)switch($n.tag){case 5:case 31:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:$n=$n.return}}function ls(n){if(n!==$n)return!1;if(!qt)return $p(n),qt=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Dd(n.type,n.memoizedProps)),l=!l),l&&gn&&Jo(n),$p(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));gn=y0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));gn=y0(n)}else i===27?(i=gn,rl(n.type)?(n=Bd,Bd=null,gn=n):gn=i):gn=$n?Fi(n.stateNode.nextSibling):null;return!0}function _l(){gn=$n=null,qt=!1}function yu(){var n=Yo;return n!==null&&(hi===null?hi=n:hi.push.apply(hi,n),Yo=null),n}function ea(n){Yo===null?Yo=[n]:Yo.push(n)}var vu=z(null),Nl=null,xo=null;function Ko(n,i,l){ve(vu,i._currentValue),i._currentValue=l}function bo(n){n._currentValue=vu.current,se(vu)}function xu(n,i,l){for(;n!==null;){var a=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),n===l)break;n=n.return}}function bu(n,i,l,a){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var y=h.dependencies;if(y!==null){var S=h.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=h;for(var D=0;D<i.length;D++)if(N.context===i[D]){y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),xu(y.return,l,n),a||(S=null);break e}y=N.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(s(341));S.lanes|=l,y=S.alternate,y!==null&&(y.lanes|=l),xu(S,l,n),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===n){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function ss(n,i,l,a){n=null;for(var h=i,y=!1;h!==null;){if(!y){if((h.flags&524288)!==0)y=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var N=h.type;xi(h.pendingProps.value,S.value)||(n!==null?n.push(N):n=[N])}}else if(h===P.current){if(S=h.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Na):n=[Na])}h=h.return}n!==null&&bu(i,n,l,a),i.flags|=262144}function pr(n){for(n=n.firstContext;n!==null;){if(!xi(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Al(n){Nl=n,xo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Yn(n){return Yp(Nl,n)}function hr(n,i){return Nl===null&&Al(n),Yp(n,i)}function Yp(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},xo===null){if(n===null)throw Error(s(308));xo=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else xo=xo.next=i;return l}var Ox=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,a){n.push(a)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},Hx=e.unstable_scheduleCallback,Gx=e.unstable_NormalPriority,zn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Su(){return{controller:new Ox,data:new Map,refCount:0}}function ta(n){n.refCount--,n.refCount===0&&Hx(Gx,function(){n.controller.abort()})}var na=null,Tu=0,as=0,rs=null;function Vx(n,i){if(na===null){var l=na=[];Tu=0,as=Ed(),rs={status:"pending",value:void 0,then:function(a){l.push(a)}}}return Tu++,i.then(Jp,Jp),i}function Jp(){if(--Tu===0&&na!==null){rs!==null&&(rs.status="fulfilled");var n=na;na=null,as=0,rs=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function jx(n,i){var l=[],a={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return n.then(function(){a.status="fulfilled",a.value=i;for(var h=0;h<l.length;h++)(0,l[h])(i)},function(h){for(a.status="rejected",a.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),a}var Kp=j.S;j.S=function(n,i){Im=xe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vx(n,i),Kp!==null&&Kp(n,i)};var Ml=z(null);function wu(){var n=Ml.current;return n!==null?n:hn.pooledCache}function mr(n,i){i===null?ve(Ml,Ml.current):ve(Ml,i.pool)}function Xp(){var n=wu();return n===null?null:{parent:zn._currentValue,pool:n}}var cs=Error(s(460)),Cu=Error(s(474)),gr=Error(s(542)),yr={then:function(){}};function Wp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qp(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(tt,tt),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,eh(n),n;default:if(typeof i.status=="string")i.then(tt,tt);else{if(n=hn,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(a){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=a}},function(a){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,eh(n),n}throw Rl=i,cs}}function kl(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Rl=l,cs):l}}var Rl=null;function Zp(){if(Rl===null)throw Error(s(459));var n=Rl;return Rl=null,n}function eh(n){if(n===cs||n===gr)throw Error(s(483))}var us=null,ia=0;function vr(n){var i=ia;return ia+=1,us===null&&(us=[]),Qp(us,n,i)}function oa(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function xr(n,i){throw i.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function th(n){function i(q,O){if(n){var K=q.deletions;K===null?(q.deletions=[O],q.flags|=16):K.push(O)}}function l(q,O){if(!n)return null;for(;O!==null;)i(q,O),O=O.sibling;return null}function a(q){for(var O=new Map;q!==null;)q.key!==null?O.set(q.key,q):O.set(q.index,q),q=q.sibling;return O}function h(q,O){return q=yo(q,O),q.index=0,q.sibling=null,q}function y(q,O,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<O?(q.flags|=67108866,O):K):(q.flags|=67108866,O)):(q.flags|=1048576,O)}function S(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function N(q,O,K,Te){return O===null||O.tag!==6?(O=fu(K,q.mode,Te),O.return=q,O):(O=h(O,K),O.return=q,O)}function D(q,O,K,Te){var gt=K.type;return gt===V?me(q,O,K.props.children,Te,K.key):O!==null&&(O.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===ot&&kl(gt)===O.type)?(O=h(O,K.props),oa(O,K),O.return=q,O):(O=dr(K.type,K.key,K.props,null,q.mode,Te),oa(O,K),O.return=q,O)}function X(q,O,K,Te){return O===null||O.tag!==4||O.stateNode.containerInfo!==K.containerInfo||O.stateNode.implementation!==K.implementation?(O=pu(K,q.mode,Te),O.return=q,O):(O=h(O,K.children||[]),O.return=q,O)}function me(q,O,K,Te,gt){return O===null||O.tag!==7?(O=El(K,q.mode,Te,gt),O.return=q,O):(O=h(O,K),O.return=q,O)}function Ce(q,O,K){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=fu(""+O,q.mode,K),O.return=q,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case A:return K=dr(O.type,O.key,O.props,null,q.mode,K),oa(K,O),K.return=q,K;case _:return O=pu(O,q.mode,K),O.return=q,O;case ot:return O=kl(O),Ce(q,O,K)}if(Mt(O)||ut(O))return O=El(O,q.mode,K,null),O.return=q,O;if(typeof O.then=="function")return Ce(q,vr(O),K);if(O.$$typeof===ce)return Ce(q,hr(q,O),K);xr(q,O)}return null}function Z(q,O,K,Te){var gt=O!==null?O.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return gt!==null?null:N(q,O,""+K,Te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return K.key===gt?D(q,O,K,Te):null;case _:return K.key===gt?X(q,O,K,Te):null;case ot:return K=kl(K),Z(q,O,K,Te)}if(Mt(K)||ut(K))return gt!==null?null:me(q,O,K,Te,null);if(typeof K.then=="function")return Z(q,O,vr(K),Te);if(K.$$typeof===ce)return Z(q,O,hr(q,K),Te);xr(q,K)}return null}function ae(q,O,K,Te,gt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return q=q.get(K)||null,N(O,q,""+Te,gt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case A:return q=q.get(Te.key===null?K:Te.key)||null,D(O,q,Te,gt);case _:return q=q.get(Te.key===null?K:Te.key)||null,X(O,q,Te,gt);case ot:return Te=kl(Te),ae(q,O,K,Te,gt)}if(Mt(Te)||ut(Te))return q=q.get(K)||null,me(O,q,Te,gt,null);if(typeof Te.then=="function")return ae(q,O,K,vr(Te),gt);if(Te.$$typeof===ce)return ae(q,O,K,hr(O,Te),gt);xr(O,Te)}return null}function st(q,O,K,Te){for(var gt=null,Xt=null,dt=O,Ut=O=0,Vt=null;dt!==null&&Ut<K.length;Ut++){dt.index>Ut?(Vt=dt,dt=null):Vt=dt.sibling;var Wt=Z(q,dt,K[Ut],Te);if(Wt===null){dt===null&&(dt=Vt);break}n&&dt&&Wt.alternate===null&&i(q,dt),O=y(Wt,O,Ut),Xt===null?gt=Wt:Xt.sibling=Wt,Xt=Wt,dt=Vt}if(Ut===K.length)return l(q,dt),qt&&vo(q,Ut),gt;if(dt===null){for(;Ut<K.length;Ut++)dt=Ce(q,K[Ut],Te),dt!==null&&(O=y(dt,O,Ut),Xt===null?gt=dt:Xt.sibling=dt,Xt=dt);return qt&&vo(q,Ut),gt}for(dt=a(dt);Ut<K.length;Ut++)Vt=ae(dt,q,Ut,K[Ut],Te),Vt!==null&&(n&&Vt.alternate!==null&&dt.delete(Vt.key===null?Ut:Vt.key),O=y(Vt,O,Ut),Xt===null?gt=Vt:Xt.sibling=Vt,Xt=Vt);return n&&dt.forEach(function(pl){return i(q,pl)}),qt&&vo(q,Ut),gt}function Ct(q,O,K,Te){if(K==null)throw Error(s(151));for(var gt=null,Xt=null,dt=O,Ut=O=0,Vt=null,Wt=K.next();dt!==null&&!Wt.done;Ut++,Wt=K.next()){dt.index>Ut?(Vt=dt,dt=null):Vt=dt.sibling;var pl=Z(q,dt,Wt.value,Te);if(pl===null){dt===null&&(dt=Vt);break}n&&dt&&pl.alternate===null&&i(q,dt),O=y(pl,O,Ut),Xt===null?gt=pl:Xt.sibling=pl,Xt=pl,dt=Vt}if(Wt.done)return l(q,dt),qt&&vo(q,Ut),gt;if(dt===null){for(;!Wt.done;Ut++,Wt=K.next())Wt=Ce(q,Wt.value,Te),Wt!==null&&(O=y(Wt,O,Ut),Xt===null?gt=Wt:Xt.sibling=Wt,Xt=Wt);return qt&&vo(q,Ut),gt}for(dt=a(dt);!Wt.done;Ut++,Wt=K.next())Wt=ae(dt,q,Ut,Wt.value,Te),Wt!==null&&(n&&Wt.alternate!==null&&dt.delete(Wt.key===null?Ut:Wt.key),O=y(Wt,O,Ut),Xt===null?gt=Wt:Xt.sibling=Wt,Xt=Wt);return n&&dt.forEach(function(t1){return i(q,t1)}),qt&&vo(q,Ut),gt}function pn(q,O,K,Te){if(typeof K=="object"&&K!==null&&K.type===V&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case A:e:{for(var gt=K.key;O!==null;){if(O.key===gt){if(gt=K.type,gt===V){if(O.tag===7){l(q,O.sibling),Te=h(O,K.props.children),Te.return=q,q=Te;break e}}else if(O.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===ot&&kl(gt)===O.type){l(q,O.sibling),Te=h(O,K.props),oa(Te,K),Te.return=q,q=Te;break e}l(q,O);break}else i(q,O);O=O.sibling}K.type===V?(Te=El(K.props.children,q.mode,Te,K.key),Te.return=q,q=Te):(Te=dr(K.type,K.key,K.props,null,q.mode,Te),oa(Te,K),Te.return=q,q=Te)}return S(q);case _:e:{for(gt=K.key;O!==null;){if(O.key===gt)if(O.tag===4&&O.stateNode.containerInfo===K.containerInfo&&O.stateNode.implementation===K.implementation){l(q,O.sibling),Te=h(O,K.children||[]),Te.return=q,q=Te;break e}else{l(q,O);break}else i(q,O);O=O.sibling}Te=pu(K,q.mode,Te),Te.return=q,q=Te}return S(q);case ot:return K=kl(K),pn(q,O,K,Te)}if(Mt(K))return st(q,O,K,Te);if(ut(K)){if(gt=ut(K),typeof gt!="function")throw Error(s(150));return K=gt.call(K),Ct(q,O,K,Te)}if(typeof K.then=="function")return pn(q,O,vr(K),Te);if(K.$$typeof===ce)return pn(q,O,hr(q,K),Te);xr(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,O!==null&&O.tag===6?(l(q,O.sibling),Te=h(O,K),Te.return=q,q=Te):(l(q,O),Te=fu(K,q.mode,Te),Te.return=q,q=Te),S(q)):l(q,O)}return function(q,O,K,Te){try{ia=0;var gt=pn(q,O,K,Te);return us=null,gt}catch(dt){if(dt===cs||dt===gr)throw dt;var Xt=bi(29,dt,null,q.mode);return Xt.lanes=Te,Xt.return=q,Xt}}}var Il=th(!0),nh=th(!1),Xo=!1;function Eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _u(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Wo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Qo(n,i,l){var a=n.updateQueue;if(a===null)return null;if(a=a.shared,(tn&2)!==0){var h=a.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),a.pending=i,i=ur(n),Bp(n,null,l),i}return cr(n,a,i,l),ur(n)}function la(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=n.pendingLanes,l|=a,i.lanes=l,En(n,l)}}function Nu(n,i){var l=n.updateQueue,a=n.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var h=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?h=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?h=y=i:y=y.next=i}else h=y=i;l={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:a.shared,callbacks:a.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Au=!1;function sa(){if(Au){var n=rs;if(n!==null)throw n}}function aa(n,i,l,a){Au=!1;var h=n.updateQueue;Xo=!1;var y=h.firstBaseUpdate,S=h.lastBaseUpdate,N=h.shared.pending;if(N!==null){h.shared.pending=null;var D=N,X=D.next;D.next=null,S===null?y=X:S.next=X,S=D;var me=n.alternate;me!==null&&(me=me.updateQueue,N=me.lastBaseUpdate,N!==S&&(N===null?me.firstBaseUpdate=X:N.next=X,me.lastBaseUpdate=D))}if(y!==null){var Ce=h.baseState;S=0,me=X=D=null,N=y;do{var Z=N.lane&-536870913,ae=Z!==N.lane;if(ae?(Gt&Z)===Z:(a&Z)===Z){Z!==0&&Z===as&&(Au=!0),me!==null&&(me=me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var st=n,Ct=N;Z=i;var pn=l;switch(Ct.tag){case 1:if(st=Ct.payload,typeof st=="function"){Ce=st.call(pn,Ce,Z);break e}Ce=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Ct.payload,Z=typeof st=="function"?st.call(pn,Ce,Z):st,Z==null)break e;Ce=b({},Ce,Z);break e;case 2:Xo=!0}}Z=N.callback,Z!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=h.callbacks,ae===null?h.callbacks=[Z]:ae.push(Z))}else ae={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},me===null?(X=me=ae,D=Ce):me=me.next=ae,S|=Z;if(N=N.next,N===null){if(N=h.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,h.lastBaseUpdate=ae,h.shared.pending=null}}while(!0);me===null&&(D=Ce),h.baseState=D,h.firstBaseUpdate=X,h.lastBaseUpdate=me,y===null&&(h.shared.lanes=0),il|=S,n.lanes=S,n.memoizedState=Ce}}function ih(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function oh(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)ih(l[n],i)}var ds=z(null),br=z(0);function lh(n,i){n=Mo,ve(br,n),ve(ds,i),Mo=n|i.baseLanes}function Mu(){ve(br,Mo),ve(ds,ds.current)}function ku(){Mo=br.current,se(ds),se(br)}var Si=z(null),Li=null;function Zo(n){var i=n.alternate;ve(An,An.current&1),ve(Si,n),Li===null&&(i===null||ds.current!==null||i.memoizedState!==null)&&(Li=n)}function Ru(n){ve(An,An.current),ve(Si,n),Li===null&&(Li=n)}function sh(n){n.tag===22?(ve(An,An.current),ve(Si,n),Li===null&&(Li=n)):el()}function el(){ve(An,An.current),ve(Si,Si.current)}function Ti(n){se(Si),Li===n&&(Li=null),se(An)}var An=z(0);function Sr(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Fd(l)||Pd(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var So=0,Dt=null,dn=null,Dn=null,Tr=!1,fs=!1,zl=!1,wr=0,ra=0,ps=null,qx=0;function _n(){throw Error(s(321))}function Iu(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!xi(n[l],i[l]))return!1;return!0}function zu(n,i,l,a,h,y){return So=y,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=n===null||n.memoizedState===null?Vh:Ju,zl=!1,y=l(a,h),zl=!1,fs&&(y=rh(i,l,a,h)),ah(n),y}function ah(n){j.H=da;var i=dn!==null&&dn.next!==null;if(So=0,Dn=dn=Dt=null,Tr=!1,ra=0,ps=null,i)throw Error(s(300));n===null||Un||(n=n.dependencies,n!==null&&pr(n)&&(Un=!0))}function rh(n,i,l,a){Dt=n;var h=0;do{if(fs&&(ps=null),ra=0,fs=!1,25<=h)throw Error(s(301));if(h+=1,Dn=dn=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}j.H=jh,y=i(l,a)}while(fs);return y}function $x(){var n=j.H,i=n.useState()[0];return i=typeof i.then=="function"?ca(i):i,n=n.useState()[0],(dn!==null?dn.memoizedState:null)!==n&&(Dt.flags|=1024),i}function Du(){var n=wr!==0;return wr=0,n}function Uu(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function Lu(n){if(Tr){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Tr=!1}So=0,Dn=dn=Dt=null,fs=!1,ra=wr=0,ps=null}function oi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Dt.memoizedState=Dn=n:Dn=Dn.next=n,Dn}function Mn(){if(dn===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=dn.next;var i=Dn===null?Dt.memoizedState:Dn.next;if(i!==null)Dn=i,dn=n;else{if(n===null)throw Dt.alternate===null?Error(s(467)):Error(s(310));dn=n,n={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},Dn===null?Dt.memoizedState=Dn=n:Dn=Dn.next=n}return Dn}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ca(n){var i=ra;return ra+=1,ps===null&&(ps=[]),n=Qp(ps,n,i),i=Dt,(Dn===null?i.memoizedState:Dn.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?Vh:Ju),n}function Er(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ca(n);if(n.$$typeof===ce)return Yn(n)}throw Error(s(438,String(n)))}function Fu(n){var i=null,l=Dt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Dt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Cr(),Dt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),a=0;a<n;a++)l[a]=Qe;return i.index++,l}function To(n,i){return typeof i=="function"?i(n):i}function _r(n){var i=Mn();return Pu(i,dn,n)}function Pu(n,i,l){var a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var h=n.baseQueue,y=a.pending;if(y!==null){if(h!==null){var S=h.next;h.next=y.next,y.next=S}i.baseQueue=h=y,a.pending=null}if(y=n.baseState,h===null)n.memoizedState=y;else{i=h.next;var N=S=null,D=null,X=i,me=!1;do{var Ce=X.lane&-536870913;if(Ce!==X.lane?(Gt&Ce)===Ce:(So&Ce)===Ce){var Z=X.revertLane;if(Z===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),Ce===as&&(me=!0);else if((So&Z)===Z){X=X.next,Z===as&&(me=!0);continue}else Ce={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(N=D=Ce,S=y):D=D.next=Ce,Dt.lanes|=Z,il|=Z;Ce=X.action,zl&&l(y,Ce),y=X.hasEagerState?X.eagerState:l(y,Ce)}else Z={lane:Ce,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(N=D=Z,S=y):D=D.next=Z,Dt.lanes|=Ce,il|=Ce;X=X.next}while(X!==null&&X!==i);if(D===null?S=y:D.next=N,!xi(y,n.memoizedState)&&(Un=!0,me&&(l=rs,l!==null)))throw l;n.memoizedState=y,n.baseState=S,n.baseQueue=D,a.lastRenderedState=y}return h===null&&(a.lanes=0),[n.memoizedState,a.dispatch]}function Bu(n){var i=Mn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var a=l.dispatch,h=l.pending,y=i.memoizedState;if(h!==null){l.pending=null;var S=h=h.next;do y=n(y,S.action),S=S.next;while(S!==h);xi(y,i.memoizedState)||(Un=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,a]}function ch(n,i,l){var a=Dt,h=Mn(),y=qt;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=i();var S=!xi((dn||h).memoizedState,l);if(S&&(h.memoizedState=l,Un=!0),h=h.queue,Gu(fh.bind(null,a,h,n),[n]),h.getSnapshot!==i||S||Dn!==null&&Dn.memoizedState.tag&1){if(a.flags|=2048,hs(9,{destroy:void 0},dh.bind(null,a,h,l,i),null),hn===null)throw Error(s(349));y||(So&127)!==0||uh(a,i,l)}return l}function uh(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Dt.updateQueue,i===null?(i=Cr(),Dt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function dh(n,i,l,a){i.value=l,i.getSnapshot=a,ph(i)&&hh(n)}function fh(n,i,l){return l(function(){ph(i)&&hh(n)})}function ph(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!xi(n,l)}catch{return!0}}function hh(n){var i=Cl(n,2);i!==null&&mi(i,n,2)}function Ou(n){var i=oi();if(typeof n=="function"){var l=n;if(n=l(),zl){Fe(!0);try{l()}finally{Fe(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:n},i}function mh(n,i,l,a){return n.baseState=l,Pu(n,dn,typeof a=="function"?a:To)}function Yx(n,i,l,a,h){if(Mr(n))throw Error(s(485));if(n=i.action,n!==null){var y={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};j.T!==null?l(!0):y.isTransition=!1,a(y),l=i.pending,l===null?(y.next=i.pending=y,gh(i,y)):(y.next=l.next,i.pending=l.next=y)}}function gh(n,i){var l=i.action,a=i.payload,h=n.state;if(i.isTransition){var y=j.T,S={};j.T=S;try{var N=l(h,a),D=j.S;D!==null&&D(S,N),yh(n,i,N)}catch(X){Hu(n,i,X)}finally{y!==null&&S.types!==null&&(y.types=S.types),j.T=y}}else try{y=l(h,a),yh(n,i,y)}catch(X){Hu(n,i,X)}}function yh(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){vh(n,i,a)},function(a){return Hu(n,i,a)}):vh(n,i,l)}function vh(n,i,l){i.status="fulfilled",i.value=l,xh(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,gh(n,l)))}function Hu(n,i,l){var a=n.pending;if(n.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,xh(i),i=i.next;while(i!==a)}n.action=null}function xh(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function bh(n,i){return i}function Sh(n,i){if(qt){var l=hn.formState;if(l!==null){e:{var a=Dt;if(qt){if(gn){t:{for(var h=gn,y=Ui;h.nodeType!==8;){if(!y){h=null;break t}if(h=Fi(h.nextSibling),h===null){h=null;break t}}y=h.data,h=y==="F!"||y==="F"?h:null}if(h){gn=Fi(h.nextSibling),a=h.data==="F!";break e}}Jo(a)}a=!1}a&&(i=l[0])}}return l=oi(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:i},l.queue=a,l=Oh.bind(null,Dt,a),a.dispatch=l,a=Ou(!1),y=Yu.bind(null,Dt,!1,a.queue),a=oi(),h={state:i,dispatch:null,action:n,pending:null},a.queue=h,l=Yx.bind(null,Dt,h,y,l),h.dispatch=l,a.memoizedState=n,[i,l,!1]}function Th(n){var i=Mn();return wh(i,dn,n)}function wh(n,i,l){if(i=Pu(n,i,bh)[0],n=_r(To)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=ca(i)}catch(S){throw S===cs?gr:S}else a=i;i=Mn();var h=i.queue,y=h.dispatch;return l!==i.memoizedState&&(Dt.flags|=2048,hs(9,{destroy:void 0},Jx.bind(null,h,l),null)),[a,y,n]}function Jx(n,i){n.action=i}function Ch(n){var i=Mn(),l=dn;if(l!==null)return wh(i,l,n);Mn(),i=i.memoizedState,l=Mn();var a=l.queue.dispatch;return l.memoizedState=n,[i,a,!1]}function hs(n,i,l,a){return n={tag:n,create:l,deps:a,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=Cr(),Dt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(a=l.next,l.next=n,n.next=a,i.lastEffect=n),n}function Eh(){return Mn().memoizedState}function Nr(n,i,l,a){var h=oi();Dt.flags|=n,h.memoizedState=hs(1|i,{destroy:void 0},l,a===void 0?null:a)}function Ar(n,i,l,a){var h=Mn();a=a===void 0?null:a;var y=h.memoizedState.inst;dn!==null&&a!==null&&Iu(a,dn.memoizedState.deps)?h.memoizedState=hs(i,y,l,a):(Dt.flags|=n,h.memoizedState=hs(1|i,y,l,a))}function _h(n,i){Nr(8390656,8,n,i)}function Gu(n,i){Ar(2048,8,n,i)}function Kx(n){Dt.flags|=4;var i=Dt.updateQueue;if(i===null)i=Cr(),Dt.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function Nh(n){var i=Mn().memoizedState;return Kx({ref:i,nextImpl:n}),function(){if((tn&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ah(n,i){return Ar(4,2,n,i)}function Mh(n,i){return Ar(4,4,n,i)}function kh(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Rh(n,i,l){l=l!=null?l.concat([n]):null,Ar(4,4,kh.bind(null,i,n),l)}function Vu(){}function Ih(n,i){var l=Mn();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&Iu(i,a[1])?a[0]:(l.memoizedState=[n,i],n)}function zh(n,i){var l=Mn();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&Iu(i,a[1]))return a[0];if(a=n(),zl){Fe(!0);try{n()}finally{Fe(!1)}}return l.memoizedState=[a,i],a}function ju(n,i,l){return l===void 0||(So&1073741824)!==0&&(Gt&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=Dm(),Dt.lanes|=n,il|=n,l)}function Dh(n,i,l,a){return xi(l,i)?l:ds.current!==null?(n=ju(n,l,a),xi(n,i)||(Un=!0),n):(So&42)===0||(So&1073741824)!==0&&(Gt&261930)===0?(Un=!0,n.memoizedState=l):(n=Dm(),Dt.lanes|=n,il|=n,i)}function Uh(n,i,l,a,h){var y=Ee.p;Ee.p=y!==0&&8>y?y:8;var S=j.T,N={};j.T=N,Yu(n,!1,i,l);try{var D=h(),X=j.S;if(X!==null&&X(N,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var me=jx(D,a);ua(n,i,me,Ei(n))}else ua(n,i,a,Ei(n))}catch(Ce){ua(n,i,{then:function(){},status:"rejected",reason:Ce},Ei())}finally{Ee.p=y,S!==null&&N.types!==null&&(S.types=N.types),j.T=S}}function Xx(){}function qu(n,i,l,a){if(n.tag!==5)throw Error(s(476));var h=Lh(n).queue;Uh(n,h,i,le,l===null?Xx:function(){return Fh(n),l(a)})}function Lh(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:le},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Fh(n){var i=Lh(n);i.next===null&&(i=n.alternate.memoizedState),ua(n,i.next.queue,{},Ei())}function $u(){return Yn(Na)}function Ph(){return Mn().memoizedState}function Bh(){return Mn().memoizedState}function Wx(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=Ei();n=Wo(l);var a=Qo(i,n,l);a!==null&&(mi(a,i,l),la(a,i,l)),i={cache:Su()},n.payload=i;return}i=i.return}}function Qx(n,i,l){var a=Ei();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mr(n)?Hh(i,l):(l=uu(n,i,l,a),l!==null&&(mi(l,n,a),Gh(l,i,a)))}function Oh(n,i,l){var a=Ei();ua(n,i,l,a)}function ua(n,i,l,a){var h={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mr(n))Hh(i,h);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,N=y(S,l);if(h.hasEagerState=!0,h.eagerState=N,xi(N,S))return cr(n,i,h,0),hn===null&&rr(),!1}catch{}if(l=uu(n,i,h,a),l!==null)return mi(l,n,a),Gh(l,i,a),!0}return!1}function Yu(n,i,l,a){if(a={lane:2,revertLane:Ed(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Mr(n)){if(i)throw Error(s(479))}else i=uu(n,l,a,2),i!==null&&mi(i,n,2)}function Mr(n){var i=n.alternate;return n===Dt||i!==null&&i===Dt}function Hh(n,i){fs=Tr=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Gh(n,i,l){if((l&4194048)!==0){var a=i.lanes;a&=n.pendingLanes,l|=a,i.lanes=l,En(n,l)}}var da={readContext:Yn,use:Er,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};da.useEffectEvent=_n;var Vh={readContext:Yn,use:Er,useCallback:function(n,i){return oi().memoizedState=[n,i===void 0?null:i],n},useContext:Yn,useEffect:_h,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Nr(4194308,4,kh.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Nr(4194308,4,n,i)},useInsertionEffect:function(n,i){Nr(4,2,n,i)},useMemo:function(n,i){var l=oi();i=i===void 0?null:i;var a=n();if(zl){Fe(!0);try{n()}finally{Fe(!1)}}return l.memoizedState=[a,i],a},useReducer:function(n,i,l){var a=oi();if(l!==void 0){var h=l(i);if(zl){Fe(!0);try{l(i)}finally{Fe(!1)}}}else h=i;return a.memoizedState=a.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},a.queue=n,n=n.dispatch=Qx.bind(null,Dt,n),[a.memoizedState,n]},useRef:function(n){var i=oi();return n={current:n},i.memoizedState=n},useState:function(n){n=Ou(n);var i=n.queue,l=Oh.bind(null,Dt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:Vu,useDeferredValue:function(n,i){var l=oi();return ju(l,n,i)},useTransition:function(){var n=Ou(!1);return n=Uh.bind(null,Dt,n.queue,!0,!1),oi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var a=Dt,h=oi();if(qt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),hn===null)throw Error(s(349));(Gt&127)!==0||uh(a,i,l)}h.memoizedState=l;var y={value:l,getSnapshot:i};return h.queue=y,_h(fh.bind(null,a,y,n),[n]),a.flags|=2048,hs(9,{destroy:void 0},dh.bind(null,a,y,l,i),null),l},useId:function(){var n=oi(),i=hn.identifierPrefix;if(qt){var l=no,a=to;l=(a&~(1<<32-Ke(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=wr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=qx++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:$u,useFormState:Sh,useActionState:Sh,useOptimistic:function(n){var i=oi();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Yu.bind(null,Dt,!0,l),l.dispatch=i,[n,i]},useMemoCache:Fu,useCacheRefresh:function(){return oi().memoizedState=Wx.bind(null,Dt)},useEffectEvent:function(n){var i=oi(),l={impl:n};return i.memoizedState=l,function(){if((tn&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Ju={readContext:Yn,use:Er,useCallback:Ih,useContext:Yn,useEffect:Gu,useImperativeHandle:Rh,useInsertionEffect:Ah,useLayoutEffect:Mh,useMemo:zh,useReducer:_r,useRef:Eh,useState:function(){return _r(To)},useDebugValue:Vu,useDeferredValue:function(n,i){var l=Mn();return Dh(l,dn.memoizedState,n,i)},useTransition:function(){var n=_r(To)[0],i=Mn().memoizedState;return[typeof n=="boolean"?n:ca(n),i]},useSyncExternalStore:ch,useId:Ph,useHostTransitionStatus:$u,useFormState:Th,useActionState:Th,useOptimistic:function(n,i){var l=Mn();return mh(l,dn,n,i)},useMemoCache:Fu,useCacheRefresh:Bh};Ju.useEffectEvent=Nh;var jh={readContext:Yn,use:Er,useCallback:Ih,useContext:Yn,useEffect:Gu,useImperativeHandle:Rh,useInsertionEffect:Ah,useLayoutEffect:Mh,useMemo:zh,useReducer:Bu,useRef:Eh,useState:function(){return Bu(To)},useDebugValue:Vu,useDeferredValue:function(n,i){var l=Mn();return dn===null?ju(l,n,i):Dh(l,dn.memoizedState,n,i)},useTransition:function(){var n=Bu(To)[0],i=Mn().memoizedState;return[typeof n=="boolean"?n:ca(n),i]},useSyncExternalStore:ch,useId:Ph,useHostTransitionStatus:$u,useFormState:Ch,useActionState:Ch,useOptimistic:function(n,i){var l=Mn();return dn!==null?mh(l,dn,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Fu,useCacheRefresh:Bh};jh.useEffectEvent=Nh;function Ku(n,i,l,a){i=n.memoizedState,l=l(a,i),l=l==null?i:b({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Xu={enqueueSetState:function(n,i,l){n=n._reactInternals;var a=Ei(),h=Wo(a);h.payload=i,l!=null&&(h.callback=l),i=Qo(n,h,a),i!==null&&(mi(i,n,a),la(i,n,a))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var a=Ei(),h=Wo(a);h.tag=1,h.payload=i,l!=null&&(h.callback=l),i=Qo(n,h,a),i!==null&&(mi(i,n,a),la(i,n,a))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Ei(),a=Wo(l);a.tag=2,i!=null&&(a.callback=i),i=Qo(n,a,l),i!==null&&(mi(i,n,l),la(i,n,l))}};function qh(n,i,l,a,h,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(a,y,S):i.prototype&&i.prototype.isPureReactComponent?!Ws(l,a)||!Ws(h,y):!0}function $h(n,i,l,a){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==n&&Xu.enqueueReplaceState(i,i.state,null)}function Dl(n,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(n=n.defaultProps){l===i&&(l=b({},l));for(var h in n)l[h]===void 0&&(l[h]=n[h])}return l}function Yh(n){ar(n)}function Jh(n){console.error(n)}function Kh(n){ar(n)}function kr(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function Xh(n,i,l){try{var a=n.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wu(n,i,l){return l=Wo(l),l.tag=3,l.payload={element:null},l.callback=function(){kr(n,i)},l}function Wh(n){return n=Wo(n),n.tag=3,n}function Qh(n,i,l,a){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var y=a.value;n.payload=function(){return h(y)},n.callback=function(){Xh(i,l,a)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Xh(i,l,a),typeof h!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})})}function Zx(n,i,l,a,h){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&ss(i,l,h,!0),l=Si.current,l!==null){switch(l.tag){case 31:case 13:return Li===null?Gr():l.alternate===null&&Nn===0&&(Nn=3),l.flags&=-257,l.flags|=65536,l.lanes=h,a===yr?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),Td(n,a,h)),!1;case 22:return l.flags|=65536,a===yr?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),Td(n,a,h)),!1}throw Error(s(435,l.tag))}return Td(n,a,h),Gr(),!1}if(qt)return i=Si.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,a!==gu&&(n=Error(s(422),{cause:a}),ea(Ii(n,l)))):(a!==gu&&(i=Error(s(423),{cause:a}),ea(Ii(i,l))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,a=Ii(a,l),h=Wu(n.stateNode,a,h),Nu(n,h),Nn!==4&&(Nn=2)),!1;var y=Error(s(520),{cause:a});if(y=Ii(y,l),xa===null?xa=[y]:xa.push(y),Nn!==4&&(Nn=2),i===null)return!0;a=Ii(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=h&-h,l.lanes|=n,n=Wu(l.stateNode,a,n),Nu(l,n),!1;case 1:if(i=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ol===null||!ol.has(y))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Wh(h),Qh(h,n,l,a),Nu(l,h),!1}l=l.return}while(l!==null);return!1}var Qu=Error(s(461)),Un=!1;function Jn(n,i,l,a){i.child=n===null?nh(i,null,l,a):Il(i,n.child,l,a)}function Zh(n,i,l,a,h){l=l.render;var y=i.ref;if("ref"in a){var S={};for(var N in a)N!=="ref"&&(S[N]=a[N])}else S=a;return Al(i),a=zu(n,i,l,S,y,h),N=Du(),n!==null&&!Un?(Uu(n,i,h),wo(n,i,h)):(qt&&N&&hu(i),i.flags|=1,Jn(n,i,a,h),i.child)}function em(n,i,l,a,h){if(n===null){var y=l.type;return typeof y=="function"&&!du(y)&&y.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=y,tm(n,i,y,a,h)):(n=dr(l.type,null,a,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,!sd(n,h)){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ws,l(S,a)&&n.ref===i.ref)return wo(n,i,h)}return i.flags|=1,n=yo(y,a),n.ref=i.ref,n.return=i,i.child=n}function tm(n,i,l,a,h){if(n!==null){var y=n.memoizedProps;if(Ws(y,a)&&n.ref===i.ref)if(Un=!1,i.pendingProps=a=y,sd(n,h))(n.flags&131072)!==0&&(Un=!0);else return i.lanes=n.lanes,wo(n,i,h)}return Zu(n,i,l,a,h)}function nm(n,i,l,a){var h=a.children,y=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,n!==null){for(a=i.child=n.child,h=0;a!==null;)h=h|a.lanes|a.childLanes,a=a.sibling;a=h&~y}else a=0,i.child=null;return im(n,i,y,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&mr(i,y!==null?y.cachePool:null),y!==null?lh(i,y):Mu(),sh(i);else return a=i.lanes=536870912,im(n,i,y!==null?y.baseLanes|l:l,l,a)}else y!==null?(mr(i,y.cachePool),lh(i,y),el(),i.memoizedState=null):(n!==null&&mr(i,null),Mu(),el());return Jn(n,i,h,l),i.child}function fa(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function im(n,i,l,a,h){var y=wu();return y=y===null?null:{parent:zn._currentValue,pool:y},i.memoizedState={baseLanes:l,cachePool:y},n!==null&&mr(i,null),Mu(),sh(i),n!==null&&ss(n,i,a,!0),i.childLanes=h,null}function Rr(n,i){return i=zr({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function om(n,i,l){return Il(i,n.child,null,l),n=Rr(i,i.pendingProps),n.flags|=2,Ti(i),i.memoizedState=null,n}function eb(n,i,l){var a=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(qt){if(a.mode==="hidden")return n=Rr(i,a),i.lanes=536870912,fa(null,n);if(Ru(i),(n=gn)?(n=g0(n,Ui),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:$o!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},l=Hp(n),l.return=i,i.child=l,$n=i,gn=null)):n=null,n===null)throw Jo(i);return i.lanes=536870912,null}return Rr(i,a)}var y=n.memoizedState;if(y!==null){var S=y.dehydrated;if(Ru(i),h)if(i.flags&256)i.flags&=-257,i=om(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Un||ss(n,i,l,!1),h=(l&n.childLanes)!==0,Un||h){if(a=hn,a!==null&&(S=ai(a,l),S!==0&&S!==y.retryLane))throw y.retryLane=S,Cl(n,S),mi(a,n,S),Qu;Gr(),i=om(n,i,l)}else n=y.treeContext,gn=Fi(S.nextSibling),$n=i,qt=!0,Yo=null,Ui=!1,n!==null&&jp(i,n),i=Rr(i,a),i.flags|=4096;return i}return n=yo(n.child,{mode:a.mode,children:a.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Ir(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function Zu(n,i,l,a,h){return Al(i),l=zu(n,i,l,a,void 0,h),a=Du(),n!==null&&!Un?(Uu(n,i,h),wo(n,i,h)):(qt&&a&&hu(i),i.flags|=1,Jn(n,i,l,h),i.child)}function lm(n,i,l,a,h,y){return Al(i),i.updateQueue=null,l=rh(i,a,l,h),ah(n),a=Du(),n!==null&&!Un?(Uu(n,i,y),wo(n,i,y)):(qt&&a&&hu(i),i.flags|=1,Jn(n,i,l,y),i.child)}function sm(n,i,l,a,h){if(Al(i),i.stateNode===null){var y=ns,S=l.contextType;typeof S=="object"&&S!==null&&(y=Yn(S)),y=new l(a,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Xu,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=a,y.state=i.memoizedState,y.refs={},Eu(i),S=l.contextType,y.context=typeof S=="object"&&S!==null?Yn(S):ns,y.state=i.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Ku(i,l,S,a),y.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Xu.enqueueReplaceState(y,y.state,null),aa(i,a,y,h),sa(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(n===null){y=i.stateNode;var N=i.memoizedProps,D=Dl(l,N);y.props=D;var X=y.context,me=l.contextType;S=ns,typeof me=="object"&&me!==null&&(S=Yn(me));var Ce=l.getDerivedStateFromProps;me=typeof Ce=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||X!==S)&&$h(i,y,a,S),Xo=!1;var Z=i.memoizedState;y.state=Z,aa(i,a,y,h),sa(),X=i.memoizedState,N||Z!==X||Xo?(typeof Ce=="function"&&(Ku(i,l,Ce,a),X=i.memoizedState),(D=Xo||qh(i,l,D,a,Z,X,S))?(me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=X),y.props=a,y.state=X,y.context=S,a=D):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{y=i.stateNode,_u(n,i),S=i.memoizedProps,me=Dl(l,S),y.props=me,Ce=i.pendingProps,Z=y.context,X=l.contextType,D=ns,typeof X=="object"&&X!==null&&(D=Yn(X)),N=l.getDerivedStateFromProps,(X=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Ce||Z!==D)&&$h(i,y,a,D),Xo=!1,Z=i.memoizedState,y.state=Z,aa(i,a,y,h),sa();var ae=i.memoizedState;S!==Ce||Z!==ae||Xo||n!==null&&n.dependencies!==null&&pr(n.dependencies)?(typeof N=="function"&&(Ku(i,l,N,a),ae=i.memoizedState),(me=Xo||qh(i,l,me,a,Z,ae,D)||n!==null&&n.dependencies!==null&&pr(n.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,ae,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,ae,D)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&Z===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Z===n.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=ae),y.props=a,y.state=ae,y.context=D,a=me):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&Z===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Z===n.memoizedState||(i.flags|=1024),a=!1)}return y=a,Ir(n,i),a=(i.flags&128)!==0,y||a?(y=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,n!==null&&a?(i.child=Il(i,n.child,null,h),i.child=Il(i,null,l,h)):Jn(n,i,l,h),i.memoizedState=y.state,n=i.child):n=wo(n,i,h),n}function am(n,i,l,a){return _l(),i.flags|=256,Jn(n,i,l,a),i.child}var ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function td(n){return{baseLanes:n,cachePool:Xp()}}function nd(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=Ci),n}function rm(n,i,l){var a=i.pendingProps,h=!1,y=(i.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(An.current&2)!==0),S&&(h=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,n===null){if(qt){if(h?Zo(i):el(),(n=gn)?(n=g0(n,Ui),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:$o!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},l=Hp(n),l.return=i,i.child=l,$n=i,gn=null)):n=null,n===null)throw Jo(i);return Pd(n)?i.lanes=32:i.lanes=536870912,null}var N=a.children;return a=a.fallback,h?(el(),h=i.mode,N=zr({mode:"hidden",children:N},h),a=El(a,h,l,null),N.return=i,a.return=i,N.sibling=a,i.child=N,a=i.child,a.memoizedState=td(l),a.childLanes=nd(n,S,l),i.memoizedState=ed,fa(null,a)):(Zo(i),id(i,N))}var D=n.memoizedState;if(D!==null&&(N=D.dehydrated,N!==null)){if(y)i.flags&256?(Zo(i),i.flags&=-257,i=od(n,i,l)):i.memoizedState!==null?(el(),i.child=n.child,i.flags|=128,i=null):(el(),N=a.fallback,h=i.mode,a=zr({mode:"visible",children:a.children},h),N=El(N,h,l,null),N.flags|=2,a.return=i,N.return=i,a.sibling=N,i.child=a,Il(i,n.child,null,l),a=i.child,a.memoizedState=td(l),a.childLanes=nd(n,S,l),i.memoizedState=ed,i=fa(null,a));else if(Zo(i),Pd(N)){if(S=N.nextSibling&&N.nextSibling.dataset,S)var X=S.dgst;S=X,a=Error(s(419)),a.stack="",a.digest=S,ea({value:a,source:null,stack:null}),i=od(n,i,l)}else if(Un||ss(n,i,l,!1),S=(l&n.childLanes)!==0,Un||S){if(S=hn,S!==null&&(a=ai(S,l),a!==0&&a!==D.retryLane))throw D.retryLane=a,Cl(n,a),mi(S,n,a),Qu;Fd(N)||Gr(),i=od(n,i,l)}else Fd(N)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,gn=Fi(N.nextSibling),$n=i,qt=!0,Yo=null,Ui=!1,n!==null&&jp(i,n),i=id(i,a.children),i.flags|=4096);return i}return h?(el(),N=a.fallback,h=i.mode,D=n.child,X=D.sibling,a=yo(D,{mode:"hidden",children:a.children}),a.subtreeFlags=D.subtreeFlags&65011712,X!==null?N=yo(X,N):(N=El(N,h,l,null),N.flags|=2),N.return=i,a.return=i,a.sibling=N,i.child=a,fa(null,a),a=i.child,N=n.child.memoizedState,N===null?N=td(l):(h=N.cachePool,h!==null?(D=zn._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=Xp(),N={baseLanes:N.baseLanes|l,cachePool:h}),a.memoizedState=N,a.childLanes=nd(n,S,l),i.memoizedState=ed,fa(n.child,a)):(Zo(i),l=n.child,n=l.sibling,l=yo(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,n!==null&&(S=i.deletions,S===null?(i.deletions=[n],i.flags|=16):S.push(n)),i.child=l,i.memoizedState=null,l)}function id(n,i){return i=zr({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function zr(n,i){return n=bi(22,n,null,i),n.lanes=0,n}function od(n,i,l){return Il(i,n.child,null,l),n=id(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function cm(n,i,l){n.lanes|=i;var a=n.alternate;a!==null&&(a.lanes|=i),xu(n.return,i,l)}function ld(n,i,l,a,h,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:h,treeForkCount:y}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=a,S.tail=l,S.tailMode=h,S.treeForkCount=y)}function um(n,i,l){var a=i.pendingProps,h=a.revealOrder,y=a.tail;a=a.children;var S=An.current,N=(S&2)!==0;if(N?(S=S&1|2,i.flags|=128):S&=1,ve(An,S),Jn(n,i,a,l),a=qt?Zs:0,!N&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cm(n,l,i);else if(n.tag===19)cm(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(l=i.child,h=null;l!==null;)n=l.alternate,n!==null&&Sr(n)===null&&(h=l),l=l.sibling;l=h,l===null?(h=i.child,i.child=null):(h=l.sibling,l.sibling=null),ld(i,!1,h,l,y,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Sr(n)===null){i.child=h;break}n=h.sibling,h.sibling=l,l=h,h=n}ld(i,!0,l,null,y,a);break;case"together":ld(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function wo(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),il|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(ss(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=yo(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=yo(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function sd(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&pr(n)))}function tb(n,i,l){switch(i.tag){case 3:ie(i,i.stateNode.containerInfo),Ko(i,zn,n.memoizedState.cache),_l();break;case 27:case 5:Oe(i);break;case 4:ie(i,i.stateNode.containerInfo);break;case 10:Ko(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ru(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(Zo(i),i.flags|=128,null):(l&i.child.childLanes)!==0?rm(n,i,l):(Zo(i),n=wo(n,i,l),n!==null?n.sibling:null);Zo(i);break;case 19:var h=(n.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(ss(n,i,l,!1),a=(l&i.childLanes)!==0),h){if(a)return um(n,i,l);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ve(An,An.current),a)break;return null;case 22:return i.lanes=0,nm(n,i,l,i.pendingProps);case 24:Ko(i,zn,n.memoizedState.cache)}return wo(n,i,l)}function dm(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)Un=!0;else{if(!sd(n,l)&&(i.flags&128)===0)return Un=!1,tb(n,i,l);Un=(n.flags&131072)!==0}else Un=!1,qt&&(i.flags&1048576)!==0&&Vp(i,Zs,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(n=kl(i.elementType),i.type=n,typeof n=="function")du(n)?(a=Dl(n,a),i.tag=1,i=sm(null,i,n,a,l)):(i.tag=0,i=Zu(null,i,n,a,l));else{if(n!=null){var h=n.$$typeof;if(h===ge){i.tag=11,i=Zh(null,i,n,a,l);break e}else if(h===we){i.tag=14,i=em(null,i,n,a,l);break e}}throw i=At(n)||n,Error(s(306,i,""))}}return i;case 0:return Zu(n,i,i.type,i.pendingProps,l);case 1:return a=i.type,h=Dl(a,i.pendingProps),sm(n,i,a,h,l);case 3:e:{if(ie(i,i.stateNode.containerInfo),n===null)throw Error(s(387));a=i.pendingProps;var y=i.memoizedState;h=y.element,_u(n,i),aa(i,a,null,l);var S=i.memoizedState;if(a=S.cache,Ko(i,zn,a),a!==y.cache&&bu(i,[zn],l,!0),sa(),a=S.element,y.isDehydrated)if(y={element:a,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=am(n,i,a,l);break e}else if(a!==h){h=Ii(Error(s(424)),i),ea(h),i=am(n,i,a,l);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,gn=Fi(n.firstChild),$n=i,qt=!0,Yo=null,Ui=!0,l=nh(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(_l(),a===h){i=wo(n,i,l);break e}Jn(n,i,a,l)}i=i.child}return i;case 26:return Ir(n,i),n===null?(l=T0(i.type,null,i.pendingProps,null))?i.memoizedState=l:qt||(l=i.type,n=i.pendingProps,a=Kr(w.current).createElement(l),a[Ye]=i,a[xt]=n,Kn(a,l,n),bn(a),i.stateNode=a):i.memoizedState=T0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Oe(i),n===null&&qt&&(a=i.stateNode=x0(i.type,i.pendingProps,w.current),$n=i,Ui=!0,h=gn,rl(i.type)?(Bd=h,gn=Fi(a.firstChild)):gn=h),Jn(n,i,i.pendingProps.children,l),Ir(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&qt&&((h=a=gn)&&(a=Rb(a,i.type,i.pendingProps,Ui),a!==null?(i.stateNode=a,$n=i,gn=Fi(a.firstChild),Ui=!1,h=!0):h=!1),h||Jo(i)),Oe(i),h=i.type,y=i.pendingProps,S=n!==null?n.memoizedProps:null,a=y.children,Dd(h,y)?a=null:S!==null&&Dd(h,S)&&(i.flags|=32),i.memoizedState!==null&&(h=zu(n,i,$x,null,null,l),Na._currentValue=h),Ir(n,i),Jn(n,i,a,l),i.child;case 6:return n===null&&qt&&((n=l=gn)&&(l=Ib(l,i.pendingProps,Ui),l!==null?(i.stateNode=l,$n=i,gn=null,n=!0):n=!1),n||Jo(i)),null;case 13:return rm(n,i,l);case 4:return ie(i,i.stateNode.containerInfo),a=i.pendingProps,n===null?i.child=Il(i,null,a,l):Jn(n,i,a,l),i.child;case 11:return Zh(n,i,i.type,i.pendingProps,l);case 7:return Jn(n,i,i.pendingProps,l),i.child;case 8:return Jn(n,i,i.pendingProps.children,l),i.child;case 12:return Jn(n,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,Ko(i,i.type,a.value),Jn(n,i,a.children,l),i.child;case 9:return h=i.type._context,a=i.pendingProps.children,Al(i),h=Yn(h),a=a(h),i.flags|=1,Jn(n,i,a,l),i.child;case 14:return em(n,i,i.type,i.pendingProps,l);case 15:return tm(n,i,i.type,i.pendingProps,l);case 19:return um(n,i,l);case 31:return eb(n,i,l);case 22:return nm(n,i,l,i.pendingProps);case 24:return Al(i),a=Yn(zn),n===null?(h=wu(),h===null&&(h=hn,y=Su(),h.pooledCache=y,y.refCount++,y!==null&&(h.pooledCacheLanes|=l),h=y),i.memoizedState={parent:a,cache:h},Eu(i),Ko(i,zn,h)):((n.lanes&l)!==0&&(_u(n,i),aa(i,null,null,l),sa()),h=n.memoizedState,y=i.memoizedState,h.parent!==a?(h={parent:a,cache:a},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ko(i,zn,a)):(a=y.cache,Ko(i,zn,a),a!==h.cache&&bu(i,[zn],l,!0))),Jn(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Co(n){n.flags|=4}function ad(n,i,l,a,h){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(Pm())n.flags|=8192;else throw Rl=yr,Cu}else n.flags&=-16777217}function fm(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!N0(i))if(Pm())n.flags|=8192;else throw Rl=yr,Cu}function Dr(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?je():536870912,n.lanes|=i,vs|=i)}function pa(n,i){if(!qt)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:a.sibling=null}}function yn(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,a=0;if(i)for(var h=n.child;h!==null;)l|=h.lanes|h.childLanes,a|=h.subtreeFlags&65011712,a|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)l|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=a,n.childLanes=l,i}function nb(n,i,l){var a=i.pendingProps;switch(mu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(i),null;case 1:return yn(i),null;case 3:return l=i.stateNode,a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),bo(zn),pe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(ls(i)?Co(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,yu())),yn(i),null;case 26:var h=i.type,y=i.memoizedState;return n===null?(Co(i),y!==null?(yn(i),fm(i,y)):(yn(i),ad(i,h,null,a,l))):y?y!==n.memoizedState?(Co(i),yn(i),fm(i,y)):(yn(i),i.flags&=-16777217):(n=n.memoizedProps,n!==a&&Co(i),yn(i),ad(i,h,n,a,l)),null;case 27:if(B(i),l=w.current,h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==a&&Co(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return yn(i),null}n=Be.current,ls(i)?qp(i):(n=x0(h,a,l),i.stateNode=n,Co(i))}return yn(i),null;case 5:if(B(i),h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==a&&Co(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return yn(i),null}if(y=Be.current,ls(i))qp(i);else{var S=Kr(w.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof a.is=="string"?S.createElement("select",{is:a.is}):S.createElement("select"),a.multiple?y.multiple=!0:a.size&&(y.size=a.size);break;default:y=typeof a.is=="string"?S.createElement(h,{is:a.is}):S.createElement(h)}}y[Ye]=i,y[xt]=a;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=y;e:switch(Kn(y,h,a),h){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Co(i)}}return yn(i),ad(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==a&&Co(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(n=w.current,ls(i)){if(n=i.stateNode,l=i.memoizedProps,a=null,h=$n,h!==null)switch(h.tag){case 27:case 5:a=h.memoizedProps}n[Ye]=i,n=!!(n.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||r0(n.nodeValue,l)),n||Jo(i,!0)}else n=Kr(n).createTextNode(a),n[Ye]=i,i.stateNode=n}return yn(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(a=ls(i),l!==null){if(n===null){if(!a)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Ye]=i}else _l(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yn(i),n=!1}else l=yu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(Ti(i),i):(Ti(i),null);if((i.flags&128)!==0)throw Error(s(558))}return yn(i),null;case 13:if(a=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=ls(i),a!==null&&a.dehydrated!==null){if(n===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ye]=i}else _l(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yn(i),h=!1}else h=yu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ti(i),i):(Ti(i),null)}return Ti(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,n=n!==null&&n.memoizedState!==null,l&&(a=i.child,h=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(h=a.alternate.memoizedState.cachePool.pool),y=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(y=a.memoizedState.cachePool.pool),y!==h&&(a.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),Dr(i,i.updateQueue),yn(i),null);case 4:return pe(),n===null&&Md(i.stateNode.containerInfo),yn(i),null;case 10:return bo(i.type),yn(i),null;case 19:if(se(An),a=i.memoizedState,a===null)return yn(i),null;if(h=(i.flags&128)!==0,y=a.rendering,y===null)if(h)pa(a,!1);else{if(Nn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(y=Sr(n),y!==null){for(i.flags|=128,pa(a,!1),n=y.updateQueue,i.updateQueue=n,Dr(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Op(l,n),l=l.sibling;return ve(An,An.current&1|2),qt&&vo(i,a.treeForkCount),i.child}n=n.sibling}a.tail!==null&&xe()>Br&&(i.flags|=128,h=!0,pa(a,!1),i.lanes=4194304)}else{if(!h)if(n=Sr(y),n!==null){if(i.flags|=128,h=!0,n=n.updateQueue,i.updateQueue=n,Dr(i,n),pa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!y.alternate&&!qt)return yn(i),null}else 2*xe()-a.renderingStartTime>Br&&l!==536870912&&(i.flags|=128,h=!0,pa(a,!1),i.lanes=4194304);a.isBackwards?(y.sibling=i.child,i.child=y):(n=a.last,n!==null?n.sibling=y:i.child=y,a.last=y)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.renderingStartTime=xe(),n.sibling=null,l=An.current,ve(An,h?l&1|2:l&1),qt&&vo(i,a.treeForkCount),n):(yn(i),null);case 22:case 23:return Ti(i),ku(),a=i.memoizedState!==null,n!==null?n.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(yn(i),i.subtreeFlags&6&&(i.flags|=8192)):yn(i),l=i.updateQueue,l!==null&&Dr(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),n!==null&&se(Ml),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),bo(zn),yn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ib(n,i){switch(mu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return bo(zn),pe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return B(i),null;case 31:if(i.memoizedState!==null){if(Ti(i),i.alternate===null)throw Error(s(340));_l()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Ti(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));_l()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return se(An),null;case 4:return pe(),null;case 10:return bo(i.type),null;case 22:case 23:return Ti(i),ku(),n!==null&&se(Ml),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return bo(zn),null;case 25:return null;default:return null}}function pm(n,i){switch(mu(i),i.tag){case 3:bo(zn),pe();break;case 26:case 27:case 5:B(i);break;case 4:pe();break;case 31:i.memoizedState!==null&&Ti(i);break;case 13:Ti(i);break;case 19:se(An);break;case 10:bo(i.type);break;case 22:case 23:Ti(i),ku(),n!==null&&se(Ml);break;case 24:bo(zn)}}function ha(n,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var h=a.next;l=h;do{if((l.tag&n)===n){a=void 0;var y=l.create,S=l.inst;a=y(),S.destroy=a}l=l.next}while(l!==h)}}catch(N){rn(i,i.return,N)}}function tl(n,i,l){try{var a=i.updateQueue,h=a!==null?a.lastEffect:null;if(h!==null){var y=h.next;a=y;do{if((a.tag&n)===n){var S=a.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,h=i;var D=l,X=N;try{X()}catch(me){rn(h,D,me)}}}a=a.next}while(a!==y)}}catch(me){rn(i,i.return,me)}}function hm(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{oh(i,l)}catch(a){rn(n,n.return,a)}}}function mm(n,i,l){l.props=Dl(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(a){rn(n,i,a)}}function ma(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var a=n.stateNode;break;case 30:a=n.stateNode;break;default:a=n.stateNode}typeof l=="function"?n.refCleanup=l(a):l.current=a}}catch(h){rn(n,i,h)}}function io(n,i){var l=n.ref,a=n.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(h){rn(n,i,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){rn(n,i,h)}else l.current=null}function gm(n){var i=n.type,l=n.memoizedProps,a=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(h){rn(n,n.return,h)}}function rd(n,i,l){try{var a=n.stateNode;Eb(a,n.type,l,i),a[xt]=i}catch(h){rn(n,n.return,h)}}function ym(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&rl(n.type)||n.tag===4}function cd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&rl(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ud(n,i,l){var a=n.tag;if(a===5||a===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=tt));else if(a!==4&&(a===27&&rl(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(ud(n,i,l),n=n.sibling;n!==null;)ud(n,i,l),n=n.sibling}function Ur(n,i,l){var a=n.tag;if(a===5||a===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(a!==4&&(a===27&&rl(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Ur(n,i,l),n=n.sibling;n!==null;)Ur(n,i,l),n=n.sibling}function vm(n){var i=n.stateNode,l=n.memoizedProps;try{for(var a=n.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Kn(i,a,l),i[Ye]=n,i[xt]=l}catch(y){rn(n,n.return,y)}}var Eo=!1,Ln=!1,dd=!1,xm=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function ob(n,i){if(n=n.containerInfo,Id=nc,n=Rp(n),ou(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var h=a.anchorOffset,y=a.focusNode;a=a.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,N=-1,D=-1,X=0,me=0,Ce=n,Z=null;t:for(;;){for(var ae;Ce!==l||h!==0&&Ce.nodeType!==3||(N=S+h),Ce!==y||a!==0&&Ce.nodeType!==3||(D=S+a),Ce.nodeType===3&&(S+=Ce.nodeValue.length),(ae=Ce.firstChild)!==null;)Z=Ce,Ce=ae;for(;;){if(Ce===n)break t;if(Z===l&&++X===h&&(N=S),Z===y&&++me===a&&(D=S),(ae=Ce.nextSibling)!==null)break;Ce=Z,Z=Ce.parentNode}Ce=ae}l=N===-1||D===-1?null:{start:N,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(zd={focusedElem:n,selectionRange:l},nc=!1,Hn=i;Hn!==null;)if(i=Hn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Hn=n;else for(;Hn!==null;){switch(i=Hn,y=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)h=n[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,l=i,h=y.memoizedProps,y=y.memoizedState,a=l.stateNode;try{var st=Dl(l.type,h);n=a.getSnapshotBeforeUpdate(st,y),a.__reactInternalSnapshotBeforeUpdate=n}catch(Ct){rn(l,l.return,Ct)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)Ld(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ld(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Hn=n;break}Hn=i.return}}function bm(n,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:No(n,l),a&4&&ha(5,l);break;case 1:if(No(n,l),a&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(S){rn(l,l.return,S)}else{var h=Dl(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(h,i,n.__reactInternalSnapshotBeforeUpdate)}catch(S){rn(l,l.return,S)}}a&64&&hm(l),a&512&&ma(l,l.return);break;case 3:if(No(n,l),a&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{oh(n,i)}catch(S){rn(l,l.return,S)}}break;case 27:i===null&&a&4&&vm(l);case 26:case 5:No(n,l),i===null&&a&4&&gm(l),a&512&&ma(l,l.return);break;case 12:No(n,l);break;case 31:No(n,l),a&4&&wm(n,l);break;case 13:No(n,l),a&4&&Cm(n,l),a&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=pb.bind(null,l),zb(n,l))));break;case 22:if(a=l.memoizedState!==null||Eo,!a){i=i!==null&&i.memoizedState!==null||Ln,h=Eo;var y=Ln;Eo=a,(Ln=i)&&!y?Ao(n,l,(l.subtreeFlags&8772)!==0):No(n,l),Eo=h,Ln=y}break;case 30:break;default:No(n,l)}}function Sm(n){var i=n.alternate;i!==null&&(n.alternate=null,Sm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Po(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var wn=null,di=!1;function _o(n,i,l){for(l=l.child;l!==null;)Tm(n,i,l),l=l.sibling}function Tm(n,i,l){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(re,l)}catch{}switch(l.tag){case 26:Ln||io(l,i),_o(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ln||io(l,i);var a=wn,h=di;rl(l.type)&&(wn=l.stateNode,di=!1),_o(n,i,l),Ca(l.stateNode),wn=a,di=h;break;case 5:Ln||io(l,i);case 6:if(a=wn,h=di,wn=null,_o(n,i,l),wn=a,di=h,wn!==null)if(di)try{(wn.nodeType===9?wn.body:wn.nodeName==="HTML"?wn.ownerDocument.body:wn).removeChild(l.stateNode)}catch(y){rn(l,i,y)}else try{wn.removeChild(l.stateNode)}catch(y){rn(l,i,y)}break;case 18:wn!==null&&(di?(n=wn,h0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),_s(n)):h0(wn,l.stateNode));break;case 4:a=wn,h=di,wn=l.stateNode.containerInfo,di=!0,_o(n,i,l),wn=a,di=h;break;case 0:case 11:case 14:case 15:tl(2,l,i),Ln||tl(4,l,i),_o(n,i,l);break;case 1:Ln||(io(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&mm(l,i,a)),_o(n,i,l);break;case 21:_o(n,i,l);break;case 22:Ln=(a=Ln)||l.memoizedState!==null,_o(n,i,l),Ln=a;break;default:_o(n,i,l)}}function wm(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_s(n)}catch(l){rn(i,i.return,l)}}}function Cm(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_s(n)}catch(l){rn(i,i.return,l)}}function lb(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new xm),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new xm),i;default:throw Error(s(435,n.tag))}}function Lr(n,i){var l=lb(n);i.forEach(function(a){if(!l.has(a)){l.add(a);var h=hb.bind(null,n,a);a.then(h,h)}})}function fi(n,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var h=l[a],y=n,S=i,N=S;e:for(;N!==null;){switch(N.tag){case 27:if(rl(N.type)){wn=N.stateNode,di=!1;break e}break;case 5:wn=N.stateNode,di=!1;break e;case 3:case 4:wn=N.stateNode.containerInfo,di=!0;break e}N=N.return}if(wn===null)throw Error(s(160));Tm(y,S,h),wn=null,di=!1,y=h.alternate,y!==null&&(y.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Em(i,n),i=i.sibling}var $i=null;function Em(n,i){var l=n.alternate,a=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:fi(i,n),pi(n),a&4&&(tl(3,n,n.return),ha(3,n),tl(5,n,n.return));break;case 1:fi(i,n),pi(n),a&512&&(Ln||l===null||io(l,l.return)),a&64&&Eo&&(n=n.updateQueue,n!==null&&(a=n.callbacks,a!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var h=$i;if(fi(i,n),pi(n),a&512&&(Ln||l===null||io(l,l.return)),a&4){var y=l!==null?l.memoizedState:null;if(a=n.memoizedState,l===null)if(a===null)if(n.stateNode===null){e:{a=n.type,l=n.memoizedProps,h=h.ownerDocument||h;t:switch(a){case"title":y=h.getElementsByTagName("title")[0],(!y||y[Wi]||y[Ye]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=h.createElement(a),h.head.insertBefore(y,h.querySelector("head > title"))),Kn(y,a,l),y[Ye]=n,bn(y),a=y;break e;case"link":var S=E0("link","href",h).get(a+(l.href||""));if(S){for(var N=0;N<S.length;N++)if(y=S[N],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(N,1);break t}}y=h.createElement(a),Kn(y,a,l),h.head.appendChild(y);break;case"meta":if(S=E0("meta","content",h).get(a+(l.content||""))){for(N=0;N<S.length;N++)if(y=S[N],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(N,1);break t}}y=h.createElement(a),Kn(y,a,l),h.head.appendChild(y);break;default:throw Error(s(468,a))}y[Ye]=n,bn(y),a=y}n.stateNode=a}else _0(h,n.type,n.stateNode);else n.stateNode=C0(h,a,n.memoizedProps);else y!==a?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,a===null?_0(h,n.type,n.stateNode):C0(h,a,n.memoizedProps)):a===null&&n.stateNode!==null&&rd(n,n.memoizedProps,l.memoizedProps)}break;case 27:fi(i,n),pi(n),a&512&&(Ln||l===null||io(l,l.return)),l!==null&&a&4&&rd(n,n.memoizedProps,l.memoizedProps);break;case 5:if(fi(i,n),pi(n),a&512&&(Ln||l===null||io(l,l.return)),n.flags&32){h=n.stateNode;try{Qi(h,"")}catch(st){rn(n,n.return,st)}}a&4&&n.stateNode!=null&&(h=n.memoizedProps,rd(n,h,l!==null?l.memoizedProps:h)),a&1024&&(dd=!0);break;case 6:if(fi(i,n),pi(n),a&4){if(n.stateNode===null)throw Error(s(162));a=n.memoizedProps,l=n.stateNode;try{l.nodeValue=a}catch(st){rn(n,n.return,st)}}break;case 3:if(Qr=null,h=$i,$i=Xr(i.containerInfo),fi(i,n),$i=h,pi(n),a&4&&l!==null&&l.memoizedState.isDehydrated)try{_s(i.containerInfo)}catch(st){rn(n,n.return,st)}dd&&(dd=!1,_m(n));break;case 4:a=$i,$i=Xr(n.stateNode.containerInfo),fi(i,n),pi(n),$i=a;break;case 12:fi(i,n),pi(n);break;case 31:fi(i,n),pi(n),a&4&&(a=n.updateQueue,a!==null&&(n.updateQueue=null,Lr(n,a)));break;case 13:fi(i,n),pi(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Pr=xe()),a&4&&(a=n.updateQueue,a!==null&&(n.updateQueue=null,Lr(n,a)));break;case 22:h=n.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,X=Eo,me=Ln;if(Eo=X||h,Ln=me||D,fi(i,n),Ln=me,Eo=X,pi(n),a&8192)e:for(i=n.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(l===null||D||Eo||Ln||Ul(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){D=l=i;try{if(y=D.stateNode,h)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{N=D.stateNode;var Ce=D.memoizedProps.style,Z=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(st){rn(D,D.return,st)}}}else if(i.tag===6){if(l===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(st){rn(D,D.return,st)}}}else if(i.tag===18){if(l===null){D=i;try{var ae=D.stateNode;h?m0(ae,!0):m0(D.stateNode,!1)}catch(st){rn(D,D.return,st)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=n.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Lr(n,l))));break;case 19:fi(i,n),pi(n),a&4&&(a=n.updateQueue,a!==null&&(n.updateQueue=null,Lr(n,a)));break;case 30:break;case 21:break;default:fi(i,n),pi(n)}}function pi(n){var i=n.flags;if(i&2){try{for(var l,a=n.return;a!==null;){if(ym(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var h=l.stateNode,y=cd(n);Ur(n,y,h);break;case 5:var S=l.stateNode;l.flags&32&&(Qi(S,""),l.flags&=-33);var N=cd(n);Ur(n,N,S);break;case 3:case 4:var D=l.stateNode.containerInfo,X=cd(n);ud(n,X,D);break;default:throw Error(s(161))}}catch(me){rn(n,n.return,me)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function _m(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;_m(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function No(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)bm(n,i.alternate,i),i=i.sibling}function Ul(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:tl(4,i,i.return),Ul(i);break;case 1:io(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&mm(i,i.return,l),Ul(i);break;case 27:Ca(i.stateNode);case 26:case 5:io(i,i.return),Ul(i);break;case 22:i.memoizedState===null&&Ul(i);break;case 30:Ul(i);break;default:Ul(i)}n=n.sibling}}function Ao(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,h=n,y=i,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ao(h,y,l),ha(4,y);break;case 1:if(Ao(h,y,l),a=y,h=a.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(X){rn(a,a.return,X)}if(a=y,h=a.updateQueue,h!==null){var N=a.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)ih(D[h],N)}catch(X){rn(a,a.return,X)}}l&&S&64&&hm(y),ma(y,y.return);break;case 27:vm(y);case 26:case 5:Ao(h,y,l),l&&a===null&&S&4&&gm(y),ma(y,y.return);break;case 12:Ao(h,y,l);break;case 31:Ao(h,y,l),l&&S&4&&wm(h,y);break;case 13:Ao(h,y,l),l&&S&4&&Cm(h,y);break;case 22:y.memoizedState===null&&Ao(h,y,l),ma(y,y.return);break;case 30:break;default:Ao(h,y,l)}i=i.sibling}}function fd(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&ta(l))}function pd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ta(n))}function Yi(n,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nm(n,i,l,a),i=i.sibling}function Nm(n,i,l,a){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Yi(n,i,l,a),h&2048&&ha(9,i);break;case 1:Yi(n,i,l,a);break;case 3:Yi(n,i,l,a),h&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ta(n)));break;case 12:if(h&2048){Yi(n,i,l,a),n=i.stateNode;try{var y=i.memoizedProps,S=y.id,N=y.onPostCommit;typeof N=="function"&&N(S,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){rn(i,i.return,D)}}else Yi(n,i,l,a);break;case 31:Yi(n,i,l,a);break;case 13:Yi(n,i,l,a);break;case 23:break;case 22:y=i.stateNode,S=i.alternate,i.memoizedState!==null?y._visibility&2?Yi(n,i,l,a):ga(n,i):y._visibility&2?Yi(n,i,l,a):(y._visibility|=2,ms(n,i,l,a,(i.subtreeFlags&10256)!==0||!1)),h&2048&&fd(S,i);break;case 24:Yi(n,i,l,a),h&2048&&pd(i.alternate,i);break;default:Yi(n,i,l,a)}}function ms(n,i,l,a,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=n,S=i,N=l,D=a,X=S.flags;switch(S.tag){case 0:case 11:case 15:ms(y,S,N,D,h),ha(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&2?ms(y,S,N,D,h):ga(y,S):(me._visibility|=2,ms(y,S,N,D,h)),h&&X&2048&&fd(S.alternate,S);break;case 24:ms(y,S,N,D,h),h&&X&2048&&pd(S.alternate,S);break;default:ms(y,S,N,D,h)}i=i.sibling}}function ga(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,a=i,h=a.flags;switch(a.tag){case 22:ga(l,a),h&2048&&fd(a.alternate,a);break;case 24:ga(l,a),h&2048&&pd(a.alternate,a);break;default:ga(l,a)}i=i.sibling}}var ya=8192;function gs(n,i,l){if(n.subtreeFlags&ya)for(n=n.child;n!==null;)Am(n,i,l),n=n.sibling}function Am(n,i,l){switch(n.tag){case 26:gs(n,i,l),n.flags&ya&&n.memoizedState!==null&&qb(l,$i,n.memoizedState,n.memoizedProps);break;case 5:gs(n,i,l);break;case 3:case 4:var a=$i;$i=Xr(n.stateNode.containerInfo),gs(n,i,l),$i=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=ya,ya=16777216,gs(n,i,l),ya=a):gs(n,i,l));break;default:gs(n,i,l)}}function Mm(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function va(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Hn=a,Rm(a,n)}Mm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)km(n),n=n.sibling}function km(n){switch(n.tag){case 0:case 11:case 15:va(n),n.flags&2048&&tl(9,n,n.return);break;case 3:va(n);break;case 12:va(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Fr(n)):va(n);break;default:va(n)}}function Fr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Hn=a,Rm(a,n)}Mm(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:tl(8,i,i.return),Fr(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Fr(i));break;default:Fr(i)}n=n.sibling}}function Rm(n,i){for(;Hn!==null;){var l=Hn;switch(l.tag){case 0:case 11:case 15:tl(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ta(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Hn=a;else e:for(l=n;Hn!==null;){a=Hn;var h=a.sibling,y=a.return;if(Sm(a),a===l){Hn=null;break e}if(h!==null){h.return=y,Hn=h;break e}Hn=y}}}var sb={getCacheForType:function(n){var i=Yn(zn),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return Yn(zn).controller.signal}},ab=typeof WeakMap=="function"?WeakMap:Map,tn=0,hn=null,Bt=null,Gt=0,an=0,wi=null,nl=!1,ys=!1,hd=!1,Mo=0,Nn=0,il=0,Ll=0,md=0,Ci=0,vs=0,xa=null,hi=null,gd=!1,Pr=0,Im=0,Br=1/0,Or=null,ol=null,Pn=0,ll=null,xs=null,ko=0,yd=0,vd=null,zm=null,ba=0,xd=null;function Ei(){return(tn&2)!==0&&Gt!==0?Gt&-Gt:j.T!==null?Ed():Fo()}function Dm(){if(Ci===0)if((Gt&536870912)===0||qt){var n=kt;kt<<=1,(kt&3932160)===0&&(kt=262144),Ci=n}else Ci=536870912;return n=Si.current,n!==null&&(n.flags|=32),Ci}function mi(n,i,l){(n===hn&&(an===2||an===9)||n.cancelPendingCommit!==null)&&(bs(n,0),sl(n,Gt,Ci,!1)),Et(n,l),((tn&2)===0||n!==hn)&&(n===hn&&((tn&2)===0&&(Ll|=l),Nn===4&&sl(n,Gt,Ci,!1)),oo(n))}function Um(n,i,l){if((tn&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&n.expiredLanes)===0||vt(n,i),h=a?ub(n,i):Sd(n,i,!0),y=a;do{if(h===0){ys&&!a&&sl(n,i,0,!1);break}else{if(l=n.current.alternate,y&&!rb(l)){h=Sd(n,i,!1),y=!1;continue}if(h===2){if(y=i,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var N=n;h=xa;var D=N.current.memoizedState.isDehydrated;if(D&&(bs(N,S).flags|=256),S=Sd(N,S,!1),S!==2){if(hd&&!D){N.errorRecoveryDisabledLanes|=y,Ll|=y,h=4;break e}y=hi,hi=h,y!==null&&(hi===null?hi=y:hi.push.apply(hi,y))}h=S}if(y=!1,h!==2)continue}}if(h===1){bs(n,0),sl(n,i,0,!0);break}e:{switch(a=n,y=h,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:sl(a,i,Ci,!nl);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Pr+300-xe(),10<h)){if(sl(a,i,Ci,!nl),Ue(a,0,!0)!==0)break e;ko=i,a.timeoutHandle=f0(Lm.bind(null,a,l,hi,Or,gd,i,Ci,Ll,vs,nl,y,"Throttled",-0,0),h);break e}Lm(a,l,hi,Or,gd,i,Ci,Ll,vs,nl,y,null,-0,0)}}break}while(!0);oo(n)}function Lm(n,i,l,a,h,y,S,N,D,X,me,Ce,Z,ae){if(n.timeoutHandle=-1,Ce=i.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tt},Am(i,y,Ce);var st=(y&62914560)===y?Pr-xe():(y&4194048)===y?Im-xe():0;if(st=$b(Ce,st),st!==null){ko=y,n.cancelPendingCommit=st(jm.bind(null,n,i,y,l,a,h,S,N,D,me,Ce,null,Z,ae)),sl(n,y,S,!X);return}}jm(n,i,y,l,a,h,S,N,D)}function rb(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var h=l[a],y=h.getSnapshot;h=h.value;try{if(!xi(y(),h))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function sl(n,i,l,a){i&=~md,i&=~Ll,n.suspendedLanes|=i,n.pingedLanes&=~i,a&&(n.warmLanes|=i),a=n.expirationTimes;for(var h=i;0<h;){var y=31-Ke(h),S=1<<y;a[y]=-1,h&=~S}l!==0&&Yt(n,l,i)}function Hr(){return(tn&6)===0?(Sa(0),!1):!0}function bd(){if(Bt!==null){if(an===0)var n=Bt.return;else n=Bt,xo=Nl=null,Lu(n),us=null,ia=0,n=Bt;for(;n!==null;)pm(n.alternate,n),n=n.return;Bt=null}}function bs(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,Ab(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),ko=0,bd(),hn=n,Bt=l=yo(n.current,null),Gt=i,an=0,wi=null,nl=!1,ys=vt(n,i),hd=!1,vs=Ci=md=Ll=il=Nn=0,hi=xa=null,gd=!1,(i&8)!==0&&(i|=i&32);var a=n.entangledLanes;if(a!==0)for(n=n.entanglements,a&=i;0<a;){var h=31-Ke(a),y=1<<h;i|=n[h],a&=~y}return Mo=i,rr(),l}function Fm(n,i){Dt=null,j.H=da,i===cs||i===gr?(i=Zp(),an=3):i===Cu?(i=Zp(),an=4):an=i===Qu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wi=i,Bt===null&&(Nn=1,kr(n,Ii(i,n.current)))}function Pm(){var n=Si.current;return n===null?!0:(Gt&4194048)===Gt?Li===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?n===Li:!1}function Bm(){var n=j.H;return j.H=da,n===null?da:n}function Om(){var n=j.A;return j.A=sb,n}function Gr(){Nn=4,nl||(Gt&4194048)!==Gt&&Si.current!==null||(ys=!0),(il&134217727)===0&&(Ll&134217727)===0||hn===null||sl(hn,Gt,Ci,!1)}function Sd(n,i,l){var a=tn;tn|=2;var h=Bm(),y=Om();(hn!==n||Gt!==i)&&(Or=null,bs(n,i)),i=!1;var S=Nn;e:do try{if(an!==0&&Bt!==null){var N=Bt,D=wi;switch(an){case 8:bd(),S=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(i=!0);var X=an;if(an=0,wi=null,Ss(n,N,D,X),l&&ys){S=0;break e}break;default:X=an,an=0,wi=null,Ss(n,N,D,X)}}cb(),S=Nn;break}catch(me){Fm(n,me)}while(!0);return i&&n.shellSuspendCounter++,xo=Nl=null,tn=a,j.H=h,j.A=y,Bt===null&&(hn=null,Gt=0,rr()),S}function cb(){for(;Bt!==null;)Hm(Bt)}function ub(n,i){var l=tn;tn|=2;var a=Bm(),h=Om();hn!==n||Gt!==i?(Or=null,Br=xe()+500,bs(n,i)):ys=vt(n,i);e:do try{if(an!==0&&Bt!==null){i=Bt;var y=wi;t:switch(an){case 1:an=0,wi=null,Ss(n,i,y,1);break;case 2:case 9:if(Wp(y)){an=0,wi=null,Gm(i);break}i=function(){an!==2&&an!==9||hn!==n||(an=7),oo(n)},y.then(i,i);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:Wp(y)?(an=0,wi=null,Gm(i)):(an=0,wi=null,Ss(n,i,y,7));break;case 5:var S=null;switch(Bt.tag){case 26:S=Bt.memoizedState;case 5:case 27:var N=Bt;if(S?N0(S):N.stateNode.complete){an=0,wi=null;var D=N.sibling;if(D!==null)Bt=D;else{var X=N.return;X!==null?(Bt=X,Vr(X)):Bt=null}break t}}an=0,wi=null,Ss(n,i,y,5);break;case 6:an=0,wi=null,Ss(n,i,y,6);break;case 8:bd(),Nn=6;break e;default:throw Error(s(462))}}db();break}catch(me){Fm(n,me)}while(!0);return xo=Nl=null,j.H=a,j.A=h,tn=l,Bt!==null?0:(hn=null,Gt=0,rr(),Nn)}function db(){for(;Bt!==null&&!oe();)Hm(Bt)}function Hm(n){var i=dm(n.alternate,n,Mo);n.memoizedProps=n.pendingProps,i===null?Vr(n):Bt=i}function Gm(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=lm(l,i,i.pendingProps,i.type,void 0,Gt);break;case 11:i=lm(l,i,i.pendingProps,i.type.render,i.ref,Gt);break;case 5:Lu(i);default:pm(l,i),i=Bt=Op(i,Mo),i=dm(l,i,Mo)}n.memoizedProps=n.pendingProps,i===null?Vr(n):Bt=i}function Ss(n,i,l,a){xo=Nl=null,Lu(i),us=null,ia=0;var h=i.return;try{if(Zx(n,h,i,l,Gt)){Nn=1,kr(n,Ii(l,n.current)),Bt=null;return}}catch(y){if(h!==null)throw Bt=h,y;Nn=1,kr(n,Ii(l,n.current)),Bt=null;return}i.flags&32768?(qt||a===1?n=!0:ys||(Gt&536870912)!==0?n=!1:(nl=n=!0,(a===2||a===9||a===3||a===6)&&(a=Si.current,a!==null&&a.tag===13&&(a.flags|=16384))),Vm(i,n)):Vr(i)}function Vr(n){var i=n;do{if((i.flags&32768)!==0){Vm(i,nl);return}n=i.return;var l=nb(i.alternate,i,Mo);if(l!==null){Bt=l;return}if(i=i.sibling,i!==null){Bt=i;return}Bt=i=n}while(i!==null);Nn===0&&(Nn=5)}function Vm(n,i){do{var l=ib(n.alternate,n);if(l!==null){l.flags&=32767,Bt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){Bt=n;return}Bt=n=l}while(n!==null);Nn=6,Bt=null}function jm(n,i,l,a,h,y,S,N,D){n.cancelPendingCommit=null;do jr();while(Pn!==0);if((tn&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=cu,ft(n,l,y,S,N,D),n===hn&&(Bt=hn=null,Gt=0),xs=i,ll=n,ko=l,yd=y,vd=h,zm=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,mb($,function(){return Km(),null})):(n.callbackNode=null,n.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=j.T,j.T=null,h=Ee.p,Ee.p=2,S=tn,tn|=4;try{ob(n,i,l)}finally{tn=S,Ee.p=h,j.T=a}}Pn=1,qm(),$m(),Ym()}}function qm(){if(Pn===1){Pn=0;var n=ll,i=xs,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=j.T,j.T=null;var a=Ee.p;Ee.p=2;var h=tn;tn|=4;try{Em(i,n);var y=zd,S=Rp(n.containerInfo),N=y.focusedElem,D=y.selectionRange;if(S!==N&&N&&N.ownerDocument&&kp(N.ownerDocument.documentElement,N)){if(D!==null&&ou(N)){var X=D.start,me=D.end;if(me===void 0&&(me=X),"selectionStart"in N)N.selectionStart=X,N.selectionEnd=Math.min(me,N.value.length);else{var Ce=N.ownerDocument||document,Z=Ce&&Ce.defaultView||window;if(Z.getSelection){var ae=Z.getSelection(),st=N.textContent.length,Ct=Math.min(D.start,st),pn=D.end===void 0?Ct:Math.min(D.end,st);!ae.extend&&Ct>pn&&(S=pn,pn=Ct,Ct=S);var q=Mp(N,Ct),O=Mp(N,pn);if(q&&O&&(ae.rangeCount!==1||ae.anchorNode!==q.node||ae.anchorOffset!==q.offset||ae.focusNode!==O.node||ae.focusOffset!==O.offset)){var K=Ce.createRange();K.setStart(q.node,q.offset),ae.removeAllRanges(),Ct>pn?(ae.addRange(K),ae.extend(O.node,O.offset)):(K.setEnd(O.node,O.offset),ae.addRange(K))}}}}for(Ce=[],ae=N;ae=ae.parentNode;)ae.nodeType===1&&Ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Ce.length;N++){var Te=Ce[N];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}nc=!!Id,zd=Id=null}finally{tn=h,Ee.p=a,j.T=l}}n.current=i,Pn=2}}function $m(){if(Pn===2){Pn=0;var n=ll,i=xs,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=j.T,j.T=null;var a=Ee.p;Ee.p=2;var h=tn;tn|=4;try{bm(n,i.alternate,i)}finally{tn=h,Ee.p=a,j.T=l}}Pn=3}}function Ym(){if(Pn===4||Pn===3){Pn=0,Ne();var n=ll,i=xs,l=ko,a=zm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Pn=5:(Pn=0,xs=ll=null,Jm(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(ol=null),Mi(l),i=i.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(re,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=j.T,h=Ee.p,Ee.p=2,j.T=null;try{for(var y=n.onRecoverableError,S=0;S<a.length;S++){var N=a[S];y(N.value,{componentStack:N.stack})}}finally{j.T=i,Ee.p=h}}(ko&3)!==0&&jr(),oo(n),h=n.pendingLanes,(l&261930)!==0&&(h&42)!==0?n===xd?ba++:(ba=0,xd=n):ba=0,Sa(0)}}function Jm(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ta(i)))}function jr(){return qm(),$m(),Ym(),Km()}function Km(){if(Pn!==5)return!1;var n=ll,i=yd;yd=0;var l=Mi(ko),a=j.T,h=Ee.p;try{Ee.p=32>l?32:l,j.T=null,l=vd,vd=null;var y=ll,S=ko;if(Pn=0,xs=ll=null,ko=0,(tn&6)!==0)throw Error(s(331));var N=tn;if(tn|=4,km(y.current),Nm(y,y.current,S,l),tn=N,Sa(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(re,y)}catch{}return!0}finally{Ee.p=h,j.T=a,Jm(n,i)}}function Xm(n,i,l){i=Ii(l,i),i=Wu(n.stateNode,i,2),n=Qo(n,i,2),n!==null&&(Et(n,2),oo(n))}function rn(n,i,l){if(n.tag===3)Xm(n,n,l);else for(;i!==null;){if(i.tag===3){Xm(i,n,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ol===null||!ol.has(a))){n=Ii(l,n),l=Wh(2),a=Qo(i,l,2),a!==null&&(Qh(l,a,i,n),Et(a,2),oo(a));break}}i=i.return}}function Td(n,i,l){var a=n.pingCache;if(a===null){a=n.pingCache=new ab;var h=new Set;a.set(i,h)}else h=a.get(i),h===void 0&&(h=new Set,a.set(i,h));h.has(l)||(hd=!0,h.add(l),n=fb.bind(null,n,i,l),i.then(n,n))}function fb(n,i,l){var a=n.pingCache;a!==null&&a.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,hn===n&&(Gt&l)===l&&(Nn===4||Nn===3&&(Gt&62914560)===Gt&&300>xe()-Pr?(tn&2)===0&&bs(n,0):md|=l,vs===Gt&&(vs=0)),oo(n)}function Wm(n,i){i===0&&(i=je()),n=Cl(n,i),n!==null&&(Et(n,i),oo(n))}function pb(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Wm(n,l)}function hb(n,i){var l=0;switch(n.tag){case 31:case 13:var a=n.stateNode,h=n.memoizedState;h!==null&&(l=h.retryLane);break;case 19:a=n.stateNode;break;case 22:a=n.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),Wm(n,l)}function mb(n,i){return L(n,i)}var qr=null,Ts=null,wd=!1,$r=!1,Cd=!1,al=0;function oo(n){n!==Ts&&n.next===null&&(Ts===null?qr=Ts=n:Ts=Ts.next=n),$r=!0,wd||(wd=!0,yb())}function Sa(n,i){if(!Cd&&$r){Cd=!0;do for(var l=!1,a=qr;a!==null;){if(n!==0){var h=a.pendingLanes;if(h===0)var y=0;else{var S=a.suspendedLanes,N=a.pingedLanes;y=(1<<31-Ke(42|n)+1)-1,y&=h&~(S&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,t0(a,y))}else y=Gt,y=Ue(a,a===hn?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(y&3)===0||vt(a,y)||(l=!0,t0(a,y));a=a.next}while(l);Cd=!1}}function gb(){Qm()}function Qm(){$r=wd=!1;var n=0;al!==0&&Nb()&&(n=al);for(var i=xe(),l=null,a=qr;a!==null;){var h=a.next,y=Zm(a,i);y===0?(a.next=null,l===null?qr=h:l.next=h,h===null&&(Ts=l)):(l=a,(n!==0||(y&3)!==0)&&($r=!0)),a=h}Pn!==0&&Pn!==5||Sa(n),al!==0&&(al=0)}function Zm(n,i){for(var l=n.suspendedLanes,a=n.pingedLanes,h=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-Ke(y),N=1<<S,D=h[S];D===-1?((N&l)===0||(N&a)!==0)&&(h[S]=Ie(N,i)):D<=i&&(n.expiredLanes|=N),y&=~N}if(i=hn,l=Gt,l=Ue(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),a=n.callbackNode,l===0||n===i&&(an===2||an===9)||n.cancelPendingCommit!==null)return a!==null&&a!==null&&te(a),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||vt(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(a!==null&&te(a),Mi(l)){case 2:case 8:l=U;break;case 32:l=$;break;case 268435456:l=ne;break;default:l=$}return a=e0.bind(null,n),l=L(l,a),n.callbackPriority=i,n.callbackNode=l,i}return a!==null&&a!==null&&te(a),n.callbackPriority=2,n.callbackNode=null,2}function e0(n,i){if(Pn!==0&&Pn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(jr()&&n.callbackNode!==l)return null;var a=Gt;return a=Ue(n,n===hn?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),a===0?null:(Um(n,a,i),Zm(n,xe()),n.callbackNode!=null&&n.callbackNode===l?e0.bind(null,n):null)}function t0(n,i){if(jr())return null;Um(n,i,!0)}function yb(){Mb(function(){(tn&6)!==0?L(C,gb):Qm()})}function Ed(){if(al===0){var n=as;n===0&&(n=at,at<<=1,(at&261888)===0&&(at=256)),al=n}return al}function n0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ge(""+n)}function i0(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function vb(n,i,l,a,h){if(i==="submit"&&l&&l.stateNode===h){var y=n0((h[xt]||null).action),S=a.submitter;S&&(i=(i=S[xt]||null)?n0(i.formAction):S.getAttribute("formAction"),i!==null&&(y=i,S=null));var N=new un("action","action",null,a,h);n.push({event:N,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(al!==0){var D=S?i0(h,S):new FormData(h);qu(l,{pending:!0,data:D,method:h.method,action:y},null,D)}}else typeof y=="function"&&(N.preventDefault(),D=S?i0(h,S):new FormData(h),qu(l,{pending:!0,data:D,method:h.method,action:y},y,D))},currentTarget:h}]})}}for(var _d=0;_d<ru.length;_d++){var Nd=ru[_d],xb=Nd.toLowerCase(),bb=Nd[0].toUpperCase()+Nd.slice(1);qi(xb,"on"+bb)}qi(Dp,"onAnimationEnd"),qi(Up,"onAnimationIteration"),qi(Lp,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Lx,"onTransitionRun"),qi(Fx,"onTransitionStart"),qi(Px,"onTransitionCancel"),qi(Fp,"onTransitionEnd"),po("onMouseEnter",["mouseout","mouseover"]),po("onMouseLeave",["mouseout","mouseover"]),po("onPointerEnter",["pointerout","pointerover"]),po("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ta));function o0(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var a=n[l],h=a.event;a=a.listeners;e:{var y=void 0;if(i)for(var S=a.length-1;0<=S;S--){var N=a[S],D=N.instance,X=N.currentTarget;if(N=N.listener,D!==y&&h.isPropagationStopped())break e;y=N,h.currentTarget=X;try{y(h)}catch(me){ar(me)}h.currentTarget=null,y=D}else for(S=0;S<a.length;S++){if(N=a[S],D=N.instance,X=N.currentTarget,N=N.listener,D!==y&&h.isPropagationStopped())break e;y=N,h.currentTarget=X;try{y(h)}catch(me){ar(me)}h.currentTarget=null,y=D}}}}function Ot(n,i){var l=i[Qn];l===void 0&&(l=i[Qn]=new Set);var a=n+"__bubble";l.has(a)||(l0(i,n,2,!1),l.add(a))}function Ad(n,i,l){var a=0;i&&(a|=4),l0(l,n,a,i)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Md(n){if(!n[Yr]){n[Yr]=!0,ql.forEach(function(l){l!=="selectionchange"&&(Sb.has(l)||Ad(l,!1,n),Ad(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Yr]||(i[Yr]=!0,Ad("selectionchange",!1,i))}}function l0(n,i,l,a){switch(D0(i)){case 2:var h=Kb;break;case 8:h=Xb;break;default:h=jd}l=h.bind(null,i,l,n),h=void 0,!pt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),a?h!==void 0?n.addEventListener(i,l,{capture:!0,passive:h}):n.addEventListener(i,l,!0):h!==void 0?n.addEventListener(i,l,{passive:h}):n.addEventListener(i,l,!1)}function kd(n,i,l,a,h){var y=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var S=a.tag;if(S===3||S===4){var N=a.stateNode.containerInfo;if(N===h)break;if(S===4)for(S=a.return;S!==null;){var D=S.tag;if((D===3||D===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;N!==null;){if(S=fo(N),S===null)return;if(D=S.tag,D===5||D===6||D===26||D===27){a=y=S;continue e}N=N.parentNode}}a=a.return}Jt(function(){var X=y,me=mt(l),Ce=[];e:{var Z=Pp.get(n);if(Z!==void 0){var ae=un,st=n;switch(n){case"keypress":if(ri(l)===0)break e;case"keydown":case"keyup":ae=hx;break;case"focusin":st="focus",ae=lt;break;case"focusout":st="blur",ae=lt;break;case"beforeblur":case"afterblur":ae=lt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=go;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=yx;break;case Dp:case Up:case Lp:ae=We;break;case Fp:ae=xx;break;case"scroll":case"scrollend":ae=ee;break;case"wheel":ae=Sx;break;case"copy":case"cut":case"paste":ae=en;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=mp;break;case"toggle":case"beforetoggle":ae=wx}var Ct=(i&4)!==0,pn=!Ct&&(n==="scroll"||n==="scrollend"),q=Ct?Z!==null?Z+"Capture":null:Z;Ct=[];for(var O=X,K;O!==null;){var Te=O;if(K=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||K===null||q===null||(Te=Cn(O,q),Te!=null&&Ct.push(wa(O,Te,K))),pn)break;O=O.return}0<Ct.length&&(Z=new ae(Z,st,null,l,me),Ce.push({event:Z,listeners:Ct}))}}if((i&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",Z&&l!==Tt&&(st=l.relatedTarget||l.fromElement)&&(fo(st)||st[Ft]))break e;if((ae||Z)&&(Z=me.window===me?me:(Z=me.ownerDocument)?Z.defaultView||Z.parentWindow:window,ae?(st=l.relatedTarget||l.toElement,ae=X,st=st?fo(st):null,st!==null&&(pn=u(st),Ct=st.tag,st!==pn||Ct!==5&&Ct!==27&&Ct!==6)&&(st=null)):(ae=null,st=X),ae!==st)){if(Ct=eo,Te="onMouseLeave",q="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ct=mp,Te="onPointerLeave",q="onPointerEnter",O="pointer"),pn=ae==null?Z:xl(ae),K=st==null?Z:xl(st),Z=new Ct(Te,O+"leave",ae,l,me),Z.target=pn,Z.relatedTarget=K,Te=null,fo(me)===X&&(Ct=new Ct(q,O+"enter",st,l,me),Ct.target=K,Ct.relatedTarget=pn,Te=Ct),pn=Te,ae&&st)t:{for(Ct=Tb,q=ae,O=st,K=0,Te=q;Te;Te=Ct(Te))K++;Te=0;for(var gt=O;gt;gt=Ct(gt))Te++;for(;0<K-Te;)q=Ct(q),K--;for(;0<Te-K;)O=Ct(O),Te--;for(;K--;){if(q===O||O!==null&&q===O.alternate){Ct=q;break t}q=Ct(q),O=Ct(O)}Ct=null}else Ct=null;ae!==null&&s0(Ce,Z,ae,Ct,!1),st!==null&&pn!==null&&s0(Ce,pn,st,Ct,!0)}}e:{if(Z=X?xl(X):window,ae=Z.nodeName&&Z.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Z.type==="file")var Xt=wp;else if(Sp(Z))if(Cp)Xt=zx;else{Xt=Rx;var dt=kx}else ae=Z.nodeName,!ae||ae.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&Re(X.elementType)&&(Xt=wp):Xt=Ix;if(Xt&&(Xt=Xt(n,X))){Tp(Ce,Xt,l,me);break e}dt&&dt(n,Z,X),n==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Xl(Z,"number",Z.value)}switch(dt=X?xl(X):window,n){case"focusin":(Sp(dt)||dt.contentEditable==="true")&&(Zl=dt,lu=X,Qs=null);break;case"focusout":Qs=lu=Zl=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,Ip(Ce,l,me);break;case"selectionchange":if(Ux)break;case"keydown":case"keyup":Ip(Ce,l,me)}var Ut;if(tu)e:{switch(n){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else Ql?xp(n,l)&&(Vt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Vt="onCompositionStart");Vt&&(gp&&l.locale!=="ko"&&(Ql||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&Ql&&(Ut=Zi()):($e=me,sn="value"in $e?$e.value:$e.textContent,Ql=!0)),dt=Jr(X,Vt),0<dt.length&&(Vt=new vi(Vt,n,null,l,me),Ce.push({event:Vt,listeners:dt}),Ut?Vt.data=Ut:(Ut=bp(l),Ut!==null&&(Vt.data=Ut)))),(Ut=Ex?_x(n,l):Nx(n,l))&&(Vt=Jr(X,"onBeforeInput"),0<Vt.length&&(dt=new vi("onBeforeInput","beforeinput",null,l,me),Ce.push({event:dt,listeners:Vt}),dt.data=Ut)),vb(Ce,n,X,l,me)}o0(Ce,i)})}function wa(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Jr(n,i){for(var l=i+"Capture",a=[];n!==null;){var h=n,y=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||y===null||(h=Cn(n,l),h!=null&&a.unshift(wa(n,h,y)),h=Cn(n,i),h!=null&&a.push(wa(n,h,y))),n.tag===3)return a;n=n.return}return[]}function Tb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function s0(n,i,l,a,h){for(var y=i._reactName,S=[];l!==null&&l!==a;){var N=l,D=N.alternate,X=N.stateNode;if(N=N.tag,D!==null&&D===a)break;N!==5&&N!==26&&N!==27||X===null||(D=X,h?(X=Cn(l,y),X!=null&&S.unshift(wa(l,X,D))):h||(X=Cn(l,y),X!=null&&S.push(wa(l,X,D)))),l=l.return}S.length!==0&&n.push({event:i,listeners:S})}var wb=/\r\n?/g,Cb=/\u0000|\uFFFD/g;function a0(n){return(typeof n=="string"?n:""+n).replace(wb,`
`).replace(Cb,"")}function r0(n,i){return i=a0(i),a0(n)===i}function fn(n,i,l,a,h,y){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||Qi(n,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&Qi(n,""+a);break;case"className":bl(n,"class",a);break;case"tabIndex":bl(n,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":bl(n,l,a);break;case"style":Y(n,a,y);break;case"data":if(i!=="object"){bl(n,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){n.removeAttribute(l);break}a=Ge(""+a),n.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(i!=="input"&&fn(n,i,"name",h.name,h,null),fn(n,i,"formEncType",h.formEncType,h,null),fn(n,i,"formMethod",h.formMethod,h,null),fn(n,i,"formTarget",h.formTarget,h,null)):(fn(n,i,"encType",h.encType,h,null),fn(n,i,"method",h.method,h,null),fn(n,i,"target",h.target,h,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){n.removeAttribute(l);break}a=Ge(""+a),n.setAttribute(l,a);break;case"onClick":a!=null&&(n.onclick=tt);break;case"onScroll":a!=null&&Ot("scroll",n);break;case"onScrollEnd":a!=null&&Ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(h.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":n.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){n.removeAttribute("xlink:href");break}l=Ge(""+a),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?n.setAttribute(l,""+a):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":a===!0?n.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?n.setAttribute(l,a):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?n.setAttribute(l,a):n.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?n.removeAttribute(l):n.setAttribute(l,a);break;case"popover":Ot("beforetoggle",n),Ot("toggle",n),Yl(n,"popover",a);break;case"xlinkActuate":Vi(n,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Vi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Vi(n,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Vi(n,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Vi(n,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Vi(n,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Vi(n,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Vi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Vi(n,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Yl(n,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=W.get(l)||l,Yl(n,l,a))}}function Rd(n,i,l,a,h,y){switch(l){case"style":Y(n,a,y);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(h.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof a=="string"?Qi(n,a):(typeof a=="number"||typeof a=="bigint")&&Qi(n,""+a);break;case"onScroll":a!=null&&Ot("scroll",n);break;case"onScrollEnd":a!=null&&Ot("scrollend",n);break;case"onClick":a!=null&&(n.onclick=tt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$l.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),i=l.slice(2,h?l.length-7:void 0),y=n[xt]||null,y=y!=null?y[l]:null,typeof y=="function"&&n.removeEventListener(i,y,h),typeof a=="function")){typeof y!="function"&&y!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,a,h);break e}l in n?n[l]=a:a===!0?n.setAttribute(l,""):Yl(n,l,a)}}}function Kn(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",n),Ot("load",n);var a=!1,h=!1,y;for(y in l)if(l.hasOwnProperty(y)){var S=l[y];if(S!=null)switch(y){case"src":a=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:fn(n,i,y,S,l,null)}}h&&fn(n,i,"srcSet",l.srcSet,l,null),a&&fn(n,i,"src",l.src,l,null);return;case"input":Ot("invalid",n);var N=y=S=h=null,D=null,X=null;for(a in l)if(l.hasOwnProperty(a)){var me=l[a];if(me!=null)switch(a){case"name":h=me;break;case"type":S=me;break;case"checked":D=me;break;case"defaultChecked":X=me;break;case"value":y=me;break;case"defaultValue":N=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,i));break;default:fn(n,i,a,me,l,null)}}lr(n,y,N,D,X,S,h,!1);return;case"select":Ot("invalid",n),a=S=y=null;for(h in l)if(l.hasOwnProperty(h)&&(N=l[h],N!=null))switch(h){case"value":y=N;break;case"defaultValue":S=N;break;case"multiple":a=N;default:fn(n,i,h,N,l,null)}i=y,l=S,n.multiple=!!a,i!=null?Go(n,!!a,i,!1):l!=null&&Go(n,!!a,l,!0);return;case"textarea":Ot("invalid",n),y=h=a=null;for(S in l)if(l.hasOwnProperty(S)&&(N=l[S],N!=null))switch(S){case"value":a=N;break;case"defaultValue":h=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:fn(n,i,S,N,l,null)}ho(n,a,h,y);return;case"option":for(D in l)l.hasOwnProperty(D)&&(a=l[D],a!=null)&&(D==="selected"?n.selected=a&&typeof a!="function"&&typeof a!="symbol":fn(n,i,D,a,l,null));return;case"dialog":Ot("beforetoggle",n),Ot("toggle",n),Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":Ot("load",n);break;case"video":case"audio":for(a=0;a<Ta.length;a++)Ot(Ta[a],n);break;case"image":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"embed":case"source":case"link":Ot("error",n),Ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(a=l[X],a!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:fn(n,i,X,a,l,null)}return;default:if(Re(i)){for(me in l)l.hasOwnProperty(me)&&(a=l[me],a!==void 0&&Rd(n,i,me,a,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(a=l[N],a!=null&&fn(n,i,N,a,l,null))}function Eb(n,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,y=null,S=null,N=null,D=null,X=null,me=null;for(ae in l){var Ce=l[ae];if(l.hasOwnProperty(ae)&&Ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":D=Ce;default:a.hasOwnProperty(ae)||fn(n,i,ae,null,a,Ce)}}for(var Z in a){var ae=a[Z];if(Ce=l[Z],a.hasOwnProperty(Z)&&(ae!=null||Ce!=null))switch(Z){case"type":y=ae;break;case"name":h=ae;break;case"checked":X=ae;break;case"defaultChecked":me=ae;break;case"value":S=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:ae!==Ce&&fn(n,i,Z,ae,a,Ce)}}Ho(n,S,N,D,X,me,y,h);return;case"select":ae=S=N=Z=null;for(y in l)if(D=l[y],l.hasOwnProperty(y)&&D!=null)switch(y){case"value":break;case"multiple":ae=D;default:a.hasOwnProperty(y)||fn(n,i,y,null,a,D)}for(h in a)if(y=a[h],D=l[h],a.hasOwnProperty(h)&&(y!=null||D!=null))switch(h){case"value":Z=y;break;case"defaultValue":N=y;break;case"multiple":S=y;default:y!==D&&fn(n,i,h,y,a,D)}i=N,l=S,a=ae,Z!=null?Go(n,!!l,Z,!1):!!a!=!!l&&(i!=null?Go(n,!!l,i,!0):Go(n,!!l,l?[]:"",!1));return;case"textarea":ae=Z=null;for(N in l)if(h=l[N],l.hasOwnProperty(N)&&h!=null&&!a.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:fn(n,i,N,null,a,h)}for(S in a)if(h=a[S],y=l[S],a.hasOwnProperty(S)&&(h!=null||y!=null))switch(S){case"value":Z=h;break;case"defaultValue":ae=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==y&&fn(n,i,S,h,a,y)}Vo(n,Z,ae);return;case"option":for(var st in l)Z=l[st],l.hasOwnProperty(st)&&Z!=null&&!a.hasOwnProperty(st)&&(st==="selected"?n.selected=!1:fn(n,i,st,null,a,Z));for(D in a)Z=a[D],ae=l[D],a.hasOwnProperty(D)&&Z!==ae&&(Z!=null||ae!=null)&&(D==="selected"?n.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":fn(n,i,D,Z,a,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in l)Z=l[Ct],l.hasOwnProperty(Ct)&&Z!=null&&!a.hasOwnProperty(Ct)&&fn(n,i,Ct,null,a,Z);for(X in a)if(Z=a[X],ae=l[X],a.hasOwnProperty(X)&&Z!==ae&&(Z!=null||ae!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:fn(n,i,X,Z,a,ae)}return;default:if(Re(i)){for(var pn in l)Z=l[pn],l.hasOwnProperty(pn)&&Z!==void 0&&!a.hasOwnProperty(pn)&&Rd(n,i,pn,void 0,a,Z);for(me in a)Z=a[me],ae=l[me],!a.hasOwnProperty(me)||Z===ae||Z===void 0&&ae===void 0||Rd(n,i,me,Z,a,ae);return}}for(var q in l)Z=l[q],l.hasOwnProperty(q)&&Z!=null&&!a.hasOwnProperty(q)&&fn(n,i,q,null,a,Z);for(Ce in a)Z=a[Ce],ae=l[Ce],!a.hasOwnProperty(Ce)||Z===ae||Z==null&&ae==null||fn(n,i,Ce,Z,a,ae)}function c0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _b(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var h=l[a],y=h.transferSize,S=h.initiatorType,N=h.duration;if(y&&N&&c0(S)){for(S=0,N=h.responseEnd,a+=1;a<l.length;a++){var D=l[a],X=D.startTime;if(X>N)break;var me=D.transferSize,Ce=D.initiatorType;me&&c0(Ce)&&(D=D.responseEnd,S+=me*(D<N?1:(N-X)/(D-X)))}if(--a,i+=8*(y+S)/(h.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Id=null,zd=null;function Kr(n){return n.nodeType===9?n:n.ownerDocument}function u0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Dd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ud=null;function Nb(){var n=window.event;return n&&n.type==="popstate"?n===Ud?!1:(Ud=n,!0):(Ud=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,Ab=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,Mb=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(n){return p0.resolve(null).then(n).catch(kb)}:f0;function kb(n){setTimeout(function(){throw n})}function rl(n){return n==="head"}function h0(n,i){var l=i,a=0;do{var h=l.nextSibling;if(n.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(a===0){n.removeChild(h),_s(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Ca(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Ca(l);for(var y=l.firstChild;y;){var S=y.nextSibling,N=y.nodeName;y[Wi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=S}}else l==="body"&&Ca(n.ownerDocument.body);l=h}while(l);_s(i)}function m0(n,i){var l=n;n=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=a}while(l)}function Ld(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ld(l),Po(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function Rb(n,i,l,a){for(;n.nodeType===1;){var h=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(a){if(!n[Wi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var y=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Fi(n.nextSibling),n===null)break}return null}function Ib(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Fi(n.nextSibling),n===null))return null;return n}function g0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Fi(n.nextSibling),n===null))return null;return n}function Fd(n){return n.data==="$?"||n.data==="$~"}function Pd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function zb(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),n._reactRetry=a}}function Fi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Bd=null;function y0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Fi(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function v0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function x0(n,i,l){switch(i=Kr(l),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ca(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Po(n)}var Pi=new Map,b0=new Set;function Xr(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ro=Ee.d;Ee.d={f:Db,r:Ub,D:Lb,C:Fb,L:Pb,m:Bb,X:Hb,S:Ob,M:Gb};function Db(){var n=Ro.f(),i=Hr();return n||i}function Ub(n){var i=Bo(n);i!==null&&i.tag===5&&i.type==="form"?Fh(i):Ro.r(n)}var ws=typeof document>"u"?null:document;function S0(n,i,l){var a=ws;if(a&&typeof i=="string"&&i){var h=On(i);h='link[rel="'+n+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),b0.has(h)||(b0.add(h),n={rel:n,crossOrigin:l,href:i},a.querySelector(h)===null&&(i=a.createElement("link"),Kn(i,"link",n),bn(i),a.head.appendChild(i)))}}function Lb(n){Ro.D(n),S0("dns-prefetch",n,null)}function Fb(n,i){Ro.C(n,i),S0("preconnect",n,i)}function Pb(n,i,l){Ro.L(n,i,l);var a=ws;if(a&&n&&i){var h='link[rel="preload"][as="'+On(i)+'"]';i==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+On(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+On(l.imageSizes)+'"]')):h+='[href="'+On(n)+'"]';var y=h;switch(i){case"style":y=Cs(n);break;case"script":y=Es(n)}Pi.has(y)||(n=b({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Pi.set(y,n),a.querySelector(h)!==null||i==="style"&&a.querySelector(Ea(y))||i==="script"&&a.querySelector(_a(y))||(i=a.createElement("link"),Kn(i,"link",n),bn(i),a.head.appendChild(i)))}}function Bb(n,i){Ro.m(n,i);var l=ws;if(l&&n){var a=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+On(a)+'"][href="'+On(n)+'"]',y=h;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Es(n)}if(!Pi.has(y)&&(n=b({rel:"modulepreload",href:n},i),Pi.set(y,n),l.querySelector(h)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_a(y)))return}a=l.createElement("link"),Kn(a,"link",n),bn(a),l.head.appendChild(a)}}}function Ob(n,i,l){Ro.S(n,i,l);var a=ws;if(a&&n){var h=yi(a).hoistableStyles,y=Cs(n);i=i||"default";var S=h.get(y);if(!S){var N={loading:0,preload:null};if(S=a.querySelector(Ea(y)))N.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Pi.get(y))&&Od(n,l);var D=S=a.createElement("link");bn(D),Kn(D,"link",n),D._p=new Promise(function(X,me){D.onload=X,D.onerror=me}),D.addEventListener("load",function(){N.loading|=1}),D.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Wr(S,i,a)}S={type:"stylesheet",instance:S,count:1,state:N},h.set(y,S)}}}function Hb(n,i){Ro.X(n,i);var l=ws;if(l&&n){var a=yi(l).hoistableScripts,h=Es(n),y=a.get(h);y||(y=l.querySelector(_a(h)),y||(n=b({src:n,async:!0},i),(i=Pi.get(h))&&Hd(n,i),y=l.createElement("script"),bn(y),Kn(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},a.set(h,y))}}function Gb(n,i){Ro.M(n,i);var l=ws;if(l&&n){var a=yi(l).hoistableScripts,h=Es(n),y=a.get(h);y||(y=l.querySelector(_a(h)),y||(n=b({src:n,async:!0,type:"module"},i),(i=Pi.get(h))&&Hd(n,i),y=l.createElement("script"),bn(y),Kn(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},a.set(h,y))}}function T0(n,i,l,a){var h=(h=w.current)?Xr(h):null;if(!h)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Cs(l.href),l=yi(h).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Cs(l.href);var y=yi(h).hoistableStyles,S=y.get(n);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=h.querySelector(Ea(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Pi.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pi.set(n,l),y||Vb(h,n,l,S.state))),i&&a===null)throw Error(s(528,""));return S}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Es(l),l=yi(h).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Cs(n){return'href="'+On(n)+'"'}function Ea(n){return'link[rel="stylesheet"]['+n+"]"}function w0(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function Vb(n,i,l,a){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=n.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Kn(i,"link",l),bn(i),n.head.appendChild(i))}function Es(n){return'[src="'+On(n)+'"]'}function _a(n){return"script[async]"+n}function C0(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=n.querySelector('style[data-href~="'+On(l.href)+'"]');if(a)return i.instance=a,bn(a),a;var h=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(n.ownerDocument||n).createElement("style"),bn(a),Kn(a,"style",h),Wr(a,l.precedence,n),i.instance=a;case"stylesheet":h=Cs(l.href);var y=n.querySelector(Ea(h));if(y)return i.state.loading|=4,i.instance=y,bn(y),y;a=w0(l),(h=Pi.get(h))&&Od(a,h),y=(n.ownerDocument||n).createElement("link"),bn(y);var S=y;return S._p=new Promise(function(N,D){S.onload=N,S.onerror=D}),Kn(y,"link",a),i.state.loading|=4,Wr(y,l.precedence,n),i.instance=y;case"script":return y=Es(l.src),(h=n.querySelector(_a(y)))?(i.instance=h,bn(h),h):(a=l,(h=Pi.get(y))&&(a=b({},l),Hd(a,h)),n=n.ownerDocument||n,h=n.createElement("script"),bn(h),Kn(h,"link",a),n.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Wr(a,l.precedence,n));return i.instance}function Wr(n,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=a.length?a[a.length-1]:null,y=h,S=0;S<a.length;S++){var N=a[S];if(N.dataset.precedence===i)y=N;else if(y!==h)break}y?y.parentNode.insertBefore(n,y.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function Od(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Hd(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Qr=null;function E0(n,i,l){if(Qr===null){var a=new Map,h=Qr=new Map;h.set(l,a)}else h=Qr,a=h.get(l),a||(a=new Map,h.set(l,a));if(a.has(n))return a;for(a.set(n,null),l=l.getElementsByTagName(n),h=0;h<l.length;h++){var y=l[h];if(!(y[Wi]||y[Ye]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(i)||"";S=n+S;var N=a.get(S);N?N.push(y):a.set(S,[y])}}return a}function _0(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function jb(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function N0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function qb(n,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=Cs(a.href),y=i.querySelector(Ea(h));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Zr.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=y,bn(y);return}y=i.ownerDocument||i,a=w0(a),(h=Pi.get(h))&&Od(a,h),y=y.createElement("link"),bn(y);var S=y;S._p=new Promise(function(N,D){S.onload=N,S.onerror=D}),Kn(y,"link",a),l.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Zr.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var Gd=0;function $b(n,i){return n.stylesheets&&n.count===0&&tc(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var a=setTimeout(function(){if(n.stylesheets&&tc(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+i);0<n.imgBytes&&Gd===0&&(Gd=62500*_b());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&tc(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Gd?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(a),clearTimeout(h)}}:null}function Zr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ec=null;function tc(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ec=new Map,i.forEach(Yb,n),ec=null,Zr.call(n))}function Yb(n,i){if(!(i.state.loading&4)){var l=ec.get(n);if(l)var a=l.get(null);else{l=new Map,ec.set(n,l);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<h.length;y++){var S=h[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),a=S)}a&&l.set(null,a)}h=i.instance,S=h.getAttribute("data-precedence"),y=l.get(S)||a,y===a&&l.set(null,h),l.set(S,h),this.count++,a=Zr.bind(this),h.addEventListener("load",a),h.addEventListener("error",a),y?y.parentNode.insertBefore(h,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),i.state.loading|=4}}var Na={$$typeof:ce,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function Jb(n,i,l,a,h,y,S,N,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=St(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=St(0),this.hiddenUpdates=St(null),this.identifierPrefix=a,this.onUncaughtError=h,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function A0(n,i,l,a,h,y,S,N,D,X,me,Ce){return n=new Jb(n,i,l,S,D,X,me,Ce,N),i=1,y===!0&&(i|=24),y=bi(3,null,null,i),n.current=y,y.stateNode=n,i=Su(),i.refCount++,n.pooledCache=i,i.refCount++,y.memoizedState={element:a,isDehydrated:l,cache:i},Eu(y),n}function M0(n){return n?(n=ns,n):ns}function k0(n,i,l,a,h,y){h=M0(h),a.context===null?a.context=h:a.pendingContext=h,a=Wo(i),a.payload={element:l},y=y===void 0?null:y,y!==null&&(a.callback=y),l=Qo(n,a,i),l!==null&&(mi(l,n,i),la(l,n,i))}function R0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Vd(n,i){R0(n,i),(n=n.alternate)&&R0(n,i)}function I0(n){if(n.tag===13||n.tag===31){var i=Cl(n,67108864);i!==null&&mi(i,n,67108864),Vd(n,67108864)}}function z0(n){if(n.tag===13||n.tag===31){var i=Ei();i=uo(i);var l=Cl(n,i);l!==null&&mi(l,n,i),Vd(n,i)}}var nc=!0;function Kb(n,i,l,a){var h=j.T;j.T=null;var y=Ee.p;try{Ee.p=2,jd(n,i,l,a)}finally{Ee.p=y,j.T=h}}function Xb(n,i,l,a){var h=j.T;j.T=null;var y=Ee.p;try{Ee.p=8,jd(n,i,l,a)}finally{Ee.p=y,j.T=h}}function jd(n,i,l,a){if(nc){var h=qd(a);if(h===null)kd(n,i,a,ic,l),U0(n,a);else if(Qb(h,n,i,l,a))a.stopPropagation();else if(U0(n,a),i&4&&-1<Wb.indexOf(n)){for(;h!==null;){var y=Bo(h);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=nt(y.pendingLanes);if(S!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var D=1<<31-Ke(S);N.entanglements[1]|=D,S&=~D}oo(y),(tn&6)===0&&(Br=xe()+500,Sa(0))}}break;case 31:case 13:N=Cl(y,2),N!==null&&mi(N,y,2),Hr(),Vd(y,2)}if(y=qd(a),y===null&&kd(n,i,a,ic,l),y===h)break;h=y}h!==null&&a.stopPropagation()}else kd(n,i,a,null,l)}}function qd(n){return n=mt(n),$d(n)}var ic=null;function $d(n){if(ic=null,n=fo(n),n!==null){var i=u(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=p(i),n!==null)return n;n=null}else if(l===31){if(n=g(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ic=n,null}function D0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case C:return 2;case U:return 8;case $:case M:return 32;case ne:return 268435456;default:return 32}default:return 32}}var Yd=!1,cl=null,ul=null,dl=null,Aa=new Map,Ma=new Map,fl=[],Wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U0(n,i){switch(n){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":Aa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(i.pointerId)}}function ka(n,i,l,a,h,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:y,targetContainers:[h]},i!==null&&(i=Bo(i),i!==null&&I0(i)),n):(n.eventSystemFlags|=a,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function Qb(n,i,l,a,h){switch(i){case"focusin":return cl=ka(cl,n,i,l,a,h),!0;case"dragenter":return ul=ka(ul,n,i,l,a,h),!0;case"mouseover":return dl=ka(dl,n,i,l,a,h),!0;case"pointerover":var y=h.pointerId;return Aa.set(y,ka(Aa.get(y)||null,n,i,l,a,h)),!0;case"gotpointercapture":return y=h.pointerId,Ma.set(y,ka(Ma.get(y)||null,n,i,l,a,h)),!0}return!1}function L0(n){var i=fo(n.target);if(i!==null){var l=u(i);if(l!==null){if(i=l.tag,i===13){if(i=p(l),i!==null){n.blockedOn=i,yl(n.priority,function(){z0(l)});return}}else if(i===31){if(i=g(l),i!==null){n.blockedOn=i,yl(n.priority,function(){z0(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function oc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=qd(n.nativeEvent);if(l===null){l=n.nativeEvent;var a=new l.constructor(l.type,l);Tt=a,l.target.dispatchEvent(a),Tt=null}else return i=Bo(l),i!==null&&I0(i),n.blockedOn=l,!1;i.shift()}return!0}function F0(n,i,l){oc(n)&&l.delete(i)}function Zb(){Yd=!1,cl!==null&&oc(cl)&&(cl=null),ul!==null&&oc(ul)&&(ul=null),dl!==null&&oc(dl)&&(dl=null),Aa.forEach(F0),Ma.forEach(F0)}function lc(n,i){n.blockedOn===i&&(n.blockedOn=null,Yd||(Yd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zb)))}var sc=null;function P0(n){sc!==n&&(sc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){sc===n&&(sc=null);for(var i=0;i<n.length;i+=3){var l=n[i],a=n[i+1],h=n[i+2];if(typeof a!="function"){if($d(a||l)===null)continue;break}var y=Bo(l);y!==null&&(n.splice(i,3),i-=3,qu(y,{pending:!0,data:h,method:l.method,action:a},a,h))}}))}function _s(n){function i(D){return lc(D,n)}cl!==null&&lc(cl,n),ul!==null&&lc(ul,n),dl!==null&&lc(dl,n),Aa.forEach(i),Ma.forEach(i);for(var l=0;l<fl.length;l++){var a=fl[l];a.blockedOn===n&&(a.blockedOn=null)}for(;0<fl.length&&(l=fl[0],l.blockedOn===null);)L0(l),l.blockedOn===null&&fl.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var h=l[a],y=l[a+1],S=h[xt]||null;if(typeof y=="function")S||P0(l);else if(S){var N=null;if(y&&y.hasAttribute("formAction")){if(h=y,S=y[xt]||null)N=S.formAction;else if($d(h)!==null)continue}else N=S.action;typeof N=="function"?l[a+1]=N:(l.splice(a,3),a-=3),P0(l)}}}function B0(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Jd(n){this._internalRoot=n}ac.prototype.render=Jd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=Ei();k0(l,a,n,i,null,null)},ac.prototype.unmount=Jd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;k0(n.current,2,null,n,null,null),Hr(),i[Ft]=null}};function ac(n){this._internalRoot=n}ac.prototype.unstable_scheduleHydration=function(n){if(n){var i=Fo();n={blockedOn:null,target:n,priority:i};for(var l=0;l<fl.length&&i!==0&&i<fl[l].priority;l++);fl.splice(l,0,n),l===0&&L0(n)}};var O0=t.version;if(O0!=="19.2.3")throw Error(s(527,O0,"19.2.3"));Ee.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(i),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var e1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{re=rc.inject(e1),de=rc}catch{}}return Ia.createRoot=function(n,i){if(!r(n))throw Error(s(299));var l=!1,a="",h=Yh,y=Jh,S=Kh;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=A0(n,1,!1,null,null,l,a,null,h,y,S,B0),n[Ft]=i.current,Md(n),new Jd(i)},Ia.hydrateRoot=function(n,i,l){if(!r(n))throw Error(s(299));var a=!1,h="",y=Yh,S=Jh,N=Kh,D=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(D=l.formState)),i=A0(n,1,!0,i,l??null,a,h,D,y,S,N,B0),i.context=M0(null),l=i.current,a=Ei(),a=uo(a),h=Wo(a),h.callback=null,Qo(l,h,a),l=a,i.current.lanes=l,Et(i,l),oo(i),n[Ft]=i.current,Md(n),new ac(i)},Ia.version="19.2.3",Ia}var X0;function u1(){if(X0)return Wd.exports;X0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wd.exports=c1(),Wd.exports}var d1=u1();const f1=Ky(d1),p1="modulepreload",h1=function(e){return"/"+e},W0={},df=function(t,o,s){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");r=v(o.map(m=>{if(m=h1(m),m in W0)return;W0[m]=!0;const x=m.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":p1,x||(T.as="script"),T.crossOrigin="",T.href=m,g&&T.setAttribute("nonce",g),document.head.appendChild(T),x)return new Promise((A,_)=>{T.addEventListener("load",A),T.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return r.then(p=>{for(const g of p||[])g.status==="rejected"&&u(g.reason);return t().catch(u)})};const m1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),Q0=e=>{const t=g1(e);return t.charAt(0).toUpperCase()+t.slice(1)},Xy=(...e)=>e.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),y1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var v1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x1=Q.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:r="",children:u,iconNode:p,...g},v)=>Q.createElement("svg",{ref:v,...v1,width:t,height:t,stroke:e,strokeWidth:s?Number(o)*24/Number(t):o,className:Xy("lucide",r),...!u&&!y1(g)&&{"aria-hidden":"true"},...g},[...p.map(([m,x])=>Q.createElement(m,x)),...Array.isArray(u)?u:[u]]));const ct=(e,t)=>{const o=Q.forwardRef(({className:s,...r},u)=>Q.createElement(x1,{ref:u,iconNode:t,className:Xy(`lucide-${m1(Q0(e))}`,`lucide-${e}`,s),...r}));return o.displayName=Q0(e),o};const b1=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Z0=ct("align-vertical-justify-center",b1);const S1=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],T1=ct("align-vertical-justify-end",S1);const w1=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],C1=ct("align-vertical-justify-start",w1);const E1=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],tf=ct("bold",E1);const _1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],N1=ct("check",_1);const A1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qa=ct("chevron-down",A1);const M1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ff=ct("chevron-up",M1);const k1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],R1=ct("circle-alert",k1);const I1=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],z1=ct("clipboard",I1);const D1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U1=ct("copy",D1);const L1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],F1=ct("disc",L1);const P1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],B1=ct("download",P1);const O1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fa=ct("eye-off",O1);const H1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pa=ct("eye",H1);const G1=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],V1=ct("fast-forward",G1);const j1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ac=ct("file-text",j1);const q1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Wy=ct("film",q1);const $1=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Y1=ct("folder",$1);const J1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],cc=ct("grip-horizontal",J1);const K1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],eg=ct("image",K1);const X1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],W1=ct("info",X1);const Q1=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],nf=ct("italic",Q1);const Z1=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],eS=ct("key",Z1);const tS=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Mc=ct("keyboard",tS);const nS=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],kc=ct("list-music",nS);const iS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tg=ct("loader-circle",iS);const oS=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Va=ct("maximize",oS);const lS=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],ng=ct("minimize",lS);const sS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ks=ct("music",sS);const aS=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],rS=ct("palette",aS);const cS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],uS=ct("panels-top-left",cS);const dS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Qy=ct("pause",dS);const fS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],pf=ct("play",fS);const pS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zy=ct("plus",pS);const hS=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],mS=ct("redo-2",hS);const gS=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],yS=ct("repeat-1",gS);const vS=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ig=ct("repeat",vS);const xS=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],bS=ct("rewind",xS);const SS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],hf=ct("rotate-ccw",SS);const TS=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],wS=ct("scissors",TS);const CS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ES=ct("search",CS);const _S=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xc=ct("settings",_S);const NS=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],AS=ct("shuffle",NS);const MS=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],kS=ct("skip-back",MS);const RS=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],IS=ct("skip-forward",RS);const zS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],mf=ct("sparkles",zS);const DS=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],US=ct("split",DS);const LS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],gf=ct("square",LS);const FS=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],PS=ct("strikethrough",FS);const BS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Us=ct("trash-2",BS);const OS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],HS=ct("triangle-alert",OS);const GS=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],ml=ct("type",GS);const VS=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],jS=ct("underline",VS);const qS=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],$S=ct("undo-2",qS);const YS=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],so=ct("upload",YS);const JS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],KS=ct("user",JS);const XS=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ja=ct("video",XS);const WS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],hl=ct("volume-2",WS);const QS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Ns=ct("volume-x",QS);const ZS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ni=ct("x",ZS);const eT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],tT=ct("zoom-in",eT);const nT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],iT=ct("zoom-out",nT);var Xn=(e=>(e.PLAYER="PLAYER",e.EDITOR="EDITOR",e))(Xn||{});const jf=e=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return e.replace(t,"$1$2")},Ba=e=>{if(!e)return 0;const o=e.replace(",",".").trim().split(":");let s=0;return o.length===3?(s+=parseInt(o[0],10)*3600,s+=parseInt(o[1],10)*60,s+=parseFloat(o[2])):o.length===2?(s+=parseInt(o[0],10)*60,s+=parseFloat(o[1])):o.length===1&&(s+=parseFloat(o[0])),isNaN(s)?0:s},Rs=e=>{const t=Math.floor(e/60),o=Math.floor(e%60);return`${t}:${o.toString().padStart(2,"0")}`},Ls=e=>{const t=e.split(`
`),o=[],s=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(u=>{const p=[...u.matchAll(s)];if(p.length>0){let g=u.replace(s,"").trim();g=g.replace(/\\n/g,`
`);const v=[...g.matchAll(r)];let m,x=g.replace(r,"").replace(/  +/g," ").trim();if(v.length>0){m=[];for(let b=0;b<v.length;b++){const T=v[b],A=parseInt(T[1],10),_=parseInt(T[2],10),V=T[4];let G=A*60+_;V&&(G+=parseInt(V,10)/(V.length===3?1e3:100));const J=(T.index||0)+T[0].length,fe=b<v.length-1?v[b+1].index:g.length,ce=g.substring(J,fe);if(ce){const ge=ce.split(`
`);ge.forEach((ze,De)=>{ze&&m.push({text:ze,startTime:G,endTime:0}),De<ge.length-1&&m.push({text:`
`,startTime:G,endTime:0})})}}for(let b=0;b<m.length;b++)b<m.length-1?m[b].endTime=m[b+1].startTime:m[b].endTime=m[b].startTime+.5}p.forEach(b=>{const T=parseInt(b[1],10),A=parseInt(b[2],10),_=b[4];let V=T*60+A;_&&(_.length===2?V+=parseInt(_,10)/100:(_.length,V+=parseInt(_,10)/1e3)),o.push({time:V,text:x,words:m})})}}),o.sort((u,p)=>u.time-p.time)},Fs=e=>{const o=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),s=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,u=p=>{const g=p.match(r);if(g){const v=parseInt(g[1],10),m=parseInt(g[2],10),x=parseInt(g[3],10),b=parseInt(g[4],10);return v*3600+m*60+x+b/1e3}return null};return o.forEach(p=>{const g=p.split(`
`);if(g.length>=3){const v=g[1],x=g.slice(2).join(" ").trim(),b=jf(x),T=v.split(" --> ");if(T.length>=2){const A=u(T[0]),_=u(T[1]);A!==null&&b&&s.push({time:A,text:b,endTime:_!==null?_:void 0})}}}),s},qa=e=>{const t=[];try{const s=new DOMParser().parseFromString(e,"text/xml"),u=Array.from(s.getElementsByTagName("*")).filter(v=>v.localName==="p"),p=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Ba(m)},g=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<u.length;v++){const m=u[v],x=g(m,"begin"),b=g(m,"end"),T=jf(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=p(x),_=p(b),V=[],J=Array.from(m.getElementsByTagName("*")).filter(fe=>fe.localName==="span");for(let fe=0;fe<J.length;fe++){const ce=J[fe],ge=g(ce,"begin"),ze=g(ce,"end"),De=ce.textContent?.replace(/\s+/g," ");if(ge&&ze&&De&&De.length>0){const we=p(ge),ot=p(ze);we!==void 0&&ot!==void 0&&V.push({text:De,startTime:we,endTime:ot})}}A!==void 0&&t.push({time:A,text:T,endTime:_,words:V.length>0?V:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,s)=>o.time-s.time)},oT=e=>{try{const t=JSON.parse(e);if(Array.isArray(t)&&t.every(s=>typeof s=="object"&&s!==null&&typeof s.time=="number"&&typeof s.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},$a=e=>{const o=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`),s=[],r=/(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})/,u=g=>{const v=g.match(r);if(v){const m=v[1]?parseInt(v[1].replace(":",""),10):0,x=parseInt(v[2],10),b=parseInt(v[3],10),T=parseInt(v[4],10);return m*3600+x*60+b+T/1e3}return null};let p=0;for(o[0]&&o[0].startsWith("WEBVTT")&&(p=1);p<o.length;){const g=o[p].trim();if(g.includes("-->")){const v=g.split("-->");if(v.length>=2){const m=v[0].trim(),x=v[1].trim().split(" ")[0],b=u(m),T=u(x);if(b!==null){p++;let A=[];for(;p<o.length;){const _=o[p].trim();if(_===""||_.includes("-->"))break;A.push(o[p]),p++}if(p<o.length&&o[p].includes("-->"),A.length>0){const _=A.join(" ").trim(),V=/<(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})>/g;let G;const J=[..._.matchAll(V)];if(J.length>0){G=[],J.forEach((ge,ze)=>{const De=ge[1]?parseInt(ge[1].replace(":",""),10):0,we=parseInt(ge[2],10),ot=parseInt(ge[3],10),Ae=parseInt(ge[4],10),Qe=De*3600+we*60+ot+Ae/1e3,Pe=(ge.index||0)+ge[0].length;let ut=_.length;ze+1<J.length&&(ut=J[ze+1].index||_.length);const ht=_.substring(Pe,ut);if(ze===0&&(ge.index||0)>0){const At=_.substring(0,ge.index);At.trim()&&G.push({text:At.trim(),startTime:b,endTime:Qe})}ht&&G.push({text:ht,startTime:Qe,endTime:0})});for(let ge=0;ge<G.length;ge++)ge<G.length-1?G[ge].endTime=G[ge+1].startTime:G[ge].endTime=T!==null?T:G[ge].startTime+.5}const fe=_.replace(/<[\d:.]+>/g,"").replace(/\s+/g," ").trim(),ce=jf(fe);s.push({time:b,text:ce,endTime:T!==null?T:void 0,words:G&&G.length>0?G:void 0})}continue}}}p++}return s},lT=({toast:e,onRemove:t})=>{const[o,s]=Q.useState(!1);Q.useEffect(()=>{const g=setTimeout(()=>{r()},e.duration||500);return()=>clearTimeout(g)},[]);const r=()=>{s(!0),setTimeout(t,300)},u=()=>{switch(e.type){case"success":return d.jsx(N1,{size:18,className:"text-green-400"});case"error":return d.jsx(R1,{size:18,className:"text-red-400"});default:return d.jsx(W1,{size:18,className:"text-blue-400"})}},p=()=>{switch(e.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return d.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${p()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[d.jsx("div",{className:"shrink-0",children:u()}),d.jsx("p",{className:"text-sm font-medium flex-1",children:e.message}),d.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(Ni,{size:16})})]})},sT=({toasts:e,removeToast:t})=>d.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>d.jsx("div",{className:"pointer-events-auto",children:d.jsx(lT,{toast:o,onRemove:()=>t(o.id)})},o.id))}),aT=({isOpen:e,message:t,onConfirm:o,onCancel:s,title:r="Confirm Action"})=>{const[u,p]=Q.useState(!1);return Q.useEffect(()=>{e?p(!0):setTimeout(()=>p(!1),300)},[e]),Q.useEffect(()=>{const g=v=>{e&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),s()))};return e&&window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}},[e,o,s]),!e&&!u?null:d.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${e?"opacity-100":"opacity-0"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),d.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${e?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:d.jsx(HS,{className:"text-orange-500",size:24})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),d.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),d.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(Ni,{size:20})})]})}),d.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[d.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),d.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},ev=Q.createContext(void 0),er=()=>{const e=Q.useContext(ev);if(!e)throw new Error("useUI must be used within a UIProvider");return e},rT=({children:e})=>{const[t,o]=Q.useState([]),s=Q.useCallback((b,T,A)=>{let _,V;typeof A=="number"?_=A:typeof A=="object"&&(_=A.duration,V=A.id);const G=V||Math.random().toString(36).substr(2,9);o(J=>[...J.filter(ce=>ce.id!==G),{id:G,type:b,message:T,duration:_}])},[]),r=Q.useCallback(b=>{o(T=>T.filter(A=>A.id!==b))},[]),u={success:(b,T)=>s("success",b,T),error:(b,T)=>s("error",b,T),info:(b,T)=>s("info",b,T)},[p,g]=Q.useState({isOpen:!1,message:"",title:"",resolve:null}),v=Q.useCallback((b,T="Confirm Action")=>new Promise(A=>{g({isOpen:!0,message:b,title:T,resolve:A})}),[]),m=Q.useCallback(()=>{p.resolve&&p.resolve(!0),g(b=>({...b,isOpen:!1,resolve:null}))},[p]),x=Q.useCallback(()=>{p.resolve&&p.resolve(!1),g(b=>({...b,isOpen:!1,resolve:null}))},[p]);return d.jsxs(ev.Provider,{value:{toast:u,confirm:v},children:[e,d.jsx(sT,{toasts:t,removeToast:r}),d.jsx(aT,{isOpen:p.isOpen,message:p.message,title:p.title,onConfirm:m,onCancel:x})]})},uc=e=>e>=150?.5:e>=100?1:e>=60?2:e>=40?5:e>=25?10:15,cT=(e,t)=>{const o=Math.floor(e/60),s=e%60;return t<1?`${o}:${s.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(s).toString().padStart(2,"0")}`},og=10,uT=50,ln={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},dT=e=>new Promise(t=>{const o=URL.createObjectURL(e),s=document.createElement(e.type.startsWith("audio/")?"audio":"video");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(o)},s.onerror=()=>{URL.revokeObjectURL(o),t(0)},s.src=o}),fT=({value:e,onChange:t})=>{const[o,s]=Q.useState(e.toString());Q.useEffect(()=>{const p=parseFloat(o);!isNaN(p)&&Math.abs(p-e)<.001||s(e.toString())},[e]);const r=()=>{const p=parseFloat(o);o===""||isNaN(p)?s(e.toString()):t(p)},u=p=>{const g=parseFloat(o),v=isNaN(g)?e:g,m=Math.round((v+p)*100)/100;m<.05||(t(m),s(m.toString()))};return d.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[d.jsx("button",{onClick:()=>u(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:d.jsx(Qa,{size:10})}),d.jsx("input",{type:"text",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:p=>{/^\d*\.?\d*$/.test(p.target.value)&&s(p.target.value)},onBlur:r,onKeyDown:p=>{p.stopPropagation(),p.key==="ArrowUp"&&(p.preventDefault(),u(.05)),p.key==="ArrowDown"&&(p.preventDefault(),u(-.05)),p.key==="Enter"&&p.currentTarget.blur()}}),d.jsx("button",{onClick:()=>u(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:d.jsx(ff,{size:10})})]})},pT=({slides:e,setSlides:t,currentTime:o,duration:s,lyrics:r,onSeek:u,onClose:p,renderConfig:g,setRenderConfig:v})=>{const{confirm:m}=er(),x=Q.useRef(null),b=Q.useRef(null),T=Q.useRef(null),[A,_]=Q.useState(40),[V,G]=Q.useState([e]),[J,fe]=Q.useState(0),ce=Q.useRef(!1);Q.useEffect(()=>{if(ce.current){ce.current=!1;return}const C=V[J];if(JSON.stringify(C)!==JSON.stringify(e)){const U=V.slice(0,J+1);U.push(e),U.length>uT?(U.shift(),G(U)):(G(U),fe(J+1))}},[e,V,J]);const ge=J>0,ze=J<V.length-1,De=Q.useCallback(()=>{if(J>0){const C=J-1;fe(C),ce.current=!0,t(V[C])}},[t,V,J]),we=Q.useCallback(()=>{if(J<V.length-1){const C=J+1;fe(C),ce.current=!0,t(V[C])}},[t,V,J]),ot=Math.max(0,...e.map(C=>C.endTime)),Ae=Math.max(s,60,ot),Qe=Ae*A,[Pe,ut]=Q.useState([]),[ht,At]=Q.useState(null),[Mt,j]=Q.useState([]),Ee=Q.useCallback(()=>{if(Pe.length===0)return;const C=e.filter(U=>Pe.includes(U.id));j(C)},[Pe,e]),le=Q.useCallback(()=>{if(Pe.length===0)return;const C=e.filter(U=>Pe.includes(U.id));j(C),t(U=>U.filter($=>!Pe.includes($.id))),ut([])},[Pe,e,t]),bt=Q.useRef(e),Je=Q.useRef(A);Q.useEffect(()=>{bt.current=e,Je.current=A},[e,A]);const z=Q.useCallback(()=>{if(Mt.length===0)return;const C=Math.min(...Mt.map(M=>M.startTime)),U=o-C,$=Mt.map(M=>({...M,id:Math.random().toString(36).substr(2,9),startTime:M.startTime+U,endTime:M.endTime+U}));t(M=>[...M,...$].sort((ne,I)=>ne.startTime-I.startTime)),ut($.map(M=>M.id))},[Mt,o,t]),se=Q.useCallback(()=>{const C=e.filter(ne=>Pe.includes(ne.id)&&o>ne.startTime&&o<ne.endTime);if(C.length===0)return;let U=[];const $=[],M=[];C.forEach(ne=>{const I=o,ue={...ne,id:Math.random().toString(36).substr(2,9),endTime:I},re=I-ne.startTime,de={...ne,id:Math.random().toString(36).substr(2,9),startTime:I,mediaStartOffset:(ne.mediaStartOffset||0)+re};$.push(ne.id),U.push(ue,de),M.push(de.id)}),t(ne=>[...ne.filter(ue=>!$.includes(ue.id)),...U].sort((ue,re)=>ue.startTime-re.startTime)),ut(M)},[e,Pe,o,t]),[ve,Be]=Q.useState(null),[et,w]=Q.useState(!1),[P,ie]=Q.useState(null),pe=async C=>{if(C.target.files&&C.target.files.length>0){const U=Array.from(C.target.files),$=U.every(ne=>ne.type.startsWith("image/")),M=[];if($){const ne=U.length,I=o,re=Math.max(0,s-I)/ne,de=Math.max(3,re);U.forEach((Fe,Ke)=>{const rt=URL.createObjectURL(Fe),Ve=I+Ke*de,E=Ve+de;M.push({id:Math.random().toString(36).substr(2,9),url:rt,type:"image",startTime:Ve,endTime:E,name:Fe.name,layer:0})})}else{let ne=o;for(const I of U){const ue=I.type.startsWith("image/")?"image":I.type.startsWith("video/")?"video":"audio";let re=5;if(ue!=="image"){const Fe=await dT(I);Fe>0&&(re=Fe)}const de=URL.createObjectURL(I);M.push({id:Math.random().toString(36).substr(2,9),url:de,type:ue,startTime:ne,endTime:ne+re,mediaDuration:ue!=="image"?re:void 0,name:I.name,isMuted:ue==="video",volume:ue==="video"||ue==="audio"?1:void 0,layer:0}),ne+=re}}t(ne=>[...ne,...M].sort((I,ue)=>I.startTime-ue.startTime)),C.target.value=""}},Oe=C=>{t(U=>U.filter($=>$.id!==C))},B=async C=>{C.stopPropagation(),e.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},_e=(C,U,$)=>{if(C.stopPropagation(),C.preventDefault(),x.current?.focus(),C.shiftKey&&ht){const de=e.findIndex(Ke=>Ke.id===ht),Fe=e.findIndex(Ke=>Ke.id===U);if(de!==-1&&Fe!==-1){const Ke=Math.min(de,Fe),rt=Math.max(de,Fe),Ve=e.slice(Ke,rt+1).map(E=>E.id);ut(E=>{const at=new Set([...E,...Ve]);return Array.from(at)})}}else C.ctrlKey||C.metaKey?(ut(de=>de.includes(U)?de.filter(Fe=>Fe!==U):[...de,U]),At(U)):(Pe.includes(U)||ut([U]),At(U));const M=e.find(de=>de.id===U);if(!M)return;const ne=Pe.includes(U),I=C.ctrlKey||C.metaKey||C.shiftKey;let ue=[];if(!I&&!ne)ue=[U];else if(I){if(ue=[U],(C.ctrlKey||C.metaKey)&&!ne)ue=[...Pe,U];else if((C.ctrlKey||C.metaKey)&&ne){ue=Pe.filter(de=>de!==U);return}}else ue=Pe;const re={};e.forEach(de=>{ue.includes(de.id)&&(re[de.id]={start:de.startTime,end:de.endTime})}),re[U]||(re[U]={start:M.startTime,end:M.endTime}),Be({id:U,type:$,startX:C.clientX,initialStart:M.startTime,initialEnd:M.endTime,initialMap:re}),window.addEventListener("mousemove",L),window.addEventListener("mouseup",te)},ke=C=>{C.button===0&&(C.stopPropagation(),x.current?.focus(),ut([]),w(!0),be(C.clientX),window.addEventListener("mousemove",Le),window.addEventListener("mouseup",Ze))},ye=C=>{if(C.button!==0)return;x.current?.focus();const U=C.clientX,$=C.clientY,M=T.current?.getBoundingClientRect();if(!M)return;const ne=U-M.left,I=$-M.top;let ue=!1;const re=Fe=>{const Ke=Math.sqrt(Math.pow(Fe.clientX-U,2)+Math.pow(Fe.clientY-$,2));if(!ue&&Ke>5&&(ue=!0,ie({x:ne,y:I,w:0,h:0})),ue&&T.current){const rt=T.current.getBoundingClientRect(),Ve=Fe.clientX-rt.left,E=Fe.clientY-rt.top;ie(Et=>{if(!Et)return null;const ft=Ve-ne,Yt=E-I;return{x:ft>0?ne:Ve,y:Yt>0?I:E,w:Math.abs(ft),h:Math.abs(Yt)}});const at=[],kt=bt.current,Zt=Je.current,nt=Math.min(ne,Ve),Ue=Math.min(I,E),vt=Math.abs(Ve-ne),Ie=Math.abs(E-I),je=nt+vt,St=Ue+Ie;kt.forEach(Et=>{const ft=Et.startTime*Zt+96,Yt=Et.endTime*Zt+96;let En=0,ai=0;const uo=Et.layer||0;Et.type==="audio"?uo===0?(En=ln.AUDIO_L1_TOP,ai=ln.AUDIO_L1_TOP+ln.AUDIO_L1_HEIGHT):(En=ln.AUDIO_L2_TOP,ai=ln.AUDIO_L2_TOP+ln.AUDIO_L2_HEIGHT):uo===0?(En=ln.VISUAL_L1_TOP,ai=ln.VISUAL_L1_TOP+ln.VISUAL_L1_HEIGHT):(En=ln.VISUAL_L2_TOP,ai=ln.VISUAL_L2_TOP+ln.VISUAL_L2_HEIGHT);const Mi=nt<Yt&&je>ft,Fo=Ue<ai&&St>En;Mi&&Fo&&at.push(Et.id)}),ut(at)}},de=Fe=>{ue||(ut([]),be(Fe.clientX)),ie(null),window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",de)};window.addEventListener("mousemove",re),window.addEventListener("mouseup",de)},be=C=>{if(!T.current)return;const U=T.current.getBoundingClientRect(),$=C-U.left-96;let M=Math.max(0,Math.min($/A,Ae));M=qe(M),u(M)},Le=C=>{be(C.clientX)},Ze=()=>{w(!1),window.removeEventListener("mousemove",Le),window.removeEventListener("mouseup",Ze)},R=C=>{const U=C.target;if(!(U.tagName==="INPUT"||U.tagName==="TEXTAREA"||U.isContentEditable)){if((C.ctrlKey||C.metaKey)&&C.key==="z"&&!C.shiftKey){C.preventDefault(),De();return}if((C.ctrlKey||C.metaKey)&&(C.key==="y"||C.key==="z"&&C.shiftKey)){C.preventDefault(),we();return}if((C.ctrlKey||C.metaKey)&&C.key==="c"){C.preventDefault(),Ee();return}if((C.ctrlKey||C.metaKey)&&C.key==="x"){C.preventDefault(),le();return}if((C.ctrlKey||C.metaKey)&&C.key==="v"){C.preventDefault(),z();return}if(C.key.toLowerCase()==="x"&&!C.ctrlKey&&!C.metaKey||(C.ctrlKey||C.metaKey)&&C.key==="k"){C.preventDefault(),C.stopPropagation(),se();return}if((C.key==="Delete"||C.key==="Backspace")&&Pe.length>0&&(C.preventDefault(),t($=>$.filter(M=>!Pe.includes(M.id))),ut([])),Pe.length>0&&(C.key==="ArrowLeft"||C.key==="ArrowRight")){C.preventDefault(),C.stopPropagation();const $=C.key==="ArrowRight"?.01:-.01,M=e.find(ne=>ne.id===Pe[0]);if(M){const ne=Math.max(0,M.startTime+$);u(ne)}t(ne=>ne.map(ue=>{if(Pe.includes(ue.id)){const re=ue.endTime-ue.startTime;let de=ue.startTime+$;return de=Math.max(0,de),{...ue,startTime:de,endTime:de+re}}return ue}).sort((ue,re)=>ue.startTime-re.startTime))}}},qe=(C,U=[])=>{const $=og/A,M=[0,s,o],ne=uc(A),I=Math.round(C/ne)*ne;M.push(I),e.forEach(de=>{U.includes(de.id)||(M.push(de.startTime),M.push(de.endTime))}),r.forEach(de=>{M.push(de.time)});let ue=C,re=$;for(const de of M){const Fe=Math.abs(de-C);Fe<re&&(re=Fe,ue=de)}return ue},L=C=>{Be(U=>{if(!U)return null;const M=(C.clientX-U.startX)/A;return t(ne=>{if(U.type==="move"){const I=Object.keys(U.initialMap),ue=Object.values(U.initialMap),re=Math.min(...ue.map(Ue=>Ue.start)),de=Math.max(...ue.map(Ue=>Ue.end)),Fe=U.initialMap[U.id],Ke=[{type:"drag-start",initVal:Fe.start},{type:"drag-end",initVal:Fe.end},{type:"group-start",initVal:re},{type:"group-end",initVal:de}],rt=og/A,Ve=[0,s,o],E=uc(A);e.forEach(Ue=>{I.includes(Ue.id)||(Ve.push(Ue.startTime),Ve.push(Ue.endTime))}),r.forEach(Ue=>{Ve.push(Ue.time)});let at=M,kt=rt,Zt=!1;Ke.forEach(Ue=>{const vt=Ue.initVal+M;for(const St of Ve){const Et=Math.abs(St-vt);Et<kt&&(kt=Et,at=St-Ue.initVal,Zt=!0)}const Ie=Math.round(vt/E)*E,je=Math.abs(Ie-vt);je<kt&&(kt=je,at=Ie-Ue.initVal,Zt=!0)});let nt=Zt?at:M;return re+nt<0&&(nt=-re),ne.map(Ue=>{const vt=U.initialMap[Ue.id];if(vt){const Ie=vt.end-vt.start;let je=Ue.layer||0;const St=(ft,Yt,En)=>ft>=Yt&&ft<=Yt+En,Et=T.current?.getBoundingClientRect();if(Et){const ft=C.clientY-Et.top;Ue.type==="audio"?(St(ft,ln.AUDIO_L1_TOP,ln.AUDIO_L1_HEIGHT)&&(je=0),St(ft,ln.AUDIO_L2_TOP,ln.AUDIO_L2_HEIGHT)&&(je=1)):(St(ft,ln.VISUAL_L1_TOP,ln.VISUAL_L1_HEIGHT)&&(je=0),St(ft,ln.VISUAL_L2_TOP,ln.VISUAL_L2_HEIGHT)&&(je=1))}return{...Ue,startTime:vt.start+nt,endTime:vt.start+nt+Ie,layer:je}}return Ue})}else if(U.type==="resize-start"){let I=U.initialStart+M;I=qe(I,[U.id]);const ue=.5,re=U.initialEnd;return I=Math.max(0,Math.min(I,re-ue)),ne.map(de=>de.id!==U.id?de:{...de,startTime:I})}else{let I=U.initialEnd+M;I=qe(I,[U.id]);const ue=.5,re=U.initialStart;return I=Math.max(re+ue,I),ne.map(de=>de.id!==U.id?de:{...de,endTime:I})}}),U})},te=C=>{ve&&ve.type==="move"&&Math.abs(C.clientX-ve.startX)<5&&!C.ctrlKey&&!C.metaKey&&!C.shiftKey&&ut([ve.id]),Be(null),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",te),t(U=>[...U].sort(($,M)=>$.startTime-M.startTime))},oe=()=>_(C=>Math.min(200,C+10)),Ne=()=>_(C=>Math.max(10,C-10)),xe=(C,U)=>{v($=>{const M=$.layerVisibility?.[C]||{},ne={...M,[U]:M[U]===!1};return{...$,layerVisibility:{...$.layerVisibility,[C]:ne,...C==="visual"?{audio:$.layerVisibility?.audio||{}}:{visual:$.layerVisibility?.visual||{}}}}})},he=(C,U)=>g.layerVisibility?.[C]?.[U]!==!1;return d.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:C=>C.currentTarget.focus(),onKeyDown:R,children:[d.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[d.jsx(Wy,{size:16,className:"text-purple-400"}),"Timeline"]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[d.jsx(Zy,{size:14})," Import Media",d.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:pe})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:Ne,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:d.jsx(iT,{size:14})}),d.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[A,"px/s"]}),d.jsx("button",{onClick:oe,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:d.jsx(tT,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:De,disabled:!ge,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:d.jsx($S,{size:14})}),d.jsx("button",{onClick:we,disabled:!ze,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:d.jsx(mS,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:Ee,disabled:Pe.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:d.jsx(U1,{size:14})}),d.jsx("button",{onClick:le,disabled:Pe.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:d.jsx(wS,{size:14})}),d.jsx("button",{onClick:z,disabled:Mt.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:d.jsx(z1,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsx("div",{className:"flex items-center gap-1",children:d.jsx("button",{onClick:se,disabled:Pe.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:d.jsx(US,{size:14})})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>{e.length>0&&Pe.length===e.length?ut([]):ut(e.map(C=>C.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),Pe.length===1&&d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[d.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),d.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const C=e.find(U=>U.id===Pe[0]);return C?Rs(C.endTime-C.startTime):"00:00"})(),onBlur:C=>{const $=C.target.value.split(":");if($.length===2){const ne=parseInt($[0])||0,I=parseInt($[1])||0,ue=ne*60+I;ue>0&&t(re=>re.map(de=>de.id===Pe[0]?{...de,endTime:de.startTime+ue}:de))}const M=e.find(ne=>ne.id===Pe[0]);M&&(C.target.value=Rs(M.endTime-M.startTime))},onKeyDown:C=>{C.key==="Enter"&&C.currentTarget.blur()}},Pe[0])]}),Pe.length===1&&(()=>{const C=e.find(U=>U.id===Pe[0]);return C&&(C.type==="video"||C.type==="audio")?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),d.jsxs("div",{className:"flex items-center gap-1 w-20",children:[d.jsx("button",{onClick:()=>{t(U=>U.map($=>$.id===C.id?{...$,isMuted:!$.isMuted}:$))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:C.isMuted!==!1?"Unmute":"Mute",children:C.isMuted!==!1?d.jsx(Ns,{size:10}):d.jsx(hl,{size:10})}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:C.volume!==void 0?C.volume:1,onChange:U=>{const $=parseFloat(U.target.value);t(M=>M.map(ne=>ne.id===C.id?{...ne,volume:$,isMuted:$===0}:ne))}})]}),d.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((C.volume||1)*100),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),d.jsx(fT,{value:C.playbackRate||1,onChange:U=>{t($=>$.map(M=>M.id===C.id?{...M,playbackRate:U}:M))}})]})]}):null})()]})]}),d.jsxs("div",{className:"flex gap-2 shrink-0",children:[d.jsx("button",{onClick:B,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:d.jsx(Us,{size:14})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),d.jsx("button",{onClick:p,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:d.jsx(Ni,{size:14})})]})]}),d.jsx("div",{ref:b,onWheel:C=>{b.current&&C.shiftKey&&(C.preventDefault(),b.current.scrollLeft+=C.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:d.jsxs("div",{ref:T,className:"relative",style:{width:`${Qe+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:ye,children:[P&&d.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:P.x,top:P.y,width:P.w,height:P.h}}),d.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const C=uc(A);return Array.from({length:Math.ceil(Qe/(A*C))}).map((U,$)=>d.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:$*C*A}},$))})(),s>0&&d.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:s*A},children:d.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),d.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:ke,children:[d.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),d.jsx("div",{className:"relative flex-1",children:(()=>{const C=uc(A);return Array.from({length:Math.ceil(Qe/(A*C))}).map((U,$)=>{const M=$*C;return M>Ae?null:d.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:M*A,width:C*A},children:cT(M,C)},$)})})()})]}),d.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*A}px)`,willChange:"transform"},children:d.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),d.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:ln.VISUAL_L1_TOP,height:ln.VISUAL_L1_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Visual 1"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),xe("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("visual",0)?d.jsx(Pa,{size:12}):d.jsx(Fa,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(C=>C.type!=="audio"&&(C.layer===0||C.layer===void 0)).map(C=>d.jsxs("div",{style:{left:C.startTime*A,width:Math.max(10,(C.endTime-C.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${ve?.id===C.id||Pe.includes(C.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${Pe.includes(C.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:U=>_e(U,C.id,"move"),children:[C.type==="video"?d.jsx("video",{src:C.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):d.jsx("img",{src:C.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:C.name}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:d.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:C.name})}),C.type==="video"&&C.mediaDuration&&C.endTime-C.startTime>C.mediaDuration+.1&&d.jsx("button",{onClick:U=>{U.stopPropagation(),t($=>$.map(M=>M.id===C.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:d.jsx(hf,{size:10})}),C.type==="video"&&d.jsx("button",{onClick:U=>{U.stopPropagation(),t($=>$.map(M=>M.id===C.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:C.isMuted!==!1?"Unmute":"Mute",children:C.isMuted!==!1?d.jsx(Ns,{size:10}):d.jsx(hl,{size:10})}),d.jsx("button",{onClick:U=>{U.stopPropagation(),Oe(C.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:d.jsx(Ni,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-start"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-end"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})})]},C.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:ln.VISUAL_L2_TOP,height:ln.VISUAL_L2_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Visual 2"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),xe("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("visual",1)?d.jsx(Pa,{size:12}):d.jsx(Fa,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(C=>C.type!=="audio"&&C.layer===1).map(C=>d.jsxs("div",{style:{left:C.startTime*A,width:Math.max(10,(C.endTime-C.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${ve?.id===C.id||Pe.includes(C.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${Pe.includes(C.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:U=>_e(U,C.id,"move"),children:[C.type==="video"?d.jsx("video",{src:C.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):d.jsx("img",{src:C.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:C.name}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:d.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:C.name})}),C.type==="video"&&C.mediaDuration&&C.endTime-C.startTime>C.mediaDuration+.1&&d.jsx("button",{onClick:U=>{U.stopPropagation(),t($=>$.map(M=>M.id===C.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:d.jsx(hf,{size:10})}),C.type==="video"&&d.jsx("button",{onClick:U=>{U.stopPropagation(),t($=>$.map(M=>M.id===C.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:C.isMuted!==!1?d.jsx(Ns,{size:10}):d.jsx(hl,{size:10})}),d.jsx("button",{onClick:U=>{U.stopPropagation(),Oe(C.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:d.jsx(Ni,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-start"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-end"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})})]},C.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:ln.LYRICS_TOP,height:ln.LYRICS_HEIGHT},children:[d.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:d.jsx("span",{children:"Lyrics"})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((C,U)=>d.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:C.time*A},title:`${Rs(C.time)} - ${C.text}`,onClick:$=>{$.stopPropagation(),u(C.time)},children:[d.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Rs(C.time)}),C.text]},U))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:ln.AUDIO_L1_TOP,height:ln.AUDIO_L1_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Audio 1"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),xe("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("audio",0)?d.jsx(Pa,{size:12}):d.jsx(Fa,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(C=>C.type==="audio"&&(C.layer===0||C.layer===void 0)).map(C=>d.jsxs("div",{style:{left:C.startTime*A,width:Math.max(10,(C.endTime-C.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ve?.id===C.id||Pe.includes(C.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Pe.includes(C.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:U=>_e(U,C.id,"move"),children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:d.jsx(hl,{size:16,className:"text-emerald-200"})}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:d.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:C.name})}),d.jsx("button",{onClick:U=>{U.stopPropagation(),t($=>$.map(M=>M.id===C.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:C.isMuted===!0?"Unmute":"Mute",children:C.isMuted===!0?d.jsx(Ns,{size:10}):d.jsx(hl,{size:10})}),d.jsx("button",{onClick:U=>{U.stopPropagation(),Oe(C.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:d.jsx(Ni,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-start")}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-end")})]},C.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:ln.AUDIO_L2_TOP,height:ln.AUDIO_L2_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Audio 2"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),xe("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("audio",1)?d.jsx(Pa,{size:12}):d.jsx(Fa,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(C=>C.type==="audio"&&C.layer===1).map(C=>d.jsxs("div",{style:{left:C.startTime*A,width:Math.max(10,(C.endTime-C.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ve?.id===C.id||Pe.includes(C.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Pe.includes(C.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:U=>_e(U,C.id,"move"),children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:d.jsx(hl,{size:16,className:"text-emerald-200"})}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:d.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:C.name})}),d.jsx("button",{onClick:U=>{U.stopPropagation(),t($=>$.map(M=>M.id===C.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:C.isMuted===!0?"Unmute":"Mute",children:C.isMuted===!0?d.jsx(Ns,{size:10}):d.jsx(hl,{size:10})}),d.jsx("button",{onClick:U=>{U.stopPropagation(),Oe(C.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:d.jsx(Ni,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-start")}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:U=>_e(U,C.id,"resize-end")})]},C.id))})]})]})})]})};var hT={};let mT,gT;function yT(){return{geminiUrl:mT,vertexUrl:gT}}function vT(e,t,o,s){var r,u;if(!e?.baseUrl){const p=yT();return t?(r=p.vertexUrl)!==null&&r!==void 0?r:o:(u=p.geminiUrl)!==null&&u!==void 0?u:s}return e.baseUrl}class Uo{}function Xe(e,t){const o=/\{([^}]+)\}/g;return e.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(e,t,o){for(let u=0;u<t.length-1;u++){const p=t[u];if(p.endsWith("[]")){const g=p.slice(0,-2);if(!(g in e))if(Array.isArray(o))e[g]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${p}`);if(Array.isArray(e[g])){const v=e[g];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];f(x,t.slice(u+1),o[m])}else for(const m of v)f(m,t.slice(u+1),o)}return}else if(p.endsWith("[0]")){const g=p.slice(0,-3);g in e||(e[g]=[{}]);const v=e[g];f(v[0],t.slice(u+1),o);return}(!e[p]||typeof e[p]!="object")&&(e[p]={}),e=e[p]}const s=t[t.length-1],r=e[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(e,o):e[s]=o}function c(e,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let s=0;s<t.length;s++){if(typeof e!="object"||e===null)return o;const r=t[s];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in e){const p=e[u];return Array.isArray(p)?p.map(g=>c(g,t.slice(s+1),o)):o}else return o}else e=e[r]}return e}catch(s){if(s instanceof TypeError)return o;throw s}}function xT(e,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),u=s.split("."),p=new Set;let g=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){g=v;break}if(g!==-1&&u.length>g)for(let v=g;v<u.length;v++){const m=u[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&p.add(m)}yf(e,r,u,0,p)}}function yf(e,t,o,s,r){if(s>=t.length||typeof e!="object"||e===null)return;const u=t[s];if(u.endsWith("[]")){const p=u.slice(0,-2),g=e;if(p in g&&Array.isArray(g[p]))for(const v of g[p])yf(v,t,o,s+1,r)}else if(u==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const p=e,g=Object.keys(p).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of g)v[m]=p[m];for(const[m,x]of Object.entries(v)){const b=[];for(const T of o.slice(s))T==="*"?b.push(m):b.push(T);f(p,b,x)}for(const m of g)delete p[m]}}else{const p=e;u in p&&yf(p[u],t,o,s+1,r)}}function qf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function bT(e){const t={},o=c(e,["operationName"]);o!=null&&f(t,["operationName"],o);const s=c(e,["resourceName"]);return s!=null&&f(t,["_url","resourceName"],s),t}function ST(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response","generateVideoResponse"]);return p!=null&&f(t,["response"],wT(p)),t}function TT(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],CT(p)),t}function wT(e){const t={},o=c(e,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>ET(p))),f(t,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function CT(e){const t={},o=c(e,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>_T(p))),f(t,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function ET(e){const t={},o=c(e,["video"]);return o!=null&&f(t,["video"],IT(o)),t}function _T(e){const t={},o=c(e,["_self"]);return o!=null&&f(t,["video"],zT(o)),t}function NT(e){const t={},o=c(e,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function AT(e){const t={},o=c(e,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function MT(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],kT(p)),t}function kT(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["parent"]);s!=null&&f(t,["parent"],s);const r=c(e,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function tv(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],RT(p)),t}function RT(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["parent"]);s!=null&&f(t,["parent"],s);const r=c(e,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function IT(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["uri"],o);const s=c(e,["encodedVideo"]);s!=null&&f(t,["videoBytes"],qf(s));const r=c(e,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function zT(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["uri"],o);const s=c(e,["bytesBase64Encoded"]);s!=null&&f(t,["videoBytes"],qf(s));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}var lg;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lg||(lg={}));var sg;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(sg||(sg={}));var ag;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(ag||(ag={}));var vn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(vn||(vn={}));var rg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(rg||(rg={}));var cg;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cg||(cg={}));var ug;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(ug||(ug={}));var dg;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dg||(dg={}));var fg;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(fg||(fg={}));var pg;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(pg||(pg={}));var hg;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hg||(hg={}));var mg;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(mg||(mg={}));var gg;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(gg||(gg={}));var yg;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(yg||(yg={}));var vg;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(vg||(vg={}));var xg;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xg||(xg={}));var bg;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bg||(bg={}));var Sg;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Sg||(Sg={}));var Tg;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tg||(Tg={}));var Rc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Rc||(Rc={}));var wg;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wg||(wg={}));var Cg;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Cg||(Cg={}));var Eg;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Eg||(Eg={}));var vf;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vf||(vf={}));var _g;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_g||(_g={}));var Ng;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Ng||(Ng={}));var Ag;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Ag||(Ag={}));var Mg;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Mg||(Mg={}));var kg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(kg||(kg={}));var Rg;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Rg||(Rg={}));var Ig;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Ig||(Ig={}));var zg;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zg||(zg={}));var Dg;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Dg||(Dg={}));var Ug;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Ug||(Ug={}));var Lg;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Lg||(Lg={}));var Fg;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fg||(Fg={}));var Pg;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Pg||(Pg={}));var Bg;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Bg||(Bg={}));var Og;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Og||(Og={}));var Hg;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Hg||(Hg={}));var Gg;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Gg||(Gg={}));var Vg;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Vg||(Vg={}));var jg;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(jg||(jg={}));var qg;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(qg||(qg={}));var $g;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})($g||($g={}));var Yg;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Yg||(Yg={}));var Jg;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Jg||(Jg={}));var Kg;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Kg||(Kg={}));var Xg;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Xg||(Xg={}));var Wg;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Wg||(Wg={}));var Qg;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qg||(Qg={}));var Zg;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Zg||(Zg={}));var ey;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ey||(ey={}));var ty;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ty||(ty={}));var ny;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(ny||(ny={}));var Is;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Is||(Is={}));class xf{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class za{get text(){var t,o,s,r,u,p,g,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const b=[];for(const T of(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)!==null&&v!==void 0?v:[]){for(const[A,_]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(_!==null||_!==void 0)&&b.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,s,r,u,p,g,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const b of(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(b))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,s,r,u,p,g,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,s,r,u,p,g,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,s,r,u,p,g,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class iy{}class oy{}class DT{}class UT{}class LT{}class FT{}class ly{}class sy{}class ay{}class PT{}class Ic{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Ic;let r;const u=t;return o?r=TT(u):r=ST(u),Object.assign(s,r),s}}class ry{}class cy{}class uy{}class dy{}class BT{}class OT{}class HT{}class $f{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new $f,u=MT(t);return Object.assign(s,u),s}}class GT{}class VT{}class jT{}class fy{}class qT{get text(){var t,o,s;let r="",u=!1;const p=[];for(const g of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,m]of Object.entries(g))v!=="text"&&v!=="thought"&&m!==null&&p.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;u=!0,r+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,o,s;let r="";const u=[];for(const p of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[g,v]of Object.entries(p))g!=="inlineData"&&v!==null&&u.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(r+=atob(p.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class $T{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yf{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Yf,u=tv(t);return Object.assign(s,u),s}}function Qt(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function nv(e,t){const o=Qt(e,t);return o?o.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${o}`:o.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${o}`:o:""}function iv(e){return Array.isArray(e)?e.map(t=>zc(t)):[zc(e)]}function zc(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ov(e){const t=zc(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function lv(e){const t=zc(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function py(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function sv(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>py(t)):[py(e)]}function bf(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function hy(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function my(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ti(e){if(e==null)throw new Error("ContentUnion is required");return bf(e)?e:{role:"user",parts:sv(e)}}function Jf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=ti(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(e.isVertexAI()){const o=ti(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>ti(o)):[ti(t)]}function Hi(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(hy(e)||my(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ti(e)]}const t=[],o=[],s=bf(e[0]);for(const r of e){const u=bf(r);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(r);else{if(hy(r)||my(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:sv(o)}),t}function YT(e,t){e.includes("null")&&(t.nullable=!0);const o=e.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(vn).includes(o[0].toUpperCase())?o[0].toUpperCase():vn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(vn).includes(s.toUpperCase())?s.toUpperCase():vn.TYPE_UNSPECIFIED})}}function Ps(e){const t={},o=["items"],s=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=e.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,e=u[1]):u[1].type==="null"&&(t.nullable=!0,e=u[0])),e.type instanceof Array&&YT(e.type,t);for(const[p,g]of Object.entries(e))if(g!=null)if(p=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;t.type=Object.values(vn).includes(g.toUpperCase())?g.toUpperCase():vn.TYPE_UNSPECIFIED}else if(o.includes(p))t[p]=Ps(g);else if(s.includes(p)){const v=[];for(const m of g){if(m.type=="null"){t.nullable=!0;continue}v.push(Ps(m))}t[p]=v}else if(r.includes(p)){const v={};for(const[m,x]of Object.entries(g))v[m]=Ps(x);t[p]=v}else{if(p==="additionalProperties")continue;t[p]=g}return t}function Kf(e){return Ps(e)}function Xf(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Wf(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Vs(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ps(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ps(t.response));return e}function js(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of e)t.push(o);return t}function JT(e,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function Lo(e,t){if(typeof t!="string")throw new Error("name must be a string");return JT(e,t,"cachedContents")}function av(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function gl(e){return qf(e)}function KT(e){return e!=null&&typeof e=="object"&&"name"in e}function XT(e){return e!=null&&typeof e=="object"&&"video"in e}function WT(e){return e!=null&&typeof e=="object"&&"uri"in e}function rv(e){var t;let o;if(KT(e)&&(o=e.name),!(WT(e)&&(o=e.uri,o===void 0))&&!(XT(e)&&(o=(t=e.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof e=="string"&&(o=e),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function cv(e,t){let o;return e.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function uv(e){for(const t of["models","tunedModels","publisherModels"])if(QT(e,t))return e[t];return[]}function QT(e,t){return e!==null&&typeof e=="object"&&t in e}function ZT(e,t={}){const o=e,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function ew(e,t={}){const o=[],s=new Set;for(const r of e){const u=r.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const p=ZT(r,t);p.functionDeclarations&&o.push(...p.functionDeclarations)}return{functionDeclarations:o}}function dv(e,t){let o;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function tw(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function fv(e){if(typeof e!="object"||e===null)return{};const t=e,o=t.inlinedResponses;if(typeof o!="object"||o===null)return e;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let u=!1;for(const p of r){if(typeof p!="object"||p===null)continue;const v=p.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){u=!0;break}}return u&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function qs(e,t){const o=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function pv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function nw(e){const t={},o=c(e,["responsesFile"]);o!=null&&f(t,["fileName"],o);const s=c(e,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(p=>Lw(p))),f(t,["inlinedResponses"],u)}const r=c(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["inlinedEmbedContentResponses"],u)}return t}function iw(e){const t={},o=c(e,["predictionsFormat"]);o!=null&&f(t,["format"],o);const s=c(e,["gcsDestination","outputUriPrefix"]);s!=null&&f(t,["gcsUri"],s);const r=c(e,["bigqueryDestination","outputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function ow(e){const t={},o=c(e,["format"]);o!=null&&f(t,["predictionsFormat"],o);const s=c(e,["gcsUri"]);s!=null&&f(t,["gcsDestination","outputUriPrefix"],s);const r=c(e,["bigqueryUri"]);if(r!=null&&f(t,["bigqueryDestination","outputUri"],r),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function bc(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata","displayName"]);s!=null&&f(t,["displayName"],s);const r=c(e,["metadata","state"]);r!=null&&f(t,["state"],pv(r));const u=c(e,["metadata","createTime"]);u!=null&&f(t,["createTime"],u);const p=c(e,["metadata","endTime"]);p!=null&&f(t,["endTime"],p);const g=c(e,["metadata","updateTime"]);g!=null&&f(t,["updateTime"],g);const v=c(e,["metadata","model"]);v!=null&&f(t,["model"],v);const m=c(e,["metadata","output"]);return m!=null&&f(t,["dest"],nw(fv(m))),t}function Sf(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(e,["state"]);r!=null&&f(t,["state"],pv(r));const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["createTime"]);p!=null&&f(t,["createTime"],p);const g=c(e,["startTime"]);g!=null&&f(t,["startTime"],g);const v=c(e,["endTime"]);v!=null&&f(t,["endTime"],v);const m=c(e,["updateTime"]);m!=null&&f(t,["updateTime"],m);const x=c(e,["model"]);x!=null&&f(t,["model"],x);const b=c(e,["inputConfig"]);b!=null&&f(t,["src"],lw(b));const T=c(e,["outputConfig"]);T!=null&&f(t,["dest"],iw(fv(T)));const A=c(e,["completionStats"]);return A!=null&&f(t,["completionStats"],A),t}function lw(e){const t={},o=c(e,["instancesFormat"]);o!=null&&f(t,["format"],o);const s=c(e,["gcsSource","uris"]);s!=null&&f(t,["gcsUri"],s);const r=c(e,["bigquerySource","inputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function sw(e,t){const o={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(t,["fileName"]);s!=null&&f(o,["fileName"],s);const r=c(t,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>Uw(e,p))),f(o,["requests","requests"],u)}return o}function aw(e){const t={},o=c(e,["format"]);o!=null&&f(t,["instancesFormat"],o);const s=c(e,["gcsUri"]);s!=null&&f(t,["gcsSource","uris"],s);const r=c(e,["bigqueryUri"]);if(r!=null&&f(t,["bigquerySource","inputUri"],r),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function rw(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function cw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],qs(e,s)),o}function uw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],qs(e,s)),o}function dw(e){const t={},o=c(e,["content"]);o!=null&&f(t,["content"],o);const s=c(e,["citationMetadata"]);s!=null&&f(t,["citationMetadata"],fw(s));const r=c(e,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const u=c(e,["finishReason"]);u!=null&&f(t,["finishReason"],u);const p=c(e,["avgLogprobs"]);p!=null&&f(t,["avgLogprobs"],p);const g=c(e,["groundingMetadata"]);g!=null&&f(t,["groundingMetadata"],g);const v=c(e,["index"]);v!=null&&f(t,["index"],v);const m=c(e,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(e,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),f(t,["safetyRatings"],T)}const b=c(e,["urlContextMetadata"]);return b!=null&&f(t,["urlContextMetadata"],b),t}function fw(e){const t={},o=c(e,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["citations"],s)}return t}function hv(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>Vw(u))),f(t,["parts"],r)}const s=c(e,["role"]);return s!=null&&f(t,["role"],s),t}function pw(e,t){const o={},s=c(e,["displayName"]);if(t!==void 0&&s!=null&&f(t,["batch","displayName"],s),c(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function hw(e,t){const o={},s=c(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(e,["dest"]);return t!==void 0&&r!=null&&f(t,["outputConfig"],ow(tw(r))),o}function gy(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],sw(e,dv(e,r)));const u=c(t,["config"]);return u!=null&&pw(u,o),o}function mw(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Qt(e,s));const r=c(t,["src"]);r!=null&&f(o,["inputConfig"],aw(dv(e,r)));const u=c(t,["config"]);return u!=null&&hw(u,o),o}function gw(e,t){const o={},s=c(e,["displayName"]);return t!==void 0&&s!=null&&f(t,["batch","displayName"],s),o}function yw(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],Cw(e,r));const u=c(t,["config"]);return u!=null&&gw(u,o),o}function vw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],qs(e,s)),o}function xw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],qs(e,s)),o}function bw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&f(t,["name"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);return u!=null&&f(t,["error"],u),t}function Sw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["name"]);s!=null&&f(t,["name"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);return u!=null&&f(t,["error"],u),t}function Tw(e,t){const o={},s=c(t,["contents"]);if(s!=null){let u=Jf(e,s);Array.isArray(u)&&(u=u.map(p=>p)),f(o,["requests[]","request","content"],u)}const r=c(t,["config"]);return r!=null&&(f(o,["_self"],ww(r,o)),xT(o,{"requests[].*":"requests[].request.*"})),o}function ww(e,t){const o={},s=c(e,["taskType"]);t!==void 0&&s!=null&&f(t,["requests[]","taskType"],s);const r=c(e,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const u=c(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&f(t,["requests[]","outputDimensionality"],u),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Cw(e,t){const o={},s=c(t,["fileName"]);s!=null&&f(o,["file_name"],s);const r=c(t,["inlinedRequests"]);return r!=null&&f(o,["requests"],Tw(e,r)),o}function Ew(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function _w(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const s=c(e,["args"]);s!=null&&f(t,["args"],s);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Nw(e){const t={},o=c(e,["mode"]);o!=null&&f(t,["mode"],o);const s=c(e,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Aw(e,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],hv(ti(r)));const u=c(t,["temperature"]);u!=null&&f(s,["temperature"],u);const p=c(t,["topP"]);p!=null&&f(s,["topP"],p);const g=c(t,["topK"]);g!=null&&f(s,["topK"],g);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(s,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(s,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const _=c(t,["frequencyPenalty"]);_!=null&&f(s,["frequencyPenalty"],_);const V=c(t,["seed"]);V!=null&&f(s,["seed"],V);const G=c(t,["responseMimeType"]);G!=null&&f(s,["responseMimeType"],G);const J=c(t,["responseSchema"]);J!=null&&f(s,["responseSchema"],Kf(J));const fe=c(t,["responseJsonSchema"]);if(fe!=null&&f(s,["responseJsonSchema"],fe),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=c(t,["safetySettings"]);if(o!==void 0&&ce!=null){let ht=ce;Array.isArray(ht)&&(ht=ht.map(At=>jw(At))),f(o,["safetySettings"],ht)}const ge=c(t,["tools"]);if(o!==void 0&&ge!=null){let ht=js(ge);Array.isArray(ht)&&(ht=ht.map(At=>$w(Vs(At)))),f(o,["tools"],ht)}const ze=c(t,["toolConfig"]);if(o!==void 0&&ze!=null&&f(o,["toolConfig"],qw(ze)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const De=c(t,["cachedContent"]);o!==void 0&&De!=null&&f(o,["cachedContent"],Lo(e,De));const we=c(t,["responseModalities"]);we!=null&&f(s,["responseModalities"],we);const ot=c(t,["mediaResolution"]);ot!=null&&f(s,["mediaResolution"],ot);const Ae=c(t,["speechConfig"]);if(Ae!=null&&f(s,["speechConfig"],Xf(Ae)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=c(t,["thinkingConfig"]);Qe!=null&&f(s,["thinkingConfig"],Qe);const Pe=c(t,["imageConfig"]);Pe!=null&&f(s,["imageConfig"],Dw(Pe));const ut=c(t,["enableEnhancedCivicAnswers"]);return ut!=null&&f(s,["enableEnhancedCivicAnswers"],ut),s}function Mw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>dw(m))),f(t,["candidates"],v)}const r=c(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const u=c(e,["promptFeedback"]);u!=null&&f(t,["promptFeedback"],u);const p=c(e,["responseId"]);p!=null&&f(t,["responseId"],p);const g=c(e,["usageMetadata"]);return g!=null&&f(t,["usageMetadata"],g),t}function kw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],qs(e,s)),o}function Rw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],qs(e,s)),o}function Iw(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function zw(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function Dw(e){const t={},o=c(e,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(e,["imageSize"]);if(s!=null&&f(t,["imageSize"],s),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Uw(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["request","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let g=Hi(r);Array.isArray(g)&&(g=g.map(v=>hv(v))),f(o,["request","contents"],g)}const u=c(t,["metadata"]);u!=null&&f(o,["metadata"],u);const p=c(t,["config"]);return p!=null&&f(o,["request","generationConfig"],Aw(e,p,c(o,["request"],{}))),o}function Lw(e){const t={},o=c(e,["response"]);o!=null&&f(t,["response"],Mw(o));const s=c(e,["error"]);return s!=null&&f(t,["error"],s),t}function Fw(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);if(t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),c(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Pw(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const u=c(e,["filter"]);return t!==void 0&&u!=null&&f(t,["_query","filter"],u),o}function Bw(e){const t={},o=c(e,["config"]);return o!=null&&Fw(o,t),t}function Ow(e){const t={},o=c(e,["config"]);return o!=null&&Pw(o,t),t}function Hw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>bc(p))),f(t,["batchJobs"],u)}return t}function Gw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>Sf(p))),f(t,["batchJobs"],u)}return t}function Vw(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],Ew(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],_w(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],rw(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function jw(e){const t={},o=c(e,["category"]);if(o!=null&&f(t,["category"],o),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(e,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function qw(e){const t={},o=c(e,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],Nw(o));const s=c(e,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function $w(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],Iw(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],zw(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}var Do;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Do||(Do={}));class jl{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,u;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let p={config:{}};!s||Object.keys(s).length===0?p={config:{}}:typeof s=="object"?p=Object.assign({},s):p=s,p.config&&(p.config.pageToken=o.nextPageToken),this.paramsInternal=p,this.pageInternalSize=(u=(r=p.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class Yw extends Uo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new jl(Do.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=gy(this.apiClient,t),s=o._url,r=Xe("{model}:batchGenerateContent",s),g=o.batch.inputConfig.requests,v=g.requests,m=[];for(const x of v){const b=Object.assign({},x);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const A=b.request;A.systemInstruction=T,b.request=A}m.push(b)}return g.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const u=this.getGcsUri(t),p=this.getBigqueryUri(t);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${r}`;else if(p)s.dest=`${p}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=mw(this.apiClient,t);return g=Xe("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>Sf(x))}else{const m=gy(this.apiClient,t);return g=Xe("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>bc(x))}}async createEmbeddingsInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=yw(this.apiClient,t);return u=Xe("{model}:asyncBatchEmbedContent",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>bc(v))}}async get(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Rw(this.apiClient,t);return g=Xe("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>Sf(x))}else{const m=kw(this.apiClient,t);return g=Xe("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>bc(x))}}async cancel(t){var o,s,r,u;let p="",g={};if(this.apiClient.isVertexAI()){const v=uw(this.apiClient,t);p=Xe("batchPredictionJobs/{name}:cancel",v._url),g=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=cw(this.apiClient,t);p=Xe("batches/{name}:cancel",v._url),g=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Ow(t);return g=Xe("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=Gw(x),T=new fy;return Object.assign(T,b),T})}else{const m=Bw(t);return g=Xe("batches",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=Hw(x),T=new fy;return Object.assign(T,b),T})}}async delete(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=xw(this.apiClient,t);return g=Xe("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>Sw(x))}else{const m=vw(this.apiClient,t);return g=Xe("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>bw(x))}}}function Jw(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function yy(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>yC(u))),f(t,["parts"],r)}const s=c(e,["role"]);return s!=null&&f(t,["role"],s),t}function Kw(e,t){const o={},s=c(e,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(e,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const u=c(e,["displayName"]);t!==void 0&&u!=null&&f(t,["displayName"],u);const p=c(e,["contents"]);if(t!==void 0&&p!=null){let x=Hi(p);Array.isArray(x)&&(x=x.map(b=>yy(b))),f(t,["contents"],x)}const g=c(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["systemInstruction"],yy(ti(g)));const v=c(e,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(b=>xC(b))),f(t,["tools"],x)}const m=c(e,["toolConfig"]);if(t!==void 0&&m!=null&&f(t,["toolConfig"],vC(m)),c(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Xw(e,t){const o={},s=c(e,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(e,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const u=c(e,["displayName"]);t!==void 0&&u!=null&&f(t,["displayName"],u);const p=c(e,["contents"]);if(t!==void 0&&p!=null){let b=Hi(p);Array.isArray(b)&&(b=b.map(T=>T)),f(t,["contents"],b)}const g=c(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["systemInstruction"],ti(g));const v=c(e,["tools"]);if(t!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(T=>bC(T))),f(t,["tools"],b)}const m=c(e,["toolConfig"]);t!==void 0&&m!=null&&f(t,["toolConfig"],m);const x=c(e,["kmsKeyName"]);return t!==void 0&&x!=null&&f(t,["encryption_spec","kmsKeyName"],x),o}function Ww(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],nv(e,s));const r=c(t,["config"]);return r!=null&&Kw(r,o),o}function Qw(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],nv(e,s));const r=c(t,["config"]);return r!=null&&Xw(r,o),o}function Zw(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],Lo(e,s)),o}function eC(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],Lo(e,s)),o}function tC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function nC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function iC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function oC(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const s=c(e,["args"]);s!=null&&f(t,["args"],s);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function lC(e){const t={},o=c(e,["mode"]);o!=null&&f(t,["mode"],o);const s=c(e,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function sC(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&f(t,["description"],o);const s=c(e,["name"]);s!=null&&f(t,["name"],s);const r=c(e,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const p=c(e,["response"]);p!=null&&f(t,["response"],p);const g=c(e,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function aC(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],Lo(e,s)),o}function rC(e,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],Lo(e,s)),o}function cC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function uC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function dC(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function fC(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function pC(e){const t={},o=c(e,["config"]);return o!=null&&dC(o,t),t}function hC(e){const t={},o=c(e,["config"]);return o!=null&&fC(o,t),t}function mC(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["cachedContents"],u)}return t}function gC(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["cachedContents"],u)}return t}function yC(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],iC(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],oC(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],Jw(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function vC(e){const t={},o=c(e,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],lC(o));const s=c(e,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function xC(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],cC(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],uC(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function bC(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>sC(T))),f(t,["functionDeclarations"],b)}const s=c(e,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(e,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(e,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const g=c(e,["enterpriseWebSearch"]);g!=null&&f(t,["enterpriseWebSearch"],g);const v=c(e,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(e,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(e,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function SC(e,t){const o={},s=c(e,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(e,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function TC(e,t){const o={},s=c(e,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(e,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function wC(e,t){const o={},s=c(t,["name"]);s!=null&&f(o,["_url","name"],Lo(e,s));const r=c(t,["config"]);return r!=null&&SC(r,o),o}function CC(e,t){const o={},s=c(t,["name"]);s!=null&&f(o,["_url","name"],Lo(e,s));const r=c(t,["config"]);return r!=null&&TC(r,o),o}class EC extends Uo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new jl(Do.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Qw(this.apiClient,t);return g=Xe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>x)}else{const m=Ww(this.apiClient,t);return g=Xe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>x)}}async get(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=rC(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>x)}else{const m=aC(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>x)}}async delete(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=eC(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=nC(x),T=new uy;return Object.assign(T,b),T})}else{const m=Zw(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=tC(x),T=new uy;return Object.assign(T,b),T})}}async update(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=CC(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>x)}else{const m=wC(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>x)}}async listInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=hC(t);return g=Xe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=gC(x),T=new dy;return Object.assign(T,b),T})}else{const m=pC(t);return g=Xe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=mC(x),T=new dy;return Object.assign(T,b),T})}}}function Dc(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(o[s[r]]=e[s[r]]);return o}function vy(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],s=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nt(e){return this instanceof Nt?(this.v=e,this):new Nt(e)}function Ji(e,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(e,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",p),r[Symbol.asyncIterator]=function(){return this},r;function p(A){return function(_){return Promise.resolve(_).then(A,b)}}function g(A,_){s[A]&&(r[A]=function(V){return new Promise(function(G,J){u.push([A,V,G,J])>1||v(A,V)})},_&&(r[A]=_(r[A])))}function v(A,_){try{m(s[A](_))}catch(V){T(u[0][3],V)}}function m(A){A.value instanceof Nt?Promise.resolve(A.value.v).then(x,b):T(u[0][2],A)}function x(A){v("next",A)}function b(A){v("throw",A)}function T(A,_){A(_),u.shift(),u.length&&v(u[0][0],u[0][1])}}function Ki(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],o;return t?t.call(e):(e=typeof vy=="function"?vy(e):e[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(u){o[u]=e[u]&&function(p){return new Promise(function(g,v){p=e[u](p),r(g,v,p.done,p.value)})}}function r(u,p,g,v){Promise.resolve(v).then(function(m){u({value:m,done:g})},p)}}function _C(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const o=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:mv(o)}function mv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function NC(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function xy(e){if(e===void 0||e.length===0)return[];const t=[],o=e.length;let s=0;for(;s<o;)if(e[s].role==="user")t.push(e[s]),s++;else{const r=[];let u=!0;for(;s<o&&e[s].role==="model";)r.push(e[s]),u&&!mv(e[s])&&(u=!1),s++;u?t.push(...r):t.pop()}return t}class AC{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new MC(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class MC{constructor(t,o,s,r={},u=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),NC(u)}async sendMessage(t){var o;await this.sendPromise;const s=ti(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,p,g;const v=await r,m=(p=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content,x=v.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];x!=null&&(T=(g=x.slice(b))!==null&&g!==void 0?g:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=ti(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,s)}getHistory(t=!1){const o=t?xy(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Ji(this,arguments,function*(){var r,u,p,g,v,m;const x=[];try{for(var b=!0,T=Ki(t),A;A=yield Nt(T.next()),r=A.done,!r;b=!0){g=A.value,b=!1;const _=g;if(_C(_)){const V=(m=(v=_.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;V!==void 0&&x.push(V)}yield yield Nt(_)}}catch(_){u={error:_}}finally{try{!b&&!r&&(p=T.return)&&(yield Nt(p.call(T)))}finally{if(u)throw u.error}}this.recordHistory(o,x)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(u=>u.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...xy(s)):this.history.push(t),this.history.push(...r)}}class jc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,jc.prototype)}}function kC(e){const t={},o=c(e,["file"]);return o!=null&&f(t,["file"],o),t}function RC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function IC(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","file"],rv(o)),t}function zC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function DC(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","file"],rv(o)),t}function UC(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function LC(e){const t={},o=c(e,["config"]);return o!=null&&UC(o,t),t}function FC(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["files"],u)}return t}class PC extends Uo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new jl(Do.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=LC(t);return u=Xe("files",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=FC(v),x=new GT;return Object.assign(x,m),x})}}async createInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=kC(t);return u=Xe("upload/v1beta/files",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=RC(v),x=new VT;return Object.assign(x,m),x})}}async get(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=DC(t);return u=Xe("files/{file}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=IC(t);return u=Xe("files/{file}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=zC(v),x=new jT;return Object.assign(x,m),x})}}}function Sc(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function BC(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>tE(u))),f(t,["parts"],r)}const s=c(e,["role"]);return s!=null&&f(t,["role"],s),t}function OC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function HC(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const s=c(e,["args"]);s!=null&&f(t,["args"],s);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GC(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&f(t,["description"],o);const s=c(e,["name"]);s!=null&&f(t,["name"],s);const r=c(e,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const p=c(e,["response"]);p!=null&&f(t,["response"],p);const g=c(e,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function VC(e){const t={},o=c(e,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const s=c(e,["responseJsonSchema"]);s!=null&&f(t,["responseJsonSchema"],s);const r=c(e,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const u=c(e,["candidateCount"]);u!=null&&f(t,["candidateCount"],u);const p=c(e,["enableAffectiveDialog"]);p!=null&&f(t,["enableAffectiveDialog"],p);const g=c(e,["frequencyPenalty"]);g!=null&&f(t,["frequencyPenalty"],g);const v=c(e,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(e,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(e,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const b=c(e,["presencePenalty"]);b!=null&&f(t,["presencePenalty"],b);const T=c(e,["responseLogprobs"]);T!=null&&f(t,["responseLogprobs"],T);const A=c(e,["responseMimeType"]);A!=null&&f(t,["responseMimeType"],A);const _=c(e,["responseModalities"]);_!=null&&f(t,["responseModalities"],_);const V=c(e,["responseSchema"]);V!=null&&f(t,["responseSchema"],V);const G=c(e,["routingConfig"]);G!=null&&f(t,["routingConfig"],G);const J=c(e,["seed"]);J!=null&&f(t,["seed"],J);const fe=c(e,["speechConfig"]);fe!=null&&f(t,["speechConfig"],fe);const ce=c(e,["stopSequences"]);ce!=null&&f(t,["stopSequences"],ce);const ge=c(e,["temperature"]);ge!=null&&f(t,["temperature"],ge);const ze=c(e,["thinkingConfig"]);ze!=null&&f(t,["thinkingConfig"],ze);const De=c(e,["topK"]);De!=null&&f(t,["topK"],De);const we=c(e,["topP"]);if(we!=null&&f(t,["topP"],we),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function jC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function qC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function $C(e,t){const o={},s=c(e,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],s);const r=c(e,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const p=c(e,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const g=c(e,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const v=c(e,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(e,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(e,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(e,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Wf(b));const T=c(e,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const A=c(e,["enableAffectiveDialog"]);t!==void 0&&A!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],A);const _=c(e,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],BC(ti(_)));const V=c(e,["tools"]);if(t!==void 0&&V!=null){let De=js(V);Array.isArray(De)&&(De=De.map(we=>iE(Vs(we)))),f(t,["setup","tools"],De)}const G=c(e,["sessionResumption"]);t!==void 0&&G!=null&&f(t,["setup","sessionResumption"],nE(G));const J=c(e,["inputAudioTranscription"]);t!==void 0&&J!=null&&f(t,["setup","inputAudioTranscription"],J);const fe=c(e,["outputAudioTranscription"]);t!==void 0&&fe!=null&&f(t,["setup","outputAudioTranscription"],fe);const ce=c(e,["realtimeInputConfig"]);t!==void 0&&ce!=null&&f(t,["setup","realtimeInputConfig"],ce);const ge=c(e,["contextWindowCompression"]);t!==void 0&&ge!=null&&f(t,["setup","contextWindowCompression"],ge);const ze=c(e,["proactivity"]);if(t!==void 0&&ze!=null&&f(t,["setup","proactivity"],ze),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function YC(e,t){const o={},s=c(e,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],VC(s));const r=c(e,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const p=c(e,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const g=c(e,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const v=c(e,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(e,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(e,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(e,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Wf(b));const T=c(e,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const A=c(e,["enableAffectiveDialog"]);t!==void 0&&A!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],A);const _=c(e,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],ti(_));const V=c(e,["tools"]);if(t!==void 0&&V!=null){let we=js(V);Array.isArray(we)&&(we=we.map(ot=>oE(Vs(ot)))),f(t,["setup","tools"],we)}const G=c(e,["sessionResumption"]);t!==void 0&&G!=null&&f(t,["setup","sessionResumption"],G);const J=c(e,["inputAudioTranscription"]);t!==void 0&&J!=null&&f(t,["setup","inputAudioTranscription"],J);const fe=c(e,["outputAudioTranscription"]);t!==void 0&&fe!=null&&f(t,["setup","outputAudioTranscription"],fe);const ce=c(e,["realtimeInputConfig"]);t!==void 0&&ce!=null&&f(t,["setup","realtimeInputConfig"],ce);const ge=c(e,["contextWindowCompression"]);t!==void 0&&ge!=null&&f(t,["setup","contextWindowCompression"],ge);const ze=c(e,["proactivity"]);t!==void 0&&ze!=null&&f(t,["setup","proactivity"],ze);const De=c(e,["explicitVadSignal"]);return t!==void 0&&De!=null&&f(t,["setup","explicitVadSignal"],De),o}function JC(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Qt(e,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],$C(r,o)),o}function KC(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Qt(e,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],YC(r,o)),o}function XC(e){const t={},o=c(e,["musicGenerationConfig"]);return o!=null&&f(t,["musicGenerationConfig"],o),t}function WC(e){const t={},o=c(e,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["weightedPrompts"],s)}return t}function QC(e){const t={},o=c(e,["media"]);if(o!=null){let m=iv(o);Array.isArray(m)&&(m=m.map(x=>Sc(x))),f(t,["mediaChunks"],m)}const s=c(e,["audio"]);s!=null&&f(t,["audio"],Sc(lv(s)));const r=c(e,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const u=c(e,["video"]);u!=null&&f(t,["video"],Sc(ov(u)));const p=c(e,["text"]);p!=null&&f(t,["text"],p);const g=c(e,["activityStart"]);g!=null&&f(t,["activityStart"],g);const v=c(e,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function ZC(e){const t={},o=c(e,["media"]);if(o!=null){let m=iv(o);Array.isArray(m)&&(m=m.map(x=>x)),f(t,["mediaChunks"],m)}const s=c(e,["audio"]);s!=null&&f(t,["audio"],lv(s));const r=c(e,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const u=c(e,["video"]);u!=null&&f(t,["video"],ov(u));const p=c(e,["text"]);p!=null&&f(t,["text"],p);const g=c(e,["activityStart"]);g!=null&&f(t,["activityStart"],g);const v=c(e,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function eE(e){const t={},o=c(e,["setupComplete"]);o!=null&&f(t,["setupComplete"],o);const s=c(e,["serverContent"]);s!=null&&f(t,["serverContent"],s);const r=c(e,["toolCall"]);r!=null&&f(t,["toolCall"],r);const u=c(e,["toolCallCancellation"]);u!=null&&f(t,["toolCallCancellation"],u);const p=c(e,["usageMetadata"]);p!=null&&f(t,["usageMetadata"],lE(p));const g=c(e,["goAway"]);g!=null&&f(t,["goAway"],g);const v=c(e,["sessionResumptionUpdate"]);v!=null&&f(t,["sessionResumptionUpdate"],v);const m=c(e,["voiceActivityDetectionSignal"]);return m!=null&&f(t,["voiceActivityDetectionSignal"],m),t}function tE(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],OC(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],HC(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],Sc(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function nE(e){const t={},o=c(e,["handle"]);if(o!=null&&f(t,["handle"],o),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function iE(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],jC(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],qC(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function oE(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>GC(T))),f(t,["functionDeclarations"],b)}const s=c(e,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(e,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(e,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const g=c(e,["enterpriseWebSearch"]);g!=null&&f(t,["enterpriseWebSearch"],g);const v=c(e,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(e,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(e,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function lE(e){const t={},o=c(e,["promptTokenCount"]);o!=null&&f(t,["promptTokenCount"],o);const s=c(e,["cachedContentTokenCount"]);s!=null&&f(t,["cachedContentTokenCount"],s);const r=c(e,["candidatesTokenCount"]);r!=null&&f(t,["responseTokenCount"],r);const u=c(e,["toolUsePromptTokenCount"]);u!=null&&f(t,["toolUsePromptTokenCount"],u);const p=c(e,["thoughtsTokenCount"]);p!=null&&f(t,["thoughtsTokenCount"],p);const g=c(e,["totalTokenCount"]);g!=null&&f(t,["totalTokenCount"],g);const v=c(e,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(_=>_)),f(t,["promptTokensDetails"],A)}const m=c(e,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(_=>_)),f(t,["cacheTokensDetails"],A)}const x=c(e,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(_=>_)),f(t,["responseTokensDetails"],A)}const b=c(e,["toolUsePromptTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(_=>_)),f(t,["toolUsePromptTokensDetails"],A)}const T=c(e,["trafficType"]);return T!=null&&f(t,["trafficType"],T),t}function sE(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function aE(e){const t={},o=c(e,["content"]);o!=null&&f(t,["content"],o);const s=c(e,["citationMetadata"]);s!=null&&f(t,["citationMetadata"],rE(s));const r=c(e,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const u=c(e,["finishReason"]);u!=null&&f(t,["finishReason"],u);const p=c(e,["avgLogprobs"]);p!=null&&f(t,["avgLogprobs"],p);const g=c(e,["groundingMetadata"]);g!=null&&f(t,["groundingMetadata"],g);const v=c(e,["index"]);v!=null&&f(t,["index"],v);const m=c(e,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(e,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),f(t,["safetyRatings"],T)}const b=c(e,["urlContextMetadata"]);return b!=null&&f(t,["urlContextMetadata"],b),t}function rE(e){const t={},o=c(e,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["citations"],s)}return t}function cE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let u=Hi(r);Array.isArray(u)&&(u=u.map(p=>p)),f(o,["contents"],u)}return o}function uE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(t,["tokensInfo"],r)}return t}function dE(e){const t={},o=c(e,["values"]);o!=null&&f(t,["values"],o);const s=c(e,["statistics"]);return s!=null&&f(t,["statistics"],fE(s)),t}function fE(e){const t={},o=c(e,["truncated"]);o!=null&&f(t,["truncated"],o);const s=c(e,["token_count"]);return s!=null&&f(t,["tokenCount"],s),t}function qc(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>S_(u))),f(t,["parts"],r)}const s=c(e,["role"]);return s!=null&&f(t,["role"],s),t}function pE(e){const t={},o=c(e,["controlType"]);o!=null&&f(t,["controlType"],o);const s=c(e,["enableControlImageComputation"]);return s!=null&&f(t,["computeControl"],s),t}function hE(e){const t={};if(c(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function mE(e,t){const o={},s=c(e,["systemInstruction"]);t!==void 0&&s!=null&&f(t,["systemInstruction"],ti(s));const r=c(e,["tools"]);if(t!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>xv(g))),f(t,["tools"],p)}const u=c(e,["generationConfig"]);return t!==void 0&&u!=null&&f(t,["generationConfig"],s_(u)),o}function gE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let p=Hi(r);Array.isArray(p)&&(p=p.map(g=>qc(g))),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&hE(u),o}function yE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let p=Hi(r);Array.isArray(p)&&(p=p.map(g=>g)),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&mE(u,o),o}function vE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["totalTokens"]);s!=null&&f(t,["totalTokens"],s);const r=c(e,["cachedContentTokenCount"]);return r!=null&&f(t,["cachedContentTokenCount"],r),t}function xE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["totalTokens"]);return s!=null&&f(t,["totalTokens"],s),t}function bE(e,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Qt(e,s)),o}function SE(e,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Qt(e,s)),o}function TE(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function wE(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function CE(e,t){const o={},s=c(e,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(e,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const u=c(e,["numberOfImages"]);t!==void 0&&u!=null&&f(t,["parameters","sampleCount"],u);const p=c(e,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const g=c(e,["guidanceScale"]);t!==void 0&&g!=null&&f(t,["parameters","guidanceScale"],g);const v=c(e,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(e,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(e,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&f(t,["parameters","includeSafetyAttributes"],b);const T=c(e,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const A=c(e,["language"]);t!==void 0&&A!=null&&f(t,["parameters","language"],A);const _=c(e,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const V=c(e,["outputCompressionQuality"]);t!==void 0&&V!=null&&f(t,["parameters","outputOptions","compressionQuality"],V);const G=c(e,["addWatermark"]);t!==void 0&&G!=null&&f(t,["parameters","addWatermark"],G);const J=c(e,["labels"]);t!==void 0&&J!=null&&f(t,["labels"],J);const fe=c(e,["editMode"]);t!==void 0&&fe!=null&&f(t,["parameters","editMode"],fe);const ce=c(e,["baseSteps"]);return t!==void 0&&ce!=null&&f(t,["parameters","editConfig","baseSteps"],ce),o}function EE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>N_(v))),f(o,["instances[0]","referenceImages"],g)}const p=c(t,["config"]);return p!=null&&CE(p,o),o}function _E(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>$c(u))),f(t,["generatedImages"],r)}return t}function NE(e,t){const o={},s=c(e,["taskType"]);t!==void 0&&s!=null&&f(t,["requests[]","taskType"],s);const r=c(e,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const u=c(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&f(t,["requests[]","outputDimensionality"],u),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function AE(e,t){const o={},s=c(e,["taskType"]);t!==void 0&&s!=null&&f(t,["instances[]","task_type"],s);const r=c(e,["title"]);t!==void 0&&r!=null&&f(t,["instances[]","title"],r);const u=c(e,["outputDimensionality"]);t!==void 0&&u!=null&&f(t,["parameters","outputDimensionality"],u);const p=c(e,["mimeType"]);t!==void 0&&p!=null&&f(t,["instances[]","mimeType"],p);const g=c(e,["autoTruncate"]);return t!==void 0&&g!=null&&f(t,["parameters","autoTruncate"],g),o}function ME(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let g=Jf(e,r);Array.isArray(g)&&(g=g.map(v=>v)),f(o,["requests[]","content"],g)}const u=c(t,["config"]);u!=null&&NE(u,o);const p=c(t,["model"]);return p!==void 0&&f(o,["requests[]","model"],Qt(e,p)),o}function kE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let p=Jf(e,r);Array.isArray(p)&&(p=p.map(g=>g)),f(o,["instances[]","content"],p)}const u=c(t,["config"]);return u!=null&&AE(u,o),o}function RE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["embeddings"],u)}const r=c(e,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function IE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(p=>dE(p))),f(t,["embeddings"],u)}const r=c(e,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function zE(e){const t={},o=c(e,["endpoint"]);o!=null&&f(t,["name"],o);const s=c(e,["deployedModelId"]);return s!=null&&f(t,["deployedModelId"],s),t}function DE(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function UE(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const s=c(e,["args"]);s!=null&&f(t,["args"],s);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function LE(e){const t={},o=c(e,["mode"]);o!=null&&f(t,["mode"],o);const s=c(e,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function FE(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&f(t,["description"],o);const s=c(e,["name"]);s!=null&&f(t,["name"],s);const r=c(e,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const p=c(e,["response"]);p!=null&&f(t,["response"],p);const g=c(e,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function PE(e,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],qc(ti(r)));const u=c(t,["temperature"]);u!=null&&f(s,["temperature"],u);const p=c(t,["topP"]);p!=null&&f(s,["topP"],p);const g=c(t,["topK"]);g!=null&&f(s,["topK"],g);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(s,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(s,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const _=c(t,["frequencyPenalty"]);_!=null&&f(s,["frequencyPenalty"],_);const V=c(t,["seed"]);V!=null&&f(s,["seed"],V);const G=c(t,["responseMimeType"]);G!=null&&f(s,["responseMimeType"],G);const J=c(t,["responseSchema"]);J!=null&&f(s,["responseSchema"],Kf(J));const fe=c(t,["responseJsonSchema"]);if(fe!=null&&f(s,["responseJsonSchema"],fe),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=c(t,["safetySettings"]);if(o!==void 0&&ce!=null){let ht=ce;Array.isArray(ht)&&(ht=ht.map(At=>A_(At))),f(o,["safetySettings"],ht)}const ge=c(t,["tools"]);if(o!==void 0&&ge!=null){let ht=js(ge);Array.isArray(ht)&&(ht=ht.map(At=>U_(Vs(At)))),f(o,["tools"],ht)}const ze=c(t,["toolConfig"]);if(o!==void 0&&ze!=null&&f(o,["toolConfig"],D_(ze)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const De=c(t,["cachedContent"]);o!==void 0&&De!=null&&f(o,["cachedContent"],Lo(e,De));const we=c(t,["responseModalities"]);we!=null&&f(s,["responseModalities"],we);const ot=c(t,["mediaResolution"]);ot!=null&&f(s,["mediaResolution"],ot);const Ae=c(t,["speechConfig"]);if(Ae!=null&&f(s,["speechConfig"],Xf(Ae)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=c(t,["thinkingConfig"]);Qe!=null&&f(s,["thinkingConfig"],Qe);const Pe=c(t,["imageConfig"]);Pe!=null&&f(s,["imageConfig"],d_(Pe));const ut=c(t,["enableEnhancedCivicAnswers"]);return ut!=null&&f(s,["enableEnhancedCivicAnswers"],ut),s}function BE(e,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],ti(r));const u=c(t,["temperature"]);u!=null&&f(s,["temperature"],u);const p=c(t,["topP"]);p!=null&&f(s,["topP"],p);const g=c(t,["topK"]);g!=null&&f(s,["topK"],g);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(s,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(s,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const _=c(t,["frequencyPenalty"]);_!=null&&f(s,["frequencyPenalty"],_);const V=c(t,["seed"]);V!=null&&f(s,["seed"],V);const G=c(t,["responseMimeType"]);G!=null&&f(s,["responseMimeType"],G);const J=c(t,["responseSchema"]);J!=null&&f(s,["responseSchema"],Kf(J));const fe=c(t,["responseJsonSchema"]);fe!=null&&f(s,["responseJsonSchema"],fe);const ce=c(t,["routingConfig"]);ce!=null&&f(s,["routingConfig"],ce);const ge=c(t,["modelSelectionConfig"]);ge!=null&&f(s,["modelConfig"],ge);const ze=c(t,["safetySettings"]);if(o!==void 0&&ze!=null){let j=ze;Array.isArray(j)&&(j=j.map(Ee=>Ee)),f(o,["safetySettings"],j)}const De=c(t,["tools"]);if(o!==void 0&&De!=null){let j=js(De);Array.isArray(j)&&(j=j.map(Ee=>xv(Vs(Ee)))),f(o,["tools"],j)}const we=c(t,["toolConfig"]);o!==void 0&&we!=null&&f(o,["toolConfig"],we);const ot=c(t,["labels"]);o!==void 0&&ot!=null&&f(o,["labels"],ot);const Ae=c(t,["cachedContent"]);o!==void 0&&Ae!=null&&f(o,["cachedContent"],Lo(e,Ae));const Qe=c(t,["responseModalities"]);Qe!=null&&f(s,["responseModalities"],Qe);const Pe=c(t,["mediaResolution"]);Pe!=null&&f(s,["mediaResolution"],Pe);const ut=c(t,["speechConfig"]);ut!=null&&f(s,["speechConfig"],Xf(ut));const ht=c(t,["audioTimestamp"]);ht!=null&&f(s,["audioTimestamp"],ht);const At=c(t,["thinkingConfig"]);At!=null&&f(s,["thinkingConfig"],At);const Mt=c(t,["imageConfig"]);if(Mt!=null&&f(s,["imageConfig"],f_(Mt)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function by(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let p=Hi(r);Array.isArray(p)&&(p=p.map(g=>qc(g))),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&f(o,["generationConfig"],PE(e,u,o)),o}function Sy(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["contents"]);if(r!=null){let p=Hi(r);Array.isArray(p)&&(p=p.map(g=>g)),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&f(o,["generationConfig"],BE(e,u,o)),o}function Ty(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>aE(m))),f(t,["candidates"],v)}const r=c(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const u=c(e,["promptFeedback"]);u!=null&&f(t,["promptFeedback"],u);const p=c(e,["responseId"]);p!=null&&f(t,["responseId"],p);const g=c(e,["usageMetadata"]);return g!=null&&f(t,["usageMetadata"],g),t}function wy(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(x=>x)),f(t,["candidates"],m)}const r=c(e,["createTime"]);r!=null&&f(t,["createTime"],r);const u=c(e,["modelVersion"]);u!=null&&f(t,["modelVersion"],u);const p=c(e,["promptFeedback"]);p!=null&&f(t,["promptFeedback"],p);const g=c(e,["responseId"]);g!=null&&f(t,["responseId"],g);const v=c(e,["usageMetadata"]);return v!=null&&f(t,["usageMetadata"],v),t}function OE(e,t){const o={};if(c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(e,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const u=c(e,["guidanceScale"]);if(t!==void 0&&u!=null&&f(t,["parameters","guidanceScale"],u),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(e,["safetyFilterLevel"]);t!==void 0&&p!=null&&f(t,["parameters","safetySetting"],p);const g=c(e,["personGeneration"]);t!==void 0&&g!=null&&f(t,["parameters","personGeneration"],g);const v=c(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&f(t,["parameters","includeSafetyAttributes"],v);const m=c(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const x=c(e,["language"]);t!==void 0&&x!=null&&f(t,["parameters","language"],x);const b=c(e,["outputMimeType"]);t!==void 0&&b!=null&&f(t,["parameters","outputOptions","mimeType"],b);const T=c(e,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T),c(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(e,["imageSize"]);if(t!==void 0&&A!=null&&f(t,["parameters","sampleImageSize"],A),c(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function HE(e,t){const o={},s=c(e,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(e,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const u=c(e,["numberOfImages"]);t!==void 0&&u!=null&&f(t,["parameters","sampleCount"],u);const p=c(e,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const g=c(e,["guidanceScale"]);t!==void 0&&g!=null&&f(t,["parameters","guidanceScale"],g);const v=c(e,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(e,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(e,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&f(t,["parameters","includeSafetyAttributes"],b);const T=c(e,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const A=c(e,["language"]);t!==void 0&&A!=null&&f(t,["parameters","language"],A);const _=c(e,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const V=c(e,["outputCompressionQuality"]);t!==void 0&&V!=null&&f(t,["parameters","outputOptions","compressionQuality"],V);const G=c(e,["addWatermark"]);t!==void 0&&G!=null&&f(t,["parameters","addWatermark"],G);const J=c(e,["labels"]);t!==void 0&&J!=null&&f(t,["labels"],J);const fe=c(e,["imageSize"]);t!==void 0&&fe!=null&&f(t,["parameters","sampleImageSize"],fe);const ce=c(e,["enhancePrompt"]);return t!==void 0&&ce!=null&&f(t,["parameters","enhancePrompt"],ce),o}function GE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&OE(u,o),o}function VE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&HE(u,o),o}function jE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(p=>n_(p))),f(t,["generatedImages"],u)}const r=c(e,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],yv(r)),t}function qE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(p=>$c(p))),f(t,["generatedImages"],u)}const r=c(e,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],vv(r)),t}function $E(e,t){const o={},s=c(e,["numberOfVideos"]);if(t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s),c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(e,["durationSeconds"]);if(t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(e,["aspectRatio"]);t!==void 0&&u!=null&&f(t,["parameters","aspectRatio"],u);const p=c(e,["resolution"]);t!==void 0&&p!=null&&f(t,["parameters","resolution"],p);const g=c(e,["personGeneration"]);if(t!==void 0&&g!=null&&f(t,["parameters","personGeneration"],g),c(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(e,["negativePrompt"]);t!==void 0&&v!=null&&f(t,["parameters","negativePrompt"],v);const m=c(e,["enhancePrompt"]);if(t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m),c(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=c(e,["lastFrame"]);t!==void 0&&x!=null&&f(t,["instances[0]","lastFrame"],Yc(x));const b=c(e,["referenceImages"]);if(t!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(A=>J_(A))),f(t,["instances[0]","referenceImages"],T)}if(c(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function YE(e,t){const o={},s=c(e,["numberOfVideos"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const u=c(e,["fps"]);t!==void 0&&u!=null&&f(t,["parameters","fps"],u);const p=c(e,["durationSeconds"]);t!==void 0&&p!=null&&f(t,["parameters","durationSeconds"],p);const g=c(e,["seed"]);t!==void 0&&g!=null&&f(t,["parameters","seed"],g);const v=c(e,["aspectRatio"]);t!==void 0&&v!=null&&f(t,["parameters","aspectRatio"],v);const m=c(e,["resolution"]);t!==void 0&&m!=null&&f(t,["parameters","resolution"],m);const x=c(e,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(e,["pubsubTopic"]);t!==void 0&&b!=null&&f(t,["parameters","pubsubTopic"],b);const T=c(e,["negativePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","negativePrompt"],T);const A=c(e,["enhancePrompt"]);t!==void 0&&A!=null&&f(t,["parameters","enhancePrompt"],A);const _=c(e,["generateAudio"]);t!==void 0&&_!=null&&f(t,["parameters","generateAudio"],_);const V=c(e,["lastFrame"]);t!==void 0&&V!=null&&f(t,["instances[0]","lastFrame"],Xi(V));const G=c(e,["referenceImages"]);if(t!==void 0&&G!=null){let ce=G;Array.isArray(ce)&&(ce=ce.map(ge=>K_(ge))),f(t,["instances[0]","referenceImages"],ce)}const J=c(e,["mask"]);t!==void 0&&J!=null&&f(t,["instances[0]","mask"],Y_(J));const fe=c(e,["compressionQuality"]);return t!==void 0&&fe!=null&&f(t,["parameters","compressionQuality"],fe),o}function JE(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response","generateVideoResponse"]);return p!=null&&f(t,["response"],QE(p)),t}function KE(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],ZE(p)),t}function XE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&f(o,["instances[0]","image"],Yc(u));const p=c(t,["video"]);p!=null&&f(o,["instances[0]","video"],bv(p));const g=c(t,["source"]);g!=null&&e_(g,o);const v=c(t,["config"]);return v!=null&&$E(v,o),o}function WE(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&f(o,["instances[0]","image"],Xi(u));const p=c(t,["video"]);p!=null&&f(o,["instances[0]","video"],Sv(p));const g=c(t,["source"]);g!=null&&t_(g,o);const v=c(t,["config"]);return v!=null&&YE(v,o),o}function QE(e){const t={},o=c(e,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>o_(p))),f(t,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function ZE(e){const t={},o=c(e,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>l_(p))),f(t,["generatedVideos"],u)}const s=c(e,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function e_(e,t){const o={},s=c(e,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(e,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Yc(r));const u=c(e,["video"]);return t!==void 0&&u!=null&&f(t,["instances[0]","video"],bv(u)),o}function t_(e,t){const o={},s=c(e,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(e,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Xi(r));const u=c(e,["video"]);return t!==void 0&&u!=null&&f(t,["instances[0]","video"],Sv(u)),o}function n_(e){const t={},o=c(e,["_self"]);o!=null&&f(t,["image"],p_(o));const s=c(e,["raiFilteredReason"]);s!=null&&f(t,["raiFilteredReason"],s);const r=c(e,["_self"]);return r!=null&&f(t,["safetyAttributes"],yv(r)),t}function $c(e){const t={},o=c(e,["_self"]);o!=null&&f(t,["image"],gv(o));const s=c(e,["raiFilteredReason"]);s!=null&&f(t,["raiFilteredReason"],s);const r=c(e,["_self"]);r!=null&&f(t,["safetyAttributes"],vv(r));const u=c(e,["prompt"]);return u!=null&&f(t,["enhancedPrompt"],u),t}function i_(e){const t={},o=c(e,["_self"]);o!=null&&f(t,["mask"],gv(o));const s=c(e,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(t,["labels"],r)}return t}function o_(e){const t={},o=c(e,["video"]);return o!=null&&f(t,["video"],q_(o)),t}function l_(e){const t={},o=c(e,["_self"]);return o!=null&&f(t,["video"],$_(o)),t}function s_(e){const t={},o=c(e,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const s=c(e,["responseJsonSchema"]);s!=null&&f(t,["responseJsonSchema"],s);const r=c(e,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const u=c(e,["candidateCount"]);u!=null&&f(t,["candidateCount"],u);const p=c(e,["enableAffectiveDialog"]);p!=null&&f(t,["enableAffectiveDialog"],p);const g=c(e,["frequencyPenalty"]);g!=null&&f(t,["frequencyPenalty"],g);const v=c(e,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(e,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(e,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const b=c(e,["presencePenalty"]);b!=null&&f(t,["presencePenalty"],b);const T=c(e,["responseLogprobs"]);T!=null&&f(t,["responseLogprobs"],T);const A=c(e,["responseMimeType"]);A!=null&&f(t,["responseMimeType"],A);const _=c(e,["responseModalities"]);_!=null&&f(t,["responseModalities"],_);const V=c(e,["responseSchema"]);V!=null&&f(t,["responseSchema"],V);const G=c(e,["routingConfig"]);G!=null&&f(t,["routingConfig"],G);const J=c(e,["seed"]);J!=null&&f(t,["seed"],J);const fe=c(e,["speechConfig"]);fe!=null&&f(t,["speechConfig"],fe);const ce=c(e,["stopSequences"]);ce!=null&&f(t,["stopSequences"],ce);const ge=c(e,["temperature"]);ge!=null&&f(t,["temperature"],ge);const ze=c(e,["thinkingConfig"]);ze!=null&&f(t,["thinkingConfig"],ze);const De=c(e,["topK"]);De!=null&&f(t,["topK"],De);const we=c(e,["topP"]);if(we!=null&&f(t,["topP"],we),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function a_(e,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Qt(e,s)),o}function r_(e,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Qt(e,s)),o}function c_(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function u_(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function d_(e){const t={},o=c(e,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(e,["imageSize"]);if(s!=null&&f(t,["imageSize"],s),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function f_(e){const t={},o=c(e,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(e,["imageSize"]);s!=null&&f(t,["imageSize"],s);const r=c(e,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);const u=c(e,["outputCompressionQuality"]);return u!=null&&f(t,["imageOutputOptions","compressionQuality"],u),t}function p_(e){const t={},o=c(e,["bytesBase64Encoded"]);o!=null&&f(t,["imageBytes"],gl(o));const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function gv(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const s=c(e,["bytesBase64Encoded"]);s!=null&&f(t,["imageBytes"],gl(s));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Yc(e){const t={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(e,["imageBytes"]);o!=null&&f(t,["bytesBase64Encoded"],gl(o));const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Xi(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const s=c(e,["imageBytes"]);s!=null&&f(t,["bytesBase64Encoded"],gl(s));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function h_(e,t,o){const s={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const p=c(t,["filter"]);o!==void 0&&p!=null&&f(o,["_query","filter"],p);const g=c(t,["queryBase"]);return o!==void 0&&g!=null&&f(o,["_url","models_url"],cv(e,g)),s}function m_(e,t,o){const s={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const p=c(t,["filter"]);o!==void 0&&p!=null&&f(o,["_query","filter"],p);const g=c(t,["queryBase"]);return o!==void 0&&g!=null&&f(o,["_url","models_url"],cv(e,g)),s}function g_(e,t){const o={},s=c(t,["config"]);return s!=null&&h_(e,s,o),o}function y_(e,t){const o={},s=c(t,["config"]);return s!=null&&m_(e,s,o),o}function v_(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["_self"]);if(r!=null){let u=uv(r);Array.isArray(u)&&(u=u.map(p=>Tf(p))),f(t,["models"],u)}return t}function x_(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["_self"]);if(r!=null){let u=uv(r);Array.isArray(u)&&(u=u.map(p=>wf(p))),f(t,["models"],u)}return t}function b_(e){const t={},o=c(e,["maskMode"]);o!=null&&f(t,["maskMode"],o);const s=c(e,["segmentationClasses"]);s!=null&&f(t,["maskClasses"],s);const r=c(e,["maskDilation"]);return r!=null&&f(t,["dilation"],r),t}function Tf(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(e,["description"]);r!=null&&f(t,["description"],r);const u=c(e,["version"]);u!=null&&f(t,["version"],u);const p=c(e,["_self"]);p!=null&&f(t,["tunedModelInfo"],L_(p));const g=c(e,["inputTokenLimit"]);g!=null&&f(t,["inputTokenLimit"],g);const v=c(e,["outputTokenLimit"]);v!=null&&f(t,["outputTokenLimit"],v);const m=c(e,["supportedGenerationMethods"]);m!=null&&f(t,["supportedActions"],m);const x=c(e,["temperature"]);x!=null&&f(t,["temperature"],x);const b=c(e,["maxTemperature"]);b!=null&&f(t,["maxTemperature"],b);const T=c(e,["topP"]);T!=null&&f(t,["topP"],T);const A=c(e,["topK"]);A!=null&&f(t,["topK"],A);const _=c(e,["thinking"]);return _!=null&&f(t,["thinking"],_),t}function wf(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(e,["description"]);r!=null&&f(t,["description"],r);const u=c(e,["versionId"]);u!=null&&f(t,["version"],u);const p=c(e,["deployedModels"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(T=>zE(T))),f(t,["endpoints"],b)}const g=c(e,["labels"]);g!=null&&f(t,["labels"],g);const v=c(e,["_self"]);v!=null&&f(t,["tunedModelInfo"],F_(v));const m=c(e,["defaultCheckpointId"]);m!=null&&f(t,["defaultCheckpointId"],m);const x=c(e,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(T=>T)),f(t,["checkpoints"],b)}return t}function S_(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],DE(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],UE(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],sE(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function T_(e){const t={},o=c(e,["productImage"]);return o!=null&&f(t,["image"],Xi(o)),t}function w_(e,t){const o={},s=c(e,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(e,["baseSteps"]);t!==void 0&&r!=null&&f(t,["parameters","baseSteps"],r);const u=c(e,["outputGcsUri"]);t!==void 0&&u!=null&&f(t,["parameters","storageUri"],u);const p=c(e,["seed"]);t!==void 0&&p!=null&&f(t,["parameters","seed"],p);const g=c(e,["safetyFilterLevel"]);t!==void 0&&g!=null&&f(t,["parameters","safetySetting"],g);const v=c(e,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const m=c(e,["addWatermark"]);t!==void 0&&m!=null&&f(t,["parameters","addWatermark"],m);const x=c(e,["outputMimeType"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","mimeType"],x);const b=c(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&f(t,["parameters","outputOptions","compressionQuality"],b);const T=c(e,["enhancePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","enhancePrompt"],T);const A=c(e,["labels"]);return t!==void 0&&A!=null&&f(t,["labels"],A),o}function C_(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["source"]);r!=null&&__(r,o);const u=c(t,["config"]);return u!=null&&w_(u,o),o}function E_(e){const t={},o=c(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>$c(r))),f(t,["generatedImages"],s)}return t}function __(e,t){const o={},s=c(e,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(e,["personImage"]);t!==void 0&&r!=null&&f(t,["instances[0]","personImage","image"],Xi(r));const u=c(e,["productImages"]);if(t!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>T_(g))),f(t,["instances[0]","productImages"],p)}return o}function N_(e){const t={},o=c(e,["referenceImage"]);o!=null&&f(t,["referenceImage"],Xi(o));const s=c(e,["referenceId"]);s!=null&&f(t,["referenceId"],s);const r=c(e,["referenceType"]);r!=null&&f(t,["referenceType"],r);const u=c(e,["maskImageConfig"]);u!=null&&f(t,["maskImageConfig"],b_(u));const p=c(e,["controlImageConfig"]);p!=null&&f(t,["controlImageConfig"],pE(p));const g=c(e,["styleImageConfig"]);g!=null&&f(t,["styleImageConfig"],g);const v=c(e,["subjectImageConfig"]);return v!=null&&f(t,["subjectImageConfig"],v),t}function yv(e){const t={},o=c(e,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const s=c(e,["safetyAttributes","scores"]);s!=null&&f(t,["scores"],s);const r=c(e,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function vv(e){const t={},o=c(e,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const s=c(e,["safetyAttributes","scores"]);s!=null&&f(t,["scores"],s);const r=c(e,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function A_(e){const t={},o=c(e,["category"]);if(o!=null&&f(t,["category"],o),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(e,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function M_(e){const t={},o=c(e,["image"]);return o!=null&&f(t,["image"],Xi(o)),t}function k_(e,t){const o={},s=c(e,["mode"]);t!==void 0&&s!=null&&f(t,["parameters","mode"],s);const r=c(e,["maxPredictions"]);t!==void 0&&r!=null&&f(t,["parameters","maxPredictions"],r);const u=c(e,["confidenceThreshold"]);t!==void 0&&u!=null&&f(t,["parameters","confidenceThreshold"],u);const p=c(e,["maskDilation"]);t!==void 0&&p!=null&&f(t,["parameters","maskDilation"],p);const g=c(e,["binaryColorThreshold"]);t!==void 0&&g!=null&&f(t,["parameters","binaryColorThreshold"],g);const v=c(e,["labels"]);return t!==void 0&&v!=null&&f(t,["labels"],v),o}function R_(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["source"]);r!=null&&z_(r,o);const u=c(t,["config"]);return u!=null&&k_(u,o),o}function I_(e){const t={},o=c(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>i_(r))),f(t,["generatedMasks"],s)}return t}function z_(e,t){const o={},s=c(e,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(e,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Xi(r));const u=c(e,["scribbleImage"]);return t!==void 0&&u!=null&&f(t,["instances[0]","scribble"],M_(u)),o}function D_(e){const t={},o=c(e,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],LE(o));const s=c(e,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function U_(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],c_(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],u_(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function xv(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>FE(T))),f(t,["functionDeclarations"],b)}const s=c(e,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(e,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(e,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const g=c(e,["enterpriseWebSearch"]);g!=null&&f(t,["enterpriseWebSearch"],g);const v=c(e,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(e,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(e,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function L_(e){const t={},o=c(e,["baseModel"]);o!=null&&f(t,["baseModel"],o);const s=c(e,["createTime"]);s!=null&&f(t,["createTime"],s);const r=c(e,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function F_(e){const t={},o=c(e,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(t,["baseModel"],o);const s=c(e,["createTime"]);s!=null&&f(t,["createTime"],s);const r=c(e,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function P_(e,t){const o={},s=c(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(e,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const u=c(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&f(t,["defaultCheckpointId"],u),o}function B_(e,t){const o={},s=c(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(e,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const u=c(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&f(t,["defaultCheckpointId"],u),o}function O_(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","name"],Qt(e,s));const r=c(t,["config"]);return r!=null&&P_(r,o),o}function H_(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["config"]);return r!=null&&B_(r,o),o}function G_(e,t){const o={},s=c(e,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const u=c(e,["personGeneration"]);t!==void 0&&u!=null&&f(t,["parameters","personGeneration"],u);const p=c(e,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const g=c(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);const v=c(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","compressionQuality"],v);const m=c(e,["enhanceInputImage"]);t!==void 0&&m!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=c(e,["imagePreservationFactor"]);t!==void 0&&x!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const b=c(e,["labels"]);t!==void 0&&b!=null&&f(t,["labels"],b);const T=c(e,["numberOfImages"]);t!==void 0&&T!=null&&f(t,["parameters","sampleCount"],T);const A=c(e,["mode"]);return t!==void 0&&A!=null&&f(t,["parameters","mode"],A),o}function V_(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Qt(e,s));const r=c(t,["image"]);r!=null&&f(o,["instances[0]","image"],Xi(r));const u=c(t,["upscaleFactor"]);u!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],u);const p=c(t,["config"]);return p!=null&&G_(p,o),o}function j_(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>$c(u))),f(t,["generatedImages"],r)}return t}function q_(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["uri"],o);const s=c(e,["encodedVideo"]);s!=null&&f(t,["videoBytes"],gl(s));const r=c(e,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function $_(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["uri"],o);const s=c(e,["bytesBase64Encoded"]);s!=null&&f(t,["videoBytes"],gl(s));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Y_(e){const t={},o=c(e,["image"]);o!=null&&f(t,["_self"],Xi(o));const s=c(e,["maskMode"]);return s!=null&&f(t,["maskMode"],s),t}function J_(e){const t={},o=c(e,["image"]);o!=null&&f(t,["image"],Yc(o));const s=c(e,["referenceType"]);return s!=null&&f(t,["referenceType"],s),t}function K_(e){const t={},o=c(e,["image"]);o!=null&&f(t,["image"],Xi(o));const s=c(e,["referenceType"]);return s!=null&&f(t,["referenceType"],s),t}function bv(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["uri"],o);const s=c(e,["videoBytes"]);s!=null&&f(t,["encodedVideo"],gl(s));const r=c(e,["mimeType"]);return r!=null&&f(t,["encoding"],r),t}function Sv(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["gcsUri"],o);const s=c(e,["videoBytes"]);s!=null&&f(t,["bytesBase64Encoded"],gl(s));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function X_(e,t){const o={},s=c(e,["displayName"]);return t!==void 0&&s!=null&&f(t,["displayName"],s),o}function W_(e){const t={},o=c(e,["config"]);return o!=null&&X_(o,t),t}function Q_(e,t){const o={},s=c(e,["force"]);return t!==void 0&&s!=null&&f(t,["_query","force"],s),o}function Z_(e){const t={},o=c(e,["name"]);o!=null&&f(t,["_url","name"],o);const s=c(e,["config"]);return s!=null&&Q_(s,t),t}function eN(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","name"],o),t}function tN(e,t){const o={},s=c(e,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["customMetadata"],u)}const r=c(e,["chunkingConfig"]);return t!==void 0&&r!=null&&f(t,["chunkingConfig"],r),o}function nN(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const s=c(e,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],oN(p)),t}function iN(e){const t={},o=c(e,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const s=c(e,["fileName"]);s!=null&&f(t,["fileName"],s);const r=c(e,["config"]);return r!=null&&tN(r,t),t}function oN(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["parent"]);s!=null&&f(t,["parent"],s);const r=c(e,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function lN(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function sN(e){const t={},o=c(e,["config"]);return o!=null&&lN(o,t),t}function aN(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["fileSearchStores"],u)}return t}function Tv(e,t){const o={},s=c(e,["mimeType"]);t!==void 0&&s!=null&&f(t,["mimeType"],s);const r=c(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const u=c(e,["customMetadata"]);if(t!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["customMetadata"],g)}const p=c(e,["chunkingConfig"]);return t!==void 0&&p!=null&&f(t,["chunkingConfig"],p),o}function rN(e){const t={},o=c(e,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const s=c(e,["config"]);return s!=null&&Tv(s,t),t}function cN(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}const uN="Content-Type",dN="X-Server-Timeout",fN="User-Agent",Cf="x-goog-api-client",pN="1.34.0",hN=`google-genai-sdk/${pN}`,mN="v1beta1",gN="v1beta";class yN{constructor(t){var o,s;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:mN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:gN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[p,g]of Object.entries(t.queryParams))r.searchParams.append(p,String(g));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(o))typeof u=="object"?s[r]=Object.assign(Object.assign({},s[r]),u):u!==void 0&&(s[r]=u);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const u=new AbortController,p=u.signal;if(o.timeout&&o?.timeout>0){const g=setTimeout(()=>u.abort(),o.timeout);g&&typeof g.unref=="function"&&g.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),t.signal=p}return o&&o.extraBody!==null&&vN(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Cy(r),new xf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Cy(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Ji(this,arguments,function*(){var s;const r=(s=t?.body)===null||s===void 0?void 0:s.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let p="";const g="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield Nt(r.read());if(m){if(p.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=u.decode(x,{stream:!0});try{const _=JSON.parse(b);if("error"in _){const V=JSON.parse(JSON.stringify(_.error)),G=V.status,J=V.code,fe=`got status: ${G}. ${JSON.stringify(_)}`;if(J>=400&&J<600)throw new jc({message:fe,status:J})}}catch(_){if(_.name==="ApiError")throw _}p+=b;let T=-1,A=0;for(;;){T=-1,A=0;for(const G of v){const J=p.indexOf(G);J!==-1&&(T===-1||J<T)&&(T=J,A=G.length)}if(T===-1)break;const _=p.substring(0,T);p=p.substring(T+A);const V=_.trim();if(V.startsWith(g)){const G=V.substring(g.length).trim();try{const J=new Response(G,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield Nt(new xf(J))}catch(J){throw new Error(`exception parsing stream chunk ${G}. ${J}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=hN+" "+this.clientOptions.userAgentExtra;return t[fN]=o,t[Cf]=o,t[uN]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,u]of Object.entries(t.headers))s.append(r,u);t.timeout&&t.timeout>0&&s.append(dN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,p=await u.stat(t);r.sizeBytes=String(p.size);const g=(s=o?.mimeType)!==null&&s!==void 0?s:p.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const v={file:r},m=this.getFileName(t),x=Xe("upload/v1beta/files",v._url),b=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return u.upload(t,b,this)}async uploadFileToFileSearchStore(t,o,s){var r;const u=this.clientOptions.uploader,p=await u.stat(o),g=String(p.size),v=(r=s?.mimeType)!==null&&r!==void 0?r:p.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),b={};s!=null&&Tv(s,b);const T=await this.fetchUploadUrl(m,g,v,x,b,s?.httpOptions);return u.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,u,p){var g;let v={};p?v=p:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(u),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(g=m?.headers)===null||g===void 0?void 0:g["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Cy(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const o=e.status;let s;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await e.json():s={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new jc({message:r,status:o}):new Error(r)}}function vN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof e.body=="string"&&e.body.length>0)try{const u=JSON.parse(e.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,p){const g=Object.assign({},u);for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)){const m=p[v],x=g[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?g[v]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),g[v]=m)}return g}const r=s(o,t);e.body=JSON.stringify(r)}const xN="mcp_used/unknown";let bN=!1;function wv(e){for(const t of e)if(SN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return bN}function Cv(e){var t;const o=(t=e[Cf])!==null&&t!==void 0?t:"";e[Cf]=(o+` ${xN}`).trimStart()}function SN(e){return e!==null&&typeof e=="object"&&e instanceof Qf}function TN(e){return Ji(this,arguments,function*(o,s=100){let r,u=0;for(;u<s;){const p=yield Nt(o.listTools({cursor:r}));for(const g of p.tools)yield yield Nt(g),u++;if(!p.nextCursor)break;r=p.nextCursor}})}class Qf{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new Qf(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const u={},p=[];for(const x of this.mcpClients)try{for(var g=!0,v=(o=void 0,Ki(TN(x))),m;m=await v.next(),t=m.done,!t;g=!0){r=m.value,g=!1;const b=r;p.push(b);const T=b.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=x}}catch(b){o={error:b}}finally{try{!g&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=p,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),ew(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const p=await r.callTool({name:s.name,arguments:s.args},void 0,u);o.push({functionResponse:{name:s.name,response:p.isError?{error:p}:p}})}return o}}async function wN(e,t,o){const s=new $T;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class CN{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),p=NN(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${g}`;let m=()=>{};const x=new Promise(ce=>{m=ce}),b=t.callbacks,T=function(){m({})},A=this.apiClient,_={onopen:T,onmessage:ce=>{wN(A,b.onmessage,ce)},onerror:(o=b?.onerror)!==null&&o!==void 0?o:function(ce){},onclose:(s=b?.onclose)!==null&&s!==void 0?s:function(ce){}},V=this.webSocketFactory.create(v,_N(p),_);V.connect(),await x;const fe={setup:{model:Qt(this.apiClient,t.model)}};return V.send(JSON.stringify(fe)),new EN(V,this.apiClient)}}class EN{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=WC(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=XC(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Is.PLAY)}pause(){this.sendPlaybackControl(Is.PAUSE)}stop(){this.sendPlaybackControl(Is.STOP)}resetContext(){this.sendPlaybackControl(Is.RESET_CONTEXT)}close(){this.conn.close()}}function _N(e){const t={};return e.forEach((o,s)=>{t[s]=o}),t}function NN(e){const t=new Headers;for(const[o,s]of Object.entries(e))t.append(o,s);return t}const AN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function MN(e,t,o){const s=new qT;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const u=JSON.parse(r);if(e.isVertexAI()){const p=eE(u);Object.assign(s,p)}else Object.assign(s,u);t(s)}class kN{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new CN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,u,p,g;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&wv(t.config.tools)&&Cv(b);const T=DN(b);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const Ae=this.apiClient.getApiKey();let Qe="BidiGenerateContent",Pe="key";Ae?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Qe="BidiGenerateContentConstrained",Pe="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Qe}?${Pe}=${Ae}`}let A=()=>{};const _=new Promise(Ae=>{A=Ae}),V=t.callbacks,G=function(){var Ae;(Ae=V?.onopen)===null||Ae===void 0||Ae.call(V),A({})},J=this.apiClient,fe={onopen:G,onmessage:Ae=>{MN(J,V.onmessage,Ae)},onerror:(o=V?.onerror)!==null&&o!==void 0?o:function(Ae){},onclose:(s=V?.onclose)!==null&&s!==void 0?s:function(Ae){}},ce=this.webSocketFactory.create(x,zN(T),fe);ce.connect(),await _;let ge=Qt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&ge.startsWith("publishers/")){const Ae=this.apiClient.getProject(),Qe=this.apiClient.getLocation();ge=`projects/${Ae}/locations/${Qe}/`+ge}let ze={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Rc.AUDIO]}:t.config.responseModalities=[Rc.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const De=(g=(p=t.config)===null||p===void 0?void 0:p.tools)!==null&&g!==void 0?g:[],we=[];for(const Ae of De)if(this.isCallableTool(Ae)){const Qe=Ae;we.push(await Qe.tool())}else we.push(Ae);we.length>0&&(t.config.tools=we);const ot={model:ge,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ze=KC(this.apiClient,ot):ze=JC(this.apiClient,ot),delete ze.config,ce.send(JSON.stringify(ze)),new IN(ce,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const RN={turnComplete:!0};class IN{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=Hi(o.turns),t.isVertexAI()||(s=s.map(r=>qc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(AN)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},RN),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:ZC(t)}:o={realtimeInput:QC(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function zN(e){const t={};return e.forEach((o,s)=>{t[s]=o}),t}function DN(e){const t=new Headers;for(const[o,s]of Object.entries(e))t.append(o,s);return t}const Ey=10;function _y(e){var t,o,s;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const p of(o=e?.tools)!==null&&o!==void 0?o:[])if(Bs(p)){r=!0;break}if(!r)return!0;const u=(s=e?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Bs(e){return"callTool"in e&&typeof e.callTool=="function"}function UN(e){var t,o,s;return(s=(o=(t=e.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>Bs(r)))!==null&&s!==void 0?s:!1}function Ny(e){var t;const o=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((s,r)=>{if(Bs(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(r)}),o}function Ay(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class LN extends Uo{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,u,p,g;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!UN(o)||_y(o.config))return await this.generateContentInternal(v);const m=Ny(o);if(m.length>0){const V=m.map(G=>`tools[${G}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let x,b;const T=Hi(v.contents),A=(u=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:Ey;let _=0;for(;_<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const V=x.candidates[0].content,G=[];for(const J of(g=(p=o.config)===null||p===void 0?void 0:p.tools)!==null&&g!==void 0?g:[])if(Bs(J)){const ce=await J.callTool(x.functionCalls);G.push(...ce)}_++,b={role:"user",parts:G},v.contents=Hi(v.contents),v.contents.push(V),v.contents.push(b),Ay(v.config)&&(T.push(V),T.push(b))}return Ay(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var s,r,u,p,g;if(this.maybeMoveToResponseJsonSchem(o),_y(o.config)){const b=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(b)}const v=Ny(o);if(v.length>0){const b=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(r=(s=o?.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,x=(g=(p=o?.config)===null||p===void 0?void 0:p.automaticFunctionCalling)===null||g===void 0?void 0:g.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let u;const p=[];if(s?.generatedImages)for(const v of s.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=v?.safetyAttributes:p.push(v);let g;return u?g={generatedImages:p,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:g={generatedImages:p,sdkHttpResponse:s.sdkHttpResponse},g}),this.list=async o=>{var s;const p={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!p.config.queryBase){if(!((s=p.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");p.config.filter="labels.tune-type:*"}return new jl(Do.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(p),p)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,u,p,g,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((p=(u=o.source)===null||u===void 0?void 0:u.video)===null||p===void 0)&&p.uri&&(!((v=(g=o.source)===null||g===void 0?void 0:g.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const u=(o=t.config)===null||o===void 0?void 0:o.tools;if(!u)return t;const p=await Promise.all(u.map(async v=>Bs(v)?await v.tool():v)),g={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:p})};if(g.config.tools=p,t.config&&t.config.tools&&wv(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Cv(m),g.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return g}async initAfcToolsMap(t){var o,s,r;const u=new Map;for(const p of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Bs(p)){const g=p,v=await g.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,g)}}return u}async processAfcStream(t){var o,s,r;const u=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Ey;let p=!1,g=0;const v=await this.initAfcToolsMap(t);return(function(m,x,b){return Ji(this,arguments,function*(){for(var T,A,_,V,G,J;g<u;){p&&(g++,p=!1);const ze=yield Nt(m.processParamsMaybeAddMcpUsage(b)),De=yield Nt(m.generateContentStreamInternal(ze)),we=[],ot=[];try{for(var fe=!0,ce=(A=void 0,Ki(De)),ge;ge=yield Nt(ce.next()),T=ge.done,!T;fe=!0){V=ge.value,fe=!1;const Ae=V;if(yield yield Nt(Ae),Ae.candidates&&(!((G=Ae.candidates[0])===null||G===void 0)&&G.content)){ot.push(Ae.candidates[0].content);for(const Qe of(J=Ae.candidates[0].content.parts)!==null&&J!==void 0?J:[])if(g<u&&Qe.functionCall){if(!Qe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Qe.functionCall.name)){const Pe=yield Nt(x.get(Qe.functionCall.name).callTool([Qe.functionCall]));we.push(...Pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Qe.functionCall.name}`)}}}}catch(Ae){A={error:Ae}}finally{try{!fe&&!T&&(_=ce.return)&&(yield Nt(_.call(ce)))}finally{if(A)throw A.error}}if(we.length>0){p=!0;const Ae=new za;Ae.candidates=[{content:{role:"user",parts:we}}],yield yield Nt(Ae);const Qe=[];Qe.push(...ot),Qe.push({role:"user",parts:we});const Pe=Hi(b.contents).concat(Qe);b.contents=Pe}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Sy(this.apiClient,t);return g=Xe("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=wy(x),T=new za;return Object.assign(T,b),T})}else{const m=by(this.apiClient,t);return g=Xe("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=Ty(x),T=new za;return Object.assign(T,b),T})}}async generateContentStreamInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Sy(this.apiClient,t);return g=Xe("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.requestStream({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),p.then(function(b){return Ji(this,arguments,function*(){var T,A,_,V;try{for(var G=!0,J=Ki(b),fe;fe=yield Nt(J.next()),T=fe.done,!T;G=!0){V=fe.value,G=!1;const ce=V,ge=wy(yield Nt(ce.json()));ge.sdkHttpResponse={headers:ce.headers};const ze=new za;Object.assign(ze,ge),yield yield Nt(ze)}}catch(ce){A={error:ce}}finally{try{!G&&!T&&(_=J.return)&&(yield Nt(_.call(J)))}finally{if(A)throw A.error}}})})}else{const m=by(this.apiClient,t);return g=Xe("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.requestStream({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),p.then(function(b){return Ji(this,arguments,function*(){var T,A,_,V;try{for(var G=!0,J=Ki(b),fe;fe=yield Nt(J.next()),T=fe.done,!T;G=!0){V=fe.value,G=!1;const ce=V,ge=Ty(yield Nt(ce.json()));ge.sdkHttpResponse={headers:ce.headers};const ze=new za;Object.assign(ze,ge),yield yield Nt(ze)}}catch(ce){A={error:ce}}finally{try{!G&&!T&&(_=J.return)&&(yield Nt(_.call(J)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=kE(this.apiClient,t);return g=Xe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=IE(x),T=new iy;return Object.assign(T,b),T})}else{const m=ME(this.apiClient,t);return g=Xe("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=RE(x),T=new iy;return Object.assign(T,b),T})}}async generateImagesInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=VE(this.apiClient,t);return g=Xe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=qE(x),T=new oy;return Object.assign(T,b),T})}else{const m=GE(this.apiClient,t);return g=Xe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=jE(x),T=new oy;return Object.assign(T,b),T})}}async editImageInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=EE(this.apiClient,t);return u=Xe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=_E(v),x=new DT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=V_(this.apiClient,t);return u=Xe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=j_(v),x=new UT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=C_(this.apiClient,t);return u=Xe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=E_(v),x=new LT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=R_(this.apiClient,t);return u=Xe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=I_(v),x=new FT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=r_(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>wf(x))}else{const m=a_(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>Tf(x))}}async listInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=y_(this.apiClient,t);return g=Xe("{models_url}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=x_(x),T=new ly;return Object.assign(T,b),T})}else{const m=g_(this.apiClient,t);return g=Xe("{models_url}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=v_(x),T=new ly;return Object.assign(T,b),T})}}async update(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=H_(this.apiClient,t);return g=Xe("{model}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>wf(x))}else{const m=O_(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>Tf(x))}}async delete(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=SE(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=wE(x),T=new sy;return Object.assign(T,b),T})}else{const m=bE(this.apiClient,t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=TE(x),T=new sy;return Object.assign(T,b),T})}}async countTokens(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=yE(this.apiClient,t);return g=Xe("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=xE(x),T=new ay;return Object.assign(T,b),T})}else{const m=gE(this.apiClient,t);return g=Xe("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=vE(x),T=new ay;return Object.assign(T,b),T})}}async computeTokens(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=cE(this.apiClient,t);return u=Xe("{model}:computeTokens",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=uE(v),x=new PT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=WE(this.apiClient,t);return g=Xe("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p.then(x=>{const b=KE(x),T=new Ic;return Object.assign(T,b),T})}else{const m=XE(this.apiClient,t);return g=Xe("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>{const b=JE(x),T=new Ic;return Object.assign(T,b),T})}}}class FN extends Uo{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:p,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:p,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=AT(t);return g=Xe("{operationName}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),p}else{const m=NT(t);return g=Xe("{operationName}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p}}async fetchPredictVideosOperationInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=bT(t);return u=Xe("{resourceName}:fetchPredictOperation",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function PN(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function BN(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>JN(u))),f(t,["parts"],r)}const s=c(e,["role"]);return s!=null&&f(t,["role"],s),t}function ON(e,t,o){const s={},r=c(t,["expireTime"]);o!==void 0&&r!=null&&f(o,["expireTime"],r);const u=c(t,["newSessionExpireTime"]);o!==void 0&&u!=null&&f(o,["newSessionExpireTime"],u);const p=c(t,["uses"]);o!==void 0&&p!=null&&f(o,["uses"],p);const g=c(t,["liveConnectConstraints"]);o!==void 0&&g!=null&&f(o,["bidiGenerateContentSetup"],YN(e,g));const v=c(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&f(o,["fieldMask"],v),s}function HN(e,t){const o={},s=c(t,["config"]);return s!=null&&f(o,["config"],ON(e,s,o)),o}function GN(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function VN(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const s=c(e,["args"]);s!=null&&f(t,["args"],s);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function jN(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function qN(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function $N(e,t){const o={},s=c(e,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],s);const r=c(e,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const p=c(e,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const g=c(e,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const v=c(e,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(e,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(e,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(e,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Wf(b));const T=c(e,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const A=c(e,["enableAffectiveDialog"]);t!==void 0&&A!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],A);const _=c(e,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],BN(ti(_)));const V=c(e,["tools"]);if(t!==void 0&&V!=null){let De=js(V);Array.isArray(De)&&(De=De.map(we=>XN(Vs(we)))),f(t,["setup","tools"],De)}const G=c(e,["sessionResumption"]);t!==void 0&&G!=null&&f(t,["setup","sessionResumption"],KN(G));const J=c(e,["inputAudioTranscription"]);t!==void 0&&J!=null&&f(t,["setup","inputAudioTranscription"],J);const fe=c(e,["outputAudioTranscription"]);t!==void 0&&fe!=null&&f(t,["setup","outputAudioTranscription"],fe);const ce=c(e,["realtimeInputConfig"]);t!==void 0&&ce!=null&&f(t,["setup","realtimeInputConfig"],ce);const ge=c(e,["contextWindowCompression"]);t!==void 0&&ge!=null&&f(t,["setup","contextWindowCompression"],ge);const ze=c(e,["proactivity"]);if(t!==void 0&&ze!=null&&f(t,["setup","proactivity"],ze),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function YN(e,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Qt(e,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],$N(r,o)),o}function JN(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(e,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],GN(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],VN(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],PN(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function KN(e){const t={},o=c(e,["handle"]);if(o!=null&&f(t,["handle"],o),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function XN(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],jN(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],qN(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function WN(e){const t=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(u=>`${o}.${u}`);t.push(...r)}else t.push(o)}return t.join(",")}function QN(e,t){let o=null;const s=e.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(e.bidiGenerateContentSetup=u,o=u):delete e.bidiGenerateContentSetup}else s!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(o){const u=WN(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)u?e.fieldMask=u:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const p=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];r.length>0&&(g=r.map(m=>p.includes(m)?`generationConfig.${m}`:m));const v=[];u&&v.push(u),g.length>0&&v.push(...g),v.length>0?e.fieldMask=v.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class ZN extends Uo{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=HN(this.apiClient,t);u=Xe("auth_tokens",g._url),p=g._query,delete g.config,delete g._url,delete g._query;const v=QN(g,t.config);return r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function eA(e,t){const o={},s=c(e,["force"]);return t!==void 0&&s!=null&&f(t,["_query","force"],s),o}function tA(e){const t={},o=c(e,["name"]);o!=null&&f(t,["_url","name"],o);const s=c(e,["config"]);return s!=null&&eA(s,t),t}function nA(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","name"],o),t}function iA(e,t){const o={},s=c(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function oA(e){const t={},o=c(e,["parent"]);o!=null&&f(t,["_url","parent"],o);const s=c(e,["config"]);return s!=null&&iA(s,t),t}function lA(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(e,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(e,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["documents"],u)}return t}class sA extends Uo{constructor(t){super(),this.apiClient=t,this.list=async o=>new jl(Do.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=nA(t);return u=Xe("{name}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tA(t);r=Xe("{name}",p._url),u=p._query,delete p._url,delete p._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=oA(t);return u=Xe("{parent}/documents",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=lA(v),x=new BT;return Object.assign(x,m),x})}}}class aA extends Uo{constructor(t,o=new sA(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new jl(Do.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=W_(t);return u=Xe("fileSearchStores",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=eN(t);return u=Xe("{name}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Z_(t);r=Xe("{name}",p._url),u=p._query,delete p._url,delete p._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=sN(t);return u=Xe("fileSearchStores",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=aN(v),x=new OT;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=rN(t);return u=Xe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=cN(v),x=new HT;return Object.assign(x,m),x})}}async importFile(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=iN(t);return u=Xe("{file_search_store_name}:importFile",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=nN(v),x=new $f;return Object.assign(x,m),x})}}}let Ev=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return Ev=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),o=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const rA=()=>Ev();function Ef(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const _f=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class Gi extends Error{}class si extends Gi{constructor(t,o,s,r){super(`${si.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Jc({message:s,cause:_f(o)});const u=o;return t===400?new Nv(t,u,s,r):t===401?new Av(t,u,s,r):t===403?new Mv(t,u,s,r):t===404?new kv(t,u,s,r):t===409?new Rv(t,u,s,r):t===422?new Iv(t,u,s,r):t===429?new zv(t,u,s,r):t>=500?new Dv(t,u,s,r):new si(t,u,s,r)}}class Nf extends si{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Jc extends si{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class _v extends Jc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Nv extends si{}class Av extends si{}class Mv extends si{}class kv extends si{}class Rv extends si{}class Iv extends si{}class zv extends si{}class Dv extends si{}const cA=/^[a-z][a-z0-9+.-]*:/i,uA=e=>cA.test(e);let Af=e=>(Af=Array.isArray,Af(e));const dA=Af;let fA=dA;const My=fA;function pA(e){if(!e)return!0;for(const t in e)return!1;return!0}function hA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const mA=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Gi(`${e} must be an integer`);if(t<0)throw new Gi(`${e} must be a positive integer`);return t},gA=e=>{try{return JSON.parse(e)}catch{return}};const yA=e=>new Promise(t=>setTimeout(t,e));const As="0.0.1";function vA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xA=()=>{var e,t,o,s,r;const u=vA();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":As,"X-Stainless-OS":Ry(Deno.build.os),"X-Stainless-Arch":ky(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":As,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":As,"X-Stainless-OS":Ry((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":ky((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const p=bA();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":As,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":As,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bA(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of e){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,u=s[2]||0,p=s[3]||0;return{browser:t,version:`${r}.${u}.${p}`}}}return null}const ky=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ry=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let dc;const SA=()=>dc??(dc=xA());function TA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Uv(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function wA(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Uv({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Lv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CA(e){var t,o;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((o=(t=e[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=e.getReader(),r=s.cancel();s.releaseLock(),await r}const EA=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const Fv=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function of(e,t,o){return Fv(),new File(e,t??"unknown_file",o)}function _A(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const NA=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";const Pv=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",AA=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Pv(e),MA=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function kA(e,t,o){if(Fv(),e=await e,AA(e))return e instanceof File?e:of([await e.arrayBuffer()],e.name);if(MA(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),of(await Mf(r),t,o)}const s=await Mf(e);if(t||(t=_A(e)),!o?.type){const r=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return of(s,t,o)}async function Mf(e){var t,o,s,r,u;let p=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)p.push(e);else if(Pv(e))p.push(e instanceof Blob?e:await e.arrayBuffer());else if(NA(e))try{for(var g=!0,v=Ki(e),m;m=await v.next(),t=m.done,!t;g=!0){r=m.value,g=!1;const x=r;p.push(...await Mf(x))}}catch(x){o={error:x}}finally{try{!g&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const x=(u=e?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof e}${x?`; constructor: ${x}`:""}${RA(e)}`)}return p}function RA(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(o=>`"${o}"`).join(", ")}]`}class Bv{constructor(t){this._client=t}}Bv._key=[];function Ov(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Iy=Object.freeze(Object.create(null)),IA=(e=Ov)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const u=[],p=o.reduce((x,b,T)=>{var A,_,V;/[?#]/.test(b)&&(r=!0);const G=s[T];let J=(r?encodeURIComponent:e)(""+G);return T!==s.length&&(G==null||typeof G=="object"&&G.toString===((V=Object.getPrototypeOf((_=Object.getPrototypeOf((A=G.hasOwnProperty)!==null&&A!==void 0?A:Iy))!==null&&_!==void 0?_:Iy))===null||V===void 0?void 0:V.toString))&&(J=G+"",u.push({start:x.length+b.length,length:J.length,error:`Value of type ${Object.prototype.toString.call(G).slice(8,-1)} is not a valid path parameter`})),x+b+(T===s.length?"":J)},""),g=p.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(g))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((x,b)=>x.start-b.start),u.length>0){let x=0;const b=u.reduce((T,A)=>{const _=" ".repeat(A.start-x),V="^".repeat(A.length);return x=A.start+A.length,T+_+V},"");throw new Gi(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${p}
${b}`)}return p}),fc=IA(Ov);class Hv extends Bv{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,u=Dc(t,["api_version"]);if("model"in u&&"agent_config"in u)throw new Gi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new Gi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(fc`/${r}/interactions`,Object.assign(Object.assign({body:u},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(fc`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(fc`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const u=o??{},{api_version:p=this._client.apiVersion}=u,g=Dc(u,["api_version"]);return this._client.get(fc`/${p}/interactions/${t}`,Object.assign(Object.assign({query:g},s),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}Hv._key=Object.freeze(["interactions"]);class Gv extends Hv{}function zA(e){let t=0;for(const r of e)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of e)o.set(r,s),s+=r.length;return o}let pc;function Zf(e){let t;return(pc??(t=new globalThis.TextEncoder,pc=t.encode.bind(t)))(e)}let hc;function zy(e){let t;return(hc??(t=new globalThis.TextDecoder,hc=t.decode.bind(t)))(e)}class Kc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Zf(t):t;this.buffer=zA([this.buffer,o]);const s=[];let r;for(;(r=DA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(zy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,p=zy(this.buffer.subarray(0,u));s.push(p),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Kc.NEWLINE_CHARS=new Set([`
`,"\r"]);Kc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function DA(e,t){for(let r=t??0;r<e.length;r++){if(e[r]===10)return{preceding:r,index:r+1,carriage:!1};if(e[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function UA(e){for(let s=0;s<e.length-1;s++){if(e[s]===10&&e[s+1]===10||e[s]===13&&e[s+1]===13)return s+2;if(e[s]===13&&e[s+1]===10&&s+3<e.length&&e[s+2]===13&&e[s+3]===10)return s+4}return-1}const Uc={off:0,error:200,warn:300,info:400,debug:500},Dy=(e,t,o)=>{if(e){if(hA(Uc,e))return e;li(o).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Uc))}`)}};function Oa(){}function mc(e,t,o){return!t||Uc[e]>Uc[o]?Oa:t[e].bind(t)}const LA={error:Oa,warn:Oa,info:Oa,debug:Oa};let Uy=new WeakMap;function li(e){var t;const o=e.logger,s=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!o)return LA;const r=Uy.get(o);if(r&&r[0]===s)return r[1];const u={error:mc("error",o,s),warn:mc("warn",o,s),info:mc("info",o,s),debug:mc("debug",o,s)};return Uy.set(o,[s,u]),u}const Fl=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class zs{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const u=s?li(s):console;function p(){return Ji(this,arguments,function*(){var v,m,x,b;if(r)throw new Gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,_=Ki(FA(t,o)),V;V=yield Nt(_.next()),v=V.done,!v;A=!0){b=V.value,A=!1;const G=b;if(!T)if(G.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Nt(JSON.parse(G.data))}catch(J){throw u.error("Could not parse message into JSON:",G.data),u.error("From chunk:",G.raw),J}}}catch(G){m={error:G}}finally{try{!A&&!v&&(x=_.return)&&(yield Nt(x.call(_)))}finally{if(m)throw m.error}}T=!0}catch(G){if(Ef(G))return yield Nt(void 0);throw G}finally{T||o.abort()}})}return new zs(p,o,s)}static fromReadableStream(t,o,s){let r=!1;function u(){return Ji(this,arguments,function*(){var v,m,x,b;const T=new Kc,A=Lv(t);try{for(var _=!0,V=Ki(A),G;G=yield Nt(V.next()),v=G.done,!v;_=!0){b=G.value,_=!1;const J=b;for(const fe of T.decode(J))yield yield Nt(fe)}}catch(J){m={error:J}}finally{try{!_&&!v&&(x=V.return)&&(yield Nt(x.call(V)))}finally{if(m)throw m.error}}for(const J of T.flush())yield yield Nt(J)})}function p(){return Ji(this,arguments,function*(){var v,m,x,b;if(r)throw new Gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,_=Ki(u()),V;V=yield Nt(_.next()),v=V.done,!v;A=!0){b=V.value,A=!1;const G=b;T||G&&(yield yield Nt(JSON.parse(G)))}}catch(G){m={error:G}}finally{try{!A&&!v&&(x=_.return)&&(yield Nt(x.call(_)))}finally{if(m)throw m.error}}T=!0}catch(G){if(Ef(G))return yield Nt(void 0);throw G}finally{T||o.abort()}})}return new zs(p,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=u=>({next:()=>{if(u.length===0){const p=s.next();t.push(p),o.push(p)}return u.shift()}});return[new zs(()=>r(t),this.controller,this.client),new zs(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Uv({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:u}=await o.next();if(u)return s.close();const p=Zf(JSON.stringify(r)+`
`);s.enqueue(p)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function FA(e,t){return Ji(this,arguments,function*(){var s,r,u,p;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Gi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Gi("Attempted to iterate over a response with no body");const g=new BA,v=new Kc,m=Lv(e.body);try{for(var x=!0,b=Ki(PA(m)),T;T=yield Nt(b.next()),s=T.done,!s;x=!0){p=T.value,x=!1;const A=p;for(const _ of v.decode(A)){const V=g.decode(_);V&&(yield yield Nt(V))}}}catch(A){r={error:A}}finally{try{!x&&!s&&(u=b.return)&&(yield Nt(u.call(b)))}finally{if(r)throw r.error}}for(const A of v.flush()){const _=g.decode(A);_&&(yield yield Nt(_))}})}function PA(e){return Ji(this,arguments,function*(){var o,s,r,u;let p=new Uint8Array;try{for(var g=!0,v=Ki(e),m;m=yield Nt(v.next()),o=m.done,!o;g=!0){u=m.value,g=!1;const x=u;if(x==null)continue;const b=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?Zf(x):x;let T=new Uint8Array(p.length+b.length);T.set(p),T.set(b,p.length),p=T;let A;for(;(A=UA(p))!==-1;)yield yield Nt(p.slice(0,A)),p=p.slice(A)}}catch(x){s={error:x}}finally{try{!g&&!o&&(r=v.return)&&(yield Nt(r.call(v)))}finally{if(s)throw s.error}}p.length>0&&(yield yield Nt(p))})}class BA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=OA(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function OA(e,t){const o=e.indexOf(t);return o!==-1?[e.substring(0,o),t,e.substring(o+t.length)]:[e,"",""]}async function HA(e,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:u}=t,p=await(async()=>{var g;if(t.options.stream)return li(e).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,e):zs.fromSSEResponse(o,t.controller,e);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(g=v?.split(";")[0])===null||g===void 0?void 0:g.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return li(e).debug(`[${s}] response parsed`,Fl({retryOfRequestLogID:r,url:o.url,status:o.status,body:p,durationMs:Date.now()-u})),p}class ep extends Promise{constructor(t,o,s=HA){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new ep(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const Vv=Symbol("brand.privateNullableHeaders");function*GA(e){if(!e)return;if(Vv in e){const{values:s,nulls:r}=e;yield*s.entries();for(const u of r)yield[u,null];return}let t=!1,o;e instanceof Headers?o=e.entries():My(e)?o=e:(t=!0,o=Object.entries(e??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=My(s[1])?s[1]:[s[1]];let p=!1;for(const g of u)g!==void 0&&(t&&!p&&(p=!0,yield[r,null]),yield[r,g])}}const Da=e=>{const t=new Headers,o=new Set;for(const s of e){const r=new Set;for(const[u,p]of GA(s)){const g=u.toLowerCase();r.has(g)||(t.delete(u),r.add(g)),p===null?(t.delete(u),o.add(g)):(t.append(u,p),o.delete(g))}}return{[Vv]:!0,values:t,nulls:o}};const lf=e=>{var t,o,s,r,u,p;if(typeof globalThis.process<"u")return(s=(o=(t=hT)===null||t===void 0?void 0:t[e])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(p=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,e))===null||p===void 0?void 0:p.trim()};var jv;class Xc{constructor(t){var o,s,r,u,p,g,v,{baseURL:m=lf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=lf("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:b="v1beta"}=t,T=Dc(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:b},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Xc.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const _="warn";this.logLevel=_,this.logLevel=(p=(u=Dy(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:Dy(lf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:_,this.fetchOptions=A.fetchOptions,this.maxRetries=(g=A.maxRetries)!==null&&g!==void 0?g:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:TA(),this.encoder=EA,this._options=A,this.apiKey=x,this.apiVersion=b,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=Da([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Da([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Da([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new Gi(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${As}`}defaultIdempotencyKey(){return`stainless-node-retry-${rA()}`}makeStatusError(t,o,s,r){return si.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,u=uA(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),p=this.defaultQuery();return pA(p)||(o=Object.assign(Object.assign({},p),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(u.search=this.stringifyQuery(o)),u.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new ep(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,u,p;const g=await t,v=(r=g.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(g);const{req:m,url:x,timeout:b}=await this.buildRequest(g,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:g});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,_=Date.now();if(li(this).debug(`[${T}] sending request`,Fl({retryOfRequestLogID:s,method:g.method,url:x,options:g,headers:m.headers})),!((u=g.signal)===null||u===void 0)&&u.aborted)throw new Nf;const V=new AbortController,G=await this.fetchWithTimeout(x,m,b,V).catch(_f),J=Date.now();if(G instanceof globalThis.Error){const ce=`retrying, ${o} attempts remaining`;if(!((p=g.signal)===null||p===void 0)&&p.aborted)throw new Nf;const ge=Ef(G)||/timed? ?out/i.test(String(G)+("cause"in G?String(G.cause):""));if(o)return li(this).info(`[${T}] connection ${ge?"timed out":"failed"} - ${ce}`),li(this).debug(`[${T}] connection ${ge?"timed out":"failed"} (${ce})`,Fl({retryOfRequestLogID:s,url:x,durationMs:J-_,message:G.message})),this.retryRequest(g,o,s??T);throw li(this).info(`[${T}] connection ${ge?"timed out":"failed"} - error; no more retries left`),li(this).debug(`[${T}] connection ${ge?"timed out":"failed"} (error; no more retries left)`,Fl({retryOfRequestLogID:s,url:x,durationMs:J-_,message:G.message})),ge?new _v:new Jc({cause:G})}const fe=`[${T}${A}] ${m.method} ${x} ${G.ok?"succeeded":"failed"} with status ${G.status} in ${J-_}ms`;if(!G.ok){const ce=await this.shouldRetry(G);if(o&&ce){const Ae=`retrying, ${o} attempts remaining`;return await CA(G.body),li(this).info(`${fe} - ${Ae}`),li(this).debug(`[${T}] response error (${Ae})`,Fl({retryOfRequestLogID:s,url:G.url,status:G.status,headers:G.headers,durationMs:J-_})),this.retryRequest(g,o,s??T,G.headers)}const ge=ce?"error; no more retries left":"error; not retryable";li(this).info(`${fe} - ${ge}`);const ze=await G.text().catch(Ae=>_f(Ae).message),De=gA(ze),we=De?void 0:ze;throw li(this).debug(`[${T}] response error (${ge})`,Fl({retryOfRequestLogID:s,url:G.url,status:G.status,headers:G.headers,message:we,durationMs:Date.now()-_})),this.makeStatusError(G.status,De,we,G.headers)}return li(this).info(fe),li(this).debug(`[${T}] response start`,Fl({retryOfRequestLogID:s,url:G.url,status:G.status,headers:G.headers,durationMs:J-_})),{response:G,options:g,controller:V,requestLogID:T,retryOfRequestLogID:s,startTime:_}}async fetchWithTimeout(t,o,s,r){const u=o||{},{signal:p,method:g}=u,v=Dc(u,["signal","method"]);p&&p.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);g&&(b.method=g.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var u;let p;const g=r?.get("retry-after-ms");if(g){const m=parseFloat(g);Number.isNaN(m)||(p=m)}const v=r?.get("retry-after");if(v&&!p){const m=parseFloat(v);Number.isNaN(m)?p=Date.parse(v)-Date.now():p=m*1e3}if(!(p&&0<=p&&p<60*1e3)){const m=(u=t.maxRetries)!==null&&u!==void 0?u:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(o,m)}return await yA(p),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const u=o-t,p=Math.min(.5*Math.pow(2,u),8),g=1-Math.random()*.25;return p*g*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,u;const p=Object.assign({},t),{method:g,path:v,query:m,defaultBaseURL:x}=p,b=this.buildURL(v,m,x);"timeout"in p&&mA("timeout",p.timeout),p.timeout=(s=p.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:p}),_=await this.buildHeaders({options:t,method:g,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:_},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=p.fetchOptions)!==null&&u!==void 0?u:{}),url:b,timeout:p.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let u={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=t.idempotencyKey);const p=await this.authHeaders(t);let g=Da([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),SA()),this._options.defaultHeaders,s,t.headers,p]);return this.validateHeaders(g),g.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=Da([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:wA(t)}:this.encoder({body:t,headers:s})}}Xc.DEFAULT_TIMEOUT=6e4;class jn extends Xc{constructor(){super(...arguments),this.interactions=new Gv(this)}}jv=jn;jn.GeminiNextGenAPIClient=jv;jn.GeminiNextGenAPIClientError=Gi;jn.APIError=si;jn.APIConnectionError=Jc;jn.APIConnectionTimeoutError=_v;jn.APIUserAbortError=Nf;jn.NotFoundError=kv;jn.ConflictError=Rv;jn.RateLimitError=zv;jn.BadRequestError=Nv;jn.AuthenticationError=Av;jn.InternalServerError=Dv;jn.PermissionDeniedError=Mv;jn.UnprocessableEntityError=Iv;jn.toFile=kA;jn.Interactions=Gv;function VA(e,t){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],s),o}function jA(e,t){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],s),o}function qA(e,t){const o={},s=c(e,["sdkHttpResponse"]);return s!=null&&f(o,["sdkHttpResponse"],s),o}function $A(e,t){const o={},s=c(e,["sdkHttpResponse"]);return s!=null&&f(o,["sdkHttpResponse"],s),o}function YA(e,t,o){const s={};if(c(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&f(t,["displayName"],r),c(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(e,["epochCount"]);t!==void 0&&u!=null&&f(t,["tuningTask","hyperparameters","epochCount"],u);const p=c(e,["learningRateMultiplier"]);if(p!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],p),c(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=c(e,["batchSize"]);t!==void 0&&g!=null&&f(t,["tuningTask","hyperparameters","batchSize"],g);const v=c(e,["learningRate"]);if(t!==void 0&&v!=null&&f(t,["tuningTask","hyperparameters","learningRate"],v),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function JA(e,t,o){const s={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=c(e,["validationDataset"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec"],Ly(A))}else if(r==="PREFERENCE_TUNING"){const A=c(e,["validationDataset"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec"],Ly(A))}const u=c(e,["tunedModelDisplayName"]);t!==void 0&&u!=null&&f(t,["tunedModelDisplayName"],u);const p=c(e,["description"]);t!==void 0&&p!=null&&f(t,["description"],p);let g=c(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=c(e,["epochCount"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(g==="PREFERENCE_TUNING"){const A=c(e,["epochCount"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=c(e,["learningRateMultiplier"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=c(e,["learningRateMultiplier"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=c(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=c(e,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=c(e,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=c(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=c(e,["adapterSize"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=c(e,["adapterSize"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=c(e,["labels"]);t!==void 0&&b!=null&&f(t,["labels"],b);const T=c(e,["beta"]);return t!==void 0&&T!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function KA(e,t){const o={},s=c(e,["baseModel"]);s!=null&&f(o,["baseModel"],s);const r=c(e,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const u=c(e,["trainingDataset"]);u!=null&&sM(u);const p=c(e,["config"]);return p!=null&&YA(p,o),o}function XA(e,t){const o={},s=c(e,["baseModel"]);s!=null&&f(o,["baseModel"],s);const r=c(e,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const u=c(e,["trainingDataset"]);u!=null&&aM(u,o,t);const p=c(e,["config"]);return p!=null&&JA(p,o,t),o}function WA(e,t){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],s),o}function QA(e,t){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],s),o}function ZA(e,t,o){const s={},r=c(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const u=c(e,["pageToken"]);t!==void 0&&u!=null&&f(t,["_query","pageToken"],u);const p=c(e,["filter"]);return t!==void 0&&p!=null&&f(t,["_query","filter"],p),s}function eM(e,t,o){const s={},r=c(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const u=c(e,["pageToken"]);t!==void 0&&u!=null&&f(t,["_query","pageToken"],u);const p=c(e,["filter"]);return t!==void 0&&p!=null&&f(t,["_query","filter"],p),s}function tM(e,t){const o={},s=c(e,["config"]);return s!=null&&ZA(s,o),o}function nM(e,t){const o={},s=c(e,["config"]);return s!=null&&eM(s,o),o}function iM(e,t){const o={},s=c(e,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(e,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const u=c(e,["tunedModels"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>qv(g))),f(o,["tuningJobs"],p)}return o}function oM(e,t){const o={},s=c(e,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(e,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const u=c(e,["tuningJobs"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>kf(g))),f(o,["tuningJobs"],p)}return o}function lM(e,t){const o={},s=c(e,["name"]);s!=null&&f(o,["model"],s);const r=c(e,["name"]);return r!=null&&f(o,["endpoint"],r),o}function sM(e,t){const o={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(e,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(o,["examples","examples"],r)}return o}function aM(e,t,o){const s={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const p=c(e,["gcsUri"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],p)}else if(r==="PREFERENCE_TUNING"){const p=c(e,["gcsUri"]);t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],p)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const p=c(e,["vertexDatasetResource"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],p)}else if(u==="PREFERENCE_TUNING"){const p=c(e,["vertexDatasetResource"]);t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],p)}if(c(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function qv(e,t){const o={},s=c(e,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(e,["name"]);r!=null&&f(o,["name"],r);const u=c(e,["state"]);u!=null&&f(o,["state"],av(u));const p=c(e,["createTime"]);p!=null&&f(o,["createTime"],p);const g=c(e,["tuningTask","startTime"]);g!=null&&f(o,["startTime"],g);const v=c(e,["tuningTask","completeTime"]);v!=null&&f(o,["endTime"],v);const m=c(e,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(e,["description"]);x!=null&&f(o,["description"],x);const b=c(e,["baseModel"]);b!=null&&f(o,["baseModel"],b);const T=c(e,["_self"]);return T!=null&&f(o,["tunedModel"],lM(T)),o}function kf(e,t){const o={},s=c(e,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(e,["name"]);r!=null&&f(o,["name"],r);const u=c(e,["state"]);u!=null&&f(o,["state"],av(u));const p=c(e,["createTime"]);p!=null&&f(o,["createTime"],p);const g=c(e,["startTime"]);g!=null&&f(o,["startTime"],g);const v=c(e,["endTime"]);v!=null&&f(o,["endTime"],v);const m=c(e,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(e,["error"]);x!=null&&f(o,["error"],x);const b=c(e,["description"]);b!=null&&f(o,["description"],b);const T=c(e,["baseModel"]);T!=null&&f(o,["baseModel"],T);const A=c(e,["tunedModel"]);A!=null&&f(o,["tunedModel"],A);const _=c(e,["preTunedModel"]);_!=null&&f(o,["preTunedModel"],_);const V=c(e,["supervisedTuningSpec"]);V!=null&&f(o,["supervisedTuningSpec"],V);const G=c(e,["preferenceOptimizationSpec"]);G!=null&&f(o,["preferenceOptimizationSpec"],G);const J=c(e,["tuningDataStats"]);J!=null&&f(o,["tuningDataStats"],J);const fe=c(e,["encryptionSpec"]);fe!=null&&f(o,["encryptionSpec"],fe);const ce=c(e,["partnerModelTuningSpec"]);ce!=null&&f(o,["partnerModelTuningSpec"],ce);const ge=c(e,["customBaseModel"]);ge!=null&&f(o,["customBaseModel"],ge);const ze=c(e,["experiment"]);ze!=null&&f(o,["experiment"],ze);const De=c(e,["labels"]);De!=null&&f(o,["labels"],De);const we=c(e,["outputUri"]);we!=null&&f(o,["outputUri"],we);const ot=c(e,["pipelineJob"]);ot!=null&&f(o,["pipelineJob"],ot);const Ae=c(e,["serviceAccount"]);Ae!=null&&f(o,["serviceAccount"],Ae);const Qe=c(e,["tunedModelDisplayName"]);Qe!=null&&f(o,["tunedModelDisplayName"],Qe);const Pe=c(e,["veoTuningSpec"]);return Pe!=null&&f(o,["veoTuningSpec"],Pe),o}function rM(e,t){const o={},s=c(e,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(e,["name"]);r!=null&&f(o,["name"],r);const u=c(e,["metadata"]);u!=null&&f(o,["metadata"],u);const p=c(e,["done"]);p!=null&&f(o,["done"],p);const g=c(e,["error"]);return g!=null&&f(o,["error"],g),o}function Ly(e,t){const o={},s=c(e,["gcsUri"]);s!=null&&f(o,["validationDatasetUri"],s);const r=c(e,["vertexDatasetResource"]);return r!=null&&f(o,["validationDatasetUri"],r),o}class cM extends Uo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new jl(Do.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),u=await this.tuneMldevInternal(r);let p="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?p=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(p=u.name.split("/operations/")[0]),{name:p,state:vf.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=QA(t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>kf(x))}else{const m=WA(t);return g=Xe("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>qv(x))}}async listInternal(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=nM(t);return g=Xe("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=oM(x),T=new ry;return Object.assign(T,b),T})}else{const m=tM(t);return g=Xe("tunedModels",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=iM(x),T=new ry;return Object.assign(T,b),T})}}async cancel(t){var o,s,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=jA(t);return g=Xe("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=$A(x),T=new cy;return Object.assign(T,b),T})}else{const m=VA(t);return g=Xe("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=qA(x),T=new cy;return Object.assign(T,b),T})}}async tuneInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=XA(t,t);return u=Xe("tuningJobs",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>kf(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=KA(t);return u=Xe("tunedModels",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>rM(v))}}}class uM{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dM=1024*1024*8,fM=3,pM=1e3,hM=2,Lc="x-goog-upload-status";async function mM(e,t,o){var s;const r=await $v(e,t,o),u=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[Lc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function gM(e,t,o){var s;const r=await $v(e,t,o),u=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[Lc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const p=tv(u),g=new Yf;return Object.assign(g,p),g}async function $v(e,t,o){var s,r;let u=0,p=0,g=new xf(new Response),v="upload";for(u=e.size;p<u;){const m=Math.min(dM,u-p),x=e.slice(p,p+m);p+m>=u&&(v+=", finalize");let b=0,T=pM;for(;b<fM&&(g=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(p),"Content-Length":String(m)}}}),!(!((s=g?.headers)===null||s===void 0)&&s[Lc]));)b++,await vM(T),T=T*hM;if(p+=m,((r=g?.headers)===null||r===void 0?void 0:r[Lc])!=="active")break;if(u<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return g}async function yM(e){return{size:e.size,type:e.type}}function vM(e){return new Promise(t=>setTimeout(t,e))}class xM{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mM(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await gM(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yM(t)}}class bM{create(t,o,s){return new SM(t,o,s)}}class SM{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Fy="x-goog-api-key";class TM{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(Fy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Fy,this.apiKey)}}}const wM="gl-node/";class CM{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new jn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=vT(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new TM(this.apiKey);this.apiClient=new yN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:wM+"web",uploader:new xM,downloader:new uM}),this.models=new LN(this.apiClient),this.live=new kN(this.apiClient,r,new bM),this.batches=new Yw(this.apiClient),this.chats=new AC(this.models,this.apiClient),this.caches=new EC(this.apiClient),this.files=new PC(this.apiClient),this.operations=new FN(this.apiClient),this.authTokens=new ZN(this.apiClient),this.tunings=new cM(this.apiClient),this.fileSearchStores=new aA(this.apiClient)}}const EM=e=>new CM({apiKey:e}),_M={type:vn.OBJECT,properties:{segments:{type:vn.ARRAY,items:{type:vn.OBJECT,properties:{startTime:{type:vn.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:vn.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:vn.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},NM={type:vn.OBJECT,properties:{segments:{type:vn.ARRAY,items:{type:vn.OBJECT,properties:{startTime:{type:vn.STRING},endTime:{type:vn.STRING},text:{type:vn.STRING},words:{type:vn.ARRAY,items:{type:vn.OBJECT,properties:{text:{type:vn.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:vn.STRING,description:"Start time of the word"},endTime:{type:vn.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function gc(e){if(!e)return"00:00.000";let t=e.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const p=t.split(":");if(p.length===3){const g=parseInt(p[0],10)||0,v=parseInt(p[1],10)||0,m=p[2].split("."),x=parseInt(m[0],10)||0;let b=0;m[1]&&(b=parseFloat("0."+m[1])),o=g*3600+v*60+x+b}else if(p.length===2){const g=parseInt(p[0],10)||0,v=p[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=g*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const s=Math.floor(o/60),r=Math.floor(o%60),u=Math.round(o%1*1e3);return`${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(u).padStart(3,"0")}`}function AM(e){const t=e.trim();try{const p=JSON.parse(t);if(p.segments&&Array.isArray(p.segments))return p;if(Array.isArray(p))return{segments:p}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const p=["]}","}","]}"];for(const v of p)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const g=t.substring(0,o+1)+"]}";try{const v=JSON.parse(g);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const s=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let u;for(;(u=r.exec(t))!==null;){const p=u[3]!==void 0?u[3]:u[4];let g=p;try{g=JSON.parse(`"${p.replace(/"/g,'\\"')}"`)}catch{g=p.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}s.push({startTime:u[1],endTime:u[2],text:g})}if(s.length>0)return{segments:s};throw new Error("Response structure invalid and could not be repaired.")}async function MM(e,t,o,s,r,u="line"){try{const p=EM(s),g=e.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";u==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. REPEATED WORDS & STUTTERS: **EXTREMELY IMPORTANT**
       - Treat every spoken utterance as a distinct word which must be timestamped.
       - Example: "No no no wait" -> 4 distinct word objects.
       - Example: "I I I didn't mean it" -> 3 distinct "I" objects followed by "didn't", "mean", "it".
       - NEVER merge repeated words into a single event.
    4. DETAILS: Inside each line object, you MUST provide a "words" array.
    5. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    6. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    7. FAST SPEECH / RAP / CONVERSATION HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics or conversation, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating precise timed lyrics and subtitled conversations.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${u.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,b={responseMimeType:"application/json",responseSchema:u==="word"?NM:_M,temperature:.1};g&&(b.thinkingConfig={thinkingBudget:1024});const T=new Promise((J,fe)=>{r?.aborted&&fe(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>fe(new DOMException("Aborted","AbortError")))});let _=(await Promise.race([p.models.generateContent({model:e,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:b}),T])).text;if(!_)throw new Error("Empty response from model");return _=_.trim(),_.startsWith("```json")?_=_.replace(/^```json\s*/,"").replace(/\s*```$/,""):_.startsWith("```")&&(_=_.replace(/^```\s*/,"").replace(/\s*```$/,"")),(AM(_).segments||[]).map(J=>({startTime:gc(String(J.startTime)),endTime:gc(String(J.endTime)),text:String(J.text),words:J.words?J.words.map(fe=>({text:String(fe.text),startTime:gc(String(fe.startTime)),endTime:gc(String(fe.endTime))})):void 0}))}catch(p){throw p.name==="AbortError"?p:(console.error(`Error with ${e}:`,p),new Error(p.message||"Transcription failed"))}}const kM=({playlist:e,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:s,onPlayTrack:r,isPlaying:u,onTogglePlay:p,onSeek:g,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:b})=>{const{confirm:T}=er(),A=Q.useRef(null),_=Q.useRef(new Map),V=L=>{const te=Math.floor(L/60).toString().padStart(2,"0"),oe=(L%60).toFixed(2).padStart(5,"0");return`[${te}:${oe}]`},[G,J]=Q.useState(null),[fe,ce]=Q.useState({key:null,direction:"asc"}),[ge,ze]=Q.useState(new Set),[De,we]=Q.useState(new Set),[ot,Ae]=Q.useState(localStorage.getItem("gemini_api_key")||""),[Qe,Pe]=Q.useState("gemini-2.5-flash"),[ut,ht]=Q.useState("line"),[At,Mt]=Q.useState(!1),j=Q.useRef(null),[Ee,le]=Q.useState(null);Q.useEffect(()=>{ot&&localStorage.setItem("gemini_api_key",ot)},[ot]);const bt=o>=0?e[o]:null,Je=bt?.parsedLyrics||[],z=Q.useMemo(()=>bt?Je.findIndex((L,te)=>{if(L.endTime!==void 0)return x>=L.time&&x<L.endTime;const oe=Je[te+1];return x>=L.time&&(!oe||x<oe.time)}):-1,[x,bt,Je]);Q.useEffect(()=>{if(z!==-1){const L=document.getElementById(`lyric-active-${o}`);L&&L.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[z,o]);const se=L=>{if(e.length===0)return;const te=o>=0?e[o]:null,oe=[...e];let Ne="asc";if(L==="random"){ce({key:"random",direction:"asc"});for(let xe=oe.length-1;xe>0;xe--){const he=Math.floor(Math.random()*(xe+1));[oe[xe],oe[he]]=[oe[he],oe[xe]]}}else{fe.key===L&&fe.direction==="asc"&&(Ne="desc"),ce({key:L,direction:Ne});const xe=Ne==="asc"?1:-1;L==="filename"?oe.sort((he,C)=>xe*he.audioFile.name.localeCompare(C.audioFile.name)):L==="artist"?oe.sort((he,C)=>xe*(he.metadata.artist||"").localeCompare(C.metadata.artist||"")):L==="title"?oe.sort((he,C)=>xe*(he.metadata.title||"").localeCompare(C.metadata.title||"")):L==="album"&&oe.sort((he,C)=>xe*(he.metadata.album||"").localeCompare(C.metadata.album||""))}if(t(oe),te){const xe=oe.findIndex(he=>he.id===te.id);xe!==-1&&s(xe)}},ve=Q.useCallback(L=>{G!==null&&L.key==="Delete"?(L.preventDefault(),L.stopPropagation(),m?m(G):t(te=>{const oe=[...te];return oe.splice(G,1),oe}),G>=e.length-1&&J(e.length>1?e.length-2:null)):L.key==="ArrowDown"&&e.length>0?(L.preventDefault(),L.stopPropagation(),J(te=>te===null?0:Math.min(te+1,e.length-1))):L.key==="ArrowUp"&&e.length>0?(L.preventDefault(),L.stopPropagation(),J(te=>te===null?0:Math.max(te-1,0))):L.key==="Enter"&&G!==null?(L.preventDefault(),L.stopPropagation(),r(G)):L.key==="Escape"&&J(null)},[G,e.length,t,r]);Q.useEffect(()=>{const L=A.current;if(L)return L.addEventListener("keydown",ve),()=>L.removeEventListener("keydown",ve)},[ve]),Q.useEffect(()=>{G!==null&&G>=e.length&&J(e.length>0?e.length-1:null)},[e.length,G]);const Be=async L=>{const te=new Map;L.forEach(he=>{const C=he.name.split(".").pop()?.toLowerCase(),$=(he.webkitRelativePath||he.name).replace(/\.[^/.]+$/,"");te.has($)||te.set($,{});const M=te.get($);["mp3","wav","ogg","flac","m4a","mp4","webm","ogg","mkv","mov","avi","m4v"].includes(C||"")?M.audio=he:["lrc","srt","ttml","xml","json","vtt"].includes(C||"")&&(M.lyric=he)});const oe=[],Ne=async(he,C)=>new Promise(U=>{if(he.type.startsWith("video/")){U({title:C,artist:"Unknown Artist",coverUrl:URL.createObjectURL(he),backgroundType:"video"});return}df(()=>import("./jsmediatags.min-CQMnV9ok.js").then($=>$.j),[]).then($=>{$.read(he,{onSuccess:M=>{const{title:ne,artist:I,album:ue,picture:re}=M.tags;let de=null;if(re){const{data:Fe,format:Ke}=re;let rt="";for(let Ve=0;Ve<Fe.length;Ve++)rt+=String.fromCharCode(Fe[Ve]);de=`data:${Ke};base64,${window.btoa(rt)}`}U({title:ne||C,artist:I||"Unknown Artist",album:ue||void 0,coverUrl:de})},onError:()=>{U({title:C,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{U({title:C,artist:"Unknown Artist",coverUrl:null})})}),xe=async he=>{try{const C=await he.text(),U=he.name.split(".").pop()?.toLowerCase();if(U==="lrc")return Ls(C);if(U==="srt")return Fs(C);if(U==="ttml"||U==="xml")return qa(C);if(U==="vtt")return $a(C);if(U==="json")return oT(C)}catch(C){console.error("Failed to parse lyrics",C)}return[]};for(const[he,C]of te.entries())if(C.audio){const U=await Ne(C.audio,he),$=Math.random().toString(36).substr(2,9);let M=[];C.lyric&&(M=await xe(C.lyric)),oe.push({id:$,audioFile:C.audio,lyricFile:C.lyric,parsedLyrics:M,metadata:U,duration:0})}if(oe.length>0){const he=[...e,...oe];t(he),r(0,!1,he)}},et=async L=>{if(L.target.files&&L.target.files.length>0){const te=Array.from(L.target.files);await Be(te),L.target.value=""}},[w,P]=Q.useState(!1),ie=L=>{L.preventDefault(),L.stopPropagation(),P(!0)},pe=L=>{L.preventDefault(),L.stopPropagation(),P(!1)},Oe=async L=>{if(L.preventDefault(),L.stopPropagation(),P(!1),L.dataTransfer.files&&L.dataTransfer.files.length>0){const te=Array.from(L.dataTransfer.files);await Be(te)}},B=L=>{m?m(L):t(te=>{const oe=[...te];return oe.splice(L,1),oe})},_e=L=>new Promise((te,oe)=>{const Ne=new FileReader;Ne.readAsDataURL(L),Ne.onload=()=>{const xe=Ne.result.split(",")[1];te(xe)},Ne.onerror=xe=>oe(xe)}),ke=async L=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(ge.has(L.id)){const xe=_.current.get(L.id);xe&&xe.abort();return}const te=ot||"PLACEHOLDER_API_KEY";if(te.trim().length<39){alert(`Invalid API Key length (${te.trim().length}). It must be at least 39 characters.`),Mt(!0);return}ze(xe=>new Set(xe).add(L.id));const oe=new AbortController;_.current.set(L.id,oe);const Ne=19.5*1024*1024;if(L.audioFile.size>Ne){alert(`File is too large (${(L.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),ze(xe=>{const he=new Set(xe);return he.delete(L.id),he}),_.current.delete(L.id);return}try{const xe=await _e(L.audioFile);let he=L.duration||0;if(he===0)try{he=await new Promise($=>{const M=new Audio(URL.createObjectURL(L.audioFile));M.onloadedmetadata=()=>{$(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>{URL.revokeObjectURL(M.src),$(0)}})}catch($){console.warn("Could not determine duration for AI validation",$)}let U=(await MM(Qe,xe,L.audioFile.type,te,oe.signal,ut)).map($=>({time:Ba($.startTime),text:$.text,endTime:Ba($.endTime),words:$.words?$.words.map(M=>({text:M.text,startTime:Ba(M.startTime),endTime:Ba(M.endTime)})):void 0}));he>0&&(U=U.filter($=>$.time<he&&$.time>=0)),t($=>$.map(M=>M.id===L.id?{...M,parsedLyrics:U.sort((ne,I)=>ne.time-I.time),duration:he>0?he:M.duration}:M))}catch(xe){if(xe.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",xe);let he="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)he="Connection lost. Please check your internet connection.";else if(xe.message){const C=xe.message.toLowerCase();C.includes("fetch")||C.includes("network")||C.includes("failed to connect")?he="Network error. Please check your connection.":(C.includes("api key")||xe.message.includes("400")||xe.message.includes("401")||xe.message.includes("403"))&&(he="API Key Error: Please check if your key is valid and has credits.")}alert(he)}}finally{_.current.delete(L.id),ze(xe=>{const he=new Set(xe);return he.delete(L.id),he})}},ye=async L=>{if(!navigator.onLine){alert("No internet connection.");return}we(te=>new Set(te).add(L.id));try{const te=await df(()=>import("./index.min-Cowm1xNX.js").then(U=>U.i),[]);let oe;const Ne=te.default||te;console.log("SyncLyrics Module:",te);const xe=["musixmatch","lrclib","netease"];if(typeof Ne=="function"&&Ne.prototype&&Ne.prototype.getLyrics){console.log("Detected Class usage");const U=new Ne({sources:xe});oe=$=>U.getLyrics($)}else if(Ne.getLyrics&&typeof Ne.getLyrics=="function")console.log("Detected Instance usage"),oe=U=>Ne.getLyrics(U);else if(Ne.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const U=Ne.SyncLyrics;if(typeof U=="function"&&U.prototype&&U.prototype.getLyrics){console.log("Using SyncLyrics as Class");const $=new U({sources:xe});oe=M=>$.getLyrics(M)}else if(typeof U=="function")console.log("Using SyncLyrics as Function"),oe=U;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ne=="function")console.log("Detected Function usage"),oe=Ne;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ne}. Keys: ${typeof Ne=="object"?JSON.stringify(Object.keys(Ne)):"N/A"}`);const he={track:L.metadata.title,artist:L.metadata.artist,album:L.metadata.album,sources:xe};console.log("Searching lyrics with options:",he);const C=await oe(he);if(C&&typeof C=="string")be(C,L);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let U=L.duration||0;if(U===0)try{U=await new Promise(I=>{const ue=new Audio(URL.createObjectURL(L.audioFile));ue.onloadedmetadata=()=>{const re=ue.duration;URL.revokeObjectURL(ue.src),I(re)},ue.onerror=()=>I(0)})}catch(I){console.warn("Could not determine duration for search",I)}const $=new URLSearchParams({artist_name:L.metadata.artist,track_name:L.metadata.title,album_name:L.metadata.album||"",duration:U.toString()}),M=await fetch(`https://lrclib.net/api/get?${$.toString()}`);if(!M.ok){const I=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(L.metadata.title+" "+L.metadata.artist)}`);if(I.ok){const ue=await I.json();if(Array.isArray(ue)&&ue.length>0){const re=ue.find(de=>de.syncedLyrics);if(re){be(re.syncedLyrics,L);return}else if(ue[0].plainLyrics){be(ue[0].plainLyrics,L);return}}}throw new Error("No lyrics found in fallback source.")}const ne=await M.json();ne.syncedLyrics?be(ne.syncedLyrics,L):ne.plainLyrics?be(ne.plainLyrics,L):alert("No lyrics found.")}}catch(te){console.error("Search failed:",te),te.message?.includes("CORS")||te.message?.includes("etwork")||te.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+te.message)}finally{we(te=>{const oe=new Set(te);return oe.delete(L.id),oe})}},be=(L,te)=>{let oe=Ls(L);if(oe.length===0&&(oe=Fs(L)),oe.length>0){const Ne=oe.some(xe=>xe.words&&xe.words.length>0);console.log(Ne?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(xe=>xe.map(he=>he.id===te.id?{...he,parsedLyrics:oe,lyricFile:new File([L],`synched-lyrics${Ne?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:he))}else alert("Lyrics found but could not be parsed.")},Le=(L,te,oe)=>{const Ne=new Blob([L],{type:"application/octet-stream"}),xe=URL.createObjectURL(Ne),he=document.createElement("a");he.href=xe,he.download=te,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(xe)},Ze=async(L,te)=>{const oe=L.parsedLyrics||[];if(oe.length===0)return;let Ne="";const xe=te==="lrc-enhanced"?"lrc":te,he=`${L.metadata.title||"lyrics"}.${xe}`;let C=L.duration||0;if(C===0)try{C=await new Promise($=>{const M=new Audio(URL.createObjectURL(L.audioFile));M.onloadedmetadata=()=>{$(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>$(0)})}catch($){console.warn("Could not determine duration for export check",$)}const U=oe.map($=>({...$,words:$.words?$.words.filter(M=>M.text.trim().length>0).map(M=>({...M})):void 0}));for(let $=0;$<U.length;$++){const M=U[$],ne=U[$+1];if(M.endTime===void 0&&(ne?M.endTime=ne.time:M.endTime=C>0?C:M.time+5),M.words&&M.words.length>0)for(let I=0;I<M.words.length;I++){const ue=M.words[I],re=M.words[I+1];(te==="ttml"||ue.endTime===void 0||ue.endTime<=ue.startTime)&&(re?ue.endTime=re.startTime:ue.endTime=M.endTime)}}if(te==="txt")Ne=U.map($=>$.text).join(`
`);else if(te==="json")Ne=JSON.stringify(U,null,2);else if(te==="srt"){const $=M=>{const ne=Math.floor(M/3600).toString().padStart(2,"0"),I=Math.floor(M%3600/60).toString().padStart(2,"0"),ue=Math.floor(M%60).toString().padStart(2,"0"),re=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ne}:${I}:${ue},${re}`};Ne=U.map((M,ne)=>{const I=$(M.time),ue=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,re=$(ue);return`${ne+1}
${I} --> ${re}
${M.text}
`}).join(`
`)}else if(te==="lrc"){const $=[],M=ne=>{const I=Math.floor(ne/60).toString().padStart(2,"0"),ue=(ne%60).toFixed(2).padStart(5,"0");return`[${I}:${ue}]`};for(let ne=0;ne<oe.length;ne++){const I=oe[ne],ue=oe[ne+1];$.push(`${M(I.time)}${I.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const de=(I.endTime??I.time+3)+4;(!(C>0)||de<=C)&&(ue?ue.time>de&&$.push(`${M(de)}`):$.push(`${M(de)}`))}Ne=$.join(`
`)}else if(te==="lrc-enhanced"){const $=[],M=I=>{const ue=Math.floor(I/60).toString().padStart(2,"0"),re=(I%60).toFixed(2).padStart(5,"0");return`[${ue}:${re}]`},ne=I=>{const ue=Math.floor(I/60).toString().padStart(2,"0"),re=(I%60).toFixed(2).padStart(5,"0");return`<${ue}:${re}>`};for(let I=0;I<oe.length;I++){const ue=oe[I],re=oe[I+1];let de="";ue.words&&ue.words.length>0?ue.words.forEach((Ve,E)=>{const at=Ve.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");de+=`${ne(Ve.startTime)}${at}`,E<ue.words.length-1&&!at.endsWith("-")&&(de+=" ")}):de=ue.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),$.push(`${M(ue.time)}${de}`);const Ke=(ue.endTime??ue.time+3)+4;(!(C>0)||Ke<=C)&&(re?re.time>Ke&&$.push(`${M(Ke)}`):$.push(`${M(Ke)}`))}Ne=$.join(`
`)}else if(te==="ttml"){const $=M=>{const ne=Math.floor(M/3600).toString().padStart(2,"0"),I=Math.floor(M%3600/60).toString().padStart(2,"0"),ue=Math.floor(M%60).toString().padStart(2,"0"),re=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ne}:${I}:${ue}.${re}`};Ne=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,U.forEach(M=>{const ne=$(M.time),I=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+3,ue=$(I);Ne+=`
      <p begin="${ne}" end="${ue}">`,M.words&&M.words.length>0?M.words.forEach(re=>{if(!re.text.trim())return;const de=$(re.startTime);let Fe=re.endTime;(Fe===void 0||Fe<=re.startTime)&&(Fe=re.startTime+.5);const Ke=$(Fe);let rt=re.text.replace(/[ \t]+/g," ").trim();rt.endsWith("-")||(rt+=" "),Ne+=`
        <span begin="${de}" end="${Ke}">${rt}</span>`}):Ne+=`
        <span begin="${ne}" end="${ue}">${M.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ne+=`
      </p>`}),Ne+=`
    </div>
  </body>
</tt>`}else if(te==="vtt"){const $=M=>{const ne=Math.floor(M/3600).toString().padStart(2,"0"),I=Math.floor(M%3600/60).toString().padStart(2,"0"),ue=Math.floor(M%60).toString().padStart(2,"0"),re=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ne}:${I}:${ue}.${re}`};Ne=`WEBVTT

`,U.forEach(M=>{const ne=$(M.time),I=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,ue=$(I);let re=M.text.trim();if(M.words&&M.words.length>0){const de=M.words.map(Fe=>`<${$(Fe.startTime)}>${Fe.text.trim()}`).join(" ");de.length>0&&(re=de)}Ne+=`${ne} --> ${ue}
${re}

`})}Le(Ne,he)},R=async L=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(te=>te.map(oe=>oe.id===L.id?{...oe,parsedLyrics:[],lyricFile:void 0}:oe))},qe=async L=>{const te=L.target.files?.[0];if(!(!te||!Ee)){try{const oe=await te.text(),Ne=te.name.split(".").pop()?.toLowerCase();let xe=[];Ne==="lrc"?xe=Ls(oe):Ne==="srt"?xe=Fs(oe):Ne==="ttml"||Ne==="xml"?xe=qa(oe):Ne==="vtt"&&(xe=$a(oe)),xe.length>0?t(he=>he.map(C=>C.id===Ee?{...C,lyricFile:te,parsedLyrics:xe}:C)):alert("Could not parse lyrics. Ensure file is .lrc, .srt, or .vtt")}catch(oe){console.error("Failed to load lyrics",oe),alert("Failed to load lyrics file.")}le(null),L.target.value=""}};return d.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${w?"bg-zinc-800 border-orange-500":""}`,onDragOver:ie,onDragLeave:pe,onDrop:Oe,children:[w&&d.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:d.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[d.jsx(so,{size:48}),d.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),d.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, FLAC, Video (MP4/WebM), LRC, SRT, VTT"})]})}),d.jsx("input",{type:"file",ref:j,className:"hidden",accept:".lrc,.srt,.ttml,.xml,.vtt",onChange:qe}),d.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[d.jsx(kc,{size:16,className:"text-orange-400"}),"Playlist"]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[d.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[d.jsx(Zy,{size:14})," Add Files",d.jsx("input",{type:"file",className:"hidden",accept:"audio/*,video/*,.lrc,.srt,.ttml,.xml,.vtt",multiple:!0,onChange:et})]}),d.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[d.jsx(Y1,{size:14}),d.jsx("input",{type:"file",className:"hidden",multiple:!0,webkitdirectory:"",onChange:et})]})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>se("filename"),className:`p-1 rounded transition-colors ${fe.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${fe.key==="filename"?fe.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(Ac,{size:14,className:fe.key==="filename"&&fe.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>se("artist"),className:`p-1 rounded transition-colors ${fe.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${fe.key==="artist"?fe.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(KS,{size:14,className:fe.key==="artist"&&fe.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>se("title"),className:`p-1 rounded transition-colors ${fe.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${fe.key==="title"?fe.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(ks,{size:14,className:fe.key==="title"&&fe.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>se("album"),className:`p-1 rounded transition-colors ${fe.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${fe.key==="album"?fe.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(F1,{size:14,className:fe.key==="album"&&fe.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>se("random"),className:`p-1 rounded transition-colors ${fe.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:d.jsx(AS,{size:14})})]})]}),d.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[d.jsx("button",{onClick:()=>Mt(!At),className:`p-1 rounded transition-colors ${At?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:d.jsx(eS,{size:14})}),At&&d.jsx("input",{type:ot?"password":"text",value:ot,onChange:L=>Ae(L.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),d.jsx("div",{className:"relative group",children:d.jsxs("select",{value:Qe,onChange:L=>Pe(L.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[d.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),d.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),d.jsx("div",{className:"relative group",children:d.jsxs("select",{value:ut,onChange:L=>ht(L.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[d.jsx("option",{value:"line",children:"Line"}),d.jsx("option",{value:"word",children:"Word"})]})}),d.jsx("button",{onClick:async()=>{e.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:d.jsx(Us,{size:14})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),d.jsx("button",{onClick:b,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:d.jsx(Ni,{size:14})})]})]}),d.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:e.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[d.jsx(kc,{size:32,className:"mb-2 opacity-50"}),d.jsx("p",{children:"Playlist is empty"}),d.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):e.map((L,te)=>{const oe=te===o,Ne=te===G,xe=L.parsedLyrics||[],he=oe?xe.findIndex((C,U)=>{if(C.endTime!==void 0)return x>=C.time&&x<C.endTime;const $=xe[U+1];return x>=C.time&&(!$||x<$.time)}):-1;return d.jsxs("div",{onClick:()=>J(te),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${oe?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ne?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[d.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:C=>{C.stopPropagation(),oe?p():r(te)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${oe?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:oe?u?d.jsx(Qy,{size:14}):d.jsx(pf,{size:14}):d.jsx(pf,{size:14})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:`text-xs font-medium truncate ${oe?"text-orange-100":"text-zinc-300"}`,title:L.audioFile.name,children:L.metadata.title}),d.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:L.metadata.artist,children:L.metadata.artist})]})]}),d.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[d.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(L.audioFile.size/1024/1024).toFixed(1),"MB"]}),L.lyricFile?d.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:L.lyricFile.name,children:[d.jsx(Ac,{size:7}),d.jsx("span",{className:"truncate max-w-[80px]",children:L.lyricFile.name})]}):d.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),d.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:xe.length>0?d.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:xe.map((C,U)=>{const $=U===he;return d.jsxs("div",{id:$?`lyric-active-${te}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${$?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${V(C.time)} - ${C.text}`,onClick:M=>{M.stopPropagation(),te!==o?(r(te),setTimeout(()=>g(C.time),150)):g(C.time)},children:[d.jsx("span",{className:`font-mono text-[8px] ${$?"text-orange-200":"text-zinc-500"}`,children:V(C.time)}),d.jsx("span",{className:`truncate max-w-[120px] ${$?"text-white font-medium":"text-zinc-400"}`,children:C.text||""})]},U)})}):d.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),d.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[d.jsx("button",{onClick:C=>{C.stopPropagation(),le(L.id),j.current&&(j.current.value=""),j.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:d.jsx(so,{size:14})}),d.jsx("button",{onClick:C=>{C.stopPropagation(),ye(L)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${De.has(L.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:De.has(L.id),children:De.has(L.id)?d.jsx(tg,{size:14,className:"animate-spin"}):d.jsx(ES,{size:14})}),d.jsx("button",{onClick:C=>{C.stopPropagation(),ke(L)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${ge.has(L.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:ge.has(L.id)?"Stop Transcription":"AI Sync Transcribe",children:ge.has(L.id)?d.jsxs(d.Fragment,{children:[d.jsx(tg,{size:14,className:"animate-spin group-hover/btn:hidden"}),d.jsx(gf,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):d.jsx(mf,{size:14})}),xe.length>0&&d.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"vtt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download VTT",children:"VTT"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),Ze(L,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),d.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),d.jsx("button",{onClick:C=>{C.stopPropagation(),R(L)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),d.jsx("button",{onClick:C=>{C.stopPropagation(),B(te)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:d.jsx(Us,{size:12})})]},L.id)})})]})},tp=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],RM=()=>{const e=new Set;if(tp.forEach(g=>{g.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&e.add(m)})}),e.size===0)return;const s=`https://fonts.googleapis.com/css2?${Array.from(e).map(g=>`family=${g.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=s,document.head.appendChild(r);const u=document.createElement("link");u.rel="preconnect",u.href="https://fonts.googleapis.com",document.head.appendChild(u);const p=document.createElement("link");p.rel="preconnect",p.href="https://fonts.gstatic.com",p.crossOrigin="anonymous",document.head.appendChild(p)},IM=e=>{const t=`google-font-${e.replace(/\s+/g,"-").toLowerCase()}`;if(document.getElementById(t))return;const o=document.createElement("link");o.id=t,o.rel="stylesheet",o.href=`https://fonts.googleapis.com/css2?family=${e.replace(/\s+/g,"+")}:wght@400;700&display=swap`,document.head.appendChild(o)},np=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],Fc={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},sf=np.flatMap(e=>e.options.map(t=>t.value)),af=({onApply:e,placeholder:t="Google Font Name"})=>{const{toast:o}=er(),[s,r]=Q.useState(""),u=()=>{if(!s.trim())return;const p=s.trim().replace(/['"]/g,"").replace(/\s+/g," ");IM(p),e(p),o.success(`Loaded & Applied: ${p}`),r("")};return d.jsxs("div",{className:"flex gap-2 mt-2 items-center",children:[d.jsx("span",{className:"text-[10px] text-zinc-500 font-bold uppercase whitespace-nowrap",children:"Google Font:"}),d.jsx("input",{type:"text",value:s,onChange:p=>r(p.target.value),placeholder:t,className:"flex-1 min-w-0 bg-zinc-900 border border-white/10 rounded-md px-2 py-1 text-[10px] text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500",onKeyDown:p=>{p.key==="Enter"&&u()}}),d.jsx("button",{onClick:u,disabled:!s.trim(),className:"bg-zinc-700 hover:bg-zinc-600 text-white text-[10px] px-2 py-1 rounded-md font-medium disabled:opacity-50 transition-colors",title:"Load and apply",children:"Load"})]})},Py={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,lyricLineHeight:1.2,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,infoFontFamily:"ui-sans-serif, system-ui, sans-serif",infoFontWeight:"bold",infoFontStyle:"normal",infoFontColor:"#ffffff",backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoFontFamily:"ui-sans-serif, system-ui, sans-serif",channelInfoFontWeight:"bold",channelInfoFontStyle:"normal",channelInfoFontColor:"#ffffff",channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1,useRealColorMedia:!1},By=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],Oy=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],Hy=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],Gy=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],Rf=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Smooth Transition White",value:"karaoke-smooth-white"},{label:"Smooth Transition Plus",value:"karaoke-smooth-plus"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],Tc=e=>{let t="",o="";return e.includes("blue")||e.includes("cyan")?(t=e.includes("cyan")?"#06b6d4":"#3b82f6",o=t):e.includes("purple")?(t="#a855f7",o=t):e.includes("green")?(t="#22c55e",o=t):e.includes("pink")?(t="#ec4899",o=t):(e==="karaoke-pill"||e==="karaoke-box"||e==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},Vy=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],If=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],Yv=["none","upper","lower","title","sentence","invert"],jy=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],qy=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],zM=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Bi=({value:e,onChange:t,groups:o})=>{const[s,r]=Q.useState(!1),[u,p]=Q.useState(e);Q.useEffect(()=>{s||p(e)},[e,s]);const g=b=>{for(const T of o){const A=T.options.find(_=>_.value===b);if(A)return A.label}return b},v=b=>{t(b)},m=()=>{s&&t(u),r(!1)},x=b=>{t(b),p(b),r(!1)};return d.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[d.jsxs("button",{onClick:()=>r(!s),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:s?"Close List":"Expand List",children:[d.jsx("span",{className:"truncate",children:g(e)}),d.jsx(Qa,{size:14,className:`transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&d.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(b=>d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),d.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>d.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${e===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},b.label))})]})},DM=(e,t,o)=>{if(e==="CustomFont"&&o)return o;for(const s of t){const r=s.options.find(u=>u.value===e);if(r)return r.label}return"Select Font"},rf=({value:e,onChange:t,customFontName:o,groups:s=tp})=>{const[r,u]=Q.useState(!1),[p,g]=Q.useState(e);Q.useEffect(()=>{r||g(e)},[e,r]);const v=b=>{t(b)},m=()=>{r&&t(p)},x=b=>{t(b),g(b),u(!1)};return d.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[d.jsxs("button",{onClick:()=>u(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[d.jsx("span",{className:"truncate",style:{fontFamily:e},children:DM(e,s,o)}),d.jsx(Qa,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&d.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),d.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${e==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:d.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),s.map(b=>d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),d.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>d.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${e===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:d.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},b.label))]})]})},UM=Object.values(Fc).filter(e=>e.fontFamily).reduce((e,t)=>{if(!e.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),e.push({label:`${o} (Preset)`,value:t.fontFamily})}return e},[]),$y=[{label:"Visual Presets",options:UM},...tp],LM=({config:e,setConfig:t,preset:o,setPreset:s,onClose:r,isPlaylistMode:u,hasPlaylist:p,onRender:g,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:b,setResolution:T,aspectRatio:A,setAspectRatio:_,renderCodec:V,setRenderCodec:G,supportedCodecs:J,renderQuality:fe,setRenderQuality:ce,renderFps:ge,setRenderFps:ze,renderEngine:De,setRenderEngine:we,ffmpegCodec:ot,setFfmpegCodec:Ae,customChannelFontName:Qe,onChannelFontUpload:Pe,onClearChannelCustomFont:ut,customInfoFontName:ht,onInfoFontUpload:At,onClearInfoCustomFont:Mt})=>{const{toast:j,confirm:Ee}=er(),[le,bt]=Q.useState([]),Je=(R,qe)=>{le.includes(R)||bt(te=>[R,...te]);const L=R.includes(" ")?`'${R}'`:R;B(qe,L)},z=Vf.useMemo(()=>le.length===0?$y:[{label:"Loaded Google Fonts",options:le.map(qe=>({label:qe,value:qe.includes(" ")?`'${qe}'`:qe}))},...$y],[le]),se=Q.useRef(null),ve=Q.useRef(null),Be=Q.useRef(null),et=Q.useRef(null),w=Q.useRef(null),P=Q.useRef(null),ie=Q.useRef(null),[pe,Oe]=Q.useState(!1),B=(R,qe)=>{let L={...e,[R]:qe};if(R==="highlightEffect"){const oe=Tc(qe);L.useCustomHighlightColors=!1,oe?(L.highlightColor=oe.color,L.highlightBackground=oe.bg):(L.highlightColor="#fb923c",L.highlightBackground="#fb923c")}else if(R==="useCustomHighlightColors"&&qe===!1){const te=e.highlightEffect,oe=Tc(te);oe?(L.highlightColor=oe.color,L.highlightBackground=oe.bg):(L.highlightColor="#fb923c",L.highlightBackground="#fb923c")}t(L)},_e=R=>{s(R);const qe=Fc[R];qe&&t({...e,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...qe})},ke=R=>{const qe=R.target.files?.[0];if(qe){const L=new FileReader;L.onload=te=>{te.target?.result&&B("channelInfoImage",te.target.result)},L.readAsDataURL(qe)}R.target.value=""},ye=R=>{const qe=R.target.files?.[0];if(qe){const L=new FileReader;L.onload=te=>{te.target?.result&&B("backgroundImage",te.target.result)},L.readAsDataURL(qe)}R.target.value=""},be=async()=>{await Ee("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(Py),s("default"),T("1080p"),_("16:9"),G("auto"),ze(30),ce("med"),we("mediarecorder"),Ae("h264"),w.current&&(w.current.value=""),P.current&&(P.current.value=""),x(),ut&&ut(),Mt&&Mt(),e.channelInfoFontFamily==="ChannelFont"&&Be.current&&(Be.current.value=""),e.infoFontFamily==="InfoFont"&&et.current&&(et.current.value=""),B("channelInfoFontWeight","bold"),B("channelInfoFontStyle","normal"),B("infoFontWeight","bold"),B("infoFontStyle","normal"),B("enableGradientOverlay",!1),B("useRealColorMedia",!1),j.success("All settings have been reset to default."))},Le=()=>{const R=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),qe={...e,fontSizeScale:typeof e.fontSizeScale=="number"?Number(e.fontSizeScale.toFixed(6)):e.fontSizeScale,infoSizeScale:typeof e.infoSizeScale=="number"?Number(e.infoSizeScale.toFixed(6)):e.infoSizeScale,infoMarginScale:typeof e.infoMarginScale=="number"?Number(e.infoMarginScale.toFixed(6)):e.infoMarginScale,channelInfoSizeScale:typeof e.channelInfoSizeScale=="number"?Number(e.channelInfoSizeScale.toFixed(6)):e.channelInfoSizeScale,channelInfoMarginScale:typeof e.channelInfoMarginScale=="number"?Number(e.channelInfoMarginScale.toFixed(6)):e.channelInfoMarginScale,preset:o,resolution:b,aspectRatio:A,renderCodec:V,renderFps:ge,renderQuality:fe,renderEngine:De,ffmpegCodec:ot,customFontName:v,customChannelFontName:Qe,customInfoFontName:ht,channelInfoFontWeight:e.channelInfoFontWeight,channelInfoFontStyle:e.channelInfoFontStyle,infoFontWeight:e.infoFontWeight,infoFontStyle:e.infoFontStyle};qe.backgroundSource!=="image"&&(qe.backgroundImage=void 0),qe.showChannelInfo||(qe.channelInfoImage=void 0);try{const L=JSON.stringify(qe,null,2),te=new Blob([L],{type:"application/json"}),oe=URL.createObjectURL(te),Ne=document.createElement("a");Ne.setAttribute("href",oe),Ne.setAttribute("download",`render_settings_${R}.json`),document.body.appendChild(Ne),Ne.click(),Ne.remove(),URL.revokeObjectURL(oe)}catch(L){console.error("Export failed:",L),j.error("Failed to export settings.")}},Ze=R=>{const qe=R.target.files?.[0];if(!qe)return;const L=new FileReader;L.onload=te=>{try{const oe=JSON.parse(te.target?.result);if(oe&&typeof oe=="object"){const{resolution:Ne,aspectRatio:xe,renderCodec:he,renderFps:C,renderQuality:U,renderEngine:$,ffmpegCodec:M,preset:ne,customFontName:I,customChannelFontName:ue,customInfoFontName:re,channelInfoFontWeight:de,channelInfoFontStyle:Fe,infoFontWeight:Ke,infoFontStyle:rt,...Ve}=oe,E={...Py,...Ve};if(de&&(E.channelInfoFontWeight=de),Fe&&(E.channelInfoFontStyle=Fe),Ke&&(E.infoFontWeight=Ke),rt&&(E.infoFontStyle=rt),["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration","lyricLineHeight"].forEach(nt=>{E[nt]!==void 0&&(E[nt]=Number(E[nt]))}),E.useCustomHighlightColors!==void 0&&(E.useCustomHighlightColors=!!E.useCustomHighlightColors),E.useRealColorMedia!==void 0&&(E.useRealColorMedia=!!E.useRealColorMedia),E.showChannelInfo!==void 0&&(E.showChannelInfo=!!E.showChannelInfo),E.showIntro!==void 0&&(E.showIntro=!!E.showIntro),E.showTitle!==void 0&&(E.showTitle=!!E.showTitle),E.showArtist!==void 0&&(E.showArtist=!!E.showArtist),E.showCover!==void 0&&(E.showCover=!!E.showCover),E.showLyrics!==void 0&&(E.showLyrics=!!E.showLyrics),E.highlightEffect&&(!E.highlightColor||!E.highlightBackground)){const nt=Tc(E.highlightEffect);nt&&(E.highlightColor||(E.highlightColor=nt.color),E.highlightBackground||(E.highlightBackground=nt.bg))}const kt=(nt,Ue)=>Ue.some(vt=>vt.options.some(Ie=>Ie.value===nt));E.textEffect&&!kt(E.textEffect,By)&&(E.textEffect="shadow"),E.textAnimation&&!kt(E.textAnimation,Oy)&&(E.textAnimation="none"),E.transitionEffect&&!kt(E.transitionEffect,Hy)&&(E.transitionEffect="none"),E.visualTransitionType&&!kt(E.visualTransitionType,Gy)&&(E.visualTransitionType="none"),E.highlightEffect&&!kt(E.highlightEffect,Rf)&&(E.highlightEffect="karaoke"),E.backgroundSource&&!kt(E.backgroundSource,Vy)&&(E.backgroundSource="custom"),["current","playlist"].includes(E.renderMode)||(E.renderMode="current"),["left","center","right"].includes(E.textAlign)||(E.textAlign="center"),["top","center","bottom"].includes(E.contentPosition)||(E.contentPosition="center"),E.lyricDisplayMode&&!kt(E.lyricDisplayMode,If)&&(E.lyricDisplayMode="all"),["normal","bold"].includes(E.fontWeight)||(E.fontWeight="bold"),["normal","italic"].includes(E.fontStyle)||(E.fontStyle="normal"),["none","underline","line-through"].includes(E.textDecoration)||(E.textDecoration="none"),Yv.includes(E.textCase)||(E.textCase="none"),["auto","manual"].includes(E.introMode)||(E.introMode="auto"),E.lyricStyleTarget&&!["active-only","all"].includes(E.lyricStyleTarget)&&(E.lyricStyleTarget="active-only");const Zt=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];E.infoPosition&&!Zt.includes(E.infoPosition)&&(E.infoPosition="top-left"),E.infoStyle&&!kt(E.infoStyle,jy)&&(E.infoStyle="classic"),E.channelInfoPosition&&!Zt.includes(E.channelInfoPosition)&&(E.channelInfoPosition="bottom-right"),E.channelInfoStyle&&!kt(E.channelInfoStyle,qy)&&(E.channelInfoStyle="classic"),t(E),Ne&&T(Ne),xe&&_(xe),he&&G(he),C&&ze(Number(C)),U&&ce(U),$&&we($),M&&Ae(M),s(ne||"custom"),I&&I!==v?j.success(`Settings loaded. Note: Config used font "${I}".`):ue||re?j.success(`Settings loaded. Custom fonts referenced: ${[ue,re].filter(Boolean).join(", ")}`):j.success("Settings loaded successfully!")}}catch(oe){console.error(oe),j.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},L.readAsText(qe),R.target.value=""};return Q.useEffect(()=>{const R=qe=>{se.current&&!se.current.contains(qe.target)&&r()};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[r]),d.jsxs("div",{ref:se,onMouseDown:R=>R.stopPropagation(),className:"no-minimal-mode-toggle absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[d.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(xc,{size:18,className:"text-purple-400"}),d.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{ref:ie,type:"file",accept:".json,.txt",className:"hidden",onChange:Ze}),d.jsx("button",{onClick:()=>ie.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:d.jsx(so,{size:16})}),d.jsx("button",{onClick:Le,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:d.jsx(B1,{size:16})}),d.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),d.jsx("button",{onClick:be,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:d.jsx(hf,{size:16})}),d.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:d.jsx(Ni,{size:20})})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(mf,{size:14})," Visual Preset"]}),d.jsx(Bi,{value:o,onChange:R=>_e(R),groups:np})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(ja,{size:14})," Render Scope"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("button",{onClick:()=>B("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${e.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),d.jsx("button",{onClick:()=>B("renderMode","playlist"),disabled:!p,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${e.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(eg,{size:14})," Background Source"]}),d.jsx(Bi,{value:e.backgroundSource,onChange:R=>{R==="gradient"&&!e.backgroundGradient?(s("custom"),t({...e,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):R==="smart-gradient"&&(!e.backgroundColor||e.backgroundColor==="#000000")?(s("custom"),t({...e,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):R==="color"&&!e.backgroundColor?(s("custom"),t({...e,backgroundSource:"color",backgroundColor:"#000000"})):B("backgroundSource",R)},groups:Vy}),e.backgroundSource==="smart-gradient"&&d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.backgroundColor,onChange:R=>B("backgroundColor",R.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),d.jsx("input",{type:"text",value:e.backgroundColor,onChange:R=>B("backgroundColor",R.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),e.backgroundSource==="color"&&d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.backgroundColor,onChange:R=>B("backgroundColor",R.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:e.backgroundColor,onChange:R=>B("backgroundColor",R.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),e.backgroundSource==="gradient"&&d.jsx("input",{type:"text",value:e.backgroundGradient,onChange:R=>B("backgroundGradient",R.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),e.backgroundSource==="image"&&d.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),d.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:ye,className:"hidden"}),e.backgroundImage?d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:d.jsx("img",{src:e.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),d.jsx("button",{onClick:()=>B("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),d.jsx("button",{onClick:()=>P.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:d.jsx(xc,{size:14})})]}):d.jsxs("button",{onClick:()=>P.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(so,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(rS,{size:14})," Background Effects"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[d.jsx("button",{onClick:()=>B("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${e.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),d.jsx("button",{onClick:()=>B("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${e.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),e.backgroundBlurStrength>0&&d.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[e.backgroundBlurStrength,"px"]})]}),d.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:d.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:e.backgroundBlurStrength,onChange:R=>B("backgroundBlurStrength",parseInt(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),d.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Real Color Media Source"}),d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Disable dark dimming effect on background"})]}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e.useRealColorMedia??!1,onChange:R=>B("useRealColorMedia",R.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),d.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e.enableGradientOverlay??!1,onChange:R=>B("enableGradientOverlay",R.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ac,{size:14})," Lyric Display Mode"]}),d.jsx(Bi,{value:e.lyricDisplayMode,onChange:R=>B("lyricDisplayMode",R),groups:If})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(mf,{size:14})," Highlight Effect"]}),d.jsx(Bi,{value:e.highlightEffect||"none",onChange:R=>{B("highlightEffect",R)},groups:Rf}),e.highlightEffect&&e.highlightEffect!=="none"&&d.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[d.jsxs("button",{onClick:()=>B("useCustomHighlightColors",!e.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${e.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[d.jsx("span",{children:"Custom Colors"}),d.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${e.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:d.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${e.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),e.useCustomHighlightColors&&d.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.highlightColor||"#fb923c",onChange:R=>B("highlightColor",R.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:e.highlightColor||"#fb923c",onChange:R=>B("highlightColor",R.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.highlightBackground||"#fb923c",onChange:R=>B("highlightBackground",R.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:e.highlightBackground||"#fb923c",onChange:R=>B("highlightBackground",R.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(uS,{size:14})," Visible Elements"]}),d.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(R=>d.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[d.jsx("span",{className:"text-xs text-zinc-300",children:R.label}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e[R.key],onChange:qe=>B(R.key,qe.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},R.key))})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(ml,{size:14})," Intro Settings"]}),d.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[d.jsx("button",{onClick:()=>B("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${e.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),d.jsx("button",{onClick:()=>B("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${e.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),e.introMode==="manual"&&d.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),d.jsx("textarea",{value:e.introText,onChange:R=>B("introText",R.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(eg,{size:14})," Channel Info / Watermark"]}),d.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[d.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:e.showChannelInfo??!1,onChange:R=>B("showChannelInfo",R.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),e.showChannelInfo&&d.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),d.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:ke,className:"hidden"}),e.channelInfoImage?d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:d.jsx("img",{src:e.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),d.jsx("button",{onClick:()=>B("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),d.jsx("button",{onClick:()=>w.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:d.jsx(xc,{size:14})})]}):d.jsxs("button",{onClick:()=>w.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(so,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),d.jsx("textarea",{value:e.channelInfoText??"",onChange:R=>B("channelInfoText",R.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("button",{onClick:()=>B("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${e.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${e.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${e.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${e.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${e.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${e.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsx(Bi,{value:e.channelInfoStyle||"classic",onChange:R=>B("channelInfoStyle",R),groups:qy})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.channelInfoMarginScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Va,{size:12})}),d.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:e.channelInfoMarginScale??1,onChange:R=>B("channelInfoMarginScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.channelInfoSizeScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Va,{size:12})}),d.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:e.channelInfoSizeScale??1,onChange:R=>B("channelInfoSizeScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(rf,{value:e.channelInfoFontFamily||"sans-serif",onChange:R=>B("channelInfoFontFamily",R),customFontName:Qe||null,groups:z}),d.jsx(af,{onApply:R=>Je(R,"channelInfoFontFamily"),placeholder:"Channel Font (e.g. Oswald)"}),d.jsx("input",{ref:Be,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:Pe,className:"hidden"}),Qe?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-2 py-1.5 mt-1",children:[d.jsx("span",{className:"text-[10px] text-purple-300 font-medium truncate flex-1",children:Qe}),d.jsx("button",{onClick:()=>B("channelInfoFontFamily","ChannelFont"),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${e.channelInfoFontFamily==="ChannelFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"Use"}),d.jsx("button",{onClick:ut,className:"text-zinc-500 hover:text-red-400",children:d.jsx(Us,{size:12})})]}):d.jsxs("button",{onClick:()=>Be.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-2 py-1.5 text-zinc-500 hover:text-purple-300 transition-colors mt-1",children:[d.jsx(so,{size:10}),d.jsx("span",{className:"text-[10px]",children:"Upload Font"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>B("channelInfoFontWeight",e.channelInfoFontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.channelInfoFontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(tf,{size:14})}),d.jsx("button",{onClick:()=>B("channelInfoFontStyle",e.channelInfoFontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.channelInfoFontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(nf,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.channelInfoFontColor||"#ffffff",onChange:R=>B("channelInfoFontColor",R.target.value),className:"w-6 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("span",{className:"text-[10px] text-zinc-400 font-mono uppercase",children:e.channelInfoFontColor||"#ffffff"})]})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(ks,{size:14})," Song Info Design"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("button",{onClick:()=>B("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${e.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${e.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${e.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${e.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${e.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>B("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${e.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsx(Bi,{value:e.infoStyle||"classic",onChange:R=>B("infoStyle",R),groups:jy})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.infoMarginScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Va,{size:12})}),d.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:e.infoMarginScale??1,onChange:R=>B("infoMarginScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.infoSizeScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(ml,{size:12})}),d.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:e.infoSizeScale??1,onChange:R=>B("infoSizeScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(rf,{value:e.infoFontFamily||"sans-serif",onChange:R=>B("infoFontFamily",R),customFontName:ht||null,groups:z}),d.jsx(af,{onApply:R=>Je(R,"infoFontFamily"),placeholder:"Info Font (e.g. Roboto)"}),d.jsx("input",{ref:et,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:At,className:"hidden"}),ht?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-2 py-1.5 mt-1",children:[d.jsx("span",{className:"text-[10px] text-purple-300 font-medium truncate flex-1",children:ht}),d.jsx("button",{onClick:()=>B("infoFontFamily","InfoFont"),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${e.infoFontFamily==="InfoFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"Use"}),d.jsx("button",{onClick:Mt,className:"text-zinc-500 hover:text-red-400",children:d.jsx(Us,{size:12})})]}):d.jsxs("button",{onClick:()=>et.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-2 py-1.5 text-zinc-500 hover:text-purple-300 transition-colors mt-1",children:[d.jsx(so,{size:10}),d.jsx("span",{className:"text-[10px]",children:"Upload Font"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>B("infoFontWeight",e.infoFontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.infoFontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(tf,{size:14})}),d.jsx("button",{onClick:()=>B("infoFontStyle",e.infoFontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.infoFontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(nf,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.infoFontColor||"#ffffff",onChange:R=>B("infoFontColor",R.target.value),className:"w-6 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("span",{className:"text-[10px] text-zinc-400 font-mono uppercase",children:e.infoFontColor||"#ffffff"})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(ml,{size:14})," Typography & Style"]}),d.jsxs("div",{className:"space-y-4 pt-1",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),d.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(R=>d.jsx("button",{onClick:()=>B("textAlign",R),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${e.textAlign===R?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:R},R))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>B("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:d.jsx(C1,{size:14})}),d.jsx("button",{onClick:()=>B("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:d.jsx(Z0,{size:14})}),d.jsx("button",{onClick:()=>B("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:d.jsx(T1,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>B("fontWeight",e.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(tf,{size:14})}),d.jsx("button",{onClick:()=>B("fontStyle",e.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(nf,{size:14})}),d.jsx("button",{onClick:()=>B("textDecoration",e.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:d.jsx(jS,{size:14})}),d.jsx("button",{onClick:()=>B("textDecoration",e.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:d.jsx(PS,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>B("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${e.lyricStyleTarget==="active-only"||!e.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),d.jsx("button",{onClick:()=>B("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${e.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),d.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>B("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${e.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),d.jsx("button",{onClick:()=>B("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${e.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),d.jsx("button",{onClick:()=>B("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${e.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),d.jsx("button",{onClick:()=>B("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${e.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),d.jsx("button",{onClick:()=>B("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${e.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),d.jsx("button",{onClick:()=>B("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${e.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(rf,{value:e.fontFamily,onChange:R=>B("fontFamily",R),customFontName:v,groups:z}),d.jsx(af,{onApply:R=>Je(R,"fontFamily"),placeholder:"Lyrics Font (e.g. Pacifico)"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),d.jsx("input",{ref:ve,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[d.jsx(ml,{size:14,className:"text-purple-400 shrink-0"}),d.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),d.jsx("button",{onClick:()=>{B("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${e.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:e.fontFamily==="CustomFont"?"Active":"Use"}),d.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:d.jsx(Us,{size:14})})]}):d.jsxs("button",{onClick:()=>ve.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(so,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.fontSizeScale*100).toFixed(0),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(ml,{size:12})}),d.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:e.fontSizeScale,onChange:R=>B("fontSizeScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),d.jsx("span",{className:"text-zinc-300",children:d.jsx(ml,{size:16})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Current Line Height"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.lyricLineHeight||1.2).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Z0,{size:12})}),d.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:e.lyricLineHeight||1.2,onChange:R=>B("lyricLineHeight",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),e.fontFamily!=="sans-serif"&&e.fontFamily!=="CustomFont"&&d.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:e.fontColor,onChange:R=>B("fontColor",R.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:e.fontColor,onChange:R=>B("fontColor",R.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),d.jsx(Bi,{value:e.textEffect,onChange:R=>B("textEffect",R),groups:By})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),d.jsx(Bi,{value:e.textAnimation,onChange:R=>B("textAnimation",R),groups:Oy})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),d.jsx(Bi,{value:e.transitionEffect,onChange:R=>B("transitionEffect",R),groups:Hy})]}),d.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),e.visualTransitionDuration&&d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[e.visualTransitionDuration.toFixed(1),"s"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(Bi,{value:e.visualTransitionType||"none",onChange:R=>B("visualTransitionType",R),groups:Gy})}),e.visualTransitionType&&e.visualTransitionType!=="none"&&d.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:d.jsx("input",{type:"range",min:"0.1",max:"5.0",step:"0.1",value:e.visualTransitionDuration||1,onChange:R=>B("visualTransitionDuration",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),d.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(ja,{size:14})," Output Settings"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),d.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),d.jsx(Bi,{value:String(ge),onChange:R=>ze(parseInt(R)),groups:zM})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),d.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(R=>d.jsx("button",{onClick:()=>_(R),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===R?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:R},R))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Engine"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>we("mediarecorder"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${De==="mediarecorder"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses browser's MediaRecorder API. Renders in realtime while playing audio.",children:"Realtime"}),d.jsx("button",{onClick:()=>we("webcodecs"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${De==="webcodecs"?"bg-blue-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses WebCodecs API. Hardware accelerated rendering. Fastest option.",children:"WebCodecs "}),d.jsx("button",{onClick:()=>we("ffmpeg"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${De==="ffmpeg"?"bg-orange-500 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses FFmpeg WASM. Frame-by-frame rendering with professional codecs.",children:"FFmpeg "})]}),d.jsx("p",{className:"text-[9px] text-zinc-600 ml-1 leading-tight",children:De==="mediarecorder"?"Realtime recording. Fast but quality depends on browser.":De==="webcodecs"?"Hardware accelerated (GPU). Very fast export with simple MP4.":"Software rendering. High compatiblity but slower."})]}),De==="mediarecorder"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),d.jsx(Bi,{value:V,onChange:R=>G(R),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...J]}]})]}),De==="ffmpeg"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FFmpeg Codec"}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{label:"H.264",value:"h264",desc:"Best Compatibility"},{label:"H.265",value:"h265",desc:"Higher Quality"}].map(R=>d.jsxs("button",{onClick:()=>Ae(R.value),className:`py-2 px-2 rounded-md text-[10px] font-medium transition-all border text-left ${ot===R.value?"bg-orange-500 border-orange-400 text-white":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"}`,title:R.desc,children:[d.jsx("div",{className:"font-bold",children:R.label}),d.jsx("div",{className:"text-[8px] opacity-75",children:R.desc})]},R.value))})]}),De==="webcodecs"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),d.jsx("div",{className:"p-2 bg-zinc-800/50 rounded border border-white/5 text-[10px] text-zinc-400",children:"H.264 / AAC (Hardware Accelerated)"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>ce("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${fe==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),d.jsx("button",{onClick:()=>ce("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${fe==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),d.jsx("button",{onClick:()=>ce("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${fe==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),d.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[d.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[d.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",d.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),d.jsxs("button",{onClick:()=>Oe(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[d.jsx(Mc,{size:14})," View Keyboard Shortcuts"]})]})]}),pe&&d.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>Oe(!1),children:d.jsxs("div",{className:"no-minimal-mode-toggle bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:R=>R.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[d.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[d.jsx(Mc,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),d.jsx("button",{onClick:()=>Oe(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:d.jsx(Ni,{size:18})})]}),d.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),d.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[d.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),d.jsxs("div",{className:"flex gap-1 items-center",children:[d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),d.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),d.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),d.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:d.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",d.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),d.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[d.jsxs("button",{onClick:g,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[d.jsx(ja,{size:16})," Start Render"]}),d.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},ip=(e,t,o,s,r,u,p,g,v,m,x,b,T,A,_,V=!0,G=!0)=>{const J=w=>{const P=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return P?{r:parseInt(P[1],16),g:parseInt(P[2],16),b:parseInt(P[3],16)}:{r:255,g:255,b:255}},fe=w=>{let P=0,ie=0;if(w instanceof ImageBitmap?(P=w.width,ie=w.height):w instanceof HTMLVideoElement?(P=w.videoWidth,ie=w.videoHeight):(P=w.width,ie=w.height),P&&ie){const pe=Math.max(t/P,o/ie),Oe=t/2-P/2*pe,B=o/2-ie/2*pe;e.drawImage(w,Oe,B,P*pe,ie*pe)}},ce=(w,P,ie)=>{if(P.includes(`
`))return P.split(`
`).flatMap(ke=>ce(w,ke,ie));const pe=P.split(" ");let Oe=[],B=pe[0]||"";for(let ke=1;ke<pe.length;ke++){const ye=pe[ke],be=B+" "+ye;w.measureText(be).width<ie?B=be:(Oe.push(B),B=ye)}Oe.push(B);const _e=[];for(const ke of Oe)if(w.measureText(ke).width<=ie)_e.push(ke);else{let ye="";for(const be of ke)w.measureText(ye+be).width<=ie?ye+=be:(ye&&_e.push(ye),ye=be);ye&&_e.push(ye)}return _e},ge=(w,P,ie,pe,Oe,B)=>{if(Oe==="vhs"&&w instanceof CanvasRenderingContext2D)w.save(),w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(P,ie-2,pe),w.fillStyle="#00ff00",w.fillText(P,ie,pe),w.fillStyle="#0000ff",w.fillText(P,ie+2,pe),w.restore();else if(Oe==="3d"){const _e=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let ke=1;ke<=4;ke++)w.fillText(P,ie+ke,pe+ke);w.fillStyle=_e,w.fillText(P,ie,pe)}else if(Oe==="neon"){const _e=w.fillStyle;w.shadowColor=_e,w.shadowBlur=20,w.fillText(P,ie,pe),w.shadowBlur=40,w.fillText(P,ie,pe)}else if(Oe==="outline")w.strokeText(P,ie,pe),w.fillText(P,ie,pe);else if(Oe==="gradient"){const _e=w.createLinearGradient(ie,pe-20,ie,pe+20);_e.addColorStop(0,w.fillStyle),_e.addColorStop(1,"#ffffff"),w.fillStyle=_e,w.fillText(P,ie,pe)}else if(Oe==="fire")w.save(),w.shadowBlur=5,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(P,ie,pe),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(P,ie+1,pe-1),w.restore();else if(Oe==="emboss")w.fillStyle="rgba(255,255,255,0.7)",w.fillText(P,ie-1,pe-1),w.fillStyle="rgba(0,0,0,0.7)",w.fillText(P,ie+1,pe+1),w.fillStyle="rgba(128,128,128,0.5)",w.fillText(P,ie,pe);else if(Oe==="mirror")w.fillText(P,ie,pe),w.save(),w.translate(ie,pe),w.scale(1,-1),w.translate(-ie,-pe),w.globalAlpha*=.2,w.fillText(P,ie,pe-40),w.restore();else if(Oe==="neon-multi")w.fillStyle,w.shadowBlur=10,w.shadowColor="#fff",w.fillText(P,ie,pe),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(P,ie,pe),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(P,ie,pe);else if(Oe==="gold"){const _e=w.createLinearGradient(ie,pe-20,ie,pe+20);_e.addColorStop(0,"#d4af37"),_e.addColorStop(1,"#C5A028"),w.fillStyle=_e,w.fillText(P,ie,pe)}else if(Oe==="chrome"){const _e=w.createLinearGradient(ie,pe-20,ie,pe+20);_e.addColorStop(0,"#ebebeb"),_e.addColorStop(.5,"#616161"),_e.addColorStop(.51,"#ebebeb"),_e.addColorStop(1,"#ebebeb"),w.fillStyle=_e,w.fillText(P,ie,pe)}else if(Oe==="frozen")w.shadowColor="#03A9F4",w.shadowBlur=20,w.fillStyle="#ffffff",w.fillText(P,ie,pe);else if(Oe==="rainbow"){const _e=w.createLinearGradient(ie-100,pe,ie+100,pe);_e.addColorStop(0,"violet"),_e.addColorStop(.16,"indigo"),_e.addColorStop(.32,"blue"),_e.addColorStop(.48,"green"),_e.addColorStop(.64,"yellow"),_e.addColorStop(.8,"orange"),_e.addColorStop(1,"red"),w.fillStyle=_e,w.fillText(P,ie,pe)}else if(Oe==="retro")w.fillStyle="#ff00ff",w.shadowColor="#00ffff",w.shadowBlur=0,w.shadowOffsetX=4,w.shadowOffsetY=4,w.fillText(P,ie,pe);else if(Oe==="cyberpunk")w.save(),w.fillStyle="#05d9e8",w.fillText(P,ie-1,pe-1),w.restore(),w.save(),w.fillStyle="#000000",w.fillText(P,ie+2,pe+2),w.restore(),w.save(),w.fillStyle="#fcee0a",w.fillText(P,ie,pe),w.restore();else if(Oe==="glitch-text"){const _e=(Math.random()-.5)*5,ke=(Math.random()-.5)*2;w.save(),w.fillStyle="red",w.fillText(P,ie+_e,pe+ke),w.restore(),w.save(),w.fillStyle="cyan",w.fillText(P,ie-_e,pe-ke),w.restore(),w.fillStyle="#ffffff",w.fillText(P,ie,pe)}else Oe==="hologram"?(w.fillStyle="rgba(0, 255, 255, 0.7)",w.shadowColor="rgba(0,255,255,0.5)",w.shadowBlur=10,w.fillText(P,ie,pe)):(Oe==="comic"&&(w.lineWidth=3,w.strokeStyle="#000000",w.strokeText(P,ie,pe),w.fillStyle="#ffcc00"),w.fillText(P,ie,pe));if(B&&B!=="none"){const ke=w.measureText(P).width;let ye=ie;if(w.textAlign==="center"?ye=ie-ke/2:w.textAlign==="right"&&(ye=ie-ke),w.save(),w.beginPath(),w.lineWidth=Math.max(2,4*le),w.strokeStyle=w.fillStyle,B.includes("line-through")&&(w.moveTo(ye,pe),w.lineTo(ye+ke,pe)),B.includes("underline")){const be=w.font.match(/(\d+(\.\d+)?)px/),Le=be?parseFloat(be[1]):50,Ze=pe+Le*.4;w.moveTo(ye,Ze),w.lineTo(ye+ke,Ze)}w.stroke(),w.restore()}},ze=(w,P,ie,pe,Oe,B,_e,ke,ye,be,Le,Ze,R)=>{const qe=ke?.textCase||"none",L=(re,de)=>{if(!re)return re;if(qe==="upper")return re.toUpperCase();if(qe==="lower")return re.toLowerCase();if(qe==="title")return re.replace(/\w\S*/g,Fe=>Fe.charAt(0).toUpperCase()+Fe.substr(1).toLowerCase());if(qe==="sentence"){const Fe=re.toLowerCase();return de?Fe.charAt(0).toUpperCase()+Fe.slice(1):Fe}return qe==="invert"?re.replace(/\w\S*/g,Fe=>Fe.charAt(0).toLowerCase()+Fe.slice(1).toUpperCase()):re};let te=P.words||[];if(te.length===0){const re=P.text.split(`
`);te=[],re.forEach((de,Fe)=>{const Ke=de.split(" ").map(rt=>({text:rt,startTime:P.time,endTime:P.endTime||P.time+3}));te.push(...Ke),Fe<re.length-1&&te.push({text:`
`,startTime:P.time,endTime:P.endTime})})}const oe=te.filter(re=>re.text===`
`||re.text.trim().length>0).map((re,de)=>({...re,text:re.text===`
`?`
`:L(re.text,de===0).trim()}));(ke?.highlightEffect?.includes("cyberpunk")||ke?.textEffect==="cyberpunk")&&(ye="'Orbitron', sans-serif"),w.font=`${Ze} ${Le} ${be}px ${ye}`;const Ne=[];let xe=[],he=0,C=.3;["default","custom"].includes(m)?C=.25:m==="monospace"&&(C=.5);const U=w.measureText("M").width*C;oe.forEach((re,de)=>{if(re.text===`
`){xe.length>0&&Ne.push(xe),xe=[],he=0;return}const Fe=w.measureText(re.text).width;let rt=!re.text.endsWith(" ");const Ve=/[-]$/,E=/^[-]/;Ve.test(re.text.trim())&&(rt=!1);const at=oe[de+1];at&&(E.test(at.text.trim())||at.text===`
`)&&(rt=!1);const kt=rt?U:0;he+Fe>Oe&&xe.length>0&&(Ne.push(xe),xe=[],he=0),xe.push(re),he+=Fe+kt}),xe.length>0&&Ne.push(xe);const $=pe-(Ne.length-1)*B/2;let M=ke.highlightColor||"#fb923c",ne=ke.highlightBackground||"#ffffff";const I=ke.highlightEffect||"none";ke.useCustomHighlightColors||(I.includes("blue")||I.includes("cyan")?(M="#3b82f6",ne="#3b82f6"):I.includes("purple")?(M="#a855f7",ne="#a855f7"):I.includes("green")?(M="#22c55e",ne="#22c55e"):I.includes("pink")?(M="#ec4899",ne="#ec4899"):I.includes("neon")?(M="#ffffff",ne="#ffffff"):I.includes("gold")?(M="#FFD700",ne="#B8860B"):I.includes("chrome")?(M="#E0E0E0",ne="#757575"):I.includes("fire")?(M="#FF4500",ne="#FF0000"):I.includes("glass")?(M="#ffffff",ne="rgba(255,255,255,0.1)"):I==="karaoke"&&(M="#fb923c",ne="#fb923c"));let ue=ke.fontColor||"#ffffff";ke.highlightEffect==="karaoke-smooth-white"&&(ue="#ffffff"),Ne.forEach((re,de)=>{const Fe=$+de*B;let Ke=0;re.forEach((Ve,E)=>{if(Ke+=w.measureText(Ve.text).width,E<re.length-1){let kt=!Ve.text.endsWith(" ");const Zt=/[-]$/,nt=/^[-]/;Zt.test(Ve.text.trim())&&(kt=!1);const Ue=re[E+1];Ue&&nt.test(Ue.text.trim())&&(kt=!1),Ke+=kt?U:0}});let rt=ie;w.textAlign==="center"?rt=ie-Ke/2:w.textAlign==="right"&&(rt=ie-Ke),w.save(),w.textAlign="left",w.textBaseline="middle",re.forEach((Ve,E)=>{const at=w.measureText(Ve.text).width,kt=_e>=Ve.startTime,Zt=_e>=Ve.startTime&&_e<Ve.endTime;let nt=ue;const Ue=I.includes("fill")||I.includes("smooth"),vt=Ue?kt:Zt;if(vt&&I!=="none")if(I==="karaoke-smooth"||I==="karaoke-smooth-white")if(Zt){const Ye=Ve.endTime-Ve.startTime,xt=_e-Ve.startTime,Ft=Math.max(0,Math.min(1,xt/Ye)),Qn=w.createLinearGradient(rt,0,rt+at,0);Qn.addColorStop(Ft,M),Qn.addColorStop(Math.min(1,Ft+.001),ue),nt=Qn}else nt=M;else nt=M;if(w.save(),w.fillStyle=nt,(Zt||Ue&&kt)&&(I.includes("pill")||I.includes("box")||I.includes("rounded")||I.includes("fill")||I.includes("glass"))&&vt){const Ye=I.includes("pill")?be*.4:be*.15;w.fillStyle=ne;let xt=4*R;I.includes("pill")?xt=999:I.includes("rounded")||I.includes("glass")?xt=8*R:I.includes("box")&&(xt=0),I.includes("glass")&&(w.fillStyle="rgba(255,255,255,0.1)",w.shadowColor="rgba(255,255,255,0.2)",w.shadowBlur=10),w.beginPath(),w.roundRect?w.roundRect(rt-Ye,Fe-B/2,at+Ye*2,B,xt):w.rect(rt-Ye,Fe-B/2,at+Ye*2,B),w.fill(),I.includes("glass")&&(w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.stroke()),I.includes("fill")||I.includes("pill")||I.includes("box")||I.includes("rounded")?(w.fillStyle="#000000",nt="#000000"):w.fillStyle=M}if(vt){if(I.includes("underline")){const Ye=Math.max(2,be*.08),xt=Fe+be*.6;w.fillStyle=M,w.fillRect(rt,xt,at,Ye),w.fillStyle=nt}if((I.includes("glow")||I.includes("neon"))&&(I.includes("neon")?(w.fillStyle="#ffffff",w.shadowColor=M,w.shadowBlur=20):(w.shadowColor=M,w.shadowBlur=10)),I.includes("outline")&&(w.strokeStyle=M,w.lineWidth=2*R,w.strokeText(Ve.text,rt,Fe),w.fillStyle="transparent",I==="karaoke-outline"&&(nt="transparent",w.fillStyle="transparent")),I.includes("shadow")&&(w.shadowColor="#000000",w.shadowOffsetX=3*R,w.shadowOffsetY=3*R,w.shadowBlur=0),I.includes("gradient")){const Ye=w.createLinearGradient(rt,Fe-B/2,rt+at,Fe+B/2);Ye.addColorStop(0,M),Ye.addColorStop(1,ne),w.fillStyle=Ye,nt=Ye}}let Ie=Fe,je=rt,St=0,Et=1,ft=1,Yt=1,En=0;if(vt){const Ye=_e-Ve.startTime;if(I.includes("bounce")||I==="karaoke-bounce")Ie-=10*R;else if(I.includes("wave"))Ie+=Math.sin(_e*5+E)*8*R;else if(I.includes("pulse")){const Ft=1+Math.sin(_e*6)*.1;Et=Ft,ft=Ft}else if(I.includes("shake"))je+=(Math.random()-.5)*6*R,Ie+=(Math.random()-.5)*6*R;else if(I.includes("wobble"))St=Math.sin(_e*6)*.1;else if(I.includes("rotate")&&!I.includes("in"))St=Math.sin(_e*3)*.1;else if(I.includes("spin"))St=_e*3%(Math.PI*2);else if(I.includes("jello"))Et=1+Math.sin(_e*8)*.15,ft=1-Math.sin(_e*8)*.15;else if(I.includes("heartbeat")){const Ft=_e*2%1;(Ft<.15||Ft>.3&&Ft<.45)&&(Et=1.15,ft=1.15)}else if(I.includes("flash"))Yt=.5+Math.sin(_e*10)*.5;else if(I.includes("tada")){const Ft=_e*2%1;Ft<.1?(St=-.05,Et=.9):Ft<.2&&(St=.05,Et=1.1)}else I.includes("swing")?St=Math.sin(_e*4)*.15:I.includes("glitch")&&Math.sin(_e*15)>.8&&(je+=(Math.random()-.5)*10,Ie+=(Math.random()-.5)*10);const xt=.3;if(Ye<xt){const Ft=Ye/xt,Pt=(mn=>1-Math.pow(1-mn,3))(Ft);if(I.includes("fade"))Yt=Ft;else if(I.includes("slide"))Ie+=(1-Pt)*30*R,Yt=Pt;else if(I.includes("drop"))Ie-=(1-Pt)*50*R,Yt=Pt;else if(I.includes("zoom")||I.includes("scale")){const mn=.5+.5*Pt;Et*=mn,ft*=mn}else if(I.includes("elastic")){const mn=Ft===0?0:Ft===1?1:Math.pow(2,-10*Ft)*Math.sin((Ft*10-.75)*(2*Math.PI)/3)+1;Et*=mn,ft*=mn}else if(I.includes("flip"))ft*=Pt;else if(I.includes("rotate-in"))St+=(1-Pt)*-1,Yt=Pt;else if(I.includes("roll"))je-=(1-Pt)*50*R,St-=(1-Pt)*Math.PI,Yt=Pt;else if(I.includes("lightspeed"))je+=(1-Pt)*100*R,Yt=Pt;else if(I.includes("blur"))En=(1-Pt)*10,Yt=Pt;else if(I.includes("shatter")){const mn=1+(1-Pt)*2;Et*=mn,ft*=mn,En=(1-Pt)*10,Yt=Pt}else I.includes("spiral")&&(Et*=Pt,ft*=Pt,St+=(1-Pt)*Math.PI*2)}else I.includes("scale")&&(Et*=1.3,ft*=1.3)}if(w.save(),Yt<1&&(w.globalAlpha*=Yt),En>0&&(w.filter=`blur(${En}px)`),St!==0||Et!==1||ft!==1){const Ye=je+at/2,xt=Ie;w.translate(Ye,xt),w.rotate(St),w.scale(Et,ft),w.translate(-Ye,-xt)}if(vt){if(I==="karaoke-smooth-plus"){const Ye=ke.textEffect||"none";if(Zt){const xt=Ve.endTime-Ve.startTime,Ft=_e-Ve.startTime,Qn=Math.max(0,Math.min(1,Ft/xt)),Pt=je+at*Qn,mn=ke?.textDecoration||"none",vl=Wi=>{if(mn!=="none"){w.lineWidth=Math.max(2,3*R),w.strokeStyle=Wi,w.beginPath();const Po=Ie+be*.45;mn.includes("underline")&&(w.moveTo(je,Po),w.lineTo(je+at,Po)),mn.includes("line-through")&&(w.moveTo(je,Ie),w.lineTo(je+at,Ie)),w.stroke()}};w.save(),w.beginPath(),w.rect(je-50,Ie-B,Pt-(je-50),B*2),w.clip(),w.fillStyle=M,ge(w,Ve.text,je,Ie,Ye),vl(M),w.restore(),w.save(),w.beginPath(),w.rect(Pt,Ie-B,je+at+50-Pt,B*2),w.clip(),w.fillStyle=ue,w.fillText(Ve.text,je,Ie),vl(ue),w.restore(),nt="rgba(0,0,0,0)"}else w.fillStyle=M,ge(w,Ve.text,je,Ie,Ye),nt=M}else if(I.includes("gradient")||I.includes("chrome")||I.includes("gold")){const Ye=w.createLinearGradient(je,Ie-B/2,je,Ie+B/2);I.includes("gold")?(Ye.addColorStop(0,"#d4af37"),Ye.addColorStop(1,"#C5A028")):I.includes("chrome")?(Ye.addColorStop(0,"#ebebeb"),Ye.addColorStop(.5,"#616161"),Ye.addColorStop(.51,"#ebebeb"),Ye.addColorStop(1,"#ebebeb")):(Ye.addColorStop(0,M),Ye.addColorStop(1,ne)),w.fillStyle=Ye}if(I.includes("shadow")&&(w.save(),w.fillStyle="#000000",w.fillText(Ve.text,je+2*R,Ie+2*R),w.restore()),I.includes("3d")){const Ye=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let xt=1;xt<=3;xt++)w.fillText(Ve.text,je+xt*R,Ie+xt*R);w.fillStyle=Ye}if(I.includes("neon-multi"))w.shadowBlur=10,w.shadowColor="#fff",w.fillText(Ve.text,je,Ie),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(Ve.text,je,Ie),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(Ve.text,je,Ie);else if(I.includes("cyberpunk"))w.save(),w.fillStyle="#05d9e8",w.fillText(Ve.text,je-1,Ie-1),w.restore(),w.save(),w.fillStyle="#000000",w.fillText(Ve.text,je+2,Ie+2),w.restore(),w.fillStyle="#fcee0a",w.fillText(Ve.text,je,Ie);else if(I.includes("glitch-text")){const Ye=(Math.random()-.5)*5,xt=(Math.random()-.5)*2;w.save(),w.fillStyle="red",w.fillText(Ve.text,je+Ye,Ie+xt),w.restore(),w.save(),w.fillStyle="cyan",w.fillText(Ve.text,je-Ye,Ie-xt),w.restore(),w.fillStyle="#ffffff",w.fillText(Ve.text,je,Ie)}else if(I.includes("retro")||I.includes("vhs")){const Ye=Math.sin(_e*5)*2*R,xt=Math.random()>.95?(Math.random()-.5)*5:0;w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(Ve.text,je-3*R+Ye,Ie+xt),w.fillStyle="#00ff00",w.fillText(Ve.text,je+xt,Ie-Ye),w.fillStyle="#0000ff",w.fillText(Ve.text,je+3*R-Ye,Ie+xt)}else if(I.includes("fire")){const Ye=Math.abs(Math.sin(_e*15))*5,xt=Math.sin(_e*20)*1*R;w.shadowBlur=5+Ye,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(Ve.text,je,Ie+xt),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(Ve.text,je+Math.sin(_e*25)*1*R,Ie-1*R+xt)}else if(I.includes("typewriter")){const Ye=_e-Ve.startTime,xt=Ve.endTime-Ve.startTime,Ft=Math.min(1,Math.max(0,Ye/xt)),Qn=Math.floor(Ve.text.length*Ft),Pt=Ve.text.substring(0,Qn);I.includes("outline")?(w.strokeStyle=M,w.strokeText(Pt,je,Ie)):w.fillText(Pt,je,Ie)}else!I.includes("neon-multi")&&!I.includes("retro")&&!I.includes("vhs")&&!I.includes("fire")&&(I.includes("outline")?(w.strokeStyle=M,w.lineWidth=2*R,w.strokeText(Ve.text,je,Ie)):w.fillText(Ve.text,je,Ie))}else w.fillText(Ve.text,je,Ie);const ai=ke?.textDecoration||"none";if(ai!=="none"){if(w.lineWidth=Math.max(2,3*R),w.strokeStyle=nt,w.beginPath(),ai.includes("underline")&&!I.includes("underline")){const Ye=Ie+be*.45;w.moveTo(je,Ye),w.lineTo(je+at,Ye)}ai.includes("line-through")&&(w.moveTo(je,Ie),w.lineTo(je+at,Ie)),w.stroke()}w.restore(),w.restore();let Mi=!Ve.text.endsWith(" ");const Fo=/[-]$/,yl=/^[-]/;Fo.test(Ve.text.trim())&&(Mi=!1);const gi=re[E+1];gi&&yl.test(gi.text.trim())&&(Mi=!1),rt+=at+(Mi?U:0)}),w.restore()})},De=(w,P,ie,pe,Oe,B,_e,ke)=>{const ye=ce(w,P,Oe),be=pe-(ye.length-1)*B/2;ye.forEach((Le,Ze)=>{const R=be+Ze*B;if(_e==="glass"){const qe=w.measureText(Le).width;w.save(),w.fillStyle="rgba(255, 255, 255, 0.1)",w.beginPath(),w.roundRect?w.roundRect(ie-(w.textAlign==="center"?qe/2:w.textAlign==="right"?qe:0)-10,R-B/2,qe+20,B,8):w.rect(ie-(w.textAlign==="center"?qe/2:w.textAlign==="right"?qe:0)-10,R-B/2,qe+20,B),w.fill(),w.strokeStyle="rgba(255, 255, 255, 0.2)",w.stroke(),w.restore()}ge(w,Le,ie,R,_e,ke)})},we='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',ot='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',Ae='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Qe='"Metal Mania", cursive',Pe='"Fredoka One", cursive',ut='"Shadows Into Light", cursive',ht='"Dancing Script", cursive',At='"Orbitron", sans-serif',Mt='"UnifrakturMaguntia", cursive';let j=we;m==="classic"?j=ot:m==="monospace"?j=Ae:m==="metal"?j=Qe:m==="kids"?j=Pe:m==="sad"?j=ut:m==="romantic"?j=ht:m==="tech"?j=At:m==="gothic"?j=Mt:m==="custom"&&(j=_?.fontFamily||we),x&&(j="CustomFont, sans-serif"),_&&_.fontFamily!=="sans-serif"&&(j=_.fontFamily);const Ee=t<=o,le=Math.min(t,o)/1080;if(_&&(_.backgroundSource==="color"||_.backgroundSource==="smart-gradient")?e.fillStyle=_.backgroundColor||"#000000":e.fillStyle="#000000",e.fillRect(0,0,t,o),_?.backgroundSource==="gradient"&&_.backgroundGradient)e.fillStyle=_.backgroundGradient,e.fillRect(0,0,t,o);else if(_?.backgroundSource==="smart-gradient"){const w=_.backgroundColor||"#312e81",P=J(w),ie=e.createLinearGradient(0,0,t,o);ie.addColorStop(0,w),ie.addColorStop(.5,`rgb(${Math.floor(P.r*.6)}, ${Math.floor(P.g*.6)}, ${Math.floor(P.b*.6)})`),ie.addColorStop(1,"#000000"),e.fillStyle=ie,e.fillRect(0,0,t,o)}else if(_?.backgroundSource==="image"&&_.backgroundImage){const w=g.get("__custom_bg__");w&&fe(w)}if(_&&_.backgroundBlurStrength>0?e.filter=`blur(${_.backgroundBlurStrength}px)`:T&&(e.filter="blur(12px)"),!_||_.backgroundSource==="timeline"||_.backgroundSource==="custom"){const w=_?_.backgroundSource==="timeline":!0;let P=!1;if(w){const ie=_?.visualTransitionType||"none",pe=_?.visualTransitionDuration||1,Oe=p.filter(B=>B.type==="audio"?!1:s>=B.startTime&&s<B.endTime||ie==="crossfade"&&s>=B.endTime&&s<B.endTime+pe);Oe.sort((B,_e)=>{const ke=(B.layer||0)-(_e.layer||0);return ke!==0?ke:B.startTime-_e.startTime}),Oe.length>0&&(Oe.forEach(B=>{const _e=B.layer||0;if(_&&_.layerVisibility?.visual?.[_e]===!1)return;const ke=B.type==="video"?v.get(B.id):null,ye=B.type!=="video"?g.get(B.id):null;let be=1;if(ie!=="none"){if(s<B.startTime+pe){const Le=(s-B.startTime)/pe;be=Math.max(0,Math.min(1,Le))}if(s>=B.endTime){let Le=!1;if(ie==="crossfade"&&(Le=p.some(Ze=>Ze.id!==B.id&&(Ze.layer||0)===(B.layer||0)&&Ze.startTime>=B.endTime-.1&&Ze.startTime<B.endTime+.2)),!Le){const R=1-(s-B.endTime)/pe;be=Math.min(be,Math.max(0,Math.min(1,R)))}}else if(ie==="fade-to-black"&&s>B.endTime-pe){const Le=(B.endTime-s)/pe;be=Math.min(be,Math.max(0,Math.min(1,Le)))}}be>0&&(e.save(),e.globalAlpha=be,ke?fe(ke):ye&&fe(ye),e.restore())}),P=!0)}if(!P&&u.coverUrl&&p.length===0){const ie=u.backgroundType==="video"?v.get("background"):null,pe=g.get("cover");ie?fe(ie):pe&&fe(pe)}}if((_&&_.backgroundBlurStrength>0||T)&&(e.filter="none"),!["just_video","none"].includes(m)&&!_?.useRealColorMedia&&(e.fillStyle=_&&(_.backgroundSource==="color"||_.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",e.fillRect(0,0,t,o)),_?.enableGradientOverlay){const w=e.createLinearGradient(0,o,0,0);w.addColorStop(0,"rgba(0, 0, 0, 0.95)"),w.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),w.addColorStop(.7,"rgba(0, 0, 0, 0)"),e.fillStyle=w,e.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const bt=r.findIndex((w,P)=>{if(w.endTime!==void 0)return s>=w.time&&s<w.endTime;const ie=r[P+1];return s>=w.time&&(!ie||s<ie.time)});let Je=bt;if(Je===-1&&r.length>0)if(s<r[0].time)Je=0;else{const w=r.findIndex(P=>P.time>s);Je=w!==-1?w:r.length-1}const z=_?.introMode==="manual"&&_.introText?_.introText:`${u.title}
${u.artist}`;let se=bt===-1&&s<5&&(_?.showIntro??!0)&&(_?.introMode!=="manual"||G)&&(r.length===0||s<r[0].time),ve=(Ee?50:60)*le,Be=(Ee?25:30)*le,et=(Ee?80:100)*le;if(m==="large"?(ve=(Ee?90:120)*le,et=(Ee?110:140)*le):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(ve=(Ee?80:110)*le,et=(Ee?110:140)*le):["sad","romantic","gothic"].includes(m)?(ve=(Ee?60:75)*le,et=(Ee?90:120)*le):["slideshow","subtitle"].includes(m)&&(ve=(Ee?30:40)*le),ve*=b,Be*=b,et*=b,(_?.showLyrics??!0)&&(bt!==-1||se||_?.lyricDisplayMode==="all"&&r.length>0)){let w=o/2;_?.contentPosition==="top"?w=o*.15:_?.contentPosition==="bottom"&&(w=o*.9);let P=0;const ie=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(ie||m==="slideshow"||m==="subtitle"){const ke=se?{text:z}:r[bt]||r[Je];if(ke){e.font=`900 ${ve}px ${j}`;const ye=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?ke.text.toUpperCase():ke.text,be=ce(e,ye,t*.9);be.length>1&&(P=(be.length-1)*(ve*1.2)/2)}}let pe=ie?-1:-2,Oe=ie?1:2;_?.lyricDisplayMode==="active-only"?(pe=0,Oe=0):_?.lyricDisplayMode==="next-only"?(pe=0,Oe=1):_?.lyricDisplayMode==="previous-next"?(pe=-1,Oe=1):_?.lyricDisplayMode==="all"&&(pe=-r.length,Oe=r.length);const B=new Map,_e=new Map;{const ke=Math.max((Ee?30:40)*le,et-ve);for(let ye=pe;ye<=Oe;ye++){let be=0,Le=!1;if(se&&ye===0){const Ze=ve*1.2,R=Be*1.2,L=z.split(`
`).length>1;be=Ze+(L?R:0),Le=!0}else{const Ze=Je+ye;if(Ze>=0&&Ze<r.length){const R=r[Ze];Le=Ze===bt;const qe=Le?ve:Be;let L=Le?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",te=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((_?.lyricStyleTarget||"active-only")==="all"||Le?(_?.fontWeight&&(L=_.fontWeight),_?.fontStyle&&(te=_.fontStyle)):(L="400",te="normal")),e.font=`${te} ${L} ${qe}px ${j}`;let oe=R.text,Ne=_?.textCase||"none";Ne==="none"&&Le&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Ne="upper"),Ne==="upper"?oe=oe.toUpperCase():Ne==="lower"?oe=oe.toLowerCase():Ne==="title"?oe=oe.replace(/\w\S*/g,he=>he.charAt(0).toUpperCase()+he.substr(1).toLowerCase()):Ne==="sentence"?oe=oe.charAt(0).toUpperCase()+oe.slice(1).toLowerCase():Ne==="invert"&&(oe=oe.replace(/\w\S*/g,he=>he.charAt(0).toLowerCase()+he.slice(1).toUpperCase())),be=ce(e,oe,t*.9).length*(qe*1.2)}}_e.set(ye,be)}B.set(0,w);for(let ye=1;ye<=Oe;ye++){const be=B.get(ye-1)??w,Le=_e.get(ye-1)??0,Ze=_e.get(ye)??0;B.set(ye,be+Le/2+ke+Ze/2)}for(let ye=-1;ye>=pe;ye--){const be=B.get(ye+1)??w,Le=_e.get(ye+1)??0,Ze=_e.get(ye)??0;B.set(ye,be-Le/2-ke-Ze/2)}}for(let ke=pe;ke<=Oe;ke++){let ye=null,be=!1;if(se)ke===0&&(ye={time:0,text:z},be=!0);else{const Le=Je+ke;Le>=0&&Le<r.length&&(ye=r[Le],be=Le===bt)}if(ye){_?.lyricDisplayMode,e.textAlign=_?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),e.textBaseline="middle";const Le=_?.fontColor||"#ffffff";let Ze=Le;if(!be)if(_?.highlightEffect==="karaoke-smooth-white")Ze="#ffffff";else{const Ue=J(Le);Ze=`rgba(${Ue.r}, ${Ue.g}, ${Ue.b}, 0.5)`}let R=be?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",qe=["classic","romantic"].includes(m)?"italic":"normal",L="none";(m==="custom"||m==="default")&&((_?.lyricStyleTarget||"active-only")==="all"||be?(_?.fontWeight&&(R=_.fontWeight),_?.fontStyle&&(qe=_.fontStyle),_?.textDecoration&&(L=_.textDecoration)):(R="400",qe="normal",L="none")),e.font=`${qe} ${R} ${be?ve:Be}px ${j}`,e.fillStyle=Ze;const te=_?.transitionEffect||"none";let oe=1,Ne=0,xe=0,he=1,C=1,U=0,$=0;if(be&&te!=="none"){const Ue=s-ye.time,vt=ye.endTime?ye.endTime-s:.5,Ie=.5,je=Ue<Ie?Ue/Ie:ye.endTime&&vt<Ie?vt/Ie:1;if(je<1){oe=Math.min(1,je*2);const St=ft=>1+2.70158*Math.pow(ft-1,3)+1.70158*Math.pow(ft-1,2),Et=ft=>{const Yt=2*Math.PI/3;return ft===0?0:ft===1?1:Math.pow(2,-10*ft)*Math.sin((ft*10-.75)*Yt)+1};if(te==="slide")Ne=(1-je)*(Ue<Ie?30:-30);else if(te==="zoom"){const ft=.5+je*.5;he=ft,C=ft}else if(te==="blur")U=(1-je)*10;else if(te==="float")Ne=(1-je)*(Ue<Ie?50:-50);else if(te==="drop")Ne=(1-St(je))*-200,oe=je;else if(te==="flip")C=je;else if(te==="rotate-in")$=(1-je)*-Math.PI/2,oe=je;else if(te==="spiral")he=je,C=je,$=(1-je)*Math.PI*2,oe=je;else if(te==="shatter"){const ft=3-2*je;he=ft,C=ft,U=(1-je)*20,oe=je}else if(te==="lightspeed")xe=(1-je)*300,oe=je;else if(te==="roll")xe=(1-je)*-300,$=(1-je)*-Math.PI,oe=je;else if(te==="elastic"){const ft=Et(je);he=ft,C=ft,oe=je}}}e.save(),e.globalAlpha=oe,U>0&&(e.filter=`blur(${U}px)`);const M=be&&_?.textAnimation||"none";let ne=ye.text,I=_?.textCase||"none";I==="none"&&be&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(I="upper"),I==="upper"?ne=ne.toUpperCase():I==="lower"?ne=ne.toLowerCase():I==="title"?ne=ne.replace(/\w\S*/g,Ue=>Ue.charAt(0).toUpperCase()+Ue.substr(1).toLowerCase()):I==="sentence"?ne=ne.charAt(0).toUpperCase()+ne.slice(1).toLowerCase():I==="invert"&&(ne=ne.replace(/\w\S*/g,Ue=>Ue.charAt(0).toLowerCase()+Ue.slice(1).toUpperCase()));let ue=0,re=0,de=1,Fe=1,Ke=0;if(be&&M!=="none")if(M==="bounce")re=Math.sin(s*6)*15*le;else if(M==="pulse"){const Ue=1+Math.sin(s*4)*.08;de=Ue,Fe=Ue}else if(M==="wave")re=Math.sin(s*4)*20*le,Ke=Math.sin(s*4)*.05;else if(M==="glitch")Math.sin(s*10)>.8&&(ue=(Math.random()-.5)*15*le,re=(Math.random()-.5)*15*le);else if(M==="shake")ue=(Math.random()-.5)*5*le,re=(Math.random()-.5)*5*le;else if(M==="typewriter"){const vt=Math.floor((s-ye.time)*30);ne=ne.substring(0,Math.max(0,vt))}else if(M==="wobble"){Ke=Math.sin(s*5)*.05;const Ue=1+Math.sin(s*3)*.05;de=Ue,Fe=Ue}else if(M==="breathe"){const Ue=1+Math.sin(s*2)*.03;de=Ue,Fe=Ue}else if(M==="rotate")Ke=Math.sin(s*2)*.05;else if(M==="sway")Ke=Math.sin(s*2)*.08;else if(M==="flicker")e.globalAlpha=oe*(.8+Math.random()*.2);else if(M==="jello")de=1+Math.sin(s*6)*.1,Fe=1-Math.sin(s*6)*.1;else if(M==="spin")Ke=s%2*Math.PI;else if(M==="heartbeat"){const Ue=s*1.5%1;(Ue<.1||Ue>.3&&Ue<.4)&&(de=1.1,Fe=1.1)}else if(M==="tada"){const Ue=s*1.5%1;Ue<.1?(de=.9,Fe=.9,Ke=-.05):Ue<.2?(de=1.1,Fe=1.1,Ke=.05):(de=1,Fe=1,Ke=0)}else M==="swing"&&(Ke=Math.sin(s*3)*.1);let rt=0;B.has(ke)?rt=B.get(ke)+(ke===0?Ne:0):(rt=m==="subtitle"&&ke===0&&_?.lyricDisplayMode!=="all"?o-140*le:w+ke*et+(ke===0?Ne:0),m!=="custom"&&(ke<0?rt-=P:ke>0&&(rt+=P))),rt+=re;let Ve=t/2;e.textAlign==="left"?Ve=60*le:e.textAlign==="right"&&(Ve=t-60*le),Ve+=xe+ue;const E=he*de,at=C*Fe,kt=$+Ke;(E!==1||at!==1||kt!==0)&&(e.translate(Ve,rt),e.rotate(kt),e.scale(E,at),e.translate(-Ve,-rt));const Zt=be?_?.textEffect||"preset":"none";if(se&&ke===0&&_?.introMode!=="manual"){const Ue=ne.split(`
`),vt=Ue[0],Ie=Ue.slice(1).join(`
`),je=ve*1.2,St=Be*1.2,Et=20*le;let ft=rt;Ie&&(ft=rt-St/2-Et/2);const Yt=rt+je/2+Et/2;if(e.font=`${qe} ${R} ${ve}px ${j}`,De(e,vt,Ve,ft,t*.9,je,Zt,L),Ie){const En=m==="custom"&&_?.fontWeight?_.fontWeight:"400";e.font=`${qe} ${En} ${Be}px ${j}`,De(e,Ie,Ve,Yt,t*.9,St,Zt,L)}}else{const Ue=be?ve:Be;_&&_.highlightEffect&&_.highlightEffect,be&&ye?ze(e,ye,Ve,rt,t*.9,Ue*(_?.lyricLineHeight||1.2),s,_,j,Ue,R,qe,le):De(e,ne,Ve,rt,t*.9,Ue*(_?.lyricLineHeight||1.2),Zt,L)}e.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const w=_?_.showTitle||_.showArtist:!0,P=_?_.showCover:!0;if(w||P)if(m==="custom"||m==="default"){const ie=_?.infoPosition||"top-left",pe=_?.infoStyle||"classic",Oe=pe==="box",B=Oe?16*le:12*le,_e=40*le*(_?.infoMarginScale??1);let ke="left",ye="top";ie.includes("left")?ke="left":ie.includes("right")?ke="right":ke="center",ie.includes("top")?ye="top":ye="bottom";const be=_?.infoSizeScale??1,Le=(pe==="minimal"||pe==="modern"?0:100*le)*be,Ze=P&&Le>0&&u.coverUrl!==null,R=Ze?u.backgroundType==="video"?v.get("background"):g.get("cover"):null,qe=(pe==="minimal"?20:pe==="modern"||pe==="modern_art"?40:28)*le,L=(pe==="minimal"?14:pe==="modern"||pe==="modern_art"?24:18)*le,te=qe*be,oe=L*be,Ne=`bold ${te}px ${j}`,xe=`${oe}px ${j}`,he=20*le,C=Oe?24*le:0,U=_?.fontColor||"#ffffff",$=pe==="modern"||pe==="modern_art"?U:_?.fontColor||"#d4d4d8";e.font=Ne;const M=e.measureText(u.title),ne=_?.showTitle?M.width:0;e.font=xe;const I=e.measureText(u.artist),ue=_?.showArtist?I.width:0;let re=0,de=0;if(ke==="center"){re=Math.max(Ze&&R?Le:0,ne,ue)+C*2;let Ue=0;Ze&&R&&(Ue+=Le),(_?.showTitle??!0)&&(Ue+=(Ze&&R?he:0)+te),(_?.showArtist??!0)&&(Ue+=(Ze&&R||(_?.showTitle??!0)?5*le:0)+oe),de=Ue+C*2}else{const nt=Math.max(ne,ue);re=(Ze&&R?Le+he:0)+nt+C*2;const vt=(_?.showTitle?te:0)+(_?.showArtist?oe+5*le:0);de=Math.max(vt,Ze&&R?Le:0)+C*2}let Fe=0,Ke=0;ke==="left"?Fe=_e:ke==="right"?Fe=t-_e:Fe=t/2,ye==="top"?Ke=_e:Ke=o-_e;let rt=0,Ve=0;ke==="left"?rt=Fe:ke==="right"?rt=Fe-re:rt=Fe-re/2,ye==="top"?Ve=Ke:Ve=Ke-de,Oe&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.6)",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=20,e.beginPath(),e.roundRect(rt,Ve,re,de,B),e.fill(),e.restore());const E=rt+C,at=Ve+C,kt=re-C*2,Zt=de-C*2;if(ke==="center"){let nt=at;const Ue=E+kt/2;if(e.textAlign="center",ye==="top"){if(Ze&&R){e.save(),e.beginPath();const vt=Ue-Le/2;pe==="circle_art"?e.arc(Ue,nt+Le/2,Le/2,0,Math.PI*2):e.roundRect(vt,nt,Le,Le,B/2),e.clip(),e.drawImage(R,vt,nt,Le,Le),e.restore(),nt+=Le+he}(_?.showTitle??!0)&&(e.fillStyle=U,e.font=Ne,e.textBaseline="top",e.fillText(u.title,Ue,nt),nt+=te+5*le),(_?.showArtist??!0)&&(e.fillStyle=$,e.font=xe,e.textBaseline="top",e.fillText(u.artist,Ue,nt))}else{if(Ze&&R){e.save(),e.beginPath();const vt=Ue-Le/2;pe==="circle_art"?e.arc(Ue,nt+Le/2,Le/2,0,Math.PI*2):e.roundRect(vt,nt,Le,Le,B/2),e.clip(),e.drawImage(R,vt,nt,Le,Le),e.restore(),nt+=Le+he}(_?.showTitle??!0)&&(e.fillStyle=U,e.font=Ne,e.textBaseline="top",e.fillText(u.title,Ue,nt),nt+=te+5*le),(_?.showArtist??!0)&&(e.fillStyle=$,e.font=xe,e.textBaseline="top",e.fillText(u.artist,Ue,nt))}}else{const nt=ke==="right",Ue=at+Zt/2;let vt=E;if(nt&&(vt=E+kt),Ze&&R){const St=Ue-Le/2,Et=nt?vt-Le:vt;e.save(),e.beginPath(),pe==="circle_art"?e.arc(Et+Le/2,St+Le/2,Le/2,0,Math.PI*2):e.roundRect(Et,St,Le,Le,B/2),e.clip(),e.drawImage(R,Et,St,Le,Le),e.restore(),nt?vt-=Le+he:vt+=Le+he}const Ie=(_?.showTitle?te:0)+(_?.showArtist?oe+5*le:0);let je=Ue-Ie/2;e.textAlign=nt?"right":"left",e.textBaseline="top",(_?.showTitle??!0)&&(e.fillStyle=U,e.font=Ne,e.fillText(u.title,vt,je),je+=te+5*le),(_?.showArtist??!0)&&(e.fillStyle=$,e.font=xe,e.fillText(u.artist,vt,je))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(w){e.textAlign="center",e.textBaseline="middle";let ie=80*le;["testing","testing_up","one_line","one_line_up"].includes(m)&&(ie=120*le),(_?.showTitle??!0)&&(e.font=`bold ${20*le}px ${j}`,e.fillStyle="#ffffff",e.fillText(m==="tech"?u.title.toUpperCase():u.title,t/2,o-ie-30*le)),(_?.showArtist??!0)&&(e.font=`${16*le}px ${j}`,e.fillStyle="#d4d4d8",e.fillText(u.artist,t/2,o-ie))}}else{const ie=40*le*(_?.infoMarginScale??1),pe=t===o,Oe=(Ee?pe?110:150:100)*le,B=u.coverUrl?g.get("cover"):null,_e=12*le;if(Ee){const ke=ie*(pe?1.5:3),ye=t/2,be=ye-Oe/2,Le=ke;if(P&&(e.save(),e.beginPath(),e.roundRect(be,Le,Oe,Oe,_e),e.clip(),B?e.drawImage(B,be,Le,Oe,Oe):(e.fillStyle="#27272a",e.fillRect(be,Le,Oe,Oe)),e.restore()),w){e.textAlign="center",e.textBaseline="top";const Ze=Le+(P?Oe+25*le:0),R=_?.infoFontFamily||j,qe=_?.infoFontColor||"#ffffff",L=_?.infoFontColor||"#d4d4d8",te=_?.infoFontWeight||"bold",oe=_?.infoFontStyle||"normal";(_?.showTitle??!0)&&(e.font=`${oe} ${te} ${(pe?26:36)*le}px ${R}`,e.fillStyle=qe,e.fillText(u.title,ye,Ze)),(_?.showArtist??!0)&&(e.font=`${oe} ${te} ${(pe?18:24)*le}px ${R}`,e.fillStyle=L,e.fillText(u.artist,ye,Ze+(_?.showTitle??!0?(pe?30:40)*le:0)))}}else{const ke=ie,ye=ie;if(P&&(e.save(),e.beginPath(),e.roundRect(ke,ye,Oe,Oe,_e),e.clip(),B?e.drawImage(B,ke,ye,Oe,Oe):(e.fillStyle="#27272a",e.fillRect(ke,ye,Oe,Oe)),e.restore()),w){e.textAlign="left",e.textBaseline="top";const be=_?.infoFontFamily||j,Le=_?.infoFontColor||"#ffffff",Ze=_?.infoFontColor||"#d4d4d8",R=_?.infoFontWeight||"bold",qe=_?.infoFontStyle||"normal",L=ke+(P?Oe+25*le:0),te=28*le,oe=ye+Oe/2-te;(_?.showTitle??!0)&&(e.font=`${qe} ${R} ${te}px ${be}`,e.fillStyle=Le,e.fillText(u.title,L,oe)),(_?.showArtist??!0)&&(e.font=`${qe} ${R} ${18*le}px ${be}`,e.fillStyle=Ze,e.fillText(u.artist,L,oe+(_?.showTitle??!0?te+5*le:0)))}}}}if(_?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const w=_.channelInfoPosition||"bottom-right",P=_.channelInfoStyle||"classic",ie=_.channelInfoSizeScale??1,pe=_.channelInfoMarginScale??1,Oe=g.get("__channel_info__"),B=_.channelInfoText;if(!(!Oe&&!B)){if(!(P==="logo"&&!Oe)){if(!(P==="minimal"&&!B)){e.save();const _e=40*le*pe,ke=80*le*ie,ye=P==="modern"||P==="logo"?ke*1.2:ke,be=20*le*ie,Le=g.get("__channel_info_text_svg__"),Ze=!!Le;let R=0,qe=be;if(Ze&&Le){qe=be*1.5;const ne=Le.width/Le.height;R=qe*ne}else{const ne=_.channelInfoFontWeight||"bold",I=_.channelInfoFontStyle||"normal";e.font=`${I} ${ne} ${be}px ${_.channelInfoFontFamily||"sans-serif"}`,B&&P!=="logo"&&(R=e.measureText(B).width)}const L=12*le*ie,te=12*le*ie,oe=8*le*ie;let Ne=0,xe=0;const he=!!Oe&&P!=="minimal",C=!!B&&P!=="logo";P==="modern"?(Ne=Math.max(he?ye:0,C?R+te*2:0),xe=(he?ye:0)+(he&&C?L:0)+(C?qe+oe*2:0)):P==="box"?(Ne=(he?ye:0)+(he&&C?L:0)+(C?R:0)+te*2,xe=Math.max(he?ye:0,C?qe:0)+oe*2):P==="minimal"?(Ne=C?R+te*2:0,xe=C?qe+oe*2:0):P==="logo"?(Ne=ye,xe=ye):(Ne=(he?ye:0)+(he&&C?L:0)+(C?R+te*2:0),xe=Math.max(he?ye:0,C?qe+oe*2:0));let U=0,$=0;w.includes("left")?U=_e:w.includes("right")?U=t-_e-Ne:w.includes("center")&&(U=(t-Ne)/2),w.includes("top")?$=_e:w.includes("bottom")&&($=o-_e-xe),P==="box"&&(e.fillStyle="rgba(0, 0, 0, 0.4)",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=10,e.roundRect?(e.beginPath(),e.roundRect(U,$,Ne,xe,12*le*ie),e.fill()):e.fillRect(U,$,Ne,xe),e.shadowColor="transparent",e.shadowBlur=0);const M=(ne,I,ue,re,de)=>{if(P!=="box"&&P!=="minimal"&&(e.fillStyle="rgba(0, 0, 0, 0.2)",e.roundRect?(e.beginPath(),e.roundRect(ne,I,ue,re,8*le*ie),e.fill()):e.fillRect(ne,I,ue,re)),Ze&&Le){const Fe=ne+(ue-R)/2,Ke=I+(re-qe)/2;e.drawImage(Le,Fe,Ke,R,qe)}else{e.fillStyle=_.channelInfoFontColor||"#ffffff",e.textAlign="left",e.textBaseline="top",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4;const Fe=ne+(ue-R)/2,Ke=I+(re-qe)/2+qe*.1;e.fillText(de,Fe,Ke),e.shadowColor="transparent"}};if(P==="modern"){let ne=$;if(he){const I=U+(Ne-ye)/2;e.drawImage(Oe,I,ne,ye,ye),ne+=ye+L}if(C){const I=R+te*2,ue=qe+oe*2,re=U+(Ne-I)/2;M(re,ne,I,ue,B)}}else{const ne=w.includes("right");let I=U+(P==="box"?te:0);const ue=$+xe/2;if(ne&&(P==="classic"||P==="circle")){if(C){const re=R+te*2,de=qe+oe*2;M(I,ue-de/2,re,de,B),I+=re+L}he&&(P==="circle"?(e.save(),e.beginPath(),e.arc(I+ye/2,ue,ye/2,0,Math.PI*2),e.closePath(),e.clip(),e.drawImage(Oe,I,ue-ye/2,ye,ye),e.restore()):e.drawImage(Oe,I,ue-ye/2,ye,ye))}else if(he&&(P==="circle"?(e.save(),e.beginPath(),e.arc(I+ye/2,ue,ye/2,0,Math.PI*2),e.closePath(),e.clip(),e.drawImage(Oe,I,ue-ye/2,ye,ye),e.restore()):e.drawImage(Oe,I,ue-ye/2,ye,ye),I+=ye+L),C){const re=R+(P==="box"?0:te*2),de=qe+(P==="box"?0:oe*2);P==="box"?Ze&&Le?(e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.drawImage(Le,I,ue-qe/2,R,qe),e.shadowColor="transparent"):(e.fillStyle=_.channelInfoFontColor||"#ffffff",e.textAlign="left",e.textBaseline="middle",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.fillText(B,I,ue+qe*.1),e.shadowColor="transparent"):M(I,ue-de/2,re,de,B)}}e.restore()}}}}};var cn;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(cn||(cn={}));const FM=(()=>{let e=0;return()=>e++})(),PM=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),BM=new Error("called FFmpeg.terminate()");class OM{#t=null;#i={};#n={};#o=[];#l=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:o,data:s}})=>{switch(o){case cn.LOAD:this.loaded=!0,this.#i[t](s);break;case cn.MOUNT:case cn.UNMOUNT:case cn.EXEC:case cn.FFPROBE:case cn.WRITE_FILE:case cn.READ_FILE:case cn.DELETE_FILE:case cn.RENAME:case cn.CREATE_DIR:case cn.LIST_DIR:case cn.DELETE_DIR:this.#i[t](s);break;case cn.LOG:this.#o.forEach(r=>r(s));break;case cn.PROGRESS:this.#l.forEach(r=>r(s));break;case cn.ERROR:this.#n[t](s);break}delete this.#i[t],delete this.#n[t]})};#e=({type:t,data:o},s=[],r)=>this.#t?new Promise((u,p)=>{const g=FM();this.#t&&this.#t.postMessage({id:g,type:t,data:o},s),this.#i[g]=u,this.#n[g]=p,r?.addEventListener("abort",()=>{p(new DOMException(`Message # ${g} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(PM);on(t,o){t==="log"?this.#o.push(o):t==="progress"&&this.#l.push(o)}off(t,o){t==="log"?this.#o=this.#o.filter(s=>s!==o):t==="progress"&&(this.#l=this.#l.filter(s=>s!==o))}load=({classWorkerURL:t,...o}={},{signal:s}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:cn.LOAD,data:o},void 0,s));exec=(t,o=-1,{signal:s}={})=>this.#e({type:cn.EXEC,data:{args:t,timeout:o}},void 0,s);ffprobe=(t,o=-1,{signal:s}={})=>this.#e({type:cn.FFPROBE,data:{args:t,timeout:o}},void 0,s);terminate=()=>{const t=Object.keys(this.#n);for(const o of t)this.#n[o](BM),delete this.#n[o],delete this.#i[o];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,o,{signal:s}={})=>{const r=[];return o instanceof Uint8Array&&r.push(o.buffer),this.#e({type:cn.WRITE_FILE,data:{path:t,data:o}},r,s)};mount=(t,o,s)=>{const r=[];return this.#e({type:cn.MOUNT,data:{fsType:t,options:o,mountPoint:s}},r)};unmount=t=>{const o=[];return this.#e({type:cn.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:s}={})=>this.#e({type:cn.READ_FILE,data:{path:t,encoding:o}},void 0,s);deleteFile=(t,{signal:o}={})=>this.#e({type:cn.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:s}={})=>this.#e({type:cn.RENAME,data:{oldPath:t,newPath:o}},void 0,s);createDir=(t,{signal:o}={})=>this.#e({type:cn.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#e({type:cn.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#e({type:cn.DELETE_DIR,data:{path:t}},void 0,o)}var Yy;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(Yy||(Yy={}));const HM=new Error("failed to get response body reader"),GM=new Error("failed to complete download"),VM="Content-Length",jM=async(e,t)=>{const o=await fetch(e);let s;try{const r=parseInt(o.headers.get(VM)||"-1"),u=o.body?.getReader();if(!u)throw HM;const p=[];let g=0;for(;;){const{done:x,value:b}=await u.read(),T=b?b.length:0;if(x){if(r!=-1&&r!==g)throw GM;t&&t({url:e,total:r,received:g,delta:T,done:x});break}p.push(b),g+=T,t&&t({url:e,total:r,received:g,delta:T,done:x})}const v=new Uint8Array(g);let m=0;for(const x of p)v.set(x,m),m+=x.length;s=v.buffer}catch(r){console.log("failed to send download progress event: ",r),s=await o.arrayBuffer()}return s},Ua=async(e,t,o=!1,s)=>{const r=o?await jM(e,s):await(await fetch(e)).arrayBuffer(),u=new Blob([r],{type:t});return URL.createObjectURL(u)};let La=null,cf=!1,yc=!1;async function qM(e){if(La&&cf)return La;if(yc){for(;yc;)await new Promise(t=>setTimeout(t,100));if(La&&cf)return La}yc=!0;try{const t=new OM;if(t.on("log",({message:s})=>{e?.(`[FFmpeg] ${s}`),console.log("[FFmpeg]",s)}),t.on("progress",({progress:s,time:r})=>{e?.(`[FFmpeg Progress] ${(s*100).toFixed(1)}% (${r}s)`)}),typeof window<"u"&&window.crossOriginIsolated){e?.("[FFmpeg] Cross-Origin Isolated: YES. Using Multi-Threaded Core ");const s="./ffmpeg",r="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm";let u,p,g;try{e?.("[FFmpeg] Attempting to load local core files...");const v=async(m,x)=>{const b=await fetch(m);if(!b.ok)throw new Error(`HTTP ${b.status}`);const T=b.headers.get("Content-Type");if(T&&T.includes("text/html"))throw new Error("Received HTML instead of binary");const A=await b.blob();return URL.createObjectURL(new Blob([A],{type:x}))};[u,p,g]=await Promise.all([v(`${s}/ffmpeg-core.js`,"text/javascript"),v(`${s}/ffmpeg-core.wasm`,"application/wasm"),v(`${s}/ffmpeg-core.worker.js`,"text/javascript")]),e?.("[FFmpeg] Using local core files (Offline Mode)")}catch(v){e?.("[FFmpeg] Local core files not found or failed to load. Falling back to online CDN."),console.warn("Local FFmpeg files not found:",v),[u,p,g]=await Promise.all([Ua(`${r}/ffmpeg-core.js`,"text/javascript"),Ua(`${r}/ffmpeg-core.wasm`,"application/wasm"),Ua(`${r}/ffmpeg-core.worker.js`,"text/javascript")])}await t.load({coreURL:u,wasmURL:p,workerURL:g})}else{e?.("[FFmpeg] Cross-Origin Isolated: NO. Falling back to Single-Threaded Core "),e?.("[FFmpeg] Note: Rendering will be slower. Add COOP/COEP headers to server for multithreading.");const s="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await t.load({coreURL:await Ua(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await Ua(`${s}/ffmpeg-core.wasm`,"application/wasm")})}return La=t,cf=!0,e?.("[FFmpeg] Loaded successfully"),t}finally{yc=!1}}function $M(e,t,o){const s=o==="1080p",u={low:s?28:30,med:s?23:25,high:s?18:20}[t];switch(e){case"h265":return{vcodec:"libx265",args:["-crf",u.toString(),"-preset","medium","-tag:v","hvc1"],format:"mp4",ext:"mp4"};case"vp9":return{vcodec:"libvpx-vp9",args:["-crf",u.toString(),"-b:v","0","-deadline","good","-cpu-used","2"],format:"webm",ext:"webm"};case"av1":return{vcodec:"libaom-av1",args:["-crf",(u+10).toString(),"-b:v","0","-cpu-used","4","-strict","experimental"],format:"mp4",ext:"mp4"};default:return{vcodec:"libx264",args:["-crf",u.toString(),"-preset","medium","-profile:v","high","-level","4.2"],format:"mp4",ext:"mp4"}}}async function YM(e){const{canvas:t,audioFile:o,lyrics:s,metadata:r,visualSlides:u,imageMap:p,videoMap:g,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,codec:A,aspectRatio:_,onProgress:V,onLog:G,abortSignal:J,isFirstSong:fe=!0,isLastSong:ce=!0}=e;V(0,"Loading FFmpeg...");const ge=await qM(G),ze=()=>J?.aborted===!0||J?.current===!0;if(ze())throw new Error("Render aborted");V(5,"Preparing audio...");const De=URL.createObjectURL(o),we=await JM(De);URL.revokeObjectURL(De);const ot=Math.ceil(we*b),Ae=t.getContext("2d");if(!Ae)throw new Error("Failed to get canvas context");V(10,"Rendering frames...");const Qe=await o.arrayBuffer();await ge.writeFile("audio.mp3",new Uint8Array(Qe));const Pe=Math.max(6,ot.toString().length);for(let le=0;le<ot;le++){if(ze())throw await vc(ge,le,Pe),new Error("Render aborted");const bt=le/b;KM(g,u,bt),ip(Ae,t.width,t.height,bt,s,r,u,p,g,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,we,x,ce,fe);const z=await(await new Promise((Be,et)=>{t.toBlob(w=>w?Be(w):et(new Error("Failed to create blob")),"image/jpeg",T==="high"?.98:T==="med"?.92:.85)})).arrayBuffer(),se=`frame_${le.toString().padStart(Pe,"0")}.jpg`;await ge.writeFile(se,new Uint8Array(z));const ve=10+le/ot*70;V(ve,`Rendering frame ${le+1}/${ot}`)}if(ze())throw await vc(ge,ot,Pe),new Error("Render aborted");V(80,"Encoding video...");const ut=$M(A,T,e.resolution),ht=`output.${ut.ext}`,At=["-framerate",b.toString(),"-i",`frame_%0${Pe}d.jpg`,"-i","audio.mp3","-c:v",ut.vcodec,...ut.args,"-c:a","aac","-b:a","192k","-pix_fmt","yuv420p","-movflags","+faststart","-shortest","-y",ht];G?.(`[FFmpeg] Running: ffmpeg ${At.join(" ")}`);try{await ge.exec(At)}catch(le){throw console.error("FFmpeg encoding failed:",le),await vc(ge,ot,Pe),new Error(`FFmpeg encoding failed: ${le}`)}V(95,"Finalizing...");const Mt=await ge.readFile(ht),j=Mt instanceof Uint8Array?new Uint8Array(Mt):new TextEncoder().encode(Mt),Ee=new Blob([j],{type:ut.format==="webm"?"video/webm":"video/mp4"});await vc(ge,ot,Pe);try{await ge.deleteFile("audio.mp3"),await ge.deleteFile(ht)}catch{}return V(100,"Complete!"),{blob:Ee,duration:we,format:ut.ext}}async function JM(e){return new Promise((t,o)=>{const s=document.createElement("audio");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(e)},s.onerror=()=>{o(new Error("Failed to load audio metadata")),URL.revokeObjectURL(e)},s.src=e})}function KM(e,t,o){e.forEach((s,r)=>{if(r==="background"){const p=s.duration||1;p>0&&(s.currentTime=o%p);return}const u=t.find(p=>p.id===r);if(u&&u.type==="video"&&o>=u.startTime&&o<u.endTime){const p=u.playbackRate||1;let g=(o-u.startTime)*p+(u.mediaStartOffset||0);const v=u.mediaDuration||s.duration;v&&v>0&&g>=v&&(g=g%v),s.currentTime=g}})}async function vc(e,t,o){for(let s=0;s<t;s++)try{await e.deleteFile(`frame_${s.toString().padStart(o,"0")}.jpg`)}catch{}}var op=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)},H=(e,t,o)=>(op(e,t,"read from private field"),o?o.call(e):t.get(e)),Lt=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},Vn=(e,t,o,s)=>(op(e,t,"write to private field"),t.set(e,o),o),XM=(e,t,o,s)=>({set _(r){Vn(e,t,r)},get _(){return H(e,t,s)}}),jt=(e,t,o)=>(op(e,t,"access private method"),o),$t=new Uint8Array(8),co=new DataView($t.buffer),Bn=e=>[(e%256+256)%256],nn=e=>(co.setUint16(0,e,!1),[$t[0],$t[1]]),WM=e=>(co.setInt16(0,e,!1),[$t[0],$t[1]]),Jv=e=>(co.setUint32(0,e,!1),[$t[1],$t[2],$t[3]]),it=e=>(co.setUint32(0,e,!1),[$t[0],$t[1],$t[2],$t[3]]),QM=e=>(co.setInt32(0,e,!1),[$t[0],$t[1],$t[2],$t[3]]),Vl=e=>(co.setUint32(0,Math.floor(e/2**32),!1),co.setUint32(4,e,!1),[$t[0],$t[1],$t[2],$t[3],$t[4],$t[5],$t[6],$t[7]]),lp=e=>(co.setInt16(0,2**8*e,!1),[$t[0],$t[1]]),ao=e=>(co.setInt32(0,2**16*e,!1),[$t[0],$t[1],$t[2],$t[3]]),uf=e=>(co.setInt32(0,2**30*e,!1),[$t[0],$t[1],$t[2],$t[3]]),Oi=(e,t=!1)=>{let o=Array(e.length).fill(null).map((s,r)=>e.charCodeAt(r));return t&&o.push(0),o},Pc=e=>e&&e[e.length-1],sp=e=>{let t;for(let o of e)(!t||o.presentationTimestamp>t.presentationTimestamp)&&(t=o);return t},ro=(e,t,o=!0)=>{let s=e*t;return o?Math.round(s):s},Kv=e=>{let t=e*(Math.PI/180),o=Math.cos(t),s=Math.sin(t);return[o,s,0,-s,o,0,0,0,1]},Xv=Kv(0),Wv=e=>[ao(e[0]),ao(e[1]),uf(e[2]),ao(e[3]),ao(e[4]),uf(e[5]),ao(e[6]),ao(e[7]),uf(e[8])],Ya=e=>!e||typeof e!="object"?e:Array.isArray(e)?e.map(Ya):Object.fromEntries(Object.entries(e).map(([t,o])=>[t,Ya(o)])),Hs=e=>e>=0&&e<2**32,Fn=(e,t,o)=>({type:e,contents:t&&new Uint8Array(t.flat(10)),children:o}),xn=(e,t,o,s,r)=>Fn(e,[Bn(t),Jv(o),s??[]],r),ZM=e=>{let t=512;return e.fragmented?Fn("ftyp",[Oi("iso5"),it(t),Oi("iso5"),Oi("iso6"),Oi("mp41")]):Fn("ftyp",[Oi("isom"),it(t),Oi("isom"),e.holdsAvc?Oi("avc1"):[],Oi("mp41")])},zf=e=>({type:"mdat",largeSize:e}),e2=e=>({type:"free",size:e}),wc=(e,t,o=!1)=>Fn("moov",null,[t2(t,e),...e.map(s=>n2(s,t)),o?z2(e):null]),t2=(e,t)=>{let o=ro(Math.max(0,...t.filter(p=>p.samples.length>0).map(p=>{const g=sp(p.samples);return g.presentationTimestamp+g.duration})),Lf),s=Math.max(...t.map(p=>p.id))+1,r=!Hs(e)||!Hs(o),u=r?Vl:it;return xn("mvhd",+r,0,[u(e),u(e),it(Lf),u(o),ao(1),lp(1),Array(10).fill(0),Wv(Xv),Array(24).fill(0),it(s)])},n2=(e,t)=>Fn("trak",null,[i2(e,t),o2(e,t)]),i2=(e,t)=>{let o=sp(e.samples),s=ro(o?o.presentationTimestamp+o.duration:0,Lf),r=!Hs(t)||!Hs(s),u=r?Vl:it,p;return e.info.type==="video"?p=typeof e.info.rotation=="number"?Kv(e.info.rotation):e.info.rotation:p=Xv,xn("tkhd",+r,3,[u(t),u(t),it(e.id),it(0),u(s),Array(8).fill(0),nn(0),nn(0),lp(e.info.type==="audio"?1:0),nn(0),Wv(p),ao(e.info.type==="video"?e.info.width:0),ao(e.info.type==="video"?e.info.height:0)])},o2=(e,t)=>Fn("mdia",null,[l2(e,t),s2(e.info.type==="video"?"vide":"soun"),a2(e)]),l2=(e,t)=>{let o=sp(e.samples),s=ro(o?o.presentationTimestamp+o.duration:0,e.timescale),r=!Hs(t)||!Hs(s),u=r?Vl:it;return xn("mdhd",+r,0,[u(t),u(t),it(e.timescale),u(s),nn(21956),nn(0)])},s2=e=>xn("hdlr",0,0,[Oi("mhlr"),Oi(e),it(0),it(0),it(0),Oi("mp4-muxer-hdlr",!0)]),a2=e=>Fn("minf",null,[e.info.type==="video"?r2():c2(),u2(),p2(e)]),r2=()=>xn("vmhd",0,1,[nn(0),nn(0),nn(0),nn(0)]),c2=()=>xn("smhd",0,0,[nn(0),nn(0)]),u2=()=>Fn("dinf",null,[d2()]),d2=()=>xn("dref",0,0,[it(1)],[f2()]),f2=()=>xn("url ",0,1),p2=e=>{const t=e.compositionTimeOffsetTable.length>1||e.compositionTimeOffsetTable.some(o=>o.sampleCompositionTimeOffset!==0);return Fn("stbl",null,[h2(e),N2(e),A2(e),M2(e),k2(e),R2(e),t?I2(e):null])},h2=e=>xn("stsd",0,0,[it(1)],[e.info.type==="video"?m2(V2[e.info.codec],e):C2(q2[e.info.codec],e)]),m2=(e,t)=>Fn(e,[Array(6).fill(0),nn(1),nn(0),nn(0),Array(12).fill(0),nn(t.info.width),nn(t.info.height),it(4718592),it(4718592),it(0),nn(1),Array(32).fill(0),nn(24),WM(65535)],[j2[t.info.codec](t),t.info.decoderConfig.colorSpace?x2(t):null]),g2={bt709:1,bt470bg:5,smpte170m:6},y2={bt709:1,smpte170m:6,"iec61966-2-1":13},v2={rgb:0,bt709:1,bt470bg:5,smpte170m:6},x2=e=>Fn("colr",[Oi("nclx"),nn(g2[e.info.decoderConfig.colorSpace.primaries]),nn(y2[e.info.decoderConfig.colorSpace.transfer]),nn(v2[e.info.decoderConfig.colorSpace.matrix]),Bn((e.info.decoderConfig.colorSpace.fullRange?1:0)<<7)]),b2=e=>e.info.decoderConfig&&Fn("avcC",[...new Uint8Array(e.info.decoderConfig.description)]),S2=e=>e.info.decoderConfig&&Fn("hvcC",[...new Uint8Array(e.info.decoderConfig.description)]),T2=e=>{if(!e.info.decoderConfig)return null;let t=e.info.decoderConfig;if(!t.colorSpace)throw new Error("'colorSpace' is required in the decoder config for VP9.");let o=t.codec.split("."),s=Number(o[1]),r=Number(o[2]),g=(Number(o[3])<<4)+(0<<1)+Number(t.colorSpace.fullRange);return xn("vpcC",1,0,[Bn(s),Bn(r),Bn(g),Bn(2),Bn(2),Bn(2),nn(0)])},w2=()=>{let o=(1<<7)+1;return Fn("av1C",[o,0,0,0])},C2=(e,t)=>Fn(e,[Array(6).fill(0),nn(1),nn(0),nn(0),it(0),nn(t.info.numberOfChannels),nn(16),nn(0),nn(0),ao(t.info.sampleRate)],[$2[t.info.codec](t)]),E2=e=>{let t=new Uint8Array(e.info.decoderConfig.description);return xn("esds",0,0,[it(58753152),Bn(32+t.byteLength),nn(1),Bn(0),it(75530368),Bn(18+t.byteLength),Bn(64),Bn(21),Jv(0),it(130071),it(130071),it(92307584),Bn(t.byteLength),...t,it(109084800),Bn(1),Bn(2)])},_2=e=>{let t=3840,o=0;const s=e.info.decoderConfig?.description;if(s){if(s.byteLength<18)throw new TypeError("Invalid decoder description provided for Opus; must be at least 18 bytes long.");const r=ArrayBuffer.isView(s)?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(s);t=r.getUint16(10,!0),o=r.getInt16(14,!0)}return Fn("dOps",[Bn(0),Bn(e.info.numberOfChannels),nn(t),it(e.info.sampleRate),lp(o),Bn(0)])},N2=e=>xn("stts",0,0,[it(e.timeToSampleTable.length),e.timeToSampleTable.map(t=>[it(t.sampleCount),it(t.sampleDelta)])]),A2=e=>{if(e.samples.every(o=>o.type==="key"))return null;let t=[...e.samples.entries()].filter(([,o])=>o.type==="key");return xn("stss",0,0,[it(t.length),t.map(([o])=>it(o+1))])},M2=e=>xn("stsc",0,0,[it(e.compactlyCodedChunkTable.length),e.compactlyCodedChunkTable.map(t=>[it(t.firstChunk),it(t.samplesPerChunk),it(1)])]),k2=e=>xn("stsz",0,0,[it(0),it(e.samples.length),e.samples.map(t=>it(t.size))]),R2=e=>e.finalizedChunks.length>0&&Pc(e.finalizedChunks).offset>=2**32?xn("co64",0,0,[it(e.finalizedChunks.length),e.finalizedChunks.map(t=>Vl(t.offset))]):xn("stco",0,0,[it(e.finalizedChunks.length),e.finalizedChunks.map(t=>it(t.offset))]),I2=e=>xn("ctts",0,0,[it(e.compositionTimeOffsetTable.length),e.compositionTimeOffsetTable.map(t=>[it(t.sampleCount),it(t.sampleCompositionTimeOffset)])]),z2=e=>Fn("mvex",null,e.map(D2)),D2=e=>xn("trex",0,0,[it(e.id),it(1),it(0),it(0),it(0)]),Jy=(e,t)=>Fn("moof",null,[U2(e),...t.map(L2)]),U2=e=>xn("mfhd",0,0,[it(e)]),Qv=e=>{let t=0,o=0,s=0,r=0,u=e.type==="delta";return o|=+u,u?t|=1:t|=2,t<<24|o<<16|s<<8|r},L2=e=>Fn("traf",null,[F2(e),P2(e),B2(e)]),F2=e=>{let t=0;t|=8,t|=16,t|=32,t|=131072;let o=e.currentChunk.samples[1]??e.currentChunk.samples[0],s={duration:o.timescaleUnitsToNextSample,size:o.size,flags:Qv(o)};return xn("tfhd",0,t,[it(e.id),it(s.duration),it(s.size),it(s.flags)])},P2=e=>xn("tfdt",1,0,[Vl(ro(e.currentChunk.startTimestamp,e.timescale))]),B2=e=>{let t=e.currentChunk.samples.map(V=>V.timescaleUnitsToNextSample),o=e.currentChunk.samples.map(V=>V.size),s=e.currentChunk.samples.map(Qv),r=e.currentChunk.samples.map(V=>ro(V.presentationTimestamp-V.decodeTimestamp,e.timescale)),u=new Set(t),p=new Set(o),g=new Set(s),v=new Set(r),m=g.size===2&&s[0]!==s[1],x=u.size>1,b=p.size>1,T=!m&&g.size>1,A=v.size>1||[...v].some(V=>V!==0),_=0;return _|=1,_|=4*+m,_|=256*+x,_|=512*+b,_|=1024*+T,_|=2048*+A,xn("trun",1,_,[it(e.currentChunk.samples.length),it(e.currentChunk.offset-e.currentChunk.moofOffset||0),m?it(s[0]):[],e.currentChunk.samples.map((V,G)=>[x?it(t[G]):[],b?it(o[G]):[],T?it(s[G]):[],A?QM(r[G]):[]])])},O2=e=>Fn("mfra",null,[...e.map(H2),G2()]),H2=(e,t)=>xn("tfra",1,0,[it(e.id),it(63),it(e.finalizedChunks.length),e.finalizedChunks.map(s=>[Vl(ro(s.startTimestamp,e.timescale)),Vl(s.moofOffset),it(t+1),it(1),it(1)])]),G2=()=>xn("mfro",0,0,[it(0)]),V2={avc:"avc1",hevc:"hvc1",vp9:"vp09",av1:"av01"},j2={avc:b2,hevc:S2,vp9:T2,av1:w2},q2={aac:"mp4a",opus:"Opus"},$2={aac:E2,opus:_2},Wc=class{},Zv=class extends Wc{constructor(){super(...arguments),this.buffer=null}},ex=class extends Wc{constructor(e){if(super(),this.options=e,typeof e!="object")throw new TypeError("StreamTarget requires an options object to be passed to its constructor.");if(e.onData){if(typeof e.onData!="function")throw new TypeError("options.onData, when provided, must be a function.");if(e.onData.length<2)throw new TypeError("options.onData, when provided, must be a function that takes in at least two arguments (data and position). Ignoring the position argument, which specifies the byte offset at which the data is to be written, can lead to broken outputs.")}if(e.chunked!==void 0&&typeof e.chunked!="boolean")throw new TypeError("options.chunked, when provided, must be a boolean.");if(e.chunkSize!==void 0&&(!Number.isInteger(e.chunkSize)||e.chunkSize<1024))throw new TypeError("options.chunkSize, when provided, must be an integer and not smaller than 1024.")}},Y2=class extends Wc{constructor(e,t){if(super(),this.stream=e,this.options=t,!(e instanceof FileSystemWritableFileStream))throw new TypeError("FileSystemWritableFileStreamTarget requires a FileSystemWritableFileStream instance.");if(t!==void 0&&typeof t!="object")throw new TypeError("FileSystemWritableFileStreamTarget's options, when provided, must be an object.");if(t&&t.chunkSize!==void 0&&(!Number.isInteger(t.chunkSize)||t.chunkSize<=0))throw new TypeError("options.chunkSize, when provided, must be a positive integer")}},Pl,Ms,tx=class{constructor(){this.pos=0,Lt(this,Pl,new Uint8Array(8)),Lt(this,Ms,new DataView(H(this,Pl).buffer)),this.offsets=new WeakMap}seek(e){this.pos=e}writeU32(e){H(this,Ms).setUint32(0,e,!1),this.write(H(this,Pl).subarray(0,4))}writeU64(e){H(this,Ms).setUint32(0,Math.floor(e/2**32),!1),H(this,Ms).setUint32(4,e,!1),this.write(H(this,Pl).subarray(0,8))}writeAscii(e){for(let t=0;t<e.length;t++)H(this,Ms).setUint8(t%8,e.charCodeAt(t)),t%8===7&&this.write(H(this,Pl));e.length%8!==0&&this.write(H(this,Pl).subarray(0,e.length%8))}writeBox(e){if(this.offsets.set(e,this.pos),e.contents&&!e.children)this.writeBoxHeader(e,e.size??e.contents.byteLength+8),this.write(e.contents);else{let t=this.pos;if(this.writeBoxHeader(e,0),e.contents&&this.write(e.contents),e.children)for(let r of e.children)r&&this.writeBox(r);let o=this.pos,s=e.size??o-t;this.seek(t),this.writeBoxHeader(e,s),this.seek(o)}}writeBoxHeader(e,t){this.writeU32(e.largeSize?1:t),this.writeAscii(e.type),e.largeSize&&this.writeU64(t)}measureBoxHeader(e){return 8+(e.largeSize?8:0)}patchBox(e){let t=this.pos;this.seek(this.offsets.get(e)),this.writeBox(e),this.seek(t)}measureBox(e){if(e.contents&&!e.children)return this.measureBoxHeader(e)+e.contents.byteLength;{let t=this.measureBoxHeader(e);if(e.contents&&(t+=e.contents.byteLength),e.children)for(let o of e.children)o&&(t+=this.measureBox(o));return t}}};Pl=new WeakMap;Ms=new WeakMap;var Cc,Gl,Za,Ha,Ec,Df,J2=class extends tx{constructor(e){super(),Lt(this,Ec),Lt(this,Cc,void 0),Lt(this,Gl,new ArrayBuffer(2**16)),Lt(this,Za,new Uint8Array(H(this,Gl))),Lt(this,Ha,0),Vn(this,Cc,e)}write(e){jt(this,Ec,Df).call(this,this.pos+e.byteLength),H(this,Za).set(e,this.pos),this.pos+=e.byteLength,Vn(this,Ha,Math.max(H(this,Ha),this.pos))}finalize(){jt(this,Ec,Df).call(this,this.pos),H(this,Cc).buffer=H(this,Gl).slice(0,Math.max(H(this,Ha),this.pos))}};Cc=new WeakMap;Gl=new WeakMap;Za=new WeakMap;Ha=new WeakMap;Ec=new WeakSet;Df=function(e){let t=H(this,Gl).byteLength;for(;t<e;)t*=2;if(t===H(this,Gl).byteLength)return;let o=new ArrayBuffer(t),s=new Uint8Array(o);s.set(H(this,Za),0),Vn(this,Gl,o),Vn(this,Za,s)};var K2=2**24,X2=2,Ja,Bl,Ga,zo,Ai,Bc,Uf,ap,nx,rp,ix,Ka,Oc,cp=class extends tx{constructor(e){super(),Lt(this,Bc),Lt(this,ap),Lt(this,rp),Lt(this,Ka),Lt(this,Ja,void 0),Lt(this,Bl,[]),Lt(this,Ga,void 0),Lt(this,zo,void 0),Lt(this,Ai,[]),Vn(this,Ja,e),Vn(this,Ga,e.options?.chunked??!1),Vn(this,zo,e.options?.chunkSize??K2)}write(e){H(this,Bl).push({data:e.slice(),start:this.pos}),this.pos+=e.byteLength}flush(){if(H(this,Bl).length===0)return;let e=[],t=[...H(this,Bl)].sort((o,s)=>o.start-s.start);e.push({start:t[0].start,size:t[0].data.byteLength});for(let o=1;o<t.length;o++){let s=e[e.length-1],r=t[o];r.start<=s.start+s.size?s.size=Math.max(s.size,r.start+r.data.byteLength-s.start):e.push({start:r.start,size:r.data.byteLength})}for(let o of e){o.data=new Uint8Array(o.size);for(let s of H(this,Bl))o.start<=s.start&&s.start<o.start+o.size&&o.data.set(s.data,s.start-o.start);H(this,Ga)?(jt(this,Bc,Uf).call(this,o.data,o.start),jt(this,Ka,Oc).call(this)):H(this,Ja).options.onData?.(o.data,o.start)}H(this,Bl).length=0}finalize(){H(this,Ga)&&jt(this,Ka,Oc).call(this,!0)}};Ja=new WeakMap;Bl=new WeakMap;Ga=new WeakMap;zo=new WeakMap;Ai=new WeakMap;Bc=new WeakSet;Uf=function(e,t){let o=H(this,Ai).findIndex(g=>g.start<=t&&t<g.start+H(this,zo));o===-1&&(o=jt(this,rp,ix).call(this,t));let s=H(this,Ai)[o],r=t-s.start,u=e.subarray(0,Math.min(H(this,zo)-r,e.byteLength));s.data.set(u,r);let p={start:r,end:r+u.byteLength};if(jt(this,ap,nx).call(this,s,p),s.written[0].start===0&&s.written[0].end===H(this,zo)&&(s.shouldFlush=!0),H(this,Ai).length>X2){for(let g=0;g<H(this,Ai).length-1;g++)H(this,Ai)[g].shouldFlush=!0;jt(this,Ka,Oc).call(this)}u.byteLength<e.byteLength&&jt(this,Bc,Uf).call(this,e.subarray(u.byteLength),t+u.byteLength)};ap=new WeakSet;nx=function(e,t){let o=0,s=e.written.length-1,r=-1;for(;o<=s;){let u=Math.floor(o+(s-o+1)/2);e.written[u].start<=t.start?(o=u+1,r=u):s=u-1}for(e.written.splice(r+1,0,t),(r===-1||e.written[r].end<t.start)&&r++;r<e.written.length-1&&e.written[r].end>=e.written[r+1].start;)e.written[r].end=Math.max(e.written[r].end,e.written[r+1].end),e.written.splice(r+1,1)};rp=new WeakSet;ix=function(e){let o={start:Math.floor(e/H(this,zo))*H(this,zo),data:new Uint8Array(H(this,zo)),written:[],shouldFlush:!1};return H(this,Ai).push(o),H(this,Ai).sort((s,r)=>s.start-r.start),H(this,Ai).indexOf(o)};Ka=new WeakSet;Oc=function(e=!1){for(let t=0;t<H(this,Ai).length;t++){let o=H(this,Ai)[t];if(!(!o.shouldFlush&&!e)){for(let s of o.written)H(this,Ja).options.onData?.(o.data.subarray(s.start,s.end),o.start+s.start);H(this,Ai).splice(t--,1)}}};var W2=class extends cp{constructor(e){super(new ex({onData:(t,o)=>e.stream.write({type:"write",data:t,position:o}),chunked:!0,chunkSize:e.options?.chunkSize}))}},Lf=1e3,Q2=["avc","hevc","vp9","av1"],Z2=["aac","opus"],ek=2082844800,tk=["strict","offset","cross-track-offset"],yt,_t,Hc,_i,Wn,Gn,Ds,Os,up,Ol,Hl,Xa,Ff,ox,Pf,lx,dp,sx,Bf,ax,fp,rx,_c,Of,lo,Io,pp,cx,Wa,Gc,Vc,hp,Gs,tr,Nc,Hf,nk=class{constructor(e){if(Lt(this,Ff),Lt(this,Pf),Lt(this,dp),Lt(this,Bf),Lt(this,fp),Lt(this,_c),Lt(this,lo),Lt(this,pp),Lt(this,Wa),Lt(this,Vc),Lt(this,Gs),Lt(this,Nc),Lt(this,yt,void 0),Lt(this,_t,void 0),Lt(this,Hc,void 0),Lt(this,_i,void 0),Lt(this,Wn,null),Lt(this,Gn,null),Lt(this,Ds,Math.floor(Date.now()/1e3)+ek),Lt(this,Os,[]),Lt(this,up,1),Lt(this,Ol,[]),Lt(this,Hl,[]),Lt(this,Xa,!1),jt(this,Ff,ox).call(this,e),e.video=Ya(e.video),e.audio=Ya(e.audio),e.fastStart=Ya(e.fastStart),this.target=e.target,Vn(this,yt,{firstTimestampBehavior:"strict",...e}),e.target instanceof Zv)Vn(this,_t,new J2(e.target));else if(e.target instanceof ex)Vn(this,_t,new cp(e.target));else if(e.target instanceof Y2)Vn(this,_t,new W2(e.target));else throw new Error(`Invalid target: ${e.target}`);jt(this,Bf,ax).call(this),jt(this,Pf,lx).call(this)}addVideoChunk(e,t,o,s){if(!(e instanceof EncodedVideoChunk))throw new TypeError("addVideoChunk's first argument (sample) must be of type EncodedVideoChunk.");if(t&&typeof t!="object")throw new TypeError("addVideoChunk's second argument (meta), when provided, must be an object.");if(o!==void 0&&(!Number.isFinite(o)||o<0))throw new TypeError("addVideoChunk's third argument (timestamp), when provided, must be a non-negative real number.");if(s!==void 0&&!Number.isFinite(s))throw new TypeError("addVideoChunk's fourth argument (compositionTimeOffset), when provided, must be a real number.");let r=new Uint8Array(e.byteLength);e.copyTo(r),this.addVideoChunkRaw(r,e.type,o??e.timestamp,e.duration,t,s)}addVideoChunkRaw(e,t,o,s,r,u){if(!(e instanceof Uint8Array))throw new TypeError("addVideoChunkRaw's first argument (data) must be an instance of Uint8Array.");if(t!=="key"&&t!=="delta")throw new TypeError("addVideoChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(o)||o<0)throw new TypeError("addVideoChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(s)||s<0)throw new TypeError("addVideoChunkRaw's fourth argument (duration) must be a non-negative real number.");if(r&&typeof r!="object")throw new TypeError("addVideoChunkRaw's fifth argument (meta), when provided, must be an object.");if(u!==void 0&&!Number.isFinite(u))throw new TypeError("addVideoChunkRaw's sixth argument (compositionTimeOffset), when provided, must be a real number.");if(jt(this,Nc,Hf).call(this),!H(this,yt).video)throw new Error("No video track declared.");if(typeof H(this,yt).fastStart=="object"&&H(this,Wn).samples.length===H(this,yt).fastStart.expectedVideoChunks)throw new Error(`Cannot add more video chunks than specified in 'fastStart' (${H(this,yt).fastStart.expectedVideoChunks}).`);let p=jt(this,_c,Of).call(this,H(this,Wn),e,t,o,s,r,u);if(H(this,yt).fastStart==="fragmented"&&H(this,Gn)){for(;H(this,Hl).length>0&&H(this,Hl)[0].decodeTimestamp<=p.decodeTimestamp;){let g=H(this,Hl).shift();jt(this,lo,Io).call(this,H(this,Gn),g)}p.decodeTimestamp<=H(this,Gn).lastDecodeTimestamp?jt(this,lo,Io).call(this,H(this,Wn),p):H(this,Ol).push(p)}else jt(this,lo,Io).call(this,H(this,Wn),p)}addAudioChunk(e,t,o){if(!(e instanceof EncodedAudioChunk))throw new TypeError("addAudioChunk's first argument (sample) must be of type EncodedAudioChunk.");if(t&&typeof t!="object")throw new TypeError("addAudioChunk's second argument (meta), when provided, must be an object.");if(o!==void 0&&(!Number.isFinite(o)||o<0))throw new TypeError("addAudioChunk's third argument (timestamp), when provided, must be a non-negative real number.");let s=new Uint8Array(e.byteLength);e.copyTo(s),this.addAudioChunkRaw(s,e.type,o??e.timestamp,e.duration,t)}addAudioChunkRaw(e,t,o,s,r){if(!(e instanceof Uint8Array))throw new TypeError("addAudioChunkRaw's first argument (data) must be an instance of Uint8Array.");if(t!=="key"&&t!=="delta")throw new TypeError("addAudioChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(o)||o<0)throw new TypeError("addAudioChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(s)||s<0)throw new TypeError("addAudioChunkRaw's fourth argument (duration) must be a non-negative real number.");if(r&&typeof r!="object")throw new TypeError("addAudioChunkRaw's fifth argument (meta), when provided, must be an object.");if(jt(this,Nc,Hf).call(this),!H(this,yt).audio)throw new Error("No audio track declared.");if(typeof H(this,yt).fastStart=="object"&&H(this,Gn).samples.length===H(this,yt).fastStart.expectedAudioChunks)throw new Error(`Cannot add more audio chunks than specified in 'fastStart' (${H(this,yt).fastStart.expectedAudioChunks}).`);let u=jt(this,_c,Of).call(this,H(this,Gn),e,t,o,s,r);if(H(this,yt).fastStart==="fragmented"&&H(this,Wn)){for(;H(this,Ol).length>0&&H(this,Ol)[0].decodeTimestamp<=u.decodeTimestamp;){let p=H(this,Ol).shift();jt(this,lo,Io).call(this,H(this,Wn),p)}u.decodeTimestamp<=H(this,Wn).lastDecodeTimestamp?jt(this,lo,Io).call(this,H(this,Gn),u):H(this,Hl).push(u)}else jt(this,lo,Io).call(this,H(this,Gn),u)}finalize(){if(H(this,Xa))throw new Error("Cannot finalize a muxer more than once.");if(H(this,yt).fastStart==="fragmented"){for(let t of H(this,Ol))jt(this,lo,Io).call(this,H(this,Wn),t);for(let t of H(this,Hl))jt(this,lo,Io).call(this,H(this,Gn),t);jt(this,Vc,hp).call(this,!1)}else H(this,Wn)&&jt(this,Wa,Gc).call(this,H(this,Wn)),H(this,Gn)&&jt(this,Wa,Gc).call(this,H(this,Gn));let e=[H(this,Wn),H(this,Gn)].filter(Boolean);if(H(this,yt).fastStart==="in-memory"){let t;for(let s=0;s<2;s++){let r=wc(e,H(this,Ds)),u=H(this,_t).measureBox(r);t=H(this,_t).measureBox(H(this,_i));let p=H(this,_t).pos+u+t;for(let g of H(this,Os)){g.offset=p;for(let{data:v}of g.samples)p+=v.byteLength,t+=v.byteLength}if(p<2**32)break;t>=2**32&&(H(this,_i).largeSize=!0)}let o=wc(e,H(this,Ds));H(this,_t).writeBox(o),H(this,_i).size=t,H(this,_t).writeBox(H(this,_i));for(let s of H(this,Os))for(let r of s.samples)H(this,_t).write(r.data),r.data=null}else if(H(this,yt).fastStart==="fragmented"){let t=H(this,_t).pos,o=O2(e);H(this,_t).writeBox(o);let s=H(this,_t).pos-t;H(this,_t).seek(H(this,_t).pos-4),H(this,_t).writeU32(s)}else{let t=H(this,_t).offsets.get(H(this,_i)),o=H(this,_t).pos-t;H(this,_i).size=o,H(this,_i).largeSize=o>=2**32,H(this,_t).patchBox(H(this,_i));let s=wc(e,H(this,Ds));if(typeof H(this,yt).fastStart=="object"){H(this,_t).seek(H(this,Hc)),H(this,_t).writeBox(s);let r=t-H(this,_t).pos;H(this,_t).writeBox(e2(r))}else H(this,_t).writeBox(s)}jt(this,Gs,tr).call(this),H(this,_t).finalize(),Vn(this,Xa,!0)}};yt=new WeakMap;_t=new WeakMap;Hc=new WeakMap;_i=new WeakMap;Wn=new WeakMap;Gn=new WeakMap;Ds=new WeakMap;Os=new WeakMap;up=new WeakMap;Ol=new WeakMap;Hl=new WeakMap;Xa=new WeakMap;Ff=new WeakSet;ox=function(e){if(typeof e!="object")throw new TypeError("The muxer requires an options object to be passed to its constructor.");if(!(e.target instanceof Wc))throw new TypeError("The target must be provided and an instance of Target.");if(e.video){if(!Q2.includes(e.video.codec))throw new TypeError(`Unsupported video codec: ${e.video.codec}`);if(!Number.isInteger(e.video.width)||e.video.width<=0)throw new TypeError(`Invalid video width: ${e.video.width}. Must be a positive integer.`);if(!Number.isInteger(e.video.height)||e.video.height<=0)throw new TypeError(`Invalid video height: ${e.video.height}. Must be a positive integer.`);const t=e.video.rotation;if(typeof t=="number"&&![0,90,180,270].includes(t))throw new TypeError(`Invalid video rotation: ${t}. Has to be 0, 90, 180 or 270.`);if(Array.isArray(t)&&(t.length!==9||t.some(o=>typeof o!="number")))throw new TypeError(`Invalid video transformation matrix: ${t.join()}`);if(e.video.frameRate!==void 0&&(!Number.isInteger(e.video.frameRate)||e.video.frameRate<=0))throw new TypeError(`Invalid video frame rate: ${e.video.frameRate}. Must be a positive integer.`)}if(e.audio){if(!Z2.includes(e.audio.codec))throw new TypeError(`Unsupported audio codec: ${e.audio.codec}`);if(!Number.isInteger(e.audio.numberOfChannels)||e.audio.numberOfChannels<=0)throw new TypeError(`Invalid number of audio channels: ${e.audio.numberOfChannels}. Must be a positive integer.`);if(!Number.isInteger(e.audio.sampleRate)||e.audio.sampleRate<=0)throw new TypeError(`Invalid audio sample rate: ${e.audio.sampleRate}. Must be a positive integer.`)}if(e.firstTimestampBehavior&&!tk.includes(e.firstTimestampBehavior))throw new TypeError(`Invalid first timestamp behavior: ${e.firstTimestampBehavior}`);if(typeof e.fastStart=="object"){if(e.video){if(e.fastStart.expectedVideoChunks===void 0)throw new TypeError("'fastStart' is an object but is missing property 'expectedVideoChunks'.");if(!Number.isInteger(e.fastStart.expectedVideoChunks)||e.fastStart.expectedVideoChunks<0)throw new TypeError("'expectedVideoChunks' must be a non-negative integer.")}if(e.audio){if(e.fastStart.expectedAudioChunks===void 0)throw new TypeError("'fastStart' is an object but is missing property 'expectedAudioChunks'.");if(!Number.isInteger(e.fastStart.expectedAudioChunks)||e.fastStart.expectedAudioChunks<0)throw new TypeError("'expectedAudioChunks' must be a non-negative integer.")}}else if(![!1,"in-memory","fragmented"].includes(e.fastStart))throw new TypeError("'fastStart' option must be false, 'in-memory', 'fragmented' or an object.");if(e.minFragmentDuration!==void 0&&(!Number.isFinite(e.minFragmentDuration)||e.minFragmentDuration<0))throw new TypeError("'minFragmentDuration' must be a non-negative number.")};Pf=new WeakSet;lx=function(){if(H(this,_t).writeBox(ZM({holdsAvc:H(this,yt).video?.codec==="avc",fragmented:H(this,yt).fastStart==="fragmented"})),Vn(this,Hc,H(this,_t).pos),H(this,yt).fastStart==="in-memory")Vn(this,_i,zf(!1));else if(H(this,yt).fastStart!=="fragmented"){if(typeof H(this,yt).fastStart=="object"){let e=jt(this,dp,sx).call(this);H(this,_t).seek(H(this,_t).pos+e)}Vn(this,_i,zf(!0)),H(this,_t).writeBox(H(this,_i))}jt(this,Gs,tr).call(this)};dp=new WeakSet;sx=function(){if(typeof H(this,yt).fastStart!="object")return;let e=0,t=[H(this,yt).fastStart.expectedVideoChunks,H(this,yt).fastStart.expectedAudioChunks];for(let o of t)o&&(e+=8*Math.ceil(2/3*o),e+=4*o,e+=12*Math.ceil(2/3*o),e+=4*o,e+=8*o);return e+=4096,e};Bf=new WeakSet;ax=function(){if(H(this,yt).video&&Vn(this,Wn,{id:1,info:{type:"video",codec:H(this,yt).video.codec,width:H(this,yt).video.width,height:H(this,yt).video.height,rotation:H(this,yt).video.rotation??0,decoderConfig:null},timescale:H(this,yt).video.frameRate??57600,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),H(this,yt).audio&&(Vn(this,Gn,{id:H(this,yt).video?2:1,info:{type:"audio",codec:H(this,yt).audio.codec,numberOfChannels:H(this,yt).audio.numberOfChannels,sampleRate:H(this,yt).audio.sampleRate,decoderConfig:null},timescale:H(this,yt).audio.sampleRate,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),H(this,yt).audio.codec==="aac")){let e=jt(this,fp,rx).call(this,2,H(this,yt).audio.sampleRate,H(this,yt).audio.numberOfChannels);H(this,Gn).info.decoderConfig={codec:H(this,yt).audio.codec,description:e,numberOfChannels:H(this,yt).audio.numberOfChannels,sampleRate:H(this,yt).audio.sampleRate}}};fp=new WeakSet;rx=function(e,t,o){let r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350].indexOf(t),u=o,p="";p+=e.toString(2).padStart(5,"0"),p+=r.toString(2).padStart(4,"0"),r===15&&(p+=t.toString(2).padStart(24,"0")),p+=u.toString(2).padStart(4,"0");let g=Math.ceil(p.length/8)*8;p=p.padEnd(g,"0");let v=new Uint8Array(p.length/8);for(let m=0;m<p.length;m+=8)v[m/8]=parseInt(p.slice(m,m+8),2);return v};_c=new WeakSet;Of=function(e,t,o,s,r,u,p){let g=s/1e6,v=(s-(p??0))/1e6,m=r/1e6,x=jt(this,pp,cx).call(this,g,v,e);return g=x.presentationTimestamp,v=x.decodeTimestamp,u?.decoderConfig&&(e.info.decoderConfig===null?e.info.decoderConfig=u.decoderConfig:Object.assign(e.info.decoderConfig,u.decoderConfig)),{presentationTimestamp:g,decodeTimestamp:v,duration:m,data:t,size:t.byteLength,type:o,timescaleUnitsToNextSample:ro(m,e.timescale)}};lo=new WeakSet;Io=function(e,t){H(this,yt).fastStart!=="fragmented"&&e.samples.push(t);const o=ro(t.presentationTimestamp-t.decodeTimestamp,e.timescale);if(e.lastTimescaleUnits!==null){let r=ro(t.decodeTimestamp,e.timescale,!1),u=Math.round(r-e.lastTimescaleUnits);if(e.lastTimescaleUnits+=u,e.lastSample.timescaleUnitsToNextSample=u,H(this,yt).fastStart!=="fragmented"){let p=Pc(e.timeToSampleTable);p.sampleCount===1?(p.sampleDelta=u,p.sampleCount++):p.sampleDelta===u?p.sampleCount++:(p.sampleCount--,e.timeToSampleTable.push({sampleCount:2,sampleDelta:u}));const g=Pc(e.compositionTimeOffsetTable);g.sampleCompositionTimeOffset===o?g.sampleCount++:e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:o})}}else e.lastTimescaleUnits=0,H(this,yt).fastStart!=="fragmented"&&(e.timeToSampleTable.push({sampleCount:1,sampleDelta:ro(t.duration,e.timescale)}),e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:o}));e.lastSample=t;let s=!1;if(!e.currentChunk)s=!0;else{let r=t.presentationTimestamp-e.currentChunk.startTimestamp;if(H(this,yt).fastStart==="fragmented"){let u=H(this,Wn)??H(this,Gn);const p=H(this,yt).minFragmentDuration??1;e===u&&t.type==="key"&&r>=p&&(s=!0,jt(this,Vc,hp).call(this))}else s=r>=.5}s&&(e.currentChunk&&jt(this,Wa,Gc).call(this,e),e.currentChunk={startTimestamp:t.presentationTimestamp,samples:[]}),e.currentChunk.samples.push(t)};pp=new WeakSet;cx=function(e,t,o){const s=H(this,yt).firstTimestampBehavior==="strict",r=o.lastDecodeTimestamp===-1;if(s&&r&&t!==0)throw new Error(`The first chunk for your media track must have a timestamp of 0 (received DTS=${t}).Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of thedocument, which is probably what you want.

If you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.
`);if(H(this,yt).firstTimestampBehavior==="offset"||H(this,yt).firstTimestampBehavior==="cross-track-offset"){o.firstDecodeTimestamp===void 0&&(o.firstDecodeTimestamp=t);let p;H(this,yt).firstTimestampBehavior==="offset"?p=o.firstDecodeTimestamp:p=Math.min(H(this,Wn)?.firstDecodeTimestamp??1/0,H(this,Gn)?.firstDecodeTimestamp??1/0),t-=p,e-=p}if(t<o.lastDecodeTimestamp)throw new Error(`Timestamps must be monotonically increasing (DTS went from ${o.lastDecodeTimestamp*1e6} to ${t*1e6}).`);return o.lastDecodeTimestamp=t,{presentationTimestamp:e,decodeTimestamp:t}};Wa=new WeakSet;Gc=function(e){if(H(this,yt).fastStart==="fragmented")throw new Error("Can't finalize individual chunks if 'fastStart' is set to 'fragmented'.");if(e.currentChunk){if(e.finalizedChunks.push(e.currentChunk),H(this,Os).push(e.currentChunk),(e.compactlyCodedChunkTable.length===0||Pc(e.compactlyCodedChunkTable).samplesPerChunk!==e.currentChunk.samples.length)&&e.compactlyCodedChunkTable.push({firstChunk:e.finalizedChunks.length,samplesPerChunk:e.currentChunk.samples.length}),H(this,yt).fastStart==="in-memory"){e.currentChunk.offset=0;return}e.currentChunk.offset=H(this,_t).pos;for(let t of e.currentChunk.samples)H(this,_t).write(t.data),t.data=null;jt(this,Gs,tr).call(this)}};Vc=new WeakSet;hp=function(e=!0){if(H(this,yt).fastStart!=="fragmented")throw new Error("Can't finalize a fragment unless 'fastStart' is set to 'fragmented'.");let t=[H(this,Wn),H(this,Gn)].filter(g=>g&&g.currentChunk);if(t.length===0)return;let o=XM(this,up)._++;if(o===1){let g=wc(t,H(this,Ds),!0);H(this,_t).writeBox(g)}let s=H(this,_t).pos,r=Jy(o,t);H(this,_t).writeBox(r);{let g=zf(!1),v=0;for(let x of t)for(let b of x.currentChunk.samples)v+=b.size;let m=H(this,_t).measureBox(g)+v;m>=2**32&&(g.largeSize=!0,m=H(this,_t).measureBox(g)+v),g.size=m,H(this,_t).writeBox(g)}for(let g of t){g.currentChunk.offset=H(this,_t).pos,g.currentChunk.moofOffset=s;for(let v of g.currentChunk.samples)H(this,_t).write(v.data),v.data=null}let u=H(this,_t).pos;H(this,_t).seek(H(this,_t).offsets.get(r));let p=Jy(o,t);H(this,_t).writeBox(p),H(this,_t).seek(u);for(let g of t)g.finalizedChunks.push(g.currentChunk),H(this,Os).push(g.currentChunk),g.currentChunk=null;e&&jt(this,Gs,tr).call(this)};Gs=new WeakSet;tr=function(){H(this,_t)instanceof cp&&H(this,_t).flush()};Nc=new WeakSet;Hf=function(){if(H(this,Xa))throw new Error("Cannot add new video or audio chunks after the file has been finalized.")};function ux(){return typeof window<"u"&&"VideoEncoder"in window&&"AudioEncoder"in window}async function ik(e){const t=await e.arrayBuffer(),o=new(window.AudioContext||window.webkitAudioContext),s=await o.decodeAudioData(t);return o.close(),s}async function ok(e,t,o){const s=[];e.forEach((r,u)=>{let p=-1;if(u==="background"){const g=r.duration||1;g>0&&(p=o%g)}else{const g=t.find(v=>v.id===u);if(g&&g.type==="video"&&o>=g.startTime&&o<g.endTime){const v=g.playbackRate||1;let m=(o-g.startTime)*v+(g.mediaStartOffset||0);const x=g.mediaDuration||r.duration;x&&x>0&&m>=x&&(m=m%x),p=m}}if(p>=0){if(r.readyState===0)return;Math.abs(r.currentTime-p)>.05&&s.push(new Promise(g=>{let v=!1;const m=()=>{v||(v=!0,r.removeEventListener("seeked",m),g())};r.addEventListener("seeked",m),r.currentTime=p,setTimeout(()=>{v||(v=!0,r.removeEventListener("seeked",m),g())},500)}))}}),s.length>0&&await Promise.all(s)}async function lk(e){const{canvas:t,audioFile:o,lyrics:s,metadata:r,visualSlides:u,imageMap:p,videoMap:g,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,onProgress:A,onLog:_,abortSignal:V,isFirstSong:G=!0,isLastSong:J=!0}=e;if(!ux())throw new Error("WebCodecs API is not supported in this browser.");const fe=()=>V?.aborted===!0||V?.current===!0;A(0,"Initializing WebCodecs..."),_?.("Decoding audio...");const ce=await ik(o),ge=ce.duration,ze=Math.ceil(ge*b),De=new nk({target:new Zv,video:{codec:"avc",width:t.width,height:t.height},audio:{codec:"aac",sampleRate:ce.sampleRate,numberOfChannels:ce.numberOfChannels},fastStart:"in-memory"}),Ae=(e.resolution==="1080p"?8e6:4e6)*(T==="high"?1.5:T==="low"?.5:1),Qe=new VideoEncoder({output:(Je,z)=>De.addVideoChunk(Je,z),error:Je=>{throw Je}});Qe.configure({codec:"avc1.4d002a",width:t.width,height:t.height,bitrate:Ae,framerate:b});const Pe=new AudioEncoder({output:(Je,z)=>De.addAudioChunk(Je,z),error:Je=>{throw Je}});Pe.configure({codec:"mp4a.40.2",sampleRate:ce.sampleRate,numberOfChannels:ce.numberOfChannels,bitrate:128e3}),A(5,"Encoding Audio..."),_?.("Encoding audio tracks...");const ut=ce.numberOfChannels,ht=ce.sampleRate,At=ht,Mt=ce.length;for(let Je=0;Je<Mt;Je+=At){if(fe())throw new Error("Render aborted");const z=Math.min(At,Mt-Je),se=Math.round(Je/ht*1e6),ve=new Float32Array(z*ut);for(let et=0;et<ut;et++){const P=ce.getChannelData(et).subarray(Je,Je+z);ve.set(P,et*z)}const Be=new AudioData({format:"f32-planar",sampleRate:ht,numberOfFrames:z,numberOfChannels:ut,timestamp:se,data:ve});Pe.encode(Be),Be.close()}await Pe.flush(),A(10,"Rendering Frames...");const j=t.getContext("2d",{desynchronized:!1});if(!j)throw new Error("No canvas context");const Ee=1/b*1e6;for(let Je=0;Je<ze;Je++){if(fe())throw new Error("Render aborted");const z=Je/b;await ok(g,u,z),ip(j,t.width,t.height,z,s,r,u,p,g,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,ge,x,J,G);const se=Math.round(Je*Ee),ve=Math.round(Ee),Be=new VideoFrame(t,{timestamp:se,duration:ve}),et=Je%(b*2)===0;Qe.encode(Be,{keyFrame:et}),Be.close();const w=10+Je/ze*90;A(w,`Rendering frame ${Je}/${ze}`),Je%5===0&&await new Promise(P=>setTimeout(P,0))}A(99,"Finalizing..."),await Qe.flush(),De.finalize();const{buffer:le}=De.target,bt=new Blob([le],{type:"video/mp4"});return A(100,"Done!"),{blob:bt,duration:ge,format:"mp4"}}function sk(){const{toast:e,confirm:t}=er(),o=Q.useRef(null),s=Q.useRef(null),r=Q.useRef(null),u=Q.useRef(null),p=Q.useRef(null),g=Q.useRef({aborted:!1}),v=Q.useRef(()=>{});Q.useEffect(()=>{RM()},[]);const[m,x]=Q.useState(null),[b,T]=Q.useState(0),[A,_]=Q.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[V,G]=Q.useState([]),[J,fe]=Q.useState([]),[ce,ge]=Q.useState(0),[ze,De]=Q.useState(!1),[we,ot]=Q.useState("off"),[Ae,Qe]=Q.useState(0),[Pe,ut]=Q.useState(0),[ht,At]=Q.useState(1),[Mt,j]=Q.useState(!1),[Ee,le]=Q.useState(Xn.PLAYER),[bt,Je]=Q.useState(!1),[z,se]=Q.useState(!1),[ve,Be]=Q.useState(!1),[et,w]=Q.useState(!1),[P,ie]=Q.useState(!1),[pe,Oe]=Q.useState(0),[B,_e]=Q.useState("16:9"),[ke,ye]=Q.useState("1080p"),[be,Le]=Q.useState("default"),[Ze,R]=Q.useState(null),[qe,L]=Q.useState(null),[te,oe]=Q.useState(null),[Ne,xe]=Q.useState("auto"),[he,C]=Q.useState(30),[U,$]=Q.useState("med"),[M,ne]=Q.useState("mediarecorder"),[I,ue]=Q.useState("h264"),[re,de]=Q.useState(""),[Fe,Ke]=Q.useState(!1),[rt,Ve]=Q.useState(!1),[E,at]=Q.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",lyricLineHeight:1.2,useRealColorMedia:!1,channelInfoFontWeight:"bold",channelInfoFontStyle:"normal",infoFontWeight:"bold",infoFontStyle:"normal"}),kt=Q.useRef(E);Q.useEffect(()=>{kt.current=E},[E]);const Zt=Q.useRef(null),nt=Q.useRef(null),Ue=E.backgroundBlurStrength>0,vt=Q.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(Y=>MediaRecorder.isTypeSupported(Y.value)),[]),[Ie,je]=Q.useState([]),[St,Et]=Q.useState(-1),[ft,Yt]=Q.useState(!1),En=()=>{const k=ke==="1080p";switch(B){case"9:16":return k?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return k?{w:1080,h:1440}:{w:720,h:960};case"4:3":return k?{w:1440,h:1080}:{w:960,h:720};case"1:1":return k?{w:1080,h:1080}:{w:720,h:720};case"1:2":return k?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return k?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return k?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return k?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return k?{w:1080,h:1350}:{w:720,h:900};case"20:9":return k?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return k?{w:2560,h:1080}:{w:1720,h:720};default:return k?{w:1920,h:1080}:{w:1280,h:720}}},{w:ai,h:uo}=En(),[Mi,Fo]=Q.useState(!0),[yl,gi]=Q.useState(!0),[Ye,xt]=Q.useState(!1),Ft=Q.useMemo(()=>{const k=E.visualTransitionType||"none",Y=E.visualTransitionDuration||1;return J.filter(W=>W.type==="audio"?!1:Ae>=W.startTime&&Ae<W.endTime||k==="crossfade"&&Ae>=W.endTime&&Ae<W.endTime+Y).sort((W,Se)=>{const Ge=(W.layer||0)-(Se.layer||0);return Ge!==0?Ge:W.startTime-Se.startTime})},[J,Ae,E.visualTransitionType,E.visualTransitionDuration]),Qn=J.filter(k=>k.type==="audio"&&Ae>=k.startTime&&Ae<k.endTime),Pt=Q.useMemo(()=>ce===0?V:V.map(k=>({...k,time:k.time+ce,endTime:k.endTime!==void 0?k.endTime+ce:void 0})),[V,ce]),mn=Pt.findIndex((k,Y)=>{if(k.endTime!==void 0)return Ae>=k.time&&Ae<k.endTime;const Re=Pt[Y+1];return Ae>=k.time&&(!Re||Ae<Re.time)}),vl=k=>{const Y=k.target.files?.[0];if(Y){const Re=URL.createObjectURL(Y);x(Re);const W={title:Y.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};_(W),Y.type.startsWith("audio/")?df(()=>import("./jsmediatags.min-CQMnV9ok.js").then(Se=>Se.j),[]).then(Se=>{Se.read(Y,{onSuccess:Ge=>{const{title:tt,artist:Tt,picture:mt}=Ge.tags;let Sn=null;if(mt){const{data:on,format:He}=mt;let Rt="";for(let Jt=0;Jt<on.length;Jt++)Rt+=String.fromCharCode(on[Jt]);Sn=`data:${He};base64,${window.btoa(Rt)}`}_({title:tt||W.title,artist:Tt||W.artist,coverUrl:Sn||null})},onError:Ge=>{console.log("Error reading tags:",Ge)}})}):Y.type.startsWith("video/")&&(w(!1),_({...W,coverUrl:Re,backgroundType:"video"})),ge(0),De(!1),Qe(0),Et(-1),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}k.target.value=""},Wi=k=>{const Y=k.target.files?.[0];if(Y){const Re=URL.createObjectURL(Y),W=Y.type.startsWith("video/");W&&w(!1),_(Se=>({...Se,coverUrl:Re,backgroundType:W?"video":"image"}))}k.target.value=""},Po=async k=>{const Y=k.target.files?.[0];if(Y)try{const Re=await Y.text(),W=Y.name.split(".").pop()?.toLowerCase();let Se=[];W==="lrc"?Se=Ls(Re):W==="srt"?Se=Fs(Re):W==="ttml"||W==="xml"?Se=qa(Re):W==="vtt"&&(Se=$a(Re)),Se.some(Ge=>Ge.words&&Ge.words.length>0)&&(at(Ge=>({...Ge,highlightEffect:"karaoke"})),e.success(`${W?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),G(Se)}catch(Re){console.error("Failed to parse lyrics:",Re),e.error("Failed to parse lyric file.")}k.target.value=""};Q.useEffect(()=>{if(St!==-1&&Ie[St]){const k=Ie[St];G(k.parsedLyrics||[])}},[Ie,St]);const fo=async k=>{const Y=k.target.files?.[0];if(Y){if(!window.FontFace||!document.fonts){e.error("Custom fonts are not supported in this browser.");return}try{const Re=URL.createObjectURL(Y),W=Y.name.replace(/\.[^/.]+$/,""),Se="CustomFont",Ge=new FontFace(Se,`url(${Re})`);await Ge.load(),document.fonts.add(Ge),R(W),at(tt=>({...tt,fontFamily:Se})),e.success(`Loaded font: ${W}`)}catch(Re){console.error("Failed to load font:",Re),e.error("Failed to load font file.")}}k.target.value=""},Bo=async k=>{const Y=k.target.files?.[0];if(Y){if(!window.FontFace||!document.fonts){e.error("Custom fonts are not supported in this browser.");return}try{const Re=URL.createObjectURL(Y),W=Y.name.replace(/\.[^/.]+$/,""),Se="ChannelFont",Ge=new FontFace(Se,`url(${Re})`);await Ge.load(),document.fonts.add(Ge),L(W),at(tt=>({...tt,channelInfoFontFamily:Se})),e.success(`Loaded Channel font: ${W}`)}catch(Re){console.error("Failed to load font:",Re),e.error("Failed to load channel font file.")}}k.target.value=""},xl=async k=>{const Y=k.target.files?.[0];if(Y){if(!window.FontFace||!document.fonts){e.error("Custom fonts are not supported in this browser.");return}try{const Re=URL.createObjectURL(Y),W=Y.name.replace(/\.[^/.]+$/,""),Se="InfoFont",Ge=new FontFace(Se,`url(${Re})`);await Ge.load(),document.fonts.add(Ge),oe(W),at(tt=>({...tt,infoFontFamily:Se})),e.success(`Loaded Info font: ${W}`)}catch(Re){console.error("Failed to load font:",Re),e.error("Failed to load info font file.")}}k.target.value=""},yi=Q.useCallback(async(k,Y=!0,Re)=>{const W=Re||Ie;if(k<0||k>=W.length)return;const Se=W[k],Ge=URL.createObjectURL(Se.audioFile);if(x(Ge),_({title:Se.metadata.title,artist:Se.metadata.artist,coverUrl:Se.metadata.coverUrl||null,backgroundType:Se.metadata.backgroundType||"image"}),G([]),Se.parsedLyrics&&Se.parsedLyrics.length>0)G(Se.parsedLyrics);else if(Se.lyricFile)try{const tt=await Se.lyricFile.text(),Tt=Se.lyricFile.name.split(".").pop()?.toLowerCase();let mt=[];Tt==="lrc"?mt=Ls(tt):Tt==="srt"?mt=Fs(tt):Tt==="ttml"||Tt==="xml"?mt=qa(tt):Tt==="vtt"&&(mt=$a(tt)),G(mt)}catch(tt){console.error("Failed to load lyrics",tt)}ge(0),Et(k),r.current&&(r.current.scrollTop=0),Y?setTimeout(()=>{o.current&&(o.current.play().catch(tt=>console.log("Autoplay failed",tt)),De(!0))},100):(De(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[Ie]),bn=Q.useCallback(()=>{if(Ie.length===0)return;const k=(St+1)%Ie.length;yi(k)},[Ie,St,yi]),ql=Q.useCallback(()=>{if(Ie.length===0)return;const k=(St-1+Ie.length)%Ie.length;yi(k)},[Ie,St,yi]),$l=()=>{o.current&&(ze?(o.current.pause(),De(!1)):!m&&Ie.length>0?yi(0):(o.current.play().catch(console.error),De(!0)))},qn=Q.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,De(!1),Qe(0))},[]),po=()=>{ot(k=>k==="off"?"one":k==="one"?"all":k==="all"?"all_repeat":"off")},nr=()=>{document.fullscreenElement?(document.exitFullscreen(),Je(!1)):(s.current?.requestFullscreen(),Je(!0))},$s=k=>{if(k&&k.target.closest(".no-minimal-mode-toggle"))return;const Y=!Ye;xt(Y),Y&&Be(!0),e.success(`Minimal Mode: ${Y?"On":"Off"}`,{id:"minimal-mode"})},ir=()=>{o.current&&(Qe(o.current.currentTime),P&&Oe(o.current.currentTime/Pe*100))},Qc=()=>{o.current&&ut(o.current.duration)},Yl=k=>{const Y=parseFloat(k.target.value);o.current&&(o.current.currentTime=Y,Qe(Y))},bl=k=>{if(!Zt.current||P||!Pe)return;const Y=Zt.current.getBoundingClientRect(),Se=Math.max(0,Math.min(k-Y.left,Y.width))/Y.width*Pe;o.current&&(o.current.currentTime=Se,Qe(Se))},Vi=k=>{const Y=parseFloat(k.target.value);At(Y),o.current&&(o.current.volume=Y),j(Y===0)},ni=k=>{if(!nt.current)return;const Y=nt.current.getBoundingClientRect(),W=Math.max(0,Math.min(k-Y.left,Y.width))/Y.width;At(W),o.current&&(o.current.volume=W),j(W===0)},or=async()=>{if(!o.current||!u.current)return;const k=E.renderMode==="playlist"&&Ie.length>0,Y=[];if(k)for(const Me of Ie){let lt=[];if(Me.parsedLyrics&&Me.parsedLyrics.length>0)lt=Me.parsedLyrics;else if(Me.lyricFile)try{const We=await Me.lyricFile.text(),Tn=Me.lyricFile.name.split(".").pop()?.toLowerCase();Tn==="lrc"?lt=Ls(We):Tn==="srt"?lt=Fs(We):Tn==="ttml"||Tn==="xml"?lt=qa(We):Tn==="vtt"&&(lt=$a(We))}catch(We){console.error("Failed to parse lyrics for playlist item",We)}const Ht=URL.createObjectURL(Me.audioFile);Y.push({audioSrc:Ht,lyrics:lt,metadata:Me.metadata,isFileSource:!0})}else{if(!m)return;Y.push({audioSrc:m,lyrics:Pt,metadata:A,isFileSource:!1})}if(Y.length===0)return;const Re=k?`Start rendering ALL ${Y.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${B} (${ke}) video? This will play the song from start to finish.`;if(!await t(`${Re} Please do not switch tabs during rendering.`,"Start Rendering?")){k&&Y.forEach(Me=>Me.isFileSource&&URL.revokeObjectURL(Me.audioSrc));return}Ke(!1),ie(!0),Oe(0);const Se={aborted:!1};g.current=Se,qn(),ot("off"),On.current&&clearTimeout(On.current),se(!1),Be(!0),Sl.current&&Sl.current.pause();const Ge=o.current,tt=be,Tt=new Map,mt=new Map,Sn=new Map,on=[],He=(Me,lt)=>new Promise(Ht=>{const We=new Image;We.crossOrigin="anonymous",We.onload=()=>{Tt.set(Me,We),Ht()},We.onerror=()=>Ht(),We.src=lt}),Rt=(Me,lt)=>new Promise(Ht=>{const We=document.createElement("video");We.crossOrigin="anonymous",We.muted=!0,We.playsInline=!0,We.preload="auto";let Tn=!1;const en=()=>{Tn||(Tn=!0,mt.set(Me,We),Ht())};We.oncanplay=()=>{Tn||(We.currentTime=.001)},We.onseeked=()=>en(),We.onerror=()=>{console.warn("Failed to load video:",lt),en()},setTimeout(()=>en(),5e3),We.src=lt,We.load()}),Jt=(Me,lt)=>new Promise(Ht=>{const We=document.createElement("audio");We.crossOrigin="anonymous",We.onloadedmetadata=()=>{Sn.set(Me,We),Ht()},We.onerror=()=>Ht(),We.src=lt});if(J.forEach(Me=>{Me.type==="video"?on.push(Rt(Me.id,Me.url)):Me.type==="audio"||Me.type==="audio"?on.push(Jt(Me.id,Me.url)):on.push(He(Me.id,Me.url))}),E.showChannelInfo&&(E.channelInfoImage&&on.push(He("__channel_info__",E.channelInfoImage)),E.channelInfoText)){const Me=E.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(Me))try{const lt=document.createElement("div");lt.style.position="absolute",lt.style.visibility="hidden",lt.style.whiteSpace="nowrap",lt.style.fontFamily="sans-serif",lt.style.fontWeight="bold",lt.style.fontSize="100px",lt.style.display="inline-flex",lt.style.alignItems="center",lt.style.gap="0.25em",lt.innerHTML=Me;const Ht=lt.getElementsByTagName("svg");for(let Zn=0;Zn<Ht.length;Zn++)Ht[Zn].style.width="auto",Ht[Zn].style.height="1.5em";document.body.appendChild(lt);const{width:We,height:Tn}=lt.getBoundingClientRect();document.body.removeChild(lt);const en=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${We}" height="${Tn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${Me}
                  </div>
                </foreignObject>
              </svg>
            `,vi=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(en).replace(/%([0-9A-F]{2})/g,function(qo,Wl){return String.fromCharCode(parseInt(Wl,16))}))}`;on.push(He("__channel_info_text_svg__",vi))}catch(lt){console.warn("Failed to process SVG channel info",lt)}}if(E.backgroundSource==="image"&&E.backgroundImage&&on.push(He("__custom_bg__",E.backgroundImage)),await Promise.all(on),Se.aborted){ie(!1),k&&Y.forEach(Me=>Me.isFileSource&&URL.revokeObjectURL(Me.audioSrc));return}const Cn=u.current,F=Cn.getContext("2d"),pt=Cn.captureStream(he);let wt=null;try{if(Ge.captureStream)wt=Ge.captureStream();else if(Ge.mozCaptureStream)wt=Ge.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{e.error("Your browser does not support audio capture for recording."),ie(!1);return}const $e=new(window.AudioContext||window.webkitAudioContext),sn=$e.createMediaStreamDestination();$e.createMediaElementSource(Ge).connect(sn),mt.forEach(Me=>{Me.muted=!0,$e.createMediaElementSource(Me).connect(sn)}),Sn.forEach(Me=>{Me.muted=!0,$e.createMediaElementSource(Me).connect(sn)}),sn.stream.getAudioTracks().length>0?pt.addTrack(sn.stream.getAudioTracks()[0]):wt&&pt.addTrack(wt.getAudioTracks()[0]);const ri=(()=>{if(Ne!=="auto"&&MediaRecorder.isTypeSupported(Ne))return Ne;const Me=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const lt of Me)if(MediaRecorder.isTypeSupported(lt))return lt;return"video/webm"})(),ki=ke==="1080p"?8e6:4e6,jo=he>30?1.5:1,kn=U==="high"?2:U==="low"?.5:1,ii=ki*jo*kn,un=new MediaRecorder(pt,{mimeType:ri,videoBitsPerSecond:ii});p.current=un;const ci=[];un.ondataavailable=Me=>{Me.data.size>0&&ci.push(Me.data)},un.onstop=()=>{if(Se.aborted)console.log("Render aborted");else{const Me=new Blob(ci,{type:ri}),lt=Ht=>{const We=URL.createObjectURL(Ht),Tn=document.createElement("a");Tn.href=We;const en=ri.includes("mp4")?"mp4":"webm",In=k?`Playlist_${Y.length}_Songs_${B.replace(":","-")}.${en}`:`${Y[0].metadata.title||"video"}_${B.replace(":","-")}.${en}`;Tn.download=In,document.body.appendChild(Tn),Tn.click(),document.body.removeChild(Tn),URL.revokeObjectURL(We)};ri.includes("webm"),lt(Me)}$e.close(),ie(!1),T(Me=>Me+1),k&&Y.forEach(Me=>Me.isFileSource&&URL.revokeObjectURL(Me.audioSrc))};let ee=0,ui=[],It=A,Rn=0,ji=0;const eo=1e3/he,mo=Me=>{if(Se.aborted)return;(un.state==="recording"||un.state==="paused")&&requestAnimationFrame(mo);const lt=Me-ji;if(lt<eo)return;ji=Me-lt%eo;const Ht=Ge.currentTime;Rn>0&&Oe(Ht/Rn*100),mt.forEach((We,Tn)=>{if(Tn==="background"){const en=We.duration||1,In=Ht%en;let vi=Math.abs(We.currentTime-In);(In<We.currentTime&&We.currentTime-In>en/2||vi>.5)&&(We.currentTime=In),We.paused&&We.play().catch(()=>{})}else{const en=J.find(In=>In.id===Tn);if(en)if(Ht>=en.startTime&&Ht<en.endTime){const In=en.playbackRate||1;let vi=(Ht-en.startTime)*In+(en.mediaStartOffset||0);const Zn=en.mediaDuration||We.duration;Zn&&Zn>0&&vi>=Zn&&(vi=vi%Zn),Math.abs(We.playbackRate-In)>.01&&(We.playbackRate=In),Math.abs(We.currentTime-vi)>.5&&(We.currentTime=vi);const qo=en.isMuted!==!1;We.muted!==qo&&(We.muted=qo),We.paused&&We.play().catch(()=>{})}else We.paused||We.pause(),We.muted||(We.muted=!0)}}),Sn.forEach((We,Tn)=>{const en=J.find(In=>In.id===Tn);if(en){const In=en.layer||0;if(E.layerVisibility?.audio?.[In]!==!1&&Ht>=en.startTime&&Ht<en.endTime){const Zn=en.playbackRate||1,qo=(Ht-en.startTime)*Zn+(en.mediaStartOffset||0);Math.abs(We.playbackRate-Zn)>.01&&(We.playbackRate=Zn),Math.abs(We.currentTime-qo)>.5&&(We.currentTime=qo);const Wl=en.isMuted===!0;We.muted!==Wl&&(We.muted=Wl),We.paused&&We.play().catch(()=>{})}else We.paused||We.pause(),We.muted||(We.muted=!0)}}),F&&ip(F,Cn.width,Cn.height,Ht,ui,It,J,Tt,mt,tt,Ze,E.fontSizeScale,E.backgroundBlurStrength>0,Rn,E,E.renderMode==="current"||ee===Y.length-1,E.renderMode==="current"||ee===0)},go=async()=>{if(Se.aborted){un.stop();return}if(ee>=Y.length){await new Promise(lt=>setTimeout(lt,500)),un.stop();return}const Me=Y[ee];un.state==="recording"&&un.pause(),ui=Me.lyrics,It=Me.metadata,Rn=0,Me.metadata.coverUrl&&(Me.metadata.backgroundType==="video"?await Rt("background",Me.metadata.coverUrl):await He("cover",Me.metadata.coverUrl)),Ge.pause(),Ge.src=Me.audioSrc,Ge.load(),await new Promise(lt=>{const Ht=()=>{Ge.removeEventListener("canplay",Ht),lt()};Ge.addEventListener("canplay",Ht),Ge.readyState>=3&&Ht()}),Rn=Ge.duration,un.state==="inactive"?($e.state==="suspended"&&await $e.resume(),un.start(),requestAnimationFrame(mo)):un.state==="paused"&&un.resume(),await Ge.play(),await new Promise(lt=>{const Ht=()=>{Ge.removeEventListener("ended",Ht),lt()};Ge.addEventListener("ended",Ht)}),ee++,go()};await go()},Zc=async()=>{if(!u.current)return;const k=E.renderMode==="playlist"&&Ie.length>0;let Y=null,Re=Pt,W=A;if(k&&Ie.length>0)Y=Ie[0].audioFile,Re=Ie[0].parsedLyrics||[],W=Ie[0].metadata;else if(Ie.length>0&&St>=0)Y=Ie[St].audioFile;else if(m)try{Y=await(await fetch(m)).blob()}catch(F){console.error("FFmpeg: Failed to fetch audio blob",F),e.error("Failed to load audio source for rendering.");return}else{e.error("Please load an audio file first.");return}if(!Y){e.error("No audio file available for FFmpeg export.");return}const Se=`Start FFmpeg rendering at ${ke} (${B})? This uses frame-by-frame capture for higher quality. Rendering may take several minutes.`;if(!await t(Se,"Start FFmpeg Rendering?"))return;Ke(!1),ie(!0),Oe(0),de("Initializing...");const tt={aborted:!1};g.current=tt,qn();const Tt=u.current,{w:mt,h:Sn}=En();Tt.width=mt,Tt.height=Sn;const on=new Map,He=new Map,Rt=[],Jt=(F,pt)=>new Promise(wt=>{const $e=new Image;$e.crossOrigin="anonymous",$e.onload=()=>{on.set(F,$e),wt()},$e.onerror=()=>wt(),$e.src=pt}),Cn=(F,pt)=>new Promise(wt=>{const $e=document.createElement("video");$e.crossOrigin="anonymous",$e.muted=!0,$e.playsInline=!0,$e.preload="auto";let sn=!1;const Kt=()=>{sn||(sn=!0,He.set(F,$e),wt())};$e.oncanplay=()=>{sn||($e.currentTime=.001)},$e.onseeked=()=>Kt(),$e.onerror=()=>{console.warn("Failed to load video:",pt),Kt()},setTimeout(()=>Kt(),5e3),$e.src=pt,$e.load()});if(J.forEach(F=>{F.type==="video"?Rt.push(Cn(F.id,F.url)):F.type!=="audio"&&Rt.push(Jt(F.id,F.url))}),W.coverUrl&&(W.backgroundType==="video"?Rt.push(Cn("background",W.coverUrl)):Rt.push(Jt("cover",W.coverUrl))),E.backgroundSource==="image"&&E.backgroundImage&&Rt.push(Jt("__custom_bg__",E.backgroundImage)),E.showChannelInfo&&E.channelInfoImage&&Rt.push(Jt("__channel_info__",E.channelInfoImage)),await Promise.all(Rt),tt.aborted){ie(!1);return}try{const F=await YM({canvas:Tt,audioFile:Y,lyrics:Re,metadata:W,visualSlides:J,imageMap:on,videoMap:He,preset:be,customFontName:Ze,renderConfig:E,resolution:ke,aspectRatio:B,fps:he,quality:U,codec:I,onProgress:(sn,Kt)=>{Oe(sn),de(Kt)},onLog:sn=>console.log(sn),abortSignal:tt,isFirstSong:!0,isLastSong:!0}),pt=`${W.title||"video"}_${B.replace(":","-")}_ffmpeg.${F.format}`,wt=URL.createObjectURL(F.blob),$e=document.createElement("a");$e.href=wt,$e.download=pt,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(wt),e.success(`Video exported successfully! (${F.format.toUpperCase()}, ${Math.round(F.duration)}s)`)}catch(F){F.message!=="Render aborted"&&(console.error("FFmpeg render failed:",F),e.error(`FFmpeg render failed: ${F.message}`))}finally{ie(!1),de("")}},Ys=async()=>{if(!u.current)return;const k=E.renderMode==="playlist"&&Ie.length>0;let Y=null,Re=Pt,W=A;if(k&&Ie.length>0)Y=Ie[0].audioFile,Re=Ie[0].parsedLyrics||[],W=Ie[0].metadata;else if(Ie.length>0&&St>=0)Y=Ie[St].audioFile;else if(m)try{Y=await(await fetch(m)).blob()}catch(F){console.error("WebCodecs: Failed to fetch audio blob",F),e.error("Failed to load audio source for rendering.");return}else{e.error("Please load an audio file first.");return}if(!Y){e.error("No audio file available for export.");return}if(!ux()){e.error("WebCodecs is not supported in this browser.");return}const{w:Se,h:Ge}=En(),tt=`Start WebCodecs rendering at ${ke} @ ${he}fps?
Resolution: ${Se}x${Ge}

This uses hardware acceleration and is very fast.`;if(!await t(tt,"Start WebCodecs Rendering?"))return;Ke(!1),ie(!0),Oe(0),de("Initializing WebCodecs...");const mt={aborted:!1};g.current=mt,qn();const Sn=u.current;Sn.width=Se,Sn.height=Ge;const on=new Map,He=new Map,Rt=[],Jt=(F,pt)=>new Promise(wt=>{const $e=new Image;$e.crossOrigin="anonymous",$e.onload=()=>{on.set(F,$e),wt()},$e.onerror=()=>wt(),$e.src=pt}),Cn=(F,pt)=>new Promise(wt=>{const $e=document.createElement("video");$e.crossOrigin="anonymous",$e.muted=!0,$e.playsInline=!0,$e.preload="auto";let sn=!1;const Kt=()=>{sn||(sn=!0,He.set(F,$e),wt())};$e.oncanplay=()=>{sn||($e.currentTime=.001)},$e.onseeked=()=>Kt(),$e.onerror=()=>{console.warn("Failed to load video:",pt),Kt()},setTimeout(()=>Kt(),5e3),$e.src=pt,$e.load()});if(J.forEach(F=>{F.type==="video"?Rt.push(Cn(F.id,F.url)):F.type!=="audio"&&Rt.push(Jt(F.id,F.url))}),W.coverUrl&&(W.backgroundType==="video"?Rt.push(Cn("background",W.coverUrl)):Rt.push(Jt("cover",W.coverUrl))),E.backgroundSource==="image"&&E.backgroundImage&&Rt.push(Jt("__custom_bg__",E.backgroundImage)),E.showChannelInfo&&E.channelInfoImage&&Rt.push(Jt("__channel_info__",E.channelInfoImage)),await Promise.all(Rt),mt.aborted){ie(!1);return}try{const F=await lk({canvas:Sn,audioFile:Y,lyrics:Re,metadata:W,visualSlides:J,imageMap:on,videoMap:He,preset:be,customFontName:Ze,renderConfig:E,resolution:ke,aspectRatio:B,fps:he,quality:U,onProgress:(sn,Kt)=>{Oe(sn),de(Kt)},abortSignal:mt,isFirstSong:!0,isLastSong:!0}),pt=`${W.title||"video"}_${B.replace(":","-")}_webcodecs.${F.format}`,wt=URL.createObjectURL(F.blob),$e=document.createElement("a");$e.href=wt,$e.download=pt,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(wt),e.success(`Video exported successfully! (${Math.round(F.duration)}s)`)}catch(F){F.message!=="Render aborted"&&(console.error("WebCodecs render failed:",F),e.error(`Render failed: ${F.message}`))}finally{ie(!1),de("")}},Jl=async()=>{M==="ffmpeg"?await Zc():M==="webcodecs"?await Ys():await or()};Q.useEffect(()=>{v.current=Jl});const Oo=Q.useCallback(()=>{g.current&&(g.current.aborted=!0),p.current&&p.current.state==="recording"?p.current.stop():ie(!1),qn()},[qn]),Kl=Q.useCallback(()=>{if(r.current){const k=o.current?.currentTime||0;if(mn===-1&&k<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(mn!==-1){const Y=r.current.querySelector('[data-lyric-active="true"]');if(Y){const Re=r.current;if(Y.offsetHeight===0)return;const W=Y.offsetTop,Se=Y.offsetHeight,Ge=Re.clientHeight;let tt=.5;E.contentPosition==="top"&&(tt=.25),E.contentPosition==="bottom"&&(tt=.75);const Tt=W-Ge*tt+Se/2;Re.scrollTo({top:Tt,behavior:"smooth"})}}}},[mn,be,E.contentPosition]);Q.useEffect(()=>{Kl()},[Kl]),Q.useEffect(()=>{const k=setTimeout(()=>{Kl()},550);return()=>clearTimeout(k)},[z,ve,Mi,yl,Ee,ft,Kl]);const On=Q.useRef(null),Ho=Q.useCallback(()=>{if(se(!1),On.current&&clearTimeout(On.current),!P){const k=window.setTimeout(()=>{se(!0)},3e3);On.current=k}},[P]),lr=()=>{Ho()},Xl=Q.useRef(0),Go=k=>{Ho();const Y=Date.now();if(Y-Xl.current<300){if(k.target.closest(".no-minimal-mode-toggle"))return;$s(k)}Xl.current=Y};Q.useEffect(()=>{const k=Y=>{const Re=Y.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Re)||Ho(),!(Y.target instanceof HTMLInputElement||Y.target instanceof HTMLTextAreaElement)){if(P){Re==="escape"&&Oo();return}switch(Y.key.toLowerCase()){case" ":case"k":Y.preventDefault(),$l(),e.success(ze?"Paused":"Playing",{id:"play-pause"});break;case"s":Y.preventDefault(),qn(),e.success("Stopped",{id:"stop"});break;case"n":Y.preventDefault(),bn(),e.success("Next Song",{id:"next-song"});break;case"o":Y.preventDefault();const Se=!Ye;xt(Se),Se&&Be(!0),e.success(`Minimal Mode: ${Se?"On":"Off"}`,{id:"minimal-mode"});break;case"b":Y.preventDefault(),ql(),e.success("Previous Song",{id:"prev-song"});break;case"r":Y.preventDefault(),po();const Ge=we==="off"?"one":we==="one"?"all":we==="all"?"all_repeat":"off",tt={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};e.success(`Repeat: ${tt[Ge]}`,{id:"repeat"});break;case"l":Y.preventDefault();const Tt=!ft;Yt(Tt),Tt&&le(Xn.PLAYER);break;case"h":Y.preventDefault();const mt=!ve;Be(mt),e.success(mt?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"y":Y.preventDefault(),Ve(Me=>!Me);break;case"g":Y.preventDefault();const Sn=If.flatMap(Me=>Me.options.map(lt=>lt.value)),on=kt.current.lyricDisplayMode,Rt=(Sn.indexOf(on)+1)%Sn.length,Jt=Sn[Rt];at(Me=>({...Me,lyricDisplayMode:Jt})),e.success(`Lyric Mode: ${Jt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":Y.preventDefault();const Cn=Yv,F=kt.current.textCase,wt=(Cn.indexOf(F)+1)%Cn.length,$e=Cn[wt];at(Me=>({...Me,textCase:$e})),e.success(`Text Case: ${$e}`,{id:"text-case"});break;case"f":nr();break;case"i":Fo(Me=>!Me);break;case"p":gi(Me=>!Me);break;case"d":Y.preventDefault(),Ke(Me=>!Me);break;case"t":ft?(Yt(!1),le(Xn.EDITOR)):le(Me=>Me===Xn.PLAYER?Xn.EDITOR:Xn.PLAYER);break;case"m":Y.preventDefault();const sn=!Mt;j(sn),e.success(sn?"Muted":"Unmuted",{id:"mute"});break;case"x":Y.preventDefault();const Kt=kt.current.highlightEffect==="none";at(Me=>({...Me,highlightEffect:Me.highlightEffect==="none"?"karaoke":"none"})),e.success(`Highlight: ${Kt?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":Y.preventDefault();const Zi=Rf.flatMap(Me=>Me.options.map(lt=>lt.value)),ri=kt.current.highlightEffect||"none",ki=Zi.indexOf(ri),kn=((ki===-1?0:ki)+1)%Zi.length,ii=Zi[kn],un=Tc(ii);at(Me=>{const lt={...Me,highlightEffect:ii};return lt.useCustomHighlightColors=!1,un&&(lt.highlightColor=un.color,lt.highlightBackground=un.bg),lt}),e.success(`Effect: ${ii.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":Y.preventDefault();const ee=(sf.indexOf(be)+1)%sf.length,ui=sf[ee];Le(ui);const It=Fc[ui];if(It){const Me={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};at(lt=>({...lt,...Me,...It}))}let Rn=ui;for(const Me of np){const lt=Me.options.find(Ht=>Ht.value===ui);if(lt){Rn=lt.label;break}}e.success(`Preset: ${Rn}`,{id:"preset"});break;case"arrowleft":if(Y.preventDefault(),o.current){const Me=Math.max(0,o.current.currentTime-5);o.current.currentTime=Me,Qe(Me)}break;case"arrowright":if(Y.preventDefault(),o.current){const Me=Math.min(Pe,o.current.currentTime+5);o.current.currentTime=Me,Qe(Me)}break;case"arrowup":Y.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":Y.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":Y.preventDefault();const ji=kt.current.fontSizeScale,eo=Math.min(ji+.1,3);at(Me=>({...Me,fontSizeScale:eo})),e.success(`Font Size: ${(eo*100).toFixed(0)}%`,{id:"font-size"});break;case"-":Y.preventDefault();const mo=kt.current.fontSizeScale,go=Math.max(mo-.1,.1);at(Me=>({...Me,fontSizeScale:go})),e.success(`Font Size: ${(go*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(Y.ctrlKey||Y.metaKey)&&Y.shiftKey&&(Y.preventDefault(),v.current());break}}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[ze,we,Ee,P,Ho,Oo,ft,bn,ql,e,Ye,be,ve,Mt]),Q.useEffect(()=>{let k,Y=0;const Re=1e3/30,W=Se=>{if(o.current&&!o.current.paused&&ze){k=requestAnimationFrame(W);const Ge=Se-Y;Ge>Re&&(Y=Se-Ge%Re,Qe(o.current.currentTime))}};return ze&&!P&&(k=requestAnimationFrame(W)),()=>{k&&cancelAnimationFrame(k)}},[ze,P]);const Vo=Mi&&(!z||ve)&&!P,ho=yl&&(!z||ve)&&!P&&!Ye,Qi=Ft.length>0?Ft[0]:null;Qi?`${Qi.url}`:A.coverUrl&&`${A.coverUrl}`;const Sl=Q.useRef(null);return Q.useEffect(()=>{if(Ft.forEach(k=>{const Y=k.layer||0;if(E.layerVisibility?.visual?.[Y]!==!1&&k.type==="video"){const Re=document.getElementById(`video-preview-${k.id}`);if(Re)if(P)Re.paused||Re.pause();else{const W=k.playbackRate||1;let Se=(Ae-k.startTime)*W+(k.mediaStartOffset||0);const Ge=k.mediaDuration||Re.duration;Ge&&Ge>0&&Se>=Ge&&(Se=Se%Ge),Math.abs(Re.playbackRate-W)>.01&&(Re.playbackRate=W),Math.abs(Re.currentTime-Se)>.2&&(Re.currentTime=Se);const tt=k.isMuted!==!1;Re.muted!==tt&&(Re.muted=tt);const Tt=k.volume!==void 0?k.volume:1;Math.abs(Re.volume-Tt)>.01&&(Re.volume=Tt),ze&&Re.paused?Re.play().catch(()=>{}):!ze&&!Re.paused&&Re.pause()}}}),A.backgroundType==="video"&&Sl.current){const k=Sl.current;if(P)k.paused||k.pause();else{const Y=k.duration||1,Re=Ae%Y;Math.abs(k.currentTime-Re)>.1&&(k.currentTime=Re),ze&&k.paused?k.play().catch(()=>{}):!ze&&!k.paused&&k.pause()}}Qn.forEach(k=>{const Y=document.getElementById(`audio-preview-${k.id}`);if(Y){const Re=k.playbackRate||1,W=(Ae-k.startTime)*Re+(k.mediaStartOffset||0);Math.abs(Y.playbackRate-Re)>.01&&(Y.playbackRate=Re),Math.abs(Y.currentTime-W)>.2&&(Y.currentTime=W);const Se=k.isMuted===!0;Y.muted!==Se&&(Y.muted=Se);const Ge=k.volume!==void 0?k.volume:1;Math.abs(Y.volume-Ge)>.01&&(Y.volume=Ge),ze&&Y.paused?Y.play().catch(()=>{}):!ze&&!Y.paused&&Y.pause()}})},[Ae,ze,Ft,A,Qn,E.layerVisibility]),d.jsxs("div",{ref:s,onMouseMove:lr,onTouchStart:Go,onDoubleClick:$s,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${z&&!ve?"cursor-none":""}`,children:[d.jsx("audio",{ref:o,src:m||void 0,loop:we==="one",muted:Mt,onTimeUpdate:ir,onLoadedMetadata:Qc,onEnded:()=>{if(P)return;const k=Ie.length>0;we==="one"||(we==="all_repeat"?k?bn():o.current?.play():we==="all"&&k&&St<Ie.length-1?bn():De(!1))},crossOrigin:"anonymous"},b),Qn.map(k=>d.jsx("audio",{id:`audio-preview-${k.id}`,src:k.url,className:"hidden",playsInline:!0},k.id)),d.jsx("canvas",{ref:u,width:ai,height:uo,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),d.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[E.backgroundSource==="color"&&d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:E.backgroundColor}}),E.backgroundSource==="gradient"&&d.jsx("div",{className:"absolute inset-0",style:{background:E.backgroundGradient}}),E.backgroundSource==="image"&&E.backgroundImage&&d.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${E.backgroundImage})`}}),E.backgroundSource==="smart-gradient"&&d.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const k=E.backgroundColor||"#312e81",Y=parseInt(k.slice(1,3),16),Re=parseInt(k.slice(3,5),16),W=parseInt(k.slice(5,7),16),Se=`${Y},${Re},${W}`,Ge=`${Math.floor(Y*.6)},${Math.floor(Re*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${Se}), rgb(${Ge}) 50%, #000000)`})()}}),(E.backgroundSource==="timeline"||E.backgroundSource==="custom")&&A.coverUrl&&J.length===0&&(A.backgroundType==="video"?d.jsx("video",{ref:Sl,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${et?"opacity-60":"opacity-0"}`,muted:!0,loop:!P,playsInline:!0,preload:"auto",onLoadedData:()=>w(!0)}):d.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${E.backgroundSource==="custom"||Ft.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),E.backgroundSource==="color"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:E.backgroundColor}}),E.backgroundSource==="gradient"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:E.backgroundGradient}}),E.backgroundSource==="smart-gradient"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const k=E.backgroundColor||"#312e81",Y=parseInt(k.slice(1,3),16),Re=parseInt(k.slice(3,5),16),W=parseInt(k.slice(5,7),16),Se=`${Y},${Re},${W}`,Ge=`${Math.floor(Y*.6)},${Math.floor(Re*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${Se}), rgb(${Ge}) 50%, #000000)`})()}}),!A.coverUrl&&Ft.length===0&&(E.backgroundSource==="timeline"||E.backgroundSource==="custom")&&J.length===0&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),d.jsx("div",{className:`absolute inset-0 pointer-events-none ${E.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:E.backgroundSource==="timeline"&&Ft.map(k=>{const Y=k.layer||0;if(E.layerVisibility?.visual?.[Y]===!1)return null;const Re=E.visualTransitionType||"none",W=E.visualTransitionDuration||1;let Se=1;if(Re!=="none"){if(Ae<k.startTime+W){const Ge=(Ae-k.startTime)/W;Se=Math.max(0,Math.min(1,Ge))}if(Ae>=k.endTime){let Ge=!1;if(Re==="crossfade"&&(Ge=J.some(tt=>tt.id!==k.id&&(tt.layer||0)===(k.layer||0)&&tt.startTime>=k.endTime-.1&&tt.startTime<k.endTime+.2)),!Ge){const Tt=1-(Ae-k.endTime)/W;Se=Math.min(Se,Math.max(0,Math.min(1,Tt)))}}else if(Re==="fade-to-black"&&Ae>k.endTime-W){const Ge=(k.endTime-Ae)/W;Se=Math.min(Se,Math.max(0,Math.min(1,Ge)))}}return d.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:Se},children:k.type==="video"?d.jsx("video",{id:`video-preview-${k.id}`,src:k.url,className:"w-full h-full object-cover",muted:k.isMuted!==!1,playsInline:!0}):d.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${k.url})`}})},k.id)})}),d.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:E.backgroundBlurStrength>0?`blur(${E.backgroundBlurStrength}px)`:Ue?"blur(12px)":"none",backgroundColor:E.useRealColorMedia?"transparent":E.backgroundBlurStrength>0||Ue?"rgba(0,0,0,0.4)":void 0}}),E.enableGradientOverlay&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),d.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[E.showChannelInfo&&Ye&&d.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${E.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${E.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${E.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":E.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":E.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":E.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":E.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${E.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${E.channelInfoSizeScale??1})`,transformOrigin:E.channelInfoPosition?.includes("top")?E.channelInfoPosition?.includes("center")?"top center":E.channelInfoPosition?.includes("left")?"top left":"top right":E.channelInfoPosition?.includes("center")?"bottom center":E.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...E.channelInfoPosition?.includes("center")?E.channelInfoPosition?.includes("top")?{marginTop:`${(E.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(E.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(E.channelInfoMarginScale??1)*1.5}rem`}},children:[E.channelInfoImage&&E.channelInfoStyle!=="minimal"&&d.jsx("img",{src:E.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${E.channelInfoStyle==="circle"?"rounded-full":""}`}),E.channelInfoText&&E.channelInfoStyle!=="logo"&&(()=>{const k=E.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(k)?d.jsx("div",{className:`font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${E.channelInfoStyle==="minimal"||E.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,style:{fontFamily:E.channelInfoFontFamily,color:E.channelInfoFontColor||"white",fontWeight:E.channelInfoFontWeight||"bold",fontStyle:E.channelInfoFontStyle||"normal"},dangerouslySetInnerHTML:{__html:k}}):d.jsx("p",{className:`font-bold drop-shadow-md text-lg 
                    ${E.channelInfoStyle==="minimal"||E.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,style:{fontFamily:E.channelInfoFontFamily,color:E.channelInfoFontColor||"white",fontWeight:E.channelInfoFontWeight||"bold",fontStyle:E.channelInfoFontStyle||"normal"},children:E.channelInfoText})})()]}),Ye&&d.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${Vo?"opacity-100":"opacity-0"}
              ${E.infoPosition==="top-left"?"top-0 left-0 items-start text-left":E.infoPosition==="top-right"?"top-0 right-0 items-end text-right":E.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":E.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":E.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":E.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${E.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${E.infoSizeScale??1})`,transformOrigin:E.infoPosition?.includes("top")?E.infoPosition?.includes("center")?"top center":E.infoPosition?.includes("right")?"top right":"top left":E.infoPosition?.includes("center")?"bottom center":E.infoPosition?.includes("right")?"bottom right":"bottom left",...E.infoPosition?.includes("center")?E.infoPosition?.includes("top")?{marginTop:`${(E.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(E.infoMarginScale??1)*1.5}rem`}:{margin:`${(E.infoMarginScale??1)*1.5}rem`}},children:d.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${E.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${E.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${E.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${E.infoStyle==="modern"||E.infoStyle==="minimal",""}
            `,children:[d.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!E.showCover||E.infoStyle==="minimal"||E.infoStyle==="modern"?"hidden":"block"}
                ${E.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?d.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):d.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:d.jsx(ks,{size:24})}),d.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[d.jsx(so,{size:20,className:"text-white"}),d.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:Wi})]})]}),d.jsxs("div",{className:`flex flex-col justify-center ${E.infoPosition?.includes("right")?"items-end":E.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[d.jsx("h1",{className:`font-bold drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${E.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${E.infoStyle==="minimal"?"text-sm":E.infoStyle==="modern"||E.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,style:{fontFamily:E.infoFontFamily,color:E.infoFontColor||"white",fontWeight:E.infoFontWeight||"bold",fontStyle:E.infoFontStyle||"normal"},children:A.title}),d.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${E.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:d.jsx("p",{className:`drop-shadow-md
                    ${E.infoStyle==="minimal"?"text-[10px]":E.infoStyle==="modern"||E.infoStyle==="modern_art"?"text-sm font-medium":"text-xs"}
                  `,style:{fontFamily:E.infoFontFamily,color:E.infoFontColor||(E.infoStyle==="minimal"?"#a1a1aa":"#d4d4d8"),fontWeight:E.infoFontWeight||"bold",fontStyle:E.infoFontStyle||"normal"},children:A.artist})})]})]})}),d.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Vo&&!Ye?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:d.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[d.jsx("div",{className:"flex gap-4",children:d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${E.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?d.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):d.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:d.jsx(ks,{size:24})}),d.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[d.jsx(so,{size:20,className:"text-white"}),d.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:Wi})]})]}),d.jsxs("div",{children:[d.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${E.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),d.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${E.showArtist?"opacity-100":"opacity-0"}`,children:d.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),d.jsxs("div",{className:`flex gap-2 flex-wrap ${Ye?"hidden":""}`,children:[d.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:d.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),d.jsx("a",{href:"https://ai.studio/apps/drive/11YaG-jtLXb8BnXM3aMfj7wmKIw-S3mt3?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalEditorPlus - Universal Lyrics/Subtitle Editor",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalEditorPlus"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),d.jsx("button",{onClick:()=>Be(!ve),className:`p-2 rounded-full transition-colors ${ve?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:ve?d.jsx(Pa,{size:20}):d.jsx(Fa,{size:20})}),d.jsx("button",{onClick:()=>xt(!Ye),className:`p-2 rounded-full transition-colors ${Ye?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:Ye?d.jsx(Va,{size:20}):d.jsx(ng,{size:20})}),d.jsx("button",{onClick:()=>{const k=!ft;Yt(k),k&&le(Xn.PLAYER)},className:`p-2 rounded-full transition-colors ${ft?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:d.jsx(kc,{size:20})}),d.jsx("button",{onClick:()=>{ft&&Yt(!1),le(Ee===Xn.PLAYER?Xn.EDITOR:Xn.PLAYER)},className:`p-2 rounded-full transition-colors ${Ee===Xn.EDITOR&&!ft?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:d.jsx(Wy,{size:20})}),d.jsx("button",{onMouseDown:k=>{k.stopPropagation(),Ke(!Fe)},className:`p-2 rounded-full transition-colors ${Fe?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:d.jsx(xc,{size:20})}),d.jsx("button",{onMouseDown:k=>{k.stopPropagation(),Ve(!rt)},className:`p-2 rounded-full transition-colors ${rt?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Keyboard Shortcuts (Y)",children:d.jsx(Mc,{size:20})}),d.jsx("button",{onClick:nr,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:bt?d.jsx(ng,{size:20}):d.jsx(Va,{size:20})})]})]})}),d.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${E.contentPosition==="top"?"items-start pt-[10vh]":E.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:V.length>0?d.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${E.textAlign==="left"?"text-left":E.textAlign==="right"?"text-right":"text-center"} ${E.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:(Vo||ho)&&be!=="subtitle"?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[d.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${E.fontSizeScale}); line-height: calc(1.75rem * ${E.fontSizeScale} * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${E.fontSizeScale}); line-height: calc(1.75rem * ${E.fontSizeScale} * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${E.fontSizeScale}); line-height: calc(2rem * ${E.fontSizeScale} * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${E.fontSizeScale}); line-height: calc(2.25rem * ${E.fontSizeScale} * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${E.fontSizeScale}); line-height: calc(2.5rem * ${E.fontSizeScale} * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${E.fontSizeScale}); line-height: calc(1 * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${E.fontSizeScale}); line-height: calc(1 * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${E.fontSizeScale}); line-height: calc(1 * ${E.lyricLineHeight||1.2}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${E.fontSizeScale}); line-height: calc(1 * ${E.lyricLineHeight||1.2}); }
              `}),d.jsx("div",{className:`transition-all duration-500 ${E.contentPosition==="center"?Ee===Xn.EDITOR||ft?"h-[25vh]":!Vo&&!ho?"h-[50vh]":"h-[40vh]":"h-0"}`}),Pt.map((k,Y)=>{const Re=Y===mn,W=Ee===Xn.EDITOR||ft,Se=["9:16","3:4","1:1","1:2","2:3"].includes(B);if(E.lyricDisplayMode!=="all"){if(E.lyricDisplayMode==="active-only"&&Y!==mn)return d.jsx("p",{className:"hidden"},Y);if(E.lyricDisplayMode==="next-only"&&(Y<mn||Y>mn+1))return d.jsx("p",{className:"hidden"},Y);if(E.lyricDisplayMode==="previous-next"&&Math.abs(Y-mn)>1)return d.jsx("p",{className:"hidden"},Y)}else if(be==="none"||be==="just_video")return d.jsx("p",{className:"hidden"},Y);let Ge="",tt="";const Tt=E.transitionEffect;let mt="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Re?Tt==="slide"?mt+="translate-y-0 opacity-100 ":Tt==="zoom"?mt+="scale-100 opacity-100 ":Tt==="float"?mt+="translate-y-0 opacity-100 ":Tt==="blur"?mt+="blur-0 opacity-100 ":Tt==="fade"?mt+="opacity-100 ":Tt==="drop"?mt+="trans-drop-enter opacity-100 ":Tt==="lightspeed"?mt+="trans-lightspeed-enter opacity-100 ":Tt==="roll"?mt+="trans-roll-enter opacity-100 ":Tt==="elastic"?mt+="trans-elastic-enter opacity-100 ":Tt==="flip"?mt+="trans-flip-enter opacity-100 ":Tt==="rotate-in"?mt+="trans-rotate-in-enter opacity-100 ":Tt==="spiral"?mt+="trans-spiral-enter opacity-100 ":Tt==="shatter"?mt+="trans-shatter-enter opacity-100 ":mt+="opacity-100 ":(Tt==="slide"?mt+="translate-y-4 opacity-0 ":Tt==="zoom"?mt+="scale-75 opacity-0 ":Tt==="float"?mt+="translate-y-8 opacity-0 ":Tt==="blur"?mt+="blur-md opacity-0 ":Tt==="fade"?mt+="opacity-50 ":Tt==="drop"?mt+="trans-drop-exit opacity-0 ":Tt==="roll"?mt+="trans-roll-exit opacity-0 ":mt+="opacity-0 ",Tt==="none"&&(mt=mt.replace("opacity-0","opacity-50"))),be==="large"||be==="large_upper"){const wt=Se?W?"text-4xl":"text-6xl":W?"text-6xl":"text-8xl",$e=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${wt} font-black text-white ${be==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,tt=`${$e} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(be==="big_center"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} font-black text-white uppercase tracking-tight text-center`,tt=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(be==="testing_up"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-white uppercase tracking-tight text-center`,tt=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(be==="testing"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-white tracking-tight text-center`,tt=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(be==="one_line_up"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-white uppercase tracking-tight text-center`,tt=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(be==="one_line"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-white tracking-tight text-center`,tt=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(be==="metal"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,tt=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(be==="kids"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,tt=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(be==="sad"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",pt=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${F} text-zinc-200 tracking-wider text-center drop-shadow-md`,tt=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(be==="romantic"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",pt=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${F} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,tt=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(be==="tech"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,tt=`${pt} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(be==="gothic"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${F} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,tt=`${pt} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(be==="monospace"){const F=Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",pt=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${F} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,tt=`${pt} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(be==="classic"){const F=Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-6xl",pt=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${F} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,tt=`${pt} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(be==="slideshow"||be==="just_video")Ge=`${Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,tt="hidden";else if(be==="subtitle"){Ge=`${Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center whitespace-pre-wrap`,tt="hidden";let pt="bottom-16";W&&ho?pt="bottom-[560px]":W?pt="bottom-[360px]":ho&&(pt="bottom-[280px]"),mt=mt.replace("absolute","").replace("transform",""),mt+=`fixed ${pt} left-1/2 -translate-x-1/2 w-full px-8 z-[100] pointer-events-none `}else if(be==="custom"){const F=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl",wt=E.textAlign==="center"?"text-center":E.textAlign==="right"?"text-right":"text-left";Ge=`${F} tracking-tight ${wt}`,tt=`${pt} opacity-40 hover:opacity-100 ${wt}`}else{const F=Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",pt=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${F} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,tt=`${pt} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const on=(E.lyricStyleTarget||"active-only")==="all"||Re;let He={color:E.fontColor,fontWeight:on?E.fontWeight:void 0,fontStyle:on?E.fontStyle:void 0,textDecoration:on?E.textDecoration:void 0,fontFamily:E.fontFamily==="CustomFont"?"CustomFont, sans-serif":E.fontFamily};if((be==="custom"||be==="default")&&Re&&E.textEffect!=="none"){const F=E.textEffect;F==="glow"?He.textShadow=`0 0 10px ${E.fontColor}, 0 0 20px ${E.fontColor}`:F==="neon"?He.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${E.fontColor}, 0 0 40px ${E.fontColor}, 0 0 80px ${E.fontColor}`:F==="neon-multi"?He.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":F==="shadow"?He.textShadow="3px 3px 6px rgba(0,0,0,0.7)":F==="outline"?He.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":F==="3d"?He.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":F==="emboss"?(He.color="#ebebeb",He.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):F==="gold"?(He.background="linear-gradient(to bottom, #d4af37, #C5A028)",He.WebkitBackgroundClip="text",He.color="transparent"):F==="chrome"?(He.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",He.WebkitBackgroundClip="text",He.color="transparent"):F==="fire"?(He.color="#fff",He.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):F==="frozen"?(He.color="#fff",He.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):F==="vhs"?He.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":F==="gradient"?(He.background=`linear-gradient(to right, ${E.fontColor}, #ffffff)`,He.WebkitBackgroundClip="text",He.color="transparent"):F==="rainbow"?(He.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",He.WebkitBackgroundClip="text",He.color="transparent"):F==="glass"?(He.backgroundColor="rgba(255, 255, 255, 0.1)",He.backdropFilter="blur(8px)",He.padding="0.5rem 1rem",He.borderRadius="0.75rem",He.border="1px solid rgba(255, 255, 255, 0.2)",He.display="inline-block"):F==="mirror"?(He.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",He.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):F==="retro"?(He.fontFamily="'Press Start 2P', cursive",He.color="#ff00ff",He.textShadow="4px 4px 0px #00ffff"):F==="cyberpunk"?(He.color="#fcee0a",He.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",He.fontFamily="'Orbitron', sans-serif",He.letterSpacing="1px"):F==="glitch-text"?(He.animation="anim-glitch 0.4s infinite linear",He.position="relative"):F==="hologram"?(He.color="rgba(0, 255, 255, 0.7)",He.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",He.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",He.WebkitBackgroundClip="text"):F==="comic"&&(He.fontFamily="'Bangers', cursive",He.color="#ffcc00",He.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",He.letterSpacing="1px")}let Rt=k.text;const Jt=E.textCase;Jt==="upper"?Rt=Rt.toUpperCase():Jt==="lower"?Rt=Rt.toLowerCase():Jt==="title"?Rt=Rt.replace(/\w\S*/g,F=>F.charAt(0).toUpperCase()+F.substr(1).toLowerCase()):Jt==="sentence"?Rt=Rt.charAt(0).toUpperCase()+Rt.slice(1).toLowerCase():Jt==="invert"&&(Rt=Rt.replace(/\w\S*/g,F=>F.charAt(0).toLowerCase()+F.slice(1).toUpperCase())),Rt=Rt.replace(/\s*([-])\s*/g,"$1"),Re&&E.textAnimation==="typewriter"&&(Rt=Rt.substring(0,Math.max(0,Math.floor((Ae-k.time)*35))));let Cn=Rt;if(Re&&E.highlightEffect!=="none"){const F=E.highlightEffect,pt=k.words&&k.words.length>0;if((F==="karaoke"||F?.startsWith("karaoke-"))&&pt)Cn=k.words.filter(wt=>wt.text===`
`||wt.text.trim().length>0).map((wt,$e,sn)=>{if(wt.text===`
`)return d.jsx("br",{},$e);let Kt=wt.text.trim();if(Jt==="upper")Kt=Kt.toUpperCase();else if(Jt==="lower")Kt=Kt.toLowerCase();else if(Jt==="title")Kt=Kt.replace(/\w\S*/g,It=>It.charAt(0).toUpperCase()+It.substr(1).toLowerCase());else if(Jt==="sentence"){const It=Kt.toLowerCase();Kt=$e===0?It.charAt(0).toUpperCase()+It.slice(1):It}else Jt==="invert"&&(Kt=Kt.replace(/\w\S*/g,It=>It.charAt(0).toLowerCase()+It.slice(1).toUpperCase()));const Zi=wt.startTime+ce,ri=wt.endTime+ce,ki=Ae>=Zi&&Ae<ri,jo=Ae>=ri,kn=/[-]$/,ii=/^[-]/;let un=!Kt.endsWith(" ");kn.test(Kt.trim())&&(un=!1);const ci=sn[$e+1];ci&&ii.test(ci.text.trim())&&(un=!1),ci&&ci.text===`
`&&(un=!1),$e===sn.length-1&&(un=!1);let ee={display:"inline-block",transition:"all 0.1s ease"};if(E.textDecoration&&E.textDecoration!=="none"&&(ee.textDecoration=E.textDecoration),!ki&&!jo)F==="karaoke-smooth-white"?(ee.opacity=1,ee.color="#ffffff"):ee.opacity=.5,ee.transform="scale(1)";else if(jo)if(F==="karaoke-fill"){const It=E.highlightBackground||"#fb923c";ee.backgroundColor=It,ee.color="#000",ee.padding="2px 6px",ee.borderRadius="4px",ee.opacity=1}else F==="karaoke-smooth"||F==="karaoke-smooth-white"?(ee.color=E.highlightColor||"#fb923c",ee.opacity=1):(be==="custom"&&(ee.color=E.fontColor),ee.opacity=1);if(ki){const It=E.highlightColor||"#fb923c",Rn=E.highlightBackground||"#fb923c";if(F==="karaoke-smooth"||F==="karaoke-smooth-white"){const ji=wt.endTime-wt.startTime,eo=Ae-Zi,mo=Math.min(100,Math.max(0,eo/ji*100)),go=F==="karaoke-smooth-white"?"#ffffff":E.fontColor||"#ffffff";ee.backgroundImage=`linear-gradient(90deg, ${It} ${mo}%, ${go} ${mo}%)`,ee.backgroundClip="text",ee.WebkitBackgroundClip="text",ee.color="transparent",ee.WebkitTextFillColor="transparent",ee.textShadow="none"}else F==="karaoke"||F==="color"?(ee.color=It,ee.textShadow=`0 0 10px ${It}`):F==="karaoke-neon"?(ee.color="#fff",ee.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${It}, 0 0 35px ${It}`):F==="karaoke-scale"?(ee.color=It,ee.transform="scale(1.3)"):F==="karaoke-underline"?(ee.color=It,ee.textDecoration=(ee.textDecoration||"")+" underline",ee.textDecorationColor=It,ee.textUnderlineOffset="4px"):F==="karaoke-bounce"?(ee.color=It,ee.transform="translateY(-10px)"):F==="karaoke-fill"?(ee.backgroundColor=Rn,ee.color="#000",ee.padding="2px 6px",ee.borderRadius="4px"):F==="karaoke-outline"?(ee.color="transparent",ee.WebkitTextStroke=`2px ${It}`):F==="karaoke-shadow"?(ee.color=It,ee.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):F==="karaoke-gradient"?(ee.background=`linear-gradient(90deg, ${It}, ${Rn})`,ee.WebkitBackgroundClip="text",ee.WebkitTextFillColor="transparent"):F==="karaoke-wave"?(ee.color=It,ee.animation="bounce 0.3s ease infinite"):F==="karaoke-pill"?(ee.backgroundColor=Rn,ee.color="#000",ee.padding="4px 16px",ee.borderRadius="9999px"):F==="karaoke-box"?(ee.backgroundColor=Rn,ee.color="#000",ee.padding="4px 8px",ee.borderRadius="0"):F==="karaoke-rounded"?(ee.backgroundColor=Rn,ee.color="#000",ee.padding="4px 12px",ee.padding="4px 12px",ee.borderRadius="12px"):F==="karaoke-glass"?(ee.backgroundColor="rgba(255, 255, 255, 0.1)",ee.color="#fff",ee.padding="4px 12px",ee.borderRadius="8px",ee.backdropFilter="blur(4px)",ee.border="1px solid rgba(255, 255, 255, 0.3)",ee.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):F==="karaoke-neon-multi"?(ee.color="#fff",ee.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):F==="karaoke-soft-glow"?(ee.color=It,ee.textShadow=`0 0 5px ${It}, 0 0 15px ${It}, 0 0 30px ${It}`):F==="karaoke-3d"?ee.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":F==="karaoke-emboss"?(ee.color="#ebebeb",ee.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):F==="karaoke-chrome"?(ee.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",ee.WebkitBackgroundClip="text",ee.color="transparent"):F==="karaoke-gold"?(ee.background="linear-gradient(to bottom, #d4af37, #C5A028)",ee.WebkitBackgroundClip="text",ee.color="transparent"):F==="karaoke-fire"?(ee.color="#fff",ee.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):F==="karaoke-frozen"?(ee.color="#fff",ee.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):F==="karaoke-rainbow"?(ee.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",ee.WebkitBackgroundClip="text",ee.color="transparent"):F==="karaoke-mirror"?(ee.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",ee.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):F==="karaoke-vhs"?ee.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":F==="karaoke-retro"?(ee.fontFamily="'Press Start 2P', cursive",ee.color="#ff00ff",ee.textShadow="4px 4px 0px #00ffff"):F==="karaoke-cyberpunk"?(ee.color="#fcee0a",ee.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",ee.fontFamily="'Orbitron', sans-serif"):F==="karaoke-hologram"?(ee.color="rgba(0, 255, 255, 0.7)",ee.textShadow="0 0 5px rgba(0,255,255,0.5)"):F==="karaoke-comic"?(ee.fontFamily="'Bangers', cursive",ee.color="#ffcc00",ee.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):F==="karaoke-glitch-text"?ee.animation="anim-glitch 0.4s infinite linear":F==="karaoke-pulse"?ee.animation="anim-pulse 1s infinite ease-in-out":F==="karaoke-breathe"?ee.animation="anim-breathe 2s infinite ease-in-out":F==="karaoke-float"?ee.animation="anim-float 2s infinite ease-in-out":F==="karaoke-sway"?ee.animation="anim-sway 2s infinite ease-in-out":F==="karaoke-flicker"?ee.animation="anim-flicker 2s infinite linear":F==="karaoke-shake"?ee.animation="anim-shake 0.2s infinite linear":F==="karaoke-wobble"?ee.animation="anim-wobble 1s infinite ease-in-out":F==="karaoke-jello"?ee.animation="anim-jello 1s infinite":F==="karaoke-rubberband"?ee.animation="anim-rubberband 1s infinite":F==="karaoke-heartbeat"?ee.animation="anim-heartbeat 1.3s infinite ease-in-out":F==="karaoke-flash"?ee.animation="anim-flash 1s infinite":F==="karaoke-tada"?ee.animation="anim-tada 1s infinite":F==="karaoke-swing"?ee.animation="anim-swing 2s infinite":F==="karaoke-rotate"?ee.animation="anim-rotate 4s infinite linear":F==="karaoke-spin"?ee.animation="anim-rotate 1s infinite linear":F==="karaoke-glitch"?ee.animation="anim-glitch 0.3s infinite linear":F==="karaoke-typewriter"?(ee.animation="typewriter-reveal 0.5s steps(10, end) forwards",ee.whiteSpace="nowrap",ee.overflow="hidden",ee.display="inline-block",ee.verticalAlign="bottom"):F==="karaoke-fade"?ee.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":F==="karaoke-slide"?ee.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":F==="karaoke-drop"?ee.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":F==="karaoke-lightspeed"?ee.animation="trans-lightspeed-in 0.5s ease-out forwards":F==="karaoke-roll"?ee.animation="trans-roll-in 0.5s ease-out forwards":F==="karaoke-zoom"?ee.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":F==="karaoke-elastic"?ee.animation="trans-elastic-in 0.7s ease-out forwards":F==="karaoke-scale-rotate"?ee.animation="trans-scale-rotate-in 0.5s ease-out forwards":F==="karaoke-flip"?ee.animation="trans-flip-in 0.5s ease-out forwards":F==="karaoke-rotate-in"?ee.animation="trans-rotate-in 0.5s ease-out forwards":F==="karaoke-spiral"?ee.animation="trans-spiral-in 0.6s ease-out forwards":F==="karaoke-blur"?ee.animation="trans-blur-in 0.4s ease-out forwards":F==="karaoke-shatter"?ee.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(F||"")&&(ee.color=It,ee.textShadow=`0 0 10px ${It}`,F?.includes("glow")&&(ee.textShadow=`0 0 5px ${It}, 0 0 15px ${It}, 0 0 30px ${It}`))}const ui=d.jsx("span",{className:"inline-block",style:ee,children:Kt},$e);return un?d.jsxs(Vf.Fragment,{children:[ui," "]},$e):ui});else if(F==="karaoke"||F?.startsWith("karaoke-")){const wt=E.highlightColor||"#fb923c",$e=E.highlightBackground||"#fb923c";He.color=wt,F==="karaoke-neon"&&(He.textShadow=`0 0 10px ${wt}, 0 0 20px ${wt}`),F==="karaoke-scale"&&(He.transform=(He.transform||"")+" scale(1.1)"),F==="karaoke-underline"&&(He.textDecoration="underline"),F==="karaoke-bounce"&&(He.transform=(He.transform||"")+" translateY(-5px)"),F==="karaoke-fill"&&(He.backgroundColor=$e,He.color="#000",He.padding="4px 12px",He.borderRadius="6px"),F==="karaoke-outline"&&(He.color="transparent",He.WebkitTextStroke=`2px ${wt}`),F==="karaoke-shadow"&&(He.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),F==="karaoke-gradient"&&(He.background=`linear-gradient(90deg, ${wt}, ${$e})`,He.WebkitBackgroundClip="text",He.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(F)&&(He.backgroundColor=$e,He.color="#000",He.padding="4px 16px",He.borderRadius=F==="karaoke-pill"?"9999px":F==="karaoke-rounded"?"12px":"0"),F?.includes("glow")&&(He.textShadow=`0 0 10px ${wt}, 0 0 20px ${wt}`)}else F==="scale"?He.color=E.highlightColor||"#fb923c":E.highlightEffect==="background"&&(He.backgroundColor=(E.highlightBackground||"#fb923c")+"4D",He.padding="0 10px",He.borderRadius="8px")}return d.jsx("p",{"data-lyric-active":Re?"true":"false",className:`${mt} ${Re?Ge:tt}`,onClick:()=>{Re&&(navigator.clipboard.writeText(k.text),e.success("Lyric copied to clipboard",1500)),o.current&&!P&&(o.current.currentTime=k.time,Qe(k.time))},children:d.jsx("span",{className:`inline-block ${Re&&E.textAnimation!=="none"&&E.textAnimation!=="typewriter"?`text-anim-${E.textAnimation}`:""}`,children:d.jsx("span",{style:He,className:"inline-block",children:Cn})})},Y)}),d.jsx("div",{className:`transition-all duration-500 ${E.contentPosition==="center"?Ee===Xn.EDITOR||ft?"h-[25vh]":!Vo&&!ho?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):d.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!Qi&&be!=="none"&&d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[d.jsx(ks,{size:64,className:"opacity-20"}),d.jsx("p",{children:"Load audio & lyrics to start"}),d.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),d.jsx("div",{className:`no-minimal-mode-toggle transition-all duration-500 ease-in-out overflow-hidden ${ho?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:d.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:d.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 group",children:[d.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Rs(Ae)}),d.jsxs("div",{ref:Zt,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),bl(k.clientX)},onPointerMove:k=>{k.buttons===1&&bl(k.clientX)},children:[d.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${Ae/Pe*100}%`}}),d.jsx("input",{type:"range",min:"0",max:Pe||0,value:Ae,onChange:Yl,disabled:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),d.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Rs(Pe)}),d.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[d.jsx("button",{onClick:()=>j(!Mt),className:"text-zinc-400 hover:text-white",children:Mt||ht===0?d.jsx(Ns,{size:16}):d.jsx(hl,{size:16})}),d.jsxs("div",{ref:nt,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),ni(k.clientX)},onPointerMove:k=>{k.buttons===1&&ni(k.clientX)},children:[d.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${Mt?0:ht*100}%`}}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Mt?0:ht,onChange:Vi,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),d.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[d.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[d.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio or video",children:[d.jsx(ks,{size:18}),d.jsx("input",{type:"file",accept:"audio/*,video/*",className:"hidden",onChange:vl,disabled:P})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${V.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt, .vtt, .ttml)",children:[d.jsx(Ac,{size:18}),d.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml,.vtt",className:"hidden",onChange:Po,disabled:P})]}),V.length>0&&d.jsx("button",{onClick:()=>G([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:P,children:d.jsx(Ni,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[d.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[ce>0?"+":"",ce.toFixed(1),"s"]}),d.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[d.jsx("button",{onClick:()=>ge(k=>parseFloat((k+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:P,children:d.jsx(ff,{size:12})}),d.jsx("button",{onClick:()=>ge(k=>parseFloat((k-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:P,children:d.jsx(Qa,{size:12})})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${Ze?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:Ze?`Custom Font: ${Ze}`:"Load Custom Font (.ttf, .otf, .woff)",children:[d.jsx(ml,{size:18}),d.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:fo,disabled:P})]}),Ze&&d.jsx("button",{onClick:()=>R(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:P,children:d.jsx(Ni,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[d.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(E.fontSizeScale*100),"%"]}),d.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[d.jsx("button",{onClick:()=>at(k=>({...k,fontSizeScale:Math.min(k.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:P,children:d.jsx(ff,{size:12})}),d.jsx("button",{onClick:()=>at(k=>({...k,fontSizeScale:Math.max(k.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:P,children:d.jsx(Qa,{size:12})})]})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:be,onChange:k=>{const Y=k.target.value;Le(Y);const Re=Fc[Y];if(Re){const W={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};at(Se=>({...Se,...W,...Re}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:P,title:"Select Visual Preset",children:[d.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),d.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),d.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),d.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),d.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),d.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),d.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),d.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),d.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),d.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),d.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),d.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),d.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),d.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),d.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),d.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),d.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),d.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),d.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),d.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),d.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),d.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:qn,title:"Stop (S)",disabled:P,children:d.jsx(gf,{size:20,fill:"currentColor"})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P||Ie.length===0,onClick:ql,title:"Previous Song",children:d.jsx(kS,{size:24})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:d.jsx(bS,{size:20})}),d.jsx("button",{onClick:$l,disabled:P,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:ze?d.jsx(Qy,{size:28,fill:"currentColor"}):d.jsx(pf,{size:28,fill:"currentColor",className:"ml-1"})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:d.jsx(V1,{size:20})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P||Ie.length===0,onClick:bn,title:"Next Song",children:d.jsx(IS,{size:24})}),d.jsxs("button",{className:`transition-colors disabled:opacity-50 ${we!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:po,title:`Repeat: ${we==="off"?"Off":we==="one"?"One":we==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:P,children:[we==="one"&&d.jsx(yS,{size:20}),we==="all_repeat"&&d.jsx(ig,{size:20}),we==="all"&&d.jsx(kc,{size:20}),we==="off"&&d.jsx(ig,{size:20,className:"opacity-50"})]})]}),d.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>at(k=>({...k,backgroundBlurStrength:k.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${Ue?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${Ue?"On":"Off"}`,disabled:P,children:Ue?"BLUR":"SHARP"}),d.jsx("button",{onClick:()=>at(k=>({...k,highlightEffect:k.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${E.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:d.jsx(ml,{size:20})}),d.jsx("button",{onClick:()=>ye(k=>k==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:P,children:ke}),d.jsx("button",{onClick:()=>_e(k=>k==="16:9"?"9:16":k==="9:16"?"3:4":k==="3:4"?"1:1":k==="1:1"?"1:2":k==="1:2"?"2:1":k==="2:1"?"2:3":k==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:P,children:B})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:Ne,onChange:k=>xe(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:P,title:"Select Video Codec",children:[d.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),vt.map(k=>d.jsx("option",{value:k.value,className:"bg-zinc-900",children:k.label},k.value))]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:U,onChange:k=>$(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:P,title:"Select Quality (Bitrate)",children:[d.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),d.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),d.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),d.jsx("button",{onClick:Jl,disabled:P||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:`Export as Video (${M==="ffmpeg"?"FFmpeg":"MediaRecorder"})`,children:d.jsx(ja,{size:18})})]})]})]})})}),ft?d.jsx("div",{className:"no-minimal-mode-toggle animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:d.jsx(kM,{playlist:Ie,setPlaylist:je,currentTrackIndex:St,setCurrentTrackIndex:Et,onPlayTrack:yi,isPlaying:ze,onTogglePlay:$l,currentTime:Ae,onSeek:k=>{o.current&&!P&&(o.current.currentTime=k,Qe(k))},onClearPlaylist:()=>{qn(),x(null),G([]),Et(-1),_({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:k=>{k===St?(qn(),x(null),G([]),Et(-1),_({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):k<St&&Et(Y=>Y-1),je(Y=>{const Re=[...Y];return Re.splice(k,1),Re})},onClose:()=>Yt(!1)})}):Ee===Xn.EDITOR&&d.jsx("div",{className:"no-minimal-mode-toggle animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:d.jsx(pT,{slides:J,setSlides:fe,currentTime:Ae,duration:Pe||60,lyrics:V,onSeek:k=>{o.current&&!P&&(o.current.currentTime=k,Qe(k))},onClose:()=>le(Xn.PLAYER),renderConfig:E,setRenderConfig:at})})]}),P&&d.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[d.jsx("div",{className:M==="ffmpeg"?"animate-pulse":"animate-bounce",children:d.jsx(ja,{size:48,className:M==="ffmpeg"?"text-orange-500":"text-purple-500"})}),d.jsxs("h2",{className:"text-2xl font-bold text-white",children:[M==="ffmpeg"?"FFmpeg Rendering":"Rendering Video"," (",B," ",ke,")"]}),d.jsx("p",{className:"text-zinc-400 max-w-md",children:M==="ffmpeg"?d.jsxs(d.Fragment,{children:["Frame-by-frame capture using FFmpeg WASM.",d.jsx("br",{}),d.jsx("span",{className:"text-orange-400 font-medium",children:re||"Initializing..."}),d.jsx("br",{}),"This is faster than realtime - no audio playback needed."]}):d.jsxs(d.Fragment,{children:["Rendering in real-time using Canvas 2D engine.",d.jsx("br",{}),"The audio will play during capture.",d.jsx("br",{}),"Please keep this tab active for best performance."]})}),d.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-300 ease-linear ${M==="ffmpeg"?"bg-orange-500":"bg-purple-500"}`,style:{width:`${pe}%`}})}),d.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(pe),"%"]}),d.jsxs("button",{onClick:Oo,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[d.jsx(gf,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),Fe&&d.jsx(LM,{config:E,setConfig:at,preset:be,setPreset:Le,onClose:()=>Ke(!1),isPlaylistMode:ft,hasPlaylist:Ie.length>0,onRender:Jl,customFontName:Ze,onFontUpload:fo,onClearCustomFont:()=>{R(null),at(k=>({...k,fontFamily:"ui-sans-serif, system-ui, sans-serif"}))},customChannelFontName:qe,onChannelFontUpload:Bo,onClearChannelCustomFont:()=>{L(null),at(k=>({...k,channelInfoFontFamily:void 0}))},customInfoFontName:te,onInfoFontUpload:xl,onClearInfoCustomFont:()=>{oe(null),at(k=>({...k,infoFontFamily:void 0}))},resolution:ke,setResolution:ye,aspectRatio:B,setAspectRatio:_e,renderCodec:Ne,setRenderCodec:xe,supportedCodecs:vt,renderQuality:U,setRenderQuality:$,renderFps:he,setRenderFps:C,renderEngine:M,setRenderEngine:ne,ffmpegCodec:I,setFfmpegCodec:ue}),rt&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>Ve(!1),children:d.jsxs("div",{className:"no-minimal-mode-toggle bg-zinc-900 border border-white/10 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",onClick:k=>k.stopPropagation(),children:[d.jsx("button",{onClick:()=>Ve(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Ni,{size:20})}),d.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[d.jsx(Mc,{className:"text-purple-500"}),"Keyboard Shortcuts"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Playback"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Space"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"S"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Rewind 5s"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Forward 5s"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"R"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Mute"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"M"})]})]}),d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Interface"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"F"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"O"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Hold UI (No Auto-Hide)"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"H"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Header Info"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"I"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Shortcut Info"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Y"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"P"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Editor & Styles"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Timeline"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"T"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Playlist"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"L"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"D"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Export Video"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Ctrl+Shift+E"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"+ / -"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Visual Preset"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"J"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Highight Effect"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Z"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"X"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Text Case"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"C"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Lyric Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"G"})]})]}),d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Mouse & Touch"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Minimal Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Double Click / Tap"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Seek to Lyric"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Line"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Copy Active Lyric"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Active Line"})]})]})]})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-white/5 text-center",children:d.jsx("p",{className:"text-zinc-500 text-sm",children:"Shortcuts are disabled during video rendering."})})]})})]})}const dx=document.getElementById("root");if(!dx)throw new Error("Could not find root element to mount to");const ak=f1.createRoot(dx);ak.render(d.jsx(Vf.StrictMode,{children:d.jsx(rT,{children:d.jsx(sk,{})})}));export{rk as c,Ky as g};
