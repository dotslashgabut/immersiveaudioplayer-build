(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(r){if(r.ep)return;r.ep=!0;const u=o(r);fetch(r.href,u)}})();var uN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pu={exports:{}},Oa={};var o0;function dx(){if(o0)return Oa;o0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(a,r,u){var h=null;if(u!==void 0&&(h=""+u),r.key!==void 0&&(h=""+r.key),"key"in r){u={};for(var y in r)y!=="key"&&(u[y]=r[y])}else u=r;return r=u.ref,{$$typeof:n,type:a,key:h,ref:r!==void 0?r:null,props:u}}return Oa.Fragment=t,Oa.jsx=o,Oa.jsxs=o,Oa}var l0;function fx(){return l0||(l0=1,Pu.exports=dx()),Pu.exports}var f=fx(),Hu={exports:{}},wt={};var a0;function px(){if(a0)return wt;a0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,H={};function j(L,se,xe){this.props=L,this.context=se,this.refs=H,this.updater=xe||N}j.prototype.isReactComponent={},j.prototype.setState=function(L,se){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,se,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=j.prototype;function ce(L,se,xe){this.props=L,this.context=se,this.refs=H,this.updater=xe||N}var ye=ce.prototype=new re;ye.constructor=ce,O(ye,j.prototype),ye.isPureReactComponent=!0;var ze=Array.isArray;function Le(){}var ve={H:null,A:null,T:null,S:null},Ke=Object.prototype.hasOwnProperty;function _e(L,se,xe){var He=xe.ref;return{$$typeof:n,type:L,key:se,ref:He!==void 0?He:null,props:xe}}function $e(L,se){return _e(L.type,se,L.props)}function De(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function ot(L){var se={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(xe){return se[xe]})}var pt=/\/+/g;function xt(L,se){return typeof L=="object"&&L!==null&&L.key!=null?ot(""+L.key):se.toString(36)}function Et(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Le,Le):(L.status="pending",L.then(function(se){L.status==="pending"&&(L.status="fulfilled",L.value=se)},function(se){L.status==="pending"&&(L.status="rejected",L.reason=se)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function V(L,se,xe,He,it){var w=typeof L;(w==="undefined"||w==="boolean")&&(L=null);var U=!1;if(L===null)U=!0;else switch(w){case"bigint":case"string":case"number":U=!0;break;case"object":switch(L.$$typeof){case n:case t:U=!0;break;case x:return U=L._init,V(U(L._payload),se,xe,He,it)}}if(U)return it=it(L),U=He===""?"."+xt(L,0):He,ze(it)?(xe="",U!=null&&(xe=U.replace(pt,"$&/")+"/"),V(it,se,xe,"",function(Me){return Me})):it!=null&&(De(it)&&(it=$e(it,xe+(it.key==null||L&&L.key===it.key?"":(""+it.key).replace(pt,"$&/")+"/")+U)),se.push(it)),1;U=0;var J=He===""?".":He+":";if(ze(L))for(var oe=0;oe<L.length;oe++)He=L[oe],w=J+xt(He,oe),U+=V(He,se,xe,w,it);else if(oe=A(L),typeof oe=="function")for(L=oe.call(L),oe=0;!(He=L.next()).done;)He=He.value,w=J+xt(He,oe++),U+=V(He,se,xe,w,it);else if(w==="object"){if(typeof L.then=="function")return V(Et(L),se,xe,He,it);throw se=String(L),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return U}function Ee(L,se,xe){if(L==null)return L;var He=[],it=0;return V(L,He,"","",function(w){return se.call(xe,w,it++)}),He}function ie(L){if(L._status===-1){var se=L._result;se=se(),se.then(function(xe){(L._status===0||L._status===-1)&&(L._status=1,L._result=xe)},function(xe){(L._status===0||L._status===-1)&&(L._status=2,L._result=xe)}),L._status===-1&&(L._status=0,L._result=se)}if(L._status===1)return L._result.default;throw L._result}var de=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},yt={map:Ee,forEach:function(L,se,xe){Ee(L,function(){se.apply(this,arguments)},xe)},count:function(L){var se=0;return Ee(L,function(){se++}),se},toArray:function(L){return Ee(L,function(se){return se})||[]},only:function(L){if(!De(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return wt.Activity=b,wt.Children=yt,wt.Component=j,wt.Fragment=o,wt.Profiler=r,wt.PureComponent=ce,wt.StrictMode=a,wt.Suspense=v,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve,wt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ve.H.useMemoCache(L)}},wt.cache=function(L){return function(){return L.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(L,se,xe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var He=O({},L.props),it=L.key;if(se!=null)for(w in se.key!==void 0&&(it=""+se.key),se)!Ke.call(se,w)||w==="key"||w==="__self"||w==="__source"||w==="ref"&&se.ref===void 0||(He[w]=se[w]);var w=arguments.length-2;if(w===1)He.children=xe;else if(1<w){for(var U=Array(w),J=0;J<w;J++)U[J]=arguments[J+2];He.children=U}return _e(L.type,it,He)},wt.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},wt.createElement=function(L,se,xe){var He,it={},w=null;if(se!=null)for(He in se.key!==void 0&&(w=""+se.key),se)Ke.call(se,He)&&He!=="key"&&He!=="__self"&&He!=="__source"&&(it[He]=se[He]);var U=arguments.length-2;if(U===1)it.children=xe;else if(1<U){for(var J=Array(U),oe=0;oe<U;oe++)J[oe]=arguments[oe+2];it.children=J}if(L&&L.defaultProps)for(He in U=L.defaultProps,U)it[He]===void 0&&(it[He]=U[He]);return _e(L,w,it)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(L){return{$$typeof:y,render:L}},wt.isValidElement=De,wt.lazy=function(L){return{$$typeof:x,_payload:{_status:-1,_result:L},_init:ie}},wt.memo=function(L,se){return{$$typeof:m,type:L,compare:se===void 0?null:se}},wt.startTransition=function(L){var se=ve.T,xe={};ve.T=xe;try{var He=L(),it=ve.S;it!==null&&it(xe,He),typeof He=="object"&&He!==null&&typeof He.then=="function"&&He.then(Le,de)}catch(w){de(w)}finally{se!==null&&xe.types!==null&&(se.types=xe.types),ve.T=se}},wt.unstable_useCacheRefresh=function(){return ve.H.useCacheRefresh()},wt.use=function(L){return ve.H.use(L)},wt.useActionState=function(L,se,xe){return ve.H.useActionState(L,se,xe)},wt.useCallback=function(L,se){return ve.H.useCallback(L,se)},wt.useContext=function(L){return ve.H.useContext(L)},wt.useDebugValue=function(){},wt.useDeferredValue=function(L,se){return ve.H.useDeferredValue(L,se)},wt.useEffect=function(L,se){return ve.H.useEffect(L,se)},wt.useEffectEvent=function(L){return ve.H.useEffectEvent(L)},wt.useId=function(){return ve.H.useId()},wt.useImperativeHandle=function(L,se,xe){return ve.H.useImperativeHandle(L,se,xe)},wt.useInsertionEffect=function(L,se){return ve.H.useInsertionEffect(L,se)},wt.useLayoutEffect=function(L,se){return ve.H.useLayoutEffect(L,se)},wt.useMemo=function(L,se){return ve.H.useMemo(L,se)},wt.useOptimistic=function(L,se){return ve.H.useOptimistic(L,se)},wt.useReducer=function(L,se,xe){return ve.H.useReducer(L,se,xe)},wt.useRef=function(L){return ve.H.useRef(L)},wt.useState=function(L){return ve.H.useState(L)},wt.useSyncExternalStore=function(L,se,xe){return ve.H.useSyncExternalStore(L,se,xe)},wt.useTransition=function(){return ve.H.useTransition()},wt.version="19.2.3",wt}var s0;function gd(){return s0||(s0=1,Hu.exports=px()),Hu.exports}var Z=gd();const fg=dg(Z);var Gu={exports:{}},qa={},Fu={exports:{}},Bu={};var r0;function hx(){return r0||(r0=1,(function(n){function t(V,Ee){var ie=V.length;V.push(Ee);e:for(;0<ie;){var de=ie-1>>>1,yt=V[de];if(0<r(yt,Ee))V[de]=Ee,V[ie]=yt,ie=de;else break e}}function o(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var Ee=V[0],ie=V.pop();if(ie!==Ee){V[0]=ie;e:for(var de=0,yt=V.length,L=yt>>>1;de<L;){var se=2*(de+1)-1,xe=V[se],He=se+1,it=V[He];if(0>r(xe,ie))He<yt&&0>r(it,xe)?(V[de]=it,V[He]=ie,de=He):(V[de]=xe,V[se]=ie,de=se);else if(He<yt&&0>r(it,ie))V[de]=it,V[He]=ie,de=He;else break e}}return Ee}function r(V,Ee){var ie=V.sortIndex-Ee.sortIndex;return ie!==0?ie:V.id-Ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,b=null,T=3,A=!1,N=!1,O=!1,H=!1,j=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function ye(V){for(var Ee=o(m);Ee!==null;){if(Ee.callback===null)a(m);else if(Ee.startTime<=V)a(m),Ee.sortIndex=Ee.expirationTime,t(v,Ee);else break;Ee=o(m)}}function ze(V){if(O=!1,ye(V),!N)if(o(v)!==null)N=!0,Le||(Le=!0,ot());else{var Ee=o(m);Ee!==null&&Et(ze,Ee.startTime-V)}}var Le=!1,ve=-1,Ke=5,_e=-1;function $e(){return H?!0:!(n.unstable_now()-_e<Ke)}function De(){if(H=!1,Le){var V=n.unstable_now();_e=V;var Ee=!0;try{e:{N=!1,O&&(O=!1,re(ve),ve=-1),A=!0;var ie=T;try{t:{for(ye(V),b=o(v);b!==null&&!(b.expirationTime>V&&$e());){var de=b.callback;if(typeof de=="function"){b.callback=null,T=b.priorityLevel;var yt=de(b.expirationTime<=V);if(V=n.unstable_now(),typeof yt=="function"){b.callback=yt,ye(V),Ee=!0;break t}b===o(v)&&a(v),ye(V)}else a(v);b=o(v)}if(b!==null)Ee=!0;else{var L=o(m);L!==null&&Et(ze,L.startTime-V),Ee=!1}}break e}finally{b=null,T=ie,A=!1}Ee=void 0}}finally{Ee?ot():Le=!1}}}var ot;if(typeof ce=="function")ot=function(){ce(De)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,xt=pt.port2;pt.port1.onmessage=De,ot=function(){xt.postMessage(null)}}else ot=function(){j(De,0)};function Et(V,Ee){ve=j(function(){V(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ke=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(V){switch(T){case 1:case 2:case 3:var Ee=3;break;default:Ee=T}var ie=T;T=Ee;try{return V()}finally{T=ie}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(V,Ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=T;T=V;try{return Ee()}finally{T=ie}},n.unstable_scheduleCallback=function(V,Ee,ie){var de=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?de+ie:de):ie=de,V){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=ie+yt,V={id:x++,callback:Ee,priorityLevel:V,startTime:ie,expirationTime:yt,sortIndex:-1},ie>de?(V.sortIndex=ie,t(m,V),o(v)===null&&V===o(m)&&(O?(re(ve),ve=-1):O=!0,Et(ze,ie-de))):(V.sortIndex=yt,t(v,V),N||A||(N=!0,Le||(Le=!0,ot()))),V},n.unstable_shouldYield=$e,n.unstable_wrapCallback=function(V){var Ee=T;return function(){var ie=T;T=Ee;try{return V.apply(this,arguments)}finally{T=ie}}}})(Bu)),Bu}var c0;function mx(){return c0||(c0=1,Fu.exports=hx()),Fu.exports}var Vu={exports:{}},Fn={};var u0;function gx(){if(u0)return Fn;u0=1;var n=gd();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(v,m,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Fn.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(v,m,null,x)},Fn.flushSync=function(v){var m=h.T,x=a.p;try{if(h.T=null,a.p=2,v)return v()}finally{h.T=m,a.p=x,a.d.f()}},Fn.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(v,m))},Fn.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},Fn.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,b=y(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?a.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:A}):x==="script"&&a.d.X(v,{crossOrigin:b,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Fn.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);a.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(v)},Fn.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,b=y(x,m.crossOrigin);a.d.L(v,x,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Fn.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);a.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(v)},Fn.requestFormReset=function(v){a.d.r(v)},Fn.unstable_batchedUpdates=function(v,m){return v(m)},Fn.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},Fn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Fn.version="19.2.3",Fn}var d0;function yx(){if(d0)return Vu.exports;d0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Vu.exports=gx(),Vu.exports}var f0;function vx(){if(f0)return qa;f0=1;var n=mx(),t=gd(),o=yx();function a(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(u(e)!==e)throw Error(a(188))}function m(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(a(188));return i!==e?null:e}for(var l=e,s=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(s=p.return,s!==null){l=s;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return v(p),e;if(g===s)return v(p),i;g=g.sibling}throw Error(a(188))}if(l.return!==s.return)l=p,s=g;else{for(var S=!1,_=p.child;_;){if(_===l){S=!0,l=p,s=g;break}if(_===s){S=!0,s=p,l=g;break}_=_.sibling}if(!S){for(_=g.child;_;){if(_===l){S=!0,l=g,s=p;break}if(_===s){S=!0,s=g,l=p;break}_=_.sibling}if(!S)throw Error(a(189))}}if(l.alternate!==s)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),$e=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function ot(e){return e===null||typeof e!="object"?null:(e=De&&e[De]||e["@@iterator"],typeof e=="function"?e:null)}var pt=Symbol.for("react.client.reference");function xt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===pt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case j:return"Profiler";case H:return"StrictMode";case ze:return"Suspense";case Le:return"SuspenseList";case _e:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case ce:return e.displayName||"Context";case re:return(e._context.displayName||"Context")+".Consumer";case ye:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ve:return i=e.displayName||null,i!==null?i:xt(e.type)||"Memo";case Ke:i=e._payload,e=e._init;try{return xt(e(i))}catch{}}return null}var Et=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},de=[],yt=-1;function L(e){return{current:e}}function se(e){0>yt||(e.current=de[yt],de[yt]=null,yt--)}function xe(e,i){yt++,de[yt]=e.current,e.current=i}var He=L(null),it=L(null),w=L(null),U=L(null);function J(e,i){switch(xe(w,i),xe(it,e),xe(He,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Ah(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Ah(i),e=Nh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}se(He),xe(He,e)}function oe(){se(He),se(it),se(w)}function Me(e){e.memoizedState!==null&&xe(U,e);var i=He.current,l=Nh(i,e.type);i!==l&&(xe(it,e),xe(He,l))}function Te(e){it.current===e&&(se(He),se(it)),U.current===e&&(se(U),Ga._currentValue=ie)}var Ce,Ie;function fe(e){if(Ce===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ce=i&&i[1]||"",Ie=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ce+e+Ie}var ge=!1;function Re(e,i){if(!e||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(i){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ne){var K=ne}Reflect.construct(e,[],Se)}else{try{Se.call()}catch(ne){K=ne}e.call(Se.prototype)}}else{try{throw Error()}catch(ne){K=ne}(Se=e())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ne){if(ne&&K&&typeof ne.stack=="string")return[ne.stack,K.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=s.DetermineComponentFrameRoot(),S=g[0],_=g[1];if(S&&_){var k=S.split(`
`),Y=_.split(`
`);for(p=s=0;s<k.length&&!k[s].includes("DetermineComponentFrameRoot");)s++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(s===k.length||p===Y.length)for(s=k.length-1,p=Y.length-1;1<=s&&0<=p&&k[s]!==Y[p];)p--;for(;1<=s&&0<=p;s--,p--)if(k[s]!==Y[p]){if(s!==1||p!==1)do if(s--,p--,0>p||k[s]!==Y[p]){var ue=`
`+k[s].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=s&&0<=p);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?fe(l):""}function je(e,i){switch(e.tag){case 26:case 27:case 5:return fe(e.type);case 16:return fe("Lazy");case 13:return e.child!==i&&i!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return Re(e.type,!1);case 11:return Re(e.type.render,!1);case 1:return Re(e.type,!0);case 31:return fe("Activity");default:return""}}function Fe(e){try{var i="",l=null;do i+=je(e,l),l=e,e=e.return;while(e);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ze=Object.prototype.hasOwnProperty,G=n.unstable_scheduleCallback,D=n.unstable_cancelCallback,pe=n.unstable_shouldYield,we=n.unstable_requestPaint,he=n.unstable_now,le=n.unstable_getCurrentPriorityLevel,E=n.unstable_ImmediatePriority,I=n.unstable_UserBlockingPriority,q=n.unstable_NormalPriority,M=n.unstable_LowPriority,ee=n.unstable_IdlePriority,z=n.log,ae=n.unstable_setDisableYieldValue,C=null,te=null;function ke(e){if(typeof z=="function"&&ae(e),te&&typeof te.setStrictMode=="function")try{te.setStrictMode(C,e)}catch{}}var Ye=Math.clz32?Math.clz32:Lt,nt=Math.log,Be=Math.LN2;function Lt(e){return e>>>=0,e===0?32:31-(nt(e)/Be|0)|0}var Je=256,Jt=262144,Nt=4194304;function lt(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ne(e,i,l){var s=e.pendingLanes;if(s===0)return 0;var p=0,g=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var _=s&134217727;return _!==0?(s=_&~g,s!==0?p=lt(s):(S&=_,S!==0?p=lt(S):l||(l=_&~e,l!==0&&(p=lt(l))))):(_=s&~g,_!==0?p=lt(_):S!==0?p=lt(S):l||(l=s&~e,l!==0&&(p=lt(l)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:p}function ct(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ut(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(){var e=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),e}function It(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function Tt(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gt(e,i,l,s,p,g){var S=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var _=e.entanglements,k=e.expirationTimes,Y=e.hiddenUpdates;for(l=S&~l;0<l;){var ue=31-Ye(l),Se=1<<ue;_[ue]=0,k[ue]=-1;var K=Y[ue];if(K!==null)for(Y[ue]=null,ue=0;ue<K.length;ue++){var ne=K[ue];ne!==null&&(ne.lane&=-536870913)}l&=~Se}s!==0&&jt(e,s,0),g!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=g&~(S&~i))}function jt(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var s=31-Ye(i);e.entangledLanes|=i,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function xn(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var s=31-Ye(l),p=1<<s;p&i|e[s]&i&&(e[s]|=i),l&=~p}}function un(e,i){var l=i&-i;return l=(l&42)!==0?1:Ai(l),(l&(e.suspendedLanes|i))!==0?0:l}function Ai(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function In(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Li(){var e=Ee.p;return e!==0?e:(e=window.event,e===void 0?32:Qh(e.type))}function Ui(e,i){var l=Ee.p;try{return Ee.p=e,i()}finally{Ee.p=l}}var bn=Math.random().toString(36).slice(2),We="__reactFiber$"+bn,vt="__reactProps$"+bn,$t="__reactContainer$"+bn,ei="__reactEvents$"+bn,Gt="__reactListeners$"+bn,Mn="__reactHandles$"+bn,pl="__reactResources$"+bn,Oi="__reactMarker$"+bn;function di(e){delete e[We],delete e[vt],delete e[ei],delete e[Gt],delete e[Mn]}function qi(e){var i=e[We];if(i)return i;for(var l=e.parentNode;l;){if(i=l[$t]||l[We]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=Lh(e);e!==null;){if(l=e[We])return l;e=Lh(e)}return i}e=l,l=e.parentNode}return null}function ji(e){if(e=e[We]||e[$t]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function vo(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(a(33))}function xo(e){var i=e[pl];return i||(i=e[pl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Sn(e){e[Oi]=!0}var os=new Set,ia={};function $i(e,i){Yi(e,i),Yi(e+"Capture",i)}function Yi(e,i){for(ia[e]=i,e=0;e<i.length;e++)os.add(i[e])}var Fr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ls={},hl={};function oa(e){return Ze.call(hl,e)?!0:Ze.call(ls,e)?!1:Fr.test(e)?hl[e]=!0:(ls[e]=!0,!1)}function Ji(e,i,l){if(oa(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var s=i.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function Pi(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function Yn(e,i,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+s)}}function Jn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function la(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Br(e,i,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,g=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Ki(e){if(!e._valueTracker){var i=la(e)?"checked":"value";e._valueTracker=Br(e,i,""+e[i])}}function Xi(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),s="";return e&&(s=la(e)?e.checked?"true":"false":e.value),e=s,e!==l?(i.setValue(e),!0):!1}function bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ko=/[\n"\\]/g;function R(e){return e.replace(Ko,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Q(e,i,l,s,p,g,S,_){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),i!=null?S==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Jn(i)):e.value!==""+Jn(i)&&(e.value=""+Jn(i)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),i!=null?W(e,S,Jn(i)):l!=null?W(e,S,Jn(l)):s!=null&&e.removeAttribute("value"),p==null&&g!=null&&(e.defaultChecked=!!g),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Jn(_):e.removeAttribute("name")}function Ue(e,i,l,s,p,g,S,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ki(e);return}l=l!=null?""+Jn(l):"",i=i!=null?""+Jn(i):l,_||i===e.value||(e.value=i),e.defaultValue=i}s=s??p,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=_?e.checked:!!s,e.defaultChecked=!!s,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),Ki(e)}function W(e,i,l){i==="number"&&bo(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function be(e,i,l,s){if(e=e.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<e.length;l++)p=i.hasOwnProperty("$"+e[l].value),e[l].selected!==p&&(e[l].selected=p),p&&s&&(e[l].defaultSelected=!0)}else{for(l=""+Jn(l),i=null,p=0;p<e.length;p++){if(e[p].value===l){e[p].selected=!0,s&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Ge(e,i,l){if(i!=null&&(i=""+Jn(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+Jn(l):""}function at(e,i,l,s){if(i==null){if(s!=null){if(l!=null)throw Error(a(92));if(Et(s)){if(1<s.length)throw Error(a(93));s=s[0]}l=s}l==null&&(l=""),i=l}l=Jn(i),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),Ki(e)}function dt(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var mt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hn(e,i,l){var s=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":s?e.setProperty(i,l):typeof l!="number"||l===0||mt.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function fn(e,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||i!=null&&i.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var p in i)s=i[p],i.hasOwnProperty(p)&&l[p]!==s&&Hn(e,p,s)}else for(var g in i)i.hasOwnProperty(g)&&Hn(e,g,i[g])}function Pe(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _n(e){return nn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function B(){}var ft=null;function _t(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rt=null,ln=null;function an(e){var i=ji(e);if(i&&(e=i.stateNode)){var l=e[vt]||null;e:switch(e=i.stateNode,i.type){case"input":if(Q(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+R(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var s=l[i];if(s!==e&&s.form===e.form){var p=s[vt]||null;if(!p)throw Error(a(90));Q(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)s=l[i],s.form===e.form&&Xi(s)}break e;case"textarea":Ge(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&be(e,!!l.multiple,i,!1)}}}var Ni=!1;function fi(e,i,l){if(Ni)return e(i,l);Ni=!0;try{var s=e(i);return s}finally{if(Ni=!1,(rt!==null||ln!==null)&&(Bs(),rt&&(i=rt,e=ln,ln=rt=null,an(i),e)))for(i=0;i<e.length;i++)an(e[i])}}function ti(e,i){var l=e.stateNode;if(l===null)return null;var s=l[vt]||null;if(s===null)return null;l=s[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qi=!1;if(Vn)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{Qi=!1}var Ft=null,pi=null,X=null;function ii(){if(X)return X;var e,i=pi,l=i.length,s,p="value"in Ft?Ft.value:Ft.textContent,g=p.length;for(e=0;e<l&&i[e]===p[e];e++);var S=l-e;for(s=1;s<=S&&i[l-s]===p[g-s];s++);return X=p.slice(e,1<s?1-s:void 0)}function bt(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function An(){return!0}function Zi(){return!1}function pn(e){function i(l,s,p,g,S){this._reactName=l,this._targetInst=p,this.type=s,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(l=e[_],this[_]=l?l(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?An:Zi,this.isPropagationStopped=Zi,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=An)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=An)},persist:function(){},isPersistent:An}),i}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hi=pn(On),Ae=b({},On,{view:0,detail:0}),Qe=pn(Ae),Mt,Oe,Zt,Ht=b({},Ae,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&e.type==="mousemove"?(Mt=e.screenX-Zt.screenX,Oe=e.screenY-Zt.screenY):Oe=Mt=0,Zt=e),Mt)},movementY:function(e){return"movementY"in e?e.movementY:Oe}}),gn=pn(Ht),hi=b({},Ht,{dataTransfer:0}),Gn=pn(hi),So=b({},Ae,{relatedTarget:0}),To=pn(So),py=b({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=pn(py),my=b({},On,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gy=pn(my),yy=b({},On,{data:0}),Rd=pn(yy),vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},by={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=by[e])?!!i[e]:!1}function Vr(){return Sy}var Ty=b({},Ae,{key:function(e){if(e.key){var i=vy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=bt(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(e){return e.type==="keypress"?bt(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bt(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wy=pn(Ty),Ey=b({},Ht,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kd=pn(Ey),Cy=b({},Ae,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),_y=pn(Cy),Ay=b({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ny=pn(Ay),My=b({},Ht,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ry=pn(My),ky=b({},On,{newState:0,oldState:0}),Iy=pn(ky),zy=[9,13,27,32],Or=Vn&&"CompositionEvent"in window,aa=null;Vn&&"documentMode"in document&&(aa=document.documentMode);var Dy=Vn&&"TextEvent"in window&&!aa,Id=Vn&&(!Or||aa&&8<aa&&11>=aa),zd=" ",Dd=!1;function Ld(e,i){switch(e){case"keyup":return zy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ml=!1;function Ly(e,i){switch(e){case"compositionend":return Ud(i);case"keypress":return i.which!==32?null:(Dd=!0,zd);case"textInput":return e=i.data,e===zd&&Dd?null:e;default:return null}}function Uy(e,i){if(ml)return e==="compositionend"||!Or&&Ld(e,i)?(e=ii(),X=pi=Ft=null,ml=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Id&&i.locale!=="ko"?null:i.data;default:return null}}var Py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Py[e.type]:i==="textarea"}function Hd(e,i,l,s){rt?ln?ln.push(s):ln=[s]:rt=s,i=Js(i,"onChange"),0<i.length&&(l=new Hi("onChange","change",null,l,s),e.push({event:l,listeners:i}))}var sa=null,ra=null;function Hy(e){Sh(e,0)}function as(e){var i=vo(e);if(Xi(i))return e}function Gd(e,i){if(e==="change")return i}var Fd=!1;if(Vn){var qr;if(Vn){var jr="oninput"in document;if(!jr){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),jr=typeof Bd.oninput=="function"}qr=jr}else qr=!1;Fd=qr&&(!document.documentMode||9<document.documentMode)}function Vd(){sa&&(sa.detachEvent("onpropertychange",Od),ra=sa=null)}function Od(e){if(e.propertyName==="value"&&as(ra)){var i=[];Hd(i,ra,e,_t(e)),fi(Hy,i)}}function Gy(e,i,l){e==="focusin"?(Vd(),sa=i,ra=l,sa.attachEvent("onpropertychange",Od)):e==="focusout"&&Vd()}function Fy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return as(ra)}function By(e,i){if(e==="click")return as(i)}function Vy(e,i){if(e==="input"||e==="change")return as(i)}function Oy(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var oi=typeof Object.is=="function"?Object.is:Oy;function ca(e,i){if(oi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),s=Object.keys(i);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var p=l[s];if(!Ze.call(i,p)||!oi(e[p],i[p]))return!1}return!0}function qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jd(e,i){var l=qd(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=i&&s>=i)return{node:l,offset:i-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qd(l)}}function $d(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?$d(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Yd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=bo(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=bo(e.document)}return i}function $r(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var qy=Vn&&"documentMode"in document&&11>=document.documentMode,gl=null,Yr=null,ua=null,Jr=!1;function Jd(e,i,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Jr||gl==null||gl!==bo(s)||(s=gl,"selectionStart"in s&&$r(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ua&&ca(ua,s)||(ua=s,s=Js(Yr,"onSelect"),0<s.length&&(i=new Hi("onSelect","select",null,i,l),e.push({event:i,listeners:s}),i.target=gl)))}function Xo(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var yl={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionrun:Xo("Transition","TransitionRun"),transitionstart:Xo("Transition","TransitionStart"),transitioncancel:Xo("Transition","TransitionCancel"),transitionend:Xo("Transition","TransitionEnd")},Kr={},Kd={};Vn&&(Kd=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Qo(e){if(Kr[e])return Kr[e];if(!yl[e])return e;var i=yl[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in Kd)return Kr[e]=i[l];return e}var Xd=Qo("animationend"),Qd=Qo("animationiteration"),Zd=Qo("animationstart"),jy=Qo("transitionrun"),$y=Qo("transitionstart"),Yy=Qo("transitioncancel"),Wd=Qo("transitionend"),ef=new Map,Xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xr.push("scrollEnd");function Mi(e,i){ef.set(e,i),$i(i,[e])}var ss=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},mi=[],vl=0,Qr=0;function rs(){for(var e=vl,i=Qr=vl=0;i<e;){var l=mi[i];mi[i++]=null;var s=mi[i];mi[i++]=null;var p=mi[i];mi[i++]=null;var g=mi[i];if(mi[i++]=null,s!==null&&p!==null){var S=s.pending;S===null?p.next=p:(p.next=S.next,S.next=p),s.pending=p}g!==0&&tf(l,p,g)}}function cs(e,i,l,s){mi[vl++]=e,mi[vl++]=i,mi[vl++]=l,mi[vl++]=s,Qr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Zr(e,i,l,s){return cs(e,i,l,s),us(e)}function Zo(e,i){return cs(e,null,null,i),us(e)}function tf(e,i,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var p=!1,g=e.return;g!==null;)g.childLanes|=l,s=g.alternate,s!==null&&(s.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(p=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,p&&i!==null&&(p=31-Ye(l),e=g.hiddenUpdates,s=e[p],s===null?e[p]=[i]:s.push(i),i.lane=l|536870912),g):null}function us(e){if(50<Ia)throw Ia=0,su=null,Error(a(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var xl={};function Jy(e,i,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(e,i,l,s){return new Jy(e,i,l,s)}function Wr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wi(e,i){var l=e.alternate;return l===null?(l=li(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function nf(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function ds(e,i,l,s,p,g){var S=0;if(s=e,typeof e=="function")Wr(e)&&(S=1);else if(typeof e=="string")S=Wv(e,l,He.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _e:return e=li(31,l,i,p),e.elementType=_e,e.lanes=g,e;case O:return Wo(l.children,p,g,i);case H:S=8,p|=24;break;case j:return e=li(12,l,i,p|2),e.elementType=j,e.lanes=g,e;case ze:return e=li(13,l,i,p),e.elementType=ze,e.lanes=g,e;case Le:return e=li(19,l,i,p),e.elementType=Le,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:S=10;break e;case re:S=9;break e;case ye:S=11;break e;case ve:S=14;break e;case Ke:S=16,s=null;break e}S=29,l=Error(a(130,e===null?"null":typeof e,"")),s=null}return i=li(S,l,i,p),i.elementType=e,i.type=s,i.lanes=g,i}function Wo(e,i,l,s){return e=li(7,e,s,i),e.lanes=l,e}function ec(e,i,l){return e=li(6,e,null,i),e.lanes=l,e}function of(e){var i=li(18,null,null,0);return i.stateNode=e,i}function tc(e,i,l){return i=li(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var lf=new WeakMap;function gi(e,i){if(typeof e=="object"&&e!==null){var l=lf.get(e);return l!==void 0?l:(i={value:e,source:i,stack:Fe(i)},lf.set(e,i),i)}return{value:e,source:i,stack:Fe(i)}}var bl=[],Sl=0,fs=null,da=0,yi=[],vi=0,wo=null,Gi=1,Fi="";function eo(e,i){bl[Sl++]=da,bl[Sl++]=fs,fs=e,da=i}function af(e,i,l){yi[vi++]=Gi,yi[vi++]=Fi,yi[vi++]=wo,wo=e;var s=Gi;e=Fi;var p=32-Ye(s)-1;s&=~(1<<p),l+=1;var g=32-Ye(i)+p;if(30<g){var S=p-p%5;g=(s&(1<<S)-1).toString(32),s>>=S,p-=S,Gi=1<<32-Ye(i)+p|l<<p|s,Fi=g+e}else Gi=1<<g|l<<p|s,Fi=e}function nc(e){e.return!==null&&(eo(e,1),af(e,1,0))}function ic(e){for(;e===fs;)fs=bl[--Sl],bl[Sl]=null,da=bl[--Sl],bl[Sl]=null;for(;e===wo;)wo=yi[--vi],yi[vi]=null,Fi=yi[--vi],yi[vi]=null,Gi=yi[--vi],yi[vi]=null}function sf(e,i){yi[vi++]=Gi,yi[vi++]=Fi,yi[vi++]=wo,Gi=i.id,Fi=i.overflow,wo=e}var zn=null,sn=null,Ut=!1,Eo=null,xi=!1,oc=Error(a(519));function Co(e){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fa(gi(i,e)),oc}function rf(e){var i=e.stateNode,l=e.type,s=e.memoizedProps;switch(i[We]=e,i[vt]=s,l){case"dialog":kt("cancel",i),kt("close",i);break;case"iframe":case"object":case"embed":kt("load",i);break;case"video":case"audio":for(l=0;l<Da.length;l++)kt(Da[l],i);break;case"source":kt("error",i);break;case"img":case"image":case"link":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"input":kt("invalid",i),Ue(i,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":kt("invalid",i);break;case"textarea":kt("invalid",i),at(i,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||s.suppressHydrationWarning===!0||Ch(i.textContent,l)?(s.popover!=null&&(kt("beforetoggle",i),kt("toggle",i)),s.onScroll!=null&&kt("scroll",i),s.onScrollEnd!=null&&kt("scrollend",i),s.onClick!=null&&(i.onclick=B),i=!0):i=!1,i||Co(e,!0)}function cf(e){for(zn=e.return;zn;)switch(zn.tag){case 5:case 31:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:zn=zn.return}}function Tl(e){if(e!==zn)return!1;if(!Ut)return cf(e),Ut=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Tu(e.type,e.memoizedProps)),l=!l),l&&sn&&Co(e),cf(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));sn=Dh(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));sn=Dh(e)}else i===27?(i=sn,Go(e.type)?(e=Au,Au=null,sn=e):sn=i):sn=zn?Si(e.stateNode.nextSibling):null;return!0}function el(){sn=zn=null,Ut=!1}function lc(){var e=Eo;return e!==null&&(Zn===null?Zn=e:Zn.push.apply(Zn,e),Eo=null),e}function fa(e){Eo===null?Eo=[e]:Eo.push(e)}var ac=L(null),tl=null,to=null;function _o(e,i,l){xe(ac,i._currentValue),i._currentValue=l}function no(e){e._currentValue=ac.current,se(ac)}function sc(e,i,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,s!==null&&(s.childLanes|=i)):s!==null&&(s.childLanes&i)!==i&&(s.childLanes|=i),e===l)break;e=e.return}}function rc(e,i,l,s){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var _=g;g=p;for(var k=0;k<i.length;k++)if(_.context===i[k]){g.lanes|=l,_=g.alternate,_!==null&&(_.lanes|=l),sc(g.return,l,e),s||(S=null);break e}g=_.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(a(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),sc(S,l,e),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===e){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function wl(e,i,l,s){e=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var _=p.type;oi(p.pendingProps.value,S.value)||(e!==null?e.push(_):e=[_])}}else if(p===U.current){if(S=p.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Ga):e=[Ga])}p=p.return}e!==null&&rc(i,e,l,s),i.flags|=262144}function ps(e){for(e=e.firstContext;e!==null;){if(!oi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function nl(e){tl=e,to=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Dn(e){return uf(tl,e)}function hs(e,i){return tl===null&&nl(e),uf(e,i)}function uf(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},to===null){if(e===null)throw Error(a(308));to=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else to=to.next=i;return l}var Ky=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Xy=n.unstable_scheduleCallback,Qy=n.unstable_NormalPriority,Tn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new Ky,data:new Map,refCount:0}}function pa(e){e.refCount--,e.refCount===0&&Xy(Qy,function(){e.controller.abort()})}var ha=null,uc=0,El=0,Cl=null;function Zy(e,i){if(ha===null){var l=ha=[];uc=0,El=pu(),Cl={status:"pending",value:void 0,then:function(s){l.push(s)}}}return uc++,i.then(df,df),i}function df(){if(--uc===0&&ha!==null){Cl!==null&&(Cl.status="fulfilled");var e=ha;ha=null,El=0,Cl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Wy(e,i){var l=[],s={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return e.then(function(){s.status="fulfilled",s.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(s.status="rejected",s.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),s}var ff=V.S;V.S=function(e,i){Kp=he(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Zy(e,i),ff!==null&&ff(e,i)};var il=L(null);function dc(){var e=il.current;return e!==null?e:on.pooledCache}function ms(e,i){i===null?xe(il,il.current):xe(il,i.pool)}function pf(){var e=dc();return e===null?null:{parent:Tn._currentValue,pool:e}}var _l=Error(a(460)),fc=Error(a(474)),gs=Error(a(542)),ys={then:function(){}};function hf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function mf(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(B,B),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,yf(e),e;default:if(typeof i.status=="string")i.then(B,B);else{if(e=on,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=i,e.status="pending",e.then(function(s){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=s}},function(s){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=s}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,yf(e),e}throw ll=i,_l}}function ol(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ll=l,_l):l}}var ll=null;function gf(){if(ll===null)throw Error(a(459));var e=ll;return ll=null,e}function yf(e){if(e===_l||e===gs)throw Error(a(483))}var Al=null,ma=0;function vs(e){var i=ma;return ma+=1,Al===null&&(Al=[]),mf(Al,e,i)}function ga(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function xs(e,i){throw i.$$typeof===T?Error(a(525)):(e=Object.prototype.toString.call(i),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function vf(e){function i(F,P){if(e){var $=F.deletions;$===null?(F.deletions=[P],F.flags|=16):$.push(P)}}function l(F,P){if(!e)return null;for(;P!==null;)i(F,P),P=P.sibling;return null}function s(F){for(var P=new Map;F!==null;)F.key!==null?P.set(F.key,F):P.set(F.index,F),F=F.sibling;return P}function p(F,P){return F=Wi(F,P),F.index=0,F.sibling=null,F}function g(F,P,$){return F.index=$,e?($=F.alternate,$!==null?($=$.index,$<P?(F.flags|=67108866,P):$):(F.flags|=67108866,P)):(F.flags|=1048576,P)}function S(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function _(F,P,$,me){return P===null||P.tag!==6?(P=ec($,F.mode,me),P.return=F,P):(P=p(P,$),P.return=F,P)}function k(F,P,$,me){var st=$.type;return st===O?ue(F,P,$.props.children,me,$.key):P!==null&&(P.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ke&&ol(st)===P.type)?(P=p(P,$.props),ga(P,$),P.return=F,P):(P=ds($.type,$.key,$.props,null,F.mode,me),ga(P,$),P.return=F,P)}function Y(F,P,$,me){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=tc($,F.mode,me),P.return=F,P):(P=p(P,$.children||[]),P.return=F,P)}function ue(F,P,$,me,st){return P===null||P.tag!==7?(P=Wo($,F.mode,me,st),P.return=F,P):(P=p(P,$),P.return=F,P)}function Se(F,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=ec(""+P,F.mode,$),P.return=F,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return $=ds(P.type,P.key,P.props,null,F.mode,$),ga($,P),$.return=F,$;case N:return P=tc(P,F.mode,$),P.return=F,P;case Ke:return P=ol(P),Se(F,P,$)}if(Et(P)||ot(P))return P=Wo(P,F.mode,$,null),P.return=F,P;if(typeof P.then=="function")return Se(F,vs(P),$);if(P.$$typeof===ce)return Se(F,hs(F,P),$);xs(F,P)}return null}function K(F,P,$,me){var st=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return st!==null?null:_(F,P,""+$,me);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return $.key===st?k(F,P,$,me):null;case N:return $.key===st?Y(F,P,$,me):null;case Ke:return $=ol($),K(F,P,$,me)}if(Et($)||ot($))return st!==null?null:ue(F,P,$,me,null);if(typeof $.then=="function")return K(F,P,vs($),me);if($.$$typeof===ce)return K(F,P,hs(F,$),me);xs(F,$)}return null}function ne(F,P,$,me,st){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return F=F.get($)||null,_(P,F,""+me,st);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case A:return F=F.get(me.key===null?$:me.key)||null,k(P,F,me,st);case N:return F=F.get(me.key===null?$:me.key)||null,Y(P,F,me,st);case Ke:return me=ol(me),ne(F,P,$,me,st)}if(Et(me)||ot(me))return F=F.get($)||null,ue(P,F,me,st,null);if(typeof me.then=="function")return ne(F,P,$,vs(me),st);if(me.$$typeof===ce)return ne(F,P,$,hs(P,me),st);xs(P,me)}return null}function Xe(F,P,$,me){for(var st=null,Bt=null,tt=P,At=P=0,Dt=null;tt!==null&&At<$.length;At++){tt.index>At?(Dt=tt,tt=null):Dt=tt.sibling;var Vt=K(F,tt,$[At],me);if(Vt===null){tt===null&&(tt=Dt);break}e&&tt&&Vt.alternate===null&&i(F,tt),P=g(Vt,P,At),Bt===null?st=Vt:Bt.sibling=Vt,Bt=Vt,tt=Dt}if(At===$.length)return l(F,tt),Ut&&eo(F,At),st;if(tt===null){for(;At<$.length;At++)tt=Se(F,$[At],me),tt!==null&&(P=g(tt,P,At),Bt===null?st=tt:Bt.sibling=tt,Bt=tt);return Ut&&eo(F,At),st}for(tt=s(tt);At<$.length;At++)Dt=ne(tt,F,At,$[At],me),Dt!==null&&(e&&Dt.alternate!==null&&tt.delete(Dt.key===null?At:Dt.key),P=g(Dt,P,At),Bt===null?st=Dt:Bt.sibling=Dt,Bt=Dt);return e&&tt.forEach(function(qo){return i(F,qo)}),Ut&&eo(F,At),st}function ht(F,P,$,me){if($==null)throw Error(a(151));for(var st=null,Bt=null,tt=P,At=P=0,Dt=null,Vt=$.next();tt!==null&&!Vt.done;At++,Vt=$.next()){tt.index>At?(Dt=tt,tt=null):Dt=tt.sibling;var qo=K(F,tt,Vt.value,me);if(qo===null){tt===null&&(tt=Dt);break}e&&tt&&qo.alternate===null&&i(F,tt),P=g(qo,P,At),Bt===null?st=qo:Bt.sibling=qo,Bt=qo,tt=Dt}if(Vt.done)return l(F,tt),Ut&&eo(F,At),st;if(tt===null){for(;!Vt.done;At++,Vt=$.next())Vt=Se(F,Vt.value,me),Vt!==null&&(P=g(Vt,P,At),Bt===null?st=Vt:Bt.sibling=Vt,Bt=Vt);return Ut&&eo(F,At),st}for(tt=s(tt);!Vt.done;At++,Vt=$.next())Vt=ne(tt,F,At,Vt.value,me),Vt!==null&&(e&&Vt.alternate!==null&&tt.delete(Vt.key===null?At:Vt.key),P=g(Vt,P,At),Bt===null?st=Vt:Bt.sibling=Vt,Bt=Vt);return e&&tt.forEach(function(ux){return i(F,ux)}),Ut&&eo(F,At),st}function tn(F,P,$,me){if(typeof $=="object"&&$!==null&&$.type===O&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case A:e:{for(var st=$.key;P!==null;){if(P.key===st){if(st=$.type,st===O){if(P.tag===7){l(F,P.sibling),me=p(P,$.props.children),me.return=F,F=me;break e}}else if(P.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ke&&ol(st)===P.type){l(F,P.sibling),me=p(P,$.props),ga(me,$),me.return=F,F=me;break e}l(F,P);break}else i(F,P);P=P.sibling}$.type===O?(me=Wo($.props.children,F.mode,me,$.key),me.return=F,F=me):(me=ds($.type,$.key,$.props,null,F.mode,me),ga(me,$),me.return=F,F=me)}return S(F);case N:e:{for(st=$.key;P!==null;){if(P.key===st)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){l(F,P.sibling),me=p(P,$.children||[]),me.return=F,F=me;break e}else{l(F,P);break}else i(F,P);P=P.sibling}me=tc($,F.mode,me),me.return=F,F=me}return S(F);case Ke:return $=ol($),tn(F,P,$,me)}if(Et($))return Xe(F,P,$,me);if(ot($)){if(st=ot($),typeof st!="function")throw Error(a(150));return $=st.call($),ht(F,P,$,me)}if(typeof $.then=="function")return tn(F,P,vs($),me);if($.$$typeof===ce)return tn(F,P,hs(F,$),me);xs(F,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(l(F,P.sibling),me=p(P,$),me.return=F,F=me):(l(F,P),me=ec($,F.mode,me),me.return=F,F=me),S(F)):l(F,P)}return function(F,P,$,me){try{ma=0;var st=tn(F,P,$,me);return Al=null,st}catch(tt){if(tt===_l||tt===gs)throw tt;var Bt=li(29,tt,null,F.mode);return Bt.lanes=me,Bt.return=F,Bt}}}var al=vf(!0),xf=vf(!1),Ao=!1;function pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function No(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(e,i,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(qt&2)!==0){var p=s.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),s.pending=i,i=us(e),tf(e,null,l),i}return cs(e,s,i,l),us(e)}function ya(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var s=i.lanes;s&=e.pendingLanes,l|=s,i.lanes=l,xn(e,l)}}function mc(e,i){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:s.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var gc=!1;function va(){if(gc){var e=Cl;if(e!==null)throw e}}function xa(e,i,l,s){gc=!1;var p=e.updateQueue;Ao=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var k=_,Y=k.next;k.next=null,S===null?g=Y:S.next=Y,S=k;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,_=ue.lastBaseUpdate,_!==S&&(_===null?ue.firstBaseUpdate=Y:_.next=Y,ue.lastBaseUpdate=k))}if(g!==null){var Se=p.baseState;S=0,ue=Y=k=null,_=g;do{var K=_.lane&-536870913,ne=K!==_.lane;if(ne?(zt&K)===K:(s&K)===K){K!==0&&K===El&&(gc=!0),ue!==null&&(ue=ue.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Xe=e,ht=_;K=i;var tn=l;switch(ht.tag){case 1:if(Xe=ht.payload,typeof Xe=="function"){Se=Xe.call(tn,Se,K);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ht.payload,K=typeof Xe=="function"?Xe.call(tn,Se,K):Xe,K==null)break e;Se=b({},Se,K);break e;case 2:Ao=!0}}K=_.callback,K!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[K]:ne.push(K))}else ne={lane:K,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ue===null?(Y=ue=ne,k=Se):ue=ue.next=ne,S|=K;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;ne=_,_=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);ue===null&&(k=Se),p.baseState=k,p.firstBaseUpdate=Y,p.lastBaseUpdate=ue,g===null&&(p.shared.lanes=0),Do|=S,e.lanes=S,e.memoizedState=Se}}function bf(e,i){if(typeof e!="function")throw Error(a(191,e));e.call(i)}function Sf(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)bf(l[e],i)}var Nl=L(null),bs=L(0);function Tf(e,i){e=fo,xe(bs,e),xe(Nl,i),fo=e|i.baseLanes}function yc(){xe(bs,fo),xe(Nl,Nl.current)}function vc(){fo=bs.current,se(Nl),se(bs)}var ai=L(null),bi=null;function Ro(e){var i=e.alternate;xe(yn,yn.current&1),xe(ai,e),bi===null&&(i===null||Nl.current!==null||i.memoizedState!==null)&&(bi=e)}function xc(e){xe(yn,yn.current),xe(ai,e),bi===null&&(bi=e)}function wf(e){e.tag===22?(xe(yn,yn.current),xe(ai,e),bi===null&&(bi=e)):ko()}function ko(){xe(yn,yn.current),xe(ai,ai.current)}function si(e){se(ai),bi===e&&(bi=null),se(yn)}var yn=L(0);function Ss(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Cu(l)||_u(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var io=0,Ct=null,Wt=null,wn=null,Ts=!1,Ml=!1,sl=!1,ws=0,ba=0,Rl=null,ev=0;function hn(){throw Error(a(321))}function bc(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!oi(e[l],i[l]))return!1;return!0}function Sc(e,i,l,s,p,g){return io=g,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=e===null||e.memoizedState===null?ap:Uc,sl=!1,g=l(s,p),sl=!1,Ml&&(g=Cf(i,l,s,p)),Ef(e),g}function Ef(e){V.H=wa;var i=Wt!==null&&Wt.next!==null;if(io=0,wn=Wt=Ct=null,Ts=!1,ba=0,Rl=null,i)throw Error(a(300));e===null||En||(e=e.dependencies,e!==null&&ps(e)&&(En=!0))}function Cf(e,i,l,s){Ct=e;var p=0;do{if(Ml&&(Rl=null),ba=0,Ml=!1,25<=p)throw Error(a(301));if(p+=1,wn=Wt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}V.H=sp,g=i(l,s)}while(Ml);return g}function tv(){var e=V.H,i=e.useState()[0];return i=typeof i.then=="function"?Sa(i):i,e=e.useState()[0],(Wt!==null?Wt.memoizedState:null)!==e&&(Ct.flags|=1024),i}function Tc(){var e=ws!==0;return ws=0,e}function wc(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function Ec(e){if(Ts){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ts=!1}io=0,wn=Wt=Ct=null,Ml=!1,ba=ws=0,Rl=null}function qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Ct.memoizedState=wn=e:wn=wn.next=e,wn}function vn(){if(Wt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var i=wn===null?Ct.memoizedState:wn.next;if(i!==null)wn=i,Wt=e;else{if(e===null)throw Ct.alternate===null?Error(a(467)):Error(a(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},wn===null?Ct.memoizedState=wn=e:wn=wn.next=e}return wn}function Es(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sa(e){var i=ba;return ba+=1,Rl===null&&(Rl=[]),e=mf(Rl,e,i),i=Ct,(wn===null?i.memoizedState:wn.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?ap:Uc),e}function Cs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Sa(e);if(e.$$typeof===ce)return Dn(e)}throw Error(a(438,String(e)))}function Cc(e){var i=null,l=Ct.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var s=Ct.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(i={data:s.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Es(),Ct.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),s=0;s<e;s++)l[s]=$e;return i.index++,l}function oo(e,i){return typeof i=="function"?i(e):i}function _s(e){var i=vn();return _c(i,Wt,e)}function _c(e,i,l){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=l;var p=e.baseQueue,g=s.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}i.baseQueue=p=g,s.pending=null}if(g=e.baseState,p===null)e.memoizedState=g;else{i=p.next;var _=S=null,k=null,Y=i,ue=!1;do{var Se=Y.lane&-536870913;if(Se!==Y.lane?(zt&Se)===Se:(io&Se)===Se){var K=Y.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),Se===El&&(ue=!0);else if((io&K)===K){Y=Y.next,K===El&&(ue=!0);continue}else Se={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(_=k=Se,S=g):k=k.next=Se,Ct.lanes|=K,Do|=K;Se=Y.action,sl&&l(g,Se),g=Y.hasEagerState?Y.eagerState:l(g,Se)}else K={lane:Se,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(_=k=K,S=g):k=k.next=K,Ct.lanes|=Se,Do|=Se;Y=Y.next}while(Y!==null&&Y!==i);if(k===null?S=g:k.next=_,!oi(g,e.memoizedState)&&(En=!0,ue&&(l=Cl,l!==null)))throw l;e.memoizedState=g,e.baseState=S,e.baseQueue=k,s.lastRenderedState=g}return p===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ac(e){var i=vn(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=e;var s=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do g=e(g,S.action),S=S.next;while(S!==p);oi(g,i.memoizedState)||(En=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,s]}function _f(e,i,l){var s=Ct,p=vn(),g=Ut;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=i();var S=!oi((Wt||p).memoizedState,l);if(S&&(p.memoizedState=l,En=!0),p=p.queue,Rc(Mf.bind(null,s,p,e),[e]),p.getSnapshot!==i||S||wn!==null&&wn.memoizedState.tag&1){if(s.flags|=2048,kl(9,{destroy:void 0},Nf.bind(null,s,p,l,i),null),on===null)throw Error(a(349));g||(io&127)!==0||Af(s,i,l)}return l}function Af(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Ct.updateQueue,i===null?(i=Es(),Ct.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function Nf(e,i,l,s){i.value=l,i.getSnapshot=s,Rf(i)&&kf(e)}function Mf(e,i,l){return l(function(){Rf(i)&&kf(e)})}function Rf(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!oi(e,l)}catch{return!0}}function kf(e){var i=Zo(e,2);i!==null&&Wn(i,e,2)}function Nc(e){var i=qn();if(typeof e=="function"){var l=e;if(e=l(),sl){ke(!0);try{l()}finally{ke(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e},i}function If(e,i,l,s){return e.baseState=l,_c(e,Wt,typeof s=="function"?s:oo)}function nv(e,i,l,s,p){if(Ms(e))throw Error(a(485));if(e=i.action,e!==null){var g={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};V.T!==null?l(!0):g.isTransition=!1,s(g),l=i.pending,l===null?(g.next=i.pending=g,zf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function zf(e,i){var l=i.action,s=i.payload,p=e.state;if(i.isTransition){var g=V.T,S={};V.T=S;try{var _=l(p,s),k=V.S;k!==null&&k(S,_),Df(e,i,_)}catch(Y){Mc(e,i,Y)}finally{g!==null&&S.types!==null&&(g.types=S.types),V.T=g}}else try{g=l(p,s),Df(e,i,g)}catch(Y){Mc(e,i,Y)}}function Df(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){Lf(e,i,s)},function(s){return Mc(e,i,s)}):Lf(e,i,l)}function Lf(e,i,l){i.status="fulfilled",i.value=l,Uf(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,zf(e,l)))}function Mc(e,i,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do i.status="rejected",i.reason=l,Uf(i),i=i.next;while(i!==s)}e.action=null}function Uf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Pf(e,i){return i}function Hf(e,i){if(Ut){var l=on.formState;if(l!==null){e:{var s=Ct;if(Ut){if(sn){t:{for(var p=sn,g=xi;p.nodeType!==8;){if(!g){p=null;break t}if(p=Si(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){sn=Si(p.nextSibling),s=p.data==="F!";break e}}Co(s)}s=!1}s&&(i=l[0])}}return l=qn(),l.memoizedState=l.baseState=i,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pf,lastRenderedState:i},l.queue=s,l=ip.bind(null,Ct,s),s.dispatch=l,s=Nc(!1),g=Lc.bind(null,Ct,!1,s.queue),s=qn(),p={state:i,dispatch:null,action:e,pending:null},s.queue=p,l=nv.bind(null,Ct,p,g,l),p.dispatch=l,s.memoizedState=e,[i,l,!1]}function Gf(e){var i=vn();return Ff(i,Wt,e)}function Ff(e,i,l){if(i=_c(e,i,Pf)[0],e=_s(oo)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var s=Sa(i)}catch(S){throw S===_l?gs:S}else s=i;i=vn();var p=i.queue,g=p.dispatch;return l!==i.memoizedState&&(Ct.flags|=2048,kl(9,{destroy:void 0},iv.bind(null,p,l),null)),[s,g,e]}function iv(e,i){e.action=i}function Bf(e){var i=vn(),l=Wt;if(l!==null)return Ff(i,l,e);vn(),i=i.memoizedState,l=vn();var s=l.queue.dispatch;return l.memoizedState=e,[i,s,!1]}function kl(e,i,l,s){return e={tag:e,create:l,deps:s,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=Es(),Ct.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,i.lastEffect=e),e}function Vf(){return vn().memoizedState}function As(e,i,l,s){var p=qn();Ct.flags|=e,p.memoizedState=kl(1|i,{destroy:void 0},l,s===void 0?null:s)}function Ns(e,i,l,s){var p=vn();s=s===void 0?null:s;var g=p.memoizedState.inst;Wt!==null&&s!==null&&bc(s,Wt.memoizedState.deps)?p.memoizedState=kl(i,g,l,s):(Ct.flags|=e,p.memoizedState=kl(1|i,g,l,s))}function Of(e,i){As(8390656,8,e,i)}function Rc(e,i){Ns(2048,8,e,i)}function ov(e){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=Es(),Ct.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function qf(e){var i=vn().memoizedState;return ov({ref:i,nextImpl:e}),function(){if((qt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function jf(e,i){return Ns(4,2,e,i)}function $f(e,i){return Ns(4,4,e,i)}function Yf(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Jf(e,i,l){l=l!=null?l.concat([e]):null,Ns(4,4,Yf.bind(null,i,e),l)}function kc(){}function Kf(e,i){var l=vn();i=i===void 0?null:i;var s=l.memoizedState;return i!==null&&bc(i,s[1])?s[0]:(l.memoizedState=[e,i],e)}function Xf(e,i){var l=vn();i=i===void 0?null:i;var s=l.memoizedState;if(i!==null&&bc(i,s[1]))return s[0];if(s=e(),sl){ke(!0);try{e()}finally{ke(!1)}}return l.memoizedState=[s,i],s}function Ic(e,i,l){return l===void 0||(io&1073741824)!==0&&(zt&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=Qp(),Ct.lanes|=e,Do|=e,l)}function Qf(e,i,l,s){return oi(l,i)?l:Nl.current!==null?(e=Ic(e,l,s),oi(e,i)||(En=!0),e):(io&42)===0||(io&1073741824)!==0&&(zt&261930)===0?(En=!0,e.memoizedState=l):(e=Qp(),Ct.lanes|=e,Do|=e,i)}function Zf(e,i,l,s,p){var g=Ee.p;Ee.p=g!==0&&8>g?g:8;var S=V.T,_={};V.T=_,Lc(e,!1,i,l);try{var k=p(),Y=V.S;if(Y!==null&&Y(_,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ue=Wy(k,s);Ta(e,i,ue,ui(e))}else Ta(e,i,s,ui(e))}catch(Se){Ta(e,i,{then:function(){},status:"rejected",reason:Se},ui())}finally{Ee.p=g,S!==null&&_.types!==null&&(S.types=_.types),V.T=S}}function lv(){}function zc(e,i,l,s){if(e.tag!==5)throw Error(a(476));var p=Wf(e).queue;Zf(e,p,i,ie,l===null?lv:function(){return ep(e),l(s)})}function Wf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:ie},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function ep(e){var i=Wf(e);i.next===null&&(i=e.alternate.memoizedState),Ta(e,i.next.queue,{},ui())}function Dc(){return Dn(Ga)}function tp(){return vn().memoizedState}function np(){return vn().memoizedState}function av(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=ui();e=No(l);var s=Mo(i,e,l);s!==null&&(Wn(s,i,l),ya(s,i,l)),i={cache:cc()},e.payload=i;return}i=i.return}}function sv(e,i,l){var s=ui();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ms(e)?op(i,l):(l=Zr(e,i,l,s),l!==null&&(Wn(l,e,s),lp(l,i,s)))}function ip(e,i,l){var s=ui();Ta(e,i,l,s)}function Ta(e,i,l,s){var p={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ms(e))op(i,p);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,_=g(S,l);if(p.hasEagerState=!0,p.eagerState=_,oi(_,S))return cs(e,i,p,0),on===null&&rs(),!1}catch{}if(l=Zr(e,i,p,s),l!==null)return Wn(l,e,s),lp(l,i,s),!0}return!1}function Lc(e,i,l,s){if(s={lane:2,revertLane:pu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ms(e)){if(i)throw Error(a(479))}else i=Zr(e,l,s,2),i!==null&&Wn(i,e,2)}function Ms(e){var i=e.alternate;return e===Ct||i!==null&&i===Ct}function op(e,i){Ml=Ts=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function lp(e,i,l){if((l&4194048)!==0){var s=i.lanes;s&=e.pendingLanes,l|=s,i.lanes=l,xn(e,l)}}var wa={readContext:Dn,use:Cs,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};wa.useEffectEvent=hn;var ap={readContext:Dn,use:Cs,useCallback:function(e,i){return qn().memoizedState=[e,i===void 0?null:i],e},useContext:Dn,useEffect:Of,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,As(4194308,4,Yf.bind(null,i,e),l)},useLayoutEffect:function(e,i){return As(4194308,4,e,i)},useInsertionEffect:function(e,i){As(4,2,e,i)},useMemo:function(e,i){var l=qn();i=i===void 0?null:i;var s=e();if(sl){ke(!0);try{e()}finally{ke(!1)}}return l.memoizedState=[s,i],s},useReducer:function(e,i,l){var s=qn();if(l!==void 0){var p=l(i);if(sl){ke(!0);try{l(i)}finally{ke(!1)}}}else p=i;return s.memoizedState=s.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},s.queue=e,e=e.dispatch=sv.bind(null,Ct,e),[s.memoizedState,e]},useRef:function(e){var i=qn();return e={current:e},i.memoizedState=e},useState:function(e){e=Nc(e);var i=e.queue,l=ip.bind(null,Ct,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:kc,useDeferredValue:function(e,i){var l=qn();return Ic(l,e,i)},useTransition:function(){var e=Nc(!1);return e=Zf.bind(null,Ct,e.queue,!0,!1),qn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var s=Ct,p=qn();if(Ut){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),on===null)throw Error(a(349));(zt&127)!==0||Af(s,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,Of(Mf.bind(null,s,g,e),[e]),s.flags|=2048,kl(9,{destroy:void 0},Nf.bind(null,s,g,l,i),null),l},useId:function(){var e=qn(),i=on.identifierPrefix;if(Ut){var l=Fi,s=Gi;l=(s&~(1<<32-Ye(s)-1)).toString(32)+l,i="_"+i+"R_"+l,l=ws++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=ev++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Dc,useFormState:Hf,useActionState:Hf,useOptimistic:function(e){var i=qn();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Lc.bind(null,Ct,!0,l),l.dispatch=i,[e,i]},useMemoCache:Cc,useCacheRefresh:function(){return qn().memoizedState=av.bind(null,Ct)},useEffectEvent:function(e){var i=qn(),l={impl:e};return i.memoizedState=l,function(){if((qt&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Uc={readContext:Dn,use:Cs,useCallback:Kf,useContext:Dn,useEffect:Rc,useImperativeHandle:Jf,useInsertionEffect:jf,useLayoutEffect:$f,useMemo:Xf,useReducer:_s,useRef:Vf,useState:function(){return _s(oo)},useDebugValue:kc,useDeferredValue:function(e,i){var l=vn();return Qf(l,Wt.memoizedState,e,i)},useTransition:function(){var e=_s(oo)[0],i=vn().memoizedState;return[typeof e=="boolean"?e:Sa(e),i]},useSyncExternalStore:_f,useId:tp,useHostTransitionStatus:Dc,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,i){var l=vn();return If(l,Wt,e,i)},useMemoCache:Cc,useCacheRefresh:np};Uc.useEffectEvent=qf;var sp={readContext:Dn,use:Cs,useCallback:Kf,useContext:Dn,useEffect:Rc,useImperativeHandle:Jf,useInsertionEffect:jf,useLayoutEffect:$f,useMemo:Xf,useReducer:Ac,useRef:Vf,useState:function(){return Ac(oo)},useDebugValue:kc,useDeferredValue:function(e,i){var l=vn();return Wt===null?Ic(l,e,i):Qf(l,Wt.memoizedState,e,i)},useTransition:function(){var e=Ac(oo)[0],i=vn().memoizedState;return[typeof e=="boolean"?e:Sa(e),i]},useSyncExternalStore:_f,useId:tp,useHostTransitionStatus:Dc,useFormState:Bf,useActionState:Bf,useOptimistic:function(e,i){var l=vn();return Wt!==null?If(l,Wt,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Cc,useCacheRefresh:np};sp.useEffectEvent=qf;function Pc(e,i,l,s){i=e.memoizedState,l=l(s,i),l=l==null?i:b({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Hc={enqueueSetState:function(e,i,l){e=e._reactInternals;var s=ui(),p=No(s);p.payload=i,l!=null&&(p.callback=l),i=Mo(e,p,s),i!==null&&(Wn(i,e,s),ya(i,e,s))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var s=ui(),p=No(s);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=Mo(e,p,s),i!==null&&(Wn(i,e,s),ya(i,e,s))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=ui(),s=No(l);s.tag=2,i!=null&&(s.callback=i),i=Mo(e,s,l),i!==null&&(Wn(i,e,l),ya(i,e,l))}};function rp(e,i,l,s,p,g,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,S):i.prototype&&i.prototype.isPureReactComponent?!ca(l,s)||!ca(p,g):!0}function cp(e,i,l,s){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,s),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,s),i.state!==e&&Hc.enqueueReplaceState(i,i.state,null)}function rl(e,i){var l=i;if("ref"in i){l={};for(var s in i)s!=="ref"&&(l[s]=i[s])}if(e=e.defaultProps){l===i&&(l=b({},l));for(var p in e)l[p]===void 0&&(l[p]=e[p])}return l}function up(e){ss(e)}function dp(e){console.error(e)}function fp(e){ss(e)}function Rs(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(s){setTimeout(function(){throw s})}}function pp(e,i,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Gc(e,i,l){return l=No(l),l.tag=3,l.payload={element:null},l.callback=function(){Rs(e,i)},l}function hp(e){return e=No(e),e.tag=3,e}function mp(e,i,l,s){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=s.value;e.payload=function(){return p(g)},e.callback=function(){pp(i,l,s)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){pp(i,l,s),typeof p!="function"&&(Lo===null?Lo=new Set([this]):Lo.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})})}function rv(e,i,l,s,p){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(i=l.alternate,i!==null&&wl(i,l,p,!0),l=ai.current,l!==null){switch(l.tag){case 31:case 13:return bi===null?Vs():l.alternate===null&&mn===0&&(mn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,s===ys?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([s]):i.add(s),uu(e,s,p)),!1;case 22:return l.flags|=65536,s===ys?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([s]):l.add(s)),uu(e,s,p)),!1}throw Error(a(435,l.tag))}return uu(e,s,p),Vs(),!1}if(Ut)return i=ai.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,s!==oc&&(e=Error(a(422),{cause:s}),fa(gi(e,l)))):(s!==oc&&(i=Error(a(423),{cause:s}),fa(gi(i,l))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,s=gi(s,l),p=Gc(e.stateNode,s,p),mc(e,p),mn!==4&&(mn=2)),!1;var g=Error(a(520),{cause:s});if(g=gi(g,l),ka===null?ka=[g]:ka.push(g),mn!==4&&(mn=2),i===null)return!0;s=gi(s,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=p&-p,l.lanes|=e,e=Gc(l.stateNode,s,e),mc(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Lo===null||!Lo.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=hp(p),mp(p,e,l,s),mc(l,p),!1}l=l.return}while(l!==null);return!1}var Fc=Error(a(461)),En=!1;function Ln(e,i,l,s){i.child=e===null?xf(i,null,l,s):al(i,e.child,l,s)}function gp(e,i,l,s,p){l=l.render;var g=i.ref;if("ref"in s){var S={};for(var _ in s)_!=="ref"&&(S[_]=s[_])}else S=s;return nl(i),s=Sc(e,i,l,S,g,p),_=Tc(),e!==null&&!En?(wc(e,i,p),lo(e,i,p)):(Ut&&_&&nc(i),i.flags|=1,Ln(e,i,s,p),i.child)}function yp(e,i,l,s,p){if(e===null){var g=l.type;return typeof g=="function"&&!Wr(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,vp(e,i,g,s,p)):(e=ds(l.type,null,s,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!Jc(e,p)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:ca,l(S,s)&&e.ref===i.ref)return lo(e,i,p)}return i.flags|=1,e=Wi(g,s),e.ref=i.ref,e.return=i,i.child=e}function vp(e,i,l,s,p){if(e!==null){var g=e.memoizedProps;if(ca(g,s)&&e.ref===i.ref)if(En=!1,i.pendingProps=s=g,Jc(e,p))(e.flags&131072)!==0&&(En=!0);else return i.lanes=e.lanes,lo(e,i,p)}return Bc(e,i,l,s,p)}function xp(e,i,l,s){var p=s.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(s=i.child=e.child,p=0;s!==null;)p=p|s.lanes|s.childLanes,s=s.sibling;s=p&~g}else s=0,i.child=null;return bp(e,i,g,l,s)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&ms(i,g!==null?g.cachePool:null),g!==null?Tf(i,g):yc(),wf(i);else return s=i.lanes=536870912,bp(e,i,g!==null?g.baseLanes|l:l,l,s)}else g!==null?(ms(i,g.cachePool),Tf(i,g),ko(),i.memoizedState=null):(e!==null&&ms(i,null),yc(),ko());return Ln(e,i,p,l),i.child}function Ea(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function bp(e,i,l,s,p){var g=dc();return g=g===null?null:{parent:Tn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&ms(i,null),yc(),wf(i),e!==null&&wl(e,i,s,!0),i.childLanes=p,null}function ks(e,i){return i=zs({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Sp(e,i,l){return al(i,e.child,null,l),e=ks(i,i.pendingProps),e.flags|=2,si(i),i.memoizedState=null,e}function cv(e,i,l){var s=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ut){if(s.mode==="hidden")return e=ks(i,s),i.lanes=536870912,Ea(null,e);if(xc(i),(e=sn)?(e=zh(e,xi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:wo!==null?{id:Gi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},l=of(e),l.return=i,i.child=l,zn=i,sn=null)):e=null,e===null)throw Co(i);return i.lanes=536870912,null}return ks(i,s)}var g=e.memoizedState;if(g!==null){var S=g.dehydrated;if(xc(i),p)if(i.flags&256)i.flags&=-257,i=Sp(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(a(558));else if(En||wl(e,i,l,!1),p=(l&e.childLanes)!==0,En||p){if(s=on,s!==null&&(S=un(s,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,Zo(e,S),Wn(s,e,S),Fc;Vs(),i=Sp(e,i,l)}else e=g.treeContext,sn=Si(S.nextSibling),zn=i,Ut=!0,Eo=null,xi=!1,e!==null&&sf(i,e),i=ks(i,s),i.flags|=4096;return i}return e=Wi(e.child,{mode:s.mode,children:s.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Is(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function Bc(e,i,l,s,p){return nl(i),l=Sc(e,i,l,s,void 0,p),s=Tc(),e!==null&&!En?(wc(e,i,p),lo(e,i,p)):(Ut&&s&&nc(i),i.flags|=1,Ln(e,i,l,p),i.child)}function Tp(e,i,l,s,p,g){return nl(i),i.updateQueue=null,l=Cf(i,s,l,p),Ef(e),s=Tc(),e!==null&&!En?(wc(e,i,g),lo(e,i,g)):(Ut&&s&&nc(i),i.flags|=1,Ln(e,i,l,g),i.child)}function wp(e,i,l,s,p){if(nl(i),i.stateNode===null){var g=xl,S=l.contextType;typeof S=="object"&&S!==null&&(g=Dn(S)),g=new l(s,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Hc,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=s,g.state=i.memoizedState,g.refs={},pc(i),S=l.contextType,g.context=typeof S=="object"&&S!==null?Dn(S):xl,g.state=i.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Pc(i,l,S,s),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Hc.enqueueReplaceState(g,g.state,null),xa(i,s,g,p),va(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),s=!0}else if(e===null){g=i.stateNode;var _=i.memoizedProps,k=rl(l,_);g.props=k;var Y=g.context,ue=l.contextType;S=xl,typeof ue=="object"&&ue!==null&&(S=Dn(ue));var Se=l.getDerivedStateFromProps;ue=typeof Se=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,ue||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||Y!==S)&&cp(i,g,s,S),Ao=!1;var K=i.memoizedState;g.state=K,xa(i,s,g,p),va(),Y=i.memoizedState,_||K!==Y||Ao?(typeof Se=="function"&&(Pc(i,l,Se,s),Y=i.memoizedState),(k=Ao||rp(i,l,k,s,K,Y,S))?(ue||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=s,i.memoizedState=Y),g.props=s,g.state=Y,g.context=S,s=k):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),s=!1)}else{g=i.stateNode,hc(e,i),S=i.memoizedProps,ue=rl(l,S),g.props=ue,Se=i.pendingProps,K=g.context,Y=l.contextType,k=xl,typeof Y=="object"&&Y!==null&&(k=Dn(Y)),_=l.getDerivedStateFromProps,(Y=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==Se||K!==k)&&cp(i,g,s,k),Ao=!1,K=i.memoizedState,g.state=K,xa(i,s,g,p),va();var ne=i.memoizedState;S!==Se||K!==ne||Ao||e!==null&&e.dependencies!==null&&ps(e.dependencies)?(typeof _=="function"&&(Pc(i,l,_,s),ne=i.memoizedState),(ue=Ao||rp(i,l,ue,s,K,ne,k)||e!==null&&e.dependencies!==null&&ps(e.dependencies))?(Y||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(s,ne,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(s,ne,k)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&K===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&K===e.memoizedState||(i.flags|=1024),i.memoizedProps=s,i.memoizedState=ne),g.props=s,g.state=ne,g.context=k,s=ue):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&K===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&K===e.memoizedState||(i.flags|=1024),s=!1)}return g=s,Is(e,i),s=(i.flags&128)!==0,g||s?(g=i.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&s?(i.child=al(i,e.child,null,p),i.child=al(i,null,l,p)):Ln(e,i,l,p),i.memoizedState=g.state,e=i.child):e=lo(e,i,p),e}function Ep(e,i,l,s){return el(),i.flags|=256,Ln(e,i,l,s),i.child}var Vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oc(e){return{baseLanes:e,cachePool:pf()}}function qc(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=ci),e}function Cp(e,i,l){var s=i.pendingProps,p=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=e!==null&&e.memoizedState===null?!1:(yn.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ut){if(p?Ro(i):ko(),(e=sn)?(e=zh(e,xi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:wo!==null?{id:Gi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},l=of(e),l.return=i,i.child=l,zn=i,sn=null)):e=null,e===null)throw Co(i);return _u(e)?i.lanes=32:i.lanes=536870912,null}var _=s.children;return s=s.fallback,p?(ko(),p=i.mode,_=zs({mode:"hidden",children:_},p),s=Wo(s,p,l,null),_.return=i,s.return=i,_.sibling=s,i.child=_,s=i.child,s.memoizedState=Oc(l),s.childLanes=qc(e,S,l),i.memoizedState=Vc,Ea(null,s)):(Ro(i),jc(i,_))}var k=e.memoizedState;if(k!==null&&(_=k.dehydrated,_!==null)){if(g)i.flags&256?(Ro(i),i.flags&=-257,i=$c(e,i,l)):i.memoizedState!==null?(ko(),i.child=e.child,i.flags|=128,i=null):(ko(),_=s.fallback,p=i.mode,s=zs({mode:"visible",children:s.children},p),_=Wo(_,p,l,null),_.flags|=2,s.return=i,_.return=i,s.sibling=_,i.child=s,al(i,e.child,null,l),s=i.child,s.memoizedState=Oc(l),s.childLanes=qc(e,S,l),i.memoizedState=Vc,i=Ea(null,s));else if(Ro(i),_u(_)){if(S=_.nextSibling&&_.nextSibling.dataset,S)var Y=S.dgst;S=Y,s=Error(a(419)),s.stack="",s.digest=S,fa({value:s,source:null,stack:null}),i=$c(e,i,l)}else if(En||wl(e,i,l,!1),S=(l&e.childLanes)!==0,En||S){if(S=on,S!==null&&(s=un(S,l),s!==0&&s!==k.retryLane))throw k.retryLane=s,Zo(e,s),Wn(S,e,s),Fc;Cu(_)||Vs(),i=$c(e,i,l)}else Cu(_)?(i.flags|=192,i.child=e.child,i=null):(e=k.treeContext,sn=Si(_.nextSibling),zn=i,Ut=!0,Eo=null,xi=!1,e!==null&&sf(i,e),i=jc(i,s.children),i.flags|=4096);return i}return p?(ko(),_=s.fallback,p=i.mode,k=e.child,Y=k.sibling,s=Wi(k,{mode:"hidden",children:s.children}),s.subtreeFlags=k.subtreeFlags&65011712,Y!==null?_=Wi(Y,_):(_=Wo(_,p,l,null),_.flags|=2),_.return=i,s.return=i,s.sibling=_,i.child=s,Ea(null,s),s=i.child,_=e.child.memoizedState,_===null?_=Oc(l):(p=_.cachePool,p!==null?(k=Tn._currentValue,p=p.parent!==k?{parent:k,pool:k}:p):p=pf(),_={baseLanes:_.baseLanes|l,cachePool:p}),s.memoizedState=_,s.childLanes=qc(e,S,l),i.memoizedState=Vc,Ea(e.child,s)):(Ro(i),l=e.child,e=l.sibling,l=Wi(l,{mode:"visible",children:s.children}),l.return=i,l.sibling=null,e!==null&&(S=i.deletions,S===null?(i.deletions=[e],i.flags|=16):S.push(e)),i.child=l,i.memoizedState=null,l)}function jc(e,i){return i=zs({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function zs(e,i){return e=li(22,e,null,i),e.lanes=0,e}function $c(e,i,l){return al(i,e.child,null,l),e=jc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function _p(e,i,l){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i),sc(e.return,i,l)}function Yc(e,i,l,s,p,g){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:p,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=s,S.tail=l,S.tailMode=p,S.treeForkCount=g)}function Ap(e,i,l){var s=i.pendingProps,p=s.revealOrder,g=s.tail;s=s.children;var S=yn.current,_=(S&2)!==0;if(_?(S=S&1|2,i.flags|=128):S&=1,xe(yn,S),Ln(e,i,s,l),s=Ut?da:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_p(e,l,i);else if(e.tag===19)_p(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(l=i.child,p=null;l!==null;)e=l.alternate,e!==null&&Ss(e)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Yc(i,!1,p,l,g,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Ss(e)===null){i.child=p;break}e=p.sibling,p.sibling=l,l=p,p=e}Yc(i,!0,l,null,g,s);break;case"together":Yc(i,!1,null,null,void 0,s);break;default:i.memoizedState=null}return i.child}function lo(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),Do|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(wl(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(a(153));if(i.child!==null){for(e=i.child,l=Wi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Wi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function Jc(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ps(e)))}function uv(e,i,l){switch(i.tag){case 3:J(i,i.stateNode.containerInfo),_o(i,Tn,e.memoizedState.cache),el();break;case 27:case 5:Me(i);break;case 4:J(i,i.stateNode.containerInfo);break;case 10:_o(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,xc(i),null;break;case 13:var s=i.memoizedState;if(s!==null)return s.dehydrated!==null?(Ro(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Cp(e,i,l):(Ro(i),e=lo(e,i,l),e!==null?e.sibling:null);Ro(i);break;case 19:var p=(e.flags&128)!==0;if(s=(l&i.childLanes)!==0,s||(wl(e,i,l,!1),s=(l&i.childLanes)!==0),p){if(s)return Ap(e,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),xe(yn,yn.current),s)break;return null;case 22:return i.lanes=0,xp(e,i,l,i.pendingProps);case 24:_o(i,Tn,e.memoizedState.cache)}return lo(e,i,l)}function Np(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)En=!0;else{if(!Jc(e,l)&&(i.flags&128)===0)return En=!1,uv(e,i,l);En=(e.flags&131072)!==0}else En=!1,Ut&&(i.flags&1048576)!==0&&af(i,da,i.index);switch(i.lanes=0,i.tag){case 16:e:{var s=i.pendingProps;if(e=ol(i.elementType),i.type=e,typeof e=="function")Wr(e)?(s=rl(e,s),i.tag=1,i=wp(null,i,e,s,l)):(i.tag=0,i=Bc(null,i,e,s,l));else{if(e!=null){var p=e.$$typeof;if(p===ye){i.tag=11,i=gp(null,i,e,s,l);break e}else if(p===ve){i.tag=14,i=yp(null,i,e,s,l);break e}}throw i=xt(e)||e,Error(a(306,i,""))}}return i;case 0:return Bc(e,i,i.type,i.pendingProps,l);case 1:return s=i.type,p=rl(s,i.pendingProps),wp(e,i,s,p,l);case 3:e:{if(J(i,i.stateNode.containerInfo),e===null)throw Error(a(387));s=i.pendingProps;var g=i.memoizedState;p=g.element,hc(e,i),xa(i,s,null,l);var S=i.memoizedState;if(s=S.cache,_o(i,Tn,s),s!==g.cache&&rc(i,[Tn],l,!0),va(),s=S.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Ep(e,i,s,l);break e}else if(s!==p){p=gi(Error(a(424)),i),fa(p),i=Ep(e,i,s,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,sn=Si(e.firstChild),zn=i,Ut=!0,Eo=null,xi=!0,l=xf(i,null,s,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(el(),s===p){i=lo(e,i,l);break e}Ln(e,i,s,l)}i=i.child}return i;case 26:return Is(e,i),e===null?(l=Gh(i.type,null,i.pendingProps,null))?i.memoizedState=l:Ut||(l=i.type,e=i.pendingProps,s=Ks(w.current).createElement(l),s[We]=i,s[vt]=e,Un(s,l,e),Sn(s),i.stateNode=s):i.memoizedState=Gh(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Me(i),e===null&&Ut&&(s=i.stateNode=Uh(i.type,i.pendingProps,w.current),zn=i,xi=!0,p=sn,Go(i.type)?(Au=p,sn=Si(s.firstChild)):sn=p),Ln(e,i,i.pendingProps.children,l),Is(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ut&&((p=s=sn)&&(s=Fv(s,i.type,i.pendingProps,xi),s!==null?(i.stateNode=s,zn=i,sn=Si(s.firstChild),xi=!1,p=!0):p=!1),p||Co(i)),Me(i),p=i.type,g=i.pendingProps,S=e!==null?e.memoizedProps:null,s=g.children,Tu(p,g)?s=null:S!==null&&Tu(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=Sc(e,i,tv,null,null,l),Ga._currentValue=p),Is(e,i),Ln(e,i,s,l),i.child;case 6:return e===null&&Ut&&((e=l=sn)&&(l=Bv(l,i.pendingProps,xi),l!==null?(i.stateNode=l,zn=i,sn=null,e=!0):e=!1),e||Co(i)),null;case 13:return Cp(e,i,l);case 4:return J(i,i.stateNode.containerInfo),s=i.pendingProps,e===null?i.child=al(i,null,s,l):Ln(e,i,s,l),i.child;case 11:return gp(e,i,i.type,i.pendingProps,l);case 7:return Ln(e,i,i.pendingProps,l),i.child;case 8:return Ln(e,i,i.pendingProps.children,l),i.child;case 12:return Ln(e,i,i.pendingProps.children,l),i.child;case 10:return s=i.pendingProps,_o(i,i.type,s.value),Ln(e,i,s.children,l),i.child;case 9:return p=i.type._context,s=i.pendingProps.children,nl(i),p=Dn(p),s=s(p),i.flags|=1,Ln(e,i,s,l),i.child;case 14:return yp(e,i,i.type,i.pendingProps,l);case 15:return vp(e,i,i.type,i.pendingProps,l);case 19:return Ap(e,i,l);case 31:return cv(e,i,l);case 22:return xp(e,i,l,i.pendingProps);case 24:return nl(i),s=Dn(Tn),e===null?(p=dc(),p===null&&(p=on,g=cc(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),i.memoizedState={parent:s,cache:p},pc(i),_o(i,Tn,p)):((e.lanes&l)!==0&&(hc(e,i),xa(i,null,null,l),va()),p=e.memoizedState,g=i.memoizedState,p.parent!==s?(p={parent:s,cache:s},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),_o(i,Tn,s)):(s=g.cache,_o(i,Tn,s),s!==p.cache&&rc(i,[Tn],l,!0))),Ln(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ao(e){e.flags|=4}function Kc(e,i,l,s,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(th())e.flags|=8192;else throw ll=ys,fc}else e.flags&=-16777217}function Mp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qh(i))if(th())e.flags|=8192;else throw ll=ys,fc}function Ds(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ve():536870912,e.lanes|=i,Ll|=i)}function Ca(e,i){if(!Ut)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function rn(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(i)for(var p=e.child;p!==null;)l|=p.lanes|p.childLanes,s|=p.subtreeFlags&65011712,s|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)l|=p.lanes|p.childLanes,s|=p.subtreeFlags,s|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=s,e.childLanes=l,i}function dv(e,i,l){var s=i.pendingProps;switch(ic(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(i),null;case 1:return rn(i),null;case 3:return l=i.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),no(Tn),oe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Tl(i)?ao(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lc())),rn(i),null;case 26:var p=i.type,g=i.memoizedState;return e===null?(ao(i),g!==null?(rn(i),Mp(i,g)):(rn(i),Kc(i,p,null,s,l))):g?g!==e.memoizedState?(ao(i),rn(i),Mp(i,g)):(rn(i),i.flags&=-16777217):(e=e.memoizedProps,e!==s&&ao(i),rn(i),Kc(i,p,e,s,l)),null;case 27:if(Te(i),l=w.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==s&&ao(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return rn(i),null}e=He.current,Tl(i)?rf(i):(e=Uh(p,s,l),i.stateNode=e,ao(i))}return rn(i),null;case 5:if(Te(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==s&&ao(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return rn(i),null}if(g=He.current,Tl(i))rf(i);else{var S=Ks(w.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof s.is=="string"?S.createElement("select",{is:s.is}):S.createElement("select"),s.multiple?g.multiple=!0:s.size&&(g.size=s.size);break;default:g=typeof s.is=="string"?S.createElement(p,{is:s.is}):S.createElement(p)}}g[We]=i,g[vt]=s;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;e:switch(Un(g,p,s),p){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ao(i)}}return rn(i),Kc(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==s&&ao(i);else{if(typeof s!="string"&&i.stateNode===null)throw Error(a(166));if(e=w.current,Tl(i)){if(e=i.stateNode,l=i.memoizedProps,s=null,p=zn,p!==null)switch(p.tag){case 27:case 5:s=p.memoizedProps}e[We]=i,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||Ch(e.nodeValue,l)),e||Co(i,!0)}else e=Ks(e).createTextNode(s),e[We]=i,i.stateNode=e}return rn(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(s=Tl(i),l!==null){if(e===null){if(!s)throw Error(a(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[We]=i}else el(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rn(i),e=!1}else l=lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(si(i),i):(si(i),null);if((i.flags&128)!==0)throw Error(a(558))}return rn(i),null;case 13:if(s=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Tl(i),s!==null&&s.dehydrated!==null){if(e===null){if(!p)throw Error(a(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));p[We]=i}else el(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rn(i),p=!1}else p=lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(si(i),i):(si(i),null)}return si(i),(i.flags&128)!==0?(i.lanes=l,i):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=i.child,p=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(p=s.alternate.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==p&&(s.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),Ds(i,i.updateQueue),rn(i),null);case 4:return oe(),e===null&&yu(i.stateNode.containerInfo),rn(i),null;case 10:return no(i.type),rn(i),null;case 19:if(se(yn),s=i.memoizedState,s===null)return rn(i),null;if(p=(i.flags&128)!==0,g=s.rendering,g===null)if(p)Ca(s,!1);else{if(mn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=Ss(e),g!==null){for(i.flags|=128,Ca(s,!1),e=g.updateQueue,i.updateQueue=e,Ds(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)nf(l,e),l=l.sibling;return xe(yn,yn.current&1|2),Ut&&eo(i,s.treeForkCount),i.child}e=e.sibling}s.tail!==null&&he()>Gs&&(i.flags|=128,p=!0,Ca(s,!1),i.lanes=4194304)}else{if(!p)if(e=Ss(g),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,Ds(i,e),Ca(s,!0),s.tail===null&&s.tailMode==="hidden"&&!g.alternate&&!Ut)return rn(i),null}else 2*he()-s.renderingStartTime>Gs&&l!==536870912&&(i.flags|=128,p=!0,Ca(s,!1),i.lanes=4194304);s.isBackwards?(g.sibling=i.child,i.child=g):(e=s.last,e!==null?e.sibling=g:i.child=g,s.last=g)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,l=yn.current,xe(yn,p?l&1|2:l&1),Ut&&eo(i,s.treeForkCount),e):(rn(i),null);case 22:case 23:return si(i),vc(),s=i.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(i.flags|=8192):s&&(i.flags|=8192),s?(l&536870912)!==0&&(i.flags&128)===0&&(rn(i),i.subtreeFlags&6&&(i.flags|=8192)):rn(i),l=i.updateQueue,l!==null&&Ds(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(i.flags|=2048),e!==null&&se(il),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),no(Tn),rn(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function fv(e,i){switch(ic(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return no(Tn),oe(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Te(i),null;case 31:if(i.memoizedState!==null){if(si(i),i.alternate===null)throw Error(a(340));el()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(si(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(a(340));el()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return se(yn),null;case 4:return oe(),null;case 10:return no(i.type),null;case 22:case 23:return si(i),vc(),e!==null&&se(il),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return no(Tn),null;case 25:return null;default:return null}}function Rp(e,i){switch(ic(i),i.tag){case 3:no(Tn),oe();break;case 26:case 27:case 5:Te(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&si(i);break;case 13:si(i);break;case 19:se(yn);break;case 10:no(i.type);break;case 22:case 23:si(i),vc(),e!==null&&se(il);break;case 24:no(Tn)}}function _a(e,i){try{var l=i.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var p=s.next;l=p;do{if((l.tag&e)===e){s=void 0;var g=l.create,S=l.inst;s=g(),S.destroy=s}l=l.next}while(l!==p)}}catch(_){Xt(i,i.return,_)}}function Io(e,i,l){try{var s=i.updateQueue,p=s!==null?s.lastEffect:null;if(p!==null){var g=p.next;s=g;do{if((s.tag&e)===e){var S=s.inst,_=S.destroy;if(_!==void 0){S.destroy=void 0,p=i;var k=l,Y=_;try{Y()}catch(ue){Xt(p,k,ue)}}}s=s.next}while(s!==g)}}catch(ue){Xt(i,i.return,ue)}}function kp(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{Sf(i,l)}catch(s){Xt(e,e.return,s)}}}function Ip(e,i,l){l.props=rl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){Xt(e,i,s)}}function Aa(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(p){Xt(e,i,p)}}function Bi(e,i){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(p){Xt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Xt(e,i,p)}else l.current=null}function zp(e){var i=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(p){Xt(e,e.return,p)}}function Xc(e,i,l){try{var s=e.stateNode;Dv(s,e.type,l,i),s[vt]=i}catch(p){Xt(e,e.return,p)}}function Dp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Go(e.type)||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Go(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zc(e,i,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=B));else if(s!==4&&(s===27&&Go(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(Zc(e,i,l),e=e.sibling;e!==null;)Zc(e,i,l),e=e.sibling}function Ls(e,i,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(s!==4&&(s===27&&Go(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ls(e,i,l),e=e.sibling;e!==null;)Ls(e,i,l),e=e.sibling}function Lp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Un(i,s,l),i[We]=e,i[vt]=l}catch(g){Xt(e,e.return,g)}}var so=!1,Cn=!1,Wc=!1,Up=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function pv(e,i){if(e=e.containerInfo,bu=nr,e=Yd(e),$r(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var p=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,_=-1,k=-1,Y=0,ue=0,Se=e,K=null;t:for(;;){for(var ne;Se!==l||p!==0&&Se.nodeType!==3||(_=S+p),Se!==g||s!==0&&Se.nodeType!==3||(k=S+s),Se.nodeType===3&&(S+=Se.nodeValue.length),(ne=Se.firstChild)!==null;)K=Se,Se=ne;for(;;){if(Se===e)break t;if(K===l&&++Y===p&&(_=S),K===g&&++ue===s&&(k=S),(ne=Se.nextSibling)!==null)break;Se=K,K=Se.parentNode}Se=ne}l=_===-1||k===-1?null:{start:_,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Su={focusedElem:e,selectionRange:l},nr=!1,Rn=i;Rn!==null;)if(i=Rn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Rn=e;else for(;Rn!==null;){switch(i=Rn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)p=e[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,p=g.memoizedProps,g=g.memoizedState,s=l.stateNode;try{var Xe=rl(l.type,p);e=s.getSnapshotBeforeUpdate(Xe,g),s.__reactInternalSnapshotBeforeUpdate=e}catch(ht){Xt(l,l.return,ht)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)Eu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=i.sibling,e!==null){e.return=i.return,Rn=e;break}Rn=i.return}}function Pp(e,i,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:co(e,l),s&4&&_a(5,l);break;case 1:if(co(e,l),s&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(S){Xt(l,l.return,S)}else{var p=rl(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(S){Xt(l,l.return,S)}}s&64&&kp(l),s&512&&Aa(l,l.return);break;case 3:if(co(e,l),s&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Sf(e,i)}catch(S){Xt(l,l.return,S)}}break;case 27:i===null&&s&4&&Lp(l);case 26:case 5:co(e,l),i===null&&s&4&&zp(l),s&512&&Aa(l,l.return);break;case 12:co(e,l);break;case 31:co(e,l),s&4&&Fp(e,l);break;case 13:co(e,l),s&4&&Bp(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Tv.bind(null,l),Vv(e,l))));break;case 22:if(s=l.memoizedState!==null||so,!s){i=i!==null&&i.memoizedState!==null||Cn,p=so;var g=Cn;so=s,(Cn=i)&&!g?uo(e,l,(l.subtreeFlags&8772)!==0):co(e,l),so=p,Cn=g}break;case 30:break;default:co(e,l)}}function Hp(e){var i=e.alternate;i!==null&&(e.alternate=null,Hp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&di(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dn=null,Kn=!1;function ro(e,i,l){for(l=l.child;l!==null;)Gp(e,i,l),l=l.sibling}function Gp(e,i,l){if(te&&typeof te.onCommitFiberUnmount=="function")try{te.onCommitFiberUnmount(C,l)}catch{}switch(l.tag){case 26:Cn||Bi(l,i),ro(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Cn||Bi(l,i);var s=dn,p=Kn;Go(l.type)&&(dn=l.stateNode,Kn=!1),ro(e,i,l),Ua(l.stateNode),dn=s,Kn=p;break;case 5:Cn||Bi(l,i);case 6:if(s=dn,p=Kn,dn=null,ro(e,i,l),dn=s,Kn=p,dn!==null)if(Kn)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(l.stateNode)}catch(g){Xt(l,i,g)}else try{dn.removeChild(l.stateNode)}catch(g){Xt(l,i,g)}break;case 18:dn!==null&&(Kn?(e=dn,kh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Ol(e)):kh(dn,l.stateNode));break;case 4:s=dn,p=Kn,dn=l.stateNode.containerInfo,Kn=!0,ro(e,i,l),dn=s,Kn=p;break;case 0:case 11:case 14:case 15:Io(2,l,i),Cn||Io(4,l,i),ro(e,i,l);break;case 1:Cn||(Bi(l,i),s=l.stateNode,typeof s.componentWillUnmount=="function"&&Ip(l,i,s)),ro(e,i,l);break;case 21:ro(e,i,l);break;case 22:Cn=(s=Cn)||l.memoizedState!==null,ro(e,i,l),Cn=s;break;default:ro(e,i,l)}}function Fp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ol(e)}catch(l){Xt(i,i.return,l)}}}function Bp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ol(e)}catch(l){Xt(i,i.return,l)}}function hv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Up),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Up),i;default:throw Error(a(435,e.tag))}}function Us(e,i){var l=hv(e);i.forEach(function(s){if(!l.has(s)){l.add(s);var p=wv.bind(null,e,s);s.then(p,p)}})}function Xn(e,i){var l=i.deletions;if(l!==null)for(var s=0;s<l.length;s++){var p=l[s],g=e,S=i,_=S;e:for(;_!==null;){switch(_.tag){case 27:if(Go(_.type)){dn=_.stateNode,Kn=!1;break e}break;case 5:dn=_.stateNode,Kn=!1;break e;case 3:case 4:dn=_.stateNode.containerInfo,Kn=!0;break e}_=_.return}if(dn===null)throw Error(a(160));Gp(g,S,p),dn=null,Kn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Vp(i,e),i=i.sibling}var Ri=null;function Vp(e,i){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xn(i,e),Qn(e),s&4&&(Io(3,e,e.return),_a(3,e),Io(5,e,e.return));break;case 1:Xn(i,e),Qn(e),s&512&&(Cn||l===null||Bi(l,l.return)),s&64&&so&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var p=Ri;if(Xn(i,e),Qn(e),s&512&&(Cn||l===null||Bi(l,l.return)),s&4){var g=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,p=p.ownerDocument||p;t:switch(s){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Oi]||g[We]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(s),p.head.insertBefore(g,p.querySelector("head > title"))),Un(g,s,l),g[We]=e,Sn(g),s=g;break e;case"link":var S=Vh("link","href",p).get(s+(l.href||""));if(S){for(var _=0;_<S.length;_++)if(g=S[_],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(_,1);break t}}g=p.createElement(s),Un(g,s,l),p.head.appendChild(g);break;case"meta":if(S=Vh("meta","content",p).get(s+(l.content||""))){for(_=0;_<S.length;_++)if(g=S[_],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(_,1);break t}}g=p.createElement(s),Un(g,s,l),p.head.appendChild(g);break;default:throw Error(a(468,s))}g[We]=e,Sn(g),s=g}e.stateNode=s}else Oh(p,e.type,e.stateNode);else e.stateNode=Bh(p,s,e.memoizedProps);else g!==s?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,s===null?Oh(p,e.type,e.stateNode):Bh(p,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Xc(e,e.memoizedProps,l.memoizedProps)}break;case 27:Xn(i,e),Qn(e),s&512&&(Cn||l===null||Bi(l,l.return)),l!==null&&s&4&&Xc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Xn(i,e),Qn(e),s&512&&(Cn||l===null||Bi(l,l.return)),e.flags&32){p=e.stateNode;try{dt(p,"")}catch(Xe){Xt(e,e.return,Xe)}}s&4&&e.stateNode!=null&&(p=e.memoizedProps,Xc(e,p,l!==null?l.memoizedProps:p)),s&1024&&(Wc=!0);break;case 6:if(Xn(i,e),Qn(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(Xe){Xt(e,e.return,Xe)}}break;case 3:if(Zs=null,p=Ri,Ri=Xs(i.containerInfo),Xn(i,e),Ri=p,Qn(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Ol(i.containerInfo)}catch(Xe){Xt(e,e.return,Xe)}Wc&&(Wc=!1,Op(e));break;case 4:s=Ri,Ri=Xs(e.stateNode.containerInfo),Xn(i,e),Qn(e),Ri=s;break;case 12:Xn(i,e),Qn(e);break;case 31:Xn(i,e),Qn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Us(e,s)));break;case 13:Xn(i,e),Qn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Hs=he()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Us(e,s)));break;case 22:p=e.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,Y=so,ue=Cn;if(so=Y||p,Cn=ue||k,Xn(i,e),Cn=ue,so=Y,Qn(e),s&8192)e:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||k||so||Cn||cl(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){k=l=i;try{if(g=k.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{_=k.stateNode;var Se=k.memoizedProps.style,K=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;_.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Xe){Xt(k,k.return,Xe)}}}else if(i.tag===6){if(l===null){k=i;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(Xe){Xt(k,k.return,Xe)}}}else if(i.tag===18){if(l===null){k=i;try{var ne=k.stateNode;p?Ih(ne,!0):Ih(k.stateNode,!1)}catch(Xe){Xt(k,k.return,Xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Us(e,l))));break;case 19:Xn(i,e),Qn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Us(e,s)));break;case 30:break;case 21:break;default:Xn(i,e),Qn(e)}}function Qn(e){var i=e.flags;if(i&2){try{for(var l,s=e.return;s!==null;){if(Dp(s)){l=s;break}s=s.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var p=l.stateNode,g=Qc(e);Ls(e,g,p);break;case 5:var S=l.stateNode;l.flags&32&&(dt(S,""),l.flags&=-33);var _=Qc(e);Ls(e,_,S);break;case 3:case 4:var k=l.stateNode.containerInfo,Y=Qc(e);Zc(e,Y,k);break;default:throw Error(a(161))}}catch(ue){Xt(e,e.return,ue)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Op(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Op(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function co(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Pp(e,i.alternate,i),i=i.sibling}function cl(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Io(4,i,i.return),cl(i);break;case 1:Bi(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Ip(i,i.return,l),cl(i);break;case 27:Ua(i.stateNode);case 26:case 5:Bi(i,i.return),cl(i);break;case 22:i.memoizedState===null&&cl(i);break;case 30:cl(i);break;default:cl(i)}e=e.sibling}}function uo(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var s=i.alternate,p=e,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:uo(p,g,l),_a(4,g);break;case 1:if(uo(p,g,l),s=g,p=s.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){Xt(s,s.return,Y)}if(s=g,p=s.updateQueue,p!==null){var _=s.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)bf(k[p],_)}catch(Y){Xt(s,s.return,Y)}}l&&S&64&&kp(g),Aa(g,g.return);break;case 27:Lp(g);case 26:case 5:uo(p,g,l),l&&s===null&&S&4&&zp(g),Aa(g,g.return);break;case 12:uo(p,g,l);break;case 31:uo(p,g,l),l&&S&4&&Fp(p,g);break;case 13:uo(p,g,l),l&&S&4&&Bp(p,g);break;case 22:g.memoizedState===null&&uo(p,g,l),Aa(g,g.return);break;case 30:break;default:uo(p,g,l)}i=i.sibling}}function eu(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&pa(l))}function tu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&pa(e))}function ki(e,i,l,s){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qp(e,i,l,s),i=i.sibling}function qp(e,i,l,s){var p=i.flags;switch(i.tag){case 0:case 11:case 15:ki(e,i,l,s),p&2048&&_a(9,i);break;case 1:ki(e,i,l,s);break;case 3:ki(e,i,l,s),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&pa(e)));break;case 12:if(p&2048){ki(e,i,l,s),e=i.stateNode;try{var g=i.memoizedProps,S=g.id,_=g.onPostCommit;typeof _=="function"&&_(S,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Xt(i,i.return,k)}}else ki(e,i,l,s);break;case 31:ki(e,i,l,s);break;case 13:ki(e,i,l,s);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?ki(e,i,l,s):Na(e,i):g._visibility&2?ki(e,i,l,s):(g._visibility|=2,Il(e,i,l,s,(i.subtreeFlags&10256)!==0||!1)),p&2048&&eu(S,i);break;case 24:ki(e,i,l,s),p&2048&&tu(i.alternate,i);break;default:ki(e,i,l,s)}}function Il(e,i,l,s,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,S=i,_=l,k=s,Y=S.flags;switch(S.tag){case 0:case 11:case 15:Il(g,S,_,k,p),_a(8,S);break;case 23:break;case 22:var ue=S.stateNode;S.memoizedState!==null?ue._visibility&2?Il(g,S,_,k,p):Na(g,S):(ue._visibility|=2,Il(g,S,_,k,p)),p&&Y&2048&&eu(S.alternate,S);break;case 24:Il(g,S,_,k,p),p&&Y&2048&&tu(S.alternate,S);break;default:Il(g,S,_,k,p)}i=i.sibling}}function Na(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,s=i,p=s.flags;switch(s.tag){case 22:Na(l,s),p&2048&&eu(s.alternate,s);break;case 24:Na(l,s),p&2048&&tu(s.alternate,s);break;default:Na(l,s)}i=i.sibling}}var Ma=8192;function zl(e,i,l){if(e.subtreeFlags&Ma)for(e=e.child;e!==null;)jp(e,i,l),e=e.sibling}function jp(e,i,l){switch(e.tag){case 26:zl(e,i,l),e.flags&Ma&&e.memoizedState!==null&&ex(l,Ri,e.memoizedState,e.memoizedProps);break;case 5:zl(e,i,l);break;case 3:case 4:var s=Ri;Ri=Xs(e.stateNode.containerInfo),zl(e,i,l),Ri=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ma,Ma=16777216,zl(e,i,l),Ma=s):zl(e,i,l));break;default:zl(e,i,l)}}function $p(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ra(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var s=i[l];Rn=s,Jp(s,e)}$p(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Yp(e),e=e.sibling}function Yp(e){switch(e.tag){case 0:case 11:case 15:Ra(e),e.flags&2048&&Io(9,e,e.return);break;case 3:Ra(e);break;case 12:Ra(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ps(e)):Ra(e);break;default:Ra(e)}}function Ps(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var s=i[l];Rn=s,Jp(s,e)}$p(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Io(8,i,i.return),Ps(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Ps(i));break;default:Ps(i)}e=e.sibling}}function Jp(e,i){for(;Rn!==null;){var l=Rn;switch(l.tag){case 0:case 11:case 15:Io(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:pa(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,Rn=s;else e:for(l=e;Rn!==null;){s=Rn;var p=s.sibling,g=s.return;if(Hp(s),s===l){Rn=null;break e}if(p!==null){p.return=g,Rn=p;break e}Rn=g}}}var mv={getCacheForType:function(e){var i=Dn(Tn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return Dn(Tn).controller.signal}},gv=typeof WeakMap=="function"?WeakMap:Map,qt=0,on=null,Rt=null,zt=0,Kt=0,ri=null,zo=!1,Dl=!1,nu=!1,fo=0,mn=0,Do=0,ul=0,iu=0,ci=0,Ll=0,ka=null,Zn=null,ou=!1,Hs=0,Kp=0,Gs=1/0,Fs=null,Lo=null,Nn=0,Uo=null,Ul=null,po=0,lu=0,au=null,Xp=null,Ia=0,su=null;function ui(){return(qt&2)!==0&&zt!==0?zt&-zt:V.T!==null?pu():Li()}function Qp(){if(ci===0)if((zt&536870912)===0||Ut){var e=Jt;Jt<<=1,(Jt&3932160)===0&&(Jt=262144),ci=e}else ci=536870912;return e=ai.current,e!==null&&(e.flags|=32),ci}function Wn(e,i,l){(e===on&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&(Pl(e,0),Po(e,zt,ci,!1)),Tt(e,l),((qt&2)===0||e!==on)&&(e===on&&((qt&2)===0&&(ul|=l),mn===4&&Po(e,zt,ci,!1)),Vi(e))}function Zp(e,i,l){if((qt&6)!==0)throw Error(a(327));var s=!l&&(i&127)===0&&(i&e.expiredLanes)===0||ct(e,i),p=s?xv(e,i):cu(e,i,!0),g=s;do{if(p===0){Dl&&!s&&Po(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!yv(l)){p=cu(e,i,!1),g=!1;continue}if(p===2){if(g=i,e.errorRecoveryDisabledLanes&g)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var _=e;p=ka;var k=_.current.memoizedState.isDehydrated;if(k&&(Pl(_,S).flags|=256),S=cu(_,S,!1),S!==2){if(nu&&!k){_.errorRecoveryDisabledLanes|=g,ul|=g,p=4;break e}g=Zn,Zn=p,g!==null&&(Zn===null?Zn=g:Zn.push.apply(Zn,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Pl(e,0),Po(e,i,0,!0);break}e:{switch(s=e,g=p,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Po(s,i,ci,!zo);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(p=Hs+300-he(),10<p)){if(Po(s,i,ci,!zo),Ne(s,0,!0)!==0)break e;po=i,s.timeoutHandle=Mh(Wp.bind(null,s,l,Zn,Fs,ou,i,ci,ul,Ll,zo,g,"Throttled",-0,0),p);break e}Wp(s,l,Zn,Fs,ou,i,ci,ul,Ll,zo,g,null,-0,0)}}break}while(!0);Vi(e)}function Wp(e,i,l,s,p,g,S,_,k,Y,ue,Se,K,ne){if(e.timeoutHandle=-1,Se=i.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:B},jp(i,g,Se);var Xe=(g&62914560)===g?Hs-he():(g&4194048)===g?Kp-he():0;if(Xe=tx(Se,Xe),Xe!==null){po=g,e.cancelPendingCommit=Xe(sh.bind(null,e,i,g,l,s,p,S,_,k,ue,Se,null,K,ne)),Po(e,g,S,!Y);return}}sh(e,i,g,l,s,p,S,_,k)}function yv(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var p=l[s],g=p.getSnapshot;p=p.value;try{if(!oi(g(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Po(e,i,l,s){i&=~iu,i&=~ul,e.suspendedLanes|=i,e.pingedLanes&=~i,s&&(e.warmLanes|=i),s=e.expirationTimes;for(var p=i;0<p;){var g=31-Ye(p),S=1<<g;s[g]=-1,p&=~S}l!==0&&jt(e,l,i)}function Bs(){return(qt&6)===0?(za(0),!1):!0}function ru(){if(Rt!==null){if(Kt===0)var e=Rt.return;else e=Rt,to=tl=null,Ec(e),Al=null,ma=0,e=Rt;for(;e!==null;)Rp(e.alternate,e),e=e.return;Rt=null}}function Pl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Pv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),po=0,ru(),on=e,Rt=l=Wi(e.current,null),zt=i,Kt=0,ri=null,zo=!1,Dl=ct(e,i),nu=!1,Ll=ci=iu=ul=Do=mn=0,Zn=ka=null,ou=!1,(i&8)!==0&&(i|=i&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=i;0<s;){var p=31-Ye(s),g=1<<p;i|=e[p],s&=~g}return fo=i,rs(),l}function eh(e,i){Ct=null,V.H=wa,i===_l||i===gs?(i=gf(),Kt=3):i===fc?(i=gf(),Kt=4):Kt=i===Fc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ri=i,Rt===null&&(mn=1,Rs(e,gi(i,e.current)))}function th(){var e=ai.current;return e===null?!0:(zt&4194048)===zt?bi===null:(zt&62914560)===zt||(zt&536870912)!==0?e===bi:!1}function nh(){var e=V.H;return V.H=wa,e===null?wa:e}function ih(){var e=V.A;return V.A=mv,e}function Vs(){mn=4,zo||(zt&4194048)!==zt&&ai.current!==null||(Dl=!0),(Do&134217727)===0&&(ul&134217727)===0||on===null||Po(on,zt,ci,!1)}function cu(e,i,l){var s=qt;qt|=2;var p=nh(),g=ih();(on!==e||zt!==i)&&(Fs=null,Pl(e,i)),i=!1;var S=mn;e:do try{if(Kt!==0&&Rt!==null){var _=Rt,k=ri;switch(Kt){case 8:ru(),S=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(i=!0);var Y=Kt;if(Kt=0,ri=null,Hl(e,_,k,Y),l&&Dl){S=0;break e}break;default:Y=Kt,Kt=0,ri=null,Hl(e,_,k,Y)}}vv(),S=mn;break}catch(ue){eh(e,ue)}while(!0);return i&&e.shellSuspendCounter++,to=tl=null,qt=s,V.H=p,V.A=g,Rt===null&&(on=null,zt=0,rs()),S}function vv(){for(;Rt!==null;)oh(Rt)}function xv(e,i){var l=qt;qt|=2;var s=nh(),p=ih();on!==e||zt!==i?(Fs=null,Gs=he()+500,Pl(e,i)):Dl=ct(e,i);e:do try{if(Kt!==0&&Rt!==null){i=Rt;var g=ri;t:switch(Kt){case 1:Kt=0,ri=null,Hl(e,i,g,1);break;case 2:case 9:if(hf(g)){Kt=0,ri=null,lh(i);break}i=function(){Kt!==2&&Kt!==9||on!==e||(Kt=7),Vi(e)},g.then(i,i);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:hf(g)?(Kt=0,ri=null,lh(i)):(Kt=0,ri=null,Hl(e,i,g,7));break;case 5:var S=null;switch(Rt.tag){case 26:S=Rt.memoizedState;case 5:case 27:var _=Rt;if(S?qh(S):_.stateNode.complete){Kt=0,ri=null;var k=_.sibling;if(k!==null)Rt=k;else{var Y=_.return;Y!==null?(Rt=Y,Os(Y)):Rt=null}break t}}Kt=0,ri=null,Hl(e,i,g,5);break;case 6:Kt=0,ri=null,Hl(e,i,g,6);break;case 8:ru(),mn=6;break e;default:throw Error(a(462))}}bv();break}catch(ue){eh(e,ue)}while(!0);return to=tl=null,V.H=s,V.A=p,qt=l,Rt!==null?0:(on=null,zt=0,rs(),mn)}function bv(){for(;Rt!==null&&!pe();)oh(Rt)}function oh(e){var i=Np(e.alternate,e,fo);e.memoizedProps=e.pendingProps,i===null?Os(e):Rt=i}function lh(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=Tp(l,i,i.pendingProps,i.type,void 0,zt);break;case 11:i=Tp(l,i,i.pendingProps,i.type.render,i.ref,zt);break;case 5:Ec(i);default:Rp(l,i),i=Rt=nf(i,fo),i=Np(l,i,fo)}e.memoizedProps=e.pendingProps,i===null?Os(e):Rt=i}function Hl(e,i,l,s){to=tl=null,Ec(i),Al=null,ma=0;var p=i.return;try{if(rv(e,p,i,l,zt)){mn=1,Rs(e,gi(l,e.current)),Rt=null;return}}catch(g){if(p!==null)throw Rt=p,g;mn=1,Rs(e,gi(l,e.current)),Rt=null;return}i.flags&32768?(Ut||s===1?e=!0:Dl||(zt&536870912)!==0?e=!1:(zo=e=!0,(s===2||s===9||s===3||s===6)&&(s=ai.current,s!==null&&s.tag===13&&(s.flags|=16384))),ah(i,e)):Os(i)}function Os(e){var i=e;do{if((i.flags&32768)!==0){ah(i,zo);return}e=i.return;var l=dv(i.alternate,i,fo);if(l!==null){Rt=l;return}if(i=i.sibling,i!==null){Rt=i;return}Rt=i=e}while(i!==null);mn===0&&(mn=5)}function ah(e,i){do{var l=fv(e.alternate,e);if(l!==null){l.flags&=32767,Rt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){Rt=e;return}Rt=e=l}while(e!==null);mn=6,Rt=null}function sh(e,i,l,s,p,g,S,_,k){e.cancelPendingCommit=null;do qs();while(Nn!==0);if((qt&6)!==0)throw Error(a(327));if(i!==null){if(i===e.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=Qr,gt(e,l,g,S,_,k),e===on&&(Rt=on=null,zt=0),Ul=i,Uo=e,po=l,lu=g,au=p,Xp=s,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ev(q,function(){return fh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||s){s=V.T,V.T=null,p=Ee.p,Ee.p=2,S=qt,qt|=4;try{pv(e,i,l)}finally{qt=S,Ee.p=p,V.T=s}}Nn=1,rh(),ch(),uh()}}function rh(){if(Nn===1){Nn=0;var e=Uo,i=Ul,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var s=Ee.p;Ee.p=2;var p=qt;qt|=4;try{Vp(i,e);var g=Su,S=Yd(e.containerInfo),_=g.focusedElem,k=g.selectionRange;if(S!==_&&_&&_.ownerDocument&&$d(_.ownerDocument.documentElement,_)){if(k!==null&&$r(_)){var Y=k.start,ue=k.end;if(ue===void 0&&(ue=Y),"selectionStart"in _)_.selectionStart=Y,_.selectionEnd=Math.min(ue,_.value.length);else{var Se=_.ownerDocument||document,K=Se&&Se.defaultView||window;if(K.getSelection){var ne=K.getSelection(),Xe=_.textContent.length,ht=Math.min(k.start,Xe),tn=k.end===void 0?ht:Math.min(k.end,Xe);!ne.extend&&ht>tn&&(S=tn,tn=ht,ht=S);var F=jd(_,ht),P=jd(_,tn);if(F&&P&&(ne.rangeCount!==1||ne.anchorNode!==F.node||ne.anchorOffset!==F.offset||ne.focusNode!==P.node||ne.focusOffset!==P.offset)){var $=Se.createRange();$.setStart(F.node,F.offset),ne.removeAllRanges(),ht>tn?(ne.addRange($),ne.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),ne.addRange($))}}}}for(Se=[],ne=_;ne=ne.parentNode;)ne.nodeType===1&&Se.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Se.length;_++){var me=Se[_];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}nr=!!bu,Su=bu=null}finally{qt=p,Ee.p=s,V.T=l}}e.current=i,Nn=2}}function ch(){if(Nn===2){Nn=0;var e=Uo,i=Ul,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var s=Ee.p;Ee.p=2;var p=qt;qt|=4;try{Pp(e,i.alternate,i)}finally{qt=p,Ee.p=s,V.T=l}}Nn=3}}function uh(){if(Nn===4||Nn===3){Nn=0,we();var e=Uo,i=Ul,l=po,s=Xp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,Ul=Uo=null,dh(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(Lo=null),In(l),i=i.stateNode,te&&typeof te.onCommitFiberRoot=="function")try{te.onCommitFiberRoot(C,i,void 0,(i.current.flags&128)===128)}catch{}if(s!==null){i=V.T,p=Ee.p,Ee.p=2,V.T=null;try{for(var g=e.onRecoverableError,S=0;S<s.length;S++){var _=s[S];g(_.value,{componentStack:_.stack})}}finally{V.T=i,Ee.p=p}}(po&3)!==0&&qs(),Vi(e),p=e.pendingLanes,(l&261930)!==0&&(p&42)!==0?e===su?Ia++:(Ia=0,su=e):Ia=0,za(0)}}function dh(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,pa(i)))}function qs(){return rh(),ch(),uh(),fh()}function fh(){if(Nn!==5)return!1;var e=Uo,i=lu;lu=0;var l=In(po),s=V.T,p=Ee.p;try{Ee.p=32>l?32:l,V.T=null,l=au,au=null;var g=Uo,S=po;if(Nn=0,Ul=Uo=null,po=0,(qt&6)!==0)throw Error(a(331));var _=qt;if(qt|=4,Yp(g.current),qp(g,g.current,S,l),qt=_,za(0,!1),te&&typeof te.onPostCommitFiberRoot=="function")try{te.onPostCommitFiberRoot(C,g)}catch{}return!0}finally{Ee.p=p,V.T=s,dh(e,i)}}function ph(e,i,l){i=gi(l,i),i=Gc(e.stateNode,i,2),e=Mo(e,i,2),e!==null&&(Tt(e,2),Vi(e))}function Xt(e,i,l){if(e.tag===3)ph(e,e,l);else for(;i!==null;){if(i.tag===3){ph(i,e,l);break}else if(i.tag===1){var s=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Lo===null||!Lo.has(s))){e=gi(l,e),l=hp(2),s=Mo(i,l,2),s!==null&&(mp(l,s,i,e),Tt(s,2),Vi(s));break}}i=i.return}}function uu(e,i,l){var s=e.pingCache;if(s===null){s=e.pingCache=new gv;var p=new Set;s.set(i,p)}else p=s.get(i),p===void 0&&(p=new Set,s.set(i,p));p.has(l)||(nu=!0,p.add(l),e=Sv.bind(null,e,i,l),i.then(e,e))}function Sv(e,i,l){var s=e.pingCache;s!==null&&s.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,on===e&&(zt&l)===l&&(mn===4||mn===3&&(zt&62914560)===zt&&300>he()-Hs?(qt&2)===0&&Pl(e,0):iu|=l,Ll===zt&&(Ll=0)),Vi(e)}function hh(e,i){i===0&&(i=Ve()),e=Zo(e,i),e!==null&&(Tt(e,i),Vi(e))}function Tv(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),hh(e,l)}function wv(e,i){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,p=e.memoizedState;p!==null&&(l=p.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(i),hh(e,l)}function Ev(e,i){return G(e,i)}var js=null,Gl=null,du=!1,$s=!1,fu=!1,Ho=0;function Vi(e){e!==Gl&&e.next===null&&(Gl===null?js=Gl=e:Gl=Gl.next=e),$s=!0,du||(du=!0,_v())}function za(e,i){if(!fu&&$s){fu=!0;do for(var l=!1,s=js;s!==null;){if(e!==0){var p=s.pendingLanes;if(p===0)var g=0;else{var S=s.suspendedLanes,_=s.pingedLanes;g=(1<<31-Ye(42|e)+1)-1,g&=p&~(S&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,vh(s,g))}else g=zt,g=Ne(s,s===on?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(g&3)===0||ct(s,g)||(l=!0,vh(s,g));s=s.next}while(l);fu=!1}}function Cv(){mh()}function mh(){$s=du=!1;var e=0;Ho!==0&&Uv()&&(e=Ho);for(var i=he(),l=null,s=js;s!==null;){var p=s.next,g=gh(s,i);g===0?(s.next=null,l===null?js=p:l.next=p,p===null&&(Gl=l)):(l=s,(e!==0||(g&3)!==0)&&($s=!0)),s=p}Nn!==0&&Nn!==5||za(e),Ho!==0&&(Ho=0)}function gh(e,i){for(var l=e.suspendedLanes,s=e.pingedLanes,p=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var S=31-Ye(g),_=1<<S,k=p[S];k===-1?((_&l)===0||(_&s)!==0)&&(p[S]=ut(_,i)):k<=i&&(e.expiredLanes|=_),g&=~_}if(i=on,l=zt,l=Ne(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===i&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&D(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||ct(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(s!==null&&D(s),In(l)){case 2:case 8:l=I;break;case 32:l=q;break;case 268435456:l=ee;break;default:l=q}return s=yh.bind(null,e),l=G(l,s),e.callbackPriority=i,e.callbackNode=l,i}return s!==null&&s!==null&&D(s),e.callbackPriority=2,e.callbackNode=null,2}function yh(e,i){if(Nn!==0&&Nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(qs()&&e.callbackNode!==l)return null;var s=zt;return s=Ne(e,e===on?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Zp(e,s,i),gh(e,he()),e.callbackNode!=null&&e.callbackNode===l?yh.bind(null,e):null)}function vh(e,i){if(qs())return null;Zp(e,i,!0)}function _v(){Hv(function(){(qt&6)!==0?G(E,Cv):mh()})}function pu(){if(Ho===0){var e=El;e===0&&(e=Je,Je<<=1,(Je&261888)===0&&(Je=256)),Ho=e}return Ho}function xh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_n(""+e)}function bh(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function Av(e,i,l,s,p){if(i==="submit"&&l&&l.stateNode===p){var g=xh((p[vt]||null).action),S=s.submitter;S&&(i=(i=S[vt]||null)?xh(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var _=new Hi("action","action",null,s,p);e.push({event:_,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ho!==0){var k=S?bh(p,S):new FormData(p);zc(l,{pending:!0,data:k,method:p.method,action:g},null,k)}}else typeof g=="function"&&(_.preventDefault(),k=S?bh(p,S):new FormData(p),zc(l,{pending:!0,data:k,method:p.method,action:g},g,k))},currentTarget:p}]})}}for(var hu=0;hu<Xr.length;hu++){var mu=Xr[hu],Nv=mu.toLowerCase(),Mv=mu[0].toUpperCase()+mu.slice(1);Mi(Nv,"on"+Mv)}Mi(Xd,"onAnimationEnd"),Mi(Qd,"onAnimationIteration"),Mi(Zd,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(jy,"onTransitionRun"),Mi($y,"onTransitionStart"),Mi(Yy,"onTransitionCancel"),Mi(Wd,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Da));function Sh(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],p=s.event;s=s.listeners;e:{var g=void 0;if(i)for(var S=s.length-1;0<=S;S--){var _=s[S],k=_.instance,Y=_.currentTarget;if(_=_.listener,k!==g&&p.isPropagationStopped())break e;g=_,p.currentTarget=Y;try{g(p)}catch(ue){ss(ue)}p.currentTarget=null,g=k}else for(S=0;S<s.length;S++){if(_=s[S],k=_.instance,Y=_.currentTarget,_=_.listener,k!==g&&p.isPropagationStopped())break e;g=_,p.currentTarget=Y;try{g(p)}catch(ue){ss(ue)}p.currentTarget=null,g=k}}}}function kt(e,i){var l=i[ei];l===void 0&&(l=i[ei]=new Set);var s=e+"__bubble";l.has(s)||(Th(i,e,2,!1),l.add(s))}function gu(e,i,l){var s=0;i&&(s|=4),Th(l,e,s,i)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function yu(e){if(!e[Ys]){e[Ys]=!0,os.forEach(function(l){l!=="selectionchange"&&(Rv.has(l)||gu(l,!1,e),gu(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ys]||(i[Ys]=!0,gu("selectionchange",!1,i))}}function Th(e,i,l,s){switch(Qh(i)){case 2:var p=ox;break;case 8:p=lx;break;default:p=Iu}l=p.bind(null,i,l,e),p=void 0,!Qi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),s?p!==void 0?e.addEventListener(i,l,{capture:!0,passive:p}):e.addEventListener(i,l,!0):p!==void 0?e.addEventListener(i,l,{passive:p}):e.addEventListener(i,l,!1)}function vu(e,i,l,s,p){var g=s;if((i&1)===0&&(i&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var _=s.stateNode.containerInfo;if(_===p)break;if(S===4)for(S=s.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;_!==null;){if(S=qi(_),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){s=g=S;continue e}_=_.parentNode}}s=s.return}fi(function(){var Y=g,ue=_t(l),Se=[];e:{var K=ef.get(e);if(K!==void 0){var ne=Hi,Xe=e;switch(e){case"keypress":if(bt(l)===0)break e;case"keydown":case"keyup":ne=wy;break;case"focusin":Xe="focus",ne=To;break;case"focusout":Xe="blur",ne=To;break;case"beforeblur":case"afterblur":ne=To;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=_y;break;case Xd:case Qd:case Zd:ne=hy;break;case Wd:ne=Ny;break;case"scroll":case"scrollend":ne=Qe;break;case"wheel":ne=Ry;break;case"copy":case"cut":case"paste":ne=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=kd;break;case"toggle":case"beforetoggle":ne=Iy}var ht=(i&4)!==0,tn=!ht&&(e==="scroll"||e==="scrollend"),F=ht?K!==null?K+"Capture":null:K;ht=[];for(var P=Y,$;P!==null;){var me=P;if($=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||$===null||F===null||(me=ti(P,F),me!=null&&ht.push(La(P,me,$))),tn)break;P=P.return}0<ht.length&&(K=new ne(K,Xe,null,l,ue),Se.push({event:K,listeners:ht}))}}if((i&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",K&&l!==ft&&(Xe=l.relatedTarget||l.fromElement)&&(qi(Xe)||Xe[$t]))break e;if((ne||K)&&(K=ue.window===ue?ue:(K=ue.ownerDocument)?K.defaultView||K.parentWindow:window,ne?(Xe=l.relatedTarget||l.toElement,ne=Y,Xe=Xe?qi(Xe):null,Xe!==null&&(tn=u(Xe),ht=Xe.tag,Xe!==tn||ht!==5&&ht!==27&&ht!==6)&&(Xe=null)):(ne=null,Xe=Y),ne!==Xe)){if(ht=gn,me="onMouseLeave",F="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(ht=kd,me="onPointerLeave",F="onPointerEnter",P="pointer"),tn=ne==null?K:vo(ne),$=Xe==null?K:vo(Xe),K=new ht(me,P+"leave",ne,l,ue),K.target=tn,K.relatedTarget=$,me=null,qi(ue)===Y&&(ht=new ht(F,P+"enter",Xe,l,ue),ht.target=$,ht.relatedTarget=tn,me=ht),tn=me,ne&&Xe)t:{for(ht=kv,F=ne,P=Xe,$=0,me=F;me;me=ht(me))$++;me=0;for(var st=P;st;st=ht(st))me++;for(;0<$-me;)F=ht(F),$--;for(;0<me-$;)P=ht(P),me--;for(;$--;){if(F===P||P!==null&&F===P.alternate){ht=F;break t}F=ht(F),P=ht(P)}ht=null}else ht=null;ne!==null&&wh(Se,K,ne,ht,!1),Xe!==null&&tn!==null&&wh(Se,tn,Xe,ht,!0)}}e:{if(K=Y?vo(Y):window,ne=K.nodeName&&K.nodeName.toLowerCase(),ne==="select"||ne==="input"&&K.type==="file")var Bt=Gd;else if(Pd(K))if(Fd)Bt=Vy;else{Bt=Fy;var tt=Gy}else ne=K.nodeName,!ne||ne.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Pe(Y.elementType)&&(Bt=Gd):Bt=By;if(Bt&&(Bt=Bt(e,Y))){Hd(Se,Bt,l,ue);break e}tt&&tt(e,K,Y),e==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&W(K,"number",K.value)}switch(tt=Y?vo(Y):window,e){case"focusin":(Pd(tt)||tt.contentEditable==="true")&&(gl=tt,Yr=Y,ua=null);break;case"focusout":ua=Yr=gl=null;break;case"mousedown":Jr=!0;break;case"contextmenu":case"mouseup":case"dragend":Jr=!1,Jd(Se,l,ue);break;case"selectionchange":if(qy)break;case"keydown":case"keyup":Jd(Se,l,ue)}var At;if(Or)e:{switch(e){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else ml?Ld(e,l)&&(Dt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Dt="onCompositionStart");Dt&&(Id&&l.locale!=="ko"&&(ml||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&ml&&(At=ii()):(Ft=ue,pi="value"in Ft?Ft.value:Ft.textContent,ml=!0)),tt=Js(Y,Dt),0<tt.length&&(Dt=new Rd(Dt,e,null,l,ue),Se.push({event:Dt,listeners:tt}),At?Dt.data=At:(At=Ud(l),At!==null&&(Dt.data=At)))),(At=Dy?Ly(e,l):Uy(e,l))&&(Dt=Js(Y,"onBeforeInput"),0<Dt.length&&(tt=new Rd("onBeforeInput","beforeinput",null,l,ue),Se.push({event:tt,listeners:Dt}),tt.data=At)),Av(Se,e,Y,l,ue)}Sh(Se,i)})}function La(e,i,l){return{instance:e,listener:i,currentTarget:l}}function Js(e,i){for(var l=i+"Capture",s=[];e!==null;){var p=e,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=ti(e,l),p!=null&&s.unshift(La(e,p,g)),p=ti(e,i),p!=null&&s.push(La(e,p,g))),e.tag===3)return s;e=e.return}return[]}function kv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function wh(e,i,l,s,p){for(var g=i._reactName,S=[];l!==null&&l!==s;){var _=l,k=_.alternate,Y=_.stateNode;if(_=_.tag,k!==null&&k===s)break;_!==5&&_!==26&&_!==27||Y===null||(k=Y,p?(Y=ti(l,g),Y!=null&&S.unshift(La(l,Y,k))):p||(Y=ti(l,g),Y!=null&&S.push(La(l,Y,k)))),l=l.return}S.length!==0&&e.push({event:i,listeners:S})}var Iv=/\r\n?/g,zv=/\u0000|\uFFFD/g;function Eh(e){return(typeof e=="string"?e:""+e).replace(Iv,`
`).replace(zv,"")}function Ch(e,i){return i=Eh(i),Eh(e)===i}function en(e,i,l,s,p,g){switch(l){case"children":typeof s=="string"?i==="body"||i==="textarea"&&s===""||dt(e,s):(typeof s=="number"||typeof s=="bigint")&&i!=="body"&&dt(e,""+s);break;case"className":Pi(e,"class",s);break;case"tabIndex":Pi(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Pi(e,l,s);break;case"style":fn(e,s,g);break;case"data":if(i!=="object"){Pi(e,"data",s);break}case"src":case"href":if(s===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=_n(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&en(e,i,"name",p.name,p,null),en(e,i,"formEncType",p.formEncType,p,null),en(e,i,"formMethod",p.formMethod,p,null),en(e,i,"formTarget",p.formTarget,p,null)):(en(e,i,"encType",p.encType,p,null),en(e,i,"method",p.method,p,null),en(e,i,"target",p.target,p,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=_n(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=B);break;case"onScroll":s!=null&&kt("scroll",e);break;case"onScrollEnd":s!=null&&kt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(p.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=_n(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":kt("beforetoggle",e),kt("toggle",e),Ji(e,"popover",s);break;case"xlinkActuate":Yn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Yn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Yn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Yn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Yn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Yn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Yn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Yn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Yn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ji(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Pt.get(l)||l,Ji(e,l,s))}}function xu(e,i,l,s,p,g){switch(l){case"style":fn(e,s,g);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(p.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"children":typeof s=="string"?dt(e,s):(typeof s=="number"||typeof s=="bigint")&&dt(e,""+s);break;case"onScroll":s!=null&&kt("scroll",e);break;case"onScrollEnd":s!=null&&kt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=B);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ia.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),g=e[vt]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,p),typeof s=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,s,p);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):Ji(e,l,s)}}}function Un(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",e),kt("load",e);var s=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":s=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:en(e,i,g,S,l,null)}}p&&en(e,i,"srcSet",l.srcSet,l,null),s&&en(e,i,"src",l.src,l,null);return;case"input":kt("invalid",e);var _=g=S=p=null,k=null,Y=null;for(s in l)if(l.hasOwnProperty(s)){var ue=l[s];if(ue!=null)switch(s){case"name":p=ue;break;case"type":S=ue;break;case"checked":k=ue;break;case"defaultChecked":Y=ue;break;case"value":g=ue;break;case"defaultValue":_=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,i));break;default:en(e,i,s,ue,l,null)}}Ue(e,g,_,k,Y,S,p,!1);return;case"select":kt("invalid",e),s=S=g=null;for(p in l)if(l.hasOwnProperty(p)&&(_=l[p],_!=null))switch(p){case"value":g=_;break;case"defaultValue":S=_;break;case"multiple":s=_;default:en(e,i,p,_,l,null)}i=g,l=S,e.multiple=!!s,i!=null?be(e,!!s,i,!1):l!=null&&be(e,!!s,l,!0);return;case"textarea":kt("invalid",e),g=p=s=null;for(S in l)if(l.hasOwnProperty(S)&&(_=l[S],_!=null))switch(S){case"value":s=_;break;case"defaultValue":p=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:en(e,i,S,_,l,null)}at(e,s,p,g);return;case"option":for(k in l)l.hasOwnProperty(k)&&(s=l[k],s!=null)&&(k==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":en(e,i,k,s,l,null));return;case"dialog":kt("beforetoggle",e),kt("toggle",e),kt("cancel",e),kt("close",e);break;case"iframe":case"object":kt("load",e);break;case"video":case"audio":for(s=0;s<Da.length;s++)kt(Da[s],e);break;case"image":kt("error",e),kt("load",e);break;case"details":kt("toggle",e);break;case"embed":case"source":case"link":kt("error",e),kt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(s=l[Y],s!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:en(e,i,Y,s,l,null)}return;default:if(Pe(i)){for(ue in l)l.hasOwnProperty(ue)&&(s=l[ue],s!==void 0&&xu(e,i,ue,s,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(s=l[_],s!=null&&en(e,i,_,s,l,null))}function Dv(e,i,l,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,_=null,k=null,Y=null,ue=null;for(ne in l){var Se=l[ne];if(l.hasOwnProperty(ne)&&Se!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":k=Se;default:s.hasOwnProperty(ne)||en(e,i,ne,null,s,Se)}}for(var K in s){var ne=s[K];if(Se=l[K],s.hasOwnProperty(K)&&(ne!=null||Se!=null))switch(K){case"type":g=ne;break;case"name":p=ne;break;case"checked":Y=ne;break;case"defaultChecked":ue=ne;break;case"value":S=ne;break;case"defaultValue":_=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:ne!==Se&&en(e,i,K,ne,s,Se)}}Q(e,S,_,k,Y,ue,g,p);return;case"select":ne=S=_=K=null;for(g in l)if(k=l[g],l.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":ne=k;default:s.hasOwnProperty(g)||en(e,i,g,null,s,k)}for(p in s)if(g=s[p],k=l[p],s.hasOwnProperty(p)&&(g!=null||k!=null))switch(p){case"value":K=g;break;case"defaultValue":_=g;break;case"multiple":S=g;default:g!==k&&en(e,i,p,g,s,k)}i=_,l=S,s=ne,K!=null?be(e,!!l,K,!1):!!s!=!!l&&(i!=null?be(e,!!l,i,!0):be(e,!!l,l?[]:"",!1));return;case"textarea":ne=K=null;for(_ in l)if(p=l[_],l.hasOwnProperty(_)&&p!=null&&!s.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:en(e,i,_,null,s,p)}for(S in s)if(p=s[S],g=l[S],s.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":K=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(a(91));break;default:p!==g&&en(e,i,S,p,s,g)}Ge(e,K,ne);return;case"option":for(var Xe in l)K=l[Xe],l.hasOwnProperty(Xe)&&K!=null&&!s.hasOwnProperty(Xe)&&(Xe==="selected"?e.selected=!1:en(e,i,Xe,null,s,K));for(k in s)K=s[k],ne=l[k],s.hasOwnProperty(k)&&K!==ne&&(K!=null||ne!=null)&&(k==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":en(e,i,k,K,s,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in l)K=l[ht],l.hasOwnProperty(ht)&&K!=null&&!s.hasOwnProperty(ht)&&en(e,i,ht,null,s,K);for(Y in s)if(K=s[Y],ne=l[Y],s.hasOwnProperty(Y)&&K!==ne&&(K!=null||ne!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,i));break;default:en(e,i,Y,K,s,ne)}return;default:if(Pe(i)){for(var tn in l)K=l[tn],l.hasOwnProperty(tn)&&K!==void 0&&!s.hasOwnProperty(tn)&&xu(e,i,tn,void 0,s,K);for(ue in s)K=s[ue],ne=l[ue],!s.hasOwnProperty(ue)||K===ne||K===void 0&&ne===void 0||xu(e,i,ue,K,s,ne);return}}for(var F in l)K=l[F],l.hasOwnProperty(F)&&K!=null&&!s.hasOwnProperty(F)&&en(e,i,F,null,s,K);for(Se in s)K=s[Se],ne=l[Se],!s.hasOwnProperty(Se)||K===ne||K==null&&ne==null||en(e,i,Se,K,s,ne)}function _h(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var p=l[s],g=p.transferSize,S=p.initiatorType,_=p.duration;if(g&&_&&_h(S)){for(S=0,_=p.responseEnd,s+=1;s<l.length;s++){var k=l[s],Y=k.startTime;if(Y>_)break;var ue=k.transferSize,Se=k.initiatorType;ue&&_h(Se)&&(k=k.responseEnd,S+=ue*(k<_?1:(_-Y)/(k-Y)))}if(--s,i+=8*(g+S)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var bu=null,Su=null;function Ks(e){return e.nodeType===9?e:e.ownerDocument}function Ah(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Tu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wu=null;function Uv(){var e=window.event;return e&&e.type==="popstate"?e===wu?!1:(wu=e,!0):(wu=null,!1)}var Mh=typeof setTimeout=="function"?setTimeout:void 0,Pv=typeof clearTimeout=="function"?clearTimeout:void 0,Rh=typeof Promise=="function"?Promise:void 0,Hv=typeof queueMicrotask=="function"?queueMicrotask:typeof Rh<"u"?function(e){return Rh.resolve(null).then(e).catch(Gv)}:Mh;function Gv(e){setTimeout(function(){throw e})}function Go(e){return e==="head"}function kh(e,i){var l=i,s=0;do{var p=l.nextSibling;if(e.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(p),Ol(i);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Ua(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Ua(l);for(var g=l.firstChild;g;){var S=g.nextSibling,_=g.nodeName;g[Oi]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&Ua(e.ownerDocument.body);l=p}while(l);Ol(i)}function Ih(e,i){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function Eu(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Eu(l),di(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Fv(e,i,l,s){for(;e.nodeType===1;){var p=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Oi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Si(e.nextSibling),e===null)break}return null}function Bv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Si(e.nextSibling),e===null))return null;return e}function zh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Si(e.nextSibling),e===null))return null;return e}function Cu(e){return e.data==="$?"||e.data==="$~"}function _u(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Vv(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var s=function(){i(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Si(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Au=null;function Dh(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return Si(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function Lh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Uh(e,i,l){switch(i=Ks(l),e){case"html":if(e=i.documentElement,!e)throw Error(a(452));return e;case"head":if(e=i.head,!e)throw Error(a(453));return e;case"body":if(e=i.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Ua(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);di(e)}var Ti=new Map,Ph=new Set;function Xs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ho=Ee.d;Ee.d={f:Ov,r:qv,D:jv,C:$v,L:Yv,m:Jv,X:Xv,S:Kv,M:Qv};function Ov(){var e=ho.f(),i=Bs();return e||i}function qv(e){var i=ji(e);i!==null&&i.tag===5&&i.type==="form"?ep(i):ho.r(e)}var Fl=typeof document>"u"?null:document;function Hh(e,i,l){var s=Fl;if(s&&typeof i=="string"&&i){var p=R(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Ph.has(p)||(Ph.add(p),e={rel:e,crossOrigin:l,href:i},s.querySelector(p)===null&&(i=s.createElement("link"),Un(i,"link",e),Sn(i),s.head.appendChild(i)))}}function jv(e){ho.D(e),Hh("dns-prefetch",e,null)}function $v(e,i){ho.C(e,i),Hh("preconnect",e,i)}function Yv(e,i,l){ho.L(e,i,l);var s=Fl;if(s&&e&&i){var p='link[rel="preload"][as="'+R(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+R(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+R(l.imageSizes)+'"]')):p+='[href="'+R(e)+'"]';var g=p;switch(i){case"style":g=Bl(e);break;case"script":g=Vl(e)}Ti.has(g)||(e=b({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),Ti.set(g,e),s.querySelector(p)!==null||i==="style"&&s.querySelector(Pa(g))||i==="script"&&s.querySelector(Ha(g))||(i=s.createElement("link"),Un(i,"link",e),Sn(i),s.head.appendChild(i)))}}function Jv(e,i){ho.m(e,i);var l=Fl;if(l&&e){var s=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+R(s)+'"][href="'+R(e)+'"]',g=p;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Vl(e)}if(!Ti.has(g)&&(e=b({rel:"modulepreload",href:e},i),Ti.set(g,e),l.querySelector(p)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ha(g)))return}s=l.createElement("link"),Un(s,"link",e),Sn(s),l.head.appendChild(s)}}}function Kv(e,i,l){ho.S(e,i,l);var s=Fl;if(s&&e){var p=xo(s).hoistableStyles,g=Bl(e);i=i||"default";var S=p.get(g);if(!S){var _={loading:0,preload:null};if(S=s.querySelector(Pa(g)))_.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":i},l),(l=Ti.get(g))&&Nu(e,l);var k=S=s.createElement("link");Sn(k),Un(k,"link",e),k._p=new Promise(function(Y,ue){k.onload=Y,k.onerror=ue}),k.addEventListener("load",function(){_.loading|=1}),k.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Qs(S,i,s)}S={type:"stylesheet",instance:S,count:1,state:_},p.set(g,S)}}}function Xv(e,i){ho.X(e,i);var l=Fl;if(l&&e){var s=xo(l).hoistableScripts,p=Vl(e),g=s.get(p);g||(g=l.querySelector(Ha(p)),g||(e=b({src:e,async:!0},i),(i=Ti.get(p))&&Mu(e,i),g=l.createElement("script"),Sn(g),Un(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},s.set(p,g))}}function Qv(e,i){ho.M(e,i);var l=Fl;if(l&&e){var s=xo(l).hoistableScripts,p=Vl(e),g=s.get(p);g||(g=l.querySelector(Ha(p)),g||(e=b({src:e,async:!0,type:"module"},i),(i=Ti.get(p))&&Mu(e,i),g=l.createElement("script"),Sn(g),Un(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},s.set(p,g))}}function Gh(e,i,l,s){var p=(p=w.current)?Xs(p):null;if(!p)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Bl(l.href),l=xo(p).hoistableStyles,s=l.get(i),s||(s={type:"style",instance:null,count:0,state:null},l.set(i,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Bl(l.href);var g=xo(p).hoistableStyles,S=g.get(e);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,S),(g=p.querySelector(Pa(e)))&&!g._p&&(S.instance=g,S.state.loading=5),Ti.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ti.set(e,l),g||Zv(p,e,l,S.state))),i&&s===null)throw Error(a(528,""));return S}if(i&&s!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vl(l),l=xo(p).hoistableScripts,s=l.get(i),s||(s={type:"script",instance:null,count:0,state:null},l.set(i,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Bl(e){return'href="'+R(e)+'"'}function Pa(e){return'link[rel="stylesheet"]['+e+"]"}function Fh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Zv(e,i,l,s){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=e.createElement("link"),s.preload=i,i.addEventListener("load",function(){return s.loading|=1}),i.addEventListener("error",function(){return s.loading|=2}),Un(i,"link",l),Sn(i),e.head.appendChild(i))}function Vl(e){return'[src="'+R(e)+'"]'}function Ha(e){return"script[async]"+e}function Bh(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var s=e.querySelector('style[data-href~="'+R(l.href)+'"]');if(s)return i.instance=s,Sn(s),s;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Sn(s),Un(s,"style",p),Qs(s,l.precedence,e),i.instance=s;case"stylesheet":p=Bl(l.href);var g=e.querySelector(Pa(p));if(g)return i.state.loading|=4,i.instance=g,Sn(g),g;s=Fh(l),(p=Ti.get(p))&&Nu(s,p),g=(e.ownerDocument||e).createElement("link"),Sn(g);var S=g;return S._p=new Promise(function(_,k){S.onload=_,S.onerror=k}),Un(g,"link",s),i.state.loading|=4,Qs(g,l.precedence,e),i.instance=g;case"script":return g=Vl(l.src),(p=e.querySelector(Ha(g)))?(i.instance=p,Sn(p),p):(s=l,(p=Ti.get(g))&&(s=b({},l),Mu(s,p)),e=e.ownerDocument||e,p=e.createElement("script"),Sn(p),Un(p,"link",s),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(s=i.instance,i.state.loading|=4,Qs(s,l.precedence,e));return i.instance}function Qs(e,i,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=s.length?s[s.length-1]:null,g=p,S=0;S<s.length;S++){var _=s[S];if(_.dataset.precedence===i)g=_;else if(g!==p)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function Nu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Mu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Zs=null;function Vh(e,i,l){if(Zs===null){var s=new Map,p=Zs=new Map;p.set(l,s)}else p=Zs,s=p.get(l),s||(s=new Map,p.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),p=0;p<l.length;p++){var g=l[p];if(!(g[Oi]||g[We]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=e+S;var _=s.get(S);_?_.push(g):s.set(S,[g])}}return s}function Oh(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Wv(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function qh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ex(e,i,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Bl(s.href),g=i.querySelector(Pa(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Ws.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,Sn(g);return}g=i.ownerDocument||i,s=Fh(s),(p=Ti.get(p))&&Nu(s,p),g=g.createElement("link"),Sn(g);var S=g;S._p=new Promise(function(_,k){S.onload=_,S.onerror=k}),Un(g,"link",s),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Ws.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var Ru=0;function tx(e,i){return e.stylesheets&&e.count===0&&tr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&tr(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&Ru===0&&(Ru=62500*Lv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tr(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Ru?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(p)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var er=null;function tr(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,er=new Map,i.forEach(nx,e),er=null,Ws.call(e))}function nx(e,i){if(!(i.state.loading&4)){var l=er.get(e);if(l)var s=l.get(null);else{l=new Map,er.set(e,l);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),s=S)}s&&l.set(null,s)}p=i.instance,S=p.getAttribute("data-precedence"),g=l.get(S)||s,g===s&&l.set(null,p),l.set(S,p),this.count++,s=Ws.bind(this),p.addEventListener("load",s),p.addEventListener("error",s),g?g.parentNode.insertBefore(p,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var Ga={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function ix(e,i,l,s,p,g,S,_,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=s,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function jh(e,i,l,s,p,g,S,_,k,Y,ue,Se){return e=new ix(e,i,l,S,k,Y,ue,Se,_),i=1,g===!0&&(i|=24),g=li(3,null,null,i),e.current=g,g.stateNode=e,i=cc(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:s,isDehydrated:l,cache:i},pc(g),e}function $h(e){return e?(e=xl,e):xl}function Yh(e,i,l,s,p,g){p=$h(p),s.context===null?s.context=p:s.pendingContext=p,s=No(i),s.payload={element:l},g=g===void 0?null:g,g!==null&&(s.callback=g),l=Mo(e,s,i),l!==null&&(Wn(l,e,i),ya(l,e,i))}function Jh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function ku(e,i){Jh(e,i),(e=e.alternate)&&Jh(e,i)}function Kh(e){if(e.tag===13||e.tag===31){var i=Zo(e,67108864);i!==null&&Wn(i,e,67108864),ku(e,67108864)}}function Xh(e){if(e.tag===13||e.tag===31){var i=ui();i=Ai(i);var l=Zo(e,i);l!==null&&Wn(l,e,i),ku(e,i)}}var nr=!0;function ox(e,i,l,s){var p=V.T;V.T=null;var g=Ee.p;try{Ee.p=2,Iu(e,i,l,s)}finally{Ee.p=g,V.T=p}}function lx(e,i,l,s){var p=V.T;V.T=null;var g=Ee.p;try{Ee.p=8,Iu(e,i,l,s)}finally{Ee.p=g,V.T=p}}function Iu(e,i,l,s){if(nr){var p=zu(s);if(p===null)vu(e,i,s,ir,l),Zh(e,s);else if(sx(p,e,i,l,s))s.stopPropagation();else if(Zh(e,s),i&4&&-1<ax.indexOf(e)){for(;p!==null;){var g=ji(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=lt(g.pendingLanes);if(S!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;S;){var k=1<<31-Ye(S);_.entanglements[1]|=k,S&=~k}Vi(g),(qt&6)===0&&(Gs=he()+500,za(0))}}break;case 31:case 13:_=Zo(g,2),_!==null&&Wn(_,g,2),Bs(),ku(g,2)}if(g=zu(s),g===null&&vu(e,i,s,ir,l),g===p)break;p=g}p!==null&&s.stopPropagation()}else vu(e,i,s,null,l)}}function zu(e){return e=_t(e),Du(e)}var ir=null;function Du(e){if(ir=null,e=qi(e),e!==null){var i=u(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ir=e,null}function Qh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case E:return 2;case I:return 8;case q:case M:return 32;case ee:return 268435456;default:return 32}default:return 32}}var Lu=!1,Fo=null,Bo=null,Vo=null,Fa=new Map,Ba=new Map,Oo=[],ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zh(e,i){switch(e){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":Fa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(i.pointerId)}}function Va(e,i,l,s,p,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:s,nativeEvent:g,targetContainers:[p]},i!==null&&(i=ji(i),i!==null&&Kh(i)),e):(e.eventSystemFlags|=s,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function sx(e,i,l,s,p){switch(i){case"focusin":return Fo=Va(Fo,e,i,l,s,p),!0;case"dragenter":return Bo=Va(Bo,e,i,l,s,p),!0;case"mouseover":return Vo=Va(Vo,e,i,l,s,p),!0;case"pointerover":var g=p.pointerId;return Fa.set(g,Va(Fa.get(g)||null,e,i,l,s,p)),!0;case"gotpointercapture":return g=p.pointerId,Ba.set(g,Va(Ba.get(g)||null,e,i,l,s,p)),!0}return!1}function Wh(e){var i=qi(e.target);if(i!==null){var l=u(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,Ui(e.priority,function(){Xh(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,Ui(e.priority,function(){Xh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function or(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=zu(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);ft=s,l.target.dispatchEvent(s),ft=null}else return i=ji(l),i!==null&&Kh(i),e.blockedOn=l,!1;i.shift()}return!0}function e0(e,i,l){or(e)&&l.delete(i)}function rx(){Lu=!1,Fo!==null&&or(Fo)&&(Fo=null),Bo!==null&&or(Bo)&&(Bo=null),Vo!==null&&or(Vo)&&(Vo=null),Fa.forEach(e0),Ba.forEach(e0)}function lr(e,i){e.blockedOn===i&&(e.blockedOn=null,Lu||(Lu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rx)))}var ar=null;function t0(e){ar!==e&&(ar=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ar===e&&(ar=null);for(var i=0;i<e.length;i+=3){var l=e[i],s=e[i+1],p=e[i+2];if(typeof s!="function"){if(Du(s||l)===null)continue;break}var g=ji(l);g!==null&&(e.splice(i,3),i-=3,zc(g,{pending:!0,data:p,method:l.method,action:s},s,p))}}))}function Ol(e){function i(k){return lr(k,e)}Fo!==null&&lr(Fo,e),Bo!==null&&lr(Bo,e),Vo!==null&&lr(Vo,e),Fa.forEach(i),Ba.forEach(i);for(var l=0;l<Oo.length;l++){var s=Oo[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Oo.length&&(l=Oo[0],l.blockedOn===null);)Wh(l),l.blockedOn===null&&Oo.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var p=l[s],g=l[s+1],S=p[vt]||null;if(typeof g=="function")S||t0(l);else if(S){var _=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[vt]||null)_=S.formAction;else if(Du(p)!==null)continue}else _=S.action;typeof _=="function"?l[s+1]=_:(l.splice(s,3),s-=3),t0(l)}}}function n0(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Uu(e){this._internalRoot=e}sr.prototype.render=Uu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,s=ui();Yh(l,s,e,i,null,null)},sr.prototype.unmount=Uu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Yh(e.current,2,null,e,null,null),Bs(),i[$t]=null}};function sr(e){this._internalRoot=e}sr.prototype.unstable_scheduleHydration=function(e){if(e){var i=Li();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Oo.length&&i!==0&&i<Oo[l].priority;l++);Oo.splice(l,0,e),l===0&&Wh(e)}};var i0=t.version;if(i0!=="19.2.3")throw Error(a(527,i0,"19.2.3"));Ee.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var cx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rr.isDisabled&&rr.supportsFiber)try{C=rr.inject(cx),te=rr}catch{}}return qa.createRoot=function(e,i){if(!r(e))throw Error(a(299));var l=!1,s="",p=up,g=dp,S=fp;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=jh(e,1,!1,null,null,l,s,null,p,g,S,n0),e[$t]=i.current,yu(e),new Uu(i)},qa.hydrateRoot=function(e,i,l){if(!r(e))throw Error(a(299));var s=!1,p="",g=up,S=dp,_=fp,k=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),i=jh(e,1,!0,i,l??null,s,p,k,g,S,_,n0),i.context=$h(null),l=i.current,s=ui(),s=Ai(s),p=No(s),p.callback=null,Mo(l,p,s),l=s,i.current.lanes=l,Tt(i,l),Vi(i),e[$t]=i.current,yu(e),new sr(i)},qa.version="19.2.3",qa}var p0;function xx(){if(p0)return Gu.exports;p0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Gu.exports=vx(),Gu.exports}var bx=xx();const Sx=dg(bx),Tx="modulepreload",wx=function(n){return"/"+n},h0={},Yu=function(t,o,a){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=wx(m),m in h0)return;h0[m]=!0;const x=m.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":Tx,x||(T.as="script"),T.crossOrigin="",T.href=m,y&&T.setAttribute("nonce",y),document.head.appendChild(T),x)return new Promise((A,N)=>{T.addEventListener("load",A),T.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&u(y.reason);return t().catch(u)})};const Ex=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,a)=>a?a.toUpperCase():o.toLowerCase()),m0=n=>{const t=Cx(n);return t.charAt(0).toUpperCase()+t.slice(1)},pg=(...n)=>n.filter((t,o,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===o).join(" ").trim(),_x=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Ax={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Nx=Z.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:r="",children:u,iconNode:h,...y},v)=>Z.createElement("svg",{ref:v,...Ax,width:t,height:t,stroke:n,strokeWidth:a?Number(o)*24/Number(t):o,className:pg("lucide",r),...!u&&!_x(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>Z.createElement(m,x)),...Array.isArray(u)?u:[u]]));const et=(n,t)=>{const o=Z.forwardRef(({className:a,...r},u)=>Z.createElement(Nx,{ref:u,iconNode:t,className:pg(`lucide-${Ex(m0(n))}`,`lucide-${n}`,a),...r}));return o.displayName=m0(n),o};const Mx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],g0=et("align-vertical-justify-center",Mx);const Rx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],kx=et("align-vertical-justify-end",Rx);const Ix=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],zx=et("align-vertical-justify-start",Ix);const Dx=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Lx=et("bold",Dx);const Ux=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Px=et("check",Ux);const Hx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],is=et("chevron-down",Hx);const Gx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ju=et("chevron-up",Gx);const Fx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bx=et("circle-alert",Fx);const Vx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ox=et("clipboard",Vx);const qx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jx=et("copy",qx);const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Yx=et("disc",$x);const Jx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Kx=et("download",Jx);const Xx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ka=et("eye-off",Xx);const Qx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xa=et("eye",Qx);const Zx=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Wx=et("fast-forward",Zx);const eb=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Tr=et("file-text",eb);const tb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],hg=et("film",tb);const nb=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ib=et("folder",nb);const ob=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],cr=et("grip-horizontal",ob);const lb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],y0=et("image",lb);const ab=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sb=et("info",ab);const rb=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],cb=et("italic",rb);const ub=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],db=et("key",ub);const fb=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],v0=et("keyboard",fb);const pb=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wr=et("list-music",pb);const hb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],x0=et("loader-circle",hb);const mb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Wa=et("maximize",mb);const gb=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],b0=et("minimize",gb);const yb=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],$l=et("music",yb);const vb=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],xb=et("palette",vb);const bb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Sb=et("panels-top-left",bb);const Tb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],mg=et("pause",Tb);const wb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ku=et("play",wb);const Eb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gg=et("plus",Eb);const Cb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],_b=et("redo-2",Cb);const Ab=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Nb=et("repeat-1",Ab);const Mb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],S0=et("repeat",Mb);const Rb=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],kb=et("rewind",Rb);const Ib=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Xu=et("rotate-ccw",Ib);const zb=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Db=et("scissors",zb);const Lb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ub=et("search",Lb);const Pb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xr=et("settings",Pb);const Hb=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Gb=et("shuffle",Hb);const Fb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Bb=et("skip-back",Fb);const Vb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Ob=et("skip-forward",Vb);const qb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qu=et("sparkles",qb);const jb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],$b=et("split",jb);const Yb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Zu=et("square",Yb);const Jb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Kb=et("strikethrough",Jb);const Xb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Er=et("trash-2",Xb);const Qb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zb=et("triangle-alert",Qb);const Wb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],$o=et("type",Wb);const e1=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],t1=et("underline",e1);const n1=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],i1=et("undo-2",n1);const o1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yo=et("upload",o1);const l1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],a1=et("user",l1);const s1=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],es=et("video",s1);const r1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],jo=et("volume-2",r1);const c1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ql=et("volume-x",c1);const u1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ei=et("x",u1);const d1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],f1=et("zoom-in",d1);const p1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],h1=et("zoom-out",p1);var Pn=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(Pn||{});const yd=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},Qa=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let a=0;return o.length===3?(a+=parseInt(o[0],10)*3600,a+=parseInt(o[1],10)*60,a+=parseFloat(o[2])):o.length===2?(a+=parseInt(o[0],10)*60,a+=parseFloat(o[1])):o.length===1&&(a+=parseFloat(o[0])),isNaN(a)?0:a},Yl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},Xl=n=>{const t=n.split(`
`),o=[],a=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(u=>{const h=[...u.matchAll(a)];if(h.length>0){let y=u.replace(a,"").trim();y=y.replace(/\\n/g,`
`);const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(v.length>0){m=[];for(let b=0;b<v.length;b++){const T=v[b],A=parseInt(T[1],10),N=parseInt(T[2],10),O=T[4];let H=A*60+N;O&&(H+=parseInt(O,10)/(O.length===3?1e3:100));const j=(T.index||0)+T[0].length,re=b<v.length-1?v[b+1].index:y.length,ce=y.substring(j,re);if(ce){const ye=ce.split(`
`);ye.forEach((ze,Le)=>{ze&&m.push({text:ze,startTime:H,endTime:0}),Le<ye.length-1&&m.push({text:`
`,startTime:H,endTime:0})})}}for(let b=0;b<m.length;b++)b<m.length-1?m[b].endTime=m[b+1].startTime:m[b].endTime=m[b].startTime+.5}h.forEach(b=>{const T=parseInt(b[1],10),A=parseInt(b[2],10),N=b[4];let O=T*60+A;N&&(N.length===2?O+=parseInt(N,10)/100:(N.length,O+=parseInt(N,10)/1e3)),o.push({time:O,text:x,words:m})})}}),o.sort((u,h)=>u.time-h.time)},Ql=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),a=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,u=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),b=parseInt(y[4],10);return v*3600+m*60+x+b/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),b=yd(x),T=v.split(" --> ");if(T.length>=2){const A=u(T[0]),N=u(T[1]);A!==null&&b&&a.push({time:A,text:b,endTime:N!==null?N:void 0})}}}),a},ts=n=>{const t=[];try{const a=new DOMParser().parseFromString(n,"text/xml"),u=Array.from(a.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Qa(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<u.length;v++){const m=u[v],x=y(m,"begin"),b=y(m,"end"),T=yd(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=h(x),N=h(b),O=[],j=Array.from(m.getElementsByTagName("*")).filter(re=>re.localName==="span");for(let re=0;re<j.length;re++){const ce=j[re],ye=y(ce,"begin"),ze=y(ce,"end"),Le=ce.textContent?.replace(/\s+/g," ");if(ye&&ze&&Le&&Le.length>0){const ve=h(ye),Ke=h(ze);ve!==void 0&&Ke!==void 0&&O.push({text:Le,startTime:ve,endTime:Ke})}}A!==void 0&&t.push({time:A,text:T,endTime:N,words:O.length>0?O:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,a)=>o.time-a.time)},m1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(a=>typeof a=="object"&&a!==null&&typeof a.time=="number"&&typeof a.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},ns=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`),a=[],r=/(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})/,u=y=>{const v=y.match(r);if(v){const m=v[1]?parseInt(v[1].replace(":",""),10):0,x=parseInt(v[2],10),b=parseInt(v[3],10),T=parseInt(v[4],10);return m*3600+x*60+b+T/1e3}return null};let h=0;for(o[0]&&o[0].startsWith("WEBVTT")&&(h=1);h<o.length;){const y=o[h].trim();if(y.includes("-->")){const v=y.split("-->");if(v.length>=2){const m=v[0].trim(),x=v[1].trim().split(" ")[0],b=u(m),T=u(x);if(b!==null){h++;let A=[];for(;h<o.length;){const N=o[h].trim();if(N===""||N.includes("-->"))break;A.push(o[h]),h++}if(h<o.length&&o[h].includes("-->"),A.length>0){const N=A.join(" ").trim(),O=/<(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})>/g;let H;const j=[...N.matchAll(O)];if(j.length>0){H=[],j.forEach((ye,ze)=>{const Le=ye[1]?parseInt(ye[1].replace(":",""),10):0,ve=parseInt(ye[2],10),Ke=parseInt(ye[3],10),_e=parseInt(ye[4],10),$e=Le*3600+ve*60+Ke+_e/1e3,De=(ye.index||0)+ye[0].length;let ot=N.length;ze+1<j.length&&(ot=j[ze+1].index||N.length);const pt=N.substring(De,ot);if(ze===0&&(ye.index||0)>0){const xt=N.substring(0,ye.index);xt.trim()&&H.push({text:xt.trim(),startTime:b,endTime:$e})}pt&&H.push({text:pt,startTime:$e,endTime:0})});for(let ye=0;ye<H.length;ye++)ye<H.length-1?H[ye].endTime=H[ye+1].startTime:H[ye].endTime=T!==null?T:H[ye].startTime+.5}const re=N.replace(/<[\d:.]+>/g,"").replace(/\s+/g," ").trim(),ce=yd(re);a.push({time:b,text:ce,endTime:T!==null?T:void 0,words:H&&H.length>0?H:void 0})}continue}}}h++}return a},g1=({toast:n,onRemove:t})=>{const[o,a]=Z.useState(!1);Z.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{a(!0),setTimeout(t,300)},u=()=>{switch(n.type){case"success":return f.jsx(Px,{size:18,className:"text-green-400"});case"error":return f.jsx(Bx,{size:18,className:"text-red-400"});default:return f.jsx(sb,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return f.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[f.jsx("div",{className:"shrink-0",children:u()}),f.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),f.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:f.jsx(Ei,{size:16})})]})},y1=({toasts:n,removeToast:t})=>f.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>f.jsx("div",{className:"pointer-events-auto",children:f.jsx(g1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),v1=({isOpen:n,message:t,onConfirm:o,onCancel:a,title:r="Confirm Action"})=>{const[u,h]=Z.useState(!1);return Z.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),Z.useEffect(()=>{const y=v=>{n&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),a()))};return n&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[n,o,a]),!n&&!u?null:f.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),f.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:f.jsx(Zb,{className:"text-orange-500",size:24})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),f.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),f.jsx("button",{onClick:a,className:"text-zinc-500 hover:text-white transition-colors",children:f.jsx(Ei,{size:20})})]})}),f.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[f.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),f.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},yg=Z.createContext(void 0),Ir=()=>{const n=Z.useContext(yg);if(!n)throw new Error("useUI must be used within a UIProvider");return n},x1=({children:n})=>{const[t,o]=Z.useState([]),a=Z.useCallback((b,T,A)=>{let N,O;typeof A=="number"?N=A:typeof A=="object"&&(N=A.duration,O=A.id);const H=O||Math.random().toString(36).substr(2,9);o(j=>[...j.filter(ce=>ce.id!==H),{id:H,type:b,message:T,duration:N}])},[]),r=Z.useCallback(b=>{o(T=>T.filter(A=>A.id!==b))},[]),u={success:(b,T)=>a("success",b,T),error:(b,T)=>a("error",b,T),info:(b,T)=>a("info",b,T)},[h,y]=Z.useState({isOpen:!1,message:"",title:"",resolve:null}),v=Z.useCallback((b,T="Confirm Action")=>new Promise(A=>{y({isOpen:!0,message:b,title:T,resolve:A})}),[]),m=Z.useCallback(()=>{h.resolve&&h.resolve(!0),y(b=>({...b,isOpen:!1,resolve:null}))},[h]),x=Z.useCallback(()=>{h.resolve&&h.resolve(!1),y(b=>({...b,isOpen:!1,resolve:null}))},[h]);return f.jsxs(yg.Provider,{value:{toast:u,confirm:v},children:[n,f.jsx(y1,{toasts:t,removeToast:r}),f.jsx(v1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},ur=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,b1=(n,t)=>{const o=Math.floor(n/60),a=n%60;return t<1?`${o}:${a.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(a).toString().padStart(2,"0")}`},T0=10,S1=50,Yt={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},T1=n=>new Promise(t=>{const o=URL.createObjectURL(n),a=document.createElement(n.type.startsWith("audio/")?"audio":"video");a.preload="metadata",a.onloadedmetadata=()=>{t(a.duration),URL.revokeObjectURL(o)},a.onerror=()=>{URL.revokeObjectURL(o),t(0)},a.src=o}),w1=({value:n,onChange:t})=>{const[o,a]=Z.useState(n.toString());Z.useEffect(()=>{const h=parseFloat(o);!isNaN(h)&&Math.abs(h-n)<.001||a(n.toString())},[n]);const r=()=>{const h=parseFloat(o);o===""||isNaN(h)?a(n.toString()):t(h)},u=h=>{const y=parseFloat(o),v=isNaN(y)?n:y,m=Math.round((v+h)*100)/100;m<.05||(t(m),a(m.toString()))};return f.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[f.jsx("button",{onClick:()=>u(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:f.jsx(is,{size:10})}),f.jsx("input",{type:"text",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:h=>{/^\d*\.?\d*$/.test(h.target.value)&&a(h.target.value)},onBlur:r,onKeyDown:h=>{h.stopPropagation(),h.key==="ArrowUp"&&(h.preventDefault(),u(.05)),h.key==="ArrowDown"&&(h.preventDefault(),u(-.05)),h.key==="Enter"&&h.currentTarget.blur()}}),f.jsx("button",{onClick:()=>u(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:f.jsx(Ju,{size:10})})]})},E1=({slides:n,setSlides:t,currentTime:o,duration:a,lyrics:r,onSeek:u,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=Ir(),x=Z.useRef(null),b=Z.useRef(null),T=Z.useRef(null),[A,N]=Z.useState(40),[O,H]=Z.useState([n]),[j,re]=Z.useState(0),ce=Z.useRef(!1);Z.useEffect(()=>{if(ce.current){ce.current=!1;return}const E=O[j];if(JSON.stringify(E)!==JSON.stringify(n)){const I=O.slice(0,j+1);I.push(n),I.length>S1?(I.shift(),H(I)):(H(I),re(j+1))}},[n,O,j]);const ye=j>0,ze=j<O.length-1,Le=Z.useCallback(()=>{if(j>0){const E=j-1;re(E),ce.current=!0,t(O[E])}},[t,O,j]),ve=Z.useCallback(()=>{if(j<O.length-1){const E=j+1;re(E),ce.current=!0,t(O[E])}},[t,O,j]),Ke=Math.max(0,...n.map(E=>E.endTime)),_e=Math.max(a,60,Ke),$e=_e*A,[De,ot]=Z.useState([]),[pt,xt]=Z.useState(null),[Et,V]=Z.useState([]),Ee=Z.useCallback(()=>{if(De.length===0)return;const E=n.filter(I=>De.includes(I.id));V(E)},[De,n]),ie=Z.useCallback(()=>{if(De.length===0)return;const E=n.filter(I=>De.includes(I.id));V(E),t(I=>I.filter(q=>!De.includes(q.id))),ot([])},[De,n,t]),de=Z.useRef(n),yt=Z.useRef(A);Z.useEffect(()=>{de.current=n,yt.current=A},[n,A]);const L=Z.useCallback(()=>{if(Et.length===0)return;const E=Math.min(...Et.map(M=>M.startTime)),I=o-E,q=Et.map(M=>({...M,id:Math.random().toString(36).substr(2,9),startTime:M.startTime+I,endTime:M.endTime+I}));t(M=>[...M,...q].sort((ee,z)=>ee.startTime-z.startTime)),ot(q.map(M=>M.id))},[Et,o,t]),se=Z.useCallback(()=>{const E=n.filter(ee=>De.includes(ee.id)&&o>ee.startTime&&o<ee.endTime);if(E.length===0)return;let I=[];const q=[],M=[];E.forEach(ee=>{const z=o,ae={...ee,id:Math.random().toString(36).substr(2,9),endTime:z},C=z-ee.startTime,te={...ee,id:Math.random().toString(36).substr(2,9),startTime:z,mediaStartOffset:(ee.mediaStartOffset||0)+C};q.push(ee.id),I.push(ae,te),M.push(te.id)}),t(ee=>[...ee.filter(ae=>!q.includes(ae.id)),...I].sort((ae,C)=>ae.startTime-C.startTime)),ot(M)},[n,De,o,t]),[xe,He]=Z.useState(null),[it,w]=Z.useState(!1),[U,J]=Z.useState(null),oe=async E=>{if(E.target.files&&E.target.files.length>0){const I=Array.from(E.target.files),q=I.every(ee=>ee.type.startsWith("image/")),M=[];if(q){const ee=I.length,z=o,C=Math.max(0,a-z)/ee,te=Math.max(3,C);I.forEach((ke,Ye)=>{const nt=URL.createObjectURL(ke),Be=z+Ye*te,Lt=Be+te;M.push({id:Math.random().toString(36).substr(2,9),url:nt,type:"image",startTime:Be,endTime:Lt,name:ke.name,layer:0})})}else{let ee=o;for(const z of I){const ae=z.type.startsWith("image/")?"image":z.type.startsWith("video/")?"video":"audio";let C=5;if(ae!=="image"){const ke=await T1(z);ke>0&&(C=ke)}const te=URL.createObjectURL(z);M.push({id:Math.random().toString(36).substr(2,9),url:te,type:ae,startTime:ee,endTime:ee+C,mediaDuration:ae!=="image"?C:void 0,name:z.name,isMuted:ae==="video",volume:ae==="video"||ae==="audio"?1:void 0,layer:0}),ee+=C}}t(ee=>[...ee,...M].sort((z,ae)=>z.startTime-ae.startTime)),E.target.value=""}},Me=E=>{t(I=>I.filter(q=>q.id!==E))},Te=async E=>{E.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},Ce=(E,I,q)=>{if(E.stopPropagation(),E.preventDefault(),x.current?.focus(),E.shiftKey&&pt){const te=n.findIndex(Ye=>Ye.id===pt),ke=n.findIndex(Ye=>Ye.id===I);if(te!==-1&&ke!==-1){const Ye=Math.min(te,ke),nt=Math.max(te,ke),Be=n.slice(Ye,nt+1).map(Lt=>Lt.id);ot(Lt=>{const Je=new Set([...Lt,...Be]);return Array.from(Je)})}}else E.ctrlKey||E.metaKey?(ot(te=>te.includes(I)?te.filter(ke=>ke!==I):[...te,I]),xt(I)):(De.includes(I)||ot([I]),xt(I));const M=n.find(te=>te.id===I);if(!M)return;const ee=De.includes(I),z=E.ctrlKey||E.metaKey||E.shiftKey;let ae=[];if(!z&&!ee)ae=[I];else if(z){if(ae=[I],(E.ctrlKey||E.metaKey)&&!ee)ae=[...De,I];else if((E.ctrlKey||E.metaKey)&&ee){ae=De.filter(te=>te!==I);return}}else ae=De;const C={};n.forEach(te=>{ae.includes(te.id)&&(C[te.id]={start:te.startTime,end:te.endTime})}),C[I]||(C[I]={start:M.startTime,end:M.endTime}),He({id:I,type:q,startX:E.clientX,initialStart:M.startTime,initialEnd:M.endTime,initialMap:C}),window.addEventListener("mousemove",G),window.addEventListener("mouseup",D)},Ie=E=>{E.button===0&&(E.stopPropagation(),x.current?.focus(),ot([]),w(!0),ge(E.clientX),window.addEventListener("mousemove",Re),window.addEventListener("mouseup",je))},fe=E=>{if(E.button!==0)return;x.current?.focus();const I=E.clientX,q=E.clientY,M=T.current?.getBoundingClientRect();if(!M)return;const ee=I-M.left,z=q-M.top;let ae=!1;const C=ke=>{const Ye=Math.sqrt(Math.pow(ke.clientX-I,2)+Math.pow(ke.clientY-q,2));if(!ae&&Ye>5&&(ae=!0,J({x:ee,y:z,w:0,h:0})),ae&&T.current){const nt=T.current.getBoundingClientRect(),Be=ke.clientX-nt.left,Lt=ke.clientY-nt.top;J(Tt=>{if(!Tt)return null;const gt=Be-ee,jt=Lt-z;return{x:gt>0?ee:Be,y:jt>0?z:Lt,w:Math.abs(gt),h:Math.abs(jt)}});const Je=[],Jt=de.current,Nt=yt.current,lt=Math.min(ee,Be),Ne=Math.min(z,Lt),ct=Math.abs(Be-ee),ut=Math.abs(Lt-z),Ve=lt+ct,It=Ne+ut;Jt.forEach(Tt=>{const gt=Tt.startTime*Nt+96,jt=Tt.endTime*Nt+96;let xn=0,un=0;const Ai=Tt.layer||0;Tt.type==="audio"?Ai===0?(xn=Yt.AUDIO_L1_TOP,un=Yt.AUDIO_L1_TOP+Yt.AUDIO_L1_HEIGHT):(xn=Yt.AUDIO_L2_TOP,un=Yt.AUDIO_L2_TOP+Yt.AUDIO_L2_HEIGHT):Ai===0?(xn=Yt.VISUAL_L1_TOP,un=Yt.VISUAL_L1_TOP+Yt.VISUAL_L1_HEIGHT):(xn=Yt.VISUAL_L2_TOP,un=Yt.VISUAL_L2_TOP+Yt.VISUAL_L2_HEIGHT);const In=lt<jt&&Ve>gt,Li=Ne<un&&It>xn;In&&Li&&Je.push(Tt.id)}),ot(Je)}},te=ke=>{ae||(ot([]),ge(ke.clientX)),J(null),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",te)};window.addEventListener("mousemove",C),window.addEventListener("mouseup",te)},ge=E=>{if(!T.current)return;const I=T.current.getBoundingClientRect(),q=E-I.left-96;let M=Math.max(0,Math.min(q/A,_e));M=Ze(M),u(M)},Re=E=>{ge(E.clientX)},je=()=>{w(!1),window.removeEventListener("mousemove",Re),window.removeEventListener("mouseup",je)},Fe=E=>{const I=E.target;if(!(I.tagName==="INPUT"||I.tagName==="TEXTAREA"||I.isContentEditable)){if((E.ctrlKey||E.metaKey)&&E.key==="z"&&!E.shiftKey){E.preventDefault(),Le();return}if((E.ctrlKey||E.metaKey)&&(E.key==="y"||E.key==="z"&&E.shiftKey)){E.preventDefault(),ve();return}if((E.ctrlKey||E.metaKey)&&E.key==="c"){E.preventDefault(),Ee();return}if((E.ctrlKey||E.metaKey)&&E.key==="x"){E.preventDefault(),ie();return}if((E.ctrlKey||E.metaKey)&&E.key==="v"){E.preventDefault(),L();return}if(E.key.toLowerCase()==="x"&&!E.ctrlKey&&!E.metaKey||(E.ctrlKey||E.metaKey)&&E.key==="k"){E.preventDefault(),E.stopPropagation(),se();return}if((E.key==="Delete"||E.key==="Backspace")&&De.length>0&&(E.preventDefault(),t(q=>q.filter(M=>!De.includes(M.id))),ot([])),De.length>0&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault(),E.stopPropagation();const q=E.key==="ArrowRight"?.01:-.01,M=n.find(ee=>ee.id===De[0]);if(M){const ee=Math.max(0,M.startTime+q);u(ee)}t(ee=>ee.map(ae=>{if(De.includes(ae.id)){const C=ae.endTime-ae.startTime;let te=ae.startTime+q;return te=Math.max(0,te),{...ae,startTime:te,endTime:te+C}}return ae}).sort((ae,C)=>ae.startTime-C.startTime))}}},Ze=(E,I=[])=>{const q=T0/A,M=[0,a,o],ee=ur(A),z=Math.round(E/ee)*ee;M.push(z),n.forEach(te=>{I.includes(te.id)||(M.push(te.startTime),M.push(te.endTime))}),r.forEach(te=>{M.push(te.time)});let ae=E,C=q;for(const te of M){const ke=Math.abs(te-E);ke<C&&(C=ke,ae=te)}return ae},G=E=>{He(I=>{if(!I)return null;const M=(E.clientX-I.startX)/A;return t(ee=>{if(I.type==="move"){const z=Object.keys(I.initialMap),ae=Object.values(I.initialMap),C=Math.min(...ae.map(Ne=>Ne.start)),te=Math.max(...ae.map(Ne=>Ne.end)),ke=I.initialMap[I.id],Ye=[{type:"drag-start",initVal:ke.start},{type:"drag-end",initVal:ke.end},{type:"group-start",initVal:C},{type:"group-end",initVal:te}],nt=T0/A,Be=[0,a,o],Lt=ur(A);n.forEach(Ne=>{z.includes(Ne.id)||(Be.push(Ne.startTime),Be.push(Ne.endTime))}),r.forEach(Ne=>{Be.push(Ne.time)});let Je=M,Jt=nt,Nt=!1;Ye.forEach(Ne=>{const ct=Ne.initVal+M;for(const It of Be){const Tt=Math.abs(It-ct);Tt<Jt&&(Jt=Tt,Je=It-Ne.initVal,Nt=!0)}const ut=Math.round(ct/Lt)*Lt,Ve=Math.abs(ut-ct);Ve<Jt&&(Jt=Ve,Je=ut-Ne.initVal,Nt=!0)});let lt=Nt?Je:M;return C+lt<0&&(lt=-C),ee.map(Ne=>{const ct=I.initialMap[Ne.id];if(ct){const ut=ct.end-ct.start;let Ve=Ne.layer||0;const It=(gt,jt,xn)=>gt>=jt&&gt<=jt+xn,Tt=T.current?.getBoundingClientRect();if(Tt){const gt=E.clientY-Tt.top;Ne.type==="audio"?(It(gt,Yt.AUDIO_L1_TOP,Yt.AUDIO_L1_HEIGHT)&&(Ve=0),It(gt,Yt.AUDIO_L2_TOP,Yt.AUDIO_L2_HEIGHT)&&(Ve=1)):(It(gt,Yt.VISUAL_L1_TOP,Yt.VISUAL_L1_HEIGHT)&&(Ve=0),It(gt,Yt.VISUAL_L2_TOP,Yt.VISUAL_L2_HEIGHT)&&(Ve=1))}return{...Ne,startTime:ct.start+lt,endTime:ct.start+lt+ut,layer:Ve}}return Ne})}else if(I.type==="resize-start"){let z=I.initialStart+M;z=Ze(z,[I.id]);const ae=.5,C=I.initialEnd;return z=Math.max(0,Math.min(z,C-ae)),ee.map(te=>te.id!==I.id?te:{...te,startTime:z})}else{let z=I.initialEnd+M;z=Ze(z,[I.id]);const ae=.5,C=I.initialStart;return z=Math.max(C+ae,z),ee.map(te=>te.id!==I.id?te:{...te,endTime:z})}}),I})},D=E=>{xe&&xe.type==="move"&&Math.abs(E.clientX-xe.startX)<5&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&ot([xe.id]),He(null),window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",D),t(I=>[...I].sort((q,M)=>q.startTime-M.startTime))},pe=()=>N(E=>Math.min(200,E+10)),we=()=>N(E=>Math.max(10,E-10)),he=(E,I)=>{v(q=>{const M=q.layerVisibility?.[E]||{},ee={...M,[I]:M[I]===!1};return{...q,layerVisibility:{...q.layerVisibility,[E]:ee,...E==="visual"?{audio:q.layerVisibility?.audio||{}}:{visual:q.layerVisibility?.visual||{}}}}})},le=(E,I)=>y.layerVisibility?.[E]?.[I]!==!1;return f.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:E=>E.currentTarget.focus(),onKeyDown:Fe,children:[f.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[f.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[f.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[f.jsx(hg,{size:16,className:"text-purple-400"}),"Timeline"]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[f.jsx(gg,{size:14})," Import Media",f.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:oe})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:f.jsx(h1,{size:14})}),f.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[A,"px/s"]}),f.jsx("button",{onClick:pe,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:f.jsx(f1,{size:14})})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Le,disabled:!ye,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:f.jsx(i1,{size:14})}),f.jsx("button",{onClick:ve,disabled:!ze,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:f.jsx(_b,{size:14})})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Ee,disabled:De.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:f.jsx(jx,{size:14})}),f.jsx("button",{onClick:ie,disabled:De.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:f.jsx(Db,{size:14})}),f.jsx("button",{onClick:L,disabled:Et.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:f.jsx(Ox,{size:14})})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("button",{onClick:se,disabled:De.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:f.jsx($b,{size:14})})}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>{n.length>0&&De.length===n.length?ot([]):ot(n.map(E=>E.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),De.length===1&&f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[f.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),f.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const E=n.find(I=>I.id===De[0]);return E?Yl(E.endTime-E.startTime):"00:00"})(),onBlur:E=>{const q=E.target.value.split(":");if(q.length===2){const ee=parseInt(q[0])||0,z=parseInt(q[1])||0,ae=ee*60+z;ae>0&&t(C=>C.map(te=>te.id===De[0]?{...te,endTime:te.startTime+ae}:te))}const M=n.find(ee=>ee.id===De[0]);M&&(E.target.value=Yl(M.endTime-M.startTime))},onKeyDown:E=>{E.key==="Enter"&&E.currentTarget.blur()}},De[0])]}),De.length===1&&(()=>{const E=n.find(I=>I.id===De[0]);return E&&(E.type==="video"||E.type==="audio")?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),f.jsxs("div",{className:"flex items-center gap-1 w-20",children:[f.jsx("button",{onClick:()=>{t(I=>I.map(q=>q.id===E.id?{...q,isMuted:!q.isMuted}:q))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?f.jsx(ql,{size:10}):f.jsx(jo,{size:10})}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:E.volume!==void 0?E.volume:1,onChange:I=>{const q=parseFloat(I.target.value);t(M=>M.map(ee=>ee.id===E.id?{...ee,volume:q,isMuted:q===0}:ee))}})]}),f.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((E.volume||1)*100),"%"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),f.jsx(w1,{value:E.playbackRate||1,onChange:I=>{t(q=>q.map(M=>M.id===E.id?{...M,playbackRate:I}:M))}})]})]}):null})()]})]}),f.jsxs("div",{className:"flex gap-2 shrink-0",children:[f.jsx("button",{onClick:Te,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:f.jsx(Er,{size:14})}),f.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),f.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:f.jsx(Ei,{size:14})})]})]}),f.jsx("div",{ref:b,onWheel:E=>{b.current&&E.shiftKey&&(E.preventDefault(),b.current.scrollLeft+=E.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:f.jsxs("div",{ref:T,className:"relative",style:{width:`${$e+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:fe,children:[U&&f.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:U.x,top:U.y,width:U.w,height:U.h}}),f.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const E=ur(A);return Array.from({length:Math.ceil($e/(A*E))}).map((I,q)=>f.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:q*E*A}},q))})(),a>0&&f.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:a*A},children:f.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),f.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:Ie,children:[f.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),f.jsx("div",{className:"relative flex-1",children:(()=>{const E=ur(A);return Array.from({length:Math.ceil($e/(A*E))}).map((I,q)=>{const M=q*E;return M>_e?null:f.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:M*A,width:E*A},children:b1(M,E)},q)})})()})]}),f.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*A}px)`,willChange:"transform"},children:f.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),f.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Yt.VISUAL_L1_TOP,height:Yt.VISUAL_L1_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Visual 1"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:le("visual",0)?f.jsx(Xa,{size:12}):f.jsx(Ka,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${le("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&(E.layer===0||E.layer===void 0)).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${xe?.id===E.id||De.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:I=>Ce(I,E.id,"move"),children:[E.type==="video"?f.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):f.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:f.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(q=>q.map(M=>M.id===E.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:f.jsx(Xu,{size:10})}),E.type==="video"&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(q=>q.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?f.jsx(ql,{size:10}):f.jsx(jo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Me(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:f.jsx(Ei,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-start"),children:f.jsx(cr,{size:10,className:"text-white/70 rotate-90"})}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-end"),children:f.jsx(cr,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),f.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Yt.VISUAL_L2_TOP,height:Yt.VISUAL_L2_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Visual 2"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:le("visual",1)?f.jsx(Xa,{size:12}):f.jsx(Ka,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${le("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&E.layer===1).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${xe?.id===E.id||De.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:I=>Ce(I,E.id,"move"),children:[E.type==="video"?f.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):f.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:f.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(q=>q.map(M=>M.id===E.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:f.jsx(Xu,{size:10})}),E.type==="video"&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(q=>q.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:E.isMuted!==!1?f.jsx(ql,{size:10}):f.jsx(jo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Me(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:f.jsx(Ei,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-start"),children:f.jsx(cr,{size:10,className:"text-white/70 rotate-90"})}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-end"),children:f.jsx(cr,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),f.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Yt.LYRICS_TOP,height:Yt.LYRICS_HEIGHT},children:[f.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:f.jsx("span",{children:"Lyrics"})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((E,I)=>f.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:E.time*A},title:`${Yl(E.time)} - ${E.text}`,onClick:q=>{q.stopPropagation(),u(E.time)},children:[f.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Yl(E.time)}),E.text]},I))})]}),f.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Yt.AUDIO_L1_TOP,height:Yt.AUDIO_L1_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Audio 1"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:le("audio",0)?f.jsx(Xa,{size:12}):f.jsx(Ka,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${le("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&(E.layer===0||E.layer===void 0)).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${xe?.id===E.id||De.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:I=>Ce(I,E.id,"move"),children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:f.jsx(jo,{size:16,className:"text-emerald-200"})}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:f.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),t(q=>q.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?f.jsx(ql,{size:10}):f.jsx(jo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Me(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:f.jsx(Ei,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-start")}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-end")})]},E.id))})]}),f.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Yt.AUDIO_L2_TOP,height:Yt.AUDIO_L2_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Audio 2"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:le("audio",1)?f.jsx(Xa,{size:12}):f.jsx(Ka,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${le("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&E.layer===1).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${xe?.id===E.id||De.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:I=>Ce(I,E.id,"move"),children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:f.jsx(jo,{size:16,className:"text-emerald-200"})}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:f.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),t(q=>q.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?f.jsx(ql,{size:10}):f.jsx(jo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Me(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:f.jsx(Ei,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-start")}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ce(I,E.id,"resize-end")})]},E.id))})]})]})})]})};var C1={};let _1,A1;function N1(){return{geminiUrl:_1,vertexUrl:A1}}function M1(n,t,o,a){var r,u;if(!n?.baseUrl){const h=N1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(u=h.geminiUrl)!==null&&u!==void 0?u:a}return n.baseUrl}class go{}function qe(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(a,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(n,t,o){for(let u=0;u<t.length-1;u++){const h=t[u];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];d(x,t.slice(u+1),o[m])}else for(const m of v)d(m,t.slice(u+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];d(v[0],t.slice(u+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const a=t[t.length-1],r=n[a];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[a]=o}function c(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let a=0;a<t.length;a++){if(typeof n!="object"||n===null)return o;const r=t[a];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in n){const h=n[u];return Array.isArray(h)?h.map(y=>c(y,t.slice(a+1),o)):o}else return o}else n=n[r]}return n}catch(a){if(a instanceof TypeError)return o;throw a}}function R1(n,t){for(const[o,a]of Object.entries(t)){const r=o.split("."),u=a.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&u.length>y)for(let v=y;v<u.length;v++){const m=u[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}Wu(n,r,u,0,h)}}function Wu(n,t,o,a,r){if(a>=t.length||typeof n!="object"||n===null)return;const u=t[a];if(u.endsWith("[]")){const h=u.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])Wu(v,t,o,a+1,r)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const b=[];for(const T of o.slice(a))T==="*"?b.push(m):b.push(T);d(h,b,x)}for(const m of y)delete h[m]}}else{const h=n;u in h&&Wu(h[u],t,o,a+1,r)}}function vd(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function k1(n){const t={},o=c(n,["operationName"]);o!=null&&d(t,["operationName"],o);const a=c(n,["resourceName"]);return a!=null&&d(t,["_url","resourceName"],a),t}function I1(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],D1(h)),t}function z1(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],L1(h)),t}function D1(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>U1(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function L1(n){const t={},o=c(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>P1(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function U1(n){const t={},o=c(n,["video"]);return o!=null&&d(t,["video"],O1(o)),t}function P1(n){const t={},o=c(n,["_self"]);return o!=null&&d(t,["video"],q1(o)),t}function H1(n){const t={},o=c(n,["operationName"]);return o!=null&&d(t,["_url","operationName"],o),t}function G1(n){const t={},o=c(n,["operationName"]);return o!=null&&d(t,["_url","operationName"],o),t}function F1(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],B1(h)),t}function B1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["parent"]);a!=null&&d(t,["parent"],a);const r=c(n,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function vg(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],V1(h)),t}function V1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["parent"]);a!=null&&d(t,["parent"],a);const r=c(n,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function O1(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["uri"],o);const a=c(n,["encodedVideo"]);a!=null&&d(t,["videoBytes"],vd(a));const r=c(n,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function q1(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["uri"],o);const a=c(n,["bytesBase64Encoded"]);a!=null&&d(t,["videoBytes"],vd(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}var w0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(w0||(w0={}));var E0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(E0||(E0={}));var C0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(C0||(C0={}));var cn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cn||(cn={}));var _0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(_0||(_0={}));var A0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(A0||(A0={}));var N0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(N0||(N0={}));var M0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(M0||(M0={}));var R0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(R0||(R0={}));var k0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(k0||(k0={}));var I0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(I0||(I0={}));var z0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(z0||(z0={}));var D0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(D0||(D0={}));var L0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(L0||(L0={}));var U0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(U0||(U0={}));var P0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(P0||(P0={}));var H0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(H0||(H0={}));var G0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(G0||(G0={}));var F0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(F0||(F0={}));var Cr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Cr||(Cr={}));var B0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(B0||(B0={}));var V0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(V0||(V0={}));var O0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(O0||(O0={}));var ed;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ed||(ed={}));var q0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(q0||(q0={}));var j0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(j0||(j0={}));var $0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})($0||($0={}));var Y0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Y0||(Y0={}));var J0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(J0||(J0={}));var K0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(K0||(K0={}));var X0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(X0||(X0={}));var Q0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Q0||(Q0={}));var Z0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Z0||(Z0={}));var W0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(W0||(W0={}));var em;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(em||(em={}));var tm;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(tm||(tm={}));var nm;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nm||(nm={}));var im;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(im||(im={}));var om;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(om||(om={}));var lm;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(lm||(lm={}));var am;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(am||(am={}));var sm;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(sm||(sm={}));var rm;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(rm||(rm={}));var cm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(cm||(cm={}));var um;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(um||(um={}));var dm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(dm||(dm={}));var fm;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fm||(fm={}));var pm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(pm||(pm={}));var hm;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(hm||(hm={}));var mm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mm||(mm={}));var gm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gm||(gm={}));var ym;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(ym||(ym={}));var vm;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vm||(vm={}));var xm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xm||(xm={}));var bm;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(bm||(bm={}));var Jl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Jl||(Jl={}));class td{constructor(t){const o={};for(const a of t.headers.entries())o[a[0]]=a[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class ja{get text(){var t,o,a,r,u,h,y,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const b=[];for(const T of(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[A,N]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&b.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,a,r,u,h,y,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const b of(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(b))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,a,r,u,h,y,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,a,r,u,h,y,v,m;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,a,r,u,h,y,v,m;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class Sm{}class Tm{}class j1{}class $1{}class Y1{}class J1{}class wm{}class Em{}class Cm{}class K1{}class _r{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new _r;let r;const u=t;return o?r=z1(u):r=I1(u),Object.assign(a,r),a}}class _m{}class Am{}class Nm{}class Mm{}class X1{}class Q1{}class Z1{}class xd{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new xd,u=F1(t);return Object.assign(a,u),a}}class W1{}class eS{}class tS{}class Rm{}class nS{get text(){var t,o,a;let r="",u=!1;const h=[];for(const y of(a=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;u=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,o,a;let r="";const u=[];for(const h of(a=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&u.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class iS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bd{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new bd,u=vg(t);return Object.assign(a,u),a}}function Ot(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function xg(n,t){const o=Ot(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function bg(n){return Array.isArray(n)?n.map(t=>Ar(t)):[Ar(n)]}function Ar(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Sg(n){const t=Ar(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Tg(n){const t=Ar(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function km(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function wg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>km(t)):[km(n)]}function nd(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Im(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function zm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Bn(n){if(n==null)throw new Error("ContentUnion is required");return nd(n)?n:{role:"user",parts:wg(n)}}function Sd(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const a=Bn(o);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const o=Bn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>Bn(o)):[Bn(t)]}function Ci(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Im(n)||zm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bn(n)]}const t=[],o=[],a=nd(n[0]);for(const r of n){const u=nd(r);if(u!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(r);else{if(Im(r)||zm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return a||t.push({role:"user",parts:wg(o)}),t}function oS(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(a=>a!=="null");if(o.length===1)t.type=Object.values(cn).includes(o[0].toUpperCase())?o[0].toUpperCase():cn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const a of o)t.anyOf.push({type:Object.values(cn).includes(a.toUpperCase())?a.toUpperCase():cn.TYPE_UNSPECIFIED})}}function Zl(n){const t={},o=["items"],a=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,n=u[1]):u[1].type==="null"&&(t.nullable=!0,n=u[0])),n.type instanceof Array&&oS(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(cn).includes(y.toUpperCase())?y.toUpperCase():cn.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=Zl(y);else if(a.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(Zl(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=Zl(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function Td(n){return Zl(n)}function wd(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ed(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ea(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Zl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Zl(t.response));return n}function ta(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function lS(n,t,o,a=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===a;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function yo(n,t){if(typeof t!="string")throw new Error("name must be a string");return lS(n,t,"cachedContents")}function Eg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jo(n){return vd(n)}function aS(n){return n!=null&&typeof n=="object"&&"name"in n}function sS(n){return n!=null&&typeof n=="object"&&"video"in n}function rS(n){return n!=null&&typeof n=="object"&&"uri"in n}function Cg(n){var t;let o;if(aS(n)&&(o=n.name),!(rS(n)&&(o=n.uri,o===void 0))&&!(sS(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function _g(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function Ag(n){for(const t of["models","tunedModels","publisherModels"])if(cS(n,t))return n[t];return[]}function cS(n,t){return n!==null&&typeof n=="object"&&t in n}function uS(n,t={}){const o=n,a={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(a.responseJsonSchema=o.outputSchema),t.behavior&&(a.behavior=t.behavior),{functionDeclarations:[a]}}function dS(n,t={}){const o=[],a=new Set;for(const r of n){const u=r.name;if(a.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);a.add(u);const h=uS(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function Ng(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const a=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function fS(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Mg(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let u=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){u=!0;break}}return u&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function na(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Rg(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function pS(n){const t={},o=c(n,["responsesFile"]);o!=null&&d(t,["fileName"],o);const a=c(n,["inlinedResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>YS(h))),d(t,["inlinedResponses"],u)}const r=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["inlinedEmbedContentResponses"],u)}return t}function hS(n){const t={},o=c(n,["predictionsFormat"]);o!=null&&d(t,["format"],o);const a=c(n,["gcsDestination","outputUriPrefix"]);a!=null&&d(t,["gcsUri"],a);const r=c(n,["bigqueryDestination","outputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function mS(n){const t={},o=c(n,["format"]);o!=null&&d(t,["predictionsFormat"],o);const a=c(n,["gcsUri"]);a!=null&&d(t,["gcsDestination","outputUriPrefix"],a);const r=c(n,["bigqueryUri"]);if(r!=null&&d(t,["bigqueryDestination","outputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function br(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata","displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["metadata","state"]);r!=null&&d(t,["state"],Rg(r));const u=c(n,["metadata","createTime"]);u!=null&&d(t,["createTime"],u);const h=c(n,["metadata","endTime"]);h!=null&&d(t,["endTime"],h);const y=c(n,["metadata","updateTime"]);y!=null&&d(t,["updateTime"],y);const v=c(n,["metadata","model"]);v!=null&&d(t,["model"],v);const m=c(n,["metadata","output"]);return m!=null&&d(t,["dest"],pS(Mg(m))),t}function id(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["state"]);r!=null&&d(t,["state"],Rg(r));const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["createTime"]);h!=null&&d(t,["createTime"],h);const y=c(n,["startTime"]);y!=null&&d(t,["startTime"],y);const v=c(n,["endTime"]);v!=null&&d(t,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&d(t,["updateTime"],m);const x=c(n,["model"]);x!=null&&d(t,["model"],x);const b=c(n,["inputConfig"]);b!=null&&d(t,["src"],gS(b));const T=c(n,["outputConfig"]);T!=null&&d(t,["dest"],hS(Mg(T)));const A=c(n,["completionStats"]);return A!=null&&d(t,["completionStats"],A),t}function gS(n){const t={},o=c(n,["instancesFormat"]);o!=null&&d(t,["format"],o);const a=c(n,["gcsSource","uris"]);a!=null&&d(t,["gcsUri"],a);const r=c(n,["bigquerySource","inputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function yS(n,t){const o={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=c(t,["fileName"]);a!=null&&d(o,["fileName"],a);const r=c(t,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>$S(n,h))),d(o,["requests","requests"],u)}return o}function vS(n){const t={},o=c(n,["format"]);o!=null&&d(t,["instancesFormat"],o);const a=c(n,["gcsUri"]);a!=null&&d(t,["gcsSource","uris"],a);const r=c(n,["bigqueryUri"]);if(r!=null&&d(t,["bigquerySource","inputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function xS(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function bS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function SS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function TS(n){const t={},o=c(n,["content"]);o!=null&&d(t,["content"],o);const a=c(n,["citationMetadata"]);a!=null&&d(t,["citationMetadata"],wS(a));const r=c(n,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&d(t,["finishReason"],u);const h=c(n,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&d(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&d(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&d(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),d(t,["safetyRatings"],T)}const b=c(n,["urlContextMetadata"]);return b!=null&&d(t,["urlContextMetadata"],b),t}function wS(n){const t={},o=c(n,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(t,["citations"],a)}return t}function kg(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>eT(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function ES(n,t){const o={},a=c(n,["displayName"]);if(t!==void 0&&a!=null&&d(t,["batch","displayName"],a),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function CS(n,t){const o={},a=c(n,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const r=c(n,["dest"]);return t!==void 0&&r!=null&&d(t,["outputConfig"],mS(fS(r))),o}function Dm(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["src"]);r!=null&&d(o,["batch","inputConfig"],yS(n,Ng(n,r)));const u=c(t,["config"]);return u!=null&&ES(u,o),o}function _S(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["model"],Ot(n,a));const r=c(t,["src"]);r!=null&&d(o,["inputConfig"],vS(Ng(n,r)));const u=c(t,["config"]);return u!=null&&CS(u,o),o}function AS(n,t){const o={},a=c(n,["displayName"]);return t!==void 0&&a!=null&&d(t,["batch","displayName"],a),o}function NS(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["src"]);r!=null&&d(o,["batch","inputConfig"],LS(n,r));const u=c(t,["config"]);return u!=null&&AS(u,o),o}function MS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function RS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function kS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);return u!=null&&d(t,["error"],u),t}function IS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);return u!=null&&d(t,["error"],u),t}function zS(n,t){const o={},a=c(t,["contents"]);if(a!=null){let u=Sd(n,a);Array.isArray(u)&&(u=u.map(h=>h)),d(o,["requests[]","request","content"],u)}const r=c(t,["config"]);return r!=null&&(d(o,["_self"],DS(r,o)),R1(o,{"requests[].*":"requests[].request.*"})),o}function DS(n,t){const o={},a=c(n,["taskType"]);t!==void 0&&a!=null&&d(t,["requests[]","taskType"],a);const r=c(n,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(t!==void 0&&u!=null&&d(t,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function LS(n,t){const o={},a=c(t,["fileName"]);a!=null&&d(o,["file_name"],a);const r=c(t,["inlinedRequests"]);return r!=null&&d(o,["requests"],zS(n,r)),o}function US(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function PS(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function HS(n){const t={},o=c(n,["mode"]);o!=null&&d(t,["mode"],o);const a=c(n,["allowedFunctionNames"]);if(a!=null&&d(t,["allowedFunctionNames"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function GS(n,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],kg(Bn(r)));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const h=c(t,["topP"]);h!=null&&d(a,["topP"],h);const y=c(t,["topK"]);y!=null&&d(a,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&d(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&d(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&d(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&d(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&d(a,["presencePenalty"],A);const N=c(t,["frequencyPenalty"]);N!=null&&d(a,["frequencyPenalty"],N);const O=c(t,["seed"]);O!=null&&d(a,["seed"],O);const H=c(t,["responseMimeType"]);H!=null&&d(a,["responseMimeType"],H);const j=c(t,["responseSchema"]);j!=null&&d(a,["responseSchema"],Td(j));const re=c(t,["responseJsonSchema"]);if(re!=null&&d(a,["responseJsonSchema"],re),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=c(t,["safetySettings"]);if(o!==void 0&&ce!=null){let pt=ce;Array.isArray(pt)&&(pt=pt.map(xt=>tT(xt))),d(o,["safetySettings"],pt)}const ye=c(t,["tools"]);if(o!==void 0&&ye!=null){let pt=ta(ye);Array.isArray(pt)&&(pt=pt.map(xt=>iT(ea(xt)))),d(o,["tools"],pt)}const ze=c(t,["toolConfig"]);if(o!==void 0&&ze!=null&&d(o,["toolConfig"],nT(ze)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Le=c(t,["cachedContent"]);o!==void 0&&Le!=null&&d(o,["cachedContent"],yo(n,Le));const ve=c(t,["responseModalities"]);ve!=null&&d(a,["responseModalities"],ve);const Ke=c(t,["mediaResolution"]);Ke!=null&&d(a,["mediaResolution"],Ke);const _e=c(t,["speechConfig"]);if(_e!=null&&d(a,["speechConfig"],wd(_e)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $e=c(t,["thinkingConfig"]);$e!=null&&d(a,["thinkingConfig"],$e);const De=c(t,["imageConfig"]);De!=null&&d(a,["imageConfig"],jS(De));const ot=c(t,["enableEnhancedCivicAnswers"]);return ot!=null&&d(a,["enableEnhancedCivicAnswers"],ot),a}function FS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(m=>TS(m))),d(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&d(t,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&d(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&d(t,["usageMetadata"],y),t}function BS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function VS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function OS(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function qS(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function jS(n){const t={},o=c(n,["aspectRatio"]);o!=null&&d(t,["aspectRatio"],o);const a=c(n,["imageSize"]);if(a!=null&&d(t,["imageSize"],a),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function $S(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["request","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let y=Ci(r);Array.isArray(y)&&(y=y.map(v=>kg(v))),d(o,["request","contents"],y)}const u=c(t,["metadata"]);u!=null&&d(o,["metadata"],u);const h=c(t,["config"]);return h!=null&&d(o,["request","generationConfig"],GS(n,h,c(o,["request"],{}))),o}function YS(n){const t={},o=c(n,["response"]);o!=null&&d(t,["response"],FS(o));const a=c(n,["error"]);return a!=null&&d(t,["error"],a),t}function JS(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);if(t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function KS(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);t!==void 0&&r!=null&&d(t,["_query","pageToken"],r);const u=c(n,["filter"]);return t!==void 0&&u!=null&&d(t,["_query","filter"],u),o}function XS(n){const t={},o=c(n,["config"]);return o!=null&&JS(o,t),t}function QS(n){const t={},o=c(n,["config"]);return o!=null&&KS(o,t),t}function ZS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>br(h))),d(t,["batchJobs"],u)}return t}function WS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>id(h))),d(t,["batchJobs"],u)}return t}function eT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],US(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],PS(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],xS(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function tT(n){const t={},o=c(n,["category"]);if(o!=null&&d(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(n,["threshold"]);return a!=null&&d(t,["threshold"],a),t}function nT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&d(t,["functionCallingConfig"],HS(o));const a=c(n,["retrievalConfig"]);return a!=null&&d(t,["retrievalConfig"],a),t}function iT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],OS(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],qS(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}var mo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(mo||(mo={}));class fl{constructor(t,o,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,a,r)}init(t,o,a){var r,u;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!a||Object.keys(a).length===0?h={config:{}}:typeof a=="object"?h=Object.assign({},a):h=a,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(u=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class oT extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new fl(mo.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=Dm(this.apiClient,t),a=o._url,r=qe("{model}:batchGenerateContent",a),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const b=Object.assign({},x);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const A=b.request;A.systemInstruction=T,b.request=A}m.push(b)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const a=o?Object.assign({},o):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const u=this.getGcsUri(t),h=this.getBigqueryUri(t);if(u)u.endsWith(".jsonl")?a.dest=`${u.slice(0,-6)}/dest`:a.dest=`${u}_dest_${r}`;else if(h)a.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_S(this.apiClient,t);return y=qe("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>id(x))}else{const m=Dm(this.apiClient,t);return y=qe("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>br(x))}}async createEmbeddingsInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=NS(this.apiClient,t);return u=qe("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>br(v))}}async get(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=VS(this.apiClient,t);return y=qe("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>id(x))}else{const m=BS(this.apiClient,t);return y=qe("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>br(x))}}async cancel(t){var o,a,r,u;let h="",y={};if(this.apiClient.isVertexAI()){const v=SS(this.apiClient,t);h=qe("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const v=bS(this.apiClient,t);h=qe("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=QS(t);return y=qe("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=WS(x),T=new Rm;return Object.assign(T,b),T})}else{const m=XS(t);return y=qe("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=ZS(x),T=new Rm;return Object.assign(T,b),T})}}async delete(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=RS(this.apiClient,t);return y=qe("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>IS(x))}else{const m=MS(this.apiClient,t);return y=qe("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>kS(x))}}}function lT(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function Lm(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>NT(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function aT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const u=c(n,["displayName"]);t!==void 0&&u!=null&&d(t,["displayName"],u);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let x=Ci(h);Array.isArray(x)&&(x=x.map(b=>Lm(b))),d(t,["contents"],x)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&d(t,["systemInstruction"],Lm(Bn(y)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(b=>RT(b))),d(t,["tools"],x)}const m=c(n,["toolConfig"]);if(t!==void 0&&m!=null&&d(t,["toolConfig"],MT(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function sT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const u=c(n,["displayName"]);t!==void 0&&u!=null&&d(t,["displayName"],u);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let b=Ci(h);Array.isArray(b)&&(b=b.map(T=>T)),d(t,["contents"],b)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&d(t,["systemInstruction"],Bn(y));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(T=>kT(T))),d(t,["tools"],b)}const m=c(n,["toolConfig"]);t!==void 0&&m!=null&&d(t,["toolConfig"],m);const x=c(n,["kmsKeyName"]);return t!==void 0&&x!=null&&d(t,["encryption_spec","kmsKeyName"],x),o}function rT(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["model"],xg(n,a));const r=c(t,["config"]);return r!=null&&aT(r,o),o}function cT(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["model"],xg(n,a));const r=c(t,["config"]);return r!=null&&sT(r,o),o}function uT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],yo(n,a)),o}function dT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],yo(n,a)),o}function fT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function pT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function hT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function mT(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function gT(n){const t={},o=c(n,["mode"]);o!=null&&d(t,["mode"],o);const a=c(n,["allowedFunctionNames"]);if(a!=null&&d(t,["allowedFunctionNames"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function yT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&d(t,["description"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["parameters"]);r!=null&&d(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&d(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&d(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&d(t,["responseJsonSchema"],y),t}function vT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],yo(n,a)),o}function xT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],yo(n,a)),o}function bT(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function ST(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function TT(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function wT(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function ET(n){const t={},o=c(n,["config"]);return o!=null&&TT(o,t),t}function CT(n){const t={},o=c(n,["config"]);return o!=null&&wT(o,t),t}function _T(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["cachedContents"],u)}return t}function AT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["cachedContents"],u)}return t}function NT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],hT(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],mT(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],lT(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function MT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&d(t,["functionCallingConfig"],gT(o));const a=c(n,["retrievalConfig"]);return a!=null&&d(t,["retrievalConfig"],a),t}function RT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],bT(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],ST(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function kT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>yT(T))),d(t,["functionDeclarations"],b)}const a=c(n,["retrieval"]);a!=null&&d(t,["retrieval"],a);const r=c(n,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&d(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&d(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&d(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&d(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function IT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),o}function zT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),o}function DT(n,t){const o={},a=c(t,["name"]);a!=null&&d(o,["_url","name"],yo(n,a));const r=c(t,["config"]);return r!=null&&IT(r,o),o}function LT(n,t){const o={},a=c(t,["name"]);a!=null&&d(o,["_url","name"],yo(n,a));const r=c(t,["config"]);return r!=null&&zT(r,o),o}class UT extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new fl(mo.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(o),o)}async create(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=cT(this.apiClient,t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=rT(this.apiClient,t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=vT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=dT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=pT(x),T=new Nm;return Object.assign(T,b),T})}else{const m=uT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=fT(x),T=new Nm;return Object.assign(T,b),T})}}async update(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=LT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=DT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=CT(t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=AT(x),T=new Mm;return Object.assign(T,b),T})}else{const m=ET(t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=_T(x),T=new Mm;return Object.assign(T,b),T})}}}function Nr(n,t){var o={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&t.indexOf(a)<0&&(o[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(n);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(n,a[r])&&(o[a[r]]=n[a[r]]);return o}function Um(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(n){return this instanceof St?(this.v=n,this):new St(n)}function Ii(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(A){return function(N){return Promise.resolve(N).then(A,b)}}function y(A,N){a[A]&&(r[A]=function(O){return new Promise(function(H,j){u.push([A,O,H,j])>1||v(A,O)})},N&&(r[A]=N(r[A])))}function v(A,N){try{m(a[A](N))}catch(O){T(u[0][3],O)}}function m(A){A.value instanceof St?Promise.resolve(A.value.v).then(x,b):T(u[0][2],A)}function x(A){v("next",A)}function b(A){v("throw",A)}function T(A,N){A(N),u.shift(),u.length&&v(u[0][0],u[0][1])}}function zi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Um=="function"?Um(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(u){o[u]=n[u]&&function(h){return new Promise(function(y,v){h=n[u](h),r(y,v,h.done,h.value)})}}function r(u,h,y,v){Promise.resolve(v).then(function(m){u({value:m,done:y})},h)}}function PT(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:Ig(o)}function Ig(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function HT(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Pm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let a=0;for(;a<o;)if(n[a].role==="user")t.push(n[a]),a++;else{const r=[];let u=!0;for(;a<o&&n[a].role==="model";)r.push(n[a]),u&&!Ig(n[a])&&(u=!1),a++;u?t.push(...r):t.pop()}return t}class GT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new FT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class FT{constructor(t,o,a,r={},u=[]){this.apiClient=t,this.modelsModule=o,this.model=a,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),HT(u)}async sendMessage(t){var o;await this.sendPromise;const a=Bn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,h,y;const v=await r,m=(h=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];x!=null&&(T=(y=x.slice(b))!==null&&y!==void 0?y:[]);const A=m?[m]:[];this.recordHistory(a,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const a=Bn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,a)}getHistory(t=!1){const o=t?Pm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Ii(this,arguments,function*(){var r,u,h,y,v,m;const x=[];try{for(var b=!0,T=zi(t),A;A=yield St(T.next()),r=A.done,!r;b=!0){y=A.value,b=!1;const N=y;if(PT(N)){const O=(m=(v=N.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;O!==void 0&&x.push(O)}yield yield St(N)}}catch(N){u={error:N}}finally{try{!b&&!r&&(h=T.return)&&(yield St(h.call(T)))}finally{if(u)throw u.error}}this.recordHistory(o,x)})}recordHistory(t,o,a){let r=[];o.length>0&&o.every(u=>u.role!==void 0)?r=o:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Pm(a)):this.history.push(t),this.history.push(...r)}}class zr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,zr.prototype)}}function BT(n){const t={},o=c(n,["file"]);return o!=null&&d(t,["file"],o),t}function VT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function OT(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","file"],Cg(o)),t}function qT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function jT(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","file"],Cg(o)),t}function $T(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function YT(n){const t={},o=c(n,["config"]);return o!=null&&$T(o,t),t}function JT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["files"],u)}return t}class KT extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new fl(mo.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=YT(t);return u=qe("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=JT(v),x=new W1;return Object.assign(x,m),x})}}async createInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=BT(t);return u=qe("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=VT(v),x=new eS;return Object.assign(x,m),x})}}async get(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=jT(t);return u=qe("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=OT(t);return u=qe("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=qT(v),x=new tS;return Object.assign(x,m),x})}}}function Sr(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function XT(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>fw(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function QT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function ZT(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function WT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&d(t,["description"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["parameters"]);r!=null&&d(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&d(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&d(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&d(t,["responseJsonSchema"],y),t}function ew(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&d(t,["modelConfig"],o);const a=c(n,["responseJsonSchema"]);a!=null&&d(t,["responseJsonSchema"],a);const r=c(n,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&d(t,["candidateCount"],u);const h=c(n,["enableAffectiveDialog"]);h!=null&&d(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&d(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&d(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&d(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&d(t,["mediaResolution"],x);const b=c(n,["presencePenalty"]);b!=null&&d(t,["presencePenalty"],b);const T=c(n,["responseLogprobs"]);T!=null&&d(t,["responseLogprobs"],T);const A=c(n,["responseMimeType"]);A!=null&&d(t,["responseMimeType"],A);const N=c(n,["responseModalities"]);N!=null&&d(t,["responseModalities"],N);const O=c(n,["responseSchema"]);O!=null&&d(t,["responseSchema"],O);const H=c(n,["routingConfig"]);H!=null&&d(t,["routingConfig"],H);const j=c(n,["seed"]);j!=null&&d(t,["seed"],j);const re=c(n,["speechConfig"]);re!=null&&d(t,["speechConfig"],re);const ce=c(n,["stopSequences"]);ce!=null&&d(t,["stopSequences"],ce);const ye=c(n,["temperature"]);ye!=null&&d(t,["temperature"],ye);const ze=c(n,["thinkingConfig"]);ze!=null&&d(t,["thinkingConfig"],ze);const Le=c(n,["topK"]);Le!=null&&d(t,["topK"],Le);const ve=c(n,["topP"]);if(ve!=null&&d(t,["topP"],ve),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function tw(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function nw(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function iw(n,t){const o={},a=c(n,["generationConfig"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig"],a);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&d(t,["setup","generationConfig","speechConfig"],Ed(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&d(t,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&d(t,["setup","systemInstruction"],XT(Bn(N)));const O=c(n,["tools"]);if(t!==void 0&&O!=null){let Le=ta(O);Array.isArray(Le)&&(Le=Le.map(ve=>hw(ea(ve)))),d(t,["setup","tools"],Le)}const H=c(n,["sessionResumption"]);t!==void 0&&H!=null&&d(t,["setup","sessionResumption"],pw(H));const j=c(n,["inputAudioTranscription"]);t!==void 0&&j!=null&&d(t,["setup","inputAudioTranscription"],j);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&d(t,["setup","outputAudioTranscription"],re);const ce=c(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&d(t,["setup","realtimeInputConfig"],ce);const ye=c(n,["contextWindowCompression"]);t!==void 0&&ye!=null&&d(t,["setup","contextWindowCompression"],ye);const ze=c(n,["proactivity"]);if(t!==void 0&&ze!=null&&d(t,["setup","proactivity"],ze),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function ow(n,t){const o={},a=c(n,["generationConfig"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig"],ew(a));const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&d(t,["setup","generationConfig","speechConfig"],Ed(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&d(t,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&d(t,["setup","systemInstruction"],Bn(N));const O=c(n,["tools"]);if(t!==void 0&&O!=null){let ve=ta(O);Array.isArray(ve)&&(ve=ve.map(Ke=>mw(ea(Ke)))),d(t,["setup","tools"],ve)}const H=c(n,["sessionResumption"]);t!==void 0&&H!=null&&d(t,["setup","sessionResumption"],H);const j=c(n,["inputAudioTranscription"]);t!==void 0&&j!=null&&d(t,["setup","inputAudioTranscription"],j);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&d(t,["setup","outputAudioTranscription"],re);const ce=c(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&d(t,["setup","realtimeInputConfig"],ce);const ye=c(n,["contextWindowCompression"]);t!==void 0&&ye!=null&&d(t,["setup","contextWindowCompression"],ye);const ze=c(n,["proactivity"]);t!==void 0&&ze!=null&&d(t,["setup","proactivity"],ze);const Le=c(n,["explicitVadSignal"]);return t!==void 0&&Le!=null&&d(t,["setup","explicitVadSignal"],Le),o}function lw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["setup","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&d(o,["config"],iw(r,o)),o}function aw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["setup","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&d(o,["config"],ow(r,o)),o}function sw(n){const t={},o=c(n,["musicGenerationConfig"]);return o!=null&&d(t,["musicGenerationConfig"],o),t}function rw(n){const t={},o=c(n,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(t,["weightedPrompts"],a)}return t}function cw(n){const t={},o=c(n,["media"]);if(o!=null){let m=bg(o);Array.isArray(m)&&(m=m.map(x=>Sr(x))),d(t,["mediaChunks"],m)}const a=c(n,["audio"]);a!=null&&d(t,["audio"],Sr(Tg(a)));const r=c(n,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&d(t,["video"],Sr(Sg(u)));const h=c(n,["text"]);h!=null&&d(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&d(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&d(t,["activityEnd"],v),t}function uw(n){const t={},o=c(n,["media"]);if(o!=null){let m=bg(o);Array.isArray(m)&&(m=m.map(x=>x)),d(t,["mediaChunks"],m)}const a=c(n,["audio"]);a!=null&&d(t,["audio"],Tg(a));const r=c(n,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&d(t,["video"],Sg(u));const h=c(n,["text"]);h!=null&&d(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&d(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&d(t,["activityEnd"],v),t}function dw(n){const t={},o=c(n,["setupComplete"]);o!=null&&d(t,["setupComplete"],o);const a=c(n,["serverContent"]);a!=null&&d(t,["serverContent"],a);const r=c(n,["toolCall"]);r!=null&&d(t,["toolCall"],r);const u=c(n,["toolCallCancellation"]);u!=null&&d(t,["toolCallCancellation"],u);const h=c(n,["usageMetadata"]);h!=null&&d(t,["usageMetadata"],gw(h));const y=c(n,["goAway"]);y!=null&&d(t,["goAway"],y);const v=c(n,["sessionResumptionUpdate"]);v!=null&&d(t,["sessionResumptionUpdate"],v);const m=c(n,["voiceActivityDetectionSignal"]);return m!=null&&d(t,["voiceActivityDetectionSignal"],m),t}function fw(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],QT(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],ZT(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],Sr(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function pw(n){const t={},o=c(n,["handle"]);if(o!=null&&d(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function hw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],tw(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],nw(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function mw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>WT(T))),d(t,["functionDeclarations"],b)}const a=c(n,["retrieval"]);a!=null&&d(t,["retrieval"],a);const r=c(n,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&d(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&d(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&d(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&d(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function gw(n){const t={},o=c(n,["promptTokenCount"]);o!=null&&d(t,["promptTokenCount"],o);const a=c(n,["cachedContentTokenCount"]);a!=null&&d(t,["cachedContentTokenCount"],a);const r=c(n,["candidatesTokenCount"]);r!=null&&d(t,["responseTokenCount"],r);const u=c(n,["toolUsePromptTokenCount"]);u!=null&&d(t,["toolUsePromptTokenCount"],u);const h=c(n,["thoughtsTokenCount"]);h!=null&&d(t,["thoughtsTokenCount"],h);const y=c(n,["totalTokenCount"]);y!=null&&d(t,["totalTokenCount"],y);const v=c(n,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["promptTokensDetails"],A)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["cacheTokensDetails"],A)}const x=c(n,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["responseTokensDetails"],A)}const b=c(n,["toolUsePromptTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["toolUsePromptTokensDetails"],A)}const T=c(n,["trafficType"]);return T!=null&&d(t,["trafficType"],T),t}function yw(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function vw(n){const t={},o=c(n,["content"]);o!=null&&d(t,["content"],o);const a=c(n,["citationMetadata"]);a!=null&&d(t,["citationMetadata"],xw(a));const r=c(n,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&d(t,["finishReason"],u);const h=c(n,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&d(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&d(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&d(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),d(t,["safetyRatings"],T)}const b=c(n,["urlContextMetadata"]);return b!=null&&d(t,["urlContextMetadata"],b),t}function xw(n){const t={},o=c(n,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(t,["citations"],a)}return t}function bw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let u=Ci(r);Array.isArray(u)&&(u=u.map(h=>h)),d(o,["contents"],u)}return o}function Sw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),d(t,["tokensInfo"],r)}return t}function Tw(n){const t={},o=c(n,["values"]);o!=null&&d(t,["values"],o);const a=c(n,["statistics"]);return a!=null&&d(t,["statistics"],ww(a)),t}function ww(n){const t={},o=c(n,["truncated"]);o!=null&&d(t,["truncated"],o);const a=c(n,["token_count"]);return a!=null&&d(t,["tokenCount"],a),t}function Dr(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>IE(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function Ew(n){const t={},o=c(n,["controlType"]);o!=null&&d(t,["controlType"],o);const a=c(n,["enableControlImageComputation"]);return a!=null&&d(t,["computeControl"],a),t}function Cw(n){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function _w(n,t){const o={},a=c(n,["systemInstruction"]);t!==void 0&&a!=null&&d(t,["systemInstruction"],Bn(a));const r=c(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>Ug(y))),d(t,["tools"],h)}const u=c(n,["generationConfig"]);return t!==void 0&&u!=null&&d(t,["generationConfig"],yE(u)),o}function Aw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ci(r);Array.isArray(h)&&(h=h.map(y=>Dr(y))),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&Cw(u),o}function Nw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ci(r);Array.isArray(h)&&(h=h.map(y=>y)),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&_w(u,o),o}function Mw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["totalTokens"]);a!=null&&d(t,["totalTokens"],a);const r=c(n,["cachedContentTokenCount"]);return r!=null&&d(t,["cachedContentTokenCount"],r),t}function Rw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["totalTokens"]);return a!=null&&d(t,["totalTokens"],a),t}function kw(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function Iw(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function zw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function Dw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function Lw(n,t){const o={},a=c(n,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const u=c(n,["numberOfImages"]);t!==void 0&&u!=null&&d(t,["parameters","sampleCount"],u);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&d(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&d(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&d(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const b=c(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&d(t,["parameters","includeSafetyAttributes"],b);const T=c(n,["includeRaiReason"]);t!==void 0&&T!=null&&d(t,["parameters","includeRaiReason"],T);const A=c(n,["language"]);t!==void 0&&A!=null&&d(t,["parameters","language"],A);const N=c(n,["outputMimeType"]);t!==void 0&&N!=null&&d(t,["parameters","outputOptions","mimeType"],N);const O=c(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&d(t,["parameters","outputOptions","compressionQuality"],O);const H=c(n,["addWatermark"]);t!==void 0&&H!=null&&d(t,["parameters","addWatermark"],H);const j=c(n,["labels"]);t!==void 0&&j!=null&&d(t,["labels"],j);const re=c(n,["editMode"]);t!==void 0&&re!=null&&d(t,["parameters","editMode"],re);const ce=c(n,["baseSteps"]);return t!==void 0&&ce!=null&&d(t,["parameters","editConfig","baseSteps"],ce),o}function Uw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["referenceImages"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>HE(v))),d(o,["instances[0]","referenceImages"],y)}const h=c(t,["config"]);return h!=null&&Lw(h,o),o}function Pw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Lr(u))),d(t,["generatedImages"],r)}return t}function Hw(n,t){const o={},a=c(n,["taskType"]);t!==void 0&&a!=null&&d(t,["requests[]","taskType"],a);const r=c(n,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(t!==void 0&&u!=null&&d(t,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Gw(n,t){const o={},a=c(n,["taskType"]);t!==void 0&&a!=null&&d(t,["instances[]","task_type"],a);const r=c(n,["title"]);t!==void 0&&r!=null&&d(t,["instances[]","title"],r);const u=c(n,["outputDimensionality"]);t!==void 0&&u!=null&&d(t,["parameters","outputDimensionality"],u);const h=c(n,["mimeType"]);t!==void 0&&h!=null&&d(t,["instances[]","mimeType"],h);const y=c(n,["autoTruncate"]);return t!==void 0&&y!=null&&d(t,["parameters","autoTruncate"],y),o}function Fw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let y=Sd(n,r);Array.isArray(y)&&(y=y.map(v=>v)),d(o,["requests[]","content"],y)}const u=c(t,["config"]);u!=null&&Hw(u,o);const h=c(t,["model"]);return h!==void 0&&d(o,["requests[]","model"],Ot(n,h)),o}function Bw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Sd(n,r);Array.isArray(h)&&(h=h.map(y=>y)),d(o,["instances[]","content"],h)}const u=c(t,["config"]);return u!=null&&Gw(u,o),o}function Vw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["embeddings"],u)}const r=c(n,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function Ow(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions[]","embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>Tw(h))),d(t,["embeddings"],u)}const r=c(n,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function qw(n){const t={},o=c(n,["endpoint"]);o!=null&&d(t,["name"],o);const a=c(n,["deployedModelId"]);return a!=null&&d(t,["deployedModelId"],a),t}function jw(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function $w(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Yw(n){const t={},o=c(n,["mode"]);o!=null&&d(t,["mode"],o);const a=c(n,["allowedFunctionNames"]);if(a!=null&&d(t,["allowedFunctionNames"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Jw(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&d(t,["description"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["parameters"]);r!=null&&d(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&d(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&d(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&d(t,["responseJsonSchema"],y),t}function Kw(n,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],Dr(Bn(r)));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const h=c(t,["topP"]);h!=null&&d(a,["topP"],h);const y=c(t,["topK"]);y!=null&&d(a,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&d(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&d(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&d(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&d(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&d(a,["presencePenalty"],A);const N=c(t,["frequencyPenalty"]);N!=null&&d(a,["frequencyPenalty"],N);const O=c(t,["seed"]);O!=null&&d(a,["seed"],O);const H=c(t,["responseMimeType"]);H!=null&&d(a,["responseMimeType"],H);const j=c(t,["responseSchema"]);j!=null&&d(a,["responseSchema"],Td(j));const re=c(t,["responseJsonSchema"]);if(re!=null&&d(a,["responseJsonSchema"],re),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=c(t,["safetySettings"]);if(o!==void 0&&ce!=null){let pt=ce;Array.isArray(pt)&&(pt=pt.map(xt=>GE(xt))),d(o,["safetySettings"],pt)}const ye=c(t,["tools"]);if(o!==void 0&&ye!=null){let pt=ta(ye);Array.isArray(pt)&&(pt=pt.map(xt=>$E(ea(xt)))),d(o,["tools"],pt)}const ze=c(t,["toolConfig"]);if(o!==void 0&&ze!=null&&d(o,["toolConfig"],jE(ze)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Le=c(t,["cachedContent"]);o!==void 0&&Le!=null&&d(o,["cachedContent"],yo(n,Le));const ve=c(t,["responseModalities"]);ve!=null&&d(a,["responseModalities"],ve);const Ke=c(t,["mediaResolution"]);Ke!=null&&d(a,["mediaResolution"],Ke);const _e=c(t,["speechConfig"]);if(_e!=null&&d(a,["speechConfig"],wd(_e)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $e=c(t,["thinkingConfig"]);$e!=null&&d(a,["thinkingConfig"],$e);const De=c(t,["imageConfig"]);De!=null&&d(a,["imageConfig"],TE(De));const ot=c(t,["enableEnhancedCivicAnswers"]);return ot!=null&&d(a,["enableEnhancedCivicAnswers"],ot),a}function Xw(n,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],Bn(r));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const h=c(t,["topP"]);h!=null&&d(a,["topP"],h);const y=c(t,["topK"]);y!=null&&d(a,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&d(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&d(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&d(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&d(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&d(a,["presencePenalty"],A);const N=c(t,["frequencyPenalty"]);N!=null&&d(a,["frequencyPenalty"],N);const O=c(t,["seed"]);O!=null&&d(a,["seed"],O);const H=c(t,["responseMimeType"]);H!=null&&d(a,["responseMimeType"],H);const j=c(t,["responseSchema"]);j!=null&&d(a,["responseSchema"],Td(j));const re=c(t,["responseJsonSchema"]);re!=null&&d(a,["responseJsonSchema"],re);const ce=c(t,["routingConfig"]);ce!=null&&d(a,["routingConfig"],ce);const ye=c(t,["modelSelectionConfig"]);ye!=null&&d(a,["modelConfig"],ye);const ze=c(t,["safetySettings"]);if(o!==void 0&&ze!=null){let V=ze;Array.isArray(V)&&(V=V.map(Ee=>Ee)),d(o,["safetySettings"],V)}const Le=c(t,["tools"]);if(o!==void 0&&Le!=null){let V=ta(Le);Array.isArray(V)&&(V=V.map(Ee=>Ug(ea(Ee)))),d(o,["tools"],V)}const ve=c(t,["toolConfig"]);o!==void 0&&ve!=null&&d(o,["toolConfig"],ve);const Ke=c(t,["labels"]);o!==void 0&&Ke!=null&&d(o,["labels"],Ke);const _e=c(t,["cachedContent"]);o!==void 0&&_e!=null&&d(o,["cachedContent"],yo(n,_e));const $e=c(t,["responseModalities"]);$e!=null&&d(a,["responseModalities"],$e);const De=c(t,["mediaResolution"]);De!=null&&d(a,["mediaResolution"],De);const ot=c(t,["speechConfig"]);ot!=null&&d(a,["speechConfig"],wd(ot));const pt=c(t,["audioTimestamp"]);pt!=null&&d(a,["audioTimestamp"],pt);const xt=c(t,["thinkingConfig"]);xt!=null&&d(a,["thinkingConfig"],xt);const Et=c(t,["imageConfig"]);if(Et!=null&&d(a,["imageConfig"],wE(Et)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return a}function Hm(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ci(r);Array.isArray(h)&&(h=h.map(y=>Dr(y))),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&d(o,["generationConfig"],Kw(n,u,o)),o}function Gm(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ci(r);Array.isArray(h)&&(h=h.map(y=>y)),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&d(o,["generationConfig"],Xw(n,u,o)),o}function Fm(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(m=>vw(m))),d(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&d(t,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&d(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&d(t,["usageMetadata"],y),t}function Bm(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(x=>x)),d(t,["candidates"],m)}const r=c(n,["createTime"]);r!=null&&d(t,["createTime"],r);const u=c(n,["modelVersion"]);u!=null&&d(t,["modelVersion"],u);const h=c(n,["promptFeedback"]);h!=null&&d(t,["promptFeedback"],h);const y=c(n,["responseId"]);y!=null&&d(t,["responseId"],y);const v=c(n,["usageMetadata"]);return v!=null&&d(t,["usageMetadata"],v),t}function Qw(n,t){const o={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(n,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const r=c(n,["aspectRatio"]);t!==void 0&&r!=null&&d(t,["parameters","aspectRatio"],r);const u=c(n,["guidanceScale"]);if(t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=c(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&d(t,["parameters","safetySetting"],h);const y=c(n,["personGeneration"]);t!==void 0&&y!=null&&d(t,["parameters","personGeneration"],y);const v=c(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&d(t,["parameters","includeSafetyAttributes"],v);const m=c(n,["includeRaiReason"]);t!==void 0&&m!=null&&d(t,["parameters","includeRaiReason"],m);const x=c(n,["language"]);t!==void 0&&x!=null&&d(t,["parameters","language"],x);const b=c(n,["outputMimeType"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","mimeType"],b);const T=c(n,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&d(t,["parameters","outputOptions","compressionQuality"],T),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(n,["imageSize"]);if(t!==void 0&&A!=null&&d(t,["parameters","sampleImageSize"],A),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Zw(n,t){const o={},a=c(n,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const u=c(n,["numberOfImages"]);t!==void 0&&u!=null&&d(t,["parameters","sampleCount"],u);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&d(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&d(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&d(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const b=c(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&d(t,["parameters","includeSafetyAttributes"],b);const T=c(n,["includeRaiReason"]);t!==void 0&&T!=null&&d(t,["parameters","includeRaiReason"],T);const A=c(n,["language"]);t!==void 0&&A!=null&&d(t,["parameters","language"],A);const N=c(n,["outputMimeType"]);t!==void 0&&N!=null&&d(t,["parameters","outputOptions","mimeType"],N);const O=c(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&d(t,["parameters","outputOptions","compressionQuality"],O);const H=c(n,["addWatermark"]);t!==void 0&&H!=null&&d(t,["parameters","addWatermark"],H);const j=c(n,["labels"]);t!==void 0&&j!=null&&d(t,["labels"],j);const re=c(n,["imageSize"]);t!==void 0&&re!=null&&d(t,["parameters","sampleImageSize"],re);const ce=c(n,["enhancePrompt"]);return t!==void 0&&ce!=null&&d(t,["parameters","enhancePrompt"],ce),o}function Ww(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&Qw(u,o),o}function eE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&Zw(u,o),o}function tE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>pE(h))),d(t,["generatedImages"],u)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],Dg(r)),t}function nE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>Lr(h))),d(t,["generatedImages"],u)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],Lg(r)),t}function iE(n,t){const o={},a=c(n,["numberOfVideos"]);if(t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(n,["durationSeconds"]);if(t!==void 0&&r!=null&&d(t,["parameters","durationSeconds"],r),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(n,["aspectRatio"]);t!==void 0&&u!=null&&d(t,["parameters","aspectRatio"],u);const h=c(n,["resolution"]);t!==void 0&&h!=null&&d(t,["parameters","resolution"],h);const y=c(n,["personGeneration"]);if(t!==void 0&&y!=null&&d(t,["parameters","personGeneration"],y),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(n,["negativePrompt"]);t!==void 0&&v!=null&&d(t,["parameters","negativePrompt"],v);const m=c(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&d(t,["parameters","enhancePrompt"],m),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=c(n,["lastFrame"]);t!==void 0&&x!=null&&d(t,["instances[0]","lastFrame"],Ur(x));const b=c(n,["referenceImages"]);if(t!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(A=>lC(A))),d(t,["instances[0]","referenceImages"],T)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function oE(n,t){const o={},a=c(n,["numberOfVideos"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const r=c(n,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const u=c(n,["fps"]);t!==void 0&&u!=null&&d(t,["parameters","fps"],u);const h=c(n,["durationSeconds"]);t!==void 0&&h!=null&&d(t,["parameters","durationSeconds"],h);const y=c(n,["seed"]);t!==void 0&&y!=null&&d(t,["parameters","seed"],y);const v=c(n,["aspectRatio"]);t!==void 0&&v!=null&&d(t,["parameters","aspectRatio"],v);const m=c(n,["resolution"]);t!==void 0&&m!=null&&d(t,["parameters","resolution"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const b=c(n,["pubsubTopic"]);t!==void 0&&b!=null&&d(t,["parameters","pubsubTopic"],b);const T=c(n,["negativePrompt"]);t!==void 0&&T!=null&&d(t,["parameters","negativePrompt"],T);const A=c(n,["enhancePrompt"]);t!==void 0&&A!=null&&d(t,["parameters","enhancePrompt"],A);const N=c(n,["generateAudio"]);t!==void 0&&N!=null&&d(t,["parameters","generateAudio"],N);const O=c(n,["lastFrame"]);t!==void 0&&O!=null&&d(t,["instances[0]","lastFrame"],Di(O));const H=c(n,["referenceImages"]);if(t!==void 0&&H!=null){let ce=H;Array.isArray(ce)&&(ce=ce.map(ye=>aC(ye))),d(t,["instances[0]","referenceImages"],ce)}const j=c(n,["mask"]);t!==void 0&&j!=null&&d(t,["instances[0]","mask"],oC(j));const re=c(n,["compressionQuality"]);return t!==void 0&&re!=null&&d(t,["parameters","compressionQuality"],re),o}function lE(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],cE(h)),t}function aE(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],uE(h)),t}function sE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&d(o,["instances[0]","image"],Ur(u));const h=c(t,["video"]);h!=null&&d(o,["instances[0]","video"],Pg(h));const y=c(t,["source"]);y!=null&&dE(y,o);const v=c(t,["config"]);return v!=null&&iE(v,o),o}function rE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&d(o,["instances[0]","image"],Di(u));const h=c(t,["video"]);h!=null&&d(o,["instances[0]","video"],Hg(h));const y=c(t,["source"]);y!=null&&fE(y,o);const v=c(t,["config"]);return v!=null&&oE(v,o),o}function cE(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>mE(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function uE(n){const t={},o=c(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>gE(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function dE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Ur(r));const u=c(n,["video"]);return t!==void 0&&u!=null&&d(t,["instances[0]","video"],Pg(u)),o}function fE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Di(r));const u=c(n,["video"]);return t!==void 0&&u!=null&&d(t,["instances[0]","video"],Hg(u)),o}function pE(n){const t={},o=c(n,["_self"]);o!=null&&d(t,["image"],EE(o));const a=c(n,["raiFilteredReason"]);a!=null&&d(t,["raiFilteredReason"],a);const r=c(n,["_self"]);return r!=null&&d(t,["safetyAttributes"],Dg(r)),t}function Lr(n){const t={},o=c(n,["_self"]);o!=null&&d(t,["image"],zg(o));const a=c(n,["raiFilteredReason"]);a!=null&&d(t,["raiFilteredReason"],a);const r=c(n,["_self"]);r!=null&&d(t,["safetyAttributes"],Lg(r));const u=c(n,["prompt"]);return u!=null&&d(t,["enhancedPrompt"],u),t}function hE(n){const t={},o=c(n,["_self"]);o!=null&&d(t,["mask"],zg(o));const a=c(n,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),d(t,["labels"],r)}return t}function mE(n){const t={},o=c(n,["video"]);return o!=null&&d(t,["video"],nC(o)),t}function gE(n){const t={},o=c(n,["_self"]);return o!=null&&d(t,["video"],iC(o)),t}function yE(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&d(t,["modelConfig"],o);const a=c(n,["responseJsonSchema"]);a!=null&&d(t,["responseJsonSchema"],a);const r=c(n,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&d(t,["candidateCount"],u);const h=c(n,["enableAffectiveDialog"]);h!=null&&d(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&d(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&d(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&d(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&d(t,["mediaResolution"],x);const b=c(n,["presencePenalty"]);b!=null&&d(t,["presencePenalty"],b);const T=c(n,["responseLogprobs"]);T!=null&&d(t,["responseLogprobs"],T);const A=c(n,["responseMimeType"]);A!=null&&d(t,["responseMimeType"],A);const N=c(n,["responseModalities"]);N!=null&&d(t,["responseModalities"],N);const O=c(n,["responseSchema"]);O!=null&&d(t,["responseSchema"],O);const H=c(n,["routingConfig"]);H!=null&&d(t,["routingConfig"],H);const j=c(n,["seed"]);j!=null&&d(t,["seed"],j);const re=c(n,["speechConfig"]);re!=null&&d(t,["speechConfig"],re);const ce=c(n,["stopSequences"]);ce!=null&&d(t,["stopSequences"],ce);const ye=c(n,["temperature"]);ye!=null&&d(t,["temperature"],ye);const ze=c(n,["thinkingConfig"]);ze!=null&&d(t,["thinkingConfig"],ze);const Le=c(n,["topK"]);Le!=null&&d(t,["topK"],Le);const ve=c(n,["topP"]);if(ve!=null&&d(t,["topP"],ve),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function vE(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function xE(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function bE(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function SE(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function TE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&d(t,["aspectRatio"],o);const a=c(n,["imageSize"]);if(a!=null&&d(t,["imageSize"],a),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function wE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&d(t,["aspectRatio"],o);const a=c(n,["imageSize"]);a!=null&&d(t,["imageSize"],a);const r=c(n,["outputMimeType"]);r!=null&&d(t,["imageOutputOptions","mimeType"],r);const u=c(n,["outputCompressionQuality"]);return u!=null&&d(t,["imageOutputOptions","compressionQuality"],u),t}function EE(n){const t={},o=c(n,["bytesBase64Encoded"]);o!=null&&d(t,["imageBytes"],Jo(o));const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function zg(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["gcsUri"],o);const a=c(n,["bytesBase64Encoded"]);a!=null&&d(t,["imageBytes"],Jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Ur(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(n,["imageBytes"]);o!=null&&d(t,["bytesBase64Encoded"],Jo(o));const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function Di(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["gcsUri"],o);const a=c(n,["imageBytes"]);a!=null&&d(t,["bytesBase64Encoded"],Jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function CE(n,t,o){const a={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&d(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&d(o,["_query","pageToken"],u);const h=c(t,["filter"]);o!==void 0&&h!=null&&d(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&d(o,["_url","models_url"],_g(n,y)),a}function _E(n,t,o){const a={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&d(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&d(o,["_query","pageToken"],u);const h=c(t,["filter"]);o!==void 0&&h!=null&&d(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&d(o,["_url","models_url"],_g(n,y)),a}function AE(n,t){const o={},a=c(t,["config"]);return a!=null&&CE(n,a,o),o}function NE(n,t){const o={},a=c(t,["config"]);return a!=null&&_E(n,a,o),o}function ME(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["_self"]);if(r!=null){let u=Ag(r);Array.isArray(u)&&(u=u.map(h=>od(h))),d(t,["models"],u)}return t}function RE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["_self"]);if(r!=null){let u=Ag(r);Array.isArray(u)&&(u=u.map(h=>ld(h))),d(t,["models"],u)}return t}function kE(n){const t={},o=c(n,["maskMode"]);o!=null&&d(t,["maskMode"],o);const a=c(n,["segmentationClasses"]);a!=null&&d(t,["maskClasses"],a);const r=c(n,["maskDilation"]);return r!=null&&d(t,["dilation"],r),t}function od(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);r!=null&&d(t,["description"],r);const u=c(n,["version"]);u!=null&&d(t,["version"],u);const h=c(n,["_self"]);h!=null&&d(t,["tunedModelInfo"],YE(h));const y=c(n,["inputTokenLimit"]);y!=null&&d(t,["inputTokenLimit"],y);const v=c(n,["outputTokenLimit"]);v!=null&&d(t,["outputTokenLimit"],v);const m=c(n,["supportedGenerationMethods"]);m!=null&&d(t,["supportedActions"],m);const x=c(n,["temperature"]);x!=null&&d(t,["temperature"],x);const b=c(n,["maxTemperature"]);b!=null&&d(t,["maxTemperature"],b);const T=c(n,["topP"]);T!=null&&d(t,["topP"],T);const A=c(n,["topK"]);A!=null&&d(t,["topK"],A);const N=c(n,["thinking"]);return N!=null&&d(t,["thinking"],N),t}function ld(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);r!=null&&d(t,["description"],r);const u=c(n,["versionId"]);u!=null&&d(t,["version"],u);const h=c(n,["deployedModels"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(T=>qw(T))),d(t,["endpoints"],b)}const y=c(n,["labels"]);y!=null&&d(t,["labels"],y);const v=c(n,["_self"]);v!=null&&d(t,["tunedModelInfo"],JE(v));const m=c(n,["defaultCheckpointId"]);m!=null&&d(t,["defaultCheckpointId"],m);const x=c(n,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(T=>T)),d(t,["checkpoints"],b)}return t}function IE(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],jw(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],$w(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],yw(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function zE(n){const t={},o=c(n,["productImage"]);return o!=null&&d(t,["image"],Di(o)),t}function DE(n,t){const o={},a=c(n,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const r=c(n,["baseSteps"]);t!==void 0&&r!=null&&d(t,["parameters","baseSteps"],r);const u=c(n,["outputGcsUri"]);t!==void 0&&u!=null&&d(t,["parameters","storageUri"],u);const h=c(n,["seed"]);t!==void 0&&h!=null&&d(t,["parameters","seed"],h);const y=c(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&d(t,["parameters","safetySetting"],y);const v=c(n,["personGeneration"]);t!==void 0&&v!=null&&d(t,["parameters","personGeneration"],v);const m=c(n,["addWatermark"]);t!==void 0&&m!=null&&d(t,["parameters","addWatermark"],m);const x=c(n,["outputMimeType"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","mimeType"],x);const b=c(n,["outputCompressionQuality"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","compressionQuality"],b);const T=c(n,["enhancePrompt"]);t!==void 0&&T!=null&&d(t,["parameters","enhancePrompt"],T);const A=c(n,["labels"]);return t!==void 0&&A!=null&&d(t,["labels"],A),o}function LE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["source"]);r!=null&&PE(r,o);const u=c(t,["config"]);return u!=null&&DE(u,o),o}function UE(n){const t={},o=c(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>Lr(r))),d(t,["generatedImages"],a)}return t}function PE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["personImage"]);t!==void 0&&r!=null&&d(t,["instances[0]","personImage","image"],Di(r));const u=c(n,["productImages"]);if(t!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>zE(y))),d(t,["instances[0]","productImages"],h)}return o}function HE(n){const t={},o=c(n,["referenceImage"]);o!=null&&d(t,["referenceImage"],Di(o));const a=c(n,["referenceId"]);a!=null&&d(t,["referenceId"],a);const r=c(n,["referenceType"]);r!=null&&d(t,["referenceType"],r);const u=c(n,["maskImageConfig"]);u!=null&&d(t,["maskImageConfig"],kE(u));const h=c(n,["controlImageConfig"]);h!=null&&d(t,["controlImageConfig"],Ew(h));const y=c(n,["styleImageConfig"]);y!=null&&d(t,["styleImageConfig"],y);const v=c(n,["subjectImageConfig"]);return v!=null&&d(t,["subjectImageConfig"],v),t}function Dg(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&d(t,["categories"],o);const a=c(n,["safetyAttributes","scores"]);a!=null&&d(t,["scores"],a);const r=c(n,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function Lg(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&d(t,["categories"],o);const a=c(n,["safetyAttributes","scores"]);a!=null&&d(t,["scores"],a);const r=c(n,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function GE(n){const t={},o=c(n,["category"]);if(o!=null&&d(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(n,["threshold"]);return a!=null&&d(t,["threshold"],a),t}function FE(n){const t={},o=c(n,["image"]);return o!=null&&d(t,["image"],Di(o)),t}function BE(n,t){const o={},a=c(n,["mode"]);t!==void 0&&a!=null&&d(t,["parameters","mode"],a);const r=c(n,["maxPredictions"]);t!==void 0&&r!=null&&d(t,["parameters","maxPredictions"],r);const u=c(n,["confidenceThreshold"]);t!==void 0&&u!=null&&d(t,["parameters","confidenceThreshold"],u);const h=c(n,["maskDilation"]);t!==void 0&&h!=null&&d(t,["parameters","maskDilation"],h);const y=c(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&d(t,["parameters","binaryColorThreshold"],y);const v=c(n,["labels"]);return t!==void 0&&v!=null&&d(t,["labels"],v),o}function VE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["source"]);r!=null&&qE(r,o);const u=c(t,["config"]);return u!=null&&BE(u,o),o}function OE(n){const t={},o=c(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>hE(r))),d(t,["generatedMasks"],a)}return t}function qE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],Di(r));const u=c(n,["scribbleImage"]);return t!==void 0&&u!=null&&d(t,["instances[0]","scribble"],FE(u)),o}function jE(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&d(t,["functionCallingConfig"],Yw(o));const a=c(n,["retrievalConfig"]);return a!=null&&d(t,["retrievalConfig"],a),t}function $E(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],bE(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],SE(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function Ug(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>Jw(T))),d(t,["functionDeclarations"],b)}const a=c(n,["retrieval"]);a!=null&&d(t,["retrieval"],a);const r=c(n,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&d(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&d(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&d(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&d(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function YE(n){const t={},o=c(n,["baseModel"]);o!=null&&d(t,["baseModel"],o);const a=c(n,["createTime"]);a!=null&&d(t,["createTime"],a);const r=c(n,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function JE(n){const t={},o=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(t,["baseModel"],o);const a=c(n,["createTime"]);a!=null&&d(t,["createTime"],a);const r=c(n,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function KE(n,t){const o={},a=c(n,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const u=c(n,["defaultCheckpointId"]);return t!==void 0&&u!=null&&d(t,["defaultCheckpointId"],u),o}function XE(n,t){const o={},a=c(n,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const u=c(n,["defaultCheckpointId"]);return t!==void 0&&u!=null&&d(t,["defaultCheckpointId"],u),o}function QE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","name"],Ot(n,a));const r=c(t,["config"]);return r!=null&&KE(r,o),o}function ZE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&XE(r,o),o}function WE(n,t){const o={},a=c(n,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const r=c(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&d(t,["parameters","safetySetting"],r);const u=c(n,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const h=c(n,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const y=c(n,["outputMimeType"]);t!==void 0&&y!=null&&d(t,["parameters","outputOptions","mimeType"],y);const v=c(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&d(t,["parameters","outputOptions","compressionQuality"],v);const m=c(n,["enhanceInputImage"]);t!==void 0&&m!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=c(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const b=c(n,["labels"]);t!==void 0&&b!=null&&d(t,["labels"],b);const T=c(n,["numberOfImages"]);t!==void 0&&T!=null&&d(t,["parameters","sampleCount"],T);const A=c(n,["mode"]);return t!==void 0&&A!=null&&d(t,["parameters","mode"],A),o}function eC(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["image"]);r!=null&&d(o,["instances[0]","image"],Di(r));const u=c(t,["upscaleFactor"]);u!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],u);const h=c(t,["config"]);return h!=null&&WE(h,o),o}function tC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Lr(u))),d(t,["generatedImages"],r)}return t}function nC(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["uri"],o);const a=c(n,["encodedVideo"]);a!=null&&d(t,["videoBytes"],Jo(a));const r=c(n,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function iC(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["uri"],o);const a=c(n,["bytesBase64Encoded"]);a!=null&&d(t,["videoBytes"],Jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function oC(n){const t={},o=c(n,["image"]);o!=null&&d(t,["_self"],Di(o));const a=c(n,["maskMode"]);return a!=null&&d(t,["maskMode"],a),t}function lC(n){const t={},o=c(n,["image"]);o!=null&&d(t,["image"],Ur(o));const a=c(n,["referenceType"]);return a!=null&&d(t,["referenceType"],a),t}function aC(n){const t={},o=c(n,["image"]);o!=null&&d(t,["image"],Di(o));const a=c(n,["referenceType"]);return a!=null&&d(t,["referenceType"],a),t}function Pg(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["uri"],o);const a=c(n,["videoBytes"]);a!=null&&d(t,["encodedVideo"],Jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["encoding"],r),t}function Hg(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["gcsUri"],o);const a=c(n,["videoBytes"]);a!=null&&d(t,["bytesBase64Encoded"],Jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function sC(n,t){const o={},a=c(n,["displayName"]);return t!==void 0&&a!=null&&d(t,["displayName"],a),o}function rC(n){const t={},o=c(n,["config"]);return o!=null&&sC(o,t),t}function cC(n,t){const o={},a=c(n,["force"]);return t!==void 0&&a!=null&&d(t,["_query","force"],a),o}function uC(n){const t={},o=c(n,["name"]);o!=null&&d(t,["_url","name"],o);const a=c(n,["config"]);return a!=null&&cC(a,t),t}function dC(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function fC(n,t){const o={},a=c(n,["customMetadata"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["customMetadata"],u)}const r=c(n,["chunkingConfig"]);return t!==void 0&&r!=null&&d(t,["chunkingConfig"],r),o}function pC(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],mC(h)),t}function hC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&d(t,["_url","file_search_store_name"],o);const a=c(n,["fileName"]);a!=null&&d(t,["fileName"],a);const r=c(n,["config"]);return r!=null&&fC(r,t),t}function mC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["parent"]);a!=null&&d(t,["parent"],a);const r=c(n,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function gC(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function yC(n){const t={},o=c(n,["config"]);return o!=null&&gC(o,t),t}function vC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["fileSearchStores"],u)}return t}function Gg(n,t){const o={},a=c(n,["mimeType"]);t!==void 0&&a!=null&&d(t,["mimeType"],a);const r=c(n,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const u=c(n,["customMetadata"]);if(t!==void 0&&u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>v)),d(t,["customMetadata"],y)}const h=c(n,["chunkingConfig"]);return t!==void 0&&h!=null&&d(t,["chunkingConfig"],h),o}function xC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&d(t,["_url","file_search_store_name"],o);const a=c(n,["config"]);return a!=null&&Gg(a,t),t}function bC(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}const SC="Content-Type",TC="X-Server-Timeout",wC="User-Agent",ad="x-goog-api-client",EC="1.34.0",CC=`google-genai-sdk/${EC}`,_C="v1beta1",AC="v1beta";class NC{constructor(t){var o,a;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_C,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:AC,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&a.push(t.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,a){const r=[this.getRequestUrlInternal(o)];return a&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,a);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,o){const a=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(o))typeof u=="object"?a[r]=Object.assign(Object.assign({},a[r]),u):u!==void 0&&(a[r]=u);return a}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,a,r){if(o&&o.timeout||r){const u=new AbortController,h=u.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>u.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),t.signal=h}return o&&o.extraBody!==null&&MC(t,o.extraBody),t.headers=await this.getHeadersInternal(o,a),t}async unaryApiCall(t,o,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:a})).then(async r=>(await Vm(r),new td(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:a})).then(async r=>(await Vm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Ii(this,arguments,function*(){var a;const r=(a=t?.body)===null||a===void 0?void 0:a.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield St(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=u.decode(x,{stream:!0});try{const N=JSON.parse(b);if("error"in N){const O=JSON.parse(JSON.stringify(N.error)),H=O.status,j=O.code,re=`got status: ${H}. ${JSON.stringify(N)}`;if(j>=400&&j<600)throw new zr({message:re,status:j})}}catch(N){if(N.name==="ApiError")throw N}h+=b;let T=-1,A=0;for(;;){T=-1,A=0;for(const H of v){const j=h.indexOf(H);j!==-1&&(T===-1||j<T)&&(T=j,A=H.length)}if(T===-1)break;const N=h.substring(0,T);h=h.substring(T+A);const O=N.trim();if(O.startsWith(y)){const H=O.substring(y.length).trim();try{const j=new Response(H,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield St(new td(j))}catch(j){throw new Error(`exception parsing stream chunk ${H}. ${j}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const t={},o=CC+" "+this.clientOptions.userAgentExtra;return t[wC]=o,t[ad]=o,t[SC]="application/json",t}async getHeadersInternal(t,o){const a=new Headers;if(t&&t.headers){for(const[r,u]of Object.entries(t.headers))a.append(r,u);t.timeout&&t.timeout>0&&a.append(TC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,o),a}getFileName(t){var o;let a="";return typeof t=="string"&&(a=t.replace(/[/\\]+$/,""),a=(o=a.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),a}async uploadFile(t,o){var a;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,h=await u.stat(t);r.sizeBytes=String(h.size);const y=(a=o?.mimeType)!==null&&a!==void 0?a:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=qe("upload/v1beta/files",v._url),b=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return u.upload(t,b,this)}async uploadFileToFileSearchStore(t,o,a){var r;const u=this.clientOptions.uploader,h=await u.stat(o),y=String(h.size),v=(r=a?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),b={};a!=null&&Gg(a,b);const T=await this.fetchUploadUrl(m,y,v,x,b,a?.httpOptions);return u.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,a,r,u,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${a}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(u),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Vm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let a;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(a);throw o>=400&&o<600?new zr({message:r,status:o}):new Error(r)}}function MC(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(u,h){const y=Object.assign({},u);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=a(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=a(o,t);n.body=JSON.stringify(r)}const RC="mcp_used/unknown";let kC=!1;function Fg(n){for(const t of n)if(IC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return kC}function Bg(n){var t;const o=(t=n[ad])!==null&&t!==void 0?t:"";n[ad]=(o+` ${RC}`).trimStart()}function IC(n){return n!==null&&typeof n=="object"&&n instanceof Cd}function zC(n){return Ii(this,arguments,function*(o,a=100){let r,u=0;for(;u<a;){const h=yield St(o.listTools({cursor:r}));for(const y of h.tools)yield yield St(y),u++;if(!h.nextCursor)break;r=h.nextCursor}})}class Cd{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new Cd(t,o)}async initialize(){var t,o,a,r;if(this.mcpTools.length>0)return;const u={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,zi(zC(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const b=r;h.push(b);const T=b.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=x}}catch(b){o={error:b}}finally{try{!y&&!t&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),dS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const a of t)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const h=await r.callTool({name:a.name,arguments:a.args},void 0,u);o.push({functionResponse:{name:a.name,response:h.isError?{error:h}:h}})}return o}}async function DC(n,t,o){const a=new iS;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(a,r),t(a)}class LC{constructor(t,o,a){this.apiClient=t,this.auth=o,this.webSocketFactory=a}async connect(t){var o,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),h=HC(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(ce=>{m=ce}),b=t.callbacks,T=function(){m({})},A=this.apiClient,N={onopen:T,onmessage:ce=>{DC(A,b.onmessage,ce)},onerror:(o=b?.onerror)!==null&&o!==void 0?o:function(ce){},onclose:(a=b?.onclose)!==null&&a!==void 0?a:function(ce){}},O=this.webSocketFactory.create(v,PC(h),N);O.connect(),await x;const re={setup:{model:Ot(this.apiClient,t.model)}};return O.send(JSON.stringify(re)),new UC(O,this.apiClient)}}class UC{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=rw(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=sw(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Jl.PLAY)}pause(){this.sendPlaybackControl(Jl.PAUSE)}stop(){this.sendPlaybackControl(Jl.STOP)}resetContext(){this.sendPlaybackControl(Jl.RESET_CONTEXT)}close(){this.conn.close()}}function PC(n){const t={};return n.forEach((o,a)=>{t[a]=o}),t}function HC(n){const t=new Headers;for(const[o,a]of Object.entries(n))t.append(o,a);return t}const GC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FC(n,t,o){const a=new nS;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const u=JSON.parse(r);if(n.isVertexAI()){const h=dw(u);Object.assign(a,h)}else Object.assign(a,u);t(a)}class BC{constructor(t,o,a){this.apiClient=t,this.auth=o,this.webSocketFactory=a,this.music=new LC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,a,r,u,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&Fg(t.config.tools)&&Bg(b);const T=jC(b);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const _e=this.apiClient.getApiKey();let $e="BidiGenerateContent",De="key";_e?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$e="BidiGenerateContentConstrained",De="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${$e}?${De}=${_e}`}let A=()=>{};const N=new Promise(_e=>{A=_e}),O=t.callbacks,H=function(){var _e;(_e=O?.onopen)===null||_e===void 0||_e.call(O),A({})},j=this.apiClient,re={onopen:H,onmessage:_e=>{FC(j,O.onmessage,_e)},onerror:(o=O?.onerror)!==null&&o!==void 0?o:function(_e){},onclose:(a=O?.onclose)!==null&&a!==void 0?a:function(_e){}},ce=this.webSocketFactory.create(x,qC(T),re);ce.connect(),await N;let ye=Ot(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&ye.startsWith("publishers/")){const _e=this.apiClient.getProject(),$e=this.apiClient.getLocation();ye=`projects/${_e}/locations/${$e}/`+ye}let ze={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Cr.AUDIO]}:t.config.responseModalities=[Cr.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Le=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],ve=[];for(const _e of Le)if(this.isCallableTool(_e)){const $e=_e;ve.push(await $e.tool())}else ve.push(_e);ve.length>0&&(t.config.tools=ve);const Ke={model:ye,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ze=aw(this.apiClient,Ke):ze=lw(this.apiClient,Ke),delete ze.config,ce.send(JSON.stringify(ze)),new OC(ce,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const VC={turnComplete:!0};class OC{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let a=[];try{a=Ci(o.turns),t.isVertexAI()||(a=a.map(r=>Dr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:a,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let a=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?a=o.functionResponses:a=[o.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const u of a){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(GC)}return{toolResponse:{functionResponses:a}}}sendClientContent(t){t=Object.assign(Object.assign({},VC),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:uw(t)}:o={realtimeInput:cw(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function qC(n){const t={};return n.forEach((o,a)=>{t[a]=o}),t}function jC(n){const t=new Headers;for(const[o,a]of Object.entries(n))t.append(o,a);return t}const Om=10;function qm(n){var t,o,a;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if(Wl(h)){r=!0;break}if(!r)return!0;const u=(a=n?.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Wl(n){return"callTool"in n&&typeof n.callTool=="function"}function $C(n){var t,o,a;return(a=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>Wl(r)))!==null&&a!==void 0?a:!1}function jm(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((a,r)=>{if(Wl(a))return;const u=a;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(r)}),o}function $m(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class YC extends go{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var a,r,u,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!$C(o)||qm(o.config))return await this.generateContentInternal(v);const m=jm(o);if(m.length>0){const O=m.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let x,b;const T=Ci(v.contents),A=(u=(r=(a=v.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:Om;let N=0;for(;N<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const O=x.candidates[0].content,H=[];for(const j of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if(Wl(j)){const ce=await j.callTool(x.functionCalls);H.push(...ce)}N++,b={role:"user",parts:H},v.contents=Ci(v.contents),v.contents.push(O),v.contents.push(b),$m(v.config)&&(T.push(O),T.push(b))}return $m(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var a,r,u,h,y;if(this.maybeMoveToResponseJsonSchem(o),qm(o.config)){const b=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(b)}const v=jm(o);if(v.length>0){const b=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(r=(a=o?.config)===null||a===void 0?void 0:a.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(a=>{var r;let u;const h=[];if(a?.generatedImages)for(const v of a.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=v?.safetyAttributes:h.push(v);let y;return u?y={generatedImages:h,positivePromptSafetyAttributes:u,sdkHttpResponse:a.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:a.sdkHttpResponse},y}),this.list=async o=>{var a;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((a=h.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new fl(mo.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const a={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(a.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async o=>{let a={numberOfImages:1,mode:"upscale"};o.config&&(a=Object.assign(Object.assign({},a),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var a,r,u,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=o.video)===null||a===void 0)&&a.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(u=o.source)===null||u===void 0?void 0:u.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,a,r;const u=(o=t.config)===null||o===void 0?void 0:o.tools;if(!u)return t;const h=await Promise.all(u.map(async v=>Wl(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&Fg(t.config.tools)){const v=(r=(a=t.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Bg(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,a,r;const u=new Map;for(const h of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Wl(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,y)}}return u}async processAfcStream(t){var o,a,r;const u=(r=(a=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Om;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,b){return Ii(this,arguments,function*(){for(var T,A,N,O,H,j;y<u;){h&&(y++,h=!1);const ze=yield St(m.processParamsMaybeAddMcpUsage(b)),Le=yield St(m.generateContentStreamInternal(ze)),ve=[],Ke=[];try{for(var re=!0,ce=(A=void 0,zi(Le)),ye;ye=yield St(ce.next()),T=ye.done,!T;re=!0){O=ye.value,re=!1;const _e=O;if(yield yield St(_e),_e.candidates&&(!((H=_e.candidates[0])===null||H===void 0)&&H.content)){Ke.push(_e.candidates[0].content);for(const $e of(j=_e.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(y<u&&$e.functionCall){if(!$e.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has($e.functionCall.name)){const De=yield St(x.get($e.functionCall.name).callTool([$e.functionCall]));ve.push(...De)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${$e.functionCall.name}`)}}}}catch(_e){A={error:_e}}finally{try{!re&&!T&&(N=ce.return)&&(yield St(N.call(ce)))}finally{if(A)throw A.error}}if(ve.length>0){h=!0;const _e=new ja;_e.candidates=[{content:{role:"user",parts:ve}}],yield yield St(_e);const $e=[];$e.push(...Ke),$e.push({role:"user",parts:ve});const De=Ci(b.contents).concat($e);b.contents=De}else break}})})(this,v,t)}async generateContentInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Gm(this.apiClient,t);return y=qe("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Bm(x),T=new ja;return Object.assign(T,b),T})}else{const m=Hm(this.apiClient,t);return y=qe("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Fm(x),T=new ja;return Object.assign(T,b),T})}}async generateContentStreamInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Gm(this.apiClient,t);return y=qe("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),h.then(function(b){return Ii(this,arguments,function*(){var T,A,N,O;try{for(var H=!0,j=zi(b),re;re=yield St(j.next()),T=re.done,!T;H=!0){O=re.value,H=!1;const ce=O,ye=Bm(yield St(ce.json()));ye.sdkHttpResponse={headers:ce.headers};const ze=new ja;Object.assign(ze,ye),yield yield St(ze)}}catch(ce){A={error:ce}}finally{try{!H&&!T&&(N=j.return)&&(yield St(N.call(j)))}finally{if(A)throw A.error}}})})}else{const m=Hm(this.apiClient,t);return y=qe("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),h.then(function(b){return Ii(this,arguments,function*(){var T,A,N,O;try{for(var H=!0,j=zi(b),re;re=yield St(j.next()),T=re.done,!T;H=!0){O=re.value,H=!1;const ce=O,ye=Fm(yield St(ce.json()));ye.sdkHttpResponse={headers:ce.headers};const ze=new ja;Object.assign(ze,ye),yield yield St(ze)}}catch(ce){A={error:ce}}finally{try{!H&&!T&&(N=j.return)&&(yield St(N.call(j)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Bw(this.apiClient,t);return y=qe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Ow(x),T=new Sm;return Object.assign(T,b),T})}else{const m=Fw(this.apiClient,t);return y=qe("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Vw(x),T=new Sm;return Object.assign(T,b),T})}}async generateImagesInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eE(this.apiClient,t);return y=qe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=nE(x),T=new Tm;return Object.assign(T,b),T})}else{const m=Ww(this.apiClient,t);return y=qe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=tE(x),T=new Tm;return Object.assign(T,b),T})}}async editImageInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=Uw(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=Pw(v),x=new j1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=eC(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=tC(v),x=new $1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=LE(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=UE(v),x=new Y1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=VE(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=OE(v),x=new J1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xE(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>ld(x))}else{const m=vE(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>od(x))}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=NE(this.apiClient,t);return y=qe("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=RE(x),T=new wm;return Object.assign(T,b),T})}else{const m=AE(this.apiClient,t);return y=qe("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=ME(x),T=new wm;return Object.assign(T,b),T})}}async update(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ZE(this.apiClient,t);return y=qe("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>ld(x))}else{const m=QE(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>od(x))}}async delete(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Iw(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Dw(x),T=new Em;return Object.assign(T,b),T})}else{const m=kw(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=zw(x),T=new Em;return Object.assign(T,b),T})}}async countTokens(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Nw(this.apiClient,t);return y=qe("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Rw(x),T=new Cm;return Object.assign(T,b),T})}else{const m=Aw(this.apiClient,t);return y=qe("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Mw(x),T=new Cm;return Object.assign(T,b),T})}}async computeTokens(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=bw(this.apiClient,t);return u=qe("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=Sw(v),x=new K1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=rE(this.apiClient,t);return y=qe("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>{const b=aE(x),T=new _r;return Object.assign(T,b),T})}else{const m=sE(this.apiClient,t);return y=qe("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>{const b=lE(x),T=new _r;return Object.assign(T,b),T})}}}class JC extends go{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,a=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,a=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=G1(t);return y=qe("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h}else{const m=H1(t);return y=qe("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=k1(t);return u=qe("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function KC(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function XC(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>l_(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function QC(n,t,o){const a={},r=c(t,["expireTime"]);o!==void 0&&r!=null&&d(o,["expireTime"],r);const u=c(t,["newSessionExpireTime"]);o!==void 0&&u!=null&&d(o,["newSessionExpireTime"],u);const h=c(t,["uses"]);o!==void 0&&h!=null&&d(o,["uses"],h);const y=c(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&d(o,["bidiGenerateContentSetup"],o_(n,y));const v=c(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&d(o,["fieldMask"],v),a}function ZC(n,t){const o={},a=c(t,["config"]);return a!=null&&d(o,["config"],QC(n,a,o)),o}function WC(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function e_(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function t_(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function n_(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function i_(n,t){const o={},a=c(n,["generationConfig"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig"],a);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&d(t,["setup","generationConfig","speechConfig"],Ed(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&d(t,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&d(t,["setup","systemInstruction"],XC(Bn(N)));const O=c(n,["tools"]);if(t!==void 0&&O!=null){let Le=ta(O);Array.isArray(Le)&&(Le=Le.map(ve=>s_(ea(ve)))),d(t,["setup","tools"],Le)}const H=c(n,["sessionResumption"]);t!==void 0&&H!=null&&d(t,["setup","sessionResumption"],a_(H));const j=c(n,["inputAudioTranscription"]);t!==void 0&&j!=null&&d(t,["setup","inputAudioTranscription"],j);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&d(t,["setup","outputAudioTranscription"],re);const ce=c(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&d(t,["setup","realtimeInputConfig"],ce);const ye=c(n,["contextWindowCompression"]);t!==void 0&&ye!=null&&d(t,["setup","contextWindowCompression"],ye);const ze=c(n,["proactivity"]);if(t!==void 0&&ze!=null&&d(t,["setup","proactivity"],ze),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function o_(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["setup","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&d(o,["config"],i_(r,o)),o}function l_(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],WC(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],e_(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],KC(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function a_(n){const t={},o=c(n,["handle"]);if(o!=null&&d(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function s_(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],t_(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],n_(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function r_(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const a=n[o];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(u=>`${o}.${u}`);t.push(...r)}else t.push(o)}return t.join(",")}function c_(n,t){let o=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const u=a.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,o=u):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const u=r_(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)u?n.fieldMask=u:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];u&&v.push(u),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class u_ extends go{constructor(t){super(),this.apiClient=t}async create(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=ZC(this.apiClient,t);u=qe("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=c_(y,t.config);return r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function d_(n,t){const o={},a=c(n,["force"]);return t!==void 0&&a!=null&&d(t,["_query","force"],a),o}function f_(n){const t={},o=c(n,["name"]);o!=null&&d(t,["_url","name"],o);const a=c(n,["config"]);return a!=null&&d_(a,t),t}function p_(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function h_(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function m_(n){const t={},o=c(n,["parent"]);o!=null&&d(t,["_url","parent"],o);const a=c(n,["config"]);return a!=null&&h_(a,t),t}function g_(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["documents"],u)}return t}class y_ extends go{constructor(t){super(),this.apiClient=t,this.list=async o=>new fl(mo.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:o.parent,config:a.config}),await this.listInternal(o),o)}async get(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=p_(t);return u=qe("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=f_(t);r=qe("{name}",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=m_(t);return u=qe("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=g_(v),x=new X1;return Object.assign(x,m),x})}}}class v_ extends go{constructor(t,o=new y_(t)){super(),this.apiClient=t,this.documents=o,this.list=async(a={})=>new fl(mo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(a),a)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=rC(t);return u=qe("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=dC(t);return u=qe("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uC(t);r=qe("{name}",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=yC(t);return u=qe("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=vC(v),x=new Q1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=xC(t);return u=qe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=bC(v),x=new Z1;return Object.assign(x,m),x})}}async importFile(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=hC(t);return u=qe("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=pC(v),x=new xd;return Object.assign(x,m),x})}}}let Vg=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Vg=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(+a^o()&15>>+a/4).toString(16))};const x_=()=>Vg();function sd(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const rd=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class _i extends Error{}class $n extends _i{constructor(t,o,a,r){super(`${$n.makeMessage(t,o,a)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,a){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):a;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,a,r){if(!t||!r)return new Pr({message:a,cause:rd(o)});const u=o;return t===400?new qg(t,u,a,r):t===401?new jg(t,u,a,r):t===403?new $g(t,u,a,r):t===404?new Yg(t,u,a,r):t===409?new Jg(t,u,a,r):t===422?new Kg(t,u,a,r):t===429?new Xg(t,u,a,r):t>=500?new Qg(t,u,a,r):new $n(t,u,a,r)}}class cd extends $n{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Pr extends $n{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Og extends Pr{constructor({message:t}={}){super({message:t??"Request timed out."})}}class qg extends $n{}class jg extends $n{}class $g extends $n{}class Yg extends $n{}class Jg extends $n{}class Kg extends $n{}class Xg extends $n{}class Qg extends $n{}const b_=/^[a-z][a-z0-9+.-]*:/i,S_=n=>b_.test(n);let ud=n=>(ud=Array.isArray,ud(n));const T_=ud;let w_=T_;const Ym=w_;function E_(n){if(!n)return!0;for(const t in n)return!1;return!0}function C_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const __=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new _i(`${n} must be an integer`);if(t<0)throw new _i(`${n} must be a positive integer`);return t},A_=n=>{try{return JSON.parse(n)}catch{return}};const N_=n=>new Promise(t=>setTimeout(t,n));const jl="0.0.1";function M_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const R_=()=>{var n,t,o,a,r;const u=M_();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":Km(Deno.build.os),"X-Stainless-Arch":Jm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":Km((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Jm((a=globalThis.process.arch)!==null&&a!==void 0?a:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=k_();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function k_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const a=o.exec(navigator.userAgent);if(a){const r=a[1]||0,u=a[2]||0,h=a[3]||0;return{browser:t,version:`${r}.${u}.${h}`}}}return null}const Jm=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Km=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let dr;const I_=()=>dr??(dr=R_());function z_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Zg(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function D_(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Zg({start(){},async pull(o){const{done:a,value:r}=await t.next();a?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Wg(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function L_(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const a=n.getReader(),r=a.cancel();a.releaseLock(),await r}const U_=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const ey=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ou(n,t,o){return ey(),new File(n,t??"unknown_file",o)}function P_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const H_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const ty=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",G_=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ty(n),F_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function B_(n,t,o){if(ey(),n=await n,G_(n))return n instanceof File?n:Ou([await n.arrayBuffer()],n.name);if(F_(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),Ou(await dd(r),t,o)}const a=await dd(n);if(t||(t=P_(n)),!o?.type){const r=a.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return Ou(a,t,o)}async function dd(n){var t,o,a,r,u;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(ty(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(H_(n))try{for(var y=!0,v=zi(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await dd(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}else{const x=(u=n?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${V_(n)}`)}return h}function V_(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class ny{constructor(t){this._client=t}}ny._key=[];function iy(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xm=Object.freeze(Object.create(null)),O_=(n=iy)=>(function(o,...a){if(o.length===1)return o[0];let r=!1;const u=[],h=o.reduce((x,b,T)=>{var A,N,O;/[?#]/.test(b)&&(r=!0);const H=a[T];let j=(r?encodeURIComponent:n)(""+H);return T!==a.length&&(H==null||typeof H=="object"&&H.toString===((O=Object.getPrototypeOf((N=Object.getPrototypeOf((A=H.hasOwnProperty)!==null&&A!==void 0?A:Xm))!==null&&N!==void 0?N:Xm))===null||O===void 0?void 0:O.toString))&&(j=H+"",u.push({start:x.length+b.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(H).slice(8,-1)} is not a valid path parameter`})),x+b+(T===a.length?"":j)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((x,b)=>x.start-b.start),u.length>0){let x=0;const b=u.reduce((T,A)=>{const N=" ".repeat(A.start-x),O="^".repeat(A.length);return x=A.start+A.length,T+N+O},"");throw new _i(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${h}
${b}`)}return h}),fr=O_(iy);class oy extends ny{create(t,o){var a;const{api_version:r=this._client.apiVersion}=t,u=Nr(t,["api_version"]);if("model"in u&&"agent_config"in u)throw new _i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new _i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(fr`/${r}/interactions`,Object.assign(Object.assign({body:u},o),{stream:(a=t.stream)!==null&&a!==void 0?a:!1}))}delete(t,o={},a){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(fr`/${r}/interactions/${t}`,a)}cancel(t,o={},a){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(fr`/${r}/interactions/${t}/cancel`,a)}get(t,o={},a){var r;const u=o??{},{api_version:h=this._client.apiVersion}=u,y=Nr(u,["api_version"]);return this._client.get(fr`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},a),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}oy._key=Object.freeze(["interactions"]);class ly extends oy{}function q_(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let a=0;for(const r of n)o.set(r,a),a+=r.length;return o}let pr;function _d(n){let t;return(pr??(t=new globalThis.TextEncoder,pr=t.encode.bind(t)))(n)}let hr;function Qm(n){let t;return(hr??(t=new globalThis.TextDecoder,hr=t.decode.bind(t)))(n)}class Hr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?_d(t):t;this.buffer=q_([this.buffer,o]);const a=[];let r;for(;(r=j_(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){a.push(Qm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=Qm(this.buffer.subarray(0,u));a.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return a}flush(){return this.buffer.length?this.decode(`
`):[]}}Hr.NEWLINE_CHARS=new Set([`
`,"\r"]);Hr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function j_(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function $_(n){for(let a=0;a<n.length-1;a++){if(n[a]===10&&n[a+1]===10||n[a]===13&&n[a+1]===13)return a+2;if(n[a]===13&&n[a+1]===10&&a+3<n.length&&n[a+2]===13&&n[a+3]===10)return a+4}return-1}const Mr={off:0,error:200,warn:300,info:400,debug:500},Zm=(n,t,o)=>{if(n){if(C_(Mr,n))return n;jn(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Mr))}`)}};function Za(){}function mr(n,t,o){return!t||Mr[n]>Mr[o]?Za:t[n].bind(t)}const Y_={error:Za,warn:Za,info:Za,debug:Za};let Wm=new WeakMap;function jn(n){var t;const o=n.logger,a=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return Y_;const r=Wm.get(o);if(r&&r[0]===a)return r[1];const u={error:mr("error",o,a),warn:mr("warn",o,a),info:mr("info",o,a),debug:mr("debug",o,a)};return Wm.set(o,[a,u]),u}const dl=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Kl{constructor(t,o,a){this.iterator=t,this.controller=o,this.client=a}static fromSSEResponse(t,o,a){let r=!1;const u=a?jn(a):console;function h(){return Ii(this,arguments,function*(){var v,m,x,b;if(r)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=zi(J_(t,o)),O;O=yield St(N.next()),v=O.done,!v;A=!0){b=O.value,A=!1;const H=b;if(!T)if(H.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield St(JSON.parse(H.data))}catch(j){throw u.error("Could not parse message into JSON:",H.data),u.error("From chunk:",H.raw),j}}}catch(H){m={error:H}}finally{try{!A&&!v&&(x=N.return)&&(yield St(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(H){if(sd(H))return yield St(void 0);throw H}finally{T||o.abort()}})}return new Kl(h,o,a)}static fromReadableStream(t,o,a){let r=!1;function u(){return Ii(this,arguments,function*(){var v,m,x,b;const T=new Hr,A=Wg(t);try{for(var N=!0,O=zi(A),H;H=yield St(O.next()),v=H.done,!v;N=!0){b=H.value,N=!1;const j=b;for(const re of T.decode(j))yield yield St(re)}}catch(j){m={error:j}}finally{try{!N&&!v&&(x=O.return)&&(yield St(x.call(O)))}finally{if(m)throw m.error}}for(const j of T.flush())yield yield St(j)})}function h(){return Ii(this,arguments,function*(){var v,m,x,b;if(r)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=zi(u()),O;O=yield St(N.next()),v=O.done,!v;A=!0){b=O.value,A=!1;const H=b;T||H&&(yield yield St(JSON.parse(H)))}}catch(H){m={error:H}}finally{try{!A&&!v&&(x=N.return)&&(yield St(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(H){if(sd(H))return yield St(void 0);throw H}finally{T||o.abort()}})}return new Kl(h,o,a)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],a=this.iterator(),r=u=>({next:()=>{if(u.length===0){const h=a.next();t.push(h),o.push(h)}return u.shift()}});return[new Kl(()=>r(t),this.controller,this.client),new Kl(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Zg({async start(){o=t[Symbol.asyncIterator]()},async pull(a){try{const{value:r,done:u}=await o.next();if(u)return a.close();const h=_d(JSON.stringify(r)+`
`);a.enqueue(h)}catch(r){a.error(r)}},async cancel(){var a;await((a=o.return)===null||a===void 0?void 0:a.call(o))}})}}function J_(n,t){return Ii(this,arguments,function*(){var a,r,u,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _i("Attempted to iterate over a response with no body");const y=new X_,v=new Hr,m=Wg(n.body);try{for(var x=!0,b=zi(K_(m)),T;T=yield St(b.next()),a=T.done,!a;x=!0){h=T.value,x=!1;const A=h;for(const N of v.decode(A)){const O=y.decode(N);O&&(yield yield St(O))}}}catch(A){r={error:A}}finally{try{!x&&!a&&(u=b.return)&&(yield St(u.call(b)))}finally{if(r)throw r.error}}for(const A of v.flush()){const N=y.decode(A);N&&(yield yield St(N))}})}function K_(n){return Ii(this,arguments,function*(){var o,a,r,u;let h=new Uint8Array;try{for(var y=!0,v=zi(n),m;m=yield St(v.next()),o=m.done,!o;y=!0){u=m.value,y=!1;const x=u;if(x==null)continue;const b=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?_d(x):x;let T=new Uint8Array(h.length+b.length);T.set(h),T.set(b,h.length),h=T;let A;for(;(A=$_(h))!==-1;)yield yield St(h.slice(0,A)),h=h.slice(A)}}catch(x){a={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield St(r.call(v)))}finally{if(a)throw a.error}}h.length>0&&(yield yield St(h))})}class X_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,a,r]=Q_(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function Q_(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function Z_(n,t){const{response:o,requestLogID:a,retryOfRequestLogID:r,startTime:u}=t,h=await(async()=>{var y;if(t.options.stream)return jn(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):Kl.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return jn(n).debug(`[${a}] response parsed`,dl({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-u})),h}class Ad extends Promise{constructor(t,o,a=Z_){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=a,this.client=t}_thenUnwrap(t){return new Ad(this.client,this.responsePromise,async(o,a)=>t(await this.parseResponse(o,a),a))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const ay=Symbol("brand.privateNullableHeaders");function*W_(n){if(!n)return;if(ay in n){const{values:a,nulls:r}=n;yield*a.entries();for(const u of r)yield[u,null];return}let t=!1,o;n instanceof Headers?o=n.entries():Ym(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let a of o){const r=a[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=Ym(a[1])?a[1]:[a[1]];let h=!1;for(const y of u)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const $a=n=>{const t=new Headers,o=new Set;for(const a of n){const r=new Set;for(const[u,h]of W_(a)){const y=u.toLowerCase();r.has(y)||(t.delete(u),r.add(y)),h===null?(t.delete(u),o.add(y)):(t.append(u,h),o.delete(y))}}return{[ay]:!0,values:t,nulls:o}};const qu=n=>{var t,o,a,r,u,h;if(typeof globalThis.process<"u")return(a=(o=(t=C1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&a!==void 0?a:void 0;if(typeof globalThis.Deno<"u")return(h=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,n))===null||h===void 0?void 0:h.trim()};var sy;class Gr{constructor(t){var o,a,r,u,h,y,v,{baseURL:m=qu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=qu("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:b="v1beta"}=t,T=Nr(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:b},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(a=A.timeout)!==null&&a!==void 0?a:Gr.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(h=(u=Zm(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:Zm(qu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(y=A.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:z_(),this.encoder=U_,this._options=A,this.apiKey=x,this.apiVersion=b,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=$a([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return $a([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return $a([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,a])=>typeof a<"u").map(([o,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(o)}=`;throw new _i(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jl}`}defaultIdempotencyKey(){return`stainless-node-retry-${x_()}`}makeStatusError(t,o,a,r){return $n.generate(t,o,a,r)}buildURL(t,o,a){const r=!this.baseURLOverridden()&&a||this.baseURL,u=S_(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return E_(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(u.search=this.stringifyQuery(o)),u.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:a}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,a){return this.request(Promise.resolve(a).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new Ad(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,a){var r,u,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:b}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=a===void 0?"":`, retryOf: ${a}`,N=Date.now();if(jn(this).debug(`[${T}] sending request`,dl({retryOfRequestLogID:a,method:y.method,url:x,options:y,headers:m.headers})),!((u=y.signal)===null||u===void 0)&&u.aborted)throw new cd;const O=new AbortController,H=await this.fetchWithTimeout(x,m,b,O).catch(rd),j=Date.now();if(H instanceof globalThis.Error){const ce=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new cd;const ye=sd(H)||/timed? ?out/i.test(String(H)+("cause"in H?String(H.cause):""));if(o)return jn(this).info(`[${T}] connection ${ye?"timed out":"failed"} - ${ce}`),jn(this).debug(`[${T}] connection ${ye?"timed out":"failed"} (${ce})`,dl({retryOfRequestLogID:a,url:x,durationMs:j-N,message:H.message})),this.retryRequest(y,o,a??T);throw jn(this).info(`[${T}] connection ${ye?"timed out":"failed"} - error; no more retries left`),jn(this).debug(`[${T}] connection ${ye?"timed out":"failed"} (error; no more retries left)`,dl({retryOfRequestLogID:a,url:x,durationMs:j-N,message:H.message})),ye?new Og:new Pr({cause:H})}const re=`[${T}${A}] ${m.method} ${x} ${H.ok?"succeeded":"failed"} with status ${H.status} in ${j-N}ms`;if(!H.ok){const ce=await this.shouldRetry(H);if(o&&ce){const _e=`retrying, ${o} attempts remaining`;return await L_(H.body),jn(this).info(`${re} - ${_e}`),jn(this).debug(`[${T}] response error (${_e})`,dl({retryOfRequestLogID:a,url:H.url,status:H.status,headers:H.headers,durationMs:j-N})),this.retryRequest(y,o,a??T,H.headers)}const ye=ce?"error; no more retries left":"error; not retryable";jn(this).info(`${re} - ${ye}`);const ze=await H.text().catch(_e=>rd(_e).message),Le=A_(ze),ve=Le?void 0:ze;throw jn(this).debug(`[${T}] response error (${ye})`,dl({retryOfRequestLogID:a,url:H.url,status:H.status,headers:H.headers,message:ve,durationMs:Date.now()-N})),this.makeStatusError(H.status,Le,ve,H.headers)}return jn(this).info(re),jn(this).debug(`[${T}] response start`,dl({retryOfRequestLogID:a,url:H.url,status:H.status,headers:H.headers,durationMs:j-N})),{response:H,options:y,controller:O,requestLogID:T,retryOfRequestLogID:a,startTime:N}}async fetchWithTimeout(t,o,a,r){const u=o||{},{signal:h,method:y}=u,v=Nr(u,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),a),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(b.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,a,r){var u;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(u=t.maxRetries)!==null&&u!==void 0?u:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await N_(h),this.makeRequest(t,o-1,a)}calculateDefaultRetryTimeoutMillis(t,o){const u=o-t,h=Math.min(.5*Math.pow(2,u),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var a,r,u;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,b=this.buildURL(v,m,x);"timeout"in h&&__("timeout",h.timeout),h.timeout=(a=h.timeout)!==null&&a!==void 0?a:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:h}),N=await this.buildHeaders({options:t,method:y,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:N},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=h.fetchOptions)!==null&&u!==void 0?u:{}),url:b,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:a,retryCount:r}){let u={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=$a([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),I_()),this._options.defaultHeaders,a,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const a=$a([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&a.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:D_(t)}:this.encoder({body:t,headers:a})}}Gr.DEFAULT_TIMEOUT=6e4;class kn extends Gr{constructor(){super(...arguments),this.interactions=new ly(this)}}sy=kn;kn.GeminiNextGenAPIClient=sy;kn.GeminiNextGenAPIClientError=_i;kn.APIError=$n;kn.APIConnectionError=Pr;kn.APIConnectionTimeoutError=Og;kn.APIUserAbortError=cd;kn.NotFoundError=Yg;kn.ConflictError=Jg;kn.RateLimitError=Xg;kn.BadRequestError=qg;kn.AuthenticationError=jg;kn.InternalServerError=Qg;kn.PermissionDeniedError=$g;kn.UnprocessableEntityError=Kg;kn.toFile=B_;kn.Interactions=ly;function eA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function tA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function nA(n,t){const o={},a=c(n,["sdkHttpResponse"]);return a!=null&&d(o,["sdkHttpResponse"],a),o}function iA(n,t){const o={},a=c(n,["sdkHttpResponse"]);return a!=null&&d(o,["sdkHttpResponse"],a),o}function oA(n,t,o){const a={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&d(t,["displayName"],r),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(n,["epochCount"]);t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","epochCount"],u);const h=c(n,["learningRateMultiplier"]);if(h!=null&&d(a,["tuningTask","hyperparameters","learningRateMultiplier"],h),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=c(n,["batchSize"]);t!==void 0&&y!=null&&d(t,["tuningTask","hyperparameters","batchSize"],y);const v=c(n,["learningRate"]);if(t!==void 0&&v!=null&&d(t,["tuningTask","hyperparameters","learningRate"],v),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return a}function lA(n,t,o){const a={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=c(n,["validationDataset"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec"],eg(A))}else if(r==="PREFERENCE_TUNING"){const A=c(n,["validationDataset"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec"],eg(A))}const u=c(n,["tunedModelDisplayName"]);t!==void 0&&u!=null&&d(t,["tunedModelDisplayName"],u);const h=c(n,["description"]);t!==void 0&&h!=null&&d(t,["description"],h);let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(n,["epochCount"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(n,["epochCount"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=c(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=c(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=c(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=c(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=c(n,["adapterSize"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=c(n,["adapterSize"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=c(n,["labels"]);t!==void 0&&b!=null&&d(t,["labels"],b);const T=c(n,["beta"]);return t!==void 0&&T!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),a}function aA(n,t){const o={},a=c(n,["baseModel"]);a!=null&&d(o,["baseModel"],a);const r=c(n,["preTunedModel"]);r!=null&&d(o,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&yA(u);const h=c(n,["config"]);return h!=null&&oA(h,o),o}function sA(n,t){const o={},a=c(n,["baseModel"]);a!=null&&d(o,["baseModel"],a);const r=c(n,["preTunedModel"]);r!=null&&d(o,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&vA(u,o,t);const h=c(n,["config"]);return h!=null&&lA(h,o,t),o}function rA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function cA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function uA(n,t,o){const a={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const u=c(n,["pageToken"]);t!==void 0&&u!=null&&d(t,["_query","pageToken"],u);const h=c(n,["filter"]);return t!==void 0&&h!=null&&d(t,["_query","filter"],h),a}function dA(n,t,o){const a={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const u=c(n,["pageToken"]);t!==void 0&&u!=null&&d(t,["_query","pageToken"],u);const h=c(n,["filter"]);return t!==void 0&&h!=null&&d(t,["_query","filter"],h),a}function fA(n,t){const o={},a=c(n,["config"]);return a!=null&&uA(a,o),o}function pA(n,t){const o={},a=c(n,["config"]);return a!=null&&dA(a,o),o}function hA(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["nextPageToken"]);r!=null&&d(o,["nextPageToken"],r);const u=c(n,["tunedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>ry(y))),d(o,["tuningJobs"],h)}return o}function mA(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["nextPageToken"]);r!=null&&d(o,["nextPageToken"],r);const u=c(n,["tuningJobs"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>fd(y))),d(o,["tuningJobs"],h)}return o}function gA(n,t){const o={},a=c(n,["name"]);a!=null&&d(o,["model"],a);const r=c(n,["name"]);return r!=null&&d(o,["endpoint"],r),o}function yA(n,t){const o={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=c(n,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),d(o,["examples","examples"],r)}return o}function vA(n,t,o){const a={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(u==="PREFERENCE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function ry(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["name"]);r!=null&&d(o,["name"],r);const u=c(n,["state"]);u!=null&&d(o,["state"],Eg(u));const h=c(n,["createTime"]);h!=null&&d(o,["createTime"],h);const y=c(n,["tuningTask","startTime"]);y!=null&&d(o,["startTime"],y);const v=c(n,["tuningTask","completeTime"]);v!=null&&d(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&d(o,["updateTime"],m);const x=c(n,["description"]);x!=null&&d(o,["description"],x);const b=c(n,["baseModel"]);b!=null&&d(o,["baseModel"],b);const T=c(n,["_self"]);return T!=null&&d(o,["tunedModel"],gA(T)),o}function fd(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["name"]);r!=null&&d(o,["name"],r);const u=c(n,["state"]);u!=null&&d(o,["state"],Eg(u));const h=c(n,["createTime"]);h!=null&&d(o,["createTime"],h);const y=c(n,["startTime"]);y!=null&&d(o,["startTime"],y);const v=c(n,["endTime"]);v!=null&&d(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&d(o,["updateTime"],m);const x=c(n,["error"]);x!=null&&d(o,["error"],x);const b=c(n,["description"]);b!=null&&d(o,["description"],b);const T=c(n,["baseModel"]);T!=null&&d(o,["baseModel"],T);const A=c(n,["tunedModel"]);A!=null&&d(o,["tunedModel"],A);const N=c(n,["preTunedModel"]);N!=null&&d(o,["preTunedModel"],N);const O=c(n,["supervisedTuningSpec"]);O!=null&&d(o,["supervisedTuningSpec"],O);const H=c(n,["preferenceOptimizationSpec"]);H!=null&&d(o,["preferenceOptimizationSpec"],H);const j=c(n,["tuningDataStats"]);j!=null&&d(o,["tuningDataStats"],j);const re=c(n,["encryptionSpec"]);re!=null&&d(o,["encryptionSpec"],re);const ce=c(n,["partnerModelTuningSpec"]);ce!=null&&d(o,["partnerModelTuningSpec"],ce);const ye=c(n,["customBaseModel"]);ye!=null&&d(o,["customBaseModel"],ye);const ze=c(n,["experiment"]);ze!=null&&d(o,["experiment"],ze);const Le=c(n,["labels"]);Le!=null&&d(o,["labels"],Le);const ve=c(n,["outputUri"]);ve!=null&&d(o,["outputUri"],ve);const Ke=c(n,["pipelineJob"]);Ke!=null&&d(o,["pipelineJob"],Ke);const _e=c(n,["serviceAccount"]);_e!=null&&d(o,["serviceAccount"],_e);const $e=c(n,["tunedModelDisplayName"]);$e!=null&&d(o,["tunedModelDisplayName"],$e);const De=c(n,["veoTuningSpec"]);return De!=null&&d(o,["veoTuningSpec"],De),o}function xA(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["name"]);r!=null&&d(o,["name"],r);const u=c(n,["metadata"]);u!=null&&d(o,["metadata"],u);const h=c(n,["done"]);h!=null&&d(o,["done"],h);const y=c(n,["error"]);return y!=null&&d(o,["error"],y),o}function eg(n,t){const o={},a=c(n,["gcsUri"]);a!=null&&d(o,["validationDatasetUri"],a);const r=c(n,["vertexDatasetResource"]);return r!=null&&d(o,["validationDatasetUri"],r),o}class bA extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new fl(mo.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var a;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((a=o.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),u=await this.tuneMldevInternal(r);let h="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?h=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(h=u.name.split("/operations/")[0]),{name:h,state:ed.JOB_STATE_QUEUED}}}}async getInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=cA(t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>fd(x))}else{const m=rA(t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>ry(x))}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=pA(t);return y=qe("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=mA(x),T=new _m;return Object.assign(T,b),T})}else{const m=fA(t);return y=qe("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=hA(x),T=new _m;return Object.assign(T,b),T})}}async cancel(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=tA(t);return y=qe("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=iA(x),T=new Am;return Object.assign(T,b),T})}else{const m=eA(t);return y=qe("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=nA(x),T=new Am;return Object.assign(T,b),T})}}async tuneInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=sA(t,t);return u=qe("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>fd(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=aA(t);return u=qe("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>xA(v))}}}class SA{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TA=1024*1024*8,wA=3,EA=1e3,CA=2,Rr="x-goog-upload-status";async function _A(n,t,o){var a;const r=await cy(n,t,o),u=await r?.json();if(((a=r?.headers)===null||a===void 0?void 0:a[Rr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function AA(n,t,o){var a;const r=await cy(n,t,o),u=await r?.json();if(((a=r?.headers)===null||a===void 0?void 0:a[Rr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=vg(u),y=new bd;return Object.assign(y,h),y}async function cy(n,t,o){var a,r;let u=0,h=0,y=new td(new Response),v="upload";for(u=n.size;h<u;){const m=Math.min(TA,u-h),x=n.slice(h,h+m);h+m>=u&&(v+=", finalize");let b=0,T=EA;for(;b<wA&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((a=y?.headers)===null||a===void 0)&&a[Rr]));)b++,await MA(T),T=T*CA;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[Rr])!=="active")break;if(u<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function NA(n){return{size:n.size,type:n.type}}function MA(n){return new Promise(t=>setTimeout(t,n))}class RA{async upload(t,o,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await _A(t,o,a)}async uploadToFileSearchStore(t,o,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await AA(t,o,a)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await NA(t)}}class kA{create(t,o,a){return new IA(t,o,a)}}class IA{constructor(t,o,a){this.url=t,this.headers=o,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const tg="x-goog-api-key";class zA{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(tg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(tg,this.apiKey)}}}const DA="gl-node/";class LA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new kn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const a=M1(t.httpOptions,t.vertexai,void 0,void 0);a&&(t.httpOptions?t.httpOptions.baseUrl=a:t.httpOptions={baseUrl:a}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new zA(this.apiKey);this.apiClient=new NC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:DA+"web",uploader:new RA,downloader:new SA}),this.models=new YC(this.apiClient),this.live=new BC(this.apiClient,r,new kA),this.batches=new oT(this.apiClient),this.chats=new GT(this.models,this.apiClient),this.caches=new UT(this.apiClient),this.files=new KT(this.apiClient),this.operations=new JC(this.apiClient),this.authTokens=new u_(this.apiClient),this.tunings=new bA(this.apiClient),this.fileSearchStores=new v_(this.apiClient)}}const UA=n=>new LA({apiKey:n}),PA={type:cn.OBJECT,properties:{segments:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{startTime:{type:cn.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:cn.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:cn.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},HA={type:cn.OBJECT,properties:{segments:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{startTime:{type:cn.STRING},endTime:{type:cn.STRING},text:{type:cn.STRING},words:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{text:{type:cn.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:cn.STRING,description:"Start time of the word"},endTime:{type:cn.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function gr(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let b=0;m[1]&&(b=parseFloat("0."+m[1])),o=y*3600+v*60+x+b}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const a=Math.floor(o/60),r=Math.floor(o%60),u=Math.round(o%1*1e3);return`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(u).padStart(3,"0")}`}function GA(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const a=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let u;for(;(u=r.exec(t))!==null;){const h=u[3]!==void 0?u[3]:u[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}a.push({startTime:u[1],endTime:u[2],text:y})}if(a.length>0)return{segments:a};throw new Error("Response structure invalid and could not be repaired.")}async function FA(n,t,o,a,r,u="line"){try{const h=UA(a),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";u==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. REPEATED WORDS & STUTTERS: **EXTREMELY IMPORTANT**
       - Treat every spoken utterance as a distinct word which must be timestamped.
       - Example: "No no no wait" -> 4 distinct word objects.
       - Example: "I I I didn't mean it" -> 3 distinct "I" objects followed by "didn't", "mean", "it".
       - NEVER merge repeated words into a single event.
    4. DETAILS: Inside each line object, you MUST provide a "words" array.
    5. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    6. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    7. FAST SPEECH / RAP / CONVERSATION HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics or conversation, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating precise timed lyrics and subtitled conversations.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${u.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,b={responseMimeType:"application/json",responseSchema:u==="word"?HA:PA,temperature:.1};y&&(b.thinkingConfig={thinkingBudget:1024});const T=new Promise((j,re)=>{r?.aborted&&re(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>re(new DOMException("Aborted","AbortError")))});let N=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:b}),T])).text;if(!N)throw new Error("Empty response from model");return N=N.trim(),N.startsWith("```json")?N=N.replace(/^```json\s*/,"").replace(/\s*```$/,""):N.startsWith("```")&&(N=N.replace(/^```\s*/,"").replace(/\s*```$/,"")),(GA(N).segments||[]).map(j=>({startTime:gr(String(j.startTime)),endTime:gr(String(j.endTime)),text:String(j.text),words:j.words?j.words.map(re=>({text:String(re.text),startTime:gr(String(re.startTime)),endTime:gr(String(re.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const BA=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:a,onPlayTrack:r,isPlaying:u,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:b})=>{const{confirm:T}=Ir(),A=Z.useRef(null),N=Z.useRef(new Map),O=G=>{const D=Math.floor(G/60).toString().padStart(2,"0"),pe=(G%60).toFixed(2).padStart(5,"0");return`[${D}:${pe}]`},[H,j]=Z.useState(null),[re,ce]=Z.useState({key:null,direction:"asc"}),[ye,ze]=Z.useState(new Set),[Le,ve]=Z.useState(new Set),[Ke,_e]=Z.useState(localStorage.getItem("gemini_api_key")||""),[$e,De]=Z.useState("gemini-2.5-flash"),[ot,pt]=Z.useState("line"),[xt,Et]=Z.useState(!1),V=Z.useRef(null),[Ee,ie]=Z.useState(null);Z.useEffect(()=>{Ke&&localStorage.setItem("gemini_api_key",Ke)},[Ke]);const de=o>=0?n[o]:null,yt=de?.parsedLyrics||[],L=Z.useMemo(()=>de?yt.findIndex((G,D)=>{if(G.endTime!==void 0)return x>=G.time&&x<G.endTime;const pe=yt[D+1];return x>=G.time&&(!pe||x<pe.time)}):-1,[x,de,yt]);Z.useEffect(()=>{if(L!==-1){const G=document.getElementById(`lyric-active-${o}`);G&&G.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[L,o]);const se=G=>{if(n.length===0)return;const D=o>=0?n[o]:null,pe=[...n];let we="asc";if(G==="random"){ce({key:"random",direction:"asc"});for(let he=pe.length-1;he>0;he--){const le=Math.floor(Math.random()*(he+1));[pe[he],pe[le]]=[pe[le],pe[he]]}}else{re.key===G&&re.direction==="asc"&&(we="desc"),ce({key:G,direction:we});const he=we==="asc"?1:-1;G==="filename"?pe.sort((le,E)=>he*le.audioFile.name.localeCompare(E.audioFile.name)):G==="artist"?pe.sort((le,E)=>he*(le.metadata.artist||"").localeCompare(E.metadata.artist||"")):G==="title"?pe.sort((le,E)=>he*(le.metadata.title||"").localeCompare(E.metadata.title||"")):G==="album"&&pe.sort((le,E)=>he*(le.metadata.album||"").localeCompare(E.metadata.album||""))}if(t(pe),D){const he=pe.findIndex(le=>le.id===D.id);he!==-1&&a(he)}},xe=Z.useCallback(G=>{H!==null&&G.key==="Delete"?(G.preventDefault(),G.stopPropagation(),m?m(H):t(D=>{const pe=[...D];return pe.splice(H,1),pe}),H>=n.length-1&&j(n.length>1?n.length-2:null)):G.key==="ArrowDown"&&n.length>0?(G.preventDefault(),G.stopPropagation(),j(D=>D===null?0:Math.min(D+1,n.length-1))):G.key==="ArrowUp"&&n.length>0?(G.preventDefault(),G.stopPropagation(),j(D=>D===null?0:Math.max(D-1,0))):G.key==="Enter"&&H!==null?(G.preventDefault(),G.stopPropagation(),r(H)):G.key==="Escape"&&j(null)},[H,n.length,t,r]);Z.useEffect(()=>{const G=A.current;if(G)return G.addEventListener("keydown",xe),()=>G.removeEventListener("keydown",xe)},[xe]),Z.useEffect(()=>{H!==null&&H>=n.length&&j(n.length>0?n.length-1:null)},[n.length,H]);const He=async G=>{const D=new Map;G.forEach(le=>{const E=le.name.split(".").pop()?.toLowerCase(),q=(le.webkitRelativePath||le.name).replace(/\.[^/.]+$/,"");D.has(q)||D.set(q,{});const M=D.get(q);["mp3","wav","ogg","flac","m4a","mp4","webm","ogg","mkv","mov","avi","m4v"].includes(E||"")?M.audio=le:["lrc","srt","ttml","xml","json","vtt"].includes(E||"")&&(M.lyric=le)});const pe=[],we=async(le,E)=>new Promise(I=>{if(le.type.startsWith("video/")){I({title:E,artist:"Unknown Artist",coverUrl:URL.createObjectURL(le),backgroundType:"video"});return}Yu(()=>import("./jsmediatags.min-BIPlaZkZ.js").then(q=>q.j),[]).then(q=>{q.read(le,{onSuccess:M=>{const{title:ee,artist:z,album:ae,picture:C}=M.tags;let te=null;if(C){const{data:ke,format:Ye}=C;let nt="";for(let Be=0;Be<ke.length;Be++)nt+=String.fromCharCode(ke[Be]);te=`data:${Ye};base64,${window.btoa(nt)}`}I({title:ee||E,artist:z||"Unknown Artist",album:ae||void 0,coverUrl:te})},onError:()=>{I({title:E,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{I({title:E,artist:"Unknown Artist",coverUrl:null})})}),he=async le=>{try{const E=await le.text(),I=le.name.split(".").pop()?.toLowerCase();if(I==="lrc")return Xl(E);if(I==="srt")return Ql(E);if(I==="ttml"||I==="xml")return ts(E);if(I==="vtt")return ns(E);if(I==="json")return m1(E)}catch(E){console.error("Failed to parse lyrics",E)}return[]};for(const[le,E]of D.entries())if(E.audio){const I=await we(E.audio,le),q=Math.random().toString(36).substr(2,9);let M=[];E.lyric&&(M=await he(E.lyric)),pe.push({id:q,audioFile:E.audio,lyricFile:E.lyric,parsedLyrics:M,metadata:I,duration:0})}if(pe.length>0){const le=[...n,...pe];t(le),r(0,!1,le)}},it=async G=>{if(G.target.files&&G.target.files.length>0){const D=Array.from(G.target.files);await He(D),G.target.value=""}},[w,U]=Z.useState(!1),J=G=>{G.preventDefault(),G.stopPropagation(),U(!0)},oe=G=>{G.preventDefault(),G.stopPropagation(),U(!1)},Me=async G=>{if(G.preventDefault(),G.stopPropagation(),U(!1),G.dataTransfer.files&&G.dataTransfer.files.length>0){const D=Array.from(G.dataTransfer.files);await He(D)}},Te=G=>{m?m(G):t(D=>{const pe=[...D];return pe.splice(G,1),pe})},Ce=G=>new Promise((D,pe)=>{const we=new FileReader;we.readAsDataURL(G),we.onload=()=>{const he=we.result.split(",")[1];D(he)},we.onerror=he=>pe(he)}),Ie=async G=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(ye.has(G.id)){const he=N.current.get(G.id);he&&he.abort();return}const D=Ke||"PLACEHOLDER_API_KEY";if(D.trim().length!==39){alert(`Invalid API Key length (${D.trim().length}). It must be exactly 39 characters.`),Et(!0);return}ze(he=>new Set(he).add(G.id));const pe=new AbortController;N.current.set(G.id,pe);const we=19.5*1024*1024;if(G.audioFile.size>we){alert(`File is too large (${(G.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),ze(he=>{const le=new Set(he);return le.delete(G.id),le}),N.current.delete(G.id);return}try{const he=await Ce(G.audioFile);let le=G.duration||0;if(le===0)try{le=await new Promise(q=>{const M=new Audio(URL.createObjectURL(G.audioFile));M.onloadedmetadata=()=>{q(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>{URL.revokeObjectURL(M.src),q(0)}})}catch(q){console.warn("Could not determine duration for AI validation",q)}let I=(await FA($e,he,G.audioFile.type,D,pe.signal,ot)).map(q=>({time:Qa(q.startTime),text:q.text,endTime:Qa(q.endTime),words:q.words?q.words.map(M=>({text:M.text,startTime:Qa(M.startTime),endTime:Qa(M.endTime)})):void 0}));le>0&&(I=I.filter(q=>q.time<le&&q.time>=0)),t(q=>q.map(M=>M.id===G.id?{...M,parsedLyrics:I.sort((ee,z)=>ee.time-z.time),duration:le>0?le:M.duration}:M))}catch(he){if(he.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",he);let le="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)le="Connection lost. Please check your internet connection.";else if(he.message){const E=he.message.toLowerCase();E.includes("fetch")||E.includes("network")||E.includes("failed to connect")?le="Network error. Please check your connection.":(E.includes("api key")||he.message.includes("400")||he.message.includes("401")||he.message.includes("403"))&&(le="API Key Error: Please check if your key is valid and has credits.")}alert(le)}}finally{N.current.delete(G.id),ze(he=>{const le=new Set(he);return le.delete(G.id),le})}},fe=async G=>{if(!navigator.onLine){alert("No internet connection.");return}ve(D=>new Set(D).add(G.id));try{const D=await Yu(()=>import("./index.min-DVaP4ZU5.js").then(I=>I.i),[]);let pe;const we=D.default||D;console.log("SyncLyrics Module:",D);const he=["musixmatch","lrclib","netease"];if(typeof we=="function"&&we.prototype&&we.prototype.getLyrics){console.log("Detected Class usage");const I=new we({sources:he});pe=q=>I.getLyrics(q)}else if(we.getLyrics&&typeof we.getLyrics=="function")console.log("Detected Instance usage"),pe=I=>we.getLyrics(I);else if(we.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const I=we.SyncLyrics;if(typeof I=="function"&&I.prototype&&I.prototype.getLyrics){console.log("Using SyncLyrics as Class");const q=new I({sources:he});pe=M=>q.getLyrics(M)}else if(typeof I=="function")console.log("Using SyncLyrics as Function"),pe=I;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof we=="function")console.log("Detected Function usage"),pe=we;else throw new Error(`Could not find suitable search function. Mod type: ${typeof we}. Keys: ${typeof we=="object"?JSON.stringify(Object.keys(we)):"N/A"}`);const le={track:G.metadata.title,artist:G.metadata.artist,album:G.metadata.album,sources:he};console.log("Searching lyrics with options:",le);const E=await pe(le);if(E&&typeof E=="string")ge(E,G);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let I=G.duration||0;if(I===0)try{I=await new Promise(z=>{const ae=new Audio(URL.createObjectURL(G.audioFile));ae.onloadedmetadata=()=>{const C=ae.duration;URL.revokeObjectURL(ae.src),z(C)},ae.onerror=()=>z(0)})}catch(z){console.warn("Could not determine duration for search",z)}const q=new URLSearchParams({artist_name:G.metadata.artist,track_name:G.metadata.title,album_name:G.metadata.album||"",duration:I.toString()}),M=await fetch(`https://lrclib.net/api/get?${q.toString()}`);if(!M.ok){const z=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(G.metadata.title+" "+G.metadata.artist)}`);if(z.ok){const ae=await z.json();if(Array.isArray(ae)&&ae.length>0){const C=ae.find(te=>te.syncedLyrics);if(C){ge(C.syncedLyrics,G);return}else if(ae[0].plainLyrics){ge(ae[0].plainLyrics,G);return}}}throw new Error("No lyrics found in fallback source.")}const ee=await M.json();ee.syncedLyrics?ge(ee.syncedLyrics,G):ee.plainLyrics?ge(ee.plainLyrics,G):alert("No lyrics found.")}}catch(D){console.error("Search failed:",D),D.message?.includes("CORS")||D.message?.includes("etwork")||D.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+D.message)}finally{ve(D=>{const pe=new Set(D);return pe.delete(G.id),pe})}},ge=(G,D)=>{let pe=Xl(G);if(pe.length===0&&(pe=Ql(G)),pe.length>0){const we=pe.some(he=>he.words&&he.words.length>0);console.log(we?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(he=>he.map(le=>le.id===D.id?{...le,parsedLyrics:pe,lyricFile:new File([G],`synched-lyrics${we?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:le))}else alert("Lyrics found but could not be parsed.")},Re=(G,D,pe)=>{const we=new Blob([G],{type:"application/octet-stream"}),he=URL.createObjectURL(we),le=document.createElement("a");le.href=he,le.download=D,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(he)},je=async(G,D)=>{const pe=G.parsedLyrics||[];if(pe.length===0)return;let we="";const he=D==="lrc-enhanced"?"lrc":D,le=`${G.metadata.title||"lyrics"}.${he}`;let E=G.duration||0;if(E===0)try{E=await new Promise(q=>{const M=new Audio(URL.createObjectURL(G.audioFile));M.onloadedmetadata=()=>{q(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>q(0)})}catch(q){console.warn("Could not determine duration for export check",q)}const I=pe.map(q=>({...q,words:q.words?q.words.filter(M=>M.text.trim().length>0).map(M=>({...M})):void 0}));for(let q=0;q<I.length;q++){const M=I[q],ee=I[q+1];if(M.endTime===void 0&&(ee?M.endTime=ee.time:M.endTime=E>0?E:M.time+5),M.words&&M.words.length>0)for(let z=0;z<M.words.length;z++){const ae=M.words[z],C=M.words[z+1];(ae.endTime===void 0||ae.endTime<=ae.startTime)&&(C?ae.endTime=C.startTime:ae.endTime=M.endTime)}}if(D==="txt")we=I.map(q=>q.text).join(`
`);else if(D==="json")we=JSON.stringify(I,null,2);else if(D==="srt"){const q=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),z=Math.floor(M%3600/60).toString().padStart(2,"0"),ae=Math.floor(M%60).toString().padStart(2,"0"),C=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${z}:${ae},${C}`};we=I.map((M,ee)=>{const z=q(M.time),ae=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,C=q(ae);return`${ee+1}
${z} --> ${C}
${M.text}
`}).join(`
`)}else if(D==="lrc"){const q=[],M=ee=>{const z=Math.floor(ee/60).toString().padStart(2,"0"),ae=(ee%60).toFixed(2).padStart(5,"0");return`[${z}:${ae}]`};for(let ee=0;ee<pe.length;ee++){const z=pe[ee],ae=pe[ee+1];q.push(`${M(z.time)}${z.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const te=(z.endTime??z.time+3)+4;(!(E>0)||te<=E)&&(ae?ae.time>te&&q.push(`${M(te)}`):q.push(`${M(te)}`))}we=q.join(`
`)}else if(D==="lrc-enhanced"){const q=[],M=z=>{const ae=Math.floor(z/60).toString().padStart(2,"0"),C=(z%60).toFixed(2).padStart(5,"0");return`[${ae}:${C}]`},ee=z=>{const ae=Math.floor(z/60).toString().padStart(2,"0"),C=(z%60).toFixed(2).padStart(5,"0");return`<${ae}:${C}>`};for(let z=0;z<pe.length;z++){const ae=pe[z],C=pe[z+1];let te="";ae.words&&ae.words.length>0?ae.words.forEach((Be,Lt)=>{const Je=Be.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");te+=`${ee(Be.startTime)}${Je}`,Lt<ae.words.length-1&&!Je.endsWith("-")&&(te+=" ")}):te=ae.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),q.push(`${M(ae.time)}${te}`);const Ye=(ae.endTime??ae.time+3)+4;(!(E>0)||Ye<=E)&&(C?C.time>Ye&&q.push(`${M(Ye)}`):q.push(`${M(Ye)}`))}we=q.join(`
`)}else if(D==="ttml"){const q=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),z=Math.floor(M%3600/60).toString().padStart(2,"0"),ae=Math.floor(M%60).toString().padStart(2,"0"),C=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${z}:${ae}.${C}`};we=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,I.forEach(M=>{const ee=q(M.time),z=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+3,ae=q(z);we+=`
      <p begin="${ee}" end="${ae}">`,M.words&&M.words.length>0?M.words.forEach(C=>{if(!C.text.trim())return;const te=q(C.startTime);let ke=C.endTime;(ke===void 0||ke<=C.startTime)&&(ke=C.startTime+.5);const Ye=q(ke);let nt=C.text.replace(/[ \t]+/g," ").trim();nt.endsWith("-")||(nt+=" "),we+=`
        <span begin="${te}" end="${Ye}">${nt}</span>`}):we+=`
        <span begin="${ee}" end="${ae}">${M.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,we+=`
      </p>`}),we+=`
    </div>
  </body>
</tt>`}else if(D==="vtt"){const q=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),z=Math.floor(M%3600/60).toString().padStart(2,"0"),ae=Math.floor(M%60).toString().padStart(2,"0"),C=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${z}:${ae}.${C}`};we=`WEBVTT

`,I.forEach(M=>{const ee=q(M.time),z=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,ae=q(z);let C=M.text.trim();if(M.words&&M.words.length>0){const te=M.words.map(ke=>`<${q(ke.startTime)}>${ke.text.trim()}`).join(" ");te.length>0&&(C=te)}we+=`${ee} --> ${ae}
${C}

`})}Re(we,le)},Fe=async G=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(D=>D.map(pe=>pe.id===G.id?{...pe,parsedLyrics:[],lyricFile:void 0}:pe))},Ze=async G=>{const D=G.target.files?.[0];if(!(!D||!Ee)){try{const pe=await D.text(),we=D.name.split(".").pop()?.toLowerCase();let he=[];we==="lrc"?he=Xl(pe):we==="srt"?he=Ql(pe):we==="ttml"||we==="xml"?he=ts(pe):we==="vtt"&&(he=ns(pe)),he.length>0?t(le=>le.map(E=>E.id===Ee?{...E,lyricFile:D,parsedLyrics:he}:E)):alert("Could not parse lyrics. Ensure file is .lrc, .srt, or .vtt")}catch(pe){console.error("Failed to load lyrics",pe),alert("Failed to load lyrics file.")}ie(null),G.target.value=""}};return f.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${w?"bg-zinc-800 border-orange-500":""}`,onDragOver:J,onDragLeave:oe,onDrop:Me,children:[w&&f.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:f.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[f.jsx(Yo,{size:48}),f.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),f.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, FLAC, Video (MP4/WebM), LRC, SRT, VTT"})]})}),f.jsx("input",{type:"file",ref:V,className:"hidden",accept:".lrc,.srt,.ttml,.xml,.vtt",onChange:Ze}),f.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[f.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[f.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[f.jsx(wr,{size:16,className:"text-orange-400"}),"Playlist"]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[f.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[f.jsx(gg,{size:14})," Add Files",f.jsx("input",{type:"file",className:"hidden",accept:"audio/*,video/*,.lrc,.srt,.ttml,.xml,.vtt",multiple:!0,onChange:it})]}),f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[f.jsx(ib,{size:14}),f.jsx("input",{type:"file",className:"hidden",multiple:!0,webkitdirectory:"",onChange:it})]})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>se("filename"),className:`p-1 rounded transition-colors ${re.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${re.key==="filename"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx(Tr,{size:14,className:re.key==="filename"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>se("artist"),className:`p-1 rounded transition-colors ${re.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${re.key==="artist"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx(a1,{size:14,className:re.key==="artist"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>se("title"),className:`p-1 rounded transition-colors ${re.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${re.key==="title"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx($l,{size:14,className:re.key==="title"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>se("album"),className:`p-1 rounded transition-colors ${re.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${re.key==="album"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx(Yx,{size:14,className:re.key==="album"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>se("random"),className:`p-1 rounded transition-colors ${re.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:f.jsx(Gb,{size:14})})]})]}),f.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[f.jsx("button",{onClick:()=>Et(!xt),className:`p-1 rounded transition-colors ${xt?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:f.jsx(db,{size:14})}),xt&&f.jsx("input",{type:Ke?"password":"text",value:Ke,onChange:G=>_e(G.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),f.jsx("div",{className:"relative group",children:f.jsxs("select",{value:$e,onChange:G=>De(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[f.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),f.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),f.jsx("div",{className:"relative group",children:f.jsxs("select",{value:ot,onChange:G=>pt(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[f.jsx("option",{value:"line",children:"Line"}),f.jsx("option",{value:"word",children:"Word"})]})}),f.jsx("button",{onClick:async()=>{n.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:f.jsx(Er,{size:14})}),f.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),f.jsx("button",{onClick:b,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:f.jsx(Ei,{size:14})})]})]}),f.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[f.jsx(wr,{size:32,className:"mb-2 opacity-50"}),f.jsx("p",{children:"Playlist is empty"}),f.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((G,D)=>{const pe=D===o,we=D===H,he=G.parsedLyrics||[],le=pe?he.findIndex((E,I)=>{if(E.endTime!==void 0)return x>=E.time&&x<E.endTime;const q=he[I+1];return x>=E.time&&(!q||x<q.time)}):-1;return f.jsxs("div",{onClick:()=>j(D),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${pe?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${we?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[f.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),pe?h():r(D)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${pe?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:pe?u?f.jsx(mg,{size:14}):f.jsx(Ku,{size:14}):f.jsx(Ku,{size:14})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:`text-xs font-medium truncate ${pe?"text-orange-100":"text-zinc-300"}`,title:G.audioFile.name,children:G.metadata.title}),f.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:G.metadata.artist,children:G.metadata.artist})]})]}),f.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[f.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(G.audioFile.size/1024/1024).toFixed(1),"MB"]}),G.lyricFile?f.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:G.lyricFile.name,children:[f.jsx(Tr,{size:7}),f.jsx("span",{className:"truncate max-w-[80px]",children:G.lyricFile.name})]}):f.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),f.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:he.length>0?f.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:he.map((E,I)=>{const q=I===le;return f.jsxs("div",{id:q?`lyric-active-${D}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${q?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${O(E.time)} - ${E.text}`,onClick:M=>{M.stopPropagation(),D!==o?(r(D),setTimeout(()=>y(E.time),150)):y(E.time)},children:[f.jsx("span",{className:`font-mono text-[8px] ${q?"text-orange-200":"text-zinc-500"}`,children:O(E.time)}),f.jsx("span",{className:`truncate max-w-[120px] ${q?"text-white font-medium":"text-zinc-400"}`,children:E.text||""})]},I)})}):f.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),f.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),ie(G.id),V.current&&(V.current.value=""),V.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:f.jsx(Yo,{size:14})}),f.jsx("button",{onClick:E=>{E.stopPropagation(),fe(G)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${Le.has(G.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:Le.has(G.id),children:Le.has(G.id)?f.jsx(x0,{size:14,className:"animate-spin"}):f.jsx(Ub,{size:14})}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Ie(G)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${ye.has(G.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:ye.has(G.id)?"Stop Transcription":"AI Sync Transcribe",children:ye.has(G.id)?f.jsxs(f.Fragment,{children:[f.jsx(x0,{size:14,className:"animate-spin group-hover/btn:hidden"}),f.jsx(Zu,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):f.jsx(Qu,{size:14})}),he.length>0&&f.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"vtt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download VTT",children:"VTT"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),f.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Fe(G)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Te(D)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:f.jsx(Er,{size:12})})]},G.id)})})]})},Nd=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],VA=()=>{const n=new Set;if(Nd.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const a=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=a,document.head.appendChild(r);const u=document.createElement("link");u.rel="preconnect",u.href="https://fonts.googleapis.com",document.head.appendChild(u);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},Md=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],kr={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},ju=Md.flatMap(n=>n.options.map(t=>t.value)),ng={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,lyricLineHeight:1.2,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1,useRealColorMedia:!1},ig=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],og=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],lg=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],ag=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],pd=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],hd=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},sg=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],md=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],uy=["none","upper","lower","title","sentence","invert"],rg=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],cg=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],OA=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],wi=({value:n,onChange:t,groups:o})=>{const[a,r]=Z.useState(!1),[u,h]=Z.useState(n);Z.useEffect(()=>{a||h(n)},[n,a]);const y=b=>{for(const T of o){const A=T.options.find(N=>N.value===b);if(A)return A.label}return b},v=b=>{t(b)},m=()=>{a&&t(u),r(!1)},x=b=>{t(b),h(b),r(!1)};return f.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[f.jsxs("button",{onClick:()=>r(!a),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:a?"Close List":"Expand List",children:[f.jsx("span",{className:"truncate",children:y(n)}),f.jsx(is,{size:14,className:`transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&f.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(b=>f.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[f.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),f.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>f.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},b.label))})]})},qA=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const a of t){const r=a.options.find(u=>u.value===n);if(r)return r.label}return"Select Font"},jA=({value:n,onChange:t,customFontName:o,groups:a=Nd})=>{const[r,u]=Z.useState(!1),[h,y]=Z.useState(n);Z.useEffect(()=>{r||y(n)},[n,r]);const v=b=>{t(b)},m=()=>{r&&t(h)},x=b=>{t(b),y(b),u(!1)};return f.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[f.jsxs("button",{onClick:()=>u(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[f.jsx("span",{className:"truncate",style:{fontFamily:n},children:qA(n,a,o)}),f.jsx(is,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&f.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&f.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[f.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),f.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:f.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),a.map(b=>f.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[f.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),f.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>f.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:f.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},b.label))]})]})},$A=Object.values(kr).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),YA=[{label:"Visual Presets",options:$A},...Nd],JA=({config:n,setConfig:t,preset:o,setPreset:a,onClose:r,isPlaylistMode:u,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:b,setResolution:T,aspectRatio:A,setAspectRatio:N,renderCodec:O,setRenderCodec:H,supportedCodecs:j,renderQuality:re,setRenderQuality:ce,renderFps:ye,setRenderFps:ze,renderEngine:Le,setRenderEngine:ve,ffmpegCodec:Ke,setFfmpegCodec:_e})=>{const{toast:$e,confirm:De}=Ir(),ot=Z.useRef(null),pt=Z.useRef(null),xt=Z.useRef(null),Et=Z.useRef(null),V=Z.useRef(null),[Ee,ie]=Z.useState(!1),de=(w,U)=>{let J={...n,[w]:U};if(w==="highlightEffect"){const Me=hd(U);J.useCustomHighlightColors=!1,Me?(J.highlightColor=Me.color,J.highlightBackground=Me.bg):(J.highlightColor="#fb923c",J.highlightBackground="#fb923c")}t(J)},yt=w=>{a(w);const U=kr[w];U&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...U})},L=w=>{const U=w.target.files?.[0];if(U){const J=new FileReader;J.onload=oe=>{oe.target?.result&&de("channelInfoImage",oe.target.result)},J.readAsDataURL(U)}w.target.value=""},se=w=>{const U=w.target.files?.[0];if(U){const J=new FileReader;J.onload=oe=>{oe.target?.result&&de("backgroundImage",oe.target.result)},J.readAsDataURL(U)}w.target.value=""},xe=async()=>{await De("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(ng),a("default"),T("1080p"),N("16:9"),H("auto"),ze(30),ce("med"),ve("mediarecorder"),_e("h264"),xt.current&&(xt.current.value=""),Et.current&&(Et.current.value=""),x(),de("enableGradientOverlay",!1),de("useRealColorMedia",!1),$e.success("All settings have been reset to default."))},He=()=>{const w=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),U={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:b,aspectRatio:A,renderCodec:O,renderFps:ye,renderQuality:re,renderEngine:Le,ffmpegCodec:Ke,customFontName:v};U.backgroundSource!=="image"&&(U.backgroundImage=void 0),U.showChannelInfo||(U.channelInfoImage=void 0);try{const J=JSON.stringify(U,null,2),oe=new Blob([J],{type:"application/json"}),Me=URL.createObjectURL(oe),Te=document.createElement("a");Te.setAttribute("href",Me),Te.setAttribute("download",`render_settings_${w}.json`),document.body.appendChild(Te),Te.click(),Te.remove(),URL.revokeObjectURL(Me)}catch(J){console.error("Export failed:",J),$e.error("Failed to export settings.")}},it=w=>{const U=w.target.files?.[0];if(!U)return;const J=new FileReader;J.onload=oe=>{try{const Me=JSON.parse(oe.target?.result);if(Me&&typeof Me=="object"){const{resolution:Te,aspectRatio:Ce,renderCodec:Ie,renderFps:fe,renderQuality:ge,renderEngine:Re,ffmpegCodec:je,preset:Fe,customFontName:Ze,...G}=Me,D={...ng,...G};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration","lyricLineHeight"].forEach(le=>{D[le]!==void 0&&(D[le]=Number(D[le]))}),D.useCustomHighlightColors!==void 0&&(D.useCustomHighlightColors=!!D.useCustomHighlightColors),D.useRealColorMedia!==void 0&&(D.useRealColorMedia=!!D.useRealColorMedia),D.showChannelInfo!==void 0&&(D.showChannelInfo=!!D.showChannelInfo),D.showIntro!==void 0&&(D.showIntro=!!D.showIntro),D.showTitle!==void 0&&(D.showTitle=!!D.showTitle),D.showArtist!==void 0&&(D.showArtist=!!D.showArtist),D.showCover!==void 0&&(D.showCover=!!D.showCover),D.showLyrics!==void 0&&(D.showLyrics=!!D.showLyrics),D.highlightEffect&&(!D.highlightColor||!D.highlightBackground)){const le=hd(D.highlightEffect);le&&(D.highlightColor||(D.highlightColor=le.color),D.highlightBackground||(D.highlightBackground=le.bg))}const we=(le,E)=>E.some(I=>I.options.some(q=>q.value===le));D.textEffect&&!we(D.textEffect,ig)&&(D.textEffect="shadow"),D.textAnimation&&!we(D.textAnimation,og)&&(D.textAnimation="none"),D.transitionEffect&&!we(D.transitionEffect,lg)&&(D.transitionEffect="none"),D.visualTransitionType&&!we(D.visualTransitionType,ag)&&(D.visualTransitionType="none"),D.highlightEffect&&!we(D.highlightEffect,pd)&&(D.highlightEffect="karaoke"),D.backgroundSource&&!we(D.backgroundSource,sg)&&(D.backgroundSource="custom"),["current","playlist"].includes(D.renderMode)||(D.renderMode="current"),["left","center","right"].includes(D.textAlign)||(D.textAlign="center"),["top","center","bottom"].includes(D.contentPosition)||(D.contentPosition="center"),D.lyricDisplayMode&&!we(D.lyricDisplayMode,md)&&(D.lyricDisplayMode="all"),["normal","bold"].includes(D.fontWeight)||(D.fontWeight="bold"),["normal","italic"].includes(D.fontStyle)||(D.fontStyle="normal"),["none","underline","line-through"].includes(D.textDecoration)||(D.textDecoration="none"),uy.includes(D.textCase)||(D.textCase="none"),["auto","manual"].includes(D.introMode)||(D.introMode="auto"),D.lyricStyleTarget&&!["active-only","all"].includes(D.lyricStyleTarget)&&(D.lyricStyleTarget="active-only");const he=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];D.infoPosition&&!he.includes(D.infoPosition)&&(D.infoPosition="top-left"),D.infoStyle&&!we(D.infoStyle,rg)&&(D.infoStyle="classic"),D.channelInfoPosition&&!he.includes(D.channelInfoPosition)&&(D.channelInfoPosition="bottom-right"),D.channelInfoStyle&&!we(D.channelInfoStyle,cg)&&(D.channelInfoStyle="classic"),t(D),Te&&T(Te),Ce&&N(Ce),Ie&&H(Ie),fe&&ze(Number(fe)),ge&&ce(ge),Re&&ve(Re),je&&_e(je),a(Fe||"custom"),Ze&&Ze!==v?$e.success(`Settings loaded. Note: Config used font "${Ze}".`):$e.success("Settings loaded successfully!")}}catch(Me){console.error(Me),$e.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},J.readAsText(U),w.target.value=""};return Z.useEffect(()=>{const w=U=>{ot.current&&!ot.current.contains(U.target)&&r()};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[r]),f.jsxs("div",{ref:ot,onMouseDown:w=>w.stopPropagation(),className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[f.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(xr,{size:18,className:"text-purple-400"}),f.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{ref:V,type:"file",accept:".json,.txt",className:"hidden",onChange:it}),f.jsx("button",{onClick:()=>V.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:f.jsx(Yo,{size:16})}),f.jsx("button",{onClick:He,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:f.jsx(Kx,{size:16})}),f.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),f.jsx("button",{onClick:xe,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:f.jsx(Xu,{size:16})}),f.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:f.jsx(Ei,{size:20})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Qu,{size:14})," Visual Preset"]}),f.jsx(wi,{value:o,onChange:w=>yt(w),groups:Md})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(es,{size:14})," Render Scope"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("button",{onClick:()=>de("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),f.jsx("button",{onClick:()=>de("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(y0,{size:14})," Background Source"]}),f.jsx(wi,{value:n.backgroundSource,onChange:w=>{w==="gradient"&&!n.backgroundGradient?(a("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):w==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(a("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):w==="color"&&!n.backgroundColor?(a("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):de("backgroundSource",w)},groups:sg}),n.backgroundSource==="smart-gradient"&&f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),f.jsx("input",{type:"text",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&f.jsx("input",{type:"text",value:n.backgroundGradient,onChange:w=>de("backgroundGradient",w.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&f.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),f.jsx("input",{ref:Et,type:"file",accept:"image/*",onChange:se,className:"hidden"}),n.backgroundImage?f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:f.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),f.jsx("button",{onClick:()=>de("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),f.jsx("button",{onClick:()=>Et.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:f.jsx(xr,{size:14})})]}):f.jsxs("button",{onClick:()=>Et.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[f.jsx(Yo,{size:14}),f.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(xb,{size:14})," Background Effects"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[f.jsx("button",{onClick:()=>de("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),f.jsx("button",{onClick:()=>de("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&f.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),f.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:f.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:w=>de("backgroundBlurStrength",parseInt(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),f.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Real Color Media Source"}),f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Disable dark dimming effect on background"})]}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.useRealColorMedia??!1,onChange:w=>de("useRealColorMedia",w.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),f.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.enableGradientOverlay??!1,onChange:w=>de("enableGradientOverlay",w.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Tr,{size:14})," Lyric Display Mode"]}),f.jsx(wi,{value:n.lyricDisplayMode,onChange:w=>de("lyricDisplayMode",w),groups:md})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Qu,{size:14})," Highlight Effect"]}),f.jsx(wi,{value:n.highlightEffect||"none",onChange:w=>{de("highlightEffect",w)},groups:pd}),n.highlightEffect&&n.highlightEffect!=="none"&&f.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[f.jsxs("button",{onClick:()=>de("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[f.jsx("span",{children:"Custom Colors"}),f.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:f.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&f.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:w=>de("highlightColor",w.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:w=>de("highlightColor",w.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:w=>de("highlightBackground",w.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:w=>de("highlightBackground",w.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Sb,{size:14})," Visible Elements"]}),f.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(w=>f.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[f.jsx("span",{className:"text-xs text-zinc-300",children:w.label}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n[w.key],onChange:U=>de(w.key,U.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},w.key))})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx($o,{size:14})," Intro Settings"]}),f.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[f.jsx("button",{onClick:()=>de("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),f.jsx("button",{onClick:()=>de("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&f.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),f.jsx("textarea",{value:n.introText,onChange:w=>de("introText",w.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(y0,{size:14})," Channel Info / Watermark"]}),f.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[f.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:w=>de("showChannelInfo",w.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&f.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),f.jsx("input",{ref:xt,type:"file",accept:"image/*",onChange:L,className:"hidden"}),n.channelInfoImage?f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:f.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),f.jsx("button",{onClick:()=>de("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),f.jsx("button",{onClick:()=>xt.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:f.jsx(xr,{size:14})})]}):f.jsxs("button",{onClick:()=>xt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[f.jsx(Yo,{size:14}),f.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),f.jsx("textarea",{value:n.channelInfoText??"",onChange:w=>de("channelInfoText",w.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>de("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),f.jsx(wi,{value:n.channelInfoStyle||"classic",onChange:w=>de("channelInfoStyle",w),groups:cg})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Wa,{size:12})}),f.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:w=>de("channelInfoMarginScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Wa,{size:12})}),f.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:w=>de("channelInfoSizeScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx($l,{size:14})," Song Info Design"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>de("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),f.jsx(wi,{value:n.infoStyle||"classic",onChange:w=>de("infoStyle",w),groups:rg})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Wa,{size:12})}),f.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:w=>de("infoMarginScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx($o,{size:12})}),f.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:w=>de("infoSizeScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx($o,{size:14})," Typography & Style"]}),f.jsxs("div",{className:"space-y-4 pt-1",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),f.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(w=>f.jsx("button",{onClick:()=>de("textAlign",w),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===w?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:w},w))})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[f.jsx("button",{onClick:()=>de("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:f.jsx(zx,{size:14})}),f.jsx("button",{onClick:()=>de("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:f.jsx(g0,{size:14})}),f.jsx("button",{onClick:()=>de("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:f.jsx(kx,{size:14})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[f.jsx("button",{onClick:()=>de("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:f.jsx(Lx,{size:14})}),f.jsx("button",{onClick:()=>de("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:f.jsx(cb,{size:14})}),f.jsx("button",{onClick:()=>de("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:f.jsx(t1,{size:14})}),f.jsx("button",{onClick:()=>de("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:f.jsx(Kb,{size:14})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[f.jsx("button",{onClick:()=>de("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),f.jsx("button",{onClick:()=>de("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),f.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>de("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),f.jsx("button",{onClick:()=>de("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),f.jsx("button",{onClick:()=>de("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),f.jsx("button",{onClick:()=>de("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),f.jsx("button",{onClick:()=>de("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),f.jsx("button",{onClick:()=>de("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),f.jsx(jA,{value:n.fontFamily,onChange:w=>de("fontFamily",w),customFontName:v,groups:YA})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),f.jsx("input",{ref:pt,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[f.jsx($o,{size:14,className:"text-purple-400 shrink-0"}),f.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),f.jsx("button",{onClick:()=>{de("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),f.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:f.jsx(Er,{size:14})})]}):f.jsxs("button",{onClick:()=>pt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[f.jsx(Yo,{size:14}),f.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx($o,{size:12})}),f.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:w=>de("fontSizeScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),f.jsx("span",{className:"text-zinc-300",children:f.jsx($o,{size:16})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Current Line Height"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.lyricLineHeight||1.2).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(g0,{size:12})}),f.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:n.lyricLineHeight||1.2,onChange:w=>de("lyricLineHeight",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&f.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.fontColor,onChange:w=>de("fontColor",w.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.fontColor,onChange:w=>de("fontColor",w.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),f.jsx(wi,{value:n.textEffect,onChange:w=>de("textEffect",w),groups:ig})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),f.jsx(wi,{value:n.textAnimation,onChange:w=>de("textAnimation",w),groups:og})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),f.jsx(wi,{value:n.transitionEffect,onChange:w=>de("transitionEffect",w),groups:lg})]}),f.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),n.visualTransitionDuration&&f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.visualTransitionDuration.toFixed(1),"s"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(wi,{value:n.visualTransitionType||"none",onChange:w=>de("visualTransitionType",w),groups:ag})}),n.visualTransitionType&&n.visualTransitionType!=="none"&&f.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:f.jsx("input",{type:"range",min:"0.1",max:"5.0",step:"0.1",value:n.visualTransitionDuration||1,onChange:w=>de("visualTransitionDuration",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),f.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(es,{size:14})," Output Settings"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),f.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),f.jsx(wi,{value:String(ye),onChange:w=>ze(parseInt(w)),groups:OA})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),f.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(w=>f.jsx("button",{onClick:()=>N(w),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===w?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:w},w))})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Engine"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>ve("mediarecorder"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Le==="mediarecorder"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses browser's MediaRecorder API. Renders in realtime while playing audio.",children:"MediaRecorder"}),f.jsx("button",{onClick:()=>ve("ffmpeg"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Le==="ffmpeg"?"bg-orange-500 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses FFmpeg WASM. Frame-by-frame rendering with professional codecs. Faster than realtime!",children:"FFmpeg "})]}),f.jsx("p",{className:"text-[9px] text-zinc-600 ml-1 leading-tight",children:Le==="mediarecorder"?"Realtime recording while audio plays. Browser-dependent codecs.":"Frame-by-frame capture. With pro codecs (H.264, H.265)."})]}),Le==="mediarecorder"?f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),f.jsx(wi,{value:O,onChange:w=>H(w),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...j]}]})]}):f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FFmpeg Codec"}),f.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{label:"H.264",value:"h264",desc:"Best Compatibility"},{label:"H.265",value:"h265",desc:"Higher Quality"}].map(w=>f.jsxs("button",{onClick:()=>_e(w.value),className:`py-2 px-2 rounded-md text-[10px] font-medium transition-all border text-left ${Ke===w.value?"bg-orange-500 border-orange-400 text-white":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"}`,title:w.desc,children:[f.jsx("div",{className:"font-bold",children:w.label}),f.jsx("div",{className:"text-[8px] opacity-75",children:w.desc})]},w.value))})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>ce("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),f.jsx("button",{onClick:()=>ce("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),f.jsx("button",{onClick:()=>ce("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),f.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[f.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[f.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",f.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),f.jsxs("button",{onClick:()=>ie(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[f.jsx(v0,{size:14})," View Keyboard Shortcuts"]})]})]}),Ee&&f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>ie(!1),children:f.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:w=>w.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[f.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[f.jsx(v0,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),f.jsx("button",{onClick:()=>ie(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:f.jsx(Ei,{size:18})})]}),f.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),f.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[f.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),f.jsxs("div",{className:"flex gap-1 items-center",children:[f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),f.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),f.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),f.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:f.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",f.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),f.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[f.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[f.jsx(es,{size:16})," Start Render"]}),f.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},dy=(n,t,o,a,r,u,h,y,v,m,x,b,T,A,N,O=!0,H=!0)=>{const j=w=>{const U=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return U?{r:parseInt(U[1],16),g:parseInt(U[2],16),b:parseInt(U[3],16)}:{r:255,g:255,b:255}},re=w=>{let U=0,J=0;if(w instanceof ImageBitmap?(U=w.width,J=w.height):w instanceof HTMLVideoElement?(U=w.videoWidth,J=w.videoHeight):(U=w.width,J=w.height),U&&J){const oe=Math.max(t/U,o/J),Me=t/2-U/2*oe,Te=o/2-J/2*oe;n.drawImage(w,Me,Te,U*oe,J*oe)}},ce=(w,U,J)=>{if(U.includes(`
`))return U.split(`
`).flatMap(Ie=>ce(w,Ie,J));const oe=U.split(" ");let Me=[],Te=oe[0]||"";for(let Ie=1;Ie<oe.length;Ie++){const fe=oe[Ie],ge=Te+" "+fe;w.measureText(ge).width<J?Te=ge:(Me.push(Te),Te=fe)}Me.push(Te);const Ce=[];for(const Ie of Me)if(w.measureText(Ie).width<=J)Ce.push(Ie);else{let fe="";for(const ge of Ie)w.measureText(fe+ge).width<=J?fe+=ge:(fe&&Ce.push(fe),fe=ge);fe&&Ce.push(fe)}return Ce},ye=(w,U,J,oe,Me,Te)=>{if(Me==="vhs"&&w instanceof CanvasRenderingContext2D)w.save(),w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(U,J-2,oe),w.fillStyle="#00ff00",w.fillText(U,J,oe),w.fillStyle="#0000ff",w.fillText(U,J+2,oe),w.restore();else if(Me==="3d"){const Ce=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let Ie=1;Ie<=4;Ie++)w.fillText(U,J+Ie,oe+Ie);w.fillStyle=Ce,w.fillText(U,J,oe)}else if(Me==="neon"){const Ce=w.fillStyle;w.shadowColor=Ce,w.shadowBlur=20,w.fillText(U,J,oe),w.shadowBlur=40,w.fillText(U,J,oe)}else if(Me==="outline")w.strokeText(U,J,oe),w.fillText(U,J,oe);else if(Me==="gradient"){const Ce=w.createLinearGradient(J,oe-20,J,oe+20);Ce.addColorStop(0,w.fillStyle),Ce.addColorStop(1,"#ffffff"),w.fillStyle=Ce,w.fillText(U,J,oe)}else if(Me==="fire")w.save(),w.shadowBlur=5,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(U,J,oe),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(U,J+1,oe-1),w.restore();else if(Me==="emboss")w.fillStyle="rgba(255,255,255,0.7)",w.fillText(U,J-1,oe-1),w.fillStyle="rgba(0,0,0,0.7)",w.fillText(U,J+1,oe+1),w.fillStyle="rgba(128,128,128,0.5)",w.fillText(U,J,oe);else if(Me==="mirror")w.fillText(U,J,oe),w.save(),w.translate(J,oe),w.scale(1,-1),w.translate(-J,-oe),w.globalAlpha*=.2,w.fillText(U,J,oe-40),w.restore();else if(Me==="neon-multi")w.fillStyle,w.shadowBlur=10,w.shadowColor="#fff",w.fillText(U,J,oe),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(U,J,oe),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(U,J,oe);else if(Me==="gold"){const Ce=w.createLinearGradient(J,oe-20,J,oe+20);Ce.addColorStop(0,"#d4af37"),Ce.addColorStop(1,"#C5A028"),w.fillStyle=Ce,w.fillText(U,J,oe)}else if(Me==="chrome"){const Ce=w.createLinearGradient(J,oe-20,J,oe+20);Ce.addColorStop(0,"#ebebeb"),Ce.addColorStop(.5,"#616161"),Ce.addColorStop(.51,"#ebebeb"),Ce.addColorStop(1,"#ebebeb"),w.fillStyle=Ce,w.fillText(U,J,oe)}else if(Me==="frozen")w.shadowColor="#03A9F4",w.shadowBlur=20,w.fillStyle="#ffffff",w.fillText(U,J,oe);else if(Me==="rainbow"){const Ce=w.createLinearGradient(J-100,oe,J+100,oe);Ce.addColorStop(0,"violet"),Ce.addColorStop(.16,"indigo"),Ce.addColorStop(.32,"blue"),Ce.addColorStop(.48,"green"),Ce.addColorStop(.64,"yellow"),Ce.addColorStop(.8,"orange"),Ce.addColorStop(1,"red"),w.fillStyle=Ce,w.fillText(U,J,oe)}else Me==="retro"?(w.fillStyle="#ff00ff",w.shadowColor="#00ffff",w.shadowBlur=0,w.shadowOffsetX=4,w.shadowOffsetY=4,w.fillText(U,J,oe)):Me==="hologram"?(w.fillStyle="rgba(0, 255, 255, 0.7)",w.shadowColor="rgba(0,255,255,0.5)",w.shadowBlur=10,w.fillText(U,J,oe)):(Me==="comic"&&(w.lineWidth=3,w.strokeStyle="#000000",w.strokeText(U,J,oe),w.fillStyle="#ffcc00"),w.fillText(U,J,oe));if(Te&&Te!=="none"){const Ie=w.measureText(U).width;let fe=J;if(w.textAlign==="center"?fe=J-Ie/2:w.textAlign==="right"&&(fe=J-Ie),w.save(),w.beginPath(),w.lineWidth=Math.max(2,4*ie),w.strokeStyle=w.fillStyle,Te.includes("line-through")&&(w.moveTo(fe,oe),w.lineTo(fe+Ie,oe)),Te.includes("underline")){const ge=w.font.match(/(\d+(\.\d+)?)px/),Re=ge?parseFloat(ge[1]):50,je=oe+Re*.4;w.moveTo(fe,je),w.lineTo(fe+Ie,je)}w.stroke(),w.restore()}},ze=(w,U,J,oe,Me,Te,Ce,Ie,fe,ge,Re,je,Fe)=>{const Ze=Ie?.textCase||"none",G=(C,te)=>{if(!C)return C;if(Ze==="upper")return C.toUpperCase();if(Ze==="lower")return C.toLowerCase();if(Ze==="title")return C.replace(/\w\S*/g,ke=>ke.charAt(0).toUpperCase()+ke.substr(1).toLowerCase());if(Ze==="sentence"){const ke=C.toLowerCase();return te?ke.charAt(0).toUpperCase()+ke.slice(1):ke}return Ze==="invert"?C.replace(/\w\S*/g,ke=>ke.charAt(0).toLowerCase()+ke.slice(1).toUpperCase()):C};let D=U.words||[];if(D.length===0){const C=U.text.split(`
`);D=[],C.forEach((te,ke)=>{const Ye=te.split(" ").map(nt=>({text:nt,startTime:U.time,endTime:U.endTime||U.time+3}));D.push(...Ye),ke<C.length-1&&D.push({text:`
`,startTime:U.time,endTime:U.endTime})})}const pe=D.filter(C=>C.text===`
`||C.text.trim().length>0).map((C,te)=>({...C,text:C.text===`
`?`
`:G(C.text,te===0).trim()}));w.font=`${je} ${Re} ${ge}px ${fe}`;const we=[];let he=[],le=0,E=.3;["default","custom"].includes(m)?E=.25:m==="monospace"&&(E=.5);const I=w.measureText("M").width*E;pe.forEach((C,te)=>{if(C.text===`
`){he.length>0&&we.push(he),he=[],le=0;return}const ke=w.measureText(C.text).width;let nt=!C.text.endsWith(" ");const Be=/[-]$/,Lt=/^[-]/;Be.test(C.text.trim())&&(nt=!1);const Je=pe[te+1];Je&&(Lt.test(Je.text.trim())||Je.text===`
`)&&(nt=!1);const Jt=nt?I:0;le+ke>Me&&he.length>0&&(we.push(he),he=[],le=0),he.push(C),le+=ke+Jt}),he.length>0&&we.push(he);const q=oe-(we.length-1)*Te/2;let M=Ie.highlightColor||"#fb923c",ee=Ie.highlightBackground||"#ffffff";const z=Ie.highlightEffect||"none";Ie.useCustomHighlightColors||(z.includes("blue")||z.includes("cyan")?(M="#3b82f6",ee="#3b82f6"):z.includes("purple")?(M="#a855f7",ee="#a855f7"):z.includes("green")?(M="#22c55e",ee="#22c55e"):z.includes("pink")?(M="#ec4899",ee="#ec4899"):z.includes("neon")?(M="#ffffff",ee="#ffffff"):z.includes("gold")?(M="#FFD700",ee="#B8860B"):z.includes("chrome")?(M="#E0E0E0",ee="#757575"):z.includes("fire")?(M="#FF4500",ee="#FF0000"):z.includes("glass")?(M="#ffffff",ee="rgba(255,255,255,0.1)"):z==="karaoke"&&(M="#fb923c",ee="#fb923c"));let ae=Ie.fontColor||"#ffffff";we.forEach((C,te)=>{const ke=q+te*Te;let Ye=0;C.forEach((Be,Lt)=>{if(Ye+=w.measureText(Be.text).width,Lt<C.length-1){let Jt=!Be.text.endsWith(" ");const Nt=/[-]$/,lt=/^[-]/;Nt.test(Be.text.trim())&&(Jt=!1);const Ne=C[Lt+1];Ne&&lt.test(Ne.text.trim())&&(Jt=!1),Ye+=Jt?I:0}});let nt=J;w.textAlign==="center"?nt=J-Ye/2:w.textAlign==="right"&&(nt=J-Ye),w.save(),w.textAlign="left",w.textBaseline="middle",C.forEach((Be,Lt)=>{const Je=w.measureText(Be.text).width,Jt=Ce>=Be.startTime,Nt=Ce>=Be.startTime&&Ce<Be.endTime;let lt=ae;const Ne=z.includes("fill")||z==="karaoke-smooth",ct=Ne?Jt:Nt;if(ct&&z!=="none")if(z==="karaoke-smooth")if(Nt){const We=Be.endTime-Be.startTime,vt=Ce-Be.startTime,$t=Math.max(0,Math.min(1,vt/We)),ei=w.createLinearGradient(nt,0,nt+Je,0);ei.addColorStop($t,M),ei.addColorStop(Math.min(1,$t+.001),ae),lt=ei}else lt=M;else lt=M;if(w.save(),w.fillStyle=lt,(Nt||Ne&&Jt)&&(z.includes("pill")||z.includes("box")||z.includes("rounded")||z.includes("fill")||z.includes("glass"))&&ct){const We=z.includes("pill")?ge*.4:ge*.15;w.fillStyle=ee;let vt=4*Fe;z.includes("pill")?vt=999:z.includes("rounded")||z.includes("glass")?vt=8*Fe:z.includes("box")&&(vt=0),z.includes("glass")&&(w.fillStyle="rgba(255,255,255,0.1)",w.shadowColor="rgba(255,255,255,0.2)",w.shadowBlur=10),w.beginPath(),w.roundRect?w.roundRect(nt-We,ke-Te/2,Je+We*2,Te,vt):w.rect(nt-We,ke-Te/2,Je+We*2,Te),w.fill(),z.includes("glass")&&(w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.stroke()),z.includes("fill")||z.includes("pill")||z.includes("box")||z.includes("rounded")?(w.fillStyle="#000000",lt="#000000"):w.fillStyle=M}if(ct){if(z.includes("underline")){const We=Math.max(2,ge*.08),vt=ke+ge*.6;w.fillStyle=M,w.fillRect(nt,vt,Je,We),w.fillStyle=lt}if((z.includes("glow")||z.includes("neon"))&&(z.includes("neon")?(w.fillStyle="#ffffff",w.shadowColor=M,w.shadowBlur=20):(w.shadowColor=M,w.shadowBlur=10)),z.includes("outline")&&(w.strokeStyle=M,w.lineWidth=2*Fe,w.strokeText(Be.text,nt,ke),w.fillStyle="transparent",z==="karaoke-outline"&&(lt="transparent",w.fillStyle="transparent")),z.includes("shadow")&&(w.shadowColor="#000000",w.shadowOffsetX=3*Fe,w.shadowOffsetY=3*Fe,w.shadowBlur=0),z.includes("gradient")){const We=w.createLinearGradient(nt,ke-Te/2,nt+Je,ke+Te/2);We.addColorStop(0,M),We.addColorStop(1,ee),w.fillStyle=We,lt=We}}let ut=ke,Ve=nt,It=0,Tt=1,gt=1,jt=1,xn=0;if(ct){const We=Ce-Be.startTime;if(z.includes("bounce")||z==="karaoke-bounce")ut-=10*Fe;else if(z.includes("wave"))ut+=Math.sin(Ce*5+Lt)*8*Fe;else if(z.includes("pulse")){const $t=1+Math.sin(Ce*6)*.1;Tt=$t,gt=$t}else if(z.includes("shake"))Ve+=(Math.random()-.5)*6*Fe,ut+=(Math.random()-.5)*6*Fe;else if(z.includes("wobble"))It=Math.sin(Ce*6)*.1;else if(z.includes("rotate")&&!z.includes("in"))It=Math.sin(Ce*3)*.1;else if(z.includes("spin"))It=Ce*3%(Math.PI*2);else if(z.includes("jello"))Tt=1+Math.sin(Ce*8)*.15,gt=1-Math.sin(Ce*8)*.15;else if(z.includes("heartbeat")){const $t=Ce*2%1;($t<.15||$t>.3&&$t<.45)&&(Tt=1.15,gt=1.15)}else if(z.includes("flash"))jt=.5+Math.sin(Ce*10)*.5;else if(z.includes("tada")){const $t=Ce*2%1;$t<.1?(It=-.05,Tt=.9):$t<.2&&(It=.05,Tt=1.1)}else z.includes("swing")?It=Math.sin(Ce*4)*.15:z.includes("glitch")&&Math.sin(Ce*15)>.8&&(Ve+=(Math.random()-.5)*10,ut+=(Math.random()-.5)*10);const vt=.3;if(We<vt){const $t=We/vt,Gt=(Mn=>1-Math.pow(1-Mn,3))($t);if(z.includes("fade"))jt=$t;else if(z.includes("slide"))ut+=(1-Gt)*30*Fe,jt=Gt;else if(z.includes("drop"))ut-=(1-Gt)*50*Fe,jt=Gt;else if(z.includes("zoom")||z.includes("scale")){const Mn=.5+.5*Gt;Tt*=Mn,gt*=Mn}else if(z.includes("elastic")){const Mn=$t===0?0:$t===1?1:Math.pow(2,-10*$t)*Math.sin(($t*10-.75)*(2*Math.PI)/3)+1;Tt*=Mn,gt*=Mn}else if(z.includes("flip"))gt*=Gt;else if(z.includes("rotate-in"))It+=(1-Gt)*-1,jt=Gt;else if(z.includes("roll"))Ve-=(1-Gt)*50*Fe,It-=(1-Gt)*Math.PI,jt=Gt;else if(z.includes("lightspeed"))Ve+=(1-Gt)*100*Fe,jt=Gt;else if(z.includes("blur"))xn=(1-Gt)*10,jt=Gt;else if(z.includes("shatter")){const Mn=1+(1-Gt)*2;Tt*=Mn,gt*=Mn,xn=(1-Gt)*10,jt=Gt}else z.includes("spiral")&&(Tt*=Gt,gt*=Gt,It+=(1-Gt)*Math.PI*2)}else z.includes("scale")&&(Tt*=1.3,gt*=1.3)}if(w.save(),jt<1&&(w.globalAlpha*=jt),xn>0&&(w.filter=`blur(${xn}px)`),It!==0||Tt!==1||gt!==1){const We=Ve+Je/2,vt=ut;w.translate(We,vt),w.rotate(It),w.scale(Tt,gt),w.translate(-We,-vt)}if(ct){if(z.includes("gradient")||z.includes("chrome")||z.includes("gold")){const We=w.createLinearGradient(Ve,ut-Te/2,Ve,ut+Te/2);z.includes("gold")?(We.addColorStop(0,"#d4af37"),We.addColorStop(1,"#C5A028")):z.includes("chrome")?(We.addColorStop(0,"#ebebeb"),We.addColorStop(.5,"#616161"),We.addColorStop(.51,"#ebebeb"),We.addColorStop(1,"#ebebeb")):(We.addColorStop(0,M),We.addColorStop(1,ee)),w.fillStyle=We}if(z.includes("shadow")&&(w.save(),w.fillStyle="#000000",w.fillText(Be.text,Ve+2*Fe,ut+2*Fe),w.restore()),z.includes("3d")){const We=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let vt=1;vt<=3;vt++)w.fillText(Be.text,Ve+vt*Fe,ut+vt*Fe);w.fillStyle=We}if(z.includes("neon-multi"))w.shadowBlur=10,w.shadowColor="#fff",w.fillText(Be.text,Ve,ut),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(Be.text,Ve,ut),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(Be.text,Ve,ut);else if(z.includes("retro")||z.includes("vhs")){const We=Math.sin(Ce*5)*2*Fe,vt=Math.random()>.95?(Math.random()-.5)*5:0;w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(Be.text,Ve-3*Fe+We,ut+vt),w.fillStyle="#00ff00",w.fillText(Be.text,Ve+vt,ut-We),w.fillStyle="#0000ff",w.fillText(Be.text,Ve+3*Fe-We,ut+vt)}else if(z.includes("fire")){const We=Math.abs(Math.sin(Ce*15))*5,vt=Math.sin(Ce*20)*1*Fe;w.shadowBlur=5+We,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(Be.text,Ve,ut+vt),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(Be.text,Ve+Math.sin(Ce*25)*1*Fe,ut-1*Fe+vt)}else if(z.includes("typewriter")){const We=Ce-Be.startTime,vt=Be.endTime-Be.startTime,$t=Math.min(1,Math.max(0,We/vt)),ei=Math.floor(Be.text.length*$t),Gt=Be.text.substring(0,ei);z.includes("outline")?(w.strokeStyle=M,w.strokeText(Gt,Ve,ut)):w.fillText(Gt,Ve,ut)}else!z.includes("neon-multi")&&!z.includes("retro")&&!z.includes("vhs")&&!z.includes("fire")&&(z.includes("outline")?(w.strokeStyle=M,w.lineWidth=2*Fe,w.strokeText(Be.text,Ve,ut)):w.fillText(Be.text,Ve,ut))}else w.fillText(Be.text,Ve,ut);const un=Ie?.textDecoration||"none";if(un!=="none"){if(w.lineWidth=Math.max(2,3*Fe),w.strokeStyle=lt,w.beginPath(),un.includes("underline")&&!z.includes("underline")){const We=ut+ge*.45;w.moveTo(Ve,We),w.lineTo(Ve+Je,We)}un.includes("line-through")&&(w.moveTo(Ve,ut),w.lineTo(Ve+Je,ut)),w.stroke()}w.restore(),w.restore();let In=!Be.text.endsWith(" ");const Li=/[-]$/,Ui=/^[-]/;Li.test(Be.text.trim())&&(In=!1);const bn=C[Lt+1];bn&&Ui.test(bn.text.trim())&&(In=!1),nt+=Je+(In?I:0)}),w.restore()})},Le=(w,U,J,oe,Me,Te,Ce,Ie)=>{const fe=ce(w,U,Me),ge=oe-(fe.length-1)*Te/2;fe.forEach((Re,je)=>{const Fe=ge+je*Te;if(Ce==="glass"){const Ze=w.measureText(Re).width;w.save(),w.fillStyle="rgba(255, 255, 255, 0.1)",w.beginPath(),w.roundRect?w.roundRect(J-(w.textAlign==="center"?Ze/2:w.textAlign==="right"?Ze:0)-10,Fe-Te/2,Ze+20,Te,8):w.rect(J-(w.textAlign==="center"?Ze/2:w.textAlign==="right"?Ze:0)-10,Fe-Te/2,Ze+20,Te),w.fill(),w.strokeStyle="rgba(255, 255, 255, 0.2)",w.stroke(),w.restore()}ye(w,Re,J,Fe,Ce,Ie)})},ve='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',Ke='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',_e='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',$e='"Metal Mania", cursive',De='"Fredoka One", cursive',ot='"Shadows Into Light", cursive',pt='"Dancing Script", cursive',xt='"Orbitron", sans-serif',Et='"UnifrakturMaguntia", cursive';let V=ve;m==="classic"?V=Ke:m==="monospace"?V=_e:m==="metal"?V=$e:m==="kids"?V=De:m==="sad"?V=ot:m==="romantic"?V=pt:m==="tech"?V=xt:m==="gothic"?V=Et:m==="custom"&&(V=N?.fontFamily||ve),x&&(V="CustomFont, sans-serif"),N&&N.fontFamily!=="sans-serif"&&(V=N.fontFamily);const Ee=t<=o,ie=Math.min(t,o)/1080;if(N&&(N.backgroundSource==="color"||N.backgroundSource==="smart-gradient")?n.fillStyle=N.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),N?.backgroundSource==="gradient"&&N.backgroundGradient)n.fillStyle=N.backgroundGradient,n.fillRect(0,0,t,o);else if(N?.backgroundSource==="smart-gradient"){const w=N.backgroundColor||"#312e81",U=j(w),J=n.createLinearGradient(0,0,t,o);J.addColorStop(0,w),J.addColorStop(.5,`rgb(${Math.floor(U.r*.6)}, ${Math.floor(U.g*.6)}, ${Math.floor(U.b*.6)})`),J.addColorStop(1,"#000000"),n.fillStyle=J,n.fillRect(0,0,t,o)}else if(N?.backgroundSource==="image"&&N.backgroundImage){const w=y.get("__custom_bg__");w&&re(w)}if(N&&N.backgroundBlurStrength>0?n.filter=`blur(${N.backgroundBlurStrength}px)`:T&&(n.filter="blur(12px)"),!N||N.backgroundSource==="timeline"||N.backgroundSource==="custom"){const w=N?N.backgroundSource==="timeline":!0;let U=!1;if(w){const J=N?.visualTransitionType||"none",oe=N?.visualTransitionDuration||1,Me=h.filter(Te=>Te.type==="audio"?!1:a>=Te.startTime&&a<Te.endTime||J==="crossfade"&&a>=Te.endTime&&a<Te.endTime+oe);Me.sort((Te,Ce)=>{const Ie=(Te.layer||0)-(Ce.layer||0);return Ie!==0?Ie:Te.startTime-Ce.startTime}),Me.length>0&&(Me.forEach(Te=>{const Ce=Te.layer||0;if(N&&N.layerVisibility?.visual?.[Ce]===!1)return;const Ie=Te.type==="video"?v.get(Te.id):null,fe=Te.type!=="video"?y.get(Te.id):null;let ge=1;if(J!=="none"){if(a<Te.startTime+oe){const Re=(a-Te.startTime)/oe;ge=Math.max(0,Math.min(1,Re))}if(a>=Te.endTime){let Re=!1;if(J==="crossfade"&&(Re=h.some(je=>je.id!==Te.id&&(je.layer||0)===(Te.layer||0)&&je.startTime>=Te.endTime-.1&&je.startTime<Te.endTime+.2)),!Re){const Fe=1-(a-Te.endTime)/oe;ge=Math.min(ge,Math.max(0,Math.min(1,Fe)))}}else if(J==="fade-to-black"&&a>Te.endTime-oe){const Re=(Te.endTime-a)/oe;ge=Math.min(ge,Math.max(0,Math.min(1,Re)))}}ge>0&&(n.save(),n.globalAlpha=ge,Ie?re(Ie):fe&&re(fe),n.restore())}),U=!0)}if(!U&&u.coverUrl&&h.length===0){const J=u.backgroundType==="video"?v.get("background"):null,oe=y.get("cover");J?re(J):oe&&re(oe)}}if((N&&N.backgroundBlurStrength>0||T)&&(n.filter="none"),!["just_video","none"].includes(m)&&!N?.useRealColorMedia&&(n.fillStyle=N&&(N.backgroundSource==="color"||N.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),N?.enableGradientOverlay){const w=n.createLinearGradient(0,o,0,0);w.addColorStop(0,"rgba(0, 0, 0, 0.95)"),w.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),w.addColorStop(.7,"rgba(0, 0, 0, 0)"),n.fillStyle=w,n.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const de=r.findIndex((w,U)=>{if(w.endTime!==void 0)return a>=w.time&&a<w.endTime;const J=r[U+1];return a>=w.time&&(!J||a<J.time)});let yt=de;if(yt===-1&&r.length>0)if(a<r[0].time)yt=0;else{const w=r.findIndex(U=>U.time>a);yt=w!==-1?w:r.length-1}const L=N?.introMode==="manual"&&N.introText?N.introText:`${u.title}
${u.artist}`;let se=de===-1&&a<5&&(N?.showIntro??!0)&&(N?.introMode!=="manual"||H)&&(r.length===0||a<r[0].time),xe=(Ee?50:60)*ie,He=(Ee?25:30)*ie,it=(Ee?80:100)*ie;if(m==="large"?(xe=(Ee?90:120)*ie,it=(Ee?110:140)*ie):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(xe=(Ee?80:110)*ie,it=(Ee?110:140)*ie):["sad","romantic","gothic"].includes(m)?(xe=(Ee?60:75)*ie,it=(Ee?90:120)*ie):["slideshow","subtitle"].includes(m)&&(xe=(Ee?30:40)*ie),xe*=b,He*=b,it*=b,(N?.showLyrics??!0)&&(de!==-1||se||N?.lyricDisplayMode==="all"&&r.length>0)){let w=o/2;N?.contentPosition==="top"?w=o*.15:N?.contentPosition==="bottom"&&(w=o*.9);let U=0;const J=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(J||m==="slideshow"||m==="subtitle"){const Ie=se?{text:L}:r[de]||r[yt];if(Ie){n.font=`900 ${xe}px ${V}`;const fe=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?Ie.text.toUpperCase():Ie.text,ge=ce(n,fe,t*.9);ge.length>1&&(U=(ge.length-1)*(xe*1.2)/2)}}let oe=J?-1:-2,Me=J?1:2;N?.lyricDisplayMode==="active-only"?(oe=0,Me=0):N?.lyricDisplayMode==="next-only"?(oe=0,Me=1):N?.lyricDisplayMode==="previous-next"?(oe=-1,Me=1):N?.lyricDisplayMode==="all"&&(oe=-r.length,Me=r.length);const Te=new Map,Ce=new Map;{const Ie=Math.max((Ee?30:40)*ie,it-xe);for(let fe=oe;fe<=Me;fe++){let ge=0,Re=!1;if(se&&fe===0){const je=xe*1.2,Fe=He*1.2,G=L.split(`
`).length>1;ge=je+(G?Fe:0),Re=!0}else{const je=yt+fe;if(je>=0&&je<r.length){const Fe=r[je];Re=je===de;const Ze=Re?xe:He;let G=Re?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",D=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||Re?(N?.fontWeight&&(G=N.fontWeight),N?.fontStyle&&(D=N.fontStyle)):(G="400",D="normal")),n.font=`${D} ${G} ${Ze}px ${V}`;let pe=Fe.text,we=N?.textCase||"none";we==="none"&&Re&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(we="upper"),we==="upper"?pe=pe.toUpperCase():we==="lower"?pe=pe.toLowerCase():we==="title"?pe=pe.replace(/\w\S*/g,le=>le.charAt(0).toUpperCase()+le.substr(1).toLowerCase()):we==="sentence"?pe=pe.charAt(0).toUpperCase()+pe.slice(1).toLowerCase():we==="invert"&&(pe=pe.replace(/\w\S*/g,le=>le.charAt(0).toLowerCase()+le.slice(1).toUpperCase())),ge=ce(n,pe,t*.9).length*(Ze*1.2)}}Ce.set(fe,ge)}Te.set(0,w);for(let fe=1;fe<=Me;fe++){const ge=Te.get(fe-1)??w,Re=Ce.get(fe-1)??0,je=Ce.get(fe)??0;Te.set(fe,ge+Re/2+Ie+je/2)}for(let fe=-1;fe>=oe;fe--){const ge=Te.get(fe+1)??w,Re=Ce.get(fe+1)??0,je=Ce.get(fe)??0;Te.set(fe,ge-Re/2-Ie-je/2)}}for(let Ie=oe;Ie<=Me;Ie++){let fe=null,ge=!1;if(se)Ie===0&&(fe={time:0,text:L},ge=!0);else{const Re=yt+Ie;Re>=0&&Re<r.length&&(fe=r[Re],ge=Re===de)}if(fe){N?.lyricDisplayMode,n.textAlign=N?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const Re=N?.fontColor||"#ffffff";let je=Re;if(!ge){const Ne=j(Re);je=`rgba(${Ne.r}, ${Ne.g}, ${Ne.b}, 0.5)`}let Fe=ge?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",Ze=["classic","romantic"].includes(m)?"italic":"normal",G="none";(m==="custom"||m==="default")&&((N?.lyricStyleTarget||"active-only")==="all"||ge?(N?.fontWeight&&(Fe=N.fontWeight),N?.fontStyle&&(Ze=N.fontStyle),N?.textDecoration&&(G=N.textDecoration)):(Fe="400",Ze="normal",G="none")),n.font=`${Ze} ${Fe} ${ge?xe:He}px ${V}`,n.fillStyle=je;const D=N?.transitionEffect||"none";let pe=1,we=0,he=0,le=1,E=1,I=0,q=0;if(ge&&D!=="none"){const Ne=a-fe.time,ct=fe.endTime?fe.endTime-a:.5,ut=.5,Ve=Ne<ut?Ne/ut:fe.endTime&&ct<ut?ct/ut:1;if(Ve<1){pe=Math.min(1,Ve*2);const It=gt=>1+2.70158*Math.pow(gt-1,3)+1.70158*Math.pow(gt-1,2),Tt=gt=>{const jt=2*Math.PI/3;return gt===0?0:gt===1?1:Math.pow(2,-10*gt)*Math.sin((gt*10-.75)*jt)+1};if(D==="slide")we=(1-Ve)*(Ne<ut?30:-30);else if(D==="zoom"){const gt=.5+Ve*.5;le=gt,E=gt}else if(D==="blur")I=(1-Ve)*10;else if(D==="float")we=(1-Ve)*(Ne<ut?50:-50);else if(D==="drop")we=(1-It(Ve))*-200,pe=Ve;else if(D==="flip")E=Ve;else if(D==="rotate-in")q=(1-Ve)*-Math.PI/2,pe=Ve;else if(D==="spiral")le=Ve,E=Ve,q=(1-Ve)*Math.PI*2,pe=Ve;else if(D==="shatter"){const gt=3-2*Ve;le=gt,E=gt,I=(1-Ve)*20,pe=Ve}else if(D==="lightspeed")he=(1-Ve)*300,pe=Ve;else if(D==="roll")he=(1-Ve)*-300,q=(1-Ve)*-Math.PI,pe=Ve;else if(D==="elastic"){const gt=Tt(Ve);le=gt,E=gt,pe=Ve}}}n.save(),n.globalAlpha=pe,I>0&&(n.filter=`blur(${I}px)`);const M=ge&&N?.textAnimation||"none";let ee=fe.text,z=N?.textCase||"none";z==="none"&&ge&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(z="upper"),z==="upper"?ee=ee.toUpperCase():z==="lower"?ee=ee.toLowerCase():z==="title"?ee=ee.replace(/\w\S*/g,Ne=>Ne.charAt(0).toUpperCase()+Ne.substr(1).toLowerCase()):z==="sentence"?ee=ee.charAt(0).toUpperCase()+ee.slice(1).toLowerCase():z==="invert"&&(ee=ee.replace(/\w\S*/g,Ne=>Ne.charAt(0).toLowerCase()+Ne.slice(1).toUpperCase()));let ae=0,C=0,te=1,ke=1,Ye=0;if(ge&&M!=="none")if(M==="bounce")C=Math.sin(a*6)*15*ie;else if(M==="pulse"){const Ne=1+Math.sin(a*4)*.08;te=Ne,ke=Ne}else if(M==="wave")C=Math.sin(a*4)*20*ie,Ye=Math.sin(a*4)*.05;else if(M==="glitch")Math.sin(a*10)>.8&&(ae=(Math.random()-.5)*15*ie,C=(Math.random()-.5)*15*ie);else if(M==="shake")ae=(Math.random()-.5)*5*ie,C=(Math.random()-.5)*5*ie;else if(M==="typewriter"){const ct=Math.floor((a-fe.time)*30);ee=ee.substring(0,Math.max(0,ct))}else if(M==="wobble"){Ye=Math.sin(a*5)*.05;const Ne=1+Math.sin(a*3)*.05;te=Ne,ke=Ne}else if(M==="breathe"){const Ne=1+Math.sin(a*2)*.03;te=Ne,ke=Ne}else if(M==="rotate")Ye=Math.sin(a*2)*.05;else if(M==="sway")Ye=Math.sin(a*2)*.08;else if(M==="flicker")n.globalAlpha=pe*(.8+Math.random()*.2);else if(M==="jello")te=1+Math.sin(a*6)*.1,ke=1-Math.sin(a*6)*.1;else if(M==="spin")Ye=a%2*Math.PI;else if(M==="heartbeat"){const Ne=a*1.5%1;(Ne<.1||Ne>.3&&Ne<.4)&&(te=1.1,ke=1.1)}else if(M==="tada"){const Ne=a*1.5%1;Ne<.1?(te=.9,ke=.9,Ye=-.05):Ne<.2?(te=1.1,ke=1.1,Ye=.05):(te=1,ke=1,Ye=0)}else M==="swing"&&(Ye=Math.sin(a*3)*.1);let nt=0;Te.has(Ie)?nt=Te.get(Ie)+(Ie===0?we:0):(nt=m==="subtitle"&&Ie===0&&N?.lyricDisplayMode!=="all"?o-140*ie:w+Ie*it+(Ie===0?we:0),m!=="custom"&&(Ie<0?nt-=U:Ie>0&&(nt+=U))),nt+=C;let Be=t/2;n.textAlign==="left"?Be=60*ie:n.textAlign==="right"&&(Be=t-60*ie),Be+=he+ae;const Lt=le*te,Je=E*ke,Jt=q+Ye;(Lt!==1||Je!==1||Jt!==0)&&(n.translate(Be,nt),n.rotate(Jt),n.scale(Lt,Je),n.translate(-Be,-nt));const Nt=ge?N?.textEffect||"preset":"none";if(se&&Ie===0&&N?.introMode!=="manual"){const Ne=ee.split(`
`),ct=Ne[0],ut=Ne.slice(1).join(`
`),Ve=xe*1.2,It=He*1.2,Tt=20*ie;let gt=nt;ut&&(gt=nt-It/2-Tt/2);const jt=nt+Ve/2+Tt/2;if(n.font=`${Ze} ${Fe} ${xe}px ${V}`,Le(n,ct,Be,gt,t*.9,Ve,Nt,G),ut){const xn=m==="custom"&&N?.fontWeight?N.fontWeight:"400";n.font=`${Ze} ${xn} ${He}px ${V}`,Le(n,ut,Be,jt,t*.9,It,Nt,G)}}else{const Ne=ge?xe:He;N&&N.highlightEffect&&N.highlightEffect,ge&&fe?ze(n,fe,Be,nt,t*.9,Ne*(N?.lyricLineHeight||1.2),a,N,V,Ne,Fe,Ze,ie):Le(n,ee,Be,nt,t*.9,Ne*(N?.lyricLineHeight||1.2),Nt,G)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const w=N?N.showTitle||N.showArtist:!0,U=N?N.showCover:!0;if(w||U)if(m==="custom"||m==="default"){const J=N?.infoPosition||"top-left",oe=N?.infoStyle||"classic",Me=oe==="box",Te=Me?16*ie:12*ie,Ce=40*ie*(N?.infoMarginScale??1);let Ie="left",fe="top";J.includes("left")?Ie="left":J.includes("right")?Ie="right":Ie="center",J.includes("top")?fe="top":fe="bottom";const ge=N?.infoSizeScale??1,Re=(oe==="minimal"||oe==="modern"?0:100*ie)*ge,je=U&&Re>0&&u.coverUrl!==null,Fe=je?u.backgroundType==="video"?v.get("background"):y.get("cover"):null,Ze=(oe==="minimal"?20:oe==="modern"||oe==="modern_art"?40:28)*ie,G=(oe==="minimal"?14:oe==="modern"||oe==="modern_art"?24:18)*ie,D=Ze*ge,pe=G*ge,we=`bold ${D}px ${V}`,he=`${pe}px ${V}`,le=20*ie,E=Me?24*ie:0,I=N?.fontColor||"#ffffff",q=oe==="modern"||oe==="modern_art"?I:N?.fontColor||"#d4d4d8";n.font=we;const M=n.measureText(u.title),ee=N?.showTitle?M.width:0;n.font=he;const z=n.measureText(u.artist),ae=N?.showArtist?z.width:0;let C=0,te=0;if(Ie==="center"){C=Math.max(je&&Fe?Re:0,ee,ae)+E*2;let Ne=0;je&&Fe&&(Ne+=Re),(N?.showTitle??!0)&&(Ne+=(je&&Fe?le:0)+D),(N?.showArtist??!0)&&(Ne+=(je&&Fe||(N?.showTitle??!0)?5*ie:0)+pe),te=Ne+E*2}else{const lt=Math.max(ee,ae);C=(je&&Fe?Re+le:0)+lt+E*2;const ct=(N?.showTitle?D:0)+(N?.showArtist?pe+5*ie:0);te=Math.max(ct,je&&Fe?Re:0)+E*2}let ke=0,Ye=0;Ie==="left"?ke=Ce:Ie==="right"?ke=t-Ce:ke=t/2,fe==="top"?Ye=Ce:Ye=o-Ce;let nt=0,Be=0;Ie==="left"?nt=ke:Ie==="right"?nt=ke-C:nt=ke-C/2,fe==="top"?Be=Ye:Be=Ye-te,Me&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(nt,Be,C,te,Te),n.fill(),n.restore());const Lt=nt+E,Je=Be+E,Jt=C-E*2,Nt=te-E*2;if(Ie==="center"){let lt=Je;const Ne=Lt+Jt/2;if(n.textAlign="center",fe==="top"){if(je&&Fe){n.save(),n.beginPath();const ct=Ne-Re/2;oe==="circle_art"?n.arc(Ne,lt+Re/2,Re/2,0,Math.PI*2):n.roundRect(ct,lt,Re,Re,Te/2),n.clip(),n.drawImage(Fe,ct,lt,Re,Re),n.restore(),lt+=Re+le}(N?.showTitle??!0)&&(n.fillStyle=I,n.font=we,n.textBaseline="top",n.fillText(u.title,Ne,lt),lt+=D+5*ie),(N?.showArtist??!0)&&(n.fillStyle=q,n.font=he,n.textBaseline="top",n.fillText(u.artist,Ne,lt))}else{if(je&&Fe){n.save(),n.beginPath();const ct=Ne-Re/2;oe==="circle_art"?n.arc(Ne,lt+Re/2,Re/2,0,Math.PI*2):n.roundRect(ct,lt,Re,Re,Te/2),n.clip(),n.drawImage(Fe,ct,lt,Re,Re),n.restore(),lt+=Re+le}(N?.showTitle??!0)&&(n.fillStyle=I,n.font=we,n.textBaseline="top",n.fillText(u.title,Ne,lt),lt+=D+5*ie),(N?.showArtist??!0)&&(n.fillStyle=q,n.font=he,n.textBaseline="top",n.fillText(u.artist,Ne,lt))}}else{const lt=Ie==="right",Ne=Je+Nt/2;let ct=Lt;if(lt&&(ct=Lt+Jt),je&&Fe){const It=Ne-Re/2,Tt=lt?ct-Re:ct;n.save(),n.beginPath(),oe==="circle_art"?n.arc(Tt+Re/2,It+Re/2,Re/2,0,Math.PI*2):n.roundRect(Tt,It,Re,Re,Te/2),n.clip(),n.drawImage(Fe,Tt,It,Re,Re),n.restore(),lt?ct-=Re+le:ct+=Re+le}const ut=(N?.showTitle?D:0)+(N?.showArtist?pe+5*ie:0);let Ve=Ne-ut/2;n.textAlign=lt?"right":"left",n.textBaseline="top",(N?.showTitle??!0)&&(n.fillStyle=I,n.font=we,n.fillText(u.title,ct,Ve),Ve+=D+5*ie),(N?.showArtist??!0)&&(n.fillStyle=q,n.font=he,n.fillText(u.artist,ct,Ve))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(w){n.textAlign="center",n.textBaseline="middle";let J=80*ie;["testing","testing_up","one_line","one_line_up"].includes(m)&&(J=120*ie),(N?.showTitle??!0)&&(n.font=`bold ${20*ie}px ${V}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?u.title.toUpperCase():u.title,t/2,o-J-30*ie)),(N?.showArtist??!0)&&(n.font=`${16*ie}px ${V}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,t/2,o-J))}}else{const J=40*ie*(N?.infoMarginScale??1),oe=t===o,Me=(Ee?oe?110:150:100)*ie,Te=u.coverUrl?y.get("cover"):null,Ce=12*ie;if(Ee){const Ie=J*(oe?1.5:3),fe=t/2,ge=fe-Me/2,Re=Ie;if(U&&(n.save(),n.beginPath(),n.roundRect(ge,Re,Me,Me,Ce),n.clip(),Te?n.drawImage(Te,ge,Re,Me,Me):(n.fillStyle="#27272a",n.fillRect(ge,Re,Me,Me)),n.restore()),w){n.textAlign="center",n.textBaseline="top";const je=Re+(U?Me+25*ie:0);(N?.showTitle??!0)&&(n.font=`bold ${(oe?26:36)*ie}px ${V}`,n.fillStyle="#ffffff",n.fillText(u.title,fe,je)),(N?.showArtist??!0)&&(n.font=`${(oe?18:24)*ie}px ${V}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,fe,je+(N?.showTitle??!0?(oe?30:40)*ie:0)))}}else{const Ie=J,fe=J;if(U&&(n.save(),n.beginPath(),n.roundRect(Ie,fe,Me,Me,Ce),n.clip(),Te?n.drawImage(Te,Ie,fe,Me,Me):(n.fillStyle="#27272a",n.fillRect(Ie,fe,Me,Me)),n.restore()),w){n.textAlign="left",n.textBaseline="top";const ge=Ie+(U?Me+25*ie:0),Re=28*ie,je=fe+Me/2-Re;(N?.showTitle??!0)&&(n.font=`bold ${Re}px ${V}`,n.fillStyle="#ffffff",n.fillText(u.title,ge,je)),(N?.showArtist??!0)&&(n.font=`${18*ie}px ${V}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,ge,je+(N?.showTitle??!0?Re+5*ie:0)))}}}}if(N?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const w=N.channelInfoPosition||"bottom-right",U=N.channelInfoStyle||"classic",J=N.channelInfoSizeScale??1,oe=N.channelInfoMarginScale??1,Me=y.get("__channel_info__"),Te=N.channelInfoText;if(!(!Me&&!Te)){if(!(U==="logo"&&!Me)){if(!(U==="minimal"&&!Te)){n.save();const Ce=40*ie*oe,Ie=80*ie*J,fe=U==="modern"||U==="logo"?Ie*1.2:Ie,ge=20*ie*J,Re=y.get("__channel_info_text_svg__"),je=!!Re;let Fe=0,Ze=ge;if(je&&Re){Ze=ge*1.5;const ee=Re.width/Re.height;Fe=Ze*ee}else n.font=`bold ${ge}px sans-serif`,Te&&U!=="logo"&&(Fe=n.measureText(Te).width);const G=12*ie*J,D=12*ie*J,pe=8*ie*J;let we=0,he=0;const le=!!Me&&U!=="minimal",E=!!Te&&U!=="logo";U==="modern"?(we=Math.max(le?fe:0,E?Fe+D*2:0),he=(le?fe:0)+(le&&E?G:0)+(E?Ze+pe*2:0)):U==="box"?(we=(le?fe:0)+(le&&E?G:0)+(E?Fe:0)+D*2,he=Math.max(le?fe:0,E?Ze:0)+pe*2):U==="minimal"?(we=E?Fe+D*2:0,he=E?Ze+pe*2:0):U==="logo"?(we=fe,he=fe):(we=(le?fe:0)+(le&&E?G:0)+(E?Fe+D*2:0),he=Math.max(le?fe:0,E?Ze+pe*2:0));let I=0,q=0;w.includes("left")?I=Ce:w.includes("right")?I=t-Ce-we:w.includes("center")&&(I=(t-we)/2),w.includes("top")?q=Ce:w.includes("bottom")&&(q=o-Ce-he),U==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(I,q,we,he,12*ie*J),n.fill()):n.fillRect(I,q,we,he),n.shadowColor="transparent",n.shadowBlur=0);const M=(ee,z,ae,C,te)=>{if(U!=="box"&&U!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(ee,z,ae,C,8*ie*J),n.fill()):n.fillRect(ee,z,ae,C)),je&&Re){const ke=ee+(ae-Fe)/2,Ye=z+(C-Ze)/2;n.drawImage(Re,ke,Ye,Fe,Ze)}else{n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const ke=ee+(ae-Fe)/2,Ye=z+(C-Ze)/2+Ze*.1;n.fillText(te,ke,Ye),n.shadowColor="transparent"}};if(U==="modern"){let ee=q;if(le){const z=I+(we-fe)/2;n.drawImage(Me,z,ee,fe,fe),ee+=fe+G}if(E){const z=Fe+D*2,ae=Ze+pe*2,C=I+(we-z)/2;M(C,ee,z,ae,Te)}}else{const ee=w.includes("right");let z=I+(U==="box"?D:0);const ae=q+he/2;if(ee&&(U==="classic"||U==="circle")){if(E){const C=Fe+D*2,te=Ze+pe*2;M(z,ae-te/2,C,te,Te),z+=C+G}le&&(U==="circle"?(n.save(),n.beginPath(),n.arc(z+fe/2,ae,fe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Me,z,ae-fe/2,fe,fe),n.restore()):n.drawImage(Me,z,ae-fe/2,fe,fe))}else if(le&&(U==="circle"?(n.save(),n.beginPath(),n.arc(z+fe/2,ae,fe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Me,z,ae-fe/2,fe,fe),n.restore()):n.drawImage(Me,z,ae-fe/2,fe,fe),z+=fe+G),E){const C=Fe+(U==="box"?0:D*2),te=Ze+(U==="box"?0:pe*2);U==="box"?je&&Re?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(Re,z,ae-Ze/2,Fe,Ze),n.shadowColor="transparent"):(n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(Te,z,ae+Ze*.1),n.shadowColor="transparent"):M(z,ae-te/2,C,te,Te)}}n.restore()}}}}};var Qt;(function(n){n.LOAD="LOAD",n.EXEC="EXEC",n.FFPROBE="FFPROBE",n.WRITE_FILE="WRITE_FILE",n.READ_FILE="READ_FILE",n.DELETE_FILE="DELETE_FILE",n.RENAME="RENAME",n.CREATE_DIR="CREATE_DIR",n.LIST_DIR="LIST_DIR",n.DELETE_DIR="DELETE_DIR",n.ERROR="ERROR",n.DOWNLOAD="DOWNLOAD",n.PROGRESS="PROGRESS",n.LOG="LOG",n.MOUNT="MOUNT",n.UNMOUNT="UNMOUNT"})(Qt||(Qt={}));const KA=(()=>{let n=0;return()=>n++})(),XA=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),QA=new Error("called FFmpeg.terminate()");class ZA{#t=null;#i={};#n={};#o=[];#l=[];loaded=!1;#a=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:o,data:a}})=>{switch(o){case Qt.LOAD:this.loaded=!0,this.#i[t](a);break;case Qt.MOUNT:case Qt.UNMOUNT:case Qt.EXEC:case Qt.FFPROBE:case Qt.WRITE_FILE:case Qt.READ_FILE:case Qt.DELETE_FILE:case Qt.RENAME:case Qt.CREATE_DIR:case Qt.LIST_DIR:case Qt.DELETE_DIR:this.#i[t](a);break;case Qt.LOG:this.#o.forEach(r=>r(a));break;case Qt.PROGRESS:this.#l.forEach(r=>r(a));break;case Qt.ERROR:this.#n[t](a);break}delete this.#i[t],delete this.#n[t]})};#e=({type:t,data:o},a=[],r)=>this.#t?new Promise((u,h)=>{const y=KA();this.#t&&this.#t.postMessage({id:y,type:t,data:o},a),this.#i[y]=u,this.#n[y]=h,r?.addEventListener("abort",()=>{h(new DOMException(`Message # ${y} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(XA);on(t,o){t==="log"?this.#o.push(o):t==="progress"&&this.#l.push(o)}off(t,o){t==="log"?this.#o=this.#o.filter(a=>a!==o):t==="progress"&&(this.#l=this.#l.filter(a=>a!==o))}load=({classWorkerURL:t,...o}={},{signal:a}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#a()),this.#e({type:Qt.LOAD,data:o},void 0,a));exec=(t,o=-1,{signal:a}={})=>this.#e({type:Qt.EXEC,data:{args:t,timeout:o}},void 0,a);ffprobe=(t,o=-1,{signal:a}={})=>this.#e({type:Qt.FFPROBE,data:{args:t,timeout:o}},void 0,a);terminate=()=>{const t=Object.keys(this.#n);for(const o of t)this.#n[o](QA),delete this.#n[o],delete this.#i[o];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,o,{signal:a}={})=>{const r=[];return o instanceof Uint8Array&&r.push(o.buffer),this.#e({type:Qt.WRITE_FILE,data:{path:t,data:o}},r,a)};mount=(t,o,a)=>{const r=[];return this.#e({type:Qt.MOUNT,data:{fsType:t,options:o,mountPoint:a}},r)};unmount=t=>{const o=[];return this.#e({type:Qt.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:a}={})=>this.#e({type:Qt.READ_FILE,data:{path:t,encoding:o}},void 0,a);deleteFile=(t,{signal:o}={})=>this.#e({type:Qt.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:a}={})=>this.#e({type:Qt.RENAME,data:{oldPath:t,newPath:o}},void 0,a);createDir=(t,{signal:o}={})=>this.#e({type:Qt.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#e({type:Qt.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#e({type:Qt.DELETE_DIR,data:{path:t}},void 0,o)}var ug;(function(n){n.MEMFS="MEMFS",n.NODEFS="NODEFS",n.NODERAWFS="NODERAWFS",n.IDBFS="IDBFS",n.WORKERFS="WORKERFS",n.PROXYFS="PROXYFS"})(ug||(ug={}));const WA=new Error("failed to get response body reader"),eN=new Error("failed to complete download"),tN="Content-Length",nN=async(n,t)=>{const o=await fetch(n);let a;try{const r=parseInt(o.headers.get(tN)||"-1"),u=o.body?.getReader();if(!u)throw WA;const h=[];let y=0;for(;;){const{done:x,value:b}=await u.read(),T=b?b.length:0;if(x){if(r!=-1&&r!==y)throw eN;t&&t({url:n,total:r,received:y,delta:T,done:x});break}h.push(b),y+=T,t&&t({url:n,total:r,received:y,delta:T,done:x})}const v=new Uint8Array(y);let m=0;for(const x of h)v.set(x,m),m+=x.length;a=v.buffer}catch(r){console.log("failed to send download progress event: ",r),a=await o.arrayBuffer()}return a},Ya=async(n,t,o=!1,a)=>{const r=o?await nN(n,a):await(await fetch(n)).arrayBuffer(),u=new Blob([r],{type:t});return URL.createObjectURL(u)};let Ja=null,$u=!1,yr=!1;async function iN(n){if(Ja&&$u)return Ja;if(yr){for(;yr;)await new Promise(t=>setTimeout(t,100));if(Ja&&$u)return Ja}yr=!0;try{const t=new ZA;if(t.on("log",({message:a})=>{n?.(`[FFmpeg] ${a}`),console.log("[FFmpeg]",a)}),t.on("progress",({progress:a,time:r})=>{n?.(`[FFmpeg Progress] ${(a*100).toFixed(1)}% (${r}s)`)}),typeof window<"u"&&window.crossOriginIsolated){n?.("[FFmpeg] Cross-Origin Isolated: YES. Using Multi-Threaded Core ");const a="/ffmpeg",r="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm";let u,h,y;try{n?.("[FFmpeg] Attempting to load local core files...");const v=async(m,x)=>{const b=await fetch(m);if(!b.ok)throw new Error(`HTTP ${b.status}`);const T=b.headers.get("Content-Type");if(T&&T.includes("text/html"))throw new Error("Received HTML instead of binary");const A=await b.blob();return URL.createObjectURL(new Blob([A],{type:x}))};[u,h,y]=await Promise.all([v(`${a}/ffmpeg-core.js`,"text/javascript"),v(`${a}/ffmpeg-core.wasm`,"application/wasm"),v(`${a}/ffmpeg-core.worker.js`,"text/javascript")]),n?.("[FFmpeg] Using local core files (Offline Mode)")}catch(v){n?.("[FFmpeg] Local core files not found or failed to load. Falling back to online CDN."),console.warn("Local FFmpeg files not found:",v),[u,h,y]=await Promise.all([Ya(`${r}/ffmpeg-core.js`,"text/javascript"),Ya(`${r}/ffmpeg-core.wasm`,"application/wasm"),Ya(`${r}/ffmpeg-core.worker.js`,"text/javascript")])}await t.load({coreURL:u,wasmURL:h,workerURL:y})}else{n?.("[FFmpeg] Cross-Origin Isolated: NO. Falling back to Single-Threaded Core "),n?.("[FFmpeg] Note: Rendering will be slower. Add COOP/COEP headers to server for multithreading.");const a="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await t.load({coreURL:await Ya(`${a}/ffmpeg-core.js`,"text/javascript"),wasmURL:await Ya(`${a}/ffmpeg-core.wasm`,"application/wasm")})}return Ja=t,$u=!0,n?.("[FFmpeg] Loaded successfully"),t}finally{yr=!1}}function oN(n,t,o){const a=o==="1080p",u={low:a?28:30,med:a?23:25,high:a?18:20}[t];switch(n){case"h265":return{vcodec:"libx265",args:["-crf",u.toString(),"-preset","medium","-tag:v","hvc1"],format:"mp4",ext:"mp4"};case"vp9":return{vcodec:"libvpx-vp9",args:["-crf",u.toString(),"-b:v","0","-deadline","good","-cpu-used","2"],format:"webm",ext:"webm"};case"av1":return{vcodec:"libaom-av1",args:["-crf",(u+10).toString(),"-b:v","0","-cpu-used","4","-strict","experimental"],format:"mp4",ext:"mp4"};default:return{vcodec:"libx264",args:["-crf",u.toString(),"-preset","medium","-profile:v","high","-level","4.2"],format:"mp4",ext:"mp4"}}}async function lN(n){const{canvas:t,audioFile:o,lyrics:a,metadata:r,visualSlides:u,imageMap:h,videoMap:y,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,codec:A,aspectRatio:N,onProgress:O,onLog:H,abortSignal:j,isFirstSong:re=!0,isLastSong:ce=!0}=n;O(0,"Loading FFmpeg...");const ye=await iN(H),ze=()=>j?.aborted===!0||j?.current===!0;if(ze())throw new Error("Render aborted");O(5,"Preparing audio...");const Le=URL.createObjectURL(o),ve=await aN(Le);URL.revokeObjectURL(Le);const Ke=Math.ceil(ve*b),_e=t.getContext("2d");if(!_e)throw new Error("Failed to get canvas context");O(10,"Rendering frames...");const $e=await o.arrayBuffer();await ye.writeFile("audio.mp3",new Uint8Array($e));const De=Math.max(6,Ke.toString().length);for(let ie=0;ie<Ke;ie++){if(ze())throw await vr(ye,ie,De),new Error("Render aborted");const de=ie/b;sN(y,u,de),dy(_e,t.width,t.height,de,a,r,u,h,y,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,ve,x,ce,re);const L=await(await new Promise((He,it)=>{t.toBlob(w=>w?He(w):it(new Error("Failed to create blob")),"image/jpeg",T==="high"?.98:T==="med"?.92:.85)})).arrayBuffer(),se=`frame_${ie.toString().padStart(De,"0")}.jpg`;await ye.writeFile(se,new Uint8Array(L));const xe=10+ie/Ke*70;O(xe,`Rendering frame ${ie+1}/${Ke}`)}if(ze())throw await vr(ye,Ke,De),new Error("Render aborted");O(80,"Encoding video...");const ot=oN(A,T,n.resolution),pt=`output.${ot.ext}`,xt=["-framerate",b.toString(),"-i",`frame_%0${De}d.jpg`,"-i","audio.mp3","-c:v",ot.vcodec,...ot.args,"-c:a","aac","-b:a","192k","-pix_fmt","yuv420p","-movflags","+faststart","-shortest","-y",pt];H?.(`[FFmpeg] Running: ffmpeg ${xt.join(" ")}`);try{await ye.exec(xt)}catch(ie){throw console.error("FFmpeg encoding failed:",ie),await vr(ye,Ke,De),new Error(`FFmpeg encoding failed: ${ie}`)}O(95,"Finalizing...");const Et=await ye.readFile(pt),V=Et instanceof Uint8Array?new Uint8Array(Et):new TextEncoder().encode(Et),Ee=new Blob([V],{type:ot.format==="webm"?"video/webm":"video/mp4"});await vr(ye,Ke,De);try{await ye.deleteFile("audio.mp3"),await ye.deleteFile(pt)}catch{}return O(100,"Complete!"),{blob:Ee,duration:ve,format:ot.ext}}async function aN(n){return new Promise((t,o)=>{const a=document.createElement("audio");a.preload="metadata",a.onloadedmetadata=()=>{t(a.duration),URL.revokeObjectURL(n)},a.onerror=()=>{o(new Error("Failed to load audio metadata")),URL.revokeObjectURL(n)},a.src=n})}function sN(n,t,o){n.forEach((a,r)=>{if(r==="background"){const h=a.duration||1;h>0&&(a.currentTime=o%h);return}const u=t.find(h=>h.id===r);if(u&&u.type==="video"&&o>=u.startTime&&o<u.endTime){const h=u.playbackRate||1;let y=(o-u.startTime)*h+(u.mediaStartOffset||0);const v=u.mediaDuration||a.duration;v&&v>0&&y>=v&&(y=y%v),a.currentTime=y}})}async function vr(n,t,o){for(let a=0;a<t;a++)try{await n.deleteFile(`frame_${a.toString().padStart(o,"0")}.jpg`)}catch{}}function rN(){const{toast:n,confirm:t}=Ir(),o=Z.useRef(null),a=Z.useRef(null),r=Z.useRef(null),u=Z.useRef(null),h=Z.useRef(null),y=Z.useRef({aborted:!1}),v=Z.useRef(()=>{});Z.useEffect(()=>{VA()},[]);const[m,x]=Z.useState(null),[b,T]=Z.useState(0),[A,N]=Z.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[O,H]=Z.useState([]),[j,re]=Z.useState([]),[ce,ye]=Z.useState(0),[ze,Le]=Z.useState(!1),[ve,Ke]=Z.useState("off"),[_e,$e]=Z.useState(0),[De,ot]=Z.useState(0),[pt,xt]=Z.useState(1),[Et,V]=Z.useState(!1),[Ee,ie]=Z.useState(Pn.PLAYER),[de,yt]=Z.useState(!1),[L,se]=Z.useState(!1),[xe,He]=Z.useState(!1),[it,w]=Z.useState(!1),[U,J]=Z.useState(!1),[oe,Me]=Z.useState(0),[Te,Ce]=Z.useState("16:9"),[Ie,fe]=Z.useState("1080p"),[ge,Re]=Z.useState("default"),[je,Fe]=Z.useState(null),[Ze,G]=Z.useState("auto"),[D,pe]=Z.useState(30),[we,he]=Z.useState("med"),[le,E]=Z.useState("mediarecorder"),[I,q]=Z.useState("h264"),[M,ee]=Z.useState(""),[z,ae]=Z.useState(!1),[C,te]=Z.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",lyricLineHeight:1.2,useRealColorMedia:!1}),ke=Z.useRef(C);Z.useEffect(()=>{ke.current=C},[C]);const Ye=Z.useRef(null),nt=Z.useRef(null),Be=C.backgroundBlurStrength>0,Lt=Z.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(Q=>MediaRecorder.isTypeSupported(Q.value)),[]),[Je,Jt]=Z.useState([]),[Nt,lt]=Z.useState(-1),[Ne,ct]=Z.useState(!1),ut=()=>{const R=Ie==="1080p";switch(Te){case"9:16":return R?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return R?{w:1080,h:1440}:{w:720,h:960};case"4:3":return R?{w:1440,h:1080}:{w:960,h:720};case"1:1":return R?{w:1080,h:1080}:{w:720,h:720};case"1:2":return R?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return R?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return R?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return R?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return R?{w:1080,h:1350}:{w:720,h:900};case"20:9":return R?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return R?{w:2560,h:1080}:{w:1720,h:720};default:return R?{w:1920,h:1080}:{w:1280,h:720}}},{w:Ve,h:It}=ut(),[Tt,gt]=Z.useState(!0),[jt,xn]=Z.useState(!0),[un,Ai]=Z.useState(!1),In=Z.useMemo(()=>{const R=C.visualTransitionType||"none",Q=C.visualTransitionDuration||1;return j.filter(W=>W.type==="audio"?!1:_e>=W.startTime&&_e<W.endTime||R==="crossfade"&&_e>=W.endTime&&_e<W.endTime+Q).sort((W,be)=>{const Ge=(W.layer||0)-(be.layer||0);return Ge!==0?Ge:W.startTime-be.startTime})},[j,_e,C.visualTransitionType,C.visualTransitionDuration]),Li=j.filter(R=>R.type==="audio"&&_e>=R.startTime&&_e<R.endTime),Ui=Z.useMemo(()=>ce===0?O:O.map(R=>({...R,time:R.time+ce,endTime:R.endTime!==void 0?R.endTime+ce:void 0})),[O,ce]),bn=Ui.findIndex((R,Q)=>{if(R.endTime!==void 0)return _e>=R.time&&_e<R.endTime;const Ue=Ui[Q+1];return _e>=R.time&&(!Ue||_e<Ue.time)}),We=R=>{const Q=R.target.files?.[0];if(Q){const Ue=URL.createObjectURL(Q);x(Ue);const W={title:Q.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};N(W),Q.type.startsWith("audio/")?Yu(()=>import("./jsmediatags.min-BIPlaZkZ.js").then(be=>be.j),[]).then(be=>{be.read(Q,{onSuccess:Ge=>{const{title:at,artist:dt,picture:mt}=Ge.tags;let Hn=null;if(mt){const{data:fn,format:Pe}=mt;let Pt="";for(let nn=0;nn<fn.length;nn++)Pt+=String.fromCharCode(fn[nn]);Hn=`data:${Pe};base64,${window.btoa(Pt)}`}N({title:at||W.title,artist:dt||W.artist,coverUrl:Hn||null})},onError:Ge=>{console.log("Error reading tags:",Ge)}})}):Q.type.startsWith("video/")&&(w(!1),N({...W,coverUrl:Ue,backgroundType:"video"})),ye(0),Le(!1),$e(0),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}R.target.value=""},vt=R=>{const Q=R.target.files?.[0];if(Q){const Ue=URL.createObjectURL(Q),W=Q.type.startsWith("video/");W&&w(!1),N(be=>({...be,coverUrl:Ue,backgroundType:W?"video":"image"}))}R.target.value=""},$t=async R=>{const Q=R.target.files?.[0];if(Q)try{const Ue=await Q.text(),W=Q.name.split(".").pop()?.toLowerCase();let be=[];W==="lrc"?be=Xl(Ue):W==="srt"?be=Ql(Ue):W==="ttml"||W==="xml"?be=ts(Ue):W==="vtt"&&(be=ns(Ue)),be.some(Ge=>Ge.words&&Ge.words.length>0)&&(te(Ge=>({...Ge,highlightEffect:"karaoke"})),n.success(`${W?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),H(be)}catch(Ue){console.error("Failed to parse lyrics:",Ue),n.error("Failed to parse lyric file.")}R.target.value=""};Z.useEffect(()=>{if(Nt!==-1&&Je[Nt]){const R=Je[Nt];H(R.parsedLyrics||[])}},[Je,Nt]);const ei=async R=>{const Q=R.target.files?.[0];if(Q){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Ue=URL.createObjectURL(Q),W=Q.name.replace(/\.[^/.]+$/,""),be="CustomFont",Ge=new FontFace(be,`url(${Ue})`);await Ge.load(),document.fonts.add(Ge),Fe(W),te(at=>({...at,fontFamily:be})),n.success(`Loaded font: ${W}`)}catch(Ue){console.error("Failed to load font:",Ue),n.error("Failed to load font file.")}}R.target.value=""},Gt=Z.useCallback(async(R,Q=!0,Ue)=>{const W=Ue||Je;if(R<0||R>=W.length)return;const be=W[R],Ge=URL.createObjectURL(be.audioFile);if(x(Ge),N({title:be.metadata.title,artist:be.metadata.artist,coverUrl:be.metadata.coverUrl||null,backgroundType:be.metadata.backgroundType||"image"}),H([]),be.parsedLyrics&&be.parsedLyrics.length>0)H(be.parsedLyrics);else if(be.lyricFile)try{const at=await be.lyricFile.text(),dt=be.lyricFile.name.split(".").pop()?.toLowerCase();let mt=[];dt==="lrc"?mt=Xl(at):dt==="srt"?mt=Ql(at):dt==="ttml"||dt==="xml"?mt=ts(at):dt==="vtt"&&(mt=ns(at)),H(mt)}catch(at){console.error("Failed to load lyrics",at)}ye(0),lt(R),r.current&&(r.current.scrollTop=0),Q?setTimeout(()=>{o.current&&(o.current.play().catch(at=>console.log("Autoplay failed",at)),Le(!0))},100):(Le(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[Je]),Mn=Z.useCallback(()=>{if(Je.length===0)return;const R=(Nt+1)%Je.length;Gt(R)},[Je,Nt,Gt]),pl=Z.useCallback(()=>{if(Je.length===0)return;const R=(Nt-1+Je.length)%Je.length;Gt(R)},[Je,Nt,Gt]),Oi=()=>{o.current&&(ze?(o.current.pause(),Le(!1)):!m&&Je.length>0?Gt(0):(o.current.play().catch(console.error),Le(!0)))},di=Z.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,Le(!1),$e(0))},[]),qi=()=>{Ke(R=>R==="off"?"one":R==="one"?"all":R==="all"?"all_repeat":"off")},ji=()=>{document.fullscreenElement?(document.exitFullscreen(),yt(!1)):(a.current?.requestFullscreen(),yt(!0))},vo=()=>{un&&(Ai(!1),n.success("Minimal Mode: Off",{id:"minimal-mode"}))},xo=()=>{o.current&&($e(o.current.currentTime),U&&Me(o.current.currentTime/De*100))},Sn=()=>{o.current&&ot(o.current.duration)},os=R=>{const Q=parseFloat(R.target.value);o.current&&(o.current.currentTime=Q,$e(Q))},ia=R=>{if(!Ye.current||U||!De)return;const Q=Ye.current.getBoundingClientRect(),be=Math.max(0,Math.min(R-Q.left,Q.width))/Q.width*De;o.current&&(o.current.currentTime=be,$e(be))},$i=R=>{const Q=parseFloat(R.target.value);xt(Q),o.current&&(o.current.volume=Q),V(Q===0)},Yi=R=>{if(!nt.current)return;const Q=nt.current.getBoundingClientRect(),W=Math.max(0,Math.min(R-Q.left,Q.width))/Q.width;xt(W),o.current&&(o.current.volume=W),V(W===0)},Fr=async()=>{if(!o.current||!u.current)return;const R=C.renderMode==="playlist"&&Je.length>0,Q=[];if(R)for(const Ae of Je){let Qe=[];if(Ae.parsedLyrics&&Ae.parsedLyrics.length>0)Qe=Ae.parsedLyrics;else if(Ae.lyricFile)try{const Oe=await Ae.lyricFile.text(),Zt=Ae.lyricFile.name.split(".").pop()?.toLowerCase();Zt==="lrc"?Qe=Xl(Oe):Zt==="srt"?Qe=Ql(Oe):Zt==="ttml"||Zt==="xml"?Qe=ts(Oe):Zt==="vtt"&&(Qe=ns(Oe))}catch(Oe){console.error("Failed to parse lyrics for playlist item",Oe)}const Mt=URL.createObjectURL(Ae.audioFile);Q.push({audioSrc:Mt,lyrics:Qe,metadata:Ae.metadata,isFileSource:!0})}else{if(!m)return;Q.push({audioSrc:m,lyrics:Ui,metadata:A,isFileSource:!1})}if(Q.length===0)return;const Ue=R?`Start rendering ALL ${Q.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${Te} (${Ie}) video? This will play the song from start to finish.`;if(!await t(`${Ue} Please do not switch tabs during rendering.`,"Start Rendering?")){R&&Q.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc));return}ae(!1),J(!0),Me(0);const be={aborted:!1};y.current=be,di(),Ke("off"),Pi.current&&clearTimeout(Pi.current),se(!1),He(!0),Ko.current&&Ko.current.pause();const Ge=o.current,at=ge,dt=new Map,mt=new Map,Hn=new Map,fn=[],Pe=(Ae,Qe)=>new Promise(Mt=>{const Oe=new Image;Oe.crossOrigin="anonymous",Oe.onload=()=>{dt.set(Ae,Oe),Mt()},Oe.onerror=()=>Mt(),Oe.src=Qe}),Pt=(Ae,Qe)=>new Promise(Mt=>{const Oe=document.createElement("video");Oe.crossOrigin="anonymous",Oe.muted=!0,Oe.playsInline=!0,Oe.preload="auto";let Zt=!1;const Ht=()=>{Zt||(Zt=!0,mt.set(Ae,Oe),Mt())};Oe.oncanplay=()=>{Zt||(Oe.currentTime=.001)},Oe.onseeked=()=>Ht(),Oe.onerror=()=>{console.warn("Failed to load video:",Qe),Ht()},setTimeout(()=>Ht(),5e3),Oe.src=Qe,Oe.load()}),nn=(Ae,Qe)=>new Promise(Mt=>{const Oe=document.createElement("audio");Oe.crossOrigin="anonymous",Oe.onloadedmetadata=()=>{Hn.set(Ae,Oe),Mt()},Oe.onerror=()=>Mt(),Oe.src=Qe});if(j.forEach(Ae=>{Ae.type==="video"?fn.push(Pt(Ae.id,Ae.url)):Ae.type==="audio"||Ae.type==="audio"?fn.push(nn(Ae.id,Ae.url)):fn.push(Pe(Ae.id,Ae.url))}),C.showChannelInfo&&(C.channelInfoImage&&fn.push(Pe("__channel_info__",C.channelInfoImage)),C.channelInfoText)){const Ae=C.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(Ae))try{const Qe=document.createElement("div");Qe.style.position="absolute",Qe.style.visibility="hidden",Qe.style.whiteSpace="nowrap",Qe.style.fontFamily="sans-serif",Qe.style.fontWeight="bold",Qe.style.fontSize="100px",Qe.style.display="inline-flex",Qe.style.alignItems="center",Qe.style.gap="0.25em",Qe.innerHTML=Ae;const Mt=Qe.getElementsByTagName("svg");for(let Gn=0;Gn<Mt.length;Gn++)Mt[Gn].style.width="auto",Mt[Gn].style.height="1.5em";document.body.appendChild(Qe);const{width:Oe,height:Zt}=Qe.getBoundingClientRect();document.body.removeChild(Qe);const Ht=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${Oe}" height="${Zt}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${Ae}
                  </div>
                </foreignObject>
              </svg>
            `,hi=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(Ht).replace(/%([0-9A-F]{2})/g,function(So,To){return String.fromCharCode(parseInt(To,16))}))}`;fn.push(Pe("__channel_info_text_svg__",hi))}catch(Qe){console.warn("Failed to process SVG channel info",Qe)}}if(C.backgroundSource==="image"&&C.backgroundImage&&fn.push(Pe("__custom_bg__",C.backgroundImage)),await Promise.all(fn),be.aborted){J(!1),R&&Q.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc));return}const _n=u.current,B=_n.getContext("2d"),ft=_n.captureStream(D);let _t=null;try{if(Ge.captureStream)_t=Ge.captureStream();else if(Ge.mozCaptureStream)_t=Ge.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),J(!1);return}const rt=new(window.AudioContext||window.webkitAudioContext),ln=rt.createMediaStreamDestination();rt.createMediaElementSource(Ge).connect(ln),mt.forEach(Ae=>{Ae.muted=!0,rt.createMediaElementSource(Ae).connect(ln)}),Hn.forEach(Ae=>{Ae.muted=!0,rt.createMediaElementSource(Ae).connect(ln)}),ln.stream.getAudioTracks().length>0?ft.addTrack(ln.stream.getAudioTracks()[0]):_t&&ft.addTrack(_t.getAudioTracks()[0]);const fi=(()=>{if(Ze!=="auto"&&MediaRecorder.isTypeSupported(Ze))return Ze;const Ae=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const Qe of Ae)if(MediaRecorder.isTypeSupported(Qe))return Qe;return"video/webm"})(),ti=Ie==="1080p"?8e6:4e6,Vn=D>30?1.5:1,Qi=we==="high"?2:we==="low"?.5:1,ni=ti*Vn*Qi,Ft=new MediaRecorder(ft,{mimeType:fi,videoBitsPerSecond:ni});h.current=Ft;const pi=[];Ft.ondataavailable=Ae=>{Ae.data.size>0&&pi.push(Ae.data)},Ft.onstop=()=>{if(be.aborted)console.log("Render aborted");else{const Ae=new Blob(pi,{type:fi}),Qe=Mt=>{const Oe=URL.createObjectURL(Mt),Zt=document.createElement("a");Zt.href=Oe;const Ht=fi.includes("mp4")?"mp4":"webm",gn=R?`Playlist_${Q.length}_Songs_${Te.replace(":","-")}.${Ht}`:`${Q[0].metadata.title||"video"}_${Te.replace(":","-")}.${Ht}`;Zt.download=gn,document.body.appendChild(Zt),Zt.click(),document.body.removeChild(Zt),URL.revokeObjectURL(Oe)};fi.includes("webm"),Qe(Ae)}rt.close(),J(!1),T(Ae=>Ae+1),R&&Q.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc))};let X=0,ii=[],bt=A,An=0,Zi=0;const pn=1e3/D,On=Ae=>{if(be.aborted)return;(Ft.state==="recording"||Ft.state==="paused")&&requestAnimationFrame(On);const Qe=Ae-Zi;if(Qe<pn)return;Zi=Ae-Qe%pn;const Mt=Ge.currentTime;An>0&&Me(Mt/An*100),mt.forEach((Oe,Zt)=>{if(Zt==="background"){const Ht=Oe.duration||1,gn=Mt%Ht;let hi=Math.abs(Oe.currentTime-gn);(gn<Oe.currentTime&&Oe.currentTime-gn>Ht/2||hi>.5)&&(Oe.currentTime=gn),Oe.paused&&Oe.play().catch(()=>{})}else{const Ht=j.find(gn=>gn.id===Zt);if(Ht)if(Mt>=Ht.startTime&&Mt<Ht.endTime){const gn=Ht.playbackRate||1;let hi=(Mt-Ht.startTime)*gn+(Ht.mediaStartOffset||0);const Gn=Ht.mediaDuration||Oe.duration;Gn&&Gn>0&&hi>=Gn&&(hi=hi%Gn),Math.abs(Oe.playbackRate-gn)>.01&&(Oe.playbackRate=gn),Math.abs(Oe.currentTime-hi)>.5&&(Oe.currentTime=hi);const So=Ht.isMuted!==!1;Oe.muted!==So&&(Oe.muted=So),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),Hn.forEach((Oe,Zt)=>{const Ht=j.find(gn=>gn.id===Zt);if(Ht){const gn=Ht.layer||0;if(C.layerVisibility?.audio?.[gn]!==!1&&Mt>=Ht.startTime&&Mt<Ht.endTime){const Gn=Ht.playbackRate||1,So=(Mt-Ht.startTime)*Gn+(Ht.mediaStartOffset||0);Math.abs(Oe.playbackRate-Gn)>.01&&(Oe.playbackRate=Gn),Math.abs(Oe.currentTime-So)>.5&&(Oe.currentTime=So);const To=Ht.isMuted===!0;Oe.muted!==To&&(Oe.muted=To),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),B&&dy(B,_n.width,_n.height,Mt,ii,bt,j,dt,mt,at,je,C.fontSizeScale,C.backgroundBlurStrength>0,An,C,C.renderMode==="current"||X===Q.length-1,C.renderMode==="current"||X===0)},Hi=async()=>{if(be.aborted){Ft.stop();return}if(X>=Q.length){await new Promise(Qe=>setTimeout(Qe,500)),Ft.stop();return}const Ae=Q[X];Ft.state==="recording"&&Ft.pause(),ii=Ae.lyrics,bt=Ae.metadata,An=0,Ae.metadata.coverUrl&&(Ae.metadata.backgroundType==="video"?await Pt("background",Ae.metadata.coverUrl):await Pe("cover",Ae.metadata.coverUrl)),Ge.pause(),Ge.src=Ae.audioSrc,Ge.load(),await new Promise(Qe=>{const Mt=()=>{Ge.removeEventListener("canplay",Mt),Qe()};Ge.addEventListener("canplay",Mt),Ge.readyState>=3&&Mt()}),An=Ge.duration,Ft.state==="inactive"?(rt.state==="suspended"&&await rt.resume(),Ft.start(),requestAnimationFrame(On)):Ft.state==="paused"&&Ft.resume(),await Ge.play(),await new Promise(Qe=>{const Mt=()=>{Ge.removeEventListener("ended",Mt),Qe()};Ge.addEventListener("ended",Mt)}),X++,Hi()};await Hi()},ls=async()=>{if(!u.current)return;const R=C.renderMode==="playlist"&&Je.length>0;let Q=null,Ue=Ui,W=A;if(R&&Je.length>0)Q=Je[0].audioFile,Ue=Je[0].parsedLyrics||[],W=Je[0].metadata;else if(Je.length>0&&Nt>=0)Q=Je[Nt].audioFile;else{n.error("Please load an audio file first.");return}if(!Q){n.error("No audio file available for FFmpeg export.");return}const be=`Start FFmpeg rendering at ${Ie} (${Te})? This uses frame-by-frame capture for higher quality. Rendering may take several minutes.`;if(!await t(be,"Start FFmpeg Rendering?"))return;ae(!1),J(!0),Me(0),ee("Initializing...");const at={aborted:!1};y.current=at,di();const dt=u.current,{w:mt,h:Hn}=ut();dt.width=mt,dt.height=Hn;const fn=new Map,Pe=new Map,Pt=[],nn=(B,ft)=>new Promise(_t=>{const rt=new Image;rt.crossOrigin="anonymous",rt.onload=()=>{fn.set(B,rt),_t()},rt.onerror=()=>_t(),rt.src=ft}),_n=(B,ft)=>new Promise(_t=>{const rt=document.createElement("video");rt.crossOrigin="anonymous",rt.muted=!0,rt.playsInline=!0,rt.preload="auto";let ln=!1;const an=()=>{ln||(ln=!0,Pe.set(B,rt),_t())};rt.oncanplay=()=>{ln||(rt.currentTime=.001)},rt.onseeked=()=>an(),rt.onerror=()=>{console.warn("Failed to load video:",ft),an()},setTimeout(()=>an(),5e3),rt.src=ft,rt.load()});if(j.forEach(B=>{B.type==="video"?Pt.push(_n(B.id,B.url)):B.type!=="audio"&&Pt.push(nn(B.id,B.url))}),W.coverUrl&&(W.backgroundType==="video"?Pt.push(_n("background",W.coverUrl)):Pt.push(nn("cover",W.coverUrl))),C.backgroundSource==="image"&&C.backgroundImage&&Pt.push(nn("__custom_bg__",C.backgroundImage)),C.showChannelInfo&&C.channelInfoImage&&Pt.push(nn("__channel_info__",C.channelInfoImage)),await Promise.all(Pt),at.aborted){J(!1);return}try{const B=await lN({canvas:dt,audioFile:Q,lyrics:Ue,metadata:W,visualSlides:j,imageMap:fn,videoMap:Pe,preset:ge,customFontName:je,renderConfig:C,resolution:Ie,aspectRatio:Te,fps:D,quality:we,codec:I,onProgress:(ln,an)=>{Me(ln),ee(an)},onLog:ln=>console.log(ln),abortSignal:at,isFirstSong:!0,isLastSong:!0}),ft=`${W.title||"video"}_${Te.replace(":","-")}_ffmpeg.${B.format}`,_t=URL.createObjectURL(B.blob),rt=document.createElement("a");rt.href=_t,rt.download=ft,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt),URL.revokeObjectURL(_t),n.success(`Video exported successfully! (${B.format.toUpperCase()}, ${Math.round(B.duration)}s)`)}catch(B){B.message!=="Render aborted"&&(console.error("FFmpeg render failed:",B),n.error(`FFmpeg render failed: ${B.message}`))}finally{J(!1),ee("")}},hl=async()=>{le==="ffmpeg"?await ls():await Fr()};Z.useEffect(()=>{v.current=hl});const oa=Z.useCallback(()=>{y.current&&(y.current.aborted=!0),h.current&&h.current.state==="recording"?h.current.stop():J(!1),di()},[di]),Ji=Z.useCallback(()=>{if(r.current){const R=o.current?.currentTime||0;if(bn===-1&&R<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(bn!==-1){const Q=r.current.querySelector('[data-lyric-active="true"]');if(Q){const Ue=r.current;if(Q.offsetHeight===0)return;const W=Q.offsetTop,be=Q.offsetHeight,Ge=Ue.clientHeight;let at=.5;C.contentPosition==="top"&&(at=.25),C.contentPosition==="bottom"&&(at=.75);const dt=W-Ge*at+be/2;Ue.scrollTo({top:dt,behavior:"smooth"})}}}},[bn,ge,C.contentPosition]);Z.useEffect(()=>{Ji()},[Ji]),Z.useEffect(()=>{const R=setTimeout(()=>{Ji()},550);return()=>clearTimeout(R)},[L,xe,Tt,jt,Ee,Ne,Ji]);const Pi=Z.useRef(null),Yn=Z.useCallback(()=>{if(se(!1),Pi.current&&clearTimeout(Pi.current),!U){const R=window.setTimeout(()=>{se(!0)},3e3);Pi.current=R}},[U]),Jn=()=>{Yn()},la=Z.useRef(0),Br=()=>{Yn();const R=Date.now();R-la.current<300&&vo(),la.current=R};Z.useEffect(()=>{const R=Q=>{const Ue=Q.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Ue)||Yn(),!(Q.target instanceof HTMLInputElement||Q.target instanceof HTMLTextAreaElement)){if(U){Ue==="escape"&&oa();return}switch(Q.key.toLowerCase()){case" ":case"k":Q.preventDefault(),Oi(),n.success(ze?"Paused":"Playing",{id:"play-pause"});break;case"s":Q.preventDefault(),di(),n.success("Stopped",{id:"stop"});break;case"n":Q.preventDefault(),Mn(),n.success("Next Song",{id:"next-song"});break;case"o":Q.preventDefault();const be=!un;Ai(be),be&&He(!0),n.success(`Minimal Mode: ${be?"On":"Off"}`,{id:"minimal-mode"});break;case"b":Q.preventDefault(),pl(),n.success("Previous Song",{id:"prev-song"});break;case"r":Q.preventDefault(),qi();const Ge=ve==="off"?"one":ve==="one"?"all":ve==="all"?"all_repeat":"off",at={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${at[Ge]}`,{id:"repeat"});break;case"l":Q.preventDefault();const dt=!Ne;ct(dt),dt&&ie(Pn.PLAYER);break;case"h":Q.preventDefault();const mt=!xe;He(mt),n.success(mt?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"g":Q.preventDefault();const Hn=md.flatMap(Ae=>Ae.options.map(Qe=>Qe.value)),fn=ke.current.lyricDisplayMode,Pt=(Hn.indexOf(fn)+1)%Hn.length,nn=Hn[Pt];te(Ae=>({...Ae,lyricDisplayMode:nn})),n.success(`Lyric Mode: ${nn.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":Q.preventDefault();const _n=uy,B=ke.current.textCase,_t=(_n.indexOf(B)+1)%_n.length,rt=_n[_t];te(Ae=>({...Ae,textCase:rt})),n.success(`Text Case: ${rt}`,{id:"text-case"});break;case"f":ji();break;case"i":gt(Ae=>!Ae);break;case"p":xn(Ae=>!Ae);break;case"d":Q.preventDefault(),ae(Ae=>!Ae);break;case"t":Ne?(ct(!1),ie(Pn.EDITOR)):ie(Ae=>Ae===Pn.PLAYER?Pn.EDITOR:Pn.PLAYER);break;case"m":Q.preventDefault();const ln=!Et;V(ln),n.success(ln?"Muted":"Unmuted",{id:"mute"});break;case"x":Q.preventDefault();const an=ke.current.highlightEffect==="none";te(Ae=>({...Ae,highlightEffect:Ae.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${an?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":Q.preventDefault();const Ni=pd.flatMap(Ae=>Ae.options.map(Qe=>Qe.value)),fi=ke.current.highlightEffect||"none",ti=Ni.indexOf(fi),Qi=((ti===-1?0:ti)+1)%Ni.length,ni=Ni[Qi],Ft=hd(ni);te(Ae=>{const Qe={...Ae,highlightEffect:ni};return Qe.useCustomHighlightColors=!1,Ft&&(Qe.highlightColor=Ft.color,Qe.highlightBackground=Ft.bg),Qe}),n.success(`Effect: ${ni.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":Q.preventDefault();const X=(ju.indexOf(ge)+1)%ju.length,ii=ju[X];Re(ii);const bt=kr[ii];if(bt){const Ae={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};te(Qe=>({...Qe,...Ae,...bt}))}let An=ii;for(const Ae of Md){const Qe=Ae.options.find(Mt=>Mt.value===ii);if(Qe){An=Qe.label;break}}n.success(`Preset: ${An}`,{id:"preset"});break;case"arrowleft":if(Q.preventDefault(),o.current){const Ae=Math.max(0,o.current.currentTime-5);o.current.currentTime=Ae,$e(Ae)}break;case"arrowright":if(Q.preventDefault(),o.current){const Ae=Math.min(De,o.current.currentTime+5);o.current.currentTime=Ae,$e(Ae)}break;case"arrowup":Q.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":Q.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":Q.preventDefault();const Zi=ke.current.fontSizeScale,pn=Math.min(Zi+.1,3);te(Ae=>({...Ae,fontSizeScale:pn})),n.success(`Font Size: ${(pn*100).toFixed(0)}%`,{id:"font-size"});break;case"-":Q.preventDefault();const On=ke.current.fontSizeScale,Hi=Math.max(On-.1,.1);te(Ae=>({...Ae,fontSizeScale:Hi})),n.success(`Font Size: ${(Hi*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(Q.ctrlKey||Q.metaKey)&&Q.shiftKey&&(Q.preventDefault(),v.current());break}}};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[ze,ve,Ee,U,Yn,oa,Ne,Mn,pl,n,un,ge,xe,Et]),Z.useEffect(()=>{let R,Q=0;const Ue=1e3/30,W=be=>{if(o.current&&!o.current.paused&&ze){R=requestAnimationFrame(W);const Ge=be-Q;Ge>Ue&&(Q=be-Ge%Ue,$e(o.current.currentTime))}};return ze&&!U&&(R=requestAnimationFrame(W)),()=>{R&&cancelAnimationFrame(R)}},[ze,U]);const Ki=Tt&&(!L||xe)&&!U,Xi=jt&&(!L||xe)&&!U&&!un,bo=In.length>0?In[0]:null;bo?`${bo.url}`:A.coverUrl&&`${A.coverUrl}`;const Ko=Z.useRef(null);return Z.useEffect(()=>{if(In.forEach(R=>{const Q=R.layer||0;if(C.layerVisibility?.visual?.[Q]!==!1&&R.type==="video"){const Ue=document.getElementById(`video-preview-${R.id}`);if(Ue)if(U)Ue.paused||Ue.pause();else{const W=R.playbackRate||1;let be=(_e-R.startTime)*W+(R.mediaStartOffset||0);const Ge=R.mediaDuration||Ue.duration;Ge&&Ge>0&&be>=Ge&&(be=be%Ge),Math.abs(Ue.playbackRate-W)>.01&&(Ue.playbackRate=W),Math.abs(Ue.currentTime-be)>.2&&(Ue.currentTime=be);const at=R.isMuted!==!1;Ue.muted!==at&&(Ue.muted=at);const dt=R.volume!==void 0?R.volume:1;Math.abs(Ue.volume-dt)>.01&&(Ue.volume=dt),ze&&Ue.paused?Ue.play().catch(()=>{}):!ze&&!Ue.paused&&Ue.pause()}}}),A.backgroundType==="video"&&Ko.current){const R=Ko.current;if(U)R.paused||R.pause();else{const Q=R.duration||1,Ue=_e%Q;Math.abs(R.currentTime-Ue)>.1&&(R.currentTime=Ue),ze&&R.paused?R.play().catch(()=>{}):!ze&&!R.paused&&R.pause()}}Li.forEach(R=>{const Q=document.getElementById(`audio-preview-${R.id}`);if(Q){const Ue=R.playbackRate||1,W=(_e-R.startTime)*Ue+(R.mediaStartOffset||0);Math.abs(Q.playbackRate-Ue)>.01&&(Q.playbackRate=Ue),Math.abs(Q.currentTime-W)>.2&&(Q.currentTime=W);const be=R.isMuted===!0;Q.muted!==be&&(Q.muted=be);const Ge=R.volume!==void 0?R.volume:1;Math.abs(Q.volume-Ge)>.01&&(Q.volume=Ge),ze&&Q.paused?Q.play().catch(()=>{}):!ze&&!Q.paused&&Q.pause()}})},[_e,ze,In,A,Li,C.layerVisibility]),f.jsxs("div",{ref:a,onMouseMove:Jn,onTouchStart:Br,onDoubleClick:vo,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${L&&!xe?"cursor-none":""}`,children:[f.jsx("audio",{ref:o,src:m||void 0,loop:ve==="one",muted:Et,onTimeUpdate:xo,onLoadedMetadata:Sn,onEnded:()=>{if(U)return;const R=Je.length>0;ve==="one"||(ve==="all_repeat"?R?Mn():o.current?.play():ve==="all"&&R&&Nt<Je.length-1?Mn():Le(!1))},crossOrigin:"anonymous"},b),Li.map(R=>f.jsx("audio",{id:`audio-preview-${R.id}`,src:R.url,className:"hidden",playsInline:!0},R.id)),f.jsx("canvas",{ref:u,width:Ve,height:It,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),f.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[C.backgroundSource==="color"&&f.jsx("div",{className:"absolute inset-0",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&f.jsx("div",{className:"absolute inset-0",style:{background:C.backgroundGradient}}),C.backgroundSource==="image"&&C.backgroundImage&&f.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${C.backgroundImage})`}}),C.backgroundSource==="smart-gradient"&&f.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const R=C.backgroundColor||"#312e81",Q=parseInt(R.slice(1,3),16),Ue=parseInt(R.slice(3,5),16),W=parseInt(R.slice(5,7),16),be=`${Q},${Ue},${W}`,Ge=`${Math.floor(Q*.6)},${Math.floor(Ue*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${be}), rgb(${Ge}) 50%, #000000)`})()}}),(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&A.coverUrl&&j.length===0&&(A.backgroundType==="video"?f.jsx("video",{ref:Ko,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${it?"opacity-60":"opacity-0"}`,muted:!0,loop:!U,playsInline:!0,preload:"auto",onLoadedData:()=>w(!0)}):f.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${C.backgroundSource==="custom"||In.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),C.backgroundSource==="color"&&f.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&f.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:C.backgroundGradient}}),C.backgroundSource==="smart-gradient"&&f.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const R=C.backgroundColor||"#312e81",Q=parseInt(R.slice(1,3),16),Ue=parseInt(R.slice(3,5),16),W=parseInt(R.slice(5,7),16),be=`${Q},${Ue},${W}`,Ge=`${Math.floor(Q*.6)},${Math.floor(Ue*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${be}), rgb(${Ge}) 50%, #000000)`})()}}),!A.coverUrl&&In.length===0&&(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&j.length===0&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),f.jsx("div",{className:`absolute inset-0 pointer-events-none ${C.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:C.backgroundSource==="timeline"&&In.map(R=>{const Q=R.layer||0;if(C.layerVisibility?.visual?.[Q]===!1)return null;const Ue=C.visualTransitionType||"none",W=C.visualTransitionDuration||1;let be=1;if(Ue!=="none"){if(_e<R.startTime+W){const Ge=(_e-R.startTime)/W;be=Math.max(0,Math.min(1,Ge))}if(_e>=R.endTime){let Ge=!1;if(Ue==="crossfade"&&(Ge=j.some(at=>at.id!==R.id&&(at.layer||0)===(R.layer||0)&&at.startTime>=R.endTime-.1&&at.startTime<R.endTime+.2)),!Ge){const dt=1-(_e-R.endTime)/W;be=Math.min(be,Math.max(0,Math.min(1,dt)))}}else if(Ue==="fade-to-black"&&_e>R.endTime-W){const Ge=(R.endTime-_e)/W;be=Math.min(be,Math.max(0,Math.min(1,Ge)))}}return f.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:be},children:R.type==="video"?f.jsx("video",{id:`video-preview-${R.id}`,src:R.url,className:"w-full h-full object-cover",muted:R.isMuted!==!1,playsInline:!0}):f.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${R.url})`}})},R.id)})}),f.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:C.backgroundBlurStrength>0?`blur(${C.backgroundBlurStrength}px)`:Be?"blur(12px)":"none",backgroundColor:C.useRealColorMedia?"transparent":C.backgroundBlurStrength>0||Be?"rgba(0,0,0,0.4)":void 0}}),C.enableGradientOverlay&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),f.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[C.showChannelInfo&&un&&f.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${C.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${C.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${C.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":C.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":C.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${C.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.channelInfoSizeScale??1})`,transformOrigin:C.channelInfoPosition?.includes("top")?C.channelInfoPosition?.includes("center")?"top center":C.channelInfoPosition?.includes("left")?"top left":"top right":C.channelInfoPosition?.includes("center")?"bottom center":C.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...C.channelInfoPosition?.includes("center")?C.channelInfoPosition?.includes("top")?{marginTop:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(C.channelInfoMarginScale??1)*1.5}rem`}},children:[C.channelInfoImage&&C.channelInfoStyle!=="minimal"&&f.jsx("img",{src:C.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${C.channelInfoStyle==="circle"?"rounded-full":""}`}),C.channelInfoText&&C.channelInfoStyle!=="logo"&&(()=>{const R=C.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(R)?f.jsx("div",{className:`text-white font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,dangerouslySetInnerHTML:{__html:R}}):f.jsx("p",{className:`text-white font-bold drop-shadow-md text-lg 
                    ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,children:C.channelInfoText})})()]}),un&&f.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${Ki?"opacity-100":"opacity-0"}
              ${C.infoPosition==="top-left"?"top-0 left-0 items-start text-left":C.infoPosition==="top-right"?"top-0 right-0 items-end text-right":C.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":C.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${C.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.infoSizeScale??1})`,transformOrigin:C.infoPosition?.includes("top")?C.infoPosition?.includes("center")?"top center":C.infoPosition?.includes("right")?"top right":"top left":C.infoPosition?.includes("center")?"bottom center":C.infoPosition?.includes("right")?"bottom right":"bottom left",...C.infoPosition?.includes("center")?C.infoPosition?.includes("top")?{marginTop:`${(C.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.infoMarginScale??1)*1.5}rem`}:{margin:`${(C.infoMarginScale??1)*1.5}rem`}},children:f.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${C.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${C.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${C.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${C.infoStyle==="modern"||C.infoStyle==="minimal",""}
            `,children:[f.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!C.showCover||C.infoStyle==="minimal"||C.infoStyle==="modern"?"hidden":"block"}
                ${C.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?f.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:R=>R.currentTarget.play(),onMouseOut:R=>R.currentTarget.pause()}):f.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:f.jsx($l,{size:24})}),f.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[f.jsx(Yo,{size:20,className:"text-white"}),f.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:vt})]})]}),f.jsxs("div",{className:`flex flex-col justify-center ${C.infoPosition?.includes("right")?"items-end":C.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[f.jsx("h1",{className:`font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${C.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${C.infoStyle==="minimal"?"text-sm":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,children:A.title}),f.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${C.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:f.jsx("p",{className:`drop-shadow-md
                    ${C.infoStyle==="minimal"?"text-zinc-400 text-[10px]":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-white text-sm font-medium":"text-zinc-300 text-xs"}
                  `,children:A.artist})})]})]})}),f.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Ki&&!un?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:f.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[f.jsx("div",{className:"flex gap-4",children:f.jsxs("div",{className:"flex gap-4 items-center",children:[f.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${C.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?f.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:R=>R.currentTarget.play(),onMouseOut:R=>R.currentTarget.pause()}):f.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:f.jsx($l,{size:24})}),f.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[f.jsx(Yo,{size:20,className:"text-white"}),f.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:vt})]})]}),f.jsxs("div",{children:[f.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${C.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),f.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${C.showArtist?"opacity-100":"opacity-0"}`,children:f.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),f.jsxs("div",{className:`flex gap-2 flex-wrap ${un?"hidden":""}`,children:[f.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:f.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),f.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),f.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),f.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),f.jsx("button",{onClick:()=>He(!xe),className:`p-2 rounded-full transition-colors ${xe?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:xe?f.jsx(Xa,{size:20}):f.jsx(Ka,{size:20})}),f.jsx("button",{onClick:()=>Ai(!un),className:`p-2 rounded-full transition-colors ${un?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:un?f.jsx(Wa,{size:20}):f.jsx(b0,{size:20})}),f.jsx("button",{onClick:()=>{const R=!Ne;ct(R),R&&ie(Pn.PLAYER)},className:`p-2 rounded-full transition-colors ${Ne?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:f.jsx(wr,{size:20})}),f.jsx("button",{onClick:()=>{Ne&&ct(!1),ie(Ee===Pn.PLAYER?Pn.EDITOR:Pn.PLAYER)},className:`p-2 rounded-full transition-colors ${Ee===Pn.EDITOR&&!Ne?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:f.jsx(hg,{size:20})}),f.jsx("button",{onMouseDown:R=>{R.stopPropagation(),ae(!z)},className:`p-2 rounded-full transition-colors ${z?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:f.jsx(xr,{size:20})}),f.jsx("button",{onClick:ji,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:de?f.jsx(b0,{size:20}):f.jsx(Wa,{size:20})})]})]})}),f.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${C.contentPosition==="top"?"items-start pt-[10vh]":C.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:O.length>0?f.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${C.textAlign==="left"?"text-left":C.textAlign==="right"?"text-right":"text-center"} ${C.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:(Ki||Xi)&&ge!=="subtitle"?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[f.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale} * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale} * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${C.fontSizeScale}); line-height: calc(2rem * ${C.fontSizeScale} * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${C.fontSizeScale}); line-height: calc(2.25rem * ${C.fontSizeScale} * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${C.fontSizeScale}); line-height: calc(2.5rem * ${C.fontSizeScale} * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${C.fontSizeScale}); line-height: calc(1 * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${C.fontSizeScale}); line-height: calc(1 * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${C.fontSizeScale}); line-height: calc(1 * ${C.lyricLineHeight||1.2}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${C.fontSizeScale}); line-height: calc(1 * ${C.lyricLineHeight||1.2}); }
              `}),f.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?Ee===Pn.EDITOR||Ne?"h-[25vh]":!Ki&&!Xi?"h-[50vh]":"h-[40vh]":"h-0"}`}),Ui.map((R,Q)=>{const Ue=Q===bn,W=Ee===Pn.EDITOR||Ne,be=["9:16","3:4","1:1","1:2","2:3"].includes(Te);if(C.lyricDisplayMode!=="all"){if(C.lyricDisplayMode==="active-only"&&Q!==bn)return f.jsx("p",{className:"hidden"},Q);if(C.lyricDisplayMode==="next-only"&&(Q<bn||Q>bn+1))return f.jsx("p",{className:"hidden"},Q);if(C.lyricDisplayMode==="previous-next"&&Math.abs(Q-bn)>1)return f.jsx("p",{className:"hidden"},Q)}else if(ge==="none"||ge==="just_video")return f.jsx("p",{className:"hidden"},Q);let Ge="",at="";const dt=C.transitionEffect;let mt="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Ue?dt==="slide"?mt+="translate-y-0 opacity-100 ":dt==="zoom"?mt+="scale-100 opacity-100 ":dt==="float"?mt+="translate-y-0 opacity-100 ":dt==="blur"?mt+="blur-0 opacity-100 ":dt==="fade"?mt+="opacity-100 ":dt==="drop"?mt+="trans-drop-enter opacity-100 ":dt==="lightspeed"?mt+="trans-lightspeed-enter opacity-100 ":dt==="roll"?mt+="trans-roll-enter opacity-100 ":dt==="elastic"?mt+="trans-elastic-enter opacity-100 ":dt==="flip"?mt+="trans-flip-enter opacity-100 ":dt==="rotate-in"?mt+="trans-rotate-in-enter opacity-100 ":dt==="spiral"?mt+="trans-spiral-enter opacity-100 ":dt==="shatter"?mt+="trans-shatter-enter opacity-100 ":mt+="opacity-100 ":(dt==="slide"?mt+="translate-y-4 opacity-0 ":dt==="zoom"?mt+="scale-75 opacity-0 ":dt==="float"?mt+="translate-y-8 opacity-0 ":dt==="blur"?mt+="blur-md opacity-0 ":dt==="fade"?mt+="opacity-50 ":dt==="drop"?mt+="trans-drop-exit opacity-0 ":dt==="roll"?mt+="trans-roll-exit opacity-0 ":mt+="opacity-0 ",dt==="none"&&(mt=mt.replace("opacity-0","opacity-50"))),ge==="large"||ge==="large_upper"){const _t=be?W?"text-4xl":"text-6xl":W?"text-6xl":"text-8xl",rt=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${_t} font-black text-white ${ge==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,at=`${rt} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(ge==="big_center"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} font-black text-white uppercase tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="testing_up"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-white uppercase tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="testing"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-white tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="one_line_up"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-white uppercase tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="one_line"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-white tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="metal"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ge==="kids"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ge==="sad"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",ft=be?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${B} text-zinc-200 tracking-wider text-center drop-shadow-md`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ge==="romantic"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",ft=be?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${B} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(ge==="tech"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,at=`${ft} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(ge==="gothic"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ge=`${B} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,at=`${ft} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(ge==="monospace"){const B=be?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",ft=be?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${B} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,at=`${ft} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(ge==="classic"){const B=be?W?"text-2xl":"text-3xl":W?"text-3xl":"text-6xl",ft=be?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${B} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,at=`${ft} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(ge==="slideshow"||ge==="just_video")Ge=`${be?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,at="hidden";else if(ge==="subtitle"){Ge=`${be?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center whitespace-pre-wrap`,at="hidden";let ft="bottom-16";W&&Xi?ft="bottom-[560px]":W?ft="bottom-[360px]":Xi&&(ft="bottom-[280px]"),mt=mt.replace("absolute","").replace("transform",""),mt+=`fixed ${ft} left-1/2 -translate-x-1/2 w-full px-8 z-[100] pointer-events-none `}else if(ge==="custom"){const B=be?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=be?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl",_t=C.textAlign==="center"?"text-center":C.textAlign==="right"?"text-right":"text-left";Ge=`${B} tracking-tight ${_t}`,at=`${ft} opacity-40 hover:opacity-100 ${_t}`}else{const B=be?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",ft=be?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ge=`${B} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,at=`${ft} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const fn=(C.lyricStyleTarget||"active-only")==="all"||Ue;let Pe={color:C.fontColor,fontWeight:fn?C.fontWeight:void 0,fontStyle:fn?C.fontStyle:void 0,textDecoration:fn?C.textDecoration:void 0,fontFamily:C.fontFamily==="CustomFont"?"CustomFont, sans-serif":C.fontFamily};if((ge==="custom"||ge==="default")&&Ue&&C.textEffect!=="none"){const B=C.textEffect;B==="glow"?Pe.textShadow=`0 0 10px ${C.fontColor}, 0 0 20px ${C.fontColor}`:B==="neon"?Pe.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${C.fontColor}, 0 0 40px ${C.fontColor}, 0 0 80px ${C.fontColor}`:B==="neon-multi"?Pe.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":B==="shadow"?Pe.textShadow="3px 3px 6px rgba(0,0,0,0.7)":B==="outline"?Pe.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":B==="3d"?Pe.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":B==="emboss"?(Pe.color="#ebebeb",Pe.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):B==="gold"?(Pe.background="linear-gradient(to bottom, #d4af37, #C5A028)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):B==="chrome"?(Pe.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):B==="fire"?(Pe.color="#fff",Pe.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):B==="frozen"?(Pe.color="#fff",Pe.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):B==="vhs"?Pe.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":B==="gradient"?(Pe.background=`linear-gradient(to right, ${C.fontColor}, #ffffff)`,Pe.WebkitBackgroundClip="text",Pe.color="transparent"):B==="rainbow"?(Pe.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):B==="glass"?(Pe.backgroundColor="rgba(255, 255, 255, 0.1)",Pe.backdropFilter="blur(8px)",Pe.padding="0.5rem 1rem",Pe.borderRadius="0.75rem",Pe.border="1px solid rgba(255, 255, 255, 0.2)",Pe.display="inline-block"):B==="mirror"?(Pe.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Pe.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):B==="retro"?(Pe.fontFamily="'Press Start 2P', cursive",Pe.color="#ff00ff",Pe.textShadow="4px 4px 0px #00ffff"):B==="hologram"?(Pe.color="rgba(0, 255, 255, 0.7)",Pe.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",Pe.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",Pe.WebkitBackgroundClip="text"):B==="comic"&&(Pe.fontFamily="'Bangers', cursive",Pe.color="#ffcc00",Pe.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",Pe.letterSpacing="1px")}let Pt=R.text;const nn=C.textCase;nn==="upper"?Pt=Pt.toUpperCase():nn==="lower"?Pt=Pt.toLowerCase():nn==="title"?Pt=Pt.replace(/\w\S*/g,B=>B.charAt(0).toUpperCase()+B.substr(1).toLowerCase()):nn==="sentence"?Pt=Pt.charAt(0).toUpperCase()+Pt.slice(1).toLowerCase():nn==="invert"&&(Pt=Pt.replace(/\w\S*/g,B=>B.charAt(0).toLowerCase()+B.slice(1).toUpperCase())),Pt=Pt.replace(/\s*([-])\s*/g,"$1"),Ue&&C.textAnimation==="typewriter"&&(Pt=Pt.substring(0,Math.max(0,Math.floor((_e-R.time)*35))));let _n=Pt;if(Ue&&C.highlightEffect!=="none"){const B=C.highlightEffect,ft=R.words&&R.words.length>0;if((B==="karaoke"||B?.startsWith("karaoke-"))&&ft)_n=R.words.filter(_t=>_t.text===`
`||_t.text.trim().length>0).map((_t,rt,ln)=>{if(_t.text===`
`)return f.jsx("br",{},rt);let an=_t.text.trim();if(nn==="upper")an=an.toUpperCase();else if(nn==="lower")an=an.toLowerCase();else if(nn==="title")an=an.replace(/\w\S*/g,bt=>bt.charAt(0).toUpperCase()+bt.substr(1).toLowerCase());else if(nn==="sentence"){const bt=an.toLowerCase();an=rt===0?bt.charAt(0).toUpperCase()+bt.slice(1):bt}else nn==="invert"&&(an=an.replace(/\w\S*/g,bt=>bt.charAt(0).toLowerCase()+bt.slice(1).toUpperCase()));const Ni=_t.startTime+ce,fi=_t.endTime+ce,ti=_e>=Ni&&_e<fi,Vn=_e>=fi,Qi=/[-]$/,ni=/^[-]/;let Ft=!an.endsWith(" ");Qi.test(an.trim())&&(Ft=!1);const pi=ln[rt+1];pi&&ni.test(pi.text.trim())&&(Ft=!1),pi&&pi.text===`
`&&(Ft=!1),rt===ln.length-1&&(Ft=!1);let X={display:"inline-block",transition:"all 0.1s ease"};if(C.textDecoration&&C.textDecoration!=="none"&&(X.textDecoration=C.textDecoration),!ti&&!Vn)X.opacity=.5,X.transform="scale(1)";else if(Vn)if(B==="karaoke-fill"){const bt=C.highlightBackground||"#fb923c";X.backgroundColor=bt,X.color="#000",X.padding="2px 6px",X.borderRadius="4px",X.opacity=1}else B==="karaoke-smooth"?(X.color=C.highlightColor||"#fb923c",X.opacity=1):(ge==="custom"&&(X.color=C.fontColor),X.opacity=1);if(ti){const bt=C.highlightColor||"#fb923c",An=C.highlightBackground||"#fb923c";if(B==="karaoke-smooth"){const Zi=_t.endTime-_t.startTime,pn=_e-Ni,On=Math.min(100,Math.max(0,pn/Zi*100));X.backgroundImage=`linear-gradient(90deg, ${bt} ${On}%, ${C.fontColor||"#ffffff"} ${On}%)`,X.backgroundClip="text",X.WebkitBackgroundClip="text",X.color="transparent",X.WebkitTextFillColor="transparent",X.textShadow="none"}else B==="karaoke"||B==="color"?(X.color=bt,X.textShadow=`0 0 10px ${bt}`):B==="karaoke-neon"?(X.color="#fff",X.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${bt}, 0 0 35px ${bt}`):B==="karaoke-scale"?(X.color=bt,X.transform="scale(1.3)"):B==="karaoke-underline"?(X.color=bt,X.textDecoration=(X.textDecoration||"")+" underline",X.textDecorationColor=bt,X.textUnderlineOffset="4px"):B==="karaoke-bounce"?(X.color=bt,X.transform="translateY(-10px)"):B==="karaoke-fill"?(X.backgroundColor=An,X.color="#000",X.padding="2px 6px",X.borderRadius="4px"):B==="karaoke-outline"?(X.color="transparent",X.WebkitTextStroke=`2px ${bt}`):B==="karaoke-shadow"?(X.color=bt,X.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):B==="karaoke-gradient"?(X.background=`linear-gradient(90deg, ${bt}, ${An})`,X.WebkitBackgroundClip="text",X.WebkitTextFillColor="transparent"):B==="karaoke-wave"?(X.color=bt,X.animation="bounce 0.3s ease infinite"):B==="karaoke-pill"?(X.backgroundColor=An,X.color="#000",X.padding="4px 16px",X.borderRadius="9999px"):B==="karaoke-box"?(X.backgroundColor=An,X.color="#000",X.padding="4px 8px",X.borderRadius="0"):B==="karaoke-rounded"?(X.backgroundColor=An,X.color="#000",X.padding="4px 12px",X.padding="4px 12px",X.borderRadius="12px"):B==="karaoke-glass"?(X.backgroundColor="rgba(255, 255, 255, 0.1)",X.color="#fff",X.padding="4px 12px",X.borderRadius="8px",X.backdropFilter="blur(4px)",X.border="1px solid rgba(255, 255, 255, 0.3)",X.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):B==="karaoke-neon-multi"?(X.color="#fff",X.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):B==="karaoke-soft-glow"?(X.color=bt,X.textShadow=`0 0 5px ${bt}, 0 0 15px ${bt}, 0 0 30px ${bt}`):B==="karaoke-3d"?X.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":B==="karaoke-emboss"?(X.color="#ebebeb",X.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):B==="karaoke-chrome"?(X.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",X.WebkitBackgroundClip="text",X.color="transparent"):B==="karaoke-gold"?(X.background="linear-gradient(to bottom, #d4af37, #C5A028)",X.WebkitBackgroundClip="text",X.color="transparent"):B==="karaoke-fire"?(X.color="#fff",X.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):B==="karaoke-frozen"?(X.color="#fff",X.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):B==="karaoke-rainbow"?(X.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",X.WebkitBackgroundClip="text",X.color="transparent"):B==="karaoke-mirror"?(X.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",X.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):B==="karaoke-vhs"?X.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":B==="karaoke-retro"?(X.fontFamily="'Press Start 2P', cursive",X.color="#ff00ff",X.textShadow="4px 4px 0px #00ffff"):B==="karaoke-cyberpunk"?(X.color="#fcee0a",X.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8"):B==="karaoke-hologram"?(X.color="rgba(0, 255, 255, 0.7)",X.textShadow="0 0 5px rgba(0,255,255,0.5)"):B==="karaoke-comic"?(X.fontFamily="'Bangers', cursive",X.color="#ffcc00",X.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):B==="karaoke-glitch-text"?X.animation="anim-glitch 0.4s infinite linear":B==="karaoke-pulse"?X.animation="anim-pulse 1s infinite ease-in-out":B==="karaoke-breathe"?X.animation="anim-breathe 2s infinite ease-in-out":B==="karaoke-float"?X.animation="anim-float 2s infinite ease-in-out":B==="karaoke-sway"?X.animation="anim-sway 2s infinite ease-in-out":B==="karaoke-flicker"?X.animation="anim-flicker 2s infinite linear":B==="karaoke-shake"?X.animation="anim-shake 0.2s infinite linear":B==="karaoke-wobble"?X.animation="anim-wobble 1s infinite ease-in-out":B==="karaoke-jello"?X.animation="anim-jello 1s infinite":B==="karaoke-rubberband"?X.animation="anim-rubberband 1s infinite":B==="karaoke-heartbeat"?X.animation="anim-heartbeat 1.3s infinite ease-in-out":B==="karaoke-flash"?X.animation="anim-flash 1s infinite":B==="karaoke-tada"?X.animation="anim-tada 1s infinite":B==="karaoke-swing"?X.animation="anim-swing 2s infinite":B==="karaoke-rotate"?X.animation="anim-rotate 4s infinite linear":B==="karaoke-spin"?X.animation="anim-rotate 1s infinite linear":B==="karaoke-glitch"?X.animation="anim-glitch 0.3s infinite linear":B==="karaoke-typewriter"?(X.animation="typewriter-reveal 0.5s steps(10, end) forwards",X.whiteSpace="nowrap",X.overflow="hidden",X.display="inline-block",X.verticalAlign="bottom"):B==="karaoke-fade"?X.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":B==="karaoke-slide"?X.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":B==="karaoke-drop"?X.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":B==="karaoke-lightspeed"?X.animation="trans-lightspeed-in 0.5s ease-out forwards":B==="karaoke-roll"?X.animation="trans-roll-in 0.5s ease-out forwards":B==="karaoke-zoom"?X.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":B==="karaoke-elastic"?X.animation="trans-elastic-in 0.7s ease-out forwards":B==="karaoke-scale-rotate"?X.animation="trans-scale-rotate-in 0.5s ease-out forwards":B==="karaoke-flip"?X.animation="trans-flip-in 0.5s ease-out forwards":B==="karaoke-rotate-in"?X.animation="trans-rotate-in 0.5s ease-out forwards":B==="karaoke-spiral"?X.animation="trans-spiral-in 0.6s ease-out forwards":B==="karaoke-blur"?X.animation="trans-blur-in 0.4s ease-out forwards":B==="karaoke-shatter"?X.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(B||"")&&(X.color=bt,X.textShadow=`0 0 10px ${bt}`,B?.includes("glow")&&(X.textShadow=`0 0 5px ${bt}, 0 0 15px ${bt}, 0 0 30px ${bt}`))}const ii=f.jsx("span",{className:"inline-block",style:X,children:an},rt);return Ft?f.jsxs(fg.Fragment,{children:[ii," "]},rt):ii});else if(B==="karaoke"||B?.startsWith("karaoke-")){const _t=C.highlightColor||"#fb923c",rt=C.highlightBackground||"#fb923c";Pe.color=_t,B==="karaoke-neon"&&(Pe.textShadow=`0 0 10px ${_t}, 0 0 20px ${_t}`),B==="karaoke-scale"&&(Pe.transform=(Pe.transform||"")+" scale(1.1)"),B==="karaoke-underline"&&(Pe.textDecoration="underline"),B==="karaoke-bounce"&&(Pe.transform=(Pe.transform||"")+" translateY(-5px)"),B==="karaoke-fill"&&(Pe.backgroundColor=rt,Pe.color="#000",Pe.padding="4px 12px",Pe.borderRadius="6px"),B==="karaoke-outline"&&(Pe.color="transparent",Pe.WebkitTextStroke=`2px ${_t}`),B==="karaoke-shadow"&&(Pe.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),B==="karaoke-gradient"&&(Pe.background=`linear-gradient(90deg, ${_t}, ${rt})`,Pe.WebkitBackgroundClip="text",Pe.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(B)&&(Pe.backgroundColor=rt,Pe.color="#000",Pe.padding="4px 16px",Pe.borderRadius=B==="karaoke-pill"?"9999px":B==="karaoke-rounded"?"12px":"0"),B?.includes("glow")&&(Pe.textShadow=`0 0 10px ${_t}, 0 0 20px ${_t}`)}else B==="scale"?Pe.color=C.highlightColor||"#fb923c":C.highlightEffect==="background"&&(Pe.backgroundColor=(C.highlightBackground||"#fb923c")+"4D",Pe.padding="0 10px",Pe.borderRadius="8px")}return f.jsx("p",{"data-lyric-active":Ue?"true":"false",className:`${mt} ${Ue?Ge:at}`,onClick:()=>{Ue&&(navigator.clipboard.writeText(R.text),n.success("Lyric copied to clipboard",1500)),o.current&&!U&&(o.current.currentTime=R.time,$e(R.time))},children:f.jsx("span",{className:`inline-block ${Ue&&C.textAnimation!=="none"&&C.textAnimation!=="typewriter"?`text-anim-${C.textAnimation}`:""}`,children:f.jsx("span",{style:Pe,className:"inline-block",children:_n})})},Q)}),f.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?Ee===Pn.EDITOR||Ne?"h-[25vh]":!Ki&&!Xi?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):f.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!bo&&ge!=="none"&&f.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[f.jsx($l,{size:64,className:"opacity-20"}),f.jsx("p",{children:"Load audio & lyrics to start"}),f.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),f.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Xi?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:f.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 group",children:[f.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Yl(_e)}),f.jsxs("div",{ref:Ye,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:R=>{R.currentTarget.setPointerCapture(R.pointerId),ia(R.clientX)},onPointerMove:R=>{R.buttons===1&&ia(R.clientX)},children:[f.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${_e/De*100}%`}}),f.jsx("input",{type:"range",min:"0",max:De||0,value:_e,onChange:os,disabled:U,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),f.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Yl(De)}),f.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[f.jsx("button",{onClick:()=>V(!Et),className:"text-zinc-400 hover:text-white",children:Et||pt===0?f.jsx(ql,{size:16}):f.jsx(jo,{size:16})}),f.jsxs("div",{ref:nt,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:R=>{R.currentTarget.setPointerCapture(R.pointerId),Yi(R.clientX)},onPointerMove:R=>{R.buttons===1&&Yi(R.clientX)},children:[f.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${Et?0:pt*100}%`}}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Et?0:pt,onChange:$i,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),f.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[f.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[f.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio or video",children:[f.jsx($l,{size:18}),f.jsx("input",{type:"file",accept:"audio/*,video/*",className:"hidden",onChange:We,disabled:U})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${O.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt, .vtt, .ttml)",children:[f.jsx(Tr,{size:18}),f.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml,.vtt",className:"hidden",onChange:$t,disabled:U})]}),O.length>0&&f.jsx("button",{onClick:()=>H([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:U,children:f.jsx(Ei,{size:14})})]}),f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[f.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[ce>0?"+":"",ce.toFixed(1),"s"]}),f.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[f.jsx("button",{onClick:()=>ye(R=>parseFloat((R+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:U,children:f.jsx(Ju,{size:12})}),f.jsx("button",{onClick:()=>ye(R=>parseFloat((R-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:U,children:f.jsx(is,{size:12})})]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${je?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:je?`Custom Font: ${je}`:"Load Custom Font (.ttf, .otf, .woff)",children:[f.jsx($o,{size:18}),f.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:ei,disabled:U})]}),je&&f.jsx("button",{onClick:()=>Fe(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:U,children:f.jsx(Ei,{size:14})})]}),f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[f.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(C.fontSizeScale*100),"%"]}),f.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[f.jsx("button",{onClick:()=>te(R=>({...R,fontSizeScale:Math.min(R.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:U,children:f.jsx(Ju,{size:12})}),f.jsx("button",{onClick:()=>te(R=>({...R,fontSizeScale:Math.max(R.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:U,children:f.jsx(is,{size:12})})]})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{value:ge,onChange:R=>{const Q=R.target.value;Re(Q);const Ue=kr[Q];if(Ue){const W={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};te(be=>({...be,...W,...Ue}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Visual Preset",children:[f.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),f.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),f.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),f.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),f.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),f.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),f.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),f.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),f.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),f.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),f.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),f.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),f.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),f.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),f.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),f.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),f.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),f.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),f.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),f.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),f.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:f.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),f.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:di,title:"Stop (S)",disabled:U,children:f.jsx(Zu,{size:20,fill:"currentColor"})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U||Je.length===0,onClick:pl,title:"Previous Song",children:f.jsx(Bb,{size:24})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:f.jsx(kb,{size:20})}),f.jsx("button",{onClick:Oi,disabled:U,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:ze?f.jsx(mg,{size:28,fill:"currentColor"}):f.jsx(Ku,{size:28,fill:"currentColor",className:"ml-1"})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:f.jsx(Wx,{size:20})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U||Je.length===0,onClick:Mn,title:"Next Song",children:f.jsx(Ob,{size:24})}),f.jsxs("button",{className:`transition-colors disabled:opacity-50 ${ve!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:qi,title:`Repeat: ${ve==="off"?"Off":ve==="one"?"One":ve==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:U,children:[ve==="one"&&f.jsx(Nb,{size:20}),ve==="all_repeat"&&f.jsx(S0,{size:20}),ve==="all"&&f.jsx(wr,{size:20}),ve==="off"&&f.jsx(S0,{size:20,className:"opacity-50"})]})]}),f.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>te(R=>({...R,backgroundBlurStrength:R.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${Be?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${Be?"On":"Off"}`,disabled:U,children:Be?"BLUR":"SHARP"}),f.jsx("button",{onClick:()=>te(R=>({...R,highlightEffect:R.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${C.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:f.jsx($o,{size:20})}),f.jsx("button",{onClick:()=>fe(R=>R==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:U,children:Ie}),f.jsx("button",{onClick:()=>Ce(R=>R==="16:9"?"9:16":R==="9:16"?"3:4":R==="3:4"?"1:1":R==="1:1"?"1:2":R==="1:2"?"2:1":R==="2:1"?"2:3":R==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:U,children:Te})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{value:Ze,onChange:R=>G(R.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Video Codec",children:[f.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),Lt.map(R=>f.jsx("option",{value:R.value,className:"bg-zinc-900",children:R.label},R.value))]}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:f.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{value:we,onChange:R=>he(R.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Quality (Bitrate)",children:[f.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),f.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),f.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:f.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),f.jsx("button",{onClick:hl,disabled:U||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:`Export as Video (${le==="ffmpeg"?"FFmpeg":"MediaRecorder"})`,children:f.jsx(es,{size:18})})]})]})]})})}),Ne?f.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:f.jsx(BA,{playlist:Je,setPlaylist:Jt,currentTrackIndex:Nt,setCurrentTrackIndex:lt,onPlayTrack:Gt,isPlaying:ze,onTogglePlay:Oi,currentTime:_e,onSeek:R=>{o.current&&!U&&(o.current.currentTime=R,$e(R))},onClearPlaylist:()=>{di(),x(null),H([]),lt(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:R=>{R===Nt?(di(),x(null),H([]),lt(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):R<Nt&&lt(Q=>Q-1),Jt(Q=>{const Ue=[...Q];return Ue.splice(R,1),Ue})},onClose:()=>ct(!1)})}):Ee===Pn.EDITOR&&f.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:f.jsx(E1,{slides:j,setSlides:re,currentTime:_e,duration:De||60,lyrics:O,onSeek:R=>{o.current&&!U&&(o.current.currentTime=R,$e(R))},onClose:()=>ie(Pn.PLAYER),renderConfig:C,setRenderConfig:te})})]}),U&&f.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[f.jsx("div",{className:le==="ffmpeg"?"animate-pulse":"animate-bounce",children:f.jsx(es,{size:48,className:le==="ffmpeg"?"text-orange-500":"text-purple-500"})}),f.jsxs("h2",{className:"text-2xl font-bold text-white",children:[le==="ffmpeg"?"FFmpeg Rendering":"Rendering Video"," (",Te," ",Ie,")"]}),f.jsx("p",{className:"text-zinc-400 max-w-md",children:le==="ffmpeg"?f.jsxs(f.Fragment,{children:["Frame-by-frame capture using FFmpeg WASM.",f.jsx("br",{}),f.jsx("span",{className:"text-orange-400 font-medium",children:M||"Initializing..."}),f.jsx("br",{}),"This is faster than realtime - no audio playback needed."]}):f.jsxs(f.Fragment,{children:["Rendering in real-time using Canvas 2D engine.",f.jsx("br",{}),"The audio will play during capture.",f.jsx("br",{}),"Please keep this tab active for best performance."]})}),f.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full transition-all duration-300 ease-linear ${le==="ffmpeg"?"bg-orange-500":"bg-purple-500"}`,style:{width:`${oe}%`}})}),f.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(oe),"%"]}),f.jsxs("button",{onClick:oa,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[f.jsx(Zu,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),z&&f.jsx(JA,{config:C,setConfig:te,preset:ge,setPreset:Re,onClose:()=>ae(!1),isPlaylistMode:Ne,hasPlaylist:Je.length>0,onRender:hl,customFontName:je,onFontUpload:ei,onClearCustomFont:()=>Fe(null),resolution:Ie,setResolution:fe,aspectRatio:Te,setAspectRatio:Ce,renderCodec:Ze,setRenderCodec:G,supportedCodecs:Lt,renderQuality:we,setRenderQuality:he,renderFps:D,setRenderFps:pe,renderEngine:le,setRenderEngine:E,ffmpegCodec:I,setFfmpegCodec:q})]})}const fy=document.getElementById("root");if(!fy)throw new Error("Could not find root element to mount to");const cN=Sx.createRoot(fy);cN.render(f.jsx(fg.StrictMode,{children:f.jsx(x1,{children:f.jsx(rN,{})})}));export{uN as c,dg as g};
