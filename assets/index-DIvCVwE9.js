(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(r){if(r.ep)return;r.ep=!0;const u=o(r);fetch(r.href,u)}})();var cN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Du={exports:{}},Va={};var e0;function ux(){if(e0)return Va;e0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(a,r,u){var h=null;if(u!==void 0&&(h=""+u),r.key!==void 0&&(h=""+r.key),"key"in r){u={};for(var y in r)y!=="key"&&(u[y]=r[y])}else u=r;return r=u.ref,{$$typeof:n,type:a,key:h,ref:r!==void 0?r:null,props:u}}return Va.Fragment=t,Va.jsx=o,Va.jsxs=o,Va}var t0;function dx(){return t0||(t0=1,Du.exports=ux()),Du.exports}var f=dx(),Lu={exports:{}},Tt={};var n0;function fx(){if(n0)return Tt;n0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,B={};function Y(L,le,ve){this.props=L,this.context=le,this.refs=B,this.updater=ve||N}Y.prototype.isReactComponent={},Y.prototype.setState=function(L,le){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,le,"setState")},Y.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=Y.prototype;function ce(L,le,ve){this.props=L,this.context=le,this.refs=B,this.updater=ve||N}var Re=ce.prototype=new re;Re.constructor=ce,V(Re,Y.prototype),Re.isPureReactComponent=!0;var ze=Array.isArray;function Le(){}var be={H:null,A:null,T:null,S:null},Qe=Object.prototype.hasOwnProperty;function _e(L,le,ve){var Pe=ve.ref;return{$$typeof:n,type:L,key:le,ref:Pe!==void 0?Pe:null,props:ve}}function Ke(L,le){return _e(L.type,le,L.props)}function De(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function rt(L){var le={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return le[ve]})}var mt=/\/+/g;function Et(L,le){return typeof L=="object"&&L!==null&&L.key!=null?rt(""+L.key):le.toString(36)}function wt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Le,Le):(L.status="pending",L.then(function(le){L.status==="pending"&&(L.status="fulfilled",L.value=le)},function(le){L.status==="pending"&&(L.status="rejected",L.reason=le)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,le,ve,Pe,it){var w=typeof L;(w==="undefined"||w==="boolean")&&(L=null);var U=!1;if(L===null)U=!0;else switch(w){case"bigint":case"string":case"number":U=!0;break;case"object":switch(L.$$typeof){case n:case t:U=!0;break;case x:return U=L._init,F(U(L._payload),le,ve,Pe,it)}}if(U)return it=it(L),U=Pe===""?"."+Et(L,0):Pe,ze(it)?(ve="",U!=null&&(ve=U.replace(mt,"$&/")+"/"),F(it,le,ve,"",function(Ne){return Ne})):it!=null&&(De(it)&&(it=Ke(it,ve+(it.key==null||L&&L.key===it.key?"":(""+it.key).replace(mt,"$&/")+"/")+U)),le.push(it)),1;U=0;var J=Pe===""?".":Pe+":";if(ze(L))for(var oe=0;oe<L.length;oe++)Pe=L[oe],w=J+Et(Pe,oe),U+=F(Pe,le,ve,w,it);else if(oe=A(L),typeof oe=="function")for(L=oe.call(L),oe=0;!(Pe=L.next()).done;)Pe=Pe.value,w=J+Et(Pe,oe++),U+=F(Pe,le,ve,w,it);else if(w==="object"){if(typeof L.then=="function")return F(wt(L),le,ve,Pe,it);throw le=String(L),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return U}function Te(L,le,ve){if(L==null)return L;var Pe=[],it=0;return F(L,Pe,"","",function(w){return le.call(ve,w,it++)}),Pe}function ne(L){if(L._status===-1){var le=L._result;le=le(),le.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=le)}if(L._status===1)return L._result.default;throw L._result}var de=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},yt={map:Te,forEach:function(L,le,ve){Te(L,function(){le.apply(this,arguments)},ve)},count:function(L){var le=0;return Te(L,function(){le++}),le},toArray:function(L){return Te(L,function(le){return le})||[]},only:function(L){if(!De(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Tt.Activity=b,Tt.Children=yt,Tt.Component=Y,Tt.Fragment=o,Tt.Profiler=r,Tt.PureComponent=ce,Tt.StrictMode=a,Tt.Suspense=v,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=be,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return be.H.useMemoCache(L)}},Tt.cache=function(L){return function(){return L.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(L,le,ve){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Pe=V({},L.props),it=L.key;if(le!=null)for(w in le.key!==void 0&&(it=""+le.key),le)!Qe.call(le,w)||w==="key"||w==="__self"||w==="__source"||w==="ref"&&le.ref===void 0||(Pe[w]=le[w]);var w=arguments.length-2;if(w===1)Pe.children=ve;else if(1<w){for(var U=Array(w),J=0;J<w;J++)U[J]=arguments[J+2];Pe.children=U}return _e(L.type,it,Pe)},Tt.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Tt.createElement=function(L,le,ve){var Pe,it={},w=null;if(le!=null)for(Pe in le.key!==void 0&&(w=""+le.key),le)Qe.call(le,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(it[Pe]=le[Pe]);var U=arguments.length-2;if(U===1)it.children=ve;else if(1<U){for(var J=Array(U),oe=0;oe<U;oe++)J[oe]=arguments[oe+2];it.children=J}if(L&&L.defaultProps)for(Pe in U=L.defaultProps,U)it[Pe]===void 0&&(it[Pe]=U[Pe]);return _e(L,w,it)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(L){return{$$typeof:y,render:L}},Tt.isValidElement=De,Tt.lazy=function(L){return{$$typeof:x,_payload:{_status:-1,_result:L},_init:ne}},Tt.memo=function(L,le){return{$$typeof:m,type:L,compare:le===void 0?null:le}},Tt.startTransition=function(L){var le=be.T,ve={};be.T=ve;try{var Pe=L(),it=be.S;it!==null&&it(ve,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(Le,de)}catch(w){de(w)}finally{le!==null&&ve.types!==null&&(le.types=ve.types),be.T=le}},Tt.unstable_useCacheRefresh=function(){return be.H.useCacheRefresh()},Tt.use=function(L){return be.H.use(L)},Tt.useActionState=function(L,le,ve){return be.H.useActionState(L,le,ve)},Tt.useCallback=function(L,le){return be.H.useCallback(L,le)},Tt.useContext=function(L){return be.H.useContext(L)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(L,le){return be.H.useDeferredValue(L,le)},Tt.useEffect=function(L,le){return be.H.useEffect(L,le)},Tt.useEffectEvent=function(L){return be.H.useEffectEvent(L)},Tt.useId=function(){return be.H.useId()},Tt.useImperativeHandle=function(L,le,ve){return be.H.useImperativeHandle(L,le,ve)},Tt.useInsertionEffect=function(L,le){return be.H.useInsertionEffect(L,le)},Tt.useLayoutEffect=function(L,le){return be.H.useLayoutEffect(L,le)},Tt.useMemo=function(L,le){return be.H.useMemo(L,le)},Tt.useOptimistic=function(L,le){return be.H.useOptimistic(L,le)},Tt.useReducer=function(L,le,ve){return be.H.useReducer(L,le,ve)},Tt.useRef=function(L){return be.H.useRef(L)},Tt.useState=function(L){return be.H.useState(L)},Tt.useSyncExternalStore=function(L,le,ve){return be.H.useSyncExternalStore(L,le,ve)},Tt.useTransition=function(){return be.H.useTransition()},Tt.version="19.2.3",Tt}var i0;function pd(){return i0||(i0=1,Lu.exports=fx()),Lu.exports}var W=pd();const rg=sg(W);var Uu={exports:{}},Oa={},Pu={exports:{}},Hu={};var o0;function px(){return o0||(o0=1,(function(n){function t(F,Te){var ne=F.length;F.push(Te);e:for(;0<ne;){var de=ne-1>>>1,yt=F[de];if(0<r(yt,Te))F[de]=Te,F[ne]=yt,ne=de;else break e}}function o(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var Te=F[0],ne=F.pop();if(ne!==Te){F[0]=ne;e:for(var de=0,yt=F.length,L=yt>>>1;de<L;){var le=2*(de+1)-1,ve=F[le],Pe=le+1,it=F[Pe];if(0>r(ve,ne))Pe<yt&&0>r(it,ve)?(F[de]=it,F[Pe]=ne,de=Pe):(F[de]=ve,F[le]=ne,de=le);else if(Pe<yt&&0>r(it,ne))F[de]=it,F[Pe]=ne,de=Pe;else break e}}return Te}function r(F,Te){var ne=F.sortIndex-Te.sortIndex;return ne!==0?ne:F.id-Te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,b=null,T=3,A=!1,N=!1,V=!1,B=!1,Y=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function Re(F){for(var Te=o(m);Te!==null;){if(Te.callback===null)a(m);else if(Te.startTime<=F)a(m),Te.sortIndex=Te.expirationTime,t(v,Te);else break;Te=o(m)}}function ze(F){if(V=!1,Re(F),!N)if(o(v)!==null)N=!0,Le||(Le=!0,rt());else{var Te=o(m);Te!==null&&wt(ze,Te.startTime-F)}}var Le=!1,be=-1,Qe=5,_e=-1;function Ke(){return B?!0:!(n.unstable_now()-_e<Qe)}function De(){if(B=!1,Le){var F=n.unstable_now();_e=F;var Te=!0;try{e:{N=!1,V&&(V=!1,re(be),be=-1),A=!0;var ne=T;try{t:{for(Re(F),b=o(v);b!==null&&!(b.expirationTime>F&&Ke());){var de=b.callback;if(typeof de=="function"){b.callback=null,T=b.priorityLevel;var yt=de(b.expirationTime<=F);if(F=n.unstable_now(),typeof yt=="function"){b.callback=yt,Re(F),Te=!0;break t}b===o(v)&&a(v),Re(F)}else a(v);b=o(v)}if(b!==null)Te=!0;else{var L=o(m);L!==null&&wt(ze,L.startTime-F),Te=!1}}break e}finally{b=null,T=ne,A=!1}Te=void 0}}finally{Te?rt():Le=!1}}}var rt;if(typeof ce=="function")rt=function(){ce(De)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,Et=mt.port2;mt.port1.onmessage=De,rt=function(){Et.postMessage(null)}}else rt=function(){Y(De,0)};function wt(F,Te){be=Y(function(){F(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Qe=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(F){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var ne=T;T=Te;try{return F()}finally{T=ne}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(F,Te){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ne=T;T=F;try{return Te()}finally{T=ne}},n.unstable_scheduleCallback=function(F,Te,ne){var de=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,F){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=ne+yt,F={id:x++,callback:Te,priorityLevel:F,startTime:ne,expirationTime:yt,sortIndex:-1},ne>de?(F.sortIndex=ne,t(m,F),o(v)===null&&F===o(m)&&(V?(re(be),be=-1):V=!0,wt(ze,ne-de))):(F.sortIndex=yt,t(v,F),N||A||(N=!0,Le||(Le=!0,rt()))),F},n.unstable_shouldYield=Ke,n.unstable_wrapCallback=function(F){var Te=T;return function(){var ne=T;T=Te;try{return F.apply(this,arguments)}finally{T=ne}}}})(Hu)),Hu}var l0;function hx(){return l0||(l0=1,Pu.exports=px()),Pu.exports}var Gu={exports:{}},On={};var a0;function mx(){if(a0)return On;a0=1;var n=pd();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(v,m,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,On.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(v,m,null,x)},On.flushSync=function(v){var m=h.T,x=a.p;try{if(h.T=null,a.p=2,v)return v()}finally{h.T=m,a.p=x,a.d.f()}},On.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(v,m))},On.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},On.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,b=y(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?a.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:A}):x==="script"&&a.d.X(v,{crossOrigin:b,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},On.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);a.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(v)},On.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,b=y(x,m.crossOrigin);a.d.L(v,x,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},On.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);a.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(v)},On.requestFormReset=function(v){a.d.r(v)},On.unstable_batchedUpdates=function(v,m){return v(m)},On.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},On.useFormStatus=function(){return h.H.useHostTransitionStatus()},On.version="19.2.3",On}var s0;function gx(){if(s0)return Gu.exports;s0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Gu.exports=mx(),Gu.exports}var r0;function yx(){if(r0)return Oa;r0=1;var n=hx(),t=pd(),o=gx();function a(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(u(e)!==e)throw Error(a(188))}function m(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(a(188));return i!==e?null:e}for(var l=e,s=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(s=p.return,s!==null){l=s;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return v(p),e;if(g===s)return v(p),i;g=g.sibling}throw Error(a(188))}if(l.return!==s.return)l=p,s=g;else{for(var S=!1,C=p.child;C;){if(C===l){S=!0,l=p,s=g;break}if(C===s){S=!0,s=p,l=g;break}C=C.sibling}if(!S){for(C=g.child;C;){if(C===l){S=!0,l=g,s=p;break}if(C===s){S=!0,s=g,l=p;break}C=C.sibling}if(!S)throw Error(a(189))}}if(l.alternate!==s)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),Ke=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function rt(e){return e===null||typeof e!="object"?null:(e=De&&e[De]||e["@@iterator"],typeof e=="function"?e:null)}var mt=Symbol.for("react.client.reference");function Et(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===mt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case Y:return"Profiler";case B:return"StrictMode";case ze:return"Suspense";case Le:return"SuspenseList";case _e:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case ce:return e.displayName||"Context";case re:return(e._context.displayName||"Context")+".Consumer";case Re:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case be:return i=e.displayName||null,i!==null?i:Et(e.type)||"Memo";case Qe:i=e._payload,e=e._init;try{return Et(e(i))}catch{}}return null}var wt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},de=[],yt=-1;function L(e){return{current:e}}function le(e){0>yt||(e.current=de[yt],de[yt]=null,yt--)}function ve(e,i){yt++,de[yt]=e.current,e.current=i}var Pe=L(null),it=L(null),w=L(null),U=L(null);function J(e,i){switch(ve(w,i),ve(it,e),ve(Pe,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?wh(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=wh(i),e=Eh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(Pe),ve(Pe,e)}function oe(){le(Pe),le(it),le(w)}function Ne(e){e.memoizedState!==null&&ve(U,e);var i=Pe.current,l=Eh(i,e.type);i!==l&&(ve(it,e),ve(Pe,l))}function Se(e){it.current===e&&(le(Pe),le(it)),U.current===e&&(le(U),Ha._currentValue=ne)}var Ee,ke;function fe(e){if(Ee===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ee=i&&i[1]||"",ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+e+ke}var ge=!1;function Me(e,i){if(!e||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(i){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(te){var X=te}Reflect.construct(e,[],xe)}else{try{xe.call()}catch(te){X=te}e.call(xe.prototype)}}else{try{throw Error()}catch(te){X=te}(xe=e())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(te){if(te&&X&&typeof te.stack=="string")return[te.stack,X.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=s.DetermineComponentFrameRoot(),S=g[0],C=g[1];if(S&&C){var k=S.split(`
`),$=C.split(`
`);for(p=s=0;s<k.length&&!k[s].includes("DetermineComponentFrameRoot");)s++;for(;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;if(s===k.length||p===$.length)for(s=k.length-1,p=$.length-1;1<=s&&0<=p&&k[s]!==$[p];)p--;for(;1<=s&&0<=p;s--,p--)if(k[s]!==$[p]){if(s!==1||p!==1)do if(s--,p--,0>p||k[s]!==$[p]){var ue=`
`+k[s].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=s&&0<=p);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?fe(l):""}function je(e,i){switch(e.tag){case 26:case 27:case 5:return fe(e.type);case 16:return fe("Lazy");case 13:return e.child!==i&&i!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return Me(e.type,!1);case 11:return Me(e.type.render,!1);case 1:return Me(e.type,!0);case 31:return fe("Activity");default:return""}}function Fe(e){try{var i="",l=null;do i+=je(e,l),l=e,e=e.return;while(e);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ze=Object.prototype.hasOwnProperty,H=n.unstable_scheduleCallback,z=n.unstable_cancelCallback,pe=n.unstable_shouldYield,Ce=n.unstable_requestPaint,he=n.unstable_now,ae=n.unstable_getCurrentPriorityLevel,E=n.unstable_ImmediatePriority,I=n.unstable_UserBlockingPriority,O=n.unstable_NormalPriority,M=n.unstable_LowPriority,ee=n.unstable_IdlePriority,D=n.log,se=n.unstable_setDisableYieldValue,_=null,ie=null;function Ie(e){if(typeof D=="function"&&se(e),ie&&typeof ie.setStrictMode=="function")try{ie.setStrictMode(_,e)}catch{}}var Ye=Math.clz32?Math.clz32:Lt,nt=Math.log,Be=Math.LN2;function Lt(e){return e>>>=0,e===0?32:31-(nt(e)/Be|0)|0}var Je=256,Jt=262144,Mt=4194304;function ot(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,i,l){var s=e.pendingLanes;if(s===0)return 0;var p=0,g=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var C=s&134217727;return C!==0?(s=C&~g,s!==0?p=ot(s):(S&=C,S!==0?p=ot(S):l||(l=C&~e,l!==0&&(p=ot(l))))):(C=s&~g,C!==0?p=ot(C):S!==0?p=ot(S):l||(l=s&~e,l!==0&&(p=ot(l)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:p}function ct(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ut(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(){var e=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),e}function It(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function bt(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gt(e,i,l,s,p,g){var S=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var C=e.entanglements,k=e.expirationTimes,$=e.hiddenUpdates;for(l=S&~l;0<l;){var ue=31-Ye(l),xe=1<<ue;C[ue]=0,k[ue]=-1;var X=$[ue];if(X!==null)for($[ue]=null,ue=0;ue<X.length;ue++){var te=X[ue];te!==null&&(te.lane&=-536870913)}l&=~xe}s!==0&&jt(e,s,0),g!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=g&~(S&~i))}function jt(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var s=31-Ye(i);e.entangledLanes|=i,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function vn(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var s=31-Ye(l),p=1<<s;p&i|e[s]&i&&(e[s]|=i),l&=~p}}function un(e,i){var l=i&-i;return l=(l&42)!==0?1:Ii(l),(l&(e.suspendedLanes|i))!==0?0:l}function Ii(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zi(){var e=Te.p;return e!==0?e:(e=window.event,e===void 0?32:Yh(e.type))}function Di(e,i){var l=Te.p;try{return Te.p=e,i()}finally{Te.p=l}}var xn=Math.random().toString(36).slice(2),We="__reactFiber$"+xn,vt="__reactProps$"+xn,$t="__reactContainer$"+xn,ei="__reactEvents$"+xn,Ht="__reactListeners$"+xn,Mn="__reactHandles$"+xn,ul="__reactResources$"+xn,Vi="__reactMarker$"+xn;function ci(e){delete e[We],delete e[vt],delete e[ei],delete e[Ht],delete e[Mn]}function Oi(e){var i=e[We];if(i)return i;for(var l=e.parentNode;l;){if(i=l[$t]||l[We]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=kh(e);e!==null;){if(l=e[We])return l;e=kh(e)}return i}e=l,l=e.parentNode}return null}function qi(e){if(e=e[We]||e[$t]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function $o(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(a(33))}function mo(e){var i=e[ul];return i||(i=e[ul]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bn(e){e[Vi]=!0}var ia=new Set,ns={};function Li(e,i){go(e,i),go(e+"Capture",i)}function go(e,i){for(ns[e]=i,e=0;e<i.length;e++)ia.add(i[e])}var Pr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dl={},fl={};function pl(e){return Ze.call(fl,e)?!0:Ze.call(dl,e)?!1:Pr.test(e)?fl[e]=!0:(dl[e]=!0,!1)}function Ui(e,i,l){if(pl(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var s=i.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function yo(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function ui(e,i,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+s)}}function Rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ji(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oa(e,i,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,g=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function $i(e){if(!e._valueTracker){var i=ji(e)?"checked":"value";e._valueTracker=oa(e,i,""+e[i])}}function R(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),s="";return e&&(s=ji(e)?e.checked?"true":"false":e.value),e=s,e!==l?(i.setValue(e),!0):!1}function Z(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ue=/[\n"\\]/g;function K(e){return e.replace(Ue,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function we(e,i,l,s,p,g,S,C){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),i!=null?S==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Rn(i)):e.value!==""+Rn(i)&&(e.value=""+Rn(i)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),i!=null?at(e,S,Rn(i)):l!=null?at(e,S,Rn(l)):s!=null&&e.removeAttribute("value"),p==null&&g!=null&&(e.defaultChecked=!!g),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Rn(C):e.removeAttribute("name")}function Ge(e,i,l,s,p,g,S,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){$i(e);return}l=l!=null?""+Rn(l):"",i=i!=null?""+Rn(i):l,C||i===e.value||(e.value=i),e.defaultValue=i}s=s??p,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=C?e.checked:!!s,e.defaultChecked=!!s,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),$i(e)}function at(e,i,l){i==="number"&&Z(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function dt(e,i,l,s){if(e=e.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<e.length;l++)p=i.hasOwnProperty("$"+e[l].value),e[l].selected!==p&&(e[l].selected=p),p&&s&&(e[l].defaultSelected=!0)}else{for(l=""+Rn(l),i=null,p=0;p<e.length;p++){if(e[p].value===l){e[p].selected=!0,s&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function ht(e,i,l){if(i!=null&&(i=""+Rn(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+Rn(l):""}function Fn(e,i,l,s){if(i==null){if(s!=null){if(l!=null)throw Error(a(92));if(wt(s)){if(1<s.length)throw Error(a(93));s=s[0]}l=s}l==null&&(l=""),i=l}l=Rn(i),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),$i(e)}function nn(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var He=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ut(e,i,l){var s=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":s?e.setProperty(i,l):typeof l!="number"||l===0||He.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function Zt(e,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||i!=null&&i.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var p in i)s=i[p],i.hasOwnProperty(p)&&l[p]!==s&&Ut(e,p,s)}else for(var g in i)i.hasOwnProperty(g)&&Ut(e,g,i[g])}function kn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ft=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return ft.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function lt(){}var dn=null;function ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jn=null,Bn=null;function Pi(e){var i=qi(e);if(i&&(e=i.stateNode)){var l=e[vt]||null;e:switch(e=i.stateNode,i.type){case"input":if(we(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+K(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var s=l[i];if(s!==e&&s.form===e.form){var p=s[vt]||null;if(!p)throw Error(a(90));we(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)s=l[i],s.form===e.form&&R(s)}break e;case"textarea":ht(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&dt(e,!!l.multiple,i,!1)}}}var Yi=!1;function vo(e,i,l){if(Yi)return e(i,l);Yi=!0;try{var s=e(i);return s}finally{if(Yi=!1,(Jn!==null||Bn!==null)&&(Hs(),Jn&&(i=Jn,e=Bn,Bn=Jn=null,Pi(i),e)))for(i=0;i<e.length;i++)Pi(e[i])}}function ti(e,i){var l=e.stateNode;if(l===null)return null;var s=l[vt]||null;if(s===null)return null;l=s[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=!1;if(Gt)try{var Q={};Object.defineProperty(Q,"passive",{get:function(){di=!0}}),window.addEventListener("test",Q,Q),window.removeEventListener("test",Q,Q)}catch{di=!1}var Cn=null,St=null,_n=null;function Ji(){if(_n)return _n;var e,i=St,l=i.length,s,p="value"in Cn?Cn.value:Cn.textContent,g=p.length;for(e=0;e<l&&i[e]===p[e];e++);var S=l-e;for(s=1;s<=S&&i[l-s]===p[g-s];s++);return _n=p.slice(e,1<s?1-s:void 0)}function fi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function pi(){return!0}function xo(){return!1}function ye(e){function i(l,s,p,g,S){this._reactName=l,this._targetInst=p,this.type=s,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(l=e[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pi:xo,this.isPropagationStopped=xo,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),i}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nt=ye($e),Oe=b({},$e,{view:0,detail:0}),fn=ye(Oe),Ft,pn,Vn,An=b({},Oe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vn&&(Vn&&e.type==="mousemove"?(Ft=e.screenX-Vn.screenX,pn=e.screenY-Vn.screenY):pn=Ft=0,Vn=e),Ft)},movementY:function(e){return"movementY"in e?e.movementY:pn}}),Ki=ye(An),hl=b({},An,{dataTransfer:0}),uy=ye(hl),dy=b({},Oe,{relatedTarget:0}),Hr=ye(dy),fy=b({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),py=ye(fy),hy=b({},$e,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),my=ye(hy),gy=b({},$e,{data:0}),_d=ye(gy),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function by(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=xy[e])?!!i[e]:!1}function Gr(){return by}var Sy=b({},Oe,{key:function(e){if(e.key){var i=yy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=fi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(e){return e.type==="keypress"?fi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ty=ye(Sy),wy=b({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ad=ye(wy),Ey=b({},Oe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),Cy=ye(Ey),_y=b({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=ye(_y),Ny=b({},An,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),My=ye(Ny),Ry=b({},$e,{newState:0,oldState:0}),ky=ye(Ry),Iy=[9,13,27,32],Fr=Gt&&"CompositionEvent"in window,la=null;Gt&&"documentMode"in document&&(la=document.documentMode);var zy=Gt&&"TextEvent"in window&&!la,Nd=Gt&&(!Fr||la&&8<la&&11>=la),Md=" ",Rd=!1;function kd(e,i){switch(e){case"keyup":return Iy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ml=!1;function Dy(e,i){switch(e){case"compositionend":return Id(i);case"keypress":return i.which!==32?null:(Rd=!0,Md);case"textInput":return e=i.data,e===Md&&Rd?null:e;default:return null}}function Ly(e,i){if(ml)return e==="compositionend"||!Fr&&kd(e,i)?(e=Ji(),_n=St=Cn=null,ml=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Nd&&i.locale!=="ko"?null:i.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Uy[e.type]:i==="textarea"}function Dd(e,i,l,s){Jn?Bn?Bn.push(s):Bn=[s]:Jn=s,i=js(i,"onChange"),0<i.length&&(l=new Nt("onChange","change",null,l,s),e.push({event:l,listeners:i}))}var aa=null,sa=null;function Py(e){yh(e,0)}function is(e){var i=$o(e);if(R(i))return e}function Ld(e,i){if(e==="change")return i}var Ud=!1;if(Gt){var Br;if(Gt){var Vr="oninput"in document;if(!Vr){var Pd=document.createElement("div");Pd.setAttribute("oninput","return;"),Vr=typeof Pd.oninput=="function"}Br=Vr}else Br=!1;Ud=Br&&(!document.documentMode||9<document.documentMode)}function Hd(){aa&&(aa.detachEvent("onpropertychange",Gd),sa=aa=null)}function Gd(e){if(e.propertyName==="value"&&is(sa)){var i=[];Dd(i,sa,e,ln(e)),vo(Py,i)}}function Hy(e,i,l){e==="focusin"?(Hd(),aa=i,sa=l,aa.attachEvent("onpropertychange",Gd)):e==="focusout"&&Hd()}function Gy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return is(sa)}function Fy(e,i){if(e==="click")return is(i)}function By(e,i){if(e==="input"||e==="change")return is(i)}function Vy(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ni=typeof Object.is=="function"?Object.is:Vy;function ra(e,i){if(ni(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),s=Object.keys(i);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var p=l[s];if(!Ze.call(i,p)||!ni(e[p],i[p]))return!1}return!0}function Fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bd(e,i){var l=Fd(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=i&&s>=i)return{node:l,offset:i-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fd(l)}}function Vd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Vd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Od(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Z(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Z(e.document)}return i}function Or(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Oy=Gt&&"documentMode"in document&&11>=document.documentMode,gl=null,qr=null,ca=null,jr=!1;function qd(e,i,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jr||gl==null||gl!==Z(s)||(s=gl,"selectionStart"in s&&Or(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ca&&ra(ca,s)||(ca=s,s=js(qr,"onSelect"),0<s.length&&(i=new Nt("onSelect","select",null,i,l),e.push({event:i,listeners:s}),i.target=gl)))}function Yo(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var yl={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionrun:Yo("Transition","TransitionRun"),transitionstart:Yo("Transition","TransitionStart"),transitioncancel:Yo("Transition","TransitionCancel"),transitionend:Yo("Transition","TransitionEnd")},$r={},jd={};Gt&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Jo(e){if($r[e])return $r[e];if(!yl[e])return e;var i=yl[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in jd)return $r[e]=i[l];return e}var $d=Jo("animationend"),Yd=Jo("animationiteration"),Jd=Jo("animationstart"),qy=Jo("transitionrun"),jy=Jo("transitionstart"),$y=Jo("transitioncancel"),Kd=Jo("transitionend"),Xd=new Map,Yr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yr.push("scrollEnd");function _i(e,i){Xd.set(e,i),Li(i,[e])}var os=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},hi=[],vl=0,Jr=0;function ls(){for(var e=vl,i=Jr=vl=0;i<e;){var l=hi[i];hi[i++]=null;var s=hi[i];hi[i++]=null;var p=hi[i];hi[i++]=null;var g=hi[i];if(hi[i++]=null,s!==null&&p!==null){var S=s.pending;S===null?p.next=p:(p.next=S.next,S.next=p),s.pending=p}g!==0&&Qd(l,p,g)}}function as(e,i,l,s){hi[vl++]=e,hi[vl++]=i,hi[vl++]=l,hi[vl++]=s,Jr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Kr(e,i,l,s){return as(e,i,l,s),ss(e)}function Ko(e,i){return as(e,null,null,i),ss(e)}function Qd(e,i,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var p=!1,g=e.return;g!==null;)g.childLanes|=l,s=g.alternate,s!==null&&(s.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(p=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,p&&i!==null&&(p=31-Ye(l),e=g.hiddenUpdates,s=e[p],s===null?e[p]=[i]:s.push(i),i.lane=l|536870912),g):null}function ss(e){if(50<ka)throw ka=0,ou=null,Error(a(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var xl={};function Yy(e,i,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(e,i,l,s){return new Yy(e,i,l,s)}function Xr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xi(e,i){var l=e.alternate;return l===null?(l=ii(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Zd(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function rs(e,i,l,s,p,g){var S=0;if(s=e,typeof e=="function")Xr(e)&&(S=1);else if(typeof e=="string")S=Zv(e,l,Pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _e:return e=ii(31,l,i,p),e.elementType=_e,e.lanes=g,e;case V:return Xo(l.children,p,g,i);case B:S=8,p|=24;break;case Y:return e=ii(12,l,i,p|2),e.elementType=Y,e.lanes=g,e;case ze:return e=ii(13,l,i,p),e.elementType=ze,e.lanes=g,e;case Le:return e=ii(19,l,i,p),e.elementType=Le,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:S=10;break e;case re:S=9;break e;case Re:S=11;break e;case be:S=14;break e;case Qe:S=16,s=null;break e}S=29,l=Error(a(130,e===null?"null":typeof e,"")),s=null}return i=ii(S,l,i,p),i.elementType=e,i.type=s,i.lanes=g,i}function Xo(e,i,l,s){return e=ii(7,e,s,i),e.lanes=l,e}function Qr(e,i,l){return e=ii(6,e,null,i),e.lanes=l,e}function Wd(e){var i=ii(18,null,null,0);return i.stateNode=e,i}function Zr(e,i,l){return i=ii(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ef=new WeakMap;function mi(e,i){if(typeof e=="object"&&e!==null){var l=ef.get(e);return l!==void 0?l:(i={value:e,source:i,stack:Fe(i)},ef.set(e,i),i)}return{value:e,source:i,stack:Fe(i)}}var bl=[],Sl=0,cs=null,ua=0,gi=[],yi=0,bo=null,Hi=1,Gi="";function Qi(e,i){bl[Sl++]=ua,bl[Sl++]=cs,cs=e,ua=i}function tf(e,i,l){gi[yi++]=Hi,gi[yi++]=Gi,gi[yi++]=bo,bo=e;var s=Hi;e=Gi;var p=32-Ye(s)-1;s&=~(1<<p),l+=1;var g=32-Ye(i)+p;if(30<g){var S=p-p%5;g=(s&(1<<S)-1).toString(32),s>>=S,p-=S,Hi=1<<32-Ye(i)+p|l<<p|s,Gi=g+e}else Hi=1<<g|l<<p|s,Gi=e}function Wr(e){e.return!==null&&(Qi(e,1),tf(e,1,0))}function ec(e){for(;e===cs;)cs=bl[--Sl],bl[Sl]=null,ua=bl[--Sl],bl[Sl]=null;for(;e===bo;)bo=gi[--yi],gi[yi]=null,Gi=gi[--yi],gi[yi]=null,Hi=gi[--yi],gi[yi]=null}function nf(e,i){gi[yi++]=Hi,gi[yi++]=Gi,gi[yi++]=bo,Hi=i.id,Gi=i.overflow,bo=e}var Ln=null,an=null,Pt=!1,So=null,vi=!1,tc=Error(a(519));function To(e){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw da(mi(i,e)),tc}function of(e){var i=e.stateNode,l=e.type,s=e.memoizedProps;switch(i[We]=e,i[vt]=s,l){case"dialog":kt("cancel",i),kt("close",i);break;case"iframe":case"object":case"embed":kt("load",i);break;case"video":case"audio":for(l=0;l<za.length;l++)kt(za[l],i);break;case"source":kt("error",i);break;case"img":case"image":case"link":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"input":kt("invalid",i),Ge(i,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":kt("invalid",i);break;case"textarea":kt("invalid",i),Fn(i,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||s.suppressHydrationWarning===!0||Sh(i.textContent,l)?(s.popover!=null&&(kt("beforetoggle",i),kt("toggle",i)),s.onScroll!=null&&kt("scroll",i),s.onScrollEnd!=null&&kt("scrollend",i),s.onClick!=null&&(i.onclick=lt),i=!0):i=!1,i||To(e,!0)}function lf(e){for(Ln=e.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:Ln=Ln.return}}function Tl(e){if(e!==Ln)return!1;if(!Pt)return lf(e),Pt=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||xu(e.type,e.memoizedProps)),l=!l),l&&an&&To(e),lf(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));an=Rh(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));an=Rh(e)}else i===27?(i=an,Uo(e.type)?(e=Eu,Eu=null,an=e):an=i):an=Ln?bi(e.stateNode.nextSibling):null;return!0}function Qo(){an=Ln=null,Pt=!1}function nc(){var e=So;return e!==null&&(Zn===null?Zn=e:Zn.push.apply(Zn,e),So=null),e}function da(e){So===null?So=[e]:So.push(e)}var ic=L(null),Zo=null,Zi=null;function wo(e,i,l){ve(ic,i._currentValue),i._currentValue=l}function Wi(e){e._currentValue=ic.current,le(ic)}function oc(e,i,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,s!==null&&(s.childLanes|=i)):s!==null&&(s.childLanes&i)!==i&&(s.childLanes|=i),e===l)break;e=e.return}}function lc(e,i,l,s){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=p;for(var k=0;k<i.length;k++)if(C.context===i[k]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),oc(g.return,l,e),s||(S=null);break e}g=C.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(a(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),oc(S,l,e),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===e){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function wl(e,i,l,s){e=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var C=p.type;ni(p.pendingProps.value,S.value)||(e!==null?e.push(C):e=[C])}}else if(p===U.current){if(S=p.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Ha):e=[Ha])}p=p.return}e!==null&&lc(i,e,l,s),i.flags|=262144}function us(e){for(e=e.firstContext;e!==null;){if(!ni(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wo(e){Zo=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Un(e){return af(Zo,e)}function ds(e,i){return Zo===null&&Wo(e),af(e,i)}function af(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Zi===null){if(e===null)throw Error(a(308));Zi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Zi=Zi.next=i;return l}var Jy=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Ky=n.unstable_scheduleCallback,Xy=n.unstable_NormalPriority,Sn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ac(){return{controller:new Jy,data:new Map,refCount:0}}function fa(e){e.refCount--,e.refCount===0&&Ky(Xy,function(){e.controller.abort()})}var pa=null,sc=0,El=0,Cl=null;function Qy(e,i){if(pa===null){var l=pa=[];sc=0,El=uu(),Cl={status:"pending",value:void 0,then:function(s){l.push(s)}}}return sc++,i.then(sf,sf),i}function sf(){if(--sc===0&&pa!==null){Cl!==null&&(Cl.status="fulfilled");var e=pa;pa=null,El=0,Cl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Zy(e,i){var l=[],s={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return e.then(function(){s.status="fulfilled",s.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(s.status="rejected",s.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),s}var rf=F.S;F.S=function(e,i){jp=he(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Qy(e,i),rf!==null&&rf(e,i)};var el=L(null);function rc(){var e=el.current;return e!==null?e:on.pooledCache}function fs(e,i){i===null?ve(el,el.current):ve(el,i.pool)}function cf(){var e=rc();return e===null?null:{parent:Sn._currentValue,pool:e}}var _l=Error(a(460)),cc=Error(a(474)),ps=Error(a(542)),hs={then:function(){}};function uf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function df(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(lt,lt),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,pf(e),e;default:if(typeof i.status=="string")i.then(lt,lt);else{if(e=on,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=i,e.status="pending",e.then(function(s){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=s}},function(s){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=s}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,pf(e),e}throw nl=i,_l}}function tl(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(nl=l,_l):l}}var nl=null;function ff(){if(nl===null)throw Error(a(459));var e=nl;return nl=null,e}function pf(e){if(e===_l||e===ps)throw Error(a(483))}var Al=null,ha=0;function ms(e){var i=ha;return ha+=1,Al===null&&(Al=[]),df(Al,e,i)}function ma(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function gs(e,i){throw i.$$typeof===T?Error(a(525)):(e=Object.prototype.toString.call(i),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function hf(e){function i(G,P){if(e){var j=G.deletions;j===null?(G.deletions=[P],G.flags|=16):j.push(P)}}function l(G,P){if(!e)return null;for(;P!==null;)i(G,P),P=P.sibling;return null}function s(G){for(var P=new Map;G!==null;)G.key!==null?P.set(G.key,G):P.set(G.index,G),G=G.sibling;return P}function p(G,P){return G=Xi(G,P),G.index=0,G.sibling=null,G}function g(G,P,j){return G.index=j,e?(j=G.alternate,j!==null?(j=j.index,j<P?(G.flags|=67108866,P):j):(G.flags|=67108866,P)):(G.flags|=1048576,P)}function S(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function C(G,P,j,me){return P===null||P.tag!==6?(P=Qr(j,G.mode,me),P.return=G,P):(P=p(P,j),P.return=G,P)}function k(G,P,j,me){var st=j.type;return st===V?ue(G,P,j.props.children,me,j.key):P!==null&&(P.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Qe&&tl(st)===P.type)?(P=p(P,j.props),ma(P,j),P.return=G,P):(P=rs(j.type,j.key,j.props,null,G.mode,me),ma(P,j),P.return=G,P)}function $(G,P,j,me){return P===null||P.tag!==4||P.stateNode.containerInfo!==j.containerInfo||P.stateNode.implementation!==j.implementation?(P=Zr(j,G.mode,me),P.return=G,P):(P=p(P,j.children||[]),P.return=G,P)}function ue(G,P,j,me,st){return P===null||P.tag!==7?(P=Xo(j,G.mode,me,st),P.return=G,P):(P=p(P,j),P.return=G,P)}function xe(G,P,j){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Qr(""+P,G.mode,j),P.return=G,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return j=rs(P.type,P.key,P.props,null,G.mode,j),ma(j,P),j.return=G,j;case N:return P=Zr(P,G.mode,j),P.return=G,P;case Qe:return P=tl(P),xe(G,P,j)}if(wt(P)||rt(P))return P=Xo(P,G.mode,j,null),P.return=G,P;if(typeof P.then=="function")return xe(G,ms(P),j);if(P.$$typeof===ce)return xe(G,ds(G,P),j);gs(G,P)}return null}function X(G,P,j,me){var st=P!==null?P.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return st!==null?null:C(G,P,""+j,me);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return j.key===st?k(G,P,j,me):null;case N:return j.key===st?$(G,P,j,me):null;case Qe:return j=tl(j),X(G,P,j,me)}if(wt(j)||rt(j))return st!==null?null:ue(G,P,j,me,null);if(typeof j.then=="function")return X(G,P,ms(j),me);if(j.$$typeof===ce)return X(G,P,ds(G,j),me);gs(G,j)}return null}function te(G,P,j,me,st){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return G=G.get(j)||null,C(P,G,""+me,st);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case A:return G=G.get(me.key===null?j:me.key)||null,k(P,G,me,st);case N:return G=G.get(me.key===null?j:me.key)||null,$(P,G,me,st);case Qe:return me=tl(me),te(G,P,j,me,st)}if(wt(me)||rt(me))return G=G.get(j)||null,ue(P,G,me,st,null);if(typeof me.then=="function")return te(G,P,j,ms(me),st);if(me.$$typeof===ce)return te(G,P,j,ds(P,me),st);gs(P,me)}return null}function Xe(G,P,j,me){for(var st=null,Bt=null,tt=P,At=P=0,Dt=null;tt!==null&&At<j.length;At++){tt.index>At?(Dt=tt,tt=null):Dt=tt.sibling;var Vt=X(G,tt,j[At],me);if(Vt===null){tt===null&&(tt=Dt);break}e&&tt&&Vt.alternate===null&&i(G,tt),P=g(Vt,P,At),Bt===null?st=Vt:Bt.sibling=Vt,Bt=Vt,tt=Dt}if(At===j.length)return l(G,tt),Pt&&Qi(G,At),st;if(tt===null){for(;At<j.length;At++)tt=xe(G,j[At],me),tt!==null&&(P=g(tt,P,At),Bt===null?st=tt:Bt.sibling=tt,Bt=tt);return Pt&&Qi(G,At),st}for(tt=s(tt);At<j.length;At++)Dt=te(tt,G,At,j[At],me),Dt!==null&&(e&&Dt.alternate!==null&&tt.delete(Dt.key===null?At:Dt.key),P=g(Dt,P,At),Bt===null?st=Dt:Bt.sibling=Dt,Bt=Dt);return e&&tt.forEach(function(Bo){return i(G,Bo)}),Pt&&Qi(G,At),st}function pt(G,P,j,me){if(j==null)throw Error(a(151));for(var st=null,Bt=null,tt=P,At=P=0,Dt=null,Vt=j.next();tt!==null&&!Vt.done;At++,Vt=j.next()){tt.index>At?(Dt=tt,tt=null):Dt=tt.sibling;var Bo=X(G,tt,Vt.value,me);if(Bo===null){tt===null&&(tt=Dt);break}e&&tt&&Bo.alternate===null&&i(G,tt),P=g(Bo,P,At),Bt===null?st=Bo:Bt.sibling=Bo,Bt=Bo,tt=Dt}if(Vt.done)return l(G,tt),Pt&&Qi(G,At),st;if(tt===null){for(;!Vt.done;At++,Vt=j.next())Vt=xe(G,Vt.value,me),Vt!==null&&(P=g(Vt,P,At),Bt===null?st=Vt:Bt.sibling=Vt,Bt=Vt);return Pt&&Qi(G,At),st}for(tt=s(tt);!Vt.done;At++,Vt=j.next())Vt=te(tt,G,At,Vt.value,me),Vt!==null&&(e&&Vt.alternate!==null&&tt.delete(Vt.key===null?At:Vt.key),P=g(Vt,P,At),Bt===null?st=Vt:Bt.sibling=Vt,Bt=Vt);return e&&tt.forEach(function(cx){return i(G,cx)}),Pt&&Qi(G,At),st}function tn(G,P,j,me){if(typeof j=="object"&&j!==null&&j.type===V&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case A:e:{for(var st=j.key;P!==null;){if(P.key===st){if(st=j.type,st===V){if(P.tag===7){l(G,P.sibling),me=p(P,j.props.children),me.return=G,G=me;break e}}else if(P.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Qe&&tl(st)===P.type){l(G,P.sibling),me=p(P,j.props),ma(me,j),me.return=G,G=me;break e}l(G,P);break}else i(G,P);P=P.sibling}j.type===V?(me=Xo(j.props.children,G.mode,me,j.key),me.return=G,G=me):(me=rs(j.type,j.key,j.props,null,G.mode,me),ma(me,j),me.return=G,G=me)}return S(G);case N:e:{for(st=j.key;P!==null;){if(P.key===st)if(P.tag===4&&P.stateNode.containerInfo===j.containerInfo&&P.stateNode.implementation===j.implementation){l(G,P.sibling),me=p(P,j.children||[]),me.return=G,G=me;break e}else{l(G,P);break}else i(G,P);P=P.sibling}me=Zr(j,G.mode,me),me.return=G,G=me}return S(G);case Qe:return j=tl(j),tn(G,P,j,me)}if(wt(j))return Xe(G,P,j,me);if(rt(j)){if(st=rt(j),typeof st!="function")throw Error(a(150));return j=st.call(j),pt(G,P,j,me)}if(typeof j.then=="function")return tn(G,P,ms(j),me);if(j.$$typeof===ce)return tn(G,P,ds(G,j),me);gs(G,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,P!==null&&P.tag===6?(l(G,P.sibling),me=p(P,j),me.return=G,G=me):(l(G,P),me=Qr(j,G.mode,me),me.return=G,G=me),S(G)):l(G,P)}return function(G,P,j,me){try{ha=0;var st=tn(G,P,j,me);return Al=null,st}catch(tt){if(tt===_l||tt===ps)throw tt;var Bt=ii(29,tt,null,G.mode);return Bt.lanes=me,Bt.return=G,Bt}}}var il=hf(!0),mf=hf(!1),Eo=!1;function uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Co(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _o(e,i,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(qt&2)!==0){var p=s.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),s.pending=i,i=ss(e),Qd(e,null,l),i}return as(e,s,i,l),ss(e)}function ga(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var s=i.lanes;s&=e.pendingLanes,l|=s,i.lanes=l,vn(e,l)}}function fc(e,i){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:s.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var pc=!1;function ya(){if(pc){var e=Cl;if(e!==null)throw e}}function va(e,i,l,s){pc=!1;var p=e.updateQueue;Eo=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var k=C,$=k.next;k.next=null,S===null?g=$:S.next=$,S=k;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,C=ue.lastBaseUpdate,C!==S&&(C===null?ue.firstBaseUpdate=$:C.next=$,ue.lastBaseUpdate=k))}if(g!==null){var xe=p.baseState;S=0,ue=$=k=null,C=g;do{var X=C.lane&-536870913,te=X!==C.lane;if(te?(zt&X)===X:(s&X)===X){X!==0&&X===El&&(pc=!0),ue!==null&&(ue=ue.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Xe=e,pt=C;X=i;var tn=l;switch(pt.tag){case 1:if(Xe=pt.payload,typeof Xe=="function"){xe=Xe.call(tn,xe,X);break e}xe=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=pt.payload,X=typeof Xe=="function"?Xe.call(tn,xe,X):Xe,X==null)break e;xe=b({},xe,X);break e;case 2:Eo=!0}}X=C.callback,X!==null&&(e.flags|=64,te&&(e.flags|=8192),te=p.callbacks,te===null?p.callbacks=[X]:te.push(X))}else te={lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ue===null?($=ue=te,k=xe):ue=ue.next=te,S|=X;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;te=C,C=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);ue===null&&(k=xe),p.baseState=k,p.firstBaseUpdate=$,p.lastBaseUpdate=ue,g===null&&(p.shared.lanes=0),ko|=S,e.lanes=S,e.memoizedState=xe}}function gf(e,i){if(typeof e!="function")throw Error(a(191,e));e.call(i)}function yf(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)gf(l[e],i)}var Nl=L(null),ys=L(0);function vf(e,i){e=ro,ve(ys,e),ve(Nl,i),ro=e|i.baseLanes}function hc(){ve(ys,ro),ve(Nl,Nl.current)}function mc(){ro=ys.current,le(Nl),le(ys)}var oi=L(null),xi=null;function Ao(e){var i=e.alternate;ve(gn,gn.current&1),ve(oi,e),xi===null&&(i===null||Nl.current!==null||i.memoizedState!==null)&&(xi=e)}function gc(e){ve(gn,gn.current),ve(oi,e),xi===null&&(xi=e)}function xf(e){e.tag===22?(ve(gn,gn.current),ve(oi,e),xi===null&&(xi=e)):No()}function No(){ve(gn,gn.current),ve(oi,oi.current)}function li(e){le(oi),xi===e&&(xi=null),le(gn)}var gn=L(0);function vs(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Tu(l)||wu(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var eo=0,_t=null,Wt=null,Tn=null,xs=!1,Ml=!1,ol=!1,bs=0,xa=0,Rl=null,Wy=0;function hn(){throw Error(a(321))}function yc(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ni(e[l],i[l]))return!1;return!0}function vc(e,i,l,s,p,g){return eo=g,_t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=e===null||e.memoizedState===null?np:zc,ol=!1,g=l(s,p),ol=!1,Ml&&(g=Sf(i,l,s,p)),bf(e),g}function bf(e){F.H=Ta;var i=Wt!==null&&Wt.next!==null;if(eo=0,Tn=Wt=_t=null,xs=!1,xa=0,Rl=null,i)throw Error(a(300));e===null||wn||(e=e.dependencies,e!==null&&us(e)&&(wn=!0))}function Sf(e,i,l,s){_t=e;var p=0;do{if(Ml&&(Rl=null),xa=0,Ml=!1,25<=p)throw Error(a(301));if(p+=1,Tn=Wt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}F.H=ip,g=i(l,s)}while(Ml);return g}function ev(){var e=F.H,i=e.useState()[0];return i=typeof i.then=="function"?ba(i):i,e=e.useState()[0],(Wt!==null?Wt.memoizedState:null)!==e&&(_t.flags|=1024),i}function xc(){var e=bs!==0;return bs=0,e}function bc(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function Sc(e){if(xs){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}xs=!1}eo=0,Tn=Wt=_t=null,Ml=!1,xa=bs=0,Rl=null}function jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?_t.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function yn(){if(Wt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var i=Tn===null?_t.memoizedState:Tn.next;if(i!==null)Tn=i,Wt=e;else{if(e===null)throw _t.alternate===null?Error(a(467)):Error(a(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Tn===null?_t.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function Ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ba(e){var i=xa;return xa+=1,Rl===null&&(Rl=[]),e=df(Rl,e,i),i=_t,(Tn===null?i.memoizedState:Tn.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?np:zc),e}function Ts(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ba(e);if(e.$$typeof===ce)return Un(e)}throw Error(a(438,String(e)))}function Tc(e){var i=null,l=_t.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var s=_t.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(i={data:s.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Ss(),_t.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),s=0;s<e;s++)l[s]=Ke;return i.index++,l}function to(e,i){return typeof i=="function"?i(e):i}function ws(e){var i=yn();return wc(i,Wt,e)}function wc(e,i,l){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=l;var p=e.baseQueue,g=s.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}i.baseQueue=p=g,s.pending=null}if(g=e.baseState,p===null)e.memoizedState=g;else{i=p.next;var C=S=null,k=null,$=i,ue=!1;do{var xe=$.lane&-536870913;if(xe!==$.lane?(zt&xe)===xe:(eo&xe)===xe){var X=$.revertLane;if(X===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),xe===El&&(ue=!0);else if((eo&X)===X){$=$.next,X===El&&(ue=!0);continue}else xe={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(C=k=xe,S=g):k=k.next=xe,_t.lanes|=X,ko|=X;xe=$.action,ol&&l(g,xe),g=$.hasEagerState?$.eagerState:l(g,xe)}else X={lane:xe,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(C=k=X,S=g):k=k.next=X,_t.lanes|=xe,ko|=xe;$=$.next}while($!==null&&$!==i);if(k===null?S=g:k.next=C,!ni(g,e.memoizedState)&&(wn=!0,ue&&(l=Cl,l!==null)))throw l;e.memoizedState=g,e.baseState=S,e.baseQueue=k,s.lastRenderedState=g}return p===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ec(e){var i=yn(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=e;var s=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do g=e(g,S.action),S=S.next;while(S!==p);ni(g,i.memoizedState)||(wn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,s]}function Tf(e,i,l){var s=_t,p=yn(),g=Pt;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=i();var S=!ni((Wt||p).memoizedState,l);if(S&&(p.memoizedState=l,wn=!0),p=p.queue,Ac(Cf.bind(null,s,p,e),[e]),p.getSnapshot!==i||S||Tn!==null&&Tn.memoizedState.tag&1){if(s.flags|=2048,kl(9,{destroy:void 0},Ef.bind(null,s,p,l,i),null),on===null)throw Error(a(349));g||(eo&127)!==0||wf(s,i,l)}return l}function wf(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=_t.updateQueue,i===null?(i=Ss(),_t.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function Ef(e,i,l,s){i.value=l,i.getSnapshot=s,_f(i)&&Af(e)}function Cf(e,i,l){return l(function(){_f(i)&&Af(e)})}function _f(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ni(e,l)}catch{return!0}}function Af(e){var i=Ko(e,2);i!==null&&Wn(i,e,2)}function Cc(e){var i=jn();if(typeof e=="function"){var l=e;if(e=l(),ol){Ie(!0);try{l()}finally{Ie(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:e},i}function Nf(e,i,l,s){return e.baseState=l,wc(e,Wt,typeof s=="function"?s:to)}function tv(e,i,l,s,p){if(_s(e))throw Error(a(485));if(e=i.action,e!==null){var g={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};F.T!==null?l(!0):g.isTransition=!1,s(g),l=i.pending,l===null?(g.next=i.pending=g,Mf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function Mf(e,i){var l=i.action,s=i.payload,p=e.state;if(i.isTransition){var g=F.T,S={};F.T=S;try{var C=l(p,s),k=F.S;k!==null&&k(S,C),Rf(e,i,C)}catch($){_c(e,i,$)}finally{g!==null&&S.types!==null&&(g.types=S.types),F.T=g}}else try{g=l(p,s),Rf(e,i,g)}catch($){_c(e,i,$)}}function Rf(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){kf(e,i,s)},function(s){return _c(e,i,s)}):kf(e,i,l)}function kf(e,i,l){i.status="fulfilled",i.value=l,If(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,Mf(e,l)))}function _c(e,i,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do i.status="rejected",i.reason=l,If(i),i=i.next;while(i!==s)}e.action=null}function If(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function zf(e,i){return i}function Df(e,i){if(Pt){var l=on.formState;if(l!==null){e:{var s=_t;if(Pt){if(an){t:{for(var p=an,g=vi;p.nodeType!==8;){if(!g){p=null;break t}if(p=bi(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){an=bi(p.nextSibling),s=p.data==="F!";break e}}To(s)}s=!1}s&&(i=l[0])}}return l=jn(),l.memoizedState=l.baseState=i,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zf,lastRenderedState:i},l.queue=s,l=Wf.bind(null,_t,s),s.dispatch=l,s=Cc(!1),g=Ic.bind(null,_t,!1,s.queue),s=jn(),p={state:i,dispatch:null,action:e,pending:null},s.queue=p,l=tv.bind(null,_t,p,g,l),p.dispatch=l,s.memoizedState=e,[i,l,!1]}function Lf(e){var i=yn();return Uf(i,Wt,e)}function Uf(e,i,l){if(i=wc(e,i,zf)[0],e=ws(to)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var s=ba(i)}catch(S){throw S===_l?ps:S}else s=i;i=yn();var p=i.queue,g=p.dispatch;return l!==i.memoizedState&&(_t.flags|=2048,kl(9,{destroy:void 0},nv.bind(null,p,l),null)),[s,g,e]}function nv(e,i){e.action=i}function Pf(e){var i=yn(),l=Wt;if(l!==null)return Uf(i,l,e);yn(),i=i.memoizedState,l=yn();var s=l.queue.dispatch;return l.memoizedState=e,[i,s,!1]}function kl(e,i,l,s){return e={tag:e,create:l,deps:s,inst:i,next:null},i=_t.updateQueue,i===null&&(i=Ss(),_t.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,i.lastEffect=e),e}function Hf(){return yn().memoizedState}function Es(e,i,l,s){var p=jn();_t.flags|=e,p.memoizedState=kl(1|i,{destroy:void 0},l,s===void 0?null:s)}function Cs(e,i,l,s){var p=yn();s=s===void 0?null:s;var g=p.memoizedState.inst;Wt!==null&&s!==null&&yc(s,Wt.memoizedState.deps)?p.memoizedState=kl(i,g,l,s):(_t.flags|=e,p.memoizedState=kl(1|i,g,l,s))}function Gf(e,i){Es(8390656,8,e,i)}function Ac(e,i){Cs(2048,8,e,i)}function iv(e){_t.flags|=4;var i=_t.updateQueue;if(i===null)i=Ss(),_t.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function Ff(e){var i=yn().memoizedState;return iv({ref:i,nextImpl:e}),function(){if((qt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Bf(e,i){return Cs(4,2,e,i)}function Vf(e,i){return Cs(4,4,e,i)}function Of(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function qf(e,i,l){l=l!=null?l.concat([e]):null,Cs(4,4,Of.bind(null,i,e),l)}function Nc(){}function jf(e,i){var l=yn();i=i===void 0?null:i;var s=l.memoizedState;return i!==null&&yc(i,s[1])?s[0]:(l.memoizedState=[e,i],e)}function $f(e,i){var l=yn();i=i===void 0?null:i;var s=l.memoizedState;if(i!==null&&yc(i,s[1]))return s[0];if(s=e(),ol){Ie(!0);try{e()}finally{Ie(!1)}}return l.memoizedState=[s,i],s}function Mc(e,i,l){return l===void 0||(eo&1073741824)!==0&&(zt&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=Yp(),_t.lanes|=e,ko|=e,l)}function Yf(e,i,l,s){return ni(l,i)?l:Nl.current!==null?(e=Mc(e,l,s),ni(e,i)||(wn=!0),e):(eo&42)===0||(eo&1073741824)!==0&&(zt&261930)===0?(wn=!0,e.memoizedState=l):(e=Yp(),_t.lanes|=e,ko|=e,i)}function Jf(e,i,l,s,p){var g=Te.p;Te.p=g!==0&&8>g?g:8;var S=F.T,C={};F.T=C,Ic(e,!1,i,l);try{var k=p(),$=F.S;if($!==null&&$(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ue=Zy(k,s);Sa(e,i,ue,ri(e))}else Sa(e,i,s,ri(e))}catch(xe){Sa(e,i,{then:function(){},status:"rejected",reason:xe},ri())}finally{Te.p=g,S!==null&&C.types!==null&&(S.types=C.types),F.T=S}}function ov(){}function Rc(e,i,l,s){if(e.tag!==5)throw Error(a(476));var p=Kf(e).queue;Jf(e,p,i,ne,l===null?ov:function(){return Xf(e),l(s)})}function Kf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:ne},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Xf(e){var i=Kf(e);i.next===null&&(i=e.alternate.memoizedState),Sa(e,i.next.queue,{},ri())}function kc(){return Un(Ha)}function Qf(){return yn().memoizedState}function Zf(){return yn().memoizedState}function lv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=ri();e=Co(l);var s=_o(i,e,l);s!==null&&(Wn(s,i,l),ga(s,i,l)),i={cache:ac()},e.payload=i;return}i=i.return}}function av(e,i,l){var s=ri();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},_s(e)?ep(i,l):(l=Kr(e,i,l,s),l!==null&&(Wn(l,e,s),tp(l,i,s)))}function Wf(e,i,l){var s=ri();Sa(e,i,l,s)}function Sa(e,i,l,s){var p={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(_s(e))ep(i,p);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,C=g(S,l);if(p.hasEagerState=!0,p.eagerState=C,ni(C,S))return as(e,i,p,0),on===null&&ls(),!1}catch{}if(l=Kr(e,i,p,s),l!==null)return Wn(l,e,s),tp(l,i,s),!0}return!1}function Ic(e,i,l,s){if(s={lane:2,revertLane:uu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},_s(e)){if(i)throw Error(a(479))}else i=Kr(e,l,s,2),i!==null&&Wn(i,e,2)}function _s(e){var i=e.alternate;return e===_t||i!==null&&i===_t}function ep(e,i){Ml=xs=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function tp(e,i,l){if((l&4194048)!==0){var s=i.lanes;s&=e.pendingLanes,l|=s,i.lanes=l,vn(e,l)}}var Ta={readContext:Un,use:Ts,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};Ta.useEffectEvent=hn;var np={readContext:Un,use:Ts,useCallback:function(e,i){return jn().memoizedState=[e,i===void 0?null:i],e},useContext:Un,useEffect:Gf,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,Es(4194308,4,Of.bind(null,i,e),l)},useLayoutEffect:function(e,i){return Es(4194308,4,e,i)},useInsertionEffect:function(e,i){Es(4,2,e,i)},useMemo:function(e,i){var l=jn();i=i===void 0?null:i;var s=e();if(ol){Ie(!0);try{e()}finally{Ie(!1)}}return l.memoizedState=[s,i],s},useReducer:function(e,i,l){var s=jn();if(l!==void 0){var p=l(i);if(ol){Ie(!0);try{l(i)}finally{Ie(!1)}}}else p=i;return s.memoizedState=s.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},s.queue=e,e=e.dispatch=av.bind(null,_t,e),[s.memoizedState,e]},useRef:function(e){var i=jn();return e={current:e},i.memoizedState=e},useState:function(e){e=Cc(e);var i=e.queue,l=Wf.bind(null,_t,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:Nc,useDeferredValue:function(e,i){var l=jn();return Mc(l,e,i)},useTransition:function(){var e=Cc(!1);return e=Jf.bind(null,_t,e.queue,!0,!1),jn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var s=_t,p=jn();if(Pt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),on===null)throw Error(a(349));(zt&127)!==0||wf(s,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,Gf(Cf.bind(null,s,g,e),[e]),s.flags|=2048,kl(9,{destroy:void 0},Ef.bind(null,s,g,l,i),null),l},useId:function(){var e=jn(),i=on.identifierPrefix;if(Pt){var l=Gi,s=Hi;l=(s&~(1<<32-Ye(s)-1)).toString(32)+l,i="_"+i+"R_"+l,l=bs++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Wy++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:kc,useFormState:Df,useActionState:Df,useOptimistic:function(e){var i=jn();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Ic.bind(null,_t,!0,l),l.dispatch=i,[e,i]},useMemoCache:Tc,useCacheRefresh:function(){return jn().memoizedState=lv.bind(null,_t)},useEffectEvent:function(e){var i=jn(),l={impl:e};return i.memoizedState=l,function(){if((qt&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},zc={readContext:Un,use:Ts,useCallback:jf,useContext:Un,useEffect:Ac,useImperativeHandle:qf,useInsertionEffect:Bf,useLayoutEffect:Vf,useMemo:$f,useReducer:ws,useRef:Hf,useState:function(){return ws(to)},useDebugValue:Nc,useDeferredValue:function(e,i){var l=yn();return Yf(l,Wt.memoizedState,e,i)},useTransition:function(){var e=ws(to)[0],i=yn().memoizedState;return[typeof e=="boolean"?e:ba(e),i]},useSyncExternalStore:Tf,useId:Qf,useHostTransitionStatus:kc,useFormState:Lf,useActionState:Lf,useOptimistic:function(e,i){var l=yn();return Nf(l,Wt,e,i)},useMemoCache:Tc,useCacheRefresh:Zf};zc.useEffectEvent=Ff;var ip={readContext:Un,use:Ts,useCallback:jf,useContext:Un,useEffect:Ac,useImperativeHandle:qf,useInsertionEffect:Bf,useLayoutEffect:Vf,useMemo:$f,useReducer:Ec,useRef:Hf,useState:function(){return Ec(to)},useDebugValue:Nc,useDeferredValue:function(e,i){var l=yn();return Wt===null?Mc(l,e,i):Yf(l,Wt.memoizedState,e,i)},useTransition:function(){var e=Ec(to)[0],i=yn().memoizedState;return[typeof e=="boolean"?e:ba(e),i]},useSyncExternalStore:Tf,useId:Qf,useHostTransitionStatus:kc,useFormState:Pf,useActionState:Pf,useOptimistic:function(e,i){var l=yn();return Wt!==null?Nf(l,Wt,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Tc,useCacheRefresh:Zf};ip.useEffectEvent=Ff;function Dc(e,i,l,s){i=e.memoizedState,l=l(s,i),l=l==null?i:b({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Lc={enqueueSetState:function(e,i,l){e=e._reactInternals;var s=ri(),p=Co(s);p.payload=i,l!=null&&(p.callback=l),i=_o(e,p,s),i!==null&&(Wn(i,e,s),ga(i,e,s))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var s=ri(),p=Co(s);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=_o(e,p,s),i!==null&&(Wn(i,e,s),ga(i,e,s))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=ri(),s=Co(l);s.tag=2,i!=null&&(s.callback=i),i=_o(e,s,l),i!==null&&(Wn(i,e,l),ga(i,e,l))}};function op(e,i,l,s,p,g,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,S):i.prototype&&i.prototype.isPureReactComponent?!ra(l,s)||!ra(p,g):!0}function lp(e,i,l,s){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,s),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,s),i.state!==e&&Lc.enqueueReplaceState(i,i.state,null)}function ll(e,i){var l=i;if("ref"in i){l={};for(var s in i)s!=="ref"&&(l[s]=i[s])}if(e=e.defaultProps){l===i&&(l=b({},l));for(var p in e)l[p]===void 0&&(l[p]=e[p])}return l}function ap(e){os(e)}function sp(e){console.error(e)}function rp(e){os(e)}function As(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(s){setTimeout(function(){throw s})}}function cp(e,i,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Uc(e,i,l){return l=Co(l),l.tag=3,l.payload={element:null},l.callback=function(){As(e,i)},l}function up(e){return e=Co(e),e.tag=3,e}function dp(e,i,l,s){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=s.value;e.payload=function(){return p(g)},e.callback=function(){cp(i,l,s)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){cp(i,l,s),typeof p!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})})}function sv(e,i,l,s,p){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(i=l.alternate,i!==null&&wl(i,l,p,!0),l=oi.current,l!==null){switch(l.tag){case 31:case 13:return xi===null?Gs():l.alternate===null&&mn===0&&(mn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,s===hs?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([s]):i.add(s),su(e,s,p)),!1;case 22:return l.flags|=65536,s===hs?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([s]):l.add(s)),su(e,s,p)),!1}throw Error(a(435,l.tag))}return su(e,s,p),Gs(),!1}if(Pt)return i=oi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,s!==tc&&(e=Error(a(422),{cause:s}),da(mi(e,l)))):(s!==tc&&(i=Error(a(423),{cause:s}),da(mi(i,l))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,s=mi(s,l),p=Uc(e.stateNode,s,p),fc(e,p),mn!==4&&(mn=2)),!1;var g=Error(a(520),{cause:s});if(g=mi(g,l),Ra===null?Ra=[g]:Ra.push(g),mn!==4&&(mn=2),i===null)return!0;s=mi(s,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=p&-p,l.lanes|=e,e=Uc(l.stateNode,s,e),fc(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Io===null||!Io.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=up(p),dp(p,e,l,s),fc(l,p),!1}l=l.return}while(l!==null);return!1}var Pc=Error(a(461)),wn=!1;function Pn(e,i,l,s){i.child=e===null?mf(i,null,l,s):il(i,e.child,l,s)}function fp(e,i,l,s,p){l=l.render;var g=i.ref;if("ref"in s){var S={};for(var C in s)C!=="ref"&&(S[C]=s[C])}else S=s;return Wo(i),s=vc(e,i,l,S,g,p),C=xc(),e!==null&&!wn?(bc(e,i,p),no(e,i,p)):(Pt&&C&&Wr(i),i.flags|=1,Pn(e,i,s,p),i.child)}function pp(e,i,l,s,p){if(e===null){var g=l.type;return typeof g=="function"&&!Xr(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,hp(e,i,g,s,p)):(e=rs(l.type,null,s,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!jc(e,p)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:ra,l(S,s)&&e.ref===i.ref)return no(e,i,p)}return i.flags|=1,e=Xi(g,s),e.ref=i.ref,e.return=i,i.child=e}function hp(e,i,l,s,p){if(e!==null){var g=e.memoizedProps;if(ra(g,s)&&e.ref===i.ref)if(wn=!1,i.pendingProps=s=g,jc(e,p))(e.flags&131072)!==0&&(wn=!0);else return i.lanes=e.lanes,no(e,i,p)}return Hc(e,i,l,s,p)}function mp(e,i,l,s){var p=s.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(s=i.child=e.child,p=0;s!==null;)p=p|s.lanes|s.childLanes,s=s.sibling;s=p&~g}else s=0,i.child=null;return gp(e,i,g,l,s)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&fs(i,g!==null?g.cachePool:null),g!==null?vf(i,g):hc(),xf(i);else return s=i.lanes=536870912,gp(e,i,g!==null?g.baseLanes|l:l,l,s)}else g!==null?(fs(i,g.cachePool),vf(i,g),No(),i.memoizedState=null):(e!==null&&fs(i,null),hc(),No());return Pn(e,i,p,l),i.child}function wa(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function gp(e,i,l,s,p){var g=rc();return g=g===null?null:{parent:Sn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&fs(i,null),hc(),xf(i),e!==null&&wl(e,i,s,!0),i.childLanes=p,null}function Ns(e,i){return i=Rs({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function yp(e,i,l){return il(i,e.child,null,l),e=Ns(i,i.pendingProps),e.flags|=2,li(i),i.memoizedState=null,e}function rv(e,i,l){var s=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Pt){if(s.mode==="hidden")return e=Ns(i,s),i.lanes=536870912,wa(null,e);if(gc(i),(e=an)?(e=Mh(e,vi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:bo!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=Wd(e),l.return=i,i.child=l,Ln=i,an=null)):e=null,e===null)throw To(i);return i.lanes=536870912,null}return Ns(i,s)}var g=e.memoizedState;if(g!==null){var S=g.dehydrated;if(gc(i),p)if(i.flags&256)i.flags&=-257,i=yp(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(a(558));else if(wn||wl(e,i,l,!1),p=(l&e.childLanes)!==0,wn||p){if(s=on,s!==null&&(S=un(s,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,Ko(e,S),Wn(s,e,S),Pc;Gs(),i=yp(e,i,l)}else e=g.treeContext,an=bi(S.nextSibling),Ln=i,Pt=!0,So=null,vi=!1,e!==null&&nf(i,e),i=Ns(i,s),i.flags|=4096;return i}return e=Xi(e.child,{mode:s.mode,children:s.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Ms(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function Hc(e,i,l,s,p){return Wo(i),l=vc(e,i,l,s,void 0,p),s=xc(),e!==null&&!wn?(bc(e,i,p),no(e,i,p)):(Pt&&s&&Wr(i),i.flags|=1,Pn(e,i,l,p),i.child)}function vp(e,i,l,s,p,g){return Wo(i),i.updateQueue=null,l=Sf(i,s,l,p),bf(e),s=xc(),e!==null&&!wn?(bc(e,i,g),no(e,i,g)):(Pt&&s&&Wr(i),i.flags|=1,Pn(e,i,l,g),i.child)}function xp(e,i,l,s,p){if(Wo(i),i.stateNode===null){var g=xl,S=l.contextType;typeof S=="object"&&S!==null&&(g=Un(S)),g=new l(s,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Lc,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=s,g.state=i.memoizedState,g.refs={},uc(i),S=l.contextType,g.context=typeof S=="object"&&S!==null?Un(S):xl,g.state=i.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Dc(i,l,S,s),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Lc.enqueueReplaceState(g,g.state,null),va(i,s,g,p),ya(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),s=!0}else if(e===null){g=i.stateNode;var C=i.memoizedProps,k=ll(l,C);g.props=k;var $=g.context,ue=l.contextType;S=xl,typeof ue=="object"&&ue!==null&&(S=Un(ue));var xe=l.getDerivedStateFromProps;ue=typeof xe=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,ue||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||$!==S)&&lp(i,g,s,S),Eo=!1;var X=i.memoizedState;g.state=X,va(i,s,g,p),ya(),$=i.memoizedState,C||X!==$||Eo?(typeof xe=="function"&&(Dc(i,l,xe,s),$=i.memoizedState),(k=Eo||op(i,l,k,s,X,$,S))?(ue||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=s,i.memoizedState=$),g.props=s,g.state=$,g.context=S,s=k):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),s=!1)}else{g=i.stateNode,dc(e,i),S=i.memoizedProps,ue=ll(l,S),g.props=ue,xe=i.pendingProps,X=g.context,$=l.contextType,k=xl,typeof $=="object"&&$!==null&&(k=Un($)),C=l.getDerivedStateFromProps,($=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==xe||X!==k)&&lp(i,g,s,k),Eo=!1,X=i.memoizedState,g.state=X,va(i,s,g,p),ya();var te=i.memoizedState;S!==xe||X!==te||Eo||e!==null&&e.dependencies!==null&&us(e.dependencies)?(typeof C=="function"&&(Dc(i,l,C,s),te=i.memoizedState),(ue=Eo||op(i,l,ue,s,X,te,k)||e!==null&&e.dependencies!==null&&us(e.dependencies))?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(s,te,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(s,te,k)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(i.flags|=1024),i.memoizedProps=s,i.memoizedState=te),g.props=s,g.state=te,g.context=k,s=ue):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(i.flags|=1024),s=!1)}return g=s,Ms(e,i),s=(i.flags&128)!==0,g||s?(g=i.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&s?(i.child=il(i,e.child,null,p),i.child=il(i,null,l,p)):Pn(e,i,l,p),i.memoizedState=g.state,e=i.child):e=no(e,i,p),e}function bp(e,i,l,s){return Qo(),i.flags|=256,Pn(e,i,l,s),i.child}var Gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fc(e){return{baseLanes:e,cachePool:cf()}}function Bc(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=si),e}function Sp(e,i,l){var s=i.pendingProps,p=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=e!==null&&e.memoizedState===null?!1:(gn.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,e===null){if(Pt){if(p?Ao(i):No(),(e=an)?(e=Mh(e,vi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:bo!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=Wd(e),l.return=i,i.child=l,Ln=i,an=null)):e=null,e===null)throw To(i);return wu(e)?i.lanes=32:i.lanes=536870912,null}var C=s.children;return s=s.fallback,p?(No(),p=i.mode,C=Rs({mode:"hidden",children:C},p),s=Xo(s,p,l,null),C.return=i,s.return=i,C.sibling=s,i.child=C,s=i.child,s.memoizedState=Fc(l),s.childLanes=Bc(e,S,l),i.memoizedState=Gc,wa(null,s)):(Ao(i),Vc(i,C))}var k=e.memoizedState;if(k!==null&&(C=k.dehydrated,C!==null)){if(g)i.flags&256?(Ao(i),i.flags&=-257,i=Oc(e,i,l)):i.memoizedState!==null?(No(),i.child=e.child,i.flags|=128,i=null):(No(),C=s.fallback,p=i.mode,s=Rs({mode:"visible",children:s.children},p),C=Xo(C,p,l,null),C.flags|=2,s.return=i,C.return=i,s.sibling=C,i.child=s,il(i,e.child,null,l),s=i.child,s.memoizedState=Fc(l),s.childLanes=Bc(e,S,l),i.memoizedState=Gc,i=wa(null,s));else if(Ao(i),wu(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var $=S.dgst;S=$,s=Error(a(419)),s.stack="",s.digest=S,da({value:s,source:null,stack:null}),i=Oc(e,i,l)}else if(wn||wl(e,i,l,!1),S=(l&e.childLanes)!==0,wn||S){if(S=on,S!==null&&(s=un(S,l),s!==0&&s!==k.retryLane))throw k.retryLane=s,Ko(e,s),Wn(S,e,s),Pc;Tu(C)||Gs(),i=Oc(e,i,l)}else Tu(C)?(i.flags|=192,i.child=e.child,i=null):(e=k.treeContext,an=bi(C.nextSibling),Ln=i,Pt=!0,So=null,vi=!1,e!==null&&nf(i,e),i=Vc(i,s.children),i.flags|=4096);return i}return p?(No(),C=s.fallback,p=i.mode,k=e.child,$=k.sibling,s=Xi(k,{mode:"hidden",children:s.children}),s.subtreeFlags=k.subtreeFlags&65011712,$!==null?C=Xi($,C):(C=Xo(C,p,l,null),C.flags|=2),C.return=i,s.return=i,s.sibling=C,i.child=s,wa(null,s),s=i.child,C=e.child.memoizedState,C===null?C=Fc(l):(p=C.cachePool,p!==null?(k=Sn._currentValue,p=p.parent!==k?{parent:k,pool:k}:p):p=cf(),C={baseLanes:C.baseLanes|l,cachePool:p}),s.memoizedState=C,s.childLanes=Bc(e,S,l),i.memoizedState=Gc,wa(e.child,s)):(Ao(i),l=e.child,e=l.sibling,l=Xi(l,{mode:"visible",children:s.children}),l.return=i,l.sibling=null,e!==null&&(S=i.deletions,S===null?(i.deletions=[e],i.flags|=16):S.push(e)),i.child=l,i.memoizedState=null,l)}function Vc(e,i){return i=Rs({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Rs(e,i){return e=ii(22,e,null,i),e.lanes=0,e}function Oc(e,i,l){return il(i,e.child,null,l),e=Vc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Tp(e,i,l){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i),oc(e.return,i,l)}function qc(e,i,l,s,p,g){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:p,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=s,S.tail=l,S.tailMode=p,S.treeForkCount=g)}function wp(e,i,l){var s=i.pendingProps,p=s.revealOrder,g=s.tail;s=s.children;var S=gn.current,C=(S&2)!==0;if(C?(S=S&1|2,i.flags|=128):S&=1,ve(gn,S),Pn(e,i,s,l),s=Pt?ua:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tp(e,l,i);else if(e.tag===19)Tp(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(l=i.child,p=null;l!==null;)e=l.alternate,e!==null&&vs(e)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),qc(i,!1,p,l,g,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&vs(e)===null){i.child=p;break}e=p.sibling,p.sibling=l,l=p,p=e}qc(i,!0,l,null,g,s);break;case"together":qc(i,!1,null,null,void 0,s);break;default:i.memoizedState=null}return i.child}function no(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),ko|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(wl(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(a(153));if(i.child!==null){for(e=i.child,l=Xi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Xi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function jc(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&us(e)))}function cv(e,i,l){switch(i.tag){case 3:J(i,i.stateNode.containerInfo),wo(i,Sn,e.memoizedState.cache),Qo();break;case 27:case 5:Ne(i);break;case 4:J(i,i.stateNode.containerInfo);break;case 10:wo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,gc(i),null;break;case 13:var s=i.memoizedState;if(s!==null)return s.dehydrated!==null?(Ao(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Sp(e,i,l):(Ao(i),e=no(e,i,l),e!==null?e.sibling:null);Ao(i);break;case 19:var p=(e.flags&128)!==0;if(s=(l&i.childLanes)!==0,s||(wl(e,i,l,!1),s=(l&i.childLanes)!==0),p){if(s)return wp(e,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ve(gn,gn.current),s)break;return null;case 22:return i.lanes=0,mp(e,i,l,i.pendingProps);case 24:wo(i,Sn,e.memoizedState.cache)}return no(e,i,l)}function Ep(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)wn=!0;else{if(!jc(e,l)&&(i.flags&128)===0)return wn=!1,cv(e,i,l);wn=(e.flags&131072)!==0}else wn=!1,Pt&&(i.flags&1048576)!==0&&tf(i,ua,i.index);switch(i.lanes=0,i.tag){case 16:e:{var s=i.pendingProps;if(e=tl(i.elementType),i.type=e,typeof e=="function")Xr(e)?(s=ll(e,s),i.tag=1,i=xp(null,i,e,s,l)):(i.tag=0,i=Hc(null,i,e,s,l));else{if(e!=null){var p=e.$$typeof;if(p===Re){i.tag=11,i=fp(null,i,e,s,l);break e}else if(p===be){i.tag=14,i=pp(null,i,e,s,l);break e}}throw i=Et(e)||e,Error(a(306,i,""))}}return i;case 0:return Hc(e,i,i.type,i.pendingProps,l);case 1:return s=i.type,p=ll(s,i.pendingProps),xp(e,i,s,p,l);case 3:e:{if(J(i,i.stateNode.containerInfo),e===null)throw Error(a(387));s=i.pendingProps;var g=i.memoizedState;p=g.element,dc(e,i),va(i,s,null,l);var S=i.memoizedState;if(s=S.cache,wo(i,Sn,s),s!==g.cache&&lc(i,[Sn],l,!0),ya(),s=S.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=bp(e,i,s,l);break e}else if(s!==p){p=mi(Error(a(424)),i),da(p),i=bp(e,i,s,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,an=bi(e.firstChild),Ln=i,Pt=!0,So=null,vi=!0,l=mf(i,null,s,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Qo(),s===p){i=no(e,i,l);break e}Pn(e,i,s,l)}i=i.child}return i;case 26:return Ms(e,i),e===null?(l=Lh(i.type,null,i.pendingProps,null))?i.memoizedState=l:Pt||(l=i.type,e=i.pendingProps,s=$s(w.current).createElement(l),s[We]=i,s[vt]=e,Hn(s,l,e),bn(s),i.stateNode=s):i.memoizedState=Lh(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Ne(i),e===null&&Pt&&(s=i.stateNode=Ih(i.type,i.pendingProps,w.current),Ln=i,vi=!0,p=an,Uo(i.type)?(Eu=p,an=bi(s.firstChild)):an=p),Pn(e,i,i.pendingProps.children,l),Ms(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Pt&&((p=s=an)&&(s=Gv(s,i.type,i.pendingProps,vi),s!==null?(i.stateNode=s,Ln=i,an=bi(s.firstChild),vi=!1,p=!0):p=!1),p||To(i)),Ne(i),p=i.type,g=i.pendingProps,S=e!==null?e.memoizedProps:null,s=g.children,xu(p,g)?s=null:S!==null&&xu(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=vc(e,i,ev,null,null,l),Ha._currentValue=p),Ms(e,i),Pn(e,i,s,l),i.child;case 6:return e===null&&Pt&&((e=l=an)&&(l=Fv(l,i.pendingProps,vi),l!==null?(i.stateNode=l,Ln=i,an=null,e=!0):e=!1),e||To(i)),null;case 13:return Sp(e,i,l);case 4:return J(i,i.stateNode.containerInfo),s=i.pendingProps,e===null?i.child=il(i,null,s,l):Pn(e,i,s,l),i.child;case 11:return fp(e,i,i.type,i.pendingProps,l);case 7:return Pn(e,i,i.pendingProps,l),i.child;case 8:return Pn(e,i,i.pendingProps.children,l),i.child;case 12:return Pn(e,i,i.pendingProps.children,l),i.child;case 10:return s=i.pendingProps,wo(i,i.type,s.value),Pn(e,i,s.children,l),i.child;case 9:return p=i.type._context,s=i.pendingProps.children,Wo(i),p=Un(p),s=s(p),i.flags|=1,Pn(e,i,s,l),i.child;case 14:return pp(e,i,i.type,i.pendingProps,l);case 15:return hp(e,i,i.type,i.pendingProps,l);case 19:return wp(e,i,l);case 31:return rv(e,i,l);case 22:return mp(e,i,l,i.pendingProps);case 24:return Wo(i),s=Un(Sn),e===null?(p=rc(),p===null&&(p=on,g=ac(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),i.memoizedState={parent:s,cache:p},uc(i),wo(i,Sn,p)):((e.lanes&l)!==0&&(dc(e,i),va(i,null,null,l),ya()),p=e.memoizedState,g=i.memoizedState,p.parent!==s?(p={parent:s,cache:s},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),wo(i,Sn,s)):(s=g.cache,wo(i,Sn,s),s!==p.cache&&lc(i,[Sn],l,!0))),Pn(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function io(e){e.flags|=4}function $c(e,i,l,s,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(Qp())e.flags|=8192;else throw nl=hs,cc}else e.flags&=-16777217}function Cp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fh(i))if(Qp())e.flags|=8192;else throw nl=hs,cc}function ks(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ve():536870912,e.lanes|=i,Ll|=i)}function Ea(e,i){if(!Pt)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function sn(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(i)for(var p=e.child;p!==null;)l|=p.lanes|p.childLanes,s|=p.subtreeFlags&65011712,s|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)l|=p.lanes|p.childLanes,s|=p.subtreeFlags,s|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=s,e.childLanes=l,i}function uv(e,i,l){var s=i.pendingProps;switch(ec(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(i),null;case 1:return sn(i),null;case 3:return l=i.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Wi(Sn),oe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Tl(i)?io(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,nc())),sn(i),null;case 26:var p=i.type,g=i.memoizedState;return e===null?(io(i),g!==null?(sn(i),Cp(i,g)):(sn(i),$c(i,p,null,s,l))):g?g!==e.memoizedState?(io(i),sn(i),Cp(i,g)):(sn(i),i.flags&=-16777217):(e=e.memoizedProps,e!==s&&io(i),sn(i),$c(i,p,e,s,l)),null;case 27:if(Se(i),l=w.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==s&&io(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return sn(i),null}e=Pe.current,Tl(i)?of(i):(e=Ih(p,s,l),i.stateNode=e,io(i))}return sn(i),null;case 5:if(Se(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==s&&io(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return sn(i),null}if(g=Pe.current,Tl(i))of(i);else{var S=$s(w.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof s.is=="string"?S.createElement("select",{is:s.is}):S.createElement("select"),s.multiple?g.multiple=!0:s.size&&(g.size=s.size);break;default:g=typeof s.is=="string"?S.createElement(p,{is:s.is}):S.createElement(p)}}g[We]=i,g[vt]=s;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;e:switch(Hn(g,p,s),p){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&io(i)}}return sn(i),$c(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==s&&io(i);else{if(typeof s!="string"&&i.stateNode===null)throw Error(a(166));if(e=w.current,Tl(i)){if(e=i.stateNode,l=i.memoizedProps,s=null,p=Ln,p!==null)switch(p.tag){case 27:case 5:s=p.memoizedProps}e[We]=i,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||Sh(e.nodeValue,l)),e||To(i,!0)}else e=$s(e).createTextNode(s),e[We]=i,i.stateNode=e}return sn(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(s=Tl(i),l!==null){if(e===null){if(!s)throw Error(a(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[We]=i}else Qo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;sn(i),e=!1}else l=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(li(i),i):(li(i),null);if((i.flags&128)!==0)throw Error(a(558))}return sn(i),null;case 13:if(s=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Tl(i),s!==null&&s.dehydrated!==null){if(e===null){if(!p)throw Error(a(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));p[We]=i}else Qo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;sn(i),p=!1}else p=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(li(i),i):(li(i),null)}return li(i),(i.flags&128)!==0?(i.lanes=l,i):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=i.child,p=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(p=s.alternate.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==p&&(s.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),ks(i,i.updateQueue),sn(i),null);case 4:return oe(),e===null&&hu(i.stateNode.containerInfo),sn(i),null;case 10:return Wi(i.type),sn(i),null;case 19:if(le(gn),s=i.memoizedState,s===null)return sn(i),null;if(p=(i.flags&128)!==0,g=s.rendering,g===null)if(p)Ea(s,!1);else{if(mn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=vs(e),g!==null){for(i.flags|=128,Ea(s,!1),e=g.updateQueue,i.updateQueue=e,ks(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)Zd(l,e),l=l.sibling;return ve(gn,gn.current&1|2),Pt&&Qi(i,s.treeForkCount),i.child}e=e.sibling}s.tail!==null&&he()>Us&&(i.flags|=128,p=!0,Ea(s,!1),i.lanes=4194304)}else{if(!p)if(e=vs(g),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,ks(i,e),Ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!g.alternate&&!Pt)return sn(i),null}else 2*he()-s.renderingStartTime>Us&&l!==536870912&&(i.flags|=128,p=!0,Ea(s,!1),i.lanes=4194304);s.isBackwards?(g.sibling=i.child,i.child=g):(e=s.last,e!==null?e.sibling=g:i.child=g,s.last=g)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,l=gn.current,ve(gn,p?l&1|2:l&1),Pt&&Qi(i,s.treeForkCount),e):(sn(i),null);case 22:case 23:return li(i),mc(),s=i.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(i.flags|=8192):s&&(i.flags|=8192),s?(l&536870912)!==0&&(i.flags&128)===0&&(sn(i),i.subtreeFlags&6&&(i.flags|=8192)):sn(i),l=i.updateQueue,l!==null&&ks(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(i.flags|=2048),e!==null&&le(el),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Wi(Sn),sn(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function dv(e,i){switch(ec(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Wi(Sn),oe(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Se(i),null;case 31:if(i.memoizedState!==null){if(li(i),i.alternate===null)throw Error(a(340));Qo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(li(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Qo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return le(gn),null;case 4:return oe(),null;case 10:return Wi(i.type),null;case 22:case 23:return li(i),mc(),e!==null&&le(el),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Wi(Sn),null;case 25:return null;default:return null}}function _p(e,i){switch(ec(i),i.tag){case 3:Wi(Sn),oe();break;case 26:case 27:case 5:Se(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&li(i);break;case 13:li(i);break;case 19:le(gn);break;case 10:Wi(i.type);break;case 22:case 23:li(i),mc(),e!==null&&le(el);break;case 24:Wi(Sn)}}function Ca(e,i){try{var l=i.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var p=s.next;l=p;do{if((l.tag&e)===e){s=void 0;var g=l.create,S=l.inst;s=g(),S.destroy=s}l=l.next}while(l!==p)}}catch(C){Xt(i,i.return,C)}}function Mo(e,i,l){try{var s=i.updateQueue,p=s!==null?s.lastEffect:null;if(p!==null){var g=p.next;s=g;do{if((s.tag&e)===e){var S=s.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,p=i;var k=l,$=C;try{$()}catch(ue){Xt(p,k,ue)}}}s=s.next}while(s!==g)}}catch(ue){Xt(i,i.return,ue)}}function Ap(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{yf(i,l)}catch(s){Xt(e,e.return,s)}}}function Np(e,i,l){l.props=ll(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){Xt(e,i,s)}}function _a(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(p){Xt(e,i,p)}}function Fi(e,i){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(p){Xt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Xt(e,i,p)}else l.current=null}function Mp(e){var i=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(p){Xt(e,e.return,p)}}function Yc(e,i,l){try{var s=e.stateNode;zv(s,e.type,l,i),s[vt]=i}catch(p){Xt(e,e.return,p)}}function Rp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Uo(e.type)||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Uo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,i,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=lt));else if(s!==4&&(s===27&&Uo(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(Kc(e,i,l),e=e.sibling;e!==null;)Kc(e,i,l),e=e.sibling}function Is(e,i,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(s!==4&&(s===27&&Uo(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Is(e,i,l),e=e.sibling;e!==null;)Is(e,i,l),e=e.sibling}function kp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Hn(i,s,l),i[We]=e,i[vt]=l}catch(g){Xt(e,e.return,g)}}var oo=!1,En=!1,Xc=!1,Ip=typeof WeakSet=="function"?WeakSet:Set,In=null;function fv(e,i){if(e=e.containerInfo,yu=Ws,e=Od(e),Or(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var p=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,C=-1,k=-1,$=0,ue=0,xe=e,X=null;t:for(;;){for(var te;xe!==l||p!==0&&xe.nodeType!==3||(C=S+p),xe!==g||s!==0&&xe.nodeType!==3||(k=S+s),xe.nodeType===3&&(S+=xe.nodeValue.length),(te=xe.firstChild)!==null;)X=xe,xe=te;for(;;){if(xe===e)break t;if(X===l&&++$===p&&(C=S),X===g&&++ue===s&&(k=S),(te=xe.nextSibling)!==null)break;xe=X,X=xe.parentNode}xe=te}l=C===-1||k===-1?null:{start:C,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(vu={focusedElem:e,selectionRange:l},Ws=!1,In=i;In!==null;)if(i=In,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,In=e;else for(;In!==null;){switch(i=In,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)p=e[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,p=g.memoizedProps,g=g.memoizedState,s=l.stateNode;try{var Xe=ll(l.type,p);e=s.getSnapshotBeforeUpdate(Xe,g),s.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Xt(l,l.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)Su(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Su(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=i.sibling,e!==null){e.return=i.return,In=e;break}In=i.return}}function zp(e,i,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:ao(e,l),s&4&&Ca(5,l);break;case 1:if(ao(e,l),s&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(S){Xt(l,l.return,S)}else{var p=ll(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(S){Xt(l,l.return,S)}}s&64&&Ap(l),s&512&&_a(l,l.return);break;case 3:if(ao(e,l),s&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{yf(e,i)}catch(S){Xt(l,l.return,S)}}break;case 27:i===null&&s&4&&kp(l);case 26:case 5:ao(e,l),i===null&&s&4&&Mp(l),s&512&&_a(l,l.return);break;case 12:ao(e,l);break;case 31:ao(e,l),s&4&&Up(e,l);break;case 13:ao(e,l),s&4&&Pp(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Sv.bind(null,l),Bv(e,l))));break;case 22:if(s=l.memoizedState!==null||oo,!s){i=i!==null&&i.memoizedState!==null||En,p=oo;var g=En;oo=s,(En=i)&&!g?so(e,l,(l.subtreeFlags&8772)!==0):ao(e,l),oo=p,En=g}break;case 30:break;default:ao(e,l)}}function Dp(e){var i=e.alternate;i!==null&&(e.alternate=null,Dp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ci(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,Kn=!1;function lo(e,i,l){for(l=l.child;l!==null;)Lp(e,i,l),l=l.sibling}function Lp(e,i,l){if(ie&&typeof ie.onCommitFiberUnmount=="function")try{ie.onCommitFiberUnmount(_,l)}catch{}switch(l.tag){case 26:En||Fi(l,i),lo(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:En||Fi(l,i);var s=cn,p=Kn;Uo(l.type)&&(cn=l.stateNode,Kn=!1),lo(e,i,l),La(l.stateNode),cn=s,Kn=p;break;case 5:En||Fi(l,i);case 6:if(s=cn,p=Kn,cn=null,lo(e,i,l),cn=s,Kn=p,cn!==null)if(Kn)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(l.stateNode)}catch(g){Xt(l,i,g)}else try{cn.removeChild(l.stateNode)}catch(g){Xt(l,i,g)}break;case 18:cn!==null&&(Kn?(e=cn,Ah(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Ol(e)):Ah(cn,l.stateNode));break;case 4:s=cn,p=Kn,cn=l.stateNode.containerInfo,Kn=!0,lo(e,i,l),cn=s,Kn=p;break;case 0:case 11:case 14:case 15:Mo(2,l,i),En||Mo(4,l,i),lo(e,i,l);break;case 1:En||(Fi(l,i),s=l.stateNode,typeof s.componentWillUnmount=="function"&&Np(l,i,s)),lo(e,i,l);break;case 21:lo(e,i,l);break;case 22:En=(s=En)||l.memoizedState!==null,lo(e,i,l),En=s;break;default:lo(e,i,l)}}function Up(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ol(e)}catch(l){Xt(i,i.return,l)}}}function Pp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ol(e)}catch(l){Xt(i,i.return,l)}}function pv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ip),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ip),i;default:throw Error(a(435,e.tag))}}function zs(e,i){var l=pv(e);i.forEach(function(s){if(!l.has(s)){l.add(s);var p=Tv.bind(null,e,s);s.then(p,p)}})}function Xn(e,i){var l=i.deletions;if(l!==null)for(var s=0;s<l.length;s++){var p=l[s],g=e,S=i,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Uo(C.type)){cn=C.stateNode,Kn=!1;break e}break;case 5:cn=C.stateNode,Kn=!1;break e;case 3:case 4:cn=C.stateNode.containerInfo,Kn=!0;break e}C=C.return}if(cn===null)throw Error(a(160));Lp(g,S,p),cn=null,Kn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Hp(i,e),i=i.sibling}var Ai=null;function Hp(e,i){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xn(i,e),Qn(e),s&4&&(Mo(3,e,e.return),Ca(3,e),Mo(5,e,e.return));break;case 1:Xn(i,e),Qn(e),s&512&&(En||l===null||Fi(l,l.return)),s&64&&oo&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var p=Ai;if(Xn(i,e),Qn(e),s&512&&(En||l===null||Fi(l,l.return)),s&4){var g=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,p=p.ownerDocument||p;t:switch(s){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Vi]||g[We]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(s),p.head.insertBefore(g,p.querySelector("head > title"))),Hn(g,s,l),g[We]=e,bn(g),s=g;break e;case"link":var S=Hh("link","href",p).get(s+(l.href||""));if(S){for(var C=0;C<S.length;C++)if(g=S[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(C,1);break t}}g=p.createElement(s),Hn(g,s,l),p.head.appendChild(g);break;case"meta":if(S=Hh("meta","content",p).get(s+(l.content||""))){for(C=0;C<S.length;C++)if(g=S[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(C,1);break t}}g=p.createElement(s),Hn(g,s,l),p.head.appendChild(g);break;default:throw Error(a(468,s))}g[We]=e,bn(g),s=g}e.stateNode=s}else Gh(p,e.type,e.stateNode);else e.stateNode=Ph(p,s,e.memoizedProps);else g!==s?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,s===null?Gh(p,e.type,e.stateNode):Ph(p,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Yc(e,e.memoizedProps,l.memoizedProps)}break;case 27:Xn(i,e),Qn(e),s&512&&(En||l===null||Fi(l,l.return)),l!==null&&s&4&&Yc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Xn(i,e),Qn(e),s&512&&(En||l===null||Fi(l,l.return)),e.flags&32){p=e.stateNode;try{nn(p,"")}catch(Xe){Xt(e,e.return,Xe)}}s&4&&e.stateNode!=null&&(p=e.memoizedProps,Yc(e,p,l!==null?l.memoizedProps:p)),s&1024&&(Xc=!0);break;case 6:if(Xn(i,e),Qn(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(Xe){Xt(e,e.return,Xe)}}break;case 3:if(Ks=null,p=Ai,Ai=Ys(i.containerInfo),Xn(i,e),Ai=p,Qn(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Ol(i.containerInfo)}catch(Xe){Xt(e,e.return,Xe)}Xc&&(Xc=!1,Gp(e));break;case 4:s=Ai,Ai=Ys(e.stateNode.containerInfo),Xn(i,e),Qn(e),Ai=s;break;case 12:Xn(i,e),Qn(e);break;case 31:Xn(i,e),Qn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,zs(e,s)));break;case 13:Xn(i,e),Qn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ls=he()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,zs(e,s)));break;case 22:p=e.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,$=oo,ue=En;if(oo=$||p,En=ue||k,Xn(i,e),En=ue,oo=$,Qn(e),s&8192)e:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||k||oo||En||al(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){k=l=i;try{if(g=k.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=k.stateNode;var xe=k.memoizedProps.style,X=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;C.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Xe){Xt(k,k.return,Xe)}}}else if(i.tag===6){if(l===null){k=i;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(Xe){Xt(k,k.return,Xe)}}}else if(i.tag===18){if(l===null){k=i;try{var te=k.stateNode;p?Nh(te,!0):Nh(k.stateNode,!1)}catch(Xe){Xt(k,k.return,Xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,zs(e,l))));break;case 19:Xn(i,e),Qn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,zs(e,s)));break;case 30:break;case 21:break;default:Xn(i,e),Qn(e)}}function Qn(e){var i=e.flags;if(i&2){try{for(var l,s=e.return;s!==null;){if(Rp(s)){l=s;break}s=s.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var p=l.stateNode,g=Jc(e);Is(e,g,p);break;case 5:var S=l.stateNode;l.flags&32&&(nn(S,""),l.flags&=-33);var C=Jc(e);Is(e,C,S);break;case 3:case 4:var k=l.stateNode.containerInfo,$=Jc(e);Kc(e,$,k);break;default:throw Error(a(161))}}catch(ue){Xt(e,e.return,ue)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Gp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Gp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ao(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)zp(e,i.alternate,i),i=i.sibling}function al(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Mo(4,i,i.return),al(i);break;case 1:Fi(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Np(i,i.return,l),al(i);break;case 27:La(i.stateNode);case 26:case 5:Fi(i,i.return),al(i);break;case 22:i.memoizedState===null&&al(i);break;case 30:al(i);break;default:al(i)}e=e.sibling}}function so(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var s=i.alternate,p=e,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:so(p,g,l),Ca(4,g);break;case 1:if(so(p,g,l),s=g,p=s.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch($){Xt(s,s.return,$)}if(s=g,p=s.updateQueue,p!==null){var C=s.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)gf(k[p],C)}catch($){Xt(s,s.return,$)}}l&&S&64&&Ap(g),_a(g,g.return);break;case 27:kp(g);case 26:case 5:so(p,g,l),l&&s===null&&S&4&&Mp(g),_a(g,g.return);break;case 12:so(p,g,l);break;case 31:so(p,g,l),l&&S&4&&Up(p,g);break;case 13:so(p,g,l),l&&S&4&&Pp(p,g);break;case 22:g.memoizedState===null&&so(p,g,l),_a(g,g.return);break;case 30:break;default:so(p,g,l)}i=i.sibling}}function Qc(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&fa(l))}function Zc(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&fa(e))}function Ni(e,i,l,s){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fp(e,i,l,s),i=i.sibling}function Fp(e,i,l,s){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Ni(e,i,l,s),p&2048&&Ca(9,i);break;case 1:Ni(e,i,l,s);break;case 3:Ni(e,i,l,s),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&fa(e)));break;case 12:if(p&2048){Ni(e,i,l,s),e=i.stateNode;try{var g=i.memoizedProps,S=g.id,C=g.onPostCommit;typeof C=="function"&&C(S,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Xt(i,i.return,k)}}else Ni(e,i,l,s);break;case 31:Ni(e,i,l,s);break;case 13:Ni(e,i,l,s);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?Ni(e,i,l,s):Aa(e,i):g._visibility&2?Ni(e,i,l,s):(g._visibility|=2,Il(e,i,l,s,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Qc(S,i);break;case 24:Ni(e,i,l,s),p&2048&&Zc(i.alternate,i);break;default:Ni(e,i,l,s)}}function Il(e,i,l,s,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,S=i,C=l,k=s,$=S.flags;switch(S.tag){case 0:case 11:case 15:Il(g,S,C,k,p),Ca(8,S);break;case 23:break;case 22:var ue=S.stateNode;S.memoizedState!==null?ue._visibility&2?Il(g,S,C,k,p):Aa(g,S):(ue._visibility|=2,Il(g,S,C,k,p)),p&&$&2048&&Qc(S.alternate,S);break;case 24:Il(g,S,C,k,p),p&&$&2048&&Zc(S.alternate,S);break;default:Il(g,S,C,k,p)}i=i.sibling}}function Aa(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,s=i,p=s.flags;switch(s.tag){case 22:Aa(l,s),p&2048&&Qc(s.alternate,s);break;case 24:Aa(l,s),p&2048&&Zc(s.alternate,s);break;default:Aa(l,s)}i=i.sibling}}var Na=8192;function zl(e,i,l){if(e.subtreeFlags&Na)for(e=e.child;e!==null;)Bp(e,i,l),e=e.sibling}function Bp(e,i,l){switch(e.tag){case 26:zl(e,i,l),e.flags&Na&&e.memoizedState!==null&&Wv(l,Ai,e.memoizedState,e.memoizedProps);break;case 5:zl(e,i,l);break;case 3:case 4:var s=Ai;Ai=Ys(e.stateNode.containerInfo),zl(e,i,l),Ai=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Na,Na=16777216,zl(e,i,l),Na=s):zl(e,i,l));break;default:zl(e,i,l)}}function Vp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ma(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var s=i[l];In=s,qp(s,e)}Vp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Op(e),e=e.sibling}function Op(e){switch(e.tag){case 0:case 11:case 15:Ma(e),e.flags&2048&&Mo(9,e,e.return);break;case 3:Ma(e);break;case 12:Ma(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ds(e)):Ma(e);break;default:Ma(e)}}function Ds(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var s=i[l];In=s,qp(s,e)}Vp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Mo(8,i,i.return),Ds(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Ds(i));break;default:Ds(i)}e=e.sibling}}function qp(e,i){for(;In!==null;){var l=In;switch(l.tag){case 0:case 11:case 15:Mo(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:fa(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,In=s;else e:for(l=e;In!==null;){s=In;var p=s.sibling,g=s.return;if(Dp(s),s===l){In=null;break e}if(p!==null){p.return=g,In=p;break e}In=g}}}var hv={getCacheForType:function(e){var i=Un(Sn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return Un(Sn).controller.signal}},mv=typeof WeakMap=="function"?WeakMap:Map,qt=0,on=null,Rt=null,zt=0,Kt=0,ai=null,Ro=!1,Dl=!1,Wc=!1,ro=0,mn=0,ko=0,sl=0,eu=0,si=0,Ll=0,Ra=null,Zn=null,tu=!1,Ls=0,jp=0,Us=1/0,Ps=null,Io=null,Nn=0,zo=null,Ul=null,co=0,nu=0,iu=null,$p=null,ka=0,ou=null;function ri(){return(qt&2)!==0&&zt!==0?zt&-zt:F.T!==null?uu():zi()}function Yp(){if(si===0)if((zt&536870912)===0||Pt){var e=Jt;Jt<<=1,(Jt&3932160)===0&&(Jt=262144),si=e}else si=536870912;return e=oi.current,e!==null&&(e.flags|=32),si}function Wn(e,i,l){(e===on&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&(Pl(e,0),Do(e,zt,si,!1)),bt(e,l),((qt&2)===0||e!==on)&&(e===on&&((qt&2)===0&&(sl|=l),mn===4&&Do(e,zt,si,!1)),Bi(e))}function Jp(e,i,l){if((qt&6)!==0)throw Error(a(327));var s=!l&&(i&127)===0&&(i&e.expiredLanes)===0||ct(e,i),p=s?vv(e,i):au(e,i,!0),g=s;do{if(p===0){Dl&&!s&&Do(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!gv(l)){p=au(e,i,!1),g=!1;continue}if(p===2){if(g=i,e.errorRecoveryDisabledLanes&g)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var C=e;p=Ra;var k=C.current.memoizedState.isDehydrated;if(k&&(Pl(C,S).flags|=256),S=au(C,S,!1),S!==2){if(Wc&&!k){C.errorRecoveryDisabledLanes|=g,sl|=g,p=4;break e}g=Zn,Zn=p,g!==null&&(Zn===null?Zn=g:Zn.push.apply(Zn,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Pl(e,0),Do(e,i,0,!0);break}e:{switch(s=e,g=p,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Do(s,i,si,!Ro);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(p=Ls+300-he(),10<p)){if(Do(s,i,si,!Ro),Ae(s,0,!0)!==0)break e;co=i,s.timeoutHandle=Ch(Kp.bind(null,s,l,Zn,Ps,tu,i,si,sl,Ll,Ro,g,"Throttled",-0,0),p);break e}Kp(s,l,Zn,Ps,tu,i,si,sl,Ll,Ro,g,null,-0,0)}}break}while(!0);Bi(e)}function Kp(e,i,l,s,p,g,S,C,k,$,ue,xe,X,te){if(e.timeoutHandle=-1,xe=i.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lt},Bp(i,g,xe);var Xe=(g&62914560)===g?Ls-he():(g&4194048)===g?jp-he():0;if(Xe=ex(xe,Xe),Xe!==null){co=g,e.cancelPendingCommit=Xe(ih.bind(null,e,i,g,l,s,p,S,C,k,ue,xe,null,X,te)),Do(e,g,S,!$);return}}ih(e,i,g,l,s,p,S,C,k)}function gv(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var p=l[s],g=p.getSnapshot;p=p.value;try{if(!ni(g(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Do(e,i,l,s){i&=~eu,i&=~sl,e.suspendedLanes|=i,e.pingedLanes&=~i,s&&(e.warmLanes|=i),s=e.expirationTimes;for(var p=i;0<p;){var g=31-Ye(p),S=1<<g;s[g]=-1,p&=~S}l!==0&&jt(e,l,i)}function Hs(){return(qt&6)===0?(Ia(0),!1):!0}function lu(){if(Rt!==null){if(Kt===0)var e=Rt.return;else e=Rt,Zi=Zo=null,Sc(e),Al=null,ha=0,e=Rt;for(;e!==null;)_p(e.alternate,e),e=e.return;Rt=null}}function Pl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Uv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),co=0,lu(),on=e,Rt=l=Xi(e.current,null),zt=i,Kt=0,ai=null,Ro=!1,Dl=ct(e,i),Wc=!1,Ll=si=eu=sl=ko=mn=0,Zn=Ra=null,tu=!1,(i&8)!==0&&(i|=i&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=i;0<s;){var p=31-Ye(s),g=1<<p;i|=e[p],s&=~g}return ro=i,ls(),l}function Xp(e,i){_t=null,F.H=Ta,i===_l||i===ps?(i=ff(),Kt=3):i===cc?(i=ff(),Kt=4):Kt=i===Pc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ai=i,Rt===null&&(mn=1,As(e,mi(i,e.current)))}function Qp(){var e=oi.current;return e===null?!0:(zt&4194048)===zt?xi===null:(zt&62914560)===zt||(zt&536870912)!==0?e===xi:!1}function Zp(){var e=F.H;return F.H=Ta,e===null?Ta:e}function Wp(){var e=F.A;return F.A=hv,e}function Gs(){mn=4,Ro||(zt&4194048)!==zt&&oi.current!==null||(Dl=!0),(ko&134217727)===0&&(sl&134217727)===0||on===null||Do(on,zt,si,!1)}function au(e,i,l){var s=qt;qt|=2;var p=Zp(),g=Wp();(on!==e||zt!==i)&&(Ps=null,Pl(e,i)),i=!1;var S=mn;e:do try{if(Kt!==0&&Rt!==null){var C=Rt,k=ai;switch(Kt){case 8:lu(),S=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(i=!0);var $=Kt;if(Kt=0,ai=null,Hl(e,C,k,$),l&&Dl){S=0;break e}break;default:$=Kt,Kt=0,ai=null,Hl(e,C,k,$)}}yv(),S=mn;break}catch(ue){Xp(e,ue)}while(!0);return i&&e.shellSuspendCounter++,Zi=Zo=null,qt=s,F.H=p,F.A=g,Rt===null&&(on=null,zt=0,ls()),S}function yv(){for(;Rt!==null;)eh(Rt)}function vv(e,i){var l=qt;qt|=2;var s=Zp(),p=Wp();on!==e||zt!==i?(Ps=null,Us=he()+500,Pl(e,i)):Dl=ct(e,i);e:do try{if(Kt!==0&&Rt!==null){i=Rt;var g=ai;t:switch(Kt){case 1:Kt=0,ai=null,Hl(e,i,g,1);break;case 2:case 9:if(uf(g)){Kt=0,ai=null,th(i);break}i=function(){Kt!==2&&Kt!==9||on!==e||(Kt=7),Bi(e)},g.then(i,i);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:uf(g)?(Kt=0,ai=null,th(i)):(Kt=0,ai=null,Hl(e,i,g,7));break;case 5:var S=null;switch(Rt.tag){case 26:S=Rt.memoizedState;case 5:case 27:var C=Rt;if(S?Fh(S):C.stateNode.complete){Kt=0,ai=null;var k=C.sibling;if(k!==null)Rt=k;else{var $=C.return;$!==null?(Rt=$,Fs($)):Rt=null}break t}}Kt=0,ai=null,Hl(e,i,g,5);break;case 6:Kt=0,ai=null,Hl(e,i,g,6);break;case 8:lu(),mn=6;break e;default:throw Error(a(462))}}xv();break}catch(ue){Xp(e,ue)}while(!0);return Zi=Zo=null,F.H=s,F.A=p,qt=l,Rt!==null?0:(on=null,zt=0,ls(),mn)}function xv(){for(;Rt!==null&&!pe();)eh(Rt)}function eh(e){var i=Ep(e.alternate,e,ro);e.memoizedProps=e.pendingProps,i===null?Fs(e):Rt=i}function th(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=vp(l,i,i.pendingProps,i.type,void 0,zt);break;case 11:i=vp(l,i,i.pendingProps,i.type.render,i.ref,zt);break;case 5:Sc(i);default:_p(l,i),i=Rt=Zd(i,ro),i=Ep(l,i,ro)}e.memoizedProps=e.pendingProps,i===null?Fs(e):Rt=i}function Hl(e,i,l,s){Zi=Zo=null,Sc(i),Al=null,ha=0;var p=i.return;try{if(sv(e,p,i,l,zt)){mn=1,As(e,mi(l,e.current)),Rt=null;return}}catch(g){if(p!==null)throw Rt=p,g;mn=1,As(e,mi(l,e.current)),Rt=null;return}i.flags&32768?(Pt||s===1?e=!0:Dl||(zt&536870912)!==0?e=!1:(Ro=e=!0,(s===2||s===9||s===3||s===6)&&(s=oi.current,s!==null&&s.tag===13&&(s.flags|=16384))),nh(i,e)):Fs(i)}function Fs(e){var i=e;do{if((i.flags&32768)!==0){nh(i,Ro);return}e=i.return;var l=uv(i.alternate,i,ro);if(l!==null){Rt=l;return}if(i=i.sibling,i!==null){Rt=i;return}Rt=i=e}while(i!==null);mn===0&&(mn=5)}function nh(e,i){do{var l=dv(e.alternate,e);if(l!==null){l.flags&=32767,Rt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){Rt=e;return}Rt=e=l}while(e!==null);mn=6,Rt=null}function ih(e,i,l,s,p,g,S,C,k){e.cancelPendingCommit=null;do Bs();while(Nn!==0);if((qt&6)!==0)throw Error(a(327));if(i!==null){if(i===e.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=Jr,gt(e,l,g,S,C,k),e===on&&(Rt=on=null,zt=0),Ul=i,zo=e,co=l,nu=g,iu=p,$p=s,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wv(O,function(){return rh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||s){s=F.T,F.T=null,p=Te.p,Te.p=2,S=qt,qt|=4;try{fv(e,i,l)}finally{qt=S,Te.p=p,F.T=s}}Nn=1,oh(),lh(),ah()}}function oh(){if(Nn===1){Nn=0;var e=zo,i=Ul,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var s=Te.p;Te.p=2;var p=qt;qt|=4;try{Hp(i,e);var g=vu,S=Od(e.containerInfo),C=g.focusedElem,k=g.selectionRange;if(S!==C&&C&&C.ownerDocument&&Vd(C.ownerDocument.documentElement,C)){if(k!==null&&Or(C)){var $=k.start,ue=k.end;if(ue===void 0&&(ue=$),"selectionStart"in C)C.selectionStart=$,C.selectionEnd=Math.min(ue,C.value.length);else{var xe=C.ownerDocument||document,X=xe&&xe.defaultView||window;if(X.getSelection){var te=X.getSelection(),Xe=C.textContent.length,pt=Math.min(k.start,Xe),tn=k.end===void 0?pt:Math.min(k.end,Xe);!te.extend&&pt>tn&&(S=tn,tn=pt,pt=S);var G=Bd(C,pt),P=Bd(C,tn);if(G&&P&&(te.rangeCount!==1||te.anchorNode!==G.node||te.anchorOffset!==G.offset||te.focusNode!==P.node||te.focusOffset!==P.offset)){var j=xe.createRange();j.setStart(G.node,G.offset),te.removeAllRanges(),pt>tn?(te.addRange(j),te.extend(P.node,P.offset)):(j.setEnd(P.node,P.offset),te.addRange(j))}}}}for(xe=[],te=C;te=te.parentNode;)te.nodeType===1&&xe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<xe.length;C++){var me=xe[C];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Ws=!!yu,vu=yu=null}finally{qt=p,Te.p=s,F.T=l}}e.current=i,Nn=2}}function lh(){if(Nn===2){Nn=0;var e=zo,i=Ul,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var s=Te.p;Te.p=2;var p=qt;qt|=4;try{zp(e,i.alternate,i)}finally{qt=p,Te.p=s,F.T=l}}Nn=3}}function ah(){if(Nn===4||Nn===3){Nn=0,Ce();var e=zo,i=Ul,l=co,s=$p;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,Ul=zo=null,sh(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(Io=null),Dn(l),i=i.stateNode,ie&&typeof ie.onCommitFiberRoot=="function")try{ie.onCommitFiberRoot(_,i,void 0,(i.current.flags&128)===128)}catch{}if(s!==null){i=F.T,p=Te.p,Te.p=2,F.T=null;try{for(var g=e.onRecoverableError,S=0;S<s.length;S++){var C=s[S];g(C.value,{componentStack:C.stack})}}finally{F.T=i,Te.p=p}}(co&3)!==0&&Bs(),Bi(e),p=e.pendingLanes,(l&261930)!==0&&(p&42)!==0?e===ou?ka++:(ka=0,ou=e):ka=0,Ia(0)}}function sh(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,fa(i)))}function Bs(){return oh(),lh(),ah(),rh()}function rh(){if(Nn!==5)return!1;var e=zo,i=nu;nu=0;var l=Dn(co),s=F.T,p=Te.p;try{Te.p=32>l?32:l,F.T=null,l=iu,iu=null;var g=zo,S=co;if(Nn=0,Ul=zo=null,co=0,(qt&6)!==0)throw Error(a(331));var C=qt;if(qt|=4,Op(g.current),Fp(g,g.current,S,l),qt=C,Ia(0,!1),ie&&typeof ie.onPostCommitFiberRoot=="function")try{ie.onPostCommitFiberRoot(_,g)}catch{}return!0}finally{Te.p=p,F.T=s,sh(e,i)}}function ch(e,i,l){i=mi(l,i),i=Uc(e.stateNode,i,2),e=_o(e,i,2),e!==null&&(bt(e,2),Bi(e))}function Xt(e,i,l){if(e.tag===3)ch(e,e,l);else for(;i!==null;){if(i.tag===3){ch(i,e,l);break}else if(i.tag===1){var s=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Io===null||!Io.has(s))){e=mi(l,e),l=up(2),s=_o(i,l,2),s!==null&&(dp(l,s,i,e),bt(s,2),Bi(s));break}}i=i.return}}function su(e,i,l){var s=e.pingCache;if(s===null){s=e.pingCache=new mv;var p=new Set;s.set(i,p)}else p=s.get(i),p===void 0&&(p=new Set,s.set(i,p));p.has(l)||(Wc=!0,p.add(l),e=bv.bind(null,e,i,l),i.then(e,e))}function bv(e,i,l){var s=e.pingCache;s!==null&&s.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,on===e&&(zt&l)===l&&(mn===4||mn===3&&(zt&62914560)===zt&&300>he()-Ls?(qt&2)===0&&Pl(e,0):eu|=l,Ll===zt&&(Ll=0)),Bi(e)}function uh(e,i){i===0&&(i=Ve()),e=Ko(e,i),e!==null&&(bt(e,i),Bi(e))}function Sv(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),uh(e,l)}function Tv(e,i){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,p=e.memoizedState;p!==null&&(l=p.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(i),uh(e,l)}function wv(e,i){return H(e,i)}var Vs=null,Gl=null,ru=!1,Os=!1,cu=!1,Lo=0;function Bi(e){e!==Gl&&e.next===null&&(Gl===null?Vs=Gl=e:Gl=Gl.next=e),Os=!0,ru||(ru=!0,Cv())}function Ia(e,i){if(!cu&&Os){cu=!0;do for(var l=!1,s=Vs;s!==null;){if(e!==0){var p=s.pendingLanes;if(p===0)var g=0;else{var S=s.suspendedLanes,C=s.pingedLanes;g=(1<<31-Ye(42|e)+1)-1,g&=p&~(S&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,hh(s,g))}else g=zt,g=Ae(s,s===on?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(g&3)===0||ct(s,g)||(l=!0,hh(s,g));s=s.next}while(l);cu=!1}}function Ev(){dh()}function dh(){Os=ru=!1;var e=0;Lo!==0&&Lv()&&(e=Lo);for(var i=he(),l=null,s=Vs;s!==null;){var p=s.next,g=fh(s,i);g===0?(s.next=null,l===null?Vs=p:l.next=p,p===null&&(Gl=l)):(l=s,(e!==0||(g&3)!==0)&&(Os=!0)),s=p}Nn!==0&&Nn!==5||Ia(e),Lo!==0&&(Lo=0)}function fh(e,i){for(var l=e.suspendedLanes,s=e.pingedLanes,p=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var S=31-Ye(g),C=1<<S,k=p[S];k===-1?((C&l)===0||(C&s)!==0)&&(p[S]=ut(C,i)):k<=i&&(e.expiredLanes|=C),g&=~C}if(i=on,l=zt,l=Ae(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===i&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&z(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||ct(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(s!==null&&z(s),Dn(l)){case 2:case 8:l=I;break;case 32:l=O;break;case 268435456:l=ee;break;default:l=O}return s=ph.bind(null,e),l=H(l,s),e.callbackPriority=i,e.callbackNode=l,i}return s!==null&&s!==null&&z(s),e.callbackPriority=2,e.callbackNode=null,2}function ph(e,i){if(Nn!==0&&Nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Bs()&&e.callbackNode!==l)return null;var s=zt;return s=Ae(e,e===on?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Jp(e,s,i),fh(e,he()),e.callbackNode!=null&&e.callbackNode===l?ph.bind(null,e):null)}function hh(e,i){if(Bs())return null;Jp(e,i,!0)}function Cv(){Pv(function(){(qt&6)!==0?H(E,Ev):dh()})}function uu(){if(Lo===0){var e=El;e===0&&(e=Je,Je<<=1,(Je&261888)===0&&(Je=256)),Lo=e}return Lo}function mh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ct(""+e)}function gh(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function _v(e,i,l,s,p){if(i==="submit"&&l&&l.stateNode===p){var g=mh((p[vt]||null).action),S=s.submitter;S&&(i=(i=S[vt]||null)?mh(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var C=new Nt("action","action",null,s,p);e.push({event:C,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Lo!==0){var k=S?gh(p,S):new FormData(p);Rc(l,{pending:!0,data:k,method:p.method,action:g},null,k)}}else typeof g=="function"&&(C.preventDefault(),k=S?gh(p,S):new FormData(p),Rc(l,{pending:!0,data:k,method:p.method,action:g},g,k))},currentTarget:p}]})}}for(var du=0;du<Yr.length;du++){var fu=Yr[du],Av=fu.toLowerCase(),Nv=fu[0].toUpperCase()+fu.slice(1);_i(Av,"on"+Nv)}_i($d,"onAnimationEnd"),_i(Yd,"onAnimationIteration"),_i(Jd,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(qy,"onTransitionRun"),_i(jy,"onTransitionStart"),_i($y,"onTransitionCancel"),_i(Kd,"onTransitionEnd"),go("onMouseEnter",["mouseout","mouseover"]),go("onMouseLeave",["mouseout","mouseover"]),go("onPointerEnter",["pointerout","pointerover"]),go("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function yh(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],p=s.event;s=s.listeners;e:{var g=void 0;if(i)for(var S=s.length-1;0<=S;S--){var C=s[S],k=C.instance,$=C.currentTarget;if(C=C.listener,k!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=$;try{g(p)}catch(ue){os(ue)}p.currentTarget=null,g=k}else for(S=0;S<s.length;S++){if(C=s[S],k=C.instance,$=C.currentTarget,C=C.listener,k!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=$;try{g(p)}catch(ue){os(ue)}p.currentTarget=null,g=k}}}}function kt(e,i){var l=i[ei];l===void 0&&(l=i[ei]=new Set);var s=e+"__bubble";l.has(s)||(vh(i,e,2,!1),l.add(s))}function pu(e,i,l){var s=0;i&&(s|=4),vh(l,e,s,i)}var qs="_reactListening"+Math.random().toString(36).slice(2);function hu(e){if(!e[qs]){e[qs]=!0,ia.forEach(function(l){l!=="selectionchange"&&(Mv.has(l)||pu(l,!1,e),pu(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[qs]||(i[qs]=!0,pu("selectionchange",!1,i))}}function vh(e,i,l,s){switch(Yh(i)){case 2:var p=ix;break;case 8:p=ox;break;default:p=Mu}l=p.bind(null,i,l,e),p=void 0,!di||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),s?p!==void 0?e.addEventListener(i,l,{capture:!0,passive:p}):e.addEventListener(i,l,!0):p!==void 0?e.addEventListener(i,l,{passive:p}):e.addEventListener(i,l,!1)}function mu(e,i,l,s,p){var g=s;if((i&1)===0&&(i&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var C=s.stateNode.containerInfo;if(C===p)break;if(S===4)for(S=s.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;C!==null;){if(S=Oi(C),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){s=g=S;continue e}C=C.parentNode}}s=s.return}vo(function(){var $=g,ue=ln(l),xe=[];e:{var X=Xd.get(e);if(X!==void 0){var te=Nt,Xe=e;switch(e){case"keypress":if(fi(l)===0)break e;case"keydown":case"keyup":te=Ty;break;case"focusin":Xe="focus",te=Hr;break;case"focusout":Xe="blur",te=Hr;break;case"beforeblur":case"afterblur":te=Hr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Cy;break;case $d:case Yd:case Jd:te=py;break;case Kd:te=Ay;break;case"scroll":case"scrollend":te=fn;break;case"wheel":te=My;break;case"copy":case"cut":case"paste":te=my;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Ad;break;case"toggle":case"beforetoggle":te=ky}var pt=(i&4)!==0,tn=!pt&&(e==="scroll"||e==="scrollend"),G=pt?X!==null?X+"Capture":null:X;pt=[];for(var P=$,j;P!==null;){var me=P;if(j=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||j===null||G===null||(me=ti(P,G),me!=null&&pt.push(Da(P,me,j))),tn)break;P=P.return}0<pt.length&&(X=new te(X,Xe,null,l,ue),xe.push({event:X,listeners:pt}))}}if((i&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",X&&l!==dn&&(Xe=l.relatedTarget||l.fromElement)&&(Oi(Xe)||Xe[$t]))break e;if((te||X)&&(X=ue.window===ue?ue:(X=ue.ownerDocument)?X.defaultView||X.parentWindow:window,te?(Xe=l.relatedTarget||l.toElement,te=$,Xe=Xe?Oi(Xe):null,Xe!==null&&(tn=u(Xe),pt=Xe.tag,Xe!==tn||pt!==5&&pt!==27&&pt!==6)&&(Xe=null)):(te=null,Xe=$),te!==Xe)){if(pt=Ki,me="onMouseLeave",G="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Ad,me="onPointerLeave",G="onPointerEnter",P="pointer"),tn=te==null?X:$o(te),j=Xe==null?X:$o(Xe),X=new pt(me,P+"leave",te,l,ue),X.target=tn,X.relatedTarget=j,me=null,Oi(ue)===$&&(pt=new pt(G,P+"enter",Xe,l,ue),pt.target=j,pt.relatedTarget=tn,me=pt),tn=me,te&&Xe)t:{for(pt=Rv,G=te,P=Xe,j=0,me=G;me;me=pt(me))j++;me=0;for(var st=P;st;st=pt(st))me++;for(;0<j-me;)G=pt(G),j--;for(;0<me-j;)P=pt(P),me--;for(;j--;){if(G===P||P!==null&&G===P.alternate){pt=G;break t}G=pt(G),P=pt(P)}pt=null}else pt=null;te!==null&&xh(xe,X,te,pt,!1),Xe!==null&&tn!==null&&xh(xe,tn,Xe,pt,!0)}}e:{if(X=$?$o($):window,te=X.nodeName&&X.nodeName.toLowerCase(),te==="select"||te==="input"&&X.type==="file")var Bt=Ld;else if(zd(X))if(Ud)Bt=By;else{Bt=Gy;var tt=Hy}else te=X.nodeName,!te||te.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&kn($.elementType)&&(Bt=Ld):Bt=Fy;if(Bt&&(Bt=Bt(e,$))){Dd(xe,Bt,l,ue);break e}tt&&tt(e,X,$),e==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&at(X,"number",X.value)}switch(tt=$?$o($):window,e){case"focusin":(zd(tt)||tt.contentEditable==="true")&&(gl=tt,qr=$,ca=null);break;case"focusout":ca=qr=gl=null;break;case"mousedown":jr=!0;break;case"contextmenu":case"mouseup":case"dragend":jr=!1,qd(xe,l,ue);break;case"selectionchange":if(Oy)break;case"keydown":case"keyup":qd(xe,l,ue)}var At;if(Fr)e:{switch(e){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else ml?kd(e,l)&&(Dt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Dt="onCompositionStart");Dt&&(Nd&&l.locale!=="ko"&&(ml||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&ml&&(At=Ji()):(Cn=ue,St="value"in Cn?Cn.value:Cn.textContent,ml=!0)),tt=js($,Dt),0<tt.length&&(Dt=new _d(Dt,e,null,l,ue),xe.push({event:Dt,listeners:tt}),At?Dt.data=At:(At=Id(l),At!==null&&(Dt.data=At)))),(At=zy?Dy(e,l):Ly(e,l))&&(Dt=js($,"onBeforeInput"),0<Dt.length&&(tt=new _d("onBeforeInput","beforeinput",null,l,ue),xe.push({event:tt,listeners:Dt}),tt.data=At)),_v(xe,e,$,l,ue)}yh(xe,i)})}function Da(e,i,l){return{instance:e,listener:i,currentTarget:l}}function js(e,i){for(var l=i+"Capture",s=[];e!==null;){var p=e,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=ti(e,l),p!=null&&s.unshift(Da(e,p,g)),p=ti(e,i),p!=null&&s.push(Da(e,p,g))),e.tag===3)return s;e=e.return}return[]}function Rv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xh(e,i,l,s,p){for(var g=i._reactName,S=[];l!==null&&l!==s;){var C=l,k=C.alternate,$=C.stateNode;if(C=C.tag,k!==null&&k===s)break;C!==5&&C!==26&&C!==27||$===null||(k=$,p?($=ti(l,g),$!=null&&S.unshift(Da(l,$,k))):p||($=ti(l,g),$!=null&&S.push(Da(l,$,k)))),l=l.return}S.length!==0&&e.push({event:i,listeners:S})}var kv=/\r\n?/g,Iv=/\u0000|\uFFFD/g;function bh(e){return(typeof e=="string"?e:""+e).replace(kv,`
`).replace(Iv,"")}function Sh(e,i){return i=bh(i),bh(e)===i}function en(e,i,l,s,p,g){switch(l){case"children":typeof s=="string"?i==="body"||i==="textarea"&&s===""||nn(e,s):(typeof s=="number"||typeof s=="bigint")&&i!=="body"&&nn(e,""+s);break;case"className":yo(e,"class",s);break;case"tabIndex":yo(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":yo(e,l,s);break;case"style":Zt(e,s,g);break;case"data":if(i!=="object"){yo(e,"data",s);break}case"src":case"href":if(s===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Ct(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&en(e,i,"name",p.name,p,null),en(e,i,"formEncType",p.formEncType,p,null),en(e,i,"formMethod",p.formMethod,p,null),en(e,i,"formTarget",p.formTarget,p,null)):(en(e,i,"encType",p.encType,p,null),en(e,i,"method",p.method,p,null),en(e,i,"target",p.target,p,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Ct(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=lt);break;case"onScroll":s!=null&&kt("scroll",e);break;case"onScrollEnd":s!=null&&kt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(p.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=Ct(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":kt("beforetoggle",e),kt("toggle",e),Ui(e,"popover",s);break;case"xlinkActuate":ui(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ui(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ui(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ui(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ui(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ui(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ui(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ui(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ui(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ui(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=q.get(l)||l,Ui(e,l,s))}}function gu(e,i,l,s,p,g){switch(l){case"style":Zt(e,s,g);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(p.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"children":typeof s=="string"?nn(e,s):(typeof s=="number"||typeof s=="bigint")&&nn(e,""+s);break;case"onScroll":s!=null&&kt("scroll",e);break;case"onScrollEnd":s!=null&&kt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),g=e[vt]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,p),typeof s=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,s,p);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):Ui(e,l,s)}}}function Hn(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",e),kt("load",e);var s=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":s=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:en(e,i,g,S,l,null)}}p&&en(e,i,"srcSet",l.srcSet,l,null),s&&en(e,i,"src",l.src,l,null);return;case"input":kt("invalid",e);var C=g=S=p=null,k=null,$=null;for(s in l)if(l.hasOwnProperty(s)){var ue=l[s];if(ue!=null)switch(s){case"name":p=ue;break;case"type":S=ue;break;case"checked":k=ue;break;case"defaultChecked":$=ue;break;case"value":g=ue;break;case"defaultValue":C=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,i));break;default:en(e,i,s,ue,l,null)}}Ge(e,g,C,k,$,S,p,!1);return;case"select":kt("invalid",e),s=S=g=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":g=C;break;case"defaultValue":S=C;break;case"multiple":s=C;default:en(e,i,p,C,l,null)}i=g,l=S,e.multiple=!!s,i!=null?dt(e,!!s,i,!1):l!=null&&dt(e,!!s,l,!0);return;case"textarea":kt("invalid",e),g=p=s=null;for(S in l)if(l.hasOwnProperty(S)&&(C=l[S],C!=null))switch(S){case"value":s=C;break;case"defaultValue":p=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:en(e,i,S,C,l,null)}Fn(e,s,p,g);return;case"option":for(k in l)l.hasOwnProperty(k)&&(s=l[k],s!=null)&&(k==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":en(e,i,k,s,l,null));return;case"dialog":kt("beforetoggle",e),kt("toggle",e),kt("cancel",e),kt("close",e);break;case"iframe":case"object":kt("load",e);break;case"video":case"audio":for(s=0;s<za.length;s++)kt(za[s],e);break;case"image":kt("error",e),kt("load",e);break;case"details":kt("toggle",e);break;case"embed":case"source":case"link":kt("error",e),kt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in l)if(l.hasOwnProperty($)&&(s=l[$],s!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:en(e,i,$,s,l,null)}return;default:if(kn(i)){for(ue in l)l.hasOwnProperty(ue)&&(s=l[ue],s!==void 0&&gu(e,i,ue,s,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(s=l[C],s!=null&&en(e,i,C,s,l,null))}function zv(e,i,l,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,C=null,k=null,$=null,ue=null;for(te in l){var xe=l[te];if(l.hasOwnProperty(te)&&xe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":k=xe;default:s.hasOwnProperty(te)||en(e,i,te,null,s,xe)}}for(var X in s){var te=s[X];if(xe=l[X],s.hasOwnProperty(X)&&(te!=null||xe!=null))switch(X){case"type":g=te;break;case"name":p=te;break;case"checked":$=te;break;case"defaultChecked":ue=te;break;case"value":S=te;break;case"defaultValue":C=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:te!==xe&&en(e,i,X,te,s,xe)}}we(e,S,C,k,$,ue,g,p);return;case"select":te=S=C=X=null;for(g in l)if(k=l[g],l.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":te=k;default:s.hasOwnProperty(g)||en(e,i,g,null,s,k)}for(p in s)if(g=s[p],k=l[p],s.hasOwnProperty(p)&&(g!=null||k!=null))switch(p){case"value":X=g;break;case"defaultValue":C=g;break;case"multiple":S=g;default:g!==k&&en(e,i,p,g,s,k)}i=C,l=S,s=te,X!=null?dt(e,!!l,X,!1):!!s!=!!l&&(i!=null?dt(e,!!l,i,!0):dt(e,!!l,l?[]:"",!1));return;case"textarea":te=X=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!s.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:en(e,i,C,null,s,p)}for(S in s)if(p=s[S],g=l[S],s.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":X=p;break;case"defaultValue":te=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(a(91));break;default:p!==g&&en(e,i,S,p,s,g)}ht(e,X,te);return;case"option":for(var Xe in l)X=l[Xe],l.hasOwnProperty(Xe)&&X!=null&&!s.hasOwnProperty(Xe)&&(Xe==="selected"?e.selected=!1:en(e,i,Xe,null,s,X));for(k in s)X=s[k],te=l[k],s.hasOwnProperty(k)&&X!==te&&(X!=null||te!=null)&&(k==="selected"?e.selected=X&&typeof X!="function"&&typeof X!="symbol":en(e,i,k,X,s,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in l)X=l[pt],l.hasOwnProperty(pt)&&X!=null&&!s.hasOwnProperty(pt)&&en(e,i,pt,null,s,X);for($ in s)if(X=s[$],te=l[$],s.hasOwnProperty($)&&X!==te&&(X!=null||te!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,i));break;default:en(e,i,$,X,s,te)}return;default:if(kn(i)){for(var tn in l)X=l[tn],l.hasOwnProperty(tn)&&X!==void 0&&!s.hasOwnProperty(tn)&&gu(e,i,tn,void 0,s,X);for(ue in s)X=s[ue],te=l[ue],!s.hasOwnProperty(ue)||X===te||X===void 0&&te===void 0||gu(e,i,ue,X,s,te);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!s.hasOwnProperty(G)&&en(e,i,G,null,s,X);for(xe in s)X=s[xe],te=l[xe],!s.hasOwnProperty(xe)||X===te||X==null&&te==null||en(e,i,xe,X,s,te)}function Th(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var p=l[s],g=p.transferSize,S=p.initiatorType,C=p.duration;if(g&&C&&Th(S)){for(S=0,C=p.responseEnd,s+=1;s<l.length;s++){var k=l[s],$=k.startTime;if($>C)break;var ue=k.transferSize,xe=k.initiatorType;ue&&Th(xe)&&(k=k.responseEnd,S+=ue*(k<C?1:(C-$)/(k-$)))}if(--s,i+=8*(g+S)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yu=null,vu=null;function $s(e){return e.nodeType===9?e:e.ownerDocument}function wh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Eh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function xu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bu=null;function Lv(){var e=window.event;return e&&e.type==="popstate"?e===bu?!1:(bu=e,!0):(bu=null,!1)}var Ch=typeof setTimeout=="function"?setTimeout:void 0,Uv=typeof clearTimeout=="function"?clearTimeout:void 0,_h=typeof Promise=="function"?Promise:void 0,Pv=typeof queueMicrotask=="function"?queueMicrotask:typeof _h<"u"?function(e){return _h.resolve(null).then(e).catch(Hv)}:Ch;function Hv(e){setTimeout(function(){throw e})}function Uo(e){return e==="head"}function Ah(e,i){var l=i,s=0;do{var p=l.nextSibling;if(e.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(p),Ol(i);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")La(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,La(l);for(var g=l.firstChild;g;){var S=g.nextSibling,C=g.nodeName;g[Vi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&La(e.ownerDocument.body);l=p}while(l);Ol(i)}function Nh(e,i){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function Su(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Su(l),ci(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Gv(e,i,l,s){for(;e.nodeType===1;){var p=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Vi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=bi(e.nextSibling),e===null)break}return null}function Fv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=bi(e.nextSibling),e===null))return null;return e}function Mh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=bi(e.nextSibling),e===null))return null;return e}function Tu(e){return e.data==="$?"||e.data==="$~"}function wu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Bv(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var s=function(){i(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function bi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Eu=null;function Rh(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return bi(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function kh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Ih(e,i,l){switch(i=$s(l),e){case"html":if(e=i.documentElement,!e)throw Error(a(452));return e;case"head":if(e=i.head,!e)throw Error(a(453));return e;case"body":if(e=i.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function La(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ci(e)}var Si=new Map,zh=new Set;function Ys(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var uo=Te.d;Te.d={f:Vv,r:Ov,D:qv,C:jv,L:$v,m:Yv,X:Kv,S:Jv,M:Xv};function Vv(){var e=uo.f(),i=Hs();return e||i}function Ov(e){var i=qi(e);i!==null&&i.tag===5&&i.type==="form"?Xf(i):uo.r(e)}var Fl=typeof document>"u"?null:document;function Dh(e,i,l){var s=Fl;if(s&&typeof i=="string"&&i){var p=K(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),zh.has(p)||(zh.add(p),e={rel:e,crossOrigin:l,href:i},s.querySelector(p)===null&&(i=s.createElement("link"),Hn(i,"link",e),bn(i),s.head.appendChild(i)))}}function qv(e){uo.D(e),Dh("dns-prefetch",e,null)}function jv(e,i){uo.C(e,i),Dh("preconnect",e,i)}function $v(e,i,l){uo.L(e,i,l);var s=Fl;if(s&&e&&i){var p='link[rel="preload"][as="'+K(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+K(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+K(l.imageSizes)+'"]')):p+='[href="'+K(e)+'"]';var g=p;switch(i){case"style":g=Bl(e);break;case"script":g=Vl(e)}Si.has(g)||(e=b({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),Si.set(g,e),s.querySelector(p)!==null||i==="style"&&s.querySelector(Ua(g))||i==="script"&&s.querySelector(Pa(g))||(i=s.createElement("link"),Hn(i,"link",e),bn(i),s.head.appendChild(i)))}}function Yv(e,i){uo.m(e,i);var l=Fl;if(l&&e){var s=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+K(s)+'"][href="'+K(e)+'"]',g=p;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Vl(e)}if(!Si.has(g)&&(e=b({rel:"modulepreload",href:e},i),Si.set(g,e),l.querySelector(p)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Pa(g)))return}s=l.createElement("link"),Hn(s,"link",e),bn(s),l.head.appendChild(s)}}}function Jv(e,i,l){uo.S(e,i,l);var s=Fl;if(s&&e){var p=mo(s).hoistableStyles,g=Bl(e);i=i||"default";var S=p.get(g);if(!S){var C={loading:0,preload:null};if(S=s.querySelector(Ua(g)))C.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":i},l),(l=Si.get(g))&&Cu(e,l);var k=S=s.createElement("link");bn(k),Hn(k,"link",e),k._p=new Promise(function($,ue){k.onload=$,k.onerror=ue}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Js(S,i,s)}S={type:"stylesheet",instance:S,count:1,state:C},p.set(g,S)}}}function Kv(e,i){uo.X(e,i);var l=Fl;if(l&&e){var s=mo(l).hoistableScripts,p=Vl(e),g=s.get(p);g||(g=l.querySelector(Pa(p)),g||(e=b({src:e,async:!0},i),(i=Si.get(p))&&_u(e,i),g=l.createElement("script"),bn(g),Hn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},s.set(p,g))}}function Xv(e,i){uo.M(e,i);var l=Fl;if(l&&e){var s=mo(l).hoistableScripts,p=Vl(e),g=s.get(p);g||(g=l.querySelector(Pa(p)),g||(e=b({src:e,async:!0,type:"module"},i),(i=Si.get(p))&&_u(e,i),g=l.createElement("script"),bn(g),Hn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},s.set(p,g))}}function Lh(e,i,l,s){var p=(p=w.current)?Ys(p):null;if(!p)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Bl(l.href),l=mo(p).hoistableStyles,s=l.get(i),s||(s={type:"style",instance:null,count:0,state:null},l.set(i,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Bl(l.href);var g=mo(p).hoistableStyles,S=g.get(e);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,S),(g=p.querySelector(Ua(e)))&&!g._p&&(S.instance=g,S.state.loading=5),Si.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Si.set(e,l),g||Qv(p,e,l,S.state))),i&&s===null)throw Error(a(528,""));return S}if(i&&s!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vl(l),l=mo(p).hoistableScripts,s=l.get(i),s||(s={type:"script",instance:null,count:0,state:null},l.set(i,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Bl(e){return'href="'+K(e)+'"'}function Ua(e){return'link[rel="stylesheet"]['+e+"]"}function Uh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Qv(e,i,l,s){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=e.createElement("link"),s.preload=i,i.addEventListener("load",function(){return s.loading|=1}),i.addEventListener("error",function(){return s.loading|=2}),Hn(i,"link",l),bn(i),e.head.appendChild(i))}function Vl(e){return'[src="'+K(e)+'"]'}function Pa(e){return"script[async]"+e}function Ph(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var s=e.querySelector('style[data-href~="'+K(l.href)+'"]');if(s)return i.instance=s,bn(s),s;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),bn(s),Hn(s,"style",p),Js(s,l.precedence,e),i.instance=s;case"stylesheet":p=Bl(l.href);var g=e.querySelector(Ua(p));if(g)return i.state.loading|=4,i.instance=g,bn(g),g;s=Uh(l),(p=Si.get(p))&&Cu(s,p),g=(e.ownerDocument||e).createElement("link"),bn(g);var S=g;return S._p=new Promise(function(C,k){S.onload=C,S.onerror=k}),Hn(g,"link",s),i.state.loading|=4,Js(g,l.precedence,e),i.instance=g;case"script":return g=Vl(l.src),(p=e.querySelector(Pa(g)))?(i.instance=p,bn(p),p):(s=l,(p=Si.get(g))&&(s=b({},l),_u(s,p)),e=e.ownerDocument||e,p=e.createElement("script"),bn(p),Hn(p,"link",s),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(s=i.instance,i.state.loading|=4,Js(s,l.precedence,e));return i.instance}function Js(e,i,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=s.length?s[s.length-1]:null,g=p,S=0;S<s.length;S++){var C=s[S];if(C.dataset.precedence===i)g=C;else if(g!==p)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function Cu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function _u(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Ks=null;function Hh(e,i,l){if(Ks===null){var s=new Map,p=Ks=new Map;p.set(l,s)}else p=Ks,s=p.get(l),s||(s=new Map,p.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),p=0;p<l.length;p++){var g=l[p];if(!(g[Vi]||g[We]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=e+S;var C=s.get(S);C?C.push(g):s.set(S,[g])}}return s}function Gh(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Zv(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Wv(e,i,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Bl(s.href),g=i.querySelector(Ua(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Xs.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,bn(g);return}g=i.ownerDocument||i,s=Uh(s),(p=Si.get(p))&&Cu(s,p),g=g.createElement("link"),bn(g);var S=g;S._p=new Promise(function(C,k){S.onload=C,S.onerror=k}),Hn(g,"link",s),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Xs.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var Au=0;function ex(e,i){return e.stylesheets&&e.count===0&&Zs(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&Zs(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&Au===0&&(Au=62500*Dv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zs(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Au?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(p)}}:null}function Xs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qs=null;function Zs(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qs=new Map,i.forEach(tx,e),Qs=null,Xs.call(e))}function tx(e,i){if(!(i.state.loading&4)){var l=Qs.get(e);if(l)var s=l.get(null);else{l=new Map,Qs.set(e,l);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),s=S)}s&&l.set(null,s)}p=i.instance,S=p.getAttribute("data-precedence"),g=l.get(S)||s,g===s&&l.set(null,p),l.set(S,p),this.count++,s=Xs.bind(this),p.addEventListener("load",s),p.addEventListener("error",s),g?g.parentNode.insertBefore(p,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var Ha={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function nx(e,i,l,s,p,g,S,C,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=s,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Bh(e,i,l,s,p,g,S,C,k,$,ue,xe){return e=new nx(e,i,l,S,k,$,ue,xe,C),i=1,g===!0&&(i|=24),g=ii(3,null,null,i),e.current=g,g.stateNode=e,i=ac(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:s,isDehydrated:l,cache:i},uc(g),e}function Vh(e){return e?(e=xl,e):xl}function Oh(e,i,l,s,p,g){p=Vh(p),s.context===null?s.context=p:s.pendingContext=p,s=Co(i),s.payload={element:l},g=g===void 0?null:g,g!==null&&(s.callback=g),l=_o(e,s,i),l!==null&&(Wn(l,e,i),ga(l,e,i))}function qh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function Nu(e,i){qh(e,i),(e=e.alternate)&&qh(e,i)}function jh(e){if(e.tag===13||e.tag===31){var i=Ko(e,67108864);i!==null&&Wn(i,e,67108864),Nu(e,67108864)}}function $h(e){if(e.tag===13||e.tag===31){var i=ri();i=Ii(i);var l=Ko(e,i);l!==null&&Wn(l,e,i),Nu(e,i)}}var Ws=!0;function ix(e,i,l,s){var p=F.T;F.T=null;var g=Te.p;try{Te.p=2,Mu(e,i,l,s)}finally{Te.p=g,F.T=p}}function ox(e,i,l,s){var p=F.T;F.T=null;var g=Te.p;try{Te.p=8,Mu(e,i,l,s)}finally{Te.p=g,F.T=p}}function Mu(e,i,l,s){if(Ws){var p=Ru(s);if(p===null)mu(e,i,s,er,l),Jh(e,s);else if(ax(p,e,i,l,s))s.stopPropagation();else if(Jh(e,s),i&4&&-1<lx.indexOf(e)){for(;p!==null;){var g=qi(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=ot(g.pendingLanes);if(S!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var k=1<<31-Ye(S);C.entanglements[1]|=k,S&=~k}Bi(g),(qt&6)===0&&(Us=he()+500,Ia(0))}}break;case 31:case 13:C=Ko(g,2),C!==null&&Wn(C,g,2),Hs(),Nu(g,2)}if(g=Ru(s),g===null&&mu(e,i,s,er,l),g===p)break;p=g}p!==null&&s.stopPropagation()}else mu(e,i,s,null,l)}}function Ru(e){return e=ln(e),ku(e)}var er=null;function ku(e){if(er=null,e=Oi(e),e!==null){var i=u(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return er=e,null}function Yh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ae()){case E:return 2;case I:return 8;case O:case M:return 32;case ee:return 268435456;default:return 32}default:return 32}}var Iu=!1,Po=null,Ho=null,Go=null,Ga=new Map,Fa=new Map,Fo=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jh(e,i){switch(e){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":Ho=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":Ga.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(i.pointerId)}}function Ba(e,i,l,s,p,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:s,nativeEvent:g,targetContainers:[p]},i!==null&&(i=qi(i),i!==null&&jh(i)),e):(e.eventSystemFlags|=s,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function ax(e,i,l,s,p){switch(i){case"focusin":return Po=Ba(Po,e,i,l,s,p),!0;case"dragenter":return Ho=Ba(Ho,e,i,l,s,p),!0;case"mouseover":return Go=Ba(Go,e,i,l,s,p),!0;case"pointerover":var g=p.pointerId;return Ga.set(g,Ba(Ga.get(g)||null,e,i,l,s,p)),!0;case"gotpointercapture":return g=p.pointerId,Fa.set(g,Ba(Fa.get(g)||null,e,i,l,s,p)),!0}return!1}function Kh(e){var i=Oi(e.target);if(i!==null){var l=u(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,Di(e.priority,function(){$h(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,Di(e.priority,function(){$h(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tr(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Ru(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);dn=s,l.target.dispatchEvent(s),dn=null}else return i=qi(l),i!==null&&jh(i),e.blockedOn=l,!1;i.shift()}return!0}function Xh(e,i,l){tr(e)&&l.delete(i)}function sx(){Iu=!1,Po!==null&&tr(Po)&&(Po=null),Ho!==null&&tr(Ho)&&(Ho=null),Go!==null&&tr(Go)&&(Go=null),Ga.forEach(Xh),Fa.forEach(Xh)}function nr(e,i){e.blockedOn===i&&(e.blockedOn=null,Iu||(Iu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,sx)))}var ir=null;function Qh(e){ir!==e&&(ir=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ir===e&&(ir=null);for(var i=0;i<e.length;i+=3){var l=e[i],s=e[i+1],p=e[i+2];if(typeof s!="function"){if(ku(s||l)===null)continue;break}var g=qi(l);g!==null&&(e.splice(i,3),i-=3,Rc(g,{pending:!0,data:p,method:l.method,action:s},s,p))}}))}function Ol(e){function i(k){return nr(k,e)}Po!==null&&nr(Po,e),Ho!==null&&nr(Ho,e),Go!==null&&nr(Go,e),Ga.forEach(i),Fa.forEach(i);for(var l=0;l<Fo.length;l++){var s=Fo[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Fo.length&&(l=Fo[0],l.blockedOn===null);)Kh(l),l.blockedOn===null&&Fo.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var p=l[s],g=l[s+1],S=p[vt]||null;if(typeof g=="function")S||Qh(l);else if(S){var C=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[vt]||null)C=S.formAction;else if(ku(p)!==null)continue}else C=S.action;typeof C=="function"?l[s+1]=C:(l.splice(s,3),s-=3),Qh(l)}}}function Zh(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function zu(e){this._internalRoot=e}or.prototype.render=zu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,s=ri();Oh(l,s,e,i,null,null)},or.prototype.unmount=zu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Oh(e.current,2,null,e,null,null),Hs(),i[$t]=null}};function or(e){this._internalRoot=e}or.prototype.unstable_scheduleHydration=function(e){if(e){var i=zi();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Fo.length&&i!==0&&i<Fo[l].priority;l++);Fo.splice(l,0,e),l===0&&Kh(e)}};var Wh=t.version;if(Wh!=="19.2.3")throw Error(a(527,Wh,"19.2.3"));Te.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var rx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lr.isDisabled&&lr.supportsFiber)try{_=lr.inject(rx),ie=lr}catch{}}return Oa.createRoot=function(e,i){if(!r(e))throw Error(a(299));var l=!1,s="",p=ap,g=sp,S=rp;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=Bh(e,1,!1,null,null,l,s,null,p,g,S,Zh),e[$t]=i.current,hu(e),new zu(i)},Oa.hydrateRoot=function(e,i,l){if(!r(e))throw Error(a(299));var s=!1,p="",g=ap,S=sp,C=rp,k=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),i=Bh(e,1,!0,i,l??null,s,p,k,g,S,C,Zh),i.context=Vh(null),l=i.current,s=ri(),s=Ii(s),p=Co(s),p.callback=null,_o(l,p,s),l=s,i.current.lanes=l,bt(i,l),Bi(i),e[$t]=i.current,hu(e),new or(i)},Oa.version="19.2.3",Oa}var c0;function vx(){if(c0)return Uu.exports;c0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Uu.exports=yx(),Uu.exports}var xx=vx();const bx=sg(xx),Sx="modulepreload",Tx=function(n){return"/"+n},u0={},qu=function(t,o,a){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=Tx(m),m in u0)return;u0[m]=!0;const x=m.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":Sx,x||(T.as="script"),T.crossOrigin="",T.href=m,y&&T.setAttribute("nonce",y),document.head.appendChild(T),x)return new Promise((A,N)=>{T.addEventListener("load",A),T.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&u(y.reason);return t().catch(u)})};const wx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ex=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,a)=>a?a.toUpperCase():o.toLowerCase()),d0=n=>{const t=Ex(n);return t.charAt(0).toUpperCase()+t.slice(1)},cg=(...n)=>n.filter((t,o,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===o).join(" ").trim(),Cx=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var _x={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ax=W.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:r="",children:u,iconNode:h,...y},v)=>W.createElement("svg",{ref:v,..._x,width:t,height:t,stroke:n,strokeWidth:a?Number(o)*24/Number(t):o,className:cg("lucide",r),...!u&&!Cx(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>W.createElement(m,x)),...Array.isArray(u)?u:[u]]));const et=(n,t)=>{const o=W.forwardRef(({className:a,...r},u)=>W.createElement(Ax,{ref:u,iconNode:t,className:cg(`lucide-${wx(d0(n))}`,`lucide-${n}`,a),...r}));return o.displayName=d0(n),o};const Nx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],f0=et("align-vertical-justify-center",Nx);const Mx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],Rx=et("align-vertical-justify-end",Mx);const kx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],Ix=et("align-vertical-justify-start",kx);const zx=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Dx=et("bold",zx);const Lx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ux=et("check",Lx);const Px=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ts=et("chevron-down",Px);const Hx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ju=et("chevron-up",Hx);const Gx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fx=et("circle-alert",Gx);const Bx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Vx=et("clipboard",Bx);const Ox=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qx=et("copy",Ox);const jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$x=et("disc",jx);const Yx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Jx=et("download",Yx);const Kx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ja=et("eye-off",Kx);const Xx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ka=et("eye",Xx);const Qx=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Zx=et("fast-forward",Qx);const Wx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xr=et("file-text",Wx);const eb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],ug=et("film",eb);const tb=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],nb=et("folder",tb);const ib=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],ar=et("grip-horizontal",ib);const ob=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],p0=et("image",ob);const lb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ab=et("info",lb);const sb=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],rb=et("italic",sb);const cb=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ub=et("key",cb);const db=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],h0=et("keyboard",db);const fb=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],br=et("list-music",fb);const pb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],m0=et("loader-circle",pb);const hb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Za=et("maximize",hb);const mb=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],g0=et("minimize",mb);const gb=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],$l=et("music",gb);const yb=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],vb=et("palette",yb);const xb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],bb=et("panels-top-left",xb);const Sb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],dg=et("pause",Sb);const Tb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$u=et("play",Tb);const wb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fg=et("plus",wb);const Eb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Cb=et("redo-2",Eb);const _b=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Ab=et("repeat-1",_b);const Nb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],y0=et("repeat",Nb);const Mb=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],Rb=et("rewind",Mb);const kb=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Yu=et("rotate-ccw",kb);const Ib=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],zb=et("scissors",Ib);const Db=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lb=et("search",Db);const Ub=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gr=et("settings",Ub);const Pb=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Hb=et("shuffle",Pb);const Gb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Fb=et("skip-back",Gb);const Bb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Vb=et("skip-forward",Bb);const Ob=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ju=et("sparkles",Ob);const qb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],jb=et("split",qb);const $b=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ku=et("square",$b);const Yb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Jb=et("strikethrough",Yb);const Kb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sr=et("trash-2",Kb);const Xb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qb=et("triangle-alert",Xb);const Zb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Oo=et("type",Zb);const Wb=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],e1=et("underline",Wb);const t1=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],n1=et("undo-2",t1);const i1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qo=et("upload",i1);const o1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],l1=et("user",o1);const a1=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Wa=et("video",a1);const s1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Vo=et("volume-2",s1);const r1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ql=et("volume-x",r1);const c1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wi=et("x",c1);const u1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],d1=et("zoom-in",u1);const f1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],p1=et("zoom-out",f1);var Gn=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(Gn||{});const pg=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},Xa=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let a=0;return o.length===3?(a+=parseInt(o[0],10)*3600,a+=parseInt(o[1],10)*60,a+=parseFloat(o[2])):o.length===2?(a+=parseInt(o[0],10)*60,a+=parseFloat(o[1])):o.length===1&&(a+=parseFloat(o[0])),isNaN(a)?0:a},Yl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},Xl=n=>{const t=n.split(`
`),o=[],a=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(u=>{const h=[...u.matchAll(a)];if(h.length>0){let y=u.replace(a,"").trim();y=y.replace(/\\n/g,`
`);const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(v.length>0){m=[];for(let b=0;b<v.length;b++){const T=v[b],A=parseInt(T[1],10),N=parseInt(T[2],10),V=T[4];let B=A*60+N;V&&(B+=parseInt(V,10)/(V.length===3?1e3:100));const Y=(T.index||0)+T[0].length,re=b<v.length-1?v[b+1].index:y.length,ce=y.substring(Y,re);if(ce){const Re=ce.split(`
`);Re.forEach((ze,Le)=>{ze&&m.push({text:ze,startTime:B,endTime:0}),Le<Re.length-1&&m.push({text:`
`,startTime:B,endTime:0})})}}for(let b=0;b<m.length;b++)b<m.length-1?m[b].endTime=m[b+1].startTime:m[b].endTime=m[b].startTime+.5}h.forEach(b=>{const T=parseInt(b[1],10),A=parseInt(b[2],10),N=b[4];let V=T*60+A;N&&(N.length===2?V+=parseInt(N,10)/100:(N.length,V+=parseInt(N,10)/1e3)),o.push({time:V,text:x,words:m})})}}),o.sort((u,h)=>u.time-h.time)},Ql=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),a=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,u=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),b=parseInt(y[4],10);return v*3600+m*60+x+b/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),b=pg(x),T=v.split(" --> ");if(T.length>=2){const A=u(T[0]),N=u(T[1]);A!==null&&b&&a.push({time:A,text:b,endTime:N!==null?N:void 0})}}}),a},es=n=>{const t=[];try{const a=new DOMParser().parseFromString(n,"text/xml"),u=Array.from(a.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Xa(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<u.length;v++){const m=u[v],x=y(m,"begin"),b=y(m,"end"),T=pg(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=h(x),N=h(b),V=[],Y=Array.from(m.getElementsByTagName("*")).filter(re=>re.localName==="span");for(let re=0;re<Y.length;re++){const ce=Y[re],Re=y(ce,"begin"),ze=y(ce,"end"),Le=ce.textContent?.replace(/\s+/g," ");if(Re&&ze&&Le&&Le.length>0){const be=h(Re),Qe=h(ze);be!==void 0&&Qe!==void 0&&V.push({text:Le,startTime:be,endTime:Qe})}}A!==void 0&&t.push({time:A,text:T,endTime:N,words:V.length>0?V:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,a)=>o.time-a.time)},h1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(a=>typeof a=="object"&&a!==null&&typeof a.time=="number"&&typeof a.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},m1=({toast:n,onRemove:t})=>{const[o,a]=W.useState(!1);W.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{a(!0),setTimeout(t,300)},u=()=>{switch(n.type){case"success":return f.jsx(Ux,{size:18,className:"text-green-400"});case"error":return f.jsx(Fx,{size:18,className:"text-red-400"});default:return f.jsx(ab,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return f.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[f.jsx("div",{className:"shrink-0",children:u()}),f.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),f.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:f.jsx(wi,{size:16})})]})},g1=({toasts:n,removeToast:t})=>f.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>f.jsx("div",{className:"pointer-events-auto",children:f.jsx(m1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),y1=({isOpen:n,message:t,onConfirm:o,onCancel:a,title:r="Confirm Action"})=>{const[u,h]=W.useState(!1);return W.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),W.useEffect(()=>{const y=v=>{n&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),a()))};return n&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[n,o,a]),!n&&!u?null:f.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),f.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:f.jsx(Qb,{className:"text-orange-500",size:24})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),f.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),f.jsx("button",{onClick:a,className:"text-zinc-500 hover:text-white transition-colors",children:f.jsx(wi,{size:20})})]})}),f.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[f.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),f.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},hg=W.createContext(void 0),Mr=()=>{const n=W.useContext(hg);if(!n)throw new Error("useUI must be used within a UIProvider");return n},v1=({children:n})=>{const[t,o]=W.useState([]),a=W.useCallback((b,T,A)=>{let N,V;typeof A=="number"?N=A:typeof A=="object"&&(N=A.duration,V=A.id);const B=V||Math.random().toString(36).substr(2,9);o(Y=>[...Y.filter(ce=>ce.id!==B),{id:B,type:b,message:T,duration:N}])},[]),r=W.useCallback(b=>{o(T=>T.filter(A=>A.id!==b))},[]),u={success:(b,T)=>a("success",b,T),error:(b,T)=>a("error",b,T),info:(b,T)=>a("info",b,T)},[h,y]=W.useState({isOpen:!1,message:"",title:"",resolve:null}),v=W.useCallback((b,T="Confirm Action")=>new Promise(A=>{y({isOpen:!0,message:b,title:T,resolve:A})}),[]),m=W.useCallback(()=>{h.resolve&&h.resolve(!0),y(b=>({...b,isOpen:!1,resolve:null}))},[h]),x=W.useCallback(()=>{h.resolve&&h.resolve(!1),y(b=>({...b,isOpen:!1,resolve:null}))},[h]);return f.jsxs(hg.Provider,{value:{toast:u,confirm:v},children:[n,f.jsx(g1,{toasts:t,removeToast:r}),f.jsx(y1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},sr=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,x1=(n,t)=>{const o=Math.floor(n/60),a=n%60;return t<1?`${o}:${a.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(a).toString().padStart(2,"0")}`},v0=10,b1=50,Yt={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},S1=n=>new Promise(t=>{const o=URL.createObjectURL(n),a=document.createElement(n.type.startsWith("audio/")?"audio":"video");a.preload="metadata",a.onloadedmetadata=()=>{t(a.duration),URL.revokeObjectURL(o)},a.onerror=()=>{URL.revokeObjectURL(o),t(0)},a.src=o}),T1=({value:n,onChange:t})=>{const[o,a]=W.useState(n.toString());W.useEffect(()=>{const h=parseFloat(o);!isNaN(h)&&Math.abs(h-n)<.001||a(n.toString())},[n]);const r=()=>{const h=parseFloat(o);o===""||isNaN(h)?a(n.toString()):t(h)},u=h=>{const y=parseFloat(o),v=isNaN(y)?n:y,m=Math.round((v+h)*100)/100;m<.05||(t(m),a(m.toString()))};return f.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[f.jsx("button",{onClick:()=>u(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:f.jsx(ts,{size:10})}),f.jsx("input",{type:"text",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:h=>{/^\d*\.?\d*$/.test(h.target.value)&&a(h.target.value)},onBlur:r,onKeyDown:h=>{h.stopPropagation(),h.key==="ArrowUp"&&(h.preventDefault(),u(.05)),h.key==="ArrowDown"&&(h.preventDefault(),u(-.05)),h.key==="Enter"&&h.currentTarget.blur()}}),f.jsx("button",{onClick:()=>u(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:f.jsx(ju,{size:10})})]})},w1=({slides:n,setSlides:t,currentTime:o,duration:a,lyrics:r,onSeek:u,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=Mr(),x=W.useRef(null),b=W.useRef(null),T=W.useRef(null),[A,N]=W.useState(40),[V,B]=W.useState([n]),[Y,re]=W.useState(0),ce=W.useRef(!1);W.useEffect(()=>{if(ce.current){ce.current=!1;return}const E=V[Y];if(JSON.stringify(E)!==JSON.stringify(n)){const I=V.slice(0,Y+1);I.push(n),I.length>b1?(I.shift(),B(I)):(B(I),re(Y+1))}},[n,V,Y]);const Re=Y>0,ze=Y<V.length-1,Le=W.useCallback(()=>{if(Y>0){const E=Y-1;re(E),ce.current=!0,t(V[E])}},[t,V,Y]),be=W.useCallback(()=>{if(Y<V.length-1){const E=Y+1;re(E),ce.current=!0,t(V[E])}},[t,V,Y]),Qe=Math.max(0,...n.map(E=>E.endTime)),_e=Math.max(a,60,Qe),Ke=_e*A,[De,rt]=W.useState([]),[mt,Et]=W.useState(null),[wt,F]=W.useState([]),Te=W.useCallback(()=>{if(De.length===0)return;const E=n.filter(I=>De.includes(I.id));F(E)},[De,n]),ne=W.useCallback(()=>{if(De.length===0)return;const E=n.filter(I=>De.includes(I.id));F(E),t(I=>I.filter(O=>!De.includes(O.id))),rt([])},[De,n,t]),de=W.useRef(n),yt=W.useRef(A);W.useEffect(()=>{de.current=n,yt.current=A},[n,A]);const L=W.useCallback(()=>{if(wt.length===0)return;const E=Math.min(...wt.map(M=>M.startTime)),I=o-E,O=wt.map(M=>({...M,id:Math.random().toString(36).substr(2,9),startTime:M.startTime+I,endTime:M.endTime+I}));t(M=>[...M,...O].sort((ee,D)=>ee.startTime-D.startTime)),rt(O.map(M=>M.id))},[wt,o,t]),le=W.useCallback(()=>{const E=n.filter(ee=>De.includes(ee.id)&&o>ee.startTime&&o<ee.endTime);if(E.length===0)return;let I=[];const O=[],M=[];E.forEach(ee=>{const D=o,se={...ee,id:Math.random().toString(36).substr(2,9),endTime:D},_=D-ee.startTime,ie={...ee,id:Math.random().toString(36).substr(2,9),startTime:D,mediaStartOffset:(ee.mediaStartOffset||0)+_};O.push(ee.id),I.push(se,ie),M.push(ie.id)}),t(ee=>[...ee.filter(se=>!O.includes(se.id)),...I].sort((se,_)=>se.startTime-_.startTime)),rt(M)},[n,De,o,t]),[ve,Pe]=W.useState(null),[it,w]=W.useState(!1),[U,J]=W.useState(null),oe=async E=>{if(E.target.files&&E.target.files.length>0){const I=Array.from(E.target.files),O=I.every(ee=>ee.type.startsWith("image/")),M=[];if(O){const ee=I.length,D=o,_=Math.max(0,a-D)/ee,ie=Math.max(3,_);I.forEach((Ie,Ye)=>{const nt=URL.createObjectURL(Ie),Be=D+Ye*ie,Lt=Be+ie;M.push({id:Math.random().toString(36).substr(2,9),url:nt,type:"image",startTime:Be,endTime:Lt,name:Ie.name,layer:0})})}else{let ee=o;for(const D of I){const se=D.type.startsWith("image/")?"image":D.type.startsWith("video/")?"video":"audio";let _=5;if(se!=="image"){const Ie=await S1(D);Ie>0&&(_=Ie)}const ie=URL.createObjectURL(D);M.push({id:Math.random().toString(36).substr(2,9),url:ie,type:se,startTime:ee,endTime:ee+_,mediaDuration:se!=="image"?_:void 0,name:D.name,isMuted:se==="video",volume:se==="video"||se==="audio"?1:void 0,layer:0}),ee+=_}}t(ee=>[...ee,...M].sort((D,se)=>D.startTime-se.startTime)),E.target.value=""}},Ne=E=>{t(I=>I.filter(O=>O.id!==E))},Se=async E=>{E.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},Ee=(E,I,O)=>{if(E.stopPropagation(),E.preventDefault(),x.current?.focus(),E.shiftKey&&mt){const ie=n.findIndex(Ye=>Ye.id===mt),Ie=n.findIndex(Ye=>Ye.id===I);if(ie!==-1&&Ie!==-1){const Ye=Math.min(ie,Ie),nt=Math.max(ie,Ie),Be=n.slice(Ye,nt+1).map(Lt=>Lt.id);rt(Lt=>{const Je=new Set([...Lt,...Be]);return Array.from(Je)})}}else E.ctrlKey||E.metaKey?(rt(ie=>ie.includes(I)?ie.filter(Ie=>Ie!==I):[...ie,I]),Et(I)):(De.includes(I)||rt([I]),Et(I));const M=n.find(ie=>ie.id===I);if(!M)return;const ee=De.includes(I),D=E.ctrlKey||E.metaKey||E.shiftKey;let se=[];if(!D&&!ee)se=[I];else if(D){if(se=[I],(E.ctrlKey||E.metaKey)&&!ee)se=[...De,I];else if((E.ctrlKey||E.metaKey)&&ee){se=De.filter(ie=>ie!==I);return}}else se=De;const _={};n.forEach(ie=>{se.includes(ie.id)&&(_[ie.id]={start:ie.startTime,end:ie.endTime})}),_[I]||(_[I]={start:M.startTime,end:M.endTime}),Pe({id:I,type:O,startX:E.clientX,initialStart:M.startTime,initialEnd:M.endTime,initialMap:_}),window.addEventListener("mousemove",H),window.addEventListener("mouseup",z)},ke=E=>{E.button===0&&(E.stopPropagation(),x.current?.focus(),rt([]),w(!0),ge(E.clientX),window.addEventListener("mousemove",Me),window.addEventListener("mouseup",je))},fe=E=>{if(E.button!==0)return;x.current?.focus();const I=E.clientX,O=E.clientY,M=T.current?.getBoundingClientRect();if(!M)return;const ee=I-M.left,D=O-M.top;let se=!1;const _=Ie=>{const Ye=Math.sqrt(Math.pow(Ie.clientX-I,2)+Math.pow(Ie.clientY-O,2));if(!se&&Ye>5&&(se=!0,J({x:ee,y:D,w:0,h:0})),se&&T.current){const nt=T.current.getBoundingClientRect(),Be=Ie.clientX-nt.left,Lt=Ie.clientY-nt.top;J(bt=>{if(!bt)return null;const gt=Be-ee,jt=Lt-D;return{x:gt>0?ee:Be,y:jt>0?D:Lt,w:Math.abs(gt),h:Math.abs(jt)}});const Je=[],Jt=de.current,Mt=yt.current,ot=Math.min(ee,Be),Ae=Math.min(D,Lt),ct=Math.abs(Be-ee),ut=Math.abs(Lt-D),Ve=ot+ct,It=Ae+ut;Jt.forEach(bt=>{const gt=bt.startTime*Mt+96,jt=bt.endTime*Mt+96;let vn=0,un=0;const Ii=bt.layer||0;bt.type==="audio"?Ii===0?(vn=Yt.AUDIO_L1_TOP,un=Yt.AUDIO_L1_TOP+Yt.AUDIO_L1_HEIGHT):(vn=Yt.AUDIO_L2_TOP,un=Yt.AUDIO_L2_TOP+Yt.AUDIO_L2_HEIGHT):Ii===0?(vn=Yt.VISUAL_L1_TOP,un=Yt.VISUAL_L1_TOP+Yt.VISUAL_L1_HEIGHT):(vn=Yt.VISUAL_L2_TOP,un=Yt.VISUAL_L2_TOP+Yt.VISUAL_L2_HEIGHT);const Dn=ot<jt&&Ve>gt,zi=Ae<un&&It>vn;Dn&&zi&&Je.push(bt.id)}),rt(Je)}},ie=Ie=>{se||(rt([]),ge(Ie.clientX)),J(null),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",ie)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",ie)},ge=E=>{if(!T.current)return;const I=T.current.getBoundingClientRect(),O=E-I.left-96;let M=Math.max(0,Math.min(O/A,_e));M=Ze(M),u(M)},Me=E=>{ge(E.clientX)},je=()=>{w(!1),window.removeEventListener("mousemove",Me),window.removeEventListener("mouseup",je)},Fe=E=>{const I=E.target;if(!(I.tagName==="INPUT"||I.tagName==="TEXTAREA"||I.isContentEditable)){if((E.ctrlKey||E.metaKey)&&E.key==="z"&&!E.shiftKey){E.preventDefault(),Le();return}if((E.ctrlKey||E.metaKey)&&(E.key==="y"||E.key==="z"&&E.shiftKey)){E.preventDefault(),be();return}if((E.ctrlKey||E.metaKey)&&E.key==="c"){E.preventDefault(),Te();return}if((E.ctrlKey||E.metaKey)&&E.key==="x"){E.preventDefault(),ne();return}if((E.ctrlKey||E.metaKey)&&E.key==="v"){E.preventDefault(),L();return}if(E.key.toLowerCase()==="x"&&!E.ctrlKey&&!E.metaKey||(E.ctrlKey||E.metaKey)&&E.key==="k"){E.preventDefault(),E.stopPropagation(),le();return}if((E.key==="Delete"||E.key==="Backspace")&&De.length>0&&(E.preventDefault(),t(O=>O.filter(M=>!De.includes(M.id))),rt([])),De.length>0&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault(),E.stopPropagation();const O=E.key==="ArrowRight"?.01:-.01,M=n.find(ee=>ee.id===De[0]);if(M){const ee=Math.max(0,M.startTime+O);u(ee)}t(ee=>ee.map(se=>{if(De.includes(se.id)){const _=se.endTime-se.startTime;let ie=se.startTime+O;return ie=Math.max(0,ie),{...se,startTime:ie,endTime:ie+_}}return se}).sort((se,_)=>se.startTime-_.startTime))}}},Ze=(E,I=[])=>{const O=v0/A,M=[0,a,o],ee=sr(A),D=Math.round(E/ee)*ee;M.push(D),n.forEach(ie=>{I.includes(ie.id)||(M.push(ie.startTime),M.push(ie.endTime))}),r.forEach(ie=>{M.push(ie.time)});let se=E,_=O;for(const ie of M){const Ie=Math.abs(ie-E);Ie<_&&(_=Ie,se=ie)}return se},H=E=>{Pe(I=>{if(!I)return null;const M=(E.clientX-I.startX)/A;return t(ee=>{if(I.type==="move"){const D=Object.keys(I.initialMap),se=Object.values(I.initialMap),_=Math.min(...se.map(Ae=>Ae.start)),ie=Math.max(...se.map(Ae=>Ae.end)),Ie=I.initialMap[I.id],Ye=[{type:"drag-start",initVal:Ie.start},{type:"drag-end",initVal:Ie.end},{type:"group-start",initVal:_},{type:"group-end",initVal:ie}],nt=v0/A,Be=[0,a,o],Lt=sr(A);n.forEach(Ae=>{D.includes(Ae.id)||(Be.push(Ae.startTime),Be.push(Ae.endTime))}),r.forEach(Ae=>{Be.push(Ae.time)});let Je=M,Jt=nt,Mt=!1;Ye.forEach(Ae=>{const ct=Ae.initVal+M;for(const It of Be){const bt=Math.abs(It-ct);bt<Jt&&(Jt=bt,Je=It-Ae.initVal,Mt=!0)}const ut=Math.round(ct/Lt)*Lt,Ve=Math.abs(ut-ct);Ve<Jt&&(Jt=Ve,Je=ut-Ae.initVal,Mt=!0)});let ot=Mt?Je:M;return _+ot<0&&(ot=-_),ee.map(Ae=>{const ct=I.initialMap[Ae.id];if(ct){const ut=ct.end-ct.start;let Ve=Ae.layer||0;const It=(gt,jt,vn)=>gt>=jt&&gt<=jt+vn,bt=T.current?.getBoundingClientRect();if(bt){const gt=E.clientY-bt.top;Ae.type==="audio"?(It(gt,Yt.AUDIO_L1_TOP,Yt.AUDIO_L1_HEIGHT)&&(Ve=0),It(gt,Yt.AUDIO_L2_TOP,Yt.AUDIO_L2_HEIGHT)&&(Ve=1)):(It(gt,Yt.VISUAL_L1_TOP,Yt.VISUAL_L1_HEIGHT)&&(Ve=0),It(gt,Yt.VISUAL_L2_TOP,Yt.VISUAL_L2_HEIGHT)&&(Ve=1))}return{...Ae,startTime:ct.start+ot,endTime:ct.start+ot+ut,layer:Ve}}return Ae})}else if(I.type==="resize-start"){let D=I.initialStart+M;D=Ze(D,[I.id]);const se=.5,_=I.initialEnd;return D=Math.max(0,Math.min(D,_-se)),ee.map(ie=>ie.id!==I.id?ie:{...ie,startTime:D})}else{let D=I.initialEnd+M;D=Ze(D,[I.id]);const se=.5,_=I.initialStart;return D=Math.max(_+se,D),ee.map(ie=>ie.id!==I.id?ie:{...ie,endTime:D})}}),I})},z=E=>{ve&&ve.type==="move"&&Math.abs(E.clientX-ve.startX)<5&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&rt([ve.id]),Pe(null),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",z),t(I=>[...I].sort((O,M)=>O.startTime-M.startTime))},pe=()=>N(E=>Math.min(200,E+10)),Ce=()=>N(E=>Math.max(10,E-10)),he=(E,I)=>{v(O=>{const M=O.layerVisibility?.[E]||{},ee={...M,[I]:M[I]===!1};return{...O,layerVisibility:{...O.layerVisibility,[E]:ee,...E==="visual"?{audio:O.layerVisibility?.audio||{}}:{visual:O.layerVisibility?.visual||{}}}}})},ae=(E,I)=>y.layerVisibility?.[E]?.[I]!==!1;return f.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:E=>E.currentTarget.focus(),onKeyDown:Fe,children:[f.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[f.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[f.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[f.jsx(ug,{size:16,className:"text-purple-400"}),"Timeline"]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[f.jsx(fg,{size:14})," Import Media",f.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:oe})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Ce,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:f.jsx(p1,{size:14})}),f.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[A,"px/s"]}),f.jsx("button",{onClick:pe,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:f.jsx(d1,{size:14})})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Le,disabled:!Re,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:f.jsx(n1,{size:14})}),f.jsx("button",{onClick:be,disabled:!ze,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:f.jsx(Cb,{size:14})})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Te,disabled:De.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:f.jsx(qx,{size:14})}),f.jsx("button",{onClick:ne,disabled:De.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:f.jsx(zb,{size:14})}),f.jsx("button",{onClick:L,disabled:wt.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:f.jsx(Vx,{size:14})})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("button",{onClick:le,disabled:De.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:f.jsx(jb,{size:14})})}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>{n.length>0&&De.length===n.length?rt([]):rt(n.map(E=>E.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),De.length===1&&f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[f.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),f.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const E=n.find(I=>I.id===De[0]);return E?Yl(E.endTime-E.startTime):"00:00"})(),onBlur:E=>{const O=E.target.value.split(":");if(O.length===2){const ee=parseInt(O[0])||0,D=parseInt(O[1])||0,se=ee*60+D;se>0&&t(_=>_.map(ie=>ie.id===De[0]?{...ie,endTime:ie.startTime+se}:ie))}const M=n.find(ee=>ee.id===De[0]);M&&(E.target.value=Yl(M.endTime-M.startTime))},onKeyDown:E=>{E.key==="Enter"&&E.currentTarget.blur()}},De[0])]}),De.length===1&&(()=>{const E=n.find(I=>I.id===De[0]);return E&&(E.type==="video"||E.type==="audio")?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),f.jsxs("div",{className:"flex items-center gap-1 w-20",children:[f.jsx("button",{onClick:()=>{t(I=>I.map(O=>O.id===E.id?{...O,isMuted:!O.isMuted}:O))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?f.jsx(ql,{size:10}):f.jsx(Vo,{size:10})}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:E.volume!==void 0?E.volume:1,onChange:I=>{const O=parseFloat(I.target.value);t(M=>M.map(ee=>ee.id===E.id?{...ee,volume:O,isMuted:O===0}:ee))}})]}),f.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((E.volume||1)*100),"%"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),f.jsx(T1,{value:E.playbackRate||1,onChange:I=>{t(O=>O.map(M=>M.id===E.id?{...M,playbackRate:I}:M))}})]})]}):null})()]})]}),f.jsxs("div",{className:"flex gap-2 shrink-0",children:[f.jsx("button",{onClick:Se,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:f.jsx(Sr,{size:14})}),f.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),f.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:f.jsx(wi,{size:14})})]})]}),f.jsx("div",{ref:b,onWheel:E=>{b.current&&E.shiftKey&&(E.preventDefault(),b.current.scrollLeft+=E.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:f.jsxs("div",{ref:T,className:"relative",style:{width:`${Ke+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:fe,children:[U&&f.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:U.x,top:U.y,width:U.w,height:U.h}}),f.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const E=sr(A);return Array.from({length:Math.ceil(Ke/(A*E))}).map((I,O)=>f.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:O*E*A}},O))})(),a>0&&f.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:a*A},children:f.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),f.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:ke,children:[f.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),f.jsx("div",{className:"relative flex-1",children:(()=>{const E=sr(A);return Array.from({length:Math.ceil(Ke/(A*E))}).map((I,O)=>{const M=O*E;return M>_e?null:f.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:M*A,width:E*A},children:x1(M,E)},O)})})()})]}),f.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*A}px)`,willChange:"transform"},children:f.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),f.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Yt.VISUAL_L1_TOP,height:Yt.VISUAL_L1_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Visual 1"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ae("visual",0)?f.jsx(Ka,{size:12}):f.jsx(Ja,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ae("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&(E.layer===0||E.layer===void 0)).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${ve?.id===E.id||De.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:I=>Ee(I,E.id,"move"),children:[E.type==="video"?f.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):f.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:f.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(O=>O.map(M=>M.id===E.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:f.jsx(Yu,{size:10})}),E.type==="video"&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?f.jsx(ql,{size:10}):f.jsx(Vo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Ne(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:f.jsx(wi,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-start"),children:f.jsx(ar,{size:10,className:"text-white/70 rotate-90"})}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-end"),children:f.jsx(ar,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),f.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Yt.VISUAL_L2_TOP,height:Yt.VISUAL_L2_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Visual 2"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ae("visual",1)?f.jsx(Ka,{size:12}):f.jsx(Ja,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ae("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&E.layer===1).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${ve?.id===E.id||De.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:I=>Ee(I,E.id,"move"),children:[E.type==="video"?f.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):f.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:f.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(O=>O.map(M=>M.id===E.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:f.jsx(Yu,{size:10})}),E.type==="video"&&f.jsx("button",{onClick:I=>{I.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:E.isMuted!==!1?f.jsx(ql,{size:10}):f.jsx(Vo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Ne(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:f.jsx(wi,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-start"),children:f.jsx(ar,{size:10,className:"text-white/70 rotate-90"})}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-end"),children:f.jsx(ar,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),f.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Yt.LYRICS_TOP,height:Yt.LYRICS_HEIGHT},children:[f.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:f.jsx("span",{children:"Lyrics"})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((E,I)=>f.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:E.time*A},title:`${Yl(E.time)} - ${E.text}`,onClick:O=>{O.stopPropagation(),u(E.time)},children:[f.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Yl(E.time)}),E.text]},I))})]}),f.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Yt.AUDIO_L1_TOP,height:Yt.AUDIO_L1_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Audio 1"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ae("audio",0)?f.jsx(Ka,{size:12}):f.jsx(Ja,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ae("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&(E.layer===0||E.layer===void 0)).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ve?.id===E.id||De.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:I=>Ee(I,E.id,"move"),children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:f.jsx(Vo,{size:16,className:"text-emerald-200"})}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:f.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?f.jsx(ql,{size:10}):f.jsx(Vo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Ne(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:f.jsx(wi,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-start")}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-end")})]},E.id))})]}),f.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Yt.AUDIO_L2_TOP,height:Yt.AUDIO_L2_HEIGHT},children:[f.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[f.jsx("span",{children:"Audio 2"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),he("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ae("audio",1)?f.jsx(Ka,{size:12}):f.jsx(Ja,{size:12,className:"text-zinc-600"})})]}),f.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ae("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&E.layer===1).map(E=>f.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ve?.id===E.id||De.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${De.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:I=>Ee(I,E.id,"move"),children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:f.jsx(Vo,{size:16,className:"text-emerald-200"})}),f.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:f.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?f.jsx(ql,{size:10}):f.jsx(Vo,{size:10})}),f.jsx("button",{onClick:I=>{I.stopPropagation(),Ne(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:f.jsx(wi,{size:10})}),f.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-start")}),f.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:I=>Ee(I,E.id,"resize-end")})]},E.id))})]})]})})]})};var E1={};let C1,_1;function A1(){return{geminiUrl:C1,vertexUrl:_1}}function N1(n,t,o,a){var r,u;if(!n?.baseUrl){const h=A1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(u=h.geminiUrl)!==null&&u!==void 0?u:a}return n.baseUrl}class po{}function qe(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(a,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(n,t,o){for(let u=0;u<t.length-1;u++){const h=t[u];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];d(x,t.slice(u+1),o[m])}else for(const m of v)d(m,t.slice(u+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];d(v[0],t.slice(u+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const a=t[t.length-1],r=n[a];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[a]=o}function c(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let a=0;a<t.length;a++){if(typeof n!="object"||n===null)return o;const r=t[a];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in n){const h=n[u];return Array.isArray(h)?h.map(y=>c(y,t.slice(a+1),o)):o}else return o}else n=n[r]}return n}catch(a){if(a instanceof TypeError)return o;throw a}}function M1(n,t){for(const[o,a]of Object.entries(t)){const r=o.split("."),u=a.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&u.length>y)for(let v=y;v<u.length;v++){const m=u[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}Xu(n,r,u,0,h)}}function Xu(n,t,o,a,r){if(a>=t.length||typeof n!="object"||n===null)return;const u=t[a];if(u.endsWith("[]")){const h=u.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])Xu(v,t,o,a+1,r)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const b=[];for(const T of o.slice(a))T==="*"?b.push(m):b.push(T);d(h,b,x)}for(const m of y)delete h[m]}}else{const h=n;u in h&&Xu(h[u],t,o,a+1,r)}}function hd(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function R1(n){const t={},o=c(n,["operationName"]);o!=null&&d(t,["operationName"],o);const a=c(n,["resourceName"]);return a!=null&&d(t,["_url","resourceName"],a),t}function k1(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],z1(h)),t}function I1(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],D1(h)),t}function z1(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>L1(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function D1(n){const t={},o=c(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>U1(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function L1(n){const t={},o=c(n,["video"]);return o!=null&&d(t,["video"],V1(o)),t}function U1(n){const t={},o=c(n,["_self"]);return o!=null&&d(t,["video"],O1(o)),t}function P1(n){const t={},o=c(n,["operationName"]);return o!=null&&d(t,["_url","operationName"],o),t}function H1(n){const t={},o=c(n,["operationName"]);return o!=null&&d(t,["_url","operationName"],o),t}function G1(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],F1(h)),t}function F1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["parent"]);a!=null&&d(t,["parent"],a);const r=c(n,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function mg(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],B1(h)),t}function B1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["parent"]);a!=null&&d(t,["parent"],a);const r=c(n,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function V1(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["uri"],o);const a=c(n,["encodedVideo"]);a!=null&&d(t,["videoBytes"],hd(a));const r=c(n,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function O1(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["uri"],o);const a=c(n,["bytesBase64Encoded"]);a!=null&&d(t,["videoBytes"],hd(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}var x0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(x0||(x0={}));var b0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(b0||(b0={}));var S0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(S0||(S0={}));var rn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(rn||(rn={}));var T0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(T0||(T0={}));var w0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(w0||(w0={}));var E0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(E0||(E0={}));var C0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(C0||(C0={}));var _0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(_0||(_0={}));var A0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(A0||(A0={}));var N0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(N0||(N0={}));var M0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(M0||(M0={}));var R0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(R0||(R0={}));var k0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(k0||(k0={}));var I0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(I0||(I0={}));var z0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(z0||(z0={}));var D0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(D0||(D0={}));var L0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(L0||(L0={}));var U0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(U0||(U0={}));var Tr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Tr||(Tr={}));var P0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(P0||(P0={}));var H0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(H0||(H0={}));var G0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(G0||(G0={}));var Qu;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qu||(Qu={}));var F0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(F0||(F0={}));var B0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(B0||(B0={}));var V0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(V0||(V0={}));var O0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(O0||(O0={}));var q0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(q0||(q0={}));var j0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(j0||(j0={}));var $0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})($0||($0={}));var Y0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Y0||(Y0={}));var J0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(J0||(J0={}));var K0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(K0||(K0={}));var X0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(X0||(X0={}));var Q0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Q0||(Q0={}));var Z0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Z0||(Z0={}));var W0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(W0||(W0={}));var em;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(em||(em={}));var tm;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(tm||(tm={}));var nm;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(nm||(nm={}));var im;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(im||(im={}));var om;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(om||(om={}));var lm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(lm||(lm={}));var am;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(am||(am={}));var sm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(sm||(sm={}));var rm;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rm||(rm={}));var cm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(cm||(cm={}));var um;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(um||(um={}));var dm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(dm||(dm={}));var fm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(fm||(fm={}));var pm;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(pm||(pm={}));var hm;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hm||(hm={}));var mm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(mm||(mm={}));var gm;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(gm||(gm={}));var Jl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Jl||(Jl={}));class Zu{constructor(t){const o={};for(const a of t.headers.entries())o[a[0]]=a[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class qa{get text(){var t,o,a,r,u,h,y,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const b=[];for(const T of(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[A,N]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&b.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,a,r,u,h,y,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const b of(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(b))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,a,r,u,h,y,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,a,r,u,h,y,v,m;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,a,r,u,h,y,v,m;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class ym{}class vm{}class q1{}class j1{}class $1{}class Y1{}class xm{}class bm{}class Sm{}class J1{}class wr{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new wr;let r;const u=t;return o?r=I1(u):r=k1(u),Object.assign(a,r),a}}class Tm{}class wm{}class Em{}class Cm{}class K1{}class X1{}class Q1{}class md{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new md,u=G1(t);return Object.assign(a,u),a}}class Z1{}class W1{}class eS{}class _m{}class tS{get text(){var t,o,a;let r="",u=!1;const h=[];for(const y of(a=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;u=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,o,a;let r="";const u=[];for(const h of(a=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&u.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class gd{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new gd,u=mg(t);return Object.assign(a,u),a}}function Ot(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function gg(n,t){const o=Ot(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function yg(n){return Array.isArray(n)?n.map(t=>Er(t)):[Er(n)]}function Er(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function vg(n){const t=Er(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xg(n){const t=Er(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Am(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function bg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>Am(t)):[Am(n)]}function Wu(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Nm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Mm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function qn(n){if(n==null)throw new Error("ContentUnion is required");return Wu(n)?n:{role:"user",parts:bg(n)}}function yd(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const a=qn(o);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const o=qn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>qn(o)):[qn(t)]}function Ei(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Nm(n)||Mm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[qn(n)]}const t=[],o=[],a=Wu(n[0]);for(const r of n){const u=Wu(r);if(u!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(r);else{if(Nm(r)||Mm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return a||t.push({role:"user",parts:bg(o)}),t}function iS(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(a=>a!=="null");if(o.length===1)t.type=Object.values(rn).includes(o[0].toUpperCase())?o[0].toUpperCase():rn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const a of o)t.anyOf.push({type:Object.values(rn).includes(a.toUpperCase())?a.toUpperCase():rn.TYPE_UNSPECIFIED})}}function Zl(n){const t={},o=["items"],a=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,n=u[1]):u[1].type==="null"&&(t.nullable=!0,n=u[0])),n.type instanceof Array&&iS(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(rn).includes(y.toUpperCase())?y.toUpperCase():rn.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=Zl(y);else if(a.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(Zl(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=Zl(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function vd(n){return Zl(n)}function xd(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function bd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ea(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Zl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Zl(t.response));return n}function ta(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function oS(n,t,o,a=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===a;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function ho(n,t){if(typeof t!="string")throw new Error("name must be a string");return oS(n,t,"cachedContents")}function Sg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function jo(n){return hd(n)}function lS(n){return n!=null&&typeof n=="object"&&"name"in n}function aS(n){return n!=null&&typeof n=="object"&&"video"in n}function sS(n){return n!=null&&typeof n=="object"&&"uri"in n}function Tg(n){var t;let o;if(lS(n)&&(o=n.name),!(sS(n)&&(o=n.uri,o===void 0))&&!(aS(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function wg(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function Eg(n){for(const t of["models","tunedModels","publisherModels"])if(rS(n,t))return n[t];return[]}function rS(n,t){return n!==null&&typeof n=="object"&&t in n}function cS(n,t={}){const o=n,a={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(a.responseJsonSchema=o.outputSchema),t.behavior&&(a.behavior=t.behavior),{functionDeclarations:[a]}}function uS(n,t={}){const o=[],a=new Set;for(const r of n){const u=r.name;if(a.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);a.add(u);const h=cS(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function Cg(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const a=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function dS(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function _g(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let u=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){u=!0;break}}return u&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function na(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Ag(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function fS(n){const t={},o=c(n,["responsesFile"]);o!=null&&d(t,["fileName"],o);const a=c(n,["inlinedResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>$S(h))),d(t,["inlinedResponses"],u)}const r=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["inlinedEmbedContentResponses"],u)}return t}function pS(n){const t={},o=c(n,["predictionsFormat"]);o!=null&&d(t,["format"],o);const a=c(n,["gcsDestination","outputUriPrefix"]);a!=null&&d(t,["gcsUri"],a);const r=c(n,["bigqueryDestination","outputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function hS(n){const t={},o=c(n,["format"]);o!=null&&d(t,["predictionsFormat"],o);const a=c(n,["gcsUri"]);a!=null&&d(t,["gcsDestination","outputUriPrefix"],a);const r=c(n,["bigqueryUri"]);if(r!=null&&d(t,["bigqueryDestination","outputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function yr(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata","displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["metadata","state"]);r!=null&&d(t,["state"],Ag(r));const u=c(n,["metadata","createTime"]);u!=null&&d(t,["createTime"],u);const h=c(n,["metadata","endTime"]);h!=null&&d(t,["endTime"],h);const y=c(n,["metadata","updateTime"]);y!=null&&d(t,["updateTime"],y);const v=c(n,["metadata","model"]);v!=null&&d(t,["model"],v);const m=c(n,["metadata","output"]);return m!=null&&d(t,["dest"],fS(_g(m))),t}function ed(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["state"]);r!=null&&d(t,["state"],Ag(r));const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["createTime"]);h!=null&&d(t,["createTime"],h);const y=c(n,["startTime"]);y!=null&&d(t,["startTime"],y);const v=c(n,["endTime"]);v!=null&&d(t,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&d(t,["updateTime"],m);const x=c(n,["model"]);x!=null&&d(t,["model"],x);const b=c(n,["inputConfig"]);b!=null&&d(t,["src"],mS(b));const T=c(n,["outputConfig"]);T!=null&&d(t,["dest"],pS(_g(T)));const A=c(n,["completionStats"]);return A!=null&&d(t,["completionStats"],A),t}function mS(n){const t={},o=c(n,["instancesFormat"]);o!=null&&d(t,["format"],o);const a=c(n,["gcsSource","uris"]);a!=null&&d(t,["gcsUri"],a);const r=c(n,["bigquerySource","inputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function gS(n,t){const o={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=c(t,["fileName"]);a!=null&&d(o,["fileName"],a);const r=c(t,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>jS(n,h))),d(o,["requests","requests"],u)}return o}function yS(n){const t={},o=c(n,["format"]);o!=null&&d(t,["instancesFormat"],o);const a=c(n,["gcsUri"]);a!=null&&d(t,["gcsSource","uris"],a);const r=c(n,["bigqueryUri"]);if(r!=null&&d(t,["bigquerySource","inputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function vS(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function xS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function bS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function SS(n){const t={},o=c(n,["content"]);o!=null&&d(t,["content"],o);const a=c(n,["citationMetadata"]);a!=null&&d(t,["citationMetadata"],TS(a));const r=c(n,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&d(t,["finishReason"],u);const h=c(n,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&d(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&d(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&d(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),d(t,["safetyRatings"],T)}const b=c(n,["urlContextMetadata"]);return b!=null&&d(t,["urlContextMetadata"],b),t}function TS(n){const t={},o=c(n,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(t,["citations"],a)}return t}function Ng(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>WS(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function wS(n,t){const o={},a=c(n,["displayName"]);if(t!==void 0&&a!=null&&d(t,["batch","displayName"],a),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function ES(n,t){const o={},a=c(n,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const r=c(n,["dest"]);return t!==void 0&&r!=null&&d(t,["outputConfig"],hS(dS(r))),o}function Rm(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["src"]);r!=null&&d(o,["batch","inputConfig"],gS(n,Cg(n,r)));const u=c(t,["config"]);return u!=null&&wS(u,o),o}function CS(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["model"],Ot(n,a));const r=c(t,["src"]);r!=null&&d(o,["inputConfig"],yS(Cg(n,r)));const u=c(t,["config"]);return u!=null&&ES(u,o),o}function _S(n,t){const o={},a=c(n,["displayName"]);return t!==void 0&&a!=null&&d(t,["batch","displayName"],a),o}function AS(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["src"]);r!=null&&d(o,["batch","inputConfig"],DS(n,r));const u=c(t,["config"]);return u!=null&&_S(u,o),o}function NS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function MS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function RS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);return u!=null&&d(t,["error"],u),t}function kS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);return u!=null&&d(t,["error"],u),t}function IS(n,t){const o={},a=c(t,["contents"]);if(a!=null){let u=yd(n,a);Array.isArray(u)&&(u=u.map(h=>h)),d(o,["requests[]","request","content"],u)}const r=c(t,["config"]);return r!=null&&(d(o,["_self"],zS(r,o)),M1(o,{"requests[].*":"requests[].request.*"})),o}function zS(n,t){const o={},a=c(n,["taskType"]);t!==void 0&&a!=null&&d(t,["requests[]","taskType"],a);const r=c(n,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(t!==void 0&&u!=null&&d(t,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function DS(n,t){const o={},a=c(t,["fileName"]);a!=null&&d(o,["file_name"],a);const r=c(t,["inlinedRequests"]);return r!=null&&d(o,["requests"],IS(n,r)),o}function LS(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function US(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function PS(n){const t={},o=c(n,["mode"]);o!=null&&d(t,["mode"],o);const a=c(n,["allowedFunctionNames"]);if(a!=null&&d(t,["allowedFunctionNames"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function HS(n,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],Ng(qn(r)));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const h=c(t,["topP"]);h!=null&&d(a,["topP"],h);const y=c(t,["topK"]);y!=null&&d(a,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&d(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&d(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&d(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&d(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&d(a,["presencePenalty"],A);const N=c(t,["frequencyPenalty"]);N!=null&&d(a,["frequencyPenalty"],N);const V=c(t,["seed"]);V!=null&&d(a,["seed"],V);const B=c(t,["responseMimeType"]);B!=null&&d(a,["responseMimeType"],B);const Y=c(t,["responseSchema"]);Y!=null&&d(a,["responseSchema"],vd(Y));const re=c(t,["responseJsonSchema"]);if(re!=null&&d(a,["responseJsonSchema"],re),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=c(t,["safetySettings"]);if(o!==void 0&&ce!=null){let mt=ce;Array.isArray(mt)&&(mt=mt.map(Et=>eT(Et))),d(o,["safetySettings"],mt)}const Re=c(t,["tools"]);if(o!==void 0&&Re!=null){let mt=ta(Re);Array.isArray(mt)&&(mt=mt.map(Et=>nT(ea(Et)))),d(o,["tools"],mt)}const ze=c(t,["toolConfig"]);if(o!==void 0&&ze!=null&&d(o,["toolConfig"],tT(ze)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Le=c(t,["cachedContent"]);o!==void 0&&Le!=null&&d(o,["cachedContent"],ho(n,Le));const be=c(t,["responseModalities"]);be!=null&&d(a,["responseModalities"],be);const Qe=c(t,["mediaResolution"]);Qe!=null&&d(a,["mediaResolution"],Qe);const _e=c(t,["speechConfig"]);if(_e!=null&&d(a,["speechConfig"],xd(_e)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ke=c(t,["thinkingConfig"]);Ke!=null&&d(a,["thinkingConfig"],Ke);const De=c(t,["imageConfig"]);De!=null&&d(a,["imageConfig"],qS(De));const rt=c(t,["enableEnhancedCivicAnswers"]);return rt!=null&&d(a,["enableEnhancedCivicAnswers"],rt),a}function GS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(m=>SS(m))),d(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&d(t,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&d(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&d(t,["usageMetadata"],y),t}function FS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function BS(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],na(n,a)),o}function VS(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function OS(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function qS(n){const t={},o=c(n,["aspectRatio"]);o!=null&&d(t,["aspectRatio"],o);const a=c(n,["imageSize"]);if(a!=null&&d(t,["imageSize"],a),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function jS(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["request","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let y=Ei(r);Array.isArray(y)&&(y=y.map(v=>Ng(v))),d(o,["request","contents"],y)}const u=c(t,["metadata"]);u!=null&&d(o,["metadata"],u);const h=c(t,["config"]);return h!=null&&d(o,["request","generationConfig"],HS(n,h,c(o,["request"],{}))),o}function $S(n){const t={},o=c(n,["response"]);o!=null&&d(t,["response"],GS(o));const a=c(n,["error"]);return a!=null&&d(t,["error"],a),t}function YS(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);if(t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function JS(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);t!==void 0&&r!=null&&d(t,["_query","pageToken"],r);const u=c(n,["filter"]);return t!==void 0&&u!=null&&d(t,["_query","filter"],u),o}function KS(n){const t={},o=c(n,["config"]);return o!=null&&YS(o,t),t}function XS(n){const t={},o=c(n,["config"]);return o!=null&&JS(o,t),t}function QS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>yr(h))),d(t,["batchJobs"],u)}return t}function ZS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>ed(h))),d(t,["batchJobs"],u)}return t}function WS(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],LS(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],US(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],vS(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function eT(n){const t={},o=c(n,["category"]);if(o!=null&&d(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(n,["threshold"]);return a!=null&&d(t,["threshold"],a),t}function tT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&d(t,["functionCallingConfig"],PS(o));const a=c(n,["retrievalConfig"]);return a!=null&&d(t,["retrievalConfig"],a),t}function nT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],VS(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],OS(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}var fo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(fo||(fo={}));class cl{constructor(t,o,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,a,r)}init(t,o,a){var r,u;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!a||Object.keys(a).length===0?h={config:{}}:typeof a=="object"?h=Object.assign({},a):h=a,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(u=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class iT extends po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new cl(fo.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=Rm(this.apiClient,t),a=o._url,r=qe("{model}:batchGenerateContent",a),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const b=Object.assign({},x);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const A=b.request;A.systemInstruction=T,b.request=A}m.push(b)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const a=o?Object.assign({},o):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const u=this.getGcsUri(t),h=this.getBigqueryUri(t);if(u)u.endsWith(".jsonl")?a.dest=`${u.slice(0,-6)}/dest`:a.dest=`${u}_dest_${r}`;else if(h)a.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=CS(this.apiClient,t);return y=qe("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>ed(x))}else{const m=Rm(this.apiClient,t);return y=qe("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>yr(x))}}async createEmbeddingsInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=AS(this.apiClient,t);return u=qe("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>yr(v))}}async get(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=BS(this.apiClient,t);return y=qe("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>ed(x))}else{const m=FS(this.apiClient,t);return y=qe("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>yr(x))}}async cancel(t){var o,a,r,u;let h="",y={};if(this.apiClient.isVertexAI()){const v=bS(this.apiClient,t);h=qe("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const v=xS(this.apiClient,t);h=qe("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=XS(t);return y=qe("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=ZS(x),T=new _m;return Object.assign(T,b),T})}else{const m=KS(t);return y=qe("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=QS(x),T=new _m;return Object.assign(T,b),T})}}async delete(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=MS(this.apiClient,t);return y=qe("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>kS(x))}else{const m=NS(this.apiClient,t);return y=qe("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>RS(x))}}}function oT(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function km(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>AT(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function lT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const u=c(n,["displayName"]);t!==void 0&&u!=null&&d(t,["displayName"],u);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let x=Ei(h);Array.isArray(x)&&(x=x.map(b=>km(b))),d(t,["contents"],x)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&d(t,["systemInstruction"],km(qn(y)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(b=>MT(b))),d(t,["tools"],x)}const m=c(n,["toolConfig"]);if(t!==void 0&&m!=null&&d(t,["toolConfig"],NT(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function aT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const u=c(n,["displayName"]);t!==void 0&&u!=null&&d(t,["displayName"],u);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let b=Ei(h);Array.isArray(b)&&(b=b.map(T=>T)),d(t,["contents"],b)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&d(t,["systemInstruction"],qn(y));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(T=>RT(T))),d(t,["tools"],b)}const m=c(n,["toolConfig"]);t!==void 0&&m!=null&&d(t,["toolConfig"],m);const x=c(n,["kmsKeyName"]);return t!==void 0&&x!=null&&d(t,["encryption_spec","kmsKeyName"],x),o}function sT(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["model"],gg(n,a));const r=c(t,["config"]);return r!=null&&lT(r,o),o}function rT(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["model"],gg(n,a));const r=c(t,["config"]);return r!=null&&aT(r,o),o}function cT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],ho(n,a)),o}function uT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],ho(n,a)),o}function dT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function fT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function pT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function hT(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function mT(n){const t={},o=c(n,["mode"]);o!=null&&d(t,["mode"],o);const a=c(n,["allowedFunctionNames"]);if(a!=null&&d(t,["allowedFunctionNames"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function gT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&d(t,["description"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["parameters"]);r!=null&&d(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&d(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&d(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&d(t,["responseJsonSchema"],y),t}function yT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],ho(n,a)),o}function vT(n,t){const o={},a=c(t,["name"]);return a!=null&&d(o,["_url","name"],ho(n,a)),o}function xT(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function bT(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function ST(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function TT(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function wT(n){const t={},o=c(n,["config"]);return o!=null&&ST(o,t),t}function ET(n){const t={},o=c(n,["config"]);return o!=null&&TT(o,t),t}function CT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["cachedContents"],u)}return t}function _T(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["cachedContents"],u)}return t}function AT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],pT(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],hT(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],oT(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function NT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&d(t,["functionCallingConfig"],mT(o));const a=c(n,["retrievalConfig"]);return a!=null&&d(t,["retrievalConfig"],a),t}function MT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],xT(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],bT(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function RT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>gT(T))),d(t,["functionDeclarations"],b)}const a=c(n,["retrieval"]);a!=null&&d(t,["retrieval"],a);const r=c(n,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&d(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&d(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&d(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&d(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function kT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),o}function IT(n,t){const o={},a=c(n,["ttl"]);t!==void 0&&a!=null&&d(t,["ttl"],a);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),o}function zT(n,t){const o={},a=c(t,["name"]);a!=null&&d(o,["_url","name"],ho(n,a));const r=c(t,["config"]);return r!=null&&kT(r,o),o}function DT(n,t){const o={},a=c(t,["name"]);a!=null&&d(o,["_url","name"],ho(n,a));const r=c(t,["config"]);return r!=null&&IT(r,o),o}class LT extends po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new cl(fo.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(o),o)}async create(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=rT(this.apiClient,t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=sT(this.apiClient,t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=vT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=yT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=uT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=fT(x),T=new Em;return Object.assign(T,b),T})}else{const m=cT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=dT(x),T=new Em;return Object.assign(T,b),T})}}async update(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=DT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=zT(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ET(t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=_T(x),T=new Cm;return Object.assign(T,b),T})}else{const m=wT(t);return y=qe("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=CT(x),T=new Cm;return Object.assign(T,b),T})}}}function Cr(n,t){var o={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&t.indexOf(a)<0&&(o[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(n);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(n,a[r])&&(o[a[r]]=n[a[r]]);return o}function Im(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(n){return this instanceof xt?(this.v=n,this):new xt(n)}function Mi(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(A){return function(N){return Promise.resolve(N).then(A,b)}}function y(A,N){a[A]&&(r[A]=function(V){return new Promise(function(B,Y){u.push([A,V,B,Y])>1||v(A,V)})},N&&(r[A]=N(r[A])))}function v(A,N){try{m(a[A](N))}catch(V){T(u[0][3],V)}}function m(A){A.value instanceof xt?Promise.resolve(A.value.v).then(x,b):T(u[0][2],A)}function x(A){v("next",A)}function b(A){v("throw",A)}function T(A,N){A(N),u.shift(),u.length&&v(u[0][0],u[0][1])}}function Ri(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Im=="function"?Im(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(u){o[u]=n[u]&&function(h){return new Promise(function(y,v){h=n[u](h),r(y,v,h.done,h.value)})}}function r(u,h,y,v){Promise.resolve(v).then(function(m){u({value:m,done:y})},h)}}function UT(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:Mg(o)}function Mg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function PT(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function zm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let a=0;for(;a<o;)if(n[a].role==="user")t.push(n[a]),a++;else{const r=[];let u=!0;for(;a<o&&n[a].role==="model";)r.push(n[a]),u&&!Mg(n[a])&&(u=!1),a++;u?t.push(...r):t.pop()}return t}class HT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new GT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class GT{constructor(t,o,a,r={},u=[]){this.apiClient=t,this.modelsModule=o,this.model=a,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),PT(u)}async sendMessage(t){var o;await this.sendPromise;const a=qn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,h,y;const v=await r,m=(h=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];x!=null&&(T=(y=x.slice(b))!==null&&y!==void 0?y:[]);const A=m?[m]:[];this.recordHistory(a,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const a=qn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,a)}getHistory(t=!1){const o=t?zm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Mi(this,arguments,function*(){var r,u,h,y,v,m;const x=[];try{for(var b=!0,T=Ri(t),A;A=yield xt(T.next()),r=A.done,!r;b=!0){y=A.value,b=!1;const N=y;if(UT(N)){const V=(m=(v=N.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;V!==void 0&&x.push(V)}yield yield xt(N)}}catch(N){u={error:N}}finally{try{!b&&!r&&(h=T.return)&&(yield xt(h.call(T)))}finally{if(u)throw u.error}}this.recordHistory(o,x)})}recordHistory(t,o,a){let r=[];o.length>0&&o.every(u=>u.role!==void 0)?r=o:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...zm(a)):this.history.push(t),this.history.push(...r)}}class Rr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Rr.prototype)}}function FT(n){const t={},o=c(n,["file"]);return o!=null&&d(t,["file"],o),t}function BT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function VT(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","file"],Tg(o)),t}function OT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function qT(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","file"],Tg(o)),t}function jT(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function $T(n){const t={},o=c(n,["config"]);return o!=null&&jT(o,t),t}function YT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["files"],u)}return t}class JT extends po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new cl(fo.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=$T(t);return u=qe("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=YT(v),x=new Z1;return Object.assign(x,m),x})}}async createInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=FT(t);return u=qe("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=BT(v),x=new W1;return Object.assign(x,m),x})}}async get(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=qT(t);return u=qe("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=VT(t);return u=qe("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=OT(v),x=new eS;return Object.assign(x,m),x})}}}function vr(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function KT(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>dw(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function XT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function QT(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ZT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&d(t,["description"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["parameters"]);r!=null&&d(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&d(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&d(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&d(t,["responseJsonSchema"],y),t}function WT(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&d(t,["modelConfig"],o);const a=c(n,["responseJsonSchema"]);a!=null&&d(t,["responseJsonSchema"],a);const r=c(n,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&d(t,["candidateCount"],u);const h=c(n,["enableAffectiveDialog"]);h!=null&&d(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&d(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&d(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&d(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&d(t,["mediaResolution"],x);const b=c(n,["presencePenalty"]);b!=null&&d(t,["presencePenalty"],b);const T=c(n,["responseLogprobs"]);T!=null&&d(t,["responseLogprobs"],T);const A=c(n,["responseMimeType"]);A!=null&&d(t,["responseMimeType"],A);const N=c(n,["responseModalities"]);N!=null&&d(t,["responseModalities"],N);const V=c(n,["responseSchema"]);V!=null&&d(t,["responseSchema"],V);const B=c(n,["routingConfig"]);B!=null&&d(t,["routingConfig"],B);const Y=c(n,["seed"]);Y!=null&&d(t,["seed"],Y);const re=c(n,["speechConfig"]);re!=null&&d(t,["speechConfig"],re);const ce=c(n,["stopSequences"]);ce!=null&&d(t,["stopSequences"],ce);const Re=c(n,["temperature"]);Re!=null&&d(t,["temperature"],Re);const ze=c(n,["thinkingConfig"]);ze!=null&&d(t,["thinkingConfig"],ze);const Le=c(n,["topK"]);Le!=null&&d(t,["topK"],Le);const be=c(n,["topP"]);if(be!=null&&d(t,["topP"],be),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function ew(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function tw(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function nw(n,t){const o={},a=c(n,["generationConfig"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig"],a);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&d(t,["setup","generationConfig","speechConfig"],bd(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&d(t,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&d(t,["setup","systemInstruction"],KT(qn(N)));const V=c(n,["tools"]);if(t!==void 0&&V!=null){let Le=ta(V);Array.isArray(Le)&&(Le=Le.map(be=>pw(ea(be)))),d(t,["setup","tools"],Le)}const B=c(n,["sessionResumption"]);t!==void 0&&B!=null&&d(t,["setup","sessionResumption"],fw(B));const Y=c(n,["inputAudioTranscription"]);t!==void 0&&Y!=null&&d(t,["setup","inputAudioTranscription"],Y);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&d(t,["setup","outputAudioTranscription"],re);const ce=c(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&d(t,["setup","realtimeInputConfig"],ce);const Re=c(n,["contextWindowCompression"]);t!==void 0&&Re!=null&&d(t,["setup","contextWindowCompression"],Re);const ze=c(n,["proactivity"]);if(t!==void 0&&ze!=null&&d(t,["setup","proactivity"],ze),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function iw(n,t){const o={},a=c(n,["generationConfig"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig"],WT(a));const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&d(t,["setup","generationConfig","speechConfig"],bd(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&d(t,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&d(t,["setup","systemInstruction"],qn(N));const V=c(n,["tools"]);if(t!==void 0&&V!=null){let be=ta(V);Array.isArray(be)&&(be=be.map(Qe=>hw(ea(Qe)))),d(t,["setup","tools"],be)}const B=c(n,["sessionResumption"]);t!==void 0&&B!=null&&d(t,["setup","sessionResumption"],B);const Y=c(n,["inputAudioTranscription"]);t!==void 0&&Y!=null&&d(t,["setup","inputAudioTranscription"],Y);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&d(t,["setup","outputAudioTranscription"],re);const ce=c(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&d(t,["setup","realtimeInputConfig"],ce);const Re=c(n,["contextWindowCompression"]);t!==void 0&&Re!=null&&d(t,["setup","contextWindowCompression"],Re);const ze=c(n,["proactivity"]);t!==void 0&&ze!=null&&d(t,["setup","proactivity"],ze);const Le=c(n,["explicitVadSignal"]);return t!==void 0&&Le!=null&&d(t,["setup","explicitVadSignal"],Le),o}function ow(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["setup","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&d(o,["config"],nw(r,o)),o}function lw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["setup","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&d(o,["config"],iw(r,o)),o}function aw(n){const t={},o=c(n,["musicGenerationConfig"]);return o!=null&&d(t,["musicGenerationConfig"],o),t}function sw(n){const t={},o=c(n,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(t,["weightedPrompts"],a)}return t}function rw(n){const t={},o=c(n,["media"]);if(o!=null){let m=yg(o);Array.isArray(m)&&(m=m.map(x=>vr(x))),d(t,["mediaChunks"],m)}const a=c(n,["audio"]);a!=null&&d(t,["audio"],vr(xg(a)));const r=c(n,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&d(t,["video"],vr(vg(u)));const h=c(n,["text"]);h!=null&&d(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&d(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&d(t,["activityEnd"],v),t}function cw(n){const t={},o=c(n,["media"]);if(o!=null){let m=yg(o);Array.isArray(m)&&(m=m.map(x=>x)),d(t,["mediaChunks"],m)}const a=c(n,["audio"]);a!=null&&d(t,["audio"],xg(a));const r=c(n,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&d(t,["video"],vg(u));const h=c(n,["text"]);h!=null&&d(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&d(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&d(t,["activityEnd"],v),t}function uw(n){const t={},o=c(n,["setupComplete"]);o!=null&&d(t,["setupComplete"],o);const a=c(n,["serverContent"]);a!=null&&d(t,["serverContent"],a);const r=c(n,["toolCall"]);r!=null&&d(t,["toolCall"],r);const u=c(n,["toolCallCancellation"]);u!=null&&d(t,["toolCallCancellation"],u);const h=c(n,["usageMetadata"]);h!=null&&d(t,["usageMetadata"],mw(h));const y=c(n,["goAway"]);y!=null&&d(t,["goAway"],y);const v=c(n,["sessionResumptionUpdate"]);v!=null&&d(t,["sessionResumptionUpdate"],v);const m=c(n,["voiceActivityDetectionSignal"]);return m!=null&&d(t,["voiceActivityDetectionSignal"],m),t}function dw(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],XT(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],QT(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],vr(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function fw(n){const t={},o=c(n,["handle"]);if(o!=null&&d(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function pw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],ew(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],tw(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function hw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>ZT(T))),d(t,["functionDeclarations"],b)}const a=c(n,["retrieval"]);a!=null&&d(t,["retrieval"],a);const r=c(n,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&d(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&d(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&d(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&d(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function mw(n){const t={},o=c(n,["promptTokenCount"]);o!=null&&d(t,["promptTokenCount"],o);const a=c(n,["cachedContentTokenCount"]);a!=null&&d(t,["cachedContentTokenCount"],a);const r=c(n,["candidatesTokenCount"]);r!=null&&d(t,["responseTokenCount"],r);const u=c(n,["toolUsePromptTokenCount"]);u!=null&&d(t,["toolUsePromptTokenCount"],u);const h=c(n,["thoughtsTokenCount"]);h!=null&&d(t,["thoughtsTokenCount"],h);const y=c(n,["totalTokenCount"]);y!=null&&d(t,["totalTokenCount"],y);const v=c(n,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["promptTokensDetails"],A)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["cacheTokensDetails"],A)}const x=c(n,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["responseTokensDetails"],A)}const b=c(n,["toolUsePromptTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(N=>N)),d(t,["toolUsePromptTokensDetails"],A)}const T=c(n,["trafficType"]);return T!=null&&d(t,["trafficType"],T),t}function gw(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function yw(n){const t={},o=c(n,["content"]);o!=null&&d(t,["content"],o);const a=c(n,["citationMetadata"]);a!=null&&d(t,["citationMetadata"],vw(a));const r=c(n,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&d(t,["finishReason"],u);const h=c(n,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&d(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&d(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&d(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),d(t,["safetyRatings"],T)}const b=c(n,["urlContextMetadata"]);return b!=null&&d(t,["urlContextMetadata"],b),t}function vw(n){const t={},o=c(n,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(t,["citations"],a)}return t}function xw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let u=Ei(r);Array.isArray(u)&&(u=u.map(h=>h)),d(o,["contents"],u)}return o}function bw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),d(t,["tokensInfo"],r)}return t}function Sw(n){const t={},o=c(n,["values"]);o!=null&&d(t,["values"],o);const a=c(n,["statistics"]);return a!=null&&d(t,["statistics"],Tw(a)),t}function Tw(n){const t={},o=c(n,["truncated"]);o!=null&&d(t,["truncated"],o);const a=c(n,["token_count"]);return a!=null&&d(t,["tokenCount"],a),t}function kr(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>kE(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function ww(n){const t={},o=c(n,["controlType"]);o!=null&&d(t,["controlType"],o);const a=c(n,["enableControlImageComputation"]);return a!=null&&d(t,["computeControl"],a),t}function Ew(n){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Cw(n,t){const o={},a=c(n,["systemInstruction"]);t!==void 0&&a!=null&&d(t,["systemInstruction"],qn(a));const r=c(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>zg(y))),d(t,["tools"],h)}const u=c(n,["generationConfig"]);return t!==void 0&&u!=null&&d(t,["generationConfig"],gE(u)),o}function _w(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ei(r);Array.isArray(h)&&(h=h.map(y=>kr(y))),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&Ew(u),o}function Aw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ei(r);Array.isArray(h)&&(h=h.map(y=>y)),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&Cw(u,o),o}function Nw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["totalTokens"]);a!=null&&d(t,["totalTokens"],a);const r=c(n,["cachedContentTokenCount"]);return r!=null&&d(t,["cachedContentTokenCount"],r),t}function Mw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["totalTokens"]);return a!=null&&d(t,["totalTokens"],a),t}function Rw(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function kw(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function Iw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function zw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function Dw(n,t){const o={},a=c(n,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const u=c(n,["numberOfImages"]);t!==void 0&&u!=null&&d(t,["parameters","sampleCount"],u);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&d(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&d(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&d(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const b=c(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&d(t,["parameters","includeSafetyAttributes"],b);const T=c(n,["includeRaiReason"]);t!==void 0&&T!=null&&d(t,["parameters","includeRaiReason"],T);const A=c(n,["language"]);t!==void 0&&A!=null&&d(t,["parameters","language"],A);const N=c(n,["outputMimeType"]);t!==void 0&&N!=null&&d(t,["parameters","outputOptions","mimeType"],N);const V=c(n,["outputCompressionQuality"]);t!==void 0&&V!=null&&d(t,["parameters","outputOptions","compressionQuality"],V);const B=c(n,["addWatermark"]);t!==void 0&&B!=null&&d(t,["parameters","addWatermark"],B);const Y=c(n,["labels"]);t!==void 0&&Y!=null&&d(t,["labels"],Y);const re=c(n,["editMode"]);t!==void 0&&re!=null&&d(t,["parameters","editMode"],re);const ce=c(n,["baseSteps"]);return t!==void 0&&ce!=null&&d(t,["parameters","editConfig","baseSteps"],ce),o}function Lw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["referenceImages"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>PE(v))),d(o,["instances[0]","referenceImages"],y)}const h=c(t,["config"]);return h!=null&&Dw(h,o),o}function Uw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Ir(u))),d(t,["generatedImages"],r)}return t}function Pw(n,t){const o={},a=c(n,["taskType"]);t!==void 0&&a!=null&&d(t,["requests[]","taskType"],a);const r=c(n,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(t!==void 0&&u!=null&&d(t,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Hw(n,t){const o={},a=c(n,["taskType"]);t!==void 0&&a!=null&&d(t,["instances[]","task_type"],a);const r=c(n,["title"]);t!==void 0&&r!=null&&d(t,["instances[]","title"],r);const u=c(n,["outputDimensionality"]);t!==void 0&&u!=null&&d(t,["parameters","outputDimensionality"],u);const h=c(n,["mimeType"]);t!==void 0&&h!=null&&d(t,["instances[]","mimeType"],h);const y=c(n,["autoTruncate"]);return t!==void 0&&y!=null&&d(t,["parameters","autoTruncate"],y),o}function Gw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let y=yd(n,r);Array.isArray(y)&&(y=y.map(v=>v)),d(o,["requests[]","content"],y)}const u=c(t,["config"]);u!=null&&Pw(u,o);const h=c(t,["model"]);return h!==void 0&&d(o,["requests[]","model"],Ot(n,h)),o}function Fw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=yd(n,r);Array.isArray(h)&&(h=h.map(y=>y)),d(o,["instances[]","content"],h)}const u=c(t,["config"]);return u!=null&&Hw(u,o),o}function Bw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["embeddings"],u)}const r=c(n,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function Vw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions[]","embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>Sw(h))),d(t,["embeddings"],u)}const r=c(n,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function Ow(n){const t={},o=c(n,["endpoint"]);o!=null&&d(t,["name"],o);const a=c(n,["deployedModelId"]);return a!=null&&d(t,["deployedModelId"],a),t}function qw(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function jw(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function $w(n){const t={},o=c(n,["mode"]);o!=null&&d(t,["mode"],o);const a=c(n,["allowedFunctionNames"]);if(a!=null&&d(t,["allowedFunctionNames"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Yw(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&d(t,["description"],o);const a=c(n,["name"]);a!=null&&d(t,["name"],a);const r=c(n,["parameters"]);r!=null&&d(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&d(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&d(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&d(t,["responseJsonSchema"],y),t}function Jw(n,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],kr(qn(r)));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const h=c(t,["topP"]);h!=null&&d(a,["topP"],h);const y=c(t,["topK"]);y!=null&&d(a,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&d(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&d(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&d(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&d(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&d(a,["presencePenalty"],A);const N=c(t,["frequencyPenalty"]);N!=null&&d(a,["frequencyPenalty"],N);const V=c(t,["seed"]);V!=null&&d(a,["seed"],V);const B=c(t,["responseMimeType"]);B!=null&&d(a,["responseMimeType"],B);const Y=c(t,["responseSchema"]);Y!=null&&d(a,["responseSchema"],vd(Y));const re=c(t,["responseJsonSchema"]);if(re!=null&&d(a,["responseJsonSchema"],re),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=c(t,["safetySettings"]);if(o!==void 0&&ce!=null){let mt=ce;Array.isArray(mt)&&(mt=mt.map(Et=>HE(Et))),d(o,["safetySettings"],mt)}const Re=c(t,["tools"]);if(o!==void 0&&Re!=null){let mt=ta(Re);Array.isArray(mt)&&(mt=mt.map(Et=>jE(ea(Et)))),d(o,["tools"],mt)}const ze=c(t,["toolConfig"]);if(o!==void 0&&ze!=null&&d(o,["toolConfig"],qE(ze)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Le=c(t,["cachedContent"]);o!==void 0&&Le!=null&&d(o,["cachedContent"],ho(n,Le));const be=c(t,["responseModalities"]);be!=null&&d(a,["responseModalities"],be);const Qe=c(t,["mediaResolution"]);Qe!=null&&d(a,["mediaResolution"],Qe);const _e=c(t,["speechConfig"]);if(_e!=null&&d(a,["speechConfig"],xd(_e)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ke=c(t,["thinkingConfig"]);Ke!=null&&d(a,["thinkingConfig"],Ke);const De=c(t,["imageConfig"]);De!=null&&d(a,["imageConfig"],SE(De));const rt=c(t,["enableEnhancedCivicAnswers"]);return rt!=null&&d(a,["enableEnhancedCivicAnswers"],rt),a}function Kw(n,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],qn(r));const u=c(t,["temperature"]);u!=null&&d(a,["temperature"],u);const h=c(t,["topP"]);h!=null&&d(a,["topP"],h);const y=c(t,["topK"]);y!=null&&d(a,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&d(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&d(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&d(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&d(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&d(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&d(a,["presencePenalty"],A);const N=c(t,["frequencyPenalty"]);N!=null&&d(a,["frequencyPenalty"],N);const V=c(t,["seed"]);V!=null&&d(a,["seed"],V);const B=c(t,["responseMimeType"]);B!=null&&d(a,["responseMimeType"],B);const Y=c(t,["responseSchema"]);Y!=null&&d(a,["responseSchema"],vd(Y));const re=c(t,["responseJsonSchema"]);re!=null&&d(a,["responseJsonSchema"],re);const ce=c(t,["routingConfig"]);ce!=null&&d(a,["routingConfig"],ce);const Re=c(t,["modelSelectionConfig"]);Re!=null&&d(a,["modelConfig"],Re);const ze=c(t,["safetySettings"]);if(o!==void 0&&ze!=null){let F=ze;Array.isArray(F)&&(F=F.map(Te=>Te)),d(o,["safetySettings"],F)}const Le=c(t,["tools"]);if(o!==void 0&&Le!=null){let F=ta(Le);Array.isArray(F)&&(F=F.map(Te=>zg(ea(Te)))),d(o,["tools"],F)}const be=c(t,["toolConfig"]);o!==void 0&&be!=null&&d(o,["toolConfig"],be);const Qe=c(t,["labels"]);o!==void 0&&Qe!=null&&d(o,["labels"],Qe);const _e=c(t,["cachedContent"]);o!==void 0&&_e!=null&&d(o,["cachedContent"],ho(n,_e));const Ke=c(t,["responseModalities"]);Ke!=null&&d(a,["responseModalities"],Ke);const De=c(t,["mediaResolution"]);De!=null&&d(a,["mediaResolution"],De);const rt=c(t,["speechConfig"]);rt!=null&&d(a,["speechConfig"],xd(rt));const mt=c(t,["audioTimestamp"]);mt!=null&&d(a,["audioTimestamp"],mt);const Et=c(t,["thinkingConfig"]);Et!=null&&d(a,["thinkingConfig"],Et);const wt=c(t,["imageConfig"]);if(wt!=null&&d(a,["imageConfig"],TE(wt)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return a}function Dm(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ei(r);Array.isArray(h)&&(h=h.map(y=>kr(y))),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&d(o,["generationConfig"],Jw(n,u,o)),o}function Lm(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["contents"]);if(r!=null){let h=Ei(r);Array.isArray(h)&&(h=h.map(y=>y)),d(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&d(o,["generationConfig"],Kw(n,u,o)),o}function Um(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(m=>yw(m))),d(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&d(t,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&d(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&d(t,["usageMetadata"],y),t}function Pm(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(x=>x)),d(t,["candidates"],m)}const r=c(n,["createTime"]);r!=null&&d(t,["createTime"],r);const u=c(n,["modelVersion"]);u!=null&&d(t,["modelVersion"],u);const h=c(n,["promptFeedback"]);h!=null&&d(t,["promptFeedback"],h);const y=c(n,["responseId"]);y!=null&&d(t,["responseId"],y);const v=c(n,["usageMetadata"]);return v!=null&&d(t,["usageMetadata"],v),t}function Xw(n,t){const o={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(n,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const r=c(n,["aspectRatio"]);t!==void 0&&r!=null&&d(t,["parameters","aspectRatio"],r);const u=c(n,["guidanceScale"]);if(t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=c(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&d(t,["parameters","safetySetting"],h);const y=c(n,["personGeneration"]);t!==void 0&&y!=null&&d(t,["parameters","personGeneration"],y);const v=c(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&d(t,["parameters","includeSafetyAttributes"],v);const m=c(n,["includeRaiReason"]);t!==void 0&&m!=null&&d(t,["parameters","includeRaiReason"],m);const x=c(n,["language"]);t!==void 0&&x!=null&&d(t,["parameters","language"],x);const b=c(n,["outputMimeType"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","mimeType"],b);const T=c(n,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&d(t,["parameters","outputOptions","compressionQuality"],T),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(n,["imageSize"]);if(t!==void 0&&A!=null&&d(t,["parameters","sampleImageSize"],A),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Qw(n,t){const o={},a=c(n,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&d(t,["parameters","negativePrompt"],r);const u=c(n,["numberOfImages"]);t!==void 0&&u!=null&&d(t,["parameters","sampleCount"],u);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&d(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&d(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&d(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const b=c(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&d(t,["parameters","includeSafetyAttributes"],b);const T=c(n,["includeRaiReason"]);t!==void 0&&T!=null&&d(t,["parameters","includeRaiReason"],T);const A=c(n,["language"]);t!==void 0&&A!=null&&d(t,["parameters","language"],A);const N=c(n,["outputMimeType"]);t!==void 0&&N!=null&&d(t,["parameters","outputOptions","mimeType"],N);const V=c(n,["outputCompressionQuality"]);t!==void 0&&V!=null&&d(t,["parameters","outputOptions","compressionQuality"],V);const B=c(n,["addWatermark"]);t!==void 0&&B!=null&&d(t,["parameters","addWatermark"],B);const Y=c(n,["labels"]);t!==void 0&&Y!=null&&d(t,["labels"],Y);const re=c(n,["imageSize"]);t!==void 0&&re!=null&&d(t,["parameters","sampleImageSize"],re);const ce=c(n,["enhancePrompt"]);return t!==void 0&&ce!=null&&d(t,["parameters","enhancePrompt"],ce),o}function Zw(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&Xw(u,o),o}function Ww(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&Qw(u,o),o}function eE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>fE(h))),d(t,["generatedImages"],u)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],kg(r)),t}function tE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>Ir(h))),d(t,["generatedImages"],u)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],Ig(r)),t}function nE(n,t){const o={},a=c(n,["numberOfVideos"]);if(t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(n,["durationSeconds"]);if(t!==void 0&&r!=null&&d(t,["parameters","durationSeconds"],r),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(n,["aspectRatio"]);t!==void 0&&u!=null&&d(t,["parameters","aspectRatio"],u);const h=c(n,["resolution"]);t!==void 0&&h!=null&&d(t,["parameters","resolution"],h);const y=c(n,["personGeneration"]);if(t!==void 0&&y!=null&&d(t,["parameters","personGeneration"],y),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(n,["negativePrompt"]);t!==void 0&&v!=null&&d(t,["parameters","negativePrompt"],v);const m=c(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&d(t,["parameters","enhancePrompt"],m),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=c(n,["lastFrame"]);t!==void 0&&x!=null&&d(t,["instances[0]","lastFrame"],zr(x));const b=c(n,["referenceImages"]);if(t!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(A=>oC(A))),d(t,["instances[0]","referenceImages"],T)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function iE(n,t){const o={},a=c(n,["numberOfVideos"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const r=c(n,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const u=c(n,["fps"]);t!==void 0&&u!=null&&d(t,["parameters","fps"],u);const h=c(n,["durationSeconds"]);t!==void 0&&h!=null&&d(t,["parameters","durationSeconds"],h);const y=c(n,["seed"]);t!==void 0&&y!=null&&d(t,["parameters","seed"],y);const v=c(n,["aspectRatio"]);t!==void 0&&v!=null&&d(t,["parameters","aspectRatio"],v);const m=c(n,["resolution"]);t!==void 0&&m!=null&&d(t,["parameters","resolution"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&d(t,["parameters","personGeneration"],x);const b=c(n,["pubsubTopic"]);t!==void 0&&b!=null&&d(t,["parameters","pubsubTopic"],b);const T=c(n,["negativePrompt"]);t!==void 0&&T!=null&&d(t,["parameters","negativePrompt"],T);const A=c(n,["enhancePrompt"]);t!==void 0&&A!=null&&d(t,["parameters","enhancePrompt"],A);const N=c(n,["generateAudio"]);t!==void 0&&N!=null&&d(t,["parameters","generateAudio"],N);const V=c(n,["lastFrame"]);t!==void 0&&V!=null&&d(t,["instances[0]","lastFrame"],ki(V));const B=c(n,["referenceImages"]);if(t!==void 0&&B!=null){let ce=B;Array.isArray(ce)&&(ce=ce.map(Re=>lC(Re))),d(t,["instances[0]","referenceImages"],ce)}const Y=c(n,["mask"]);t!==void 0&&Y!=null&&d(t,["instances[0]","mask"],iC(Y));const re=c(n,["compressionQuality"]);return t!==void 0&&re!=null&&d(t,["parameters","compressionQuality"],re),o}function oE(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],rE(h)),t}function lE(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],cE(h)),t}function aE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&d(o,["instances[0]","image"],zr(u));const h=c(t,["video"]);h!=null&&d(o,["instances[0]","video"],Dg(h));const y=c(t,["source"]);y!=null&&uE(y,o);const v=c(t,["config"]);return v!=null&&nE(v,o),o}function sE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&d(o,["instances[0]","image"],ki(u));const h=c(t,["video"]);h!=null&&d(o,["instances[0]","video"],Lg(h));const y=c(t,["source"]);y!=null&&dE(y,o);const v=c(t,["config"]);return v!=null&&iE(v,o),o}function rE(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>hE(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function cE(n){const t={},o=c(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>mE(h))),d(t,["generatedVideos"],u)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&d(t,["raiMediaFilteredCount"],a);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function uE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],zr(r));const u=c(n,["video"]);return t!==void 0&&u!=null&&d(t,["instances[0]","video"],Dg(u)),o}function dE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],ki(r));const u=c(n,["video"]);return t!==void 0&&u!=null&&d(t,["instances[0]","video"],Lg(u)),o}function fE(n){const t={},o=c(n,["_self"]);o!=null&&d(t,["image"],wE(o));const a=c(n,["raiFilteredReason"]);a!=null&&d(t,["raiFilteredReason"],a);const r=c(n,["_self"]);return r!=null&&d(t,["safetyAttributes"],kg(r)),t}function Ir(n){const t={},o=c(n,["_self"]);o!=null&&d(t,["image"],Rg(o));const a=c(n,["raiFilteredReason"]);a!=null&&d(t,["raiFilteredReason"],a);const r=c(n,["_self"]);r!=null&&d(t,["safetyAttributes"],Ig(r));const u=c(n,["prompt"]);return u!=null&&d(t,["enhancedPrompt"],u),t}function pE(n){const t={},o=c(n,["_self"]);o!=null&&d(t,["mask"],Rg(o));const a=c(n,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),d(t,["labels"],r)}return t}function hE(n){const t={},o=c(n,["video"]);return o!=null&&d(t,["video"],tC(o)),t}function mE(n){const t={},o=c(n,["_self"]);return o!=null&&d(t,["video"],nC(o)),t}function gE(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&d(t,["modelConfig"],o);const a=c(n,["responseJsonSchema"]);a!=null&&d(t,["responseJsonSchema"],a);const r=c(n,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&d(t,["candidateCount"],u);const h=c(n,["enableAffectiveDialog"]);h!=null&&d(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&d(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&d(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&d(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&d(t,["mediaResolution"],x);const b=c(n,["presencePenalty"]);b!=null&&d(t,["presencePenalty"],b);const T=c(n,["responseLogprobs"]);T!=null&&d(t,["responseLogprobs"],T);const A=c(n,["responseMimeType"]);A!=null&&d(t,["responseMimeType"],A);const N=c(n,["responseModalities"]);N!=null&&d(t,["responseModalities"],N);const V=c(n,["responseSchema"]);V!=null&&d(t,["responseSchema"],V);const B=c(n,["routingConfig"]);B!=null&&d(t,["routingConfig"],B);const Y=c(n,["seed"]);Y!=null&&d(t,["seed"],Y);const re=c(n,["speechConfig"]);re!=null&&d(t,["speechConfig"],re);const ce=c(n,["stopSequences"]);ce!=null&&d(t,["stopSequences"],ce);const Re=c(n,["temperature"]);Re!=null&&d(t,["temperature"],Re);const ze=c(n,["thinkingConfig"]);ze!=null&&d(t,["thinkingConfig"],ze);const Le=c(n,["topK"]);Le!=null&&d(t,["topK"],Le);const be=c(n,["topP"]);if(be!=null&&d(t,["topP"],be),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function yE(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function vE(n,t){const o={},a=c(t,["model"]);return a!=null&&d(o,["_url","name"],Ot(n,a)),o}function xE(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function bE(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function SE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&d(t,["aspectRatio"],o);const a=c(n,["imageSize"]);if(a!=null&&d(t,["imageSize"],a),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function TE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&d(t,["aspectRatio"],o);const a=c(n,["imageSize"]);a!=null&&d(t,["imageSize"],a);const r=c(n,["outputMimeType"]);r!=null&&d(t,["imageOutputOptions","mimeType"],r);const u=c(n,["outputCompressionQuality"]);return u!=null&&d(t,["imageOutputOptions","compressionQuality"],u),t}function wE(n){const t={},o=c(n,["bytesBase64Encoded"]);o!=null&&d(t,["imageBytes"],jo(o));const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function Rg(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["gcsUri"],o);const a=c(n,["bytesBase64Encoded"]);a!=null&&d(t,["imageBytes"],jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function zr(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(n,["imageBytes"]);o!=null&&d(t,["bytesBase64Encoded"],jo(o));const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function ki(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["gcsUri"],o);const a=c(n,["imageBytes"]);a!=null&&d(t,["bytesBase64Encoded"],jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function EE(n,t,o){const a={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&d(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&d(o,["_query","pageToken"],u);const h=c(t,["filter"]);o!==void 0&&h!=null&&d(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&d(o,["_url","models_url"],wg(n,y)),a}function CE(n,t,o){const a={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&d(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&d(o,["_query","pageToken"],u);const h=c(t,["filter"]);o!==void 0&&h!=null&&d(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&d(o,["_url","models_url"],wg(n,y)),a}function _E(n,t){const o={},a=c(t,["config"]);return a!=null&&EE(n,a,o),o}function AE(n,t){const o={},a=c(t,["config"]);return a!=null&&CE(n,a,o),o}function NE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["_self"]);if(r!=null){let u=Eg(r);Array.isArray(u)&&(u=u.map(h=>td(h))),d(t,["models"],u)}return t}function ME(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["_self"]);if(r!=null){let u=Eg(r);Array.isArray(u)&&(u=u.map(h=>nd(h))),d(t,["models"],u)}return t}function RE(n){const t={},o=c(n,["maskMode"]);o!=null&&d(t,["maskMode"],o);const a=c(n,["segmentationClasses"]);a!=null&&d(t,["maskClasses"],a);const r=c(n,["maskDilation"]);return r!=null&&d(t,["dilation"],r),t}function td(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);r!=null&&d(t,["description"],r);const u=c(n,["version"]);u!=null&&d(t,["version"],u);const h=c(n,["_self"]);h!=null&&d(t,["tunedModelInfo"],$E(h));const y=c(n,["inputTokenLimit"]);y!=null&&d(t,["inputTokenLimit"],y);const v=c(n,["outputTokenLimit"]);v!=null&&d(t,["outputTokenLimit"],v);const m=c(n,["supportedGenerationMethods"]);m!=null&&d(t,["supportedActions"],m);const x=c(n,["temperature"]);x!=null&&d(t,["temperature"],x);const b=c(n,["maxTemperature"]);b!=null&&d(t,["maxTemperature"],b);const T=c(n,["topP"]);T!=null&&d(t,["topP"],T);const A=c(n,["topK"]);A!=null&&d(t,["topK"],A);const N=c(n,["thinking"]);return N!=null&&d(t,["thinking"],N),t}function nd(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["displayName"]);a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);r!=null&&d(t,["description"],r);const u=c(n,["versionId"]);u!=null&&d(t,["version"],u);const h=c(n,["deployedModels"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(T=>Ow(T))),d(t,["endpoints"],b)}const y=c(n,["labels"]);y!=null&&d(t,["labels"],y);const v=c(n,["_self"]);v!=null&&d(t,["tunedModelInfo"],YE(v));const m=c(n,["defaultCheckpointId"]);m!=null&&d(t,["defaultCheckpointId"],m);const x=c(n,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(T=>T)),d(t,["checkpoints"],b)}return t}function kE(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],qw(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],jw(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],gw(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function IE(n){const t={},o=c(n,["productImage"]);return o!=null&&d(t,["image"],ki(o)),t}function zE(n,t){const o={},a=c(n,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const r=c(n,["baseSteps"]);t!==void 0&&r!=null&&d(t,["parameters","baseSteps"],r);const u=c(n,["outputGcsUri"]);t!==void 0&&u!=null&&d(t,["parameters","storageUri"],u);const h=c(n,["seed"]);t!==void 0&&h!=null&&d(t,["parameters","seed"],h);const y=c(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&d(t,["parameters","safetySetting"],y);const v=c(n,["personGeneration"]);t!==void 0&&v!=null&&d(t,["parameters","personGeneration"],v);const m=c(n,["addWatermark"]);t!==void 0&&m!=null&&d(t,["parameters","addWatermark"],m);const x=c(n,["outputMimeType"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","mimeType"],x);const b=c(n,["outputCompressionQuality"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","compressionQuality"],b);const T=c(n,["enhancePrompt"]);t!==void 0&&T!=null&&d(t,["parameters","enhancePrompt"],T);const A=c(n,["labels"]);return t!==void 0&&A!=null&&d(t,["labels"],A),o}function DE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["source"]);r!=null&&UE(r,o);const u=c(t,["config"]);return u!=null&&zE(u,o),o}function LE(n){const t={},o=c(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>Ir(r))),d(t,["generatedImages"],a)}return t}function UE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["personImage"]);t!==void 0&&r!=null&&d(t,["instances[0]","personImage","image"],ki(r));const u=c(n,["productImages"]);if(t!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>IE(y))),d(t,["instances[0]","productImages"],h)}return o}function PE(n){const t={},o=c(n,["referenceImage"]);o!=null&&d(t,["referenceImage"],ki(o));const a=c(n,["referenceId"]);a!=null&&d(t,["referenceId"],a);const r=c(n,["referenceType"]);r!=null&&d(t,["referenceType"],r);const u=c(n,["maskImageConfig"]);u!=null&&d(t,["maskImageConfig"],RE(u));const h=c(n,["controlImageConfig"]);h!=null&&d(t,["controlImageConfig"],ww(h));const y=c(n,["styleImageConfig"]);y!=null&&d(t,["styleImageConfig"],y);const v=c(n,["subjectImageConfig"]);return v!=null&&d(t,["subjectImageConfig"],v),t}function kg(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&d(t,["categories"],o);const a=c(n,["safetyAttributes","scores"]);a!=null&&d(t,["scores"],a);const r=c(n,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function Ig(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&d(t,["categories"],o);const a=c(n,["safetyAttributes","scores"]);a!=null&&d(t,["scores"],a);const r=c(n,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function HE(n){const t={},o=c(n,["category"]);if(o!=null&&d(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(n,["threshold"]);return a!=null&&d(t,["threshold"],a),t}function GE(n){const t={},o=c(n,["image"]);return o!=null&&d(t,["image"],ki(o)),t}function FE(n,t){const o={},a=c(n,["mode"]);t!==void 0&&a!=null&&d(t,["parameters","mode"],a);const r=c(n,["maxPredictions"]);t!==void 0&&r!=null&&d(t,["parameters","maxPredictions"],r);const u=c(n,["confidenceThreshold"]);t!==void 0&&u!=null&&d(t,["parameters","confidenceThreshold"],u);const h=c(n,["maskDilation"]);t!==void 0&&h!=null&&d(t,["parameters","maskDilation"],h);const y=c(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&d(t,["parameters","binaryColorThreshold"],y);const v=c(n,["labels"]);return t!==void 0&&v!=null&&d(t,["labels"],v),o}function BE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["source"]);r!=null&&OE(r,o);const u=c(t,["config"]);return u!=null&&FE(u,o),o}function VE(n){const t={},o=c(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>pE(r))),d(t,["generatedMasks"],a)}return t}function OE(n,t){const o={},a=c(n,["prompt"]);t!==void 0&&a!=null&&d(t,["instances[0]","prompt"],a);const r=c(n,["image"]);t!==void 0&&r!=null&&d(t,["instances[0]","image"],ki(r));const u=c(n,["scribbleImage"]);return t!==void 0&&u!=null&&d(t,["instances[0]","scribble"],GE(u)),o}function qE(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&d(t,["functionCallingConfig"],$w(o));const a=c(n,["retrievalConfig"]);return a!=null&&d(t,["retrievalConfig"],a),t}function jE(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],xE(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],bE(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function zg(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>Yw(T))),d(t,["functionDeclarations"],b)}const a=c(n,["retrieval"]);a!=null&&d(t,["retrieval"],a);const r=c(n,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&d(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&d(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&d(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&d(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&d(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&d(t,["urlContext"],x),t}function $E(n){const t={},o=c(n,["baseModel"]);o!=null&&d(t,["baseModel"],o);const a=c(n,["createTime"]);a!=null&&d(t,["createTime"],a);const r=c(n,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function YE(n){const t={},o=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(t,["baseModel"],o);const a=c(n,["createTime"]);a!=null&&d(t,["createTime"],a);const r=c(n,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function JE(n,t){const o={},a=c(n,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const u=c(n,["defaultCheckpointId"]);return t!==void 0&&u!=null&&d(t,["defaultCheckpointId"],u),o}function KE(n,t){const o={},a=c(n,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const r=c(n,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);const u=c(n,["defaultCheckpointId"]);return t!==void 0&&u!=null&&d(t,["defaultCheckpointId"],u),o}function XE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","name"],Ot(n,a));const r=c(t,["config"]);return r!=null&&JE(r,o),o}function QE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&KE(r,o),o}function ZE(n,t){const o={},a=c(n,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const r=c(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&d(t,["parameters","safetySetting"],r);const u=c(n,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const h=c(n,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const y=c(n,["outputMimeType"]);t!==void 0&&y!=null&&d(t,["parameters","outputOptions","mimeType"],y);const v=c(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&d(t,["parameters","outputOptions","compressionQuality"],v);const m=c(n,["enhanceInputImage"]);t!==void 0&&m!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=c(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const b=c(n,["labels"]);t!==void 0&&b!=null&&d(t,["labels"],b);const T=c(n,["numberOfImages"]);t!==void 0&&T!=null&&d(t,["parameters","sampleCount"],T);const A=c(n,["mode"]);return t!==void 0&&A!=null&&d(t,["parameters","mode"],A),o}function WE(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["_url","model"],Ot(n,a));const r=c(t,["image"]);r!=null&&d(o,["instances[0]","image"],ki(r));const u=c(t,["upscaleFactor"]);u!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],u);const h=c(t,["config"]);return h!=null&&ZE(h,o),o}function eC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Ir(u))),d(t,["generatedImages"],r)}return t}function tC(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["uri"],o);const a=c(n,["encodedVideo"]);a!=null&&d(t,["videoBytes"],jo(a));const r=c(n,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function nC(n){const t={},o=c(n,["gcsUri"]);o!=null&&d(t,["uri"],o);const a=c(n,["bytesBase64Encoded"]);a!=null&&d(t,["videoBytes"],jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function iC(n){const t={},o=c(n,["image"]);o!=null&&d(t,["_self"],ki(o));const a=c(n,["maskMode"]);return a!=null&&d(t,["maskMode"],a),t}function oC(n){const t={},o=c(n,["image"]);o!=null&&d(t,["image"],zr(o));const a=c(n,["referenceType"]);return a!=null&&d(t,["referenceType"],a),t}function lC(n){const t={},o=c(n,["image"]);o!=null&&d(t,["image"],ki(o));const a=c(n,["referenceType"]);return a!=null&&d(t,["referenceType"],a),t}function Dg(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["uri"],o);const a=c(n,["videoBytes"]);a!=null&&d(t,["encodedVideo"],jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["encoding"],r),t}function Lg(n){const t={},o=c(n,["uri"]);o!=null&&d(t,["gcsUri"],o);const a=c(n,["videoBytes"]);a!=null&&d(t,["bytesBase64Encoded"],jo(a));const r=c(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function aC(n,t){const o={},a=c(n,["displayName"]);return t!==void 0&&a!=null&&d(t,["displayName"],a),o}function sC(n){const t={},o=c(n,["config"]);return o!=null&&aC(o,t),t}function rC(n,t){const o={},a=c(n,["force"]);return t!==void 0&&a!=null&&d(t,["_query","force"],a),o}function cC(n){const t={},o=c(n,["name"]);o!=null&&d(t,["_url","name"],o);const a=c(n,["config"]);return a!=null&&rC(a,t),t}function uC(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function dC(n,t){const o={},a=c(n,["customMetadata"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["customMetadata"],u)}const r=c(n,["chunkingConfig"]);return t!==void 0&&r!=null&&d(t,["chunkingConfig"],r),o}function fC(n){const t={},o=c(n,["name"]);o!=null&&d(t,["name"],o);const a=c(n,["metadata"]);a!=null&&d(t,["metadata"],a);const r=c(n,["done"]);r!=null&&d(t,["done"],r);const u=c(n,["error"]);u!=null&&d(t,["error"],u);const h=c(n,["response"]);return h!=null&&d(t,["response"],hC(h)),t}function pC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&d(t,["_url","file_search_store_name"],o);const a=c(n,["fileName"]);a!=null&&d(t,["fileName"],a);const r=c(n,["config"]);return r!=null&&dC(r,t),t}function hC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["parent"]);a!=null&&d(t,["parent"],a);const r=c(n,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function mC(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function gC(n){const t={},o=c(n,["config"]);return o!=null&&mC(o,t),t}function yC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["fileSearchStores"],u)}return t}function Ug(n,t){const o={},a=c(n,["mimeType"]);t!==void 0&&a!=null&&d(t,["mimeType"],a);const r=c(n,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const u=c(n,["customMetadata"]);if(t!==void 0&&u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>v)),d(t,["customMetadata"],y)}const h=c(n,["chunkingConfig"]);return t!==void 0&&h!=null&&d(t,["chunkingConfig"],h),o}function vC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&d(t,["_url","file_search_store_name"],o);const a=c(n,["config"]);return a!=null&&Ug(a,t),t}function xC(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}const bC="Content-Type",SC="X-Server-Timeout",TC="User-Agent",id="x-goog-api-client",wC="1.34.0",EC=`google-genai-sdk/${wC}`,CC="v1beta1",_C="v1beta";class AC{constructor(t){var o,a;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:CC,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:_C,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&a.push(t.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,a){const r=[this.getRequestUrlInternal(o)];return a&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,a);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,o){const a=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(o))typeof u=="object"?a[r]=Object.assign(Object.assign({},a[r]),u):u!==void 0&&(a[r]=u);return a}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,a,r){if(o&&o.timeout||r){const u=new AbortController,h=u.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>u.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),t.signal=h}return o&&o.extraBody!==null&&NC(t,o.extraBody),t.headers=await this.getHeadersInternal(o,a),t}async unaryApiCall(t,o,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:a})).then(async r=>(await Hm(r),new Zu(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:a})).then(async r=>(await Hm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Mi(this,arguments,function*(){var a;const r=(a=t?.body)===null||a===void 0?void 0:a.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield xt(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=u.decode(x,{stream:!0});try{const N=JSON.parse(b);if("error"in N){const V=JSON.parse(JSON.stringify(N.error)),B=V.status,Y=V.code,re=`got status: ${B}. ${JSON.stringify(N)}`;if(Y>=400&&Y<600)throw new Rr({message:re,status:Y})}}catch(N){if(N.name==="ApiError")throw N}h+=b;let T=-1,A=0;for(;;){T=-1,A=0;for(const B of v){const Y=h.indexOf(B);Y!==-1&&(T===-1||Y<T)&&(T=Y,A=B.length)}if(T===-1)break;const N=h.substring(0,T);h=h.substring(T+A);const V=N.trim();if(V.startsWith(y)){const B=V.substring(y.length).trim();try{const Y=new Response(B,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield xt(new Zu(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${B}. ${Y}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const t={},o=EC+" "+this.clientOptions.userAgentExtra;return t[TC]=o,t[id]=o,t[bC]="application/json",t}async getHeadersInternal(t,o){const a=new Headers;if(t&&t.headers){for(const[r,u]of Object.entries(t.headers))a.append(r,u);t.timeout&&t.timeout>0&&a.append(SC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,o),a}getFileName(t){var o;let a="";return typeof t=="string"&&(a=t.replace(/[/\\]+$/,""),a=(o=a.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),a}async uploadFile(t,o){var a;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,h=await u.stat(t);r.sizeBytes=String(h.size);const y=(a=o?.mimeType)!==null&&a!==void 0?a:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=qe("upload/v1beta/files",v._url),b=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return u.upload(t,b,this)}async uploadFileToFileSearchStore(t,o,a){var r;const u=this.clientOptions.uploader,h=await u.stat(o),y=String(h.size),v=(r=a?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),b={};a!=null&&Ug(a,b);const T=await this.fetchUploadUrl(m,y,v,x,b,a?.httpOptions);return u.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,a,r,u,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${a}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(u),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Hm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let a;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(a);throw o>=400&&o<600?new Rr({message:r,status:o}):new Error(r)}}function NC(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(u,h){const y=Object.assign({},u);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=a(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=a(o,t);n.body=JSON.stringify(r)}const MC="mcp_used/unknown";let RC=!1;function Pg(n){for(const t of n)if(kC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return RC}function Hg(n){var t;const o=(t=n[id])!==null&&t!==void 0?t:"";n[id]=(o+` ${MC}`).trimStart()}function kC(n){return n!==null&&typeof n=="object"&&n instanceof Sd}function IC(n){return Mi(this,arguments,function*(o,a=100){let r,u=0;for(;u<a;){const h=yield xt(o.listTools({cursor:r}));for(const y of h.tools)yield yield xt(y),u++;if(!h.nextCursor)break;r=h.nextCursor}})}class Sd{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new Sd(t,o)}async initialize(){var t,o,a,r;if(this.mcpTools.length>0)return;const u={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,Ri(IC(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const b=r;h.push(b);const T=b.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=x}}catch(b){o={error:b}}finally{try{!y&&!t&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),uS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const a of t)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const h=await r.callTool({name:a.name,arguments:a.args},void 0,u);o.push({functionResponse:{name:a.name,response:h.isError?{error:h}:h}})}return o}}async function zC(n,t,o){const a=new nS;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(a,r),t(a)}class DC{constructor(t,o,a){this.apiClient=t,this.auth=o,this.webSocketFactory=a}async connect(t){var o,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),h=PC(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(ce=>{m=ce}),b=t.callbacks,T=function(){m({})},A=this.apiClient,N={onopen:T,onmessage:ce=>{zC(A,b.onmessage,ce)},onerror:(o=b?.onerror)!==null&&o!==void 0?o:function(ce){},onclose:(a=b?.onclose)!==null&&a!==void 0?a:function(ce){}},V=this.webSocketFactory.create(v,UC(h),N);V.connect(),await x;const re={setup:{model:Ot(this.apiClient,t.model)}};return V.send(JSON.stringify(re)),new LC(V,this.apiClient)}}class LC{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=sw(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=aw(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Jl.PLAY)}pause(){this.sendPlaybackControl(Jl.PAUSE)}stop(){this.sendPlaybackControl(Jl.STOP)}resetContext(){this.sendPlaybackControl(Jl.RESET_CONTEXT)}close(){this.conn.close()}}function UC(n){const t={};return n.forEach((o,a)=>{t[a]=o}),t}function PC(n){const t=new Headers;for(const[o,a]of Object.entries(n))t.append(o,a);return t}const HC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GC(n,t,o){const a=new tS;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const u=JSON.parse(r);if(n.isVertexAI()){const h=uw(u);Object.assign(a,h)}else Object.assign(a,u);t(a)}class FC{constructor(t,o,a){this.apiClient=t,this.auth=o,this.webSocketFactory=a,this.music=new DC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,a,r,u,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&Pg(t.config.tools)&&Hg(b);const T=qC(b);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const _e=this.apiClient.getApiKey();let Ke="BidiGenerateContent",De="key";_e?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ke="BidiGenerateContentConstrained",De="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Ke}?${De}=${_e}`}let A=()=>{};const N=new Promise(_e=>{A=_e}),V=t.callbacks,B=function(){var _e;(_e=V?.onopen)===null||_e===void 0||_e.call(V),A({})},Y=this.apiClient,re={onopen:B,onmessage:_e=>{GC(Y,V.onmessage,_e)},onerror:(o=V?.onerror)!==null&&o!==void 0?o:function(_e){},onclose:(a=V?.onclose)!==null&&a!==void 0?a:function(_e){}},ce=this.webSocketFactory.create(x,OC(T),re);ce.connect(),await N;let Re=Ot(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&Re.startsWith("publishers/")){const _e=this.apiClient.getProject(),Ke=this.apiClient.getLocation();Re=`projects/${_e}/locations/${Ke}/`+Re}let ze={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Tr.AUDIO]}:t.config.responseModalities=[Tr.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Le=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],be=[];for(const _e of Le)if(this.isCallableTool(_e)){const Ke=_e;be.push(await Ke.tool())}else be.push(_e);be.length>0&&(t.config.tools=be);const Qe={model:Re,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ze=lw(this.apiClient,Qe):ze=ow(this.apiClient,Qe),delete ze.config,ce.send(JSON.stringify(ze)),new VC(ce,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const BC={turnComplete:!0};class VC{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let a=[];try{a=Ei(o.turns),t.isVertexAI()||(a=a.map(r=>kr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:a,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let a=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?a=o.functionResponses:a=[o.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const u of a){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(HC)}return{toolResponse:{functionResponses:a}}}sendClientContent(t){t=Object.assign(Object.assign({},BC),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:cw(t)}:o={realtimeInput:rw(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function OC(n){const t={};return n.forEach((o,a)=>{t[a]=o}),t}function qC(n){const t=new Headers;for(const[o,a]of Object.entries(n))t.append(o,a);return t}const Gm=10;function Fm(n){var t,o,a;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if(Wl(h)){r=!0;break}if(!r)return!0;const u=(a=n?.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Wl(n){return"callTool"in n&&typeof n.callTool=="function"}function jC(n){var t,o,a;return(a=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>Wl(r)))!==null&&a!==void 0?a:!1}function Bm(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((a,r)=>{if(Wl(a))return;const u=a;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(r)}),o}function Vm(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class $C extends po{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var a,r,u,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!jC(o)||Fm(o.config))return await this.generateContentInternal(v);const m=Bm(o);if(m.length>0){const V=m.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let x,b;const T=Ei(v.contents),A=(u=(r=(a=v.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:Gm;let N=0;for(;N<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const V=x.candidates[0].content,B=[];for(const Y of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if(Wl(Y)){const ce=await Y.callTool(x.functionCalls);B.push(...ce)}N++,b={role:"user",parts:B},v.contents=Ei(v.contents),v.contents.push(V),v.contents.push(b),Vm(v.config)&&(T.push(V),T.push(b))}return Vm(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var a,r,u,h,y;if(this.maybeMoveToResponseJsonSchem(o),Fm(o.config)){const b=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(b)}const v=Bm(o);if(v.length>0){const b=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(r=(a=o?.config)===null||a===void 0?void 0:a.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(a=>{var r;let u;const h=[];if(a?.generatedImages)for(const v of a.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=v?.safetyAttributes:h.push(v);let y;return u?y={generatedImages:h,positivePromptSafetyAttributes:u,sdkHttpResponse:a.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:a.sdkHttpResponse},y}),this.list=async o=>{var a;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((a=h.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new cl(fo.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const a={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(a.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async o=>{let a={numberOfImages:1,mode:"upscale"};o.config&&(a=Object.assign(Object.assign({},a),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var a,r,u,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=o.video)===null||a===void 0)&&a.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(u=o.source)===null||u===void 0?void 0:u.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,a,r;const u=(o=t.config)===null||o===void 0?void 0:o.tools;if(!u)return t;const h=await Promise.all(u.map(async v=>Wl(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&Pg(t.config.tools)){const v=(r=(a=t.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Hg(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,a,r;const u=new Map;for(const h of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Wl(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,y)}}return u}async processAfcStream(t){var o,a,r;const u=(r=(a=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Gm;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,b){return Mi(this,arguments,function*(){for(var T,A,N,V,B,Y;y<u;){h&&(y++,h=!1);const ze=yield xt(m.processParamsMaybeAddMcpUsage(b)),Le=yield xt(m.generateContentStreamInternal(ze)),be=[],Qe=[];try{for(var re=!0,ce=(A=void 0,Ri(Le)),Re;Re=yield xt(ce.next()),T=Re.done,!T;re=!0){V=Re.value,re=!1;const _e=V;if(yield yield xt(_e),_e.candidates&&(!((B=_e.candidates[0])===null||B===void 0)&&B.content)){Qe.push(_e.candidates[0].content);for(const Ke of(Y=_e.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(y<u&&Ke.functionCall){if(!Ke.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Ke.functionCall.name)){const De=yield xt(x.get(Ke.functionCall.name).callTool([Ke.functionCall]));be.push(...De)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Ke.functionCall.name}`)}}}}catch(_e){A={error:_e}}finally{try{!re&&!T&&(N=ce.return)&&(yield xt(N.call(ce)))}finally{if(A)throw A.error}}if(be.length>0){h=!0;const _e=new qa;_e.candidates=[{content:{role:"user",parts:be}}],yield yield xt(_e);const Ke=[];Ke.push(...Qe),Ke.push({role:"user",parts:be});const De=Ei(b.contents).concat(Ke);b.contents=De}else break}})})(this,v,t)}async generateContentInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Lm(this.apiClient,t);return y=qe("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Pm(x),T=new qa;return Object.assign(T,b),T})}else{const m=Dm(this.apiClient,t);return y=qe("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Um(x),T=new qa;return Object.assign(T,b),T})}}async generateContentStreamInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Lm(this.apiClient,t);return y=qe("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),h.then(function(b){return Mi(this,arguments,function*(){var T,A,N,V;try{for(var B=!0,Y=Ri(b),re;re=yield xt(Y.next()),T=re.done,!T;B=!0){V=re.value,B=!1;const ce=V,Re=Pm(yield xt(ce.json()));Re.sdkHttpResponse={headers:ce.headers};const ze=new qa;Object.assign(ze,Re),yield yield xt(ze)}}catch(ce){A={error:ce}}finally{try{!B&&!T&&(N=Y.return)&&(yield xt(N.call(Y)))}finally{if(A)throw A.error}}})})}else{const m=Dm(this.apiClient,t);return y=qe("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),h.then(function(b){return Mi(this,arguments,function*(){var T,A,N,V;try{for(var B=!0,Y=Ri(b),re;re=yield xt(Y.next()),T=re.done,!T;B=!0){V=re.value,B=!1;const ce=V,Re=Um(yield xt(ce.json()));Re.sdkHttpResponse={headers:ce.headers};const ze=new qa;Object.assign(ze,Re),yield yield xt(ze)}}catch(ce){A={error:ce}}finally{try{!B&&!T&&(N=Y.return)&&(yield xt(N.call(Y)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Fw(this.apiClient,t);return y=qe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Vw(x),T=new ym;return Object.assign(T,b),T})}else{const m=Gw(this.apiClient,t);return y=qe("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Bw(x),T=new ym;return Object.assign(T,b),T})}}async generateImagesInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Ww(this.apiClient,t);return y=qe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=tE(x),T=new vm;return Object.assign(T,b),T})}else{const m=Zw(this.apiClient,t);return y=qe("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=eE(x),T=new vm;return Object.assign(T,b),T})}}async editImageInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=Lw(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=Uw(v),x=new q1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=WE(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=eC(v),x=new j1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=DE(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=LE(v),x=new $1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=BE(this.apiClient,t);return u=qe("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=VE(v),x=new Y1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=vE(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>nd(x))}else{const m=yE(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>td(x))}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=AE(this.apiClient,t);return y=qe("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=ME(x),T=new xm;return Object.assign(T,b),T})}else{const m=_E(this.apiClient,t);return y=qe("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=NE(x),T=new xm;return Object.assign(T,b),T})}}async update(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=QE(this.apiClient,t);return y=qe("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>nd(x))}else{const m=XE(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>td(x))}}async delete(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=kw(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=zw(x),T=new bm;return Object.assign(T,b),T})}else{const m=Rw(this.apiClient,t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Iw(x),T=new bm;return Object.assign(T,b),T})}}async countTokens(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Aw(this.apiClient,t);return y=qe("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Mw(x),T=new Sm;return Object.assign(T,b),T})}else{const m=_w(this.apiClient,t);return y=qe("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Nw(x),T=new Sm;return Object.assign(T,b),T})}}async computeTokens(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=xw(this.apiClient,t);return u=qe("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=bw(v),x=new J1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=sE(this.apiClient,t);return y=qe("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>{const b=lE(x),T=new wr;return Object.assign(T,b),T})}else{const m=aE(this.apiClient,t);return y=qe("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>{const b=oE(x),T=new wr;return Object.assign(T,b),T})}}}class YC extends po{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,a=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,a=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=H1(t);return y=qe("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h}else{const m=P1(t);return y=qe("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=R1(t);return u=qe("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function JC(n){const t={},o=c(n,["data"]);if(o!=null&&d(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function KC(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>o_(u))),d(t,["parts"],r)}const a=c(n,["role"]);return a!=null&&d(t,["role"],a),t}function XC(n,t,o){const a={},r=c(t,["expireTime"]);o!==void 0&&r!=null&&d(o,["expireTime"],r);const u=c(t,["newSessionExpireTime"]);o!==void 0&&u!=null&&d(o,["newSessionExpireTime"],u);const h=c(t,["uses"]);o!==void 0&&h!=null&&d(o,["uses"],h);const y=c(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&d(o,["bidiGenerateContentSetup"],i_(n,y));const v=c(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&d(o,["fieldMask"],v),a}function QC(n,t){const o={},a=c(t,["config"]);return a!=null&&d(o,["config"],XC(n,a,o)),o}function ZC(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&d(t,["fileUri"],o);const a=c(n,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function WC(n){const t={},o=c(n,["id"]);o!=null&&d(t,["id"],o);const a=c(n,["args"]);a!=null&&d(t,["args"],a);const r=c(n,["name"]);if(r!=null&&d(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function e_(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&d(t,["enableWidget"],o),t}function t_(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&d(t,["timeRangeFilter"],o),t}function n_(n,t){const o={},a=c(n,["generationConfig"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig"],a);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&d(t,["setup","generationConfig","speechConfig"],bd(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&d(t,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&d(t,["setup","systemInstruction"],KC(qn(N)));const V=c(n,["tools"]);if(t!==void 0&&V!=null){let Le=ta(V);Array.isArray(Le)&&(Le=Le.map(be=>a_(ea(be)))),d(t,["setup","tools"],Le)}const B=c(n,["sessionResumption"]);t!==void 0&&B!=null&&d(t,["setup","sessionResumption"],l_(B));const Y=c(n,["inputAudioTranscription"]);t!==void 0&&Y!=null&&d(t,["setup","inputAudioTranscription"],Y);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&d(t,["setup","outputAudioTranscription"],re);const ce=c(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&d(t,["setup","realtimeInputConfig"],ce);const Re=c(n,["contextWindowCompression"]);t!==void 0&&Re!=null&&d(t,["setup","contextWindowCompression"],Re);const ze=c(n,["proactivity"]);if(t!==void 0&&ze!=null&&d(t,["setup","proactivity"],ze),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function i_(n,t){const o={},a=c(t,["model"]);a!=null&&d(o,["setup","model"],Ot(n,a));const r=c(t,["config"]);return r!=null&&d(o,["config"],n_(r,o)),o}function o_(n){const t={},o=c(n,["mediaResolution"]);o!=null&&d(t,["mediaResolution"],o);const a=c(n,["codeExecutionResult"]);a!=null&&d(t,["codeExecutionResult"],a);const r=c(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&d(t,["fileData"],ZC(u));const h=c(n,["functionCall"]);h!=null&&d(t,["functionCall"],WC(h));const y=c(n,["functionResponse"]);y!=null&&d(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&d(t,["inlineData"],JC(v));const m=c(n,["text"]);m!=null&&d(t,["text"],m);const x=c(n,["thought"]);x!=null&&d(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&d(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&d(t,["videoMetadata"],T),t}function l_(n){const t={},o=c(n,["handle"]);if(o!=null&&d(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function a_(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),d(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(n,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],a);const r=c(n,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&d(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&d(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&d(t,["googleMaps"],e_(y));const v=c(n,["googleSearch"]);v!=null&&d(t,["googleSearch"],t_(v));const m=c(n,["urlContext"]);return m!=null&&d(t,["urlContext"],m),t}function s_(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const a=n[o];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(u=>`${o}.${u}`);t.push(...r)}else t.push(o)}return t.join(",")}function r_(n,t){let o=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const u=a.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,o=u):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const u=s_(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)u?n.fieldMask=u:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];u&&v.push(u),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class c_ extends po{constructor(t){super(),this.apiClient=t}async create(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=QC(this.apiClient,t);u=qe("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=r_(y,t.config);return r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function u_(n,t){const o={},a=c(n,["force"]);return t!==void 0&&a!=null&&d(t,["_query","force"],a),o}function d_(n){const t={},o=c(n,["name"]);o!=null&&d(t,["_url","name"],o);const a=c(n,["config"]);return a!=null&&u_(a,t),t}function f_(n){const t={},o=c(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function p_(n,t){const o={},a=c(n,["pageSize"]);t!==void 0&&a!=null&&d(t,["_query","pageSize"],a);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),o}function h_(n){const t={},o=c(n,["parent"]);o!=null&&d(t,["_url","parent"],o);const a=c(n,["config"]);return a!=null&&p_(a,t),t}function m_(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const a=c(n,["nextPageToken"]);a!=null&&d(t,["nextPageToken"],a);const r=c(n,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),d(t,["documents"],u)}return t}class g_ extends po{constructor(t){super(),this.apiClient=t,this.list=async o=>new cl(fo.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:o.parent,config:a.config}),await this.listInternal(o),o)}async get(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=f_(t);return u=qe("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=d_(t);r=qe("{name}",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=h_(t);return u=qe("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=m_(v),x=new K1;return Object.assign(x,m),x})}}}class y_ extends po{constructor(t,o=new g_(t)){super(),this.apiClient=t,this.documents=o,this.list=async(a={})=>new cl(fo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(a),a)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=sC(t);return u=qe("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=uC(t);return u=qe("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cC(t);r=qe("{name}",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=gC(t);return u=qe("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=yC(v),x=new X1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=vC(t);return u=qe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=xC(v),x=new Q1;return Object.assign(x,m),x})}}async importFile(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=pC(t);return u=qe("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=fC(v),x=new md;return Object.assign(x,m),x})}}}let Gg=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Gg=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(+a^o()&15>>+a/4).toString(16))};const v_=()=>Gg();function od(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const ld=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Ci extends Error{}class Yn extends Ci{constructor(t,o,a,r){super(`${Yn.makeMessage(t,o,a)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,a){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):a;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,a,r){if(!t||!r)return new Dr({message:a,cause:ld(o)});const u=o;return t===400?new Bg(t,u,a,r):t===401?new Vg(t,u,a,r):t===403?new Og(t,u,a,r):t===404?new qg(t,u,a,r):t===409?new jg(t,u,a,r):t===422?new $g(t,u,a,r):t===429?new Yg(t,u,a,r):t>=500?new Jg(t,u,a,r):new Yn(t,u,a,r)}}class ad extends Yn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Dr extends Yn{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Fg extends Dr{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Bg extends Yn{}class Vg extends Yn{}class Og extends Yn{}class qg extends Yn{}class jg extends Yn{}class $g extends Yn{}class Yg extends Yn{}class Jg extends Yn{}const x_=/^[a-z][a-z0-9+.-]*:/i,b_=n=>x_.test(n);let sd=n=>(sd=Array.isArray,sd(n));const S_=sd;let T_=S_;const Om=T_;function w_(n){if(!n)return!0;for(const t in n)return!1;return!0}function E_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const C_=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ci(`${n} must be an integer`);if(t<0)throw new Ci(`${n} must be a positive integer`);return t},__=n=>{try{return JSON.parse(n)}catch{return}};const A_=n=>new Promise(t=>setTimeout(t,n));const jl="0.0.1";function N_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const M_=()=>{var n,t,o,a,r;const u=N_();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":jm(Deno.build.os),"X-Stainless-Arch":qm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":jm((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":qm((a=globalThis.process.arch)!==null&&a!==void 0?a:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=R_();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function R_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const a=o.exec(navigator.userAgent);if(a){const r=a[1]||0,u=a[2]||0,h=a[3]||0;return{browser:t,version:`${r}.${u}.${h}`}}}return null}const qm=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",jm=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let rr;const k_=()=>rr??(rr=M_());function I_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Kg(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function z_(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Kg({start(){},async pull(o){const{done:a,value:r}=await t.next();a?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Xg(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function D_(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const a=n.getReader(),r=a.cancel();a.releaseLock(),await r}const L_=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const Qg=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fu(n,t,o){return Qg(),new File(n,t??"unknown_file",o)}function U_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const P_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const Zg=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",H_=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Zg(n),G_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function F_(n,t,o){if(Qg(),n=await n,H_(n))return n instanceof File?n:Fu([await n.arrayBuffer()],n.name);if(G_(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),Fu(await rd(r),t,o)}const a=await rd(n);if(t||(t=U_(n)),!o?.type){const r=a.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return Fu(a,t,o)}async function rd(n){var t,o,a,r,u;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(Zg(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(P_(n))try{for(var y=!0,v=Ri(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await rd(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}else{const x=(u=n?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${B_(n)}`)}return h}function B_(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class Wg{constructor(t){this._client=t}}Wg._key=[];function ey(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const $m=Object.freeze(Object.create(null)),V_=(n=ey)=>(function(o,...a){if(o.length===1)return o[0];let r=!1;const u=[],h=o.reduce((x,b,T)=>{var A,N,V;/[?#]/.test(b)&&(r=!0);const B=a[T];let Y=(r?encodeURIComponent:n)(""+B);return T!==a.length&&(B==null||typeof B=="object"&&B.toString===((V=Object.getPrototypeOf((N=Object.getPrototypeOf((A=B.hasOwnProperty)!==null&&A!==void 0?A:$m))!==null&&N!==void 0?N:$m))===null||V===void 0?void 0:V.toString))&&(Y=B+"",u.push({start:x.length+b.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(B).slice(8,-1)} is not a valid path parameter`})),x+b+(T===a.length?"":Y)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((x,b)=>x.start-b.start),u.length>0){let x=0;const b=u.reduce((T,A)=>{const N=" ".repeat(A.start-x),V="^".repeat(A.length);return x=A.start+A.length,T+N+V},"");throw new Ci(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${h}
${b}`)}return h}),cr=V_(ey);class ty extends Wg{create(t,o){var a;const{api_version:r=this._client.apiVersion}=t,u=Cr(t,["api_version"]);if("model"in u&&"agent_config"in u)throw new Ci("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new Ci("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(cr`/${r}/interactions`,Object.assign(Object.assign({body:u},o),{stream:(a=t.stream)!==null&&a!==void 0?a:!1}))}delete(t,o={},a){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(cr`/${r}/interactions/${t}`,a)}cancel(t,o={},a){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(cr`/${r}/interactions/${t}/cancel`,a)}get(t,o={},a){var r;const u=o??{},{api_version:h=this._client.apiVersion}=u,y=Cr(u,["api_version"]);return this._client.get(cr`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},a),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}ty._key=Object.freeze(["interactions"]);class ny extends ty{}function O_(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let a=0;for(const r of n)o.set(r,a),a+=r.length;return o}let ur;function Td(n){let t;return(ur??(t=new globalThis.TextEncoder,ur=t.encode.bind(t)))(n)}let dr;function Ym(n){let t;return(dr??(t=new globalThis.TextDecoder,dr=t.decode.bind(t)))(n)}class Lr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Td(t):t;this.buffer=O_([this.buffer,o]);const a=[];let r;for(;(r=q_(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){a.push(Ym(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=Ym(this.buffer.subarray(0,u));a.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return a}flush(){return this.buffer.length?this.decode(`
`):[]}}Lr.NEWLINE_CHARS=new Set([`
`,"\r"]);Lr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function q_(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function j_(n){for(let a=0;a<n.length-1;a++){if(n[a]===10&&n[a+1]===10||n[a]===13&&n[a+1]===13)return a+2;if(n[a]===13&&n[a+1]===10&&a+3<n.length&&n[a+2]===13&&n[a+3]===10)return a+4}return-1}const _r={off:0,error:200,warn:300,info:400,debug:500},Jm=(n,t,o)=>{if(n){if(E_(_r,n))return n;$n(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(_r))}`)}};function Qa(){}function fr(n,t,o){return!t||_r[n]>_r[o]?Qa:t[n].bind(t)}const $_={error:Qa,warn:Qa,info:Qa,debug:Qa};let Km=new WeakMap;function $n(n){var t;const o=n.logger,a=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return $_;const r=Km.get(o);if(r&&r[0]===a)return r[1];const u={error:fr("error",o,a),warn:fr("warn",o,a),info:fr("info",o,a),debug:fr("debug",o,a)};return Km.set(o,[a,u]),u}const rl=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Kl{constructor(t,o,a){this.iterator=t,this.controller=o,this.client=a}static fromSSEResponse(t,o,a){let r=!1;const u=a?$n(a):console;function h(){return Mi(this,arguments,function*(){var v,m,x,b;if(r)throw new Ci("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=Ri(Y_(t,o)),V;V=yield xt(N.next()),v=V.done,!v;A=!0){b=V.value,A=!1;const B=b;if(!T)if(B.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield xt(JSON.parse(B.data))}catch(Y){throw u.error("Could not parse message into JSON:",B.data),u.error("From chunk:",B.raw),Y}}}catch(B){m={error:B}}finally{try{!A&&!v&&(x=N.return)&&(yield xt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(B){if(od(B))return yield xt(void 0);throw B}finally{T||o.abort()}})}return new Kl(h,o,a)}static fromReadableStream(t,o,a){let r=!1;function u(){return Mi(this,arguments,function*(){var v,m,x,b;const T=new Lr,A=Xg(t);try{for(var N=!0,V=Ri(A),B;B=yield xt(V.next()),v=B.done,!v;N=!0){b=B.value,N=!1;const Y=b;for(const re of T.decode(Y))yield yield xt(re)}}catch(Y){m={error:Y}}finally{try{!N&&!v&&(x=V.return)&&(yield xt(x.call(V)))}finally{if(m)throw m.error}}for(const Y of T.flush())yield yield xt(Y)})}function h(){return Mi(this,arguments,function*(){var v,m,x,b;if(r)throw new Ci("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=Ri(u()),V;V=yield xt(N.next()),v=V.done,!v;A=!0){b=V.value,A=!1;const B=b;T||B&&(yield yield xt(JSON.parse(B)))}}catch(B){m={error:B}}finally{try{!A&&!v&&(x=N.return)&&(yield xt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(B){if(od(B))return yield xt(void 0);throw B}finally{T||o.abort()}})}return new Kl(h,o,a)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],a=this.iterator(),r=u=>({next:()=>{if(u.length===0){const h=a.next();t.push(h),o.push(h)}return u.shift()}});return[new Kl(()=>r(t),this.controller,this.client),new Kl(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Kg({async start(){o=t[Symbol.asyncIterator]()},async pull(a){try{const{value:r,done:u}=await o.next();if(u)return a.close();const h=Td(JSON.stringify(r)+`
`);a.enqueue(h)}catch(r){a.error(r)}},async cancel(){var a;await((a=o.return)===null||a===void 0?void 0:a.call(o))}})}}function Y_(n,t){return Mi(this,arguments,function*(){var a,r,u,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ci("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ci("Attempted to iterate over a response with no body");const y=new K_,v=new Lr,m=Xg(n.body);try{for(var x=!0,b=Ri(J_(m)),T;T=yield xt(b.next()),a=T.done,!a;x=!0){h=T.value,x=!1;const A=h;for(const N of v.decode(A)){const V=y.decode(N);V&&(yield yield xt(V))}}}catch(A){r={error:A}}finally{try{!x&&!a&&(u=b.return)&&(yield xt(u.call(b)))}finally{if(r)throw r.error}}for(const A of v.flush()){const N=y.decode(A);N&&(yield yield xt(N))}})}function J_(n){return Mi(this,arguments,function*(){var o,a,r,u;let h=new Uint8Array;try{for(var y=!0,v=Ri(n),m;m=yield xt(v.next()),o=m.done,!o;y=!0){u=m.value,y=!1;const x=u;if(x==null)continue;const b=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?Td(x):x;let T=new Uint8Array(h.length+b.length);T.set(h),T.set(b,h.length),h=T;let A;for(;(A=j_(h))!==-1;)yield yield xt(h.slice(0,A)),h=h.slice(A)}}catch(x){a={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield xt(r.call(v)))}finally{if(a)throw a.error}}h.length>0&&(yield yield xt(h))})}class K_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,a,r]=X_(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function X_(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function Q_(n,t){const{response:o,requestLogID:a,retryOfRequestLogID:r,startTime:u}=t,h=await(async()=>{var y;if(t.options.stream)return $n(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):Kl.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return $n(n).debug(`[${a}] response parsed`,rl({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-u})),h}class wd extends Promise{constructor(t,o,a=Q_){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=a,this.client=t}_thenUnwrap(t){return new wd(this.client,this.responsePromise,async(o,a)=>t(await this.parseResponse(o,a),a))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const iy=Symbol("brand.privateNullableHeaders");function*Z_(n){if(!n)return;if(iy in n){const{values:a,nulls:r}=n;yield*a.entries();for(const u of r)yield[u,null];return}let t=!1,o;n instanceof Headers?o=n.entries():Om(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let a of o){const r=a[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=Om(a[1])?a[1]:[a[1]];let h=!1;for(const y of u)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const ja=n=>{const t=new Headers,o=new Set;for(const a of n){const r=new Set;for(const[u,h]of Z_(a)){const y=u.toLowerCase();r.has(y)||(t.delete(u),r.add(y)),h===null?(t.delete(u),o.add(y)):(t.append(u,h),o.delete(y))}}return{[iy]:!0,values:t,nulls:o}};const Bu=n=>{var t,o,a,r,u,h;if(typeof globalThis.process<"u")return(a=(o=(t=E1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&a!==void 0?a:void 0;if(typeof globalThis.Deno<"u")return(h=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,n))===null||h===void 0?void 0:h.trim()};var oy;class Ur{constructor(t){var o,a,r,u,h,y,v,{baseURL:m=Bu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=Bu("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:b="v1beta"}=t,T=Cr(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:b},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(a=A.timeout)!==null&&a!==void 0?a:Ur.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(h=(u=Jm(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:Jm(Bu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(y=A.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:I_(),this.encoder=L_,this._options=A,this.apiKey=x,this.apiVersion=b,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=ja([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return ja([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ja([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,a])=>typeof a<"u").map(([o,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(o)}=`;throw new Ci(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jl}`}defaultIdempotencyKey(){return`stainless-node-retry-${v_()}`}makeStatusError(t,o,a,r){return Yn.generate(t,o,a,r)}buildURL(t,o,a){const r=!this.baseURLOverridden()&&a||this.baseURL,u=b_(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return w_(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(u.search=this.stringifyQuery(o)),u.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:a}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,a){return this.request(Promise.resolve(a).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new wd(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,a){var r,u,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:b}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=a===void 0?"":`, retryOf: ${a}`,N=Date.now();if($n(this).debug(`[${T}] sending request`,rl({retryOfRequestLogID:a,method:y.method,url:x,options:y,headers:m.headers})),!((u=y.signal)===null||u===void 0)&&u.aborted)throw new ad;const V=new AbortController,B=await this.fetchWithTimeout(x,m,b,V).catch(ld),Y=Date.now();if(B instanceof globalThis.Error){const ce=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new ad;const Re=od(B)||/timed? ?out/i.test(String(B)+("cause"in B?String(B.cause):""));if(o)return $n(this).info(`[${T}] connection ${Re?"timed out":"failed"} - ${ce}`),$n(this).debug(`[${T}] connection ${Re?"timed out":"failed"} (${ce})`,rl({retryOfRequestLogID:a,url:x,durationMs:Y-N,message:B.message})),this.retryRequest(y,o,a??T);throw $n(this).info(`[${T}] connection ${Re?"timed out":"failed"} - error; no more retries left`),$n(this).debug(`[${T}] connection ${Re?"timed out":"failed"} (error; no more retries left)`,rl({retryOfRequestLogID:a,url:x,durationMs:Y-N,message:B.message})),Re?new Fg:new Dr({cause:B})}const re=`[${T}${A}] ${m.method} ${x} ${B.ok?"succeeded":"failed"} with status ${B.status} in ${Y-N}ms`;if(!B.ok){const ce=await this.shouldRetry(B);if(o&&ce){const _e=`retrying, ${o} attempts remaining`;return await D_(B.body),$n(this).info(`${re} - ${_e}`),$n(this).debug(`[${T}] response error (${_e})`,rl({retryOfRequestLogID:a,url:B.url,status:B.status,headers:B.headers,durationMs:Y-N})),this.retryRequest(y,o,a??T,B.headers)}const Re=ce?"error; no more retries left":"error; not retryable";$n(this).info(`${re} - ${Re}`);const ze=await B.text().catch(_e=>ld(_e).message),Le=__(ze),be=Le?void 0:ze;throw $n(this).debug(`[${T}] response error (${Re})`,rl({retryOfRequestLogID:a,url:B.url,status:B.status,headers:B.headers,message:be,durationMs:Date.now()-N})),this.makeStatusError(B.status,Le,be,B.headers)}return $n(this).info(re),$n(this).debug(`[${T}] response start`,rl({retryOfRequestLogID:a,url:B.url,status:B.status,headers:B.headers,durationMs:Y-N})),{response:B,options:y,controller:V,requestLogID:T,retryOfRequestLogID:a,startTime:N}}async fetchWithTimeout(t,o,a,r){const u=o||{},{signal:h,method:y}=u,v=Cr(u,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),a),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(b.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,a,r){var u;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(u=t.maxRetries)!==null&&u!==void 0?u:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await A_(h),this.makeRequest(t,o-1,a)}calculateDefaultRetryTimeoutMillis(t,o){const u=o-t,h=Math.min(.5*Math.pow(2,u),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var a,r,u;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,b=this.buildURL(v,m,x);"timeout"in h&&C_("timeout",h.timeout),h.timeout=(a=h.timeout)!==null&&a!==void 0?a:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:h}),N=await this.buildHeaders({options:t,method:y,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:N},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=h.fetchOptions)!==null&&u!==void 0?u:{}),url:b,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:a,retryCount:r}){let u={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=ja([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),k_()),this._options.defaultHeaders,a,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const a=ja([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&a.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:z_(t)}:this.encoder({body:t,headers:a})}}Ur.DEFAULT_TIMEOUT=6e4;class zn extends Ur{constructor(){super(...arguments),this.interactions=new ny(this)}}oy=zn;zn.GeminiNextGenAPIClient=oy;zn.GeminiNextGenAPIClientError=Ci;zn.APIError=Yn;zn.APIConnectionError=Dr;zn.APIConnectionTimeoutError=Fg;zn.APIUserAbortError=ad;zn.NotFoundError=qg;zn.ConflictError=jg;zn.RateLimitError=Yg;zn.BadRequestError=Bg;zn.AuthenticationError=Vg;zn.InternalServerError=Jg;zn.PermissionDeniedError=Og;zn.UnprocessableEntityError=$g;zn.toFile=F_;zn.Interactions=ny;function W_(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function eA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function tA(n,t){const o={},a=c(n,["sdkHttpResponse"]);return a!=null&&d(o,["sdkHttpResponse"],a),o}function nA(n,t){const o={},a=c(n,["sdkHttpResponse"]);return a!=null&&d(o,["sdkHttpResponse"],a),o}function iA(n,t,o){const a={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&d(t,["displayName"],r),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(n,["epochCount"]);t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","epochCount"],u);const h=c(n,["learningRateMultiplier"]);if(h!=null&&d(a,["tuningTask","hyperparameters","learningRateMultiplier"],h),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=c(n,["batchSize"]);t!==void 0&&y!=null&&d(t,["tuningTask","hyperparameters","batchSize"],y);const v=c(n,["learningRate"]);if(t!==void 0&&v!=null&&d(t,["tuningTask","hyperparameters","learningRate"],v),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return a}function oA(n,t,o){const a={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=c(n,["validationDataset"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec"],Xm(A))}else if(r==="PREFERENCE_TUNING"){const A=c(n,["validationDataset"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec"],Xm(A))}const u=c(n,["tunedModelDisplayName"]);t!==void 0&&u!=null&&d(t,["tunedModelDisplayName"],u);const h=c(n,["description"]);t!==void 0&&h!=null&&d(t,["description"],h);let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(n,["epochCount"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(n,["epochCount"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=c(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=c(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=c(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=c(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=c(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=c(n,["adapterSize"]);t!==void 0&&A!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=c(n,["adapterSize"]);t!==void 0&&A!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=c(n,["labels"]);t!==void 0&&b!=null&&d(t,["labels"],b);const T=c(n,["beta"]);return t!==void 0&&T!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),a}function lA(n,t){const o={},a=c(n,["baseModel"]);a!=null&&d(o,["baseModel"],a);const r=c(n,["preTunedModel"]);r!=null&&d(o,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&gA(u);const h=c(n,["config"]);return h!=null&&iA(h,o),o}function aA(n,t){const o={},a=c(n,["baseModel"]);a!=null&&d(o,["baseModel"],a);const r=c(n,["preTunedModel"]);r!=null&&d(o,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&yA(u,o,t);const h=c(n,["config"]);return h!=null&&oA(h,o,t),o}function sA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function rA(n,t){const o={},a=c(n,["name"]);return a!=null&&d(o,["_url","name"],a),o}function cA(n,t,o){const a={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const u=c(n,["pageToken"]);t!==void 0&&u!=null&&d(t,["_query","pageToken"],u);const h=c(n,["filter"]);return t!==void 0&&h!=null&&d(t,["_query","filter"],h),a}function uA(n,t,o){const a={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const u=c(n,["pageToken"]);t!==void 0&&u!=null&&d(t,["_query","pageToken"],u);const h=c(n,["filter"]);return t!==void 0&&h!=null&&d(t,["_query","filter"],h),a}function dA(n,t){const o={},a=c(n,["config"]);return a!=null&&cA(a,o),o}function fA(n,t){const o={},a=c(n,["config"]);return a!=null&&uA(a,o),o}function pA(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["nextPageToken"]);r!=null&&d(o,["nextPageToken"],r);const u=c(n,["tunedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>ly(y))),d(o,["tuningJobs"],h)}return o}function hA(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["nextPageToken"]);r!=null&&d(o,["nextPageToken"],r);const u=c(n,["tuningJobs"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>cd(y))),d(o,["tuningJobs"],h)}return o}function mA(n,t){const o={},a=c(n,["name"]);a!=null&&d(o,["model"],a);const r=c(n,["name"]);return r!=null&&d(o,["endpoint"],r),o}function gA(n,t){const o={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=c(n,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),d(o,["examples","examples"],r)}return o}function yA(n,t,o){const a={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(u==="PREFERENCE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function ly(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["name"]);r!=null&&d(o,["name"],r);const u=c(n,["state"]);u!=null&&d(o,["state"],Sg(u));const h=c(n,["createTime"]);h!=null&&d(o,["createTime"],h);const y=c(n,["tuningTask","startTime"]);y!=null&&d(o,["startTime"],y);const v=c(n,["tuningTask","completeTime"]);v!=null&&d(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&d(o,["updateTime"],m);const x=c(n,["description"]);x!=null&&d(o,["description"],x);const b=c(n,["baseModel"]);b!=null&&d(o,["baseModel"],b);const T=c(n,["_self"]);return T!=null&&d(o,["tunedModel"],mA(T)),o}function cd(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["name"]);r!=null&&d(o,["name"],r);const u=c(n,["state"]);u!=null&&d(o,["state"],Sg(u));const h=c(n,["createTime"]);h!=null&&d(o,["createTime"],h);const y=c(n,["startTime"]);y!=null&&d(o,["startTime"],y);const v=c(n,["endTime"]);v!=null&&d(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&d(o,["updateTime"],m);const x=c(n,["error"]);x!=null&&d(o,["error"],x);const b=c(n,["description"]);b!=null&&d(o,["description"],b);const T=c(n,["baseModel"]);T!=null&&d(o,["baseModel"],T);const A=c(n,["tunedModel"]);A!=null&&d(o,["tunedModel"],A);const N=c(n,["preTunedModel"]);N!=null&&d(o,["preTunedModel"],N);const V=c(n,["supervisedTuningSpec"]);V!=null&&d(o,["supervisedTuningSpec"],V);const B=c(n,["preferenceOptimizationSpec"]);B!=null&&d(o,["preferenceOptimizationSpec"],B);const Y=c(n,["tuningDataStats"]);Y!=null&&d(o,["tuningDataStats"],Y);const re=c(n,["encryptionSpec"]);re!=null&&d(o,["encryptionSpec"],re);const ce=c(n,["partnerModelTuningSpec"]);ce!=null&&d(o,["partnerModelTuningSpec"],ce);const Re=c(n,["customBaseModel"]);Re!=null&&d(o,["customBaseModel"],Re);const ze=c(n,["experiment"]);ze!=null&&d(o,["experiment"],ze);const Le=c(n,["labels"]);Le!=null&&d(o,["labels"],Le);const be=c(n,["outputUri"]);be!=null&&d(o,["outputUri"],be);const Qe=c(n,["pipelineJob"]);Qe!=null&&d(o,["pipelineJob"],Qe);const _e=c(n,["serviceAccount"]);_e!=null&&d(o,["serviceAccount"],_e);const Ke=c(n,["tunedModelDisplayName"]);Ke!=null&&d(o,["tunedModelDisplayName"],Ke);const De=c(n,["veoTuningSpec"]);return De!=null&&d(o,["veoTuningSpec"],De),o}function vA(n,t){const o={},a=c(n,["sdkHttpResponse"]);a!=null&&d(o,["sdkHttpResponse"],a);const r=c(n,["name"]);r!=null&&d(o,["name"],r);const u=c(n,["metadata"]);u!=null&&d(o,["metadata"],u);const h=c(n,["done"]);h!=null&&d(o,["done"],h);const y=c(n,["error"]);return y!=null&&d(o,["error"],y),o}function Xm(n,t){const o={},a=c(n,["gcsUri"]);a!=null&&d(o,["validationDatasetUri"],a);const r=c(n,["vertexDatasetResource"]);return r!=null&&d(o,["validationDatasetUri"],r),o}class xA extends po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new cl(fo.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var a;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((a=o.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),u=await this.tuneMldevInternal(r);let h="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?h=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(h=u.name.split("/operations/")[0]),{name:h,state:Qu.JOB_STATE_QUEUED}}}}async getInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=rA(t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>cd(x))}else{const m=sA(t);return y=qe("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>ly(x))}}async listInternal(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=fA(t);return y=qe("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=hA(x),T=new Tm;return Object.assign(T,b),T})}else{const m=dA(t);return y=qe("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=pA(x),T=new Tm;return Object.assign(T,b),T})}}async cancel(t){var o,a,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eA(t);return y=qe("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=nA(x),T=new wm;return Object.assign(T,b),T})}else{const m=W_(t);return y=qe("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=tA(x),T=new wm;return Object.assign(T,b),T})}}async tuneInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=aA(t,t);return u=qe("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>cd(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,a;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=lA(t);return u=qe("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>vA(v))}}}class bA{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SA=1024*1024*8,TA=3,wA=1e3,EA=2,Ar="x-goog-upload-status";async function CA(n,t,o){var a;const r=await ay(n,t,o),u=await r?.json();if(((a=r?.headers)===null||a===void 0?void 0:a[Ar])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function _A(n,t,o){var a;const r=await ay(n,t,o),u=await r?.json();if(((a=r?.headers)===null||a===void 0?void 0:a[Ar])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=mg(u),y=new gd;return Object.assign(y,h),y}async function ay(n,t,o){var a,r;let u=0,h=0,y=new Zu(new Response),v="upload";for(u=n.size;h<u;){const m=Math.min(SA,u-h),x=n.slice(h,h+m);h+m>=u&&(v+=", finalize");let b=0,T=wA;for(;b<TA&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((a=y?.headers)===null||a===void 0)&&a[Ar]));)b++,await NA(T),T=T*EA;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[Ar])!=="active")break;if(u<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function AA(n){return{size:n.size,type:n.type}}function NA(n){return new Promise(t=>setTimeout(t,n))}class MA{async upload(t,o,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await CA(t,o,a)}async uploadToFileSearchStore(t,o,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await _A(t,o,a)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await AA(t)}}class RA{create(t,o,a){return new kA(t,o,a)}}class kA{constructor(t,o,a){this.url=t,this.headers=o,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Qm="x-goog-api-key";class IA{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(Qm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Qm,this.apiKey)}}}const zA="gl-node/";class DA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new zn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const a=N1(t.httpOptions,t.vertexai,void 0,void 0);a&&(t.httpOptions?t.httpOptions.baseUrl=a:t.httpOptions={baseUrl:a}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new IA(this.apiKey);this.apiClient=new AC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:zA+"web",uploader:new MA,downloader:new bA}),this.models=new $C(this.apiClient),this.live=new FC(this.apiClient,r,new RA),this.batches=new iT(this.apiClient),this.chats=new HT(this.models,this.apiClient),this.caches=new LT(this.apiClient),this.files=new JT(this.apiClient),this.operations=new YC(this.apiClient),this.authTokens=new c_(this.apiClient),this.tunings=new xA(this.apiClient),this.fileSearchStores=new y_(this.apiClient)}}const LA=n=>new DA({apiKey:n}),UA={type:rn.OBJECT,properties:{segments:{type:rn.ARRAY,items:{type:rn.OBJECT,properties:{startTime:{type:rn.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:rn.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:rn.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},PA={type:rn.OBJECT,properties:{segments:{type:rn.ARRAY,items:{type:rn.OBJECT,properties:{startTime:{type:rn.STRING},endTime:{type:rn.STRING},text:{type:rn.STRING},words:{type:rn.ARRAY,items:{type:rn.OBJECT,properties:{text:{type:rn.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:rn.STRING,description:"Start time of the word"},endTime:{type:rn.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function pr(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let b=0;m[1]&&(b=parseFloat("0."+m[1])),o=y*3600+v*60+x+b}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const a=Math.floor(o/60),r=Math.floor(o%60),u=Math.round(o%1*1e3);return`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(u).padStart(3,"0")}`}function HA(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const a=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let u;for(;(u=r.exec(t))!==null;){const h=u[3]!==void 0?u[3]:u[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}a.push({startTime:u[1],endTime:u[2],text:y})}if(a.length>0)return{segments:a};throw new Error("Response structure invalid and could not be repaired.")}async function GA(n,t,o,a,r,u="line"){try{const h=LA(a),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";u==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. DETAILS: Inside each line object, you MUST provide a "words" array.
    4. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    5. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    6. FAST SPEECH / RAP HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating timed lyrics.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${u.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,b={responseMimeType:"application/json",responseSchema:u==="word"?PA:UA,temperature:.1};y&&(b.thinkingConfig={thinkingBudget:1024});const T=new Promise((Y,re)=>{r?.aborted&&re(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>re(new DOMException("Aborted","AbortError")))});let N=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:b}),T])).text;if(!N)throw new Error("Empty response from model");return N=N.trim(),N.startsWith("```json")?N=N.replace(/^```json\s*/,"").replace(/\s*```$/,""):N.startsWith("```")&&(N=N.replace(/^```\s*/,"").replace(/\s*```$/,"")),(HA(N).segments||[]).map(Y=>({startTime:pr(String(Y.startTime)),endTime:pr(String(Y.endTime)),text:String(Y.text),words:Y.words?Y.words.map(re=>({text:String(re.text),startTime:pr(String(re.startTime)),endTime:pr(String(re.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const FA=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:a,onPlayTrack:r,isPlaying:u,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:b})=>{const{confirm:T}=Mr(),A=W.useRef(null),N=W.useRef(new Map),V=H=>{const z=Math.floor(H/60).toString().padStart(2,"0"),pe=(H%60).toFixed(2).padStart(5,"0");return`[${z}:${pe}]`},[B,Y]=W.useState(null),[re,ce]=W.useState({key:null,direction:"asc"}),[Re,ze]=W.useState(new Set),[Le,be]=W.useState(new Set),[Qe,_e]=W.useState(localStorage.getItem("gemini_api_key")||""),[Ke,De]=W.useState("gemini-2.5-flash"),[rt,mt]=W.useState("line"),[Et,wt]=W.useState(!1),F=W.useRef(null),[Te,ne]=W.useState(null);W.useEffect(()=>{Qe&&localStorage.setItem("gemini_api_key",Qe)},[Qe]);const de=o>=0?n[o]:null,yt=de?.parsedLyrics||[],L=W.useMemo(()=>de?yt.findIndex((H,z)=>{if(H.endTime!==void 0)return x>=H.time&&x<H.endTime;const pe=yt[z+1];return x>=H.time&&(!pe||x<pe.time)}):-1,[x,de,yt]);W.useEffect(()=>{if(L!==-1){const H=document.getElementById(`lyric-active-${o}`);H&&H.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[L,o]);const le=H=>{if(n.length===0)return;const z=o>=0?n[o]:null,pe=[...n];let Ce="asc";if(H==="random"){ce({key:"random",direction:"asc"});for(let he=pe.length-1;he>0;he--){const ae=Math.floor(Math.random()*(he+1));[pe[he],pe[ae]]=[pe[ae],pe[he]]}}else{re.key===H&&re.direction==="asc"&&(Ce="desc"),ce({key:H,direction:Ce});const he=Ce==="asc"?1:-1;H==="filename"?pe.sort((ae,E)=>he*ae.audioFile.name.localeCompare(E.audioFile.name)):H==="artist"?pe.sort((ae,E)=>he*(ae.metadata.artist||"").localeCompare(E.metadata.artist||"")):H==="title"?pe.sort((ae,E)=>he*(ae.metadata.title||"").localeCompare(E.metadata.title||"")):H==="album"&&pe.sort((ae,E)=>he*(ae.metadata.album||"").localeCompare(E.metadata.album||""))}if(t(pe),z){const he=pe.findIndex(ae=>ae.id===z.id);he!==-1&&a(he)}},ve=W.useCallback(H=>{B!==null&&H.key==="Delete"?(H.preventDefault(),H.stopPropagation(),m?m(B):t(z=>{const pe=[...z];return pe.splice(B,1),pe}),B>=n.length-1&&Y(n.length>1?n.length-2:null)):H.key==="ArrowDown"&&n.length>0?(H.preventDefault(),H.stopPropagation(),Y(z=>z===null?0:Math.min(z+1,n.length-1))):H.key==="ArrowUp"&&n.length>0?(H.preventDefault(),H.stopPropagation(),Y(z=>z===null?0:Math.max(z-1,0))):H.key==="Enter"&&B!==null?(H.preventDefault(),H.stopPropagation(),r(B)):H.key==="Escape"&&Y(null)},[B,n.length,t,r]);W.useEffect(()=>{const H=A.current;if(H)return H.addEventListener("keydown",ve),()=>H.removeEventListener("keydown",ve)},[ve]),W.useEffect(()=>{B!==null&&B>=n.length&&Y(n.length>0?n.length-1:null)},[n.length,B]);const Pe=async H=>{const z=new Map;H.forEach(ae=>{const E=ae.name.split(".").pop()?.toLowerCase(),O=(ae.webkitRelativePath||ae.name).replace(/\.[^/.]+$/,"");z.has(O)||z.set(O,{});const M=z.get(O);["mp3","wav","ogg","flac","m4a"].includes(E||"")?M.audio=ae:["lrc","srt","ttml","xml","json"].includes(E||"")&&(M.lyric=ae)});const pe=[],Ce=async(ae,E)=>new Promise(I=>{qu(()=>import("./jsmediatags.min-Btr8XMW0.js").then(O=>O.j),[]).then(O=>{O.read(ae,{onSuccess:M=>{const{title:ee,artist:D,album:se,picture:_}=M.tags;let ie=null;if(_){const{data:Ie,format:Ye}=_;let nt="";for(let Be=0;Be<Ie.length;Be++)nt+=String.fromCharCode(Ie[Be]);ie=`data:${Ye};base64,${window.btoa(nt)}`}I({title:ee||E,artist:D||"Unknown Artist",album:se||void 0,coverUrl:ie})},onError:()=>{I({title:E,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{I({title:E,artist:"Unknown Artist",coverUrl:null})})}),he=async ae=>{try{const E=await ae.text(),I=ae.name.split(".").pop()?.toLowerCase();if(I==="lrc")return Xl(E);if(I==="srt")return Ql(E);if(I==="ttml"||I==="xml")return es(E);if(I==="json")return h1(E)}catch(E){console.error("Failed to parse lyrics",E)}return[]};for(const[ae,E]of z.entries())if(E.audio){const I=await Ce(E.audio,ae),O=Math.random().toString(36).substr(2,9);let M=[];E.lyric&&(M=await he(E.lyric)),pe.push({id:O,audioFile:E.audio,lyricFile:E.lyric,parsedLyrics:M,metadata:I,duration:0})}if(pe.length>0){const ae=[...n,...pe];t(ae),r(0,!1,ae)}},it=async H=>{if(H.target.files&&H.target.files.length>0){const z=Array.from(H.target.files);await Pe(z),H.target.value=""}},[w,U]=W.useState(!1),J=H=>{H.preventDefault(),H.stopPropagation(),U(!0)},oe=H=>{H.preventDefault(),H.stopPropagation(),U(!1)},Ne=async H=>{if(H.preventDefault(),H.stopPropagation(),U(!1),H.dataTransfer.files&&H.dataTransfer.files.length>0){const z=Array.from(H.dataTransfer.files);await Pe(z)}},Se=H=>{m?m(H):t(z=>{const pe=[...z];return pe.splice(H,1),pe})},Ee=H=>new Promise((z,pe)=>{const Ce=new FileReader;Ce.readAsDataURL(H),Ce.onload=()=>{const he=Ce.result.split(",")[1];z(he)},Ce.onerror=he=>pe(he)}),ke=async H=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(Re.has(H.id)){const he=N.current.get(H.id);he&&he.abort();return}const z=Qe||"PLACEHOLDER_API_KEY";if(z.trim().length!==39){alert(`Invalid API Key length (${z.trim().length}). It must be exactly 39 characters.`),wt(!0);return}ze(he=>new Set(he).add(H.id));const pe=new AbortController;N.current.set(H.id,pe);const Ce=19.5*1024*1024;if(H.audioFile.size>Ce){alert(`File is too large (${(H.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),ze(he=>{const ae=new Set(he);return ae.delete(H.id),ae}),N.current.delete(H.id);return}try{const he=await Ee(H.audioFile);let ae=H.duration||0;if(ae===0)try{ae=await new Promise(O=>{const M=new Audio(URL.createObjectURL(H.audioFile));M.onloadedmetadata=()=>{O(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>{URL.revokeObjectURL(M.src),O(0)}})}catch(O){console.warn("Could not determine duration for AI validation",O)}let I=(await GA(Ke,he,H.audioFile.type,z,pe.signal,rt)).map(O=>({time:Xa(O.startTime),text:O.text,endTime:Xa(O.endTime),words:O.words?O.words.map(M=>({text:M.text,startTime:Xa(M.startTime),endTime:Xa(M.endTime)})):void 0}));ae>0&&(I=I.filter(O=>O.time<ae&&O.time>=0)),t(O=>O.map(M=>M.id===H.id?{...M,parsedLyrics:I.sort((ee,D)=>ee.time-D.time),duration:ae>0?ae:M.duration}:M))}catch(he){if(he.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",he);let ae="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)ae="Connection lost. Please check your internet connection.";else if(he.message){const E=he.message.toLowerCase();E.includes("fetch")||E.includes("network")||E.includes("failed to connect")?ae="Network error. Please check your connection.":(E.includes("api key")||he.message.includes("400")||he.message.includes("401")||he.message.includes("403"))&&(ae="API Key Error: Please check if your key is valid and has credits.")}alert(ae)}}finally{N.current.delete(H.id),ze(he=>{const ae=new Set(he);return ae.delete(H.id),ae})}},fe=async H=>{if(!navigator.onLine){alert("No internet connection.");return}be(z=>new Set(z).add(H.id));try{const z=await qu(()=>import("./index.min-CADoDpUW.js").then(I=>I.i),[]);let pe;const Ce=z.default||z;console.log("SyncLyrics Module:",z);const he=["musixmatch","lrclib","netease"];if(typeof Ce=="function"&&Ce.prototype&&Ce.prototype.getLyrics){console.log("Detected Class usage");const I=new Ce({sources:he});pe=O=>I.getLyrics(O)}else if(Ce.getLyrics&&typeof Ce.getLyrics=="function")console.log("Detected Instance usage"),pe=I=>Ce.getLyrics(I);else if(Ce.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const I=Ce.SyncLyrics;if(typeof I=="function"&&I.prototype&&I.prototype.getLyrics){console.log("Using SyncLyrics as Class");const O=new I({sources:he});pe=M=>O.getLyrics(M)}else if(typeof I=="function")console.log("Using SyncLyrics as Function"),pe=I;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ce=="function")console.log("Detected Function usage"),pe=Ce;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ce}. Keys: ${typeof Ce=="object"?JSON.stringify(Object.keys(Ce)):"N/A"}`);const ae={track:H.metadata.title,artist:H.metadata.artist,album:H.metadata.album,sources:he};console.log("Searching lyrics with options:",ae);const E=await pe(ae);if(E&&typeof E=="string")ge(E,H);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let I=H.duration||0;if(I===0)try{I=await new Promise(D=>{const se=new Audio(URL.createObjectURL(H.audioFile));se.onloadedmetadata=()=>{const _=se.duration;URL.revokeObjectURL(se.src),D(_)},se.onerror=()=>D(0)})}catch(D){console.warn("Could not determine duration for search",D)}const O=new URLSearchParams({artist_name:H.metadata.artist,track_name:H.metadata.title,album_name:H.metadata.album||"",duration:I.toString()}),M=await fetch(`https://lrclib.net/api/get?${O.toString()}`);if(!M.ok){const D=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(H.metadata.title+" "+H.metadata.artist)}`);if(D.ok){const se=await D.json();if(Array.isArray(se)&&se.length>0){const _=se.find(ie=>ie.syncedLyrics);if(_){ge(_.syncedLyrics,H);return}else if(se[0].plainLyrics){ge(se[0].plainLyrics,H);return}}}throw new Error("No lyrics found in fallback source.")}const ee=await M.json();ee.syncedLyrics?ge(ee.syncedLyrics,H):ee.plainLyrics?ge(ee.plainLyrics,H):alert("No lyrics found.")}}catch(z){console.error("Search failed:",z),z.message?.includes("CORS")||z.message?.includes("etwork")||z.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+z.message)}finally{be(z=>{const pe=new Set(z);return pe.delete(H.id),pe})}},ge=(H,z)=>{let pe=Xl(H);if(pe.length===0&&(pe=Ql(H)),pe.length>0){const Ce=pe.some(he=>he.words&&he.words.length>0);console.log(Ce?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(he=>he.map(ae=>ae.id===z.id?{...ae,parsedLyrics:pe,lyricFile:new File([H],`synched-lyrics${Ce?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:ae))}else alert("Lyrics found but could not be parsed.")},Me=(H,z,pe)=>{const Ce=new Blob([H],{type:"application/octet-stream"}),he=URL.createObjectURL(Ce),ae=document.createElement("a");ae.href=he,ae.download=z,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),URL.revokeObjectURL(he)},je=async(H,z)=>{const pe=H.parsedLyrics||[];if(pe.length===0)return;let Ce="";const he=z==="lrc-enhanced"?"lrc":z,ae=`${H.metadata.title||"lyrics"}.${he}`;let E=H.duration||0;if(E===0)try{E=await new Promise(O=>{const M=new Audio(URL.createObjectURL(H.audioFile));M.onloadedmetadata=()=>{O(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>O(0)})}catch(O){console.warn("Could not determine duration for export check",O)}const I=pe.map(O=>({...O,words:O.words?O.words.filter(M=>M.text.trim().length>0).map(M=>({...M})):void 0}));for(let O=0;O<I.length;O++){const M=I[O],ee=I[O+1];if(M.endTime===void 0&&(ee?M.endTime=ee.time:M.endTime=E>0?E:M.time+5),M.words&&M.words.length>0)for(let D=0;D<M.words.length;D++){const se=M.words[D],_=M.words[D+1];(se.endTime===void 0||se.endTime<=se.startTime)&&(_?se.endTime=_.startTime:se.endTime=M.endTime)}}if(z==="txt")Ce=I.map(O=>O.text).join(`
`);else if(z==="json")Ce=JSON.stringify(I,null,2);else if(z==="srt"){const O=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),D=Math.floor(M%3600/60).toString().padStart(2,"0"),se=Math.floor(M%60).toString().padStart(2,"0"),_=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${D}:${se},${_}`};Ce=I.map((M,ee)=>{const D=O(M.time),se=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,_=O(se);return`${ee+1}
${D} --> ${_}
${M.text}
`}).join(`
`)}else if(z==="lrc"){const O=[],M=ee=>{const D=Math.floor(ee/60).toString().padStart(2,"0"),se=(ee%60).toFixed(2).padStart(5,"0");return`[${D}:${se}]`};for(let ee=0;ee<pe.length;ee++){const D=pe[ee],se=pe[ee+1];O.push(`${M(D.time)}${D.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const ie=(D.endTime??D.time+3)+4;(!(E>0)||ie<=E)&&(se?se.time>ie&&O.push(`${M(ie)}`):O.push(`${M(ie)}`))}Ce=O.join(`
`)}else if(z==="lrc-enhanced"){const O=[],M=D=>{const se=Math.floor(D/60).toString().padStart(2,"0"),_=(D%60).toFixed(2).padStart(5,"0");return`[${se}:${_}]`},ee=D=>{const se=Math.floor(D/60).toString().padStart(2,"0"),_=(D%60).toFixed(2).padStart(5,"0");return`<${se}:${_}>`};for(let D=0;D<pe.length;D++){const se=pe[D],_=pe[D+1];let ie="";se.words&&se.words.length>0?se.words.forEach((Be,Lt)=>{const Je=Be.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");ie+=`${ee(Be.startTime)}${Je}`,Lt<se.words.length-1&&!Je.endsWith("-")&&(ie+=" ")}):ie=se.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),O.push(`${M(se.time)}${ie}`);const Ye=(se.endTime??se.time+3)+4;(!(E>0)||Ye<=E)&&(_?_.time>Ye&&O.push(`${M(Ye)}`):O.push(`${M(Ye)}`))}Ce=O.join(`
`)}else if(z==="ttml"){const O=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),D=Math.floor(M%3600/60).toString().padStart(2,"0"),se=Math.floor(M%60).toString().padStart(2,"0"),_=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${D}:${se}.${_}`};Ce=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,I.forEach(M=>{const ee=O(M.time),D=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+3,se=O(D);Ce+=`
      <p begin="${ee}" end="${se}">`,M.words&&M.words.length>0?M.words.forEach(_=>{if(!_.text.trim())return;const ie=O(_.startTime);let Ie=_.endTime;(Ie===void 0||Ie<=_.startTime)&&(Ie=_.startTime+.5);const Ye=O(Ie);let nt=_.text.replace(/[ \t]+/g," ").trim();nt.endsWith("-")||(nt+=" "),Ce+=`
        <span begin="${ie}" end="${Ye}">${nt}</span>`}):Ce+=`
        <span begin="${ee}" end="${se}">${M.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ce+=`
      </p>`}),Ce+=`
    </div>
  </body>
</tt>`}Me(Ce,ae)},Fe=async H=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(z=>z.map(pe=>pe.id===H.id?{...pe,parsedLyrics:[],lyricFile:void 0}:pe))},Ze=async H=>{const z=H.target.files?.[0];if(!(!z||!Te)){try{const pe=await z.text(),Ce=z.name.split(".").pop()?.toLowerCase();let he=[];Ce==="lrc"?he=Xl(pe):Ce==="srt"?he=Ql(pe):(Ce==="ttml"||Ce==="xml")&&(he=es(pe)),he.length>0?t(ae=>ae.map(E=>E.id===Te?{...E,lyricFile:z,parsedLyrics:he}:E)):alert("Could not parse lyrics. Ensure file is .lrc or .srt")}catch(pe){console.error("Failed to load lyrics",pe),alert("Failed to load lyrics file.")}ne(null),H.target.value=""}};return f.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${w?"bg-zinc-800 border-orange-500":""}`,onDragOver:J,onDragLeave:oe,onDrop:Ne,children:[w&&f.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:f.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[f.jsx(qo,{size:48}),f.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),f.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, OGG, FLAC, M4A, LRC, SRT, TTML"})]})}),f.jsx("input",{type:"file",ref:F,className:"hidden",accept:".lrc,.srt,.ttml,.xml",onChange:Ze}),f.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[f.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[f.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[f.jsx(br,{size:16,className:"text-orange-400"}),"Playlist"]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[f.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[f.jsx(fg,{size:14})," Add Files",f.jsx("input",{type:"file",className:"hidden",accept:"audio/*,.lrc,.srt,.ttml,.xml",multiple:!0,onChange:it})]}),f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[f.jsx(nb,{size:14}),f.jsx("input",{type:"file",className:"hidden",multiple:!0,webkitdirectory:"",onChange:it})]})]}),f.jsx("div",{className:"w-px h-4 bg-zinc-700"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>le("filename"),className:`p-1 rounded transition-colors ${re.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${re.key==="filename"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx(xr,{size:14,className:re.key==="filename"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>le("artist"),className:`p-1 rounded transition-colors ${re.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${re.key==="artist"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx(l1,{size:14,className:re.key==="artist"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>le("title"),className:`p-1 rounded transition-colors ${re.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${re.key==="title"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx($l,{size:14,className:re.key==="title"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>le("album"),className:`p-1 rounded transition-colors ${re.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${re.key==="album"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:f.jsx($x,{size:14,className:re.key==="album"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),f.jsx("button",{onClick:()=>le("random"),className:`p-1 rounded transition-colors ${re.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:f.jsx(Hb,{size:14})})]})]}),f.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[f.jsx("button",{onClick:()=>wt(!Et),className:`p-1 rounded transition-colors ${Et?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:f.jsx(ub,{size:14})}),Et&&f.jsx("input",{type:Qe?"password":"text",value:Qe,onChange:H=>_e(H.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),f.jsx("div",{className:"relative group",children:f.jsxs("select",{value:Ke,onChange:H=>De(H.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[f.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),f.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),f.jsx("div",{className:"relative group",children:f.jsxs("select",{value:rt,onChange:H=>mt(H.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[f.jsx("option",{value:"line",children:"Line"}),f.jsx("option",{value:"word",children:"Word"})]})}),f.jsx("button",{onClick:async()=>{n.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:f.jsx(Sr,{size:14})}),f.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),f.jsx("button",{onClick:b,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:f.jsx(wi,{size:14})})]})]}),f.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[f.jsx(br,{size:32,className:"mb-2 opacity-50"}),f.jsx("p",{children:"Playlist is empty"}),f.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((H,z)=>{const pe=z===o,Ce=z===B,he=H.parsedLyrics||[],ae=pe?he.findIndex((E,I)=>{if(E.endTime!==void 0)return x>=E.time&&x<E.endTime;const O=he[I+1];return x>=E.time&&(!O||x<O.time)}):-1;return f.jsxs("div",{onClick:()=>Y(z),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${pe?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ce?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[f.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),pe?h():r(z)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${pe?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:pe?u?f.jsx(dg,{size:14}):f.jsx($u,{size:14}):f.jsx($u,{size:14})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:`text-xs font-medium truncate ${pe?"text-orange-100":"text-zinc-300"}`,title:H.audioFile.name,children:H.metadata.title}),f.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:H.metadata.artist,children:H.metadata.artist})]})]}),f.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[f.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(H.audioFile.size/1024/1024).toFixed(1),"MB"]}),H.lyricFile?f.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:H.lyricFile.name,children:[f.jsx(xr,{size:7}),f.jsx("span",{className:"truncate max-w-[80px]",children:H.lyricFile.name})]}):f.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),f.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:he.length>0?f.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:he.map((E,I)=>{const O=I===ae;return f.jsxs("div",{id:O?`lyric-active-${z}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${O?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${V(E.time)} - ${E.text}`,onClick:M=>{M.stopPropagation(),z!==o?(r(z),setTimeout(()=>y(E.time),150)):y(E.time)},children:[f.jsx("span",{className:`font-mono text-[8px] ${O?"text-orange-200":"text-zinc-500"}`,children:V(E.time)}),f.jsx("span",{className:`truncate max-w-[120px] ${O?"text-white font-medium":"text-zinc-400"}`,children:E.text||""})]},I)})}):f.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),f.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),ne(H.id),F.current&&(F.current.value=""),F.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:f.jsx(qo,{size:14})}),f.jsx("button",{onClick:E=>{E.stopPropagation(),fe(H)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${Le.has(H.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:Le.has(H.id),children:Le.has(H.id)?f.jsx(m0,{size:14,className:"animate-spin"}):f.jsx(Lb,{size:14})}),f.jsx("button",{onClick:E=>{E.stopPropagation(),ke(H)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${Re.has(H.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:Re.has(H.id)?"Stop Transcription":"AI Sync Transcribe",children:Re.has(H.id)?f.jsxs(f.Fragment,{children:[f.jsx(m0,{size:14,className:"animate-spin group-hover/btn:hidden"}),f.jsx(Ku,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):f.jsx(Ju,{size:14})}),he.length>0&&f.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[f.jsx("button",{onClick:E=>{E.stopPropagation(),je(H,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(H,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(H,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(H,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(H,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),je(H,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),f.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Fe(H)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Se(z)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:f.jsx(Sr,{size:12})})]},H.id)})})]})},Ed=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],BA=()=>{const n=new Set;if(Ed.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const a=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=a,document.head.appendChild(r);const u=document.createElement("link");u.rel="preconnect",u.href="https://fonts.googleapis.com",document.head.appendChild(u);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},Cd=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],Nr={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},Vu=Cd.flatMap(n=>n.options.map(t=>t.value)),Zm={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,lyricLineHeight:1.2,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1,useRealColorMedia:!1},Wm=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],eg=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],tg=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],ng=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],ud=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],dd=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},ig=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],fd=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],sy=["none","upper","lower","title","sentence","invert"],og=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],lg=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],VA=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Ti=({value:n,onChange:t,groups:o})=>{const[a,r]=W.useState(!1),[u,h]=W.useState(n);W.useEffect(()=>{a||h(n)},[n,a]);const y=b=>{for(const T of o){const A=T.options.find(N=>N.value===b);if(A)return A.label}return b},v=b=>{t(b)},m=()=>{a&&t(u),r(!1)},x=b=>{t(b),h(b),r(!1)};return f.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[f.jsxs("button",{onClick:()=>r(!a),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:a?"Close List":"Expand List",children:[f.jsx("span",{className:"truncate",children:y(n)}),f.jsx(ts,{size:14,className:`transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&f.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(b=>f.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[f.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),f.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>f.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},b.label))})]})},OA=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const a of t){const r=a.options.find(u=>u.value===n);if(r)return r.label}return"Select Font"},qA=({value:n,onChange:t,customFontName:o,groups:a=Ed})=>{const[r,u]=W.useState(!1),[h,y]=W.useState(n);W.useEffect(()=>{r||y(n)},[n,r]);const v=b=>{t(b)},m=()=>{r&&t(h)},x=b=>{t(b),y(b),u(!1)};return f.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[f.jsxs("button",{onClick:()=>u(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[f.jsx("span",{className:"truncate",style:{fontFamily:n},children:OA(n,a,o)}),f.jsx(ts,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&f.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&f.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[f.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),f.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:f.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),a.map(b=>f.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[f.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),f.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>f.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:f.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},b.label))]})]})},jA=Object.values(Nr).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),$A=[{label:"Visual Presets",options:jA},...Ed],YA=({config:n,setConfig:t,preset:o,setPreset:a,onClose:r,isPlaylistMode:u,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:b,setResolution:T,aspectRatio:A,setAspectRatio:N,renderCodec:V,setRenderCodec:B,supportedCodecs:Y,renderQuality:re,setRenderQuality:ce,renderFps:Re,setRenderFps:ze,renderEngine:Le,setRenderEngine:be,ffmpegCodec:Qe,setFfmpegCodec:_e})=>{const{toast:Ke,confirm:De}=Mr(),rt=W.useRef(null),mt=W.useRef(null),Et=W.useRef(null),wt=W.useRef(null),F=W.useRef(null),[Te,ne]=W.useState(!1),de=(w,U)=>{let J={...n,[w]:U};if(w==="highlightEffect"){const Ne=dd(U);J.useCustomHighlightColors=!1,Ne?(J.highlightColor=Ne.color,J.highlightBackground=Ne.bg):(J.highlightColor="#fb923c",J.highlightBackground="#fb923c")}t(J)},yt=w=>{a(w);const U=Nr[w];U&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...U})},L=w=>{const U=w.target.files?.[0];if(U){const J=new FileReader;J.onload=oe=>{oe.target?.result&&de("channelInfoImage",oe.target.result)},J.readAsDataURL(U)}w.target.value=""},le=w=>{const U=w.target.files?.[0];if(U){const J=new FileReader;J.onload=oe=>{oe.target?.result&&de("backgroundImage",oe.target.result)},J.readAsDataURL(U)}w.target.value=""},ve=async()=>{await De("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(Zm),a("default"),T("1080p"),N("16:9"),B("auto"),ze(30),ce("med"),be("mediarecorder"),_e("h264"),Et.current&&(Et.current.value=""),wt.current&&(wt.current.value=""),x(),de("enableGradientOverlay",!1),de("useRealColorMedia",!1),Ke.success("All settings have been reset to default."))},Pe=()=>{const w=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),U={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:b,aspectRatio:A,renderCodec:V,renderFps:Re,renderQuality:re,renderEngine:Le,ffmpegCodec:Qe,customFontName:v};U.backgroundSource!=="image"&&(U.backgroundImage=void 0),U.showChannelInfo||(U.channelInfoImage=void 0);try{const J=JSON.stringify(U,null,2),oe=new Blob([J],{type:"application/json"}),Ne=URL.createObjectURL(oe),Se=document.createElement("a");Se.setAttribute("href",Ne),Se.setAttribute("download",`render_settings_${w}.json`),document.body.appendChild(Se),Se.click(),Se.remove(),URL.revokeObjectURL(Ne)}catch(J){console.error("Export failed:",J),Ke.error("Failed to export settings.")}},it=w=>{const U=w.target.files?.[0];if(!U)return;const J=new FileReader;J.onload=oe=>{try{const Ne=JSON.parse(oe.target?.result);if(Ne&&typeof Ne=="object"){const{resolution:Se,aspectRatio:Ee,renderCodec:ke,renderFps:fe,renderQuality:ge,renderEngine:Me,ffmpegCodec:je,preset:Fe,customFontName:Ze,...H}=Ne,z={...Zm,...H};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration","lyricLineHeight"].forEach(ae=>{z[ae]!==void 0&&(z[ae]=Number(z[ae]))}),z.useCustomHighlightColors!==void 0&&(z.useCustomHighlightColors=!!z.useCustomHighlightColors),z.useRealColorMedia!==void 0&&(z.useRealColorMedia=!!z.useRealColorMedia),z.showChannelInfo!==void 0&&(z.showChannelInfo=!!z.showChannelInfo),z.showIntro!==void 0&&(z.showIntro=!!z.showIntro),z.showTitle!==void 0&&(z.showTitle=!!z.showTitle),z.showArtist!==void 0&&(z.showArtist=!!z.showArtist),z.showCover!==void 0&&(z.showCover=!!z.showCover),z.showLyrics!==void 0&&(z.showLyrics=!!z.showLyrics),z.highlightEffect&&(!z.highlightColor||!z.highlightBackground)){const ae=dd(z.highlightEffect);ae&&(z.highlightColor||(z.highlightColor=ae.color),z.highlightBackground||(z.highlightBackground=ae.bg))}const Ce=(ae,E)=>E.some(I=>I.options.some(O=>O.value===ae));z.textEffect&&!Ce(z.textEffect,Wm)&&(z.textEffect="shadow"),z.textAnimation&&!Ce(z.textAnimation,eg)&&(z.textAnimation="none"),z.transitionEffect&&!Ce(z.transitionEffect,tg)&&(z.transitionEffect="none"),z.visualTransitionType&&!Ce(z.visualTransitionType,ng)&&(z.visualTransitionType="none"),z.highlightEffect&&!Ce(z.highlightEffect,ud)&&(z.highlightEffect="karaoke"),z.backgroundSource&&!Ce(z.backgroundSource,ig)&&(z.backgroundSource="custom"),["current","playlist"].includes(z.renderMode)||(z.renderMode="current"),["left","center","right"].includes(z.textAlign)||(z.textAlign="center"),["top","center","bottom"].includes(z.contentPosition)||(z.contentPosition="center"),z.lyricDisplayMode&&!Ce(z.lyricDisplayMode,fd)&&(z.lyricDisplayMode="all"),["normal","bold"].includes(z.fontWeight)||(z.fontWeight="bold"),["normal","italic"].includes(z.fontStyle)||(z.fontStyle="normal"),["none","underline","line-through"].includes(z.textDecoration)||(z.textDecoration="none"),sy.includes(z.textCase)||(z.textCase="none"),["auto","manual"].includes(z.introMode)||(z.introMode="auto"),z.lyricStyleTarget&&!["active-only","all"].includes(z.lyricStyleTarget)&&(z.lyricStyleTarget="active-only");const he=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];z.infoPosition&&!he.includes(z.infoPosition)&&(z.infoPosition="top-left"),z.infoStyle&&!Ce(z.infoStyle,og)&&(z.infoStyle="classic"),z.channelInfoPosition&&!he.includes(z.channelInfoPosition)&&(z.channelInfoPosition="bottom-right"),z.channelInfoStyle&&!Ce(z.channelInfoStyle,lg)&&(z.channelInfoStyle="classic"),t(z),Se&&T(Se),Ee&&N(Ee),ke&&B(ke),fe&&ze(Number(fe)),ge&&ce(ge),Me&&be(Me),je&&_e(je),a(Fe||"custom"),Ze&&Ze!==v?Ke.success(`Settings loaded. Note: Config used font "${Ze}".`):Ke.success("Settings loaded successfully!")}}catch(Ne){console.error(Ne),Ke.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},J.readAsText(U),w.target.value=""};return W.useEffect(()=>{const w=U=>{rt.current&&!rt.current.contains(U.target)&&r()};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[r]),f.jsxs("div",{ref:rt,onMouseDown:w=>w.stopPropagation(),className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[f.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(gr,{size:18,className:"text-purple-400"}),f.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{ref:F,type:"file",accept:".json,.txt",className:"hidden",onChange:it}),f.jsx("button",{onClick:()=>F.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:f.jsx(qo,{size:16})}),f.jsx("button",{onClick:Pe,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:f.jsx(Jx,{size:16})}),f.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),f.jsx("button",{onClick:ve,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:f.jsx(Yu,{size:16})}),f.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:f.jsx(wi,{size:20})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Ju,{size:14})," Visual Preset"]}),f.jsx(Ti,{value:o,onChange:w=>yt(w),groups:Cd})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Wa,{size:14})," Render Scope"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("button",{onClick:()=>de("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),f.jsx("button",{onClick:()=>de("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(p0,{size:14})," Background Source"]}),f.jsx(Ti,{value:n.backgroundSource,onChange:w=>{w==="gradient"&&!n.backgroundGradient?(a("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):w==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(a("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):w==="color"&&!n.backgroundColor?(a("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):de("backgroundSource",w)},groups:ig}),n.backgroundSource==="smart-gradient"&&f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),f.jsx("input",{type:"text",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.backgroundColor,onChange:w=>de("backgroundColor",w.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&f.jsx("input",{type:"text",value:n.backgroundGradient,onChange:w=>de("backgroundGradient",w.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&f.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),f.jsx("input",{ref:wt,type:"file",accept:"image/*",onChange:le,className:"hidden"}),n.backgroundImage?f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:f.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),f.jsx("button",{onClick:()=>de("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),f.jsx("button",{onClick:()=>wt.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:f.jsx(gr,{size:14})})]}):f.jsxs("button",{onClick:()=>wt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[f.jsx(qo,{size:14}),f.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(vb,{size:14})," Background Effects"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[f.jsx("button",{onClick:()=>de("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),f.jsx("button",{onClick:()=>de("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&f.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),f.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:f.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:w=>de("backgroundBlurStrength",parseInt(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),f.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Real Color Media Source"}),f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Disable dark dimming effect on background"})]}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.useRealColorMedia??!1,onChange:w=>de("useRealColorMedia",w.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),f.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),f.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.enableGradientOverlay??!1,onChange:w=>de("enableGradientOverlay",w.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(xr,{size:14})," Lyric Display Mode"]}),f.jsx(Ti,{value:n.lyricDisplayMode,onChange:w=>de("lyricDisplayMode",w),groups:fd})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Ju,{size:14})," Highlight Effect"]}),f.jsx(Ti,{value:n.highlightEffect||"none",onChange:w=>{de("highlightEffect",w)},groups:ud}),n.highlightEffect&&n.highlightEffect!=="none"&&f.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[f.jsxs("button",{onClick:()=>de("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[f.jsx("span",{children:"Custom Colors"}),f.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:f.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&f.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:w=>de("highlightColor",w.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:w=>de("highlightColor",w.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:w=>de("highlightBackground",w.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:w=>de("highlightBackground",w.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(bb,{size:14})," Visible Elements"]}),f.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(w=>f.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[f.jsx("span",{className:"text-xs text-zinc-300",children:w.label}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n[w.key],onChange:U=>de(w.key,U.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},w.key))})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Oo,{size:14})," Intro Settings"]}),f.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[f.jsx("button",{onClick:()=>de("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),f.jsx("button",{onClick:()=>de("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&f.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),f.jsx("textarea",{value:n.introText,onChange:w=>de("introText",w.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(p0,{size:14})," Channel Info / Watermark"]}),f.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[f.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[f.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),f.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:w=>de("showChannelInfo",w.target.checked),className:"sr-only peer"}),f.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&f.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),f.jsx("input",{ref:Et,type:"file",accept:"image/*",onChange:L,className:"hidden"}),n.channelInfoImage?f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:f.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),f.jsx("button",{onClick:()=>de("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),f.jsx("button",{onClick:()=>Et.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:f.jsx(gr,{size:14})})]}):f.jsxs("button",{onClick:()=>Et.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[f.jsx(qo,{size:14}),f.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),f.jsx("textarea",{value:n.channelInfoText??"",onChange:w=>de("channelInfoText",w.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>de("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),f.jsx(Ti,{value:n.channelInfoStyle||"classic",onChange:w=>de("channelInfoStyle",w),groups:lg})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Za,{size:12})}),f.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:w=>de("channelInfoMarginScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Za,{size:12})}),f.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:w=>de("channelInfoSizeScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx($l,{size:14})," Song Info Design"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>de("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),f.jsx("button",{onClick:()=>de("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:f.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),f.jsx(Ti,{value:n.infoStyle||"classic",onChange:w=>de("infoStyle",w),groups:og})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Za,{size:12})}),f.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:w=>de("infoMarginScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Oo,{size:12})}),f.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:w=>de("infoSizeScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Oo,{size:14})," Typography & Style"]}),f.jsxs("div",{className:"space-y-4 pt-1",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),f.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(w=>f.jsx("button",{onClick:()=>de("textAlign",w),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===w?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:w},w))})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[f.jsx("button",{onClick:()=>de("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:f.jsx(Ix,{size:14})}),f.jsx("button",{onClick:()=>de("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:f.jsx(f0,{size:14})}),f.jsx("button",{onClick:()=>de("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:f.jsx(Rx,{size:14})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[f.jsx("button",{onClick:()=>de("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:f.jsx(Dx,{size:14})}),f.jsx("button",{onClick:()=>de("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:f.jsx(rb,{size:14})}),f.jsx("button",{onClick:()=>de("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:f.jsx(e1,{size:14})}),f.jsx("button",{onClick:()=>de("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:f.jsx(Jb,{size:14})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[f.jsx("button",{onClick:()=>de("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),f.jsx("button",{onClick:()=>de("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),f.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>de("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),f.jsx("button",{onClick:()=>de("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),f.jsx("button",{onClick:()=>de("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),f.jsx("button",{onClick:()=>de("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),f.jsx("button",{onClick:()=>de("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),f.jsx("button",{onClick:()=>de("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),f.jsx(qA,{value:n.fontFamily,onChange:w=>de("fontFamily",w),customFontName:v,groups:$A})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),f.jsx("input",{ref:mt,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[f.jsx(Oo,{size:14,className:"text-purple-400 shrink-0"}),f.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),f.jsx("button",{onClick:()=>{de("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),f.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:f.jsx(Sr,{size:14})})]}):f.jsxs("button",{onClick:()=>mt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[f.jsx(qo,{size:14}),f.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(Oo,{size:12})}),f.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:w=>de("fontSizeScale",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),f.jsx("span",{className:"text-zinc-300",children:f.jsx(Oo,{size:16})})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Current Line Height"}),f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.lyricLineHeight||1.2).toFixed(1),"x"]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[f.jsx("span",{className:"text-zinc-500",children:f.jsx(f0,{size:12})}),f.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:n.lyricLineHeight||1.2,onChange:w=>de("lyricLineHeight",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&f.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),f.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[f.jsx("input",{type:"color",value:n.fontColor,onChange:w=>de("fontColor",w.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),f.jsx("input",{type:"text",value:n.fontColor,onChange:w=>de("fontColor",w.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),f.jsx(Ti,{value:n.textEffect,onChange:w=>de("textEffect",w),groups:Wm})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),f.jsx(Ti,{value:n.textAnimation,onChange:w=>de("textAnimation",w),groups:eg})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),f.jsx(Ti,{value:n.transitionEffect,onChange:w=>de("transitionEffect",w),groups:tg})]}),f.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),n.visualTransitionDuration&&f.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.visualTransitionDuration.toFixed(1),"s"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Ti,{value:n.visualTransitionType||"none",onChange:w=>de("visualTransitionType",w),groups:ng})}),n.visualTransitionType&&n.visualTransitionType!=="none"&&f.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:f.jsx("input",{type:"range",min:"0.1",max:"5.0",step:"0.1",value:n.visualTransitionDuration||1,onChange:w=>de("visualTransitionDuration",parseFloat(w.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),f.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[f.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Wa,{size:14})," Output Settings"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),f.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),f.jsx(Ti,{value:String(Re),onChange:w=>ze(parseInt(w)),groups:VA})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),f.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(w=>f.jsx("button",{onClick:()=>N(w),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===w?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:w},w))})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Engine"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>be("mediarecorder"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Le==="mediarecorder"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses browser's MediaRecorder API. Renders in realtime while playing audio.",children:"MediaRecorder"}),f.jsx("button",{onClick:()=>be("ffmpeg"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Le==="ffmpeg"?"bg-orange-500 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses FFmpeg WASM. Frame-by-frame rendering with professional codecs. Faster than realtime!",children:"FFmpeg "})]}),f.jsx("p",{className:"text-[9px] text-zinc-600 ml-1 leading-tight",children:Le==="mediarecorder"?"Realtime recording while audio plays. Browser-dependent codecs.":"Frame-by-frame capture. With pro codecs (H.264, H.265)."})]}),Le==="mediarecorder"?f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),f.jsx(Ti,{value:V,onChange:w=>B(w),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...Y]}]})]}):f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FFmpeg Codec"}),f.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{label:"H.264",value:"h264",desc:"Best Compatibility"},{label:"H.265",value:"h265",desc:"Higher Quality"}].map(w=>f.jsxs("button",{onClick:()=>_e(w.value),className:`py-2 px-2 rounded-md text-[10px] font-medium transition-all border text-left ${Qe===w.value?"bg-orange-500 border-orange-400 text-white":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"}`,title:w.desc,children:[f.jsx("div",{className:"font-bold",children:w.label}),f.jsx("div",{className:"text-[8px] opacity-75",children:w.desc})]},w.value))})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),f.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>ce("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),f.jsx("button",{onClick:()=>ce("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),f.jsx("button",{onClick:()=>ce("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),f.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[f.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[f.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",f.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),f.jsxs("button",{onClick:()=>ne(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[f.jsx(h0,{size:14})," View Keyboard Shortcuts"]})]})]}),Te&&f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>ne(!1),children:f.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:w=>w.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[f.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[f.jsx(h0,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),f.jsx("button",{onClick:()=>ne(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:f.jsx(wi,{size:18})})]}),f.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),f.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[f.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),f.jsxs("div",{className:"flex gap-1 items-center",children:[f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),f.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),f.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),f.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),f.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:f.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",f.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),f.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[f.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[f.jsx(Wa,{size:16})," Start Render"]}),f.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},ry=(n,t,o,a,r,u,h,y,v,m,x,b,T,A,N,V=!0,B=!0)=>{const Y=w=>{const U=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return U?{r:parseInt(U[1],16),g:parseInt(U[2],16),b:parseInt(U[3],16)}:{r:255,g:255,b:255}},re=w=>{let U=0,J=0;if(w instanceof ImageBitmap?(U=w.width,J=w.height):w instanceof HTMLVideoElement?(U=w.videoWidth,J=w.videoHeight):(U=w.width,J=w.height),U&&J){const oe=Math.max(t/U,o/J),Ne=t/2-U/2*oe,Se=o/2-J/2*oe;n.drawImage(w,Ne,Se,U*oe,J*oe)}},ce=(w,U,J)=>{if(U.includes(`
`))return U.split(`
`).flatMap(ke=>ce(w,ke,J));const oe=U.split(" ");let Ne=[],Se=oe[0]||"";for(let ke=1;ke<oe.length;ke++){const fe=oe[ke],ge=Se+" "+fe;w.measureText(ge).width<J?Se=ge:(Ne.push(Se),Se=fe)}Ne.push(Se);const Ee=[];for(const ke of Ne)if(w.measureText(ke).width<=J)Ee.push(ke);else{let fe="";for(const ge of ke)w.measureText(fe+ge).width<=J?fe+=ge:(fe&&Ee.push(fe),fe=ge);fe&&Ee.push(fe)}return Ee},Re=(w,U,J,oe,Ne,Se)=>{if(Ne==="vhs"&&w instanceof CanvasRenderingContext2D)w.save(),w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(U,J-2,oe),w.fillStyle="#00ff00",w.fillText(U,J,oe),w.fillStyle="#0000ff",w.fillText(U,J+2,oe),w.restore();else if(Ne==="3d"){const Ee=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let ke=1;ke<=4;ke++)w.fillText(U,J+ke,oe+ke);w.fillStyle=Ee,w.fillText(U,J,oe)}else if(Ne==="neon"){const Ee=w.fillStyle;w.shadowColor=Ee,w.shadowBlur=20,w.fillText(U,J,oe),w.shadowBlur=40,w.fillText(U,J,oe)}else if(Ne==="outline")w.strokeText(U,J,oe),w.fillText(U,J,oe);else if(Ne==="gradient"){const Ee=w.createLinearGradient(J,oe-20,J,oe+20);Ee.addColorStop(0,w.fillStyle),Ee.addColorStop(1,"#ffffff"),w.fillStyle=Ee,w.fillText(U,J,oe)}else if(Ne==="fire")w.save(),w.shadowBlur=5,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(U,J,oe),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(U,J+1,oe-1),w.restore();else if(Ne==="emboss")w.fillStyle="rgba(255,255,255,0.7)",w.fillText(U,J-1,oe-1),w.fillStyle="rgba(0,0,0,0.7)",w.fillText(U,J+1,oe+1),w.fillStyle="rgba(128,128,128,0.5)",w.fillText(U,J,oe);else if(Ne==="mirror")w.fillText(U,J,oe),w.save(),w.translate(J,oe),w.scale(1,-1),w.translate(-J,-oe),w.globalAlpha*=.2,w.fillText(U,J,oe-40),w.restore();else if(Ne==="neon-multi")w.fillStyle,w.shadowBlur=10,w.shadowColor="#fff",w.fillText(U,J,oe),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(U,J,oe),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(U,J,oe);else if(Ne==="gold"){const Ee=w.createLinearGradient(J,oe-20,J,oe+20);Ee.addColorStop(0,"#d4af37"),Ee.addColorStop(1,"#C5A028"),w.fillStyle=Ee,w.fillText(U,J,oe)}else if(Ne==="chrome"){const Ee=w.createLinearGradient(J,oe-20,J,oe+20);Ee.addColorStop(0,"#ebebeb"),Ee.addColorStop(.5,"#616161"),Ee.addColorStop(.51,"#ebebeb"),Ee.addColorStop(1,"#ebebeb"),w.fillStyle=Ee,w.fillText(U,J,oe)}else if(Ne==="frozen")w.shadowColor="#03A9F4",w.shadowBlur=20,w.fillStyle="#ffffff",w.fillText(U,J,oe);else if(Ne==="rainbow"){const Ee=w.createLinearGradient(J-100,oe,J+100,oe);Ee.addColorStop(0,"violet"),Ee.addColorStop(.16,"indigo"),Ee.addColorStop(.32,"blue"),Ee.addColorStop(.48,"green"),Ee.addColorStop(.64,"yellow"),Ee.addColorStop(.8,"orange"),Ee.addColorStop(1,"red"),w.fillStyle=Ee,w.fillText(U,J,oe)}else Ne==="retro"?(w.fillStyle="#ff00ff",w.shadowColor="#00ffff",w.shadowBlur=0,w.shadowOffsetX=4,w.shadowOffsetY=4,w.fillText(U,J,oe)):Ne==="hologram"?(w.fillStyle="rgba(0, 255, 255, 0.7)",w.shadowColor="rgba(0,255,255,0.5)",w.shadowBlur=10,w.fillText(U,J,oe)):(Ne==="comic"&&(w.lineWidth=3,w.strokeStyle="#000000",w.strokeText(U,J,oe),w.fillStyle="#ffcc00"),w.fillText(U,J,oe));if(Se&&Se!=="none"){const ke=w.measureText(U).width;let fe=J;if(w.textAlign==="center"?fe=J-ke/2:w.textAlign==="right"&&(fe=J-ke),w.save(),w.beginPath(),w.lineWidth=Math.max(2,4*ne),w.strokeStyle=w.fillStyle,Se.includes("line-through")&&(w.moveTo(fe,oe),w.lineTo(fe+ke,oe)),Se.includes("underline")){const ge=w.font.match(/(\d+(\.\d+)?)px/),Me=ge?parseFloat(ge[1]):50,je=oe+Me*.4;w.moveTo(fe,je),w.lineTo(fe+ke,je)}w.stroke(),w.restore()}},ze=(w,U,J,oe,Ne,Se,Ee,ke,fe,ge,Me,je,Fe)=>{const Ze=ke?.textCase||"none",H=(_,ie)=>{if(!_)return _;if(Ze==="upper")return _.toUpperCase();if(Ze==="lower")return _.toLowerCase();if(Ze==="title")return _.replace(/\w\S*/g,Ie=>Ie.charAt(0).toUpperCase()+Ie.substr(1).toLowerCase());if(Ze==="sentence"){const Ie=_.toLowerCase();return ie?Ie.charAt(0).toUpperCase()+Ie.slice(1):Ie}return Ze==="invert"?_.replace(/\w\S*/g,Ie=>Ie.charAt(0).toLowerCase()+Ie.slice(1).toUpperCase()):_};let z=U.words||[];if(z.length===0){const _=U.text.split(`
`);z=[],_.forEach((ie,Ie)=>{const Ye=ie.split(" ").map(nt=>({text:nt,startTime:U.time,endTime:U.endTime||U.time+3}));z.push(...Ye),Ie<_.length-1&&z.push({text:`
`,startTime:U.time,endTime:U.endTime})})}const pe=z.filter(_=>_.text===`
`||_.text.trim().length>0).map((_,ie)=>({..._,text:_.text===`
`?`
`:H(_.text,ie===0).trim()}));w.font=`${je} ${Me} ${ge}px ${fe}`;const Ce=[];let he=[],ae=0,E=.3;["default","custom"].includes(m)?E=.25:m==="monospace"&&(E=.5);const I=w.measureText("M").width*E;pe.forEach((_,ie)=>{if(_.text===`
`){he.length>0&&Ce.push(he),he=[],ae=0;return}const Ie=w.measureText(_.text).width;let nt=!_.text.endsWith(" ");const Be=/[-]$/,Lt=/^[-]/;Be.test(_.text.trim())&&(nt=!1);const Je=pe[ie+1];Je&&(Lt.test(Je.text.trim())||Je.text===`
`)&&(nt=!1);const Jt=nt?I:0;ae+Ie>Ne&&he.length>0&&(Ce.push(he),he=[],ae=0),he.push(_),ae+=Ie+Jt}),he.length>0&&Ce.push(he);const O=oe-(Ce.length-1)*Se/2;let M=ke.highlightColor||"#fb923c",ee=ke.highlightBackground||"#ffffff";const D=ke.highlightEffect||"none";ke.useCustomHighlightColors||(D.includes("blue")||D.includes("cyan")?(M="#3b82f6",ee="#3b82f6"):D.includes("purple")?(M="#a855f7",ee="#a855f7"):D.includes("green")?(M="#22c55e",ee="#22c55e"):D.includes("pink")?(M="#ec4899",ee="#ec4899"):D.includes("neon")?(M="#ffffff",ee="#ffffff"):D.includes("gold")?(M="#FFD700",ee="#B8860B"):D.includes("chrome")?(M="#E0E0E0",ee="#757575"):D.includes("fire")?(M="#FF4500",ee="#FF0000"):D.includes("glass")?(M="#ffffff",ee="rgba(255,255,255,0.1)"):D==="karaoke"&&(M="#fb923c",ee="#fb923c"));let se=ke.fontColor||"#ffffff";Ce.forEach((_,ie)=>{const Ie=O+ie*Se;let Ye=0;_.forEach((Be,Lt)=>{if(Ye+=w.measureText(Be.text).width,Lt<_.length-1){let Jt=!Be.text.endsWith(" ");const Mt=/[-]$/,ot=/^[-]/;Mt.test(Be.text.trim())&&(Jt=!1);const Ae=_[Lt+1];Ae&&ot.test(Ae.text.trim())&&(Jt=!1),Ye+=Jt?I:0}});let nt=J;w.textAlign==="center"?nt=J-Ye/2:w.textAlign==="right"&&(nt=J-Ye),w.save(),w.textAlign="left",w.textBaseline="middle",_.forEach((Be,Lt)=>{const Je=w.measureText(Be.text).width,Jt=Ee>=Be.startTime,Mt=Ee>=Be.startTime&&Ee<Be.endTime;let ot=se;const Ae=D.includes("fill")||D==="karaoke-smooth",ct=Ae?Jt:Mt;if(ct&&D!=="none")if(D==="karaoke-smooth")if(Mt){const We=Be.endTime-Be.startTime,vt=Ee-Be.startTime,$t=Math.max(0,Math.min(1,vt/We)),ei=w.createLinearGradient(nt,0,nt+Je,0);ei.addColorStop($t,M),ei.addColorStop(Math.min(1,$t+.001),se),ot=ei}else ot=M;else ot=M;if(w.save(),w.fillStyle=ot,(Mt||Ae&&Jt)&&(D.includes("pill")||D.includes("box")||D.includes("rounded")||D.includes("fill")||D.includes("glass"))&&ct){const We=D.includes("pill")?ge*.4:ge*.15;w.fillStyle=ee;let vt=4*Fe;D.includes("pill")?vt=999:D.includes("rounded")||D.includes("glass")?vt=8*Fe:D.includes("box")&&(vt=0),D.includes("glass")&&(w.fillStyle="rgba(255,255,255,0.1)",w.shadowColor="rgba(255,255,255,0.2)",w.shadowBlur=10),w.beginPath(),w.roundRect?w.roundRect(nt-We,Ie-Se/2,Je+We*2,Se,vt):w.rect(nt-We,Ie-Se/2,Je+We*2,Se),w.fill(),D.includes("glass")&&(w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.stroke()),D.includes("fill")||D.includes("pill")||D.includes("box")||D.includes("rounded")?(w.fillStyle="#000000",ot="#000000"):w.fillStyle=M}if(ct){if(D.includes("underline")){const We=Math.max(2,ge*.08),vt=Ie+ge*.6;w.fillStyle=M,w.fillRect(nt,vt,Je,We),w.fillStyle=ot}if((D.includes("glow")||D.includes("neon"))&&(D.includes("neon")?(w.fillStyle="#ffffff",w.shadowColor=M,w.shadowBlur=20):(w.shadowColor=M,w.shadowBlur=10)),D.includes("outline")&&(w.strokeStyle=M,w.lineWidth=2*Fe,w.strokeText(Be.text,nt,Ie),w.fillStyle="transparent",D==="karaoke-outline"&&(ot="transparent",w.fillStyle="transparent")),D.includes("shadow")&&(w.shadowColor="#000000",w.shadowOffsetX=3*Fe,w.shadowOffsetY=3*Fe,w.shadowBlur=0),D.includes("gradient")){const We=w.createLinearGradient(nt,Ie-Se/2,nt+Je,Ie+Se/2);We.addColorStop(0,M),We.addColorStop(1,ee),w.fillStyle=We,ot=We}}let ut=Ie,Ve=nt,It=0,bt=1,gt=1,jt=1,vn=0;if(ct){const We=Ee-Be.startTime;if(D.includes("bounce")||D==="karaoke-bounce")ut-=10*Fe;else if(D.includes("wave"))ut+=Math.sin(Ee*5+Lt)*8*Fe;else if(D.includes("pulse")){const $t=1+Math.sin(Ee*6)*.1;bt=$t,gt=$t}else if(D.includes("shake"))Ve+=(Math.random()-.5)*6*Fe,ut+=(Math.random()-.5)*6*Fe;else if(D.includes("wobble"))It=Math.sin(Ee*6)*.1;else if(D.includes("rotate")&&!D.includes("in"))It=Math.sin(Ee*3)*.1;else if(D.includes("spin"))It=Ee*3%(Math.PI*2);else if(D.includes("jello"))bt=1+Math.sin(Ee*8)*.15,gt=1-Math.sin(Ee*8)*.15;else if(D.includes("heartbeat")){const $t=Ee*2%1;($t<.15||$t>.3&&$t<.45)&&(bt=1.15,gt=1.15)}else if(D.includes("flash"))jt=.5+Math.sin(Ee*10)*.5;else if(D.includes("tada")){const $t=Ee*2%1;$t<.1?(It=-.05,bt=.9):$t<.2&&(It=.05,bt=1.1)}else D.includes("swing")?It=Math.sin(Ee*4)*.15:D.includes("glitch")&&Math.sin(Ee*15)>.8&&(Ve+=(Math.random()-.5)*10,ut+=(Math.random()-.5)*10);const vt=.3;if(We<vt){const $t=We/vt,Ht=(Mn=>1-Math.pow(1-Mn,3))($t);if(D.includes("fade"))jt=$t;else if(D.includes("slide"))ut+=(1-Ht)*30*Fe,jt=Ht;else if(D.includes("drop"))ut-=(1-Ht)*50*Fe,jt=Ht;else if(D.includes("zoom")||D.includes("scale")){const Mn=.5+.5*Ht;bt*=Mn,gt*=Mn}else if(D.includes("elastic")){const Mn=$t===0?0:$t===1?1:Math.pow(2,-10*$t)*Math.sin(($t*10-.75)*(2*Math.PI)/3)+1;bt*=Mn,gt*=Mn}else if(D.includes("flip"))gt*=Ht;else if(D.includes("rotate-in"))It+=(1-Ht)*-1,jt=Ht;else if(D.includes("roll"))Ve-=(1-Ht)*50*Fe,It-=(1-Ht)*Math.PI,jt=Ht;else if(D.includes("lightspeed"))Ve+=(1-Ht)*100*Fe,jt=Ht;else if(D.includes("blur"))vn=(1-Ht)*10,jt=Ht;else if(D.includes("shatter")){const Mn=1+(1-Ht)*2;bt*=Mn,gt*=Mn,vn=(1-Ht)*10,jt=Ht}else D.includes("spiral")&&(bt*=Ht,gt*=Ht,It+=(1-Ht)*Math.PI*2)}else D.includes("scale")&&(bt*=1.3,gt*=1.3)}if(w.save(),jt<1&&(w.globalAlpha*=jt),vn>0&&(w.filter=`blur(${vn}px)`),It!==0||bt!==1||gt!==1){const We=Ve+Je/2,vt=ut;w.translate(We,vt),w.rotate(It),w.scale(bt,gt),w.translate(-We,-vt)}if(ct){if(D.includes("gradient")||D.includes("chrome")||D.includes("gold")){const We=w.createLinearGradient(Ve,ut-Se/2,Ve,ut+Se/2);D.includes("gold")?(We.addColorStop(0,"#d4af37"),We.addColorStop(1,"#C5A028")):D.includes("chrome")?(We.addColorStop(0,"#ebebeb"),We.addColorStop(.5,"#616161"),We.addColorStop(.51,"#ebebeb"),We.addColorStop(1,"#ebebeb")):(We.addColorStop(0,M),We.addColorStop(1,ee)),w.fillStyle=We}if(D.includes("shadow")&&(w.save(),w.fillStyle="#000000",w.fillText(Be.text,Ve+2*Fe,ut+2*Fe),w.restore()),D.includes("3d")){const We=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let vt=1;vt<=3;vt++)w.fillText(Be.text,Ve+vt*Fe,ut+vt*Fe);w.fillStyle=We}if(D.includes("neon-multi"))w.shadowBlur=10,w.shadowColor="#fff",w.fillText(Be.text,Ve,ut),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(Be.text,Ve,ut),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(Be.text,Ve,ut);else if(D.includes("retro")||D.includes("vhs")){const We=Math.sin(Ee*5)*2*Fe,vt=Math.random()>.95?(Math.random()-.5)*5:0;w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(Be.text,Ve-3*Fe+We,ut+vt),w.fillStyle="#00ff00",w.fillText(Be.text,Ve+vt,ut-We),w.fillStyle="#0000ff",w.fillText(Be.text,Ve+3*Fe-We,ut+vt)}else if(D.includes("fire")){const We=Math.abs(Math.sin(Ee*15))*5,vt=Math.sin(Ee*20)*1*Fe;w.shadowBlur=5+We,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(Be.text,Ve,ut+vt),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(Be.text,Ve+Math.sin(Ee*25)*1*Fe,ut-1*Fe+vt)}else if(D.includes("typewriter")){const We=Ee-Be.startTime,vt=Be.endTime-Be.startTime,$t=Math.min(1,Math.max(0,We/vt)),ei=Math.floor(Be.text.length*$t),Ht=Be.text.substring(0,ei);D.includes("outline")?(w.strokeStyle=M,w.strokeText(Ht,Ve,ut)):w.fillText(Ht,Ve,ut)}else!D.includes("neon-multi")&&!D.includes("retro")&&!D.includes("vhs")&&!D.includes("fire")&&(D.includes("outline")?(w.strokeStyle=M,w.lineWidth=2*Fe,w.strokeText(Be.text,Ve,ut)):w.fillText(Be.text,Ve,ut))}else w.fillText(Be.text,Ve,ut);const un=ke?.textDecoration||"none";if(un!=="none"){if(w.lineWidth=Math.max(2,3*Fe),w.strokeStyle=ot,w.beginPath(),un.includes("underline")&&!D.includes("underline")){const We=ut+ge*.45;w.moveTo(Ve,We),w.lineTo(Ve+Je,We)}un.includes("line-through")&&(w.moveTo(Ve,ut),w.lineTo(Ve+Je,ut)),w.stroke()}w.restore(),w.restore();let Dn=!Be.text.endsWith(" ");const zi=/[-]$/,Di=/^[-]/;zi.test(Be.text.trim())&&(Dn=!1);const xn=_[Lt+1];xn&&Di.test(xn.text.trim())&&(Dn=!1),nt+=Je+(Dn?I:0)}),w.restore()})},Le=(w,U,J,oe,Ne,Se,Ee,ke)=>{const fe=ce(w,U,Ne),ge=oe-(fe.length-1)*Se/2;fe.forEach((Me,je)=>{const Fe=ge+je*Se;if(Ee==="glass"){const Ze=w.measureText(Me).width;w.save(),w.fillStyle="rgba(255, 255, 255, 0.1)",w.beginPath(),w.roundRect?w.roundRect(J-(w.textAlign==="center"?Ze/2:w.textAlign==="right"?Ze:0)-10,Fe-Se/2,Ze+20,Se,8):w.rect(J-(w.textAlign==="center"?Ze/2:w.textAlign==="right"?Ze:0)-10,Fe-Se/2,Ze+20,Se),w.fill(),w.strokeStyle="rgba(255, 255, 255, 0.2)",w.stroke(),w.restore()}Re(w,Me,J,Fe,Ee,ke)})},be='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',Qe='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',_e='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Ke='"Metal Mania", cursive',De='"Fredoka One", cursive',rt='"Shadows Into Light", cursive',mt='"Dancing Script", cursive',Et='"Orbitron", sans-serif',wt='"UnifrakturMaguntia", cursive';let F=be;m==="classic"?F=Qe:m==="monospace"?F=_e:m==="metal"?F=Ke:m==="kids"?F=De:m==="sad"?F=rt:m==="romantic"?F=mt:m==="tech"?F=Et:m==="gothic"?F=wt:m==="custom"&&(F=N?.fontFamily||be),x&&(F="CustomFont, sans-serif"),N&&N.fontFamily!=="sans-serif"&&(F=N.fontFamily);const Te=t<=o,ne=Math.min(t,o)/1080;if(N&&(N.backgroundSource==="color"||N.backgroundSource==="smart-gradient")?n.fillStyle=N.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),N?.backgroundSource==="gradient"&&N.backgroundGradient)n.fillStyle=N.backgroundGradient,n.fillRect(0,0,t,o);else if(N?.backgroundSource==="smart-gradient"){const w=N.backgroundColor||"#312e81",U=Y(w),J=n.createLinearGradient(0,0,t,o);J.addColorStop(0,w),J.addColorStop(.5,`rgb(${Math.floor(U.r*.6)}, ${Math.floor(U.g*.6)}, ${Math.floor(U.b*.6)})`),J.addColorStop(1,"#000000"),n.fillStyle=J,n.fillRect(0,0,t,o)}else if(N?.backgroundSource==="image"&&N.backgroundImage){const w=y.get("__custom_bg__");w&&re(w)}if(N&&N.backgroundBlurStrength>0?n.filter=`blur(${N.backgroundBlurStrength}px)`:T&&(n.filter="blur(12px)"),!N||N.backgroundSource==="timeline"||N.backgroundSource==="custom"){const w=N?N.backgroundSource==="timeline":!0;let U=!1;if(w){const J=N?.visualTransitionType||"none",oe=N?.visualTransitionDuration||1,Ne=h.filter(Se=>Se.type==="audio"?!1:a>=Se.startTime&&a<Se.endTime||J==="crossfade"&&a>=Se.endTime&&a<Se.endTime+oe);Ne.sort((Se,Ee)=>{const ke=(Se.layer||0)-(Ee.layer||0);return ke!==0?ke:Se.startTime-Ee.startTime}),Ne.length>0&&(Ne.forEach(Se=>{const Ee=Se.layer||0;if(N&&N.layerVisibility?.visual?.[Ee]===!1)return;const ke=Se.type==="video"?v.get(Se.id):null,fe=Se.type!=="video"?y.get(Se.id):null;let ge=1;if(J!=="none"){if(a<Se.startTime+oe){const Me=(a-Se.startTime)/oe;ge=Math.max(0,Math.min(1,Me))}if(a>=Se.endTime){let Me=!1;if(J==="crossfade"&&(Me=h.some(je=>je.id!==Se.id&&(je.layer||0)===(Se.layer||0)&&je.startTime>=Se.endTime-.1&&je.startTime<Se.endTime+.2)),!Me){const Fe=1-(a-Se.endTime)/oe;ge=Math.min(ge,Math.max(0,Math.min(1,Fe)))}}else if(J==="fade-to-black"&&a>Se.endTime-oe){const Me=(Se.endTime-a)/oe;ge=Math.min(ge,Math.max(0,Math.min(1,Me)))}}ge>0&&(n.save(),n.globalAlpha=ge,ke?re(ke):fe&&re(fe),n.restore())}),U=!0)}if(!U&&u.coverUrl&&h.length===0){const J=u.backgroundType==="video"?v.get("background"):null,oe=y.get("cover");J?re(J):oe&&re(oe)}}if((N&&N.backgroundBlurStrength>0||T)&&(n.filter="none"),!["just_video","none"].includes(m)&&!N?.useRealColorMedia&&(n.fillStyle=N&&(N.backgroundSource==="color"||N.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),N?.enableGradientOverlay){const w=n.createLinearGradient(0,o,0,0);w.addColorStop(0,"rgba(0, 0, 0, 0.95)"),w.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),w.addColorStop(.7,"rgba(0, 0, 0, 0)"),n.fillStyle=w,n.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const de=r.findIndex((w,U)=>{if(w.endTime!==void 0)return a>=w.time&&a<w.endTime;const J=r[U+1];return a>=w.time&&(!J||a<J.time)});let yt=de;if(yt===-1&&r.length>0)if(a<r[0].time)yt=0;else{const w=r.findIndex(U=>U.time>a);yt=w!==-1?w:r.length-1}const L=N?.introMode==="manual"&&N.introText?N.introText:`${u.title}
${u.artist}`;let le=de===-1&&a<5&&(N?.showIntro??!0)&&(N?.introMode!=="manual"||B)&&(r.length===0||a<r[0].time),ve=(Te?50:60)*ne,Pe=(Te?25:30)*ne,it=(Te?80:100)*ne;if(m==="large"?(ve=(Te?90:120)*ne,it=(Te?110:140)*ne):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(ve=(Te?80:110)*ne,it=(Te?110:140)*ne):["sad","romantic","gothic"].includes(m)?(ve=(Te?60:75)*ne,it=(Te?90:120)*ne):["slideshow","subtitle"].includes(m)&&(ve=(Te?30:40)*ne),ve*=b,Pe*=b,it*=b,(N?.showLyrics??!0)&&(de!==-1||le||N?.lyricDisplayMode==="all"&&r.length>0)){let w=o/2;N?.contentPosition==="top"?w=o*.15:N?.contentPosition==="bottom"&&(w=o*.9);let U=0;const J=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(J||m==="slideshow"||m==="subtitle"){const ke=le?{text:L}:r[de]||r[yt];if(ke){n.font=`900 ${ve}px ${F}`;const fe=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?ke.text.toUpperCase():ke.text,ge=ce(n,fe,t*.9);ge.length>1&&(U=(ge.length-1)*(ve*1.2)/2)}}let oe=J?-1:-2,Ne=J?1:2;N?.lyricDisplayMode==="active-only"?(oe=0,Ne=0):N?.lyricDisplayMode==="next-only"?(oe=0,Ne=1):N?.lyricDisplayMode==="previous-next"?(oe=-1,Ne=1):N?.lyricDisplayMode==="all"&&(oe=-r.length,Ne=r.length);const Se=new Map,Ee=new Map;{const ke=Math.max((Te?30:40)*ne,it-ve);for(let fe=oe;fe<=Ne;fe++){let ge=0,Me=!1;if(le&&fe===0){const je=ve*1.2,Fe=Pe*1.2,H=L.split(`
`).length>1;ge=je+(H?Fe:0),Me=!0}else{const je=yt+fe;if(je>=0&&je<r.length){const Fe=r[je];Me=je===de;const Ze=Me?ve:Pe;let H=Me?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",z=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||Me?(N?.fontWeight&&(H=N.fontWeight),N?.fontStyle&&(z=N.fontStyle)):(H="400",z="normal")),n.font=`${z} ${H} ${Ze}px ${F}`;let pe=Fe.text,Ce=N?.textCase||"none";Ce==="none"&&Me&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Ce="upper"),Ce==="upper"?pe=pe.toUpperCase():Ce==="lower"?pe=pe.toLowerCase():Ce==="title"?pe=pe.replace(/\w\S*/g,ae=>ae.charAt(0).toUpperCase()+ae.substr(1).toLowerCase()):Ce==="sentence"?pe=pe.charAt(0).toUpperCase()+pe.slice(1).toLowerCase():Ce==="invert"&&(pe=pe.replace(/\w\S*/g,ae=>ae.charAt(0).toLowerCase()+ae.slice(1).toUpperCase())),ge=ce(n,pe,t*.9).length*(Ze*1.2)}}Ee.set(fe,ge)}Se.set(0,w);for(let fe=1;fe<=Ne;fe++){const ge=Se.get(fe-1)??w,Me=Ee.get(fe-1)??0,je=Ee.get(fe)??0;Se.set(fe,ge+Me/2+ke+je/2)}for(let fe=-1;fe>=oe;fe--){const ge=Se.get(fe+1)??w,Me=Ee.get(fe+1)??0,je=Ee.get(fe)??0;Se.set(fe,ge-Me/2-ke-je/2)}}for(let ke=oe;ke<=Ne;ke++){let fe=null,ge=!1;if(le)ke===0&&(fe={time:0,text:L},ge=!0);else{const Me=yt+ke;Me>=0&&Me<r.length&&(fe=r[Me],ge=Me===de)}if(fe){N?.lyricDisplayMode,n.textAlign=N?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const Me=N?.fontColor||"#ffffff";let je=Me;if(!ge){const Ae=Y(Me);je=`rgba(${Ae.r}, ${Ae.g}, ${Ae.b}, 0.5)`}let Fe=ge?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",Ze=["classic","romantic"].includes(m)?"italic":"normal",H="none";(m==="custom"||m==="default")&&((N?.lyricStyleTarget||"active-only")==="all"||ge?(N?.fontWeight&&(Fe=N.fontWeight),N?.fontStyle&&(Ze=N.fontStyle),N?.textDecoration&&(H=N.textDecoration)):(Fe="400",Ze="normal",H="none")),n.font=`${Ze} ${Fe} ${ge?ve:Pe}px ${F}`,n.fillStyle=je;const z=N?.transitionEffect||"none";let pe=1,Ce=0,he=0,ae=1,E=1,I=0,O=0;if(ge&&z!=="none"){const Ae=a-fe.time,ct=fe.endTime?fe.endTime-a:.5,ut=.5,Ve=Ae<ut?Ae/ut:fe.endTime&&ct<ut?ct/ut:1;if(Ve<1){pe=Math.min(1,Ve*2);const It=gt=>1+2.70158*Math.pow(gt-1,3)+1.70158*Math.pow(gt-1,2),bt=gt=>{const jt=2*Math.PI/3;return gt===0?0:gt===1?1:Math.pow(2,-10*gt)*Math.sin((gt*10-.75)*jt)+1};if(z==="slide")Ce=(1-Ve)*(Ae<ut?30:-30);else if(z==="zoom"){const gt=.5+Ve*.5;ae=gt,E=gt}else if(z==="blur")I=(1-Ve)*10;else if(z==="float")Ce=(1-Ve)*(Ae<ut?50:-50);else if(z==="drop")Ce=(1-It(Ve))*-200,pe=Ve;else if(z==="flip")E=Ve;else if(z==="rotate-in")O=(1-Ve)*-Math.PI/2,pe=Ve;else if(z==="spiral")ae=Ve,E=Ve,O=(1-Ve)*Math.PI*2,pe=Ve;else if(z==="shatter"){const gt=3-2*Ve;ae=gt,E=gt,I=(1-Ve)*20,pe=Ve}else if(z==="lightspeed")he=(1-Ve)*300,pe=Ve;else if(z==="roll")he=(1-Ve)*-300,O=(1-Ve)*-Math.PI,pe=Ve;else if(z==="elastic"){const gt=bt(Ve);ae=gt,E=gt,pe=Ve}}}n.save(),n.globalAlpha=pe,I>0&&(n.filter=`blur(${I}px)`);const M=ge&&N?.textAnimation||"none";let ee=fe.text,D=N?.textCase||"none";D==="none"&&ge&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(D="upper"),D==="upper"?ee=ee.toUpperCase():D==="lower"?ee=ee.toLowerCase():D==="title"?ee=ee.replace(/\w\S*/g,Ae=>Ae.charAt(0).toUpperCase()+Ae.substr(1).toLowerCase()):D==="sentence"?ee=ee.charAt(0).toUpperCase()+ee.slice(1).toLowerCase():D==="invert"&&(ee=ee.replace(/\w\S*/g,Ae=>Ae.charAt(0).toLowerCase()+Ae.slice(1).toUpperCase()));let se=0,_=0,ie=1,Ie=1,Ye=0;if(ge&&M!=="none")if(M==="bounce")_=Math.sin(a*6)*15*ne;else if(M==="pulse"){const Ae=1+Math.sin(a*4)*.08;ie=Ae,Ie=Ae}else if(M==="wave")_=Math.sin(a*4)*20*ne,Ye=Math.sin(a*4)*.05;else if(M==="glitch")Math.sin(a*10)>.8&&(se=(Math.random()-.5)*15*ne,_=(Math.random()-.5)*15*ne);else if(M==="shake")se=(Math.random()-.5)*5*ne,_=(Math.random()-.5)*5*ne;else if(M==="typewriter"){const ct=Math.floor((a-fe.time)*30);ee=ee.substring(0,Math.max(0,ct))}else if(M==="wobble"){Ye=Math.sin(a*5)*.05;const Ae=1+Math.sin(a*3)*.05;ie=Ae,Ie=Ae}else if(M==="breathe"){const Ae=1+Math.sin(a*2)*.03;ie=Ae,Ie=Ae}else if(M==="rotate")Ye=Math.sin(a*2)*.05;else if(M==="sway")Ye=Math.sin(a*2)*.08;else if(M==="flicker")n.globalAlpha=pe*(.8+Math.random()*.2);else if(M==="jello")ie=1+Math.sin(a*6)*.1,Ie=1-Math.sin(a*6)*.1;else if(M==="spin")Ye=a%2*Math.PI;else if(M==="heartbeat"){const Ae=a*1.5%1;(Ae<.1||Ae>.3&&Ae<.4)&&(ie=1.1,Ie=1.1)}else if(M==="tada"){const Ae=a*1.5%1;Ae<.1?(ie=.9,Ie=.9,Ye=-.05):Ae<.2?(ie=1.1,Ie=1.1,Ye=.05):(ie=1,Ie=1,Ye=0)}else M==="swing"&&(Ye=Math.sin(a*3)*.1);let nt=0;Se.has(ke)?nt=Se.get(ke)+(ke===0?Ce:0):(nt=m==="subtitle"&&ke===0&&N?.lyricDisplayMode!=="all"?o-140*ne:w+ke*it+(ke===0?Ce:0),m!=="custom"&&(ke<0?nt-=U:ke>0&&(nt+=U))),nt+=_;let Be=t/2;n.textAlign==="left"?Be=60*ne:n.textAlign==="right"&&(Be=t-60*ne),Be+=he+se;const Lt=ae*ie,Je=E*Ie,Jt=O+Ye;(Lt!==1||Je!==1||Jt!==0)&&(n.translate(Be,nt),n.rotate(Jt),n.scale(Lt,Je),n.translate(-Be,-nt));const Mt=ge?N?.textEffect||"preset":"none";if(le&&ke===0&&N?.introMode!=="manual"){const Ae=ee.split(`
`),ct=Ae[0],ut=Ae.slice(1).join(`
`),Ve=ve*1.2,It=Pe*1.2,bt=20*ne;let gt=nt;ut&&(gt=nt-It/2-bt/2);const jt=nt+Ve/2+bt/2;if(n.font=`${Ze} ${Fe} ${ve}px ${F}`,Le(n,ct,Be,gt,t*.9,Ve,Mt,H),ut){const vn=m==="custom"&&N?.fontWeight?N.fontWeight:"400";n.font=`${Ze} ${vn} ${Pe}px ${F}`,Le(n,ut,Be,jt,t*.9,It,Mt,H)}}else{const Ae=ge?ve:Pe;N&&N.highlightEffect&&N.highlightEffect,ge&&fe?ze(n,fe,Be,nt,t*.9,Ae*(N?.lyricLineHeight||1.2),a,N,F,Ae,Fe,Ze,ne):Le(n,ee,Be,nt,t*.9,Ae*(N?.lyricLineHeight||1.2),Mt,H)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const w=N?N.showTitle||N.showArtist:!0,U=N?N.showCover:!0;if(w||U)if(m==="custom"||m==="default"){const J=N?.infoPosition||"top-left",oe=N?.infoStyle||"classic",Ne=oe==="box",Se=Ne?16*ne:12*ne,Ee=40*ne*(N?.infoMarginScale??1);let ke="left",fe="top";J.includes("left")?ke="left":J.includes("right")?ke="right":ke="center",J.includes("top")?fe="top":fe="bottom";const ge=N?.infoSizeScale??1,Me=(oe==="minimal"||oe==="modern"?0:100*ne)*ge,je=U&&Me>0&&u.coverUrl!==null,Fe=je?u.backgroundType==="video"?v.get("background"):y.get("cover"):null,Ze=(oe==="minimal"?20:oe==="modern"||oe==="modern_art"?40:28)*ne,H=(oe==="minimal"?14:oe==="modern"||oe==="modern_art"?24:18)*ne,z=Ze*ge,pe=H*ge,Ce=`bold ${z}px ${F}`,he=`${pe}px ${F}`,ae=20*ne,E=Ne?24*ne:0,I=N?.fontColor||"#ffffff",O=oe==="modern"||oe==="modern_art"?I:N?.fontColor||"#d4d4d8";n.font=Ce;const M=n.measureText(u.title),ee=N?.showTitle?M.width:0;n.font=he;const D=n.measureText(u.artist),se=N?.showArtist?D.width:0;let _=0,ie=0;if(ke==="center"){_=Math.max(je&&Fe?Me:0,ee,se)+E*2;let Ae=0;je&&Fe&&(Ae+=Me),(N?.showTitle??!0)&&(Ae+=(je&&Fe?ae:0)+z),(N?.showArtist??!0)&&(Ae+=(je&&Fe||(N?.showTitle??!0)?5*ne:0)+pe),ie=Ae+E*2}else{const ot=Math.max(ee,se);_=(je&&Fe?Me+ae:0)+ot+E*2;const ct=(N?.showTitle?z:0)+(N?.showArtist?pe+5*ne:0);ie=Math.max(ct,je&&Fe?Me:0)+E*2}let Ie=0,Ye=0;ke==="left"?Ie=Ee:ke==="right"?Ie=t-Ee:Ie=t/2,fe==="top"?Ye=Ee:Ye=o-Ee;let nt=0,Be=0;ke==="left"?nt=Ie:ke==="right"?nt=Ie-_:nt=Ie-_/2,fe==="top"?Be=Ye:Be=Ye-ie,Ne&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(nt,Be,_,ie,Se),n.fill(),n.restore());const Lt=nt+E,Je=Be+E,Jt=_-E*2,Mt=ie-E*2;if(ke==="center"){let ot=Je;const Ae=Lt+Jt/2;if(n.textAlign="center",fe==="top"){if(je&&Fe){n.save(),n.beginPath();const ct=Ae-Me/2;oe==="circle_art"?n.arc(Ae,ot+Me/2,Me/2,0,Math.PI*2):n.roundRect(ct,ot,Me,Me,Se/2),n.clip(),n.drawImage(Fe,ct,ot,Me,Me),n.restore(),ot+=Me+ae}(N?.showTitle??!0)&&(n.fillStyle=I,n.font=Ce,n.textBaseline="top",n.fillText(u.title,Ae,ot),ot+=z+5*ne),(N?.showArtist??!0)&&(n.fillStyle=O,n.font=he,n.textBaseline="top",n.fillText(u.artist,Ae,ot))}else{if(je&&Fe){n.save(),n.beginPath();const ct=Ae-Me/2;oe==="circle_art"?n.arc(Ae,ot+Me/2,Me/2,0,Math.PI*2):n.roundRect(ct,ot,Me,Me,Se/2),n.clip(),n.drawImage(Fe,ct,ot,Me,Me),n.restore(),ot+=Me+ae}(N?.showTitle??!0)&&(n.fillStyle=I,n.font=Ce,n.textBaseline="top",n.fillText(u.title,Ae,ot),ot+=z+5*ne),(N?.showArtist??!0)&&(n.fillStyle=O,n.font=he,n.textBaseline="top",n.fillText(u.artist,Ae,ot))}}else{const ot=ke==="right",Ae=Je+Mt/2;let ct=Lt;if(ot&&(ct=Lt+Jt),je&&Fe){const It=Ae-Me/2,bt=ot?ct-Me:ct;n.save(),n.beginPath(),oe==="circle_art"?n.arc(bt+Me/2,It+Me/2,Me/2,0,Math.PI*2):n.roundRect(bt,It,Me,Me,Se/2),n.clip(),n.drawImage(Fe,bt,It,Me,Me),n.restore(),ot?ct-=Me+ae:ct+=Me+ae}const ut=(N?.showTitle?z:0)+(N?.showArtist?pe+5*ne:0);let Ve=Ae-ut/2;n.textAlign=ot?"right":"left",n.textBaseline="top",(N?.showTitle??!0)&&(n.fillStyle=I,n.font=Ce,n.fillText(u.title,ct,Ve),Ve+=z+5*ne),(N?.showArtist??!0)&&(n.fillStyle=O,n.font=he,n.fillText(u.artist,ct,Ve))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(w){n.textAlign="center",n.textBaseline="middle";let J=80*ne;["testing","testing_up","one_line","one_line_up"].includes(m)&&(J=120*ne),(N?.showTitle??!0)&&(n.font=`bold ${20*ne}px ${F}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?u.title.toUpperCase():u.title,t/2,o-J-30*ne)),(N?.showArtist??!0)&&(n.font=`${16*ne}px ${F}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,t/2,o-J))}}else{const J=40*ne*(N?.infoMarginScale??1),oe=t===o,Ne=(Te?oe?110:150:100)*ne,Se=u.coverUrl?y.get("cover"):null,Ee=12*ne;if(Te){const ke=J*(oe?1.5:3),fe=t/2,ge=fe-Ne/2,Me=ke;if(U&&(n.save(),n.beginPath(),n.roundRect(ge,Me,Ne,Ne,Ee),n.clip(),Se?n.drawImage(Se,ge,Me,Ne,Ne):(n.fillStyle="#27272a",n.fillRect(ge,Me,Ne,Ne)),n.restore()),w){n.textAlign="center",n.textBaseline="top";const je=Me+(U?Ne+25*ne:0);(N?.showTitle??!0)&&(n.font=`bold ${(oe?26:36)*ne}px ${F}`,n.fillStyle="#ffffff",n.fillText(u.title,fe,je)),(N?.showArtist??!0)&&(n.font=`${(oe?18:24)*ne}px ${F}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,fe,je+(N?.showTitle??!0?(oe?30:40)*ne:0)))}}else{const ke=J,fe=J;if(U&&(n.save(),n.beginPath(),n.roundRect(ke,fe,Ne,Ne,Ee),n.clip(),Se?n.drawImage(Se,ke,fe,Ne,Ne):(n.fillStyle="#27272a",n.fillRect(ke,fe,Ne,Ne)),n.restore()),w){n.textAlign="left",n.textBaseline="top";const ge=ke+(U?Ne+25*ne:0),Me=28*ne,je=fe+Ne/2-Me;(N?.showTitle??!0)&&(n.font=`bold ${Me}px ${F}`,n.fillStyle="#ffffff",n.fillText(u.title,ge,je)),(N?.showArtist??!0)&&(n.font=`${18*ne}px ${F}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,ge,je+(N?.showTitle??!0?Me+5*ne:0)))}}}}if(N?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const w=N.channelInfoPosition||"bottom-right",U=N.channelInfoStyle||"classic",J=N.channelInfoSizeScale??1,oe=N.channelInfoMarginScale??1,Ne=y.get("__channel_info__"),Se=N.channelInfoText;if(!(!Ne&&!Se)){if(!(U==="logo"&&!Ne)){if(!(U==="minimal"&&!Se)){n.save();const Ee=40*ne*oe,ke=80*ne*J,fe=U==="modern"||U==="logo"?ke*1.2:ke,ge=20*ne*J,Me=y.get("__channel_info_text_svg__"),je=!!Me;let Fe=0,Ze=ge;if(je&&Me){Ze=ge*1.5;const ee=Me.width/Me.height;Fe=Ze*ee}else n.font=`bold ${ge}px sans-serif`,Se&&U!=="logo"&&(Fe=n.measureText(Se).width);const H=12*ne*J,z=12*ne*J,pe=8*ne*J;let Ce=0,he=0;const ae=!!Ne&&U!=="minimal",E=!!Se&&U!=="logo";U==="modern"?(Ce=Math.max(ae?fe:0,E?Fe+z*2:0),he=(ae?fe:0)+(ae&&E?H:0)+(E?Ze+pe*2:0)):U==="box"?(Ce=(ae?fe:0)+(ae&&E?H:0)+(E?Fe:0)+z*2,he=Math.max(ae?fe:0,E?Ze:0)+pe*2):U==="minimal"?(Ce=E?Fe+z*2:0,he=E?Ze+pe*2:0):U==="logo"?(Ce=fe,he=fe):(Ce=(ae?fe:0)+(ae&&E?H:0)+(E?Fe+z*2:0),he=Math.max(ae?fe:0,E?Ze+pe*2:0));let I=0,O=0;w.includes("left")?I=Ee:w.includes("right")?I=t-Ee-Ce:w.includes("center")&&(I=(t-Ce)/2),w.includes("top")?O=Ee:w.includes("bottom")&&(O=o-Ee-he),U==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(I,O,Ce,he,12*ne*J),n.fill()):n.fillRect(I,O,Ce,he),n.shadowColor="transparent",n.shadowBlur=0);const M=(ee,D,se,_,ie)=>{if(U!=="box"&&U!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(ee,D,se,_,8*ne*J),n.fill()):n.fillRect(ee,D,se,_)),je&&Me){const Ie=ee+(se-Fe)/2,Ye=D+(_-Ze)/2;n.drawImage(Me,Ie,Ye,Fe,Ze)}else{n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const Ie=ee+(se-Fe)/2,Ye=D+(_-Ze)/2+Ze*.1;n.fillText(ie,Ie,Ye),n.shadowColor="transparent"}};if(U==="modern"){let ee=O;if(ae){const D=I+(Ce-fe)/2;n.drawImage(Ne,D,ee,fe,fe),ee+=fe+H}if(E){const D=Fe+z*2,se=Ze+pe*2,_=I+(Ce-D)/2;M(_,ee,D,se,Se)}}else{const ee=w.includes("right");let D=I+(U==="box"?z:0);const se=O+he/2;if(ee&&(U==="classic"||U==="circle")){if(E){const _=Fe+z*2,ie=Ze+pe*2;M(D,se-ie/2,_,ie,Se),D+=_+H}ae&&(U==="circle"?(n.save(),n.beginPath(),n.arc(D+fe/2,se,fe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Ne,D,se-fe/2,fe,fe),n.restore()):n.drawImage(Ne,D,se-fe/2,fe,fe))}else if(ae&&(U==="circle"?(n.save(),n.beginPath(),n.arc(D+fe/2,se,fe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Ne,D,se-fe/2,fe,fe),n.restore()):n.drawImage(Ne,D,se-fe/2,fe,fe),D+=fe+H),E){const _=Fe+(U==="box"?0:z*2),ie=Ze+(U==="box"?0:pe*2);U==="box"?je&&Me?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(Me,D,se-Ze/2,Fe,Ze),n.shadowColor="transparent"):(n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(Se,D,se+Ze*.1),n.shadowColor="transparent"):M(D,se-ie/2,_,ie,Se)}}n.restore()}}}}};var Qt;(function(n){n.LOAD="LOAD",n.EXEC="EXEC",n.FFPROBE="FFPROBE",n.WRITE_FILE="WRITE_FILE",n.READ_FILE="READ_FILE",n.DELETE_FILE="DELETE_FILE",n.RENAME="RENAME",n.CREATE_DIR="CREATE_DIR",n.LIST_DIR="LIST_DIR",n.DELETE_DIR="DELETE_DIR",n.ERROR="ERROR",n.DOWNLOAD="DOWNLOAD",n.PROGRESS="PROGRESS",n.LOG="LOG",n.MOUNT="MOUNT",n.UNMOUNT="UNMOUNT"})(Qt||(Qt={}));const JA=(()=>{let n=0;return()=>n++})(),KA=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),XA=new Error("called FFmpeg.terminate()");class QA{#t=null;#i={};#n={};#o=[];#l=[];loaded=!1;#a=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:o,data:a}})=>{switch(o){case Qt.LOAD:this.loaded=!0,this.#i[t](a);break;case Qt.MOUNT:case Qt.UNMOUNT:case Qt.EXEC:case Qt.FFPROBE:case Qt.WRITE_FILE:case Qt.READ_FILE:case Qt.DELETE_FILE:case Qt.RENAME:case Qt.CREATE_DIR:case Qt.LIST_DIR:case Qt.DELETE_DIR:this.#i[t](a);break;case Qt.LOG:this.#o.forEach(r=>r(a));break;case Qt.PROGRESS:this.#l.forEach(r=>r(a));break;case Qt.ERROR:this.#n[t](a);break}delete this.#i[t],delete this.#n[t]})};#e=({type:t,data:o},a=[],r)=>this.#t?new Promise((u,h)=>{const y=JA();this.#t&&this.#t.postMessage({id:y,type:t,data:o},a),this.#i[y]=u,this.#n[y]=h,r?.addEventListener("abort",()=>{h(new DOMException(`Message # ${y} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(KA);on(t,o){t==="log"?this.#o.push(o):t==="progress"&&this.#l.push(o)}off(t,o){t==="log"?this.#o=this.#o.filter(a=>a!==o):t==="progress"&&(this.#l=this.#l.filter(a=>a!==o))}load=({classWorkerURL:t,...o}={},{signal:a}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#a()),this.#e({type:Qt.LOAD,data:o},void 0,a));exec=(t,o=-1,{signal:a}={})=>this.#e({type:Qt.EXEC,data:{args:t,timeout:o}},void 0,a);ffprobe=(t,o=-1,{signal:a}={})=>this.#e({type:Qt.FFPROBE,data:{args:t,timeout:o}},void 0,a);terminate=()=>{const t=Object.keys(this.#n);for(const o of t)this.#n[o](XA),delete this.#n[o],delete this.#i[o];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,o,{signal:a}={})=>{const r=[];return o instanceof Uint8Array&&r.push(o.buffer),this.#e({type:Qt.WRITE_FILE,data:{path:t,data:o}},r,a)};mount=(t,o,a)=>{const r=[];return this.#e({type:Qt.MOUNT,data:{fsType:t,options:o,mountPoint:a}},r)};unmount=t=>{const o=[];return this.#e({type:Qt.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:a}={})=>this.#e({type:Qt.READ_FILE,data:{path:t,encoding:o}},void 0,a);deleteFile=(t,{signal:o}={})=>this.#e({type:Qt.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:a}={})=>this.#e({type:Qt.RENAME,data:{oldPath:t,newPath:o}},void 0,a);createDir=(t,{signal:o}={})=>this.#e({type:Qt.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#e({type:Qt.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#e({type:Qt.DELETE_DIR,data:{path:t}},void 0,o)}var ag;(function(n){n.MEMFS="MEMFS",n.NODEFS="NODEFS",n.NODERAWFS="NODERAWFS",n.IDBFS="IDBFS",n.WORKERFS="WORKERFS",n.PROXYFS="PROXYFS"})(ag||(ag={}));const ZA=new Error("failed to get response body reader"),WA=new Error("failed to complete download"),eN="Content-Length",tN=async(n,t)=>{const o=await fetch(n);let a;try{const r=parseInt(o.headers.get(eN)||"-1"),u=o.body?.getReader();if(!u)throw ZA;const h=[];let y=0;for(;;){const{done:x,value:b}=await u.read(),T=b?b.length:0;if(x){if(r!=-1&&r!==y)throw WA;t&&t({url:n,total:r,received:y,delta:T,done:x});break}h.push(b),y+=T,t&&t({url:n,total:r,received:y,delta:T,done:x})}const v=new Uint8Array(y);let m=0;for(const x of h)v.set(x,m),m+=x.length;a=v.buffer}catch(r){console.log("failed to send download progress event: ",r),a=await o.arrayBuffer()}return a},$a=async(n,t,o=!1,a)=>{const r=o?await tN(n,a):await(await fetch(n)).arrayBuffer(),u=new Blob([r],{type:t});return URL.createObjectURL(u)};let Ya=null,Ou=!1,hr=!1;async function nN(n){if(Ya&&Ou)return Ya;if(hr){for(;hr;)await new Promise(t=>setTimeout(t,100));if(Ya&&Ou)return Ya}hr=!0;try{const t=new QA;if(t.on("log",({message:a})=>{n?.(`[FFmpeg] ${a}`),console.log("[FFmpeg]",a)}),t.on("progress",({progress:a,time:r})=>{n?.(`[FFmpeg Progress] ${(a*100).toFixed(1)}% (${r}s)`)}),typeof window<"u"&&window.crossOriginIsolated){n?.("[FFmpeg] Cross-Origin Isolated: YES. Using Multi-Threaded Core ");const a="/ffmpeg",r="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm";let u,h,y;try{n?.("[FFmpeg] Attempting to load local core files...");const v=async(m,x)=>{const b=await fetch(m);if(!b.ok)throw new Error(`HTTP ${b.status}`);const T=b.headers.get("Content-Type");if(T&&T.includes("text/html"))throw new Error("Received HTML instead of binary");const A=await b.blob();return URL.createObjectURL(new Blob([A],{type:x}))};[u,h,y]=await Promise.all([v(`${a}/ffmpeg-core.js`,"text/javascript"),v(`${a}/ffmpeg-core.wasm`,"application/wasm"),v(`${a}/ffmpeg-core.worker.js`,"text/javascript")]),n?.("[FFmpeg] Using local core files (Offline Mode)")}catch(v){n?.("[FFmpeg] Local core files not found or failed to load. Falling back to online CDN."),console.warn("Local FFmpeg files not found:",v),[u,h,y]=await Promise.all([$a(`${r}/ffmpeg-core.js`,"text/javascript"),$a(`${r}/ffmpeg-core.wasm`,"application/wasm"),$a(`${r}/ffmpeg-core.worker.js`,"text/javascript")])}await t.load({coreURL:u,wasmURL:h,workerURL:y})}else{n?.("[FFmpeg] Cross-Origin Isolated: NO. Falling back to Single-Threaded Core "),n?.("[FFmpeg] Note: Rendering will be slower. Add COOP/COEP headers to server for multithreading.");const a="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await t.load({coreURL:await $a(`${a}/ffmpeg-core.js`,"text/javascript"),wasmURL:await $a(`${a}/ffmpeg-core.wasm`,"application/wasm")})}return Ya=t,Ou=!0,n?.("[FFmpeg] Loaded successfully"),t}finally{hr=!1}}function iN(n,t,o){const a=o==="1080p",u={low:a?28:30,med:a?23:25,high:a?18:20}[t];switch(n){case"h265":return{vcodec:"libx265",args:["-crf",u.toString(),"-preset","medium","-tag:v","hvc1"],format:"mp4",ext:"mp4"};case"vp9":return{vcodec:"libvpx-vp9",args:["-crf",u.toString(),"-b:v","0","-deadline","good","-cpu-used","2"],format:"webm",ext:"webm"};case"av1":return{vcodec:"libaom-av1",args:["-crf",(u+10).toString(),"-b:v","0","-cpu-used","4","-strict","experimental"],format:"mp4",ext:"mp4"};default:return{vcodec:"libx264",args:["-crf",u.toString(),"-preset","medium","-profile:v","high","-level","4.2"],format:"mp4",ext:"mp4"}}}async function oN(n){const{canvas:t,audioFile:o,lyrics:a,metadata:r,visualSlides:u,imageMap:h,videoMap:y,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,codec:A,aspectRatio:N,onProgress:V,onLog:B,abortSignal:Y,isFirstSong:re=!0,isLastSong:ce=!0}=n;V(0,"Loading FFmpeg...");const Re=await nN(B),ze=()=>Y?.aborted===!0||Y?.current===!0;if(ze())throw new Error("Render aborted");V(5,"Preparing audio...");const Le=URL.createObjectURL(o),be=await lN(Le);URL.revokeObjectURL(Le);const Qe=Math.ceil(be*b),_e=t.getContext("2d");if(!_e)throw new Error("Failed to get canvas context");V(10,"Rendering frames...");const Ke=await o.arrayBuffer();await Re.writeFile("audio.mp3",new Uint8Array(Ke));const De=Math.max(6,Qe.toString().length);for(let ne=0;ne<Qe;ne++){if(ze())throw await mr(Re,ne,De),new Error("Render aborted");const de=ne/b;aN(y,u,de),ry(_e,t.width,t.height,de,a,r,u,h,y,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,be,x,ce,re);const L=await(await new Promise((Pe,it)=>{t.toBlob(w=>w?Pe(w):it(new Error("Failed to create blob")),"image/jpeg",T==="high"?.98:T==="med"?.92:.85)})).arrayBuffer(),le=`frame_${ne.toString().padStart(De,"0")}.jpg`;await Re.writeFile(le,new Uint8Array(L));const ve=10+ne/Qe*70;V(ve,`Rendering frame ${ne+1}/${Qe}`)}if(ze())throw await mr(Re,Qe,De),new Error("Render aborted");V(80,"Encoding video...");const rt=iN(A,T,n.resolution),mt=`output.${rt.ext}`,Et=["-framerate",b.toString(),"-i",`frame_%0${De}d.jpg`,"-i","audio.mp3","-c:v",rt.vcodec,...rt.args,"-c:a","aac","-b:a","192k","-pix_fmt","yuv420p","-movflags","+faststart","-shortest","-y",mt];B?.(`[FFmpeg] Running: ffmpeg ${Et.join(" ")}`);try{await Re.exec(Et)}catch(ne){throw console.error("FFmpeg encoding failed:",ne),await mr(Re,Qe,De),new Error(`FFmpeg encoding failed: ${ne}`)}V(95,"Finalizing...");const wt=await Re.readFile(mt),F=wt instanceof Uint8Array?new Uint8Array(wt):new TextEncoder().encode(wt),Te=new Blob([F],{type:rt.format==="webm"?"video/webm":"video/mp4"});await mr(Re,Qe,De);try{await Re.deleteFile("audio.mp3"),await Re.deleteFile(mt)}catch{}return V(100,"Complete!"),{blob:Te,duration:be,format:rt.ext}}async function lN(n){return new Promise((t,o)=>{const a=document.createElement("audio");a.preload="metadata",a.onloadedmetadata=()=>{t(a.duration),URL.revokeObjectURL(n)},a.onerror=()=>{o(new Error("Failed to load audio metadata")),URL.revokeObjectURL(n)},a.src=n})}function aN(n,t,o){n.forEach((a,r)=>{if(r==="background"){const h=a.duration||1;h>0&&(a.currentTime=o%h);return}const u=t.find(h=>h.id===r);if(u&&u.type==="video"&&o>=u.startTime&&o<u.endTime){const h=u.playbackRate||1;let y=(o-u.startTime)*h+(u.mediaStartOffset||0);const v=u.mediaDuration||a.duration;v&&v>0&&y>=v&&(y=y%v),a.currentTime=y}})}async function mr(n,t,o){for(let a=0;a<t;a++)try{await n.deleteFile(`frame_${a.toString().padStart(o,"0")}.jpg`)}catch{}}function sN(){const{toast:n,confirm:t}=Mr(),o=W.useRef(null),a=W.useRef(null),r=W.useRef(null),u=W.useRef(null),h=W.useRef(null),y=W.useRef({aborted:!1}),v=W.useRef(()=>{});W.useEffect(()=>{BA()},[]);const[m,x]=W.useState(null),[b,T]=W.useState(0),[A,N]=W.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[V,B]=W.useState([]),[Y,re]=W.useState([]),[ce,Re]=W.useState(0),[ze,Le]=W.useState(!1),[be,Qe]=W.useState("off"),[_e,Ke]=W.useState(0),[De,rt]=W.useState(0),[mt,Et]=W.useState(1),[wt,F]=W.useState(!1),[Te,ne]=W.useState(Gn.PLAYER),[de,yt]=W.useState(!1),[L,le]=W.useState(!1),[ve,Pe]=W.useState(!1),[it,w]=W.useState(!1),[U,J]=W.useState(!1),[oe,Ne]=W.useState(0),[Se,Ee]=W.useState("16:9"),[ke,fe]=W.useState("1080p"),[ge,Me]=W.useState("default"),[je,Fe]=W.useState(null),[Ze,H]=W.useState("auto"),[z,pe]=W.useState(30),[Ce,he]=W.useState("med"),[ae,E]=W.useState("mediarecorder"),[I,O]=W.useState("h264"),[M,ee]=W.useState(""),[D,se]=W.useState(!1),[_,ie]=W.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",lyricLineHeight:1.2,useRealColorMedia:!1}),Ie=W.useRef(_);W.useEffect(()=>{Ie.current=_},[_]);const Ye=W.useRef(null),nt=W.useRef(null),Be=_.backgroundBlurStrength>0,Lt=W.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(Z=>MediaRecorder.isTypeSupported(Z.value)),[]),[Je,Jt]=W.useState([]),[Mt,ot]=W.useState(-1),[Ae,ct]=W.useState(!1),ut=()=>{const R=ke==="1080p";switch(Se){case"9:16":return R?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return R?{w:1080,h:1440}:{w:720,h:960};case"4:3":return R?{w:1440,h:1080}:{w:960,h:720};case"1:1":return R?{w:1080,h:1080}:{w:720,h:720};case"1:2":return R?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return R?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return R?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return R?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return R?{w:1080,h:1350}:{w:720,h:900};case"20:9":return R?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return R?{w:2560,h:1080}:{w:1720,h:720};default:return R?{w:1920,h:1080}:{w:1280,h:720}}},{w:Ve,h:It}=ut(),[bt,gt]=W.useState(!0),[jt,vn]=W.useState(!0),[un,Ii]=W.useState(!1),Dn=W.useMemo(()=>{const R=_.visualTransitionType||"none",Z=_.visualTransitionDuration||1;return Y.filter(K=>K.type==="audio"?!1:_e>=K.startTime&&_e<K.endTime||R==="crossfade"&&_e>=K.endTime&&_e<K.endTime+Z).sort((K,we)=>{const Ge=(K.layer||0)-(we.layer||0);return Ge!==0?Ge:K.startTime-we.startTime})},[Y,_e,_.visualTransitionType,_.visualTransitionDuration]),zi=Y.filter(R=>R.type==="audio"&&_e>=R.startTime&&_e<R.endTime),Di=W.useMemo(()=>ce===0?V:V.map(R=>({...R,time:R.time+ce,endTime:R.endTime!==void 0?R.endTime+ce:void 0})),[V,ce]),xn=Di.findIndex((R,Z)=>{if(R.endTime!==void 0)return _e>=R.time&&_e<R.endTime;const Ue=Di[Z+1];return _e>=R.time&&(!Ue||_e<Ue.time)}),We=R=>{const Z=R.target.files?.[0];if(Z){const Ue=URL.createObjectURL(Z);x(Ue);const K={title:Z.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};N(K),qu(()=>import("./jsmediatags.min-Btr8XMW0.js").then(we=>we.j),[]).then(we=>{we.read(Z,{onSuccess:Ge=>{const{title:at,artist:dt,picture:ht}=Ge.tags;let Fn=null;if(ht){const{data:nn,format:He}=ht;let Ut="";for(let Zt=0;Zt<nn.length;Zt++)Ut+=String.fromCharCode(nn[Zt]);Fn=`data:${He};base64,${window.btoa(Ut)}`}N({title:at||K.title,artist:dt||K.artist,coverUrl:Fn||null})},onError:Ge=>{console.log("Error reading tags:",Ge)}})}),Re(0),Le(!1),Ke(0),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}R.target.value=""},vt=R=>{const Z=R.target.files?.[0];if(Z){const Ue=URL.createObjectURL(Z),K=Z.type.startsWith("video/");K&&w(!1),N(we=>({...we,coverUrl:Ue,backgroundType:K?"video":"image"}))}R.target.value=""},$t=async R=>{const Z=R.target.files?.[0];if(Z)try{const Ue=await Z.text(),K=Z.name.split(".").pop()?.toLowerCase();let we=[];K==="lrc"?we=Xl(Ue):K==="srt"?we=Ql(Ue):(K==="ttml"||K==="xml")&&(we=es(Ue)),we.some(Ge=>Ge.words&&Ge.words.length>0)&&(ie(Ge=>({...Ge,highlightEffect:"karaoke"})),n.success(`${K?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),B(we)}catch(Ue){console.error("Failed to parse lyrics:",Ue),n.error("Failed to parse lyric file.")}R.target.value=""};W.useEffect(()=>{if(Mt!==-1&&Je[Mt]){const R=Je[Mt];B(R.parsedLyrics||[])}},[Je,Mt]);const ei=async R=>{const Z=R.target.files?.[0];if(Z){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Ue=URL.createObjectURL(Z),K=Z.name.replace(/\.[^/.]+$/,""),we="CustomFont",Ge=new FontFace(we,`url(${Ue})`);await Ge.load(),document.fonts.add(Ge),Fe(K),ie(at=>({...at,fontFamily:we})),n.success(`Loaded font: ${K}`)}catch(Ue){console.error("Failed to load font:",Ue),n.error("Failed to load font file.")}}R.target.value=""},Ht=W.useCallback(async(R,Z=!0,Ue)=>{const K=Ue||Je;if(R<0||R>=K.length)return;const we=K[R],Ge=URL.createObjectURL(we.audioFile);if(x(Ge),N({title:we.metadata.title,artist:we.metadata.artist,coverUrl:we.metadata.coverUrl||null,backgroundType:"image"}),B([]),we.parsedLyrics&&we.parsedLyrics.length>0)B(we.parsedLyrics);else if(we.lyricFile)try{const at=await we.lyricFile.text(),dt=we.lyricFile.name.split(".").pop()?.toLowerCase();let ht=[];dt==="lrc"?ht=Xl(at):dt==="srt"?ht=Ql(at):(dt==="ttml"||dt==="xml")&&(ht=es(at)),B(ht)}catch(at){console.error("Failed to load lyrics",at)}Re(0),ot(R),r.current&&(r.current.scrollTop=0),Z?setTimeout(()=>{o.current&&(o.current.play().catch(at=>console.log("Autoplay failed",at)),Le(!0))},100):(Le(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[Je]),Mn=W.useCallback(()=>{if(Je.length===0)return;const R=(Mt+1)%Je.length;Ht(R)},[Je,Mt,Ht]),ul=W.useCallback(()=>{if(Je.length===0)return;const R=(Mt-1+Je.length)%Je.length;Ht(R)},[Je,Mt,Ht]),Vi=()=>{o.current&&(ze?(o.current.pause(),Le(!1)):!m&&Je.length>0?Ht(0):(o.current.play().catch(console.error),Le(!0)))},ci=W.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,Le(!1),Ke(0))},[]),Oi=()=>{Qe(R=>R==="off"?"one":R==="one"?"all":R==="all"?"all_repeat":"off")},qi=()=>{document.fullscreenElement?(document.exitFullscreen(),yt(!1)):(a.current?.requestFullscreen(),yt(!0))},$o=()=>{o.current&&(Ke(o.current.currentTime),U&&Ne(o.current.currentTime/De*100))},mo=()=>{o.current&&rt(o.current.duration)},bn=R=>{const Z=parseFloat(R.target.value);o.current&&(o.current.currentTime=Z,Ke(Z))},ia=R=>{if(!Ye.current||U||!De)return;const Z=Ye.current.getBoundingClientRect(),we=Math.max(0,Math.min(R-Z.left,Z.width))/Z.width*De;o.current&&(o.current.currentTime=we,Ke(we))},ns=R=>{const Z=parseFloat(R.target.value);Et(Z),o.current&&(o.current.volume=Z),F(Z===0)},Li=R=>{if(!nt.current)return;const Z=nt.current.getBoundingClientRect(),K=Math.max(0,Math.min(R-Z.left,Z.width))/Z.width;Et(K),o.current&&(o.current.volume=K),F(K===0)},go=async()=>{if(!o.current||!u.current)return;const R=_.renderMode==="playlist"&&Je.length>0,Z=[];if(R)for(const ye of Je){let $e=[];if(ye.parsedLyrics&&ye.parsedLyrics.length>0)$e=ye.parsedLyrics;else if(ye.lyricFile)try{const Oe=await ye.lyricFile.text(),fn=ye.lyricFile.name.split(".").pop()?.toLowerCase();fn==="lrc"?$e=Xl(Oe):fn==="srt"?$e=Ql(Oe):(fn==="ttml"||fn==="xml")&&($e=es(Oe))}catch(Oe){console.error("Failed to parse lyrics for playlist item",Oe)}const Nt=URL.createObjectURL(ye.audioFile);Z.push({audioSrc:Nt,lyrics:$e,metadata:ye.metadata,isFileSource:!0})}else{if(!m)return;Z.push({audioSrc:m,lyrics:Di,metadata:A,isFileSource:!1})}if(Z.length===0)return;const Ue=R?`Start rendering ALL ${Z.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${Se} (${ke}) video? This will play the song from start to finish.`;if(!await t(`${Ue} Please do not switch tabs during rendering.`,"Start Rendering?")){R&&Z.forEach(ye=>ye.isFileSource&&URL.revokeObjectURL(ye.audioSrc));return}se(!1),J(!0),Ne(0);const we={aborted:!1};y.current=we,ci(),Qe("off"),Ui.current&&clearTimeout(Ui.current),le(!1),Pe(!0),$i.current&&$i.current.pause();const Ge=o.current,at=ge,dt=new Map,ht=new Map,Fn=new Map,nn=[],He=(ye,$e)=>new Promise(Nt=>{const Oe=new Image;Oe.crossOrigin="anonymous",Oe.onload=()=>{dt.set(ye,Oe),Nt()},Oe.onerror=()=>Nt(),Oe.src=$e}),Ut=(ye,$e)=>new Promise(Nt=>{const Oe=document.createElement("video");Oe.crossOrigin="anonymous",Oe.muted=!0,Oe.playsInline=!0,Oe.preload="auto";let fn=!1;const Ft=()=>{fn||(fn=!0,ht.set(ye,Oe),Nt())};Oe.oncanplay=()=>{fn||(Oe.currentTime=.001)},Oe.onseeked=()=>Ft(),Oe.onerror=()=>{console.warn("Failed to load video:",$e),Ft()},setTimeout(()=>Ft(),5e3),Oe.src=$e,Oe.load()}),Zt=(ye,$e)=>new Promise(Nt=>{const Oe=document.createElement("audio");Oe.crossOrigin="anonymous",Oe.onloadedmetadata=()=>{Fn.set(ye,Oe),Nt()},Oe.onerror=()=>Nt(),Oe.src=$e});if(Y.forEach(ye=>{ye.type==="video"?nn.push(Ut(ye.id,ye.url)):ye.type==="audio"||ye.type==="audio"?nn.push(Zt(ye.id,ye.url)):nn.push(He(ye.id,ye.url))}),_.showChannelInfo&&(_.channelInfoImage&&nn.push(He("__channel_info__",_.channelInfoImage)),_.channelInfoText)){const ye=_.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(ye))try{const $e=document.createElement("div");$e.style.position="absolute",$e.style.visibility="hidden",$e.style.whiteSpace="nowrap",$e.style.fontFamily="sans-serif",$e.style.fontWeight="bold",$e.style.fontSize="100px",$e.style.display="inline-flex",$e.style.alignItems="center",$e.style.gap="0.25em",$e.innerHTML=ye;const Nt=$e.getElementsByTagName("svg");for(let An=0;An<Nt.length;An++)Nt[An].style.width="auto",Nt[An].style.height="1.5em";document.body.appendChild($e);const{width:Oe,height:fn}=$e.getBoundingClientRect();document.body.removeChild($e);const Ft=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${Oe}" height="${fn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${ye}
                  </div>
                </foreignObject>
              </svg>
            `,Vn=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(Ft).replace(/%([0-9A-F]{2})/g,function(Ki,hl){return String.fromCharCode(parseInt(hl,16))}))}`;nn.push(He("__channel_info_text_svg__",Vn))}catch($e){console.warn("Failed to process SVG channel info",$e)}}if(_.backgroundSource==="image"&&_.backgroundImage&&nn.push(He("__custom_bg__",_.backgroundImage)),await Promise.all(nn),we.aborted){J(!1),R&&Z.forEach(ye=>ye.isFileSource&&URL.revokeObjectURL(ye.audioSrc));return}const kn=u.current,q=kn.getContext("2d"),ft=kn.captureStream(z);let Ct=null;try{if(Ge.captureStream)Ct=Ge.captureStream();else if(Ge.mozCaptureStream)Ct=Ge.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),J(!1);return}const lt=new(window.AudioContext||window.webkitAudioContext),dn=lt.createMediaStreamDestination();lt.createMediaElementSource(Ge).connect(dn),ht.forEach(ye=>{ye.muted=!0,lt.createMediaElementSource(ye).connect(dn)}),Fn.forEach(ye=>{ye.muted=!0,lt.createMediaElementSource(ye).connect(dn)}),dn.stream.getAudioTracks().length>0?ft.addTrack(dn.stream.getAudioTracks()[0]):Ct&&ft.addTrack(Ct.getAudioTracks()[0]);const Bn=(()=>{if(Ze!=="auto"&&MediaRecorder.isTypeSupported(Ze))return Ze;const ye=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const $e of ye)if(MediaRecorder.isTypeSupported($e))return $e;return"video/webm"})(),Pi=ke==="1080p"?8e6:4e6,Yi=z>30?1.5:1,vo=Ce==="high"?2:Ce==="low"?.5:1,ti=Pi*Yi*vo,Gt=new MediaRecorder(ft,{mimeType:Bn,videoBitsPerSecond:ti});h.current=Gt;const di=[];Gt.ondataavailable=ye=>{ye.data.size>0&&di.push(ye.data)},Gt.onstop=()=>{if(we.aborted)console.log("Render aborted");else{const ye=new Blob(di,{type:Bn}),$e=Nt=>{const Oe=URL.createObjectURL(Nt),fn=document.createElement("a");fn.href=Oe;const Ft=Bn.includes("mp4")?"mp4":"webm",pn=R?`Playlist_${Z.length}_Songs_${Se.replace(":","-")}.${Ft}`:`${Z[0].metadata.title||"video"}_${Se.replace(":","-")}.${Ft}`;fn.download=pn,document.body.appendChild(fn),fn.click(),document.body.removeChild(fn),URL.revokeObjectURL(Oe)};Bn.includes("webm"),$e(ye)}lt.close(),J(!1),T(ye=>ye+1),R&&Z.forEach(ye=>ye.isFileSource&&URL.revokeObjectURL(ye.audioSrc))};let Q=0,Cn=[],St=A,_n=0,Ji=0;const fi=1e3/z,pi=ye=>{if(we.aborted)return;(Gt.state==="recording"||Gt.state==="paused")&&requestAnimationFrame(pi);const $e=ye-Ji;if($e<fi)return;Ji=ye-$e%fi;const Nt=Ge.currentTime;_n>0&&Ne(Nt/_n*100),ht.forEach((Oe,fn)=>{if(fn==="background"){const Ft=Oe.duration||1,pn=Nt%Ft;let Vn=Math.abs(Oe.currentTime-pn);(pn<Oe.currentTime&&Oe.currentTime-pn>Ft/2||Vn>.5)&&(Oe.currentTime=pn),Oe.paused&&Oe.play().catch(()=>{})}else{const Ft=Y.find(pn=>pn.id===fn);if(Ft)if(Nt>=Ft.startTime&&Nt<Ft.endTime){const pn=Ft.playbackRate||1;let Vn=(Nt-Ft.startTime)*pn+(Ft.mediaStartOffset||0);const An=Ft.mediaDuration||Oe.duration;An&&An>0&&Vn>=An&&(Vn=Vn%An),Math.abs(Oe.playbackRate-pn)>.01&&(Oe.playbackRate=pn),Math.abs(Oe.currentTime-Vn)>.5&&(Oe.currentTime=Vn);const Ki=Ft.isMuted!==!1;Oe.muted!==Ki&&(Oe.muted=Ki),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),Fn.forEach((Oe,fn)=>{const Ft=Y.find(pn=>pn.id===fn);if(Ft){const pn=Ft.layer||0;if(_.layerVisibility?.audio?.[pn]!==!1&&Nt>=Ft.startTime&&Nt<Ft.endTime){const An=Ft.playbackRate||1,Ki=(Nt-Ft.startTime)*An+(Ft.mediaStartOffset||0);Math.abs(Oe.playbackRate-An)>.01&&(Oe.playbackRate=An),Math.abs(Oe.currentTime-Ki)>.5&&(Oe.currentTime=Ki);const hl=Ft.isMuted===!0;Oe.muted!==hl&&(Oe.muted=hl),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),q&&ry(q,kn.width,kn.height,Nt,Cn,St,Y,dt,ht,at,je,_.fontSizeScale,_.backgroundBlurStrength>0,_n,_,_.renderMode==="current"||Q===Z.length-1,_.renderMode==="current"||Q===0)},xo=async()=>{if(we.aborted){Gt.stop();return}if(Q>=Z.length){await new Promise($e=>setTimeout($e,500)),Gt.stop();return}const ye=Z[Q];Gt.state==="recording"&&Gt.pause(),Cn=ye.lyrics,St=ye.metadata,_n=0,ye.metadata.coverUrl&&(ye.metadata.backgroundType==="video"?await Ut("background",ye.metadata.coverUrl):await He("cover",ye.metadata.coverUrl)),Ge.pause(),Ge.src=ye.audioSrc,Ge.load(),await new Promise($e=>{const Nt=()=>{Ge.removeEventListener("canplay",Nt),$e()};Ge.addEventListener("canplay",Nt),Ge.readyState>=3&&Nt()}),_n=Ge.duration,Gt.state==="inactive"?(lt.state==="suspended"&&await lt.resume(),Gt.start(),requestAnimationFrame(pi)):Gt.state==="paused"&&Gt.resume(),await Ge.play(),await new Promise($e=>{const Nt=()=>{Ge.removeEventListener("ended",Nt),$e()};Ge.addEventListener("ended",Nt)}),Q++,xo()};await xo()},Pr=async()=>{if(!u.current)return;const R=_.renderMode==="playlist"&&Je.length>0;let Z=null,Ue=Di,K=A;if(R&&Je.length>0)Z=Je[0].audioFile,Ue=Je[0].parsedLyrics||[],K=Je[0].metadata;else if(Je.length>0&&Mt>=0)Z=Je[Mt].audioFile;else{n.error("Please load an audio file first.");return}if(!Z){n.error("No audio file available for FFmpeg export.");return}const we=`Start FFmpeg rendering at ${ke} (${Se})? This uses frame-by-frame capture for higher quality. Rendering may take several minutes.`;if(!await t(we,"Start FFmpeg Rendering?"))return;se(!1),J(!0),Ne(0),ee("Initializing...");const at={aborted:!1};y.current=at,ci();const dt=u.current,{w:ht,h:Fn}=ut();dt.width=ht,dt.height=Fn;const nn=new Map,He=new Map,Ut=[],Zt=(q,ft)=>new Promise(Ct=>{const lt=new Image;lt.crossOrigin="anonymous",lt.onload=()=>{nn.set(q,lt),Ct()},lt.onerror=()=>Ct(),lt.src=ft}),kn=(q,ft)=>new Promise(Ct=>{const lt=document.createElement("video");lt.crossOrigin="anonymous",lt.muted=!0,lt.playsInline=!0,lt.preload="auto";let dn=!1;const ln=()=>{dn||(dn=!0,He.set(q,lt),Ct())};lt.oncanplay=()=>{dn||(lt.currentTime=.001)},lt.onseeked=()=>ln(),lt.onerror=()=>{console.warn("Failed to load video:",ft),ln()},setTimeout(()=>ln(),5e3),lt.src=ft,lt.load()});if(Y.forEach(q=>{q.type==="video"?Ut.push(kn(q.id,q.url)):q.type!=="audio"&&Ut.push(Zt(q.id,q.url))}),K.coverUrl&&(K.backgroundType==="video"?Ut.push(kn("background",K.coverUrl)):Ut.push(Zt("cover",K.coverUrl))),_.backgroundSource==="image"&&_.backgroundImage&&Ut.push(Zt("__custom_bg__",_.backgroundImage)),_.showChannelInfo&&_.channelInfoImage&&Ut.push(Zt("__channel_info__",_.channelInfoImage)),await Promise.all(Ut),at.aborted){J(!1);return}try{const q=await oN({canvas:dt,audioFile:Z,lyrics:Ue,metadata:K,visualSlides:Y,imageMap:nn,videoMap:He,preset:ge,customFontName:je,renderConfig:_,resolution:ke,aspectRatio:Se,fps:z,quality:Ce,codec:I,onProgress:(dn,ln)=>{Ne(dn),ee(ln)},onLog:dn=>console.log(dn),abortSignal:at,isFirstSong:!0,isLastSong:!0}),ft=`${K.title||"video"}_${Se.replace(":","-")}_ffmpeg.${q.format}`,Ct=URL.createObjectURL(q.blob),lt=document.createElement("a");lt.href=Ct,lt.download=ft,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),URL.revokeObjectURL(Ct),n.success(`Video exported successfully! (${q.format.toUpperCase()}, ${Math.round(q.duration)}s)`)}catch(q){q.message!=="Render aborted"&&(console.error("FFmpeg render failed:",q),n.error(`FFmpeg render failed: ${q.message}`))}finally{J(!1),ee("")}},dl=async()=>{ae==="ffmpeg"?await Pr():await go()};W.useEffect(()=>{v.current=dl});const fl=W.useCallback(()=>{y.current&&(y.current.aborted=!0),h.current&&h.current.state==="recording"?h.current.stop():J(!1),ci()},[ci]),pl=W.useCallback(()=>{if(r.current){const R=o.current?.currentTime||0;if(xn===-1&&R<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(xn!==-1){const Z=r.current.querySelector('[data-lyric-active="true"]');if(Z){const Ue=r.current;if(Z.offsetHeight===0)return;const K=Z.offsetTop,we=Z.offsetHeight,Ge=Ue.clientHeight;let at=.5;_.contentPosition==="top"&&(at=.25),_.contentPosition==="bottom"&&(at=.75);const dt=K-Ge*at+we/2;Ue.scrollTo({top:dt,behavior:"smooth"})}}}},[xn,ge,_.contentPosition]);W.useEffect(()=>{pl()},[pl]),W.useEffect(()=>{const R=setTimeout(()=>{pl()},550);return()=>clearTimeout(R)},[L,ve,bt,jt,Te,Ae,pl]);const Ui=W.useRef(null),yo=W.useCallback(()=>{if(le(!1),Ui.current&&clearTimeout(Ui.current),!U){const R=window.setTimeout(()=>{le(!0)},3e3);Ui.current=R}},[U]),ui=()=>{yo()};W.useEffect(()=>{const R=Z=>{const Ue=Z.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Ue)||yo(),!(Z.target instanceof HTMLInputElement||Z.target instanceof HTMLTextAreaElement)){if(U){Ue==="escape"&&fl();return}switch(Z.key.toLowerCase()){case" ":case"k":Z.preventDefault(),Vi(),n.success(ze?"Paused":"Playing",{id:"play-pause"});break;case"s":Z.preventDefault(),ci(),n.success("Stopped",{id:"stop"});break;case"n":Z.preventDefault(),Mn(),n.success("Next Song",{id:"next-song"});break;case"o":Z.preventDefault();const we=!un;Ii(we),we&&Pe(!0),n.success(`Minimal Mode: ${we?"On":"Off"}`,{id:"minimal-mode"});break;case"b":Z.preventDefault(),ul(),n.success("Previous Song",{id:"prev-song"});break;case"r":Z.preventDefault(),Oi();const Ge=be==="off"?"one":be==="one"?"all":be==="all"?"all_repeat":"off",at={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${at[Ge]}`,{id:"repeat"});break;case"l":Z.preventDefault();const dt=!Ae;ct(dt),dt&&ne(Gn.PLAYER);break;case"h":Z.preventDefault();const ht=!ve;Pe(ht),n.success(ht?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"g":Z.preventDefault();const Fn=fd.flatMap(ye=>ye.options.map($e=>$e.value)),nn=Ie.current.lyricDisplayMode,Ut=(Fn.indexOf(nn)+1)%Fn.length,Zt=Fn[Ut];ie(ye=>({...ye,lyricDisplayMode:Zt})),n.success(`Lyric Mode: ${Zt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":Z.preventDefault();const kn=sy,q=Ie.current.textCase,Ct=(kn.indexOf(q)+1)%kn.length,lt=kn[Ct];ie(ye=>({...ye,textCase:lt})),n.success(`Text Case: ${lt}`,{id:"text-case"});break;case"f":qi();break;case"i":gt(ye=>!ye);break;case"p":vn(ye=>!ye);break;case"d":Z.preventDefault(),se(ye=>!ye);break;case"t":Ae?(ct(!1),ne(Gn.EDITOR)):ne(ye=>ye===Gn.PLAYER?Gn.EDITOR:Gn.PLAYER);break;case"m":Z.preventDefault();const dn=!wt;F(dn),n.success(dn?"Muted":"Unmuted",{id:"mute"});break;case"x":Z.preventDefault();const ln=Ie.current.highlightEffect==="none";ie(ye=>({...ye,highlightEffect:ye.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${ln?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":Z.preventDefault();const Jn=ud.flatMap(ye=>ye.options.map($e=>$e.value)),Bn=Ie.current.highlightEffect||"none",Pi=Jn.indexOf(Bn),vo=((Pi===-1?0:Pi)+1)%Jn.length,ti=Jn[vo],Gt=dd(ti);ie(ye=>{const $e={...ye,highlightEffect:ti};return $e.useCustomHighlightColors=!1,Gt&&($e.highlightColor=Gt.color,$e.highlightBackground=Gt.bg),$e}),n.success(`Effect: ${ti.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":Z.preventDefault();const Q=(Vu.indexOf(ge)+1)%Vu.length,Cn=Vu[Q];Me(Cn);const St=Nr[Cn];if(St){const ye={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};ie($e=>({...$e,...ye,...St}))}let _n=Cn;for(const ye of Cd){const $e=ye.options.find(Nt=>Nt.value===Cn);if($e){_n=$e.label;break}}n.success(`Preset: ${_n}`,{id:"preset"});break;case"arrowleft":if(Z.preventDefault(),o.current){const ye=Math.max(0,o.current.currentTime-5);o.current.currentTime=ye,Ke(ye)}break;case"arrowright":if(Z.preventDefault(),o.current){const ye=Math.min(De,o.current.currentTime+5);o.current.currentTime=ye,Ke(ye)}break;case"arrowup":Z.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":Z.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":Z.preventDefault();const Ji=Ie.current.fontSizeScale,fi=Math.min(Ji+.1,3);ie(ye=>({...ye,fontSizeScale:fi})),n.success(`Font Size: ${(fi*100).toFixed(0)}%`,{id:"font-size"});break;case"-":Z.preventDefault();const pi=Ie.current.fontSizeScale,xo=Math.max(pi-.1,.1);ie(ye=>({...ye,fontSizeScale:xo})),n.success(`Font Size: ${(xo*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(Z.ctrlKey||Z.metaKey)&&Z.shiftKey&&(Z.preventDefault(),v.current());break}}};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[ze,be,Te,U,yo,fl,Ae,Mn,ul,n,un,ge,ve,wt]),W.useEffect(()=>{let R,Z=0;const Ue=1e3/30,K=we=>{if(o.current&&!o.current.paused&&ze){R=requestAnimationFrame(K);const Ge=we-Z;Ge>Ue&&(Z=we-Ge%Ue,Ke(o.current.currentTime))}};return ze&&!U&&(R=requestAnimationFrame(K)),()=>{R&&cancelAnimationFrame(R)}},[ze,U]);const Rn=bt&&(!L||ve)&&!U,ji=jt&&(!L||ve)&&!U&&!un,oa=Dn.length>0?Dn[0]:null;oa?`${oa.url}`:A.coverUrl&&`${A.coverUrl}`;const $i=W.useRef(null);return W.useEffect(()=>{if(Dn.forEach(R=>{const Z=R.layer||0;if(_.layerVisibility?.visual?.[Z]!==!1&&R.type==="video"){const Ue=document.getElementById(`video-preview-${R.id}`);if(Ue)if(U)Ue.paused||Ue.pause();else{const K=R.playbackRate||1;let we=(_e-R.startTime)*K+(R.mediaStartOffset||0);const Ge=R.mediaDuration||Ue.duration;Ge&&Ge>0&&we>=Ge&&(we=we%Ge),Math.abs(Ue.playbackRate-K)>.01&&(Ue.playbackRate=K),Math.abs(Ue.currentTime-we)>.2&&(Ue.currentTime=we);const at=R.isMuted!==!1;Ue.muted!==at&&(Ue.muted=at);const dt=R.volume!==void 0?R.volume:1;Math.abs(Ue.volume-dt)>.01&&(Ue.volume=dt),ze&&Ue.paused?Ue.play().catch(()=>{}):!ze&&!Ue.paused&&Ue.pause()}}}),A.backgroundType==="video"&&$i.current){const R=$i.current;if(U)R.paused||R.pause();else{const Z=R.duration||1,Ue=_e%Z;Math.abs(R.currentTime-Ue)>.1&&(R.currentTime=Ue),ze&&R.paused?R.play().catch(()=>{}):!ze&&!R.paused&&R.pause()}}zi.forEach(R=>{const Z=document.getElementById(`audio-preview-${R.id}`);if(Z){const Ue=R.playbackRate||1,K=(_e-R.startTime)*Ue+(R.mediaStartOffset||0);Math.abs(Z.playbackRate-Ue)>.01&&(Z.playbackRate=Ue),Math.abs(Z.currentTime-K)>.2&&(Z.currentTime=K);const we=R.isMuted===!0;Z.muted!==we&&(Z.muted=we);const Ge=R.volume!==void 0?R.volume:1;Math.abs(Z.volume-Ge)>.01&&(Z.volume=Ge),ze&&Z.paused?Z.play().catch(()=>{}):!ze&&!Z.paused&&Z.pause()}})},[_e,ze,Dn,A,zi,_.layerVisibility]),f.jsxs("div",{ref:a,onMouseMove:ui,onTouchStart:ui,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${L&&!ve?"cursor-none":""}`,children:[f.jsx("audio",{ref:o,src:m||void 0,loop:be==="one",muted:wt,onTimeUpdate:$o,onLoadedMetadata:mo,onEnded:()=>{if(U)return;const R=Je.length>0;be==="one"||(be==="all_repeat"?R?Mn():o.current?.play():be==="all"&&R&&Mt<Je.length-1?Mn():Le(!1))},crossOrigin:"anonymous"},b),zi.map(R=>f.jsx("audio",{id:`audio-preview-${R.id}`,src:R.url,className:"hidden",playsInline:!0},R.id)),f.jsx("canvas",{ref:u,width:Ve,height:It,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),f.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[_.backgroundSource==="color"&&f.jsx("div",{className:"absolute inset-0",style:{backgroundColor:_.backgroundColor}}),_.backgroundSource==="gradient"&&f.jsx("div",{className:"absolute inset-0",style:{background:_.backgroundGradient}}),_.backgroundSource==="image"&&_.backgroundImage&&f.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${_.backgroundImage})`}}),_.backgroundSource==="smart-gradient"&&f.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const R=_.backgroundColor||"#312e81",Z=parseInt(R.slice(1,3),16),Ue=parseInt(R.slice(3,5),16),K=parseInt(R.slice(5,7),16),we=`${Z},${Ue},${K}`,Ge=`${Math.floor(Z*.6)},${Math.floor(Ue*.6)},${Math.floor(K*.6)}`;return`linear-gradient(to bottom right, rgb(${we}), rgb(${Ge}) 50%, #000000)`})()}}),(_.backgroundSource==="timeline"||_.backgroundSource==="custom")&&A.coverUrl&&Y.length===0&&(A.backgroundType==="video"?f.jsx("video",{ref:$i,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${it?"opacity-60":"opacity-0"}`,muted:!0,loop:!U,playsInline:!0,preload:"auto",onLoadedData:()=>w(!0)}):f.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${_.backgroundSource==="custom"||Dn.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),_.backgroundSource==="color"&&f.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:_.backgroundColor}}),_.backgroundSource==="gradient"&&f.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:_.backgroundGradient}}),_.backgroundSource==="smart-gradient"&&f.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const R=_.backgroundColor||"#312e81",Z=parseInt(R.slice(1,3),16),Ue=parseInt(R.slice(3,5),16),K=parseInt(R.slice(5,7),16),we=`${Z},${Ue},${K}`,Ge=`${Math.floor(Z*.6)},${Math.floor(Ue*.6)},${Math.floor(K*.6)}`;return`linear-gradient(to bottom right, rgb(${we}), rgb(${Ge}) 50%, #000000)`})()}}),!A.coverUrl&&Dn.length===0&&(_.backgroundSource==="timeline"||_.backgroundSource==="custom")&&Y.length===0&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),f.jsx("div",{className:`absolute inset-0 pointer-events-none ${_.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:_.backgroundSource==="timeline"&&Dn.map(R=>{const Z=R.layer||0;if(_.layerVisibility?.visual?.[Z]===!1)return null;const Ue=_.visualTransitionType||"none",K=_.visualTransitionDuration||1;let we=1;if(Ue!=="none"){if(_e<R.startTime+K){const Ge=(_e-R.startTime)/K;we=Math.max(0,Math.min(1,Ge))}if(_e>=R.endTime){let Ge=!1;if(Ue==="crossfade"&&(Ge=Y.some(at=>at.id!==R.id&&(at.layer||0)===(R.layer||0)&&at.startTime>=R.endTime-.1&&at.startTime<R.endTime+.2)),!Ge){const dt=1-(_e-R.endTime)/K;we=Math.min(we,Math.max(0,Math.min(1,dt)))}}else if(Ue==="fade-to-black"&&_e>R.endTime-K){const Ge=(R.endTime-_e)/K;we=Math.min(we,Math.max(0,Math.min(1,Ge)))}}return f.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:we},children:R.type==="video"?f.jsx("video",{id:`video-preview-${R.id}`,src:R.url,className:"w-full h-full object-cover",muted:R.isMuted!==!1,playsInline:!0}):f.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${R.url})`}})},R.id)})}),f.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:_.backgroundBlurStrength>0?`blur(${_.backgroundBlurStrength}px)`:Be?"blur(12px)":"none",backgroundColor:_.useRealColorMedia?"transparent":_.backgroundBlurStrength>0||Be?"rgba(0,0,0,0.4)":void 0}}),_.enableGradientOverlay&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),f.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[_.showChannelInfo&&un&&f.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${_.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${_.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${_.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":_.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":_.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":_.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":_.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${_.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${_.channelInfoSizeScale??1})`,transformOrigin:_.channelInfoPosition?.includes("top")?_.channelInfoPosition?.includes("center")?"top center":_.channelInfoPosition?.includes("left")?"top left":"top right":_.channelInfoPosition?.includes("center")?"bottom center":_.channelInfoPosition?.includes("left")?"bottom left":"bottom right",..._.channelInfoPosition?.includes("center")?_.channelInfoPosition?.includes("top")?{marginTop:`${(_.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(_.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(_.channelInfoMarginScale??1)*1.5}rem`}},children:[_.channelInfoImage&&_.channelInfoStyle!=="minimal"&&f.jsx("img",{src:_.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${_.channelInfoStyle==="circle"?"rounded-full":""}`}),_.channelInfoText&&_.channelInfoStyle!=="logo"&&(()=>{const R=_.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(R)?f.jsx("div",{className:`text-white font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${_.channelInfoStyle==="minimal"||_.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,dangerouslySetInnerHTML:{__html:R}}):f.jsx("p",{className:`text-white font-bold drop-shadow-md text-lg 
                    ${_.channelInfoStyle==="minimal"||_.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,children:_.channelInfoText})})()]}),un&&f.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${Rn?"opacity-100":"opacity-0"}
              ${_.infoPosition==="top-left"?"top-0 left-0 items-start text-left":_.infoPosition==="top-right"?"top-0 right-0 items-end text-right":_.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":_.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":_.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":_.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${_.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${_.infoSizeScale??1})`,transformOrigin:_.infoPosition?.includes("top")?_.infoPosition?.includes("center")?"top center":_.infoPosition?.includes("right")?"top right":"top left":_.infoPosition?.includes("center")?"bottom center":_.infoPosition?.includes("right")?"bottom right":"bottom left",..._.infoPosition?.includes("center")?_.infoPosition?.includes("top")?{marginTop:`${(_.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(_.infoMarginScale??1)*1.5}rem`}:{margin:`${(_.infoMarginScale??1)*1.5}rem`}},children:f.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${_.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${_.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${_.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${_.infoStyle==="modern"||_.infoStyle==="minimal",""}
            `,children:[f.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!_.showCover||_.infoStyle==="minimal"||_.infoStyle==="modern"?"hidden":"block"}
                ${_.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?f.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:R=>R.currentTarget.play(),onMouseOut:R=>R.currentTarget.pause()}):f.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:f.jsx($l,{size:24})}),f.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[f.jsx(qo,{size:20,className:"text-white"}),f.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:vt})]})]}),f.jsxs("div",{className:`flex flex-col justify-center ${_.infoPosition?.includes("right")?"items-end":_.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[f.jsx("h1",{className:`font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${_.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${_.infoStyle==="minimal"?"text-sm":_.infoStyle==="modern"||_.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,children:A.title}),f.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${_.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:f.jsx("p",{className:`drop-shadow-md
                    ${_.infoStyle==="minimal"?"text-zinc-400 text-[10px]":_.infoStyle==="modern"||_.infoStyle==="modern_art"?"text-white text-sm font-medium":"text-zinc-300 text-xs"}
                  `,children:A.artist})})]})]})}),f.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Rn&&!un?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:f.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[f.jsx("div",{className:"flex gap-4",children:f.jsxs("div",{className:"flex gap-4 items-center",children:[f.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${_.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?f.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:R=>R.currentTarget.play(),onMouseOut:R=>R.currentTarget.pause()}):f.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:f.jsx($l,{size:24})}),f.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[f.jsx(qo,{size:20,className:"text-white"}),f.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:vt})]})]}),f.jsxs("div",{children:[f.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${_.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),f.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${_.showArtist?"opacity-100":"opacity-0"}`,children:f.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),f.jsxs("div",{className:`flex gap-2 flex-wrap ${un?"hidden":""}`,children:[f.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:f.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),f.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),f.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),f.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),f.jsx("button",{onClick:()=>Pe(!ve),className:`p-2 rounded-full transition-colors ${ve?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:ve?f.jsx(Ka,{size:20}):f.jsx(Ja,{size:20})}),f.jsx("button",{onClick:()=>Ii(!un),className:`p-2 rounded-full transition-colors ${un?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:un?f.jsx(Za,{size:20}):f.jsx(g0,{size:20})}),f.jsx("button",{onClick:()=>{const R=!Ae;ct(R),R&&ne(Gn.PLAYER)},className:`p-2 rounded-full transition-colors ${Ae?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:f.jsx(br,{size:20})}),f.jsx("button",{onClick:()=>{Ae&&ct(!1),ne(Te===Gn.PLAYER?Gn.EDITOR:Gn.PLAYER)},className:`p-2 rounded-full transition-colors ${Te===Gn.EDITOR&&!Ae?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:f.jsx(ug,{size:20})}),f.jsx("button",{onMouseDown:R=>{R.stopPropagation(),se(!D)},className:`p-2 rounded-full transition-colors ${D?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:f.jsx(gr,{size:20})}),f.jsx("button",{onClick:qi,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:de?f.jsx(g0,{size:20}):f.jsx(Za,{size:20})})]})]})}),f.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${_.contentPosition==="top"?"items-start pt-[10vh]":_.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:V.length>0?f.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${_.textAlign==="left"?"text-left":_.textAlign==="right"?"text-right":"text-center"} ${_.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:(Rn||ji)&&ge!=="subtitle"?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[f.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${_.fontSizeScale}); line-height: calc(1.75rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${_.fontSizeScale}); line-height: calc(1.75rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${_.fontSizeScale}); line-height: calc(2rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${_.fontSizeScale}); line-height: calc(2.25rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${_.fontSizeScale}); line-height: calc(2.5rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
              `}),f.jsx("div",{className:`transition-all duration-500 ${_.contentPosition==="center"?Te===Gn.EDITOR||Ae?"h-[25vh]":!Rn&&!ji?"h-[50vh]":"h-[40vh]":"h-0"}`}),Di.map((R,Z)=>{const Ue=Z===xn,K=Te===Gn.EDITOR||Ae,we=["9:16","3:4","1:1","1:2","2:3"].includes(Se);if(_.lyricDisplayMode!=="all"){if(_.lyricDisplayMode==="active-only"&&Z!==xn)return f.jsx("p",{className:"hidden"},Z);if(_.lyricDisplayMode==="next-only"&&(Z<xn||Z>xn+1))return f.jsx("p",{className:"hidden"},Z);if(_.lyricDisplayMode==="previous-next"&&Math.abs(Z-xn)>1)return f.jsx("p",{className:"hidden"},Z)}else if(ge==="none"||ge==="just_video")return f.jsx("p",{className:"hidden"},Z);let Ge="",at="";const dt=_.transitionEffect;let ht="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Ue?dt==="slide"?ht+="translate-y-0 opacity-100 ":dt==="zoom"?ht+="scale-100 opacity-100 ":dt==="float"?ht+="translate-y-0 opacity-100 ":dt==="blur"?ht+="blur-0 opacity-100 ":dt==="fade"?ht+="opacity-100 ":dt==="drop"?ht+="trans-drop-enter opacity-100 ":dt==="lightspeed"?ht+="trans-lightspeed-enter opacity-100 ":dt==="roll"?ht+="trans-roll-enter opacity-100 ":dt==="elastic"?ht+="trans-elastic-enter opacity-100 ":dt==="flip"?ht+="trans-flip-enter opacity-100 ":dt==="rotate-in"?ht+="trans-rotate-in-enter opacity-100 ":dt==="spiral"?ht+="trans-spiral-enter opacity-100 ":dt==="shatter"?ht+="trans-shatter-enter opacity-100 ":ht+="opacity-100 ":(dt==="slide"?ht+="translate-y-4 opacity-0 ":dt==="zoom"?ht+="scale-75 opacity-0 ":dt==="float"?ht+="translate-y-8 opacity-0 ":dt==="blur"?ht+="blur-md opacity-0 ":dt==="fade"?ht+="opacity-50 ":dt==="drop"?ht+="trans-drop-exit opacity-0 ":dt==="roll"?ht+="trans-roll-exit opacity-0 ":ht+="opacity-0 ",dt==="none"&&(ht=ht.replace("opacity-0","opacity-50"))),ge==="large"||ge==="large_upper"){const Ct=we?K?"text-4xl":"text-6xl":K?"text-6xl":"text-8xl",lt=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${Ct} font-black text-white ${ge==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,at=`${lt} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(ge==="big_center"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} font-black text-white uppercase tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="testing_up"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-white uppercase tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="testing"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-white tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="one_line_up"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-white uppercase tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="one_line"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-white tracking-tight text-center`,at=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ge==="metal"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ge==="kids"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ge==="sad"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-7xl",ft=we?K?"text-lg":"text-xl":K?"text-xl":"text-2xl";Ge=`${q} text-zinc-200 tracking-wider text-center drop-shadow-md`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ge==="romantic"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-7xl",ft=we?K?"text-lg":"text-xl":K?"text-xl":"text-2xl";Ge=`${q} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,at=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(ge==="tech"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,at=`${ft} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(ge==="gothic"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-7xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl";Ge=`${q} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,at=`${ft} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(ge==="monospace"){const q=we?K?"text-2xl":"text-3xl":K?"text-3xl":"text-5xl",ft=we?K?"text-lg":"text-xl":K?"text-xl":"text-2xl";Ge=`${q} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,at=`${ft} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(ge==="classic"){const q=we?K?"text-2xl":"text-3xl":K?"text-3xl":"text-6xl",ft=we?K?"text-lg":"text-xl":K?"text-xl":"text-2xl";Ge=`${q} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,at=`${ft} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(ge==="slideshow"||ge==="just_video")Ge=`${we?K?"text-2xl":"text-3xl":K?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,at="hidden";else if(ge==="subtitle"){Ge=`${we?K?"text-2xl":"text-3xl":K?"text-3xl":"text-4xl"} text-white tracking-wide text-center whitespace-pre-wrap`,at="hidden";let ft="bottom-16";K&&ji?ft="bottom-[560px]":K?ft="bottom-[360px]":ji&&(ft="bottom-[280px]"),ht=ht.replace("absolute","").replace("transform",""),ht+=`fixed ${ft} left-1/2 -translate-x-1/2 w-full px-8 z-[100] pointer-events-none `}else if(ge==="custom"){const q=we?K?"text-4xl":"text-5xl":K?"text-6xl":"text-8xl",ft=we?K?"text-xl":"text-2xl":K?"text-2xl":"text-3xl",Ct=_.textAlign==="center"?"text-center":_.textAlign==="right"?"text-right":"text-left";Ge=`${q} tracking-tight ${Ct}`,at=`${ft} opacity-40 hover:opacity-100 ${Ct}`}else{const q=we?K?"text-2xl":"text-3xl":K?"text-3xl":"text-5xl",ft=we?K?"text-lg":"text-xl":K?"text-xl":"text-2xl";Ge=`${q} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,at=`${ft} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const nn=(_.lyricStyleTarget||"active-only")==="all"||Ue;let He={color:_.fontColor,fontWeight:nn?_.fontWeight:void 0,fontStyle:nn?_.fontStyle:void 0,textDecoration:nn?_.textDecoration:void 0,fontFamily:_.fontFamily==="CustomFont"?"CustomFont, sans-serif":_.fontFamily};if((ge==="custom"||ge==="default")&&Ue&&_.textEffect!=="none"){const q=_.textEffect;q==="glow"?He.textShadow=`0 0 10px ${_.fontColor}, 0 0 20px ${_.fontColor}`:q==="neon"?He.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${_.fontColor}, 0 0 40px ${_.fontColor}, 0 0 80px ${_.fontColor}`:q==="neon-multi"?He.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":q==="shadow"?He.textShadow="3px 3px 6px rgba(0,0,0,0.7)":q==="outline"?He.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":q==="3d"?He.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":q==="emboss"?(He.color="#ebebeb",He.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):q==="gold"?(He.background="linear-gradient(to bottom, #d4af37, #C5A028)",He.WebkitBackgroundClip="text",He.color="transparent"):q==="chrome"?(He.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",He.WebkitBackgroundClip="text",He.color="transparent"):q==="fire"?(He.color="#fff",He.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):q==="frozen"?(He.color="#fff",He.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):q==="vhs"?He.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":q==="gradient"?(He.background=`linear-gradient(to right, ${_.fontColor}, #ffffff)`,He.WebkitBackgroundClip="text",He.color="transparent"):q==="rainbow"?(He.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",He.WebkitBackgroundClip="text",He.color="transparent"):q==="glass"?(He.backgroundColor="rgba(255, 255, 255, 0.1)",He.backdropFilter="blur(8px)",He.padding="0.5rem 1rem",He.borderRadius="0.75rem",He.border="1px solid rgba(255, 255, 255, 0.2)",He.display="inline-block"):q==="mirror"?(He.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",He.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):q==="retro"?(He.fontFamily="'Press Start 2P', cursive",He.color="#ff00ff",He.textShadow="4px 4px 0px #00ffff"):q==="hologram"?(He.color="rgba(0, 255, 255, 0.7)",He.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",He.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",He.WebkitBackgroundClip="text"):q==="comic"&&(He.fontFamily="'Bangers', cursive",He.color="#ffcc00",He.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",He.letterSpacing="1px")}let Ut=R.text;const Zt=_.textCase;Zt==="upper"?Ut=Ut.toUpperCase():Zt==="lower"?Ut=Ut.toLowerCase():Zt==="title"?Ut=Ut.replace(/\w\S*/g,q=>q.charAt(0).toUpperCase()+q.substr(1).toLowerCase()):Zt==="sentence"?Ut=Ut.charAt(0).toUpperCase()+Ut.slice(1).toLowerCase():Zt==="invert"&&(Ut=Ut.replace(/\w\S*/g,q=>q.charAt(0).toLowerCase()+q.slice(1).toUpperCase())),Ut=Ut.replace(/\s*([-])\s*/g,"$1"),Ue&&_.textAnimation==="typewriter"&&(Ut=Ut.substring(0,Math.max(0,Math.floor((_e-R.time)*35))));let kn=Ut;if(Ue&&_.highlightEffect!=="none"){const q=_.highlightEffect,ft=R.words&&R.words.length>0;if((q==="karaoke"||q?.startsWith("karaoke-"))&&ft)kn=R.words.filter(Ct=>Ct.text===`
`||Ct.text.trim().length>0).map((Ct,lt,dn)=>{if(Ct.text===`
`)return f.jsx("br",{},lt);let ln=Ct.text.trim();if(Zt==="upper")ln=ln.toUpperCase();else if(Zt==="lower")ln=ln.toLowerCase();else if(Zt==="title")ln=ln.replace(/\w\S*/g,St=>St.charAt(0).toUpperCase()+St.substr(1).toLowerCase());else if(Zt==="sentence"){const St=ln.toLowerCase();ln=lt===0?St.charAt(0).toUpperCase()+St.slice(1):St}else Zt==="invert"&&(ln=ln.replace(/\w\S*/g,St=>St.charAt(0).toLowerCase()+St.slice(1).toUpperCase()));const Jn=Ct.startTime+ce,Bn=Ct.endTime+ce,Pi=_e>=Jn&&_e<Bn,Yi=_e>=Bn,vo=/[-]$/,ti=/^[-]/;let Gt=!ln.endsWith(" ");vo.test(ln.trim())&&(Gt=!1);const di=dn[lt+1];di&&ti.test(di.text.trim())&&(Gt=!1),di&&di.text===`
`&&(Gt=!1),lt===dn.length-1&&(Gt=!1);let Q={display:"inline-block",transition:"all 0.1s ease"};if(_.textDecoration&&_.textDecoration!=="none"&&(Q.textDecoration=_.textDecoration),!Pi&&!Yi)Q.opacity=.5,Q.transform="scale(1)";else if(Yi)if(q==="karaoke-fill"){const St=_.highlightBackground||"#fb923c";Q.backgroundColor=St,Q.color="#000",Q.padding="2px 6px",Q.borderRadius="4px",Q.opacity=1}else q==="karaoke-smooth"?(Q.color=_.highlightColor||"#fb923c",Q.opacity=1):(ge==="custom"&&(Q.color=_.fontColor),Q.opacity=1);if(Pi){const St=_.highlightColor||"#fb923c",_n=_.highlightBackground||"#fb923c";if(q==="karaoke-smooth"){const Ji=Ct.endTime-Ct.startTime,fi=_e-Jn,pi=Math.min(100,Math.max(0,fi/Ji*100));Q.backgroundImage=`linear-gradient(90deg, ${St} ${pi}%, ${_.fontColor||"#ffffff"} ${pi}%)`,Q.backgroundClip="text",Q.WebkitBackgroundClip="text",Q.color="transparent",Q.WebkitTextFillColor="transparent",Q.textShadow="none"}else q==="karaoke"||q==="color"?(Q.color=St,Q.textShadow=`0 0 10px ${St}`):q==="karaoke-neon"?(Q.color="#fff",Q.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${St}, 0 0 35px ${St}`):q==="karaoke-scale"?(Q.color=St,Q.transform="scale(1.3)"):q==="karaoke-underline"?(Q.color=St,Q.textDecoration=(Q.textDecoration||"")+" underline",Q.textDecorationColor=St,Q.textUnderlineOffset="4px"):q==="karaoke-bounce"?(Q.color=St,Q.transform="translateY(-10px)"):q==="karaoke-fill"?(Q.backgroundColor=_n,Q.color="#000",Q.padding="2px 6px",Q.borderRadius="4px"):q==="karaoke-outline"?(Q.color="transparent",Q.WebkitTextStroke=`2px ${St}`):q==="karaoke-shadow"?(Q.color=St,Q.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):q==="karaoke-gradient"?(Q.background=`linear-gradient(90deg, ${St}, ${_n})`,Q.WebkitBackgroundClip="text",Q.WebkitTextFillColor="transparent"):q==="karaoke-wave"?(Q.color=St,Q.animation="bounce 0.3s ease infinite"):q==="karaoke-pill"?(Q.backgroundColor=_n,Q.color="#000",Q.padding="4px 16px",Q.borderRadius="9999px"):q==="karaoke-box"?(Q.backgroundColor=_n,Q.color="#000",Q.padding="4px 8px",Q.borderRadius="0"):q==="karaoke-rounded"?(Q.backgroundColor=_n,Q.color="#000",Q.padding="4px 12px",Q.padding="4px 12px",Q.borderRadius="12px"):q==="karaoke-glass"?(Q.backgroundColor="rgba(255, 255, 255, 0.1)",Q.color="#fff",Q.padding="4px 12px",Q.borderRadius="8px",Q.backdropFilter="blur(4px)",Q.border="1px solid rgba(255, 255, 255, 0.3)",Q.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):q==="karaoke-neon-multi"?(Q.color="#fff",Q.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):q==="karaoke-soft-glow"?(Q.color=St,Q.textShadow=`0 0 5px ${St}, 0 0 15px ${St}, 0 0 30px ${St}`):q==="karaoke-3d"?Q.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":q==="karaoke-emboss"?(Q.color="#ebebeb",Q.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):q==="karaoke-chrome"?(Q.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Q.WebkitBackgroundClip="text",Q.color="transparent"):q==="karaoke-gold"?(Q.background="linear-gradient(to bottom, #d4af37, #C5A028)",Q.WebkitBackgroundClip="text",Q.color="transparent"):q==="karaoke-fire"?(Q.color="#fff",Q.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):q==="karaoke-frozen"?(Q.color="#fff",Q.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):q==="karaoke-rainbow"?(Q.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Q.WebkitBackgroundClip="text",Q.color="transparent"):q==="karaoke-mirror"?(Q.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Q.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):q==="karaoke-vhs"?Q.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":q==="karaoke-retro"?(Q.fontFamily="'Press Start 2P', cursive",Q.color="#ff00ff",Q.textShadow="4px 4px 0px #00ffff"):q==="karaoke-cyberpunk"?(Q.color="#fcee0a",Q.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8"):q==="karaoke-hologram"?(Q.color="rgba(0, 255, 255, 0.7)",Q.textShadow="0 0 5px rgba(0,255,255,0.5)"):q==="karaoke-comic"?(Q.fontFamily="'Bangers', cursive",Q.color="#ffcc00",Q.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):q==="karaoke-glitch-text"?Q.animation="anim-glitch 0.4s infinite linear":q==="karaoke-pulse"?Q.animation="anim-pulse 1s infinite ease-in-out":q==="karaoke-breathe"?Q.animation="anim-breathe 2s infinite ease-in-out":q==="karaoke-float"?Q.animation="anim-float 2s infinite ease-in-out":q==="karaoke-sway"?Q.animation="anim-sway 2s infinite ease-in-out":q==="karaoke-flicker"?Q.animation="anim-flicker 2s infinite linear":q==="karaoke-shake"?Q.animation="anim-shake 0.2s infinite linear":q==="karaoke-wobble"?Q.animation="anim-wobble 1s infinite ease-in-out":q==="karaoke-jello"?Q.animation="anim-jello 1s infinite":q==="karaoke-rubberband"?Q.animation="anim-rubberband 1s infinite":q==="karaoke-heartbeat"?Q.animation="anim-heartbeat 1.3s infinite ease-in-out":q==="karaoke-flash"?Q.animation="anim-flash 1s infinite":q==="karaoke-tada"?Q.animation="anim-tada 1s infinite":q==="karaoke-swing"?Q.animation="anim-swing 2s infinite":q==="karaoke-rotate"?Q.animation="anim-rotate 4s infinite linear":q==="karaoke-spin"?Q.animation="anim-rotate 1s infinite linear":q==="karaoke-glitch"?Q.animation="anim-glitch 0.3s infinite linear":q==="karaoke-typewriter"?(Q.animation="typewriter-reveal 0.5s steps(10, end) forwards",Q.whiteSpace="nowrap",Q.overflow="hidden",Q.display="inline-block",Q.verticalAlign="bottom"):q==="karaoke-fade"?Q.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":q==="karaoke-slide"?Q.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":q==="karaoke-drop"?Q.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":q==="karaoke-lightspeed"?Q.animation="trans-lightspeed-in 0.5s ease-out forwards":q==="karaoke-roll"?Q.animation="trans-roll-in 0.5s ease-out forwards":q==="karaoke-zoom"?Q.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":q==="karaoke-elastic"?Q.animation="trans-elastic-in 0.7s ease-out forwards":q==="karaoke-scale-rotate"?Q.animation="trans-scale-rotate-in 0.5s ease-out forwards":q==="karaoke-flip"?Q.animation="trans-flip-in 0.5s ease-out forwards":q==="karaoke-rotate-in"?Q.animation="trans-rotate-in 0.5s ease-out forwards":q==="karaoke-spiral"?Q.animation="trans-spiral-in 0.6s ease-out forwards":q==="karaoke-blur"?Q.animation="trans-blur-in 0.4s ease-out forwards":q==="karaoke-shatter"?Q.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(q||"")&&(Q.color=St,Q.textShadow=`0 0 10px ${St}`,q?.includes("glow")&&(Q.textShadow=`0 0 5px ${St}, 0 0 15px ${St}, 0 0 30px ${St}`))}const Cn=f.jsx("span",{className:"inline-block",style:Q,children:ln},lt);return Gt?f.jsxs(rg.Fragment,{children:[Cn," "]},lt):Cn});else if(q==="karaoke"||q?.startsWith("karaoke-")){const Ct=_.highlightColor||"#fb923c",lt=_.highlightBackground||"#fb923c";He.color=Ct,q==="karaoke-neon"&&(He.textShadow=`0 0 10px ${Ct}, 0 0 20px ${Ct}`),q==="karaoke-scale"&&(He.transform=(He.transform||"")+" scale(1.1)"),q==="karaoke-underline"&&(He.textDecoration="underline"),q==="karaoke-bounce"&&(He.transform=(He.transform||"")+" translateY(-5px)"),q==="karaoke-fill"&&(He.backgroundColor=lt,He.color="#000",He.padding="4px 12px",He.borderRadius="6px"),q==="karaoke-outline"&&(He.color="transparent",He.WebkitTextStroke=`2px ${Ct}`),q==="karaoke-shadow"&&(He.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),q==="karaoke-gradient"&&(He.background=`linear-gradient(90deg, ${Ct}, ${lt})`,He.WebkitBackgroundClip="text",He.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(q)&&(He.backgroundColor=lt,He.color="#000",He.padding="4px 16px",He.borderRadius=q==="karaoke-pill"?"9999px":q==="karaoke-rounded"?"12px":"0"),q?.includes("glow")&&(He.textShadow=`0 0 10px ${Ct}, 0 0 20px ${Ct}`)}else q==="scale"?He.color=_.highlightColor||"#fb923c":_.highlightEffect==="background"&&(He.backgroundColor=(_.highlightBackground||"#fb923c")+"4D",He.padding="0 10px",He.borderRadius="8px")}return f.jsx("p",{"data-lyric-active":Ue?"true":"false",className:`${ht} ${Ue?Ge:at} ${Ue&&_.textAnimation!=="none"&&_.textAnimation!=="typewriter"?`text-anim-${_.textAnimation}`:""}`,style:He,onClick:()=>{Ue&&(navigator.clipboard.writeText(R.text),n.success("Lyric copied to clipboard",1500)),o.current&&!U&&(o.current.currentTime=R.time,Ke(R.time))},children:kn},Z)}),f.jsx("div",{className:`transition-all duration-500 ${_.contentPosition==="center"?Te===Gn.EDITOR||Ae?"h-[25vh]":!Rn&&!ji?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):f.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!oa&&ge!=="none"&&f.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[f.jsx($l,{size:64,className:"opacity-20"}),f.jsx("p",{children:"Load audio & lyrics to start"}),f.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),f.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${ji?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:f.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 group",children:[f.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Yl(_e)}),f.jsxs("div",{ref:Ye,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:R=>{R.currentTarget.setPointerCapture(R.pointerId),ia(R.clientX)},onPointerMove:R=>{R.buttons===1&&ia(R.clientX)},children:[f.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${_e/De*100}%`}}),f.jsx("input",{type:"range",min:"0",max:De||0,value:_e,onChange:bn,disabled:U,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),f.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Yl(De)}),f.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[f.jsx("button",{onClick:()=>F(!wt),className:"text-zinc-400 hover:text-white",children:wt||mt===0?f.jsx(ql,{size:16}):f.jsx(Vo,{size:16})}),f.jsxs("div",{ref:nt,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:R=>{R.currentTarget.setPointerCapture(R.pointerId),Li(R.clientX)},onPointerMove:R=>{R.buttons===1&&Li(R.clientX)},children:[f.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${wt?0:mt*100}%`}}),f.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:wt?0:mt,onChange:ns,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),f.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[f.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[f.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio",children:[f.jsx($l,{size:18}),f.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:We,disabled:U})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${V.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt)",children:[f.jsx(xr,{size:18}),f.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml",className:"hidden",onChange:$t,disabled:U})]}),V.length>0&&f.jsx("button",{onClick:()=>B([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:U,children:f.jsx(wi,{size:14})})]}),f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[f.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[ce>0?"+":"",ce.toFixed(1),"s"]}),f.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[f.jsx("button",{onClick:()=>Re(R=>parseFloat((R+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:U,children:f.jsx(ju,{size:12})}),f.jsx("button",{onClick:()=>Re(R=>parseFloat((R-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:U,children:f.jsx(ts,{size:12})})]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${je?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:je?`Custom Font: ${je}`:"Load Custom Font (.ttf, .otf, .woff)",children:[f.jsx(Oo,{size:18}),f.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:ei,disabled:U})]}),je&&f.jsx("button",{onClick:()=>Fe(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:U,children:f.jsx(wi,{size:14})})]}),f.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[f.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(_.fontSizeScale*100),"%"]}),f.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[f.jsx("button",{onClick:()=>ie(R=>({...R,fontSizeScale:Math.min(R.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:U,children:f.jsx(ju,{size:12})}),f.jsx("button",{onClick:()=>ie(R=>({...R,fontSizeScale:Math.max(R.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:U,children:f.jsx(ts,{size:12})})]})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{value:ge,onChange:R=>{const Z=R.target.value;Me(Z);const Ue=Nr[Z];if(Ue){const K={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};ie(we=>({...we,...K,...Ue}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Visual Preset",children:[f.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),f.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),f.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),f.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),f.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),f.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),f.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),f.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),f.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),f.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),f.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),f.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),f.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),f.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),f.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),f.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),f.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),f.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),f.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),f.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),f.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:f.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),f.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:ci,title:"Stop (S)",disabled:U,children:f.jsx(Ku,{size:20,fill:"currentColor"})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U||Je.length===0,onClick:ul,title:"Previous Song",children:f.jsx(Fb,{size:24})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:f.jsx(Rb,{size:20})}),f.jsx("button",{onClick:Vi,disabled:U,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:ze?f.jsx(dg,{size:28,fill:"currentColor"}):f.jsx($u,{size:28,fill:"currentColor",className:"ml-1"})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:f.jsx(Zx,{size:20})}),f.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U||Je.length===0,onClick:Mn,title:"Next Song",children:f.jsx(Vb,{size:24})}),f.jsxs("button",{className:`transition-colors disabled:opacity-50 ${be!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:Oi,title:`Repeat: ${be==="off"?"Off":be==="one"?"One":be==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:U,children:[be==="one"&&f.jsx(Ab,{size:20}),be==="all_repeat"&&f.jsx(y0,{size:20}),be==="all"&&f.jsx(br,{size:20}),be==="off"&&f.jsx(y0,{size:20,className:"opacity-50"})]})]}),f.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>ie(R=>({...R,backgroundBlurStrength:R.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${Be?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${Be?"On":"Off"}`,disabled:U,children:Be?"BLUR":"SHARP"}),f.jsx("button",{onClick:()=>ie(R=>({...R,highlightEffect:R.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${_.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:f.jsx(Oo,{size:20})}),f.jsx("button",{onClick:()=>fe(R=>R==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:U,children:ke}),f.jsx("button",{onClick:()=>Ee(R=>R==="16:9"?"9:16":R==="9:16"?"3:4":R==="3:4"?"1:1":R==="1:1"?"1:2":R==="1:2"?"2:1":R==="2:1"?"2:3":R==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:U,children:Se})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{value:Ze,onChange:R=>H(R.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Video Codec",children:[f.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),Lt.map(R=>f.jsx("option",{value:R.value,className:"bg-zinc-900",children:R.label},R.value))]}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:f.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{value:Ce,onChange:R=>he(R.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Quality (Bitrate)",children:[f.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),f.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),f.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:f.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),f.jsx("button",{onClick:dl,disabled:U||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:`Export as Video (${ae==="ffmpeg"?"FFmpeg":"MediaRecorder"})`,children:f.jsx(Wa,{size:18})})]})]})]})})}),Ae?f.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:f.jsx(FA,{playlist:Je,setPlaylist:Jt,currentTrackIndex:Mt,setCurrentTrackIndex:ot,onPlayTrack:Ht,isPlaying:ze,onTogglePlay:Vi,currentTime:_e,onSeek:R=>{o.current&&!U&&(o.current.currentTime=R,Ke(R))},onClearPlaylist:()=>{ci(),x(null),B([]),ot(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:R=>{R===Mt?(ci(),x(null),B([]),ot(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):R<Mt&&ot(Z=>Z-1),Jt(Z=>{const Ue=[...Z];return Ue.splice(R,1),Ue})},onClose:()=>ct(!1)})}):Te===Gn.EDITOR&&f.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:f.jsx(w1,{slides:Y,setSlides:re,currentTime:_e,duration:De||60,lyrics:V,onSeek:R=>{o.current&&!U&&(o.current.currentTime=R,Ke(R))},onClose:()=>ne(Gn.PLAYER),renderConfig:_,setRenderConfig:ie})})]}),U&&f.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[f.jsx("div",{className:ae==="ffmpeg"?"animate-pulse":"animate-bounce",children:f.jsx(Wa,{size:48,className:ae==="ffmpeg"?"text-orange-500":"text-purple-500"})}),f.jsxs("h2",{className:"text-2xl font-bold text-white",children:[ae==="ffmpeg"?"FFmpeg Rendering":"Rendering Video"," (",Se," ",ke,")"]}),f.jsx("p",{className:"text-zinc-400 max-w-md",children:ae==="ffmpeg"?f.jsxs(f.Fragment,{children:["Frame-by-frame capture using FFmpeg WASM.",f.jsx("br",{}),f.jsx("span",{className:"text-orange-400 font-medium",children:M||"Initializing..."}),f.jsx("br",{}),"This is faster than realtime - no audio playback needed."]}):f.jsxs(f.Fragment,{children:["Rendering in real-time using Canvas 2D engine.",f.jsx("br",{}),"The audio will play during capture.",f.jsx("br",{}),"Please keep this tab active for best performance."]})}),f.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full transition-all duration-300 ease-linear ${ae==="ffmpeg"?"bg-orange-500":"bg-purple-500"}`,style:{width:`${oe}%`}})}),f.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(oe),"%"]}),f.jsxs("button",{onClick:fl,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[f.jsx(Ku,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),D&&f.jsx(YA,{config:_,setConfig:ie,preset:ge,setPreset:Me,onClose:()=>se(!1),isPlaylistMode:Ae,hasPlaylist:Je.length>0,onRender:dl,customFontName:je,onFontUpload:ei,onClearCustomFont:()=>Fe(null),resolution:ke,setResolution:fe,aspectRatio:Se,setAspectRatio:Ee,renderCodec:Ze,setRenderCodec:H,supportedCodecs:Lt,renderQuality:Ce,setRenderQuality:he,renderFps:z,setRenderFps:pe,renderEngine:ae,setRenderEngine:E,ffmpegCodec:I,setFfmpegCodec:O})]})}const cy=document.getElementById("root");if(!cy)throw new Error("Could not find root element to mount to");const rN=bx.createRoot(cy);rN.render(f.jsx(rg.StrictMode,{children:f.jsx(v1,{children:f.jsx(sN,{})})}));export{cN as c,sg as g};
