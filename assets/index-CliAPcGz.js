(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(r){if(r.ep)return;r.ep=!0;const d=o(r);fetch(r.href,d)}})();var HA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Km(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _c={exports:{}},Is={};var qh;function Wv(){if(qh)return Is;qh=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var y in r)y!=="key"&&(d[y]=r[y])}else d=r;return r=d.ref,{$$typeof:n,type:s,key:h,ref:r!==void 0?r:null,props:d}}return Is.Fragment=t,Is.jsx=o,Is.jsxs=o,Is}var $h;function ex(){return $h||($h=1,_c.exports=Wv()),_c.exports}var p=ex(),wc={exports:{}},xt={};var jh;function tx(){if(jh)return xt;jh=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),T=Symbol.iterator;function A(I){return I===null||typeof I!="object"?null:(I=T&&I[T]||I["@@iterator"],typeof I=="function"?I:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function K(I,M,te){this.props=I,this.context=M,this.refs=F,this.updater=te||N}K.prototype.isReactComponent={},K.prototype.setState=function(I,M){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,M,"setState")},K.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function le(){}le.prototype=K.prototype;function ce(I,M,te){this.props=I,this.context=M,this.refs=F,this.updater=te||N}var ke=ce.prototype=new le;ke.constructor=ce,O(ke,K.prototype),ke.isPureReactComponent=!0;var Me=Array.isArray;function De(){}var ve={H:null,A:null,T:null,S:null},tt=Object.prototype.hasOwnProperty;function _e(I,M,te){var Se=te.ref;return{$$typeof:n,type:I,key:M,ref:Se!==void 0?Se:null,props:te}}function Qe(I,M){return _e(I.type,M,I.props)}function Ie(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function ct(I){var M={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(te){return M[te]})}var bt=/\/+/g;function Rt(I,M){return typeof I=="object"&&I!==null&&I.key!=null?ct(""+I.key):M.toString(36)}function xe(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(De,De):(I.status="pending",I.then(function(M){I.status==="pending"&&(I.status="fulfilled",I.value=M)},function(M){I.status==="pending"&&(I.status="rejected",I.reason=M)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function B(I,M,te,Se,Ke){var w=typeof I;(w==="undefined"||w==="boolean")&&(I=null);var U=!1;if(I===null)U=!0;else switch(w){case"bigint":case"string":case"number":U=!0;break;case"object":switch(I.$$typeof){case n:case t:U=!0;break;case x:return U=I._init,B(U(I._payload),M,te,Se,Ke)}}if(U)return Ke=Ke(I),U=Se===""?"."+Rt(I,0):Se,Me(Ke)?(te="",U!=null&&(te=U.replace(bt,"$&/")+"/"),B(Ke,M,te,"",function(Re){return Re})):Ke!=null&&(Ie(Ke)&&(Ke=Qe(Ke,te+(Ke.key==null||I&&I.key===Ke.key?"":(""+Ke.key).replace(bt,"$&/")+"/")+U)),M.push(Ke)),1;U=0;var ne=Se===""?".":Se+":";if(Me(I))for(var ie=0;ie<I.length;ie++)Se=I[ie],w=ne+Rt(Se,ie),U+=B(Se,M,te,w,Ke);else if(ie=A(I),typeof ie=="function")for(I=ie.call(I),ie=0;!(Se=I.next()).done;)Se=Se.value,w=ne+Rt(Se,ie++),U+=B(Se,M,te,w,Ke);else if(w==="object"){if(typeof I.then=="function")return B(xe(I),M,te,Se,Ke);throw M=String(I),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return U}function ye(I,M,te){if(I==null)return I;var Se=[],Ke=0;return B(I,Se,"","",function(w){return M.call(te,w,Ke++)}),Se}function ue(I){if(I._status===-1){var M=I._result;M=M(),M.then(function(te){(I._status===0||I._status===-1)&&(I._status=1,I._result=te)},function(te){(I._status===0||I._status===-1)&&(I._status=2,I._result=te)}),I._status===-1&&(I._status=0,I._result=M)}if(I._status===1)return I._result.default;throw I._result}var ht=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},mt={map:ye,forEach:function(I,M,te){ye(I,function(){M.apply(this,arguments)},te)},count:function(I){var M=0;return ye(I,function(){M++}),M},toArray:function(I){return ye(I,function(M){return M})||[]},only:function(I){if(!Ie(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return xt.Activity=S,xt.Children=mt,xt.Component=K,xt.Fragment=o,xt.Profiler=r,xt.PureComponent=ce,xt.StrictMode=s,xt.Suspense=v,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve,xt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return ve.H.useMemoCache(I)}},xt.cache=function(I){return function(){return I.apply(null,arguments)}},xt.cacheSignal=function(){return null},xt.cloneElement=function(I,M,te){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var Se=O({},I.props),Ke=I.key;if(M!=null)for(w in M.key!==void 0&&(Ke=""+M.key),M)!tt.call(M,w)||w==="key"||w==="__self"||w==="__source"||w==="ref"&&M.ref===void 0||(Se[w]=M[w]);var w=arguments.length-2;if(w===1)Se.children=te;else if(1<w){for(var U=Array(w),ne=0;ne<w;ne++)U[ne]=arguments[ne+2];Se.children=U}return _e(I.type,Ke,Se)},xt.createContext=function(I){return I={$$typeof:h,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:d,_context:I},I},xt.createElement=function(I,M,te){var Se,Ke={},w=null;if(M!=null)for(Se in M.key!==void 0&&(w=""+M.key),M)tt.call(M,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Ke[Se]=M[Se]);var U=arguments.length-2;if(U===1)Ke.children=te;else if(1<U){for(var ne=Array(U),ie=0;ie<U;ie++)ne[ie]=arguments[ie+2];Ke.children=ne}if(I&&I.defaultProps)for(Se in U=I.defaultProps,U)Ke[Se]===void 0&&(Ke[Se]=U[Se]);return _e(I,w,Ke)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(I){return{$$typeof:y,render:I}},xt.isValidElement=Ie,xt.lazy=function(I){return{$$typeof:x,_payload:{_status:-1,_result:I},_init:ue}},xt.memo=function(I,M){return{$$typeof:m,type:I,compare:M===void 0?null:M}},xt.startTransition=function(I){var M=ve.T,te={};ve.T=te;try{var Se=I(),Ke=ve.S;Ke!==null&&Ke(te,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(De,ht)}catch(w){ht(w)}finally{M!==null&&te.types!==null&&(M.types=te.types),ve.T=M}},xt.unstable_useCacheRefresh=function(){return ve.H.useCacheRefresh()},xt.use=function(I){return ve.H.use(I)},xt.useActionState=function(I,M,te){return ve.H.useActionState(I,M,te)},xt.useCallback=function(I,M){return ve.H.useCallback(I,M)},xt.useContext=function(I){return ve.H.useContext(I)},xt.useDebugValue=function(){},xt.useDeferredValue=function(I,M){return ve.H.useDeferredValue(I,M)},xt.useEffect=function(I,M){return ve.H.useEffect(I,M)},xt.useEffectEvent=function(I){return ve.H.useEffectEvent(I)},xt.useId=function(){return ve.H.useId()},xt.useImperativeHandle=function(I,M,te){return ve.H.useImperativeHandle(I,M,te)},xt.useInsertionEffect=function(I,M){return ve.H.useInsertionEffect(I,M)},xt.useLayoutEffect=function(I,M){return ve.H.useLayoutEffect(I,M)},xt.useMemo=function(I,M){return ve.H.useMemo(I,M)},xt.useOptimistic=function(I,M){return ve.H.useOptimistic(I,M)},xt.useReducer=function(I,M,te){return ve.H.useReducer(I,M,te)},xt.useRef=function(I){return ve.H.useRef(I)},xt.useState=function(I){return ve.H.useState(I)},xt.useSyncExternalStore=function(I,M,te){return ve.H.useSyncExternalStore(I,M,te)},xt.useTransition=function(){return ve.H.useTransition()},xt.version="19.2.3",xt}var Yh;function td(){return Yh||(Yh=1,wc.exports=tx()),wc.exports}var ee=td();const Xm=Km(ee);var Ac={exports:{}},zs={},Nc={exports:{}},Mc={};var Jh;function nx(){return Jh||(Jh=1,(function(n){function t(B,ye){var ue=B.length;B.push(ye);e:for(;0<ue;){var ht=ue-1>>>1,mt=B[ht];if(0<r(mt,ye))B[ht]=ye,B[ue]=mt,ue=ht;else break e}}function o(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ye=B[0],ue=B.pop();if(ue!==ye){B[0]=ue;e:for(var ht=0,mt=B.length,I=mt>>>1;ht<I;){var M=2*(ht+1)-1,te=B[M],Se=M+1,Ke=B[Se];if(0>r(te,ue))Se<mt&&0>r(Ke,te)?(B[ht]=Ke,B[Se]=ue,ht=Se):(B[ht]=te,B[M]=ue,ht=M);else if(Se<mt&&0>r(Ke,ue))B[ht]=Ke,B[Se]=ue,ht=Se;else break e}}return ye}function r(B,ye){var ue=B.sortIndex-ye.sortIndex;return ue!==0?ue:B.id-ye.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,S=null,T=3,A=!1,N=!1,O=!1,F=!1,K=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function ke(B){for(var ye=o(m);ye!==null;){if(ye.callback===null)s(m);else if(ye.startTime<=B)s(m),ye.sortIndex=ye.expirationTime,t(v,ye);else break;ye=o(m)}}function Me(B){if(O=!1,ke(B),!N)if(o(v)!==null)N=!0,De||(De=!0,ct());else{var ye=o(m);ye!==null&&xe(Me,ye.startTime-B)}}var De=!1,ve=-1,tt=5,_e=-1;function Qe(){return F?!0:!(n.unstable_now()-_e<tt)}function Ie(){if(F=!1,De){var B=n.unstable_now();_e=B;var ye=!0;try{e:{N=!1,O&&(O=!1,le(ve),ve=-1),A=!0;var ue=T;try{t:{for(ke(B),S=o(v);S!==null&&!(S.expirationTime>B&&Qe());){var ht=S.callback;if(typeof ht=="function"){S.callback=null,T=S.priorityLevel;var mt=ht(S.expirationTime<=B);if(B=n.unstable_now(),typeof mt=="function"){S.callback=mt,ke(B),ye=!0;break t}S===o(v)&&s(v),ke(B)}else s(v);S=o(v)}if(S!==null)ye=!0;else{var I=o(m);I!==null&&xe(Me,I.startTime-B),ye=!1}}break e}finally{S=null,T=ue,A=!1}ye=void 0}}finally{ye?ct():De=!1}}}var ct;if(typeof ce=="function")ct=function(){ce(Ie)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Rt=bt.port2;bt.port1.onmessage=Ie,ct=function(){Rt.postMessage(null)}}else ct=function(){K(Ie,0)};function xe(B,ye){ve=K(function(){B(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tt=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(B){switch(T){case 1:case 2:case 3:var ye=3;break;default:ye=T}var ue=T;T=ye;try{return B()}finally{T=ue}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(B,ye){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ue=T;T=B;try{return ye()}finally{T=ue}},n.unstable_scheduleCallback=function(B,ye,ue){var ht=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ht+ue:ht):ue=ht,B){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=ue+mt,B={id:x++,callback:ye,priorityLevel:B,startTime:ue,expirationTime:mt,sortIndex:-1},ue>ht?(B.sortIndex=ue,t(m,B),o(v)===null&&B===o(m)&&(O?(le(ve),ve=-1):O=!0,xe(Me,ue-ht))):(B.sortIndex=mt,t(v,B),N||A||(N=!0,De||(De=!0,ct()))),B},n.unstable_shouldYield=Qe,n.unstable_wrapCallback=function(B){var ye=T;return function(){var ue=T;T=ye;try{return B.apply(this,arguments)}finally{T=ue}}}})(Mc)),Mc}var Kh;function ix(){return Kh||(Kh=1,Nc.exports=nx()),Nc.exports}var Rc={exports:{}},In={};var Xh;function ox(){if(Xh)return In;Xh=1;var n=td();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(v,m,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,In.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return d(v,m,null,x)},In.flushSync=function(v){var m=h.T,x=s.p;try{if(h.T=null,s.p=2,v)return v()}finally{h.T=m,s.p=x,s.d.f()}},In.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(v,m))},In.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},In.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:A}):x==="script"&&s.d.X(v,{crossOrigin:S,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},In.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);s.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(v)},In.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin);s.d.L(v,x,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},In.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);s.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(v)},In.requestFormReset=function(v){s.d.r(v)},In.unstable_batchedUpdates=function(v,m){return v(m)},In.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},In.useFormStatus=function(){return h.H.useHostTransitionStatus()},In.version="19.2.3",In}var Qh;function lx(){if(Qh)return Rc.exports;Qh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Rc.exports=ox(),Rc.exports}var Zh;function sx(){if(Zh)return zs;Zh=1;var n=ix(),t=td(),o=lx();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=d(e),i===null)throw Error(s(188));return i!==e?null:e}for(var l=e,a=i;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(a=f.return,a!==null){l=a;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return v(f),e;if(g===a)return v(f),i;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=f,a=g;else{for(var b=!1,_=f.child;_;){if(_===l){b=!0,l=f,a=g;break}if(_===a){b=!0,a=f,l=g;break}_=_.sibling}if(!b){for(_=g.child;_;){if(_===l){b=!0,l=g,a=f;break}if(_===a){b=!0,a=g,l=f;break}_=_.sibling}if(!b)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),Qe=Symbol.for("react.memo_cache_sentinel"),Ie=Symbol.iterator;function ct(e){return e===null||typeof e!="object"?null:(e=Ie&&e[Ie]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Symbol.for("react.client.reference");function Rt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===bt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case K:return"Profiler";case F:return"StrictMode";case Me:return"Suspense";case De:return"SuspenseList";case _e:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case ce:return e.displayName||"Context";case le:return(e._context.displayName||"Context")+".Consumer";case ke:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ve:return i=e.displayName||null,i!==null?i:Rt(e.type)||"Memo";case tt:i=e._payload,e=e._init;try{return Rt(e(i))}catch{}}return null}var xe=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ht=[],mt=-1;function I(e){return{current:e}}function M(e){0>mt||(e.current=ht[mt],ht[mt]=null,mt--)}function te(e,i){mt++,ht[mt]=e.current,e.current=i}var Se=I(null),Ke=I(null),w=I(null),U=I(null);function ne(e,i){switch(te(w,i),te(Ke,e),te(Se,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ph(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ph(i),e=hh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(Se),te(Se,e)}function ie(){M(Se),M(Ke),M(w)}function Re(e){e.memoizedState!==null&&te(U,e);var i=Se.current,l=hh(i,e.type);i!==l&&(te(Ke,e),te(Se,l))}function Ue(e){Ke.current===e&&(M(Se),M(Ke)),U.current===e&&(M(U),Ns._currentValue=ue)}var be,Ne;function fe(e){if(be===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);be=i&&i[1]||"",Ne=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+e+Ne}var P=!1;function Ae(e,i){if(!e||P)return"";P=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(Z){var J=Z}Reflect.construct(e,[],me)}else{try{me.call()}catch(Z){J=Z}e.call(me.prototype)}}else{try{throw Error()}catch(Z){J=Z}(me=e())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(Z){if(Z&&J&&typeof Z.stack=="string")return[Z.stack,J.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),b=g[0],_=g[1];if(b&&_){var R=b.split(`
`),j=_.split(`
`);for(f=a=0;a<R.length&&!R[a].includes("DetermineComponentFrameRoot");)a++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(a===R.length||f===j.length)for(a=R.length-1,f=j.length-1;1<=a&&0<=f&&R[a]!==j[f];)f--;for(;1<=a&&0<=f;a--,f--)if(R[a]!==j[f]){if(a!==1||f!==1)do if(a--,f--,0>f||R[a]!==j[f]){var re=`
`+R[a].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=a&&0<=f);break}}}finally{P=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?fe(l):""}function je(e,i){switch(e.tag){case 26:case 27:case 5:return fe(e.type);case 16:return fe("Lazy");case 13:return e.child!==i&&i!==null?fe("Suspense Fallback"):fe("Suspense");case 19:return fe("SuspenseList");case 0:case 15:return Ae(e.type,!1);case 11:return Ae(e.type.render,!1);case 1:return Ae(e.type,!0);case 31:return fe("Activity");default:return""}}function Ve(e){try{var i="",l=null;do i+=je(e,l),l=e,e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ye=Object.prototype.hasOwnProperty,G=n.unstable_scheduleCallback,oe=n.unstable_cancelCallback,se=n.unstable_shouldYield,Ce=n.unstable_requestPaint,ge=n.unstable_now,he=n.unstable_getCurrentPriorityLevel,E=n.unstable_ImmediatePriority,C=n.unstable_UserBlockingPriority,L=n.unstable_NormalPriority,V=n.unstable_LowPriority,k=n.unstable_IdlePriority,ae=n.log,Y=n.unstable_setDisableYieldValue,Te=null,X=null;function Be(e){if(typeof ae=="function"&&Y(e),X&&typeof X.setStrictMode=="function")try{X.setStrictMode(Te,e)}catch{}}var Le=Math.clz32?Math.clz32:Ct,He=Math.log,dt=Math.LN2;function Ct(e){return e>>>=0,e===0?32:31-(He(e)/dt|0)|0}var Bt=256,Zt=262144,Ht=4194304;function ut(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,i,l){var a=e.pendingLanes;if(a===0)return 0;var f=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var _=a&134217727;return _!==0?(a=_&~g,a!==0?f=ut(a):(b&=_,b!==0?f=ut(b):l||(l=_&~e,l!==0&&(f=ut(l))))):(_=a&~g,_!==0?f=ut(_):b!==0?f=ut(b):l||(l=a&~e,l!==0&&(f=ut(l)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:f}function Ge(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ot(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Je(){var e=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),e}function _t(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function yt(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function nt(e,i,l,a,f,g){var b=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var _=e.entanglements,R=e.expirationTimes,j=e.hiddenUpdates;for(l=b&~l;0<l;){var re=31-Le(l),me=1<<re;_[re]=0,R[re]=-1;var J=j[re];if(J!==null)for(j[re]=null,re=0;re<J.length;re++){var Z=J[re];Z!==null&&(Z.lane&=-536870913)}l&=~me}a!==0&&un(e,a,0),g!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~i))}function un(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var a=31-Le(i);e.entangledLanes|=i,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function hn(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var a=31-Le(l),f=1<<a;f&i|e[a]&i&&(e[a]|=i),l&=~f}}function Si(e,i){var l=i&-i;return l=(l&42)!==0?1:Yn(l),(l&(e.suspendedLanes|i))!==0?0:l}function Yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ai(){var e=ye.p;return e!==0?e:(e=window.event,e===void 0?32:Ph(e.type))}function Pi(e,i){var l=ye.p;try{return ye.p=e,i()}finally{ye.p=l}}var at=Math.random().toString(36).slice(2),ft="__reactFiber$"+at,wt="__reactProps$"+at,Rn="__reactContainer$"+at,Ft="__reactEvents$"+at,Hn="__reactListeners$"+at,wr="__reactHandles$"+at,Os="__reactResources$"+at,Gi="__reactMarker$"+at;function Lo(e){delete e[ft],delete e[wt],delete e[Ft],delete e[Hn],delete e[wr]}function Ti(e){var i=e[ft];if(i)return i;for(var l=e.parentNode;l;){if(i=l[Rn]||l[ft]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=Sh(e);e!==null;){if(l=e[ft])return l;e=Sh(e)}return i}e=l,l=e.parentNode}return null}function ri(e){if(e=e[ft]||e[Rn]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Hi(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Vi(e){var i=e[Os];return i||(i=e[Os]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function sn(e){e[Gi]=!0}var Bi=new Set,nl={};function Jn(e,i){z(e,i),z(e+"Capture",i)}function z(e,i){for(nl[e]=i,e=0;e<i.length;e++)Bi.add(i[e])}var Q=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fe={},pe={};function Ee(e){return Ye.call(pe,e)?!0:Ye.call(Fe,e)?!1:Q.test(e)?pe[e]=!0:(Fe[e]=!0,!1)}function et(e,i,l){if(Ee(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function At(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function St(e,i,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+a)}}function rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bn(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kn(e,i,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Pe(e){if(!e._valueTracker){var i=bn(e)?"checked":"value";e._valueTracker=kn(e,i,""+e[i])}}function Kt(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return e&&(a=bn(e)?e.checked?"true":"false":e.value),e=a,e!==l?(i.setValue(e),!0):!1}function Xt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ci=/[\n"\\]/g;function q(e){return e.replace(Ci,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function pt(e,i,l,a,f,g,b,_){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+rt(i)):e.value!==""+rt(i)&&(e.value=""+rt(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?en(e,b,rt(i)):l!=null?en(e,b,rt(l)):a!=null&&e.removeAttribute("value"),f==null&&g!=null&&(e.defaultChecked=!!g),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+rt(_):e.removeAttribute("name")}function Dt(e,i,l,a,f,g,b,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Pe(e);return}l=l!=null?""+rt(l):"",i=i!=null?""+rt(i):l,_||i===e.value||(e.value=i),e.defaultValue=i}a=a??f,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=_?e.checked:!!a,e.defaultChecked=!!a,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Pe(e)}function en(e,i,l){i==="number"&&Xt(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Kn(e,i,l,a){if(e=e.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<e.length;l++)f=i.hasOwnProperty("$"+e[l].value),e[l].selected!==f&&(e[l].selected=f),f&&a&&(e[l].defaultSelected=!0)}else{for(l=""+rt(l),i=null,f=0;f<e.length;f++){if(e[f].value===l){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Sn(e,i,l){if(i!=null&&(i=""+rt(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+rt(l):""}function Xn(e,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(xe(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=rt(i),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),Pe(e)}function Qn(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var Fi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ao(e,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":a?e.setProperty(i,l):typeof l!="number"||l===0||Fi.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function ro(e,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var f in i)a=i[f],i.hasOwnProperty(f)&&l[f]!==a&&ao(e,f,a)}else for(var g in i)i.hasOwnProperty(g)&&ao(e,g,i[g])}function rn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function W(e){return Zn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function mn(){}var gt=null;function Dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ei=null,ui=null;function Po(e){var i=ri(e);if(i&&(e=i.stateNode)){var l=e[wt]||null;e:switch(e=i.stateNode,i.type){case"input":if(pt(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+q(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==e&&a.form===e.form){var f=a[wt]||null;if(!f)throw Error(s(90));pt(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===e.form&&Kt(a)}break e;case"textarea":Sn(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Kn(e,!!l.multiple,i,!1)}}}var qe=!1;function ze(e,i,l){if(qe)return e(i,l);qe=!0;try{var a=e(i);return a}finally{if(qe=!1,(Ei!==null||ui!==null)&&(Na(),Ei&&(i=Ei,e=ui,ui=Ei=null,Po(i),e)))for(i=0;i<e.length;i++)Po(e[i])}}function lt(e,i){var l=e.stateNode;if(l===null)return null;var a=l[wt]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Oe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tn=!1;if(Oe)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){tn=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch{tn=!1}var Wt=null,_i=null,Wn=null;function il(){if(Wn)return Wn;var e,i=_i,l=i.length,a,f="value"in Wt?Wt.value:Wt.textContent,g=f.length;for(e=0;e<l&&i[e]===f[e];e++);var b=l-e;for(a=1;a<=b&&i[l-a]===f[g-a];a++);return Wn=f.slice(e,1<a?1-a:void 0)}function ol(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function hd(){return!1}function Bn(e){function i(l,a,f,g,b){this._reactName=l,this._targetInst=f,this.type=a,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(l=e[_],this[_]=l?l(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qs:hd,this.isPropagationStopped=hd,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),i}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=Bn(Go),Yl=S({},Go,{view:0,detail:0}),Qg=Bn(Yl),Ar,Nr,Jl,js=S({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jl&&(Jl&&e.type==="mousemove"?(Ar=e.screenX-Jl.screenX,Nr=e.screenY-Jl.screenY):Nr=Ar=0,Jl=e),Ar)},movementY:function(e){return"movementY"in e?e.movementY:Nr}}),md=Bn(js),Zg=S({},js,{dataTransfer:0}),Wg=Bn(Zg),ey=S({},Yl,{relatedTarget:0}),Mr=Bn(ey),ty=S({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),ny=Bn(ty),iy=S({},Go,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oy=Bn(iy),ly=S({},Go,{data:0}),gd=Bn(ly),sy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ry[e])?!!i[e]:!1}function Rr(){return uy}var cy=S({},Yl,{key:function(e){if(e.key){var i=sy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ay[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(e){return e.type==="keypress"?ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dy=Bn(cy),fy=S({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=Bn(fy),py=S({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),hy=Bn(py),my=S({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),gy=Bn(my),yy=S({},js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vy=Bn(yy),xy=S({},Go,{newState:0,oldState:0}),by=Bn(xy),Sy=[9,13,27,32],kr=Oe&&"CompositionEvent"in window,Kl=null;Oe&&"documentMode"in document&&(Kl=document.documentMode);var Ty=Oe&&"TextEvent"in window&&!Kl,vd=Oe&&(!kr||Kl&&8<Kl&&11>=Kl),xd=" ",bd=!1;function Sd(e,i){switch(e){case"keyup":return Sy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Td(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ll=!1;function Cy(e,i){switch(e){case"compositionend":return Td(i);case"keypress":return i.which!==32?null:(bd=!0,xd);case"textInput":return e=i.data,e===xd&&bd?null:e;default:return null}}function Ey(e,i){if(ll)return e==="compositionend"||!kr&&Sd(e,i)?(e=il(),Wn=_i=Wt=null,ll=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vd&&i.locale!=="ko"?null:i.data;default:return null}}var _y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!_y[e.type]:i==="textarea"}function Ed(e,i,l,a){Ei?ui?ui.push(a):ui=[a]:Ei=a,i=Ua(i,"onChange"),0<i.length&&(l=new $s("onChange","change",null,l,a),e.push({event:l,listeners:i}))}var Xl=null,Ql=null;function wy(e){ah(e,0)}function Ys(e){var i=Hi(e);if(Kt(i))return e}function _d(e,i){if(e==="change")return i}var wd=!1;if(Oe){var Ir;if(Oe){var zr="oninput"in document;if(!zr){var Ad=document.createElement("div");Ad.setAttribute("oninput","return;"),zr=typeof Ad.oninput=="function"}Ir=zr}else Ir=!1;wd=Ir&&(!document.documentMode||9<document.documentMode)}function Nd(){Xl&&(Xl.detachEvent("onpropertychange",Md),Ql=Xl=null)}function Md(e){if(e.propertyName==="value"&&Ys(Ql)){var i=[];Ed(i,Ql,e,Dn(e)),ze(wy,i)}}function Ay(e,i,l){e==="focusin"?(Nd(),Xl=i,Ql=l,Xl.attachEvent("onpropertychange",Md)):e==="focusout"&&Nd()}function Ny(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ys(Ql)}function My(e,i){if(e==="click")return Ys(i)}function Ry(e,i){if(e==="input"||e==="change")return Ys(i)}function ky(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ei=typeof Object.is=="function"?Object.is:ky;function Zl(e,i){if(ei(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var f=l[a];if(!Ye.call(i,f)||!ei(e[f],i[f]))return!1}return!0}function Rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kd(e,i){var l=Rd(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=i&&a>=i)return{node:l,offset:i-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Rd(l)}}function Id(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Id(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function zd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Xt(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Xt(e.document)}return i}function Dr(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Iy=Oe&&"documentMode"in document&&11>=document.documentMode,sl=null,Ur=null,Wl=null,Lr=!1;function Dd(e,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Lr||sl==null||sl!==Xt(a)||(a=sl,"selectionStart"in a&&Dr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wl&&Zl(Wl,a)||(Wl=a,a=Ua(Ur,"onSelect"),0<a.length&&(i=new $s("onSelect","select",null,i,l),e.push({event:i,listeners:a}),i.target=sl)))}function Ho(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var al={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionrun:Ho("Transition","TransitionRun"),transitionstart:Ho("Transition","TransitionStart"),transitioncancel:Ho("Transition","TransitionCancel"),transitionend:Ho("Transition","TransitionEnd")},Pr={},Ud={};Oe&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function Vo(e){if(Pr[e])return Pr[e];if(!al[e])return e;var i=al[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in Ud)return Pr[e]=i[l];return e}var Ld=Vo("animationend"),Pd=Vo("animationiteration"),Gd=Vo("animationstart"),zy=Vo("transitionrun"),Dy=Vo("transitionstart"),Uy=Vo("transitioncancel"),Hd=Vo("transitionend"),Vd=new Map,Gr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gr.push("scrollEnd");function wi(e,i){Vd.set(e,i),Jn(i,[e])}var Js=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ci=[],rl=0,Hr=0;function Ks(){for(var e=rl,i=Hr=rl=0;i<e;){var l=ci[i];ci[i++]=null;var a=ci[i];ci[i++]=null;var f=ci[i];ci[i++]=null;var g=ci[i];if(ci[i++]=null,a!==null&&f!==null){var b=a.pending;b===null?f.next=f:(f.next=b.next,b.next=f),a.pending=f}g!==0&&Bd(l,f,g)}}function Xs(e,i,l,a){ci[rl++]=e,ci[rl++]=i,ci[rl++]=l,ci[rl++]=a,Hr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Vr(e,i,l,a){return Xs(e,i,l,a),Qs(e)}function Bo(e,i){return Xs(e,null,null,i),Qs(e)}function Bd(e,i,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var f=!1,g=e.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(f=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,f&&i!==null&&(f=31-Le(l),e=g.hiddenUpdates,a=e[f],a===null?e[f]=[i]:a.push(i),i.lane=l|536870912),g):null}function Qs(e){if(50<Ss)throw Ss=0,Ku=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ul={};function Ly(e,i,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(e,i,l,a){return new Ly(e,i,l,a)}function Br(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oi(e,i){var l=e.alternate;return l===null?(l=ti(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Fd(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Zs(e,i,l,a,f,g){var b=0;if(a=e,typeof e=="function")Br(e)&&(b=1);else if(typeof e=="string")b=Bv(e,l,Se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _e:return e=ti(31,l,i,f),e.elementType=_e,e.lanes=g,e;case O:return Fo(l.children,f,g,i);case F:b=8,f|=24;break;case K:return e=ti(12,l,i,f|2),e.elementType=K,e.lanes=g,e;case Me:return e=ti(13,l,i,f),e.elementType=Me,e.lanes=g,e;case De:return e=ti(19,l,i,f),e.elementType=De,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:b=10;break e;case le:b=9;break e;case ke:b=11;break e;case ve:b=14;break e;case tt:b=16,a=null;break e}b=29,l=Error(s(130,e===null?"null":typeof e,"")),a=null}return i=ti(b,l,i,f),i.elementType=e,i.type=a,i.lanes=g,i}function Fo(e,i,l,a){return e=ti(7,e,a,i),e.lanes=l,e}function Fr(e,i,l){return e=ti(6,e,null,i),e.lanes=l,e}function Od(e){var i=ti(18,null,null,0);return i.stateNode=e,i}function Or(e,i,l){return i=ti(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var qd=new WeakMap;function di(e,i){if(typeof e=="object"&&e!==null){var l=qd.get(e);return l!==void 0?l:(i={value:e,source:i,stack:Ve(i)},qd.set(e,i),i)}return{value:e,source:i,stack:Ve(i)}}var cl=[],dl=0,Ws=null,es=0,fi=[],pi=0,uo=null,zi=1,Di="";function qi(e,i){cl[dl++]=es,cl[dl++]=Ws,Ws=e,es=i}function $d(e,i,l){fi[pi++]=zi,fi[pi++]=Di,fi[pi++]=uo,uo=e;var a=zi;e=Di;var f=32-Le(a)-1;a&=~(1<<f),l+=1;var g=32-Le(i)+f;if(30<g){var b=f-f%5;g=(a&(1<<b)-1).toString(32),a>>=b,f-=b,zi=1<<32-Le(i)+f|l<<f|a,Di=g+e}else zi=1<<g|l<<f|a,Di=e}function qr(e){e.return!==null&&(qi(e,1),$d(e,1,0))}function $r(e){for(;e===Ws;)Ws=cl[--dl],cl[dl]=null,es=cl[--dl],cl[dl]=null;for(;e===uo;)uo=fi[--pi],fi[pi]=null,Di=fi[--pi],fi[pi]=null,zi=fi[--pi],fi[pi]=null}function jd(e,i){fi[pi++]=zi,fi[pi++]=Di,fi[pi++]=uo,zi=i.id,Di=i.overflow,uo=e}var _n=null,nn=null,zt=!1,co=null,hi=!1,jr=Error(s(519));function fo(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ts(di(i,e)),jr}function Yd(e){var i=e.stateNode,l=e.type,a=e.memoizedProps;switch(i[ft]=e,i[wt]=a,l){case"dialog":Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":case"embed":Mt("load",i);break;case"video":case"audio":for(l=0;l<Cs.length;l++)Mt(Cs[l],i);break;case"source":Mt("error",i);break;case"img":case"image":case"link":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"input":Mt("invalid",i),Dt(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Mt("invalid",i);break;case"textarea":Mt("invalid",i),Xn(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||dh(i.textContent,l)?(a.popover!=null&&(Mt("beforetoggle",i),Mt("toggle",i)),a.onScroll!=null&&Mt("scroll",i),a.onScrollEnd!=null&&Mt("scrollend",i),a.onClick!=null&&(i.onclick=mn),i=!0):i=!1,i||fo(e,!0)}function Jd(e){for(_n=e.return;_n;)switch(_n.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:_n=_n.return}}function fl(e){if(e!==_n)return!1;if(!zt)return Jd(e),zt=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||cc(e.type,e.memoizedProps)),l=!l),l&&nn&&fo(e),Jd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nn=bh(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nn=bh(e)}else i===27?(i=nn,wo(e.type)?(e=mc,mc=null,nn=e):nn=i):nn=_n?gi(e.stateNode.nextSibling):null;return!0}function Oo(){nn=_n=null,zt=!1}function Yr(){var e=co;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),co=null),e}function ts(e){co===null?co=[e]:co.push(e)}var Jr=I(null),qo=null,$i=null;function po(e,i,l){te(Jr,i._currentValue),i._currentValue=l}function ji(e){e._currentValue=Jr.current,M(Jr)}function Kr(e,i,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===l)break;e=e.return}}function Xr(e,i,l,a){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var _=g;g=f;for(var R=0;R<i.length;R++)if(_.context===i[R]){g.lanes|=l,_=g.alternate,_!==null&&(_.lanes|=l),Kr(g.return,l,e),a||(b=null);break e}g=_.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),Kr(b,l,e),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===e){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function pl(e,i,l,a){e=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var _=f.type;ei(f.pendingProps.value,b.value)||(e!==null?e.push(_):e=[_])}}else if(f===U.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Ns):e=[Ns])}f=f.return}e!==null&&Xr(i,e,l,a),i.flags|=262144}function ea(e){for(e=e.firstContext;e!==null;){if(!ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $o(e){qo=e,$i=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wn(e){return Kd(qo,e)}function ta(e,i){return qo===null&&$o(e),Kd(e,i)}function Kd(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},$i===null){if(e===null)throw Error(s(308));$i=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else $i=$i.next=i;return l}var Py=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Gy=n.unstable_scheduleCallback,Hy=n.unstable_NormalPriority,gn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qr(){return{controller:new Py,data:new Map,refCount:0}}function ns(e){e.refCount--,e.refCount===0&&Gy(Hy,function(){e.controller.abort()})}var is=null,Zr=0,hl=0,ml=null;function Vy(e,i){if(is===null){var l=is=[];Zr=0,hl=tc(),ml={status:"pending",value:void 0,then:function(a){l.push(a)}}}return Zr++,i.then(Xd,Xd),i}function Xd(){if(--Zr===0&&is!==null){ml!==null&&(ml.status="fulfilled");var e=is;is=null,hl=0,ml=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function By(e,i){var l=[],a={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return e.then(function(){a.status="fulfilled",a.value=i;for(var f=0;f<l.length;f++)(0,l[f])(i)},function(f){for(a.status="rejected",a.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),a}var Qd=B.S;B.S=function(e,i){Up=ge(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vy(e,i),Qd!==null&&Qd(e,i)};var jo=I(null);function Wr(){var e=jo.current;return e!==null?e:Qt.pooledCache}function na(e,i){i===null?te(jo,jo.current):te(jo,i.pool)}function Zd(){var e=Wr();return e===null?null:{parent:gn._currentValue,pool:e}}var gl=Error(s(460)),eu=Error(s(474)),ia=Error(s(542)),oa={then:function(){}};function Wd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ef(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(mn,mn),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,nf(e),e;default:if(typeof i.status=="string")i.then(mn,mn);else{if(e=Qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(a){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=a}},function(a){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,nf(e),e}throw Jo=i,gl}}function Yo(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Jo=l,gl):l}}var Jo=null;function tf(){if(Jo===null)throw Error(s(459));var e=Jo;return Jo=null,e}function nf(e){if(e===gl||e===ia)throw Error(s(483))}var yl=null,os=0;function la(e){var i=os;return os+=1,yl===null&&(yl=[]),ef(yl,e,i)}function ls(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function sa(e,i){throw i.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function of(e){function i(H,D){if(e){var $=H.deletions;$===null?(H.deletions=[D],H.flags|=16):$.push(D)}}function l(H,D){if(!e)return null;for(;D!==null;)i(H,D),D=D.sibling;return null}function a(H){for(var D=new Map;H!==null;)H.key!==null?D.set(H.key,H):D.set(H.index,H),H=H.sibling;return D}function f(H,D){return H=Oi(H,D),H.index=0,H.sibling=null,H}function g(H,D,$){return H.index=$,e?($=H.alternate,$!==null?($=$.index,$<D?(H.flags|=67108866,D):$):(H.flags|=67108866,D)):(H.flags|=1048576,D)}function b(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function _(H,D,$,de){return D===null||D.tag!==6?(D=Fr($,H.mode,de),D.return=H,D):(D=f(D,$),D.return=H,D)}function R(H,D,$,de){var it=$.type;return it===O?re(H,D,$.props.children,de,$.key):D!==null&&(D.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===tt&&Yo(it)===D.type)?(D=f(D,$.props),ls(D,$),D.return=H,D):(D=Zs($.type,$.key,$.props,null,H.mode,de),ls(D,$),D.return=H,D)}function j(H,D,$,de){return D===null||D.tag!==4||D.stateNode.containerInfo!==$.containerInfo||D.stateNode.implementation!==$.implementation?(D=Or($,H.mode,de),D.return=H,D):(D=f(D,$.children||[]),D.return=H,D)}function re(H,D,$,de,it){return D===null||D.tag!==7?(D=Fo($,H.mode,de,it),D.return=H,D):(D=f(D,$),D.return=H,D)}function me(H,D,$){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Fr(""+D,H.mode,$),D.return=H,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return $=Zs(D.type,D.key,D.props,null,H.mode,$),ls($,D),$.return=H,$;case N:return D=Or(D,H.mode,$),D.return=H,D;case tt:return D=Yo(D),me(H,D,$)}if(xe(D)||ct(D))return D=Fo(D,H.mode,$,null),D.return=H,D;if(typeof D.then=="function")return me(H,la(D),$);if(D.$$typeof===ce)return me(H,ta(H,D),$);sa(H,D)}return null}function J(H,D,$,de){var it=D!==null?D.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return it!==null?null:_(H,D,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return $.key===it?R(H,D,$,de):null;case N:return $.key===it?j(H,D,$,de):null;case tt:return $=Yo($),J(H,D,$,de)}if(xe($)||ct($))return it!==null?null:re(H,D,$,de,null);if(typeof $.then=="function")return J(H,D,la($),de);if($.$$typeof===ce)return J(H,D,ta(H,$),de);sa(H,$)}return null}function Z(H,D,$,de,it){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return H=H.get($)||null,_(D,H,""+de,it);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case A:return H=H.get(de.key===null?$:de.key)||null,R(D,H,de,it);case N:return H=H.get(de.key===null?$:de.key)||null,j(D,H,de,it);case tt:return de=Yo(de),Z(H,D,$,de,it)}if(xe(de)||ct(de))return H=H.get($)||null,re(D,H,de,it,null);if(typeof de.then=="function")return Z(H,D,$,la(de),it);if(de.$$typeof===ce)return Z(H,D,$,ta(D,de),it);sa(D,de)}return null}function Xe(H,D,$,de){for(var it=null,Lt=null,Ze=D,Et=D=0,It=null;Ze!==null&&Et<$.length;Et++){Ze.index>Et?(It=Ze,Ze=null):It=Ze.sibling;var Pt=J(H,Ze,$[Et],de);if(Pt===null){Ze===null&&(Ze=It);break}e&&Ze&&Pt.alternate===null&&i(H,Ze),D=g(Pt,D,Et),Lt===null?it=Pt:Lt.sibling=Pt,Lt=Pt,Ze=It}if(Et===$.length)return l(H,Ze),zt&&qi(H,Et),it;if(Ze===null){for(;Et<$.length;Et++)Ze=me(H,$[Et],de),Ze!==null&&(D=g(Ze,D,Et),Lt===null?it=Ze:Lt.sibling=Ze,Lt=Ze);return zt&&qi(H,Et),it}for(Ze=a(Ze);Et<$.length;Et++)It=Z(Ze,H,Et,$[Et],de),It!==null&&(e&&It.alternate!==null&&Ze.delete(It.key===null?Et:It.key),D=g(It,D,Et),Lt===null?it=It:Lt.sibling=It,Lt=It);return e&&Ze.forEach(function(ko){return i(H,ko)}),zt&&qi(H,Et),it}function st(H,D,$,de){if($==null)throw Error(s(151));for(var it=null,Lt=null,Ze=D,Et=D=0,It=null,Pt=$.next();Ze!==null&&!Pt.done;Et++,Pt=$.next()){Ze.index>Et?(It=Ze,Ze=null):It=Ze.sibling;var ko=J(H,Ze,Pt.value,de);if(ko===null){Ze===null&&(Ze=It);break}e&&Ze&&ko.alternate===null&&i(H,Ze),D=g(ko,D,Et),Lt===null?it=ko:Lt.sibling=ko,Lt=ko,Ze=It}if(Pt.done)return l(H,Ze),zt&&qi(H,Et),it;if(Ze===null){for(;!Pt.done;Et++,Pt=$.next())Pt=me(H,Pt.value,de),Pt!==null&&(D=g(Pt,D,Et),Lt===null?it=Pt:Lt.sibling=Pt,Lt=Pt);return zt&&qi(H,Et),it}for(Ze=a(Ze);!Pt.done;Et++,Pt=$.next())Pt=Z(Ze,H,Et,Pt.value,de),Pt!==null&&(e&&Pt.alternate!==null&&Ze.delete(Pt.key===null?Et:Pt.key),D=g(Pt,D,Et),Lt===null?it=Pt:Lt.sibling=Pt,Lt=Pt);return e&&Ze.forEach(function(Zv){return i(H,Zv)}),zt&&qi(H,Et),it}function Jt(H,D,$,de){if(typeof $=="object"&&$!==null&&$.type===O&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case A:e:{for(var it=$.key;D!==null;){if(D.key===it){if(it=$.type,it===O){if(D.tag===7){l(H,D.sibling),de=f(D,$.props.children),de.return=H,H=de;break e}}else if(D.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===tt&&Yo(it)===D.type){l(H,D.sibling),de=f(D,$.props),ls(de,$),de.return=H,H=de;break e}l(H,D);break}else i(H,D);D=D.sibling}$.type===O?(de=Fo($.props.children,H.mode,de,$.key),de.return=H,H=de):(de=Zs($.type,$.key,$.props,null,H.mode,de),ls(de,$),de.return=H,H=de)}return b(H);case N:e:{for(it=$.key;D!==null;){if(D.key===it)if(D.tag===4&&D.stateNode.containerInfo===$.containerInfo&&D.stateNode.implementation===$.implementation){l(H,D.sibling),de=f(D,$.children||[]),de.return=H,H=de;break e}else{l(H,D);break}else i(H,D);D=D.sibling}de=Or($,H.mode,de),de.return=H,H=de}return b(H);case tt:return $=Yo($),Jt(H,D,$,de)}if(xe($))return Xe(H,D,$,de);if(ct($)){if(it=ct($),typeof it!="function")throw Error(s(150));return $=it.call($),st(H,D,$,de)}if(typeof $.then=="function")return Jt(H,D,la($),de);if($.$$typeof===ce)return Jt(H,D,ta(H,$),de);sa(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,D!==null&&D.tag===6?(l(H,D.sibling),de=f(D,$),de.return=H,H=de):(l(H,D),de=Fr($,H.mode,de),de.return=H,H=de),b(H)):l(H,D)}return function(H,D,$,de){try{os=0;var it=Jt(H,D,$,de);return yl=null,it}catch(Ze){if(Ze===gl||Ze===ia)throw Ze;var Lt=ti(29,Ze,null,H.mode);return Lt.lanes=de,Lt.return=H,Lt}}}var Ko=of(!0),lf=of(!1),ho=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function go(e,i,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Vt&2)!==0){var f=a.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i,i=Qs(e),Bd(e,null,l),i}return Xs(e,a,i,l),Qs(e)}function ss(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,hn(e,l)}}function iu(e,i){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?f=g=i:g=g.next=i}else f=g=i;l={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var ou=!1;function as(){if(ou){var e=ml;if(e!==null)throw e}}function rs(e,i,l,a){ou=!1;var f=e.updateQueue;ho=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var R=_,j=R.next;R.next=null,b===null?g=j:b.next=j,b=R;var re=e.alternate;re!==null&&(re=re.updateQueue,_=re.lastBaseUpdate,_!==b&&(_===null?re.firstBaseUpdate=j:_.next=j,re.lastBaseUpdate=R))}if(g!==null){var me=f.baseState;b=0,re=j=R=null,_=g;do{var J=_.lane&-536870913,Z=J!==_.lane;if(Z?(kt&J)===J:(a&J)===J){J!==0&&J===hl&&(ou=!0),re!==null&&(re=re.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Xe=e,st=_;J=i;var Jt=l;switch(st.tag){case 1:if(Xe=st.payload,typeof Xe=="function"){me=Xe.call(Jt,me,J);break e}me=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=st.payload,J=typeof Xe=="function"?Xe.call(Jt,me,J):Xe,J==null)break e;me=S({},me,J);break e;case 2:ho=!0}}J=_.callback,J!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[J]:Z.push(J))}else Z={lane:J,tag:_.tag,payload:_.payload,callback:_.callback,next:null},re===null?(j=re=Z,R=me):re=re.next=Z,b|=J;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;Z=_,_=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);re===null&&(R=me),f.baseState=R,f.firstBaseUpdate=j,f.lastBaseUpdate=re,g===null&&(f.shared.lanes=0),So|=b,e.lanes=b,e.memoizedState=me}}function sf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function af(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)sf(l[e],i)}var vl=I(null),aa=I(0);function rf(e,i){e=to,te(aa,e),te(vl,i),to=e|i.baseLanes}function lu(){te(aa,to),te(vl,vl.current)}function su(){to=aa.current,M(vl),M(aa)}var ni=I(null),mi=null;function yo(e){var i=e.alternate;te(fn,fn.current&1),te(ni,e),mi===null&&(i===null||vl.current!==null||i.memoizedState!==null)&&(mi=e)}function au(e){te(fn,fn.current),te(ni,e),mi===null&&(mi=e)}function uf(e){e.tag===22?(te(fn,fn.current),te(ni,e),mi===null&&(mi=e)):vo()}function vo(){te(fn,fn.current),te(ni,ni.current)}function ii(e){M(ni),mi===e&&(mi=null),M(fn)}var fn=I(0);function ra(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||pc(l)||hc(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yi=0,Tt=null,jt=null,yn=null,ua=!1,xl=!1,Xo=!1,ca=0,us=0,bl=null,Fy=0;function cn(){throw Error(s(321))}function ru(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ei(e[l],i[l]))return!1;return!0}function uu(e,i,l,a,f,g){return Yi=g,Tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?jf:Eu,Xo=!1,g=l(a,f),Xo=!1,xl&&(g=df(i,l,a,f)),cf(e),g}function cf(e){B.H=fs;var i=jt!==null&&jt.next!==null;if(Yi=0,yn=jt=Tt=null,ua=!1,us=0,bl=null,i)throw Error(s(300));e===null||vn||(e=e.dependencies,e!==null&&ea(e)&&(vn=!0))}function df(e,i,l,a){Tt=e;var f=0;do{if(xl&&(bl=null),us=0,xl=!1,25<=f)throw Error(s(301));if(f+=1,yn=jt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=Yf,g=i(l,a)}while(xl);return g}function Oy(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?cs(i):i,e=e.useState()[0],(jt!==null?jt.memoizedState:null)!==e&&(Tt.flags|=1024),i}function cu(){var e=ca!==0;return ca=0,e}function du(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function fu(e){if(ua){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ua=!1}Yi=0,yn=jt=Tt=null,xl=!1,us=ca=0,bl=null}function Un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Tt.memoizedState=yn=e:yn=yn.next=e,yn}function pn(){if(jt===null){var e=Tt.alternate;e=e!==null?e.memoizedState:null}else e=jt.next;var i=yn===null?Tt.memoizedState:yn.next;if(i!==null)yn=i,jt=e;else{if(e===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));jt=e,e={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},yn===null?Tt.memoizedState=yn=e:yn=yn.next=e}return yn}function da(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cs(e){var i=us;return us+=1,bl===null&&(bl=[]),e=ef(bl,e,i),i=Tt,(yn===null?i.memoizedState:yn.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?jf:Eu),e}function fa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cs(e);if(e.$$typeof===ce)return wn(e)}throw Error(s(438,String(e)))}function pu(e){var i=null,l=Tt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Tt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=da(),Tt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),a=0;a<e;a++)l[a]=Qe;return i.index++,l}function Ji(e,i){return typeof i=="function"?i(e):i}function pa(e){var i=pn();return hu(i,jt,e)}function hu(e,i,l){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var f=e.baseQueue,g=a.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}i.baseQueue=f=g,a.pending=null}if(g=e.baseState,f===null)e.memoizedState=g;else{i=f.next;var _=b=null,R=null,j=i,re=!1;do{var me=j.lane&-536870913;if(me!==j.lane?(kt&me)===me:(Yi&me)===me){var J=j.revertLane;if(J===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),me===hl&&(re=!0);else if((Yi&J)===J){j=j.next,J===hl&&(re=!0);continue}else me={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(_=R=me,b=g):R=R.next=me,Tt.lanes|=J,So|=J;me=j.action,Xo&&l(g,me),g=j.hasEagerState?j.eagerState:l(g,me)}else J={lane:me,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(_=R=J,b=g):R=R.next=J,Tt.lanes|=me,So|=me;j=j.next}while(j!==null&&j!==i);if(R===null?b=g:R.next=_,!ei(g,e.memoizedState)&&(vn=!0,re&&(l=ml,l!==null)))throw l;e.memoizedState=g,e.baseState=b,e.baseQueue=R,a.lastRenderedState=g}return f===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function mu(e){var i=pn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var a=l.dispatch,f=l.pending,g=i.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do g=e(g,b.action),b=b.next;while(b!==f);ei(g,i.memoizedState)||(vn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,a]}function ff(e,i,l){var a=Tt,f=pn(),g=zt;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=i();var b=!ei((jt||f).memoizedState,l);if(b&&(f.memoizedState=l,vn=!0),f=f.queue,vu(mf.bind(null,a,f,e),[e]),f.getSnapshot!==i||b||yn!==null&&yn.memoizedState.tag&1){if(a.flags|=2048,Sl(9,{destroy:void 0},hf.bind(null,a,f,l,i),null),Qt===null)throw Error(s(349));g||(Yi&127)!==0||pf(a,i,l)}return l}function pf(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Tt.updateQueue,i===null?(i=da(),Tt.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function hf(e,i,l,a){i.value=l,i.getSnapshot=a,gf(i)&&yf(e)}function mf(e,i,l){return l(function(){gf(i)&&yf(e)})}function gf(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ei(e,l)}catch{return!0}}function yf(e){var i=Bo(e,2);i!==null&&jn(i,e,2)}function gu(e){var i=Un();if(typeof e=="function"){var l=e;if(e=l(),Xo){Be(!0);try{l()}finally{Be(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:e},i}function vf(e,i,l,a){return e.baseState=l,hu(e,jt,typeof a=="function"?a:Ji)}function qy(e,i,l,a,f){if(ga(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};B.T!==null?l(!0):g.isTransition=!1,a(g),l=i.pending,l===null?(g.next=i.pending=g,xf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function xf(e,i){var l=i.action,a=i.payload,f=e.state;if(i.isTransition){var g=B.T,b={};B.T=b;try{var _=l(f,a),R=B.S;R!==null&&R(b,_),bf(e,i,_)}catch(j){yu(e,i,j)}finally{g!==null&&b.types!==null&&(g.types=b.types),B.T=g}}else try{g=l(f,a),bf(e,i,g)}catch(j){yu(e,i,j)}}function bf(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Sf(e,i,a)},function(a){return yu(e,i,a)}):Sf(e,i,l)}function Sf(e,i,l){i.status="fulfilled",i.value=l,Tf(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,xf(e,l)))}function yu(e,i,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,Tf(i),i=i.next;while(i!==a)}e.action=null}function Tf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Cf(e,i){return i}function Ef(e,i){if(zt){var l=Qt.formState;if(l!==null){e:{var a=Tt;if(zt){if(nn){t:{for(var f=nn,g=hi;f.nodeType!==8;){if(!g){f=null;break t}if(f=gi(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){nn=gi(f.nextSibling),a=f.data==="F!";break e}}fo(a)}a=!1}a&&(i=l[0])}}return l=Un(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:i},l.queue=a,l=Of.bind(null,Tt,a),a.dispatch=l,a=gu(!1),g=Cu.bind(null,Tt,!1,a.queue),a=Un(),f={state:i,dispatch:null,action:e,pending:null},a.queue=f,l=qy.bind(null,Tt,f,g,l),f.dispatch=l,a.memoizedState=e,[i,l,!1]}function _f(e){var i=pn();return wf(i,jt,e)}function wf(e,i,l){if(i=hu(e,i,Cf)[0],e=pa(Ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=cs(i)}catch(b){throw b===gl?ia:b}else a=i;i=pn();var f=i.queue,g=f.dispatch;return l!==i.memoizedState&&(Tt.flags|=2048,Sl(9,{destroy:void 0},$y.bind(null,f,l),null)),[a,g,e]}function $y(e,i){e.action=i}function Af(e){var i=pn(),l=jt;if(l!==null)return wf(i,l,e);pn(),i=i.memoizedState,l=pn();var a=l.queue.dispatch;return l.memoizedState=e,[i,a,!1]}function Sl(e,i,l,a){return e={tag:e,create:l,deps:a,inst:i,next:null},i=Tt.updateQueue,i===null&&(i=da(),Tt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,i.lastEffect=e),e}function Nf(){return pn().memoizedState}function ha(e,i,l,a){var f=Un();Tt.flags|=e,f.memoizedState=Sl(1|i,{destroy:void 0},l,a===void 0?null:a)}function ma(e,i,l,a){var f=pn();a=a===void 0?null:a;var g=f.memoizedState.inst;jt!==null&&a!==null&&ru(a,jt.memoizedState.deps)?f.memoizedState=Sl(i,g,l,a):(Tt.flags|=e,f.memoizedState=Sl(1|i,g,l,a))}function Mf(e,i){ha(8390656,8,e,i)}function vu(e,i){ma(2048,8,e,i)}function jy(e){Tt.flags|=4;var i=Tt.updateQueue;if(i===null)i=da(),Tt.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function Rf(e){var i=pn().memoizedState;return jy({ref:i,nextImpl:e}),function(){if((Vt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function kf(e,i){return ma(4,2,e,i)}function If(e,i){return ma(4,4,e,i)}function zf(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Df(e,i,l){l=l!=null?l.concat([e]):null,ma(4,4,zf.bind(null,i,e),l)}function xu(){}function Uf(e,i){var l=pn();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&ru(i,a[1])?a[0]:(l.memoizedState=[e,i],e)}function Lf(e,i){var l=pn();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&ru(i,a[1]))return a[0];if(a=e(),Xo){Be(!0);try{e()}finally{Be(!1)}}return l.memoizedState=[a,i],a}function bu(e,i,l){return l===void 0||(Yi&1073741824)!==0&&(kt&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=Pp(),Tt.lanes|=e,So|=e,l)}function Pf(e,i,l,a){return ei(l,i)?l:vl.current!==null?(e=bu(e,l,a),ei(e,i)||(vn=!0),e):(Yi&42)===0||(Yi&1073741824)!==0&&(kt&261930)===0?(vn=!0,e.memoizedState=l):(e=Pp(),Tt.lanes|=e,So|=e,i)}function Gf(e,i,l,a,f){var g=ye.p;ye.p=g!==0&&8>g?g:8;var b=B.T,_={};B.T=_,Cu(e,!1,i,l);try{var R=f(),j=B.S;if(j!==null&&j(_,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var re=By(R,a);ds(e,i,re,si(e))}else ds(e,i,a,si(e))}catch(me){ds(e,i,{then:function(){},status:"rejected",reason:me},si())}finally{ye.p=g,b!==null&&_.types!==null&&(b.types=_.types),B.T=b}}function Yy(){}function Su(e,i,l,a){if(e.tag!==5)throw Error(s(476));var f=Hf(e).queue;Gf(e,f,i,ue,l===null?Yy:function(){return Vf(e),l(a)})}function Hf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:ue},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Vf(e){var i=Hf(e);i.next===null&&(i=e.alternate.memoizedState),ds(e,i.next.queue,{},si())}function Tu(){return wn(Ns)}function Bf(){return pn().memoizedState}function Ff(){return pn().memoizedState}function Jy(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=si();e=mo(l);var a=go(i,e,l);a!==null&&(jn(a,i,l),ss(a,i,l)),i={cache:Qr()},e.payload=i;return}i=i.return}}function Ky(e,i,l){var a=si();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ga(e)?qf(i,l):(l=Vr(e,i,l,a),l!==null&&(jn(l,e,a),$f(l,i,a)))}function Of(e,i,l){var a=si();ds(e,i,l,a)}function ds(e,i,l,a){var f={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ga(e))qf(i,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,_=g(b,l);if(f.hasEagerState=!0,f.eagerState=_,ei(_,b))return Xs(e,i,f,0),Qt===null&&Ks(),!1}catch{}if(l=Vr(e,i,f,a),l!==null)return jn(l,e,a),$f(l,i,a),!0}return!1}function Cu(e,i,l,a){if(a={lane:2,revertLane:tc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ga(e)){if(i)throw Error(s(479))}else i=Vr(e,l,a,2),i!==null&&jn(i,e,2)}function ga(e){var i=e.alternate;return e===Tt||i!==null&&i===Tt}function qf(e,i){xl=ua=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function $f(e,i,l){if((l&4194048)!==0){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,hn(e,l)}}var fs={readContext:wn,use:fa,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};fs.useEffectEvent=cn;var jf={readContext:wn,use:fa,useCallback:function(e,i){return Un().memoizedState=[e,i===void 0?null:i],e},useContext:wn,useEffect:Mf,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,ha(4194308,4,zf.bind(null,i,e),l)},useLayoutEffect:function(e,i){return ha(4194308,4,e,i)},useInsertionEffect:function(e,i){ha(4,2,e,i)},useMemo:function(e,i){var l=Un();i=i===void 0?null:i;var a=e();if(Xo){Be(!0);try{e()}finally{Be(!1)}}return l.memoizedState=[a,i],a},useReducer:function(e,i,l){var a=Un();if(l!==void 0){var f=l(i);if(Xo){Be(!0);try{l(i)}finally{Be(!1)}}}else f=i;return a.memoizedState=a.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},a.queue=e,e=e.dispatch=Ky.bind(null,Tt,e),[a.memoizedState,e]},useRef:function(e){var i=Un();return e={current:e},i.memoizedState=e},useState:function(e){e=gu(e);var i=e.queue,l=Of.bind(null,Tt,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:xu,useDeferredValue:function(e,i){var l=Un();return bu(l,e,i)},useTransition:function(){var e=gu(!1);return e=Gf.bind(null,Tt,e.queue,!0,!1),Un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var a=Tt,f=Un();if(zt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Qt===null)throw Error(s(349));(kt&127)!==0||pf(a,i,l)}f.memoizedState=l;var g={value:l,getSnapshot:i};return f.queue=g,Mf(mf.bind(null,a,g,e),[e]),a.flags|=2048,Sl(9,{destroy:void 0},hf.bind(null,a,g,l,i),null),l},useId:function(){var e=Un(),i=Qt.identifierPrefix;if(zt){var l=Di,a=zi;l=(a&~(1<<32-Le(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=ca++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Fy++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Tu,useFormState:Ef,useActionState:Ef,useOptimistic:function(e){var i=Un();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Cu.bind(null,Tt,!0,l),l.dispatch=i,[e,i]},useMemoCache:pu,useCacheRefresh:function(){return Un().memoizedState=Jy.bind(null,Tt)},useEffectEvent:function(e){var i=Un(),l={impl:e};return i.memoizedState=l,function(){if((Vt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Eu={readContext:wn,use:fa,useCallback:Uf,useContext:wn,useEffect:vu,useImperativeHandle:Df,useInsertionEffect:kf,useLayoutEffect:If,useMemo:Lf,useReducer:pa,useRef:Nf,useState:function(){return pa(Ji)},useDebugValue:xu,useDeferredValue:function(e,i){var l=pn();return Pf(l,jt.memoizedState,e,i)},useTransition:function(){var e=pa(Ji)[0],i=pn().memoizedState;return[typeof e=="boolean"?e:cs(e),i]},useSyncExternalStore:ff,useId:Bf,useHostTransitionStatus:Tu,useFormState:_f,useActionState:_f,useOptimistic:function(e,i){var l=pn();return vf(l,jt,e,i)},useMemoCache:pu,useCacheRefresh:Ff};Eu.useEffectEvent=Rf;var Yf={readContext:wn,use:fa,useCallback:Uf,useContext:wn,useEffect:vu,useImperativeHandle:Df,useInsertionEffect:kf,useLayoutEffect:If,useMemo:Lf,useReducer:mu,useRef:Nf,useState:function(){return mu(Ji)},useDebugValue:xu,useDeferredValue:function(e,i){var l=pn();return jt===null?bu(l,e,i):Pf(l,jt.memoizedState,e,i)},useTransition:function(){var e=mu(Ji)[0],i=pn().memoizedState;return[typeof e=="boolean"?e:cs(e),i]},useSyncExternalStore:ff,useId:Bf,useHostTransitionStatus:Tu,useFormState:Af,useActionState:Af,useOptimistic:function(e,i){var l=pn();return jt!==null?vf(l,jt,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:pu,useCacheRefresh:Ff};Yf.useEffectEvent=Rf;function _u(e,i,l,a){i=e.memoizedState,l=l(a,i),l=l==null?i:S({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var wu={enqueueSetState:function(e,i,l){e=e._reactInternals;var a=si(),f=mo(a);f.payload=i,l!=null&&(f.callback=l),i=go(e,f,a),i!==null&&(jn(i,e,a),ss(i,e,a))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var a=si(),f=mo(a);f.tag=1,f.payload=i,l!=null&&(f.callback=l),i=go(e,f,a),i!==null&&(jn(i,e,a),ss(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=si(),a=mo(l);a.tag=2,i!=null&&(a.callback=i),i=go(e,a,l),i!==null&&(jn(i,e,l),ss(i,e,l))}};function Jf(e,i,l,a,f,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,b):i.prototype&&i.prototype.isPureReactComponent?!Zl(l,a)||!Zl(f,g):!0}function Kf(e,i,l,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==e&&wu.enqueueReplaceState(i,i.state,null)}function Qo(e,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(e=e.defaultProps){l===i&&(l=S({},l));for(var f in e)l[f]===void 0&&(l[f]=e[f])}return l}function Xf(e){Js(e)}function Qf(e){console.error(e)}function Zf(e){Js(e)}function ya(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function Wf(e,i,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Au(e,i,l){return l=mo(l),l.tag=3,l.payload={element:null},l.callback=function(){ya(e,i)},l}function ep(e){return e=mo(e),e.tag=3,e}function tp(e,i,l,a){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;e.payload=function(){return f(g)},e.callback=function(){Wf(i,l,a)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Wf(i,l,a),typeof f!="function"&&(To===null?To=new Set([this]):To.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})})}function Xy(e,i,l,a,f){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&pl(i,l,f,!0),l=ni.current,l!==null){switch(l.tag){case 31:case 13:return mi===null?Ma():l.alternate===null&&dn===0&&(dn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,a===oa?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),Zu(e,a,f)),!1;case 22:return l.flags|=65536,a===oa?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),Zu(e,a,f)),!1}throw Error(s(435,l.tag))}return Zu(e,a,f),Ma(),!1}if(zt)return i=ni.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,a!==jr&&(e=Error(s(422),{cause:a}),ts(di(e,l)))):(a!==jr&&(i=Error(s(423),{cause:a}),ts(di(i,l))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,a=di(a,l),f=Au(e.stateNode,a,f),iu(e,f),dn!==4&&(dn=2)),!1;var g=Error(s(520),{cause:a});if(g=di(g,l),bs===null?bs=[g]:bs.push(g),dn!==4&&(dn=2),i===null)return!0;a=di(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=f&-f,l.lanes|=e,e=Au(l.stateNode,a,e),iu(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(To===null||!To.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=ep(f),tp(f,e,l,a),iu(l,f),!1}l=l.return}while(l!==null);return!1}var Nu=Error(s(461)),vn=!1;function An(e,i,l,a){i.child=e===null?lf(i,null,l,a):Ko(i,e.child,l,a)}function np(e,i,l,a,f){l=l.render;var g=i.ref;if("ref"in a){var b={};for(var _ in a)_!=="ref"&&(b[_]=a[_])}else b=a;return $o(i),a=uu(e,i,l,b,g,f),_=cu(),e!==null&&!vn?(du(e,i,f),Ki(e,i,f)):(zt&&_&&qr(i),i.flags|=1,An(e,i,a,f),i.child)}function ip(e,i,l,a,f){if(e===null){var g=l.type;return typeof g=="function"&&!Br(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,op(e,i,g,a,f)):(e=Zs(l.type,null,a,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!Lu(e,f)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:Zl,l(b,a)&&e.ref===i.ref)return Ki(e,i,f)}return i.flags|=1,e=Oi(g,a),e.ref=i.ref,e.return=i,i.child=e}function op(e,i,l,a,f){if(e!==null){var g=e.memoizedProps;if(Zl(g,a)&&e.ref===i.ref)if(vn=!1,i.pendingProps=a=g,Lu(e,f))(e.flags&131072)!==0&&(vn=!0);else return i.lanes=e.lanes,Ki(e,i,f)}return Mu(e,i,l,a,f)}function lp(e,i,l,a){var f=a.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(a=i.child=e.child,f=0;a!==null;)f=f|a.lanes|a.childLanes,a=a.sibling;a=f&~g}else a=0,i.child=null;return sp(e,i,g,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&na(i,g!==null?g.cachePool:null),g!==null?rf(i,g):lu(),uf(i);else return a=i.lanes=536870912,sp(e,i,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(na(i,g.cachePool),rf(i,g),vo(),i.memoizedState=null):(e!==null&&na(i,null),lu(),vo());return An(e,i,f,l),i.child}function ps(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function sp(e,i,l,a,f){var g=Wr();return g=g===null?null:{parent:gn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&na(i,null),lu(),uf(i),e!==null&&pl(e,i,a,!0),i.childLanes=f,null}function va(e,i){return i=ba({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function ap(e,i,l){return Ko(i,e.child,null,l),e=va(i,i.pendingProps),e.flags|=2,ii(i),i.memoizedState=null,e}function Qy(e,i,l){var a=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(zt){if(a.mode==="hidden")return e=va(i,a),i.lanes=536870912,ps(null,e);if(au(i),(e=nn)?(e=xh(e,hi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:uo!==null?{id:zi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},l=Od(e),l.return=i,i.child=l,_n=i,nn=null)):e=null,e===null)throw fo(i);return i.lanes=536870912,null}return va(i,a)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(au(i),f)if(i.flags&256)i.flags&=-257,i=ap(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(vn||pl(e,i,l,!1),f=(l&e.childLanes)!==0,vn||f){if(a=Qt,a!==null&&(b=Si(a,l),b!==0&&b!==g.retryLane))throw g.retryLane=b,Bo(e,b),jn(a,e,b),Nu;Ma(),i=ap(e,i,l)}else e=g.treeContext,nn=gi(b.nextSibling),_n=i,zt=!0,co=null,hi=!1,e!==null&&jd(i,e),i=va(i,a),i.flags|=4096;return i}return e=Oi(e.child,{mode:a.mode,children:a.children}),e.ref=i.ref,i.child=e,e.return=i,e}function xa(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function Mu(e,i,l,a,f){return $o(i),l=uu(e,i,l,a,void 0,f),a=cu(),e!==null&&!vn?(du(e,i,f),Ki(e,i,f)):(zt&&a&&qr(i),i.flags|=1,An(e,i,l,f),i.child)}function rp(e,i,l,a,f,g){return $o(i),i.updateQueue=null,l=df(i,a,l,f),cf(e),a=cu(),e!==null&&!vn?(du(e,i,g),Ki(e,i,g)):(zt&&a&&qr(i),i.flags|=1,An(e,i,l,g),i.child)}function up(e,i,l,a,f){if($o(i),i.stateNode===null){var g=ul,b=l.contextType;typeof b=="object"&&b!==null&&(g=wn(b)),g=new l(a,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=wu,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=a,g.state=i.memoizedState,g.refs={},tu(i),b=l.contextType,g.context=typeof b=="object"&&b!==null?wn(b):ul,g.state=i.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(_u(i,l,b,a),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&wu.enqueueReplaceState(g,g.state,null),rs(i,a,g,f),as(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(e===null){g=i.stateNode;var _=i.memoizedProps,R=Qo(l,_);g.props=R;var j=g.context,re=l.contextType;b=ul,typeof re=="object"&&re!==null&&(b=wn(re));var me=l.getDerivedStateFromProps;re=typeof me=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||j!==b)&&Kf(i,g,a,b),ho=!1;var J=i.memoizedState;g.state=J,rs(i,a,g,f),as(),j=i.memoizedState,_||J!==j||ho?(typeof me=="function"&&(_u(i,l,me,a),j=i.memoizedState),(R=ho||Jf(i,l,R,a,J,j,b))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=j),g.props=a,g.state=j,g.context=b,a=R):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{g=i.stateNode,nu(e,i),b=i.memoizedProps,re=Qo(l,b),g.props=re,me=i.pendingProps,J=g.context,j=l.contextType,R=ul,typeof j=="object"&&j!==null&&(R=wn(j)),_=l.getDerivedStateFromProps,(j=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==me||J!==R)&&Kf(i,g,a,R),ho=!1,J=i.memoizedState,g.state=J,rs(i,a,g,f),as();var Z=i.memoizedState;b!==me||J!==Z||ho||e!==null&&e.dependencies!==null&&ea(e.dependencies)?(typeof _=="function"&&(_u(i,l,_,a),Z=i.memoizedState),(re=ho||Jf(i,l,re,a,J,Z,R)||e!==null&&e.dependencies!==null&&ea(e.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,Z,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,Z,R)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=Z),g.props=a,g.state=Z,g.context=R,a=re):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(i.flags|=1024),a=!1)}return g=a,xa(e,i),a=(i.flags&128)!==0,g||a?(g=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&a?(i.child=Ko(i,e.child,null,f),i.child=Ko(i,null,l,f)):An(e,i,l,f),i.memoizedState=g.state,e=i.child):e=Ki(e,i,f),e}function cp(e,i,l,a){return Oo(),i.flags|=256,An(e,i,l,a),i.child}var Ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ku(e){return{baseLanes:e,cachePool:Zd()}}function Iu(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=li),e}function dp(e,i,l){var a=i.pendingProps,f=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(fn.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(zt){if(f?yo(i):vo(),(e=nn)?(e=xh(e,hi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:uo!==null?{id:zi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},l=Od(e),l.return=i,i.child=l,_n=i,nn=null)):e=null,e===null)throw fo(i);return hc(e)?i.lanes=32:i.lanes=536870912,null}var _=a.children;return a=a.fallback,f?(vo(),f=i.mode,_=ba({mode:"hidden",children:_},f),a=Fo(a,f,l,null),_.return=i,a.return=i,_.sibling=a,i.child=_,a=i.child,a.memoizedState=ku(l),a.childLanes=Iu(e,b,l),i.memoizedState=Ru,ps(null,a)):(yo(i),zu(i,_))}var R=e.memoizedState;if(R!==null&&(_=R.dehydrated,_!==null)){if(g)i.flags&256?(yo(i),i.flags&=-257,i=Du(e,i,l)):i.memoizedState!==null?(vo(),i.child=e.child,i.flags|=128,i=null):(vo(),_=a.fallback,f=i.mode,a=ba({mode:"visible",children:a.children},f),_=Fo(_,f,l,null),_.flags|=2,a.return=i,_.return=i,a.sibling=_,i.child=a,Ko(i,e.child,null,l),a=i.child,a.memoizedState=ku(l),a.childLanes=Iu(e,b,l),i.memoizedState=Ru,i=ps(null,a));else if(yo(i),hc(_)){if(b=_.nextSibling&&_.nextSibling.dataset,b)var j=b.dgst;b=j,a=Error(s(419)),a.stack="",a.digest=b,ts({value:a,source:null,stack:null}),i=Du(e,i,l)}else if(vn||pl(e,i,l,!1),b=(l&e.childLanes)!==0,vn||b){if(b=Qt,b!==null&&(a=Si(b,l),a!==0&&a!==R.retryLane))throw R.retryLane=a,Bo(e,a),jn(b,e,a),Nu;pc(_)||Ma(),i=Du(e,i,l)}else pc(_)?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,nn=gi(_.nextSibling),_n=i,zt=!0,co=null,hi=!1,e!==null&&jd(i,e),i=zu(i,a.children),i.flags|=4096);return i}return f?(vo(),_=a.fallback,f=i.mode,R=e.child,j=R.sibling,a=Oi(R,{mode:"hidden",children:a.children}),a.subtreeFlags=R.subtreeFlags&65011712,j!==null?_=Oi(j,_):(_=Fo(_,f,l,null),_.flags|=2),_.return=i,a.return=i,a.sibling=_,i.child=a,ps(null,a),a=i.child,_=e.child.memoizedState,_===null?_=ku(l):(f=_.cachePool,f!==null?(R=gn._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=Zd(),_={baseLanes:_.baseLanes|l,cachePool:f}),a.memoizedState=_,a.childLanes=Iu(e,b,l),i.memoizedState=Ru,ps(e.child,a)):(yo(i),l=e.child,e=l.sibling,l=Oi(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=l,i.memoizedState=null,l)}function zu(e,i){return i=ba({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function ba(e,i){return e=ti(22,e,null,i),e.lanes=0,e}function Du(e,i,l){return Ko(i,e.child,null,l),e=zu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function fp(e,i,l){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),Kr(e.return,i,l)}function Uu(e,i,l,a,f,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:f,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=a,b.tail=l,b.tailMode=f,b.treeForkCount=g)}function pp(e,i,l){var a=i.pendingProps,f=a.revealOrder,g=a.tail;a=a.children;var b=fn.current,_=(b&2)!==0;if(_?(b=b&1|2,i.flags|=128):b&=1,te(fn,b),An(e,i,a,l),a=zt?es:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fp(e,l,i);else if(e.tag===19)fp(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(l=i.child,f=null;l!==null;)e=l.alternate,e!==null&&ra(e)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),Uu(i,!1,f,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&ra(e)===null){i.child=f;break}e=f.sibling,f.sibling=l,l=f,f=e}Uu(i,!0,l,null,g,a);break;case"together":Uu(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function Ki(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),So|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(pl(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,l=Oi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Oi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function Lu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ea(e)))}function Zy(e,i,l){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),po(i,gn,e.memoizedState.cache),Oo();break;case 27:case 5:Re(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:po(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,au(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(yo(i),i.flags|=128,null):(l&i.child.childLanes)!==0?dp(e,i,l):(yo(i),e=Ki(e,i,l),e!==null?e.sibling:null);yo(i);break;case 19:var f=(e.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(pl(e,i,l,!1),a=(l&i.childLanes)!==0),f){if(a)return pp(e,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),te(fn,fn.current),a)break;return null;case 22:return i.lanes=0,lp(e,i,l,i.pendingProps);case 24:po(i,gn,e.memoizedState.cache)}return Ki(e,i,l)}function hp(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)vn=!0;else{if(!Lu(e,l)&&(i.flags&128)===0)return vn=!1,Zy(e,i,l);vn=(e.flags&131072)!==0}else vn=!1,zt&&(i.flags&1048576)!==0&&$d(i,es,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(e=Yo(i.elementType),i.type=e,typeof e=="function")Br(e)?(a=Qo(e,a),i.tag=1,i=up(null,i,e,a,l)):(i.tag=0,i=Mu(null,i,e,a,l));else{if(e!=null){var f=e.$$typeof;if(f===ke){i.tag=11,i=np(null,i,e,a,l);break e}else if(f===ve){i.tag=14,i=ip(null,i,e,a,l);break e}}throw i=Rt(e)||e,Error(s(306,i,""))}}return i;case 0:return Mu(e,i,i.type,i.pendingProps,l);case 1:return a=i.type,f=Qo(a,i.pendingProps),up(e,i,a,f,l);case 3:e:{if(ne(i,i.stateNode.containerInfo),e===null)throw Error(s(387));a=i.pendingProps;var g=i.memoizedState;f=g.element,nu(e,i),rs(i,a,null,l);var b=i.memoizedState;if(a=b.cache,po(i,gn,a),a!==g.cache&&Xr(i,[gn],l,!0),as(),a=b.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=cp(e,i,a,l);break e}else if(a!==f){f=di(Error(s(424)),i),ts(f),i=cp(e,i,a,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,nn=gi(e.firstChild),_n=i,zt=!0,co=null,hi=!0,l=lf(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Oo(),a===f){i=Ki(e,i,l);break e}An(e,i,a,l)}i=i.child}return i;case 26:return xa(e,i),e===null?(l=_h(i.type,null,i.pendingProps,null))?i.memoizedState=l:zt||(l=i.type,e=i.pendingProps,a=La(w.current).createElement(l),a[ft]=i,a[wt]=e,Nn(a,l,e),sn(a),i.stateNode=a):i.memoizedState=_h(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Re(i),e===null&&zt&&(a=i.stateNode=Th(i.type,i.pendingProps,w.current),_n=i,hi=!0,f=nn,wo(i.type)?(mc=f,nn=gi(a.firstChild)):nn=f),An(e,i,i.pendingProps.children,l),xa(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&zt&&((f=a=nn)&&(a=Nv(a,i.type,i.pendingProps,hi),a!==null?(i.stateNode=a,_n=i,nn=gi(a.firstChild),hi=!1,f=!0):f=!1),f||fo(i)),Re(i),f=i.type,g=i.pendingProps,b=e!==null?e.memoizedProps:null,a=g.children,cc(f,g)?a=null:b!==null&&cc(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=uu(e,i,Oy,null,null,l),Ns._currentValue=f),xa(e,i),An(e,i,a,l),i.child;case 6:return e===null&&zt&&((e=l=nn)&&(l=Mv(l,i.pendingProps,hi),l!==null?(i.stateNode=l,_n=i,nn=null,e=!0):e=!1),e||fo(i)),null;case 13:return dp(e,i,l);case 4:return ne(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Ko(i,null,a,l):An(e,i,a,l),i.child;case 11:return np(e,i,i.type,i.pendingProps,l);case 7:return An(e,i,i.pendingProps,l),i.child;case 8:return An(e,i,i.pendingProps.children,l),i.child;case 12:return An(e,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,po(i,i.type,a.value),An(e,i,a.children,l),i.child;case 9:return f=i.type._context,a=i.pendingProps.children,$o(i),f=wn(f),a=a(f),i.flags|=1,An(e,i,a,l),i.child;case 14:return ip(e,i,i.type,i.pendingProps,l);case 15:return op(e,i,i.type,i.pendingProps,l);case 19:return pp(e,i,l);case 31:return Qy(e,i,l);case 22:return lp(e,i,l,i.pendingProps);case 24:return $o(i),a=wn(gn),e===null?(f=Wr(),f===null&&(f=Qt,g=Qr(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),i.memoizedState={parent:a,cache:f},tu(i),po(i,gn,f)):((e.lanes&l)!==0&&(nu(e,i),rs(i,null,null,l),as()),f=e.memoizedState,g=i.memoizedState,f.parent!==a?(f={parent:a,cache:a},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),po(i,gn,a)):(a=g.cache,po(i,gn,a),a!==f.cache&&Xr(i,[gn],l,!0))),An(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Xi(e){e.flags|=4}function Pu(e,i,l,a,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Bp())e.flags|=8192;else throw Jo=oa,eu}else e.flags&=-16777217}function mp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rh(i))if(Bp())e.flags|=8192;else throw Jo=oa,eu}function Sa(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Je():536870912,e.lanes|=i,_l|=i)}function hs(e,i){if(!zt)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function on(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(i)for(var f=e.child;f!==null;)l|=f.lanes|f.childLanes,a|=f.subtreeFlags&65011712,a|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)l|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=l,i}function Wy(e,i,l){var a=i.pendingProps;switch($r(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(i),null;case 1:return on(i),null;case 3:return l=i.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(gn),ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(fl(i)?Xi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yr())),on(i),null;case 26:var f=i.type,g=i.memoizedState;return e===null?(Xi(i),g!==null?(on(i),mp(i,g)):(on(i),Pu(i,f,null,a,l))):g?g!==e.memoizedState?(Xi(i),on(i),mp(i,g)):(on(i),i.flags&=-16777217):(e=e.memoizedProps,e!==a&&Xi(i),on(i),Pu(i,f,e,a,l)),null;case 27:if(Ue(i),l=w.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&Xi(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return on(i),null}e=Se.current,fl(i)?Yd(i):(e=Th(f,a,l),i.stateNode=e,Xi(i))}return on(i),null;case 5:if(Ue(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&Xi(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return on(i),null}if(g=Se.current,fl(i))Yd(i);else{var b=La(w.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?b.createElement("select",{is:a.is}):b.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?b.createElement(f,{is:a.is}):b.createElement(f)}}g[ft]=i,g[wt]=a;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(Nn(g,f,a),f){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Xi(i)}}return on(i),Pu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==a&&Xi(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(e=w.current,fl(i)){if(e=i.stateNode,l=i.memoizedProps,a=null,f=_n,f!==null)switch(f.tag){case 27:case 5:a=f.memoizedProps}e[ft]=i,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||dh(e.nodeValue,l)),e||fo(i,!0)}else e=La(e).createTextNode(a),e[ft]=i,i.stateNode=e}return on(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(a=fl(i),l!==null){if(e===null){if(!a)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ft]=i}else Oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;on(i),e=!1}else l=Yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(ii(i),i):(ii(i),null);if((i.flags&128)!==0)throw Error(s(558))}return on(i),null;case 13:if(a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=fl(i),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[ft]=i}else Oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;on(i),f=!1}else f=Yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ii(i),i):(ii(i),null)}return ii(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=i.child,f=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(f=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==f&&(a.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),Sa(i,i.updateQueue),on(i),null);case 4:return ie(),e===null&&lc(i.stateNode.containerInfo),on(i),null;case 10:return ji(i.type),on(i),null;case 19:if(M(fn),a=i.memoizedState,a===null)return on(i),null;if(f=(i.flags&128)!==0,g=a.rendering,g===null)if(f)hs(a,!1);else{if(dn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=ra(e),g!==null){for(i.flags|=128,hs(a,!1),e=g.updateQueue,i.updateQueue=e,Sa(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)Fd(l,e),l=l.sibling;return te(fn,fn.current&1|2),zt&&qi(i,a.treeForkCount),i.child}e=e.sibling}a.tail!==null&&ge()>wa&&(i.flags|=128,f=!0,hs(a,!1),i.lanes=4194304)}else{if(!f)if(e=ra(g),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Sa(i,e),hs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!zt)return on(i),null}else 2*ge()-a.renderingStartTime>wa&&l!==536870912&&(i.flags|=128,f=!0,hs(a,!1),i.lanes=4194304);a.isBackwards?(g.sibling=i.child,i.child=g):(e=a.last,e!==null?e.sibling=g:i.child=g,a.last=g)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ge(),e.sibling=null,l=fn.current,te(fn,f?l&1|2:l&1),zt&&qi(i,a.treeForkCount),e):(on(i),null);case 22:case 23:return ii(i),su(),a=i.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(on(i),i.subtreeFlags&6&&(i.flags|=8192)):on(i),l=i.updateQueue,l!==null&&Sa(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),e!==null&&M(jo),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ji(gn),on(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ev(e,i){switch($r(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ji(gn),ie(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ue(i),null;case 31:if(i.memoizedState!==null){if(ii(i),i.alternate===null)throw Error(s(340));Oo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ii(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Oo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return M(fn),null;case 4:return ie(),null;case 10:return ji(i.type),null;case 22:case 23:return ii(i),su(),e!==null&&M(jo),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ji(gn),null;case 25:return null;default:return null}}function gp(e,i){switch($r(i),i.tag){case 3:ji(gn),ie();break;case 26:case 27:case 5:Ue(i);break;case 4:ie();break;case 31:i.memoizedState!==null&&ii(i);break;case 13:ii(i);break;case 19:M(fn);break;case 10:ji(i.type);break;case 22:case 23:ii(i),su(),e!==null&&M(jo);break;case 24:ji(gn)}}function ms(e,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var f=a.next;l=f;do{if((l.tag&e)===e){a=void 0;var g=l.create,b=l.inst;a=g(),b.destroy=a}l=l.next}while(l!==f)}}catch(_){$t(i,i.return,_)}}function xo(e,i,l){try{var a=i.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var g=f.next;a=g;do{if((a.tag&e)===e){var b=a.inst,_=b.destroy;if(_!==void 0){b.destroy=void 0,f=i;var R=l,j=_;try{j()}catch(re){$t(f,R,re)}}}a=a.next}while(a!==g)}}catch(re){$t(i,i.return,re)}}function yp(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{af(i,l)}catch(a){$t(e,e.return,a)}}}function vp(e,i,l){l.props=Qo(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){$t(e,i,a)}}function gs(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(f){$t(e,i,f)}}function Ui(e,i){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(f){$t(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){$t(e,i,f)}else l.current=null}function xp(e){var i=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(f){$t(e,e.return,f)}}function Gu(e,i,l){try{var a=e.stateNode;Tv(a,e.type,l,i),a[wt]=i}catch(f){$t(e,e.return,f)}}function bp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wo(e.type)||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vu(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=mn));else if(a!==4&&(a===27&&wo(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(Vu(e,i,l),e=e.sibling;e!==null;)Vu(e,i,l),e=e.sibling}function Ta(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(a!==4&&(a===27&&wo(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ta(e,i,l),e=e.sibling;e!==null;)Ta(e,i,l),e=e.sibling}function Sp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Nn(i,a,l),i[ft]=e,i[wt]=l}catch(g){$t(e,e.return,g)}}var Qi=!1,xn=!1,Bu=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function tv(e,i){if(e=e.containerInfo,rc=Oa,e=zd(e),Dr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var f=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,_=-1,R=-1,j=0,re=0,me=e,J=null;t:for(;;){for(var Z;me!==l||f!==0&&me.nodeType!==3||(_=b+f),me!==g||a!==0&&me.nodeType!==3||(R=b+a),me.nodeType===3&&(b+=me.nodeValue.length),(Z=me.firstChild)!==null;)J=me,me=Z;for(;;){if(me===e)break t;if(J===l&&++j===f&&(_=b),J===g&&++re===a&&(R=b),(Z=me.nextSibling)!==null)break;me=J,J=me.parentNode}me=Z}l=_===-1||R===-1?null:{start:_,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(uc={focusedElem:e,selectionRange:l},Oa=!1,Cn=i;Cn!==null;)if(i=Cn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Cn=e;else for(;Cn!==null;){switch(i=Cn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)f=e[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,f=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var Xe=Qo(l.type,f);e=a.getSnapshotBeforeUpdate(Xe,g),a.__reactInternalSnapshotBeforeUpdate=e}catch(st){$t(l,l.return,st)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)fc(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Cn=e;break}Cn=i.return}}function Cp(e,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Wi(e,l),a&4&&ms(5,l);break;case 1:if(Wi(e,l),a&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(b){$t(l,l.return,b)}else{var f=Qo(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){$t(l,l.return,b)}}a&64&&yp(l),a&512&&gs(l,l.return);break;case 3:if(Wi(e,l),a&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{af(e,i)}catch(b){$t(l,l.return,b)}}break;case 27:i===null&&a&4&&Sp(l);case 26:case 5:Wi(e,l),i===null&&a&4&&xp(l),a&512&&gs(l,l.return);break;case 12:Wi(e,l);break;case 31:Wi(e,l),a&4&&wp(e,l);break;case 13:Wi(e,l),a&4&&Ap(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=cv.bind(null,l),Rv(e,l))));break;case 22:if(a=l.memoizedState!==null||Qi,!a){i=i!==null&&i.memoizedState!==null||xn,f=Qi;var g=xn;Qi=a,(xn=i)&&!g?eo(e,l,(l.subtreeFlags&8772)!==0):Wi(e,l),Qi=f,xn=g}break;case 30:break;default:Wi(e,l)}}function Ep(e){var i=e.alternate;i!==null&&(e.alternate=null,Ep(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Lo(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var an=null,Fn=!1;function Zi(e,i,l){for(l=l.child;l!==null;)_p(e,i,l),l=l.sibling}function _p(e,i,l){if(X&&typeof X.onCommitFiberUnmount=="function")try{X.onCommitFiberUnmount(Te,l)}catch{}switch(l.tag){case 26:xn||Ui(l,i),Zi(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xn||Ui(l,i);var a=an,f=Fn;wo(l.type)&&(an=l.stateNode,Fn=!1),Zi(e,i,l),_s(l.stateNode),an=a,Fn=f;break;case 5:xn||Ui(l,i);case 6:if(a=an,f=Fn,an=null,Zi(e,i,l),an=a,Fn=f,an!==null)if(Fn)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(l.stateNode)}catch(g){$t(l,i,g)}else try{an.removeChild(l.stateNode)}catch(g){$t(l,i,g)}break;case 18:an!==null&&(Fn?(e=an,yh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),zl(e)):yh(an,l.stateNode));break;case 4:a=an,f=Fn,an=l.stateNode.containerInfo,Fn=!0,Zi(e,i,l),an=a,Fn=f;break;case 0:case 11:case 14:case 15:xo(2,l,i),xn||xo(4,l,i),Zi(e,i,l);break;case 1:xn||(Ui(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&vp(l,i,a)),Zi(e,i,l);break;case 21:Zi(e,i,l);break;case 22:xn=(a=xn)||l.memoizedState!==null,Zi(e,i,l),xn=a;break;default:Zi(e,i,l)}}function wp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zl(e)}catch(l){$t(i,i.return,l)}}}function Ap(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zl(e)}catch(l){$t(i,i.return,l)}}function nv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Tp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Tp),i;default:throw Error(s(435,e.tag))}}function Ca(e,i){var l=nv(e);i.forEach(function(a){if(!l.has(a)){l.add(a);var f=dv.bind(null,e,a);a.then(f,f)}})}function On(e,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var f=l[a],g=e,b=i,_=b;e:for(;_!==null;){switch(_.tag){case 27:if(wo(_.type)){an=_.stateNode,Fn=!1;break e}break;case 5:an=_.stateNode,Fn=!1;break e;case 3:case 4:an=_.stateNode.containerInfo,Fn=!0;break e}_=_.return}if(an===null)throw Error(s(160));_p(g,b,f),an=null,Fn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Np(i,e),i=i.sibling}var Ai=null;function Np(e,i){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:On(i,e),qn(e),a&4&&(xo(3,e,e.return),ms(3,e),xo(5,e,e.return));break;case 1:On(i,e),qn(e),a&512&&(xn||l===null||Ui(l,l.return)),a&64&&Qi&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var f=Ai;if(On(i,e),qn(e),a&512&&(xn||l===null||Ui(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,f=f.ownerDocument||f;t:switch(a){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Gi]||g[ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(a),f.head.insertBefore(g,f.querySelector("head > title"))),Nn(g,a,l),g[ft]=e,sn(g),a=g;break e;case"link":var b=Nh("link","href",f).get(a+(l.href||""));if(b){for(var _=0;_<b.length;_++)if(g=b[_],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(_,1);break t}}g=f.createElement(a),Nn(g,a,l),f.head.appendChild(g);break;case"meta":if(b=Nh("meta","content",f).get(a+(l.content||""))){for(_=0;_<b.length;_++)if(g=b[_],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(_,1);break t}}g=f.createElement(a),Nn(g,a,l),f.head.appendChild(g);break;default:throw Error(s(468,a))}g[ft]=e,sn(g),a=g}e.stateNode=a}else Mh(f,e.type,e.stateNode);else e.stateNode=Ah(f,a,e.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?Mh(f,e.type,e.stateNode):Ah(f,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Gu(e,e.memoizedProps,l.memoizedProps)}break;case 27:On(i,e),qn(e),a&512&&(xn||l===null||Ui(l,l.return)),l!==null&&a&4&&Gu(e,e.memoizedProps,l.memoizedProps);break;case 5:if(On(i,e),qn(e),a&512&&(xn||l===null||Ui(l,l.return)),e.flags&32){f=e.stateNode;try{Qn(f,"")}catch(Xe){$t(e,e.return,Xe)}}a&4&&e.stateNode!=null&&(f=e.memoizedProps,Gu(e,f,l!==null?l.memoizedProps:f)),a&1024&&(Bu=!0);break;case 6:if(On(i,e),qn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(Xe){$t(e,e.return,Xe)}}break;case 3:if(Ha=null,f=Ai,Ai=Pa(i.containerInfo),On(i,e),Ai=f,qn(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{zl(i.containerInfo)}catch(Xe){$t(e,e.return,Xe)}Bu&&(Bu=!1,Mp(e));break;case 4:a=Ai,Ai=Pa(e.stateNode.containerInfo),On(i,e),qn(e),Ai=a;break;case 12:On(i,e),qn(e);break;case 31:On(i,e),qn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ca(e,a)));break;case 13:On(i,e),qn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_a=ge()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ca(e,a)));break;case 22:f=e.memoizedState!==null;var R=l!==null&&l.memoizedState!==null,j=Qi,re=xn;if(Qi=j||f,xn=re||R,On(i,e),xn=re,Qi=j,qn(e),a&8192)e:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(l===null||R||Qi||xn||Zo(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){R=l=i;try{if(g=R.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{_=R.stateNode;var me=R.memoizedProps.style,J=me!=null&&me.hasOwnProperty("display")?me.display:null;_.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Xe){$t(R,R.return,Xe)}}}else if(i.tag===6){if(l===null){R=i;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(Xe){$t(R,R.return,Xe)}}}else if(i.tag===18){if(l===null){R=i;try{var Z=R.stateNode;f?vh(Z,!0):vh(R.stateNode,!1)}catch(Xe){$t(R,R.return,Xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Ca(e,l))));break;case 19:On(i,e),qn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ca(e,a)));break;case 30:break;case 21:break;default:On(i,e),qn(e)}}function qn(e){var i=e.flags;if(i&2){try{for(var l,a=e.return;a!==null;){if(bp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var f=l.stateNode,g=Hu(e);Ta(e,g,f);break;case 5:var b=l.stateNode;l.flags&32&&(Qn(b,""),l.flags&=-33);var _=Hu(e);Ta(e,_,b);break;case 3:case 4:var R=l.stateNode.containerInfo,j=Hu(e);Vu(e,j,R);break;default:throw Error(s(161))}}catch(re){$t(e,e.return,re)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Mp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Mp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Wi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cp(e,i.alternate,i),i=i.sibling}function Zo(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:xo(4,i,i.return),Zo(i);break;case 1:Ui(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&vp(i,i.return,l),Zo(i);break;case 27:_s(i.stateNode);case 26:case 5:Ui(i,i.return),Zo(i);break;case 22:i.memoizedState===null&&Zo(i);break;case 30:Zo(i);break;default:Zo(i)}e=e.sibling}}function eo(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,f=e,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:eo(f,g,l),ms(4,g);break;case 1:if(eo(f,g,l),a=g,f=a.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){$t(a,a.return,j)}if(a=g,f=a.updateQueue,f!==null){var _=a.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)sf(R[f],_)}catch(j){$t(a,a.return,j)}}l&&b&64&&yp(g),gs(g,g.return);break;case 27:Sp(g);case 26:case 5:eo(f,g,l),l&&a===null&&b&4&&xp(g),gs(g,g.return);break;case 12:eo(f,g,l);break;case 31:eo(f,g,l),l&&b&4&&wp(f,g);break;case 13:eo(f,g,l),l&&b&4&&Ap(f,g);break;case 22:g.memoizedState===null&&eo(f,g,l),gs(g,g.return);break;case 30:break;default:eo(f,g,l)}i=i.sibling}}function Fu(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ns(l))}function Ou(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ns(e))}function Ni(e,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Rp(e,i,l,a),i=i.sibling}function Rp(e,i,l,a){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ni(e,i,l,a),f&2048&&ms(9,i);break;case 1:Ni(e,i,l,a);break;case 3:Ni(e,i,l,a),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ns(e)));break;case 12:if(f&2048){Ni(e,i,l,a),e=i.stateNode;try{var g=i.memoizedProps,b=g.id,_=g.onPostCommit;typeof _=="function"&&_(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){$t(i,i.return,R)}}else Ni(e,i,l,a);break;case 31:Ni(e,i,l,a);break;case 13:Ni(e,i,l,a);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?Ni(e,i,l,a):ys(e,i):g._visibility&2?Ni(e,i,l,a):(g._visibility|=2,Tl(e,i,l,a,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fu(b,i);break;case 24:Ni(e,i,l,a),f&2048&&Ou(i.alternate,i);break;default:Ni(e,i,l,a)}}function Tl(e,i,l,a,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,b=i,_=l,R=a,j=b.flags;switch(b.tag){case 0:case 11:case 15:Tl(g,b,_,R,f),ms(8,b);break;case 23:break;case 22:var re=b.stateNode;b.memoizedState!==null?re._visibility&2?Tl(g,b,_,R,f):ys(g,b):(re._visibility|=2,Tl(g,b,_,R,f)),f&&j&2048&&Fu(b.alternate,b);break;case 24:Tl(g,b,_,R,f),f&&j&2048&&Ou(b.alternate,b);break;default:Tl(g,b,_,R,f)}i=i.sibling}}function ys(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,a=i,f=a.flags;switch(a.tag){case 22:ys(l,a),f&2048&&Fu(a.alternate,a);break;case 24:ys(l,a),f&2048&&Ou(a.alternate,a);break;default:ys(l,a)}i=i.sibling}}var vs=8192;function Cl(e,i,l){if(e.subtreeFlags&vs)for(e=e.child;e!==null;)kp(e,i,l),e=e.sibling}function kp(e,i,l){switch(e.tag){case 26:Cl(e,i,l),e.flags&vs&&e.memoizedState!==null&&Fv(l,Ai,e.memoizedState,e.memoizedProps);break;case 5:Cl(e,i,l);break;case 3:case 4:var a=Ai;Ai=Pa(e.stateNode.containerInfo),Cl(e,i,l),Ai=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=vs,vs=16777216,Cl(e,i,l),vs=a):Cl(e,i,l));break;default:Cl(e,i,l)}}function Ip(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function xs(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Cn=a,Dp(a,e)}Ip(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zp(e),e=e.sibling}function zp(e){switch(e.tag){case 0:case 11:case 15:xs(e),e.flags&2048&&xo(9,e,e.return);break;case 3:xs(e);break;case 12:xs(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ea(e)):xs(e);break;default:xs(e)}}function Ea(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Cn=a,Dp(a,e)}Ip(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:xo(8,i,i.return),Ea(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Ea(i));break;default:Ea(i)}e=e.sibling}}function Dp(e,i){for(;Cn!==null;){var l=Cn;switch(l.tag){case 0:case 11:case 15:xo(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ns(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Cn=a;else e:for(l=e;Cn!==null;){a=Cn;var f=a.sibling,g=a.return;if(Ep(a),a===l){Cn=null;break e}if(f!==null){f.return=g,Cn=f;break e}Cn=g}}}var iv={getCacheForType:function(e){var i=wn(gn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return wn(gn).controller.signal}},ov=typeof WeakMap=="function"?WeakMap:Map,Vt=0,Qt=null,Nt=null,kt=0,qt=0,oi=null,bo=!1,El=!1,qu=!1,to=0,dn=0,So=0,Wo=0,$u=0,li=0,_l=0,bs=null,$n=null,ju=!1,_a=0,Up=0,wa=1/0,Aa=null,To=null,Tn=0,Co=null,wl=null,no=0,Yu=0,Ju=null,Lp=null,Ss=0,Ku=null;function si(){return(Vt&2)!==0&&kt!==0?kt&-kt:B.T!==null?tc():ai()}function Pp(){if(li===0)if((kt&536870912)===0||zt){var e=Zt;Zt<<=1,(Zt&3932160)===0&&(Zt=262144),li=e}else li=536870912;return e=ni.current,e!==null&&(e.flags|=32),li}function jn(e,i,l){(e===Qt&&(qt===2||qt===9)||e.cancelPendingCommit!==null)&&(Al(e,0),Eo(e,kt,li,!1)),yt(e,l),((Vt&2)===0||e!==Qt)&&(e===Qt&&((Vt&2)===0&&(Wo|=l),dn===4&&Eo(e,kt,li,!1)),Li(e))}function Gp(e,i,l){if((Vt&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&e.expiredLanes)===0||Ge(e,i),f=a?av(e,i):Qu(e,i,!0),g=a;do{if(f===0){El&&!a&&Eo(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!lv(l)){f=Qu(e,i,!1),g=!1;continue}if(f===2){if(g=i,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var _=e;f=bs;var R=_.current.memoizedState.isDehydrated;if(R&&(Al(_,b).flags|=256),b=Qu(_,b,!1),b!==2){if(qu&&!R){_.errorRecoveryDisabledLanes|=g,Wo|=g,f=4;break e}g=$n,$n=f,g!==null&&($n===null?$n=g:$n.push.apply($n,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){Al(e,0),Eo(e,i,0,!0);break}e:{switch(a=e,g=f,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Eo(a,i,li,!bo);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=_a+300-ge(),10<f)){if(Eo(a,i,li,!bo),we(a,0,!0)!==0)break e;no=i,a.timeoutHandle=mh(Hp.bind(null,a,l,$n,Aa,ju,i,li,Wo,_l,bo,g,"Throttled",-0,0),f);break e}Hp(a,l,$n,Aa,ju,i,li,Wo,_l,bo,g,null,-0,0)}}break}while(!0);Li(e)}function Hp(e,i,l,a,f,g,b,_,R,j,re,me,J,Z){if(e.timeoutHandle=-1,me=i.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},kp(i,g,me);var Xe=(g&62914560)===g?_a-ge():(g&4194048)===g?Up-ge():0;if(Xe=Ov(me,Xe),Xe!==null){no=g,e.cancelPendingCommit=Xe(Yp.bind(null,e,i,g,l,a,f,b,_,R,re,me,null,J,Z)),Eo(e,g,b,!j);return}}Yp(e,i,g,l,a,f,b,_,R)}function lv(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var f=l[a],g=f.getSnapshot;f=f.value;try{if(!ei(g(),f))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Eo(e,i,l,a){i&=~$u,i&=~Wo,e.suspendedLanes|=i,e.pingedLanes&=~i,a&&(e.warmLanes|=i),a=e.expirationTimes;for(var f=i;0<f;){var g=31-Le(f),b=1<<g;a[g]=-1,f&=~b}l!==0&&un(e,l,i)}function Na(){return(Vt&6)===0?(Ts(0),!1):!0}function Xu(){if(Nt!==null){if(qt===0)var e=Nt.return;else e=Nt,$i=qo=null,fu(e),yl=null,os=0,e=Nt;for(;e!==null;)gp(e.alternate,e),e=e.return;Nt=null}}function Al(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,_v(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),no=0,Xu(),Qt=e,Nt=l=Oi(e.current,null),kt=i,qt=0,oi=null,bo=!1,El=Ge(e,i),qu=!1,_l=li=$u=Wo=So=dn=0,$n=bs=null,ju=!1,(i&8)!==0&&(i|=i&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=i;0<a;){var f=31-Le(a),g=1<<f;i|=e[f],a&=~g}return to=i,Ks(),l}function Vp(e,i){Tt=null,B.H=fs,i===gl||i===ia?(i=tf(),qt=3):i===eu?(i=tf(),qt=4):qt=i===Nu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,oi=i,Nt===null&&(dn=1,ya(e,di(i,e.current)))}function Bp(){var e=ni.current;return e===null?!0:(kt&4194048)===kt?mi===null:(kt&62914560)===kt||(kt&536870912)!==0?e===mi:!1}function Fp(){var e=B.H;return B.H=fs,e===null?fs:e}function Op(){var e=B.A;return B.A=iv,e}function Ma(){dn=4,bo||(kt&4194048)!==kt&&ni.current!==null||(El=!0),(So&134217727)===0&&(Wo&134217727)===0||Qt===null||Eo(Qt,kt,li,!1)}function Qu(e,i,l){var a=Vt;Vt|=2;var f=Fp(),g=Op();(Qt!==e||kt!==i)&&(Aa=null,Al(e,i)),i=!1;var b=dn;e:do try{if(qt!==0&&Nt!==null){var _=Nt,R=oi;switch(qt){case 8:Xu(),b=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(i=!0);var j=qt;if(qt=0,oi=null,Nl(e,_,R,j),l&&El){b=0;break e}break;default:j=qt,qt=0,oi=null,Nl(e,_,R,j)}}sv(),b=dn;break}catch(re){Vp(e,re)}while(!0);return i&&e.shellSuspendCounter++,$i=qo=null,Vt=a,B.H=f,B.A=g,Nt===null&&(Qt=null,kt=0,Ks()),b}function sv(){for(;Nt!==null;)qp(Nt)}function av(e,i){var l=Vt;Vt|=2;var a=Fp(),f=Op();Qt!==e||kt!==i?(Aa=null,wa=ge()+500,Al(e,i)):El=Ge(e,i);e:do try{if(qt!==0&&Nt!==null){i=Nt;var g=oi;t:switch(qt){case 1:qt=0,oi=null,Nl(e,i,g,1);break;case 2:case 9:if(Wd(g)){qt=0,oi=null,$p(i);break}i=function(){qt!==2&&qt!==9||Qt!==e||(qt=7),Li(e)},g.then(i,i);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:Wd(g)?(qt=0,oi=null,$p(i)):(qt=0,oi=null,Nl(e,i,g,7));break;case 5:var b=null;switch(Nt.tag){case 26:b=Nt.memoizedState;case 5:case 27:var _=Nt;if(b?Rh(b):_.stateNode.complete){qt=0,oi=null;var R=_.sibling;if(R!==null)Nt=R;else{var j=_.return;j!==null?(Nt=j,Ra(j)):Nt=null}break t}}qt=0,oi=null,Nl(e,i,g,5);break;case 6:qt=0,oi=null,Nl(e,i,g,6);break;case 8:Xu(),dn=6;break e;default:throw Error(s(462))}}rv();break}catch(re){Vp(e,re)}while(!0);return $i=qo=null,B.H=a,B.A=f,Vt=l,Nt!==null?0:(Qt=null,kt=0,Ks(),dn)}function rv(){for(;Nt!==null&&!se();)qp(Nt)}function qp(e){var i=hp(e.alternate,e,to);e.memoizedProps=e.pendingProps,i===null?Ra(e):Nt=i}function $p(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=rp(l,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=rp(l,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:fu(i);default:gp(l,i),i=Nt=Fd(i,to),i=hp(l,i,to)}e.memoizedProps=e.pendingProps,i===null?Ra(e):Nt=i}function Nl(e,i,l,a){$i=qo=null,fu(i),yl=null,os=0;var f=i.return;try{if(Xy(e,f,i,l,kt)){dn=1,ya(e,di(l,e.current)),Nt=null;return}}catch(g){if(f!==null)throw Nt=f,g;dn=1,ya(e,di(l,e.current)),Nt=null;return}i.flags&32768?(zt||a===1?e=!0:El||(kt&536870912)!==0?e=!1:(bo=e=!0,(a===2||a===9||a===3||a===6)&&(a=ni.current,a!==null&&a.tag===13&&(a.flags|=16384))),jp(i,e)):Ra(i)}function Ra(e){var i=e;do{if((i.flags&32768)!==0){jp(i,bo);return}e=i.return;var l=Wy(i.alternate,i,to);if(l!==null){Nt=l;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=e}while(i!==null);dn===0&&(dn=5)}function jp(e,i){do{var l=ev(e.alternate,e);if(l!==null){l.flags&=32767,Nt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=l}while(e!==null);dn=6,Nt=null}function Yp(e,i,l,a,f,g,b,_,R){e.cancelPendingCommit=null;do ka();while(Tn!==0);if((Vt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Hr,nt(e,l,g,b,_,R),e===Qt&&(Nt=Qt=null,kt=0),wl=i,Co=e,no=l,Yu=g,Ju=f,Lp=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fv(L,function(){return Zp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null,f=ye.p,ye.p=2,b=Vt,Vt|=4;try{tv(e,i,l)}finally{Vt=b,ye.p=f,B.T=a}}Tn=1,Jp(),Kp(),Xp()}}function Jp(){if(Tn===1){Tn=0;var e=Co,i=wl,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var a=ye.p;ye.p=2;var f=Vt;Vt|=4;try{Np(i,e);var g=uc,b=zd(e.containerInfo),_=g.focusedElem,R=g.selectionRange;if(b!==_&&_&&_.ownerDocument&&Id(_.ownerDocument.documentElement,_)){if(R!==null&&Dr(_)){var j=R.start,re=R.end;if(re===void 0&&(re=j),"selectionStart"in _)_.selectionStart=j,_.selectionEnd=Math.min(re,_.value.length);else{var me=_.ownerDocument||document,J=me&&me.defaultView||window;if(J.getSelection){var Z=J.getSelection(),Xe=_.textContent.length,st=Math.min(R.start,Xe),Jt=R.end===void 0?st:Math.min(R.end,Xe);!Z.extend&&st>Jt&&(b=Jt,Jt=st,st=b);var H=kd(_,st),D=kd(_,Jt);if(H&&D&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==D.node||Z.focusOffset!==D.offset)){var $=me.createRange();$.setStart(H.node,H.offset),Z.removeAllRanges(),st>Jt?(Z.addRange($),Z.extend(D.node,D.offset)):($.setEnd(D.node,D.offset),Z.addRange($))}}}}for(me=[],Z=_;Z=Z.parentNode;)Z.nodeType===1&&me.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<me.length;_++){var de=me[_];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Oa=!!rc,uc=rc=null}finally{Vt=f,ye.p=a,B.T=l}}e.current=i,Tn=2}}function Kp(){if(Tn===2){Tn=0;var e=Co,i=wl,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var a=ye.p;ye.p=2;var f=Vt;Vt|=4;try{Cp(e,i.alternate,i)}finally{Vt=f,ye.p=a,B.T=l}}Tn=3}}function Xp(){if(Tn===4||Tn===3){Tn=0,Ce();var e=Co,i=wl,l=no,a=Lp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Tn=5:(Tn=0,wl=Co=null,Qp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(To=null),Gn(l),i=i.stateNode,X&&typeof X.onCommitFiberRoot=="function")try{X.onCommitFiberRoot(Te,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=B.T,f=ye.p,ye.p=2,B.T=null;try{for(var g=e.onRecoverableError,b=0;b<a.length;b++){var _=a[b];g(_.value,{componentStack:_.stack})}}finally{B.T=i,ye.p=f}}(no&3)!==0&&ka(),Li(e),f=e.pendingLanes,(l&261930)!==0&&(f&42)!==0?e===Ku?Ss++:(Ss=0,Ku=e):Ss=0,Ts(0)}}function Qp(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ns(i)))}function ka(){return Jp(),Kp(),Xp(),Zp()}function Zp(){if(Tn!==5)return!1;var e=Co,i=Yu;Yu=0;var l=Gn(no),a=B.T,f=ye.p;try{ye.p=32>l?32:l,B.T=null,l=Ju,Ju=null;var g=Co,b=no;if(Tn=0,wl=Co=null,no=0,(Vt&6)!==0)throw Error(s(331));var _=Vt;if(Vt|=4,zp(g.current),Rp(g,g.current,b,l),Vt=_,Ts(0,!1),X&&typeof X.onPostCommitFiberRoot=="function")try{X.onPostCommitFiberRoot(Te,g)}catch{}return!0}finally{ye.p=f,B.T=a,Qp(e,i)}}function Wp(e,i,l){i=di(l,i),i=Au(e.stateNode,i,2),e=go(e,i,2),e!==null&&(yt(e,2),Li(e))}function $t(e,i,l){if(e.tag===3)Wp(e,e,l);else for(;i!==null;){if(i.tag===3){Wp(i,e,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(To===null||!To.has(a))){e=di(l,e),l=ep(2),a=go(i,l,2),a!==null&&(tp(l,a,i,e),yt(a,2),Li(a));break}}i=i.return}}function Zu(e,i,l){var a=e.pingCache;if(a===null){a=e.pingCache=new ov;var f=new Set;a.set(i,f)}else f=a.get(i),f===void 0&&(f=new Set,a.set(i,f));f.has(l)||(qu=!0,f.add(l),e=uv.bind(null,e,i,l),i.then(e,e))}function uv(e,i,l){var a=e.pingCache;a!==null&&a.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Qt===e&&(kt&l)===l&&(dn===4||dn===3&&(kt&62914560)===kt&&300>ge()-_a?(Vt&2)===0&&Al(e,0):$u|=l,_l===kt&&(_l=0)),Li(e)}function eh(e,i){i===0&&(i=Je()),e=Bo(e,i),e!==null&&(yt(e,i),Li(e))}function cv(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),eh(e,l)}function dv(e,i){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(l=f.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),eh(e,l)}function fv(e,i){return G(e,i)}var Ia=null,Ml=null,Wu=!1,za=!1,ec=!1,_o=0;function Li(e){e!==Ml&&e.next===null&&(Ml===null?Ia=Ml=e:Ml=Ml.next=e),za=!0,Wu||(Wu=!0,hv())}function Ts(e,i){if(!ec&&za){ec=!0;do for(var l=!1,a=Ia;a!==null;){if(e!==0){var f=a.pendingLanes;if(f===0)var g=0;else{var b=a.suspendedLanes,_=a.pingedLanes;g=(1<<31-Le(42|e)+1)-1,g&=f&~(b&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,oh(a,g))}else g=kt,g=we(a,a===Qt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||Ge(a,g)||(l=!0,oh(a,g));a=a.next}while(l);ec=!1}}function pv(){th()}function th(){za=Wu=!1;var e=0;_o!==0&&Ev()&&(e=_o);for(var i=ge(),l=null,a=Ia;a!==null;){var f=a.next,g=nh(a,i);g===0?(a.next=null,l===null?Ia=f:l.next=f,f===null&&(Ml=l)):(l=a,(e!==0||(g&3)!==0)&&(za=!0)),a=f}Tn!==0&&Tn!==5||Ts(e),_o!==0&&(_o=0)}function nh(e,i){for(var l=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-Le(g),_=1<<b,R=f[b];R===-1?((_&l)===0||(_&a)!==0)&&(f[b]=ot(_,i)):R<=i&&(e.expiredLanes|=_),g&=~_}if(i=Qt,l=kt,l=we(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===i&&(qt===2||qt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&oe(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Ge(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(a!==null&&oe(a),Gn(l)){case 2:case 8:l=C;break;case 32:l=L;break;case 268435456:l=k;break;default:l=L}return a=ih.bind(null,e),l=G(l,a),e.callbackPriority=i,e.callbackNode=l,i}return a!==null&&a!==null&&oe(a),e.callbackPriority=2,e.callbackNode=null,2}function ih(e,i){if(Tn!==0&&Tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(ka()&&e.callbackNode!==l)return null;var a=kt;return a=we(e,e===Qt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Gp(e,a,i),nh(e,ge()),e.callbackNode!=null&&e.callbackNode===l?ih.bind(null,e):null)}function oh(e,i){if(ka())return null;Gp(e,i,!0)}function hv(){wv(function(){(Vt&6)!==0?G(E,pv):th()})}function tc(){if(_o===0){var e=hl;e===0&&(e=Bt,Bt<<=1,(Bt&261888)===0&&(Bt=256)),_o=e}return _o}function lh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:W(""+e)}function sh(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function mv(e,i,l,a,f){if(i==="submit"&&l&&l.stateNode===f){var g=lh((f[wt]||null).action),b=a.submitter;b&&(i=(i=b[wt]||null)?lh(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var _=new $s("action","action",null,a,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(_o!==0){var R=b?sh(f,b):new FormData(f);Su(l,{pending:!0,data:R,method:f.method,action:g},null,R)}}else typeof g=="function"&&(_.preventDefault(),R=b?sh(f,b):new FormData(f),Su(l,{pending:!0,data:R,method:f.method,action:g},g,R))},currentTarget:f}]})}}for(var nc=0;nc<Gr.length;nc++){var ic=Gr[nc],gv=ic.toLowerCase(),yv=ic[0].toUpperCase()+ic.slice(1);wi(gv,"on"+yv)}wi(Ld,"onAnimationEnd"),wi(Pd,"onAnimationIteration"),wi(Gd,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(zy,"onTransitionRun"),wi(Dy,"onTransitionStart"),wi(Uy,"onTransitionCancel"),wi(Hd,"onTransitionEnd"),z("onMouseEnter",["mouseout","mouseover"]),z("onMouseLeave",["mouseout","mouseover"]),z("onPointerEnter",["pointerout","pointerover"]),z("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cs));function ah(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],f=a.event;a=a.listeners;e:{var g=void 0;if(i)for(var b=a.length-1;0<=b;b--){var _=a[b],R=_.instance,j=_.currentTarget;if(_=_.listener,R!==g&&f.isPropagationStopped())break e;g=_,f.currentTarget=j;try{g(f)}catch(re){Js(re)}f.currentTarget=null,g=R}else for(b=0;b<a.length;b++){if(_=a[b],R=_.instance,j=_.currentTarget,_=_.listener,R!==g&&f.isPropagationStopped())break e;g=_,f.currentTarget=j;try{g(f)}catch(re){Js(re)}f.currentTarget=null,g=R}}}}function Mt(e,i){var l=i[Ft];l===void 0&&(l=i[Ft]=new Set);var a=e+"__bubble";l.has(a)||(rh(i,e,2,!1),l.add(a))}function oc(e,i,l){var a=0;i&&(a|=4),rh(l,e,a,i)}var Da="_reactListening"+Math.random().toString(36).slice(2);function lc(e){if(!e[Da]){e[Da]=!0,Bi.forEach(function(l){l!=="selectionchange"&&(vv.has(l)||oc(l,!1,e),oc(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Da]||(i[Da]=!0,oc("selectionchange",!1,i))}}function rh(e,i,l,a){switch(Ph(i)){case 2:var f=jv;break;case 8:f=Yv;break;default:f=bc}l=f.bind(null,i,l,e),f=void 0,!tn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(i,l,{capture:!0,passive:f}):e.addEventListener(i,l,!0):f!==void 0?e.addEventListener(i,l,{passive:f}):e.addEventListener(i,l,!1)}function sc(e,i,l,a,f){var g=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var b=a.tag;if(b===3||b===4){var _=a.stateNode.containerInfo;if(_===f)break;if(b===4)for(b=a.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;_!==null;){if(b=Ti(_),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){a=g=b;continue e}_=_.parentNode}}a=a.return}ze(function(){var j=g,re=Dn(l),me=[];e:{var J=Vd.get(e);if(J!==void 0){var Z=$s,Xe=e;switch(e){case"keypress":if(ol(l)===0)break e;case"keydown":case"keyup":Z=dy;break;case"focusin":Xe="focus",Z=Mr;break;case"focusout":Xe="blur",Z=Mr;break;case"beforeblur":case"afterblur":Z=Mr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=hy;break;case Ld:case Pd:case Gd:Z=ny;break;case Hd:Z=gy;break;case"scroll":case"scrollend":Z=Qg;break;case"wheel":Z=vy;break;case"copy":case"cut":case"paste":Z=oy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=yd;break;case"toggle":case"beforetoggle":Z=by}var st=(i&4)!==0,Jt=!st&&(e==="scroll"||e==="scrollend"),H=st?J!==null?J+"Capture":null:J;st=[];for(var D=j,$;D!==null;){var de=D;if($=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||$===null||H===null||(de=lt(D,H),de!=null&&st.push(Es(D,de,$))),Jt)break;D=D.return}0<st.length&&(J=new Z(J,Xe,null,l,re),me.push({event:J,listeners:st}))}}if((i&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",J&&l!==gt&&(Xe=l.relatedTarget||l.fromElement)&&(Ti(Xe)||Xe[Rn]))break e;if((Z||J)&&(J=re.window===re?re:(J=re.ownerDocument)?J.defaultView||J.parentWindow:window,Z?(Xe=l.relatedTarget||l.toElement,Z=j,Xe=Xe?Ti(Xe):null,Xe!==null&&(Jt=d(Xe),st=Xe.tag,Xe!==Jt||st!==5&&st!==27&&st!==6)&&(Xe=null)):(Z=null,Xe=j),Z!==Xe)){if(st=md,de="onMouseLeave",H="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(st=yd,de="onPointerLeave",H="onPointerEnter",D="pointer"),Jt=Z==null?J:Hi(Z),$=Xe==null?J:Hi(Xe),J=new st(de,D+"leave",Z,l,re),J.target=Jt,J.relatedTarget=$,de=null,Ti(re)===j&&(st=new st(H,D+"enter",Xe,l,re),st.target=$,st.relatedTarget=Jt,de=st),Jt=de,Z&&Xe)t:{for(st=xv,H=Z,D=Xe,$=0,de=H;de;de=st(de))$++;de=0;for(var it=D;it;it=st(it))de++;for(;0<$-de;)H=st(H),$--;for(;0<de-$;)D=st(D),de--;for(;$--;){if(H===D||D!==null&&H===D.alternate){st=H;break t}H=st(H),D=st(D)}st=null}else st=null;Z!==null&&uh(me,J,Z,st,!1),Xe!==null&&Jt!==null&&uh(me,Jt,Xe,st,!0)}}e:{if(J=j?Hi(j):window,Z=J.nodeName&&J.nodeName.toLowerCase(),Z==="select"||Z==="input"&&J.type==="file")var Lt=_d;else if(Cd(J))if(wd)Lt=Ry;else{Lt=Ny;var Ze=Ay}else Z=J.nodeName,!Z||Z.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?j&&rn(j.elementType)&&(Lt=_d):Lt=My;if(Lt&&(Lt=Lt(e,j))){Ed(me,Lt,l,re);break e}Ze&&Ze(e,J,j),e==="focusout"&&j&&J.type==="number"&&j.memoizedProps.value!=null&&en(J,"number",J.value)}switch(Ze=j?Hi(j):window,e){case"focusin":(Cd(Ze)||Ze.contentEditable==="true")&&(sl=Ze,Ur=j,Wl=null);break;case"focusout":Wl=Ur=sl=null;break;case"mousedown":Lr=!0;break;case"contextmenu":case"mouseup":case"dragend":Lr=!1,Dd(me,l,re);break;case"selectionchange":if(Iy)break;case"keydown":case"keyup":Dd(me,l,re)}var Et;if(kr)e:{switch(e){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else ll?Sd(e,l)&&(It="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(It="onCompositionStart");It&&(vd&&l.locale!=="ko"&&(ll||It!=="onCompositionStart"?It==="onCompositionEnd"&&ll&&(Et=il()):(Wt=re,_i="value"in Wt?Wt.value:Wt.textContent,ll=!0)),Ze=Ua(j,It),0<Ze.length&&(It=new gd(It,e,null,l,re),me.push({event:It,listeners:Ze}),Et?It.data=Et:(Et=Td(l),Et!==null&&(It.data=Et)))),(Et=Ty?Cy(e,l):Ey(e,l))&&(It=Ua(j,"onBeforeInput"),0<It.length&&(Ze=new gd("onBeforeInput","beforeinput",null,l,re),me.push({event:Ze,listeners:It}),Ze.data=Et)),mv(me,e,j,l,re)}ah(me,i)})}function Es(e,i,l){return{instance:e,listener:i,currentTarget:l}}function Ua(e,i){for(var l=i+"Capture",a=[];e!==null;){var f=e,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=lt(e,l),f!=null&&a.unshift(Es(e,f,g)),f=lt(e,i),f!=null&&a.push(Es(e,f,g))),e.tag===3)return a;e=e.return}return[]}function xv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uh(e,i,l,a,f){for(var g=i._reactName,b=[];l!==null&&l!==a;){var _=l,R=_.alternate,j=_.stateNode;if(_=_.tag,R!==null&&R===a)break;_!==5&&_!==26&&_!==27||j===null||(R=j,f?(j=lt(l,g),j!=null&&b.unshift(Es(l,j,R))):f||(j=lt(l,g),j!=null&&b.push(Es(l,j,R)))),l=l.return}b.length!==0&&e.push({event:i,listeners:b})}var bv=/\r\n?/g,Sv=/\u0000|\uFFFD/g;function ch(e){return(typeof e=="string"?e:""+e).replace(bv,`
`).replace(Sv,"")}function dh(e,i){return i=ch(i),ch(e)===i}function Yt(e,i,l,a,f,g){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||Qn(e,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&Qn(e,""+a);break;case"className":At(e,"class",a);break;case"tabIndex":At(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":At(e,l,a);break;case"style":ro(e,a,g);break;case"data":if(i!=="object"){At(e,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=W(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&Yt(e,i,"name",f.name,f,null),Yt(e,i,"formEncType",f.formEncType,f,null),Yt(e,i,"formMethod",f.formMethod,f,null),Yt(e,i,"formTarget",f.formTarget,f,null)):(Yt(e,i,"encType",f.encType,f,null),Yt(e,i,"method",f.method,f,null),Yt(e,i,"target",f.target,f,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=W(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=mn);break;case"onScroll":a!=null&&Mt("scroll",e);break;case"onScrollEnd":a!=null&&Mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=W(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":Mt("beforetoggle",e),Mt("toggle",e),et(e,"popover",a);break;case"xlinkActuate":St(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":St(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":St(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":St(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":St(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":St(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":St(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":St(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":St(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":et(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Vn.get(l)||l,et(e,l,a))}}function ac(e,i,l,a,f,g){switch(l){case"style":ro(e,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof a=="string"?Qn(e,a):(typeof a=="number"||typeof a=="bigint")&&Qn(e,""+a);break;case"onScroll":a!=null&&Mt("scroll",e);break;case"onScrollEnd":a!=null&&Mt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),i=l.slice(2,f?l.length-7:void 0),g=e[wt]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,f),typeof a=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,a,f);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):et(e,l,a)}}}function Nn(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",e),Mt("load",e);var a=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":a=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,g,b,l,null)}}f&&Yt(e,i,"srcSet",l.srcSet,l,null),a&&Yt(e,i,"src",l.src,l,null);return;case"input":Mt("invalid",e);var _=g=b=f=null,R=null,j=null;for(a in l)if(l.hasOwnProperty(a)){var re=l[a];if(re!=null)switch(a){case"name":f=re;break;case"type":b=re;break;case"checked":R=re;break;case"defaultChecked":j=re;break;case"value":g=re;break;case"defaultValue":_=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,i));break;default:Yt(e,i,a,re,l,null)}}Dt(e,g,_,R,j,b,f,!1);return;case"select":Mt("invalid",e),a=b=g=null;for(f in l)if(l.hasOwnProperty(f)&&(_=l[f],_!=null))switch(f){case"value":g=_;break;case"defaultValue":b=_;break;case"multiple":a=_;default:Yt(e,i,f,_,l,null)}i=g,l=b,e.multiple=!!a,i!=null?Kn(e,!!a,i,!1):l!=null&&Kn(e,!!a,l,!0);return;case"textarea":Mt("invalid",e),g=f=a=null;for(b in l)if(l.hasOwnProperty(b)&&(_=l[b],_!=null))switch(b){case"value":a=_;break;case"defaultValue":f=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Yt(e,i,b,_,l,null)}Xn(e,a,f,g);return;case"option":for(R in l)l.hasOwnProperty(R)&&(a=l[R],a!=null)&&(R==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":Yt(e,i,R,a,l,null));return;case"dialog":Mt("beforetoggle",e),Mt("toggle",e),Mt("cancel",e),Mt("close",e);break;case"iframe":case"object":Mt("load",e);break;case"video":case"audio":for(a=0;a<Cs.length;a++)Mt(Cs[a],e);break;case"image":Mt("error",e),Mt("load",e);break;case"details":Mt("toggle",e);break;case"embed":case"source":case"link":Mt("error",e),Mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(a=l[j],a!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,j,a,l,null)}return;default:if(rn(i)){for(re in l)l.hasOwnProperty(re)&&(a=l[re],a!==void 0&&ac(e,i,re,a,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(a=l[_],a!=null&&Yt(e,i,_,a,l,null))}function Tv(e,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,_=null,R=null,j=null,re=null;for(Z in l){var me=l[Z];if(l.hasOwnProperty(Z)&&me!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":R=me;default:a.hasOwnProperty(Z)||Yt(e,i,Z,null,a,me)}}for(var J in a){var Z=a[J];if(me=l[J],a.hasOwnProperty(J)&&(Z!=null||me!=null))switch(J){case"type":g=Z;break;case"name":f=Z;break;case"checked":j=Z;break;case"defaultChecked":re=Z;break;case"value":b=Z;break;case"defaultValue":_=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Z!==me&&Yt(e,i,J,Z,a,me)}}pt(e,b,_,R,j,re,g,f);return;case"select":Z=b=_=J=null;for(g in l)if(R=l[g],l.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":Z=R;default:a.hasOwnProperty(g)||Yt(e,i,g,null,a,R)}for(f in a)if(g=a[f],R=l[f],a.hasOwnProperty(f)&&(g!=null||R!=null))switch(f){case"value":J=g;break;case"defaultValue":_=g;break;case"multiple":b=g;default:g!==R&&Yt(e,i,f,g,a,R)}i=_,l=b,a=Z,J!=null?Kn(e,!!l,J,!1):!!a!=!!l&&(i!=null?Kn(e,!!l,i,!0):Kn(e,!!l,l?[]:"",!1));return;case"textarea":Z=J=null;for(_ in l)if(f=l[_],l.hasOwnProperty(_)&&f!=null&&!a.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Yt(e,i,_,null,a,f)}for(b in a)if(f=a[b],g=l[b],a.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":J=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==g&&Yt(e,i,b,f,a,g)}Sn(e,J,Z);return;case"option":for(var Xe in l)J=l[Xe],l.hasOwnProperty(Xe)&&J!=null&&!a.hasOwnProperty(Xe)&&(Xe==="selected"?e.selected=!1:Yt(e,i,Xe,null,a,J));for(R in a)J=a[R],Z=l[R],a.hasOwnProperty(R)&&J!==Z&&(J!=null||Z!=null)&&(R==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Yt(e,i,R,J,a,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in l)J=l[st],l.hasOwnProperty(st)&&J!=null&&!a.hasOwnProperty(st)&&Yt(e,i,st,null,a,J);for(j in a)if(J=a[j],Z=l[j],a.hasOwnProperty(j)&&J!==Z&&(J!=null||Z!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:Yt(e,i,j,J,a,Z)}return;default:if(rn(i)){for(var Jt in l)J=l[Jt],l.hasOwnProperty(Jt)&&J!==void 0&&!a.hasOwnProperty(Jt)&&ac(e,i,Jt,void 0,a,J);for(re in a)J=a[re],Z=l[re],!a.hasOwnProperty(re)||J===Z||J===void 0&&Z===void 0||ac(e,i,re,J,a,Z);return}}for(var H in l)J=l[H],l.hasOwnProperty(H)&&J!=null&&!a.hasOwnProperty(H)&&Yt(e,i,H,null,a,J);for(me in a)J=a[me],Z=l[me],!a.hasOwnProperty(me)||J===Z||J==null&&Z==null||Yt(e,i,me,J,a,Z)}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var f=l[a],g=f.transferSize,b=f.initiatorType,_=f.duration;if(g&&_&&fh(b)){for(b=0,_=f.responseEnd,a+=1;a<l.length;a++){var R=l[a],j=R.startTime;if(j>_)break;var re=R.transferSize,me=R.initiatorType;re&&fh(me)&&(R=R.responseEnd,b+=re*(R<_?1:(_-j)/(R-j)))}if(--a,i+=8*(g+b)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var rc=null,uc=null;function La(e){return e.nodeType===9?e:e.ownerDocument}function ph(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function cc(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dc=null;function Ev(){var e=window.event;return e&&e.type==="popstate"?e===dc?!1:(dc=e,!0):(dc=null,!1)}var mh=typeof setTimeout=="function"?setTimeout:void 0,_v=typeof clearTimeout=="function"?clearTimeout:void 0,gh=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof gh<"u"?function(e){return gh.resolve(null).then(e).catch(Av)}:mh;function Av(e){setTimeout(function(){throw e})}function wo(e){return e==="head"}function yh(e,i){var l=i,a=0;do{var f=l.nextSibling;if(e.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(f),zl(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")_s(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,_s(l);for(var g=l.firstChild;g;){var b=g.nextSibling,_=g.nodeName;g[Gi]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=b}}else l==="body"&&_s(e.ownerDocument.body);l=f}while(l);zl(i)}function vh(e,i){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function fc(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":fc(l),Lo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Nv(e,i,l,a){for(;e.nodeType===1;){var f=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Gi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=gi(e.nextSibling),e===null)break}return null}function Mv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=gi(e.nextSibling),e===null))return null;return e}function xh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=gi(e.nextSibling),e===null))return null;return e}function pc(e){return e.data==="$?"||e.data==="$~"}function hc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Rv(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function gi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var mc=null;function bh(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return gi(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function Sh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Th(e,i,l){switch(i=La(l),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function _s(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Lo(e)}var yi=new Map,Ch=new Set;function Pa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var io=ye.d;ye.d={f:kv,r:Iv,D:zv,C:Dv,L:Uv,m:Lv,X:Gv,S:Pv,M:Hv};function kv(){var e=io.f(),i=Na();return e||i}function Iv(e){var i=ri(e);i!==null&&i.tag===5&&i.type==="form"?Vf(i):io.r(e)}var Rl=typeof document>"u"?null:document;function Eh(e,i,l){var a=Rl;if(a&&typeof i=="string"&&i){var f=q(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Ch.has(f)||(Ch.add(f),e={rel:e,crossOrigin:l,href:i},a.querySelector(f)===null&&(i=a.createElement("link"),Nn(i,"link",e),sn(i),a.head.appendChild(i)))}}function zv(e){io.D(e),Eh("dns-prefetch",e,null)}function Dv(e,i){io.C(e,i),Eh("preconnect",e,i)}function Uv(e,i,l){io.L(e,i,l);var a=Rl;if(a&&e&&i){var f='link[rel="preload"][as="'+q(i)+'"]';i==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+q(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+q(l.imageSizes)+'"]')):f+='[href="'+q(e)+'"]';var g=f;switch(i){case"style":g=kl(e);break;case"script":g=Il(e)}yi.has(g)||(e=S({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),yi.set(g,e),a.querySelector(f)!==null||i==="style"&&a.querySelector(ws(g))||i==="script"&&a.querySelector(As(g))||(i=a.createElement("link"),Nn(i,"link",e),sn(i),a.head.appendChild(i)))}}function Lv(e,i){io.m(e,i);var l=Rl;if(l&&e){var a=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+q(a)+'"][href="'+q(e)+'"]',g=f;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Il(e)}if(!yi.has(g)&&(e=S({rel:"modulepreload",href:e},i),yi.set(g,e),l.querySelector(f)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(As(g)))return}a=l.createElement("link"),Nn(a,"link",e),sn(a),l.head.appendChild(a)}}}function Pv(e,i,l){io.S(e,i,l);var a=Rl;if(a&&e){var f=Vi(a).hoistableStyles,g=kl(e);i=i||"default";var b=f.get(g);if(!b){var _={loading:0,preload:null};if(b=a.querySelector(ws(g)))_.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":i},l),(l=yi.get(g))&&gc(e,l);var R=b=a.createElement("link");sn(R),Nn(R,"link",e),R._p=new Promise(function(j,re){R.onload=j,R.onerror=re}),R.addEventListener("load",function(){_.loading|=1}),R.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ga(b,i,a)}b={type:"stylesheet",instance:b,count:1,state:_},f.set(g,b)}}}function Gv(e,i){io.X(e,i);var l=Rl;if(l&&e){var a=Vi(l).hoistableScripts,f=Il(e),g=a.get(f);g||(g=l.querySelector(As(f)),g||(e=S({src:e,async:!0},i),(i=yi.get(f))&&yc(e,i),g=l.createElement("script"),sn(g),Nn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function Hv(e,i){io.M(e,i);var l=Rl;if(l&&e){var a=Vi(l).hoistableScripts,f=Il(e),g=a.get(f);g||(g=l.querySelector(As(f)),g||(e=S({src:e,async:!0,type:"module"},i),(i=yi.get(f))&&yc(e,i),g=l.createElement("script"),sn(g),Nn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function _h(e,i,l,a){var f=(f=w.current)?Pa(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=kl(l.href),l=Vi(f).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=kl(l.href);var g=Vi(f).hoistableStyles,b=g.get(e);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=f.querySelector(ws(e)))&&!g._p&&(b.instance=g,b.state.loading=5),yi.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},yi.set(e,l),g||Vv(f,e,l,b.state))),i&&a===null)throw Error(s(528,""));return b}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Il(l),l=Vi(f).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function kl(e){return'href="'+q(e)+'"'}function ws(e){return'link[rel="stylesheet"]['+e+"]"}function wh(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Vv(e,i,l,a){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=e.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Nn(i,"link",l),sn(i),e.head.appendChild(i))}function Il(e){return'[src="'+q(e)+'"]'}function As(e){return"script[async]"+e}function Ah(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=e.querySelector('style[data-href~="'+q(l.href)+'"]');if(a)return i.instance=a,sn(a),a;var f=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),sn(a),Nn(a,"style",f),Ga(a,l.precedence,e),i.instance=a;case"stylesheet":f=kl(l.href);var g=e.querySelector(ws(f));if(g)return i.state.loading|=4,i.instance=g,sn(g),g;a=wh(l),(f=yi.get(f))&&gc(a,f),g=(e.ownerDocument||e).createElement("link"),sn(g);var b=g;return b._p=new Promise(function(_,R){b.onload=_,b.onerror=R}),Nn(g,"link",a),i.state.loading|=4,Ga(g,l.precedence,e),i.instance=g;case"script":return g=Il(l.src),(f=e.querySelector(As(g)))?(i.instance=f,sn(f),f):(a=l,(f=yi.get(g))&&(a=S({},l),yc(a,f)),e=e.ownerDocument||e,f=e.createElement("script"),sn(f),Nn(f,"link",a),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Ga(a,l.precedence,e));return i.instance}function Ga(e,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=a.length?a[a.length-1]:null,g=f,b=0;b<a.length;b++){var _=a[b];if(_.dataset.precedence===i)g=_;else if(g!==f)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function gc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function yc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Ha=null;function Nh(e,i,l){if(Ha===null){var a=new Map,f=Ha=new Map;f.set(l,a)}else f=Ha,a=f.get(l),a||(a=new Map,f.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),f=0;f<l.length;f++){var g=l[f];if(!(g[Gi]||g[ft]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=e+b;var _=a.get(b);_?_.push(g):a.set(b,[g])}}return a}function Mh(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Bv(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Rh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fv(e,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=kl(a.href),g=i.querySelector(ws(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Va.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,sn(g);return}g=i.ownerDocument||i,a=wh(a),(f=yi.get(f))&&gc(a,f),g=g.createElement("link"),sn(g);var b=g;b._p=new Promise(function(_,R){b.onload=_,b.onerror=R}),Nn(g,"link",a),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Va.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var vc=0;function Ov(e,i){return e.stylesheets&&e.count===0&&Fa(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&Fa(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&vc===0&&(vc=62500*Cv());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fa(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>vc?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(f)}}:null}function Va(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ba=null;function Fa(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ba=new Map,i.forEach(qv,e),Ba=null,Va.call(e))}function qv(e,i){if(!(i.state.loading&4)){var l=Ba.get(e);if(l)var a=l.get(null);else{l=new Map,Ba.set(e,l);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),a=b)}a&&l.set(null,a)}f=i.instance,b=f.getAttribute("data-precedence"),g=l.get(b)||a,g===a&&l.set(null,f),l.set(b,f),this.count++,a=Va.bind(this),f.addEventListener("load",a),f.addEventListener("error",a),g?g.parentNode.insertBefore(f,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Ns={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function $v(e,i,l,a,f,g,b,_,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.hiddenUpdates=_t(null),this.identifierPrefix=a,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function kh(e,i,l,a,f,g,b,_,R,j,re,me){return e=new $v(e,i,l,b,R,j,re,me,_),i=1,g===!0&&(i|=24),g=ti(3,null,null,i),e.current=g,g.stateNode=e,i=Qr(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:i},tu(g),e}function Ih(e){return e?(e=ul,e):ul}function zh(e,i,l,a,f,g){f=Ih(f),a.context===null?a.context=f:a.pendingContext=f,a=mo(i),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=go(e,a,i),l!==null&&(jn(l,e,i),ss(l,e,i))}function Dh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function xc(e,i){Dh(e,i),(e=e.alternate)&&Dh(e,i)}function Uh(e){if(e.tag===13||e.tag===31){var i=Bo(e,67108864);i!==null&&jn(i,e,67108864),xc(e,67108864)}}function Lh(e){if(e.tag===13||e.tag===31){var i=si();i=Yn(i);var l=Bo(e,i);l!==null&&jn(l,e,i),xc(e,i)}}var Oa=!0;function jv(e,i,l,a){var f=B.T;B.T=null;var g=ye.p;try{ye.p=2,bc(e,i,l,a)}finally{ye.p=g,B.T=f}}function Yv(e,i,l,a){var f=B.T;B.T=null;var g=ye.p;try{ye.p=8,bc(e,i,l,a)}finally{ye.p=g,B.T=f}}function bc(e,i,l,a){if(Oa){var f=Sc(a);if(f===null)sc(e,i,a,qa,l),Gh(e,a);else if(Kv(f,e,i,l,a))a.stopPropagation();else if(Gh(e,a),i&4&&-1<Jv.indexOf(e)){for(;f!==null;){var g=ri(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=ut(g.pendingLanes);if(b!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;b;){var R=1<<31-Le(b);_.entanglements[1]|=R,b&=~R}Li(g),(Vt&6)===0&&(wa=ge()+500,Ts(0))}}break;case 31:case 13:_=Bo(g,2),_!==null&&jn(_,g,2),Na(),xc(g,2)}if(g=Sc(a),g===null&&sc(e,i,a,qa,l),g===f)break;f=g}f!==null&&a.stopPropagation()}else sc(e,i,a,null,l)}}function Sc(e){return e=Dn(e),Tc(e)}var qa=null;function Tc(e){if(qa=null,e=Ti(e),e!==null){var i=d(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return qa=e,null}function Ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case E:return 2;case C:return 8;case L:case V:return 32;case k:return 268435456;default:return 32}default:return 32}}var Cc=!1,Ao=null,No=null,Mo=null,Ms=new Map,Rs=new Map,Ro=[],Jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gh(e,i){switch(e){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":Ms.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(i.pointerId)}}function ks(e,i,l,a,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[f]},i!==null&&(i=ri(i),i!==null&&Uh(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Kv(e,i,l,a,f){switch(i){case"focusin":return Ao=ks(Ao,e,i,l,a,f),!0;case"dragenter":return No=ks(No,e,i,l,a,f),!0;case"mouseover":return Mo=ks(Mo,e,i,l,a,f),!0;case"pointerover":var g=f.pointerId;return Ms.set(g,ks(Ms.get(g)||null,e,i,l,a,f)),!0;case"gotpointercapture":return g=f.pointerId,Rs.set(g,ks(Rs.get(g)||null,e,i,l,a,f)),!0}return!1}function Hh(e){var i=Ti(e.target);if(i!==null){var l=d(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,Pi(e.priority,function(){Lh(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,Pi(e.priority,function(){Lh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $a(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Sc(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);gt=a,l.target.dispatchEvent(a),gt=null}else return i=ri(l),i!==null&&Uh(i),e.blockedOn=l,!1;i.shift()}return!0}function Vh(e,i,l){$a(e)&&l.delete(i)}function Xv(){Cc=!1,Ao!==null&&$a(Ao)&&(Ao=null),No!==null&&$a(No)&&(No=null),Mo!==null&&$a(Mo)&&(Mo=null),Ms.forEach(Vh),Rs.forEach(Vh)}function ja(e,i){e.blockedOn===i&&(e.blockedOn=null,Cc||(Cc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Xv)))}var Ya=null;function Bh(e){Ya!==e&&(Ya=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ya===e&&(Ya=null);for(var i=0;i<e.length;i+=3){var l=e[i],a=e[i+1],f=e[i+2];if(typeof a!="function"){if(Tc(a||l)===null)continue;break}var g=ri(l);g!==null&&(e.splice(i,3),i-=3,Su(g,{pending:!0,data:f,method:l.method,action:a},a,f))}}))}function zl(e){function i(R){return ja(R,e)}Ao!==null&&ja(Ao,e),No!==null&&ja(No,e),Mo!==null&&ja(Mo,e),Ms.forEach(i),Rs.forEach(i);for(var l=0;l<Ro.length;l++){var a=Ro[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Ro.length&&(l=Ro[0],l.blockedOn===null);)Hh(l),l.blockedOn===null&&Ro.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var f=l[a],g=l[a+1],b=f[wt]||null;if(typeof g=="function")b||Bh(l);else if(b){var _=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[wt]||null)_=b.formAction;else if(Tc(f)!==null)continue}else _=b.action;typeof _=="function"?l[a+1]=_:(l.splice(a,3),a-=3),Bh(l)}}}function Fh(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Ec(e){this._internalRoot=e}Ja.prototype.render=Ec.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=si();zh(l,a,e,i,null,null)},Ja.prototype.unmount=Ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;zh(e.current,2,null,e,null,null),Na(),i[Rn]=null}};function Ja(e){this._internalRoot=e}Ja.prototype.unstable_scheduleHydration=function(e){if(e){var i=ai();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Ro.length&&i!==0&&i<Ro[l].priority;l++);Ro.splice(l,0,e),l===0&&Hh(e)}};var Oh=t.version;if(Oh!=="19.2.3")throw Error(s(527,Oh,"19.2.3"));ye.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Qv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{Te=Ka.inject(Qv),X=Ka}catch{}}return zs.createRoot=function(e,i){if(!r(e))throw Error(s(299));var l=!1,a="",f=Xf,g=Qf,b=Zf;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=kh(e,1,!1,null,null,l,a,null,f,g,b,Fh),e[Rn]=i.current,lc(e),new Ec(i)},zs.hydrateRoot=function(e,i,l){if(!r(e))throw Error(s(299));var a=!1,f="",g=Xf,b=Qf,_=Zf,R=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(R=l.formState)),i=kh(e,1,!0,i,l??null,a,f,R,g,b,_,Fh),i.context=Ih(null),l=i.current,a=si(),a=Yn(a),f=mo(a),f.callback=null,go(l,f,a),l=a,i.current.lanes=l,yt(i,l),Li(i),e[Rn]=i.current,lc(e),new Ja(i)},zs.version="19.2.3",zs}var Wh;function ax(){if(Wh)return Ac.exports;Wh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ac.exports=sx(),Ac.exports}var rx=ax();const ux=Km(rx),cx="modulepreload",dx=function(n){return"/"+n},e0={},Dc=function(t,o,s){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=dx(m),m in e0)return;e0[m]=!0;const x=m.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":cx,x||(T.as="script"),T.crossOrigin="",T.href=m,y&&T.setAttribute("nonce",y),document.head.appendChild(T),x)return new Promise((A,N)=>{T.addEventListener("load",A),T.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&d(y.reason);return t().catch(d)})};const fx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),px=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),t0=n=>{const t=px(n);return t.charAt(0).toUpperCase()+t.slice(1)},Qm=(...n)=>n.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),hx=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var mx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gx=ee.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:r="",children:d,iconNode:h,...y},v)=>ee.createElement("svg",{ref:v,...mx,width:t,height:t,stroke:n,strokeWidth:s?Number(o)*24/Number(t):o,className:Qm("lucide",r),...!d&&!hx(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>ee.createElement(m,x)),...Array.isArray(d)?d:[d]]));const We=(n,t)=>{const o=ee.forwardRef(({className:s,...r},d)=>ee.createElement(gx,{ref:d,iconNode:t,className:Qm(`lucide-${fx(t0(n))}`,`lucide-${n}`,s),...r}));return o.displayName=t0(n),o};const yx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vx=We("align-vertical-justify-center",yx);const xx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],bx=We("align-vertical-justify-end",xx);const Sx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],Tx=We("align-vertical-justify-start",Sx);const Cx=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Ex=We("bold",Cx);const _x=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wx=We("check",_x);const Ax=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ar=We("chevron-down",Ax);const Nx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],n0=We("chevron-up",Nx);const Mx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rx=We("circle-alert",Mx);const kx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ix=We("clipboard",kx);const zx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Dx=We("copy",zx);const Ux=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Lx=We("disc",Ux);const Px=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gx=We("download",Px);const Hx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ls=We("eye-off",Hx);const Vx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ps=We("eye",Vx);const Bx=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Fx=We("fast-forward",Bx);const Ox=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rr=We("file-text",Ox);const qx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Zm=We("film",qx);const $x=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Xa=We("grip-horizontal",$x);const jx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],i0=We("image",jx);const Yx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Jx=We("info",Yx);const Kx=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Xx=We("italic",Kx);const Qx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Zx=We("key",Qx);const Wx=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],o0=We("keyboard",Wx);const eb=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ur=We("list-music",eb);const tb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],l0=We("loader-circle",tb);const nb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Vs=We("maximize",nb);const ib=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],s0=We("minimize",ib);const ob=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Ll=We("music",ob);const lb=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],sb=We("palette",lb);const ab=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],rb=We("panels-top-left",ab);const ub=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Wm=We("pause",ub);const cb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Uc=We("play",cb);const db=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eg=We("plus",db);const fb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],pb=We("redo-2",fb);const hb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],mb=We("repeat-1",hb);const gb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],a0=We("repeat",gb);const yb=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],vb=We("rewind",yb);const xb=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bb=We("rotate-ccw",xb);const Sb=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Tb=We("scissors",Sb);const Cb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Eb=We("search",Cb);const _b=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],or=We("settings",_b);const wb=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Ab=We("shuffle",wb);const Nb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Mb=We("skip-back",Nb);const Rb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],kb=We("skip-forward",Rb);const Ib=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Lc=We("sparkles",Ib);const zb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Db=We("split",zb);const Ub=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Pc=We("square",Ub);const Lb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Pb=We("strikethrough",Lb);const Gb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cr=We("trash-2",Gb);const Hb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vb=We("triangle-alert",Hb);const Bb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],zo=We("type",Bb);const Fb=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Ob=We("underline",Fb);const qb=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],$b=We("undo-2",qb);const jb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Do=We("upload",jb);const Yb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jb=We("user",Yb);const Kb=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Bs=We("video",Kb);const Xb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Io=We("volume-2",Xb);const Qb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Dl=We("volume-x",Qb);const Zb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vi=We("x",Zb);const Wb=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],e1=We("zoom-in",Wb);const t1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],n1=We("zoom-out",t1);var Mn=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(Mn||{});const tg=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},Gs=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let s=0;return o.length===3?(s+=parseInt(o[0],10)*3600,s+=parseInt(o[1],10)*60,s+=parseFloat(o[2])):o.length===2?(s+=parseInt(o[0],10)*60,s+=parseFloat(o[1])):o.length===1&&(s+=parseFloat(o[0])),isNaN(s)?0:s},Pl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},Vl=n=>{const t=n.split(`
`),o=[],s=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(d=>{const h=[...d.matchAll(s)];if(h.length>0){let y=d.replace(s,"").trim();const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(x=x.replace(/\\n/g,`
`),v.length>0){m=[];for(let S=0;S<v.length;S++){const T=v[S],A=parseInt(T[1],10),N=parseInt(T[2],10),O=T[4];let F=A*60+N;O&&(F+=parseInt(O,10)/(O.length===3?1e3:100));const K=(T.index||0)+T[0].length,le=S<v.length-1?v[S+1].index:y.length,ce=y.substring(K,le);ce&&ce.split(/(\\n)/g).forEach(Me=>{Me&&m.push({text:Me==="\\n"?`
`:Me,startTime:F,endTime:0})})}for(let S=0;S<m.length;S++)S<m.length-1?m[S].endTime=m[S+1].startTime:m[S].endTime=m[S].startTime+.5}h.forEach(S=>{const T=parseInt(S[1],10),A=parseInt(S[2],10),N=S[4];let O=T*60+A;N&&(N.length===2?O+=parseInt(N,10)/100:(N.length,O+=parseInt(N,10)/1e3)),o.push({time:O,text:x,words:m})})}}),o.sort((d,h)=>d.time-h.time)},Bl=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),s=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,d=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),S=parseInt(y[4],10);return v*3600+m*60+x+S/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),S=tg(x),T=v.split(" --> ");if(T.length>=2){const A=d(T[0]),N=d(T[1]);A!==null&&S&&s.push({time:A,text:S,endTime:N!==null?N:void 0})}}}),s},Fs=n=>{const t=[];try{const s=new DOMParser().parseFromString(n,"text/xml"),d=Array.from(s.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Gs(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<d.length;v++){const m=d[v],x=y(m,"begin"),S=y(m,"end"),T=tg(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=h(x),N=h(S),O=[],K=Array.from(m.getElementsByTagName("*")).filter(le=>le.localName==="span");for(let le=0;le<K.length;le++){const ce=K[le],ke=y(ce,"begin"),Me=y(ce,"end"),De=ce.textContent?.replace(/\s+/g," ");if(ke&&Me&&De&&De.length>0){const ve=h(ke),tt=h(Me);ve!==void 0&&tt!==void 0&&O.push({text:De,startTime:ve,endTime:tt})}}A!==void 0&&t.push({time:A,text:T,endTime:N,words:O.length>0?O:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,s)=>o.time-s.time)},i1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(s=>typeof s=="object"&&s!==null&&typeof s.time=="number"&&typeof s.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},o1=({toast:n,onRemove:t})=>{const[o,s]=ee.useState(!1);ee.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{s(!0),setTimeout(t,300)},d=()=>{switch(n.type){case"success":return p.jsx(wx,{size:18,className:"text-green-400"});case"error":return p.jsx(Rx,{size:18,className:"text-red-400"});default:return p.jsx(Jx,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return p.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[p.jsx("div",{className:"shrink-0",children:d()}),p.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),p.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:p.jsx(vi,{size:16})})]})},l1=({toasts:n,removeToast:t})=>p.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>p.jsx("div",{className:"pointer-events-auto",children:p.jsx(o1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),s1=({isOpen:n,message:t,onConfirm:o,onCancel:s,title:r="Confirm Action"})=>{const[d,h]=ee.useState(!1);return ee.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),!n&&!d?null:p.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),p.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:p.jsx(Vb,{className:"text-orange-500",size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),p.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),p.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",children:p.jsx(vi,{size:20})})]})}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},ng=ee.createContext(void 0),vr=()=>{const n=ee.useContext(ng);if(!n)throw new Error("useUI must be used within a UIProvider");return n},a1=({children:n})=>{const[t,o]=ee.useState([]),s=ee.useCallback((S,T,A)=>{let N,O;typeof A=="number"?N=A:typeof A=="object"&&(N=A.duration,O=A.id);const F=O||Math.random().toString(36).substr(2,9);o(K=>[...K.filter(ce=>ce.id!==F),{id:F,type:S,message:T,duration:N}])},[]),r=ee.useCallback(S=>{o(T=>T.filter(A=>A.id!==S))},[]),d={success:(S,T)=>s("success",S,T),error:(S,T)=>s("error",S,T),info:(S,T)=>s("info",S,T)},[h,y]=ee.useState({isOpen:!1,message:"",title:"",resolve:null}),v=ee.useCallback((S,T="Confirm Action")=>new Promise(A=>{y({isOpen:!0,message:S,title:T,resolve:A})}),[]),m=ee.useCallback(()=>{h.resolve&&h.resolve(!0),y(S=>({...S,isOpen:!1,resolve:null}))},[h]),x=ee.useCallback(()=>{h.resolve&&h.resolve(!1),y(S=>({...S,isOpen:!1,resolve:null}))},[h]);return p.jsxs(ng.Provider,{value:{toast:d,confirm:v},children:[n,p.jsx(l1,{toasts:t,removeToast:r}),p.jsx(s1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},Qa=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,r1=(n,t)=>{const o=Math.floor(n/60),s=n%60;return t<1?`${o}:${s.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(s).toString().padStart(2,"0")}`},r0=10,u1=50,Ot={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},c1=n=>new Promise(t=>{const o=URL.createObjectURL(n),s=document.createElement(n.type.startsWith("audio/")?"audio":"video");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(o)},s.onerror=()=>{URL.revokeObjectURL(o),t(0)},s.src=o}),d1=({slides:n,setSlides:t,currentTime:o,duration:s,lyrics:r,onSeek:d,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=vr(),x=ee.useRef(null),S=ee.useRef(null),T=ee.useRef(null),[A,N]=ee.useState(40),[O,F]=ee.useState([n]),[K,le]=ee.useState(0),ce=ee.useRef(!1);ee.useEffect(()=>{if(ce.current){ce.current=!1;return}const E=O[K];if(JSON.stringify(E)!==JSON.stringify(n)){const C=O.slice(0,K+1);C.push(n),C.length>u1?(C.shift(),F(C)):(F(C),le(K+1))}},[n,O,K]);const ke=K>0,Me=K<O.length-1,De=ee.useCallback(()=>{if(K>0){const E=K-1;le(E),ce.current=!0,t(O[E])}},[t,O,K]),ve=ee.useCallback(()=>{if(K<O.length-1){const E=K+1;le(E),ce.current=!0,t(O[E])}},[t,O,K]),tt=Math.max(0,...n.map(E=>E.endTime)),_e=Math.max(s,60,tt),Qe=_e*A,[Ie,ct]=ee.useState([]),[bt,Rt]=ee.useState(null),[xe,B]=ee.useState([]),ye=ee.useCallback(()=>{if(Ie.length===0)return;const E=n.filter(C=>Ie.includes(C.id));B(E)},[Ie,n]),ue=ee.useCallback(()=>{if(Ie.length===0)return;const E=n.filter(C=>Ie.includes(C.id));B(E),t(C=>C.filter(L=>!Ie.includes(L.id))),ct([])},[Ie,n,t]),ht=ee.useRef(n),mt=ee.useRef(A);ee.useEffect(()=>{ht.current=n,mt.current=A},[n,A]);const I=ee.useCallback(()=>{if(xe.length===0)return;const E=Math.min(...xe.map(V=>V.startTime)),C=o-E,L=xe.map(V=>({...V,id:Math.random().toString(36).substr(2,9),startTime:V.startTime+C,endTime:V.endTime+C}));t(V=>[...V,...L].sort((k,ae)=>k.startTime-ae.startTime)),ct(L.map(V=>V.id))},[xe,o,t]),M=ee.useCallback(()=>{const E=n.filter(k=>Ie.includes(k.id)&&o>k.startTime&&o<k.endTime);if(E.length===0)return;let C=[];const L=[],V=[];E.forEach(k=>{const ae=o,Y={...k,id:Math.random().toString(36).substr(2,9),endTime:ae},Te=ae-k.startTime,X={...k,id:Math.random().toString(36).substr(2,9),startTime:ae,mediaStartOffset:(k.mediaStartOffset||0)+Te};L.push(k.id),C.push(Y,X),V.push(X.id)}),t(k=>[...k.filter(Y=>!L.includes(Y.id)),...C].sort((Y,Te)=>Y.startTime-Te.startTime)),ct(V)},[n,Ie,o,t]),[te,Se]=ee.useState(null),[Ke,w]=ee.useState(!1),[U,ne]=ee.useState(null),ie=async E=>{if(E.target.files&&E.target.files.length>0){const C=Array.from(E.target.files),L=C.every(k=>k.type.startsWith("image/")),V=[];if(L){const k=C.length,ae=o,Te=Math.max(0,s-ae)/k,X=Math.max(3,Te);C.forEach((Be,Le)=>{const He=URL.createObjectURL(Be),dt=ae+Le*X,Ct=dt+X;V.push({id:Math.random().toString(36).substr(2,9),url:He,type:"image",startTime:dt,endTime:Ct,name:Be.name,layer:0})})}else{let k=o;for(const ae of C){const Y=ae.type.startsWith("image/")?"image":ae.type.startsWith("video/")?"video":"audio";let Te=5;if(Y!=="image"){const Be=await c1(ae);Be>0&&(Te=Be)}const X=URL.createObjectURL(ae);V.push({id:Math.random().toString(36).substr(2,9),url:X,type:Y,startTime:k,endTime:k+Te,name:ae.name,isMuted:Y==="video",volume:Y==="video"||Y==="audio"?1:void 0,layer:0}),k+=Te}}t(k=>[...k,...V].sort((ae,Y)=>ae.startTime-Y.startTime)),E.target.value=""}},Re=E=>{t(C=>C.filter(L=>L.id!==E))},Ue=async E=>{E.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},be=(E,C,L)=>{if(E.stopPropagation(),E.preventDefault(),x.current?.focus(),E.shiftKey&&bt){const X=n.findIndex(Le=>Le.id===bt),Be=n.findIndex(Le=>Le.id===C);if(X!==-1&&Be!==-1){const Le=Math.min(X,Be),He=Math.max(X,Be),dt=n.slice(Le,He+1).map(Ct=>Ct.id);ct(Ct=>{const Bt=new Set([...Ct,...dt]);return Array.from(Bt)})}}else E.ctrlKey||E.metaKey?(ct(X=>X.includes(C)?X.filter(Be=>Be!==C):[...X,C]),Rt(C)):(Ie.includes(C)||ct([C]),Rt(C));const V=n.find(X=>X.id===C);if(!V)return;const k=Ie.includes(C),ae=E.ctrlKey||E.metaKey||E.shiftKey;let Y=[];if(!ae&&!k)Y=[C];else if(ae){if(Y=[C],(E.ctrlKey||E.metaKey)&&!k)Y=[...Ie,C];else if((E.ctrlKey||E.metaKey)&&k){Y=Ie.filter(X=>X!==C);return}}else Y=Ie;const Te={};n.forEach(X=>{Y.includes(X.id)&&(Te[X.id]={start:X.startTime,end:X.endTime})}),Te[C]||(Te[C]={start:V.startTime,end:V.endTime}),Se({id:C,type:L,startX:E.clientX,initialStart:V.startTime,initialEnd:V.endTime,initialMap:Te}),window.addEventListener("mousemove",G),window.addEventListener("mouseup",oe)},Ne=E=>{E.button===0&&(E.stopPropagation(),x.current?.focus(),ct([]),w(!0),P(E.clientX),window.addEventListener("mousemove",Ae),window.addEventListener("mouseup",je))},fe=E=>{if(E.button!==0)return;x.current?.focus();const C=E.clientX,L=E.clientY,V=T.current?.getBoundingClientRect();if(!V)return;const k=C-V.left,ae=L-V.top;let Y=!1;const Te=Be=>{const Le=Math.sqrt(Math.pow(Be.clientX-C,2)+Math.pow(Be.clientY-L,2));if(!Y&&Le>5&&(Y=!0,ne({x:k,y:ae,w:0,h:0})),Y&&T.current){const He=T.current.getBoundingClientRect(),dt=Be.clientX-He.left-96,Ct=Be.clientY-He.top;ne(yt=>{if(!yt)return null;const nt=dt-k,un=Ct-ae;return{x:nt>0?k:dt,y:un>0?ae:Ct,w:Math.abs(nt),h:Math.abs(un)}});const Bt=[],Zt=ht.current,Ht=mt.current,ut=Math.min(k,dt),we=Math.min(ae,Ct),Ge=Math.abs(dt-k),ot=Math.abs(Ct-ae),Je=ut+Ge,_t=we+ot;Zt.forEach(yt=>{const nt=yt.startTime*Ht,un=yt.endTime*Ht;let hn=0,Si=0;const Yn=yt.layer||0;yt.type==="audio"?Yn===0?(hn=Ot.AUDIO_L1_TOP,Si=Ot.AUDIO_L1_TOP+Ot.AUDIO_L1_HEIGHT):(hn=Ot.AUDIO_L2_TOP,Si=Ot.AUDIO_L2_TOP+Ot.AUDIO_L2_HEIGHT):Yn===0?(hn=Ot.VISUAL_L1_TOP,Si=Ot.VISUAL_L1_TOP+Ot.VISUAL_L1_HEIGHT):(hn=Ot.VISUAL_L2_TOP,Si=Ot.VISUAL_L2_TOP+Ot.VISUAL_L2_HEIGHT);const Gn=ut<un&&Je>nt,ai=we<Si&&_t>hn;Gn&&ai&&Bt.push(yt.id)}),ct(Bt)}},X=Be=>{Y||(ct([]),P(Be.clientX)),ne(null),window.removeEventListener("mousemove",Te),window.removeEventListener("mouseup",X)};window.addEventListener("mousemove",Te),window.addEventListener("mouseup",X)},P=E=>{if(!T.current)return;const C=T.current.getBoundingClientRect(),L=E-C.left-96;let V=Math.max(0,Math.min(L/A,_e));V=Ye(V),d(V)},Ae=E=>{P(E.clientX)},je=()=>{w(!1),window.removeEventListener("mousemove",Ae),window.removeEventListener("mouseup",je)},Ve=E=>{const C=E.target;if(!(C.tagName==="INPUT"||C.tagName==="TEXTAREA"||C.isContentEditable)){if((E.ctrlKey||E.metaKey)&&E.key==="z"&&!E.shiftKey){E.preventDefault(),De();return}if((E.ctrlKey||E.metaKey)&&(E.key==="y"||E.key==="z"&&E.shiftKey)){E.preventDefault(),ve();return}if((E.ctrlKey||E.metaKey)&&E.key==="c"){E.preventDefault(),ye();return}if((E.ctrlKey||E.metaKey)&&E.key==="x"){E.preventDefault(),ue();return}if((E.ctrlKey||E.metaKey)&&E.key==="v"){E.preventDefault(),I();return}if(E.key.toLowerCase()==="x"&&!E.ctrlKey&&!E.metaKey||(E.ctrlKey||E.metaKey)&&E.key==="k"){E.preventDefault(),E.stopPropagation(),M();return}if((E.key==="Delete"||E.key==="Backspace")&&Ie.length>0&&(E.preventDefault(),t(L=>L.filter(V=>!Ie.includes(V.id))),ct([])),Ie.length>0&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault(),E.stopPropagation();const L=E.key==="ArrowRight"?.01:-.01,V=n.find(k=>k.id===Ie[0]);if(V){const k=Math.max(0,V.startTime+L);d(k)}t(k=>k.map(Y=>{if(Ie.includes(Y.id)){const Te=Y.endTime-Y.startTime;let X=Y.startTime+L;return X=Math.max(0,X),{...Y,startTime:X,endTime:X+Te}}return Y}).sort((Y,Te)=>Y.startTime-Te.startTime))}}},Ye=(E,C=[])=>{const L=r0/A,V=[0,s,o],k=Qa(A),ae=Math.round(E/k)*k;V.push(ae),n.forEach(X=>{C.includes(X.id)||(V.push(X.startTime),V.push(X.endTime))}),r.forEach(X=>{V.push(X.time)});let Y=E,Te=L;for(const X of V){const Be=Math.abs(X-E);Be<Te&&(Te=Be,Y=X)}return Y},G=E=>{Se(C=>{if(!C)return null;const V=(E.clientX-C.startX)/A;return t(k=>{if(C.type==="move"){const ae=Object.keys(C.initialMap),Y=Object.values(C.initialMap),Te=Math.min(...Y.map(we=>we.start)),X=Math.max(...Y.map(we=>we.end)),Be=C.initialMap[C.id],Le=[{type:"drag-start",initVal:Be.start},{type:"drag-end",initVal:Be.end},{type:"group-start",initVal:Te},{type:"group-end",initVal:X}],He=r0/A,dt=[0,s,o],Ct=Qa(A);n.forEach(we=>{ae.includes(we.id)||(dt.push(we.startTime),dt.push(we.endTime))}),r.forEach(we=>{dt.push(we.time)});let Bt=V,Zt=He,Ht=!1;Le.forEach(we=>{const Ge=we.initVal+V;for(const _t of dt){const yt=Math.abs(_t-Ge);yt<Zt&&(Zt=yt,Bt=_t-we.initVal,Ht=!0)}const ot=Math.round(Ge/Ct)*Ct,Je=Math.abs(ot-Ge);Je<Zt&&(Zt=Je,Bt=ot-we.initVal,Ht=!0)});let ut=Ht?Bt:V;return Te+ut<0&&(ut=-Te),k.map(we=>{const Ge=C.initialMap[we.id];if(Ge){const ot=Ge.end-Ge.start;let Je=we.layer||0;const _t=(nt,un,hn)=>nt>=un&&nt<=un+hn,yt=T.current?.getBoundingClientRect();if(yt){const nt=E.clientY-yt.top;we.type==="audio"?(_t(nt,Ot.AUDIO_L1_TOP,Ot.AUDIO_L1_HEIGHT)&&(Je=0),_t(nt,Ot.AUDIO_L2_TOP,Ot.AUDIO_L2_HEIGHT)&&(Je=1)):(_t(nt,Ot.VISUAL_L1_TOP,Ot.VISUAL_L1_HEIGHT)&&(Je=0),_t(nt,Ot.VISUAL_L2_TOP,Ot.VISUAL_L2_HEIGHT)&&(Je=1))}return{...we,startTime:Ge.start+ut,endTime:Ge.start+ut+ot,layer:Je}}return we})}else if(C.type==="resize-start"){let ae=C.initialStart+V;ae=Ye(ae,[C.id]);const Y=.5,Te=C.initialEnd;return ae=Math.max(0,Math.min(ae,Te-Y)),k.map(X=>X.id!==C.id?X:{...X,startTime:ae})}else{let ae=C.initialEnd+V;ae=Ye(ae,[C.id]);const Y=.5,Te=C.initialStart;return ae=Math.max(Te+Y,ae),k.map(X=>X.id!==C.id?X:{...X,endTime:ae})}}),C})},oe=E=>{te&&te.type==="move"&&Math.abs(E.clientX-te.startX)<5&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&ct([te.id]),Se(null),window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",oe),t(C=>[...C].sort((L,V)=>L.startTime-V.startTime))},se=()=>N(E=>Math.min(200,E+10)),Ce=()=>N(E=>Math.max(10,E-10)),ge=(E,C)=>{v(L=>{const V=L.layerVisibility?.[E]||{},k={...V,[C]:V[C]===!1};return{...L,layerVisibility:{...L.layerVisibility,[E]:k,...E==="visual"?{audio:L.layerVisibility?.audio||{}}:{visual:L.layerVisibility?.visual||{}}}}})},he=(E,C)=>y.layerVisibility?.[E]?.[C]!==!1;return p.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:E=>E.currentTarget.focus(),onKeyDown:Ve,children:[p.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[p.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[p.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[p.jsx(Zm,{size:16,className:"text-purple-400"}),"Timeline"]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[p.jsx(eg,{size:14})," Import Media",p.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:ie})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:Ce,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:p.jsx(n1,{size:14})}),p.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[A,"px/s"]}),p.jsx("button",{onClick:se,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:p.jsx(e1,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:De,disabled:!ke,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:p.jsx($b,{size:14})}),p.jsx("button",{onClick:ve,disabled:!Me,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:p.jsx(pb,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:ye,disabled:Ie.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:p.jsx(Dx,{size:14})}),p.jsx("button",{onClick:ue,disabled:Ie.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:p.jsx(Tb,{size:14})}),p.jsx("button",{onClick:I,disabled:xe.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:p.jsx(Ix,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsx("div",{className:"flex items-center gap-1",children:p.jsx("button",{onClick:M,disabled:Ie.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:p.jsx(Db,{size:14})})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>{n.length>0&&Ie.length===n.length?ct([]):ct(n.map(E=>E.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),Ie.length===1&&p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[p.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),p.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const E=n.find(C=>C.id===Ie[0]);return E?Pl(E.endTime-E.startTime):"00:00"})(),onBlur:E=>{const L=E.target.value.split(":");if(L.length===2){const k=parseInt(L[0])||0,ae=parseInt(L[1])||0,Y=k*60+ae;Y>0&&t(Te=>Te.map(X=>X.id===Ie[0]?{...X,endTime:X.startTime+Y}:X))}const V=n.find(k=>k.id===Ie[0]);V&&(E.target.value=Pl(V.endTime-V.startTime))},onKeyDown:E=>{E.key==="Enter"&&E.currentTarget.blur()}},Ie[0])]}),Ie.length===1&&(()=>{const E=n.find(C=>C.id===Ie[0]);return E&&(E.type==="video"||E.type==="audio")?p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),p.jsxs("div",{className:"flex items-center gap-1 w-20",children:[p.jsx("button",{onClick:()=>{t(C=>C.map(L=>L.id===E.id?{...L,isMuted:!L.isMuted}:L))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?p.jsx(Dl,{size:10}):p.jsx(Io,{size:10})}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:E.volume!==void 0?E.volume:1,onChange:C=>{const L=parseFloat(C.target.value);t(V=>V.map(k=>k.id===E.id?{...k,volume:L,isMuted:L===0}:k))}})]}),p.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((E.volume||1)*100),"%"]})]}):null})()]})]}),p.jsxs("div",{className:"flex gap-2 shrink-0",children:[p.jsx("button",{onClick:Ue,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:p.jsx(cr,{size:14})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),p.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:p.jsx(vi,{size:14})})]})]}),p.jsx("div",{ref:S,onWheel:E=>{S.current&&E.shiftKey&&(E.preventDefault(),S.current.scrollLeft+=E.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:p.jsxs("div",{ref:T,className:"relative",style:{width:`${Qe+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:fe,children:[U&&p.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:U.x,top:U.y,width:U.w,height:U.h}}),p.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const E=Qa(A);return Array.from({length:Math.ceil(Qe/(A*E))}).map((C,L)=>p.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:L*E*A}},L))})(),s>0&&p.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:s*A},children:p.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),p.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:Ne,children:[p.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),p.jsx("div",{className:"relative flex-1",children:(()=>{const E=Qa(A);return Array.from({length:Math.ceil(Qe/(A*E))}).map((C,L)=>{const V=L*E;return V>_e?null:p.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:V*A,width:E*A},children:r1(V,E)},L)})})()})]}),p.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*A}px)`,willChange:"transform"},children:p.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),p.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Ot.VISUAL_L1_TOP,height:Ot.VISUAL_L1_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Visual 1"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ge("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("visual",0)?p.jsx(Ps,{size:12}):p.jsx(Ls,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&(E.layer===0||E.layer===void 0)).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${te?.id===E.id||Ie.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${Ie.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>be(C,E.id,"move"),children:[E.type==="video"?p.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):p.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:p.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(L=>L.map(V=>V.id===E.id?{...V,isMuted:!V.isMuted}:V))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?p.jsx(Dl,{size:10}):p.jsx(Io,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Re(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-start"),children:p.jsx(Xa,{size:10,className:"text-white/70 rotate-90"})}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-end"),children:p.jsx(Xa,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Ot.VISUAL_L2_TOP,height:Ot.VISUAL_L2_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Visual 2"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ge("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("visual",1)?p.jsx(Ps,{size:12}):p.jsx(Ls,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&E.layer===1).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${te?.id===E.id||Ie.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${Ie.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:C=>be(C,E.id,"move"),children:[E.type==="video"?p.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):p.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:p.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(L=>L.map(V=>V.id===E.id?{...V,isMuted:!V.isMuted}:V))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:E.isMuted!==!1?p.jsx(Dl,{size:10}):p.jsx(Io,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Re(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-start"),children:p.jsx(Xa,{size:10,className:"text-white/70 rotate-90"})}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-end"),children:p.jsx(Xa,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Ot.LYRICS_TOP,height:Ot.LYRICS_HEIGHT},children:[p.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:p.jsx("span",{children:"Lyrics"})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((E,C)=>p.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:E.time*A},title:`${Pl(E.time)} - ${E.text}`,onClick:L=>{L.stopPropagation(),d(E.time)},children:[p.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Pl(E.time)}),E.text]},C))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Ot.AUDIO_L1_TOP,height:Ot.AUDIO_L1_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Audio 1"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ge("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("audio",0)?p.jsx(Ps,{size:12}):p.jsx(Ls,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&(E.layer===0||E.layer===void 0)).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${te?.id===E.id||Ie.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Ie.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>be(C,E.id,"move"),children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:p.jsx(Io,{size:16,className:"text-emerald-200"})}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:p.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),t(L=>L.map(V=>V.id===E.id?{...V,isMuted:!V.isMuted}:V))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?p.jsx(Dl,{size:10}):p.jsx(Io,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Re(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-start")}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-end")})]},E.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Ot.AUDIO_L2_TOP,height:Ot.AUDIO_L2_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Audio 2"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ge("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("audio",1)?p.jsx(Ps,{size:12}):p.jsx(Ls,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&E.layer===1).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${te?.id===E.id||Ie.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Ie.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>be(C,E.id,"move"),children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:p.jsx(Io,{size:16,className:"text-emerald-200"})}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:p.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),t(L=>L.map(V=>V.id===E.id?{...V,isMuted:!V.isMuted}:V))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?p.jsx(Dl,{size:10}):p.jsx(Io,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Re(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-start")}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>be(C,E.id,"resize-end")})]},E.id))})]})]})})]})};var f1={};let p1,h1;function m1(){return{geminiUrl:p1,vertexUrl:h1}}function g1(n,t,o,s){var r,d;if(!n?.baseUrl){const h=m1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(d=h.geminiUrl)!==null&&d!==void 0?d:s}return n.baseUrl}class lo{}function $e(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const d=t[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(n,t,o){for(let d=0;d<t.length-1;d++){const h=t[d];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];c(x,t.slice(d+1),o[m])}else for(const m of v)c(m,t.slice(d+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];c(v[0],t.slice(d+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const s=t[t.length-1],r=n[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[s]=o}function u(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let s=0;s<t.length;s++){if(typeof n!="object"||n===null)return o;const r=t[s];if(r.endsWith("[]")){const d=r.slice(0,-2);if(d in n){const h=n[d];return Array.isArray(h)?h.map(y=>u(y,t.slice(s+1),o)):o}else return o}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return o;throw s}}function y1(n,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),d=s.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&d.length>y)for(let v=y;v<d.length;v++){const m=d[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}Gc(n,r,d,0,h)}}function Gc(n,t,o,s,r){if(s>=t.length||typeof n!="object"||n===null)return;const d=t[s];if(d.endsWith("[]")){const h=d.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])Gc(v,t,o,s+1,r)}else if(d==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const S=[];for(const T of o.slice(s))T==="*"?S.push(m):S.push(T);c(h,S,x)}for(const m of y)delete h[m]}}else{const h=n;d in h&&Gc(h[d],t,o,s+1,r)}}function nd(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function v1(n){const t={},o=u(n,["operationName"]);o!=null&&c(t,["operationName"],o);const s=u(n,["resourceName"]);return s!=null&&c(t,["_url","resourceName"],s),t}function x1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response","generateVideoResponse"]);return h!=null&&c(t,["response"],S1(h)),t}function b1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],T1(h)),t}function S1(n){const t={},o=u(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>C1(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function T1(n){const t={},o=u(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>E1(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function C1(n){const t={},o=u(n,["video"]);return o!=null&&c(t,["video"],R1(o)),t}function E1(n){const t={},o=u(n,["_self"]);return o!=null&&c(t,["video"],k1(o)),t}function _1(n){const t={},o=u(n,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function w1(n){const t={},o=u(n,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function A1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],N1(h)),t}function N1(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function ig(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],M1(h)),t}function M1(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function R1(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&c(t,["videoBytes"],nd(s));const r=u(n,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function k1(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],nd(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}var u0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(u0||(u0={}));var c0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(c0||(c0={}));var d0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(d0||(d0={}));var ln;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ln||(ln={}));var f0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(f0||(f0={}));var p0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(p0||(p0={}));var h0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(h0||(h0={}));var m0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(m0||(m0={}));var g0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(g0||(g0={}));var y0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(y0||(y0={}));var v0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v0||(v0={}));var x0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(x0||(x0={}));var b0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(b0||(b0={}));var S0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(S0||(S0={}));var T0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(T0||(T0={}));var C0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(C0||(C0={}));var E0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(E0||(E0={}));var _0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(_0||(_0={}));var w0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(w0||(w0={}));var dr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(dr||(dr={}));var A0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(A0||(A0={}));var N0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(N0||(N0={}));var M0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(M0||(M0={}));var Hc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hc||(Hc={}));var R0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(R0||(R0={}));var k0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(k0||(k0={}));var I0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(I0||(I0={}));var z0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(z0||(z0={}));var D0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(D0||(D0={}));var U0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(U0||(U0={}));var L0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(L0||(L0={}));var P0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(P0||(P0={}));var G0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(G0||(G0={}));var H0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(H0||(H0={}));var V0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(V0||(V0={}));var B0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(B0||(B0={}));var F0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(F0||(F0={}));var O0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(O0||(O0={}));var q0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(q0||(q0={}));var $0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})($0||($0={}));var j0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(j0||(j0={}));var Y0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Y0||(Y0={}));var J0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(J0||(J0={}));var K0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(K0||(K0={}));var X0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(X0||(X0={}));var Q0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Q0||(Q0={}));var Z0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z0||(Z0={}));var W0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(W0||(W0={}));var em;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(em||(em={}));var tm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tm||(tm={}));var nm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nm||(nm={}));var im;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(im||(im={}));var om;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(om||(om={}));var lm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lm||(lm={}));var sm;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(sm||(sm={}));var Gl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Gl||(Gl={}));class Vc{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ds{get text(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const S=[];for(const T of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[A,N]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&S.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const S of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(S))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);S.inlineData&&typeof S.inlineData.data=="string"&&(m+=atob(S.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class am{}class rm{}class I1{}class z1{}class D1{}class U1{}class um{}class cm{}class dm{}class L1{}class fr{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new fr;let r;const d=t;return o?r=b1(d):r=x1(d),Object.assign(s,r),s}}class fm{}class pm{}class hm{}class mm{}class P1{}class G1{}class H1{}class id{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new id,d=A1(t);return Object.assign(s,d),s}}class V1{}class B1{}class F1{}class gm{}class O1{get text(){var t,o,s;let r="",d=!1;const h=[];for(const y of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;d=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var t,o,s;let r="";const d=[];for(const h of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&d.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class q1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class od{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new od,d=ig(t);return Object.assign(s,d),s}}function Gt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function og(n,t){const o=Gt(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function lg(n){return Array.isArray(n)?n.map(t=>pr(t)):[pr(n)]}function pr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function sg(n){const t=pr(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ag(n){const t=pr(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ym(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function rg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>ym(t)):[ym(n)]}function Bc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function zn(n){if(n==null)throw new Error("ContentUnion is required");return Bc(n)?n:{role:"user",parts:rg(n)}}function ld(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=zn(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const o=zn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>zn(o)):[zn(t)]}function xi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(vm(n)||xm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zn(n)]}const t=[],o=[],s=Bc(n[0]);for(const r of n){const d=Bc(r);if(d!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(r);else{if(vm(r)||xm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:rg(o)}),t}function $1(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(ln).includes(o[0].toUpperCase())?o[0].toUpperCase():ln.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(ln).includes(s.toUpperCase())?s.toUpperCase():ln.TYPE_UNSPECIFIED})}}function Fl(n){const t={},o=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=n.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(t.nullable=!0,n=d[1]):d[1].type==="null"&&(t.nullable=!0,n=d[0])),n.type instanceof Array&&$1(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(ln).includes(y.toUpperCase())?y.toUpperCase():ln.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=Fl(y);else if(s.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(Fl(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=Fl(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function sd(n){return Fl(n)}function ad(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function rd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ql(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Fl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Fl(t.response));return n}function $l(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function j1(n,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function so(n,t){if(typeof t!="string")throw new Error("name must be a string");return j1(n,t,"cachedContents")}function ug(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Uo(n){return nd(n)}function Y1(n){return n!=null&&typeof n=="object"&&"name"in n}function J1(n){return n!=null&&typeof n=="object"&&"video"in n}function K1(n){return n!=null&&typeof n=="object"&&"uri"in n}function cg(n){var t;let o;if(Y1(n)&&(o=n.name),!(K1(n)&&(o=n.uri,o===void 0))&&!(J1(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function dg(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function fg(n){for(const t of["models","tunedModels","publisherModels"])if(X1(n,t))return n[t];return[]}function X1(n,t){return n!==null&&typeof n=="object"&&t in n}function Q1(n,t={}){const o=n,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function Z1(n,t={}){const o=[],s=new Set;for(const r of n){const d=r.name;if(s.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);s.add(d);const h=Q1(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function pg(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function W1(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function hg(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let d=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){d=!0;break}}return d&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function jl(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function mg(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function eS(n){const t={},o=u(n,["responsesFile"]);o!=null&&c(t,["fileName"],o);const s=u(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>DS(h))),c(t,["inlinedResponses"],d)}const r=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["inlinedEmbedContentResponses"],d)}return t}function tS(n){const t={},o=u(n,["predictionsFormat"]);o!=null&&c(t,["format"],o);const s=u(n,["gcsDestination","outputUriPrefix"]);s!=null&&c(t,["gcsUri"],s);const r=u(n,["bigqueryDestination","outputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function nS(n){const t={},o=u(n,["format"]);o!=null&&c(t,["predictionsFormat"],o);const s=u(n,["gcsUri"]);s!=null&&c(t,["gcsDestination","outputUriPrefix"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&c(t,["bigqueryDestination","outputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function lr(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata","displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["metadata","state"]);r!=null&&c(t,["state"],mg(r));const d=u(n,["metadata","createTime"]);d!=null&&c(t,["createTime"],d);const h=u(n,["metadata","endTime"]);h!=null&&c(t,["endTime"],h);const y=u(n,["metadata","updateTime"]);y!=null&&c(t,["updateTime"],y);const v=u(n,["metadata","model"]);v!=null&&c(t,["model"],v);const m=u(n,["metadata","output"]);return m!=null&&c(t,["dest"],eS(hg(m))),t}function Fc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["state"]);r!=null&&c(t,["state"],mg(r));const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["createTime"]);h!=null&&c(t,["createTime"],h);const y=u(n,["startTime"]);y!=null&&c(t,["startTime"],y);const v=u(n,["endTime"]);v!=null&&c(t,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(t,["updateTime"],m);const x=u(n,["model"]);x!=null&&c(t,["model"],x);const S=u(n,["inputConfig"]);S!=null&&c(t,["src"],iS(S));const T=u(n,["outputConfig"]);T!=null&&c(t,["dest"],tS(hg(T)));const A=u(n,["completionStats"]);return A!=null&&c(t,["completionStats"],A),t}function iS(n){const t={},o=u(n,["instancesFormat"]);o!=null&&c(t,["format"],o);const s=u(n,["gcsSource","uris"]);s!=null&&c(t,["gcsUri"],s);const r=u(n,["bigquerySource","inputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function oS(n,t){const o={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(t,["fileName"]);s!=null&&c(o,["fileName"],s);const r=u(t,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>zS(n,h))),c(o,["requests","requests"],d)}return o}function lS(n){const t={},o=u(n,["format"]);o!=null&&c(t,["instancesFormat"],o);const s=u(n,["gcsUri"]);s!=null&&c(t,["gcsSource","uris"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&c(t,["bigquerySource","inputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function sS(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function aS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],jl(n,s)),o}function rS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],jl(n,s)),o}function uS(n){const t={},o=u(n,["content"]);o!=null&&c(t,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],cS(s));const r=u(n,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const d=u(n,["finishReason"]);d!=null&&c(t,["finishReason"],d);const h=u(n,["avgLogprobs"]);h!=null&&c(t,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(t,["groundingMetadata"],y);const v=u(n,["index"]);v!=null&&c(t,["index"],v);const m=u(n,["logprobsResult"]);m!=null&&c(t,["logprobsResult"],m);const x=u(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),c(t,["safetyRatings"],T)}const S=u(n,["urlContextMetadata"]);return S!=null&&c(t,["urlContextMetadata"],S),t}function cS(n){const t={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function gg(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>BS(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function dS(n,t){const o={},s=u(n,["displayName"]);if(t!==void 0&&s!=null&&c(t,["batch","displayName"],s),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function fS(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["dest"]);return t!==void 0&&r!=null&&c(t,["outputConfig"],nS(W1(r))),o}function bm(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],oS(n,pg(n,r)));const d=u(t,["config"]);return d!=null&&dS(d,o),o}function pS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],Gt(n,s));const r=u(t,["src"]);r!=null&&c(o,["inputConfig"],lS(pg(n,r)));const d=u(t,["config"]);return d!=null&&fS(d,o),o}function hS(n,t){const o={},s=u(n,["displayName"]);return t!==void 0&&s!=null&&c(t,["batch","displayName"],s),o}function mS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],TS(n,r));const d=u(t,["config"]);return d!=null&&hS(d,o),o}function gS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],jl(n,s)),o}function yS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],jl(n,s)),o}function vS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);return d!=null&&c(t,["error"],d),t}function xS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);return d!=null&&c(t,["error"],d),t}function bS(n,t){const o={},s=u(t,["contents"]);if(s!=null){let d=ld(n,s);Array.isArray(d)&&(d=d.map(h=>h)),c(o,["requests[]","request","content"],d)}const r=u(t,["config"]);return r!=null&&(c(o,["_self"],SS(r,o)),y1(o,{"requests[].*":"requests[].request.*"})),o}function SS(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const d=u(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function TS(n,t){const o={},s=u(t,["fileName"]);s!=null&&c(o,["file_name"],s);const r=u(t,["inlinedRequests"]);return r!=null&&c(o,["requests"],bS(n,r)),o}function CS(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function ES(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function _S(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function wS(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],gg(zn(r)));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const K=u(t,["responseSchema"]);K!=null&&c(s,["responseSchema"],sd(K));const le=u(t,["responseJsonSchema"]);if(le!=null&&c(s,["responseJsonSchema"],le),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=u(t,["safetySettings"]);if(o!==void 0&&ce!=null){let bt=ce;Array.isArray(bt)&&(bt=bt.map(Rt=>FS(Rt))),c(o,["safetySettings"],bt)}const ke=u(t,["tools"]);if(o!==void 0&&ke!=null){let bt=$l(ke);Array.isArray(bt)&&(bt=bt.map(Rt=>qS(ql(Rt)))),c(o,["tools"],bt)}const Me=u(t,["toolConfig"]);if(o!==void 0&&Me!=null&&c(o,["toolConfig"],OS(Me)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const De=u(t,["cachedContent"]);o!==void 0&&De!=null&&c(o,["cachedContent"],so(n,De));const ve=u(t,["responseModalities"]);ve!=null&&c(s,["responseModalities"],ve);const tt=u(t,["mediaResolution"]);tt!=null&&c(s,["mediaResolution"],tt);const _e=u(t,["speechConfig"]);if(_e!=null&&c(s,["speechConfig"],ad(_e)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=u(t,["thinkingConfig"]);Qe!=null&&c(s,["thinkingConfig"],Qe);const Ie=u(t,["imageConfig"]);Ie!=null&&c(s,["imageConfig"],IS(Ie));const ct=u(t,["enableEnhancedCivicAnswers"]);return ct!=null&&c(s,["enableEnhancedCivicAnswers"],ct),s}function AS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>uS(m))),c(t,["candidates"],v)}const r=u(n,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const d=u(n,["promptFeedback"]);d!=null&&c(t,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(t,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(t,["usageMetadata"],y),t}function NS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],jl(n,s)),o}function MS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],jl(n,s)),o}function RS(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function kS(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function IS(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function zS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["request","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let y=xi(r);Array.isArray(y)&&(y=y.map(v=>gg(v))),c(o,["request","contents"],y)}const d=u(t,["metadata"]);d!=null&&c(o,["metadata"],d);const h=u(t,["config"]);return h!=null&&c(o,["request","generationConfig"],wS(n,h,u(o,["request"],{}))),o}function DS(n){const t={},o=u(n,["response"]);o!=null&&c(t,["response"],AS(o));const s=u(n,["error"]);return s!=null&&c(t,["error"],s),t}function US(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);if(t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function LS(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);t!==void 0&&r!=null&&c(t,["_query","pageToken"],r);const d=u(n,["filter"]);return t!==void 0&&d!=null&&c(t,["_query","filter"],d),o}function PS(n){const t={},o=u(n,["config"]);return o!=null&&US(o,t),t}function GS(n){const t={},o=u(n,["config"]);return o!=null&&LS(o,t),t}function HS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>lr(h))),c(t,["batchJobs"],d)}return t}function VS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>Fc(h))),c(t,["batchJobs"],d)}return t}function BS(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],CS(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],ES(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],sS(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function FS(n){const t={},o=u(n,["category"]);if(o!=null&&c(t,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function OS(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],_S(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function qS(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],RS(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],kS(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}var oo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(oo||(oo={}));class tl{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,d;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!s||Object.keys(s).length===0?h={config:{}}:typeof s=="object"?h=Object.assign({},s):h=s,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(d=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class $S extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new tl(oo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=bm(this.apiClient,t),s=o._url,r=$e("{model}:batchGenerateContent",s),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const S=Object.assign({},x);if(S.systemInstruction){const T=S.systemInstruction;delete S.systemInstruction;const A=S.request;A.systemInstruction=T,S.request=A}m.push(S)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const d=this.getGcsUri(t),h=this.getBigqueryUri(t);if(d)d.endsWith(".jsonl")?s.dest=`${d.slice(0,-6)}/dest`:s.dest=`${d}_dest_${r}`;else if(h)s.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=pS(this.apiClient,t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>Fc(x))}else{const m=bm(this.apiClient,t);return y=$e("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>lr(x))}}async createEmbeddingsInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=mS(this.apiClient,t);return d=$e("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>lr(v))}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=MS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>Fc(x))}else{const m=NS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>lr(x))}}async cancel(t){var o,s,r,d;let h="",y={};if(this.apiClient.isVertexAI()){const v=rS(this.apiClient,t);h=$e("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=aS(this.apiClient,t);h=$e("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=GS(t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=VS(x),T=new gm;return Object.assign(T,S),T})}else{const m=PS(t);return y=$e("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=HS(x),T=new gm;return Object.assign(T,S),T})}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=yS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>xS(x))}else{const m=gS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>vS(x))}}}function jS(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Sm(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>mT(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function YS(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const d=u(n,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const h=u(n,["contents"]);if(t!==void 0&&h!=null){let x=xi(h);Array.isArray(x)&&(x=x.map(S=>Sm(S))),c(t,["contents"],x)}const y=u(n,["systemInstruction"]);t!==void 0&&y!=null&&c(t,["systemInstruction"],Sm(zn(y)));const v=u(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>yT(S))),c(t,["tools"],x)}const m=u(n,["toolConfig"]);if(t!==void 0&&m!=null&&c(t,["toolConfig"],gT(m)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function JS(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const d=u(n,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const h=u(n,["contents"]);if(t!==void 0&&h!=null){let S=xi(h);Array.isArray(S)&&(S=S.map(T=>T)),c(t,["contents"],S)}const y=u(n,["systemInstruction"]);t!==void 0&&y!=null&&c(t,["systemInstruction"],zn(y));const v=u(n,["tools"]);if(t!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>vT(T))),c(t,["tools"],S)}const m=u(n,["toolConfig"]);t!==void 0&&m!=null&&c(t,["toolConfig"],m);const x=u(n,["kmsKeyName"]);return t!==void 0&&x!=null&&c(t,["encryption_spec","kmsKeyName"],x),o}function KS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],og(n,s));const r=u(t,["config"]);return r!=null&&YS(r,o),o}function XS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],og(n,s));const r=u(t,["config"]);return r!=null&&JS(r,o),o}function QS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function ZS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function WS(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function eT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function tT(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function nT(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function iT(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function oT(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function lT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function sT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function aT(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function rT(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function uT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function cT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function dT(n){const t={},o=u(n,["config"]);return o!=null&&uT(o,t),t}function fT(n){const t={},o=u(n,["config"]);return o!=null&&cT(o,t),t}function pT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["cachedContents"],d)}return t}function hT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["cachedContents"],d)}return t}function mT(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],tT(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],nT(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],jS(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function gT(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],iT(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function yT(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],aT(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],rT(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function vT(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>oT(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function xT(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function bT(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function ST(n,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],so(n,s));const r=u(t,["config"]);return r!=null&&xT(r,o),o}function TT(n,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],so(n,s));const r=u(t,["config"]);return r!=null&&bT(r,o),o}class CT extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new tl(oo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=XS(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=KS(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=sT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=lT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ZS(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=eT(x),T=new hm;return Object.assign(T,S),T})}else{const m=QS(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=WS(x),T=new hm;return Object.assign(T,S),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=TT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=ST(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=fT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=hT(x),T=new mm;return Object.assign(T,S),T})}else{const m=dT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=pT(x),T=new mm;return Object.assign(T,S),T})}}}function hr(n,t){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(o[s[r]]=n[s[r]]);return o}function Tm(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(n){return this instanceof vt?(this.v=n,this):new vt(n)}function Ri(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,t||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(A){return function(N){return Promise.resolve(N).then(A,S)}}function y(A,N){s[A]&&(r[A]=function(O){return new Promise(function(F,K){d.push([A,O,F,K])>1||v(A,O)})},N&&(r[A]=N(r[A])))}function v(A,N){try{m(s[A](N))}catch(O){T(d[0][3],O)}}function m(A){A.value instanceof vt?Promise.resolve(A.value.v).then(x,S):T(d[0][2],A)}function x(A){v("next",A)}function S(A){v("throw",A)}function T(A,N){A(N),d.shift(),d.length&&v(d[0][0],d[0][1])}}function ki(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Tm=="function"?Tm(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(d){o[d]=n[d]&&function(h){return new Promise(function(y,v){h=n[d](h),r(y,v,h.done,h.value)})}}function r(d,h,y,v){Promise.resolve(v).then(function(m){d({value:m,done:y})},h)}}function ET(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:yg(o)}function yg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function _T(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Cm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let s=0;for(;s<o;)if(n[s].role==="user")t.push(n[s]),s++;else{const r=[];let d=!0;for(;s<o&&n[s].role==="model";)r.push(n[s]),d&&!yg(n[s])&&(d=!1),s++;d?t.push(...r):t.pop()}return t}class wT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new AT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class AT{constructor(t,o,s,r={},d=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),_T(d)}async sendMessage(t){var o;await this.sendPromise;const s=zn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var d,h,y;const v=await r,m=(h=(d=v.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let T=[];x!=null&&(T=(y=x.slice(S))!==null&&y!==void 0?y:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=zn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,s)}getHistory(t=!1){const o=t?Cm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Ri(this,arguments,function*(){var r,d,h,y,v,m;const x=[];try{for(var S=!0,T=ki(t),A;A=yield vt(T.next()),r=A.done,!r;S=!0){y=A.value,S=!1;const N=y;if(ET(N)){const O=(m=(v=N.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;O!==void 0&&x.push(O)}yield yield vt(N)}}catch(N){d={error:N}}finally{try{!S&&!r&&(h=T.return)&&(yield vt(h.call(T)))}finally{if(d)throw d.error}}this.recordHistory(o,x)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(d=>d.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Cm(s)):this.history.push(t),this.history.push(...r)}}class xr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,xr.prototype)}}function NT(n){const t={},o=u(n,["file"]);return o!=null&&c(t,["file"],o),t}function MT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function RT(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","file"],cg(o)),t}function kT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function IT(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","file"],cg(o)),t}function zT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function DT(n){const t={},o=u(n,["config"]);return o!=null&&zT(o,t),t}function UT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["files"],d)}return t}class LT extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new tl(oo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=DT(t);return d=$e("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=UT(v),x=new V1;return Object.assign(x,m),x})}}async createInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=NT(t);return d=$e("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=MT(v),x=new B1;return Object.assign(x,m),x})}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=IT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=RT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=kT(v),x=new F1;return Object.assign(x,m),x})}}}function sr(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function PT(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>WT(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function GT(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function HT(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function VT(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function BT(n){const t={},o=u(n,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const d=u(n,["candidateCount"]);d!=null&&c(t,["candidateCount"],d);const h=u(n,["enableAffectiveDialog"]);h!=null&&c(t,["enableAffectiveDialog"],h);const y=u(n,["frequencyPenalty"]);y!=null&&c(t,["frequencyPenalty"],y);const v=u(n,["logprobs"]);v!=null&&c(t,["logprobs"],v);const m=u(n,["maxOutputTokens"]);m!=null&&c(t,["maxOutputTokens"],m);const x=u(n,["mediaResolution"]);x!=null&&c(t,["mediaResolution"],x);const S=u(n,["presencePenalty"]);S!=null&&c(t,["presencePenalty"],S);const T=u(n,["responseLogprobs"]);T!=null&&c(t,["responseLogprobs"],T);const A=u(n,["responseMimeType"]);A!=null&&c(t,["responseMimeType"],A);const N=u(n,["responseModalities"]);N!=null&&c(t,["responseModalities"],N);const O=u(n,["responseSchema"]);O!=null&&c(t,["responseSchema"],O);const F=u(n,["routingConfig"]);F!=null&&c(t,["routingConfig"],F);const K=u(n,["seed"]);K!=null&&c(t,["seed"],K);const le=u(n,["speechConfig"]);le!=null&&c(t,["speechConfig"],le);const ce=u(n,["stopSequences"]);ce!=null&&c(t,["stopSequences"],ce);const ke=u(n,["temperature"]);ke!=null&&c(t,["temperature"],ke);const Me=u(n,["thinkingConfig"]);Me!=null&&c(t,["thinkingConfig"],Me);const De=u(n,["topK"]);De!=null&&c(t,["topK"],De);const ve=u(n,["topP"]);if(ve!=null&&c(t,["topP"],ve),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function FT(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function OT(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function qT(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],rd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],PT(zn(N)));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let De=$l(O);Array.isArray(De)&&(De=De.map(ve=>tC(ql(ve)))),c(t,["setup","tools"],De)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],eC(F));const K=u(n,["inputAudioTranscription"]);t!==void 0&&K!=null&&c(t,["setup","inputAudioTranscription"],K);const le=u(n,["outputAudioTranscription"]);t!==void 0&&le!=null&&c(t,["setup","outputAudioTranscription"],le);const ce=u(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&c(t,["setup","realtimeInputConfig"],ce);const ke=u(n,["contextWindowCompression"]);t!==void 0&&ke!=null&&c(t,["setup","contextWindowCompression"],ke);const Me=u(n,["proactivity"]);if(t!==void 0&&Me!=null&&c(t,["setup","proactivity"],Me),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function $T(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],BT(s));const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],rd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],zn(N));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let ve=$l(O);Array.isArray(ve)&&(ve=ve.map(tt=>nC(ql(tt)))),c(t,["setup","tools"],ve)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],F);const K=u(n,["inputAudioTranscription"]);t!==void 0&&K!=null&&c(t,["setup","inputAudioTranscription"],K);const le=u(n,["outputAudioTranscription"]);t!==void 0&&le!=null&&c(t,["setup","outputAudioTranscription"],le);const ce=u(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&c(t,["setup","realtimeInputConfig"],ce);const ke=u(n,["contextWindowCompression"]);t!==void 0&&ke!=null&&c(t,["setup","contextWindowCompression"],ke);const Me=u(n,["proactivity"]);t!==void 0&&Me!=null&&c(t,["setup","proactivity"],Me);const De=u(n,["explicitVadSignal"]);return t!==void 0&&De!=null&&c(t,["setup","explicitVadSignal"],De),o}function jT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],qT(r,o)),o}function YT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],$T(r,o)),o}function JT(n){const t={},o=u(n,["musicGenerationConfig"]);return o!=null&&c(t,["musicGenerationConfig"],o),t}function KT(n){const t={},o=u(n,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["weightedPrompts"],s)}return t}function XT(n){const t={},o=u(n,["media"]);if(o!=null){let m=lg(o);Array.isArray(m)&&(m=m.map(x=>sr(x))),c(t,["mediaChunks"],m)}const s=u(n,["audio"]);s!=null&&c(t,["audio"],sr(ag(s)));const r=u(n,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const d=u(n,["video"]);d!=null&&c(t,["video"],sr(sg(d)));const h=u(n,["text"]);h!=null&&c(t,["text"],h);const y=u(n,["activityStart"]);y!=null&&c(t,["activityStart"],y);const v=u(n,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function QT(n){const t={},o=u(n,["media"]);if(o!=null){let m=lg(o);Array.isArray(m)&&(m=m.map(x=>x)),c(t,["mediaChunks"],m)}const s=u(n,["audio"]);s!=null&&c(t,["audio"],ag(s));const r=u(n,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const d=u(n,["video"]);d!=null&&c(t,["video"],sg(d));const h=u(n,["text"]);h!=null&&c(t,["text"],h);const y=u(n,["activityStart"]);y!=null&&c(t,["activityStart"],y);const v=u(n,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function ZT(n){const t={},o=u(n,["setupComplete"]);o!=null&&c(t,["setupComplete"],o);const s=u(n,["serverContent"]);s!=null&&c(t,["serverContent"],s);const r=u(n,["toolCall"]);r!=null&&c(t,["toolCall"],r);const d=u(n,["toolCallCancellation"]);d!=null&&c(t,["toolCallCancellation"],d);const h=u(n,["usageMetadata"]);h!=null&&c(t,["usageMetadata"],iC(h));const y=u(n,["goAway"]);y!=null&&c(t,["goAway"],y);const v=u(n,["sessionResumptionUpdate"]);v!=null&&c(t,["sessionResumptionUpdate"],v);const m=u(n,["voiceActivityDetectionSignal"]);return m!=null&&c(t,["voiceActivityDetectionSignal"],m),t}function WT(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],GT(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],HT(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],sr(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function eC(n){const t={},o=u(n,["handle"]);if(o!=null&&c(t,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function tC(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],FT(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],OT(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function nC(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>VT(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function iC(n){const t={},o=u(n,["promptTokenCount"]);o!=null&&c(t,["promptTokenCount"],o);const s=u(n,["cachedContentTokenCount"]);s!=null&&c(t,["cachedContentTokenCount"],s);const r=u(n,["candidatesTokenCount"]);r!=null&&c(t,["responseTokenCount"],r);const d=u(n,["toolUsePromptTokenCount"]);d!=null&&c(t,["toolUsePromptTokenCount"],d);const h=u(n,["thoughtsTokenCount"]);h!=null&&c(t,["thoughtsTokenCount"],h);const y=u(n,["totalTokenCount"]);y!=null&&c(t,["totalTokenCount"],y);const v=u(n,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["promptTokensDetails"],A)}const m=u(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["cacheTokensDetails"],A)}const x=u(n,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["responseTokensDetails"],A)}const S=u(n,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["toolUsePromptTokensDetails"],A)}const T=u(n,["trafficType"]);return T!=null&&c(t,["trafficType"],T),t}function oC(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function lC(n){const t={},o=u(n,["content"]);o!=null&&c(t,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],sC(s));const r=u(n,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const d=u(n,["finishReason"]);d!=null&&c(t,["finishReason"],d);const h=u(n,["avgLogprobs"]);h!=null&&c(t,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(t,["groundingMetadata"],y);const v=u(n,["index"]);v!=null&&c(t,["index"],v);const m=u(n,["logprobsResult"]);m!=null&&c(t,["logprobsResult"],m);const x=u(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),c(t,["safetyRatings"],T)}const S=u(n,["urlContextMetadata"]);return S!=null&&c(t,["urlContextMetadata"],S),t}function sC(n){const t={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function aC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let d=xi(r);Array.isArray(d)&&(d=d.map(h=>h)),c(o,["contents"],d)}return o}function rC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(t,["tokensInfo"],r)}return t}function uC(n){const t={},o=u(n,["values"]);o!=null&&c(t,["values"],o);const s=u(n,["statistics"]);return s!=null&&c(t,["statistics"],cC(s)),t}function cC(n){const t={},o=u(n,["truncated"]);o!=null&&c(t,["truncated"],o);const s=u(n,["token_count"]);return s!=null&&c(t,["tokenCount"],s),t}function br(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>xE(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function dC(n){const t={},o=u(n,["controlType"]);o!=null&&c(t,["controlType"],o);const s=u(n,["enableControlImageComputation"]);return s!=null&&c(t,["computeControl"],s),t}function fC(n){const t={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function pC(n,t){const o={},s=u(n,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],zn(s));const r=u(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>Sg(y))),c(t,["tools"],h)}const d=u(n,["generationConfig"]);return t!==void 0&&d!=null&&c(t,["generationConfig"],oE(d)),o}function hC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>br(y))),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&fC(d),o}function mC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&pC(d,o),o}function gC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);s!=null&&c(t,["totalTokens"],s);const r=u(n,["cachedContentTokenCount"]);return r!=null&&c(t,["cachedContentTokenCount"],r),t}function yC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);return s!=null&&c(t,["totalTokens"],s),t}function vC(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function xC(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function bC(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function SC(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function TC(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const d=u(n,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const h=u(n,["aspectRatio"]);t!==void 0&&h!=null&&c(t,["parameters","aspectRatio"],h);const y=u(n,["guidanceScale"]);t!==void 0&&y!=null&&c(t,["parameters","guidanceScale"],y);const v=u(n,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const m=u(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&c(t,["parameters","includeSafetyAttributes"],S);const T=u(n,["includeRaiReason"]);t!==void 0&&T!=null&&c(t,["parameters","includeRaiReason"],T);const A=u(n,["language"]);t!==void 0&&A!=null&&c(t,["parameters","language"],A);const N=u(n,["outputMimeType"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","mimeType"],N);const O=u(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&c(t,["parameters","outputOptions","compressionQuality"],O);const F=u(n,["addWatermark"]);t!==void 0&&F!=null&&c(t,["parameters","addWatermark"],F);const K=u(n,["labels"]);t!==void 0&&K!=null&&c(t,["labels"],K);const le=u(n,["editMode"]);t!==void 0&&le!=null&&c(t,["parameters","editMode"],le);const ce=u(n,["baseSteps"]);return t!==void 0&&ce!=null&&c(t,["parameters","editConfig","baseSteps"],ce),o}function CC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>_E(v))),c(o,["instances[0]","referenceImages"],y)}const h=u(t,["config"]);return h!=null&&TC(h,o),o}function EC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Sr(d))),c(t,["generatedImages"],r)}return t}function _C(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const d=u(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function wC(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["instances[]","task_type"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["instances[]","title"],r);const d=u(n,["outputDimensionality"]);t!==void 0&&d!=null&&c(t,["parameters","outputDimensionality"],d);const h=u(n,["mimeType"]);t!==void 0&&h!=null&&c(t,["instances[]","mimeType"],h);const y=u(n,["autoTruncate"]);return t!==void 0&&y!=null&&c(t,["parameters","autoTruncate"],y),o}function AC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let y=ld(n,r);Array.isArray(y)&&(y=y.map(v=>v)),c(o,["requests[]","content"],y)}const d=u(t,["config"]);d!=null&&_C(d,o);const h=u(t,["model"]);return h!==void 0&&c(o,["requests[]","model"],Gt(n,h)),o}function NC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=ld(n,r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["instances[]","content"],h)}const d=u(t,["config"]);return d!=null&&wC(d,o),o}function MC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["embeddings"],d)}const r=u(n,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function RC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions[]","embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>uC(h))),c(t,["embeddings"],d)}const r=u(n,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function kC(n){const t={},o=u(n,["endpoint"]);o!=null&&c(t,["name"],o);const s=u(n,["deployedModelId"]);return s!=null&&c(t,["deployedModelId"],s),t}function IC(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function zC(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function DC(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function UC(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function LC(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],br(zn(r)));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const K=u(t,["responseSchema"]);K!=null&&c(s,["responseSchema"],sd(K));const le=u(t,["responseJsonSchema"]);if(le!=null&&c(s,["responseJsonSchema"],le),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=u(t,["safetySettings"]);if(o!==void 0&&ce!=null){let bt=ce;Array.isArray(bt)&&(bt=bt.map(Rt=>wE(Rt))),c(o,["safetySettings"],bt)}const ke=u(t,["tools"]);if(o!==void 0&&ke!=null){let bt=$l(ke);Array.isArray(bt)&&(bt=bt.map(Rt=>zE(ql(Rt)))),c(o,["tools"],bt)}const Me=u(t,["toolConfig"]);if(o!==void 0&&Me!=null&&c(o,["toolConfig"],IE(Me)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const De=u(t,["cachedContent"]);o!==void 0&&De!=null&&c(o,["cachedContent"],so(n,De));const ve=u(t,["responseModalities"]);ve!=null&&c(s,["responseModalities"],ve);const tt=u(t,["mediaResolution"]);tt!=null&&c(s,["mediaResolution"],tt);const _e=u(t,["speechConfig"]);if(_e!=null&&c(s,["speechConfig"],ad(_e)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=u(t,["thinkingConfig"]);Qe!=null&&c(s,["thinkingConfig"],Qe);const Ie=u(t,["imageConfig"]);Ie!=null&&c(s,["imageConfig"],uE(Ie));const ct=u(t,["enableEnhancedCivicAnswers"]);return ct!=null&&c(s,["enableEnhancedCivicAnswers"],ct),s}function PC(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],zn(r));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const K=u(t,["responseSchema"]);K!=null&&c(s,["responseSchema"],sd(K));const le=u(t,["responseJsonSchema"]);le!=null&&c(s,["responseJsonSchema"],le);const ce=u(t,["routingConfig"]);ce!=null&&c(s,["routingConfig"],ce);const ke=u(t,["modelSelectionConfig"]);ke!=null&&c(s,["modelConfig"],ke);const Me=u(t,["safetySettings"]);if(o!==void 0&&Me!=null){let B=Me;Array.isArray(B)&&(B=B.map(ye=>ye)),c(o,["safetySettings"],B)}const De=u(t,["tools"]);if(o!==void 0&&De!=null){let B=$l(De);Array.isArray(B)&&(B=B.map(ye=>Sg(ql(ye)))),c(o,["tools"],B)}const ve=u(t,["toolConfig"]);o!==void 0&&ve!=null&&c(o,["toolConfig"],ve);const tt=u(t,["labels"]);o!==void 0&&tt!=null&&c(o,["labels"],tt);const _e=u(t,["cachedContent"]);o!==void 0&&_e!=null&&c(o,["cachedContent"],so(n,_e));const Qe=u(t,["responseModalities"]);Qe!=null&&c(s,["responseModalities"],Qe);const Ie=u(t,["mediaResolution"]);Ie!=null&&c(s,["mediaResolution"],Ie);const ct=u(t,["speechConfig"]);ct!=null&&c(s,["speechConfig"],ad(ct));const bt=u(t,["audioTimestamp"]);bt!=null&&c(s,["audioTimestamp"],bt);const Rt=u(t,["thinkingConfig"]);Rt!=null&&c(s,["thinkingConfig"],Rt);const xe=u(t,["imageConfig"]);if(xe!=null&&c(s,["imageConfig"],cE(xe)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Em(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>br(y))),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&c(o,["generationConfig"],LC(n,d,o)),o}function _m(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&c(o,["generationConfig"],PC(n,d,o)),o}function wm(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>lC(m))),c(t,["candidates"],v)}const r=u(n,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const d=u(n,["promptFeedback"]);d!=null&&c(t,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(t,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(t,["usageMetadata"],y),t}function Am(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(x=>x)),c(t,["candidates"],m)}const r=u(n,["createTime"]);r!=null&&c(t,["createTime"],r);const d=u(n,["modelVersion"]);d!=null&&c(t,["modelVersion"],d);const h=u(n,["promptFeedback"]);h!=null&&c(t,["promptFeedback"],h);const y=u(n,["responseId"]);y!=null&&c(t,["responseId"],y);const v=u(n,["usageMetadata"]);return v!=null&&c(t,["usageMetadata"],v),t}function GC(n,t){const o={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(n,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["aspectRatio"]);t!==void 0&&r!=null&&c(t,["parameters","aspectRatio"],r);const d=u(n,["guidanceScale"]);if(t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=u(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&c(t,["parameters","safetySetting"],h);const y=u(n,["personGeneration"]);t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y);const v=u(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&c(t,["parameters","includeSafetyAttributes"],v);const m=u(n,["includeRaiReason"]);t!==void 0&&m!=null&&c(t,["parameters","includeRaiReason"],m);const x=u(n,["language"]);t!==void 0&&x!=null&&c(t,["parameters","language"],x);const S=u(n,["outputMimeType"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","mimeType"],S);const T=u(n,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&c(t,["parameters","outputOptions","compressionQuality"],T),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=u(n,["imageSize"]);if(t!==void 0&&A!=null&&c(t,["parameters","sampleImageSize"],A),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function HC(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const d=u(n,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const h=u(n,["aspectRatio"]);t!==void 0&&h!=null&&c(t,["parameters","aspectRatio"],h);const y=u(n,["guidanceScale"]);t!==void 0&&y!=null&&c(t,["parameters","guidanceScale"],y);const v=u(n,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const m=u(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&c(t,["parameters","includeSafetyAttributes"],S);const T=u(n,["includeRaiReason"]);t!==void 0&&T!=null&&c(t,["parameters","includeRaiReason"],T);const A=u(n,["language"]);t!==void 0&&A!=null&&c(t,["parameters","language"],A);const N=u(n,["outputMimeType"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","mimeType"],N);const O=u(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&c(t,["parameters","outputOptions","compressionQuality"],O);const F=u(n,["addWatermark"]);t!==void 0&&F!=null&&c(t,["parameters","addWatermark"],F);const K=u(n,["labels"]);t!==void 0&&K!=null&&c(t,["labels"],K);const le=u(n,["imageSize"]);t!==void 0&&le!=null&&c(t,["parameters","sampleImageSize"],le);const ce=u(n,["enhancePrompt"]);return t!==void 0&&ce!=null&&c(t,["parameters","enhancePrompt"],ce),o}function VC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["config"]);return d!=null&&GC(d,o),o}function BC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["config"]);return d!=null&&HC(d,o),o}function FC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>eE(h))),c(t,["generatedImages"],d)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],xg(r)),t}function OC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>Sr(h))),c(t,["generatedImages"],d)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],bg(r)),t}function qC(n,t){const o={},s=u(n,["numberOfVideos"]);if(t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(n,["durationSeconds"]);if(t!==void 0&&r!=null&&c(t,["parameters","durationSeconds"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["aspectRatio"]);t!==void 0&&d!=null&&c(t,["parameters","aspectRatio"],d);const h=u(n,["resolution"]);t!==void 0&&h!=null&&c(t,["parameters","resolution"],h);const y=u(n,["personGeneration"]);if(t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=u(n,["negativePrompt"]);t!==void 0&&v!=null&&c(t,["parameters","negativePrompt"],v);const m=u(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&c(t,["parameters","enhancePrompt"],m),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=u(n,["lastFrame"]);t!==void 0&&x!=null&&c(t,["instances[0]","lastFrame"],Tr(x));const S=u(n,["referenceImages"]);if(t!==void 0&&S!=null){let T=S;Array.isArray(T)&&(T=T.map(A=>jE(A))),c(t,["instances[0]","referenceImages"],T)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function $C(n,t){const o={},s=u(n,["numberOfVideos"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const d=u(n,["fps"]);t!==void 0&&d!=null&&c(t,["parameters","fps"],d);const h=u(n,["durationSeconds"]);t!==void 0&&h!=null&&c(t,["parameters","durationSeconds"],h);const y=u(n,["seed"]);t!==void 0&&y!=null&&c(t,["parameters","seed"],y);const v=u(n,["aspectRatio"]);t!==void 0&&v!=null&&c(t,["parameters","aspectRatio"],v);const m=u(n,["resolution"]);t!==void 0&&m!=null&&c(t,["parameters","resolution"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["pubsubTopic"]);t!==void 0&&S!=null&&c(t,["parameters","pubsubTopic"],S);const T=u(n,["negativePrompt"]);t!==void 0&&T!=null&&c(t,["parameters","negativePrompt"],T);const A=u(n,["enhancePrompt"]);t!==void 0&&A!=null&&c(t,["parameters","enhancePrompt"],A);const N=u(n,["generateAudio"]);t!==void 0&&N!=null&&c(t,["parameters","generateAudio"],N);const O=u(n,["lastFrame"]);t!==void 0&&O!=null&&c(t,["instances[0]","lastFrame"],Ii(O));const F=u(n,["referenceImages"]);if(t!==void 0&&F!=null){let ce=F;Array.isArray(ce)&&(ce=ce.map(ke=>YE(ke))),c(t,["instances[0]","referenceImages"],ce)}const K=u(n,["mask"]);t!==void 0&&K!=null&&c(t,["instances[0]","mask"],$E(K));const le=u(n,["compressionQuality"]);return t!==void 0&&le!=null&&c(t,["parameters","compressionQuality"],le),o}function jC(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response","generateVideoResponse"]);return h!=null&&c(t,["response"],XC(h)),t}function YC(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],QC(h)),t}function JC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["image"]);d!=null&&c(o,["instances[0]","image"],Tr(d));const h=u(t,["video"]);h!=null&&c(o,["instances[0]","video"],Tg(h));const y=u(t,["source"]);y!=null&&ZC(y,o);const v=u(t,["config"]);return v!=null&&qC(v,o),o}function KC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["image"]);d!=null&&c(o,["instances[0]","image"],Ii(d));const h=u(t,["video"]);h!=null&&c(o,["instances[0]","video"],Cg(h));const y=u(t,["source"]);y!=null&&WC(y,o);const v=u(t,["config"]);return v!=null&&$C(v,o),o}function XC(n){const t={},o=u(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>nE(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function QC(n){const t={},o=u(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>iE(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function ZC(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Tr(r));const d=u(n,["video"]);return t!==void 0&&d!=null&&c(t,["instances[0]","video"],Tg(d)),o}function WC(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Ii(r));const d=u(n,["video"]);return t!==void 0&&d!=null&&c(t,["instances[0]","video"],Cg(d)),o}function eE(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["image"],dE(o));const s=u(n,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(n,["_self"]);return r!=null&&c(t,["safetyAttributes"],xg(r)),t}function Sr(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["image"],vg(o));const s=u(n,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(n,["_self"]);r!=null&&c(t,["safetyAttributes"],bg(r));const d=u(n,["prompt"]);return d!=null&&c(t,["enhancedPrompt"],d),t}function tE(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["mask"],vg(o));const s=u(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(t,["labels"],r)}return t}function nE(n){const t={},o=u(n,["video"]);return o!=null&&c(t,["video"],OE(o)),t}function iE(n){const t={},o=u(n,["_self"]);return o!=null&&c(t,["video"],qE(o)),t}function oE(n){const t={},o=u(n,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const d=u(n,["candidateCount"]);d!=null&&c(t,["candidateCount"],d);const h=u(n,["enableAffectiveDialog"]);h!=null&&c(t,["enableAffectiveDialog"],h);const y=u(n,["frequencyPenalty"]);y!=null&&c(t,["frequencyPenalty"],y);const v=u(n,["logprobs"]);v!=null&&c(t,["logprobs"],v);const m=u(n,["maxOutputTokens"]);m!=null&&c(t,["maxOutputTokens"],m);const x=u(n,["mediaResolution"]);x!=null&&c(t,["mediaResolution"],x);const S=u(n,["presencePenalty"]);S!=null&&c(t,["presencePenalty"],S);const T=u(n,["responseLogprobs"]);T!=null&&c(t,["responseLogprobs"],T);const A=u(n,["responseMimeType"]);A!=null&&c(t,["responseMimeType"],A);const N=u(n,["responseModalities"]);N!=null&&c(t,["responseModalities"],N);const O=u(n,["responseSchema"]);O!=null&&c(t,["responseSchema"],O);const F=u(n,["routingConfig"]);F!=null&&c(t,["routingConfig"],F);const K=u(n,["seed"]);K!=null&&c(t,["seed"],K);const le=u(n,["speechConfig"]);le!=null&&c(t,["speechConfig"],le);const ce=u(n,["stopSequences"]);ce!=null&&c(t,["stopSequences"],ce);const ke=u(n,["temperature"]);ke!=null&&c(t,["temperature"],ke);const Me=u(n,["thinkingConfig"]);Me!=null&&c(t,["thinkingConfig"],Me);const De=u(n,["topK"]);De!=null&&c(t,["topK"],De);const ve=u(n,["topP"]);if(ve!=null&&c(t,["topP"],ve),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function lE(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function sE(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function aE(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function rE(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function uE(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function cE(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);s!=null&&c(t,["imageSize"],s);const r=u(n,["outputMimeType"]);r!=null&&c(t,["imageOutputOptions","mimeType"],r);const d=u(n,["outputCompressionQuality"]);return d!=null&&c(t,["imageOutputOptions","compressionQuality"],d),t}function dE(n){const t={},o=u(n,["bytesBase64Encoded"]);o!=null&&c(t,["imageBytes"],Uo(o));const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function vg(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["imageBytes"],Uo(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Tr(n){const t={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(n,["imageBytes"]);o!=null&&c(t,["bytesBase64Encoded"],Uo(o));const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Ii(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["imageBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Uo(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function fE(n,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const d=u(t,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const h=u(t,["filter"]);o!==void 0&&h!=null&&c(o,["_query","filter"],h);const y=u(t,["queryBase"]);return o!==void 0&&y!=null&&c(o,["_url","models_url"],dg(n,y)),s}function pE(n,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const d=u(t,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const h=u(t,["filter"]);o!==void 0&&h!=null&&c(o,["_query","filter"],h);const y=u(t,["queryBase"]);return o!==void 0&&y!=null&&c(o,["_url","models_url"],dg(n,y)),s}function hE(n,t){const o={},s=u(t,["config"]);return s!=null&&fE(n,s,o),o}function mE(n,t){const o={},s=u(t,["config"]);return s!=null&&pE(n,s,o),o}function gE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let d=fg(r);Array.isArray(d)&&(d=d.map(h=>Oc(h))),c(t,["models"],d)}return t}function yE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let d=fg(r);Array.isArray(d)&&(d=d.map(h=>qc(h))),c(t,["models"],d)}return t}function vE(n){const t={},o=u(n,["maskMode"]);o!=null&&c(t,["maskMode"],o);const s=u(n,["segmentationClasses"]);s!=null&&c(t,["maskClasses"],s);const r=u(n,["maskDilation"]);return r!=null&&c(t,["dilation"],r),t}function Oc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);r!=null&&c(t,["description"],r);const d=u(n,["version"]);d!=null&&c(t,["version"],d);const h=u(n,["_self"]);h!=null&&c(t,["tunedModelInfo"],DE(h));const y=u(n,["inputTokenLimit"]);y!=null&&c(t,["inputTokenLimit"],y);const v=u(n,["outputTokenLimit"]);v!=null&&c(t,["outputTokenLimit"],v);const m=u(n,["supportedGenerationMethods"]);m!=null&&c(t,["supportedActions"],m);const x=u(n,["temperature"]);x!=null&&c(t,["temperature"],x);const S=u(n,["maxTemperature"]);S!=null&&c(t,["maxTemperature"],S);const T=u(n,["topP"]);T!=null&&c(t,["topP"],T);const A=u(n,["topK"]);A!=null&&c(t,["topK"],A);const N=u(n,["thinking"]);return N!=null&&c(t,["thinking"],N),t}function qc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);r!=null&&c(t,["description"],r);const d=u(n,["versionId"]);d!=null&&c(t,["version"],d);const h=u(n,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(T=>kC(T))),c(t,["endpoints"],S)}const y=u(n,["labels"]);y!=null&&c(t,["labels"],y);const v=u(n,["_self"]);v!=null&&c(t,["tunedModelInfo"],UE(v));const m=u(n,["defaultCheckpointId"]);m!=null&&c(t,["defaultCheckpointId"],m);const x=u(n,["checkpoints"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(T=>T)),c(t,["checkpoints"],S)}return t}function xE(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],IC(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],zC(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],oC(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function bE(n){const t={},o=u(n,["productImage"]);return o!=null&&c(t,["image"],Ii(o)),t}function SE(n,t){const o={},s=u(n,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["baseSteps"]);t!==void 0&&r!=null&&c(t,["parameters","baseSteps"],r);const d=u(n,["outputGcsUri"]);t!==void 0&&d!=null&&c(t,["parameters","storageUri"],d);const h=u(n,["seed"]);t!==void 0&&h!=null&&c(t,["parameters","seed"],h);const y=u(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&c(t,["parameters","safetySetting"],y);const v=u(n,["personGeneration"]);t!==void 0&&v!=null&&c(t,["parameters","personGeneration"],v);const m=u(n,["addWatermark"]);t!==void 0&&m!=null&&c(t,["parameters","addWatermark"],m);const x=u(n,["outputMimeType"]);t!==void 0&&x!=null&&c(t,["parameters","outputOptions","mimeType"],x);const S=u(n,["outputCompressionQuality"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","compressionQuality"],S);const T=u(n,["enhancePrompt"]);t!==void 0&&T!=null&&c(t,["parameters","enhancePrompt"],T);const A=u(n,["labels"]);return t!==void 0&&A!=null&&c(t,["labels"],A),o}function TE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["source"]);r!=null&&EE(r,o);const d=u(t,["config"]);return d!=null&&SE(d,o),o}function CE(n){const t={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Sr(r))),c(t,["generatedImages"],s)}return t}function EE(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["personImage"]);t!==void 0&&r!=null&&c(t,["instances[0]","personImage","image"],Ii(r));const d=u(n,["productImages"]);if(t!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>bE(y))),c(t,["instances[0]","productImages"],h)}return o}function _E(n){const t={},o=u(n,["referenceImage"]);o!=null&&c(t,["referenceImage"],Ii(o));const s=u(n,["referenceId"]);s!=null&&c(t,["referenceId"],s);const r=u(n,["referenceType"]);r!=null&&c(t,["referenceType"],r);const d=u(n,["maskImageConfig"]);d!=null&&c(t,["maskImageConfig"],vE(d));const h=u(n,["controlImageConfig"]);h!=null&&c(t,["controlImageConfig"],dC(h));const y=u(n,["styleImageConfig"]);y!=null&&c(t,["styleImageConfig"],y);const v=u(n,["subjectImageConfig"]);return v!=null&&c(t,["subjectImageConfig"],v),t}function xg(n){const t={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(n,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function bg(n){const t={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(n,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function wE(n){const t={},o=u(n,["category"]);if(o!=null&&c(t,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function AE(n){const t={},o=u(n,["image"]);return o!=null&&c(t,["image"],Ii(o)),t}function NE(n,t){const o={},s=u(n,["mode"]);t!==void 0&&s!=null&&c(t,["parameters","mode"],s);const r=u(n,["maxPredictions"]);t!==void 0&&r!=null&&c(t,["parameters","maxPredictions"],r);const d=u(n,["confidenceThreshold"]);t!==void 0&&d!=null&&c(t,["parameters","confidenceThreshold"],d);const h=u(n,["maskDilation"]);t!==void 0&&h!=null&&c(t,["parameters","maskDilation"],h);const y=u(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&c(t,["parameters","binaryColorThreshold"],y);const v=u(n,["labels"]);return t!==void 0&&v!=null&&c(t,["labels"],v),o}function ME(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["source"]);r!=null&&kE(r,o);const d=u(t,["config"]);return d!=null&&NE(d,o),o}function RE(n){const t={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>tE(r))),c(t,["generatedMasks"],s)}return t}function kE(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Ii(r));const d=u(n,["scribbleImage"]);return t!==void 0&&d!=null&&c(t,["instances[0]","scribble"],AE(d)),o}function IE(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],DC(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function zE(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],aE(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],rE(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function Sg(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>UC(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function DE(n){const t={},o=u(n,["baseModel"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function UE(n){const t={},o=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function LE(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const d=u(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),o}function PE(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const d=u(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),o}function GE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","name"],Gt(n,s));const r=u(t,["config"]);return r!=null&&LE(r,o),o}function HE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&PE(r,o),o}function VE(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&c(t,["parameters","safetySetting"],r);const d=u(n,["personGeneration"]);t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d);const h=u(n,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const y=u(n,["outputMimeType"]);t!==void 0&&y!=null&&c(t,["parameters","outputOptions","mimeType"],y);const v=u(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&c(t,["parameters","outputOptions","compressionQuality"],v);const m=u(n,["enhanceInputImage"]);t!==void 0&&m!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=u(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const S=u(n,["labels"]);t!==void 0&&S!=null&&c(t,["labels"],S);const T=u(n,["numberOfImages"]);t!==void 0&&T!=null&&c(t,["parameters","sampleCount"],T);const A=u(n,["mode"]);return t!==void 0&&A!=null&&c(t,["parameters","mode"],A),o}function BE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["image"]);r!=null&&c(o,["instances[0]","image"],Ii(r));const d=u(t,["upscaleFactor"]);d!=null&&c(o,["parameters","upscaleConfig","upscaleFactor"],d);const h=u(t,["config"]);return h!=null&&VE(h,o),o}function FE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Sr(d))),c(t,["generatedImages"],r)}return t}function OE(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&c(t,["videoBytes"],Uo(s));const r=u(n,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function qE(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],Uo(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function $E(n){const t={},o=u(n,["image"]);o!=null&&c(t,["_self"],Ii(o));const s=u(n,["maskMode"]);return s!=null&&c(t,["maskMode"],s),t}function jE(n){const t={},o=u(n,["image"]);o!=null&&c(t,["image"],Tr(o));const s=u(n,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function YE(n){const t={},o=u(n,["image"]);o!=null&&c(t,["image"],Ii(o));const s=u(n,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function Tg(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["videoBytes"]);s!=null&&c(t,["encodedVideo"],Uo(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["encoding"],r),t}function Cg(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["videoBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Uo(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function JE(n,t){const o={},s=u(n,["displayName"]);return t!==void 0&&s!=null&&c(t,["displayName"],s),o}function KE(n){const t={},o=u(n,["config"]);return o!=null&&JE(o,t),t}function XE(n,t){const o={},s=u(n,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function QE(n){const t={},o=u(n,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(n,["config"]);return s!=null&&XE(s,t),t}function ZE(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function WE(n,t){const o={},s=u(n,["customMetadata"]);if(t!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["customMetadata"],d)}const r=u(n,["chunkingConfig"]);return t!==void 0&&r!=null&&c(t,["chunkingConfig"],r),o}function e_(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],n_(h)),t}function t_(n){const t={},o=u(n,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(n,["fileName"]);s!=null&&c(t,["fileName"],s);const r=u(n,["config"]);return r!=null&&WE(r,t),t}function n_(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function i_(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function o_(n){const t={},o=u(n,["config"]);return o!=null&&i_(o,t),t}function l_(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["fileSearchStores"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["fileSearchStores"],d)}return t}function Eg(n,t){const o={},s=u(n,["mimeType"]);t!==void 0&&s!=null&&c(t,["mimeType"],s);const r=u(n,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const d=u(n,["customMetadata"]);if(t!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),c(t,["customMetadata"],y)}const h=u(n,["chunkingConfig"]);return t!==void 0&&h!=null&&c(t,["chunkingConfig"],h),o}function s_(n){const t={},o=u(n,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(n,["config"]);return s!=null&&Eg(s,t),t}function a_(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}const r_="Content-Type",u_="X-Server-Timeout",c_="User-Agent",$c="x-goog-api-client",d_="1.34.0",f_=`google-genai-sdk/${d_}`,p_="v1beta1",h_="v1beta";class m_{constructor(t){var o,s;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:p_,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:h_,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let d={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=t.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.unaryApiCall(r,d,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,d]of Object.entries(o))typeof d=="object"?s[r]=Object.assign(Object.assign({},s[r]),d):d!==void 0&&(s[r]=d);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=t.body,d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.streamApiCall(r,d,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const d=new AbortController,h=d.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>d.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{d.abort()}),t.signal=h}return o&&o.extraBody!==null&&g_(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Nm(r),new Vc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Nm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Ri(this,arguments,function*(){var s;const r=(s=t?.body)===null||s===void 0?void 0:s.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield vt(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const S=d.decode(x,{stream:!0});try{const N=JSON.parse(S);if("error"in N){const O=JSON.parse(JSON.stringify(N.error)),F=O.status,K=O.code,le=`got status: ${F}. ${JSON.stringify(N)}`;if(K>=400&&K<600)throw new xr({message:le,status:K})}}catch(N){if(N.name==="ApiError")throw N}h+=S;let T=-1,A=0;for(;;){T=-1,A=0;for(const F of v){const K=h.indexOf(F);K!==-1&&(T===-1||K<T)&&(T=K,A=F.length)}if(T===-1)break;const N=h.substring(0,T);h=h.substring(T+A);const O=N.trim();if(O.startsWith(y)){const F=O.substring(y.length).trim();try{const K=new Response(F,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield vt(new Vc(K))}catch(K){throw new Error(`exception parsing stream chunk ${F}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=f_+" "+this.clientOptions.userAgentExtra;return t[c_]=o,t[$c]=o,t[r_]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,d]of Object.entries(t.headers))s.append(r,d);t.timeout&&t.timeout>0&&s.append(u_,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,h=await d.stat(t);r.sizeBytes=String(h.size);const y=(s=o?.mimeType)!==null&&s!==void 0?s:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=$e("upload/v1beta/files",v._url),S=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return d.upload(t,S,this)}async uploadFileToFileSearchStore(t,o,s){var r;const d=this.clientOptions.uploader,h=await d.stat(o),y=String(h.size),v=(r=s?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),S={};s!=null&&Eg(s,S);const T=await this.fetchUploadUrl(m,y,v,x,S,s?.httpOptions);return d.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,d,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(d),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Nm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let s;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new xr({message:r,status:o}):new Error(r)}}function g_(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const d=JSON.parse(n.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))o=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(d,h){const y=Object.assign({},d);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=s(o,t);n.body=JSON.stringify(r)}const y_="mcp_used/unknown";let v_=!1;function _g(n){for(const t of n)if(x_(t)||typeof t=="object"&&"inputSchema"in t)return!0;return v_}function wg(n){var t;const o=(t=n[$c])!==null&&t!==void 0?t:"";n[$c]=(o+` ${y_}`).trimStart()}function x_(n){return n!==null&&typeof n=="object"&&n instanceof ud}function b_(n){return Ri(this,arguments,function*(o,s=100){let r,d=0;for(;d<s;){const h=yield vt(o.listTools({cursor:r}));for(const y of h.tools)yield yield vt(y),d++;if(!h.nextCursor)break;r=h.nextCursor}})}class ud{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new ud(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const d={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,ki(b_(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const S=r;h.push(S);const T=S.name;if(d[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);d[T]=x}}catch(S){o={error:S}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),Z1(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const h=await r.callTool({name:s.name,arguments:s.args},void 0,d);o.push({functionResponse:{name:s.name,response:h.isError?{error:h}:h}})}return o}}async function S_(n,t,o){const s=new q1;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class T_{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),h=__(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(ce=>{m=ce}),S=t.callbacks,T=function(){m({})},A=this.apiClient,N={onopen:T,onmessage:ce=>{S_(A,S.onmessage,ce)},onerror:(o=S?.onerror)!==null&&o!==void 0?o:function(ce){},onclose:(s=S?.onclose)!==null&&s!==void 0?s:function(ce){}},O=this.webSocketFactory.create(v,E_(h),N);O.connect(),await x;const le={setup:{model:Gt(this.apiClient,t.model)}};return O.send(JSON.stringify(le)),new C_(O,this.apiClient)}}class C_{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=KT(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=JT(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Gl.PLAY)}pause(){this.sendPlaybackControl(Gl.PAUSE)}stop(){this.sendPlaybackControl(Gl.STOP)}resetContext(){this.sendPlaybackControl(Gl.RESET_CONTEXT)}close(){this.conn.close()}}function E_(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function __(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const w_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function A_(n,t,o){const s=new O1;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const d=JSON.parse(r);if(n.isVertexAI()){const h=ZT(d);Object.assign(s,h)}else Object.assign(s,d);t(s)}class N_{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new T_(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,d,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const S=this.apiClient.getHeaders();t.config&&t.config.tools&&_g(t.config.tools)&&wg(S);const T=I_(S);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const _e=this.apiClient.getApiKey();let Qe="BidiGenerateContent",Ie="key";_e?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Qe="BidiGenerateContentConstrained",Ie="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Qe}?${Ie}=${_e}`}let A=()=>{};const N=new Promise(_e=>{A=_e}),O=t.callbacks,F=function(){var _e;(_e=O?.onopen)===null||_e===void 0||_e.call(O),A({})},K=this.apiClient,le={onopen:F,onmessage:_e=>{A_(K,O.onmessage,_e)},onerror:(o=O?.onerror)!==null&&o!==void 0?o:function(_e){},onclose:(s=O?.onclose)!==null&&s!==void 0?s:function(_e){}},ce=this.webSocketFactory.create(x,k_(T),le);ce.connect(),await N;let ke=Gt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&ke.startsWith("publishers/")){const _e=this.apiClient.getProject(),Qe=this.apiClient.getLocation();ke=`projects/${_e}/locations/${Qe}/`+ke}let Me={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[dr.AUDIO]}:t.config.responseModalities=[dr.AUDIO]),!((d=t.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const De=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],ve=[];for(const _e of De)if(this.isCallableTool(_e)){const Qe=_e;ve.push(await Qe.tool())}else ve.push(_e);ve.length>0&&(t.config.tools=ve);const tt={model:ke,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Me=YT(this.apiClient,tt):Me=jT(this.apiClient,tt),delete Me.config,ce.send(JSON.stringify(Me)),new R_(ce,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const M_={turnComplete:!0};class R_{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=xi(o.turns),t.isVertexAI()||(s=s.map(r=>br(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const d of s){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!t.isVertexAI()&&!("id"in d))throw new Error(w_)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},M_),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:QT(t)}:o={realtimeInput:XT(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function k_(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function I_(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const Mm=10;function Rm(n){var t,o,s;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if(Ol(h)){r=!0;break}if(!r)return!0;const d=(s=n?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function Ol(n){return"callTool"in n&&typeof n.callTool=="function"}function z_(n){var t,o,s;return(s=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>Ol(r)))!==null&&s!==void 0?s:!1}function km(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((s,r)=>{if(Ol(s))return;const d=s;d.functionDeclarations&&d.functionDeclarations.length>0&&o.push(r)}),o}function Im(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class D_ extends lo{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,d,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!z_(o)||Rm(o.config))return await this.generateContentInternal(v);const m=km(o);if(m.length>0){const O=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let x,S;const T=xi(v.contents),A=(d=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:Mm;let N=0;for(;N<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const O=x.candidates[0].content,F=[];for(const K of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if(Ol(K)){const ce=await K.callTool(x.functionCalls);F.push(...ce)}N++,S={role:"user",parts:F},v.contents=xi(v.contents),v.contents.push(O),v.contents.push(S),Im(v.config)&&(T.push(O),T.push(S))}return Im(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var s,r,d,h,y;if(this.maybeMoveToResponseJsonSchem(o),Rm(o.config)){const S=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(S)}const v=km(o);if(v.length>0){const S=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(d=(r=(s=o?.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||d===void 0?void 0:d.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let d;const h=[];if(s?.generatedImages)for(const v of s.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=v?.safetyAttributes:h.push(v);let y;return d?y={generatedImages:h,positivePromptSafetyAttributes:d,sdkHttpResponse:s.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:s.sdkHttpResponse},y}),this.list=async o=>{var s;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((s=h.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new tl(oo.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,d,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(d=o.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const d=(o=t.config)===null||o===void 0?void 0:o.tools;if(!d)return t;const h=await Promise.all(d.map(async v=>Ol(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&_g(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),wg(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,s,r;const d=new Map;for(const h of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Ol(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(d.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);d.set(m.name,y)}}return d}async processAfcStream(t){var o,s,r;const d=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Mm;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,S){return Ri(this,arguments,function*(){for(var T,A,N,O,F,K;y<d;){h&&(y++,h=!1);const Me=yield vt(m.processParamsMaybeAddMcpUsage(S)),De=yield vt(m.generateContentStreamInternal(Me)),ve=[],tt=[];try{for(var le=!0,ce=(A=void 0,ki(De)),ke;ke=yield vt(ce.next()),T=ke.done,!T;le=!0){O=ke.value,le=!1;const _e=O;if(yield yield vt(_e),_e.candidates&&(!((F=_e.candidates[0])===null||F===void 0)&&F.content)){tt.push(_e.candidates[0].content);for(const Qe of(K=_e.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(y<d&&Qe.functionCall){if(!Qe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Qe.functionCall.name)){const Ie=yield vt(x.get(Qe.functionCall.name).callTool([Qe.functionCall]));ve.push(...Ie)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Qe.functionCall.name}`)}}}}catch(_e){A={error:_e}}finally{try{!le&&!T&&(N=ce.return)&&(yield vt(N.call(ce)))}finally{if(A)throw A.error}}if(ve.length>0){h=!0;const _e=new Ds;_e.candidates=[{content:{role:"user",parts:ve}}],yield yield vt(_e);const Qe=[];Qe.push(...tt),Qe.push({role:"user",parts:ve});const Ie=xi(S.contents).concat(Qe);S.contents=Ie}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_m(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Am(x),T=new Ds;return Object.assign(T,S),T})}else{const m=Em(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=wm(x),T=new Ds;return Object.assign(T,S),T})}}async generateContentStreamInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_m(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),h.then(function(S){return Ri(this,arguments,function*(){var T,A,N,O;try{for(var F=!0,K=ki(S),le;le=yield vt(K.next()),T=le.done,!T;F=!0){O=le.value,F=!1;const ce=O,ke=Am(yield vt(ce.json()));ke.sdkHttpResponse={headers:ce.headers};const Me=new Ds;Object.assign(Me,ke),yield yield vt(Me)}}catch(ce){A={error:ce}}finally{try{!F&&!T&&(N=K.return)&&(yield vt(N.call(K)))}finally{if(A)throw A.error}}})})}else{const m=Em(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}),h.then(function(S){return Ri(this,arguments,function*(){var T,A,N,O;try{for(var F=!0,K=ki(S),le;le=yield vt(K.next()),T=le.done,!T;F=!0){O=le.value,F=!1;const ce=O,ke=wm(yield vt(ce.json()));ke.sdkHttpResponse={headers:ce.headers};const Me=new Ds;Object.assign(Me,ke),yield yield vt(Me)}}catch(ce){A={error:ce}}finally{try{!F&&!T&&(N=K.return)&&(yield vt(N.call(K)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=NC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=RC(x),T=new am;return Object.assign(T,S),T})}else{const m=AC(this.apiClient,t);return y=$e("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=MC(x),T=new am;return Object.assign(T,S),T})}}async generateImagesInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=BC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=OC(x),T=new rm;return Object.assign(T,S),T})}else{const m=VC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=FC(x),T=new rm;return Object.assign(T,S),T})}}async editImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=CC(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=EC(v),x=new I1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=BE(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=FE(v),x=new z1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=TE(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=CE(v),x=new D1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=ME(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=RE(v),x=new U1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=sE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>qc(x))}else{const m=lE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Oc(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=mE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=yE(x),T=new um;return Object.assign(T,S),T})}else{const m=hE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=gE(x),T=new um;return Object.assign(T,S),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=HE(this.apiClient,t);return y=$e("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>qc(x))}else{const m=GE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Oc(x))}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xC(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=SC(x),T=new cm;return Object.assign(T,S),T})}else{const m=vC(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=bC(x),T=new cm;return Object.assign(T,S),T})}}async countTokens(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=mC(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=yC(x),T=new dm;return Object.assign(T,S),T})}else{const m=hC(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=gC(x),T=new dm;return Object.assign(T,S),T})}}async computeTokens(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=aC(this.apiClient,t);return d=$e("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=rC(v),x=new L1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=KC(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>{const S=YC(x),T=new fr;return Object.assign(T,S),T})}else{const m=JC(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>{const S=jC(x),T=new fr;return Object.assign(T,S),T})}}}class U_ extends lo{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=w1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h}else{const m=_1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=v1(t);return d=$e("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function L_(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function P_(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>j_(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function G_(n,t,o){const s={},r=u(t,["expireTime"]);o!==void 0&&r!=null&&c(o,["expireTime"],r);const d=u(t,["newSessionExpireTime"]);o!==void 0&&d!=null&&c(o,["newSessionExpireTime"],d);const h=u(t,["uses"]);o!==void 0&&h!=null&&c(o,["uses"],h);const y=u(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&c(o,["bidiGenerateContentSetup"],$_(n,y));const v=u(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&c(o,["fieldMask"],v),s}function H_(n,t){const o={},s=u(t,["config"]);return s!=null&&c(o,["config"],G_(n,s,o)),o}function V_(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function B_(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function F_(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function O_(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function q_(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],rd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],P_(zn(N)));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let De=$l(O);Array.isArray(De)&&(De=De.map(ve=>J_(ql(ve)))),c(t,["setup","tools"],De)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],Y_(F));const K=u(n,["inputAudioTranscription"]);t!==void 0&&K!=null&&c(t,["setup","inputAudioTranscription"],K);const le=u(n,["outputAudioTranscription"]);t!==void 0&&le!=null&&c(t,["setup","outputAudioTranscription"],le);const ce=u(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&c(t,["setup","realtimeInputConfig"],ce);const ke=u(n,["contextWindowCompression"]);t!==void 0&&ke!=null&&c(t,["setup","contextWindowCompression"],ke);const Me=u(n,["proactivity"]);if(t!==void 0&&Me!=null&&c(t,["setup","proactivity"],Me),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function $_(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],q_(r,o)),o}function j_(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],V_(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],B_(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],L_(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function Y_(n){const t={},o=u(n,["handle"]);if(o!=null&&c(t,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function J_(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],F_(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],O_(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function K_(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const s=n[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(d=>`${o}.${d}`);t.push(...r)}else t.push(o)}return t.join(",")}function X_(n,t){let o=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const d=s.setup;typeof d=="object"&&d!==null?(n.bidiGenerateContentSetup=d,o=d):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const d=K_(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)d?n.fieldMask=d:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];d&&v.push(d),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Q_ extends lo{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=H_(this.apiClient,t);d=$e("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=X_(y,t.config);return r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function Z_(n,t){const o={},s=u(n,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function W_(n){const t={},o=u(n,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(n,["config"]);return s!=null&&Z_(s,t),t}function ew(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function tw(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function nw(n){const t={},o=u(n,["parent"]);o!=null&&c(t,["_url","parent"],o);const s=u(n,["config"]);return s!=null&&tw(s,t),t}function iw(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["documents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["documents"],d)}return t}class ow extends lo{constructor(t){super(),this.apiClient=t,this.list=async o=>new tl(oo.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=ew(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=W_(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=nw(t);return d=$e("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=iw(v),x=new P1;return Object.assign(x,m),x})}}}class lw extends lo{constructor(t,o=new ow(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new tl(oo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=KE(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=ZE(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QE(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=o_(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=l_(v),x=new G1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=s_(t);return d=$e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=a_(v),x=new H1;return Object.assign(x,m),x})}}async importFile(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=t_(t);return d=$e("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=e_(v),x=new id;return Object.assign(x,m),x})}}}let Ag=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Ag=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const sw=()=>Ag();function jc(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Yc=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class bi extends Error{}class Pn extends bi{constructor(t,o,s,r){super(`${Pn.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Cr({message:s,cause:Yc(o)});const d=o;return t===400?new Mg(t,d,s,r):t===401?new Rg(t,d,s,r):t===403?new kg(t,d,s,r):t===404?new Ig(t,d,s,r):t===409?new zg(t,d,s,r):t===422?new Dg(t,d,s,r):t===429?new Ug(t,d,s,r):t>=500?new Lg(t,d,s,r):new Pn(t,d,s,r)}}class Jc extends Pn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Cr extends Pn{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Ng extends Cr{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Mg extends Pn{}class Rg extends Pn{}class kg extends Pn{}class Ig extends Pn{}class zg extends Pn{}class Dg extends Pn{}class Ug extends Pn{}class Lg extends Pn{}const aw=/^[a-z][a-z0-9+.-]*:/i,rw=n=>aw.test(n);let Kc=n=>(Kc=Array.isArray,Kc(n));const uw=Kc;let cw=uw;const zm=cw;function dw(n){if(!n)return!0;for(const t in n)return!1;return!0}function fw(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const pw=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new bi(`${n} must be an integer`);if(t<0)throw new bi(`${n} must be a positive integer`);return t},hw=n=>{try{return JSON.parse(n)}catch{return}};const mw=n=>new Promise(t=>setTimeout(t,n));const Ul="0.0.1";function gw(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const yw=()=>{var n,t,o,s,r;const d=gw();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":Um(Deno.build.os),"X-Stainless-Arch":Dm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":Um((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Dm((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=vw();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vw(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,d=s[2]||0,h=s[3]||0;return{browser:t,version:`${r}.${d}.${h}`}}}return null}const Dm=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Um=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Za;const xw=()=>Za??(Za=yw());function bw(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Pg(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function Sw(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Pg({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Gg(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Tw(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}const Cw=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const Hg=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kc(n,t,o){return Hg(),new File(n,t??"unknown_file",o)}function Ew(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const _w=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const Vg=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",ww=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Vg(n),Aw=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Nw(n,t,o){if(Hg(),n=await n,ww(n))return n instanceof File?n:kc([await n.arrayBuffer()],n.name);if(Aw(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),kc(await Xc(r),t,o)}const s=await Xc(n);if(t||(t=Ew(n)),!o?.type){const r=s.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return kc(s,t,o)}async function Xc(n){var t,o,s,r,d;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(Vg(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(_w(n))try{for(var y=!0,v=ki(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await Xc(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const x=(d=n?.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${Mw(n)}`)}return h}function Mw(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class Bg{constructor(t){this._client=t}}Bg._key=[];function Fg(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Lm=Object.freeze(Object.create(null)),Rw=(n=Fg)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const d=[],h=o.reduce((x,S,T)=>{var A,N,O;/[?#]/.test(S)&&(r=!0);const F=s[T];let K=(r?encodeURIComponent:n)(""+F);return T!==s.length&&(F==null||typeof F=="object"&&F.toString===((O=Object.getPrototypeOf((N=Object.getPrototypeOf((A=F.hasOwnProperty)!==null&&A!==void 0?A:Lm))!==null&&N!==void 0?N:Lm))===null||O===void 0?void 0:O.toString))&&(K=F+"",d.push({start:x.length+S.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(F).slice(8,-1)} is not a valid path parameter`})),x+S+(T===s.length?"":K)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)d.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(d.sort((x,S)=>x.start-S.start),d.length>0){let x=0;const S=d.reduce((T,A)=>{const N=" ".repeat(A.start-x),O="^".repeat(A.length);return x=A.start+A.length,T+N+O},"");throw new bi(`Path parameters result in path with invalid segments:
${d.map(T=>T.error).join(`
`)}
${h}
${S}`)}return h}),Wa=Rw(Fg);class Og extends Bg{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,d=hr(t,["api_version"]);if("model"in d&&"agent_config"in d)throw new bi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new bi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wa`/${r}/interactions`,Object.assign(Object.assign({body:d},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(Wa`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(Wa`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const d=o??{},{api_version:h=this._client.apiVersion}=d,y=hr(d,["api_version"]);return this._client.get(Wa`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},s),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}Og._key=Object.freeze(["interactions"]);class qg extends Og{}function kw(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of n)o.set(r,s),s+=r.length;return o}let er;function cd(n){let t;return(er??(t=new globalThis.TextEncoder,er=t.encode.bind(t)))(n)}let tr;function Pm(n){let t;return(tr??(t=new globalThis.TextDecoder,tr=t.decode.bind(t)))(n)}class Er{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?cd(t):t;this.buffer=kw([this.buffer,o]);const s=[];let r;for(;(r=Iw(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Pm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=Pm(this.buffer.subarray(0,d));s.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Er.NEWLINE_CHARS=new Set([`
`,"\r"]);Er.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Iw(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function zw(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const mr={off:0,error:200,warn:300,info:400,debug:500},Gm=(n,t,o)=>{if(n){if(fw(mr,n))return n;Ln(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(mr))}`)}};function Hs(){}function nr(n,t,o){return!t||mr[n]>mr[o]?Hs:t[n].bind(t)}const Dw={error:Hs,warn:Hs,info:Hs,debug:Hs};let Hm=new WeakMap;function Ln(n){var t;const o=n.logger,s=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return Dw;const r=Hm.get(o);if(r&&r[0]===s)return r[1];const d={error:nr("error",o,s),warn:nr("warn",o,s),info:nr("info",o,s),debug:nr("debug",o,s)};return Hm.set(o,[s,d]),d}const el=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Hl{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const d=s?Ln(s):console;function h(){return Ri(this,arguments,function*(){var v,m,x,S;if(r)throw new bi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=ki(Uw(t,o)),O;O=yield vt(N.next()),v=O.done,!v;A=!0){S=O.value,A=!1;const F=S;if(!T)if(F.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield vt(JSON.parse(F.data))}catch(K){throw d.error("Could not parse message into JSON:",F.data),d.error("From chunk:",F.raw),K}}}catch(F){m={error:F}}finally{try{!A&&!v&&(x=N.return)&&(yield vt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(F){if(jc(F))return yield vt(void 0);throw F}finally{T||o.abort()}})}return new Hl(h,o,s)}static fromReadableStream(t,o,s){let r=!1;function d(){return Ri(this,arguments,function*(){var v,m,x,S;const T=new Er,A=Gg(t);try{for(var N=!0,O=ki(A),F;F=yield vt(O.next()),v=F.done,!v;N=!0){S=F.value,N=!1;const K=S;for(const le of T.decode(K))yield yield vt(le)}}catch(K){m={error:K}}finally{try{!N&&!v&&(x=O.return)&&(yield vt(x.call(O)))}finally{if(m)throw m.error}}for(const K of T.flush())yield yield vt(K)})}function h(){return Ri(this,arguments,function*(){var v,m,x,S;if(r)throw new bi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=ki(d()),O;O=yield vt(N.next()),v=O.done,!v;A=!0){S=O.value,A=!1;const F=S;T||F&&(yield yield vt(JSON.parse(F)))}}catch(F){m={error:F}}finally{try{!A&&!v&&(x=N.return)&&(yield vt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(F){if(jc(F))return yield vt(void 0);throw F}finally{T||o.abort()}})}return new Hl(h,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=d=>({next:()=>{if(d.length===0){const h=s.next();t.push(h),o.push(h)}return d.shift()}});return[new Hl(()=>r(t),this.controller,this.client),new Hl(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Pg({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:d}=await o.next();if(d)return s.close();const h=cd(JSON.stringify(r)+`
`);s.enqueue(h)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function Uw(n,t){return Ri(this,arguments,function*(){var s,r,d,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bi("Attempted to iterate over a response with no body");const y=new Pw,v=new Er,m=Gg(n.body);try{for(var x=!0,S=ki(Lw(m)),T;T=yield vt(S.next()),s=T.done,!s;x=!0){h=T.value,x=!1;const A=h;for(const N of v.decode(A)){const O=y.decode(N);O&&(yield yield vt(O))}}}catch(A){r={error:A}}finally{try{!x&&!s&&(d=S.return)&&(yield vt(d.call(S)))}finally{if(r)throw r.error}}for(const A of v.flush()){const N=y.decode(A);N&&(yield yield vt(N))}})}function Lw(n){return Ri(this,arguments,function*(){var o,s,r,d;let h=new Uint8Array;try{for(var y=!0,v=ki(n),m;m=yield vt(v.next()),o=m.done,!o;y=!0){d=m.value,y=!1;const x=d;if(x==null)continue;const S=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?cd(x):x;let T=new Uint8Array(h.length+S.length);T.set(h),T.set(S,h.length),h=T;let A;for(;(A=zw(h))!==-1;)yield yield vt(h.slice(0,A)),h=h.slice(A)}}catch(x){s={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield vt(r.call(v)))}finally{if(s)throw s.error}}h.length>0&&(yield yield vt(h))})}class Pw{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=Gw(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function Gw(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function Hw(n,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:d}=t,h=await(async()=>{var y;if(t.options.stream)return Ln(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):Hl.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return Ln(n).debug(`[${s}] response parsed`,el({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-d})),h}class dd extends Promise{constructor(t,o,s=Hw){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new dd(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const $g=Symbol("brand.privateNullableHeaders");function*Vw(n){if(!n)return;if($g in n){const{values:s,nulls:r}=n;yield*s.entries();for(const d of r)yield[d,null];return}let t=!1,o;n instanceof Headers?o=n.entries():zm(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const d=zm(s[1])?s[1]:[s[1]];let h=!1;for(const y of d)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const Us=n=>{const t=new Headers,o=new Set;for(const s of n){const r=new Set;for(const[d,h]of Vw(s)){const y=d.toLowerCase();r.has(y)||(t.delete(d),r.add(y)),h===null?(t.delete(d),o.add(y)):(t.append(d,h),o.delete(y))}}return{[$g]:!0,values:t,nulls:o}};const Ic=n=>{var t,o,s,r,d,h;if(typeof globalThis.process<"u")return(s=(o=(t=f1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(h=(d=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||d===void 0?void 0:d.call(r,n))===null||h===void 0?void 0:h.trim()};var jg;class _r{constructor(t){var o,s,r,d,h,y,v,{baseURL:m=Ic("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=Ic("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:S="v1beta"}=t,T=hr(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:S},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:_r.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(h=(d=Gm(A.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:Gm(Ic("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(y=A.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:bw(),this.encoder=Cw,this._options=A,this.apiKey=x,this.apiVersion=S,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=Us([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Us([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Us([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new bi(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ul}`}defaultIdempotencyKey(){return`stainless-node-retry-${sw()}`}makeStatusError(t,o,s,r){return Pn.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,d=rw(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return dw(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(d.search=this.stringifyQuery(o)),d.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new dd(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,d,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:S}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Ln(this).debug(`[${T}] sending request`,el({retryOfRequestLogID:s,method:y.method,url:x,options:y,headers:m.headers})),!((d=y.signal)===null||d===void 0)&&d.aborted)throw new Jc;const O=new AbortController,F=await this.fetchWithTimeout(x,m,S,O).catch(Yc),K=Date.now();if(F instanceof globalThis.Error){const ce=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new Jc;const ke=jc(F)||/timed? ?out/i.test(String(F)+("cause"in F?String(F.cause):""));if(o)return Ln(this).info(`[${T}] connection ${ke?"timed out":"failed"} - ${ce}`),Ln(this).debug(`[${T}] connection ${ke?"timed out":"failed"} (${ce})`,el({retryOfRequestLogID:s,url:x,durationMs:K-N,message:F.message})),this.retryRequest(y,o,s??T);throw Ln(this).info(`[${T}] connection ${ke?"timed out":"failed"} - error; no more retries left`),Ln(this).debug(`[${T}] connection ${ke?"timed out":"failed"} (error; no more retries left)`,el({retryOfRequestLogID:s,url:x,durationMs:K-N,message:F.message})),ke?new Ng:new Cr({cause:F})}const le=`[${T}${A}] ${m.method} ${x} ${F.ok?"succeeded":"failed"} with status ${F.status} in ${K-N}ms`;if(!F.ok){const ce=await this.shouldRetry(F);if(o&&ce){const _e=`retrying, ${o} attempts remaining`;return await Tw(F.body),Ln(this).info(`${le} - ${_e}`),Ln(this).debug(`[${T}] response error (${_e})`,el({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,durationMs:K-N})),this.retryRequest(y,o,s??T,F.headers)}const ke=ce?"error; no more retries left":"error; not retryable";Ln(this).info(`${le} - ${ke}`);const Me=await F.text().catch(_e=>Yc(_e).message),De=hw(Me),ve=De?void 0:Me;throw Ln(this).debug(`[${T}] response error (${ke})`,el({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,message:ve,durationMs:Date.now()-N})),this.makeStatusError(F.status,De,ve,F.headers)}return Ln(this).info(le),Ln(this).debug(`[${T}] response start`,el({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,durationMs:K-N})),{response:F,options:y,controller:O,requestLogID:T,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(t,o,s,r){const d=o||{},{signal:h,method:y}=d,v=hr(d,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(S.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,S)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var d;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(d=t.maxRetries)!==null&&d!==void 0?d:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await mw(h),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const d=o-t,h=Math.min(.5*Math.pow(2,d),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,d;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,S=this.buildURL(v,m,x);"timeout"in h&&pw("timeout",h.timeout),h.timeout=(s=h.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:h}),N=await this.buildHeaders({options:t,method:y,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:N},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(d=h.fetchOptions)!==null&&d!==void 0?d:{}),url:S,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let d={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=Us([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),xw()),this._options.defaultHeaders,s,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=Us([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Sw(t)}:this.encoder({body:t,headers:s})}}_r.DEFAULT_TIMEOUT=6e4;class En extends _r{constructor(){super(...arguments),this.interactions=new qg(this)}}jg=En;En.GeminiNextGenAPIClient=jg;En.GeminiNextGenAPIClientError=bi;En.APIError=Pn;En.APIConnectionError=Cr;En.APIConnectionTimeoutError=Ng;En.APIUserAbortError=Jc;En.NotFoundError=Ig;En.ConflictError=zg;En.RateLimitError=Ug;En.BadRequestError=Mg;En.AuthenticationError=Rg;En.InternalServerError=Lg;En.PermissionDeniedError=kg;En.UnprocessableEntityError=Dg;En.toFile=Nw;En.Interactions=qg;function Bw(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function Fw(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function Ow(n,t){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function qw(n,t){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function $w(n,t,o){const s={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&c(t,["displayName"],r),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=u(n,["epochCount"]);t!==void 0&&d!=null&&c(t,["tuningTask","hyperparameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);if(h!=null&&c(s,["tuningTask","hyperparameters","learningRateMultiplier"],h),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=u(n,["batchSize"]);t!==void 0&&y!=null&&c(t,["tuningTask","hyperparameters","batchSize"],y);const v=u(n,["learningRate"]);if(t!==void 0&&v!=null&&c(t,["tuningTask","hyperparameters","learningRate"],v),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function jw(n,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=u(n,["validationDataset"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec"],Vm(A))}else if(r==="PREFERENCE_TUNING"){const A=u(n,["validationDataset"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec"],Vm(A))}const d=u(n,["tunedModelDisplayName"]);t!==void 0&&d!=null&&c(t,["tunedModelDisplayName"],d);const h=u(n,["description"]);t!==void 0&&h!=null&&c(t,["description"],h);let y=u(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=u(n,["epochCount"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(y==="PREFERENCE_TUNING"){const A=u(n,["epochCount"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=u(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=u(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=u(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=u(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=u(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=u(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=u(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=u(n,["adapterSize"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=u(n,["adapterSize"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=u(n,["labels"]);t!==void 0&&S!=null&&c(t,["labels"],S);const T=u(n,["beta"]);return t!==void 0&&T!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function Yw(n,t){const o={},s=u(n,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const d=u(n,["trainingDataset"]);d!=null&&oA(d);const h=u(n,["config"]);return h!=null&&$w(h,o),o}function Jw(n,t){const o={},s=u(n,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const d=u(n,["trainingDataset"]);d!=null&&lA(d,o,t);const h=u(n,["config"]);return h!=null&&jw(h,o,t),o}function Kw(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function Xw(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function Qw(n,t,o){const s={},r=u(n,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const d=u(n,["pageToken"]);t!==void 0&&d!=null&&c(t,["_query","pageToken"],d);const h=u(n,["filter"]);return t!==void 0&&h!=null&&c(t,["_query","filter"],h),s}function Zw(n,t,o){const s={},r=u(n,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const d=u(n,["pageToken"]);t!==void 0&&d!=null&&c(t,["_query","pageToken"],d);const h=u(n,["filter"]);return t!==void 0&&h!=null&&c(t,["_query","filter"],h),s}function Ww(n,t){const o={},s=u(n,["config"]);return s!=null&&Qw(s,o),o}function eA(n,t){const o={},s=u(n,["config"]);return s!=null&&Zw(s,o),o}function tA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const d=u(n,["tunedModels"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>Yg(y))),c(o,["tuningJobs"],h)}return o}function nA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const d=u(n,["tuningJobs"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>Qc(y))),c(o,["tuningJobs"],h)}return o}function iA(n,t){const o={},s=u(n,["name"]);s!=null&&c(o,["model"],s);const r=u(n,["name"]);return r!=null&&c(o,["endpoint"],r),o}function oA(n,t){const o={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(o,["examples","examples"],r)}return o}function lA(n,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=u(n,["gcsUri"]);t!==void 0&&h!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=u(n,["gcsUri"]);t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let d=u(o,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=u(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(d==="PREFERENCE_TUNING"){const h=u(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Yg(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["state"]);d!=null&&c(o,["state"],ug(d));const h=u(n,["createTime"]);h!=null&&c(o,["createTime"],h);const y=u(n,["tuningTask","startTime"]);y!=null&&c(o,["startTime"],y);const v=u(n,["tuningTask","completeTime"]);v!=null&&c(o,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(o,["updateTime"],m);const x=u(n,["description"]);x!=null&&c(o,["description"],x);const S=u(n,["baseModel"]);S!=null&&c(o,["baseModel"],S);const T=u(n,["_self"]);return T!=null&&c(o,["tunedModel"],iA(T)),o}function Qc(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["state"]);d!=null&&c(o,["state"],ug(d));const h=u(n,["createTime"]);h!=null&&c(o,["createTime"],h);const y=u(n,["startTime"]);y!=null&&c(o,["startTime"],y);const v=u(n,["endTime"]);v!=null&&c(o,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(o,["updateTime"],m);const x=u(n,["error"]);x!=null&&c(o,["error"],x);const S=u(n,["description"]);S!=null&&c(o,["description"],S);const T=u(n,["baseModel"]);T!=null&&c(o,["baseModel"],T);const A=u(n,["tunedModel"]);A!=null&&c(o,["tunedModel"],A);const N=u(n,["preTunedModel"]);N!=null&&c(o,["preTunedModel"],N);const O=u(n,["supervisedTuningSpec"]);O!=null&&c(o,["supervisedTuningSpec"],O);const F=u(n,["preferenceOptimizationSpec"]);F!=null&&c(o,["preferenceOptimizationSpec"],F);const K=u(n,["tuningDataStats"]);K!=null&&c(o,["tuningDataStats"],K);const le=u(n,["encryptionSpec"]);le!=null&&c(o,["encryptionSpec"],le);const ce=u(n,["partnerModelTuningSpec"]);ce!=null&&c(o,["partnerModelTuningSpec"],ce);const ke=u(n,["customBaseModel"]);ke!=null&&c(o,["customBaseModel"],ke);const Me=u(n,["experiment"]);Me!=null&&c(o,["experiment"],Me);const De=u(n,["labels"]);De!=null&&c(o,["labels"],De);const ve=u(n,["outputUri"]);ve!=null&&c(o,["outputUri"],ve);const tt=u(n,["pipelineJob"]);tt!=null&&c(o,["pipelineJob"],tt);const _e=u(n,["serviceAccount"]);_e!=null&&c(o,["serviceAccount"],_e);const Qe=u(n,["tunedModelDisplayName"]);Qe!=null&&c(o,["tunedModelDisplayName"],Qe);const Ie=u(n,["veoTuningSpec"]);return Ie!=null&&c(o,["veoTuningSpec"],Ie),o}function sA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["metadata"]);d!=null&&c(o,["metadata"],d);const h=u(n,["done"]);h!=null&&c(o,["done"],h);const y=u(n,["error"]);return y!=null&&c(o,["error"],y),o}function Vm(n,t){const o={},s=u(n,["gcsUri"]);s!=null&&c(o,["validationDatasetUri"],s);const r=u(n,["vertexDatasetResource"]);return r!=null&&c(o,["validationDatasetUri"],r),o}class aA extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new tl(oo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},o),{preTunedModel:r});return d.baseModel=void 0,await this.tuneInternal(d)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),d=await this.tuneMldevInternal(r);let h="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?h=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(h=d.name.split("/operations/")[0]),{name:h,state:Hc.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Xw(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>Qc(x))}else{const m=Kw(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>Yg(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eA(t);return y=$e("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=nA(x),T=new fm;return Object.assign(T,S),T})}else{const m=Ww(t);return y=$e("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=tA(x),T=new fm;return Object.assign(T,S),T})}}async cancel(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Fw(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=qw(x),T=new pm;return Object.assign(T,S),T})}else{const m=Bw(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Ow(x),T=new pm;return Object.assign(T,S),T})}}async tuneInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=Jw(t,t);return d=$e("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>Qc(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Yw(t);return d=$e("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>sA(v))}}}class rA{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uA=1024*1024*8,cA=3,dA=1e3,fA=2,gr="x-goog-upload-status";async function pA(n,t,o){var s;const r=await Jg(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[gr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function hA(n,t,o){var s;const r=await Jg(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[gr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=ig(d),y=new od;return Object.assign(y,h),y}async function Jg(n,t,o){var s,r;let d=0,h=0,y=new Vc(new Response),v="upload";for(d=n.size;h<d;){const m=Math.min(uA,d-h),x=n.slice(h,h+m);h+m>=d&&(v+=", finalize");let S=0,T=dA;for(;S<cA&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((s=y?.headers)===null||s===void 0)&&s[gr]));)S++,await gA(T),T=T*fA;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[gr])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function mA(n){return{size:n.size,type:n.type}}function gA(n){return new Promise(t=>setTimeout(t,n))}class yA{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pA(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hA(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mA(t)}}class vA{create(t,o,s){return new xA(t,o,s)}}class xA{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Bm="x-goog-api-key";class bA{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(Bm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Bm,this.apiKey)}}}const SA="gl-node/";class TA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new En({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=g1(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new bA(this.apiKey);this.apiClient=new m_({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:SA+"web",uploader:new yA,downloader:new rA}),this.models=new D_(this.apiClient),this.live=new N_(this.apiClient,r,new vA),this.batches=new $S(this.apiClient),this.chats=new wT(this.models,this.apiClient),this.caches=new CT(this.apiClient),this.files=new LT(this.apiClient),this.operations=new U_(this.apiClient),this.authTokens=new Q_(this.apiClient),this.tunings=new aA(this.apiClient),this.fileSearchStores=new lw(this.apiClient)}}const CA=n=>new TA({apiKey:n}),EA={type:ln.OBJECT,properties:{segments:{type:ln.ARRAY,items:{type:ln.OBJECT,properties:{startTime:{type:ln.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:ln.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:ln.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},_A={type:ln.OBJECT,properties:{segments:{type:ln.ARRAY,items:{type:ln.OBJECT,properties:{startTime:{type:ln.STRING},endTime:{type:ln.STRING},text:{type:ln.STRING},words:{type:ln.ARRAY,items:{type:ln.OBJECT,properties:{text:{type:ln.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:ln.STRING,description:"Start time of the word"},endTime:{type:ln.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function ir(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let S=0;m[1]&&(S=parseFloat("0."+m[1])),o=y*3600+v*60+x+S}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const s=Math.floor(o/60),r=Math.floor(o%60),d=Math.round(o%1*1e3);return`${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(d).padStart(3,"0")}`}function wA(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const s=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let d;for(;(d=r.exec(t))!==null;){const h=d[3]!==void 0?d[3]:d[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}s.push({startTime:d[1],endTime:d[2],text:y})}if(s.length>0)return{segments:s};throw new Error("Response structure invalid and could not be repaired.")}async function AA(n,t,o,s,r,d="line"){try{const h=CA(s),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";d==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. DETAILS: Inside each line object, you MUST provide a "words" array.
    4. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    5. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    6. FAST SPEECH / RAP HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating timed lyrics.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${d.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,S={responseMimeType:"application/json",responseSchema:d==="word"?_A:EA,temperature:.1};y&&(S.thinkingConfig={thinkingBudget:1024});const T=new Promise((K,le)=>{r?.aborted&&le(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>le(new DOMException("Aborted","AbortError")))});let N=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:S}),T])).text;if(!N)throw new Error("Empty response from model");return N=N.trim(),N.startsWith("```json")?N=N.replace(/^```json\s*/,"").replace(/\s*```$/,""):N.startsWith("```")&&(N=N.replace(/^```\s*/,"").replace(/\s*```$/,"")),(wA(N).segments||[]).map(K=>({startTime:ir(String(K.startTime)),endTime:ir(String(K.endTime)),text:String(K.text),words:K.words?K.words.map(le=>({text:String(le.text),startTime:ir(String(le.startTime)),endTime:ir(String(le.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const NA=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:s,onPlayTrack:r,isPlaying:d,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:S})=>{const{confirm:T}=vr(),A=ee.useRef(null),N=ee.useRef(new Map),O=G=>{const oe=Math.floor(G/60).toString().padStart(2,"0"),se=(G%60).toFixed(2).padStart(5,"0");return`[${oe}:${se}]`},[F,K]=ee.useState(null),[le,ce]=ee.useState({key:null,direction:"asc"}),[ke,Me]=ee.useState(new Set),[De,ve]=ee.useState(new Set),[tt,_e]=ee.useState(localStorage.getItem("gemini_api_key")||""),[Qe,Ie]=ee.useState("gemini-2.5-flash"),[ct,bt]=ee.useState("line"),[Rt,xe]=ee.useState(!1),B=ee.useRef(null),[ye,ue]=ee.useState(null);ee.useEffect(()=>{tt&&localStorage.setItem("gemini_api_key",tt)},[tt]);const ht=o>=0?n[o]:null,mt=ht?.parsedLyrics||[],I=ee.useMemo(()=>ht?mt.findIndex((G,oe)=>{if(G.endTime!==void 0)return x>=G.time&&x<G.endTime;const se=mt[oe+1];return x>=G.time&&(!se||x<se.time)}):-1,[x,ht,mt]);ee.useEffect(()=>{if(I!==-1){const G=document.getElementById(`lyric-active-${o}`);G&&G.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[I,o]);const M=G=>{if(n.length===0)return;const oe=o>=0?n[o]:null,se=[...n];let Ce="asc";if(G==="random"){ce({key:"random",direction:"asc"});for(let ge=se.length-1;ge>0;ge--){const he=Math.floor(Math.random()*(ge+1));[se[ge],se[he]]=[se[he],se[ge]]}}else{le.key===G&&le.direction==="asc"&&(Ce="desc"),ce({key:G,direction:Ce});const ge=Ce==="asc"?1:-1;G==="filename"?se.sort((he,E)=>ge*he.audioFile.name.localeCompare(E.audioFile.name)):G==="artist"?se.sort((he,E)=>ge*(he.metadata.artist||"").localeCompare(E.metadata.artist||"")):G==="title"?se.sort((he,E)=>ge*(he.metadata.title||"").localeCompare(E.metadata.title||"")):G==="album"&&se.sort((he,E)=>ge*(he.metadata.album||"").localeCompare(E.metadata.album||""))}if(t(se),oe){const ge=se.findIndex(he=>he.id===oe.id);ge!==-1&&s(ge)}},te=ee.useCallback(G=>{F!==null&&G.key==="Delete"?(G.preventDefault(),G.stopPropagation(),m?m(F):t(oe=>{const se=[...oe];return se.splice(F,1),se}),F>=n.length-1&&K(n.length>1?n.length-2:null)):G.key==="ArrowDown"&&n.length>0?(G.preventDefault(),G.stopPropagation(),K(oe=>oe===null?0:Math.min(oe+1,n.length-1))):G.key==="ArrowUp"&&n.length>0?(G.preventDefault(),G.stopPropagation(),K(oe=>oe===null?0:Math.max(oe-1,0))):G.key==="Enter"&&F!==null?(G.preventDefault(),G.stopPropagation(),r(F)):G.key==="Escape"&&K(null)},[F,n.length,t,r]);ee.useEffect(()=>{const G=A.current;if(G)return G.addEventListener("keydown",te),()=>G.removeEventListener("keydown",te)},[te]),ee.useEffect(()=>{F!==null&&F>=n.length&&K(n.length>0?n.length-1:null)},[n.length,F]);const Se=async G=>{const oe=new Map;G.forEach(he=>{const E=he.name.split(".").pop()?.toLowerCase(),C=he.name.replace(/\.[^/.]+$/,"");oe.has(C)||oe.set(C,{});const L=oe.get(C);["mp3","wav","ogg","flac","m4a"].includes(E||"")?L.audio=he:["lrc","srt","ttml","xml","json"].includes(E||"")&&(L.lyric=he)});const se=[],Ce=async(he,E)=>new Promise(C=>{Dc(()=>import("./jsmediatags.min-BD2M9S69.js").then(L=>L.j),[]).then(L=>{L.read(he,{onSuccess:V=>{const{title:k,artist:ae,album:Y,picture:Te}=V.tags;let X=null;if(Te){const{data:Be,format:Le}=Te;let He="";for(let dt=0;dt<Be.length;dt++)He+=String.fromCharCode(Be[dt]);X=`data:${Le};base64,${window.btoa(He)}`}C({title:k||E,artist:ae||"Unknown Artist",album:Y||void 0,coverUrl:X})},onError:()=>{C({title:E,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{C({title:E,artist:"Unknown Artist",coverUrl:null})})}),ge=async he=>{try{const E=await he.text(),C=he.name.split(".").pop()?.toLowerCase();if(C==="lrc")return Vl(E);if(C==="srt")return Bl(E);if(C==="ttml"||C==="xml")return Fs(E);if(C==="json")return i1(E)}catch(E){console.error("Failed to parse lyrics",E)}return[]};for(const[he,E]of oe.entries())if(E.audio){const C=await Ce(E.audio,he),L=Math.random().toString(36).substr(2,9);let V=[];E.lyric&&(V=await ge(E.lyric)),se.push({id:L,audioFile:E.audio,lyricFile:E.lyric,parsedLyrics:V,metadata:C,duration:0})}se.length>0&&t(he=>[...he,...se])},Ke=async G=>{if(G.target.files&&G.target.files.length>0){const oe=Array.from(G.target.files);await Se(oe),G.target.value=""}},[w,U]=ee.useState(!1),ne=G=>{G.preventDefault(),G.stopPropagation(),U(!0)},ie=G=>{G.preventDefault(),G.stopPropagation(),U(!1)},Re=async G=>{if(G.preventDefault(),G.stopPropagation(),U(!1),G.dataTransfer.files&&G.dataTransfer.files.length>0){const oe=Array.from(G.dataTransfer.files);await Se(oe)}},Ue=G=>{m?m(G):t(oe=>{const se=[...oe];return se.splice(G,1),se})},be=G=>new Promise((oe,se)=>{const Ce=new FileReader;Ce.readAsDataURL(G),Ce.onload=()=>{const ge=Ce.result.split(",")[1];oe(ge)},Ce.onerror=ge=>se(ge)}),Ne=async G=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(ke.has(G.id)){const ge=N.current.get(G.id);ge&&ge.abort();return}const oe=tt||"PLACEHOLDER_API_KEY";if(oe.trim().length!==39){alert(`Invalid API Key length (${oe.trim().length}). It must be exactly 39 characters.`),xe(!0);return}Me(ge=>new Set(ge).add(G.id));const se=new AbortController;N.current.set(G.id,se);const Ce=19.5*1024*1024;if(G.audioFile.size>Ce){alert(`File is too large (${(G.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),Me(ge=>{const he=new Set(ge);return he.delete(G.id),he}),N.current.delete(G.id);return}try{const ge=await be(G.audioFile);let he=G.duration||0;if(he===0)try{he=await new Promise(L=>{const V=new Audio(URL.createObjectURL(G.audioFile));V.onloadedmetadata=()=>{L(V.duration),URL.revokeObjectURL(V.src)},V.onerror=()=>{URL.revokeObjectURL(V.src),L(0)}})}catch(L){console.warn("Could not determine duration for AI validation",L)}let C=(await AA(Qe,ge,G.audioFile.type,oe,se.signal,ct)).map(L=>({time:Gs(L.startTime),text:L.text,endTime:Gs(L.endTime),words:L.words?L.words.map(V=>({text:V.text,startTime:Gs(V.startTime),endTime:Gs(V.endTime)})):void 0}));he>0&&(C=C.filter(L=>L.time<he&&L.time>=0)),t(L=>L.map(V=>V.id===G.id?{...V,parsedLyrics:C.sort((k,ae)=>k.time-ae.time),duration:he>0?he:V.duration}:V))}catch(ge){if(ge.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",ge);let he="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)he="Connection lost. Please check your internet connection.";else if(ge.message){const E=ge.message.toLowerCase();E.includes("fetch")||E.includes("network")||E.includes("failed to connect")?he="Network error. Please check your connection.":(E.includes("api key")||ge.message.includes("400")||ge.message.includes("401")||ge.message.includes("403"))&&(he="API Key Error: Please check if your key is valid and has credits.")}alert(he)}}finally{N.current.delete(G.id),Me(ge=>{const he=new Set(ge);return he.delete(G.id),he})}},fe=async G=>{if(!navigator.onLine){alert("No internet connection.");return}ve(oe=>new Set(oe).add(G.id));try{const oe=await Dc(()=>import("./index.min-DjKNkzd7.js").then(C=>C.i),[]);let se;const Ce=oe.default||oe;console.log("SyncLyrics Module:",oe);const ge=["musixmatch","lrclib","netease"];if(typeof Ce=="function"&&Ce.prototype&&Ce.prototype.getLyrics){console.log("Detected Class usage");const C=new Ce({sources:ge});se=L=>C.getLyrics(L)}else if(Ce.getLyrics&&typeof Ce.getLyrics=="function")console.log("Detected Instance usage"),se=C=>Ce.getLyrics(C);else if(Ce.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const C=Ce.SyncLyrics;if(typeof C=="function"&&C.prototype&&C.prototype.getLyrics){console.log("Using SyncLyrics as Class");const L=new C({sources:ge});se=V=>L.getLyrics(V)}else if(typeof C=="function")console.log("Using SyncLyrics as Function"),se=C;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ce=="function")console.log("Detected Function usage"),se=Ce;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ce}. Keys: ${typeof Ce=="object"?JSON.stringify(Object.keys(Ce)):"N/A"}`);const he={track:G.metadata.title,artist:G.metadata.artist,album:G.metadata.album,sources:ge};console.log("Searching lyrics with options:",he);const E=await se(he);if(E&&typeof E=="string")P(E,G);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let C=G.duration||0;if(C===0)try{C=await new Promise(ae=>{const Y=new Audio(URL.createObjectURL(G.audioFile));Y.onloadedmetadata=()=>{const Te=Y.duration;URL.revokeObjectURL(Y.src),ae(Te)},Y.onerror=()=>ae(0)})}catch(ae){console.warn("Could not determine duration for search",ae)}const L=new URLSearchParams({artist_name:G.metadata.artist,track_name:G.metadata.title,album_name:G.metadata.album||"",duration:C.toString()}),V=await fetch(`https://lrclib.net/api/get?${L.toString()}`);if(!V.ok){const ae=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(G.metadata.title+" "+G.metadata.artist)}`);if(ae.ok){const Y=await ae.json();if(Array.isArray(Y)&&Y.length>0){const Te=Y.find(X=>X.syncedLyrics);if(Te){P(Te.syncedLyrics,G);return}else if(Y[0].plainLyrics){P(Y[0].plainLyrics,G);return}}}throw new Error("No lyrics found in fallback source.")}const k=await V.json();k.syncedLyrics?P(k.syncedLyrics,G):k.plainLyrics?P(k.plainLyrics,G):alert("No lyrics found.")}}catch(oe){console.error("Search failed:",oe),oe.message?.includes("CORS")||oe.message?.includes("etwork")||oe.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+oe.message)}finally{ve(oe=>{const se=new Set(oe);return se.delete(G.id),se})}},P=(G,oe)=>{let se=Vl(G);if(se.length===0&&(se=Bl(G)),se.length>0){const Ce=se.some(ge=>ge.words&&ge.words.length>0);console.log(Ce?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(ge=>ge.map(he=>he.id===oe.id?{...he,parsedLyrics:se,lyricFile:new File([G],`synched-lyrics${Ce?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:he))}else alert("Lyrics found but could not be parsed.")},Ae=(G,oe,se)=>{const Ce=new Blob([G],{type:"application/octet-stream"}),ge=URL.createObjectURL(Ce),he=document.createElement("a");he.href=ge,he.download=oe,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ge)},je=async(G,oe)=>{const se=G.parsedLyrics||[];if(se.length===0)return;let Ce="";const ge=oe==="lrc-enhanced"?"lrc":oe,he=`${G.metadata.title||"lyrics"}.${ge}`;let E=G.duration||0;if(E===0)try{E=await new Promise(C=>{const L=new Audio(URL.createObjectURL(G.audioFile));L.onloadedmetadata=()=>{C(L.duration),URL.revokeObjectURL(L.src)},L.onerror=()=>C(0)})}catch(C){console.warn("Could not determine duration for export check",C)}if(oe==="txt")Ce=se.map(C=>C.text).join(`
`);else if(oe==="json")Ce=JSON.stringify(se,null,2);else if(oe==="srt")Ce=se.map((C,L)=>{const V=C.endTime!==void 0?C.endTime:se[L+1]?.time||C.time+3,k=E>0&&V>E?E:V,ae=Y=>{const Te=Math.floor(Y/3600).toString().padStart(2,"0"),X=Math.floor(Y%3600/60).toString().padStart(2,"0"),Be=Math.floor(Y%60).toString().padStart(2,"0"),Le=Math.floor(Y%1*1e3).toString().padStart(3,"0");return`${Te}:${X}:${Be},${Le}`};return`${L+1}
${ae(C.time)} --> ${ae(k)}
${C.text}
`}).join(`
`);else if(oe==="lrc"){const C=[],L=V=>{const k=Math.floor(V/60).toString().padStart(2,"0"),ae=(V%60).toFixed(2).padStart(5,"0");return`[${k}:${ae}]`};for(let V=0;V<se.length;V++){const k=se[V],ae=se[V+1];C.push(`${L(k.time)}${k.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const Te=(k.endTime??k.time+3)+4;(!(E>0)||Te<=E)&&(ae?ae.time>Te&&C.push(`${L(Te)}`):C.push(`${L(Te)}`))}Ce=C.join(`
`)}else if(oe==="lrc-enhanced"){const C=[],L=k=>{const ae=Math.floor(k/60).toString().padStart(2,"0"),Y=(k%60).toFixed(2).padStart(5,"0");return`[${ae}:${Y}]`},V=k=>{const ae=Math.floor(k/60).toString().padStart(2,"0"),Y=(k%60).toFixed(2).padStart(5,"0");return`<${ae}:${Y}>`};for(let k=0;k<se.length;k++){const ae=se[k],Y=se[k+1];let Te="";ae.words&&ae.words.length>0?ae.words.forEach((He,dt)=>{const Ct=He.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");Te+=`${V(He.startTime)}${Ct}`,dt<ae.words.length-1&&!Ct.endsWith("-")&&(Te+=" ")}):Te=ae.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),C.push(`${L(ae.time)}${Te}`);const Be=(ae.endTime??ae.time+3)+4;(!(E>0)||Be<=E)&&(Y?Y.time>Be&&C.push(`${L(Be)}`):C.push(`${L(Be)}`))}Ce=C.join(`
`)}else if(oe==="ttml"){const C=L=>{const V=Math.floor(L/3600).toString().padStart(2,"0"),k=Math.floor(L%3600/60).toString().padStart(2,"0"),ae=Math.floor(L%60).toString().padStart(2,"0"),Y=Math.floor(L%1*1e3).toString().padStart(3,"0");return`${V}:${k}:${ae}.${Y}`};Ce=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,se.forEach(L=>{const V=C(L.time),k=C(L.endTime||L.time+3);Ce+=`
      <p begin="${V}" end="${k}">`,L.words&&L.words.length>0?L.words.forEach(ae=>{if(!ae.text.trim())return;const Y=C(ae.startTime),Te=C(ae.endTime);let X=ae.text.replace(/[ \t]+/g," ").trim();X.endsWith("-")||(X+=" "),Ce+=`
        <span begin="${Y}" end="${Te}">${X}</span>`}):Ce+=`
        <span begin="${V}" end="${k}">${L.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ce+=`
      </p>`}),Ce+=`
    </div>
  </body>
</tt>`}Ae(Ce,he)},Ve=async G=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(oe=>oe.map(se=>se.id===G.id?{...se,parsedLyrics:[],lyricFile:void 0}:se))},Ye=async G=>{const oe=G.target.files?.[0];if(!(!oe||!ye)){try{const se=await oe.text(),Ce=oe.name.split(".").pop()?.toLowerCase();let ge=[];Ce==="lrc"?ge=Vl(se):Ce==="srt"?ge=Bl(se):(Ce==="ttml"||Ce==="xml")&&(ge=Fs(se)),ge.length>0?t(he=>he.map(E=>E.id===ye?{...E,lyricFile:oe,parsedLyrics:ge}:E)):alert("Could not parse lyrics. Ensure file is .lrc or .srt")}catch(se){console.error("Failed to load lyrics",se),alert("Failed to load lyrics file.")}ue(null),G.target.value=""}};return p.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${w?"bg-zinc-800 border-orange-500":""}`,onDragOver:ne,onDragLeave:ie,onDrop:Re,children:[w&&p.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:p.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[p.jsx(Do,{size:48}),p.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),p.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, OGG, FLAC, M4A, LRC, SRT, TTML"})]})}),p.jsx("input",{type:"file",ref:B,className:"hidden",accept:".lrc,.srt,.ttml,.xml",onChange:Ye}),p.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[p.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[p.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[p.jsx(ur,{size:16,className:"text-orange-400"}),"Playlist"]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-orange-600 hover:bg-orange-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[p.jsx(eg,{size:14})," Add Audio & Lyrics",p.jsx("input",{type:"file",className:"hidden",accept:"audio/*,.lrc,.srt,.ttml,.xml",multiple:!0,onChange:Ke})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>M("filename"),className:`p-1 rounded transition-colors ${le.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${le.key==="filename"?le.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(rr,{size:14,className:le.key==="filename"&&le.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("artist"),className:`p-1 rounded transition-colors ${le.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${le.key==="artist"?le.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Jb,{size:14,className:le.key==="artist"&&le.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("title"),className:`p-1 rounded transition-colors ${le.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${le.key==="title"?le.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Ll,{size:14,className:le.key==="title"&&le.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("album"),className:`p-1 rounded transition-colors ${le.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${le.key==="album"?le.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Lx,{size:14,className:le.key==="album"&&le.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("random"),className:`p-1 rounded transition-colors ${le.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:p.jsx(Ab,{size:14})})]})]}),p.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[p.jsx("button",{onClick:()=>xe(!Rt),className:`p-1 rounded transition-colors ${Rt?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:p.jsx(Zx,{size:14})}),Rt&&p.jsx("input",{type:tt?"password":"text",value:tt,onChange:G=>_e(G.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),p.jsx("div",{className:"relative group",children:p.jsxs("select",{value:Qe,onChange:G=>Ie(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[p.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),p.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),p.jsx("div",{className:"relative group",children:p.jsxs("select",{value:ct,onChange:G=>bt(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[p.jsx("option",{value:"line",children:"Line"}),p.jsx("option",{value:"word",children:"Word"})]})}),p.jsx("button",{onClick:async()=>{n.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:p.jsx(cr,{size:14})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),p.jsx("button",{onClick:S,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:p.jsx(vi,{size:14})})]})]}),p.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[p.jsx(ur,{size:32,className:"mb-2 opacity-50"}),p.jsx("p",{children:"Playlist is empty"}),p.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((G,oe)=>{const se=oe===o,Ce=oe===F,ge=G.parsedLyrics||[],he=se?ge.findIndex((E,C)=>{if(E.endTime!==void 0)return x>=E.time&&x<E.endTime;const L=ge[C+1];return x>=E.time&&(!L||x<L.time)}):-1;return p.jsxs("div",{onClick:()=>K(oe),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${se?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ce?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[p.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:E=>{E.stopPropagation(),se?h():r(oe)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${se?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:se?d?p.jsx(Wm,{size:14}):p.jsx(Uc,{size:14}):p.jsx(Uc,{size:14})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:`text-xs font-medium truncate ${se?"text-orange-100":"text-zinc-300"}`,title:G.audioFile.name,children:G.metadata.title}),p.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:G.metadata.artist,children:G.metadata.artist})]})]}),p.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[p.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(G.audioFile.size/1024/1024).toFixed(1),"MB"]}),G.lyricFile?p.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:G.lyricFile.name,children:[p.jsx(rr,{size:7}),p.jsx("span",{className:"truncate max-w-[80px]",children:G.lyricFile.name})]}):p.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),p.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:ge.length>0?p.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:ge.map((E,C)=>{const L=C===he;return p.jsxs("div",{id:L?`lyric-active-${oe}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${L?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${O(E.time)} - ${E.text}`,onClick:V=>{V.stopPropagation(),oe!==o?(r(oe),setTimeout(()=>y(E.time),150)):y(E.time)},children:[p.jsx("span",{className:`font-mono text-[8px] ${L?"text-orange-200":"text-zinc-500"}`,children:O(E.time)}),p.jsx("span",{className:`truncate max-w-[120px] ${L?"text-white font-medium":"text-zinc-400"}`,children:E.text||""})]},C)})}):p.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[p.jsx("button",{onClick:E=>{E.stopPropagation(),ue(G.id),B.current&&(B.current.value=""),B.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:p.jsx(Do,{size:14})}),p.jsx("button",{onClick:E=>{E.stopPropagation(),fe(G)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${De.has(G.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:De.has(G.id),children:De.has(G.id)?p.jsx(l0,{size:14,className:"animate-spin"}):p.jsx(Eb,{size:14})}),p.jsx("button",{onClick:E=>{E.stopPropagation(),Ne(G)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${ke.has(G.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:ke.has(G.id)?"Stop Transcription":"AI Sync Transcribe",children:ke.has(G.id)?p.jsxs(p.Fragment,{children:[p.jsx(l0,{size:14,className:"animate-spin group-hover/btn:hidden"}),p.jsx(Pc,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):p.jsx(Lc,{size:14})}),ge.length>0&&p.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),p.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),Ve(G)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),p.jsx("button",{onClick:E=>{E.stopPropagation(),Ue(oe)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:p.jsx(cr,{size:12})})]},G.id)})})]})},fd=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],MA=()=>{const n=new Set;if(fd.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const s=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=s,document.head.appendChild(r);const d=document.createElement("link");d.rel="preconnect",d.href="https://fonts.googleapis.com",document.head.appendChild(d);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},pd=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],yr={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},zc=pd.flatMap(n=>n.options.map(t=>t.value)),Fm={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"shadow",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0},Om=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],qm=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],$m=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],Zc=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],Wc=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},jm=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],ed=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],Kg=["none","upper","lower","title","sentence","invert"],Ym=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],Jm=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],RA=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Mi=({value:n,onChange:t,groups:o})=>{const[s,r]=ee.useState(!1),[d,h]=ee.useState(n);ee.useEffect(()=>{s||h(n)},[n,s]);const y=S=>{for(const T of o){const A=T.options.find(N=>N.value===S);if(A)return A.label}return S},v=S=>{t(S)},m=()=>{s&&t(d),r(!1)},x=S=>{t(S),h(S),r(!1)};return p.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[p.jsxs("button",{onClick:()=>r(!s),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:s?"Close List":"Expand List",children:[p.jsx("span",{className:"truncate",children:y(n)}),p.jsx(ar,{size:14,className:`transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&p.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(S=>p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),p.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(T=>p.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},S.label))})]})},kA=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const s of t){const r=s.options.find(d=>d.value===n);if(r)return r.label}return"Select Font"},IA=({value:n,onChange:t,customFontName:o,groups:s=fd})=>{const[r,d]=ee.useState(!1),[h,y]=ee.useState(n);ee.useEffect(()=>{r||y(n)},[n,r]);const v=S=>{t(S)},m=()=>{r&&t(h)},x=S=>{t(S),y(S),d(!1)};return p.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[p.jsxs("button",{onClick:()=>d(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[p.jsx("span",{className:"truncate",style:{fontFamily:n},children:kA(n,s,o)}),p.jsx(ar,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&p.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),p.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:p.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),s.map(S=>p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),p.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(T=>p.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:p.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},S.label))]})]})},zA=Object.values(yr).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),DA=[{label:"Visual Presets",options:zA},...fd],UA=({config:n,setConfig:t,preset:o,setPreset:s,onClose:r,isPlaylistMode:d,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:S,setResolution:T,aspectRatio:A,setAspectRatio:N,renderCodec:O,setRenderCodec:F,supportedCodecs:K,renderQuality:le,setRenderQuality:ce,renderFps:ke,setRenderFps:Me})=>{const{toast:De,confirm:ve}=vr(),tt=ee.useRef(null),_e=ee.useRef(null),Qe=ee.useRef(null),Ie=ee.useRef(null),ct=ee.useRef(null),[bt,Rt]=ee.useState(!1),xe=(M,te)=>{let Se={...n,[M]:te};if(M==="highlightEffect"){const w=Wc(te);Se.useCustomHighlightColors=!1,w&&(Se.highlightColor=w.color,Se.highlightBackground=w.bg)}t(Se)},B=M=>{s(M);const te=yr[M];te&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...te})},ye=M=>{const te=M.target.files?.[0];if(te){const Se=new FileReader;Se.onload=Ke=>{Ke.target?.result&&xe("channelInfoImage",Ke.target.result)},Se.readAsDataURL(te)}M.target.value=""},ue=M=>{const te=M.target.files?.[0];if(te){const Se=new FileReader;Se.onload=Ke=>{Ke.target?.result&&xe("backgroundImage",Ke.target.result)},Se.readAsDataURL(te)}M.target.value=""},ht=async()=>{await ve("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(Fm),s("default"),T("1080p"),N("16:9"),F("auto"),Me(30),ce("med"),Qe.current&&(Qe.current.value=""),Ie.current&&(Ie.current.value=""),x(),De.success("All settings have been reset to default."))},mt=()=>{const M=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),te={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:S,aspectRatio:A,renderCodec:O,renderFps:ke,renderQuality:le,customFontName:v};te.backgroundSource!=="image"&&(te.backgroundImage=void 0),te.showChannelInfo||(te.channelInfoImage=void 0);try{const Se=JSON.stringify(te,null,2),Ke=new Blob([Se],{type:"application/json"}),w=URL.createObjectURL(Ke),U=document.createElement("a");U.setAttribute("href",w),U.setAttribute("download",`render_settings_${M}.json`),document.body.appendChild(U),U.click(),U.remove(),URL.revokeObjectURL(w)}catch(Se){console.error("Export failed:",Se),De.error("Failed to export settings.")}},I=M=>{const te=M.target.files?.[0];if(!te)return;const Se=new FileReader;Se.onload=Ke=>{try{const w=JSON.parse(Ke.target?.result);if(w&&typeof w=="object"){const{resolution:U,aspectRatio:ne,renderCodec:ie,renderFps:Re,renderQuality:Ue,preset:be,customFontName:Ne,...fe}=w,P={...Fm,...fe};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale"].forEach(Ye=>{P[Ye]!==void 0&&(P[Ye]=Number(P[Ye]))}),P.useCustomHighlightColors!==void 0&&(P.useCustomHighlightColors=!!P.useCustomHighlightColors),P.showChannelInfo!==void 0&&(P.showChannelInfo=!!P.showChannelInfo),P.showIntro!==void 0&&(P.showIntro=!!P.showIntro),P.showTitle!==void 0&&(P.showTitle=!!P.showTitle),P.showArtist!==void 0&&(P.showArtist=!!P.showArtist),P.showCover!==void 0&&(P.showCover=!!P.showCover),P.showLyrics!==void 0&&(P.showLyrics=!!P.showLyrics),P.highlightEffect&&(!P.highlightColor||!P.highlightBackground)){const Ye=Wc(P.highlightEffect);Ye&&(P.highlightColor||(P.highlightColor=Ye.color),P.highlightBackground||(P.highlightBackground=Ye.bg))}const je=(Ye,G)=>G.some(oe=>oe.options.some(se=>se.value===Ye));P.textEffect&&!je(P.textEffect,Om)&&(P.textEffect="shadow"),P.textAnimation&&!je(P.textAnimation,qm)&&(P.textAnimation="none"),P.transitionEffect&&!je(P.transitionEffect,$m)&&(P.transitionEffect="none"),P.highlightEffect&&!je(P.highlightEffect,Zc)&&(P.highlightEffect="karaoke"),P.backgroundSource&&!je(P.backgroundSource,jm)&&(P.backgroundSource="custom"),["current","playlist"].includes(P.renderMode)||(P.renderMode="current"),["left","center","right"].includes(P.textAlign)||(P.textAlign="center"),["top","center","bottom"].includes(P.contentPosition)||(P.contentPosition="center"),P.lyricDisplayMode&&!je(P.lyricDisplayMode,ed)&&(P.lyricDisplayMode="all"),["normal","bold"].includes(P.fontWeight)||(P.fontWeight="bold"),["normal","italic"].includes(P.fontStyle)||(P.fontStyle="normal"),["none","underline","line-through"].includes(P.textDecoration)||(P.textDecoration="none"),Kg.includes(P.textCase)||(P.textCase="none"),["auto","manual"].includes(P.introMode)||(P.introMode="auto"),P.lyricStyleTarget&&!["active-only","all"].includes(P.lyricStyleTarget)&&(P.lyricStyleTarget="active-only");const Ve=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];P.infoPosition&&!Ve.includes(P.infoPosition)&&(P.infoPosition="top-left"),P.infoStyle&&!je(P.infoStyle,Ym)&&(P.infoStyle="classic"),P.channelInfoPosition&&!Ve.includes(P.channelInfoPosition)&&(P.channelInfoPosition="bottom-right"),P.channelInfoStyle&&!je(P.channelInfoStyle,Jm)&&(P.channelInfoStyle="classic"),t(P),U&&T(U),ne&&N(ne),ie&&F(ie),Re&&Me(Number(Re)),Ue&&ce(Ue),s(be||"custom"),Ne&&Ne!==v?De.success(`Settings loaded. Note: Config used font "${Ne}".`):De.success("Settings loaded successfully!")}}catch(w){console.error(w),De.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},Se.readAsText(te),M.target.value=""};return ee.useEffect(()=>{const M=te=>{tt.current&&!tt.current.contains(te.target)&&r()};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[r]),p.jsxs("div",{ref:tt,onMouseDown:M=>M.stopPropagation(),className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[p.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(or,{size:18,className:"text-purple-400"}),p.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{ref:ct,type:"file",accept:".json,.txt",className:"hidden",onChange:I}),p.jsx("button",{onClick:()=>ct.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:p.jsx(Do,{size:16})}),p.jsx("button",{onClick:mt,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:p.jsx(Gx,{size:16})}),p.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),p.jsx("button",{onClick:ht,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:p.jsx(bb,{size:16})}),p.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:p.jsx(vi,{size:20})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Lc,{size:14})," Visual Preset"]}),p.jsx(Mi,{value:o,onChange:M=>B(M),groups:pd})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Bs,{size:14})," Render Scope"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("button",{onClick:()=>xe("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),p.jsx("button",{onClick:()=>xe("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(i0,{size:14})," Background Source"]}),p.jsx(Mi,{value:n.backgroundSource,onChange:M=>{M==="gradient"&&!n.backgroundGradient?(s("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):M==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(s("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):M==="color"&&!n.backgroundColor?(s("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):xe("backgroundSource",M)},groups:jm}),n.backgroundSource==="smart-gradient"&&p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.backgroundColor,onChange:M=>xe("backgroundColor",M.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),p.jsx("input",{type:"text",value:n.backgroundColor,onChange:M=>xe("backgroundColor",M.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.backgroundColor,onChange:M=>xe("backgroundColor",M.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.backgroundColor,onChange:M=>xe("backgroundColor",M.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&p.jsx("input",{type:"text",value:n.backgroundGradient,onChange:M=>xe("backgroundGradient",M.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&p.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),p.jsx("input",{ref:Ie,type:"file",accept:"image/*",onChange:ue,className:"hidden"}),n.backgroundImage?p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[p.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:p.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),p.jsx("button",{onClick:()=>xe("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),p.jsx("button",{onClick:()=>Ie.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:p.jsx(or,{size:14})})]}):p.jsxs("button",{onClick:()=>Ie.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Do,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(sb,{size:14})," Background Effects"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[p.jsx("button",{onClick:()=>xe("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),p.jsx("button",{onClick:()=>xe("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&p.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),p.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:p.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:M=>xe("backgroundBlurStrength",parseInt(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(rr,{size:14})," Lyric Display Mode"]}),p.jsx(Mi,{value:n.lyricDisplayMode,onChange:M=>xe("lyricDisplayMode",M),groups:ed})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Lc,{size:14})," Highlight Effect"]}),p.jsx(Mi,{value:n.highlightEffect||"none",onChange:M=>{xe("highlightEffect",M)},groups:Zc}),n.highlightEffect&&n.highlightEffect!=="none"&&p.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[p.jsxs("button",{onClick:()=>xe("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[p.jsx("span",{children:"Custom Colors"}),p.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:p.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&p.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:M=>xe("highlightColor",M.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:M=>xe("highlightColor",M.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:M=>xe("highlightBackground",M.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:M=>xe("highlightBackground",M.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(rb,{size:14})," Visible Elements"]}),p.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(M=>p.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[p.jsx("span",{className:"text-xs text-zinc-300",children:M.label}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n[M.key],onChange:te=>xe(M.key,te.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},M.key))})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(zo,{size:14})," Intro Settings"]}),p.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[p.jsx("button",{onClick:()=>xe("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),p.jsx("button",{onClick:()=>xe("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&p.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),p.jsx("textarea",{value:n.introText,onChange:M=>xe("introText",M.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(i0,{size:14})," Channel Info / Watermark"]}),p.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[p.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:M=>xe("showChannelInfo",M.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&p.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),p.jsx("input",{ref:Qe,type:"file",accept:"image/*",onChange:ye,className:"hidden"}),n.channelInfoImage?p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[p.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:p.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),p.jsx("button",{onClick:()=>xe("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),p.jsx("button",{onClick:()=>Qe.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:p.jsx(or,{size:14})})]}):p.jsxs("button",{onClick:()=>Qe.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Do,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),p.jsx("textarea",{value:n.channelInfoText??"",onChange:M=>xe("channelInfoText",M.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx("button",{onClick:()=>xe("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsx(Mi,{value:n.channelInfoStyle||"classic",onChange:M=>xe("channelInfoStyle",M),groups:Jm})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Vs,{size:12})}),p.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:M=>xe("channelInfoMarginScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Vs,{size:12})}),p.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:M=>xe("channelInfoSizeScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Ll,{size:14})," Song Info Design"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx("button",{onClick:()=>xe("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>xe("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsx(Mi,{value:n.infoStyle||"classic",onChange:M=>xe("infoStyle",M),groups:Ym})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Vs,{size:12})}),p.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:M=>xe("infoMarginScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(zo,{size:12})}),p.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:M=>xe("infoSizeScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(zo,{size:14})," Typography & Style"]}),p.jsxs("div",{className:"space-y-4 pt-1",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),p.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(M=>p.jsx("button",{onClick:()=>xe("textAlign",M),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===M?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:M},M))})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>xe("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:p.jsx(Tx,{size:14})}),p.jsx("button",{onClick:()=>xe("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:p.jsx(vx,{size:14})}),p.jsx("button",{onClick:()=>xe("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:p.jsx(bx,{size:14})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>xe("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:p.jsx(Ex,{size:14})}),p.jsx("button",{onClick:()=>xe("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:p.jsx(Xx,{size:14})}),p.jsx("button",{onClick:()=>xe("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:p.jsx(Ob,{size:14})}),p.jsx("button",{onClick:()=>xe("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:p.jsx(Pb,{size:14})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>xe("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),p.jsx("button",{onClick:()=>xe("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),p.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>xe("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),p.jsx("button",{onClick:()=>xe("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),p.jsx("button",{onClick:()=>xe("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),p.jsx("button",{onClick:()=>xe("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),p.jsx("button",{onClick:()=>xe("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),p.jsx("button",{onClick:()=>xe("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),p.jsx(IA,{value:n.fontFamily,onChange:M=>xe("fontFamily",M),customFontName:v,groups:DA})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),p.jsx("input",{ref:_e,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[p.jsx(zo,{size:14,className:"text-purple-400 shrink-0"}),p.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),p.jsx("button",{onClick:()=>{xe("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),p.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:p.jsx(cr,{size:14})})]}):p.jsxs("button",{onClick:()=>_e.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Do,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(zo,{size:12})}),p.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:M=>xe("fontSizeScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),p.jsx("span",{className:"text-zinc-300",children:p.jsx(zo,{size:16})})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&p.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.fontColor,onChange:M=>xe("fontColor",M.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.fontColor,onChange:M=>xe("fontColor",M.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),p.jsx(Mi,{value:n.textEffect,onChange:M=>xe("textEffect",M),groups:Om})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),p.jsx(Mi,{value:n.textAnimation,onChange:M=>xe("textAnimation",M),groups:qm})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),p.jsx(Mi,{value:n.transitionEffect,onChange:M=>xe("transitionEffect",M),groups:$m})]}),p.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Bs,{size:14})," Output Settings"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),p.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),p.jsx(Mi,{value:String(ke),onChange:M=>Me(parseInt(M)),groups:RA})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),p.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(M=>p.jsx("button",{onClick:()=>N(M),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===M?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:M},M))})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),p.jsx(Mi,{value:O,onChange:M=>F(M),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...K]}]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>ce("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${le==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),p.jsx("button",{onClick:()=>ce("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${le==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),p.jsx("button",{onClick:()=>ce("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${le==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),p.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[p.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[p.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",p.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),p.jsxs("button",{onClick:()=>Rt(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[p.jsx(o0,{size:14})," View Keyboard Shortcuts"]})]})]}),bt&&p.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>Rt(!1),children:p.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:M=>M.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[p.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[p.jsx(o0,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),p.jsx("button",{onClick:()=>Rt(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:p.jsx(vi,{size:18})})]}),p.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),p.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[p.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),p.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),p.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),p.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:p.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",p.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),p.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[p.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[p.jsx(Bs,{size:16})," Start Render"]}),p.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},LA=(n,t,o,s,r,d,h,y,v,m,x,S,T,A,N,O=!0,F=!0)=>{const K=w=>{const U=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return U?{r:parseInt(U[1],16),g:parseInt(U[2],16),b:parseInt(U[3],16)}:{r:255,g:255,b:255}},le=w=>{let U=0,ne=0;if(w instanceof ImageBitmap?(U=w.width,ne=w.height):w instanceof HTMLVideoElement?(U=w.videoWidth,ne=w.videoHeight):(U=w.width,ne=w.height),U&&ne){const ie=Math.max(t/U,o/ne),Re=t/2-U/2*ie,Ue=o/2-ne/2*ie;n.drawImage(w,Re,Ue,U*ie,ne*ie)}},ce=(w,U,ne)=>{if(U.includes(`
`))return U.split(`
`).flatMap(Ne=>ce(w,Ne,ne));const ie=U.split(" ");let Re=[],Ue=ie[0]||"";for(let Ne=1;Ne<ie.length;Ne++){const fe=ie[Ne],P=Ue+" "+fe;w.measureText(P).width<ne?Ue=P:(Re.push(Ue),Ue=fe)}Re.push(Ue);const be=[];for(const Ne of Re)if(w.measureText(Ne).width<=ne)be.push(Ne);else{let fe="";for(const P of Ne)w.measureText(fe+P).width<=ne?fe+=P:(fe&&be.push(fe),fe=P);fe&&be.push(fe)}return be},ke=(w,U,ne,ie,Re,Ue)=>{if(Re==="vhs"&&w instanceof CanvasRenderingContext2D)w.save(),w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(U,ne-2,ie),w.fillStyle="#00ff00",w.fillText(U,ne,ie),w.fillStyle="#0000ff",w.fillText(U,ne+2,ie),w.restore();else if(Re==="3d"){const be=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let Ne=1;Ne<=4;Ne++)w.fillText(U,ne+Ne,ie+Ne);w.fillStyle=be,w.fillText(U,ne,ie)}else if(Re==="neon"){const be=w.fillStyle;w.shadowColor=be,w.shadowBlur=20,w.fillText(U,ne,ie),w.shadowBlur=40,w.fillText(U,ne,ie)}else if(Re==="outline")w.strokeText(U,ne,ie),w.fillText(U,ne,ie);else if(Re==="gradient"){const be=w.createLinearGradient(ne,ie-20,ne,ie+20);be.addColorStop(0,w.fillStyle),be.addColorStop(1,"#ffffff"),w.fillStyle=be,w.fillText(U,ne,ie)}else if(Re==="fire")w.save(),w.shadowBlur=5,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(U,ne,ie),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(U,ne+1,ie-1),w.restore();else if(Re==="emboss")w.fillStyle="rgba(255,255,255,0.7)",w.fillText(U,ne-1,ie-1),w.fillStyle="rgba(0,0,0,0.7)",w.fillText(U,ne+1,ie+1),w.fillStyle="rgba(128,128,128,0.5)",w.fillText(U,ne,ie);else if(Re==="mirror")w.fillText(U,ne,ie),w.save(),w.translate(ne,ie),w.scale(1,-1),w.translate(-ne,-ie),w.globalAlpha*=.2,w.fillText(U,ne,ie-40),w.restore();else if(Re==="neon-multi")w.fillStyle,w.shadowBlur=10,w.shadowColor="#fff",w.fillText(U,ne,ie),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(U,ne,ie),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(U,ne,ie);else if(Re==="gold"){const be=w.createLinearGradient(ne,ie-20,ne,ie+20);be.addColorStop(0,"#d4af37"),be.addColorStop(1,"#C5A028"),w.fillStyle=be,w.fillText(U,ne,ie)}else if(Re==="chrome"){const be=w.createLinearGradient(ne,ie-20,ne,ie+20);be.addColorStop(0,"#ebebeb"),be.addColorStop(.5,"#616161"),be.addColorStop(.51,"#ebebeb"),be.addColorStop(1,"#ebebeb"),w.fillStyle=be,w.fillText(U,ne,ie)}else if(Re==="frozen")w.shadowColor="#03A9F4",w.shadowBlur=20,w.fillStyle="#ffffff",w.fillText(U,ne,ie);else if(Re==="rainbow"){const be=w.createLinearGradient(ne-100,ie,ne+100,ie);be.addColorStop(0,"violet"),be.addColorStop(.16,"indigo"),be.addColorStop(.32,"blue"),be.addColorStop(.48,"green"),be.addColorStop(.64,"yellow"),be.addColorStop(.8,"orange"),be.addColorStop(1,"red"),w.fillStyle=be,w.fillText(U,ne,ie)}else Re==="retro"?(w.fillStyle="#ff00ff",w.shadowColor="#00ffff",w.shadowBlur=0,w.shadowOffsetX=4,w.shadowOffsetY=4,w.fillText(U,ne,ie)):Re==="hologram"?(w.fillStyle="rgba(0, 255, 255, 0.7)",w.shadowColor="rgba(0,255,255,0.5)",w.shadowBlur=10,w.fillText(U,ne,ie)):(Re==="comic"&&(w.lineWidth=3,w.strokeStyle="#000000",w.strokeText(U,ne,ie),w.fillStyle="#ffcc00"),w.fillText(U,ne,ie));if(Ue&&Ue!=="none"){const Ne=w.measureText(U).width;let fe=ne;if(w.textAlign==="center"?fe=ne-Ne/2:w.textAlign==="right"&&(fe=ne-Ne),w.save(),w.beginPath(),w.lineWidth=Math.max(2,4*ue),w.strokeStyle=w.fillStyle,Ue.includes("line-through")&&(w.moveTo(fe,ie),w.lineTo(fe+Ne,ie)),Ue.includes("underline")){const P=w.font.match(/(\d+(\.\d+)?)px/),Ae=P?parseFloat(P[1]):50,je=ie+Ae*.4;w.moveTo(fe,je),w.lineTo(fe+Ne,je)}w.stroke(),w.restore()}},Me=(w,U,ne,ie,Re,Ue,be,Ne,fe,P,Ae,je,Ve)=>{const Ye=Ne?.textCase||"none",G=(Y,Te)=>{if(!Y)return Y;if(Ye==="upper")return Y.toUpperCase();if(Ye==="lower")return Y.toLowerCase();if(Ye==="title")return Y.replace(/\w\S*/g,X=>X.charAt(0).toUpperCase()+X.substr(1).toLowerCase());if(Ye==="sentence"){const X=Y.toLowerCase();return Te?X.charAt(0).toUpperCase()+X.slice(1):X}return Ye==="invert"?Y.replace(/\w\S*/g,X=>X.charAt(0).toLowerCase()+X.slice(1).toUpperCase()):Y};let oe=U.words||[];oe.length===0&&(oe=U.text.split(" ").map(Te=>({text:Te,startTime:U.time,endTime:U.endTime||U.time+3})));const se=oe.filter(Y=>Y.text.trim().length>0).map((Y,Te)=>({...Y,text:G(Y.text,Te===0).trim()}));w.font=`${je} ${Ae} ${P}px ${fe}`;const Ce=[];let ge=[],he=0;const E=w.measureText("M").width*.25;se.forEach((Y,Te)=>{const X=w.measureText(Y.text).width;let Le=!Y.text.endsWith(" ");const He=/[-]$/,dt=/^[-]/;He.test(Y.text.trim())&&(Le=!1);const Ct=se[Te+1];Ct&&dt.test(Ct.text.trim())&&(Le=!1);const Bt=Le?E:0;he+X>Re&&ge.length>0&&(Ce.push(ge),ge=[],he=0),ge.push(Y),he+=X+Bt}),ge.length>0&&Ce.push(ge);const C=ie-(Ce.length-1)*Ue/2;let L=Ne.highlightColor||"#ef4444",V=Ne.highlightBackground||"#ffffff";const k=Ne.highlightEffect||"none";Ne.useCustomHighlightColors||(k.includes("blue")||k.includes("cyan")?(L="#3b82f6",V="#3b82f6"):k.includes("purple")?(L="#a855f7",V="#a855f7"):k.includes("green")?(L="#22c55e",V="#22c55e"):k.includes("pink")?(L="#ec4899",V="#ec4899"):k.includes("neon")?(L="#ffffff",V="#ffffff"):k.includes("gold")?(L="#FFD700",V="#B8860B"):k.includes("chrome")?(L="#E0E0E0",V="#757575"):k.includes("fire")?(L="#FF4500",V="#FF0000"):k.includes("glass")?(L="#ffffff",V="rgba(255,255,255,0.1)"):k==="karaoke"&&(L="#ef4444",V="#ef4444"));let ae=Ne.fontColor||"#ffffff";Ce.forEach((Y,Te)=>{const X=C+Te*Ue;let Be=0;Y.forEach((He,dt)=>{if(Be+=w.measureText(He.text).width,dt<Y.length-1){let Bt=!He.text.endsWith(" ");const Zt=/[-]$/,Ht=/^[-]/;Zt.test(He.text.trim())&&(Bt=!1);const ut=Y[dt+1];ut&&Ht.test(ut.text.trim())&&(Bt=!1),Be+=Bt?E:0}});let Le=ne;w.textAlign==="center"?Le=ne-Be/2:w.textAlign==="right"&&(Le=ne-Be),w.save(),w.textAlign="left",w.textBaseline="middle",Y.forEach((He,dt)=>{const Ct=w.measureText(He.text).width,Bt=be>=He.startTime,Zt=be>=He.startTime&&be<He.endTime;let Ht=ae;const ut=k.includes("fill")||k==="karaoke-smooth",we=ut?Bt:Zt;if(we)if(k==="karaoke-smooth")if(Zt){const at=He.endTime-He.startTime,ft=be-He.startTime,wt=Math.max(0,Math.min(1,ft/at)),Rn=w.createLinearGradient(Le,0,Le+Ct,0);Rn.addColorStop(wt,L),Rn.addColorStop(Math.min(1,wt+.001),ae),Ht=Rn}else Ht=L;else Ht=L;if(w.save(),w.fillStyle=Ht,(Zt||ut&&Bt)&&(k.includes("pill")||k.includes("box")||k.includes("rounded")||k.includes("fill")||k.includes("glass"))&&we){const at=k.includes("pill")?P*.4:P*.15;w.fillStyle=V;let ft=4*Ve;k.includes("pill")?ft=999:k.includes("rounded")||k.includes("glass")?ft=8*Ve:k.includes("box")&&(ft=0),k.includes("glass")&&(w.fillStyle="rgba(255,255,255,0.1)",w.shadowColor="rgba(255,255,255,0.2)",w.shadowBlur=10),w.beginPath(),w.roundRect?w.roundRect(Le-at,X-Ue/2,Ct+at*2,Ue,ft):w.rect(Le-at,X-Ue/2,Ct+at*2,Ue),w.fill(),k.includes("glass")&&(w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.stroke()),k.includes("fill")||k.includes("pill")||k.includes("box")||k.includes("rounded")?(w.fillStyle="#000000",Ht="#000000"):w.fillStyle=L}if(we){if(k.includes("underline")){const at=Math.max(2,P*.08),ft=X+P*.6;w.fillStyle=L,w.fillRect(Le,ft,Ct,at),w.fillStyle=Ht}if((k.includes("glow")||k.includes("neon"))&&(k.includes("neon")?(w.fillStyle="#ffffff",w.shadowColor=L,w.shadowBlur=20):(w.shadowColor=L,w.shadowBlur=10)),k.includes("outline")&&(w.strokeStyle=L,w.lineWidth=2*Ve,w.strokeText(He.text,Le,X),w.fillStyle="transparent",k==="karaoke-outline"&&(Ht="transparent",w.fillStyle="transparent")),k.includes("shadow")&&(w.shadowColor="#000000",w.shadowOffsetX=3*Ve,w.shadowOffsetY=3*Ve,w.shadowBlur=0),k.includes("gradient")){const at=w.createLinearGradient(Le,X-Ue/2,Le+Ct,X+Ue/2);at.addColorStop(0,L),at.addColorStop(1,V),w.fillStyle=at,Ht=at}}let Ge=X,ot=Le,Je=0,_t=1,yt=1,nt=1,un=0;if(we){const at=be-He.startTime;if(k.includes("bounce")||k==="karaoke-bounce")Ge-=10*Ve;else if(k.includes("wave"))Ge+=Math.sin(be*5+dt)*8*Ve;else if(k.includes("pulse")){const wt=1+Math.sin(be*6)*.1;_t=wt,yt=wt}else if(k.includes("shake"))ot+=(Math.random()-.5)*6*Ve,Ge+=(Math.random()-.5)*6*Ve;else if(k.includes("wobble"))Je=Math.sin(be*6)*.1;else if(k.includes("rotate")&&!k.includes("in"))Je=Math.sin(be*3)*.1;else if(k.includes("spin"))Je=be*3%(Math.PI*2);else if(k.includes("jello"))_t=1+Math.sin(be*8)*.15,yt=1-Math.sin(be*8)*.15;else if(k.includes("heartbeat")){const wt=be*2%1;(wt<.15||wt>.3&&wt<.45)&&(_t=1.15,yt=1.15)}else if(k.includes("flash"))nt=.5+Math.sin(be*10)*.5;else if(k.includes("tada")){const wt=be*2%1;wt<.1?(Je=-.05,_t=.9):wt<.2&&(Je=.05,_t=1.1)}else k.includes("swing")?Je=Math.sin(be*4)*.15:k.includes("glitch")&&Math.sin(be*15)>.8&&(ot+=(Math.random()-.5)*10,Ge+=(Math.random()-.5)*10);const ft=.3;if(at<ft){const wt=at/ft,Ft=(Hn=>1-Math.pow(1-Hn,3))(wt);if(k.includes("fade"))nt=wt;else if(k.includes("slide"))Ge+=(1-Ft)*30*Ve,nt=Ft;else if(k.includes("drop"))Ge-=(1-Ft)*50*Ve,nt=Ft;else if(k.includes("zoom")||k.includes("scale")){const Hn=.5+.5*Ft;_t*=Hn,yt*=Hn}else if(k.includes("elastic")){const Hn=wt===0?0:wt===1?1:Math.pow(2,-10*wt)*Math.sin((wt*10-.75)*(2*Math.PI)/3)+1;_t*=Hn,yt*=Hn}else if(k.includes("flip"))yt*=Ft;else if(k.includes("rotate-in"))Je+=(1-Ft)*-1,nt=Ft;else if(k.includes("roll"))ot-=(1-Ft)*50*Ve,Je-=(1-Ft)*Math.PI,nt=Ft;else if(k.includes("lightspeed"))ot+=(1-Ft)*100*Ve,nt=Ft;else if(k.includes("blur"))un=(1-Ft)*10,nt=Ft;else if(k.includes("shatter")){const Hn=1+(1-Ft)*2;_t*=Hn,yt*=Hn,un=(1-Ft)*10,nt=Ft}else k.includes("spiral")&&(_t*=Ft,yt*=Ft,Je+=(1-Ft)*Math.PI*2)}else k.includes("scale")&&(_t*=1.3,yt*=1.3)}if(w.save(),nt<1&&(w.globalAlpha*=nt),un>0&&(w.filter=`blur(${un}px)`),Je!==0||_t!==1||yt!==1){const at=ot+Ct/2,ft=Ge;w.translate(at,ft),w.rotate(Je),w.scale(_t,yt),w.translate(-at,-ft)}if(we){if(k.includes("gradient")||k.includes("chrome")||k.includes("gold")){const at=w.createLinearGradient(ot,Ge-Ue/2,ot,Ge+Ue/2);k.includes("gold")?(at.addColorStop(0,"#d4af37"),at.addColorStop(1,"#C5A028")):k.includes("chrome")?(at.addColorStop(0,"#ebebeb"),at.addColorStop(.5,"#616161"),at.addColorStop(.51,"#ebebeb"),at.addColorStop(1,"#ebebeb")):(at.addColorStop(0,L),at.addColorStop(1,V)),w.fillStyle=at}if(k.includes("shadow")&&(w.save(),w.fillStyle="#000000",w.fillText(He.text,ot+2*Ve,Ge+2*Ve),w.restore()),k.includes("3d")){const at=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let ft=1;ft<=3;ft++)w.fillText(He.text,ot+ft*Ve,Ge+ft*Ve);w.fillStyle=at}if(k.includes("neon-multi"))w.shadowBlur=10,w.shadowColor="#fff",w.fillText(He.text,ot,Ge),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(He.text,ot,Ge),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(He.text,ot,Ge);else if(k.includes("retro")||k.includes("vhs"))w.fillStyle="#ff0000",w.globalCompositeOperation="screen",w.fillText(He.text,ot-2,Ge),w.fillStyle="#00ff00",w.fillText(He.text,ot,Ge),w.fillStyle="#0000ff",w.fillText(He.text,ot+2,Ge);else if(k.includes("fire"))w.shadowBlur=5,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(He.text,ot,Ge),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(He.text,ot+1*Ve,Ge-1*Ve);else if(k.includes("typewriter")){const at=be-He.startTime,ft=He.endTime-He.startTime,wt=Math.min(1,Math.max(0,at/ft)),Rn=Math.floor(He.text.length*wt),Ft=He.text.substring(0,Rn);k.includes("outline")?(w.strokeStyle=L,w.strokeText(Ft,ot,Ge)):w.fillText(Ft,ot,Ge)}else!k.includes("neon-multi")&&!k.includes("retro")&&!k.includes("vhs")&&!k.includes("fire")&&(k.includes("outline")?(w.strokeStyle=L,w.lineWidth=2*Ve,w.strokeText(He.text,ot,Ge)):w.fillText(He.text,ot,Ge))}else w.fillText(He.text,ot,Ge);const hn=Ne?.textDecoration||"none";if(hn!=="none"){if(w.lineWidth=Math.max(2,3*Ve),w.strokeStyle=Ht,w.beginPath(),hn.includes("underline")&&!k.includes("underline")){const at=Ge+P*.45;w.moveTo(ot,at),w.lineTo(ot+Ct,at)}hn.includes("line-through")&&(w.moveTo(ot,Ge),w.lineTo(ot+Ct,Ge)),w.stroke()}w.restore(),w.restore();let Yn=!He.text.endsWith(" ");const Gn=/[-]$/,ai=/^[-]/;Gn.test(He.text.trim())&&(Yn=!1);const Pi=Y[dt+1];Pi&&ai.test(Pi.text.trim())&&(Yn=!1),Le+=Ct+(Yn?E:0)}),w.restore()})},De=(w,U,ne,ie,Re,Ue,be,Ne)=>{const fe=ce(w,U,Re),P=ie-(fe.length-1)*Ue/2;fe.forEach((Ae,je)=>{const Ve=P+je*Ue;if(be==="glass"){const Ye=w.measureText(Ae).width;w.save(),w.fillStyle="rgba(255, 255, 255, 0.1)",w.beginPath(),w.roundRect?w.roundRect(ne-(w.textAlign==="center"?Ye/2:w.textAlign==="right"?Ye:0)-10,Ve-Ue/2,Ye+20,Ue,8):w.rect(ne-(w.textAlign==="center"?Ye/2:w.textAlign==="right"?Ye:0)-10,Ve-Ue/2,Ye+20,Ue),w.fill(),w.strokeStyle="rgba(255, 255, 255, 0.2)",w.stroke(),w.restore()}ke(w,Ae,ne,Ve,be,Ne)})},ve='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',tt='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',_e='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Qe='"Metal Mania", cursive',Ie='"Fredoka One", cursive',ct='"Shadows Into Light", cursive',bt='"Dancing Script", cursive',Rt='"Orbitron", sans-serif',xe='"UnifrakturMaguntia", cursive';let B=ve;m==="classic"?B=tt:m==="monospace"?B=_e:m==="metal"?B=Qe:m==="kids"?B=Ie:m==="sad"?B=ct:m==="romantic"?B=bt:m==="tech"?B=Rt:m==="gothic"?B=xe:m==="custom"&&(B=N?.fontFamily||ve),x&&(B="CustomFont, sans-serif"),N&&N.fontFamily!=="sans-serif"&&(B=N.fontFamily);const ye=t<=o,ue=Math.min(t,o)/1080;if(N&&(N.backgroundSource==="color"||N.backgroundSource==="smart-gradient")?n.fillStyle=N.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),N?.backgroundSource==="gradient"&&N.backgroundGradient)n.fillStyle=N.backgroundGradient,n.fillRect(0,0,t,o);else if(N?.backgroundSource==="smart-gradient"){const w=N.backgroundColor||"#312e81",U=K(w),ne=n.createLinearGradient(0,0,t,o);ne.addColorStop(0,w),ne.addColorStop(.5,`rgb(${Math.floor(U.r*.6)}, ${Math.floor(U.g*.6)}, ${Math.floor(U.b*.6)})`),ne.addColorStop(1,"#000000"),n.fillStyle=ne,n.fillRect(0,0,t,o)}else if(N?.backgroundSource==="image"&&N.backgroundImage){const w=y.get("__custom_bg__");w&&le(w)}if(N&&N.backgroundBlurStrength>0?n.filter=`blur(${N.backgroundBlurStrength}px)`:T&&(n.filter="blur(12px)"),!N||N.backgroundSource==="timeline"||N.backgroundSource==="custom"){const w=N?N.backgroundSource==="timeline":!0;let U=!1;if(w){const ne=h.filter(ie=>ie.type!=="audio"&&s>=ie.startTime&&s<ie.endTime);ne.sort((ie,Re)=>(ie.layer||0)-(Re.layer||0)),ne.length>0&&(ne.forEach(ie=>{const Re=ie.layer||0;if(N&&N.layerVisibility?.visual?.[Re]===!1)return;const Ue=ie.type==="video"?v.get(ie.id):null,be=ie.type!=="video"?y.get(ie.id):null;Ue?le(Ue):be&&le(be)}),U=!0)}if(!U&&d.coverUrl&&h.length===0){const ne=d.backgroundType==="video"?v.get("background"):null,ie=y.get("cover");ne?le(ne):ie&&le(ie)}}if((N&&N.backgroundBlurStrength>0||T)&&(n.filter="none"),["just_video","none"].includes(m)||(n.fillStyle=N&&(N.backgroundSource==="color"||N.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),m==="just_video"||m==="none")return;const ht=r.findIndex((w,U)=>{if(w.endTime!==void 0)return s>=w.time&&s<w.endTime;const ne=r[U+1];return s>=w.time&&(!ne||s<ne.time)});let mt=ht;if(mt===-1&&r.length>0)if(s<r[0].time)mt=0;else{const w=r.findIndex(U=>U.time>s);mt=w!==-1?w:r.length-1}const I=N?.introMode==="manual"&&N.introText?N.introText:`${d.title}
${d.artist}`;let M=ht===-1&&s<5&&(N?.showIntro??!0)&&(N?.introMode!=="manual"||F)&&(r.length===0||s<r[0].time),te=(ye?50:60)*ue,Se=(ye?25:30)*ue,Ke=(ye?80:100)*ue;if(m==="large"?(te=(ye?90:120)*ue,Ke=(ye?110:140)*ue):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(te=(ye?80:110)*ue,Ke=(ye?110:140)*ue):["sad","romantic","gothic"].includes(m)?(te=(ye?60:75)*ue,Ke=(ye?90:120)*ue):["slideshow","subtitle"].includes(m)&&(te=(ye?30:40)*ue),te*=S,Se*=S,Ke*=S,(N?.showLyrics??!0)&&(ht!==-1||M||N?.lyricDisplayMode==="all"&&r.length>0)){let w=o/2;N?.contentPosition==="top"?w=o*.25:N?.contentPosition==="bottom"&&(w=o*.75);let U=0;const ne=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(ne||m==="slideshow"||m==="subtitle"){const Ne=M?{text:I}:r[ht]||r[mt];if(Ne){n.font=`900 ${te}px ${B}`;const fe=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?Ne.text.toUpperCase():Ne.text,P=ce(n,fe,t*.9);P.length>1&&(U=(P.length-1)*(te*1.2)/2)}}let ie=ne?-1:-2,Re=ne?1:2;N?.lyricDisplayMode==="active-only"?(ie=0,Re=0):N?.lyricDisplayMode==="next-only"?(ie=0,Re=1):N?.lyricDisplayMode==="previous-next"?(ie=-1,Re=1):N?.lyricDisplayMode==="all"&&(ie=-r.length,Re=r.length);const Ue=new Map,be=new Map;{const Ne=Math.max((ye?30:40)*ue,Ke-te);for(let fe=ie;fe<=Re;fe++){let P=0,Ae=!1;if(M&&fe===0){const je=te*1.2,Ve=Se*1.2,G=I.split(`
`).length>1;P=je+(G?Ve:0),Ae=!0}else{const je=mt+fe;if(je>=0&&je<r.length){const Ve=r[je];Ae=je===ht;const Ye=Ae?te:Se;let G=Ae?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",oe="normal";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||Ae?(N?.fontWeight&&(G=N.fontWeight),N?.fontStyle&&(oe=N.fontStyle)):(G="400",oe="normal")),n.font=`${oe} ${G} ${Ye}px ${B}`;let se=Ve.text,Ce=N?.textCase||"none";Ce==="none"&&Ae&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Ce="upper"),Ce==="upper"?se=se.toUpperCase():Ce==="lower"?se=se.toLowerCase():Ce==="title"?se=se.replace(/\w\S*/g,he=>he.charAt(0).toUpperCase()+he.substr(1).toLowerCase()):Ce==="sentence"?se=se.charAt(0).toUpperCase()+se.slice(1).toLowerCase():Ce==="invert"&&(se=se.replace(/\w\S*/g,he=>he.charAt(0).toLowerCase()+he.slice(1).toUpperCase())),P=ce(n,se,t*.9).length*(Ye*1.2)}}be.set(fe,P)}Ue.set(0,w);for(let fe=1;fe<=Re;fe++){const P=Ue.get(fe-1)??w,Ae=be.get(fe-1)??0,je=be.get(fe)??0;Ue.set(fe,P+Ae/2+Ne+je/2)}for(let fe=-1;fe>=ie;fe--){const P=Ue.get(fe+1)??w,Ae=be.get(fe+1)??0,je=be.get(fe)??0;Ue.set(fe,P-Ae/2-Ne-je/2)}}for(let Ne=ie;Ne<=Re;Ne++){let fe=null,P=!1;if(M)Ne===0&&(fe={time:0,text:I},P=!0);else{const Ae=mt+Ne;Ae>=0&&Ae<r.length&&(fe=r[Ae],P=Ae===ht)}if(fe){N?.lyricDisplayMode,n.textAlign=N?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const Ae=N?.fontColor||"#ffffff";let je=Ae;if(!P){const we=K(Ae);je=`rgba(${we.r}, ${we.g}, ${we.b}, 0.5)`}let Ve=P?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",Ye="normal",G="none";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||P?(N?.fontWeight&&(Ve=N.fontWeight),N?.fontStyle&&(Ye=N.fontStyle),N?.textDecoration&&(G=N.textDecoration)):(Ve="400",Ye="normal",G="none")),n.font=`${Ye} ${Ve} ${P?te:Se}px ${B}`,n.fillStyle=je;const oe=N?.transitionEffect||"none";let se=1,Ce=0,ge=0,he=1,E=1,C=0,L=0;if(P&&oe!=="none"){const we=s-fe.time,Ge=fe.endTime?fe.endTime-s:.5,ot=.5,Je=we<ot?we/ot:fe.endTime&&Ge<ot?Ge/ot:1;if(Je<1){se=Math.min(1,Je*2);const _t=nt=>1+2.70158*Math.pow(nt-1,3)+1.70158*Math.pow(nt-1,2),yt=nt=>{const un=2*Math.PI/3;return nt===0?0:nt===1?1:Math.pow(2,-10*nt)*Math.sin((nt*10-.75)*un)+1};if(oe==="slide")Ce=(1-Je)*(we<ot?30:-30);else if(oe==="zoom"){const nt=.5+Je*.5;he=nt,E=nt}else if(oe==="blur")C=(1-Je)*10;else if(oe==="float")Ce=(1-Je)*(we<ot?50:-50);else if(oe==="drop")Ce=(1-_t(Je))*-200,se=Je;else if(oe==="flip")E=Je;else if(oe==="rotate-in")L=(1-Je)*-Math.PI/2,se=Je;else if(oe==="spiral")he=Je,E=Je,L=(1-Je)*Math.PI*2,se=Je;else if(oe==="shatter"){const nt=3-2*Je;he=nt,E=nt,C=(1-Je)*20,se=Je}else if(oe==="lightspeed")ge=(1-Je)*300,se=Je;else if(oe==="roll")ge=(1-Je)*-300,L=(1-Je)*-Math.PI,se=Je;else if(oe==="elastic"){const nt=yt(Je);he=nt,E=nt,se=Je}}}n.save(),n.globalAlpha=se,C>0&&(n.filter=`blur(${C}px)`);const V=P&&N?.textAnimation||"none";let k=fe.text,ae=N?.textCase||"none";ae==="none"&&P&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(ae="upper"),ae==="upper"?k=k.toUpperCase():ae==="lower"?k=k.toLowerCase():ae==="title"?k=k.replace(/\w\S*/g,we=>we.charAt(0).toUpperCase()+we.substr(1).toLowerCase()):ae==="sentence"?k=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase():ae==="invert"&&(k=k.replace(/\w\S*/g,we=>we.charAt(0).toLowerCase()+we.slice(1).toUpperCase()));let Y=0,Te=0,X=1,Be=1,Le=0;if(P&&V!=="none")if(V==="bounce")Te=Math.sin(s*6)*15*ue;else if(V==="pulse"){const we=1+Math.sin(s*4)*.08;X=we,Be=we}else if(V==="wave")Te=Math.sin(s*4)*20*ue,Le=Math.sin(s*4)*.05;else if(V==="glitch")Math.sin(s*10)>.8&&(Y=(Math.random()-.5)*15*ue,Te=(Math.random()-.5)*15*ue);else if(V==="shake")Y=(Math.random()-.5)*5*ue,Te=(Math.random()-.5)*5*ue;else if(V==="typewriter"){const Ge=Math.floor((s-fe.time)*30);k=k.substring(0,Math.max(0,Ge))}else if(V==="wobble"){Le=Math.sin(s*5)*.05;const we=1+Math.sin(s*3)*.05;X=we,Be=we}else if(V==="breathe"){const we=1+Math.sin(s*2)*.03;X=we,Be=we}else if(V==="rotate")Le=Math.sin(s*2)*.05;else if(V==="sway")Le=Math.sin(s*2)*.08;else if(V==="flicker")n.globalAlpha=se*(.8+Math.random()*.2);else if(V==="jello")X=1+Math.sin(s*6)*.1,Be=1-Math.sin(s*6)*.1;else if(V==="spin")Le=s%2*Math.PI;else if(V==="heartbeat"){const we=s*1.5%1;(we<.1||we>.3&&we<.4)&&(X=1.1,Be=1.1)}else if(V==="tada"){const we=s*1.5%1;we<.1?(X=.9,Be=.9,Le=-.05):we<.2?(X=1.1,Be=1.1,Le=.05):(X=1,Be=1,Le=0)}else V==="swing"&&(Le=Math.sin(s*3)*.1);let He=0;Ue.has(Ne)?He=Ue.get(Ne)+(Ne===0?Ce:0):(He=m==="subtitle"&&Ne===0&&N?.lyricDisplayMode!=="all"?o-120*ue:w+Ne*Ke+(Ne===0?Ce:0),m!=="custom"&&(Ne<0?He-=U:Ne>0&&(He+=U))),He+=Te;let dt=t/2;n.textAlign==="left"?dt=60*ue:n.textAlign==="right"&&(dt=t-60*ue),dt+=ge+Y;const Ct=he*X,Bt=E*Be,Zt=L+Le;(Ct!==1||Bt!==1||Zt!==0)&&(n.translate(dt,He),n.rotate(Zt),n.scale(Ct,Bt),n.translate(-dt,-He));const Ht=P?N?.textEffect||"preset":"none";if(M&&Ne===0&&N?.introMode!=="manual"){const we=k.split(`
`),Ge=we[0],ot=we.slice(1).join(`
`),Je=te*1.2,_t=Se*1.2,yt=20*ue;let nt=He;ot&&(nt=He-_t/2-yt/2);const un=He+Je/2+yt/2;if(n.font=`${Ye} ${Ve} ${te}px ${B}`,De(n,Ge,dt,nt,t*.9,Je,Ht,G),ot){const hn=m==="custom"&&N?.fontWeight?N.fontWeight:"400";n.font=`${Ye} ${hn} ${Se}px ${B}`,De(n,ot,dt,un,t*.9,_t,Ht,G)}}else{const we=P?te:Se;N&&N.highlightEffect&&N.highlightEffect,P&&fe?Me(n,fe,dt,He,t*.9,we*1.2,s,N,B,we,Ve,Ye,ue):De(n,k,dt,He,t*.9,we*1.2,Ht,G)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const w=N?N.showTitle||N.showArtist:!0,U=N?N.showCover:!0;if(w||U)if(m==="custom"){const ne=N?.infoPosition||"top-left",ie=N?.infoStyle||"classic",Re=ie==="box",Ue=Re?16*ue:12*ue,be=40*ue*(N?.infoMarginScale??1);let Ne="left",fe="top";ne.includes("left")?Ne="left":ne.includes("right")?Ne="right":Ne="center",ne.includes("top")?fe="top":fe="bottom";const P=N?.infoSizeScale??1,Ae=(ie==="minimal"||ie==="modern"?0:100*ue)*P,je=U&&Ae>0&&d.coverUrl!==null,Ve=je?d.backgroundType==="video"?v.get("background"):y.get("cover"):null,Ye=(ie==="minimal"?20:ie==="modern"||ie==="modern_art"?40:28)*ue,G=(ie==="minimal"?14:ie==="modern"||ie==="modern_art"?24:18)*ue,oe=Ye*P,se=G*P,Ce=`bold ${oe}px ${B}`,ge=`${se}px ${B}`,he=20*ue,E=Re?24*ue:0,C=N?.fontColor||"#ffffff",L=ie==="modern"||ie==="modern_art"?C:N?.fontColor||"#d4d4d8";n.font=Ce;const V=n.measureText(d.title),k=N?.showTitle?V.width:0;n.font=ge;const ae=n.measureText(d.artist),Y=N?.showArtist?ae.width:0;let Te=0,X=0;if(Ne==="center"){Te=Math.max(je&&Ve?Ae:0,k,Y)+E*2;let we=0;je&&Ve&&(we+=Ae),(N?.showTitle??!0)&&(we+=(je&&Ve?he:0)+oe),(N?.showArtist??!0)&&(we+=(je&&Ve||(N?.showTitle??!0)?5*ue:0)+se),X=we+E*2}else{const ut=Math.max(k,Y);Te=(je&&Ve?Ae+he:0)+ut+E*2;const Ge=(N?.showTitle?oe:0)+(N?.showArtist?se+5*ue:0);X=Math.max(Ge,je&&Ve?Ae:0)+E*2}let Be=0,Le=0;Ne==="left"?Be=be:Ne==="right"?Be=t-be:Be=t/2,fe==="top"?Le=be:Le=o-be;let He=0,dt=0;Ne==="left"?He=Be:Ne==="right"?He=Be-Te:He=Be-Te/2,fe==="top"?dt=Le:dt=Le-X,Re&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(He,dt,Te,X,Ue),n.fill(),n.restore());const Ct=He+E,Bt=dt+E,Zt=Te-E*2,Ht=X-E*2;if(Ne==="center"){let ut=Bt;const we=Ct+Zt/2;if(n.textAlign="center",fe==="top"){if(je&&Ve){n.save(),n.beginPath();const Ge=we-Ae/2;ie==="circle_art"?n.arc(we,ut+Ae/2,Ae/2,0,Math.PI*2):n.roundRect(Ge,ut,Ae,Ae,Ue/2),n.clip(),n.drawImage(Ve,Ge,ut,Ae,Ae),n.restore(),ut+=Ae+he}(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ce,n.textBaseline="top",n.fillText(d.title,we,ut),ut+=oe+5*ue),(N?.showArtist??!0)&&(n.fillStyle=L,n.font=ge,n.textBaseline="top",n.fillText(d.artist,we,ut))}else{if(je&&Ve){n.save(),n.beginPath();const Ge=we-Ae/2;ie==="circle_art"?n.arc(we,ut+Ae/2,Ae/2,0,Math.PI*2):n.roundRect(Ge,ut,Ae,Ae,Ue/2),n.clip(),n.drawImage(Ve,Ge,ut,Ae,Ae),n.restore(),ut+=Ae+he}(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ce,n.textBaseline="top",n.fillText(d.title,we,ut),ut+=oe+5*ue),(N?.showArtist??!0)&&(n.fillStyle=L,n.font=ge,n.textBaseline="top",n.fillText(d.artist,we,ut))}}else{const ut=Ne==="right",we=Bt+Ht/2;let Ge=Ct;if(ut&&(Ge=Ct+Zt),je&&Ve){const _t=we-Ae/2,yt=ut?Ge-Ae:Ge;n.save(),n.beginPath(),ie==="circle_art"?n.arc(yt+Ae/2,_t+Ae/2,Ae/2,0,Math.PI*2):n.roundRect(yt,_t,Ae,Ae,Ue/2),n.clip(),n.drawImage(Ve,yt,_t,Ae,Ae),n.restore(),ut?Ge-=Ae+he:Ge+=Ae+he}const ot=(N?.showTitle?oe:0)+(N?.showArtist?se+5*ue:0);let Je=we-ot/2;n.textAlign=ut?"right":"left",n.textBaseline="top",(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ce,n.fillText(d.title,Ge,Je),Je+=oe+5*ue),(N?.showArtist??!0)&&(n.fillStyle=L,n.font=ge,n.fillText(d.artist,Ge,Je))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(w){n.textAlign="center",n.textBaseline="middle";let ne=80*ue;["testing","testing_up","one_line","one_line_up"].includes(m)&&(ne=120*ue),(N?.showTitle??!0)&&(n.font=`bold ${20*ue}px ${B}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?d.title.toUpperCase():d.title,t/2,o-ne-30*ue)),(N?.showArtist??!0)&&(n.font=`${16*ue}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,t/2,o-ne))}}else{const ne=40*ue*(N?.infoMarginScale??1),ie=t===o,Re=(ye?ie?110:150:100)*ue,Ue=d.coverUrl?y.get("cover"):null,be=12*ue;if(ye){const Ne=ne*(ie?1.5:3),fe=t/2,P=fe-Re/2,Ae=Ne;if(U&&(n.save(),n.beginPath(),n.roundRect(P,Ae,Re,Re,be),n.clip(),Ue?n.drawImage(Ue,P,Ae,Re,Re):(n.fillStyle="#27272a",n.fillRect(P,Ae,Re,Re)),n.restore()),w){n.textAlign="center",n.textBaseline="top";const je=Ae+(U?Re+25*ue:0);(N?.showTitle??!0)&&(n.font=`bold ${(ie?26:36)*ue}px ${B}`,n.fillStyle="#ffffff",n.fillText(d.title,fe,je)),(N?.showArtist??!0)&&(n.font=`${(ie?18:24)*ue}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,fe,je+(N?.showTitle??!0?(ie?30:40)*ue:0)))}}else{const Ne=ne,fe=ne;if(U&&(n.save(),n.beginPath(),n.roundRect(Ne,fe,Re,Re,be),n.clip(),Ue?n.drawImage(Ue,Ne,fe,Re,Re):(n.fillStyle="#27272a",n.fillRect(Ne,fe,Re,Re)),n.restore()),w){n.textAlign="left",n.textBaseline="top";const P=Ne+(U?Re+25*ue:0),Ae=28*ue,je=fe+Re/2-Ae;(N?.showTitle??!0)&&(n.font=`bold ${Ae}px ${B}`,n.fillStyle="#ffffff",n.fillText(d.title,P,je)),(N?.showArtist??!0)&&(n.font=`${18*ue}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,P,je+(N?.showTitle??!0?Ae+5*ue:0)))}}}}if(N?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const w=N.channelInfoPosition||"bottom-right",U=N.channelInfoStyle||"classic",ne=N.channelInfoSizeScale??1,ie=N.channelInfoMarginScale??1,Re=y.get("__channel_info__"),Ue=N.channelInfoText;if(!(!Re&&!Ue)){if(!(U==="logo"&&!Re)){if(!(U==="minimal"&&!Ue)){n.save();const be=40*ue*ie,Ne=80*ue*ne,fe=U==="modern"||U==="logo"?Ne*1.2:Ne,P=20*ue*ne,Ae=y.get("__channel_info_text_svg__"),je=!!Ae;let Ve=0,Ye=P;if(je&&Ae){Ye=P*1.5;const k=Ae.width/Ae.height;Ve=Ye*k}else n.font=`bold ${P}px sans-serif`,Ue&&U!=="logo"&&(Ve=n.measureText(Ue).width);const G=12*ue*ne,oe=12*ue*ne,se=8*ue*ne;let Ce=0,ge=0;const he=!!Re&&U!=="minimal",E=!!Ue&&U!=="logo";U==="modern"?(Ce=Math.max(he?fe:0,E?Ve+oe*2:0),ge=(he?fe:0)+(he&&E?G:0)+(E?Ye+se*2:0)):U==="box"?(Ce=(he?fe:0)+(he&&E?G:0)+(E?Ve:0)+oe*2,ge=Math.max(he?fe:0,E?Ye:0)+se*2):U==="minimal"?(Ce=E?Ve+oe*2:0,ge=E?Ye+se*2:0):U==="logo"?(Ce=fe,ge=fe):(Ce=(he?fe:0)+(he&&E?G:0)+(E?Ve+oe*2:0),ge=Math.max(he?fe:0,E?Ye+se*2:0));let C=0,L=0;w.includes("left")?C=be:w.includes("right")?C=t-be-Ce:w.includes("center")&&(C=(t-Ce)/2),w.includes("top")?L=be:w.includes("bottom")&&(L=o-be-ge),U==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(C,L,Ce,ge,12*ue*ne),n.fill()):n.fillRect(C,L,Ce,ge),n.shadowColor="transparent",n.shadowBlur=0);const V=(k,ae,Y,Te,X)=>{if(U!=="box"&&U!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(k,ae,Y,Te,8*ue*ne),n.fill()):n.fillRect(k,ae,Y,Te)),je&&Ae){const Be=k+(Y-Ve)/2,Le=ae+(Te-Ye)/2;n.drawImage(Ae,Be,Le,Ve,Ye)}else{n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const Be=k+(Y-Ve)/2,Le=ae+(Te-Ye)/2+Ye*.1;n.fillText(X,Be,Le),n.shadowColor="transparent"}};if(U==="modern"){let k=L;if(he){const ae=C+(Ce-fe)/2;n.drawImage(Re,ae,k,fe,fe),k+=fe+G}if(E){const ae=Ve+oe*2,Y=Ye+se*2,Te=C+(Ce-ae)/2;V(Te,k,ae,Y,Ue)}}else{const k=w.includes("right");let ae=C+(U==="box"?oe:0);const Y=L+ge/2;if(k&&(U==="classic"||U==="circle")){if(E){const Te=Ve+oe*2,X=Ye+se*2;V(ae,Y-X/2,Te,X,Ue),ae+=Te+G}he&&(U==="circle"?(n.save(),n.beginPath(),n.arc(ae+fe/2,Y,fe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Re,ae,Y-fe/2,fe,fe),n.restore()):n.drawImage(Re,ae,Y-fe/2,fe,fe))}else if(he&&(U==="circle"?(n.save(),n.beginPath(),n.arc(ae+fe/2,Y,fe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Re,ae,Y-fe/2,fe,fe),n.restore()):n.drawImage(Re,ae,Y-fe/2,fe,fe),ae+=fe+G),E){const Te=Ve+(U==="box"?0:oe*2),X=Ye+(U==="box"?0:se*2);U==="box"?je&&Ae?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(Ae,ae,Y-Ye/2,Ve,Ye),n.shadowColor="transparent"):(n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(Ue,ae,Y+Ye*.1),n.shadowColor="transparent"):V(ae,Y-X/2,Te,X,Ue)}}n.restore()}}}}};function PA(){const{toast:n,confirm:t}=vr(),o=ee.useRef(null),s=ee.useRef(null),r=ee.useRef(null),d=ee.useRef(null),h=ee.useRef(null),y=ee.useRef(!1),v=ee.useRef(()=>{});ee.useEffect(()=>{MA()},[]);const[m,x]=ee.useState(null),[S,T]=ee.useState(0),[A,N]=ee.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[O,F]=ee.useState([]),[K,le]=ee.useState([]),[ce,ke]=ee.useState(0),[Me,De]=ee.useState(!1),[ve,tt]=ee.useState("off"),[_e,Qe]=ee.useState(0),[Ie,ct]=ee.useState(0),[bt,Rt]=ee.useState(1),[xe,B]=ee.useState(!1),[ye,ue]=ee.useState(Mn.PLAYER),[ht,mt]=ee.useState(!1),[I,M]=ee.useState(!1),[te,Se]=ee.useState(!1),[Ke,w]=ee.useState(!1),[U,ne]=ee.useState(!1),[ie,Re]=ee.useState(0),[Ue,be]=ee.useState("16:9"),[Ne,fe]=ee.useState("1080p"),[P,Ae]=ee.useState("default"),[je,Ve]=ee.useState(null),[Ye,G]=ee.useState("auto"),[oe,se]=ee.useState(30),[Ce,ge]=ee.useState("med"),[he,E]=ee.useState(!1),[C,L]=ee.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"shadow",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke"}),V=ee.useRef(C);ee.useEffect(()=>{V.current=C},[C]);const k=C.backgroundBlurStrength>0,ae=ee.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(Q=>MediaRecorder.isTypeSupported(Q.value)),[]),[Y,Te]=ee.useState([]),[X,Be]=ee.useState(-1),[Le,He]=ee.useState(!1),dt=()=>{const z=Ne==="1080p";switch(Ue){case"9:16":return z?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return z?{w:1080,h:1440}:{w:720,h:960};case"4:3":return z?{w:1440,h:1080}:{w:960,h:720};case"1:1":return z?{w:1080,h:1080}:{w:720,h:720};case"1:2":return z?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return z?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return z?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return z?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return z?{w:1080,h:1350}:{w:720,h:900};case"20:9":return z?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return z?{w:2560,h:1080}:{w:1720,h:720};default:return z?{w:1920,h:1080}:{w:1280,h:720}}},{w:Ct,h:Bt}=dt(),[Zt,Ht]=ee.useState(!0),[ut,we]=ee.useState(!0),[Ge,ot]=ee.useState(!1),Je=ee.useMemo(()=>K.filter(Q=>Q.type!=="audio"&&_e>=Q.startTime&&_e<Q.endTime).sort((Q,Fe)=>(Q.layer||0)-(Fe.layer||0)),[K,_e]),_t=K.filter(z=>z.type==="audio"&&_e>=z.startTime&&_e<z.endTime),yt=ee.useMemo(()=>ce===0?O:O.map(z=>({...z,time:z.time+ce,endTime:z.endTime!==void 0?z.endTime+ce:void 0})),[O,ce]),nt=yt.findIndex((z,Q)=>{if(z.endTime!==void 0)return _e>=z.time&&_e<z.endTime;const Fe=yt[Q+1];return _e>=z.time&&(!Fe||_e<Fe.time)}),un=z=>{const Q=z.target.files?.[0];if(Q){const Fe=URL.createObjectURL(Q);x(Fe);const pe={title:Q.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};N(pe),Dc(()=>import("./jsmediatags.min-BD2M9S69.js").then(Ee=>Ee.j),[]).then(Ee=>{Ee.read(Q,{onSuccess:et=>{const{title:At,artist:St,picture:rt}=et.tags;let bn=null;if(rt){const{data:kn,format:Pe}=rt;let Kt="";for(let Xt=0;Xt<kn.length;Xt++)Kt+=String.fromCharCode(kn[Xt]);bn=`data:${Pe};base64,${window.btoa(Kt)}`}N({title:At||pe.title,artist:St||pe.artist,coverUrl:bn||null})},onError:et=>{console.log("Error reading tags:",et)}})}),ke(0),De(!1),Qe(0),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}z.target.value=""},hn=z=>{const Q=z.target.files?.[0];if(Q){const Fe=URL.createObjectURL(Q),pe=Q.type.startsWith("video/");pe&&w(!1),N(Ee=>({...Ee,coverUrl:Fe,backgroundType:pe?"video":"image"}))}z.target.value=""},Si=async z=>{const Q=z.target.files?.[0];if(Q)try{const Fe=await Q.text(),pe=Q.name.split(".").pop()?.toLowerCase();let Ee=[];pe==="lrc"?Ee=Vl(Fe):pe==="srt"?Ee=Bl(Fe):(pe==="ttml"||pe==="xml")&&(Ee=Fs(Fe)),Ee.some(et=>et.words&&et.words.length>0)&&(L(et=>({...et,highlightEffect:"karaoke"})),n.success(`${pe?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),F(Ee)}catch(Fe){console.error("Failed to parse lyrics:",Fe),n.error("Failed to parse lyric file.")}z.target.value=""};ee.useEffect(()=>{if(X!==-1&&Y[X]){const z=Y[X];F(z.parsedLyrics||[])}},[Y,X]);const Yn=async z=>{const Q=z.target.files?.[0];if(Q){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Fe=URL.createObjectURL(Q),pe=Q.name.replace(/\.[^/.]+$/,""),Ee="CustomFont",et=new FontFace(Ee,`url(${Fe})`);await et.load(),document.fonts.add(et),Ve(pe),L(At=>({...At,fontFamily:Ee})),n.success(`Loaded font: ${pe}`)}catch(Fe){console.error("Failed to load font:",Fe),n.error("Failed to load font file.")}}z.target.value=""},Gn=ee.useCallback(async z=>{if(z<0||z>=Y.length)return;const Q=Y[z],Fe=URL.createObjectURL(Q.audioFile);if(x(Fe),N({title:Q.metadata.title,artist:Q.metadata.artist,coverUrl:Q.metadata.coverUrl||null,backgroundType:"image"}),F([]),Q.parsedLyrics&&Q.parsedLyrics.length>0)F(Q.parsedLyrics);else if(Q.lyricFile)try{const pe=await Q.lyricFile.text(),Ee=Q.lyricFile.name.split(".").pop()?.toLowerCase();let et=[];Ee==="lrc"?et=Vl(pe):Ee==="srt"?et=Bl(pe):(Ee==="ttml"||Ee==="xml")&&(et=Fs(pe)),F(et)}catch(pe){console.error("Failed to load lyrics",pe)}ke(0),Be(z),r.current&&(r.current.scrollTop=0),setTimeout(()=>{o.current&&(o.current.play().catch(pe=>console.log("Autoplay failed",pe)),De(!0))},100)},[Y]),ai=ee.useCallback(()=>{if(Y.length===0)return;const z=(X+1)%Y.length;Gn(z)},[Y,X,Gn]),Pi=ee.useCallback(()=>{if(Y.length===0)return;const z=(X-1+Y.length)%Y.length;Gn(z)},[Y,X,Gn]),at=()=>{o.current&&(Me?(o.current.pause(),De(!1)):!m&&Y.length>0?Gn(0):(o.current.play().catch(console.error),De(!0)))},ft=ee.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,De(!1),Qe(0))},[]),wt=()=>{tt(z=>z==="off"?"one":z==="one"?"all":z==="all"?"all_repeat":"off")},Rn=()=>{document.fullscreenElement?(document.exitFullscreen(),mt(!1)):(s.current?.requestFullscreen(),mt(!0))},Ft=()=>{o.current&&(Qe(o.current.currentTime),U&&Re(o.current.currentTime/Ie*100))},Hn=()=>{o.current&&ct(o.current.duration)},wr=z=>{const Q=parseFloat(z.target.value);o.current&&(o.current.currentTime=Q,Qe(Q))},Os=z=>{const Q=parseFloat(z.target.value);Rt(Q),o.current&&(o.current.volume=Q),B(Q===0)},Gi=async()=>{if(!o.current||!d.current)return;const z=C.renderMode==="playlist"&&Y.length>0,Q=[];if(z)for(const qe of Y){let ze=[];if(qe.parsedLyrics&&qe.parsedLyrics.length>0)ze=qe.parsedLyrics;else if(qe.lyricFile)try{const Oe=await qe.lyricFile.text(),tn=qe.lyricFile.name.split(".").pop()?.toLowerCase();tn==="lrc"?ze=Vl(Oe):tn==="srt"?ze=Bl(Oe):(tn==="ttml"||tn==="xml")&&(ze=Fs(Oe))}catch(Oe){console.error("Failed to parse lyrics for playlist item",Oe)}const lt=URL.createObjectURL(qe.audioFile);Q.push({audioSrc:lt,lyrics:ze,metadata:qe.metadata,isFileSource:!0})}else{if(!m)return;Q.push({audioSrc:m,lyrics:yt,metadata:A,isFileSource:!1})}if(Q.length===0)return;const Fe=z?`Start rendering ALL ${Q.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${Ue} (${Ne}) video? This will play the song from start to finish.`;if(!await t(`${Fe} Please do not switch tabs during rendering.`,"Start Rendering?")){z&&Q.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc));return}E(!1),ne(!0),Re(0),y.current=!1,ft(),tt("off"),ri.current&&clearTimeout(ri.current),M(!1),Se(!0),Jn.current&&Jn.current.pause();const Ee=o.current,et=P,At=new Map,St=new Map,rt=new Map,bn=[],kn=(qe,ze)=>new Promise(lt=>{const Oe=new Image;Oe.crossOrigin="anonymous",Oe.onload=()=>{At.set(qe,Oe),lt()},Oe.onerror=()=>lt(),Oe.src=ze}),Pe=(qe,ze)=>new Promise(lt=>{const Oe=document.createElement("video");Oe.crossOrigin="anonymous",Oe.muted=!0,Oe.playsInline=!0,Oe.preload="auto";let tn=!1;const Ut=()=>{tn||(tn=!0,St.set(qe,Oe),lt())};Oe.oncanplay=()=>{tn||(Oe.currentTime=.001)},Oe.onseeked=()=>Ut(),Oe.onerror=()=>{console.warn("Failed to load video:",ze),Ut()},setTimeout(()=>Ut(),5e3),Oe.src=ze,Oe.load()}),Kt=(qe,ze)=>new Promise(lt=>{const Oe=document.createElement("audio");Oe.crossOrigin="anonymous",Oe.onloadedmetadata=()=>{rt.set(qe,Oe),lt()},Oe.onerror=()=>lt(),Oe.src=ze});if(K.forEach(qe=>{qe.type==="video"?bn.push(Pe(qe.id,qe.url)):qe.type==="audio"||qe.type==="audio"?bn.push(Kt(qe.id,qe.url)):bn.push(kn(qe.id,qe.url))}),C.showChannelInfo&&(C.channelInfoImage&&bn.push(kn("__channel_info__",C.channelInfoImage)),C.channelInfoText)){const qe=C.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(qe))try{const ze=document.createElement("div");ze.style.position="absolute",ze.style.visibility="hidden",ze.style.whiteSpace="nowrap",ze.style.fontFamily="sans-serif",ze.style.fontWeight="bold",ze.style.fontSize="100px",ze.style.display="inline-flex",ze.style.alignItems="center",ze.style.gap="0.25em",ze.innerHTML=qe;const lt=ze.getElementsByTagName("svg");for(let Wn=0;Wn<lt.length;Wn++)lt[Wn].style.width="auto",lt[Wn].style.height="1.5em";document.body.appendChild(ze);const{width:Oe,height:tn}=ze.getBoundingClientRect();document.body.removeChild(ze);const Ut=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${Oe}" height="${tn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${qe}
                  </div>
                </foreignObject>
              </svg>
            `,_i=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(Ut).replace(/%([0-9A-F]{2})/g,function(il,ol){return String.fromCharCode(parseInt(ol,16))}))}`;bn.push(kn("__channel_info_text_svg__",_i))}catch(ze){console.warn("Failed to process SVG channel info",ze)}}if(C.backgroundSource==="image"&&C.backgroundImage&&bn.push(kn("__custom_bg__",C.backgroundImage)),await Promise.all(bn),y.current){ne(!1),z&&Q.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc));return}const Xt=d.current,Ci=Xt.getContext("2d"),q=Xt.captureStream(oe);let pt=null;try{if(Ee.captureStream)pt=Ee.captureStream();else if(Ee.mozCaptureStream)pt=Ee.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),ne(!1);return}const Dt=new(window.AudioContext||window.webkitAudioContext),en=Dt.createMediaStreamDestination();Dt.createMediaElementSource(Ee).connect(en),St.forEach(qe=>{qe.muted=!0,Dt.createMediaElementSource(qe).connect(en)}),rt.forEach(qe=>{qe.muted=!0,Dt.createMediaElementSource(qe).connect(en)}),en.stream.getAudioTracks().length>0?q.addTrack(en.stream.getAudioTracks()[0]):pt&&q.addTrack(pt.getAudioTracks()[0]);const Xn=(()=>{if(Ye!=="auto"&&MediaRecorder.isTypeSupported(Ye))return Ye;const qe=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const ze of qe)if(MediaRecorder.isTypeSupported(ze))return ze;return"video/webm"})(),Qn=Ne==="1080p"?8e6:4e6,Fi=oe>30?1.5:1,ao=Ce==="high"?2:Ce==="low"?.5:1,ro=Qn*Fi*ao,rn=new MediaRecorder(q,{mimeType:Xn,videoBitsPerSecond:ro});h.current=rn;const Vn=[];rn.ondataavailable=qe=>{qe.data.size>0&&Vn.push(qe.data)},rn.onstop=()=>{if(y.current)console.log("Render aborted");else{const qe=new Blob(Vn,{type:Xn}),ze=lt=>{const Oe=URL.createObjectURL(lt),tn=document.createElement("a");tn.href=Oe;const Ut=Xn.includes("mp4")?"mp4":"webm",Wt=z?`Playlist_${Q.length}_Songs_${Ue.replace(":","-")}.${Ut}`:`${Q[0].metadata.title||"video"}_${Ue.replace(":","-")}.${Ut}`;tn.download=Wt,document.body.appendChild(tn),tn.click(),document.body.removeChild(tn),URL.revokeObjectURL(Oe)};Xn.includes("webm"),ze(qe)}Dt.close(),ne(!1),T(qe=>qe+1),z&&Q.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc))};let Zn=0,W=[],mn=A,gt=0,Dn=0;const Ei=1e3/oe,ui=qe=>{if(y.current)return;(rn.state==="recording"||rn.state==="paused")&&requestAnimationFrame(ui);const ze=qe-Dn;if(ze<Ei)return;Dn=qe-ze%Ei;const lt=Ee.currentTime;gt>0&&Re(lt/gt*100),St.forEach((Oe,tn)=>{if(tn==="background"){const Ut=Oe.duration||1,Wt=lt%Ut;let _i=Math.abs(Oe.currentTime-Wt);(Wt<Oe.currentTime&&Oe.currentTime-Wt>Ut/2||_i>.5)&&(Oe.currentTime=Wt),Oe.paused&&Oe.play().catch(()=>{})}else{const Ut=K.find(Wt=>Wt.id===tn);if(Ut)if(lt>=Ut.startTime&&lt<Ut.endTime){const Wt=lt-Ut.startTime+(Ut.mediaStartOffset||0);Math.abs(Oe.currentTime-Wt)>.5&&(Oe.currentTime=Wt);const _i=Ut.isMuted!==!1;Oe.muted!==_i&&(Oe.muted=_i),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),rt.forEach((Oe,tn)=>{const Ut=K.find(Wt=>Wt.id===tn);if(Ut){const Wt=Ut.layer||0;if(C.layerVisibility?.audio?.[Wt]!==!1&&lt>=Ut.startTime&&lt<Ut.endTime){const Wn=lt-Ut.startTime+(Ut.mediaStartOffset||0);Math.abs(Oe.currentTime-Wn)>.5&&(Oe.currentTime=Wn);const il=Ut.isMuted===!0;Oe.muted!==il&&(Oe.muted=il),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),Ci&&LA(Ci,Xt.width,Xt.height,lt,W,mn,K,At,St,et,je,C.fontSizeScale,C.backgroundBlurStrength>0,gt,C,C.renderMode==="current"||Zn===Q.length-1,C.renderMode==="current"||Zn===0)},Po=async()=>{if(y.current){rn.stop();return}if(Zn>=Q.length){await new Promise(ze=>setTimeout(ze,500)),rn.stop();return}const qe=Q[Zn];rn.state==="recording"&&rn.pause(),W=qe.lyrics,mn=qe.metadata,gt=0,qe.metadata.coverUrl&&(qe.metadata.backgroundType==="video"?await Pe("background",qe.metadata.coverUrl):await kn("cover",qe.metadata.coverUrl)),Ee.pause(),Ee.src=qe.audioSrc,Ee.load(),await new Promise(ze=>{const lt=()=>{Ee.removeEventListener("canplay",lt),ze()};Ee.addEventListener("canplay",lt),Ee.readyState>=3&&lt()}),gt=Ee.duration,rn.state==="inactive"?(Dt.state==="suspended"&&await Dt.resume(),rn.start(),requestAnimationFrame(ui)):rn.state==="paused"&&rn.resume(),await Ee.play(),await new Promise(ze=>{const lt=()=>{Ee.removeEventListener("ended",lt),ze()};Ee.addEventListener("ended",lt)}),Zn++,Po()};await Po()};ee.useEffect(()=>{v.current=Gi});const Lo=ee.useCallback(()=>{y.current=!0,h.current&&h.current.state==="recording"?h.current.stop():ne(!1),ft()},[ft]),Ti=ee.useCallback(()=>{if(r.current){const z=o.current?.currentTime||0;if(nt===-1&&z<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(nt!==-1){const Q=r.current.querySelector('[data-lyric-active="true"]');if(Q){const Fe=r.current;if(Q.offsetHeight===0)return;const pe=Q.offsetTop,Ee=Q.offsetHeight,et=Fe.clientHeight;let At=.5;C.contentPosition==="top"&&(At=.25),C.contentPosition==="bottom"&&(At=.75);const St=pe-et*At+Ee/2;Fe.scrollTo({top:St,behavior:"smooth"})}}}},[nt,P,C.contentPosition]);ee.useEffect(()=>{Ti()},[Ti]),ee.useEffect(()=>{const z=setTimeout(()=>{Ti()},550);return()=>clearTimeout(z)},[I,te,Zt,ut,ye,Le,Ti]);const ri=ee.useRef(null),Hi=ee.useCallback(()=>{if(M(!1),ri.current&&clearTimeout(ri.current),!U){const z=window.setTimeout(()=>{M(!0)},3e3);ri.current=z}},[U]),Vi=()=>{Hi()};ee.useEffect(()=>{const z=Q=>{const Fe=Q.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Fe)||Hi(),!(Q.target instanceof HTMLInputElement||Q.target instanceof HTMLTextAreaElement)){if(U){Fe==="escape"&&Lo();return}switch(Q.key.toLowerCase()){case" ":case"k":Q.preventDefault(),at(),n.success(Me?"Paused":"Playing",{id:"play-pause"});break;case"s":Q.preventDefault(),ft(),n.success("Stopped",{id:"stop"});break;case"n":Q.preventDefault(),ai(),n.success("Next Song",{id:"next-song"});break;case"o":Q.preventDefault();const Ee=!Ge;ot(Ee),Ee&&Se(!0),n.success(`Minimal Mode: ${Ee?"On":"Off"}`,{id:"minimal-mode"});break;case"b":Q.preventDefault(),Pi(),n.success("Previous Song",{id:"prev-song"});break;case"r":Q.preventDefault(),wt();const et=ve==="off"?"one":ve==="one"?"all":ve==="all"?"all_repeat":"off",At={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${At[et]}`,{id:"repeat"});break;case"l":Q.preventDefault();const St=!Le;He(St),St&&ue(Mn.PLAYER);break;case"h":Q.preventDefault();const rt=!te;Se(rt),n.success(rt?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"g":Q.preventDefault();const bn=ed.flatMap(ze=>ze.options.map(lt=>lt.value)),kn=V.current.lyricDisplayMode,Kt=(bn.indexOf(kn)+1)%bn.length,Xt=bn[Kt];L(ze=>({...ze,lyricDisplayMode:Xt})),n.success(`Lyric Mode: ${Xt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":Q.preventDefault();const Ci=Kg,q=V.current.textCase,Dt=(Ci.indexOf(q)+1)%Ci.length,en=Ci[Dt];L(ze=>({...ze,textCase:en})),n.success(`Text Case: ${en}`,{id:"text-case"});break;case"f":Rn();break;case"i":Ht(ze=>!ze);break;case"p":we(ze=>!ze);break;case"d":Q.preventDefault(),E(ze=>!ze);break;case"t":Le?(He(!1),ue(Mn.EDITOR)):ue(ze=>ze===Mn.PLAYER?Mn.EDITOR:Mn.PLAYER);break;case"m":Q.preventDefault();const Kn=!xe;B(Kn),n.success(Kn?"Muted":"Unmuted",{id:"mute"});break;case"x":Q.preventDefault();const Sn=V.current.highlightEffect==="none";L(ze=>({...ze,highlightEffect:ze.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${Sn?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":Q.preventDefault();const Xn=Zc.flatMap(ze=>ze.options.map(lt=>lt.value)),Qn=V.current.highlightEffect||"none",Fi=Xn.indexOf(Qn),ro=((Fi===-1?0:Fi)+1)%Xn.length,rn=Xn[ro],Vn=Wc(rn);L(ze=>{const lt={...ze,highlightEffect:rn};return lt.useCustomHighlightColors=!1,Vn&&(lt.highlightColor=Vn.color,lt.highlightBackground=Vn.bg),lt}),n.success(`Effect: ${rn.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":Q.preventDefault();const W=(zc.indexOf(P)+1)%zc.length,mn=zc[W];Ae(mn);const gt=yr[mn];if(gt){const ze={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};L(lt=>({...lt,...ze,...gt}))}let Dn=mn;for(const ze of pd){const lt=ze.options.find(Oe=>Oe.value===mn);if(lt){Dn=lt.label;break}}n.success(`Preset: ${Dn}`,{id:"preset"});break;case"arrowleft":if(Q.preventDefault(),o.current){const ze=Math.max(0,o.current.currentTime-5);o.current.currentTime=ze,Qe(ze)}break;case"arrowright":if(Q.preventDefault(),o.current){const ze=Math.min(Ie,o.current.currentTime+5);o.current.currentTime=ze,Qe(ze)}break;case"arrowup":Q.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":Q.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":Q.preventDefault();const Ei=V.current.fontSizeScale,ui=Math.min(Ei+.1,3);L(ze=>({...ze,fontSizeScale:ui})),n.success(`Font Size: ${(ui*100).toFixed(0)}%`,{id:"font-size"});break;case"-":Q.preventDefault();const Po=V.current.fontSizeScale,qe=Math.max(Po-.1,.1);L(ze=>({...ze,fontSizeScale:qe})),n.success(`Font Size: ${(qe*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(Q.ctrlKey||Q.metaKey)&&Q.shiftKey&&(Q.preventDefault(),v.current());break}}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[Me,ve,ye,U,Hi,Lo,Le,ai,Pi,n,Ge,P,te,xe]),ee.useEffect(()=>{let z,Q=0;const Fe=1e3/30,pe=Ee=>{if(o.current&&!o.current.paused&&Me){z=requestAnimationFrame(pe);const et=Ee-Q;et>Fe&&(Q=Ee-et%Fe,Qe(o.current.currentTime))}};return Me&&!U&&(z=requestAnimationFrame(pe)),()=>{z&&cancelAnimationFrame(z)}},[Me,U]);const sn=Zt&&(!I||te)&&!U,Bi=ut&&(!I||te)&&!U&&!Ge,nl=Je.length>0?Je[0]:null;nl?`${nl.url}`:A.coverUrl&&`${A.coverUrl}`;const Jn=ee.useRef(null);return ee.useEffect(()=>{if(Je.forEach(z=>{const Q=z.layer||0;if(C.layerVisibility?.visual?.[Q]!==!1&&z.type==="video"){const Fe=document.getElementById(`video-preview-${z.id}`);if(Fe)if(U)Fe.paused||Fe.pause();else{const pe=_e-z.startTime+(z.mediaStartOffset||0);Math.abs(Fe.currentTime-pe)>.1&&(Fe.currentTime=pe);const Ee=z.isMuted!==!1;Fe.muted!==Ee&&(Fe.muted=Ee);const et=z.volume!==void 0?z.volume:1;Math.abs(Fe.volume-et)>.01&&(Fe.volume=et),Me&&Fe.paused?Fe.play().catch(()=>{}):!Me&&!Fe.paused&&Fe.pause()}}}),A.backgroundType==="video"&&Jn.current){const z=Jn.current;if(U)z.paused||z.pause();else{const Q=z.duration||1,Fe=_e%Q;Math.abs(z.currentTime-Fe)>.1&&(z.currentTime=Fe),Me&&z.paused?z.play().catch(()=>{}):!Me&&!z.paused&&z.pause()}}_t.forEach(z=>{const Q=document.getElementById(`audio-preview-${z.id}`);if(Q){const Fe=_e-z.startTime+(z.mediaStartOffset||0);Math.abs(Q.currentTime-Fe)>.2&&(Q.currentTime=Fe);const pe=z.isMuted===!0;Q.muted!==pe&&(Q.muted=pe);const Ee=z.volume!==void 0?z.volume:1;Math.abs(Q.volume-Ee)>.01&&(Q.volume=Ee),Me&&Q.paused?Q.play().catch(()=>{}):!Me&&!Q.paused&&Q.pause()}})},[_e,Me,Je,A,_t,C.layerVisibility]),p.jsxs("div",{ref:s,onMouseMove:Vi,onTouchStart:Vi,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${I&&!te?"cursor-none":""}`,children:[p.jsx("audio",{ref:o,src:m||void 0,loop:ve==="one",muted:xe,onTimeUpdate:Ft,onLoadedMetadata:Hn,onEnded:()=>{if(U)return;const z=Y.length>0;ve==="one"||(ve==="all_repeat"?z?ai():o.current?.play():ve==="all"&&z&&X<Y.length-1?ai():De(!1))},crossOrigin:"anonymous"},S),_t.map(z=>p.jsx("audio",{id:`audio-preview-${z.id}`,src:z.url,className:"hidden",playsInline:!0},z.id)),p.jsx("canvas",{ref:d,width:Ct,height:Bt,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),p.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[C.backgroundSource==="color"&&p.jsx("div",{className:"absolute inset-0",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&p.jsx("div",{className:"absolute inset-0",style:{background:C.backgroundGradient}}),C.backgroundSource==="image"&&C.backgroundImage&&p.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${C.backgroundImage})`}}),C.backgroundSource==="smart-gradient"&&p.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const z=C.backgroundColor||"#312e81",Q=parseInt(z.slice(1,3),16),Fe=parseInt(z.slice(3,5),16),pe=parseInt(z.slice(5,7),16),Ee=`${Q},${Fe},${pe}`,et=`${Math.floor(Q*.6)},${Math.floor(Fe*.6)},${Math.floor(pe*.6)}`;return`linear-gradient(to bottom right, rgb(${Ee}), rgb(${et}) 50%, #000000)`})()}}),(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&A.coverUrl&&K.length===0&&(A.backgroundType==="video"?p.jsx("video",{ref:Jn,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${Ke?"opacity-60":"opacity-0"}`,muted:!0,loop:!U,playsInline:!0,preload:"auto",onLoadedData:()=>w(!0)}):p.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${C.backgroundSource==="custom"||Je.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),C.backgroundSource==="color"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:C.backgroundGradient}}),C.backgroundSource==="smart-gradient"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const z=C.backgroundColor||"#312e81",Q=parseInt(z.slice(1,3),16),Fe=parseInt(z.slice(3,5),16),pe=parseInt(z.slice(5,7),16),Ee=`${Q},${Fe},${pe}`,et=`${Math.floor(Q*.6)},${Math.floor(Fe*.6)},${Math.floor(pe*.6)}`;return`linear-gradient(to bottom right, rgb(${Ee}), rgb(${et}) 50%, #000000)`})()}}),!A.coverUrl&&Je.length===0&&(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&K.length===0&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),p.jsx("div",{className:`absolute inset-0 pointer-events-none ${C.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:C.backgroundSource==="timeline"&&Je.map(z=>{const Q=z.layer||0;return C.layerVisibility?.visual?.[Q]===!1?null:p.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:z.type==="video"?p.jsx("video",{id:`video-preview-${z.id}`,src:z.url,className:"w-full h-full object-cover",muted:z.isMuted!==!1,playsInline:!0}):p.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${z.url})`}})},z.id)})}),p.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:C.backgroundBlurStrength>0?`blur(${C.backgroundBlurStrength}px)`:k?"blur(12px)":"none",backgroundColor:C.backgroundBlurStrength>0||k?"rgba(0,0,0,0.4)":void 0}})]}),p.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[C.showChannelInfo&&Ge&&p.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${C.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${C.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${C.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":C.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":C.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${C.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.channelInfoSizeScale??1})`,transformOrigin:C.channelInfoPosition?.includes("top")?C.channelInfoPosition?.includes("center")?"top center":C.channelInfoPosition?.includes("left")?"top left":"top right":C.channelInfoPosition?.includes("center")?"bottom center":C.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...C.channelInfoPosition?.includes("center")?C.channelInfoPosition?.includes("top")?{marginTop:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(C.channelInfoMarginScale??1)*1.5}rem`}},children:[C.channelInfoImage&&C.channelInfoStyle!=="minimal"&&p.jsx("img",{src:C.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${C.channelInfoStyle==="circle"?"rounded-full":""}`}),C.channelInfoText&&C.channelInfoStyle!=="logo"&&(()=>{const z=C.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(z)?p.jsx("div",{className:`text-white font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,dangerouslySetInnerHTML:{__html:z}}):p.jsx("p",{className:`text-white font-bold drop-shadow-md text-lg 
                    ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,children:C.channelInfoText})})()]}),Ge&&p.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${sn?"opacity-100":"opacity-0"}
              ${C.infoPosition==="top-left"?"top-0 left-0 items-start text-left":C.infoPosition==="top-right"?"top-0 right-0 items-end text-right":C.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":C.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${C.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.infoSizeScale??1})`,transformOrigin:C.infoPosition?.includes("top")?C.infoPosition?.includes("center")?"top center":C.infoPosition?.includes("right")?"top right":"top left":C.infoPosition?.includes("center")?"bottom center":C.infoPosition?.includes("right")?"bottom right":"bottom left",...C.infoPosition?.includes("center")?C.infoPosition?.includes("top")?{marginTop:`${(C.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.infoMarginScale??1)*1.5}rem`}:{margin:`${(C.infoMarginScale??1)*1.5}rem`}},children:p.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${C.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${C.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${C.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${C.infoStyle==="modern"||C.infoStyle==="minimal",""}
            `,children:[p.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!C.showCover||C.infoStyle==="minimal"||C.infoStyle==="modern"?"hidden":"block"}
                ${C.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?p.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:z=>z.currentTarget.play(),onMouseOut:z=>z.currentTarget.pause()}):p.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:p.jsx(Ll,{size:24})}),p.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[p.jsx(Do,{size:20,className:"text-white"}),p.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:hn})]})]}),p.jsxs("div",{className:`flex flex-col justify-center ${C.infoPosition?.includes("right")?"items-end":C.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[p.jsx("h1",{className:`font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${C.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${C.infoStyle==="minimal"?"text-sm":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,children:A.title}),p.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${C.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:p.jsx("p",{className:`drop-shadow-md
                    ${C.infoStyle==="minimal"?"text-zinc-400 text-[10px]":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-white text-sm font-medium":"text-zinc-300 text-xs"}
                  `,children:A.artist})})]})]})}),p.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${sn&&!Ge?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:p.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[p.jsx("div",{className:"flex gap-4",children:p.jsxs("div",{className:"flex gap-4 items-center",children:[p.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${C.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?p.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:z=>z.currentTarget.play(),onMouseOut:z=>z.currentTarget.pause()}):p.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:p.jsx(Ll,{size:24})}),p.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[p.jsx(Do,{size:20,className:"text-white"}),p.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:hn})]})]}),p.jsxs("div",{children:[p.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${C.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),p.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${C.showArtist?"opacity-100":"opacity-0"}`,children:p.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),p.jsxs("div",{className:`flex gap-2 flex-wrap ${Ge?"hidden":""}`,children:[p.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:p.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),p.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),p.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),p.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),p.jsx("button",{onClick:()=>Se(!te),className:`p-2 rounded-full transition-colors ${te?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:te?p.jsx(Ps,{size:20}):p.jsx(Ls,{size:20})}),p.jsx("button",{onClick:()=>ot(!Ge),className:`p-2 rounded-full transition-colors ${Ge?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:Ge?p.jsx(Vs,{size:20}):p.jsx(s0,{size:20})}),p.jsx("button",{onClick:()=>{const z=!Le;He(z),z&&ue(Mn.PLAYER)},className:`p-2 rounded-full transition-colors ${Le?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:p.jsx(ur,{size:20})}),p.jsx("button",{onClick:()=>{Le&&He(!1),ue(ye===Mn.PLAYER?Mn.EDITOR:Mn.PLAYER)},className:`p-2 rounded-full transition-colors ${ye===Mn.EDITOR&&!Le?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:p.jsx(Zm,{size:20})}),p.jsx("button",{onMouseDown:z=>{z.stopPropagation(),E(!he)},className:`p-2 rounded-full transition-colors ${he?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:p.jsx(or,{size:20})}),p.jsx("button",{onClick:Rn,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:ht?p.jsx(s0,{size:20}):p.jsx(Vs,{size:20})})]})]})}),p.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${C.contentPosition==="top"?"items-start pt-[10vh]":C.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:O.length>0?p.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${C.textAlign==="left"?"text-left":C.textAlign==="right"?"text-right":"text-center"} ${C.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:sn||Bi?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[p.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${C.fontSizeScale}); line-height: calc(2rem * ${C.fontSizeScale}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${C.fontSizeScale}); line-height: calc(2.25rem * ${C.fontSizeScale}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${C.fontSizeScale}); line-height: calc(2.5rem * ${C.fontSizeScale}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${C.fontSizeScale}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${C.fontSizeScale}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${C.fontSizeScale}); }
              `}),p.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?ye===Mn.EDITOR||Le?"h-[25vh]":!sn&&!Bi?"h-[50vh]":"h-[40vh]":"h-0"}`}),yt.map((z,Q)=>{const Fe=Q===nt,pe=ye===Mn.EDITOR||Le,Ee=["9:16","3:4","1:1","1:2","2:3"].includes(Ue);if(C.lyricDisplayMode!=="all"){if(C.lyricDisplayMode==="active-only"&&Q!==nt)return p.jsx("p",{className:"hidden"},Q);if(C.lyricDisplayMode==="next-only"&&(Q<nt||Q>nt+1))return p.jsx("p",{className:"hidden"},Q);if(C.lyricDisplayMode==="previous-next"&&Math.abs(Q-nt)>1)return p.jsx("p",{className:"hidden"},Q)}else if(P==="none"||P==="just_video")return p.jsx("p",{className:"hidden"},Q);let et="",At="";const St=C.transitionEffect;let rt="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap ";if(Fe?St==="slide"?rt+="translate-y-0 opacity-100 ":St==="zoom"?rt+="scale-100 opacity-100 ":St==="float"?rt+="translate-y-0 opacity-100 ":St==="blur"?rt+="blur-0 opacity-100 ":St==="fade"?rt+="opacity-100 ":St==="drop"?rt+="trans-drop-enter opacity-100 ":St==="lightspeed"?rt+="trans-lightspeed-enter opacity-100 ":St==="roll"?rt+="trans-roll-enter opacity-100 ":St==="elastic"?rt+="trans-elastic-enter opacity-100 ":St==="flip"?rt+="trans-flip-enter opacity-100 ":St==="rotate-in"?rt+="trans-rotate-in-enter opacity-100 ":St==="spiral"?rt+="trans-spiral-enter opacity-100 ":St==="shatter"?rt+="trans-shatter-enter opacity-100 ":rt+="opacity-100 ":(St==="slide"?rt+="translate-y-4 opacity-0 ":St==="zoom"?rt+="scale-75 opacity-0 ":St==="float"?rt+="translate-y-8 opacity-0 ":St==="blur"?rt+="blur-md opacity-0 ":St==="fade"?rt+="opacity-50 ":St==="drop"?rt+="trans-drop-exit opacity-0 ":St==="roll"?rt+="trans-roll-exit opacity-0 ":rt+="opacity-0 ",St==="none"&&(rt=rt.replace("opacity-0","opacity-50"))),P==="large"||P==="large_upper"){const Dt=Ee?pe?"text-4xl":"text-6xl":pe?"text-6xl":"text-8xl",en=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${Dt} font-black text-white ${P==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,At=`${en} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(P==="big_center"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} font-black text-white uppercase tracking-tight text-center`,At=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="testing_up"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-white uppercase tracking-tight text-center`,At=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="testing"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-white tracking-tight text-center`,At=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="one_line_up"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-white uppercase tracking-tight text-center`,At=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="one_line"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-white tracking-tight text-center`,At=`${pt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="metal"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,At=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(P==="kids"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,At=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(P==="sad"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-7xl",pt=Ee?pe?"text-lg":"text-xl":pe?"text-xl":"text-2xl";et=`${q} text-zinc-200 tracking-wider text-center drop-shadow-md`,At=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(P==="romantic"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-7xl",pt=Ee?pe?"text-lg":"text-xl":pe?"text-xl":"text-2xl";et=`${q} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,At=`${pt} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(P==="tech"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,At=`${pt} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(P==="gothic"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-7xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl";et=`${q} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,At=`${pt} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(P==="monospace"){const q=Ee?pe?"text-2xl":"text-3xl":pe?"text-3xl":"text-5xl",pt=Ee?pe?"text-lg":"text-xl":pe?"text-xl":"text-2xl";et=`${q} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,At=`${pt} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(P==="classic"){const q=Ee?pe?"text-2xl":"text-3xl":pe?"text-3xl":"text-6xl",pt=Ee?pe?"text-lg":"text-xl":pe?"text-xl":"text-2xl";et=`${q} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,At=`${pt} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(P==="slideshow"||P==="just_video")et=`${Ee?pe?"text-2xl":"text-3xl":pe?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,At="hidden";else if(P==="subtitle"){et=`${Ee?pe?"text-2xl":"text-3xl":pe?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,At="hidden";let pt="bottom-16";pe&&Bi?pt="bottom-[480px]":pe?pt="bottom-[320px]":Bi&&(pt="bottom-40"),rt+=`fixed ${pt} left-1/2 -translate-x-1/2 w-full max-w-4xl px-4 `}else if(P==="custom"){const q=Ee?pe?"text-4xl":"text-5xl":pe?"text-6xl":"text-8xl",pt=Ee?pe?"text-xl":"text-2xl":pe?"text-2xl":"text-3xl",Dt=C.textAlign==="center"?"text-center":C.textAlign==="right"?"text-right":"text-left";et=`${q} tracking-tight ${Dt}`,At=`${pt} opacity-40 hover:opacity-100 ${Dt}`}else{const q=Ee?pe?"text-2xl":"text-3xl":pe?"text-3xl":"text-5xl",pt=Ee?pe?"text-lg":"text-xl":pe?"text-xl":"text-2xl";et=`${q} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,At=`${pt} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const kn=(C.lyricStyleTarget||"active-only")==="all"||Fe;let Pe={color:C.fontColor,fontWeight:kn?C.fontWeight:void 0,fontStyle:kn?C.fontStyle:void 0,textDecoration:kn?C.textDecoration:void 0,fontFamily:C.fontFamily==="CustomFont"?"CustomFont, sans-serif":C.fontFamily};if(P==="custom"&&Fe&&C.textEffect!=="none"){const q=C.textEffect;q==="glow"?Pe.textShadow=`0 0 10px ${C.fontColor}, 0 0 20px ${C.fontColor}`:q==="neon"?Pe.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${C.fontColor}, 0 0 40px ${C.fontColor}, 0 0 80px ${C.fontColor}`:q==="neon-multi"?Pe.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":q==="shadow"?Pe.textShadow="3px 3px 6px rgba(0,0,0,0.7)":q==="outline"?Pe.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":q==="3d"?Pe.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":q==="emboss"?(Pe.color="#ebebeb",Pe.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):q==="gold"?(Pe.background="linear-gradient(to bottom, #d4af37, #C5A028)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):q==="chrome"?(Pe.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):q==="fire"?(Pe.color="#fff",Pe.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):q==="frozen"?(Pe.color="#fff",Pe.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):q==="vhs"?Pe.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":q==="gradient"?(Pe.background=`linear-gradient(to right, ${C.fontColor}, #ffffff)`,Pe.WebkitBackgroundClip="text",Pe.color="transparent"):q==="rainbow"?(Pe.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):q==="glass"?(Pe.backgroundColor="rgba(255, 255, 255, 0.1)",Pe.backdropFilter="blur(8px)",Pe.padding="0.5rem 1rem",Pe.borderRadius="0.75rem",Pe.border="1px solid rgba(255, 255, 255, 0.2)",Pe.display="inline-block"):q==="mirror"?(Pe.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Pe.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):q==="retro"?(Pe.fontFamily="'Press Start 2P', cursive",Pe.color="#ff00ff",Pe.textShadow="4px 4px 0px #00ffff"):q==="hologram"?(Pe.color="rgba(0, 255, 255, 0.7)",Pe.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",Pe.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",Pe.WebkitBackgroundClip="text"):q==="comic"&&(Pe.fontFamily="'Bangers', cursive",Pe.color="#ffcc00",Pe.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",Pe.letterSpacing="1px")}let Kt=z.text;const Xt=C.textCase;Xt==="upper"?Kt=Kt.toUpperCase():Xt==="lower"?Kt=Kt.toLowerCase():Xt==="title"?Kt=Kt.replace(/\w\S*/g,q=>q.charAt(0).toUpperCase()+q.substr(1).toLowerCase()):Xt==="sentence"?Kt=Kt.charAt(0).toUpperCase()+Kt.slice(1).toLowerCase():Xt==="invert"&&(Kt=Kt.replace(/\w\S*/g,q=>q.charAt(0).toLowerCase()+q.slice(1).toUpperCase())),Kt=Kt.replace(/\s*([-])\s*/g,"$1"),Fe&&C.textAnimation==="typewriter"&&(Kt=Kt.substring(0,Math.max(0,Math.floor((_e-z.time)*35))));let Ci=Kt;if(Fe&&C.highlightEffect!=="none"){const q=C.highlightEffect,pt=z.words&&z.words.length>0;if((q==="karaoke"||q?.startsWith("karaoke-"))&&pt)Ci=z.words.filter(Dt=>Dt.text===`
`||Dt.text.trim().length>0).map((Dt,en,Kn)=>{if(Dt.text===`
`)return p.jsx("br",{},en);let Sn=Dt.text.trim();if(Xt==="upper")Sn=Sn.toUpperCase();else if(Xt==="lower")Sn=Sn.toLowerCase();else if(Xt==="title")Sn=Sn.replace(/\w\S*/g,gt=>gt.charAt(0).toUpperCase()+gt.substr(1).toLowerCase());else if(Xt==="sentence"){const gt=Sn.toLowerCase();Sn=en===0?gt.charAt(0).toUpperCase()+gt.slice(1):gt}else Xt==="invert"&&(Sn=Sn.replace(/\w\S*/g,gt=>gt.charAt(0).toLowerCase()+gt.slice(1).toUpperCase()));const Xn=Dt.startTime+ce,Qn=Dt.endTime+ce,Fi=_e>=Xn&&_e<Qn,ao=_e>=Qn,ro=/[-]$/,rn=/^[-]/;let Vn=!Sn.endsWith(" ");ro.test(Sn.trim())&&(Vn=!1);const Zn=Kn[en+1];Zn&&rn.test(Zn.text.trim())&&(Vn=!1),Zn&&Zn.text===`
`&&(Vn=!1),en===Kn.length-1&&(Vn=!1);let W={display:"inline-block",transition:"all 0.1s ease"};if(C.textDecoration&&C.textDecoration!=="none"&&(W.textDecoration=C.textDecoration),!Fi&&!ao)W.opacity=.5,W.transform="scale(1)";else if(ao)if(q==="karaoke-fill"){const gt=C.highlightBackground||"#fb923c";W.backgroundColor=gt,W.color="#000",W.padding="2px 6px",W.borderRadius="4px",W.opacity=1}else P==="custom"&&(W.color=C.fontColor),W.opacity=1;if(Fi){const gt=C.highlightColor||"#fb923c",Dn=C.highlightBackground||"#fb923c";q==="karaoke"||q==="color"?(W.color=gt,W.textShadow=`0 0 10px ${gt}`):q==="karaoke-neon"?(W.color="#fff",W.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${gt}, 0 0 35px ${gt}`):q==="karaoke-scale"?(W.color=gt,W.transform="scale(1.3)"):q==="karaoke-underline"?(W.color=gt,W.textDecoration=(W.textDecoration||"")+" underline",W.textDecorationColor=gt,W.textUnderlineOffset="4px"):q==="karaoke-bounce"?(W.color=gt,W.transform="translateY(-10px)"):q==="karaoke-fill"?(W.backgroundColor=Dn,W.color="#000",W.padding="2px 6px",W.borderRadius="4px"):q==="karaoke-outline"?(W.color="transparent",W.WebkitTextStroke=`2px ${gt}`):q==="karaoke-shadow"?(W.color=gt,W.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):q==="karaoke-gradient"?(W.background=`linear-gradient(90deg, ${gt}, ${Dn})`,W.WebkitBackgroundClip="text",W.WebkitTextFillColor="transparent"):q==="karaoke-wave"?(W.color=gt,W.animation="bounce 0.3s ease infinite"):q==="karaoke-pill"?(W.backgroundColor=Dn,W.color="#000",W.padding="4px 16px",W.borderRadius="9999px"):q==="karaoke-box"?(W.backgroundColor=Dn,W.color="#000",W.padding="4px 8px",W.borderRadius="0"):q==="karaoke-rounded"?(W.backgroundColor=Dn,W.color="#000",W.padding="4px 12px",W.padding="4px 12px",W.borderRadius="12px"):q==="karaoke-glass"?(W.backgroundColor="rgba(255, 255, 255, 0.1)",W.color="#fff",W.padding="4px 12px",W.borderRadius="8px",W.backdropFilter="blur(4px)",W.border="1px solid rgba(255, 255, 255, 0.3)",W.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):q==="karaoke-neon-multi"?(W.color="#fff",W.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):q==="karaoke-soft-glow"?(W.color=gt,W.textShadow=`0 0 5px ${gt}, 0 0 15px ${gt}, 0 0 30px ${gt}`):q==="karaoke-3d"?W.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":q==="karaoke-emboss"?(W.color="#ebebeb",W.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):q==="karaoke-chrome"?(W.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",W.WebkitBackgroundClip="text",W.color="transparent"):q==="karaoke-gold"?(W.background="linear-gradient(to bottom, #d4af37, #C5A028)",W.WebkitBackgroundClip="text",W.color="transparent"):q==="karaoke-fire"?(W.color="#fff",W.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):q==="karaoke-frozen"?(W.color="#fff",W.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):q==="karaoke-rainbow"?(W.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",W.WebkitBackgroundClip="text",W.color="transparent"):q==="karaoke-mirror"?(W.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",W.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):q==="karaoke-vhs"?W.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":q==="karaoke-retro"?(W.fontFamily="'Press Start 2P', cursive",W.color="#ff00ff",W.textShadow="4px 4px 0px #00ffff"):q==="karaoke-cyberpunk"?(W.color="#fcee0a",W.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8"):q==="karaoke-hologram"?(W.color="rgba(0, 255, 255, 0.7)",W.textShadow="0 0 5px rgba(0,255,255,0.5)"):q==="karaoke-comic"?(W.fontFamily="'Bangers', cursive",W.color="#ffcc00",W.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):q==="karaoke-glitch-text"?W.animation="anim-glitch 0.4s infinite linear":q==="karaoke-pulse"?W.animation="anim-pulse 1s infinite ease-in-out":q==="karaoke-breathe"?W.animation="anim-breathe 2s infinite ease-in-out":q==="karaoke-float"?W.animation="anim-float 2s infinite ease-in-out":q==="karaoke-sway"?W.animation="anim-sway 2s infinite ease-in-out":q==="karaoke-flicker"?W.animation="anim-flicker 2s infinite linear":q==="karaoke-shake"?W.animation="anim-shake 0.2s infinite linear":q==="karaoke-wobble"?W.animation="anim-wobble 1s infinite ease-in-out":q==="karaoke-jello"?W.animation="anim-jello 1s infinite":q==="karaoke-rubberband"?W.animation="anim-rubberband 1s infinite":q==="karaoke-heartbeat"?W.animation="anim-heartbeat 1.3s infinite ease-in-out":q==="karaoke-flash"?W.animation="anim-flash 1s infinite":q==="karaoke-tada"?W.animation="anim-tada 1s infinite":q==="karaoke-swing"?W.animation="anim-swing 2s infinite":q==="karaoke-rotate"?W.animation="anim-rotate 4s infinite linear":q==="karaoke-spin"?W.animation="anim-rotate 1s infinite linear":q==="karaoke-glitch"?W.animation="anim-glitch 0.3s infinite linear":q==="karaoke-typewriter"?(W.animation="typewriter-reveal 0.5s steps(10, end) forwards",W.whiteSpace="nowrap",W.overflow="hidden",W.display="inline-block",W.verticalAlign="bottom"):q==="karaoke-fade"?W.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":q==="karaoke-slide"?W.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":q==="karaoke-drop"?W.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":q==="karaoke-lightspeed"?W.animation="trans-lightspeed-in 0.5s ease-out forwards":q==="karaoke-roll"?W.animation="trans-roll-in 0.5s ease-out forwards":q==="karaoke-zoom"?W.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":q==="karaoke-elastic"?W.animation="trans-elastic-in 0.7s ease-out forwards":q==="karaoke-scale-rotate"?W.animation="trans-scale-rotate-in 0.5s ease-out forwards":q==="karaoke-flip"?W.animation="trans-flip-in 0.5s ease-out forwards":q==="karaoke-rotate-in"?W.animation="trans-rotate-in 0.5s ease-out forwards":q==="karaoke-spiral"?W.animation="trans-spiral-in 0.6s ease-out forwards":q==="karaoke-blur"?W.animation="trans-blur-in 0.4s ease-out forwards":q==="karaoke-shatter"?W.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(q||"")&&(W.color=gt,W.textShadow=`0 0 10px ${gt}`,q?.includes("glow")&&(W.textShadow=`0 0 5px ${gt}, 0 0 15px ${gt}, 0 0 30px ${gt}`))}const mn=p.jsx("span",{className:"inline-block",style:W,children:Sn},en);return Vn?p.jsxs(Xm.Fragment,{children:[mn," "]},en):mn});else if(q==="karaoke"||q?.startsWith("karaoke-")){const Dt=C.highlightColor||"#fb923c",en=C.highlightBackground||"#fb923c";Pe.color=Dt,q==="karaoke-neon"&&(Pe.textShadow=`0 0 10px ${Dt}, 0 0 20px ${Dt}`),q==="karaoke-scale"&&(Pe.transform=(Pe.transform||"")+" scale(1.1)"),q==="karaoke-underline"&&(Pe.textDecoration="underline"),q==="karaoke-bounce"&&(Pe.transform=(Pe.transform||"")+" translateY(-5px)"),q==="karaoke-fill"&&(Pe.backgroundColor=en,Pe.color="#000",Pe.padding="4px 12px",Pe.borderRadius="6px"),q==="karaoke-outline"&&(Pe.color="transparent",Pe.WebkitTextStroke=`2px ${Dt}`),q==="karaoke-shadow"&&(Pe.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),q==="karaoke-gradient"&&(Pe.background=`linear-gradient(90deg, ${Dt}, ${en})`,Pe.WebkitBackgroundClip="text",Pe.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(q)&&(Pe.backgroundColor=en,Pe.color="#000",Pe.padding="4px 16px",Pe.borderRadius=q==="karaoke-pill"?"9999px":q==="karaoke-rounded"?"12px":"0"),q?.includes("glow")&&(Pe.textShadow=`0 0 10px ${Dt}, 0 0 20px ${Dt}`)}else q==="scale"?Pe.color=C.highlightColor||"#fb923c":C.highlightEffect==="background"&&(Pe.backgroundColor=(C.highlightBackground||"#fb923c")+"4D",Pe.padding="0 10px",Pe.borderRadius="8px")}return p.jsx("p",{"data-lyric-active":Fe?"true":"false",className:`${rt} ${Fe?et:At} ${Fe&&C.textAnimation!=="none"&&C.textAnimation!=="typewriter"?`text-anim-${C.textAnimation}`:""}`,style:Pe,onClick:()=>{Fe&&(navigator.clipboard.writeText(z.text),n.success("Lyric copied to clipboard",1500)),o.current&&!U&&(o.current.currentTime=z.time,Qe(z.time))},children:Ci},Q)}),p.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?ye===Mn.EDITOR||Le?"h-[25vh]":!sn&&!Bi?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):p.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!nl&&P!=="none"&&p.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[p.jsx(Ll,{size:64,className:"opacity-20"}),p.jsx("p",{children:"Load audio & lyrics to start"}),p.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),p.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Bi?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:p.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 group",children:[p.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Pl(_e)}),p.jsxs("div",{className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all",children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full",style:{width:`${_e/Ie*100}%`}}),p.jsx("input",{type:"range",min:"0",max:Ie||0,value:_e,onChange:wr,disabled:U,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait"})]}),p.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Pl(Ie)}),p.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[p.jsx("button",{onClick:()=>B(!xe),className:"text-zinc-400 hover:text-white",children:xe||bt===0?p.jsx(Dl,{size:16}):p.jsx(Io,{size:16})}),p.jsxs("div",{className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol",children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors",style:{width:`${xe?0:bt*100}%`}}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:xe?0:bt,onChange:Os,className:"absolute inset-0 opacity-0 cursor-pointer"})]})]})]}),p.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[p.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[p.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio",children:[p.jsx(Ll,{size:18}),p.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:un,disabled:U})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${O.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt)",children:[p.jsx(rr,{size:18}),p.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml",className:"hidden",onChange:Si,disabled:U})]}),O.length>0&&p.jsx("button",{onClick:()=>F([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:U,children:p.jsx(vi,{size:14})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[p.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[ce>0?"+":"",ce.toFixed(1),"s"]}),p.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[p.jsx("button",{onClick:()=>ke(z=>parseFloat((z+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:U,children:p.jsx(n0,{size:12})}),p.jsx("button",{onClick:()=>ke(z=>parseFloat((z-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:U,children:p.jsx(ar,{size:12})})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${je?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:je?`Custom Font: ${je}`:"Load Custom Font (.ttf, .otf, .woff)",children:[p.jsx(zo,{size:18}),p.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:Yn,disabled:U})]}),je&&p.jsx("button",{onClick:()=>Ve(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:U,children:p.jsx(vi,{size:14})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[p.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(C.fontSizeScale*100),"%"]}),p.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[p.jsx("button",{onClick:()=>L(z=>({...z,fontSizeScale:Math.min(z.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:U,children:p.jsx(n0,{size:12})}),p.jsx("button",{onClick:()=>L(z=>({...z,fontSizeScale:Math.max(z.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:U,children:p.jsx(ar,{size:12})})]})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:P,onChange:z=>{const Q=z.target.value;Ae(Q);const Fe=yr[Q];if(Fe){const pe={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};L(Ee=>({...Ee,...pe,...Fe}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Visual Preset",children:[p.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),p.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),p.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),p.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),p.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),p.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),p.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),p.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),p.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),p.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),p.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),p.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),p.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),p.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),p.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),p.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),p.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),p.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),p.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),p.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),p.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),p.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:ft,title:"Stop (S)",disabled:U,children:p.jsx(Pc,{size:20,fill:"currentColor"})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U||Y.length===0,onClick:Pi,title:"Previous Song",children:p.jsx(Mb,{size:24})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:p.jsx(vb,{size:20})}),p.jsx("button",{onClick:at,disabled:U,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:Me?p.jsx(Wm,{size:28,fill:"currentColor"}):p.jsx(Uc,{size:28,fill:"currentColor",className:"ml-1"})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:p.jsx(Fx,{size:20})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:U||Y.length===0,onClick:ai,title:"Next Song",children:p.jsx(kb,{size:24})}),p.jsxs("button",{className:`transition-colors disabled:opacity-50 ${ve!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:wt,title:`Repeat: ${ve==="off"?"Off":ve==="one"?"One":ve==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:U,children:[ve==="one"&&p.jsx(mb,{size:20}),ve==="all_repeat"&&p.jsx(a0,{size:20}),ve==="all"&&p.jsx(ur,{size:20}),ve==="off"&&p.jsx(a0,{size:20,className:"opacity-50"})]})]}),p.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>L(z=>({...z,backgroundBlurStrength:z.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${k?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${k?"On":"Off"}`,disabled:U,children:k?"BLUR":"SHARP"}),p.jsx("button",{onClick:()=>L(z=>({...z,highlightEffect:z.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${C.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:p.jsx(zo,{size:20})}),p.jsx("button",{onClick:()=>fe(z=>z==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:U,children:Ne}),p.jsx("button",{onClick:()=>be(z=>z==="16:9"?"9:16":z==="9:16"?"3:4":z==="3:4"?"1:1":z==="1:1"?"1:2":z==="1:2"?"2:1":z==="2:1"?"2:3":z==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:U,children:Ue})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:Ye,onChange:z=>G(z.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Video Codec",children:[p.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),ae.map(z=>p.jsx("option",{value:z.value,className:"bg-zinc-900",children:z.label},z.value))]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:Ce,onChange:z=>ge(z.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:U,title:"Select Quality (Bitrate)",children:[p.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),p.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),p.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),p.jsx("button",{onClick:Gi,disabled:U||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Export as Video",children:p.jsx(Bs,{size:18})})]})]})]})})}),Le?p.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:p.jsx(NA,{playlist:Y,setPlaylist:Te,currentTrackIndex:X,setCurrentTrackIndex:Be,onPlayTrack:Gn,isPlaying:Me,onTogglePlay:at,currentTime:_e,onSeek:z=>{o.current&&!U&&(o.current.currentTime=z,Qe(z))},onClearPlaylist:()=>{ft(),x(null),F([]),Be(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:z=>{z===X?(ft(),x(null),F([]),Be(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):z<X&&Be(Q=>Q-1),Te(Q=>{const Fe=[...Q];return Fe.splice(z,1),Fe})},onClose:()=>He(!1)})}):ye===Mn.EDITOR&&p.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:p.jsx(d1,{slides:K,setSlides:le,currentTime:_e,duration:Ie||60,lyrics:O,onSeek:z=>{o.current&&!U&&(o.current.currentTime=z,Qe(z))},onClose:()=>ue(Mn.PLAYER),renderConfig:C,setRenderConfig:L})})]}),U&&p.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[p.jsx("div",{className:"animate-bounce",children:p.jsx(Bs,{size:48,className:"text-purple-500"})}),p.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Rendering Video (",Ue," ",Ne,")"]}),p.jsxs("p",{className:"text-zinc-400 max-w-md",children:["Rendering in real-time using Canvas 2D engine.",p.jsx("br",{}),"The audio will play during capture.",p.jsx("br",{}),"Please keep this tab active for best performance."]}),p.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300 ease-linear",style:{width:`${ie}%`}})}),p.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(ie),"%"]}),p.jsxs("button",{onClick:Lo,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[p.jsx(Pc,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),he&&p.jsx(UA,{config:C,setConfig:L,preset:P,setPreset:Ae,onClose:()=>E(!1),isPlaylistMode:Le,hasPlaylist:Y.length>0,onRender:Gi,customFontName:je,onFontUpload:Yn,onClearCustomFont:()=>Ve(null),resolution:Ne,setResolution:fe,aspectRatio:Ue,setAspectRatio:be,renderCodec:Ye,setRenderCodec:G,supportedCodecs:ae,renderQuality:Ce,setRenderQuality:ge,renderFps:oe,setRenderFps:se})]})}const Xg=document.getElementById("root");if(!Xg)throw new Error("Could not find root element to mount to");const GA=ux.createRoot(Xg);GA.render(p.jsx(Xm.StrictMode,{children:p.jsx(a1,{children:p.jsx(PA,{})})}));export{HA as c,Km as g};
