(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(r){if(r.ep)return;r.ep=!0;const u=o(r);fetch(r.href,u)}})();var uA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bu={exports:{}},Vs={};var a0;function dx(){if(a0)return Vs;a0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,u){var h=null;if(u!==void 0&&(h=""+u),r.key!==void 0&&(h=""+r.key),"key"in r){u={};for(var y in r)y!=="key"&&(u[y]=r[y])}else u=r;return r=u.ref,{$$typeof:n,type:s,key:h,ref:r!==void 0?r:null,props:u}}return Vs.Fragment=t,Vs.jsx=o,Vs.jsxs=o,Vs}var r0;function fx(){return r0||(r0=1,Bu.exports=dx()),Bu.exports}var d=fx(),Vu={exports:{}},wt={};var c0;function px(){if(c0)return wt;c0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),w=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,H={};function $(U,ae,Se){this.props=U,this.context=ae,this.refs=H,this.updater=Se||N}$.prototype.isReactComponent={},$.prototype.setState=function(U,ae){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ae,"setState")},$.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function re(){}re.prototype=$.prototype;function ue(U,ae,Se){this.props=U,this.context=ae,this.refs=H,this.updater=Se||N}var ge=ue.prototype=new re;ge.constructor=ue,V(ge,$.prototype),ge.isPureReactComponent=!0;var De=Array.isArray;function He(){}var be={H:null,A:null,T:null,S:null},Xe=Object.prototype.hasOwnProperty;function Ne(U,ae,Se){var Fe=Se.ref;return{$$typeof:n,type:U,key:ae,ref:Fe!==void 0?Fe:null,props:Se}}function Ke(U,ae){return Ne(U.type,ae,U.props)}function Ue(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function ot(U){var ae={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Se){return ae[Se]})}var ft=/\/+/g;function bt(U,ae){return typeof U=="object"&&U!==null&&U.key!=null?ot(""+U.key):ae.toString(36)}function Et(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(He,He):(U.status="pending",U.then(function(ae){U.status==="pending"&&(U.status="fulfilled",U.value=ae)},function(ae){U.status==="pending"&&(U.status="rejected",U.reason=ae)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function B(U,ae,Se,Fe,it){var b=typeof U;(b==="undefined"||b==="boolean")&&(U=null);var D=!1;if(U===null)D=!0;else switch(b){case"bigint":case"string":case"number":D=!0;break;case"object":switch(U.$$typeof){case n:case t:D=!0;break;case x:return D=U._init,B(D(U._payload),ae,Se,Fe,it)}}if(D)return it=it(U),D=Fe===""?"."+bt(U,0):Fe,De(it)?(Se="",D!=null&&(Se=D.replace(ft,"$&/")+"/"),B(it,ae,Se,"",function(Me){return Me})):it!=null&&(Ue(it)&&(it=Ke(it,Se+(it.key==null||U&&U.key===it.key?"":(""+it.key).replace(ft,"$&/")+"/")+D)),ae.push(it)),1;D=0;var q=Fe===""?".":Fe+":";if(De(U))for(var W=0;W<U.length;W++)Fe=U[W],b=q+bt(Fe,W),D+=B(Fe,ae,Se,b,it);else if(W=_(U),typeof W=="function")for(U=W.call(U),W=0;!(Fe=U.next()).done;)Fe=Fe.value,b=q+bt(Fe,W++),D+=B(Fe,ae,Se,b,it);else if(b==="object"){if(typeof U.then=="function")return B(Et(U),ae,Se,Fe,it);throw ae=String(U),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return D}function Ce(U,ae,Se){if(U==null)return U;var Fe=[],it=0;return B(U,Fe,"","",function(b){return ae.call(Se,b,it++)}),Fe}function ie(U){if(U._status===-1){var ae=U._result;ae=ae(),ae.then(function(Se){(U._status===0||U._status===-1)&&(U._status=1,U._result=Se)},function(Se){(U._status===0||U._status===-1)&&(U._status=2,U._result=Se)}),U._status===-1&&(U._status=0,U._result=ae)}if(U._status===1)return U._result.default;throw U._result}var fe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},vt={map:Ce,forEach:function(U,ae,Se){Ce(U,function(){ae.apply(this,arguments)},Se)},count:function(U){var ae=0;return Ce(U,function(){ae++}),ae},toArray:function(U){return Ce(U,function(ae){return ae})||[]},only:function(U){if(!Ue(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return wt.Activity=S,wt.Children=vt,wt.Component=$,wt.Fragment=o,wt.Profiler=r,wt.PureComponent=ue,wt.StrictMode=s,wt.Suspense=v,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=be,wt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return be.H.useMemoCache(U)}},wt.cache=function(U){return function(){return U.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(U,ae,Se){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Fe=V({},U.props),it=U.key;if(ae!=null)for(b in ae.key!==void 0&&(it=""+ae.key),ae)!Xe.call(ae,b)||b==="key"||b==="__self"||b==="__source"||b==="ref"&&ae.ref===void 0||(Fe[b]=ae[b]);var b=arguments.length-2;if(b===1)Fe.children=Se;else if(1<b){for(var D=Array(b),q=0;q<b;q++)D[q]=arguments[q+2];Fe.children=D}return Ne(U.type,it,Fe)},wt.createContext=function(U){return U={$$typeof:h,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:u,_context:U},U},wt.createElement=function(U,ae,Se){var Fe,it={},b=null;if(ae!=null)for(Fe in ae.key!==void 0&&(b=""+ae.key),ae)Xe.call(ae,Fe)&&Fe!=="key"&&Fe!=="__self"&&Fe!=="__source"&&(it[Fe]=ae[Fe]);var D=arguments.length-2;if(D===1)it.children=Se;else if(1<D){for(var q=Array(D),W=0;W<D;W++)q[W]=arguments[W+2];it.children=q}if(U&&U.defaultProps)for(Fe in D=U.defaultProps,D)it[Fe]===void 0&&(it[Fe]=D[Fe]);return Ne(U,b,it)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(U){return{$$typeof:y,render:U}},wt.isValidElement=Ue,wt.lazy=function(U){return{$$typeof:x,_payload:{_status:-1,_result:U},_init:ie}},wt.memo=function(U,ae){return{$$typeof:m,type:U,compare:ae===void 0?null:ae}},wt.startTransition=function(U){var ae=be.T,Se={};be.T=Se;try{var Fe=U(),it=be.S;it!==null&&it(Se,Fe),typeof Fe=="object"&&Fe!==null&&typeof Fe.then=="function"&&Fe.then(He,fe)}catch(b){fe(b)}finally{ae!==null&&Se.types!==null&&(ae.types=Se.types),be.T=ae}},wt.unstable_useCacheRefresh=function(){return be.H.useCacheRefresh()},wt.use=function(U){return be.H.use(U)},wt.useActionState=function(U,ae,Se){return be.H.useActionState(U,ae,Se)},wt.useCallback=function(U,ae){return be.H.useCallback(U,ae)},wt.useContext=function(U){return be.H.useContext(U)},wt.useDebugValue=function(){},wt.useDeferredValue=function(U,ae){return be.H.useDeferredValue(U,ae)},wt.useEffect=function(U,ae){return be.H.useEffect(U,ae)},wt.useEffectEvent=function(U){return be.H.useEffectEvent(U)},wt.useId=function(){return be.H.useId()},wt.useImperativeHandle=function(U,ae,Se){return be.H.useImperativeHandle(U,ae,Se)},wt.useInsertionEffect=function(U,ae){return be.H.useInsertionEffect(U,ae)},wt.useLayoutEffect=function(U,ae){return be.H.useLayoutEffect(U,ae)},wt.useMemo=function(U,ae){return be.H.useMemo(U,ae)},wt.useOptimistic=function(U,ae){return be.H.useOptimistic(U,ae)},wt.useReducer=function(U,ae,Se){return be.H.useReducer(U,ae,Se)},wt.useRef=function(U){return be.H.useRef(U)},wt.useState=function(U){return be.H.useState(U)},wt.useSyncExternalStore=function(U,ae,Se){return be.H.useSyncExternalStore(U,ae,Se)},wt.useTransition=function(){return be.H.useTransition()},wt.version="19.2.3",wt}var u0;function xd(){return u0||(u0=1,Vu.exports=px()),Vu.exports}var Z=xd();const hg=pg(Z);var Ou={exports:{}},Os={},ju={exports:{}},qu={};var d0;function hx(){return d0||(d0=1,(function(n){function t(B,Ce){var ie=B.length;B.push(Ce);e:for(;0<ie;){var fe=ie-1>>>1,vt=B[fe];if(0<r(vt,Ce))B[fe]=Ce,B[ie]=vt,ie=fe;else break e}}function o(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var Ce=B[0],ie=B.pop();if(ie!==Ce){B[0]=ie;e:for(var fe=0,vt=B.length,U=vt>>>1;fe<U;){var ae=2*(fe+1)-1,Se=B[ae],Fe=ae+1,it=B[Fe];if(0>r(Se,ie))Fe<vt&&0>r(it,Se)?(B[fe]=it,B[Fe]=ie,fe=Fe):(B[fe]=Se,B[ae]=ie,fe=ae);else if(Fe<vt&&0>r(it,ie))B[fe]=it,B[Fe]=ie,fe=Fe;else break e}}return Ce}function r(B,Ce){var ie=B.sortIndex-Ce.sortIndex;return ie!==0?ie:B.id-Ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,S=null,w=3,_=!1,N=!1,V=!1,H=!1,$=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function ge(B){for(var Ce=o(m);Ce!==null;){if(Ce.callback===null)s(m);else if(Ce.startTime<=B)s(m),Ce.sortIndex=Ce.expirationTime,t(v,Ce);else break;Ce=o(m)}}function De(B){if(V=!1,ge(B),!N)if(o(v)!==null)N=!0,He||(He=!0,ot());else{var Ce=o(m);Ce!==null&&Et(De,Ce.startTime-B)}}var He=!1,be=-1,Xe=5,Ne=-1;function Ke(){return H?!0:!(n.unstable_now()-Ne<Xe)}function Ue(){if(H=!1,He){var B=n.unstable_now();Ne=B;var Ce=!0;try{e:{N=!1,V&&(V=!1,re(be),be=-1),_=!0;var ie=w;try{t:{for(ge(B),S=o(v);S!==null&&!(S.expirationTime>B&&Ke());){var fe=S.callback;if(typeof fe=="function"){S.callback=null,w=S.priorityLevel;var vt=fe(S.expirationTime<=B);if(B=n.unstable_now(),typeof vt=="function"){S.callback=vt,ge(B),Ce=!0;break t}S===o(v)&&s(v),ge(B)}else s(v);S=o(v)}if(S!==null)Ce=!0;else{var U=o(m);U!==null&&Et(De,U.startTime-B),Ce=!1}}break e}finally{S=null,w=ie,_=!1}Ce=void 0}}finally{Ce?ot():He=!1}}}var ot;if(typeof ue=="function")ot=function(){ue(Ue)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,bt=ft.port2;ft.port1.onmessage=Ue,ot=function(){bt.postMessage(null)}}else ot=function(){$(Ue,0)};function Et(B,Ce){be=$(function(){B(n.unstable_now())},Ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Xe=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(B){switch(w){case 1:case 2:case 3:var Ce=3;break;default:Ce=w}var ie=w;w=Ce;try{return B()}finally{w=ie}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(B,Ce){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=w;w=B;try{return Ce()}finally{w=ie}},n.unstable_scheduleCallback=function(B,Ce,ie){var fe=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,B){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=ie+vt,B={id:x++,callback:Ce,priorityLevel:B,startTime:ie,expirationTime:vt,sortIndex:-1},ie>fe?(B.sortIndex=ie,t(m,B),o(v)===null&&B===o(m)&&(V?(re(be),be=-1):V=!0,Et(De,ie-fe))):(B.sortIndex=vt,t(v,B),N||_||(N=!0,He||(He=!0,ot()))),B},n.unstable_shouldYield=Ke,n.unstable_wrapCallback=function(B){var Ce=w;return function(){var ie=w;w=Ce;try{return B.apply(this,arguments)}finally{w=ie}}}})(qu)),qu}var f0;function mx(){return f0||(f0=1,ju.exports=hx()),ju.exports}var $u={exports:{}},Fn={};var p0;function gx(){if(p0)return Fn;p0=1;var n=xd();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(v,m,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fn.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(v,m,null,x)},Fn.flushSync=function(v){var m=h.T,x=s.p;try{if(h.T=null,s.p=2,v)return v()}finally{h.T=m,s.p=x,s.d.f()}},Fn.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(v,m))},Fn.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Fn.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:_}):x==="script"&&s.d.X(v,{crossOrigin:S,integrity:w,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Fn.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);s.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(v)},Fn.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin);s.d.L(v,x,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Fn.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);s.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(v)},Fn.requestFormReset=function(v){s.d.r(v)},Fn.unstable_batchedUpdates=function(v,m){return v(m)},Fn.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},Fn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Fn.version="19.2.3",Fn}var h0;function yx(){if(h0)return $u.exports;h0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),$u.exports=gx(),$u.exports}var m0;function vx(){if(m0)return Os;m0=1;var n=mx(),t=xd(),o=yx();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(u(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var l=e,a=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(a=p.return,a!==null){l=a;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return v(p),e;if(g===a)return v(p),i;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=p,a=g;else{for(var T=!1,C=p.child;C;){if(C===l){T=!0,l=p,a=g;break}if(C===a){T=!0,a=p,l=g;break}C=C.sibling}if(!T){for(C=g.child;C;){if(C===l){T=!0,l=g,a=p;break}if(C===a){T=!0,a=g,l=p;break}C=C.sibling}if(!T)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var S=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Xe=Symbol.for("react.lazy"),Ne=Symbol.for("react.activity"),Ke=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function ot(e){return e===null||typeof e!="object"?null:(e=Ue&&e[Ue]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Symbol.for("react.client.reference");function bt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case $:return"Profiler";case H:return"StrictMode";case De:return"Suspense";case He:return"SuspenseList";case Ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case ue:return e.displayName||"Context";case re:return(e._context.displayName||"Context")+".Consumer";case ge:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case be:return i=e.displayName||null,i!==null?i:bt(e.type)||"Memo";case Xe:i=e._payload,e=e._init;try{return bt(e(i))}catch{}}return null}var Et=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},fe=[],vt=-1;function U(e){return{current:e}}function ae(e){0>vt||(e.current=fe[vt],fe[vt]=null,vt--)}function Se(e,i){vt++,fe[vt]=e.current,e.current=i}var Fe=U(null),it=U(null),b=U(null),D=U(null);function q(e,i){switch(Se(b,i),Se(it,e),Se(Fe,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Rh(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Rh(i),e=kh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(Fe),Se(Fe,e)}function W(){ae(Fe),ae(it),ae(b)}function Me(e){e.memoizedState!==null&&Se(D,e);var i=Fe.current,l=kh(i,e.type);i!==l&&(Se(it,e),Se(Fe,l))}function xe(e){it.current===e&&(ae(Fe),ae(it)),D.current===e&&(ae(D),Hs._currentValue=ie)}var we,ke;function pe(e){if(we===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);we=i&&i[1]||"",ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+e+ke}var ye=!1;function Ie(e,i){if(!e||ye)return"";ye=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ne){var K=ne}Reflect.construct(e,[],Te)}else{try{Te.call()}catch(ne){K=ne}e.call(Te.prototype)}}else{try{throw Error()}catch(ne){K=ne}(Te=e())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ne){if(ne&&K&&typeof ne.stack=="string")return[ne.stack,K.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),T=g[0],C=g[1];if(T&&C){var k=T.split(`
`),J=C.split(`
`);for(p=a=0;a<k.length&&!k[a].includes("DetermineComponentFrameRoot");)a++;for(;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;if(a===k.length||p===J.length)for(a=k.length-1,p=J.length-1;1<=a&&0<=p&&k[a]!==J[p];)p--;for(;1<=a&&0<=p;a--,p--)if(k[a]!==J[p]){if(a!==1||p!==1)do if(a--,p--,0>p||k[a]!==J[p]){var de=`
`+k[a].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=a&&0<=p);break}}}finally{ye=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?pe(l):""}function Je(e,i){switch(e.tag){case 26:case 27:case 5:return pe(e.type);case 16:return pe("Lazy");case 13:return e.child!==i&&i!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Ie(e.type,!1);case 11:return Ie(e.type.render,!1);case 1:return Ie(e.type,!0);case 31:return pe("Activity");default:return""}}function Ve(e){try{var i="",l=null;do i+=Je(e,l),l=e,e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var et=Object.prototype.hasOwnProperty,G=n.unstable_scheduleCallback,L=n.unstable_cancelCallback,he=n.unstable_shouldYield,Ee=n.unstable_requestPaint,me=n.unstable_now,se=n.unstable_getCurrentPriorityLevel,E=n.unstable_ImmediatePriority,z=n.unstable_UserBlockingPriority,O=n.unstable_NormalPriority,M=n.unstable_LowPriority,ee=n.unstable_IdlePriority,I=n.log,le=n.unstable_setDisableYieldValue,oe=null,ce=null;function A(e){if(typeof I=="function"&&le(e),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(oe,e)}catch{}}var Oe=Math.clz32?Math.clz32:Dt,We=Math.log,Ge=Math.LN2;function Dt(e){return e>>>=0,e===0?32:31-(We(e)/Ge|0)|0}var xt=256,Jt=262144,ut=4194304;function st(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Re(e,i,l){var a=e.pendingLanes;if(a===0)return 0;var p=0,g=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~g,a!==0?p=st(a):(T&=C,T!==0?p=st(T):l||(l=C&~e,l!==0&&(p=st(l))))):(C=a&~g,C!==0?p=st(C):T!==0?p=st(T):l||(l=a&~e,l!==0&&(p=st(l)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:p}function dt(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function je(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ze(){var e=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),e}function Rt(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function Ct(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yt(e,i,l,a,p,g){var T=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var C=e.entanglements,k=e.expirationTimes,J=e.hiddenUpdates;for(l=T&~l;0<l;){var de=31-Oe(l),Te=1<<de;C[de]=0,k[de]=-1;var K=J[de];if(K!==null)for(J[de]=null,de=0;de<K.length;de++){var ne=K[de];ne!==null&&(ne.lane&=-536870913)}l&=~Te}a!==0&&$t(e,a,0),g!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=g&~(T&~i))}function $t(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var a=31-Oe(i);e.entangledLanes|=i,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function xn(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var a=31-Oe(l),p=1<<a;p&i|e[a]&i&&(e[a]|=i),l&=~p}}function Vn(e,i){var l=i&-i;return l=(l&42)!==0?1:Ji(l),(l&(e.suspendedLanes|i))!==0?0:l}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Fi(){var e=Ce.p;return e!==0?e:(e=window.event,e===void 0?32:e0(e.type))}function mi(e,i){var l=Ce.p;try{return Ce.p=e,i()}finally{Ce.p=l}}var On=Math.random().toString(36).slice(2),Ye="__reactFiber$"+On,lt="__reactProps$"+On,Gt="__reactContainer$"+On,jn="__reactEvents$"+On,Ft="__reactListeners$"+On,Cn="__reactHandles$"+On,gi="__reactResources$"+On,oi="__reactMarker$"+On;function Bi(e){delete e[Ye],delete e[lt],delete e[jn],delete e[Ft],delete e[Cn]}function Vi(e){var i=e[Ye];if(i)return i;for(var l=e.parentNode;l;){if(i=l[Gt]||l[Ye]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=Hh(e);e!==null;){if(l=e[Ye])return l;e=Hh(e)}return i}e=l,l=e.parentNode}return null}function qn(e){if(e=e[Ye]||e[Gt]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function vo(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Ki(e){var i=e[gi];return i||(i=e[gi]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gn(e){e[oi]=!0}var ia=new Set,oa={};function Xi(e,i){Qi(e,i),Qi(e+"Capture",i)}function Qi(e,i){for(oa[e]=i,e=0;e<i.length;e++)ia.add(i[e])}var Or=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),os={},la={};function jr(e){return et.call(la,e)?!0:et.call(os,e)?!1:Or.test(e)?la[e]=!0:(os[e]=!0,!1)}function xo(e,i,l){if(jr(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function bo(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function Xn(e,i,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+a)}}function An(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ko(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qr(e,i,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(T){l=""+T,g.call(this,T)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function hl(e){if(!e._valueTracker){var i=Ko(e)?"checked":"value";e._valueTracker=qr(e,i,""+e[i])}}function sa(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return e&&(a=Ko(e)?e.checked?"true":"false":e.value),e=a,e!==l?(i.setValue(e),!0):!1}function Oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var So=/[\n"\\]/g;function Gn(e){return e.replace(So,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Zi(e,i,l,a,p,g,T,C){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),i!=null?T==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+An(i)):e.value!==""+An(i)&&(e.value=""+An(i)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),i!=null?Q(e,T,An(i)):l!=null?Q(e,T,An(l)):a!=null&&e.removeAttribute("value"),p==null&&g!=null&&(e.defaultChecked=!!g),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+An(C):e.removeAttribute("name")}function R(e,i,l,a,p,g,T,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){hl(e);return}l=l!=null?""+An(l):"",i=i!=null?""+An(i):l,C||i===e.value||(e.value=i),e.defaultValue=i}a=a??p,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),hl(e)}function Q(e,i,l){i==="number"&&Oi(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Le(e,i,l,a){if(e=e.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<e.length;l++)p=i.hasOwnProperty("$"+e[l].value),e[l].selected!==p&&(e[l].selected=p),p&&a&&(e[l].defaultSelected=!0)}else{for(l=""+An(l),i=null,p=0;p<e.length;p++){if(e[p].value===l){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function te(e,i,l){if(i!=null&&(i=""+An(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+An(l):""}function _e(e,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(Et(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=An(i),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),hl(e)}function Be(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var rt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gt(e,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":a?e.setProperty(i,l):typeof l!="number"||l===0||rt.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function ht(e,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var p in i)a=i[p],i.hasOwnProperty(p)&&l[p]!==a&&gt(e,p,a)}else for(var g in i)i.hasOwnProperty(g)&&gt(e,g,i[g])}function zn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kt(e){return Pe.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Mn=null;function j(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var at=null,Tt=null;function mt(e){var i=qn(e);if(i&&(e=i.stateNode)){var l=e[lt]||null;e:switch(e=i.stateNode,i.type){case"input":if(Zi(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Gn(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==e&&a.form===e.form){var p=a[lt]||null;if(!p)throw Error(s(90));Zi(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===e.form&&sa(a)}break e;case"textarea":te(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Le(e,!!l.multiple,i,!1)}}}var dn=!1;function ln(e,i,l){if(dn)return e(i,l);dn=!0;try{var a=e(i);return a}finally{if(dn=!1,(at!==null||Tt!==null)&&(Va(),at&&(i=at,e=Tt,Tt=at=null,mt(i),e)))for(i=0;i<e.length;i++)mt(e[i])}}function li(e,i){var l=e.stateNode;if(l===null)return null;var a=l[lt]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(_n)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{Ri=!1}var Qn=null,Ii=null,Wt=null;function zi(){if(Wt)return Wt;var e,i=Ii,l=i.length,a,p="value"in Qn?Qn.value:Qn.textContent,g=p.length;for(e=0;e<l&&i[e]===p[e];e++);var T=l-e;for(a=1;a<=T&&i[l-a]===p[g-a];a++);return Wt=p.slice(e,1<a?1-a:void 0)}function X(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function $n(){return!0}function _t(){return!1}function Kt(e){function i(l,a,p,g,T){this._reactName=l,this._targetInst=p,this.type=a,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(l=e[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$n:_t,this.isPropagationStopped=_t,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),i}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=Kt(Zn),si=S({},Zn,{view:0,detail:0}),Xo=Kt(si),Ae,Qe,Mt,qe=S({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mt&&(Mt&&e.type==="mousemove"?(Ae=e.screenX-Mt.screenX,Qe=e.screenY-Mt.screenY):Qe=Ae=0,Mt=e),Ae)},movementY:function(e){return"movementY"in e?e.movementY:Qe}}),sn=Kt(qe),jt=S({},qe,{dataTransfer:0}),bn=Kt(jt),vi=S({},si,{relatedTarget:0}),Rn=Kt(vi),To=S({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),ml=Kt(To),my=S({},Zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gy=Kt(my),yy=S({},Zn,{data:0}),zd=Kt(yy),vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},by={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=by[e])?!!i[e]:!1}function $r(){return Sy}var Ty=S({},si,{key:function(e){if(e.key){var i=vy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=X(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(e){return e.type==="keypress"?X(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?X(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wy=Kt(Ty),Ey=S({},qe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dd=Kt(Ey),Cy=S({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),_y=Kt(Cy),Ny=S({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=Kt(Ny),My=S({},qe,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ry=Kt(My),ky=S({},Zn,{newState:0,oldState:0}),Iy=Kt(ky),zy=[9,13,27,32],Yr=_n&&"CompositionEvent"in window,ls=null;_n&&"documentMode"in document&&(ls=document.documentMode);var Dy=_n&&"TextEvent"in window&&!ls,Ld=_n&&(!Yr||ls&&8<ls&&11>=ls),Ud=" ",Pd=!1;function Hd(e,i){switch(e){case"keyup":return zy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gl=!1;function Ly(e,i){switch(e){case"compositionend":return Gd(i);case"keypress":return i.which!==32?null:(Pd=!0,Ud);case"textInput":return e=i.data,e===Ud&&Pd?null:e;default:return null}}function Uy(e,i){if(gl)return e==="compositionend"||!Yr&&Hd(e,i)?(e=zi(),Wt=Ii=Qn=null,gl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ld&&i.locale!=="ko"?null:i.data;default:return null}}var Py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Py[e.type]:i==="textarea"}function Bd(e,i,l,a){at?Tt?Tt.push(a):Tt=[a]:at=a,i=Ka(i,"onChange"),0<i.length&&(l=new yi("onChange","change",null,l,a),e.push({event:l,listeners:i}))}var ss=null,as=null;function Hy(e){Eh(e,0)}function aa(e){var i=vo(e);if(sa(i))return e}function Vd(e,i){if(e==="change")return i}var Od=!1;if(_n){var Jr;if(_n){var Kr="oninput"in document;if(!Kr){var jd=document.createElement("div");jd.setAttribute("oninput","return;"),Kr=typeof jd.oninput=="function"}Jr=Kr}else Jr=!1;Od=Jr&&(!document.documentMode||9<document.documentMode)}function qd(){ss&&(ss.detachEvent("onpropertychange",$d),as=ss=null)}function $d(e){if(e.propertyName==="value"&&aa(as)){var i=[];Bd(i,as,e,j(e)),ln(Hy,i)}}function Gy(e,i,l){e==="focusin"?(qd(),ss=i,as=l,ss.attachEvent("onpropertychange",$d)):e==="focusout"&&qd()}function Fy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return aa(as)}function By(e,i){if(e==="click")return aa(i)}function Vy(e,i){if(e==="input"||e==="change")return aa(i)}function Oy(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ai=typeof Object.is=="function"?Object.is:Oy;function rs(e,i){if(ai(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var p=l[a];if(!et.call(i,p)||!ai(e[p],i[p]))return!1}return!0}function Yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jd(e,i){var l=Yd(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=i&&a>=i)return{node:l,offset:i-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yd(l)}}function Kd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Kd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Xd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Oi(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Oi(e.document)}return i}function Xr(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var jy=_n&&"documentMode"in document&&11>=document.documentMode,yl=null,Qr=null,cs=null,Zr=!1;function Qd(e,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zr||yl==null||yl!==Oi(a)||(a=yl,"selectionStart"in a&&Xr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),cs&&rs(cs,a)||(cs=a,a=Ka(Qr,"onSelect"),0<a.length&&(i=new yi("onSelect","select",null,i,l),e.push({event:i,listeners:a}),i.target=yl)))}function Qo(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var vl={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionrun:Qo("Transition","TransitionRun"),transitionstart:Qo("Transition","TransitionStart"),transitioncancel:Qo("Transition","TransitionCancel"),transitionend:Qo("Transition","TransitionEnd")},Wr={},Zd={};_n&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function Zo(e){if(Wr[e])return Wr[e];if(!vl[e])return e;var i=vl[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in Zd)return Wr[e]=i[l];return e}var Wd=Zo("animationend"),ef=Zo("animationiteration"),tf=Zo("animationstart"),qy=Zo("transitionrun"),$y=Zo("transitionstart"),Yy=Zo("transitioncancel"),nf=Zo("transitionend"),of=new Map,ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ec.push("scrollEnd");function Di(e,i){of.set(e,i),Xi(i,[e])}var ra=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xi=[],xl=0,tc=0;function ca(){for(var e=xl,i=tc=xl=0;i<e;){var l=xi[i];xi[i++]=null;var a=xi[i];xi[i++]=null;var p=xi[i];xi[i++]=null;var g=xi[i];if(xi[i++]=null,a!==null&&p!==null){var T=a.pending;T===null?p.next=p:(p.next=T.next,T.next=p),a.pending=p}g!==0&&lf(l,p,g)}}function ua(e,i,l,a){xi[xl++]=e,xi[xl++]=i,xi[xl++]=l,xi[xl++]=a,tc|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function nc(e,i,l,a){return ua(e,i,l,a),da(e)}function Wo(e,i){return ua(e,null,null,i),da(e)}function lf(e,i,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var p=!1,g=e.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(p=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,p&&i!==null&&(p=31-Oe(l),e=g.hiddenUpdates,a=e[p],a===null?e[p]=[i]:a.push(i),i.lane=l|536870912),g):null}function da(e){if(50<ks)throw ks=0,du=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var bl={};function Jy(e,i,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(e,i,l,a){return new Jy(e,i,l,a)}function ic(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wi(e,i){var l=e.alternate;return l===null?(l=ri(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function sf(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function fa(e,i,l,a,p,g){var T=0;if(a=e,typeof e=="function")ic(e)&&(T=1);else if(typeof e=="string")T=Wv(e,l,Fe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ne:return e=ri(31,l,i,p),e.elementType=Ne,e.lanes=g,e;case V:return el(l.children,p,g,i);case H:T=8,p|=24;break;case $:return e=ri(12,l,i,p|2),e.elementType=$,e.lanes=g,e;case De:return e=ri(13,l,i,p),e.elementType=De,e.lanes=g,e;case He:return e=ri(19,l,i,p),e.elementType=He,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ue:T=10;break e;case re:T=9;break e;case ge:T=11;break e;case be:T=14;break e;case Xe:T=16,a=null;break e}T=29,l=Error(s(130,e===null?"null":typeof e,"")),a=null}return i=ri(T,l,i,p),i.elementType=e,i.type=a,i.lanes=g,i}function el(e,i,l,a){return e=ri(7,e,a,i),e.lanes=l,e}function oc(e,i,l){return e=ri(6,e,null,i),e.lanes=l,e}function af(e){var i=ri(18,null,null,0);return i.stateNode=e,i}function lc(e,i,l){return i=ri(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var rf=new WeakMap;function bi(e,i){if(typeof e=="object"&&e!==null){var l=rf.get(e);return l!==void 0?l:(i={value:e,source:i,stack:Ve(i)},rf.set(e,i),i)}return{value:e,source:i,stack:Ve(i)}}var Sl=[],Tl=0,pa=null,us=0,Si=[],Ti=0,wo=null,ji=1,qi="";function eo(e,i){Sl[Tl++]=us,Sl[Tl++]=pa,pa=e,us=i}function cf(e,i,l){Si[Ti++]=ji,Si[Ti++]=qi,Si[Ti++]=wo,wo=e;var a=ji;e=qi;var p=32-Oe(a)-1;a&=~(1<<p),l+=1;var g=32-Oe(i)+p;if(30<g){var T=p-p%5;g=(a&(1<<T)-1).toString(32),a>>=T,p-=T,ji=1<<32-Oe(i)+p|l<<p|a,qi=g+e}else ji=1<<g|l<<p|a,qi=e}function sc(e){e.return!==null&&(eo(e,1),cf(e,1,0))}function ac(e){for(;e===pa;)pa=Sl[--Tl],Sl[Tl]=null,us=Sl[--Tl],Sl[Tl]=null;for(;e===wo;)wo=Si[--Ti],Si[Ti]=null,qi=Si[--Ti],Si[Ti]=null,ji=Si[--Ti],Si[Ti]=null}function uf(e,i){Si[Ti++]=ji,Si[Ti++]=qi,Si[Ti++]=wo,ji=i.id,qi=i.overflow,wo=e}var Dn=null,an=null,Ht=!1,Eo=null,wi=!1,rc=Error(s(519));function Co(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ds(bi(i,e)),rc}function df(e){var i=e.stateNode,l=e.type,a=e.memoizedProps;switch(i[Ye]=e,i[lt]=a,l){case"dialog":zt("cancel",i),zt("close",i);break;case"iframe":case"object":case"embed":zt("load",i);break;case"video":case"audio":for(l=0;l<zs.length;l++)zt(zs[l],i);break;case"source":zt("error",i);break;case"img":case"image":case"link":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"input":zt("invalid",i),R(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":zt("invalid",i);break;case"textarea":zt("invalid",i),_e(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||Ah(i.textContent,l)?(a.popover!=null&&(zt("beforetoggle",i),zt("toggle",i)),a.onScroll!=null&&zt("scroll",i),a.onScrollEnd!=null&&zt("scrollend",i),a.onClick!=null&&(i.onclick=Pt),i=!0):i=!1,i||Co(e,!0)}function ff(e){for(Dn=e.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:Dn=Dn.return}}function wl(e){if(e!==Dn)return!1;if(!Ht)return ff(e),Ht=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||_u(e.type,e.memoizedProps)),l=!l),l&&an&&Co(e),ff(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=Ph(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=Ph(e)}else i===27?(i=an,Go(e.type)?(e=ku,ku=null,an=e):an=i):an=Dn?Ci(e.stateNode.nextSibling):null;return!0}function tl(){an=Dn=null,Ht=!1}function cc(){var e=Eo;return e!==null&&(ni===null?ni=e:ni.push.apply(ni,e),Eo=null),e}function ds(e){Eo===null?Eo=[e]:Eo.push(e)}var uc=U(null),nl=null,to=null;function _o(e,i,l){Se(uc,i._currentValue),i._currentValue=l}function no(e){e._currentValue=uc.current,ae(uc)}function dc(e,i,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===l)break;e=e.return}}function fc(e,i,l,a){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var g=p.dependencies;if(g!==null){var T=p.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=p;for(var k=0;k<i.length;k++)if(C.context===i[k]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),dc(g.return,l,e),a||(T=null);break e}g=C.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(s(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),dc(T,l,e),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===e){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function El(e,i,l,a){e=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=p.type;ai(p.pendingProps.value,T.value)||(e!==null?e.push(C):e=[C])}}else if(p===D.current){if(T=p.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Hs):e=[Hs])}p=p.return}e!==null&&fc(i,e,l,a),i.flags|=262144}function ha(e){for(e=e.firstContext;e!==null;){if(!ai(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function il(e){nl=e,to=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return pf(nl,e)}function ma(e,i){return nl===null&&il(e),pf(e,i)}function pf(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},to===null){if(e===null)throw Error(s(308));to=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else to=to.next=i;return l}var Ky=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Xy=n.unstable_scheduleCallback,Qy=n.unstable_NormalPriority,Sn={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pc(){return{controller:new Ky,data:new Map,refCount:0}}function fs(e){e.refCount--,e.refCount===0&&Xy(Qy,function(){e.controller.abort()})}var ps=null,hc=0,Cl=0,_l=null;function Zy(e,i){if(ps===null){var l=ps=[];hc=0,Cl=yu(),_l={status:"pending",value:void 0,then:function(a){l.push(a)}}}return hc++,i.then(hf,hf),i}function hf(){if(--hc===0&&ps!==null){_l!==null&&(_l.status="fulfilled");var e=ps;ps=null,Cl=0,_l=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Wy(e,i){var l=[],a={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return e.then(function(){a.status="fulfilled",a.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(a.status="rejected",a.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),a}var mf=B.S;B.S=function(e,i){Zp=me(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Zy(e,i),mf!==null&&mf(e,i)};var ol=U(null);function mc(){var e=ol.current;return e!==null?e:on.pooledCache}function ga(e,i){i===null?Se(ol,ol.current):Se(ol,i.pool)}function gf(){var e=mc();return e===null?null:{parent:Sn._currentValue,pool:e}}var Nl=Error(s(460)),gc=Error(s(474)),ya=Error(s(542)),va={then:function(){}};function yf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vf(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(Pt,Pt),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,bf(e),e;default:if(typeof i.status=="string")i.then(Pt,Pt);else{if(e=on,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(a){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=a}},function(a){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,bf(e),e}throw sl=i,Nl}}function ll(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(sl=l,Nl):l}}var sl=null;function xf(){if(sl===null)throw Error(s(459));var e=sl;return sl=null,e}function bf(e){if(e===Nl||e===ya)throw Error(s(483))}var Al=null,hs=0;function xa(e){var i=hs;return hs+=1,Al===null&&(Al=[]),vf(Al,e,i)}function ms(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function ba(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Sf(e){function i(F,P){if(e){var Y=F.deletions;Y===null?(F.deletions=[P],F.flags|=16):Y.push(P)}}function l(F,P){if(!e)return null;for(;P!==null;)i(F,P),P=P.sibling;return null}function a(F){for(var P=new Map;F!==null;)F.key!==null?P.set(F.key,F):P.set(F.index,F),F=F.sibling;return P}function p(F,P){return F=Wi(F,P),F.index=0,F.sibling=null,F}function g(F,P,Y){return F.index=Y,e?(Y=F.alternate,Y!==null?(Y=Y.index,Y<P?(F.flags|=67108866,P):Y):(F.flags|=67108866,P)):(F.flags|=1048576,P)}function T(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function C(F,P,Y,ve){return P===null||P.tag!==6?(P=oc(Y,F.mode,ve),P.return=F,P):(P=p(P,Y),P.return=F,P)}function k(F,P,Y,ve){var ct=Y.type;return ct===V?de(F,P,Y.props.children,ve,Y.key):P!==null&&(P.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Xe&&ll(ct)===P.type)?(P=p(P,Y.props),ms(P,Y),P.return=F,P):(P=fa(Y.type,Y.key,Y.props,null,F.mode,ve),ms(P,Y),P.return=F,P)}function J(F,P,Y,ve){return P===null||P.tag!==4||P.stateNode.containerInfo!==Y.containerInfo||P.stateNode.implementation!==Y.implementation?(P=lc(Y,F.mode,ve),P.return=F,P):(P=p(P,Y.children||[]),P.return=F,P)}function de(F,P,Y,ve,ct){return P===null||P.tag!==7?(P=el(Y,F.mode,ve,ct),P.return=F,P):(P=p(P,Y),P.return=F,P)}function Te(F,P,Y){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=oc(""+P,F.mode,Y),P.return=F,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case _:return Y=fa(P.type,P.key,P.props,null,F.mode,Y),ms(Y,P),Y.return=F,Y;case N:return P=lc(P,F.mode,Y),P.return=F,P;case Xe:return P=ll(P),Te(F,P,Y)}if(Et(P)||ot(P))return P=el(P,F.mode,Y,null),P.return=F,P;if(typeof P.then=="function")return Te(F,xa(P),Y);if(P.$$typeof===ue)return Te(F,ma(F,P),Y);ba(F,P)}return null}function K(F,P,Y,ve){var ct=P!==null?P.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ct!==null?null:C(F,P,""+Y,ve);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:return Y.key===ct?k(F,P,Y,ve):null;case N:return Y.key===ct?J(F,P,Y,ve):null;case Xe:return Y=ll(Y),K(F,P,Y,ve)}if(Et(Y)||ot(Y))return ct!==null?null:de(F,P,Y,ve,null);if(typeof Y.then=="function")return K(F,P,xa(Y),ve);if(Y.$$typeof===ue)return K(F,P,ma(F,Y),ve);ba(F,Y)}return null}function ne(F,P,Y,ve,ct){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return F=F.get(Y)||null,C(P,F,""+ve,ct);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _:return F=F.get(ve.key===null?Y:ve.key)||null,k(P,F,ve,ct);case N:return F=F.get(ve.key===null?Y:ve.key)||null,J(P,F,ve,ct);case Xe:return ve=ll(ve),ne(F,P,Y,ve,ct)}if(Et(ve)||ot(ve))return F=F.get(Y)||null,de(P,F,ve,ct,null);if(typeof ve.then=="function")return ne(F,P,Y,xa(ve),ct);if(ve.$$typeof===ue)return ne(F,P,Y,ma(P,ve),ct);ba(P,ve)}return null}function Ze(F,P,Y,ve){for(var ct=null,Bt=null,nt=P,At=P=0,Ut=null;nt!==null&&At<Y.length;At++){nt.index>At?(Ut=nt,nt=null):Ut=nt.sibling;var Vt=K(F,nt,Y[At],ve);if(Vt===null){nt===null&&(nt=Ut);break}e&&nt&&Vt.alternate===null&&i(F,nt),P=g(Vt,P,At),Bt===null?ct=Vt:Bt.sibling=Vt,Bt=Vt,nt=Ut}if(At===Y.length)return l(F,nt),Ht&&eo(F,At),ct;if(nt===null){for(;At<Y.length;At++)nt=Te(F,Y[At],ve),nt!==null&&(P=g(nt,P,At),Bt===null?ct=nt:Bt.sibling=nt,Bt=nt);return Ht&&eo(F,At),ct}for(nt=a(nt);At<Y.length;At++)Ut=ne(nt,F,At,Y[At],ve),Ut!==null&&(e&&Ut.alternate!==null&&nt.delete(Ut.key===null?At:Ut.key),P=g(Ut,P,At),Bt===null?ct=Ut:Bt.sibling=Ut,Bt=Ut);return e&&nt.forEach(function(jo){return i(F,jo)}),Ht&&eo(F,At),ct}function pt(F,P,Y,ve){if(Y==null)throw Error(s(151));for(var ct=null,Bt=null,nt=P,At=P=0,Ut=null,Vt=Y.next();nt!==null&&!Vt.done;At++,Vt=Y.next()){nt.index>At?(Ut=nt,nt=null):Ut=nt.sibling;var jo=K(F,nt,Vt.value,ve);if(jo===null){nt===null&&(nt=Ut);break}e&&nt&&jo.alternate===null&&i(F,nt),P=g(jo,P,At),Bt===null?ct=jo:Bt.sibling=jo,Bt=jo,nt=Ut}if(Vt.done)return l(F,nt),Ht&&eo(F,At),ct;if(nt===null){for(;!Vt.done;At++,Vt=Y.next())Vt=Te(F,Vt.value,ve),Vt!==null&&(P=g(Vt,P,At),Bt===null?ct=Vt:Bt.sibling=Vt,Bt=Vt);return Ht&&eo(F,At),ct}for(nt=a(nt);!Vt.done;At++,Vt=Y.next())Vt=ne(nt,F,At,Vt.value,ve),Vt!==null&&(e&&Vt.alternate!==null&&nt.delete(Vt.key===null?At:Vt.key),P=g(Vt,P,At),Bt===null?ct=Vt:Bt.sibling=Vt,Bt=Vt);return e&&nt.forEach(function(ux){return i(F,ux)}),Ht&&eo(F,At),ct}function nn(F,P,Y,ve){if(typeof Y=="object"&&Y!==null&&Y.type===V&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:e:{for(var ct=Y.key;P!==null;){if(P.key===ct){if(ct=Y.type,ct===V){if(P.tag===7){l(F,P.sibling),ve=p(P,Y.props.children),ve.return=F,F=ve;break e}}else if(P.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Xe&&ll(ct)===P.type){l(F,P.sibling),ve=p(P,Y.props),ms(ve,Y),ve.return=F,F=ve;break e}l(F,P);break}else i(F,P);P=P.sibling}Y.type===V?(ve=el(Y.props.children,F.mode,ve,Y.key),ve.return=F,F=ve):(ve=fa(Y.type,Y.key,Y.props,null,F.mode,ve),ms(ve,Y),ve.return=F,F=ve)}return T(F);case N:e:{for(ct=Y.key;P!==null;){if(P.key===ct)if(P.tag===4&&P.stateNode.containerInfo===Y.containerInfo&&P.stateNode.implementation===Y.implementation){l(F,P.sibling),ve=p(P,Y.children||[]),ve.return=F,F=ve;break e}else{l(F,P);break}else i(F,P);P=P.sibling}ve=lc(Y,F.mode,ve),ve.return=F,F=ve}return T(F);case Xe:return Y=ll(Y),nn(F,P,Y,ve)}if(Et(Y))return Ze(F,P,Y,ve);if(ot(Y)){if(ct=ot(Y),typeof ct!="function")throw Error(s(150));return Y=ct.call(Y),pt(F,P,Y,ve)}if(typeof Y.then=="function")return nn(F,P,xa(Y),ve);if(Y.$$typeof===ue)return nn(F,P,ma(F,Y),ve);ba(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,P!==null&&P.tag===6?(l(F,P.sibling),ve=p(P,Y),ve.return=F,F=ve):(l(F,P),ve=oc(Y,F.mode,ve),ve.return=F,F=ve),T(F)):l(F,P)}return function(F,P,Y,ve){try{hs=0;var ct=nn(F,P,Y,ve);return Al=null,ct}catch(nt){if(nt===Nl||nt===ya)throw nt;var Bt=ri(29,nt,null,F.mode);return Bt.lanes=ve,Bt.return=F,Bt}}}var al=Sf(!0),Tf=Sf(!1),No=!1;function yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ao(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(e,i,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(qt&2)!==0){var p=a.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),a.pending=i,i=da(e),lf(e,null,l),i}return ua(e,a,i,l),da(e)}function gs(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,xn(e,l)}}function xc(e,i){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var bc=!1;function ys(){if(bc){var e=_l;if(e!==null)throw e}}function vs(e,i,l,a){bc=!1;var p=e.updateQueue;No=!1;var g=p.firstBaseUpdate,T=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var k=C,J=k.next;k.next=null,T===null?g=J:T.next=J,T=k;var de=e.alternate;de!==null&&(de=de.updateQueue,C=de.lastBaseUpdate,C!==T&&(C===null?de.firstBaseUpdate=J:C.next=J,de.lastBaseUpdate=k))}if(g!==null){var Te=p.baseState;T=0,de=J=k=null,C=g;do{var K=C.lane&-536870913,ne=K!==C.lane;if(ne?(Lt&K)===K:(a&K)===K){K!==0&&K===Cl&&(bc=!0),de!==null&&(de=de.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ze=e,pt=C;K=i;var nn=l;switch(pt.tag){case 1:if(Ze=pt.payload,typeof Ze=="function"){Te=Ze.call(nn,Te,K);break e}Te=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=pt.payload,K=typeof Ze=="function"?Ze.call(nn,Te,K):Ze,K==null)break e;Te=S({},Te,K);break e;case 2:No=!0}}K=C.callback,K!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[K]:ne.push(K))}else ne={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},de===null?(J=de=ne,k=Te):de=de.next=ne,T|=K;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;ne=C,C=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);de===null&&(k=Te),p.baseState=k,p.firstBaseUpdate=J,p.lastBaseUpdate=de,g===null&&(p.shared.lanes=0),Do|=T,e.lanes=T,e.memoizedState=Te}}function wf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Ef(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)wf(l[e],i)}var Ml=U(null),Sa=U(0);function Cf(e,i){e=fo,Se(Sa,e),Se(Ml,i),fo=e|i.baseLanes}function Sc(){Se(Sa,fo),Se(Ml,Ml.current)}function Tc(){fo=Sa.current,ae(Ml),ae(Sa)}var ci=U(null),Ei=null;function Ro(e){var i=e.alternate;Se(yn,yn.current&1),Se(ci,e),Ei===null&&(i===null||Ml.current!==null||i.memoizedState!==null)&&(Ei=e)}function wc(e){Se(yn,yn.current),Se(ci,e),Ei===null&&(Ei=e)}function _f(e){e.tag===22?(Se(yn,yn.current),Se(ci,e),Ei===null&&(Ei=e)):ko()}function ko(){Se(yn,yn.current),Se(ci,ci.current)}function ui(e){ae(ci),Ei===e&&(Ei=null),ae(yn)}var yn=U(0);function Ta(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Mu(l)||Ru(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var io=0,Nt=null,en=null,Tn=null,wa=!1,Rl=!1,rl=!1,Ea=0,xs=0,kl=null,ev=0;function pn(){throw Error(s(321))}function Ec(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ai(e[l],i[l]))return!1;return!0}function Cc(e,i,l,a,p,g){return io=g,Nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?cp:Fc,rl=!1,g=l(a,p),rl=!1,Rl&&(g=Af(i,l,a,p)),Nf(e),g}function Nf(e){B.H=Ts;var i=en!==null&&en.next!==null;if(io=0,Tn=en=Nt=null,wa=!1,xs=0,kl=null,i)throw Error(s(300));e===null||wn||(e=e.dependencies,e!==null&&ha(e)&&(wn=!0))}function Af(e,i,l,a){Nt=e;var p=0;do{if(Rl&&(kl=null),xs=0,Rl=!1,25<=p)throw Error(s(301));if(p+=1,Tn=en=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=up,g=i(l,a)}while(Rl);return g}function tv(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?bs(i):i,e=e.useState()[0],(en!==null?en.memoizedState:null)!==e&&(Nt.flags|=1024),i}function _c(){var e=Ea!==0;return Ea=0,e}function Nc(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function Ac(e){if(wa){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}wa=!1}io=0,Tn=en=Nt=null,Rl=!1,xs=Ea=0,kl=null}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Nt.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function vn(){if(en===null){var e=Nt.alternate;e=e!==null?e.memoizedState:null}else e=en.next;var i=Tn===null?Nt.memoizedState:Tn.next;if(i!==null)Tn=i,en=e;else{if(e===null)throw Nt.alternate===null?Error(s(467)):Error(s(310));en=e,e={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Tn===null?Nt.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function Ca(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bs(e){var i=xs;return xs+=1,kl===null&&(kl=[]),e=vf(kl,e,i),i=Nt,(Tn===null?i.memoizedState:Tn.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?cp:Fc),e}function _a(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return bs(e);if(e.$$typeof===ue)return Ln(e)}throw Error(s(438,String(e)))}function Mc(e){var i=null,l=Nt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Nt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Ca(),Nt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),a=0;a<e;a++)l[a]=Ke;return i.index++,l}function oo(e,i){return typeof i=="function"?i(e):i}function Na(e){var i=vn();return Rc(i,en,e)}function Rc(e,i,l){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var p=e.baseQueue,g=a.pending;if(g!==null){if(p!==null){var T=p.next;p.next=g.next,g.next=T}i.baseQueue=p=g,a.pending=null}if(g=e.baseState,p===null)e.memoizedState=g;else{i=p.next;var C=T=null,k=null,J=i,de=!1;do{var Te=J.lane&-536870913;if(Te!==J.lane?(Lt&Te)===Te:(io&Te)===Te){var K=J.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),Te===Cl&&(de=!0);else if((io&K)===K){J=J.next,K===Cl&&(de=!0);continue}else Te={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(C=k=Te,T=g):k=k.next=Te,Nt.lanes|=K,Do|=K;Te=J.action,rl&&l(g,Te),g=J.hasEagerState?J.eagerState:l(g,Te)}else K={lane:Te,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(C=k=K,T=g):k=k.next=K,Nt.lanes|=Te,Do|=Te;J=J.next}while(J!==null&&J!==i);if(k===null?T=g:k.next=C,!ai(g,e.memoizedState)&&(wn=!0,de&&(l=_l,l!==null)))throw l;e.memoizedState=g,e.baseState=T,e.baseQueue=k,a.lastRenderedState=g}return p===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function kc(e){var i=vn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var a=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do g=e(g,T.action),T=T.next;while(T!==p);ai(g,i.memoizedState)||(wn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,a]}function Mf(e,i,l){var a=Nt,p=vn(),g=Ht;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=i();var T=!ai((en||p).memoizedState,l);if(T&&(p.memoizedState=l,wn=!0),p=p.queue,Dc(If.bind(null,a,p,e),[e]),p.getSnapshot!==i||T||Tn!==null&&Tn.memoizedState.tag&1){if(a.flags|=2048,Il(9,{destroy:void 0},kf.bind(null,a,p,l,i),null),on===null)throw Error(s(349));g||(io&127)!==0||Rf(a,i,l)}return l}function Rf(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Nt.updateQueue,i===null?(i=Ca(),Nt.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function kf(e,i,l,a){i.value=l,i.getSnapshot=a,zf(i)&&Df(e)}function If(e,i,l){return l(function(){zf(i)&&Df(e)})}function zf(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ai(e,l)}catch{return!0}}function Df(e){var i=Wo(e,2);i!==null&&ii(i,e,2)}function Ic(e){var i=Yn();if(typeof e=="function"){var l=e;if(e=l(),rl){A(!0);try{l()}finally{A(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e},i}function Lf(e,i,l,a){return e.baseState=l,Rc(e,en,typeof a=="function"?a:oo)}function nv(e,i,l,a,p){if(Ra(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};B.T!==null?l(!0):g.isTransition=!1,a(g),l=i.pending,l===null?(g.next=i.pending=g,Uf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function Uf(e,i){var l=i.action,a=i.payload,p=e.state;if(i.isTransition){var g=B.T,T={};B.T=T;try{var C=l(p,a),k=B.S;k!==null&&k(T,C),Pf(e,i,C)}catch(J){zc(e,i,J)}finally{g!==null&&T.types!==null&&(g.types=T.types),B.T=g}}else try{g=l(p,a),Pf(e,i,g)}catch(J){zc(e,i,J)}}function Pf(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Hf(e,i,a)},function(a){return zc(e,i,a)}):Hf(e,i,l)}function Hf(e,i,l){i.status="fulfilled",i.value=l,Gf(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,Uf(e,l)))}function zc(e,i,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,Gf(i),i=i.next;while(i!==a)}e.action=null}function Gf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Ff(e,i){return i}function Bf(e,i){if(Ht){var l=on.formState;if(l!==null){e:{var a=Nt;if(Ht){if(an){t:{for(var p=an,g=wi;p.nodeType!==8;){if(!g){p=null;break t}if(p=Ci(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){an=Ci(p.nextSibling),a=p.data==="F!";break e}}Co(a)}a=!1}a&&(i=l[0])}}return l=Yn(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ff,lastRenderedState:i},l.queue=a,l=sp.bind(null,Nt,a),a.dispatch=l,a=Ic(!1),g=Gc.bind(null,Nt,!1,a.queue),a=Yn(),p={state:i,dispatch:null,action:e,pending:null},a.queue=p,l=nv.bind(null,Nt,p,g,l),p.dispatch=l,a.memoizedState=e,[i,l,!1]}function Vf(e){var i=vn();return Of(i,en,e)}function Of(e,i,l){if(i=Rc(e,i,Ff)[0],e=Na(oo)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=bs(i)}catch(T){throw T===Nl?ya:T}else a=i;i=vn();var p=i.queue,g=p.dispatch;return l!==i.memoizedState&&(Nt.flags|=2048,Il(9,{destroy:void 0},iv.bind(null,p,l),null)),[a,g,e]}function iv(e,i){e.action=i}function jf(e){var i=vn(),l=en;if(l!==null)return Of(i,l,e);vn(),i=i.memoizedState,l=vn();var a=l.queue.dispatch;return l.memoizedState=e,[i,a,!1]}function Il(e,i,l,a){return e={tag:e,create:l,deps:a,inst:i,next:null},i=Nt.updateQueue,i===null&&(i=Ca(),Nt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,i.lastEffect=e),e}function qf(){return vn().memoizedState}function Aa(e,i,l,a){var p=Yn();Nt.flags|=e,p.memoizedState=Il(1|i,{destroy:void 0},l,a===void 0?null:a)}function Ma(e,i,l,a){var p=vn();a=a===void 0?null:a;var g=p.memoizedState.inst;en!==null&&a!==null&&Ec(a,en.memoizedState.deps)?p.memoizedState=Il(i,g,l,a):(Nt.flags|=e,p.memoizedState=Il(1|i,g,l,a))}function $f(e,i){Aa(8390656,8,e,i)}function Dc(e,i){Ma(2048,8,e,i)}function ov(e){Nt.flags|=4;var i=Nt.updateQueue;if(i===null)i=Ca(),Nt.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function Yf(e){var i=vn().memoizedState;return ov({ref:i,nextImpl:e}),function(){if((qt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Jf(e,i){return Ma(4,2,e,i)}function Kf(e,i){return Ma(4,4,e,i)}function Xf(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Qf(e,i,l){l=l!=null?l.concat([e]):null,Ma(4,4,Xf.bind(null,i,e),l)}function Lc(){}function Zf(e,i){var l=vn();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&Ec(i,a[1])?a[0]:(l.memoizedState=[e,i],e)}function Wf(e,i){var l=vn();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&Ec(i,a[1]))return a[0];if(a=e(),rl){A(!0);try{e()}finally{A(!1)}}return l.memoizedState=[a,i],a}function Uc(e,i,l){return l===void 0||(io&1073741824)!==0&&(Lt&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=eh(),Nt.lanes|=e,Do|=e,l)}function ep(e,i,l,a){return ai(l,i)?l:Ml.current!==null?(e=Uc(e,l,a),ai(e,i)||(wn=!0),e):(io&42)===0||(io&1073741824)!==0&&(Lt&261930)===0?(wn=!0,e.memoizedState=l):(e=eh(),Nt.lanes|=e,Do|=e,i)}function tp(e,i,l,a,p){var g=Ce.p;Ce.p=g!==0&&8>g?g:8;var T=B.T,C={};B.T=C,Gc(e,!1,i,l);try{var k=p(),J=B.S;if(J!==null&&J(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var de=Wy(k,a);Ss(e,i,de,pi(e))}else Ss(e,i,a,pi(e))}catch(Te){Ss(e,i,{then:function(){},status:"rejected",reason:Te},pi())}finally{Ce.p=g,T!==null&&C.types!==null&&(T.types=C.types),B.T=T}}function lv(){}function Pc(e,i,l,a){if(e.tag!==5)throw Error(s(476));var p=np(e).queue;tp(e,p,i,ie,l===null?lv:function(){return ip(e),l(a)})}function np(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:ie},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function ip(e){var i=np(e);i.next===null&&(i=e.alternate.memoizedState),Ss(e,i.next.queue,{},pi())}function Hc(){return Ln(Hs)}function op(){return vn().memoizedState}function lp(){return vn().memoizedState}function sv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=pi();e=Ao(l);var a=Mo(i,e,l);a!==null&&(ii(a,i,l),gs(a,i,l)),i={cache:pc()},e.payload=i;return}i=i.return}}function av(e,i,l){var a=pi();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ra(e)?ap(i,l):(l=nc(e,i,l,a),l!==null&&(ii(l,e,a),rp(l,i,a)))}function sp(e,i,l){var a=pi();Ss(e,i,l,a)}function Ss(e,i,l,a){var p={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ra(e))ap(i,p);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var T=i.lastRenderedState,C=g(T,l);if(p.hasEagerState=!0,p.eagerState=C,ai(C,T))return ua(e,i,p,0),on===null&&ca(),!1}catch{}if(l=nc(e,i,p,a),l!==null)return ii(l,e,a),rp(l,i,a),!0}return!1}function Gc(e,i,l,a){if(a={lane:2,revertLane:yu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ra(e)){if(i)throw Error(s(479))}else i=nc(e,l,a,2),i!==null&&ii(i,e,2)}function Ra(e){var i=e.alternate;return e===Nt||i!==null&&i===Nt}function ap(e,i){Rl=wa=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function rp(e,i,l){if((l&4194048)!==0){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,xn(e,l)}}var Ts={readContext:Ln,use:_a,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};Ts.useEffectEvent=pn;var cp={readContext:Ln,use:_a,useCallback:function(e,i){return Yn().memoizedState=[e,i===void 0?null:i],e},useContext:Ln,useEffect:$f,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,Aa(4194308,4,Xf.bind(null,i,e),l)},useLayoutEffect:function(e,i){return Aa(4194308,4,e,i)},useInsertionEffect:function(e,i){Aa(4,2,e,i)},useMemo:function(e,i){var l=Yn();i=i===void 0?null:i;var a=e();if(rl){A(!0);try{e()}finally{A(!1)}}return l.memoizedState=[a,i],a},useReducer:function(e,i,l){var a=Yn();if(l!==void 0){var p=l(i);if(rl){A(!0);try{l(i)}finally{A(!1)}}}else p=i;return a.memoizedState=a.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},a.queue=e,e=e.dispatch=av.bind(null,Nt,e),[a.memoizedState,e]},useRef:function(e){var i=Yn();return e={current:e},i.memoizedState=e},useState:function(e){e=Ic(e);var i=e.queue,l=sp.bind(null,Nt,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:Lc,useDeferredValue:function(e,i){var l=Yn();return Uc(l,e,i)},useTransition:function(){var e=Ic(!1);return e=tp.bind(null,Nt,e.queue,!0,!1),Yn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var a=Nt,p=Yn();if(Ht){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),on===null)throw Error(s(349));(Lt&127)!==0||Rf(a,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,$f(If.bind(null,a,g,e),[e]),a.flags|=2048,Il(9,{destroy:void 0},kf.bind(null,a,g,l,i),null),l},useId:function(){var e=Yn(),i=on.identifierPrefix;if(Ht){var l=qi,a=ji;l=(a&~(1<<32-Oe(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Ea++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=ev++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Hc,useFormState:Bf,useActionState:Bf,useOptimistic:function(e){var i=Yn();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Gc.bind(null,Nt,!0,l),l.dispatch=i,[e,i]},useMemoCache:Mc,useCacheRefresh:function(){return Yn().memoizedState=sv.bind(null,Nt)},useEffectEvent:function(e){var i=Yn(),l={impl:e};return i.memoizedState=l,function(){if((qt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Fc={readContext:Ln,use:_a,useCallback:Zf,useContext:Ln,useEffect:Dc,useImperativeHandle:Qf,useInsertionEffect:Jf,useLayoutEffect:Kf,useMemo:Wf,useReducer:Na,useRef:qf,useState:function(){return Na(oo)},useDebugValue:Lc,useDeferredValue:function(e,i){var l=vn();return ep(l,en.memoizedState,e,i)},useTransition:function(){var e=Na(oo)[0],i=vn().memoizedState;return[typeof e=="boolean"?e:bs(e),i]},useSyncExternalStore:Mf,useId:op,useHostTransitionStatus:Hc,useFormState:Vf,useActionState:Vf,useOptimistic:function(e,i){var l=vn();return Lf(l,en,e,i)},useMemoCache:Mc,useCacheRefresh:lp};Fc.useEffectEvent=Yf;var up={readContext:Ln,use:_a,useCallback:Zf,useContext:Ln,useEffect:Dc,useImperativeHandle:Qf,useInsertionEffect:Jf,useLayoutEffect:Kf,useMemo:Wf,useReducer:kc,useRef:qf,useState:function(){return kc(oo)},useDebugValue:Lc,useDeferredValue:function(e,i){var l=vn();return en===null?Uc(l,e,i):ep(l,en.memoizedState,e,i)},useTransition:function(){var e=kc(oo)[0],i=vn().memoizedState;return[typeof e=="boolean"?e:bs(e),i]},useSyncExternalStore:Mf,useId:op,useHostTransitionStatus:Hc,useFormState:jf,useActionState:jf,useOptimistic:function(e,i){var l=vn();return en!==null?Lf(l,en,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Mc,useCacheRefresh:lp};up.useEffectEvent=Yf;function Bc(e,i,l,a){i=e.memoizedState,l=l(a,i),l=l==null?i:S({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Vc={enqueueSetState:function(e,i,l){e=e._reactInternals;var a=pi(),p=Ao(a);p.payload=i,l!=null&&(p.callback=l),i=Mo(e,p,a),i!==null&&(ii(i,e,a),gs(i,e,a))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var a=pi(),p=Ao(a);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=Mo(e,p,a),i!==null&&(ii(i,e,a),gs(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=pi(),a=Ao(l);a.tag=2,i!=null&&(a.callback=i),i=Mo(e,a,l),i!==null&&(ii(i,e,l),gs(i,e,l))}};function dp(e,i,l,a,p,g,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,T):i.prototype&&i.prototype.isPureReactComponent?!rs(l,a)||!rs(p,g):!0}function fp(e,i,l,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==e&&Vc.enqueueReplaceState(i,i.state,null)}function cl(e,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(e=e.defaultProps){l===i&&(l=S({},l));for(var p in e)l[p]===void 0&&(l[p]=e[p])}return l}function pp(e){ra(e)}function hp(e){console.error(e)}function mp(e){ra(e)}function ka(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function gp(e,i,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Oc(e,i,l){return l=Ao(l),l.tag=3,l.payload={element:null},l.callback=function(){ka(e,i)},l}function yp(e){return e=Ao(e),e.tag=3,e}function vp(e,i,l,a){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;e.payload=function(){return p(g)},e.callback=function(){gp(i,l,a)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){gp(i,l,a),typeof p!="function"&&(Lo===null?Lo=new Set([this]):Lo.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function rv(e,i,l,a,p){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&El(i,l,p,!0),l=ci.current,l!==null){switch(l.tag){case 31:case 13:return Ei===null?Oa():l.alternate===null&&hn===0&&(hn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,a===va?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),hu(e,a,p)),!1;case 22:return l.flags|=65536,a===va?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),hu(e,a,p)),!1}throw Error(s(435,l.tag))}return hu(e,a,p),Oa(),!1}if(Ht)return i=ci.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,a!==rc&&(e=Error(s(422),{cause:a}),ds(bi(e,l)))):(a!==rc&&(i=Error(s(423),{cause:a}),ds(bi(i,l))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,a=bi(a,l),p=Oc(e.stateNode,a,p),xc(e,p),hn!==4&&(hn=2)),!1;var g=Error(s(520),{cause:a});if(g=bi(g,l),Rs===null?Rs=[g]:Rs.push(g),hn!==4&&(hn=2),i===null)return!0;a=bi(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=p&-p,l.lanes|=e,e=Oc(l.stateNode,a,e),xc(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Lo===null||!Lo.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=yp(p),vp(p,e,l,a),xc(l,p),!1}l=l.return}while(l!==null);return!1}var jc=Error(s(461)),wn=!1;function Un(e,i,l,a){i.child=e===null?Tf(i,null,l,a):al(i,e.child,l,a)}function xp(e,i,l,a,p){l=l.render;var g=i.ref;if("ref"in a){var T={};for(var C in a)C!=="ref"&&(T[C]=a[C])}else T=a;return il(i),a=Cc(e,i,l,T,g,p),C=_c(),e!==null&&!wn?(Nc(e,i,p),lo(e,i,p)):(Ht&&C&&sc(i),i.flags|=1,Un(e,i,a,p),i.child)}function bp(e,i,l,a,p){if(e===null){var g=l.type;return typeof g=="function"&&!ic(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,Sp(e,i,g,a,p)):(e=fa(l.type,null,a,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!Zc(e,p)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:rs,l(T,a)&&e.ref===i.ref)return lo(e,i,p)}return i.flags|=1,e=Wi(g,a),e.ref=i.ref,e.return=i,i.child=e}function Sp(e,i,l,a,p){if(e!==null){var g=e.memoizedProps;if(rs(g,a)&&e.ref===i.ref)if(wn=!1,i.pendingProps=a=g,Zc(e,p))(e.flags&131072)!==0&&(wn=!0);else return i.lanes=e.lanes,lo(e,i,p)}return qc(e,i,l,a,p)}function Tp(e,i,l,a){var p=a.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(a=i.child=e.child,p=0;a!==null;)p=p|a.lanes|a.childLanes,a=a.sibling;a=p&~g}else a=0,i.child=null;return wp(e,i,g,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&ga(i,g!==null?g.cachePool:null),g!==null?Cf(i,g):Sc(),_f(i);else return a=i.lanes=536870912,wp(e,i,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(ga(i,g.cachePool),Cf(i,g),ko(),i.memoizedState=null):(e!==null&&ga(i,null),Sc(),ko());return Un(e,i,p,l),i.child}function ws(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function wp(e,i,l,a,p){var g=mc();return g=g===null?null:{parent:Sn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&ga(i,null),Sc(),_f(i),e!==null&&El(e,i,a,!0),i.childLanes=p,null}function Ia(e,i){return i=Da({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Ep(e,i,l){return al(i,e.child,null,l),e=Ia(i,i.pendingProps),e.flags|=2,ui(i),i.memoizedState=null,e}function cv(e,i,l){var a=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ht){if(a.mode==="hidden")return e=Ia(i,a),i.lanes=536870912,ws(null,e);if(wc(i),(e=an)?(e=Uh(e,wi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:wo!==null?{id:ji,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},l=af(e),l.return=i,i.child=l,Dn=i,an=null)):e=null,e===null)throw Co(i);return i.lanes=536870912,null}return Ia(i,a)}var g=e.memoizedState;if(g!==null){var T=g.dehydrated;if(wc(i),p)if(i.flags&256)i.flags&=-257,i=Ep(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(wn||El(e,i,l,!1),p=(l&e.childLanes)!==0,wn||p){if(a=on,a!==null&&(T=Vn(a,l),T!==0&&T!==g.retryLane))throw g.retryLane=T,Wo(e,T),ii(a,e,T),jc;Oa(),i=Ep(e,i,l)}else e=g.treeContext,an=Ci(T.nextSibling),Dn=i,Ht=!0,Eo=null,wi=!1,e!==null&&uf(i,e),i=Ia(i,a),i.flags|=4096;return i}return e=Wi(e.child,{mode:a.mode,children:a.children}),e.ref=i.ref,i.child=e,e.return=i,e}function za(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function qc(e,i,l,a,p){return il(i),l=Cc(e,i,l,a,void 0,p),a=_c(),e!==null&&!wn?(Nc(e,i,p),lo(e,i,p)):(Ht&&a&&sc(i),i.flags|=1,Un(e,i,l,p),i.child)}function Cp(e,i,l,a,p,g){return il(i),i.updateQueue=null,l=Af(i,a,l,p),Nf(e),a=_c(),e!==null&&!wn?(Nc(e,i,g),lo(e,i,g)):(Ht&&a&&sc(i),i.flags|=1,Un(e,i,l,g),i.child)}function _p(e,i,l,a,p){if(il(i),i.stateNode===null){var g=bl,T=l.contextType;typeof T=="object"&&T!==null&&(g=Ln(T)),g=new l(a,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Vc,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=a,g.state=i.memoizedState,g.refs={},yc(i),T=l.contextType,g.context=typeof T=="object"&&T!==null?Ln(T):bl,g.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Bc(i,l,T,a),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Vc.enqueueReplaceState(g,g.state,null),vs(i,a,g,p),ys(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(e===null){g=i.stateNode;var C=i.memoizedProps,k=cl(l,C);g.props=k;var J=g.context,de=l.contextType;T=bl,typeof de=="object"&&de!==null&&(T=Ln(de));var Te=l.getDerivedStateFromProps;de=typeof Te=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,de||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||J!==T)&&fp(i,g,a,T),No=!1;var K=i.memoizedState;g.state=K,vs(i,a,g,p),ys(),J=i.memoizedState,C||K!==J||No?(typeof Te=="function"&&(Bc(i,l,Te,a),J=i.memoizedState),(k=No||dp(i,l,k,a,K,J,T))?(de||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=J),g.props=a,g.state=J,g.context=T,a=k):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{g=i.stateNode,vc(e,i),T=i.memoizedProps,de=cl(l,T),g.props=de,Te=i.pendingProps,K=g.context,J=l.contextType,k=bl,typeof J=="object"&&J!==null&&(k=Ln(J)),C=l.getDerivedStateFromProps,(J=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==Te||K!==k)&&fp(i,g,a,k),No=!1,K=i.memoizedState,g.state=K,vs(i,a,g,p),ys();var ne=i.memoizedState;T!==Te||K!==ne||No||e!==null&&e.dependencies!==null&&ha(e.dependencies)?(typeof C=="function"&&(Bc(i,l,C,a),ne=i.memoizedState),(de=No||dp(i,l,de,a,K,ne,k)||e!==null&&e.dependencies!==null&&ha(e.dependencies))?(J||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ne,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ne,k)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===e.memoizedProps&&K===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&K===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=ne),g.props=a,g.state=ne,g.context=k,a=de):(typeof g.componentDidUpdate!="function"||T===e.memoizedProps&&K===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&K===e.memoizedState||(i.flags|=1024),a=!1)}return g=a,za(e,i),a=(i.flags&128)!==0,g||a?(g=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&a?(i.child=al(i,e.child,null,p),i.child=al(i,null,l,p)):Un(e,i,l,p),i.memoizedState=g.state,e=i.child):e=lo(e,i,p),e}function Np(e,i,l,a){return tl(),i.flags|=256,Un(e,i,l,a),i.child}var $c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yc(e){return{baseLanes:e,cachePool:gf()}}function Jc(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=fi),e}function Ap(e,i,l){var a=i.pendingProps,p=!1,g=(i.flags&128)!==0,T;if((T=g)||(T=e!==null&&e.memoizedState===null?!1:(yn.current&2)!==0),T&&(p=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ht){if(p?Ro(i):ko(),(e=an)?(e=Uh(e,wi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:wo!==null?{id:ji,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},l=af(e),l.return=i,i.child=l,Dn=i,an=null)):e=null,e===null)throw Co(i);return Ru(e)?i.lanes=32:i.lanes=536870912,null}var C=a.children;return a=a.fallback,p?(ko(),p=i.mode,C=Da({mode:"hidden",children:C},p),a=el(a,p,l,null),C.return=i,a.return=i,C.sibling=a,i.child=C,a=i.child,a.memoizedState=Yc(l),a.childLanes=Jc(e,T,l),i.memoizedState=$c,ws(null,a)):(Ro(i),Kc(i,C))}var k=e.memoizedState;if(k!==null&&(C=k.dehydrated,C!==null)){if(g)i.flags&256?(Ro(i),i.flags&=-257,i=Xc(e,i,l)):i.memoizedState!==null?(ko(),i.child=e.child,i.flags|=128,i=null):(ko(),C=a.fallback,p=i.mode,a=Da({mode:"visible",children:a.children},p),C=el(C,p,l,null),C.flags|=2,a.return=i,C.return=i,a.sibling=C,i.child=a,al(i,e.child,null,l),a=i.child,a.memoizedState=Yc(l),a.childLanes=Jc(e,T,l),i.memoizedState=$c,i=ws(null,a));else if(Ro(i),Ru(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var J=T.dgst;T=J,a=Error(s(419)),a.stack="",a.digest=T,ds({value:a,source:null,stack:null}),i=Xc(e,i,l)}else if(wn||El(e,i,l,!1),T=(l&e.childLanes)!==0,wn||T){if(T=on,T!==null&&(a=Vn(T,l),a!==0&&a!==k.retryLane))throw k.retryLane=a,Wo(e,a),ii(T,e,a),jc;Mu(C)||Oa(),i=Xc(e,i,l)}else Mu(C)?(i.flags|=192,i.child=e.child,i=null):(e=k.treeContext,an=Ci(C.nextSibling),Dn=i,Ht=!0,Eo=null,wi=!1,e!==null&&uf(i,e),i=Kc(i,a.children),i.flags|=4096);return i}return p?(ko(),C=a.fallback,p=i.mode,k=e.child,J=k.sibling,a=Wi(k,{mode:"hidden",children:a.children}),a.subtreeFlags=k.subtreeFlags&65011712,J!==null?C=Wi(J,C):(C=el(C,p,l,null),C.flags|=2),C.return=i,a.return=i,a.sibling=C,i.child=a,ws(null,a),a=i.child,C=e.child.memoizedState,C===null?C=Yc(l):(p=C.cachePool,p!==null?(k=Sn._currentValue,p=p.parent!==k?{parent:k,pool:k}:p):p=gf(),C={baseLanes:C.baseLanes|l,cachePool:p}),a.memoizedState=C,a.childLanes=Jc(e,T,l),i.memoizedState=$c,ws(e.child,a)):(Ro(i),l=e.child,e=l.sibling,l=Wi(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,e!==null&&(T=i.deletions,T===null?(i.deletions=[e],i.flags|=16):T.push(e)),i.child=l,i.memoizedState=null,l)}function Kc(e,i){return i=Da({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Da(e,i){return e=ri(22,e,null,i),e.lanes=0,e}function Xc(e,i,l){return al(i,e.child,null,l),e=Kc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Mp(e,i,l){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),dc(e.return,i,l)}function Qc(e,i,l,a,p,g){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:p,treeForkCount:g}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=a,T.tail=l,T.tailMode=p,T.treeForkCount=g)}function Rp(e,i,l){var a=i.pendingProps,p=a.revealOrder,g=a.tail;a=a.children;var T=yn.current,C=(T&2)!==0;if(C?(T=T&1|2,i.flags|=128):T&=1,Se(yn,T),Un(e,i,a,l),a=Ht?us:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mp(e,l,i);else if(e.tag===19)Mp(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(l=i.child,p=null;l!==null;)e=l.alternate,e!==null&&Ta(e)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Qc(i,!1,p,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Ta(e)===null){i.child=p;break}e=p.sibling,p.sibling=l,l=p,p=e}Qc(i,!0,l,null,g,a);break;case"together":Qc(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function lo(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),Do|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(El(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,l=Wi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Wi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function Zc(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ha(e)))}function uv(e,i,l){switch(i.tag){case 3:q(i,i.stateNode.containerInfo),_o(i,Sn,e.memoizedState.cache),tl();break;case 27:case 5:Me(i);break;case 4:q(i,i.stateNode.containerInfo);break;case 10:_o(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,wc(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(Ro(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Ap(e,i,l):(Ro(i),e=lo(e,i,l),e!==null?e.sibling:null);Ro(i);break;case 19:var p=(e.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(El(e,i,l,!1),a=(l&i.childLanes)!==0),p){if(a)return Rp(e,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Se(yn,yn.current),a)break;return null;case 22:return i.lanes=0,Tp(e,i,l,i.pendingProps);case 24:_o(i,Sn,e.memoizedState.cache)}return lo(e,i,l)}function kp(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)wn=!0;else{if(!Zc(e,l)&&(i.flags&128)===0)return wn=!1,uv(e,i,l);wn=(e.flags&131072)!==0}else wn=!1,Ht&&(i.flags&1048576)!==0&&cf(i,us,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(e=ll(i.elementType),i.type=e,typeof e=="function")ic(e)?(a=cl(e,a),i.tag=1,i=_p(null,i,e,a,l)):(i.tag=0,i=qc(null,i,e,a,l));else{if(e!=null){var p=e.$$typeof;if(p===ge){i.tag=11,i=xp(null,i,e,a,l);break e}else if(p===be){i.tag=14,i=bp(null,i,e,a,l);break e}}throw i=bt(e)||e,Error(s(306,i,""))}}return i;case 0:return qc(e,i,i.type,i.pendingProps,l);case 1:return a=i.type,p=cl(a,i.pendingProps),_p(e,i,a,p,l);case 3:e:{if(q(i,i.stateNode.containerInfo),e===null)throw Error(s(387));a=i.pendingProps;var g=i.memoizedState;p=g.element,vc(e,i),vs(i,a,null,l);var T=i.memoizedState;if(a=T.cache,_o(i,Sn,a),a!==g.cache&&fc(i,[Sn],l,!0),ys(),a=T.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Np(e,i,a,l);break e}else if(a!==p){p=bi(Error(s(424)),i),ds(p),i=Np(e,i,a,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,an=Ci(e.firstChild),Dn=i,Ht=!0,Eo=null,wi=!0,l=Tf(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(tl(),a===p){i=lo(e,i,l);break e}Un(e,i,a,l)}i=i.child}return i;case 26:return za(e,i),e===null?(l=Vh(i.type,null,i.pendingProps,null))?i.memoizedState=l:Ht||(l=i.type,e=i.pendingProps,a=Xa(b.current).createElement(l),a[Ye]=i,a[lt]=e,Pn(a,l,e),gn(a),i.stateNode=a):i.memoizedState=Vh(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Me(i),e===null&&Ht&&(a=i.stateNode=Gh(i.type,i.pendingProps,b.current),Dn=i,wi=!0,p=an,Go(i.type)?(ku=p,an=Ci(a.firstChild)):an=p),Un(e,i,i.pendingProps.children,l),za(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ht&&((p=a=an)&&(a=Fv(a,i.type,i.pendingProps,wi),a!==null?(i.stateNode=a,Dn=i,an=Ci(a.firstChild),wi=!1,p=!0):p=!1),p||Co(i)),Me(i),p=i.type,g=i.pendingProps,T=e!==null?e.memoizedProps:null,a=g.children,_u(p,g)?a=null:T!==null&&_u(p,T)&&(i.flags|=32),i.memoizedState!==null&&(p=Cc(e,i,tv,null,null,l),Hs._currentValue=p),za(e,i),Un(e,i,a,l),i.child;case 6:return e===null&&Ht&&((e=l=an)&&(l=Bv(l,i.pendingProps,wi),l!==null?(i.stateNode=l,Dn=i,an=null,e=!0):e=!1),e||Co(i)),null;case 13:return Ap(e,i,l);case 4:return q(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=al(i,null,a,l):Un(e,i,a,l),i.child;case 11:return xp(e,i,i.type,i.pendingProps,l);case 7:return Un(e,i,i.pendingProps,l),i.child;case 8:return Un(e,i,i.pendingProps.children,l),i.child;case 12:return Un(e,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,_o(i,i.type,a.value),Un(e,i,a.children,l),i.child;case 9:return p=i.type._context,a=i.pendingProps.children,il(i),p=Ln(p),a=a(p),i.flags|=1,Un(e,i,a,l),i.child;case 14:return bp(e,i,i.type,i.pendingProps,l);case 15:return Sp(e,i,i.type,i.pendingProps,l);case 19:return Rp(e,i,l);case 31:return cv(e,i,l);case 22:return Tp(e,i,l,i.pendingProps);case 24:return il(i),a=Ln(Sn),e===null?(p=mc(),p===null&&(p=on,g=pc(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),i.memoizedState={parent:a,cache:p},yc(i),_o(i,Sn,p)):((e.lanes&l)!==0&&(vc(e,i),vs(i,null,null,l),ys()),p=e.memoizedState,g=i.memoizedState,p.parent!==a?(p={parent:a,cache:a},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),_o(i,Sn,a)):(a=g.cache,_o(i,Sn,a),a!==p.cache&&fc(i,[Sn],l,!0))),Un(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function so(e){e.flags|=4}function Wc(e,i,l,a,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(oh())e.flags|=8192;else throw sl=va,gc}else e.flags&=-16777217}function Ip(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yh(i))if(oh())e.flags|=8192;else throw sl=va,gc}function La(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?ze():536870912,e.lanes|=i,Ul|=i)}function Es(e,i){if(!Ht)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function rn(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(i)for(var p=e.child;p!==null;)l|=p.lanes|p.childLanes,a|=p.subtreeFlags&65011712,a|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)l|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=l,i}function dv(e,i,l){var a=i.pendingProps;switch(ac(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(i),null;case 1:return rn(i),null;case 3:return l=i.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),no(Sn),W(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(wl(i)?so(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cc())),rn(i),null;case 26:var p=i.type,g=i.memoizedState;return e===null?(so(i),g!==null?(rn(i),Ip(i,g)):(rn(i),Wc(i,p,null,a,l))):g?g!==e.memoizedState?(so(i),rn(i),Ip(i,g)):(rn(i),i.flags&=-16777217):(e=e.memoizedProps,e!==a&&so(i),rn(i),Wc(i,p,e,a,l)),null;case 27:if(xe(i),l=b.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&so(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return rn(i),null}e=Fe.current,wl(i)?df(i):(e=Gh(p,a,l),i.stateNode=e,so(i))}return rn(i),null;case 5:if(xe(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&so(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return rn(i),null}if(g=Fe.current,wl(i))df(i);else{var T=Xa(b.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?T.createElement("select",{is:a.is}):T.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?T.createElement(p,{is:a.is}):T.createElement(p)}}g[Ye]=i,g[lt]=a;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=g;e:switch(Pn(g,p,a),p){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&so(i)}}return rn(i),Wc(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==a&&so(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(e=b.current,wl(i)){if(e=i.stateNode,l=i.memoizedProps,a=null,p=Dn,p!==null)switch(p.tag){case 27:case 5:a=p.memoizedProps}e[Ye]=i,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||Ah(e.nodeValue,l)),e||Co(i,!0)}else e=Xa(e).createTextNode(a),e[Ye]=i,i.stateNode=e}return rn(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(a=wl(i),l!==null){if(e===null){if(!a)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ye]=i}else tl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rn(i),e=!1}else l=cc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(ui(i),i):(ui(i),null);if((i.flags&128)!==0)throw Error(s(558))}return rn(i),null;case 13:if(a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=wl(i),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Ye]=i}else tl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rn(i),p=!1}else p=cc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(ui(i),i):(ui(i),null)}return ui(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=i.child,p=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(p=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==p&&(a.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),La(i,i.updateQueue),rn(i),null);case 4:return W(),e===null&&Su(i.stateNode.containerInfo),rn(i),null;case 10:return no(i.type),rn(i),null;case 19:if(ae(yn),a=i.memoizedState,a===null)return rn(i),null;if(p=(i.flags&128)!==0,g=a.rendering,g===null)if(p)Es(a,!1);else{if(hn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=Ta(e),g!==null){for(i.flags|=128,Es(a,!1),e=g.updateQueue,i.updateQueue=e,La(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)sf(l,e),l=l.sibling;return Se(yn,yn.current&1|2),Ht&&eo(i,a.treeForkCount),i.child}e=e.sibling}a.tail!==null&&me()>Fa&&(i.flags|=128,p=!0,Es(a,!1),i.lanes=4194304)}else{if(!p)if(e=Ta(g),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,La(i,e),Es(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!Ht)return rn(i),null}else 2*me()-a.renderingStartTime>Fa&&l!==536870912&&(i.flags|=128,p=!0,Es(a,!1),i.lanes=4194304);a.isBackwards?(g.sibling=i.child,i.child=g):(e=a.last,e!==null?e.sibling=g:i.child=g,a.last=g)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=me(),e.sibling=null,l=yn.current,Se(yn,p?l&1|2:l&1),Ht&&eo(i,a.treeForkCount),e):(rn(i),null);case 22:case 23:return ui(i),Tc(),a=i.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(rn(i),i.subtreeFlags&6&&(i.flags|=8192)):rn(i),l=i.updateQueue,l!==null&&La(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),e!==null&&ae(ol),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),no(Sn),rn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function fv(e,i){switch(ac(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return no(Sn),W(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return xe(i),null;case 31:if(i.memoizedState!==null){if(ui(i),i.alternate===null)throw Error(s(340));tl()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ui(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));tl()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ae(yn),null;case 4:return W(),null;case 10:return no(i.type),null;case 22:case 23:return ui(i),Tc(),e!==null&&ae(ol),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return no(Sn),null;case 25:return null;default:return null}}function zp(e,i){switch(ac(i),i.tag){case 3:no(Sn),W();break;case 26:case 27:case 5:xe(i);break;case 4:W();break;case 31:i.memoizedState!==null&&ui(i);break;case 13:ui(i);break;case 19:ae(yn);break;case 10:no(i.type);break;case 22:case 23:ui(i),Tc(),e!==null&&ae(ol);break;case 24:no(Sn)}}function Cs(e,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var p=a.next;l=p;do{if((l.tag&e)===e){a=void 0;var g=l.create,T=l.inst;a=g(),T.destroy=a}l=l.next}while(l!==p)}}catch(C){Qt(i,i.return,C)}}function Io(e,i,l){try{var a=i.updateQueue,p=a!==null?a.lastEffect:null;if(p!==null){var g=p.next;a=g;do{if((a.tag&e)===e){var T=a.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,p=i;var k=l,J=C;try{J()}catch(de){Qt(p,k,de)}}}a=a.next}while(a!==g)}}catch(de){Qt(i,i.return,de)}}function Dp(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{Ef(i,l)}catch(a){Qt(e,e.return,a)}}}function Lp(e,i,l){l.props=cl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){Qt(e,i,a)}}function _s(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(p){Qt(e,i,p)}}function $i(e,i){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(p){Qt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Qt(e,i,p)}else l.current=null}function Up(e){var i=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(p){Qt(e,e.return,p)}}function eu(e,i,l){try{var a=e.stateNode;Dv(a,e.type,l,i),a[lt]=i}catch(p){Qt(e,e.return,p)}}function Pp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Go(e.type)||e.tag===4}function tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Go(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nu(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Pt));else if(a!==4&&(a===27&&Go(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(nu(e,i,l),e=e.sibling;e!==null;)nu(e,i,l),e=e.sibling}function Ua(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(a!==4&&(a===27&&Go(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ua(e,i,l),e=e.sibling;e!==null;)Ua(e,i,l),e=e.sibling}function Hp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Pn(i,a,l),i[Ye]=e,i[lt]=l}catch(g){Qt(e,e.return,g)}}var ao=!1,En=!1,iu=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,kn=null;function pv(e,i){if(e=e.containerInfo,Eu=ir,e=Xd(e),Xr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var p=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,C=-1,k=-1,J=0,de=0,Te=e,K=null;t:for(;;){for(var ne;Te!==l||p!==0&&Te.nodeType!==3||(C=T+p),Te!==g||a!==0&&Te.nodeType!==3||(k=T+a),Te.nodeType===3&&(T+=Te.nodeValue.length),(ne=Te.firstChild)!==null;)K=Te,Te=ne;for(;;){if(Te===e)break t;if(K===l&&++J===p&&(C=T),K===g&&++de===a&&(k=T),(ne=Te.nextSibling)!==null)break;Te=K,K=Te.parentNode}Te=ne}l=C===-1||k===-1?null:{start:C,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Cu={focusedElem:e,selectionRange:l},ir=!1,kn=i;kn!==null;)if(i=kn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,kn=e;else for(;kn!==null;){switch(i=kn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)p=e[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,p=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var Ze=cl(l.type,p);e=a.getSnapshotBeforeUpdate(Ze,g),a.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Qt(l,l.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)Au(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,kn=e;break}kn=i.return}}function Fp(e,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:co(e,l),a&4&&Cs(5,l);break;case 1:if(co(e,l),a&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(T){Qt(l,l.return,T)}else{var p=cl(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Qt(l,l.return,T)}}a&64&&Dp(l),a&512&&_s(l,l.return);break;case 3:if(co(e,l),a&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Ef(e,i)}catch(T){Qt(l,l.return,T)}}break;case 27:i===null&&a&4&&Hp(l);case 26:case 5:co(e,l),i===null&&a&4&&Up(l),a&512&&_s(l,l.return);break;case 12:co(e,l);break;case 31:co(e,l),a&4&&Op(e,l);break;case 13:co(e,l),a&4&&jp(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Tv.bind(null,l),Vv(e,l))));break;case 22:if(a=l.memoizedState!==null||ao,!a){i=i!==null&&i.memoizedState!==null||En,p=ao;var g=En;ao=a,(En=i)&&!g?uo(e,l,(l.subtreeFlags&8772)!==0):co(e,l),ao=p,En=g}break;case 30:break;default:co(e,l)}}function Bp(e){var i=e.alternate;i!==null&&(e.alternate=null,Bp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Bi(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var un=null,Wn=!1;function ro(e,i,l){for(l=l.child;l!==null;)Vp(e,i,l),l=l.sibling}function Vp(e,i,l){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(oe,l)}catch{}switch(l.tag){case 26:En||$i(l,i),ro(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:En||$i(l,i);var a=un,p=Wn;Go(l.type)&&(un=l.stateNode,Wn=!1),ro(e,i,l),Ls(l.stateNode),un=a,Wn=p;break;case 5:En||$i(l,i);case 6:if(a=un,p=Wn,un=null,ro(e,i,l),un=a,Wn=p,un!==null)if(Wn)try{(un.nodeType===9?un.body:un.nodeName==="HTML"?un.ownerDocument.body:un).removeChild(l.stateNode)}catch(g){Qt(l,i,g)}else try{un.removeChild(l.stateNode)}catch(g){Qt(l,i,g)}break;case 18:un!==null&&(Wn?(e=un,Dh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),jl(e)):Dh(un,l.stateNode));break;case 4:a=un,p=Wn,un=l.stateNode.containerInfo,Wn=!0,ro(e,i,l),un=a,Wn=p;break;case 0:case 11:case 14:case 15:Io(2,l,i),En||Io(4,l,i),ro(e,i,l);break;case 1:En||($i(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&Lp(l,i,a)),ro(e,i,l);break;case 21:ro(e,i,l);break;case 22:En=(a=En)||l.memoizedState!==null,ro(e,i,l),En=a;break;default:ro(e,i,l)}}function Op(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{jl(e)}catch(l){Qt(i,i.return,l)}}}function jp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jl(e)}catch(l){Qt(i,i.return,l)}}function hv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Gp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Gp),i;default:throw Error(s(435,e.tag))}}function Pa(e,i){var l=hv(e);i.forEach(function(a){if(!l.has(a)){l.add(a);var p=wv.bind(null,e,a);a.then(p,p)}})}function ei(e,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var p=l[a],g=e,T=i,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Go(C.type)){un=C.stateNode,Wn=!1;break e}break;case 5:un=C.stateNode,Wn=!1;break e;case 3:case 4:un=C.stateNode.containerInfo,Wn=!0;break e}C=C.return}if(un===null)throw Error(s(160));Vp(g,T,p),un=null,Wn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)qp(i,e),i=i.sibling}var Li=null;function qp(e,i){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ei(i,e),ti(e),a&4&&(Io(3,e,e.return),Cs(3,e),Io(5,e,e.return));break;case 1:ei(i,e),ti(e),a&512&&(En||l===null||$i(l,l.return)),a&64&&ao&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var p=Li;if(ei(i,e),ti(e),a&512&&(En||l===null||$i(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,p=p.ownerDocument||p;t:switch(a){case"title":g=p.getElementsByTagName("title")[0],(!g||g[oi]||g[Ye]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(a),p.head.insertBefore(g,p.querySelector("head > title"))),Pn(g,a,l),g[Ye]=e,gn(g),a=g;break e;case"link":var T=qh("link","href",p).get(a+(l.href||""));if(T){for(var C=0;C<T.length;C++)if(g=T[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(C,1);break t}}g=p.createElement(a),Pn(g,a,l),p.head.appendChild(g);break;case"meta":if(T=qh("meta","content",p).get(a+(l.content||""))){for(C=0;C<T.length;C++)if(g=T[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(C,1);break t}}g=p.createElement(a),Pn(g,a,l),p.head.appendChild(g);break;default:throw Error(s(468,a))}g[Ye]=e,gn(g),a=g}e.stateNode=a}else $h(p,e.type,e.stateNode);else e.stateNode=jh(p,a,e.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?$h(p,e.type,e.stateNode):jh(p,a,e.memoizedProps)):a===null&&e.stateNode!==null&&eu(e,e.memoizedProps,l.memoizedProps)}break;case 27:ei(i,e),ti(e),a&512&&(En||l===null||$i(l,l.return)),l!==null&&a&4&&eu(e,e.memoizedProps,l.memoizedProps);break;case 5:if(ei(i,e),ti(e),a&512&&(En||l===null||$i(l,l.return)),e.flags&32){p=e.stateNode;try{Be(p,"")}catch(Ze){Qt(e,e.return,Ze)}}a&4&&e.stateNode!=null&&(p=e.memoizedProps,eu(e,p,l!==null?l.memoizedProps:p)),a&1024&&(iu=!0);break;case 6:if(ei(i,e),ti(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(Ze){Qt(e,e.return,Ze)}}break;case 3:if(Wa=null,p=Li,Li=Qa(i.containerInfo),ei(i,e),Li=p,ti(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{jl(i.containerInfo)}catch(Ze){Qt(e,e.return,Ze)}iu&&(iu=!1,$p(e));break;case 4:a=Li,Li=Qa(e.stateNode.containerInfo),ei(i,e),ti(e),Li=a;break;case 12:ei(i,e),ti(e);break;case 31:ei(i,e),ti(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Pa(e,a)));break;case 13:ei(i,e),ti(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ga=me()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Pa(e,a)));break;case 22:p=e.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,J=ao,de=En;if(ao=J||p,En=de||k,ei(i,e),En=de,ao=J,ti(e),a&8192)e:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||k||ao||En||ul(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){k=l=i;try{if(g=k.stateNode,p)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=k.stateNode;var Te=k.memoizedProps.style,K=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ze){Qt(k,k.return,Ze)}}}else if(i.tag===6){if(l===null){k=i;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(Ze){Qt(k,k.return,Ze)}}}else if(i.tag===18){if(l===null){k=i;try{var ne=k.stateNode;p?Lh(ne,!0):Lh(k.stateNode,!1)}catch(Ze){Qt(k,k.return,Ze)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Pa(e,l))));break;case 19:ei(i,e),ti(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Pa(e,a)));break;case 30:break;case 21:break;default:ei(i,e),ti(e)}}function ti(e){var i=e.flags;if(i&2){try{for(var l,a=e.return;a!==null;){if(Pp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var p=l.stateNode,g=tu(e);Ua(e,g,p);break;case 5:var T=l.stateNode;l.flags&32&&(Be(T,""),l.flags&=-33);var C=tu(e);Ua(e,C,T);break;case 3:case 4:var k=l.stateNode.containerInfo,J=tu(e);nu(e,J,k);break;default:throw Error(s(161))}}catch(de){Qt(e,e.return,de)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function $p(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;$p(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function co(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Fp(e,i.alternate,i),i=i.sibling}function ul(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Io(4,i,i.return),ul(i);break;case 1:$i(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Lp(i,i.return,l),ul(i);break;case 27:Ls(i.stateNode);case 26:case 5:$i(i,i.return),ul(i);break;case 22:i.memoizedState===null&&ul(i);break;case 30:ul(i);break;default:ul(i)}e=e.sibling}}function uo(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,p=e,g=i,T=g.flags;switch(g.tag){case 0:case 11:case 15:uo(p,g,l),Cs(4,g);break;case 1:if(uo(p,g,l),a=g,p=a.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(J){Qt(a,a.return,J)}if(a=g,p=a.updateQueue,p!==null){var C=a.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)wf(k[p],C)}catch(J){Qt(a,a.return,J)}}l&&T&64&&Dp(g),_s(g,g.return);break;case 27:Hp(g);case 26:case 5:uo(p,g,l),l&&a===null&&T&4&&Up(g),_s(g,g.return);break;case 12:uo(p,g,l);break;case 31:uo(p,g,l),l&&T&4&&Op(p,g);break;case 13:uo(p,g,l),l&&T&4&&jp(p,g);break;case 22:g.memoizedState===null&&uo(p,g,l),_s(g,g.return);break;case 30:break;default:uo(p,g,l)}i=i.sibling}}function ou(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&fs(l))}function lu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&fs(e))}function Ui(e,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yp(e,i,l,a),i=i.sibling}function Yp(e,i,l,a){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Ui(e,i,l,a),p&2048&&Cs(9,i);break;case 1:Ui(e,i,l,a);break;case 3:Ui(e,i,l,a),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&fs(e)));break;case 12:if(p&2048){Ui(e,i,l,a),e=i.stateNode;try{var g=i.memoizedProps,T=g.id,C=g.onPostCommit;typeof C=="function"&&C(T,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Qt(i,i.return,k)}}else Ui(e,i,l,a);break;case 31:Ui(e,i,l,a);break;case 13:Ui(e,i,l,a);break;case 23:break;case 22:g=i.stateNode,T=i.alternate,i.memoizedState!==null?g._visibility&2?Ui(e,i,l,a):Ns(e,i):g._visibility&2?Ui(e,i,l,a):(g._visibility|=2,zl(e,i,l,a,(i.subtreeFlags&10256)!==0||!1)),p&2048&&ou(T,i);break;case 24:Ui(e,i,l,a),p&2048&&lu(i.alternate,i);break;default:Ui(e,i,l,a)}}function zl(e,i,l,a,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,T=i,C=l,k=a,J=T.flags;switch(T.tag){case 0:case 11:case 15:zl(g,T,C,k,p),Cs(8,T);break;case 23:break;case 22:var de=T.stateNode;T.memoizedState!==null?de._visibility&2?zl(g,T,C,k,p):Ns(g,T):(de._visibility|=2,zl(g,T,C,k,p)),p&&J&2048&&ou(T.alternate,T);break;case 24:zl(g,T,C,k,p),p&&J&2048&&lu(T.alternate,T);break;default:zl(g,T,C,k,p)}i=i.sibling}}function Ns(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,a=i,p=a.flags;switch(a.tag){case 22:Ns(l,a),p&2048&&ou(a.alternate,a);break;case 24:Ns(l,a),p&2048&&lu(a.alternate,a);break;default:Ns(l,a)}i=i.sibling}}var As=8192;function Dl(e,i,l){if(e.subtreeFlags&As)for(e=e.child;e!==null;)Jp(e,i,l),e=e.sibling}function Jp(e,i,l){switch(e.tag){case 26:Dl(e,i,l),e.flags&As&&e.memoizedState!==null&&ex(l,Li,e.memoizedState,e.memoizedProps);break;case 5:Dl(e,i,l);break;case 3:case 4:var a=Li;Li=Qa(e.stateNode.containerInfo),Dl(e,i,l),Li=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=As,As=16777216,Dl(e,i,l),As=a):Dl(e,i,l));break;default:Dl(e,i,l)}}function Kp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ms(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];kn=a,Qp(a,e)}Kp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xp(e),e=e.sibling}function Xp(e){switch(e.tag){case 0:case 11:case 15:Ms(e),e.flags&2048&&Io(9,e,e.return);break;case 3:Ms(e);break;case 12:Ms(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ha(e)):Ms(e);break;default:Ms(e)}}function Ha(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];kn=a,Qp(a,e)}Kp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Io(8,i,i.return),Ha(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Ha(i));break;default:Ha(i)}e=e.sibling}}function Qp(e,i){for(;kn!==null;){var l=kn;switch(l.tag){case 0:case 11:case 15:Io(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:fs(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,kn=a;else e:for(l=e;kn!==null;){a=kn;var p=a.sibling,g=a.return;if(Bp(a),a===l){kn=null;break e}if(p!==null){p.return=g,kn=p;break e}kn=g}}}var mv={getCacheForType:function(e){var i=Ln(Sn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return Ln(Sn).controller.signal}},gv=typeof WeakMap=="function"?WeakMap:Map,qt=0,on=null,It=null,Lt=0,Xt=0,di=null,zo=!1,Ll=!1,su=!1,fo=0,hn=0,Do=0,dl=0,au=0,fi=0,Ul=0,Rs=null,ni=null,ru=!1,Ga=0,Zp=0,Fa=1/0,Ba=null,Lo=null,Nn=0,Uo=null,Pl=null,po=0,cu=0,uu=null,Wp=null,ks=0,du=null;function pi(){return(qt&2)!==0&&Lt!==0?Lt&-Lt:B.T!==null?yu():Fi()}function eh(){if(fi===0)if((Lt&536870912)===0||Ht){var e=Jt;Jt<<=1,(Jt&3932160)===0&&(Jt=262144),fi=e}else fi=536870912;return e=ci.current,e!==null&&(e.flags|=32),fi}function ii(e,i,l){(e===on&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(Hl(e,0),Po(e,Lt,fi,!1)),Ct(e,l),((qt&2)===0||e!==on)&&(e===on&&((qt&2)===0&&(dl|=l),hn===4&&Po(e,Lt,fi,!1)),Yi(e))}function th(e,i,l){if((qt&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&e.expiredLanes)===0||dt(e,i),p=a?xv(e,i):pu(e,i,!0),g=a;do{if(p===0){Ll&&!a&&Po(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!yv(l)){p=pu(e,i,!1),g=!1;continue}if(p===2){if(g=i,e.errorRecoveryDisabledLanes&g)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var C=e;p=Rs;var k=C.current.memoizedState.isDehydrated;if(k&&(Hl(C,T).flags|=256),T=pu(C,T,!1),T!==2){if(su&&!k){C.errorRecoveryDisabledLanes|=g,dl|=g,p=4;break e}g=ni,ni=p,g!==null&&(ni===null?ni=g:ni.push.apply(ni,g))}p=T}if(g=!1,p!==2)continue}}if(p===1){Hl(e,0),Po(e,i,0,!0);break}e:{switch(a=e,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Po(a,i,fi,!zo);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Ga+300-me(),10<p)){if(Po(a,i,fi,!zo),Re(a,0,!0)!==0)break e;po=i,a.timeoutHandle=Ih(nh.bind(null,a,l,ni,Ba,ru,i,fi,dl,Ul,zo,g,"Throttled",-0,0),p);break e}nh(a,l,ni,Ba,ru,i,fi,dl,Ul,zo,g,null,-0,0)}}break}while(!0);Yi(e)}function nh(e,i,l,a,p,g,T,C,k,J,de,Te,K,ne){if(e.timeoutHandle=-1,Te=i.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Jp(i,g,Te);var Ze=(g&62914560)===g?Ga-me():(g&4194048)===g?Zp-me():0;if(Ze=tx(Te,Ze),Ze!==null){po=g,e.cancelPendingCommit=Ze(uh.bind(null,e,i,g,l,a,p,T,C,k,de,Te,null,K,ne)),Po(e,g,T,!J);return}}uh(e,i,g,l,a,p,T,C,k)}function yv(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var p=l[a],g=p.getSnapshot;p=p.value;try{if(!ai(g(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Po(e,i,l,a){i&=~au,i&=~dl,e.suspendedLanes|=i,e.pingedLanes&=~i,a&&(e.warmLanes|=i),a=e.expirationTimes;for(var p=i;0<p;){var g=31-Oe(p),T=1<<g;a[g]=-1,p&=~T}l!==0&&$t(e,l,i)}function Va(){return(qt&6)===0?(Is(0),!1):!0}function fu(){if(It!==null){if(Xt===0)var e=It.return;else e=It,to=nl=null,Ac(e),Al=null,hs=0,e=It;for(;e!==null;)zp(e.alternate,e),e=e.return;It=null}}function Hl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Pv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),po=0,fu(),on=e,It=l=Wi(e.current,null),Lt=i,Xt=0,di=null,zo=!1,Ll=dt(e,i),su=!1,Ul=fi=au=dl=Do=hn=0,ni=Rs=null,ru=!1,(i&8)!==0&&(i|=i&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=i;0<a;){var p=31-Oe(a),g=1<<p;i|=e[p],a&=~g}return fo=i,ca(),l}function ih(e,i){Nt=null,B.H=Ts,i===Nl||i===ya?(i=xf(),Xt=3):i===gc?(i=xf(),Xt=4):Xt=i===jc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,di=i,It===null&&(hn=1,ka(e,bi(i,e.current)))}function oh(){var e=ci.current;return e===null?!0:(Lt&4194048)===Lt?Ei===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?e===Ei:!1}function lh(){var e=B.H;return B.H=Ts,e===null?Ts:e}function sh(){var e=B.A;return B.A=mv,e}function Oa(){hn=4,zo||(Lt&4194048)!==Lt&&ci.current!==null||(Ll=!0),(Do&134217727)===0&&(dl&134217727)===0||on===null||Po(on,Lt,fi,!1)}function pu(e,i,l){var a=qt;qt|=2;var p=lh(),g=sh();(on!==e||Lt!==i)&&(Ba=null,Hl(e,i)),i=!1;var T=hn;e:do try{if(Xt!==0&&It!==null){var C=It,k=di;switch(Xt){case 8:fu(),T=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(i=!0);var J=Xt;if(Xt=0,di=null,Gl(e,C,k,J),l&&Ll){T=0;break e}break;default:J=Xt,Xt=0,di=null,Gl(e,C,k,J)}}vv(),T=hn;break}catch(de){ih(e,de)}while(!0);return i&&e.shellSuspendCounter++,to=nl=null,qt=a,B.H=p,B.A=g,It===null&&(on=null,Lt=0,ca()),T}function vv(){for(;It!==null;)ah(It)}function xv(e,i){var l=qt;qt|=2;var a=lh(),p=sh();on!==e||Lt!==i?(Ba=null,Fa=me()+500,Hl(e,i)):Ll=dt(e,i);e:do try{if(Xt!==0&&It!==null){i=It;var g=di;t:switch(Xt){case 1:Xt=0,di=null,Gl(e,i,g,1);break;case 2:case 9:if(yf(g)){Xt=0,di=null,rh(i);break}i=function(){Xt!==2&&Xt!==9||on!==e||(Xt=7),Yi(e)},g.then(i,i);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:yf(g)?(Xt=0,di=null,rh(i)):(Xt=0,di=null,Gl(e,i,g,7));break;case 5:var T=null;switch(It.tag){case 26:T=It.memoizedState;case 5:case 27:var C=It;if(T?Yh(T):C.stateNode.complete){Xt=0,di=null;var k=C.sibling;if(k!==null)It=k;else{var J=C.return;J!==null?(It=J,ja(J)):It=null}break t}}Xt=0,di=null,Gl(e,i,g,5);break;case 6:Xt=0,di=null,Gl(e,i,g,6);break;case 8:fu(),hn=6;break e;default:throw Error(s(462))}}bv();break}catch(de){ih(e,de)}while(!0);return to=nl=null,B.H=a,B.A=p,qt=l,It!==null?0:(on=null,Lt=0,ca(),hn)}function bv(){for(;It!==null&&!he();)ah(It)}function ah(e){var i=kp(e.alternate,e,fo);e.memoizedProps=e.pendingProps,i===null?ja(e):It=i}function rh(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=Cp(l,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=Cp(l,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:Ac(i);default:zp(l,i),i=It=sf(i,fo),i=kp(l,i,fo)}e.memoizedProps=e.pendingProps,i===null?ja(e):It=i}function Gl(e,i,l,a){to=nl=null,Ac(i),Al=null,hs=0;var p=i.return;try{if(rv(e,p,i,l,Lt)){hn=1,ka(e,bi(l,e.current)),It=null;return}}catch(g){if(p!==null)throw It=p,g;hn=1,ka(e,bi(l,e.current)),It=null;return}i.flags&32768?(Ht||a===1?e=!0:Ll||(Lt&536870912)!==0?e=!1:(zo=e=!0,(a===2||a===9||a===3||a===6)&&(a=ci.current,a!==null&&a.tag===13&&(a.flags|=16384))),ch(i,e)):ja(i)}function ja(e){var i=e;do{if((i.flags&32768)!==0){ch(i,zo);return}e=i.return;var l=dv(i.alternate,i,fo);if(l!==null){It=l;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);hn===0&&(hn=5)}function ch(e,i){do{var l=fv(e.alternate,e);if(l!==null){l.flags&=32767,It=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=l}while(e!==null);hn=6,It=null}function uh(e,i,l,a,p,g,T,C,k){e.cancelPendingCommit=null;do qa();while(Nn!==0);if((qt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=tc,yt(e,l,g,T,C,k),e===on&&(It=on=null,Lt=0),Pl=i,Uo=e,po=l,cu=g,uu=p,Wp=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ev(O,function(){return mh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null,p=Ce.p,Ce.p=2,T=qt,qt|=4;try{pv(e,i,l)}finally{qt=T,Ce.p=p,B.T=a}}Nn=1,dh(),fh(),ph()}}function dh(){if(Nn===1){Nn=0;var e=Uo,i=Pl,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var a=Ce.p;Ce.p=2;var p=qt;qt|=4;try{qp(i,e);var g=Cu,T=Xd(e.containerInfo),C=g.focusedElem,k=g.selectionRange;if(T!==C&&C&&C.ownerDocument&&Kd(C.ownerDocument.documentElement,C)){if(k!==null&&Xr(C)){var J=k.start,de=k.end;if(de===void 0&&(de=J),"selectionStart"in C)C.selectionStart=J,C.selectionEnd=Math.min(de,C.value.length);else{var Te=C.ownerDocument||document,K=Te&&Te.defaultView||window;if(K.getSelection){var ne=K.getSelection(),Ze=C.textContent.length,pt=Math.min(k.start,Ze),nn=k.end===void 0?pt:Math.min(k.end,Ze);!ne.extend&&pt>nn&&(T=nn,nn=pt,pt=T);var F=Jd(C,pt),P=Jd(C,nn);if(F&&P&&(ne.rangeCount!==1||ne.anchorNode!==F.node||ne.anchorOffset!==F.offset||ne.focusNode!==P.node||ne.focusOffset!==P.offset)){var Y=Te.createRange();Y.setStart(F.node,F.offset),ne.removeAllRanges(),pt>nn?(ne.addRange(Y),ne.extend(P.node,P.offset)):(Y.setEnd(P.node,P.offset),ne.addRange(Y))}}}}for(Te=[],ne=C;ne=ne.parentNode;)ne.nodeType===1&&Te.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Te.length;C++){var ve=Te[C];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}ir=!!Eu,Cu=Eu=null}finally{qt=p,Ce.p=a,B.T=l}}e.current=i,Nn=2}}function fh(){if(Nn===2){Nn=0;var e=Uo,i=Pl,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var a=Ce.p;Ce.p=2;var p=qt;qt|=4;try{Fp(e,i.alternate,i)}finally{qt=p,Ce.p=a,B.T=l}}Nn=3}}function ph(){if(Nn===4||Nn===3){Nn=0,Ee();var e=Uo,i=Pl,l=po,a=Wp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,Pl=Uo=null,hh(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(Lo=null),mn(l),i=i.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=B.T,p=Ce.p,Ce.p=2,B.T=null;try{for(var g=e.onRecoverableError,T=0;T<a.length;T++){var C=a[T];g(C.value,{componentStack:C.stack})}}finally{B.T=i,Ce.p=p}}(po&3)!==0&&qa(),Yi(e),p=e.pendingLanes,(l&261930)!==0&&(p&42)!==0?e===du?ks++:(ks=0,du=e):ks=0,Is(0)}}function hh(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,fs(i)))}function qa(){return dh(),fh(),ph(),mh()}function mh(){if(Nn!==5)return!1;var e=Uo,i=cu;cu=0;var l=mn(po),a=B.T,p=Ce.p;try{Ce.p=32>l?32:l,B.T=null,l=uu,uu=null;var g=Uo,T=po;if(Nn=0,Pl=Uo=null,po=0,(qt&6)!==0)throw Error(s(331));var C=qt;if(qt|=4,Xp(g.current),Yp(g,g.current,T,l),qt=C,Is(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(oe,g)}catch{}return!0}finally{Ce.p=p,B.T=a,hh(e,i)}}function gh(e,i,l){i=bi(l,i),i=Oc(e.stateNode,i,2),e=Mo(e,i,2),e!==null&&(Ct(e,2),Yi(e))}function Qt(e,i,l){if(e.tag===3)gh(e,e,l);else for(;i!==null;){if(i.tag===3){gh(i,e,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Lo===null||!Lo.has(a))){e=bi(l,e),l=yp(2),a=Mo(i,l,2),a!==null&&(vp(l,a,i,e),Ct(a,2),Yi(a));break}}i=i.return}}function hu(e,i,l){var a=e.pingCache;if(a===null){a=e.pingCache=new gv;var p=new Set;a.set(i,p)}else p=a.get(i),p===void 0&&(p=new Set,a.set(i,p));p.has(l)||(su=!0,p.add(l),e=Sv.bind(null,e,i,l),i.then(e,e))}function Sv(e,i,l){var a=e.pingCache;a!==null&&a.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,on===e&&(Lt&l)===l&&(hn===4||hn===3&&(Lt&62914560)===Lt&&300>me()-Ga?(qt&2)===0&&Hl(e,0):au|=l,Ul===Lt&&(Ul=0)),Yi(e)}function yh(e,i){i===0&&(i=ze()),e=Wo(e,i),e!==null&&(Ct(e,i),Yi(e))}function Tv(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),yh(e,l)}function wv(e,i){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(l=p.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),yh(e,l)}function Ev(e,i){return G(e,i)}var $a=null,Fl=null,mu=!1,Ya=!1,gu=!1,Ho=0;function Yi(e){e!==Fl&&e.next===null&&(Fl===null?$a=Fl=e:Fl=Fl.next=e),Ya=!0,mu||(mu=!0,_v())}function Is(e,i){if(!gu&&Ya){gu=!0;do for(var l=!1,a=$a;a!==null;){if(e!==0){var p=a.pendingLanes;if(p===0)var g=0;else{var T=a.suspendedLanes,C=a.pingedLanes;g=(1<<31-Oe(42|e)+1)-1,g&=p&~(T&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Sh(a,g))}else g=Lt,g=Re(a,a===on?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||dt(a,g)||(l=!0,Sh(a,g));a=a.next}while(l);gu=!1}}function Cv(){vh()}function vh(){Ya=mu=!1;var e=0;Ho!==0&&Uv()&&(e=Ho);for(var i=me(),l=null,a=$a;a!==null;){var p=a.next,g=xh(a,i);g===0?(a.next=null,l===null?$a=p:l.next=p,p===null&&(Fl=l)):(l=a,(e!==0||(g&3)!==0)&&(Ya=!0)),a=p}Nn!==0&&Nn!==5||Is(e),Ho!==0&&(Ho=0)}function xh(e,i){for(var l=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var T=31-Oe(g),C=1<<T,k=p[T];k===-1?((C&l)===0||(C&a)!==0)&&(p[T]=je(C,i)):k<=i&&(e.expiredLanes|=C),g&=~C}if(i=on,l=Lt,l=Re(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===i&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&L(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||dt(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(a!==null&&L(a),mn(l)){case 2:case 8:l=z;break;case 32:l=O;break;case 268435456:l=ee;break;default:l=O}return a=bh.bind(null,e),l=G(l,a),e.callbackPriority=i,e.callbackNode=l,i}return a!==null&&a!==null&&L(a),e.callbackPriority=2,e.callbackNode=null,2}function bh(e,i){if(Nn!==0&&Nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(qa()&&e.callbackNode!==l)return null;var a=Lt;return a=Re(e,e===on?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(th(e,a,i),xh(e,me()),e.callbackNode!=null&&e.callbackNode===l?bh.bind(null,e):null)}function Sh(e,i){if(qa())return null;th(e,i,!0)}function _v(){Hv(function(){(qt&6)!==0?G(E,Cv):vh()})}function yu(){if(Ho===0){var e=Cl;e===0&&(e=xt,xt<<=1,(xt&261888)===0&&(xt=256)),Ho=e}return Ho}function Th(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:kt(""+e)}function wh(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function Nv(e,i,l,a,p){if(i==="submit"&&l&&l.stateNode===p){var g=Th((p[lt]||null).action),T=a.submitter;T&&(i=(i=T[lt]||null)?Th(i.formAction):T.getAttribute("formAction"),i!==null&&(g=i,T=null));var C=new yi("action","action",null,a,p);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ho!==0){var k=T?wh(p,T):new FormData(p);Pc(l,{pending:!0,data:k,method:p.method,action:g},null,k)}}else typeof g=="function"&&(C.preventDefault(),k=T?wh(p,T):new FormData(p),Pc(l,{pending:!0,data:k,method:p.method,action:g},g,k))},currentTarget:p}]})}}for(var vu=0;vu<ec.length;vu++){var xu=ec[vu],Av=xu.toLowerCase(),Mv=xu[0].toUpperCase()+xu.slice(1);Di(Av,"on"+Mv)}Di(Wd,"onAnimationEnd"),Di(ef,"onAnimationIteration"),Di(tf,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(qy,"onTransitionRun"),Di($y,"onTransitionStart"),Di(Yy,"onTransitionCancel"),Di(nf,"onTransitionEnd"),Qi("onMouseEnter",["mouseout","mouseover"]),Qi("onMouseLeave",["mouseout","mouseover"]),Qi("onPointerEnter",["pointerout","pointerover"]),Qi("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zs));function Eh(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],p=a.event;a=a.listeners;e:{var g=void 0;if(i)for(var T=a.length-1;0<=T;T--){var C=a[T],k=C.instance,J=C.currentTarget;if(C=C.listener,k!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=J;try{g(p)}catch(de){ra(de)}p.currentTarget=null,g=k}else for(T=0;T<a.length;T++){if(C=a[T],k=C.instance,J=C.currentTarget,C=C.listener,k!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=J;try{g(p)}catch(de){ra(de)}p.currentTarget=null,g=k}}}}function zt(e,i){var l=i[jn];l===void 0&&(l=i[jn]=new Set);var a=e+"__bubble";l.has(a)||(Ch(i,e,2,!1),l.add(a))}function bu(e,i,l){var a=0;i&&(a|=4),Ch(l,e,a,i)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Su(e){if(!e[Ja]){e[Ja]=!0,ia.forEach(function(l){l!=="selectionchange"&&(Rv.has(l)||bu(l,!1,e),bu(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ja]||(i[Ja]=!0,bu("selectionchange",!1,i))}}function Ch(e,i,l,a){switch(e0(i)){case 2:var p=ox;break;case 8:p=lx;break;default:p=Uu}l=p.bind(null,i,l,e),p=void 0,!Ri||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(i,l,{capture:!0,passive:p}):e.addEventListener(i,l,!0):p!==void 0?e.addEventListener(i,l,{passive:p}):e.addEventListener(i,l,!1)}function Tu(e,i,l,a,p){var g=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var T=a.tag;if(T===3||T===4){var C=a.stateNode.containerInfo;if(C===p)break;if(T===4)for(T=a.return;T!==null;){var k=T.tag;if((k===3||k===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;C!==null;){if(T=Vi(C),T===null)return;if(k=T.tag,k===5||k===6||k===26||k===27){a=g=T;continue e}C=C.parentNode}}a=a.return}ln(function(){var J=g,de=j(l),Te=[];e:{var K=of.get(e);if(K!==void 0){var ne=yi,Ze=e;switch(e){case"keypress":if(X(l)===0)break e;case"keydown":case"keyup":ne=wy;break;case"focusin":Ze="focus",ne=Rn;break;case"focusout":Ze="blur",ne=Rn;break;case"beforeblur":case"afterblur":ne=Rn;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=_y;break;case Wd:case ef:case tf:ne=ml;break;case nf:ne=Ay;break;case"scroll":case"scrollend":ne=Xo;break;case"wheel":ne=Ry;break;case"copy":case"cut":case"paste":ne=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Dd;break;case"toggle":case"beforetoggle":ne=Iy}var pt=(i&4)!==0,nn=!pt&&(e==="scroll"||e==="scrollend"),F=pt?K!==null?K+"Capture":null:K;pt=[];for(var P=J,Y;P!==null;){var ve=P;if(Y=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||Y===null||F===null||(ve=li(P,F),ve!=null&&pt.push(Ds(P,ve,Y))),nn)break;P=P.return}0<pt.length&&(K=new ne(K,Ze,null,l,de),Te.push({event:K,listeners:pt}))}}if((i&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",K&&l!==Mn&&(Ze=l.relatedTarget||l.fromElement)&&(Vi(Ze)||Ze[Gt]))break e;if((ne||K)&&(K=de.window===de?de:(K=de.ownerDocument)?K.defaultView||K.parentWindow:window,ne?(Ze=l.relatedTarget||l.toElement,ne=J,Ze=Ze?Vi(Ze):null,Ze!==null&&(nn=u(Ze),pt=Ze.tag,Ze!==nn||pt!==5&&pt!==27&&pt!==6)&&(Ze=null)):(ne=null,Ze=J),ne!==Ze)){if(pt=sn,ve="onMouseLeave",F="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Dd,ve="onPointerLeave",F="onPointerEnter",P="pointer"),nn=ne==null?K:vo(ne),Y=Ze==null?K:vo(Ze),K=new pt(ve,P+"leave",ne,l,de),K.target=nn,K.relatedTarget=Y,ve=null,Vi(de)===J&&(pt=new pt(F,P+"enter",Ze,l,de),pt.target=Y,pt.relatedTarget=nn,ve=pt),nn=ve,ne&&Ze)t:{for(pt=kv,F=ne,P=Ze,Y=0,ve=F;ve;ve=pt(ve))Y++;ve=0;for(var ct=P;ct;ct=pt(ct))ve++;for(;0<Y-ve;)F=pt(F),Y--;for(;0<ve-Y;)P=pt(P),ve--;for(;Y--;){if(F===P||P!==null&&F===P.alternate){pt=F;break t}F=pt(F),P=pt(P)}pt=null}else pt=null;ne!==null&&_h(Te,K,ne,pt,!1),Ze!==null&&nn!==null&&_h(Te,nn,Ze,pt,!0)}}e:{if(K=J?vo(J):window,ne=K.nodeName&&K.nodeName.toLowerCase(),ne==="select"||ne==="input"&&K.type==="file")var Bt=Vd;else if(Fd(K))if(Od)Bt=Vy;else{Bt=Fy;var nt=Gy}else ne=K.nodeName,!ne||ne.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&zn(J.elementType)&&(Bt=Vd):Bt=By;if(Bt&&(Bt=Bt(e,J))){Bd(Te,Bt,l,de);break e}nt&&nt(e,K,J),e==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&Q(K,"number",K.value)}switch(nt=J?vo(J):window,e){case"focusin":(Fd(nt)||nt.contentEditable==="true")&&(yl=nt,Qr=J,cs=null);break;case"focusout":cs=Qr=yl=null;break;case"mousedown":Zr=!0;break;case"contextmenu":case"mouseup":case"dragend":Zr=!1,Qd(Te,l,de);break;case"selectionchange":if(jy)break;case"keydown":case"keyup":Qd(Te,l,de)}var At;if(Yr)e:{switch(e){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else gl?Hd(e,l)&&(Ut="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ut="onCompositionStart");Ut&&(Ld&&l.locale!=="ko"&&(gl||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&gl&&(At=zi()):(Qn=de,Ii="value"in Qn?Qn.value:Qn.textContent,gl=!0)),nt=Ka(J,Ut),0<nt.length&&(Ut=new zd(Ut,e,null,l,de),Te.push({event:Ut,listeners:nt}),At?Ut.data=At:(At=Gd(l),At!==null&&(Ut.data=At)))),(At=Dy?Ly(e,l):Uy(e,l))&&(Ut=Ka(J,"onBeforeInput"),0<Ut.length&&(nt=new zd("onBeforeInput","beforeinput",null,l,de),Te.push({event:nt,listeners:Ut}),nt.data=At)),Nv(Te,e,J,l,de)}Eh(Te,i)})}function Ds(e,i,l){return{instance:e,listener:i,currentTarget:l}}function Ka(e,i){for(var l=i+"Capture",a=[];e!==null;){var p=e,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=li(e,l),p!=null&&a.unshift(Ds(e,p,g)),p=li(e,i),p!=null&&a.push(Ds(e,p,g))),e.tag===3)return a;e=e.return}return[]}function kv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _h(e,i,l,a,p){for(var g=i._reactName,T=[];l!==null&&l!==a;){var C=l,k=C.alternate,J=C.stateNode;if(C=C.tag,k!==null&&k===a)break;C!==5&&C!==26&&C!==27||J===null||(k=J,p?(J=li(l,g),J!=null&&T.unshift(Ds(l,J,k))):p||(J=li(l,g),J!=null&&T.push(Ds(l,J,k)))),l=l.return}T.length!==0&&e.push({event:i,listeners:T})}var Iv=/\r\n?/g,zv=/\u0000|\uFFFD/g;function Nh(e){return(typeof e=="string"?e:""+e).replace(Iv,`
`).replace(zv,"")}function Ah(e,i){return i=Nh(i),Nh(e)===i}function tn(e,i,l,a,p,g){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||Be(e,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&Be(e,""+a);break;case"className":bo(e,"class",a);break;case"tabIndex":bo(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":bo(e,l,a);break;case"style":ht(e,a,g);break;case"data":if(i!=="object"){bo(e,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=kt(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&tn(e,i,"name",p.name,p,null),tn(e,i,"formEncType",p.formEncType,p,null),tn(e,i,"formMethod",p.formMethod,p,null),tn(e,i,"formTarget",p.formTarget,p,null)):(tn(e,i,"encType",p.encType,p,null),tn(e,i,"method",p.method,p,null),tn(e,i,"target",p.target,p,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=kt(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=Pt);break;case"onScroll":a!=null&&zt("scroll",e);break;case"onScrollEnd":a!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=kt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":zt("beforetoggle",e),zt("toggle",e),xo(e,"popover",a);break;case"xlinkActuate":Xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Xn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Xn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Xn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Xn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":xo(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fn.get(l)||l,xo(e,l,a))}}function wu(e,i,l,a,p,g){switch(l){case"style":ht(e,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof a=="string"?Be(e,a):(typeof a=="number"||typeof a=="bigint")&&Be(e,""+a);break;case"onScroll":a!=null&&zt("scroll",e);break;case"onScrollEnd":a!=null&&zt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),g=e[lt]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,p),typeof a=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,a,p);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):xo(e,l,a)}}}function Pn(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var a=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":a=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tn(e,i,g,T,l,null)}}p&&tn(e,i,"srcSet",l.srcSet,l,null),a&&tn(e,i,"src",l.src,l,null);return;case"input":zt("invalid",e);var C=g=T=p=null,k=null,J=null;for(a in l)if(l.hasOwnProperty(a)){var de=l[a];if(de!=null)switch(a){case"name":p=de;break;case"type":T=de;break;case"checked":k=de;break;case"defaultChecked":J=de;break;case"value":g=de;break;case"defaultValue":C=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,i));break;default:tn(e,i,a,de,l,null)}}R(e,g,C,k,J,T,p,!1);return;case"select":zt("invalid",e),a=T=g=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":g=C;break;case"defaultValue":T=C;break;case"multiple":a=C;default:tn(e,i,p,C,l,null)}i=g,l=T,e.multiple=!!a,i!=null?Le(e,!!a,i,!1):l!=null&&Le(e,!!a,l,!0);return;case"textarea":zt("invalid",e),g=p=a=null;for(T in l)if(l.hasOwnProperty(T)&&(C=l[T],C!=null))switch(T){case"value":a=C;break;case"defaultValue":p=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:tn(e,i,T,C,l,null)}_e(e,a,p,g);return;case"option":for(k in l)l.hasOwnProperty(k)&&(a=l[k],a!=null)&&(k==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":tn(e,i,k,a,l,null));return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(a=0;a<zs.length;a++)zt(zs[a],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(a=l[J],a!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tn(e,i,J,a,l,null)}return;default:if(zn(i)){for(de in l)l.hasOwnProperty(de)&&(a=l[de],a!==void 0&&wu(e,i,de,a,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(a=l[C],a!=null&&tn(e,i,C,a,l,null))}function Dv(e,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,T=null,C=null,k=null,J=null,de=null;for(ne in l){var Te=l[ne];if(l.hasOwnProperty(ne)&&Te!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":k=Te;default:a.hasOwnProperty(ne)||tn(e,i,ne,null,a,Te)}}for(var K in a){var ne=a[K];if(Te=l[K],a.hasOwnProperty(K)&&(ne!=null||Te!=null))switch(K){case"type":g=ne;break;case"name":p=ne;break;case"checked":J=ne;break;case"defaultChecked":de=ne;break;case"value":T=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:ne!==Te&&tn(e,i,K,ne,a,Te)}}Zi(e,T,C,k,J,de,g,p);return;case"select":ne=T=C=K=null;for(g in l)if(k=l[g],l.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":ne=k;default:a.hasOwnProperty(g)||tn(e,i,g,null,a,k)}for(p in a)if(g=a[p],k=l[p],a.hasOwnProperty(p)&&(g!=null||k!=null))switch(p){case"value":K=g;break;case"defaultValue":C=g;break;case"multiple":T=g;default:g!==k&&tn(e,i,p,g,a,k)}i=C,l=T,a=ne,K!=null?Le(e,!!l,K,!1):!!a!=!!l&&(i!=null?Le(e,!!l,i,!0):Le(e,!!l,l?[]:"",!1));return;case"textarea":ne=K=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:tn(e,i,C,null,a,p)}for(T in a)if(p=a[T],g=l[T],a.hasOwnProperty(T)&&(p!=null||g!=null))switch(T){case"value":K=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&tn(e,i,T,p,a,g)}te(e,K,ne);return;case"option":for(var Ze in l)K=l[Ze],l.hasOwnProperty(Ze)&&K!=null&&!a.hasOwnProperty(Ze)&&(Ze==="selected"?e.selected=!1:tn(e,i,Ze,null,a,K));for(k in a)K=a[k],ne=l[k],a.hasOwnProperty(k)&&K!==ne&&(K!=null||ne!=null)&&(k==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":tn(e,i,k,K,a,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in l)K=l[pt],l.hasOwnProperty(pt)&&K!=null&&!a.hasOwnProperty(pt)&&tn(e,i,pt,null,a,K);for(J in a)if(K=a[J],ne=l[J],a.hasOwnProperty(J)&&K!==ne&&(K!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:tn(e,i,J,K,a,ne)}return;default:if(zn(i)){for(var nn in l)K=l[nn],l.hasOwnProperty(nn)&&K!==void 0&&!a.hasOwnProperty(nn)&&wu(e,i,nn,void 0,a,K);for(de in a)K=a[de],ne=l[de],!a.hasOwnProperty(de)||K===ne||K===void 0&&ne===void 0||wu(e,i,de,K,a,ne);return}}for(var F in l)K=l[F],l.hasOwnProperty(F)&&K!=null&&!a.hasOwnProperty(F)&&tn(e,i,F,null,a,K);for(Te in a)K=a[Te],ne=l[Te],!a.hasOwnProperty(Te)||K===ne||K==null&&ne==null||tn(e,i,Te,K,a,ne)}function Mh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var p=l[a],g=p.transferSize,T=p.initiatorType,C=p.duration;if(g&&C&&Mh(T)){for(T=0,C=p.responseEnd,a+=1;a<l.length;a++){var k=l[a],J=k.startTime;if(J>C)break;var de=k.transferSize,Te=k.initiatorType;de&&Mh(Te)&&(k=k.responseEnd,T+=de*(k<C?1:(C-J)/(k-J)))}if(--a,i+=8*(g+T)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Eu=null,Cu=null;function Xa(e){return e.nodeType===9?e:e.ownerDocument}function Rh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function _u(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nu=null;function Uv(){var e=window.event;return e&&e.type==="popstate"?e===Nu?!1:(Nu=e,!0):(Nu=null,!1)}var Ih=typeof setTimeout=="function"?setTimeout:void 0,Pv=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,Hv=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(e){return zh.resolve(null).then(e).catch(Gv)}:Ih;function Gv(e){setTimeout(function(){throw e})}function Go(e){return e==="head"}function Dh(e,i){var l=i,a=0;do{var p=l.nextSibling;if(e.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(p),jl(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Ls(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Ls(l);for(var g=l.firstChild;g;){var T=g.nextSibling,C=g.nodeName;g[oi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=T}}else l==="body"&&Ls(e.ownerDocument.body);l=p}while(l);jl(i)}function Lh(e,i){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function Au(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Au(l),Bi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Fv(e,i,l,a){for(;e.nodeType===1;){var p=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[oi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Ci(e.nextSibling),e===null)break}return null}function Bv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Ci(e.nextSibling),e===null))return null;return e}function Uh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Ci(e.nextSibling),e===null))return null;return e}function Mu(e){return e.data==="$?"||e.data==="$~"}function Ru(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Vv(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Ci(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var ku=null;function Ph(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return Ci(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function Hh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Gh(e,i,l){switch(i=Xa(l),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ls(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Bi(e)}var _i=new Map,Fh=new Set;function Qa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ho=Ce.d;Ce.d={f:Ov,r:jv,D:qv,C:$v,L:Yv,m:Jv,X:Xv,S:Kv,M:Qv};function Ov(){var e=ho.f(),i=Va();return e||i}function jv(e){var i=qn(e);i!==null&&i.tag===5&&i.type==="form"?ip(i):ho.r(e)}var Bl=typeof document>"u"?null:document;function Bh(e,i,l){var a=Bl;if(a&&typeof i=="string"&&i){var p=Gn(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Fh.has(p)||(Fh.add(p),e={rel:e,crossOrigin:l,href:i},a.querySelector(p)===null&&(i=a.createElement("link"),Pn(i,"link",e),gn(i),a.head.appendChild(i)))}}function qv(e){ho.D(e),Bh("dns-prefetch",e,null)}function $v(e,i){ho.C(e,i),Bh("preconnect",e,i)}function Yv(e,i,l){ho.L(e,i,l);var a=Bl;if(a&&e&&i){var p='link[rel="preload"][as="'+Gn(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Gn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Gn(l.imageSizes)+'"]')):p+='[href="'+Gn(e)+'"]';var g=p;switch(i){case"style":g=Vl(e);break;case"script":g=Ol(e)}_i.has(g)||(e=S({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),_i.set(g,e),a.querySelector(p)!==null||i==="style"&&a.querySelector(Us(g))||i==="script"&&a.querySelector(Ps(g))||(i=a.createElement("link"),Pn(i,"link",e),gn(i),a.head.appendChild(i)))}}function Jv(e,i){ho.m(e,i);var l=Bl;if(l&&e){var a=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Gn(a)+'"][href="'+Gn(e)+'"]',g=p;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ol(e)}if(!_i.has(g)&&(e=S({rel:"modulepreload",href:e},i),_i.set(g,e),l.querySelector(p)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ps(g)))return}a=l.createElement("link"),Pn(a,"link",e),gn(a),l.head.appendChild(a)}}}function Kv(e,i,l){ho.S(e,i,l);var a=Bl;if(a&&e){var p=Ki(a).hoistableStyles,g=Vl(e);i=i||"default";var T=p.get(g);if(!T){var C={loading:0,preload:null};if(T=a.querySelector(Us(g)))C.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":i},l),(l=_i.get(g))&&Iu(e,l);var k=T=a.createElement("link");gn(k),Pn(k,"link",e),k._p=new Promise(function(J,de){k.onload=J,k.onerror=de}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Za(T,i,a)}T={type:"stylesheet",instance:T,count:1,state:C},p.set(g,T)}}}function Xv(e,i){ho.X(e,i);var l=Bl;if(l&&e){var a=Ki(l).hoistableScripts,p=Ol(e),g=a.get(p);g||(g=l.querySelector(Ps(p)),g||(e=S({src:e,async:!0},i),(i=_i.get(p))&&zu(e,i),g=l.createElement("script"),gn(g),Pn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(p,g))}}function Qv(e,i){ho.M(e,i);var l=Bl;if(l&&e){var a=Ki(l).hoistableScripts,p=Ol(e),g=a.get(p);g||(g=l.querySelector(Ps(p)),g||(e=S({src:e,async:!0,type:"module"},i),(i=_i.get(p))&&zu(e,i),g=l.createElement("script"),gn(g),Pn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(p,g))}}function Vh(e,i,l,a){var p=(p=b.current)?Qa(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Vl(l.href),l=Ki(p).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Vl(l.href);var g=Ki(p).hoistableStyles,T=g.get(e);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,T),(g=p.querySelector(Us(e)))&&!g._p&&(T.instance=g,T.state.loading=5),_i.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_i.set(e,l),g||Zv(p,e,l,T.state))),i&&a===null)throw Error(s(528,""));return T}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ol(l),l=Ki(p).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Vl(e){return'href="'+Gn(e)+'"'}function Us(e){return'link[rel="stylesheet"]['+e+"]"}function Oh(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Zv(e,i,l,a){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=e.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Pn(i,"link",l),gn(i),e.head.appendChild(i))}function Ol(e){return'[src="'+Gn(e)+'"]'}function Ps(e){return"script[async]"+e}function jh(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=e.querySelector('style[data-href~="'+Gn(l.href)+'"]');if(a)return i.instance=a,gn(a),a;var p=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),gn(a),Pn(a,"style",p),Za(a,l.precedence,e),i.instance=a;case"stylesheet":p=Vl(l.href);var g=e.querySelector(Us(p));if(g)return i.state.loading|=4,i.instance=g,gn(g),g;a=Oh(l),(p=_i.get(p))&&Iu(a,p),g=(e.ownerDocument||e).createElement("link"),gn(g);var T=g;return T._p=new Promise(function(C,k){T.onload=C,T.onerror=k}),Pn(g,"link",a),i.state.loading|=4,Za(g,l.precedence,e),i.instance=g;case"script":return g=Ol(l.src),(p=e.querySelector(Ps(g)))?(i.instance=p,gn(p),p):(a=l,(p=_i.get(g))&&(a=S({},l),zu(a,p)),e=e.ownerDocument||e,p=e.createElement("script"),gn(p),Pn(p,"link",a),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Za(a,l.precedence,e));return i.instance}function Za(e,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=a.length?a[a.length-1]:null,g=p,T=0;T<a.length;T++){var C=a[T];if(C.dataset.precedence===i)g=C;else if(g!==p)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function Iu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function zu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Wa=null;function qh(e,i,l){if(Wa===null){var a=new Map,p=Wa=new Map;p.set(l,a)}else p=Wa,a=p.get(l),a||(a=new Map,p.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),p=0;p<l.length;p++){var g=l[p];if(!(g[oi]||g[Ye]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(i)||"";T=e+T;var C=a.get(T);C?C.push(g):a.set(T,[g])}}return a}function $h(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Wv(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Yh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ex(e,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Vl(a.href),g=i.querySelector(Us(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=er.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,gn(g);return}g=i.ownerDocument||i,a=Oh(a),(p=_i.get(p))&&Iu(a,p),g=g.createElement("link"),gn(g);var T=g;T._p=new Promise(function(C,k){T.onload=C,T.onerror=k}),Pn(g,"link",a),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=er.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var Du=0;function tx(e,i){return e.stylesheets&&e.count===0&&nr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&nr(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&Du===0&&(Du=62500*Lv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&nr(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Du?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(p)}}:null}function er(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tr=null;function nr(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tr=new Map,i.forEach(nx,e),tr=null,er.call(e))}function nx(e,i){if(!(i.state.loading&4)){var l=tr.get(e);if(l)var a=l.get(null);else{l=new Map,tr.set(e,l);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var T=p[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),a=T)}a&&l.set(null,a)}p=i.instance,T=p.getAttribute("data-precedence"),g=l.get(T)||a,g===a&&l.set(null,p),l.set(T,p),this.count++,a=er.bind(this),p.addEventListener("load",a),p.addEventListener("error",a),g?g.parentNode.insertBefore(p,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var Hs={$$typeof:ue,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function ix(e,i,l,a,p,g,T,C,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=a,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Jh(e,i,l,a,p,g,T,C,k,J,de,Te){return e=new ix(e,i,l,T,k,J,de,Te,C),i=1,g===!0&&(i|=24),g=ri(3,null,null,i),e.current=g,g.stateNode=e,i=pc(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:i},yc(g),e}function Kh(e){return e?(e=bl,e):bl}function Xh(e,i,l,a,p,g){p=Kh(p),a.context===null?a.context=p:a.pendingContext=p,a=Ao(i),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=Mo(e,a,i),l!==null&&(ii(l,e,i),gs(l,e,i))}function Qh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function Lu(e,i){Qh(e,i),(e=e.alternate)&&Qh(e,i)}function Zh(e){if(e.tag===13||e.tag===31){var i=Wo(e,67108864);i!==null&&ii(i,e,67108864),Lu(e,67108864)}}function Wh(e){if(e.tag===13||e.tag===31){var i=pi();i=Ji(i);var l=Wo(e,i);l!==null&&ii(l,e,i),Lu(e,i)}}var ir=!0;function ox(e,i,l,a){var p=B.T;B.T=null;var g=Ce.p;try{Ce.p=2,Uu(e,i,l,a)}finally{Ce.p=g,B.T=p}}function lx(e,i,l,a){var p=B.T;B.T=null;var g=Ce.p;try{Ce.p=8,Uu(e,i,l,a)}finally{Ce.p=g,B.T=p}}function Uu(e,i,l,a){if(ir){var p=Pu(a);if(p===null)Tu(e,i,a,or,l),t0(e,a);else if(ax(p,e,i,l,a))a.stopPropagation();else if(t0(e,a),i&4&&-1<sx.indexOf(e)){for(;p!==null;){var g=qn(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=st(g.pendingLanes);if(T!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var k=1<<31-Oe(T);C.entanglements[1]|=k,T&=~k}Yi(g),(qt&6)===0&&(Fa=me()+500,Is(0))}}break;case 31:case 13:C=Wo(g,2),C!==null&&ii(C,g,2),Va(),Lu(g,2)}if(g=Pu(a),g===null&&Tu(e,i,a,or,l),g===p)break;p=g}p!==null&&a.stopPropagation()}else Tu(e,i,a,null,l)}}function Pu(e){return e=j(e),Hu(e)}var or=null;function Hu(e){if(or=null,e=Vi(e),e!==null){var i=u(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return or=e,null}function e0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case E:return 2;case z:return 8;case O:case M:return 32;case ee:return 268435456;default:return 32}default:return 32}}var Gu=!1,Fo=null,Bo=null,Vo=null,Gs=new Map,Fs=new Map,Oo=[],sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(e,i){switch(e){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":Gs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(i.pointerId)}}function Bs(e,i,l,a,p,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[p]},i!==null&&(i=qn(i),i!==null&&Zh(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function ax(e,i,l,a,p){switch(i){case"focusin":return Fo=Bs(Fo,e,i,l,a,p),!0;case"dragenter":return Bo=Bs(Bo,e,i,l,a,p),!0;case"mouseover":return Vo=Bs(Vo,e,i,l,a,p),!0;case"pointerover":var g=p.pointerId;return Gs.set(g,Bs(Gs.get(g)||null,e,i,l,a,p)),!0;case"gotpointercapture":return g=p.pointerId,Fs.set(g,Bs(Fs.get(g)||null,e,i,l,a,p)),!0}return!1}function n0(e){var i=Vi(e.target);if(i!==null){var l=u(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,mi(e.priority,function(){Wh(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,mi(e.priority,function(){Wh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lr(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Pu(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);Mn=a,l.target.dispatchEvent(a),Mn=null}else return i=qn(l),i!==null&&Zh(i),e.blockedOn=l,!1;i.shift()}return!0}function i0(e,i,l){lr(e)&&l.delete(i)}function rx(){Gu=!1,Fo!==null&&lr(Fo)&&(Fo=null),Bo!==null&&lr(Bo)&&(Bo=null),Vo!==null&&lr(Vo)&&(Vo=null),Gs.forEach(i0),Fs.forEach(i0)}function sr(e,i){e.blockedOn===i&&(e.blockedOn=null,Gu||(Gu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rx)))}var ar=null;function o0(e){ar!==e&&(ar=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ar===e&&(ar=null);for(var i=0;i<e.length;i+=3){var l=e[i],a=e[i+1],p=e[i+2];if(typeof a!="function"){if(Hu(a||l)===null)continue;break}var g=qn(l);g!==null&&(e.splice(i,3),i-=3,Pc(g,{pending:!0,data:p,method:l.method,action:a},a,p))}}))}function jl(e){function i(k){return sr(k,e)}Fo!==null&&sr(Fo,e),Bo!==null&&sr(Bo,e),Vo!==null&&sr(Vo,e),Gs.forEach(i),Fs.forEach(i);for(var l=0;l<Oo.length;l++){var a=Oo[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Oo.length&&(l=Oo[0],l.blockedOn===null);)n0(l),l.blockedOn===null&&Oo.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var p=l[a],g=l[a+1],T=p[lt]||null;if(typeof g=="function")T||o0(l);else if(T){var C=null;if(g&&g.hasAttribute("formAction")){if(p=g,T=g[lt]||null)C=T.formAction;else if(Hu(p)!==null)continue}else C=T.action;typeof C=="function"?l[a+1]=C:(l.splice(a,3),a-=3),o0(l)}}}function l0(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Fu(e){this._internalRoot=e}rr.prototype.render=Fu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=pi();Xh(l,a,e,i,null,null)},rr.prototype.unmount=Fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Xh(e.current,2,null,e,null,null),Va(),i[Gt]=null}};function rr(e){this._internalRoot=e}rr.prototype.unstable_scheduleHydration=function(e){if(e){var i=Fi();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Oo.length&&i!==0&&i<Oo[l].priority;l++);Oo.splice(l,0,e),l===0&&n0(e)}};var s0=t.version;if(s0!=="19.2.3")throw Error(s(527,s0,"19.2.3"));Ce.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var cx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cr.isDisabled&&cr.supportsFiber)try{oe=cr.inject(cx),ce=cr}catch{}}return Os.createRoot=function(e,i){if(!r(e))throw Error(s(299));var l=!1,a="",p=pp,g=hp,T=mp;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=Jh(e,1,!1,null,null,l,a,null,p,g,T,l0),e[Gt]=i.current,Su(e),new Fu(i)},Os.hydrateRoot=function(e,i,l){if(!r(e))throw Error(s(299));var a=!1,p="",g=pp,T=hp,C=mp,k=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),i=Jh(e,1,!0,i,l??null,a,p,k,g,T,C,l0),i.context=Kh(null),l=i.current,a=pi(),a=Ji(a),p=Ao(a),p.callback=null,Mo(l,p,a),l=a,i.current.lanes=l,Ct(i,l),Yi(i),e[Gt]=i.current,Su(e),new rr(i)},Os.version="19.2.3",Os}var g0;function xx(){if(g0)return Ou.exports;g0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ou.exports=vx(),Ou.exports}var bx=xx();const Sx=pg(bx),Tx="modulepreload",wx=function(n){return"/"+n},y0={},Qu=function(t,o,s){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=wx(m),m in y0)return;y0[m]=!0;const x=m.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":Tx,x||(w.as="script"),w.crossOrigin="",w.href=m,y&&w.setAttribute("nonce",y),document.head.appendChild(w),x)return new Promise((_,N)=>{w.addEventListener("load",_),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&u(y.reason);return t().catch(u)})};const Ex=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),v0=n=>{const t=Cx(n);return t.charAt(0).toUpperCase()+t.slice(1)},mg=(...n)=>n.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),_x=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Nx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ax=Z.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:r="",children:u,iconNode:h,...y},v)=>Z.createElement("svg",{ref:v,...Nx,width:t,height:t,stroke:n,strokeWidth:s?Number(o)*24/Number(t):o,className:mg("lucide",r),...!u&&!_x(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>Z.createElement(m,x)),...Array.isArray(u)?u:[u]]));const tt=(n,t)=>{const o=Z.forwardRef(({className:s,...r},u)=>Z.createElement(Ax,{ref:u,iconNode:t,className:mg(`lucide-${Ex(v0(n))}`,`lucide-${n}`,s),...r}));return o.displayName=v0(n),o};const Mx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],x0=tt("align-vertical-justify-center",Mx);const Rx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],kx=tt("align-vertical-justify-end",Rx);const Ix=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],zx=tt("align-vertical-justify-start",Ix);const Dx=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Lx=tt("bold",Dx);const Ux=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Px=tt("check",Ux);const Hx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],na=tt("chevron-down",Hx);const Gx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zu=tt("chevron-up",Gx);const Fx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bx=tt("circle-alert",Fx);const Vx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ox=tt("clipboard",Vx);const jx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qx=tt("copy",jx);const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Yx=tt("disc",$x);const Jx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Kx=tt("download",Jx);const Xx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Js=tt("eye-off",Xx);const Qx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ks=tt("eye",Qx);const Zx=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Wx=tt("fast-forward",Zx);const eb=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Er=tt("file-text",eb);const tb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],gg=tt("film",tb);const nb=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ib=tt("folder",nb);const ob=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],ur=tt("grip-horizontal",ob);const lb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],b0=tt("image",lb);const sb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ab=tt("info",sb);const rb=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],cb=tt("italic",rb);const ub=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],db=tt("key",ub);const fb=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Cr=tt("keyboard",fb);const pb=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],_r=tt("list-music",pb);const hb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],S0=tt("loader-circle",hb);const mb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Zs=tt("maximize",mb);const gb=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],T0=tt("minimize",gb);const yb=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Yl=tt("music",yb);const vb=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],xb=tt("palette",vb);const bb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Sb=tt("panels-top-left",bb);const Tb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],yg=tt("pause",Tb);const wb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Wu=tt("play",wb);const Eb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vg=tt("plus",Eb);const Cb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],_b=tt("redo-2",Cb);const Nb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Ab=tt("repeat-1",Nb);const Mb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],w0=tt("repeat",Mb);const Rb=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],kb=tt("rewind",Rb);const Ib=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ed=tt("rotate-ccw",Ib);const zb=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Db=tt("scissors",zb);const Lb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ub=tt("search",Lb);const Pb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],br=tt("settings",Pb);const Hb=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Gb=tt("shuffle",Hb);const Fb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Bb=tt("skip-back",Fb);const Vb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Ob=tt("skip-forward",Vb);const jb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],td=tt("sparkles",jb);const qb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],$b=tt("split",qb);const Yb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],nd=tt("square",Yb);const Jb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Kb=tt("strikethrough",Jb);const Xb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nr=tt("trash-2",Xb);const Qb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zb=tt("triangle-alert",Qb);const Wb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],$o=tt("type",Wb);const e1=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],t1=tt("underline",e1);const n1=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],i1=tt("undo-2",n1);const o1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yo=tt("upload",o1);const l1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],s1=tt("user",l1);const a1=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Ws=tt("video",a1);const r1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],qo=tt("volume-2",r1);const c1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ql=tt("volume-x",c1);const u1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hi=tt("x",u1);const d1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],f1=tt("zoom-in",d1);const p1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],h1=tt("zoom-out",p1);var Hn=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(Hn||{});const bd=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},Xs=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let s=0;return o.length===3?(s+=parseInt(o[0],10)*3600,s+=parseInt(o[1],10)*60,s+=parseFloat(o[2])):o.length===2?(s+=parseInt(o[0],10)*60,s+=parseFloat(o[1])):o.length===1&&(s+=parseFloat(o[0])),isNaN(s)?0:s},Jl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},Ql=n=>{const t=n.split(`
`),o=[],s=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(u=>{const h=[...u.matchAll(s)];if(h.length>0){let y=u.replace(s,"").trim();y=y.replace(/\\n/g,`
`);const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(v.length>0){m=[];for(let S=0;S<v.length;S++){const w=v[S],_=parseInt(w[1],10),N=parseInt(w[2],10),V=w[4];let H=_*60+N;V&&(H+=parseInt(V,10)/(V.length===3?1e3:100));const $=(w.index||0)+w[0].length,re=S<v.length-1?v[S+1].index:y.length,ue=y.substring($,re);if(ue){const ge=ue.split(`
`);ge.forEach((De,He)=>{De&&m.push({text:De,startTime:H,endTime:0}),He<ge.length-1&&m.push({text:`
`,startTime:H,endTime:0})})}}for(let S=0;S<m.length;S++)S<m.length-1?m[S].endTime=m[S+1].startTime:m[S].endTime=m[S].startTime+.5}h.forEach(S=>{const w=parseInt(S[1],10),_=parseInt(S[2],10),N=S[4];let V=w*60+_;N&&(N.length===2?V+=parseInt(N,10)/100:(N.length,V+=parseInt(N,10)/1e3)),o.push({time:V,text:x,words:m})})}}),o.sort((u,h)=>u.time-h.time)},Zl=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),s=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,u=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),S=parseInt(y[4],10);return v*3600+m*60+x+S/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),S=bd(x),w=v.split(" --> ");if(w.length>=2){const _=u(w[0]),N=u(w[1]);_!==null&&S&&s.push({time:_,text:S,endTime:N!==null?N:void 0})}}}),s},ea=n=>{const t=[];try{const s=new DOMParser().parseFromString(n,"text/xml"),u=Array.from(s.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Xs(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<u.length;v++){const m=u[v],x=y(m,"begin"),S=y(m,"end"),w=bd(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&w){const _=h(x),N=h(S),V=[],$=Array.from(m.getElementsByTagName("*")).filter(re=>re.localName==="span");for(let re=0;re<$.length;re++){const ue=$[re],ge=y(ue,"begin"),De=y(ue,"end"),He=ue.textContent?.replace(/\s+/g," ");if(ge&&De&&He&&He.length>0){const be=h(ge),Xe=h(De);be!==void 0&&Xe!==void 0&&V.push({text:He,startTime:be,endTime:Xe})}}_!==void 0&&t.push({time:_,text:w,endTime:N,words:V.length>0?V:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,s)=>o.time-s.time)},m1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(s=>typeof s=="object"&&s!==null&&typeof s.time=="number"&&typeof s.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},ta=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`),s=[],r=/(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})/,u=y=>{const v=y.match(r);if(v){const m=v[1]?parseInt(v[1].replace(":",""),10):0,x=parseInt(v[2],10),S=parseInt(v[3],10),w=parseInt(v[4],10);return m*3600+x*60+S+w/1e3}return null};let h=0;for(o[0]&&o[0].startsWith("WEBVTT")&&(h=1);h<o.length;){const y=o[h].trim();if(y.includes("-->")){const v=y.split("-->");if(v.length>=2){const m=v[0].trim(),x=v[1].trim().split(" ")[0],S=u(m),w=u(x);if(S!==null){h++;let _=[];for(;h<o.length;){const N=o[h].trim();if(N===""||N.includes("-->"))break;_.push(o[h]),h++}if(h<o.length&&o[h].includes("-->"),_.length>0){const N=_.join(" ").trim(),V=/<(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})>/g;let H;const $=[...N.matchAll(V)];if($.length>0){H=[],$.forEach((ge,De)=>{const He=ge[1]?parseInt(ge[1].replace(":",""),10):0,be=parseInt(ge[2],10),Xe=parseInt(ge[3],10),Ne=parseInt(ge[4],10),Ke=He*3600+be*60+Xe+Ne/1e3,Ue=(ge.index||0)+ge[0].length;let ot=N.length;De+1<$.length&&(ot=$[De+1].index||N.length);const ft=N.substring(Ue,ot);if(De===0&&(ge.index||0)>0){const bt=N.substring(0,ge.index);bt.trim()&&H.push({text:bt.trim(),startTime:S,endTime:Ke})}ft&&H.push({text:ft,startTime:Ke,endTime:0})});for(let ge=0;ge<H.length;ge++)ge<H.length-1?H[ge].endTime=H[ge+1].startTime:H[ge].endTime=w!==null?w:H[ge].startTime+.5}const re=N.replace(/<[\d:.]+>/g,"").replace(/\s+/g," ").trim(),ue=bd(re);s.push({time:S,text:ue,endTime:w!==null?w:void 0,words:H&&H.length>0?H:void 0})}continue}}}h++}return s},g1=({toast:n,onRemove:t})=>{const[o,s]=Z.useState(!1);Z.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{s(!0),setTimeout(t,300)},u=()=>{switch(n.type){case"success":return d.jsx(Px,{size:18,className:"text-green-400"});case"error":return d.jsx(Bx,{size:18,className:"text-red-400"});default:return d.jsx(ab,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return d.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[d.jsx("div",{className:"shrink-0",children:u()}),d.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),d.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(hi,{size:16})})]})},y1=({toasts:n,removeToast:t})=>d.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>d.jsx("div",{className:"pointer-events-auto",children:d.jsx(g1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),v1=({isOpen:n,message:t,onConfirm:o,onCancel:s,title:r="Confirm Action"})=>{const[u,h]=Z.useState(!1);return Z.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),Z.useEffect(()=>{const y=v=>{n&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),s()))};return n&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[n,o,s]),!n&&!u?null:d.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),d.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:d.jsx(Zb,{className:"text-orange-500",size:24})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),d.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),d.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(hi,{size:20})})]})}),d.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[d.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),d.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},xg=Z.createContext(void 0),Lr=()=>{const n=Z.useContext(xg);if(!n)throw new Error("useUI must be used within a UIProvider");return n},x1=({children:n})=>{const[t,o]=Z.useState([]),s=Z.useCallback((S,w,_)=>{let N,V;typeof _=="number"?N=_:typeof _=="object"&&(N=_.duration,V=_.id);const H=V||Math.random().toString(36).substr(2,9);o($=>[...$.filter(ue=>ue.id!==H),{id:H,type:S,message:w,duration:N}])},[]),r=Z.useCallback(S=>{o(w=>w.filter(_=>_.id!==S))},[]),u={success:(S,w)=>s("success",S,w),error:(S,w)=>s("error",S,w),info:(S,w)=>s("info",S,w)},[h,y]=Z.useState({isOpen:!1,message:"",title:"",resolve:null}),v=Z.useCallback((S,w="Confirm Action")=>new Promise(_=>{y({isOpen:!0,message:S,title:w,resolve:_})}),[]),m=Z.useCallback(()=>{h.resolve&&h.resolve(!0),y(S=>({...S,isOpen:!1,resolve:null}))},[h]),x=Z.useCallback(()=>{h.resolve&&h.resolve(!1),y(S=>({...S,isOpen:!1,resolve:null}))},[h]);return d.jsxs(xg.Provider,{value:{toast:u,confirm:v},children:[n,d.jsx(y1,{toasts:t,removeToast:r}),d.jsx(v1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},dr=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,b1=(n,t)=>{const o=Math.floor(n/60),s=n%60;return t<1?`${o}:${s.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(s).toString().padStart(2,"0")}`},E0=10,S1=50,Yt={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},T1=n=>new Promise(t=>{const o=URL.createObjectURL(n),s=document.createElement(n.type.startsWith("audio/")?"audio":"video");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(o)},s.onerror=()=>{URL.revokeObjectURL(o),t(0)},s.src=o}),w1=({value:n,onChange:t})=>{const[o,s]=Z.useState(n.toString());Z.useEffect(()=>{const h=parseFloat(o);!isNaN(h)&&Math.abs(h-n)<.001||s(n.toString())},[n]);const r=()=>{const h=parseFloat(o);o===""||isNaN(h)?s(n.toString()):t(h)},u=h=>{const y=parseFloat(o),v=isNaN(y)?n:y,m=Math.round((v+h)*100)/100;m<.05||(t(m),s(m.toString()))};return d.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[d.jsx("button",{onClick:()=>u(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:d.jsx(na,{size:10})}),d.jsx("input",{type:"text",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:h=>{/^\d*\.?\d*$/.test(h.target.value)&&s(h.target.value)},onBlur:r,onKeyDown:h=>{h.stopPropagation(),h.key==="ArrowUp"&&(h.preventDefault(),u(.05)),h.key==="ArrowDown"&&(h.preventDefault(),u(-.05)),h.key==="Enter"&&h.currentTarget.blur()}}),d.jsx("button",{onClick:()=>u(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:d.jsx(Zu,{size:10})})]})},E1=({slides:n,setSlides:t,currentTime:o,duration:s,lyrics:r,onSeek:u,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=Lr(),x=Z.useRef(null),S=Z.useRef(null),w=Z.useRef(null),[_,N]=Z.useState(40),[V,H]=Z.useState([n]),[$,re]=Z.useState(0),ue=Z.useRef(!1);Z.useEffect(()=>{if(ue.current){ue.current=!1;return}const E=V[$];if(JSON.stringify(E)!==JSON.stringify(n)){const z=V.slice(0,$+1);z.push(n),z.length>S1?(z.shift(),H(z)):(H(z),re($+1))}},[n,V,$]);const ge=$>0,De=$<V.length-1,He=Z.useCallback(()=>{if($>0){const E=$-1;re(E),ue.current=!0,t(V[E])}},[t,V,$]),be=Z.useCallback(()=>{if($<V.length-1){const E=$+1;re(E),ue.current=!0,t(V[E])}},[t,V,$]),Xe=Math.max(0,...n.map(E=>E.endTime)),Ne=Math.max(s,60,Xe),Ke=Ne*_,[Ue,ot]=Z.useState([]),[ft,bt]=Z.useState(null),[Et,B]=Z.useState([]),Ce=Z.useCallback(()=>{if(Ue.length===0)return;const E=n.filter(z=>Ue.includes(z.id));B(E)},[Ue,n]),ie=Z.useCallback(()=>{if(Ue.length===0)return;const E=n.filter(z=>Ue.includes(z.id));B(E),t(z=>z.filter(O=>!Ue.includes(O.id))),ot([])},[Ue,n,t]),fe=Z.useRef(n),vt=Z.useRef(_);Z.useEffect(()=>{fe.current=n,vt.current=_},[n,_]);const U=Z.useCallback(()=>{if(Et.length===0)return;const E=Math.min(...Et.map(M=>M.startTime)),z=o-E,O=Et.map(M=>({...M,id:Math.random().toString(36).substr(2,9),startTime:M.startTime+z,endTime:M.endTime+z}));t(M=>[...M,...O].sort((ee,I)=>ee.startTime-I.startTime)),ot(O.map(M=>M.id))},[Et,o,t]),ae=Z.useCallback(()=>{const E=n.filter(ee=>Ue.includes(ee.id)&&o>ee.startTime&&o<ee.endTime);if(E.length===0)return;let z=[];const O=[],M=[];E.forEach(ee=>{const I=o,le={...ee,id:Math.random().toString(36).substr(2,9),endTime:I},oe=I-ee.startTime,ce={...ee,id:Math.random().toString(36).substr(2,9),startTime:I,mediaStartOffset:(ee.mediaStartOffset||0)+oe};O.push(ee.id),z.push(le,ce),M.push(ce.id)}),t(ee=>[...ee.filter(le=>!O.includes(le.id)),...z].sort((le,oe)=>le.startTime-oe.startTime)),ot(M)},[n,Ue,o,t]),[Se,Fe]=Z.useState(null),[it,b]=Z.useState(!1),[D,q]=Z.useState(null),W=async E=>{if(E.target.files&&E.target.files.length>0){const z=Array.from(E.target.files),O=z.every(ee=>ee.type.startsWith("image/")),M=[];if(O){const ee=z.length,I=o,oe=Math.max(0,s-I)/ee,ce=Math.max(3,oe);z.forEach((A,Oe)=>{const We=URL.createObjectURL(A),Ge=I+Oe*ce,Dt=Ge+ce;M.push({id:Math.random().toString(36).substr(2,9),url:We,type:"image",startTime:Ge,endTime:Dt,name:A.name,layer:0})})}else{let ee=o;for(const I of z){const le=I.type.startsWith("image/")?"image":I.type.startsWith("video/")?"video":"audio";let oe=5;if(le!=="image"){const A=await T1(I);A>0&&(oe=A)}const ce=URL.createObjectURL(I);M.push({id:Math.random().toString(36).substr(2,9),url:ce,type:le,startTime:ee,endTime:ee+oe,mediaDuration:le!=="image"?oe:void 0,name:I.name,isMuted:le==="video",volume:le==="video"||le==="audio"?1:void 0,layer:0}),ee+=oe}}t(ee=>[...ee,...M].sort((I,le)=>I.startTime-le.startTime)),E.target.value=""}},Me=E=>{t(z=>z.filter(O=>O.id!==E))},xe=async E=>{E.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},we=(E,z,O)=>{if(E.stopPropagation(),E.preventDefault(),x.current?.focus(),E.shiftKey&&ft){const ce=n.findIndex(Oe=>Oe.id===ft),A=n.findIndex(Oe=>Oe.id===z);if(ce!==-1&&A!==-1){const Oe=Math.min(ce,A),We=Math.max(ce,A),Ge=n.slice(Oe,We+1).map(Dt=>Dt.id);ot(Dt=>{const xt=new Set([...Dt,...Ge]);return Array.from(xt)})}}else E.ctrlKey||E.metaKey?(ot(ce=>ce.includes(z)?ce.filter(A=>A!==z):[...ce,z]),bt(z)):(Ue.includes(z)||ot([z]),bt(z));const M=n.find(ce=>ce.id===z);if(!M)return;const ee=Ue.includes(z),I=E.ctrlKey||E.metaKey||E.shiftKey;let le=[];if(!I&&!ee)le=[z];else if(I){if(le=[z],(E.ctrlKey||E.metaKey)&&!ee)le=[...Ue,z];else if((E.ctrlKey||E.metaKey)&&ee){le=Ue.filter(ce=>ce!==z);return}}else le=Ue;const oe={};n.forEach(ce=>{le.includes(ce.id)&&(oe[ce.id]={start:ce.startTime,end:ce.endTime})}),oe[z]||(oe[z]={start:M.startTime,end:M.endTime}),Fe({id:z,type:O,startX:E.clientX,initialStart:M.startTime,initialEnd:M.endTime,initialMap:oe}),window.addEventListener("mousemove",G),window.addEventListener("mouseup",L)},ke=E=>{E.button===0&&(E.stopPropagation(),x.current?.focus(),ot([]),b(!0),ye(E.clientX),window.addEventListener("mousemove",Ie),window.addEventListener("mouseup",Je))},pe=E=>{if(E.button!==0)return;x.current?.focus();const z=E.clientX,O=E.clientY,M=w.current?.getBoundingClientRect();if(!M)return;const ee=z-M.left,I=O-M.top;let le=!1;const oe=A=>{const Oe=Math.sqrt(Math.pow(A.clientX-z,2)+Math.pow(A.clientY-O,2));if(!le&&Oe>5&&(le=!0,q({x:ee,y:I,w:0,h:0})),le&&w.current){const We=w.current.getBoundingClientRect(),Ge=A.clientX-We.left,Dt=A.clientY-We.top;q(Ct=>{if(!Ct)return null;const yt=Ge-ee,$t=Dt-I;return{x:yt>0?ee:Ge,y:$t>0?I:Dt,w:Math.abs(yt),h:Math.abs($t)}});const xt=[],Jt=fe.current,ut=vt.current,st=Math.min(ee,Ge),Re=Math.min(I,Dt),dt=Math.abs(Ge-ee),je=Math.abs(Dt-I),ze=st+dt,Rt=Re+je;Jt.forEach(Ct=>{const yt=Ct.startTime*ut+96,$t=Ct.endTime*ut+96;let xn=0,Vn=0;const Ji=Ct.layer||0;Ct.type==="audio"?Ji===0?(xn=Yt.AUDIO_L1_TOP,Vn=Yt.AUDIO_L1_TOP+Yt.AUDIO_L1_HEIGHT):(xn=Yt.AUDIO_L2_TOP,Vn=Yt.AUDIO_L2_TOP+Yt.AUDIO_L2_HEIGHT):Ji===0?(xn=Yt.VISUAL_L1_TOP,Vn=Yt.VISUAL_L1_TOP+Yt.VISUAL_L1_HEIGHT):(xn=Yt.VISUAL_L2_TOP,Vn=Yt.VISUAL_L2_TOP+Yt.VISUAL_L2_HEIGHT);const mn=st<$t&&ze>yt,Fi=Re<Vn&&Rt>xn;mn&&Fi&&xt.push(Ct.id)}),ot(xt)}},ce=A=>{le||(ot([]),ye(A.clientX)),q(null),window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",ce)};window.addEventListener("mousemove",oe),window.addEventListener("mouseup",ce)},ye=E=>{if(!w.current)return;const z=w.current.getBoundingClientRect(),O=E-z.left-96;let M=Math.max(0,Math.min(O/_,Ne));M=et(M),u(M)},Ie=E=>{ye(E.clientX)},Je=()=>{b(!1),window.removeEventListener("mousemove",Ie),window.removeEventListener("mouseup",Je)},Ve=E=>{const z=E.target;if(!(z.tagName==="INPUT"||z.tagName==="TEXTAREA"||z.isContentEditable)){if((E.ctrlKey||E.metaKey)&&E.key==="z"&&!E.shiftKey){E.preventDefault(),He();return}if((E.ctrlKey||E.metaKey)&&(E.key==="y"||E.key==="z"&&E.shiftKey)){E.preventDefault(),be();return}if((E.ctrlKey||E.metaKey)&&E.key==="c"){E.preventDefault(),Ce();return}if((E.ctrlKey||E.metaKey)&&E.key==="x"){E.preventDefault(),ie();return}if((E.ctrlKey||E.metaKey)&&E.key==="v"){E.preventDefault(),U();return}if(E.key.toLowerCase()==="x"&&!E.ctrlKey&&!E.metaKey||(E.ctrlKey||E.metaKey)&&E.key==="k"){E.preventDefault(),E.stopPropagation(),ae();return}if((E.key==="Delete"||E.key==="Backspace")&&Ue.length>0&&(E.preventDefault(),t(O=>O.filter(M=>!Ue.includes(M.id))),ot([])),Ue.length>0&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault(),E.stopPropagation();const O=E.key==="ArrowRight"?.01:-.01,M=n.find(ee=>ee.id===Ue[0]);if(M){const ee=Math.max(0,M.startTime+O);u(ee)}t(ee=>ee.map(le=>{if(Ue.includes(le.id)){const oe=le.endTime-le.startTime;let ce=le.startTime+O;return ce=Math.max(0,ce),{...le,startTime:ce,endTime:ce+oe}}return le}).sort((le,oe)=>le.startTime-oe.startTime))}}},et=(E,z=[])=>{const O=E0/_,M=[0,s,o],ee=dr(_),I=Math.round(E/ee)*ee;M.push(I),n.forEach(ce=>{z.includes(ce.id)||(M.push(ce.startTime),M.push(ce.endTime))}),r.forEach(ce=>{M.push(ce.time)});let le=E,oe=O;for(const ce of M){const A=Math.abs(ce-E);A<oe&&(oe=A,le=ce)}return le},G=E=>{Fe(z=>{if(!z)return null;const M=(E.clientX-z.startX)/_;return t(ee=>{if(z.type==="move"){const I=Object.keys(z.initialMap),le=Object.values(z.initialMap),oe=Math.min(...le.map(Re=>Re.start)),ce=Math.max(...le.map(Re=>Re.end)),A=z.initialMap[z.id],Oe=[{type:"drag-start",initVal:A.start},{type:"drag-end",initVal:A.end},{type:"group-start",initVal:oe},{type:"group-end",initVal:ce}],We=E0/_,Ge=[0,s,o],Dt=dr(_);n.forEach(Re=>{I.includes(Re.id)||(Ge.push(Re.startTime),Ge.push(Re.endTime))}),r.forEach(Re=>{Ge.push(Re.time)});let xt=M,Jt=We,ut=!1;Oe.forEach(Re=>{const dt=Re.initVal+M;for(const Rt of Ge){const Ct=Math.abs(Rt-dt);Ct<Jt&&(Jt=Ct,xt=Rt-Re.initVal,ut=!0)}const je=Math.round(dt/Dt)*Dt,ze=Math.abs(je-dt);ze<Jt&&(Jt=ze,xt=je-Re.initVal,ut=!0)});let st=ut?xt:M;return oe+st<0&&(st=-oe),ee.map(Re=>{const dt=z.initialMap[Re.id];if(dt){const je=dt.end-dt.start;let ze=Re.layer||0;const Rt=(yt,$t,xn)=>yt>=$t&&yt<=$t+xn,Ct=w.current?.getBoundingClientRect();if(Ct){const yt=E.clientY-Ct.top;Re.type==="audio"?(Rt(yt,Yt.AUDIO_L1_TOP,Yt.AUDIO_L1_HEIGHT)&&(ze=0),Rt(yt,Yt.AUDIO_L2_TOP,Yt.AUDIO_L2_HEIGHT)&&(ze=1)):(Rt(yt,Yt.VISUAL_L1_TOP,Yt.VISUAL_L1_HEIGHT)&&(ze=0),Rt(yt,Yt.VISUAL_L2_TOP,Yt.VISUAL_L2_HEIGHT)&&(ze=1))}return{...Re,startTime:dt.start+st,endTime:dt.start+st+je,layer:ze}}return Re})}else if(z.type==="resize-start"){let I=z.initialStart+M;I=et(I,[z.id]);const le=.5,oe=z.initialEnd;return I=Math.max(0,Math.min(I,oe-le)),ee.map(ce=>ce.id!==z.id?ce:{...ce,startTime:I})}else{let I=z.initialEnd+M;I=et(I,[z.id]);const le=.5,oe=z.initialStart;return I=Math.max(oe+le,I),ee.map(ce=>ce.id!==z.id?ce:{...ce,endTime:I})}}),z})},L=E=>{Se&&Se.type==="move"&&Math.abs(E.clientX-Se.startX)<5&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&ot([Se.id]),Fe(null),window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",L),t(z=>[...z].sort((O,M)=>O.startTime-M.startTime))},he=()=>N(E=>Math.min(200,E+10)),Ee=()=>N(E=>Math.max(10,E-10)),me=(E,z)=>{v(O=>{const M=O.layerVisibility?.[E]||{},ee={...M,[z]:M[z]===!1};return{...O,layerVisibility:{...O.layerVisibility,[E]:ee,...E==="visual"?{audio:O.layerVisibility?.audio||{}}:{visual:O.layerVisibility?.visual||{}}}}})},se=(E,z)=>y.layerVisibility?.[E]?.[z]!==!1;return d.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:E=>E.currentTarget.focus(),onKeyDown:Ve,children:[d.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[d.jsx(gg,{size:16,className:"text-purple-400"}),"Timeline"]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[d.jsx(vg,{size:14})," Import Media",d.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:W})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:Ee,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:d.jsx(h1,{size:14})}),d.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[_,"px/s"]}),d.jsx("button",{onClick:he,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:d.jsx(f1,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:He,disabled:!ge,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:d.jsx(i1,{size:14})}),d.jsx("button",{onClick:be,disabled:!De,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:d.jsx(_b,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:Ce,disabled:Ue.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:d.jsx(qx,{size:14})}),d.jsx("button",{onClick:ie,disabled:Ue.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:d.jsx(Db,{size:14})}),d.jsx("button",{onClick:U,disabled:Et.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:d.jsx(Ox,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsx("div",{className:"flex items-center gap-1",children:d.jsx("button",{onClick:ae,disabled:Ue.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:d.jsx($b,{size:14})})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>{n.length>0&&Ue.length===n.length?ot([]):ot(n.map(E=>E.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),Ue.length===1&&d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[d.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),d.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const E=n.find(z=>z.id===Ue[0]);return E?Jl(E.endTime-E.startTime):"00:00"})(),onBlur:E=>{const O=E.target.value.split(":");if(O.length===2){const ee=parseInt(O[0])||0,I=parseInt(O[1])||0,le=ee*60+I;le>0&&t(oe=>oe.map(ce=>ce.id===Ue[0]?{...ce,endTime:ce.startTime+le}:ce))}const M=n.find(ee=>ee.id===Ue[0]);M&&(E.target.value=Jl(M.endTime-M.startTime))},onKeyDown:E=>{E.key==="Enter"&&E.currentTarget.blur()}},Ue[0])]}),Ue.length===1&&(()=>{const E=n.find(z=>z.id===Ue[0]);return E&&(E.type==="video"||E.type==="audio")?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),d.jsxs("div",{className:"flex items-center gap-1 w-20",children:[d.jsx("button",{onClick:()=>{t(z=>z.map(O=>O.id===E.id?{...O,isMuted:!O.isMuted}:O))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?d.jsx(ql,{size:10}):d.jsx(qo,{size:10})}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:E.volume!==void 0?E.volume:1,onChange:z=>{const O=parseFloat(z.target.value);t(M=>M.map(ee=>ee.id===E.id?{...ee,volume:O,isMuted:O===0}:ee))}})]}),d.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((E.volume||1)*100),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),d.jsx(w1,{value:E.playbackRate||1,onChange:z=>{t(O=>O.map(M=>M.id===E.id?{...M,playbackRate:z}:M))}})]})]}):null})()]})]}),d.jsxs("div",{className:"flex gap-2 shrink-0",children:[d.jsx("button",{onClick:xe,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:d.jsx(Nr,{size:14})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),d.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:d.jsx(hi,{size:14})})]})]}),d.jsx("div",{ref:S,onWheel:E=>{S.current&&E.shiftKey&&(E.preventDefault(),S.current.scrollLeft+=E.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:d.jsxs("div",{ref:w,className:"relative",style:{width:`${Ke+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:pe,children:[D&&d.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:D.x,top:D.y,width:D.w,height:D.h}}),d.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const E=dr(_);return Array.from({length:Math.ceil(Ke/(_*E))}).map((z,O)=>d.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:O*E*_}},O))})(),s>0&&d.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:s*_},children:d.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),d.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:ke,children:[d.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),d.jsx("div",{className:"relative flex-1",children:(()=>{const E=dr(_);return Array.from({length:Math.ceil(Ke/(_*E))}).map((z,O)=>{const M=O*E;return M>Ne?null:d.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:M*_,width:E*_},children:b1(M,E)},O)})})()})]}),d.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*_}px)`,willChange:"transform"},children:d.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),d.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Yt.VISUAL_L1_TOP,height:Yt.VISUAL_L1_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Visual 1"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),me("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:se("visual",0)?d.jsx(Ks,{size:12}):d.jsx(Js,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${se("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&(E.layer===0||E.layer===void 0)).map(E=>d.jsxs("div",{style:{left:E.startTime*_,width:Math.max(10,(E.endTime-E.startTime)*_)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${Se?.id===E.id||Ue.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${Ue.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:z=>we(z,E.id,"move"),children:[E.type==="video"?d.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):d.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:d.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&d.jsx("button",{onClick:z=>{z.stopPropagation(),t(O=>O.map(M=>M.id===E.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:d.jsx(ed,{size:10})}),E.type==="video"&&d.jsx("button",{onClick:z=>{z.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?d.jsx(ql,{size:10}):d.jsx(qo,{size:10})}),d.jsx("button",{onClick:z=>{z.stopPropagation(),Me(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:d.jsx(hi,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-start"),children:d.jsx(ur,{size:10,className:"text-white/70 rotate-90"})}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-end"),children:d.jsx(ur,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Yt.VISUAL_L2_TOP,height:Yt.VISUAL_L2_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Visual 2"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),me("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:se("visual",1)?d.jsx(Ks,{size:12}):d.jsx(Js,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${se("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&E.layer===1).map(E=>d.jsxs("div",{style:{left:E.startTime*_,width:Math.max(10,(E.endTime-E.startTime)*_)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${Se?.id===E.id||Ue.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${Ue.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:z=>we(z,E.id,"move"),children:[E.type==="video"?d.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):d.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:d.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&d.jsx("button",{onClick:z=>{z.stopPropagation(),t(O=>O.map(M=>M.id===E.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:d.jsx(ed,{size:10})}),E.type==="video"&&d.jsx("button",{onClick:z=>{z.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:E.isMuted!==!1?d.jsx(ql,{size:10}):d.jsx(qo,{size:10})}),d.jsx("button",{onClick:z=>{z.stopPropagation(),Me(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:d.jsx(hi,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-start"),children:d.jsx(ur,{size:10,className:"text-white/70 rotate-90"})}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-end"),children:d.jsx(ur,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Yt.LYRICS_TOP,height:Yt.LYRICS_HEIGHT},children:[d.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:d.jsx("span",{children:"Lyrics"})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((E,z)=>d.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:E.time*_},title:`${Jl(E.time)} - ${E.text}`,onClick:O=>{O.stopPropagation(),u(E.time)},children:[d.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Jl(E.time)}),E.text]},z))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Yt.AUDIO_L1_TOP,height:Yt.AUDIO_L1_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Audio 1"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),me("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:se("audio",0)?d.jsx(Ks,{size:12}):d.jsx(Js,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${se("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&(E.layer===0||E.layer===void 0)).map(E=>d.jsxs("div",{style:{left:E.startTime*_,width:Math.max(10,(E.endTime-E.startTime)*_)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${Se?.id===E.id||Ue.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Ue.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:z=>we(z,E.id,"move"),children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:d.jsx(qo,{size:16,className:"text-emerald-200"})}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:d.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),d.jsx("button",{onClick:z=>{z.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?d.jsx(ql,{size:10}):d.jsx(qo,{size:10})}),d.jsx("button",{onClick:z=>{z.stopPropagation(),Me(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:d.jsx(hi,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-start")}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-end")})]},E.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Yt.AUDIO_L2_TOP,height:Yt.AUDIO_L2_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Audio 2"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),me("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:se("audio",1)?d.jsx(Ks,{size:12}):d.jsx(Js,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${se("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&E.layer===1).map(E=>d.jsxs("div",{style:{left:E.startTime*_,width:Math.max(10,(E.endTime-E.startTime)*_)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${Se?.id===E.id||Ue.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Ue.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:z=>we(z,E.id,"move"),children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:d.jsx(qo,{size:16,className:"text-emerald-200"})}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:d.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),d.jsx("button",{onClick:z=>{z.stopPropagation(),t(O=>O.map(M=>M.id===E.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?d.jsx(ql,{size:10}):d.jsx(qo,{size:10})}),d.jsx("button",{onClick:z=>{z.stopPropagation(),Me(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:d.jsx(hi,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-start")}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:z=>we(z,E.id,"resize-end")})]},E.id))})]})]})})]})};var C1={};let _1,N1;function A1(){return{geminiUrl:_1,vertexUrl:N1}}function M1(n,t,o,s){var r,u;if(!n?.baseUrl){const h=A1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(u=h.geminiUrl)!==null&&u!==void 0?u:s}return n.baseUrl}class go{}function $e(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(n,t,o){for(let u=0;u<t.length-1;u++){const h=t[u];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];f(x,t.slice(u+1),o[m])}else for(const m of v)f(m,t.slice(u+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];f(v[0],t.slice(u+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const s=t[t.length-1],r=n[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[s]=o}function c(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let s=0;s<t.length;s++){if(typeof n!="object"||n===null)return o;const r=t[s];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in n){const h=n[u];return Array.isArray(h)?h.map(y=>c(y,t.slice(s+1),o)):o}else return o}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return o;throw s}}function R1(n,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),u=s.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&u.length>y)for(let v=y;v<u.length;v++){const m=u[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}id(n,r,u,0,h)}}function id(n,t,o,s,r){if(s>=t.length||typeof n!="object"||n===null)return;const u=t[s];if(u.endsWith("[]")){const h=u.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])id(v,t,o,s+1,r)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const S=[];for(const w of o.slice(s))w==="*"?S.push(m):S.push(w);f(h,S,x)}for(const m of y)delete h[m]}}else{const h=n;u in h&&id(h[u],t,o,s+1,r)}}function Sd(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function k1(n){const t={},o=c(n,["operationName"]);o!=null&&f(t,["operationName"],o);const s=c(n,["resourceName"]);return s!=null&&f(t,["_url","resourceName"],s),t}function I1(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response","generateVideoResponse"]);return h!=null&&f(t,["response"],D1(h)),t}function z1(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response"]);return h!=null&&f(t,["response"],L1(h)),t}function D1(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>U1(h))),f(t,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function L1(n){const t={},o=c(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>P1(h))),f(t,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function U1(n){const t={},o=c(n,["video"]);return o!=null&&f(t,["video"],O1(o)),t}function P1(n){const t={},o=c(n,["_self"]);return o!=null&&f(t,["video"],j1(o)),t}function H1(n){const t={},o=c(n,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function G1(n){const t={},o=c(n,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function F1(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response"]);return h!=null&&f(t,["response"],B1(h)),t}function B1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["parent"]);s!=null&&f(t,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function bg(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response"]);return h!=null&&f(t,["response"],V1(h)),t}function V1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["parent"]);s!=null&&f(t,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function O1(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["uri"],o);const s=c(n,["encodedVideo"]);s!=null&&f(t,["videoBytes"],Sd(s));const r=c(n,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function j1(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["uri"],o);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(t,["videoBytes"],Sd(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}var C0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(C0||(C0={}));var _0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(_0||(_0={}));var N0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(N0||(N0={}));var cn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cn||(cn={}));var A0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(A0||(A0={}));var M0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(M0||(M0={}));var R0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(R0||(R0={}));var k0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(k0||(k0={}));var I0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(I0||(I0={}));var z0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(z0||(z0={}));var D0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(D0||(D0={}));var L0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(L0||(L0={}));var U0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(U0||(U0={}));var P0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(P0||(P0={}));var H0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(H0||(H0={}));var G0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(G0||(G0={}));var F0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(F0||(F0={}));var B0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(B0||(B0={}));var V0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(V0||(V0={}));var Ar;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ar||(Ar={}));var O0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(O0||(O0={}));var j0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(j0||(j0={}));var q0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(q0||(q0={}));var od;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(od||(od={}));var $0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})($0||($0={}));var Y0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Y0||(Y0={}));var J0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(J0||(J0={}));var K0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(K0||(K0={}));var X0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(X0||(X0={}));var Q0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Q0||(Q0={}));var Z0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Z0||(Z0={}));var W0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(W0||(W0={}));var em;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(em||(em={}));var tm;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(tm||(tm={}));var nm;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nm||(nm={}));var im;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(im||(im={}));var om;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(om||(om={}));var lm;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lm||(lm={}));var sm;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(sm||(sm={}));var am;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(am||(am={}));var rm;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(rm||(rm={}));var cm;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(cm||(cm={}));var um;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(um||(um={}));var dm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(dm||(dm={}));var fm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(fm||(fm={}));var pm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(pm||(pm={}));var hm;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hm||(hm={}));var mm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(mm||(mm={}));var gm;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gm||(gm={}));var ym;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ym||(ym={}));var vm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vm||(vm={}));var xm;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(xm||(xm={}));var bm;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(bm||(bm={}));var Sm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Sm||(Sm={}));var Tm;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Tm||(Tm={}));var Kl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Kl||(Kl={}));class ld{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class js{get text(){var t,o,s,r,u,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const S=[];for(const w of(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[_,N]of Object.entries(w))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(N!==null||N!==void 0)&&S.push(_);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;x=!0,m+=w.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,s,r,u,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const S of(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[w,_]of Object.entries(S))w!=="inlineData"&&(_!==null||_!==void 0)&&x.push(w);S.inlineData&&typeof S.inlineData.data=="string"&&(m+=atob(S.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,s,r,u,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,s,r,u,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,s,r,u,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class wm{}class Em{}class q1{}class $1{}class Y1{}class J1{}class Cm{}class _m{}class Nm{}class K1{}class Mr{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Mr;let r;const u=t;return o?r=z1(u):r=I1(u),Object.assign(s,r),s}}class Am{}class Mm{}class Rm{}class km{}class X1{}class Q1{}class Z1{}class Td{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Td,u=F1(t);return Object.assign(s,u),s}}class W1{}class eS{}class tS{}class Im{}class nS{get text(){var t,o,s;let r="",u=!1;const h=[];for(const y of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;u=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,o,s;let r="";const u=[];for(const h of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&u.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class iS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class wd{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new wd,u=bg(t);return Object.assign(s,u),s}}function Ot(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Sg(n,t){const o=Ot(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function Tg(n){return Array.isArray(n)?n.map(t=>Rr(t)):[Rr(n)]}function Rr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function wg(n){const t=Rr(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Eg(n){const t=Rr(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function zm(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Cg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>zm(t)):[zm(n)]}function sd(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Dm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Lm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Bn(n){if(n==null)throw new Error("ContentUnion is required");return sd(n)?n:{role:"user",parts:Cg(n)}}function Ed(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=Bn(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const o=Bn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>Bn(o)):[Bn(t)]}function Ai(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Dm(n)||Lm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bn(n)]}const t=[],o=[],s=sd(n[0]);for(const r of n){const u=sd(r);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(r);else{if(Dm(r)||Lm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:Cg(o)}),t}function oS(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(cn).includes(o[0].toUpperCase())?o[0].toUpperCase():cn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(cn).includes(s.toUpperCase())?s.toUpperCase():cn.TYPE_UNSPECIFIED})}}function Wl(n){const t={},o=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,n=u[1]):u[1].type==="null"&&(t.nullable=!0,n=u[0])),n.type instanceof Array&&oS(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(cn).includes(y.toUpperCase())?y.toUpperCase():cn.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=Wl(y);else if(s.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(Wl(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=Wl(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function Cd(n){return Wl(n)}function _d(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Nd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ts(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Wl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Wl(t.response));return n}function ns(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function lS(n,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function yo(n,t){if(typeof t!="string")throw new Error("name must be a string");return lS(n,t,"cachedContents")}function _g(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jo(n){return Sd(n)}function sS(n){return n!=null&&typeof n=="object"&&"name"in n}function aS(n){return n!=null&&typeof n=="object"&&"video"in n}function rS(n){return n!=null&&typeof n=="object"&&"uri"in n}function Ng(n){var t;let o;if(sS(n)&&(o=n.name),!(rS(n)&&(o=n.uri,o===void 0))&&!(aS(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Ag(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function Mg(n){for(const t of["models","tunedModels","publisherModels"])if(cS(n,t))return n[t];return[]}function cS(n,t){return n!==null&&typeof n=="object"&&t in n}function uS(n,t={}){const o=n,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function dS(n,t={}){const o=[],s=new Set;for(const r of n){const u=r.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const h=uS(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function Rg(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function fS(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function kg(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let u=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){u=!0;break}}return u&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function is(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Ig(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function pS(n){const t={},o=c(n,["responsesFile"]);o!=null&&f(t,["fileName"],o);const s=c(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>YS(h))),f(t,["inlinedResponses"],u)}const r=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["inlinedEmbedContentResponses"],u)}return t}function hS(n){const t={},o=c(n,["predictionsFormat"]);o!=null&&f(t,["format"],o);const s=c(n,["gcsDestination","outputUriPrefix"]);s!=null&&f(t,["gcsUri"],s);const r=c(n,["bigqueryDestination","outputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function mS(n){const t={},o=c(n,["format"]);o!=null&&f(t,["predictionsFormat"],o);const s=c(n,["gcsUri"]);s!=null&&f(t,["gcsDestination","outputUriPrefix"],s);const r=c(n,["bigqueryUri"]);if(r!=null&&f(t,["bigqueryDestination","outputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Sr(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata","displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["metadata","state"]);r!=null&&f(t,["state"],Ig(r));const u=c(n,["metadata","createTime"]);u!=null&&f(t,["createTime"],u);const h=c(n,["metadata","endTime"]);h!=null&&f(t,["endTime"],h);const y=c(n,["metadata","updateTime"]);y!=null&&f(t,["updateTime"],y);const v=c(n,["metadata","model"]);v!=null&&f(t,["model"],v);const m=c(n,["metadata","output"]);return m!=null&&f(t,["dest"],pS(kg(m))),t}function ad(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["state"]);r!=null&&f(t,["state"],Ig(r));const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["createTime"]);h!=null&&f(t,["createTime"],h);const y=c(n,["startTime"]);y!=null&&f(t,["startTime"],y);const v=c(n,["endTime"]);v!=null&&f(t,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&f(t,["updateTime"],m);const x=c(n,["model"]);x!=null&&f(t,["model"],x);const S=c(n,["inputConfig"]);S!=null&&f(t,["src"],gS(S));const w=c(n,["outputConfig"]);w!=null&&f(t,["dest"],hS(kg(w)));const _=c(n,["completionStats"]);return _!=null&&f(t,["completionStats"],_),t}function gS(n){const t={},o=c(n,["instancesFormat"]);o!=null&&f(t,["format"],o);const s=c(n,["gcsSource","uris"]);s!=null&&f(t,["gcsUri"],s);const r=c(n,["bigquerySource","inputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function yS(n,t){const o={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(t,["fileName"]);s!=null&&f(o,["fileName"],s);const r=c(t,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>$S(n,h))),f(o,["requests","requests"],u)}return o}function vS(n){const t={},o=c(n,["format"]);o!=null&&f(t,["instancesFormat"],o);const s=c(n,["gcsUri"]);s!=null&&f(t,["gcsSource","uris"],s);const r=c(n,["bigqueryUri"]);if(r!=null&&f(t,["bigquerySource","inputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function xS(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function bS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],is(n,s)),o}function SS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],is(n,s)),o}function TS(n){const t={},o=c(n,["content"]);o!=null&&f(t,["content"],o);const s=c(n,["citationMetadata"]);s!=null&&f(t,["citationMetadata"],wS(s));const r=c(n,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&f(t,["finishReason"],u);const h=c(n,["avgLogprobs"]);h!=null&&f(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&f(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&f(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(_=>_)),f(t,["safetyRatings"],w)}const S=c(n,["urlContextMetadata"]);return S!=null&&f(t,["urlContextMetadata"],S),t}function wS(n){const t={},o=c(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["citations"],s)}return t}function zg(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>eT(u))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function ES(n,t){const o={},s=c(n,["displayName"]);if(t!==void 0&&s!=null&&f(t,["batch","displayName"],s),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function CS(n,t){const o={},s=c(n,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(n,["dest"]);return t!==void 0&&r!=null&&f(t,["outputConfig"],mS(fS(r))),o}function Um(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],yS(n,Rg(n,r)));const u=c(t,["config"]);return u!=null&&ES(u,o),o}function _S(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Ot(n,s));const r=c(t,["src"]);r!=null&&f(o,["inputConfig"],vS(Rg(n,r)));const u=c(t,["config"]);return u!=null&&CS(u,o),o}function NS(n,t){const o={},s=c(n,["displayName"]);return t!==void 0&&s!=null&&f(t,["batch","displayName"],s),o}function AS(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],LS(n,r));const u=c(t,["config"]);return u!=null&&NS(u,o),o}function MS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],is(n,s)),o}function RS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],is(n,s)),o}function kS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);return u!=null&&f(t,["error"],u),t}function IS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);return u!=null&&f(t,["error"],u),t}function zS(n,t){const o={},s=c(t,["contents"]);if(s!=null){let u=Ed(n,s);Array.isArray(u)&&(u=u.map(h=>h)),f(o,["requests[]","request","content"],u)}const r=c(t,["config"]);return r!=null&&(f(o,["_self"],DS(r,o)),R1(o,{"requests[].*":"requests[].request.*"})),o}function DS(n,t){const o={},s=c(n,["taskType"]);t!==void 0&&s!=null&&f(t,["requests[]","taskType"],s);const r=c(n,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(t!==void 0&&u!=null&&f(t,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function LS(n,t){const o={},s=c(t,["fileName"]);s!=null&&f(o,["file_name"],s);const r=c(t,["inlinedRequests"]);return r!=null&&f(o,["requests"],zS(n,r)),o}function US(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function PS(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function HS(n){const t={},o=c(n,["mode"]);o!=null&&f(t,["mode"],o);const s=c(n,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function GS(n,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],zg(Bn(r)));const u=c(t,["temperature"]);u!=null&&f(s,["temperature"],u);const h=c(t,["topP"]);h!=null&&f(s,["topP"],h);const y=c(t,["topK"]);y!=null&&f(s,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const S=c(t,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const w=c(t,["logprobs"]);w!=null&&f(s,["logprobs"],w);const _=c(t,["presencePenalty"]);_!=null&&f(s,["presencePenalty"],_);const N=c(t,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const V=c(t,["seed"]);V!=null&&f(s,["seed"],V);const H=c(t,["responseMimeType"]);H!=null&&f(s,["responseMimeType"],H);const $=c(t,["responseSchema"]);$!=null&&f(s,["responseSchema"],Cd($));const re=c(t,["responseJsonSchema"]);if(re!=null&&f(s,["responseJsonSchema"],re),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ue=c(t,["safetySettings"]);if(o!==void 0&&ue!=null){let ft=ue;Array.isArray(ft)&&(ft=ft.map(bt=>tT(bt))),f(o,["safetySettings"],ft)}const ge=c(t,["tools"]);if(o!==void 0&&ge!=null){let ft=ns(ge);Array.isArray(ft)&&(ft=ft.map(bt=>iT(ts(bt)))),f(o,["tools"],ft)}const De=c(t,["toolConfig"]);if(o!==void 0&&De!=null&&f(o,["toolConfig"],nT(De)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const He=c(t,["cachedContent"]);o!==void 0&&He!=null&&f(o,["cachedContent"],yo(n,He));const be=c(t,["responseModalities"]);be!=null&&f(s,["responseModalities"],be);const Xe=c(t,["mediaResolution"]);Xe!=null&&f(s,["mediaResolution"],Xe);const Ne=c(t,["speechConfig"]);if(Ne!=null&&f(s,["speechConfig"],_d(Ne)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ke=c(t,["thinkingConfig"]);Ke!=null&&f(s,["thinkingConfig"],Ke);const Ue=c(t,["imageConfig"]);Ue!=null&&f(s,["imageConfig"],qS(Ue));const ot=c(t,["enableEnhancedCivicAnswers"]);return ot!=null&&f(s,["enableEnhancedCivicAnswers"],ot),s}function FS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>TS(m))),f(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&f(t,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&f(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&f(t,["usageMetadata"],y),t}function BS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],is(n,s)),o}function VS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],is(n,s)),o}function OS(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function jS(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function qS(n){const t={},o=c(n,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(n,["imageSize"]);if(s!=null&&f(t,["imageSize"],s),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function $S(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["request","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let y=Ai(r);Array.isArray(y)&&(y=y.map(v=>zg(v))),f(o,["request","contents"],y)}const u=c(t,["metadata"]);u!=null&&f(o,["metadata"],u);const h=c(t,["config"]);return h!=null&&f(o,["request","generationConfig"],GS(n,h,c(o,["request"],{}))),o}function YS(n){const t={},o=c(n,["response"]);o!=null&&f(t,["response"],FS(o));const s=c(n,["error"]);return s!=null&&f(t,["error"],s),t}function JS(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);if(t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function KS(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const u=c(n,["filter"]);return t!==void 0&&u!=null&&f(t,["_query","filter"],u),o}function XS(n){const t={},o=c(n,["config"]);return o!=null&&JS(o,t),t}function QS(n){const t={},o=c(n,["config"]);return o!=null&&KS(o,t),t}function ZS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>Sr(h))),f(t,["batchJobs"],u)}return t}function WS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>ad(h))),f(t,["batchJobs"],u)}return t}function eT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(t,["fileData"],US(u));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],PS(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],xS(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const S=c(n,["thoughtSignature"]);S!=null&&f(t,["thoughtSignature"],S);const w=c(n,["videoMetadata"]);return w!=null&&f(t,["videoMetadata"],w),t}function tT(n){const t={},o=c(n,["category"]);if(o!=null&&f(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(n,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function nT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],HS(o));const s=c(n,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function iT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],OS(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],jS(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}var mo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(mo||(mo={}));class pl{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,u;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!s||Object.keys(s).length===0?h={config:{}}:typeof s=="object"?h=Object.assign({},s):h=s,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(u=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class oT extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new pl(mo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=Um(this.apiClient,t),s=o._url,r=$e("{model}:batchGenerateContent",s),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const S=Object.assign({},x);if(S.systemInstruction){const w=S.systemInstruction;delete S.systemInstruction;const _=S.request;_.systemInstruction=w,S.request=_}m.push(S)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const u=this.getGcsUri(t),h=this.getBigqueryUri(t);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${r}`;else if(h)s.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_S(this.apiClient,t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>ad(x))}else{const m=Um(this.apiClient,t);return y=$e("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>Sr(x))}}async createEmbeddingsInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=AS(this.apiClient,t);return u=$e("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>Sr(v))}}async get(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=VS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>ad(x))}else{const m=BS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>Sr(x))}}async cancel(t){var o,s,r,u;let h="",y={};if(this.apiClient.isVertexAI()){const v=SS(this.apiClient,t);h=$e("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=bS(this.apiClient,t);h=$e("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=QS(t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=WS(x),w=new Im;return Object.assign(w,S),w})}else{const m=XS(t);return y=$e("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=ZS(x),w=new Im;return Object.assign(w,S),w})}}async delete(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=RS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>IS(x))}else{const m=MS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>kS(x))}}}function lT(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Pm(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>AT(u))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function sT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const u=c(n,["displayName"]);t!==void 0&&u!=null&&f(t,["displayName"],u);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let x=Ai(h);Array.isArray(x)&&(x=x.map(S=>Pm(S))),f(t,["contents"],x)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&f(t,["systemInstruction"],Pm(Bn(y)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>RT(S))),f(t,["tools"],x)}const m=c(n,["toolConfig"]);if(t!==void 0&&m!=null&&f(t,["toolConfig"],MT(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function aT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const u=c(n,["displayName"]);t!==void 0&&u!=null&&f(t,["displayName"],u);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let S=Ai(h);Array.isArray(S)&&(S=S.map(w=>w)),f(t,["contents"],S)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&f(t,["systemInstruction"],Bn(y));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>kT(w))),f(t,["tools"],S)}const m=c(n,["toolConfig"]);t!==void 0&&m!=null&&f(t,["toolConfig"],m);const x=c(n,["kmsKeyName"]);return t!==void 0&&x!=null&&f(t,["encryption_spec","kmsKeyName"],x),o}function rT(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Sg(n,s));const r=c(t,["config"]);return r!=null&&sT(r,o),o}function cT(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Sg(n,s));const r=c(t,["config"]);return r!=null&&aT(r,o),o}function uT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],yo(n,s)),o}function dT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],yo(n,s)),o}function fT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function pT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function hT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function mT(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function gT(n){const t={},o=c(n,["mode"]);o!=null&&f(t,["mode"],o);const s=c(n,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function yT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&f(t,["description"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&f(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&f(t,["responseJsonSchema"],y),t}function vT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],yo(n,s)),o}function xT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],yo(n,s)),o}function bT(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function ST(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function TT(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function wT(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function ET(n){const t={},o=c(n,["config"]);return o!=null&&TT(o,t),t}function CT(n){const t={},o=c(n,["config"]);return o!=null&&wT(o,t),t}function _T(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["cachedContents"],u)}return t}function NT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["cachedContents"],u)}return t}function AT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(t,["fileData"],hT(u));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],mT(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],lT(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const S=c(n,["thoughtSignature"]);S!=null&&f(t,["thoughtSignature"],S);const w=c(n,["videoMetadata"]);return w!=null&&f(t,["videoMetadata"],w),t}function MT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],gT(o));const s=c(n,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function RT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],bT(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],ST(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function kT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(w=>yT(w))),f(t,["functionDeclarations"],S)}const s=c(n,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(n,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&f(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&f(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function IT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function zT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function DT(n,t){const o={},s=c(t,["name"]);s!=null&&f(o,["_url","name"],yo(n,s));const r=c(t,["config"]);return r!=null&&IT(r,o),o}function LT(n,t){const o={},s=c(t,["name"]);s!=null&&f(o,["_url","name"],yo(n,s));const r=c(t,["config"]);return r!=null&&zT(r,o),o}class UT extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new pl(mo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=cT(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=rT(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=vT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=dT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=pT(x),w=new Rm;return Object.assign(w,S),w})}else{const m=uT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=fT(x),w=new Rm;return Object.assign(w,S),w})}}async update(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=LT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=DT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=CT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=NT(x),w=new km;return Object.assign(w,S),w})}else{const m=ET(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=_T(x),w=new km;return Object.assign(w,S),w})}}}function kr(n,t){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(o[s[r]]=n[s[r]]);return o}function Hm(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(n){return this instanceof St?(this.v=n,this):new St(n)}function Pi(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(_){return function(N){return Promise.resolve(N).then(_,S)}}function y(_,N){s[_]&&(r[_]=function(V){return new Promise(function(H,$){u.push([_,V,H,$])>1||v(_,V)})},N&&(r[_]=N(r[_])))}function v(_,N){try{m(s[_](N))}catch(V){w(u[0][3],V)}}function m(_){_.value instanceof St?Promise.resolve(_.value.v).then(x,S):w(u[0][2],_)}function x(_){v("next",_)}function S(_){v("throw",_)}function w(_,N){_(N),u.shift(),u.length&&v(u[0][0],u[0][1])}}function Hi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Hm=="function"?Hm(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(u){o[u]=n[u]&&function(h){return new Promise(function(y,v){h=n[u](h),r(y,v,h.done,h.value)})}}function r(u,h,y,v){Promise.resolve(v).then(function(m){u({value:m,done:y})},h)}}function PT(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:Dg(o)}function Dg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function HT(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Gm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let s=0;for(;s<o;)if(n[s].role==="user")t.push(n[s]),s++;else{const r=[];let u=!0;for(;s<o&&n[s].role==="model";)r.push(n[s]),u&&!Dg(n[s])&&(u=!1),s++;u?t.push(...r):t.pop()}return t}class GT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new FT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class FT{constructor(t,o,s,r={},u=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),HT(u)}async sendMessage(t){var o;await this.sendPromise;const s=Bn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,h,y;const v=await r,m=(h=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let w=[];x!=null&&(w=(y=x.slice(S))!==null&&y!==void 0?y:[]);const _=m?[m]:[];this.recordHistory(s,_,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=Bn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,s)}getHistory(t=!1){const o=t?Gm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Pi(this,arguments,function*(){var r,u,h,y,v,m;const x=[];try{for(var S=!0,w=Hi(t),_;_=yield St(w.next()),r=_.done,!r;S=!0){y=_.value,S=!1;const N=y;if(PT(N)){const V=(m=(v=N.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;V!==void 0&&x.push(V)}yield yield St(N)}}catch(N){u={error:N}}finally{try{!S&&!r&&(h=w.return)&&(yield St(h.call(w)))}finally{if(u)throw u.error}}this.recordHistory(o,x)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(u=>u.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Gm(s)):this.history.push(t),this.history.push(...r)}}class Ur extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ur.prototype)}}function BT(n){const t={},o=c(n,["file"]);return o!=null&&f(t,["file"],o),t}function VT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function OT(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","file"],Ng(o)),t}function jT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function qT(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","file"],Ng(o)),t}function $T(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function YT(n){const t={},o=c(n,["config"]);return o!=null&&$T(o,t),t}function JT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["files"],u)}return t}class KT extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new pl(mo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=YT(t);return u=$e("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=JT(v),x=new W1;return Object.assign(x,m),x})}}async createInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=BT(t);return u=$e("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=VT(v),x=new eS;return Object.assign(x,m),x})}}async get(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=qT(t);return u=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=OT(t);return u=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=jT(v),x=new tS;return Object.assign(x,m),x})}}}function Tr(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function XT(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>fw(u))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function QT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function ZT(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function WT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&f(t,["description"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&f(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&f(t,["responseJsonSchema"],y),t}function ew(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const s=c(n,["responseJsonSchema"]);s!=null&&f(t,["responseJsonSchema"],s);const r=c(n,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&f(t,["candidateCount"],u);const h=c(n,["enableAffectiveDialog"]);h!=null&&f(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&f(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const S=c(n,["presencePenalty"]);S!=null&&f(t,["presencePenalty"],S);const w=c(n,["responseLogprobs"]);w!=null&&f(t,["responseLogprobs"],w);const _=c(n,["responseMimeType"]);_!=null&&f(t,["responseMimeType"],_);const N=c(n,["responseModalities"]);N!=null&&f(t,["responseModalities"],N);const V=c(n,["responseSchema"]);V!=null&&f(t,["responseSchema"],V);const H=c(n,["routingConfig"]);H!=null&&f(t,["routingConfig"],H);const $=c(n,["seed"]);$!=null&&f(t,["seed"],$);const re=c(n,["speechConfig"]);re!=null&&f(t,["speechConfig"],re);const ue=c(n,["stopSequences"]);ue!=null&&f(t,["stopSequences"],ue);const ge=c(n,["temperature"]);ge!=null&&f(t,["temperature"],ge);const De=c(n,["thinkingConfig"]);De!=null&&f(t,["thinkingConfig"],De);const He=c(n,["topK"]);He!=null&&f(t,["topK"],He);const be=c(n,["topP"]);if(be!=null&&f(t,["topP"],be),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function tw(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function nw(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function iw(n,t){const o={},s=c(n,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],s);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const S=c(n,["speechConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","speechConfig"],Nd(S));const w=c(n,["thinkingConfig"]);t!==void 0&&w!=null&&f(t,["setup","generationConfig","thinkingConfig"],w);const _=c(n,["enableAffectiveDialog"]);t!==void 0&&_!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],_);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&f(t,["setup","systemInstruction"],XT(Bn(N)));const V=c(n,["tools"]);if(t!==void 0&&V!=null){let He=ns(V);Array.isArray(He)&&(He=He.map(be=>hw(ts(be)))),f(t,["setup","tools"],He)}const H=c(n,["sessionResumption"]);t!==void 0&&H!=null&&f(t,["setup","sessionResumption"],pw(H));const $=c(n,["inputAudioTranscription"]);t!==void 0&&$!=null&&f(t,["setup","inputAudioTranscription"],$);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&f(t,["setup","outputAudioTranscription"],re);const ue=c(n,["realtimeInputConfig"]);t!==void 0&&ue!=null&&f(t,["setup","realtimeInputConfig"],ue);const ge=c(n,["contextWindowCompression"]);t!==void 0&&ge!=null&&f(t,["setup","contextWindowCompression"],ge);const De=c(n,["proactivity"]);if(t!==void 0&&De!=null&&f(t,["setup","proactivity"],De),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function ow(n,t){const o={},s=c(n,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],ew(s));const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const S=c(n,["speechConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","speechConfig"],Nd(S));const w=c(n,["thinkingConfig"]);t!==void 0&&w!=null&&f(t,["setup","generationConfig","thinkingConfig"],w);const _=c(n,["enableAffectiveDialog"]);t!==void 0&&_!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],_);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&f(t,["setup","systemInstruction"],Bn(N));const V=c(n,["tools"]);if(t!==void 0&&V!=null){let be=ns(V);Array.isArray(be)&&(be=be.map(Xe=>mw(ts(Xe)))),f(t,["setup","tools"],be)}const H=c(n,["sessionResumption"]);t!==void 0&&H!=null&&f(t,["setup","sessionResumption"],H);const $=c(n,["inputAudioTranscription"]);t!==void 0&&$!=null&&f(t,["setup","inputAudioTranscription"],$);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&f(t,["setup","outputAudioTranscription"],re);const ue=c(n,["realtimeInputConfig"]);t!==void 0&&ue!=null&&f(t,["setup","realtimeInputConfig"],ue);const ge=c(n,["contextWindowCompression"]);t!==void 0&&ge!=null&&f(t,["setup","contextWindowCompression"],ge);const De=c(n,["proactivity"]);t!==void 0&&De!=null&&f(t,["setup","proactivity"],De);const He=c(n,["explicitVadSignal"]);return t!==void 0&&He!=null&&f(t,["setup","explicitVadSignal"],He),o}function lw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Ot(n,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],iw(r,o)),o}function sw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Ot(n,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],ow(r,o)),o}function aw(n){const t={},o=c(n,["musicGenerationConfig"]);return o!=null&&f(t,["musicGenerationConfig"],o),t}function rw(n){const t={},o=c(n,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["weightedPrompts"],s)}return t}function cw(n){const t={},o=c(n,["media"]);if(o!=null){let m=Tg(o);Array.isArray(m)&&(m=m.map(x=>Tr(x))),f(t,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(t,["audio"],Tr(Eg(s)));const r=c(n,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&f(t,["video"],Tr(wg(u)));const h=c(n,["text"]);h!=null&&f(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&f(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function uw(n){const t={},o=c(n,["media"]);if(o!=null){let m=Tg(o);Array.isArray(m)&&(m=m.map(x=>x)),f(t,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(t,["audio"],Eg(s));const r=c(n,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&f(t,["video"],wg(u));const h=c(n,["text"]);h!=null&&f(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&f(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function dw(n){const t={},o=c(n,["setupComplete"]);o!=null&&f(t,["setupComplete"],o);const s=c(n,["serverContent"]);s!=null&&f(t,["serverContent"],s);const r=c(n,["toolCall"]);r!=null&&f(t,["toolCall"],r);const u=c(n,["toolCallCancellation"]);u!=null&&f(t,["toolCallCancellation"],u);const h=c(n,["usageMetadata"]);h!=null&&f(t,["usageMetadata"],gw(h));const y=c(n,["goAway"]);y!=null&&f(t,["goAway"],y);const v=c(n,["sessionResumptionUpdate"]);v!=null&&f(t,["sessionResumptionUpdate"],v);const m=c(n,["voiceActivityDetectionSignal"]);return m!=null&&f(t,["voiceActivityDetectionSignal"],m),t}function fw(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(t,["fileData"],QT(u));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],ZT(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],Tr(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const S=c(n,["thoughtSignature"]);S!=null&&f(t,["thoughtSignature"],S);const w=c(n,["videoMetadata"]);return w!=null&&f(t,["videoMetadata"],w),t}function pw(n){const t={},o=c(n,["handle"]);if(o!=null&&f(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function hw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],tw(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],nw(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function mw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(w=>WT(w))),f(t,["functionDeclarations"],S)}const s=c(n,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(n,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&f(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&f(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function gw(n){const t={},o=c(n,["promptTokenCount"]);o!=null&&f(t,["promptTokenCount"],o);const s=c(n,["cachedContentTokenCount"]);s!=null&&f(t,["cachedContentTokenCount"],s);const r=c(n,["candidatesTokenCount"]);r!=null&&f(t,["responseTokenCount"],r);const u=c(n,["toolUsePromptTokenCount"]);u!=null&&f(t,["toolUsePromptTokenCount"],u);const h=c(n,["thoughtsTokenCount"]);h!=null&&f(t,["thoughtsTokenCount"],h);const y=c(n,["totalTokenCount"]);y!=null&&f(t,["totalTokenCount"],y);const v=c(n,["promptTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(N=>N)),f(t,["promptTokensDetails"],_)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(N=>N)),f(t,["cacheTokensDetails"],_)}const x=c(n,["candidatesTokensDetails"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(N=>N)),f(t,["responseTokensDetails"],_)}const S=c(n,["toolUsePromptTokensDetails"]);if(S!=null){let _=S;Array.isArray(_)&&(_=_.map(N=>N)),f(t,["toolUsePromptTokensDetails"],_)}const w=c(n,["trafficType"]);return w!=null&&f(t,["trafficType"],w),t}function yw(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function vw(n){const t={},o=c(n,["content"]);o!=null&&f(t,["content"],o);const s=c(n,["citationMetadata"]);s!=null&&f(t,["citationMetadata"],xw(s));const r=c(n,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&f(t,["finishReason"],u);const h=c(n,["avgLogprobs"]);h!=null&&f(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&f(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&f(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(_=>_)),f(t,["safetyRatings"],w)}const S=c(n,["urlContextMetadata"]);return S!=null&&f(t,["urlContextMetadata"],S),t}function xw(n){const t={},o=c(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["citations"],s)}return t}function bw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let u=Ai(r);Array.isArray(u)&&(u=u.map(h=>h)),f(o,["contents"],u)}return o}function Sw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(t,["tokensInfo"],r)}return t}function Tw(n){const t={},o=c(n,["values"]);o!=null&&f(t,["values"],o);const s=c(n,["statistics"]);return s!=null&&f(t,["statistics"],ww(s)),t}function ww(n){const t={},o=c(n,["truncated"]);o!=null&&f(t,["truncated"],o);const s=c(n,["token_count"]);return s!=null&&f(t,["tokenCount"],s),t}function Pr(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>IE(u))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function Ew(n){const t={},o=c(n,["controlType"]);o!=null&&f(t,["controlType"],o);const s=c(n,["enableControlImageComputation"]);return s!=null&&f(t,["computeControl"],s),t}function Cw(n){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function _w(n,t){const o={},s=c(n,["systemInstruction"]);t!==void 0&&s!=null&&f(t,["systemInstruction"],Bn(s));const r=c(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>Hg(y))),f(t,["tools"],h)}const u=c(n,["generationConfig"]);return t!==void 0&&u!=null&&f(t,["generationConfig"],yE(u)),o}function Nw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>Pr(y))),f(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&Cw(u),o}function Aw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&_w(u,o),o}function Mw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["totalTokens"]);s!=null&&f(t,["totalTokens"],s);const r=c(n,["cachedContentTokenCount"]);return r!=null&&f(t,["cachedContentTokenCount"],r),t}function Rw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["totalTokens"]);return s!=null&&f(t,["totalTokens"],s),t}function kw(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Ot(n,s)),o}function Iw(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Ot(n,s)),o}function zw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function Dw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function Lw(n,t){const o={},s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const u=c(n,["numberOfImages"]);t!==void 0&&u!=null&&f(t,["parameters","sampleCount"],u);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&f(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&f(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const S=c(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&f(t,["parameters","includeSafetyAttributes"],S);const w=c(n,["includeRaiReason"]);t!==void 0&&w!=null&&f(t,["parameters","includeRaiReason"],w);const _=c(n,["language"]);t!==void 0&&_!=null&&f(t,["parameters","language"],_);const N=c(n,["outputMimeType"]);t!==void 0&&N!=null&&f(t,["parameters","outputOptions","mimeType"],N);const V=c(n,["outputCompressionQuality"]);t!==void 0&&V!=null&&f(t,["parameters","outputOptions","compressionQuality"],V);const H=c(n,["addWatermark"]);t!==void 0&&H!=null&&f(t,["parameters","addWatermark"],H);const $=c(n,["labels"]);t!==void 0&&$!=null&&f(t,["labels"],$);const re=c(n,["editMode"]);t!==void 0&&re!=null&&f(t,["parameters","editMode"],re);const ue=c(n,["baseSteps"]);return t!==void 0&&ue!=null&&f(t,["parameters","editConfig","baseSteps"],ue),o}function Uw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["referenceImages"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>HE(v))),f(o,["instances[0]","referenceImages"],y)}const h=c(t,["config"]);return h!=null&&Lw(h,o),o}function Pw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Hr(u))),f(t,["generatedImages"],r)}return t}function Hw(n,t){const o={},s=c(n,["taskType"]);t!==void 0&&s!=null&&f(t,["requests[]","taskType"],s);const r=c(n,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(t!==void 0&&u!=null&&f(t,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Gw(n,t){const o={},s=c(n,["taskType"]);t!==void 0&&s!=null&&f(t,["instances[]","task_type"],s);const r=c(n,["title"]);t!==void 0&&r!=null&&f(t,["instances[]","title"],r);const u=c(n,["outputDimensionality"]);t!==void 0&&u!=null&&f(t,["parameters","outputDimensionality"],u);const h=c(n,["mimeType"]);t!==void 0&&h!=null&&f(t,["instances[]","mimeType"],h);const y=c(n,["autoTruncate"]);return t!==void 0&&y!=null&&f(t,["parameters","autoTruncate"],y),o}function Fw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let y=Ed(n,r);Array.isArray(y)&&(y=y.map(v=>v)),f(o,["requests[]","content"],y)}const u=c(t,["config"]);u!=null&&Hw(u,o);const h=c(t,["model"]);return h!==void 0&&f(o,["requests[]","model"],Ot(n,h)),o}function Bw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ed(n,r);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["instances[]","content"],h)}const u=c(t,["config"]);return u!=null&&Gw(u,o),o}function Vw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["embeddings"],u)}const r=c(n,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function Ow(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>Tw(h))),f(t,["embeddings"],u)}const r=c(n,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function jw(n){const t={},o=c(n,["endpoint"]);o!=null&&f(t,["name"],o);const s=c(n,["deployedModelId"]);return s!=null&&f(t,["deployedModelId"],s),t}function qw(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function $w(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Yw(n){const t={},o=c(n,["mode"]);o!=null&&f(t,["mode"],o);const s=c(n,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Jw(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&f(t,["description"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const h=c(n,["response"]);h!=null&&f(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&f(t,["responseJsonSchema"],y),t}function Kw(n,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],Pr(Bn(r)));const u=c(t,["temperature"]);u!=null&&f(s,["temperature"],u);const h=c(t,["topP"]);h!=null&&f(s,["topP"],h);const y=c(t,["topK"]);y!=null&&f(s,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const S=c(t,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const w=c(t,["logprobs"]);w!=null&&f(s,["logprobs"],w);const _=c(t,["presencePenalty"]);_!=null&&f(s,["presencePenalty"],_);const N=c(t,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const V=c(t,["seed"]);V!=null&&f(s,["seed"],V);const H=c(t,["responseMimeType"]);H!=null&&f(s,["responseMimeType"],H);const $=c(t,["responseSchema"]);$!=null&&f(s,["responseSchema"],Cd($));const re=c(t,["responseJsonSchema"]);if(re!=null&&f(s,["responseJsonSchema"],re),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ue=c(t,["safetySettings"]);if(o!==void 0&&ue!=null){let ft=ue;Array.isArray(ft)&&(ft=ft.map(bt=>GE(bt))),f(o,["safetySettings"],ft)}const ge=c(t,["tools"]);if(o!==void 0&&ge!=null){let ft=ns(ge);Array.isArray(ft)&&(ft=ft.map(bt=>$E(ts(bt)))),f(o,["tools"],ft)}const De=c(t,["toolConfig"]);if(o!==void 0&&De!=null&&f(o,["toolConfig"],qE(De)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const He=c(t,["cachedContent"]);o!==void 0&&He!=null&&f(o,["cachedContent"],yo(n,He));const be=c(t,["responseModalities"]);be!=null&&f(s,["responseModalities"],be);const Xe=c(t,["mediaResolution"]);Xe!=null&&f(s,["mediaResolution"],Xe);const Ne=c(t,["speechConfig"]);if(Ne!=null&&f(s,["speechConfig"],_d(Ne)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ke=c(t,["thinkingConfig"]);Ke!=null&&f(s,["thinkingConfig"],Ke);const Ue=c(t,["imageConfig"]);Ue!=null&&f(s,["imageConfig"],TE(Ue));const ot=c(t,["enableEnhancedCivicAnswers"]);return ot!=null&&f(s,["enableEnhancedCivicAnswers"],ot),s}function Xw(n,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],Bn(r));const u=c(t,["temperature"]);u!=null&&f(s,["temperature"],u);const h=c(t,["topP"]);h!=null&&f(s,["topP"],h);const y=c(t,["topK"]);y!=null&&f(s,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const S=c(t,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const w=c(t,["logprobs"]);w!=null&&f(s,["logprobs"],w);const _=c(t,["presencePenalty"]);_!=null&&f(s,["presencePenalty"],_);const N=c(t,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const V=c(t,["seed"]);V!=null&&f(s,["seed"],V);const H=c(t,["responseMimeType"]);H!=null&&f(s,["responseMimeType"],H);const $=c(t,["responseSchema"]);$!=null&&f(s,["responseSchema"],Cd($));const re=c(t,["responseJsonSchema"]);re!=null&&f(s,["responseJsonSchema"],re);const ue=c(t,["routingConfig"]);ue!=null&&f(s,["routingConfig"],ue);const ge=c(t,["modelSelectionConfig"]);ge!=null&&f(s,["modelConfig"],ge);const De=c(t,["safetySettings"]);if(o!==void 0&&De!=null){let B=De;Array.isArray(B)&&(B=B.map(Ce=>Ce)),f(o,["safetySettings"],B)}const He=c(t,["tools"]);if(o!==void 0&&He!=null){let B=ns(He);Array.isArray(B)&&(B=B.map(Ce=>Hg(ts(Ce)))),f(o,["tools"],B)}const be=c(t,["toolConfig"]);o!==void 0&&be!=null&&f(o,["toolConfig"],be);const Xe=c(t,["labels"]);o!==void 0&&Xe!=null&&f(o,["labels"],Xe);const Ne=c(t,["cachedContent"]);o!==void 0&&Ne!=null&&f(o,["cachedContent"],yo(n,Ne));const Ke=c(t,["responseModalities"]);Ke!=null&&f(s,["responseModalities"],Ke);const Ue=c(t,["mediaResolution"]);Ue!=null&&f(s,["mediaResolution"],Ue);const ot=c(t,["speechConfig"]);ot!=null&&f(s,["speechConfig"],_d(ot));const ft=c(t,["audioTimestamp"]);ft!=null&&f(s,["audioTimestamp"],ft);const bt=c(t,["thinkingConfig"]);bt!=null&&f(s,["thinkingConfig"],bt);const Et=c(t,["imageConfig"]);if(Et!=null&&f(s,["imageConfig"],wE(Et)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Fm(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>Pr(y))),f(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&f(o,["generationConfig"],Kw(n,u,o)),o}function Bm(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["contents"],h)}const u=c(t,["config"]);return u!=null&&f(o,["generationConfig"],Xw(n,u,o)),o}function Vm(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>vw(m))),f(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&f(t,["promptFeedback"],u);const h=c(n,["responseId"]);h!=null&&f(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&f(t,["usageMetadata"],y),t}function Om(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(x=>x)),f(t,["candidates"],m)}const r=c(n,["createTime"]);r!=null&&f(t,["createTime"],r);const u=c(n,["modelVersion"]);u!=null&&f(t,["modelVersion"],u);const h=c(n,["promptFeedback"]);h!=null&&f(t,["promptFeedback"],h);const y=c(n,["responseId"]);y!=null&&f(t,["responseId"],y);const v=c(n,["usageMetadata"]);return v!=null&&f(t,["usageMetadata"],v),t}function Qw(n,t){const o={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(n,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(n,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const u=c(n,["guidanceScale"]);if(t!==void 0&&u!=null&&f(t,["parameters","guidanceScale"],u),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=c(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const y=c(n,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const v=c(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&f(t,["parameters","includeSafetyAttributes"],v);const m=c(n,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const x=c(n,["language"]);t!==void 0&&x!=null&&f(t,["parameters","language"],x);const S=c(n,["outputMimeType"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","mimeType"],S);const w=c(n,["outputCompressionQuality"]);if(t!==void 0&&w!=null&&f(t,["parameters","outputOptions","compressionQuality"],w),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=c(n,["imageSize"]);if(t!==void 0&&_!=null&&f(t,["parameters","sampleImageSize"],_),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Zw(n,t){const o={},s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const u=c(n,["numberOfImages"]);t!==void 0&&u!=null&&f(t,["parameters","sampleCount"],u);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&f(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&f(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const S=c(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&f(t,["parameters","includeSafetyAttributes"],S);const w=c(n,["includeRaiReason"]);t!==void 0&&w!=null&&f(t,["parameters","includeRaiReason"],w);const _=c(n,["language"]);t!==void 0&&_!=null&&f(t,["parameters","language"],_);const N=c(n,["outputMimeType"]);t!==void 0&&N!=null&&f(t,["parameters","outputOptions","mimeType"],N);const V=c(n,["outputCompressionQuality"]);t!==void 0&&V!=null&&f(t,["parameters","outputOptions","compressionQuality"],V);const H=c(n,["addWatermark"]);t!==void 0&&H!=null&&f(t,["parameters","addWatermark"],H);const $=c(n,["labels"]);t!==void 0&&$!=null&&f(t,["labels"],$);const re=c(n,["imageSize"]);t!==void 0&&re!=null&&f(t,["parameters","sampleImageSize"],re);const ue=c(n,["enhancePrompt"]);return t!==void 0&&ue!=null&&f(t,["parameters","enhancePrompt"],ue),o}function Ww(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&Qw(u,o),o}function eE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&Zw(u,o),o}function tE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>pE(h))),f(t,["generatedImages"],u)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],Ug(r)),t}function nE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>Hr(h))),f(t,["generatedImages"],u)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],Pg(r)),t}function iE(n,t){const o={},s=c(n,["numberOfVideos"]);if(t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(n,["durationSeconds"]);if(t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(n,["aspectRatio"]);t!==void 0&&u!=null&&f(t,["parameters","aspectRatio"],u);const h=c(n,["resolution"]);t!==void 0&&h!=null&&f(t,["parameters","resolution"],h);const y=c(n,["personGeneration"]);if(t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(n,["negativePrompt"]);t!==void 0&&v!=null&&f(t,["parameters","negativePrompt"],v);const m=c(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=c(n,["lastFrame"]);t!==void 0&&x!=null&&f(t,["instances[0]","lastFrame"],Gr(x));const S=c(n,["referenceImages"]);if(t!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(_=>lC(_))),f(t,["instances[0]","referenceImages"],w)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function oE(n,t){const o={},s=c(n,["numberOfVideos"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(n,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const u=c(n,["fps"]);t!==void 0&&u!=null&&f(t,["parameters","fps"],u);const h=c(n,["durationSeconds"]);t!==void 0&&h!=null&&f(t,["parameters","durationSeconds"],h);const y=c(n,["seed"]);t!==void 0&&y!=null&&f(t,["parameters","seed"],y);const v=c(n,["aspectRatio"]);t!==void 0&&v!=null&&f(t,["parameters","aspectRatio"],v);const m=c(n,["resolution"]);t!==void 0&&m!=null&&f(t,["parameters","resolution"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const S=c(n,["pubsubTopic"]);t!==void 0&&S!=null&&f(t,["parameters","pubsubTopic"],S);const w=c(n,["negativePrompt"]);t!==void 0&&w!=null&&f(t,["parameters","negativePrompt"],w);const _=c(n,["enhancePrompt"]);t!==void 0&&_!=null&&f(t,["parameters","enhancePrompt"],_);const N=c(n,["generateAudio"]);t!==void 0&&N!=null&&f(t,["parameters","generateAudio"],N);const V=c(n,["lastFrame"]);t!==void 0&&V!=null&&f(t,["instances[0]","lastFrame"],Gi(V));const H=c(n,["referenceImages"]);if(t!==void 0&&H!=null){let ue=H;Array.isArray(ue)&&(ue=ue.map(ge=>sC(ge))),f(t,["instances[0]","referenceImages"],ue)}const $=c(n,["mask"]);t!==void 0&&$!=null&&f(t,["instances[0]","mask"],oC($));const re=c(n,["compressionQuality"]);return t!==void 0&&re!=null&&f(t,["parameters","compressionQuality"],re),o}function lE(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response","generateVideoResponse"]);return h!=null&&f(t,["response"],cE(h)),t}function sE(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response"]);return h!=null&&f(t,["response"],uE(h)),t}function aE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&f(o,["instances[0]","image"],Gr(u));const h=c(t,["video"]);h!=null&&f(o,["instances[0]","video"],Gg(h));const y=c(t,["source"]);y!=null&&dE(y,o);const v=c(t,["config"]);return v!=null&&iE(v,o),o}function rE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&f(o,["instances[0]","image"],Gi(u));const h=c(t,["video"]);h!=null&&f(o,["instances[0]","video"],Fg(h));const y=c(t,["source"]);y!=null&&fE(y,o);const v=c(t,["config"]);return v!=null&&oE(v,o),o}function cE(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>mE(h))),f(t,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function uE(n){const t={},o=c(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>gE(h))),f(t,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function dE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Gr(r));const u=c(n,["video"]);return t!==void 0&&u!=null&&f(t,["instances[0]","video"],Gg(u)),o}function fE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Gi(r));const u=c(n,["video"]);return t!==void 0&&u!=null&&f(t,["instances[0]","video"],Fg(u)),o}function pE(n){const t={},o=c(n,["_self"]);o!=null&&f(t,["image"],EE(o));const s=c(n,["raiFilteredReason"]);s!=null&&f(t,["raiFilteredReason"],s);const r=c(n,["_self"]);return r!=null&&f(t,["safetyAttributes"],Ug(r)),t}function Hr(n){const t={},o=c(n,["_self"]);o!=null&&f(t,["image"],Lg(o));const s=c(n,["raiFilteredReason"]);s!=null&&f(t,["raiFilteredReason"],s);const r=c(n,["_self"]);r!=null&&f(t,["safetyAttributes"],Pg(r));const u=c(n,["prompt"]);return u!=null&&f(t,["enhancedPrompt"],u),t}function hE(n){const t={},o=c(n,["_self"]);o!=null&&f(t,["mask"],Lg(o));const s=c(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(t,["labels"],r)}return t}function mE(n){const t={},o=c(n,["video"]);return o!=null&&f(t,["video"],nC(o)),t}function gE(n){const t={},o=c(n,["_self"]);return o!=null&&f(t,["video"],iC(o)),t}function yE(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const s=c(n,["responseJsonSchema"]);s!=null&&f(t,["responseJsonSchema"],s);const r=c(n,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&f(t,["candidateCount"],u);const h=c(n,["enableAffectiveDialog"]);h!=null&&f(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&f(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const S=c(n,["presencePenalty"]);S!=null&&f(t,["presencePenalty"],S);const w=c(n,["responseLogprobs"]);w!=null&&f(t,["responseLogprobs"],w);const _=c(n,["responseMimeType"]);_!=null&&f(t,["responseMimeType"],_);const N=c(n,["responseModalities"]);N!=null&&f(t,["responseModalities"],N);const V=c(n,["responseSchema"]);V!=null&&f(t,["responseSchema"],V);const H=c(n,["routingConfig"]);H!=null&&f(t,["routingConfig"],H);const $=c(n,["seed"]);$!=null&&f(t,["seed"],$);const re=c(n,["speechConfig"]);re!=null&&f(t,["speechConfig"],re);const ue=c(n,["stopSequences"]);ue!=null&&f(t,["stopSequences"],ue);const ge=c(n,["temperature"]);ge!=null&&f(t,["temperature"],ge);const De=c(n,["thinkingConfig"]);De!=null&&f(t,["thinkingConfig"],De);const He=c(n,["topK"]);He!=null&&f(t,["topK"],He);const be=c(n,["topP"]);if(be!=null&&f(t,["topP"],be),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function vE(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Ot(n,s)),o}function xE(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Ot(n,s)),o}function bE(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function SE(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function TE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(n,["imageSize"]);if(s!=null&&f(t,["imageSize"],s),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function wE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(n,["imageSize"]);s!=null&&f(t,["imageSize"],s);const r=c(n,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);const u=c(n,["outputCompressionQuality"]);return u!=null&&f(t,["imageOutputOptions","compressionQuality"],u),t}function EE(n){const t={},o=c(n,["bytesBase64Encoded"]);o!=null&&f(t,["imageBytes"],Jo(o));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Lg(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(t,["imageBytes"],Jo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Gr(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(n,["imageBytes"]);o!=null&&f(t,["bytesBase64Encoded"],Jo(o));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Gi(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const s=c(n,["imageBytes"]);s!=null&&f(t,["bytesBase64Encoded"],Jo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function CE(n,t,o){const s={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const h=c(t,["filter"]);o!==void 0&&h!=null&&f(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&f(o,["_url","models_url"],Ag(n,y)),s}function _E(n,t,o){const s={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const h=c(t,["filter"]);o!==void 0&&h!=null&&f(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&f(o,["_url","models_url"],Ag(n,y)),s}function NE(n,t){const o={},s=c(t,["config"]);return s!=null&&CE(n,s,o),o}function AE(n,t){const o={},s=c(t,["config"]);return s!=null&&_E(n,s,o),o}function ME(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["_self"]);if(r!=null){let u=Mg(r);Array.isArray(u)&&(u=u.map(h=>rd(h))),f(t,["models"],u)}return t}function RE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["_self"]);if(r!=null){let u=Mg(r);Array.isArray(u)&&(u=u.map(h=>cd(h))),f(t,["models"],u)}return t}function kE(n){const t={},o=c(n,["maskMode"]);o!=null&&f(t,["maskMode"],o);const s=c(n,["segmentationClasses"]);s!=null&&f(t,["maskClasses"],s);const r=c(n,["maskDilation"]);return r!=null&&f(t,["dilation"],r),t}function rd(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);r!=null&&f(t,["description"],r);const u=c(n,["version"]);u!=null&&f(t,["version"],u);const h=c(n,["_self"]);h!=null&&f(t,["tunedModelInfo"],YE(h));const y=c(n,["inputTokenLimit"]);y!=null&&f(t,["inputTokenLimit"],y);const v=c(n,["outputTokenLimit"]);v!=null&&f(t,["outputTokenLimit"],v);const m=c(n,["supportedGenerationMethods"]);m!=null&&f(t,["supportedActions"],m);const x=c(n,["temperature"]);x!=null&&f(t,["temperature"],x);const S=c(n,["maxTemperature"]);S!=null&&f(t,["maxTemperature"],S);const w=c(n,["topP"]);w!=null&&f(t,["topP"],w);const _=c(n,["topK"]);_!=null&&f(t,["topK"],_);const N=c(n,["thinking"]);return N!=null&&f(t,["thinking"],N),t}function cd(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);r!=null&&f(t,["description"],r);const u=c(n,["versionId"]);u!=null&&f(t,["version"],u);const h=c(n,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(w=>jw(w))),f(t,["endpoints"],S)}const y=c(n,["labels"]);y!=null&&f(t,["labels"],y);const v=c(n,["_self"]);v!=null&&f(t,["tunedModelInfo"],JE(v));const m=c(n,["defaultCheckpointId"]);m!=null&&f(t,["defaultCheckpointId"],m);const x=c(n,["checkpoints"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(w=>w)),f(t,["checkpoints"],S)}return t}function IE(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(t,["fileData"],qw(u));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],$w(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],yw(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const S=c(n,["thoughtSignature"]);S!=null&&f(t,["thoughtSignature"],S);const w=c(n,["videoMetadata"]);return w!=null&&f(t,["videoMetadata"],w),t}function zE(n){const t={},o=c(n,["productImage"]);return o!=null&&f(t,["image"],Gi(o)),t}function DE(n,t){const o={},s=c(n,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(n,["baseSteps"]);t!==void 0&&r!=null&&f(t,["parameters","baseSteps"],r);const u=c(n,["outputGcsUri"]);t!==void 0&&u!=null&&f(t,["parameters","storageUri"],u);const h=c(n,["seed"]);t!==void 0&&h!=null&&f(t,["parameters","seed"],h);const y=c(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&f(t,["parameters","safetySetting"],y);const v=c(n,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const m=c(n,["addWatermark"]);t!==void 0&&m!=null&&f(t,["parameters","addWatermark"],m);const x=c(n,["outputMimeType"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","mimeType"],x);const S=c(n,["outputCompressionQuality"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S);const w=c(n,["enhancePrompt"]);t!==void 0&&w!=null&&f(t,["parameters","enhancePrompt"],w);const _=c(n,["labels"]);return t!==void 0&&_!=null&&f(t,["labels"],_),o}function LE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["source"]);r!=null&&PE(r,o);const u=c(t,["config"]);return u!=null&&DE(u,o),o}function UE(n){const t={},o=c(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Hr(r))),f(t,["generatedImages"],s)}return t}function PE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["personImage"]);t!==void 0&&r!=null&&f(t,["instances[0]","personImage","image"],Gi(r));const u=c(n,["productImages"]);if(t!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>zE(y))),f(t,["instances[0]","productImages"],h)}return o}function HE(n){const t={},o=c(n,["referenceImage"]);o!=null&&f(t,["referenceImage"],Gi(o));const s=c(n,["referenceId"]);s!=null&&f(t,["referenceId"],s);const r=c(n,["referenceType"]);r!=null&&f(t,["referenceType"],r);const u=c(n,["maskImageConfig"]);u!=null&&f(t,["maskImageConfig"],kE(u));const h=c(n,["controlImageConfig"]);h!=null&&f(t,["controlImageConfig"],Ew(h));const y=c(n,["styleImageConfig"]);y!=null&&f(t,["styleImageConfig"],y);const v=c(n,["subjectImageConfig"]);return v!=null&&f(t,["subjectImageConfig"],v),t}function Ug(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const s=c(n,["safetyAttributes","scores"]);s!=null&&f(t,["scores"],s);const r=c(n,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function Pg(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const s=c(n,["safetyAttributes","scores"]);s!=null&&f(t,["scores"],s);const r=c(n,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function GE(n){const t={},o=c(n,["category"]);if(o!=null&&f(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(n,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function FE(n){const t={},o=c(n,["image"]);return o!=null&&f(t,["image"],Gi(o)),t}function BE(n,t){const o={},s=c(n,["mode"]);t!==void 0&&s!=null&&f(t,["parameters","mode"],s);const r=c(n,["maxPredictions"]);t!==void 0&&r!=null&&f(t,["parameters","maxPredictions"],r);const u=c(n,["confidenceThreshold"]);t!==void 0&&u!=null&&f(t,["parameters","confidenceThreshold"],u);const h=c(n,["maskDilation"]);t!==void 0&&h!=null&&f(t,["parameters","maskDilation"],h);const y=c(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&f(t,["parameters","binaryColorThreshold"],y);const v=c(n,["labels"]);return t!==void 0&&v!=null&&f(t,["labels"],v),o}function VE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["source"]);r!=null&&jE(r,o);const u=c(t,["config"]);return u!=null&&BE(u,o),o}function OE(n){const t={},o=c(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>hE(r))),f(t,["generatedMasks"],s)}return t}function jE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Gi(r));const u=c(n,["scribbleImage"]);return t!==void 0&&u!=null&&f(t,["instances[0]","scribble"],FE(u)),o}function qE(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],Yw(o));const s=c(n,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function $E(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],bE(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],SE(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function Hg(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(w=>Jw(w))),f(t,["functionDeclarations"],S)}const s=c(n,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(n,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(n,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&f(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&f(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function YE(n){const t={},o=c(n,["baseModel"]);o!=null&&f(t,["baseModel"],o);const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const r=c(n,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function JE(n){const t={},o=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(t,["baseModel"],o);const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const r=c(n,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function KE(n,t){const o={},s=c(n,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const u=c(n,["defaultCheckpointId"]);return t!==void 0&&u!=null&&f(t,["defaultCheckpointId"],u),o}function XE(n,t){const o={},s=c(n,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const u=c(n,["defaultCheckpointId"]);return t!==void 0&&u!=null&&f(t,["defaultCheckpointId"],u),o}function QE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","name"],Ot(n,s));const r=c(t,["config"]);return r!=null&&KE(r,o),o}function ZE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["config"]);return r!=null&&XE(r,o),o}function WE(n,t){const o={},s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const u=c(n,["personGeneration"]);t!==void 0&&u!=null&&f(t,["parameters","personGeneration"],u);const h=c(n,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const y=c(n,["outputMimeType"]);t!==void 0&&y!=null&&f(t,["parameters","outputOptions","mimeType"],y);const v=c(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","compressionQuality"],v);const m=c(n,["enhanceInputImage"]);t!==void 0&&m!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=c(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const S=c(n,["labels"]);t!==void 0&&S!=null&&f(t,["labels"],S);const w=c(n,["numberOfImages"]);t!==void 0&&w!=null&&f(t,["parameters","sampleCount"],w);const _=c(n,["mode"]);return t!==void 0&&_!=null&&f(t,["parameters","mode"],_),o}function eC(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Ot(n,s));const r=c(t,["image"]);r!=null&&f(o,["instances[0]","image"],Gi(r));const u=c(t,["upscaleFactor"]);u!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],u);const h=c(t,["config"]);return h!=null&&WE(h,o),o}function tC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Hr(u))),f(t,["generatedImages"],r)}return t}function nC(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["uri"],o);const s=c(n,["encodedVideo"]);s!=null&&f(t,["videoBytes"],Jo(s));const r=c(n,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function iC(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["uri"],o);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(t,["videoBytes"],Jo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function oC(n){const t={},o=c(n,["image"]);o!=null&&f(t,["_self"],Gi(o));const s=c(n,["maskMode"]);return s!=null&&f(t,["maskMode"],s),t}function lC(n){const t={},o=c(n,["image"]);o!=null&&f(t,["image"],Gr(o));const s=c(n,["referenceType"]);return s!=null&&f(t,["referenceType"],s),t}function sC(n){const t={},o=c(n,["image"]);o!=null&&f(t,["image"],Gi(o));const s=c(n,["referenceType"]);return s!=null&&f(t,["referenceType"],s),t}function Gg(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["uri"],o);const s=c(n,["videoBytes"]);s!=null&&f(t,["encodedVideo"],Jo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["encoding"],r),t}function Fg(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["gcsUri"],o);const s=c(n,["videoBytes"]);s!=null&&f(t,["bytesBase64Encoded"],Jo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function aC(n,t){const o={},s=c(n,["displayName"]);return t!==void 0&&s!=null&&f(t,["displayName"],s),o}function rC(n){const t={},o=c(n,["config"]);return o!=null&&aC(o,t),t}function cC(n,t){const o={},s=c(n,["force"]);return t!==void 0&&s!=null&&f(t,["_query","force"],s),o}function uC(n){const t={},o=c(n,["name"]);o!=null&&f(t,["_url","name"],o);const s=c(n,["config"]);return s!=null&&cC(s,t),t}function dC(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","name"],o),t}function fC(n,t){const o={},s=c(n,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["customMetadata"],u)}const r=c(n,["chunkingConfig"]);return t!==void 0&&r!=null&&f(t,["chunkingConfig"],r),o}function pC(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const u=c(n,["error"]);u!=null&&f(t,["error"],u);const h=c(n,["response"]);return h!=null&&f(t,["response"],mC(h)),t}function hC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const s=c(n,["fileName"]);s!=null&&f(t,["fileName"],s);const r=c(n,["config"]);return r!=null&&fC(r,t),t}function mC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["parent"]);s!=null&&f(t,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function gC(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function yC(n){const t={},o=c(n,["config"]);return o!=null&&gC(o,t),t}function vC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["fileSearchStores"],u)}return t}function Bg(n,t){const o={},s=c(n,["mimeType"]);t!==void 0&&s!=null&&f(t,["mimeType"],s);const r=c(n,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const u=c(n,["customMetadata"]);if(t!==void 0&&u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>v)),f(t,["customMetadata"],y)}const h=c(n,["chunkingConfig"]);return t!==void 0&&h!=null&&f(t,["chunkingConfig"],h),o}function xC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const s=c(n,["config"]);return s!=null&&Bg(s,t),t}function bC(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}const SC="Content-Type",TC="X-Server-Timeout",wC="User-Agent",ud="x-goog-api-client",EC="1.34.0",CC=`google-genai-sdk/${EC}`,_C="v1beta1",NC="v1beta";class AC{constructor(t){var o,s;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_C,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:NC,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(o))typeof u=="object"?s[r]=Object.assign(Object.assign({},s[r]),u):u!==void 0&&(s[r]=u);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const u=new AbortController,h=u.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>u.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),t.signal=h}return o&&o.extraBody!==null&&MC(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await jm(r),new ld(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await jm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Pi(this,arguments,function*(){var s;const r=(s=t?.body)===null||s===void 0?void 0:s.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield St(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const S=u.decode(x,{stream:!0});try{const N=JSON.parse(S);if("error"in N){const V=JSON.parse(JSON.stringify(N.error)),H=V.status,$=V.code,re=`got status: ${H}. ${JSON.stringify(N)}`;if($>=400&&$<600)throw new Ur({message:re,status:$})}}catch(N){if(N.name==="ApiError")throw N}h+=S;let w=-1,_=0;for(;;){w=-1,_=0;for(const H of v){const $=h.indexOf(H);$!==-1&&(w===-1||$<w)&&(w=$,_=H.length)}if(w===-1)break;const N=h.substring(0,w);h=h.substring(w+_);const V=N.trim();if(V.startsWith(y)){const H=V.substring(y.length).trim();try{const $=new Response(H,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield St(new ld($))}catch($){throw new Error(`exception parsing stream chunk ${H}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=CC+" "+this.clientOptions.userAgentExtra;return t[wC]=o,t[ud]=o,t[SC]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,u]of Object.entries(t.headers))s.append(r,u);t.timeout&&t.timeout>0&&s.append(TC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,h=await u.stat(t);r.sizeBytes=String(h.size);const y=(s=o?.mimeType)!==null&&s!==void 0?s:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=$e("upload/v1beta/files",v._url),S=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return u.upload(t,S,this)}async uploadFileToFileSearchStore(t,o,s){var r;const u=this.clientOptions.uploader,h=await u.stat(o),y=String(h.size),v=(r=s?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),S={};s!=null&&Bg(s,S);const w=await this.fetchUploadUrl(m,y,v,x,S,s?.httpOptions);return u.uploadToFileSearchStore(o,w,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,u,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(u),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function jm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let s;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new Ur({message:r,status:o}):new Error(r)}}function MC(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,h){const y=Object.assign({},u);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=s(o,t);n.body=JSON.stringify(r)}const RC="mcp_used/unknown";let kC=!1;function Vg(n){for(const t of n)if(IC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return kC}function Og(n){var t;const o=(t=n[ud])!==null&&t!==void 0?t:"";n[ud]=(o+` ${RC}`).trimStart()}function IC(n){return n!==null&&typeof n=="object"&&n instanceof Ad}function zC(n){return Pi(this,arguments,function*(o,s=100){let r,u=0;for(;u<s;){const h=yield St(o.listTools({cursor:r}));for(const y of h.tools)yield yield St(y),u++;if(!h.nextCursor)break;r=h.nextCursor}})}class Ad{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new Ad(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const u={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,Hi(zC(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const S=r;h.push(S);const w=S.name;if(u[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);u[w]=x}}catch(S){o={error:S}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),dS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const h=await r.callTool({name:s.name,arguments:s.args},void 0,u);o.push({functionResponse:{name:s.name,response:h.isError?{error:h}:h}})}return o}}async function DC(n,t,o){const s=new iS;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class LC{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),h=HC(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(ue=>{m=ue}),S=t.callbacks,w=function(){m({})},_=this.apiClient,N={onopen:w,onmessage:ue=>{DC(_,S.onmessage,ue)},onerror:(o=S?.onerror)!==null&&o!==void 0?o:function(ue){},onclose:(s=S?.onclose)!==null&&s!==void 0?s:function(ue){}},V=this.webSocketFactory.create(v,PC(h),N);V.connect(),await x;const re={setup:{model:Ot(this.apiClient,t.model)}};return V.send(JSON.stringify(re)),new UC(V,this.apiClient)}}class UC{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=rw(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=aw(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Kl.PLAY)}pause(){this.sendPlaybackControl(Kl.PAUSE)}stop(){this.sendPlaybackControl(Kl.STOP)}resetContext(){this.sendPlaybackControl(Kl.RESET_CONTEXT)}close(){this.conn.close()}}function PC(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function HC(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const GC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FC(n,t,o){const s=new nS;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const u=JSON.parse(r);if(n.isVertexAI()){const h=dw(u);Object.assign(s,h)}else Object.assign(s,u);t(s)}class BC{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new LC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,u,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const S=this.apiClient.getHeaders();t.config&&t.config.tools&&Vg(t.config.tools)&&Og(S);const w=qC(S);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,x);else{const Ne=this.apiClient.getApiKey();let Ke="BidiGenerateContent",Ue="key";Ne?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ke="BidiGenerateContentConstrained",Ue="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Ke}?${Ue}=${Ne}`}let _=()=>{};const N=new Promise(Ne=>{_=Ne}),V=t.callbacks,H=function(){var Ne;(Ne=V?.onopen)===null||Ne===void 0||Ne.call(V),_({})},$=this.apiClient,re={onopen:H,onmessage:Ne=>{FC($,V.onmessage,Ne)},onerror:(o=V?.onerror)!==null&&o!==void 0?o:function(Ne){},onclose:(s=V?.onclose)!==null&&s!==void 0?s:function(Ne){}},ue=this.webSocketFactory.create(x,jC(w),re);ue.connect(),await N;let ge=Ot(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&ge.startsWith("publishers/")){const Ne=this.apiClient.getProject(),Ke=this.apiClient.getLocation();ge=`projects/${Ne}/locations/${Ke}/`+ge}let De={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ar.AUDIO]}:t.config.responseModalities=[Ar.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const He=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],be=[];for(const Ne of He)if(this.isCallableTool(Ne)){const Ke=Ne;be.push(await Ke.tool())}else be.push(Ne);be.length>0&&(t.config.tools=be);const Xe={model:ge,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?De=sw(this.apiClient,Xe):De=lw(this.apiClient,Xe),delete De.config,ue.send(JSON.stringify(De)),new OC(ue,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const VC={turnComplete:!0};class OC{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=Ai(o.turns),t.isVertexAI()||(s=s.map(r=>Pr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(GC)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},VC),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:uw(t)}:o={realtimeInput:cw(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function jC(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function qC(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const qm=10;function $m(n){var t,o,s;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if(es(h)){r=!0;break}if(!r)return!0;const u=(s=n?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function es(n){return"callTool"in n&&typeof n.callTool=="function"}function $C(n){var t,o,s;return(s=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>es(r)))!==null&&s!==void 0?s:!1}function Ym(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((s,r)=>{if(es(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(r)}),o}function Jm(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class YC extends go{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,u,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!$C(o)||$m(o.config))return await this.generateContentInternal(v);const m=Ym(o);if(m.length>0){const V=m.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let x,S;const w=Ai(v.contents),_=(u=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:qm;let N=0;for(;N<_&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const V=x.candidates[0].content,H=[];for(const $ of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if(es($)){const ue=await $.callTool(x.functionCalls);H.push(...ue)}N++,S={role:"user",parts:H},v.contents=Ai(v.contents),v.contents.push(V),v.contents.push(S),Jm(v.config)&&(w.push(V),w.push(S))}return Jm(v.config)&&(x.automaticFunctionCallingHistory=w),x},this.generateContentStream=async o=>{var s,r,u,h,y;if(this.maybeMoveToResponseJsonSchem(o),$m(o.config)){const S=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(S)}const v=Ym(o);if(v.length>0){const S=v.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(r=(s=o?.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let u;const h=[];if(s?.generatedImages)for(const v of s.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=v?.safetyAttributes:h.push(v);let y;return u?y={generatedImages:h,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:s.sdkHttpResponse},y}),this.list=async o=>{var s;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((s=h.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new pl(mo.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,u,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(u=o.source)===null||u===void 0?void 0:u.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const u=(o=t.config)===null||o===void 0?void 0:o.tools;if(!u)return t;const h=await Promise.all(u.map(async v=>es(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&Vg(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Og(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,s,r;const u=new Map;for(const h of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(es(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,y)}}return u}async processAfcStream(t){var o,s,r;const u=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:qm;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,S){return Pi(this,arguments,function*(){for(var w,_,N,V,H,$;y<u;){h&&(y++,h=!1);const De=yield St(m.processParamsMaybeAddMcpUsage(S)),He=yield St(m.generateContentStreamInternal(De)),be=[],Xe=[];try{for(var re=!0,ue=(_=void 0,Hi(He)),ge;ge=yield St(ue.next()),w=ge.done,!w;re=!0){V=ge.value,re=!1;const Ne=V;if(yield yield St(Ne),Ne.candidates&&(!((H=Ne.candidates[0])===null||H===void 0)&&H.content)){Xe.push(Ne.candidates[0].content);for(const Ke of($=Ne.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(y<u&&Ke.functionCall){if(!Ke.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Ke.functionCall.name)){const Ue=yield St(x.get(Ke.functionCall.name).callTool([Ke.functionCall]));be.push(...Ue)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Ke.functionCall.name}`)}}}}catch(Ne){_={error:Ne}}finally{try{!re&&!w&&(N=ue.return)&&(yield St(N.call(ue)))}finally{if(_)throw _.error}}if(be.length>0){h=!0;const Ne=new js;Ne.candidates=[{content:{role:"user",parts:be}}],yield yield St(Ne);const Ke=[];Ke.push(...Xe),Ke.push({role:"user",parts:be});const Ue=Ai(S.contents).concat(Ke);S.contents=Ue}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Bm(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Om(x),w=new js;return Object.assign(w,S),w})}else{const m=Fm(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Vm(x),w=new js;return Object.assign(w,S),w})}}async generateContentStreamInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Bm(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),h.then(function(S){return Pi(this,arguments,function*(){var w,_,N,V;try{for(var H=!0,$=Hi(S),re;re=yield St($.next()),w=re.done,!w;H=!0){V=re.value,H=!1;const ue=V,ge=Om(yield St(ue.json()));ge.sdkHttpResponse={headers:ue.headers};const De=new js;Object.assign(De,ge),yield yield St(De)}}catch(ue){_={error:ue}}finally{try{!H&&!w&&(N=$.return)&&(yield St(N.call($)))}finally{if(_)throw _.error}}})})}else{const m=Fm(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),h.then(function(S){return Pi(this,arguments,function*(){var w,_,N,V;try{for(var H=!0,$=Hi(S),re;re=yield St($.next()),w=re.done,!w;H=!0){V=re.value,H=!1;const ue=V,ge=Vm(yield St(ue.json()));ge.sdkHttpResponse={headers:ue.headers};const De=new js;Object.assign(De,ge),yield yield St(De)}}catch(ue){_={error:ue}}finally{try{!H&&!w&&(N=$.return)&&(yield St(N.call($)))}finally{if(_)throw _.error}}})})}}async embedContent(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Bw(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Ow(x),w=new wm;return Object.assign(w,S),w})}else{const m=Fw(this.apiClient,t);return y=$e("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Vw(x),w=new wm;return Object.assign(w,S),w})}}async generateImagesInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eE(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=nE(x),w=new Em;return Object.assign(w,S),w})}else{const m=Ww(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=tE(x),w=new Em;return Object.assign(w,S),w})}}async editImageInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=Uw(this.apiClient,t);return u=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=Pw(v),x=new q1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=eC(this.apiClient,t);return u=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=tC(v),x=new $1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=LE(this.apiClient,t);return u=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=UE(v),x=new Y1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=VE(this.apiClient,t);return u=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=OE(v),x=new J1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>cd(x))}else{const m=vE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>rd(x))}}async listInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=AE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=RE(x),w=new Cm;return Object.assign(w,S),w})}else{const m=NE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=ME(x),w=new Cm;return Object.assign(w,S),w})}}async update(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ZE(this.apiClient,t);return y=$e("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>cd(x))}else{const m=QE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>rd(x))}}async delete(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Iw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Dw(x),w=new _m;return Object.assign(w,S),w})}else{const m=kw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=zw(x),w=new _m;return Object.assign(w,S),w})}}async countTokens(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Aw(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Rw(x),w=new Nm;return Object.assign(w,S),w})}else{const m=Nw(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=Mw(x),w=new Nm;return Object.assign(w,S),w})}}async computeTokens(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=bw(this.apiClient,t);return u=$e("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=Sw(v),x=new K1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=rE(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>{const S=sE(x),w=new Mr;return Object.assign(w,S),w})}else{const m=aE(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h.then(x=>{const S=lE(x),w=new Mr;return Object.assign(w,S),w})}}}class JC extends go{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=G1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h}else{const m=H1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=k1(t);return u=$e("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function KC(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function XC(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>l_(u))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function QC(n,t,o){const s={},r=c(t,["expireTime"]);o!==void 0&&r!=null&&f(o,["expireTime"],r);const u=c(t,["newSessionExpireTime"]);o!==void 0&&u!=null&&f(o,["newSessionExpireTime"],u);const h=c(t,["uses"]);o!==void 0&&h!=null&&f(o,["uses"],h);const y=c(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&f(o,["bidiGenerateContentSetup"],o_(n,y));const v=c(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&f(o,["fieldMask"],v),s}function ZC(n,t){const o={},s=c(t,["config"]);return s!=null&&f(o,["config"],QC(n,s,o)),o}function WC(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function e_(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function t_(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function n_(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function i_(n,t){const o={},s=c(n,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],s);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const h=c(n,["topP"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const S=c(n,["speechConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","speechConfig"],Nd(S));const w=c(n,["thinkingConfig"]);t!==void 0&&w!=null&&f(t,["setup","generationConfig","thinkingConfig"],w);const _=c(n,["enableAffectiveDialog"]);t!==void 0&&_!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],_);const N=c(n,["systemInstruction"]);t!==void 0&&N!=null&&f(t,["setup","systemInstruction"],XC(Bn(N)));const V=c(n,["tools"]);if(t!==void 0&&V!=null){let He=ns(V);Array.isArray(He)&&(He=He.map(be=>a_(ts(be)))),f(t,["setup","tools"],He)}const H=c(n,["sessionResumption"]);t!==void 0&&H!=null&&f(t,["setup","sessionResumption"],s_(H));const $=c(n,["inputAudioTranscription"]);t!==void 0&&$!=null&&f(t,["setup","inputAudioTranscription"],$);const re=c(n,["outputAudioTranscription"]);t!==void 0&&re!=null&&f(t,["setup","outputAudioTranscription"],re);const ue=c(n,["realtimeInputConfig"]);t!==void 0&&ue!=null&&f(t,["setup","realtimeInputConfig"],ue);const ge=c(n,["contextWindowCompression"]);t!==void 0&&ge!=null&&f(t,["setup","contextWindowCompression"],ge);const De=c(n,["proactivity"]);if(t!==void 0&&De!=null&&f(t,["setup","proactivity"],De),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function o_(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Ot(n,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],i_(r,o)),o}function l_(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(t,["fileData"],WC(u));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],e_(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],KC(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const S=c(n,["thoughtSignature"]);S!=null&&f(t,["thoughtSignature"],S);const w=c(n,["videoMetadata"]);return w!=null&&f(t,["videoMetadata"],w),t}function s_(n){const t={},o=c(n,["handle"]);if(o!=null&&f(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function a_(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(n,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],t_(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],n_(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function r_(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const s=n[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(u=>`${o}.${u}`);t.push(...r)}else t.push(o)}return t.join(",")}function c_(n,t){let o=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,o=u):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const u=r_(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)u?n.fieldMask=u:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];u&&v.push(u),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class u_ extends go{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=ZC(this.apiClient,t);u=$e("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=c_(y,t.config);return r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function d_(n,t){const o={},s=c(n,["force"]);return t!==void 0&&s!=null&&f(t,["_query","force"],s),o}function f_(n){const t={},o=c(n,["name"]);o!=null&&f(t,["_url","name"],o);const s=c(n,["config"]);return s!=null&&d_(s,t),t}function p_(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","name"],o),t}function h_(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function m_(n){const t={},o=c(n,["parent"]);o!=null&&f(t,["_url","parent"],o);const s=c(n,["config"]);return s!=null&&h_(s,t),t}function g_(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(t,["documents"],u)}return t}class y_ extends go{constructor(t){super(),this.apiClient=t,this.list=async o=>new pl(mo.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=p_(t);return u=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=f_(t);r=$e("{name}",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=m_(t);return u=$e("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=g_(v),x=new X1;return Object.assign(x,m),x})}}}class v_ extends go{constructor(t,o=new y_(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new pl(mo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=rC(t);return u=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=dC(t);return u=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uC(t);r=$e("{name}",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=yC(t);return u=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=vC(v),x=new Q1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=xC(t);return u=$e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=bC(v),x=new Z1;return Object.assign(x,m),x})}}async importFile(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=hC(t);return u=$e("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=pC(v),x=new Td;return Object.assign(x,m),x})}}}let jg=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return jg=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const x_=()=>jg();function dd(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const fd=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Mi extends Error{}class Kn extends Mi{constructor(t,o,s,r){super(`${Kn.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Fr({message:s,cause:fd(o)});const u=o;return t===400?new $g(t,u,s,r):t===401?new Yg(t,u,s,r):t===403?new Jg(t,u,s,r):t===404?new Kg(t,u,s,r):t===409?new Xg(t,u,s,r):t===422?new Qg(t,u,s,r):t===429?new Zg(t,u,s,r):t>=500?new Wg(t,u,s,r):new Kn(t,u,s,r)}}class pd extends Kn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Fr extends Kn{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class qg extends Fr{constructor({message:t}={}){super({message:t??"Request timed out."})}}class $g extends Kn{}class Yg extends Kn{}class Jg extends Kn{}class Kg extends Kn{}class Xg extends Kn{}class Qg extends Kn{}class Zg extends Kn{}class Wg extends Kn{}const b_=/^[a-z][a-z0-9+.-]*:/i,S_=n=>b_.test(n);let hd=n=>(hd=Array.isArray,hd(n));const T_=hd;let w_=T_;const Km=w_;function E_(n){if(!n)return!0;for(const t in n)return!1;return!0}function C_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const __=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Mi(`${n} must be an integer`);if(t<0)throw new Mi(`${n} must be a positive integer`);return t},N_=n=>{try{return JSON.parse(n)}catch{return}};const A_=n=>new Promise(t=>setTimeout(t,n));const $l="0.0.1";function M_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const R_=()=>{var n,t,o,s,r;const u=M_();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$l,"X-Stainless-OS":Qm(Deno.build.os),"X-Stainless-Arch":Xm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$l,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$l,"X-Stainless-OS":Qm((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Xm((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=k_();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$l,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$l,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function k_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,u=s[2]||0,h=s[3]||0;return{browser:t,version:`${r}.${u}.${h}`}}}return null}const Xm=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Qm=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let fr;const I_=()=>fr??(fr=R_());function z_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ey(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function D_(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return ey({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function ty(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function L_(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}const U_=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const ny=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yu(n,t,o){return ny(),new File(n,t??"unknown_file",o)}function P_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const H_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const iy=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",G_=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&iy(n),F_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function B_(n,t,o){if(ny(),n=await n,G_(n))return n instanceof File?n:Yu([await n.arrayBuffer()],n.name);if(F_(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),Yu(await md(r),t,o)}const s=await md(n);if(t||(t=P_(n)),!o?.type){const r=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return Yu(s,t,o)}async function md(n){var t,o,s,r,u;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(iy(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(H_(n))try{for(var y=!0,v=Hi(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await md(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const x=(u=n?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${V_(n)}`)}return h}function V_(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class oy{constructor(t){this._client=t}}oy._key=[];function ly(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Zm=Object.freeze(Object.create(null)),O_=(n=ly)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const u=[],h=o.reduce((x,S,w)=>{var _,N,V;/[?#]/.test(S)&&(r=!0);const H=s[w];let $=(r?encodeURIComponent:n)(""+H);return w!==s.length&&(H==null||typeof H=="object"&&H.toString===((V=Object.getPrototypeOf((N=Object.getPrototypeOf((_=H.hasOwnProperty)!==null&&_!==void 0?_:Zm))!==null&&N!==void 0?N:Zm))===null||V===void 0?void 0:V.toString))&&($=H+"",u.push({start:x.length+S.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(H).slice(8,-1)} is not a valid path parameter`})),x+S+(w===s.length?"":$)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((x,S)=>x.start-S.start),u.length>0){let x=0;const S=u.reduce((w,_)=>{const N=" ".repeat(_.start-x),V="^".repeat(_.length);return x=_.start+_.length,w+N+V},"");throw new Mi(`Path parameters result in path with invalid segments:
${u.map(w=>w.error).join(`
`)}
${h}
${S}`)}return h}),pr=O_(ly);class sy extends oy{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,u=kr(t,["api_version"]);if("model"in u&&"agent_config"in u)throw new Mi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new Mi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(pr`/${r}/interactions`,Object.assign(Object.assign({body:u},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(pr`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(pr`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const u=o??{},{api_version:h=this._client.apiVersion}=u,y=kr(u,["api_version"]);return this._client.get(pr`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},s),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}sy._key=Object.freeze(["interactions"]);class ay extends sy{}function j_(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of n)o.set(r,s),s+=r.length;return o}let hr;function Md(n){let t;return(hr??(t=new globalThis.TextEncoder,hr=t.encode.bind(t)))(n)}let mr;function Wm(n){let t;return(mr??(t=new globalThis.TextDecoder,mr=t.decode.bind(t)))(n)}class Br{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Md(t):t;this.buffer=j_([this.buffer,o]);const s=[];let r;for(;(r=q_(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Wm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=Wm(this.buffer.subarray(0,u));s.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Br.NEWLINE_CHARS=new Set([`
`,"\r"]);Br.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function q_(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function $_(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const Ir={off:0,error:200,warn:300,info:400,debug:500},eg=(n,t,o)=>{if(n){if(C_(Ir,n))return n;Jn(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ir))}`)}};function Qs(){}function gr(n,t,o){return!t||Ir[n]>Ir[o]?Qs:t[n].bind(t)}const Y_={error:Qs,warn:Qs,info:Qs,debug:Qs};let tg=new WeakMap;function Jn(n){var t;const o=n.logger,s=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return Y_;const r=tg.get(o);if(r&&r[0]===s)return r[1];const u={error:gr("error",o,s),warn:gr("warn",o,s),info:gr("info",o,s),debug:gr("debug",o,s)};return tg.set(o,[s,u]),u}const fl=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Xl{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const u=s?Jn(s):console;function h(){return Pi(this,arguments,function*(){var v,m,x,S;if(r)throw new Mi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let w=!1;try{try{for(var _=!0,N=Hi(J_(t,o)),V;V=yield St(N.next()),v=V.done,!v;_=!0){S=V.value,_=!1;const H=S;if(!w)if(H.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield St(JSON.parse(H.data))}catch($){throw u.error("Could not parse message into JSON:",H.data),u.error("From chunk:",H.raw),$}}}catch(H){m={error:H}}finally{try{!_&&!v&&(x=N.return)&&(yield St(x.call(N)))}finally{if(m)throw m.error}}w=!0}catch(H){if(dd(H))return yield St(void 0);throw H}finally{w||o.abort()}})}return new Xl(h,o,s)}static fromReadableStream(t,o,s){let r=!1;function u(){return Pi(this,arguments,function*(){var v,m,x,S;const w=new Br,_=ty(t);try{for(var N=!0,V=Hi(_),H;H=yield St(V.next()),v=H.done,!v;N=!0){S=H.value,N=!1;const $=S;for(const re of w.decode($))yield yield St(re)}}catch($){m={error:$}}finally{try{!N&&!v&&(x=V.return)&&(yield St(x.call(V)))}finally{if(m)throw m.error}}for(const $ of w.flush())yield yield St($)})}function h(){return Pi(this,arguments,function*(){var v,m,x,S;if(r)throw new Mi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let w=!1;try{try{for(var _=!0,N=Hi(u()),V;V=yield St(N.next()),v=V.done,!v;_=!0){S=V.value,_=!1;const H=S;w||H&&(yield yield St(JSON.parse(H)))}}catch(H){m={error:H}}finally{try{!_&&!v&&(x=N.return)&&(yield St(x.call(N)))}finally{if(m)throw m.error}}w=!0}catch(H){if(dd(H))return yield St(void 0);throw H}finally{w||o.abort()}})}return new Xl(h,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=u=>({next:()=>{if(u.length===0){const h=s.next();t.push(h),o.push(h)}return u.shift()}});return[new Xl(()=>r(t),this.controller,this.client),new Xl(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return ey({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:u}=await o.next();if(u)return s.close();const h=Md(JSON.stringify(r)+`
`);s.enqueue(h)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function J_(n,t){return Pi(this,arguments,function*(){var s,r,u,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Mi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Mi("Attempted to iterate over a response with no body");const y=new X_,v=new Br,m=ty(n.body);try{for(var x=!0,S=Hi(K_(m)),w;w=yield St(S.next()),s=w.done,!s;x=!0){h=w.value,x=!1;const _=h;for(const N of v.decode(_)){const V=y.decode(N);V&&(yield yield St(V))}}}catch(_){r={error:_}}finally{try{!x&&!s&&(u=S.return)&&(yield St(u.call(S)))}finally{if(r)throw r.error}}for(const _ of v.flush()){const N=y.decode(_);N&&(yield yield St(N))}})}function K_(n){return Pi(this,arguments,function*(){var o,s,r,u;let h=new Uint8Array;try{for(var y=!0,v=Hi(n),m;m=yield St(v.next()),o=m.done,!o;y=!0){u=m.value,y=!1;const x=u;if(x==null)continue;const S=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?Md(x):x;let w=new Uint8Array(h.length+S.length);w.set(h),w.set(S,h.length),h=w;let _;for(;(_=$_(h))!==-1;)yield yield St(h.slice(0,_)),h=h.slice(_)}}catch(x){s={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield St(r.call(v)))}finally{if(s)throw s.error}}h.length>0&&(yield yield St(h))})}class X_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=Q_(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function Q_(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function Z_(n,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:u}=t,h=await(async()=>{var y;if(t.options.stream)return Jn(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):Xl.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return Jn(n).debug(`[${s}] response parsed`,fl({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-u})),h}class Rd extends Promise{constructor(t,o,s=Z_){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new Rd(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const ry=Symbol("brand.privateNullableHeaders");function*W_(n){if(!n)return;if(ry in n){const{values:s,nulls:r}=n;yield*s.entries();for(const u of r)yield[u,null];return}let t=!1,o;n instanceof Headers?o=n.entries():Km(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=Km(s[1])?s[1]:[s[1]];let h=!1;for(const y of u)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const qs=n=>{const t=new Headers,o=new Set;for(const s of n){const r=new Set;for(const[u,h]of W_(s)){const y=u.toLowerCase();r.has(y)||(t.delete(u),r.add(y)),h===null?(t.delete(u),o.add(y)):(t.append(u,h),o.delete(y))}}return{[ry]:!0,values:t,nulls:o}};const Ju=n=>{var t,o,s,r,u,h;if(typeof globalThis.process<"u")return(s=(o=(t=C1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(h=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,n))===null||h===void 0?void 0:h.trim()};var cy;class Vr{constructor(t){var o,s,r,u,h,y,v,{baseURL:m=Ju("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=Ju("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:S="v1beta"}=t,w=kr(t,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:x,apiVersion:S},w),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(s=_.timeout)!==null&&s!==void 0?s:Vr.DEFAULT_TIMEOUT,this.logger=(r=_.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(h=(u=eg(_.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:eg(Ju("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:N,this.fetchOptions=_.fetchOptions,this.maxRetries=(y=_.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=_.fetch)!==null&&v!==void 0?v:z_(),this.encoder=U_,this._options=_,this.apiKey=x,this.apiVersion=S,this.clientAdapter=_.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=qs([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return qs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return qs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new Mi(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${$l}`}defaultIdempotencyKey(){return`stainless-node-retry-${x_()}`}makeStatusError(t,o,s,r){return Kn.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,u=S_(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return E_(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(u.search=this.stringifyQuery(o)),u.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new Rd(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,u,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:S}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Jn(this).debug(`[${w}] sending request`,fl({retryOfRequestLogID:s,method:y.method,url:x,options:y,headers:m.headers})),!((u=y.signal)===null||u===void 0)&&u.aborted)throw new pd;const V=new AbortController,H=await this.fetchWithTimeout(x,m,S,V).catch(fd),$=Date.now();if(H instanceof globalThis.Error){const ue=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new pd;const ge=dd(H)||/timed? ?out/i.test(String(H)+("cause"in H?String(H.cause):""));if(o)return Jn(this).info(`[${w}] connection ${ge?"timed out":"failed"} - ${ue}`),Jn(this).debug(`[${w}] connection ${ge?"timed out":"failed"} (${ue})`,fl({retryOfRequestLogID:s,url:x,durationMs:$-N,message:H.message})),this.retryRequest(y,o,s??w);throw Jn(this).info(`[${w}] connection ${ge?"timed out":"failed"} - error; no more retries left`),Jn(this).debug(`[${w}] connection ${ge?"timed out":"failed"} (error; no more retries left)`,fl({retryOfRequestLogID:s,url:x,durationMs:$-N,message:H.message})),ge?new qg:new Fr({cause:H})}const re=`[${w}${_}] ${m.method} ${x} ${H.ok?"succeeded":"failed"} with status ${H.status} in ${$-N}ms`;if(!H.ok){const ue=await this.shouldRetry(H);if(o&&ue){const Ne=`retrying, ${o} attempts remaining`;return await L_(H.body),Jn(this).info(`${re} - ${Ne}`),Jn(this).debug(`[${w}] response error (${Ne})`,fl({retryOfRequestLogID:s,url:H.url,status:H.status,headers:H.headers,durationMs:$-N})),this.retryRequest(y,o,s??w,H.headers)}const ge=ue?"error; no more retries left":"error; not retryable";Jn(this).info(`${re} - ${ge}`);const De=await H.text().catch(Ne=>fd(Ne).message),He=N_(De),be=He?void 0:De;throw Jn(this).debug(`[${w}] response error (${ge})`,fl({retryOfRequestLogID:s,url:H.url,status:H.status,headers:H.headers,message:be,durationMs:Date.now()-N})),this.makeStatusError(H.status,He,be,H.headers)}return Jn(this).info(re),Jn(this).debug(`[${w}] response start`,fl({retryOfRequestLogID:s,url:H.url,status:H.status,headers:H.headers,durationMs:$-N})),{response:H,options:y,controller:V,requestLogID:w,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(t,o,s,r){const u=o||{},{signal:h,method:y}=u,v=kr(u,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(S.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,S)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var u;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(u=t.maxRetries)!==null&&u!==void 0?u:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await A_(h),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const u=o-t,h=Math.min(.5*Math.pow(2,u),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,u;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,S=this.buildURL(v,m,x);"timeout"in h&&__("timeout",h.timeout),h.timeout=(s=h.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:w,body:_}=this.buildBody({options:h}),N=await this.buildHeaders({options:t,method:y,bodyHeaders:w,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:N},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=h.fetchOptions)!==null&&u!==void 0?u:{}),url:S,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let u={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=qs([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),I_()),this._options.defaultHeaders,s,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=qs([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:D_(t)}:this.encoder({body:t,headers:s})}}Vr.DEFAULT_TIMEOUT=6e4;class In extends Vr{constructor(){super(...arguments),this.interactions=new ay(this)}}cy=In;In.GeminiNextGenAPIClient=cy;In.GeminiNextGenAPIClientError=Mi;In.APIError=Kn;In.APIConnectionError=Fr;In.APIConnectionTimeoutError=qg;In.APIUserAbortError=pd;In.NotFoundError=Kg;In.ConflictError=Xg;In.RateLimitError=Zg;In.BadRequestError=$g;In.AuthenticationError=Yg;In.InternalServerError=Wg;In.PermissionDeniedError=Jg;In.UnprocessableEntityError=Qg;In.toFile=B_;In.Interactions=ay;function eN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function tN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function nN(n,t){const o={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(o,["sdkHttpResponse"],s),o}function iN(n,t){const o={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(o,["sdkHttpResponse"],s),o}function oN(n,t,o){const s={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&f(t,["displayName"],r),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(n,["epochCount"]);t!==void 0&&u!=null&&f(t,["tuningTask","hyperparameters","epochCount"],u);const h=c(n,["learningRateMultiplier"]);if(h!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],h),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=c(n,["batchSize"]);t!==void 0&&y!=null&&f(t,["tuningTask","hyperparameters","batchSize"],y);const v=c(n,["learningRate"]);if(t!==void 0&&v!=null&&f(t,["tuningTask","hyperparameters","learningRate"],v),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function lN(n,t,o){const s={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const _=c(n,["validationDataset"]);t!==void 0&&_!=null&&f(t,["supervisedTuningSpec"],ng(_))}else if(r==="PREFERENCE_TUNING"){const _=c(n,["validationDataset"]);t!==void 0&&_!=null&&f(t,["preferenceOptimizationSpec"],ng(_))}const u=c(n,["tunedModelDisplayName"]);t!==void 0&&u!=null&&f(t,["tunedModelDisplayName"],u);const h=c(n,["description"]);t!==void 0&&h!=null&&f(t,["description"],h);let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const _=c(n,["epochCount"]);t!==void 0&&_!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(y==="PREFERENCE_TUNING"){const _=c(n,["epochCount"]);t!==void 0&&_!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const _=c(n,["learningRateMultiplier"]);t!==void 0&&_!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(v==="PREFERENCE_TUNING"){const _=c(n,["learningRateMultiplier"]);t!==void 0&&_!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let m=c(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const _=c(n,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(m==="PREFERENCE_TUNING"){const _=c(n,["exportLastCheckpointOnly"]);t!==void 0&&_!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let x=c(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const _=c(n,["adapterSize"]);t!==void 0&&_!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(x==="PREFERENCE_TUNING"){const _=c(n,["adapterSize"]);t!==void 0&&_!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=c(n,["labels"]);t!==void 0&&S!=null&&f(t,["labels"],S);const w=c(n,["beta"]);return t!==void 0&&w!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],w),s}function sN(n,t){const o={},s=c(n,["baseModel"]);s!=null&&f(o,["baseModel"],s);const r=c(n,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&yN(u);const h=c(n,["config"]);return h!=null&&oN(h,o),o}function aN(n,t){const o={},s=c(n,["baseModel"]);s!=null&&f(o,["baseModel"],s);const r=c(n,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&vN(u,o,t);const h=c(n,["config"]);return h!=null&&lN(h,o,t),o}function rN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function cN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function uN(n,t,o){const s={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const u=c(n,["pageToken"]);t!==void 0&&u!=null&&f(t,["_query","pageToken"],u);const h=c(n,["filter"]);return t!==void 0&&h!=null&&f(t,["_query","filter"],h),s}function dN(n,t,o){const s={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const u=c(n,["pageToken"]);t!==void 0&&u!=null&&f(t,["_query","pageToken"],u);const h=c(n,["filter"]);return t!==void 0&&h!=null&&f(t,["_query","filter"],h),s}function fN(n,t){const o={},s=c(n,["config"]);return s!=null&&uN(s,o),o}function pN(n,t){const o={},s=c(n,["config"]);return s!=null&&dN(s,o),o}function hN(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const u=c(n,["tunedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>uy(y))),f(o,["tuningJobs"],h)}return o}function mN(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const u=c(n,["tuningJobs"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>gd(y))),f(o,["tuningJobs"],h)}return o}function gN(n,t){const o={},s=c(n,["name"]);s!=null&&f(o,["model"],s);const r=c(n,["name"]);return r!=null&&f(o,["endpoint"],r),o}function yN(n,t){const o={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(o,["examples","examples"],r)}return o}function vN(n,t,o){const s={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(u==="PREFERENCE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function uy(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(o,["name"],r);const u=c(n,["state"]);u!=null&&f(o,["state"],_g(u));const h=c(n,["createTime"]);h!=null&&f(o,["createTime"],h);const y=c(n,["tuningTask","startTime"]);y!=null&&f(o,["startTime"],y);const v=c(n,["tuningTask","completeTime"]);v!=null&&f(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(n,["description"]);x!=null&&f(o,["description"],x);const S=c(n,["baseModel"]);S!=null&&f(o,["baseModel"],S);const w=c(n,["_self"]);return w!=null&&f(o,["tunedModel"],gN(w)),o}function gd(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(o,["name"],r);const u=c(n,["state"]);u!=null&&f(o,["state"],_g(u));const h=c(n,["createTime"]);h!=null&&f(o,["createTime"],h);const y=c(n,["startTime"]);y!=null&&f(o,["startTime"],y);const v=c(n,["endTime"]);v!=null&&f(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(n,["error"]);x!=null&&f(o,["error"],x);const S=c(n,["description"]);S!=null&&f(o,["description"],S);const w=c(n,["baseModel"]);w!=null&&f(o,["baseModel"],w);const _=c(n,["tunedModel"]);_!=null&&f(o,["tunedModel"],_);const N=c(n,["preTunedModel"]);N!=null&&f(o,["preTunedModel"],N);const V=c(n,["supervisedTuningSpec"]);V!=null&&f(o,["supervisedTuningSpec"],V);const H=c(n,["preferenceOptimizationSpec"]);H!=null&&f(o,["preferenceOptimizationSpec"],H);const $=c(n,["tuningDataStats"]);$!=null&&f(o,["tuningDataStats"],$);const re=c(n,["encryptionSpec"]);re!=null&&f(o,["encryptionSpec"],re);const ue=c(n,["partnerModelTuningSpec"]);ue!=null&&f(o,["partnerModelTuningSpec"],ue);const ge=c(n,["customBaseModel"]);ge!=null&&f(o,["customBaseModel"],ge);const De=c(n,["experiment"]);De!=null&&f(o,["experiment"],De);const He=c(n,["labels"]);He!=null&&f(o,["labels"],He);const be=c(n,["outputUri"]);be!=null&&f(o,["outputUri"],be);const Xe=c(n,["pipelineJob"]);Xe!=null&&f(o,["pipelineJob"],Xe);const Ne=c(n,["serviceAccount"]);Ne!=null&&f(o,["serviceAccount"],Ne);const Ke=c(n,["tunedModelDisplayName"]);Ke!=null&&f(o,["tunedModelDisplayName"],Ke);const Ue=c(n,["veoTuningSpec"]);return Ue!=null&&f(o,["veoTuningSpec"],Ue),o}function xN(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(o,["name"],r);const u=c(n,["metadata"]);u!=null&&f(o,["metadata"],u);const h=c(n,["done"]);h!=null&&f(o,["done"],h);const y=c(n,["error"]);return y!=null&&f(o,["error"],y),o}function ng(n,t){const o={},s=c(n,["gcsUri"]);s!=null&&f(o,["validationDatasetUri"],s);const r=c(n,["vertexDatasetResource"]);return r!=null&&f(o,["validationDatasetUri"],r),o}class bN extends go{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new pl(mo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),u=await this.tuneMldevInternal(r);let h="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?h=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(h=u.name.split("/operations/")[0]),{name:h,state:od.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=cN(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>gd(x))}else{const m=rN(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>uy(x))}}async listInternal(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=pN(t);return y=$e("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=mN(x),w=new Am;return Object.assign(w,S),w})}else{const m=fN(t);return y=$e("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=hN(x),w=new Am;return Object.assign(w,S),w})}}async cancel(t){var o,s,r,u;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=tN(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=iN(x),w=new Mm;return Object.assign(w,S),w})}else{const m=eN(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(S=>{const w=S;return w.sdkHttpResponse={headers:x.headers},w})),h.then(x=>{const S=nN(x),w=new Mm;return Object.assign(w,S),w})}}async tuneInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI()){const y=aN(t,t);return u=$e("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>gd(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,u="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=sN(t);return u=$e("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>xN(v))}}}class SN{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TN=1024*1024*8,wN=3,EN=1e3,CN=2,zr="x-goog-upload-status";async function _N(n,t,o){var s;const r=await dy(n,t,o),u=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[zr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function NN(n,t,o){var s;const r=await dy(n,t,o),u=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[zr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=bg(u),y=new wd;return Object.assign(y,h),y}async function dy(n,t,o){var s,r;let u=0,h=0,y=new ld(new Response),v="upload";for(u=n.size;h<u;){const m=Math.min(TN,u-h),x=n.slice(h,h+m);h+m>=u&&(v+=", finalize");let S=0,w=EN;for(;S<wN&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((s=y?.headers)===null||s===void 0)&&s[zr]));)S++,await MN(w),w=w*CN;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[zr])!=="active")break;if(u<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function AN(n){return{size:n.size,type:n.type}}function MN(n){return new Promise(t=>setTimeout(t,n))}class RN{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await _N(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await NN(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await AN(t)}}class kN{create(t,o,s){return new IN(t,o,s)}}class IN{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const ig="x-goog-api-key";class zN{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(ig)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(ig,this.apiKey)}}}const DN="gl-node/";class LN{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new In({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=M1(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new zN(this.apiKey);this.apiClient=new AC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:DN+"web",uploader:new RN,downloader:new SN}),this.models=new YC(this.apiClient),this.live=new BC(this.apiClient,r,new kN),this.batches=new oT(this.apiClient),this.chats=new GT(this.models,this.apiClient),this.caches=new UT(this.apiClient),this.files=new KT(this.apiClient),this.operations=new JC(this.apiClient),this.authTokens=new u_(this.apiClient),this.tunings=new bN(this.apiClient),this.fileSearchStores=new v_(this.apiClient)}}const UN=n=>new LN({apiKey:n}),PN={type:cn.OBJECT,properties:{segments:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{startTime:{type:cn.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:cn.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:cn.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},HN={type:cn.OBJECT,properties:{segments:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{startTime:{type:cn.STRING},endTime:{type:cn.STRING},text:{type:cn.STRING},words:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{text:{type:cn.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:cn.STRING,description:"Start time of the word"},endTime:{type:cn.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function yr(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let S=0;m[1]&&(S=parseFloat("0."+m[1])),o=y*3600+v*60+x+S}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const s=Math.floor(o/60),r=Math.floor(o%60),u=Math.round(o%1*1e3);return`${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(u).padStart(3,"0")}`}function GN(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const s=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let u;for(;(u=r.exec(t))!==null;){const h=u[3]!==void 0?u[3]:u[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}s.push({startTime:u[1],endTime:u[2],text:y})}if(s.length>0)return{segments:s};throw new Error("Response structure invalid and could not be repaired.")}async function FN(n,t,o,s,r,u="line"){try{const h=UN(s),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";u==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. REPEATED WORDS & STUTTERS: **EXTREMELY IMPORTANT**
       - Treat every spoken utterance as a distinct word which must be timestamped.
       - Example: "No no no wait" -> 4 distinct word objects.
       - Example: "I I I didn't mean it" -> 3 distinct "I" objects followed by "didn't", "mean", "it".
       - NEVER merge repeated words into a single event.
    4. DETAILS: Inside each line object, you MUST provide a "words" array.
    5. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    6. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    7. FAST SPEECH / RAP / CONVERSATION HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics or conversation, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating precise timed lyrics and subtitled conversations.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${u.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,S={responseMimeType:"application/json",responseSchema:u==="word"?HN:PN,temperature:.1};y&&(S.thinkingConfig={thinkingBudget:1024});const w=new Promise(($,re)=>{r?.aborted&&re(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>re(new DOMException("Aborted","AbortError")))});let N=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:S}),w])).text;if(!N)throw new Error("Empty response from model");return N=N.trim(),N.startsWith("```json")?N=N.replace(/^```json\s*/,"").replace(/\s*```$/,""):N.startsWith("```")&&(N=N.replace(/^```\s*/,"").replace(/\s*```$/,"")),(GN(N).segments||[]).map($=>({startTime:yr(String($.startTime)),endTime:yr(String($.endTime)),text:String($.text),words:$.words?$.words.map(re=>({text:String(re.text),startTime:yr(String(re.startTime)),endTime:yr(String(re.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const BN=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:s,onPlayTrack:r,isPlaying:u,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:S})=>{const{confirm:w}=Lr(),_=Z.useRef(null),N=Z.useRef(new Map),V=G=>{const L=Math.floor(G/60).toString().padStart(2,"0"),he=(G%60).toFixed(2).padStart(5,"0");return`[${L}:${he}]`},[H,$]=Z.useState(null),[re,ue]=Z.useState({key:null,direction:"asc"}),[ge,De]=Z.useState(new Set),[He,be]=Z.useState(new Set),[Xe,Ne]=Z.useState(localStorage.getItem("gemini_api_key")||""),[Ke,Ue]=Z.useState("gemini-2.5-flash"),[ot,ft]=Z.useState("line"),[bt,Et]=Z.useState(!1),B=Z.useRef(null),[Ce,ie]=Z.useState(null);Z.useEffect(()=>{Xe&&localStorage.setItem("gemini_api_key",Xe)},[Xe]);const fe=o>=0?n[o]:null,vt=fe?.parsedLyrics||[],U=Z.useMemo(()=>fe?vt.findIndex((G,L)=>{if(G.endTime!==void 0)return x>=G.time&&x<G.endTime;const he=vt[L+1];return x>=G.time&&(!he||x<he.time)}):-1,[x,fe,vt]);Z.useEffect(()=>{if(U!==-1){const G=document.getElementById(`lyric-active-${o}`);G&&G.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[U,o]);const ae=G=>{if(n.length===0)return;const L=o>=0?n[o]:null,he=[...n];let Ee="asc";if(G==="random"){ue({key:"random",direction:"asc"});for(let me=he.length-1;me>0;me--){const se=Math.floor(Math.random()*(me+1));[he[me],he[se]]=[he[se],he[me]]}}else{re.key===G&&re.direction==="asc"&&(Ee="desc"),ue({key:G,direction:Ee});const me=Ee==="asc"?1:-1;G==="filename"?he.sort((se,E)=>me*se.audioFile.name.localeCompare(E.audioFile.name)):G==="artist"?he.sort((se,E)=>me*(se.metadata.artist||"").localeCompare(E.metadata.artist||"")):G==="title"?he.sort((se,E)=>me*(se.metadata.title||"").localeCompare(E.metadata.title||"")):G==="album"&&he.sort((se,E)=>me*(se.metadata.album||"").localeCompare(E.metadata.album||""))}if(t(he),L){const me=he.findIndex(se=>se.id===L.id);me!==-1&&s(me)}},Se=Z.useCallback(G=>{H!==null&&G.key==="Delete"?(G.preventDefault(),G.stopPropagation(),m?m(H):t(L=>{const he=[...L];return he.splice(H,1),he}),H>=n.length-1&&$(n.length>1?n.length-2:null)):G.key==="ArrowDown"&&n.length>0?(G.preventDefault(),G.stopPropagation(),$(L=>L===null?0:Math.min(L+1,n.length-1))):G.key==="ArrowUp"&&n.length>0?(G.preventDefault(),G.stopPropagation(),$(L=>L===null?0:Math.max(L-1,0))):G.key==="Enter"&&H!==null?(G.preventDefault(),G.stopPropagation(),r(H)):G.key==="Escape"&&$(null)},[H,n.length,t,r]);Z.useEffect(()=>{const G=_.current;if(G)return G.addEventListener("keydown",Se),()=>G.removeEventListener("keydown",Se)},[Se]),Z.useEffect(()=>{H!==null&&H>=n.length&&$(n.length>0?n.length-1:null)},[n.length,H]);const Fe=async G=>{const L=new Map;G.forEach(se=>{const E=se.name.split(".").pop()?.toLowerCase(),O=(se.webkitRelativePath||se.name).replace(/\.[^/.]+$/,"");L.has(O)||L.set(O,{});const M=L.get(O);["mp3","wav","ogg","flac","m4a","mp4","webm","ogg","mkv","mov","avi","m4v"].includes(E||"")?M.audio=se:["lrc","srt","ttml","xml","json","vtt"].includes(E||"")&&(M.lyric=se)});const he=[],Ee=async(se,E)=>new Promise(z=>{if(se.type.startsWith("video/")){z({title:E,artist:"Unknown Artist",coverUrl:URL.createObjectURL(se),backgroundType:"video"});return}Qu(()=>import("./jsmediatags.min-Bf5ftXzF.js").then(O=>O.j),[]).then(O=>{O.read(se,{onSuccess:M=>{const{title:ee,artist:I,album:le,picture:oe}=M.tags;let ce=null;if(oe){const{data:A,format:Oe}=oe;let We="";for(let Ge=0;Ge<A.length;Ge++)We+=String.fromCharCode(A[Ge]);ce=`data:${Oe};base64,${window.btoa(We)}`}z({title:ee||E,artist:I||"Unknown Artist",album:le||void 0,coverUrl:ce})},onError:()=>{z({title:E,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{z({title:E,artist:"Unknown Artist",coverUrl:null})})}),me=async se=>{try{const E=await se.text(),z=se.name.split(".").pop()?.toLowerCase();if(z==="lrc")return Ql(E);if(z==="srt")return Zl(E);if(z==="ttml"||z==="xml")return ea(E);if(z==="vtt")return ta(E);if(z==="json")return m1(E)}catch(E){console.error("Failed to parse lyrics",E)}return[]};for(const[se,E]of L.entries())if(E.audio){const z=await Ee(E.audio,se),O=Math.random().toString(36).substr(2,9);let M=[];E.lyric&&(M=await me(E.lyric)),he.push({id:O,audioFile:E.audio,lyricFile:E.lyric,parsedLyrics:M,metadata:z,duration:0})}if(he.length>0){const se=[...n,...he];t(se),r(0,!1,se)}},it=async G=>{if(G.target.files&&G.target.files.length>0){const L=Array.from(G.target.files);await Fe(L),G.target.value=""}},[b,D]=Z.useState(!1),q=G=>{G.preventDefault(),G.stopPropagation(),D(!0)},W=G=>{G.preventDefault(),G.stopPropagation(),D(!1)},Me=async G=>{if(G.preventDefault(),G.stopPropagation(),D(!1),G.dataTransfer.files&&G.dataTransfer.files.length>0){const L=Array.from(G.dataTransfer.files);await Fe(L)}},xe=G=>{m?m(G):t(L=>{const he=[...L];return he.splice(G,1),he})},we=G=>new Promise((L,he)=>{const Ee=new FileReader;Ee.readAsDataURL(G),Ee.onload=()=>{const me=Ee.result.split(",")[1];L(me)},Ee.onerror=me=>he(me)}),ke=async G=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(ge.has(G.id)){const me=N.current.get(G.id);me&&me.abort();return}const L=Xe||"PLACEHOLDER_API_KEY";if(L.trim().length<39){alert(`Invalid API Key length (${L.trim().length}). It must be at least 39 characters.`),Et(!0);return}De(me=>new Set(me).add(G.id));const he=new AbortController;N.current.set(G.id,he);const Ee=19.5*1024*1024;if(G.audioFile.size>Ee){alert(`File is too large (${(G.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),De(me=>{const se=new Set(me);return se.delete(G.id),se}),N.current.delete(G.id);return}try{const me=await we(G.audioFile);let se=G.duration||0;if(se===0)try{se=await new Promise(O=>{const M=new Audio(URL.createObjectURL(G.audioFile));M.onloadedmetadata=()=>{O(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>{URL.revokeObjectURL(M.src),O(0)}})}catch(O){console.warn("Could not determine duration for AI validation",O)}let z=(await FN(Ke,me,G.audioFile.type,L,he.signal,ot)).map(O=>({time:Xs(O.startTime),text:O.text,endTime:Xs(O.endTime),words:O.words?O.words.map(M=>({text:M.text,startTime:Xs(M.startTime),endTime:Xs(M.endTime)})):void 0}));se>0&&(z=z.filter(O=>O.time<se&&O.time>=0)),t(O=>O.map(M=>M.id===G.id?{...M,parsedLyrics:z.sort((ee,I)=>ee.time-I.time),duration:se>0?se:M.duration}:M))}catch(me){if(me.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",me);let se="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)se="Connection lost. Please check your internet connection.";else if(me.message){const E=me.message.toLowerCase();E.includes("fetch")||E.includes("network")||E.includes("failed to connect")?se="Network error. Please check your connection.":(E.includes("api key")||me.message.includes("400")||me.message.includes("401")||me.message.includes("403"))&&(se="API Key Error: Please check if your key is valid and has credits.")}alert(se)}}finally{N.current.delete(G.id),De(me=>{const se=new Set(me);return se.delete(G.id),se})}},pe=async G=>{if(!navigator.onLine){alert("No internet connection.");return}be(L=>new Set(L).add(G.id));try{const L=await Qu(()=>import("./index.min-DybnQGgK.js").then(z=>z.i),[]);let he;const Ee=L.default||L;console.log("SyncLyrics Module:",L);const me=["musixmatch","lrclib","netease"];if(typeof Ee=="function"&&Ee.prototype&&Ee.prototype.getLyrics){console.log("Detected Class usage");const z=new Ee({sources:me});he=O=>z.getLyrics(O)}else if(Ee.getLyrics&&typeof Ee.getLyrics=="function")console.log("Detected Instance usage"),he=z=>Ee.getLyrics(z);else if(Ee.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const z=Ee.SyncLyrics;if(typeof z=="function"&&z.prototype&&z.prototype.getLyrics){console.log("Using SyncLyrics as Class");const O=new z({sources:me});he=M=>O.getLyrics(M)}else if(typeof z=="function")console.log("Using SyncLyrics as Function"),he=z;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ee=="function")console.log("Detected Function usage"),he=Ee;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ee}. Keys: ${typeof Ee=="object"?JSON.stringify(Object.keys(Ee)):"N/A"}`);const se={track:G.metadata.title,artist:G.metadata.artist,album:G.metadata.album,sources:me};console.log("Searching lyrics with options:",se);const E=await he(se);if(E&&typeof E=="string")ye(E,G);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let z=G.duration||0;if(z===0)try{z=await new Promise(I=>{const le=new Audio(URL.createObjectURL(G.audioFile));le.onloadedmetadata=()=>{const oe=le.duration;URL.revokeObjectURL(le.src),I(oe)},le.onerror=()=>I(0)})}catch(I){console.warn("Could not determine duration for search",I)}const O=new URLSearchParams({artist_name:G.metadata.artist,track_name:G.metadata.title,album_name:G.metadata.album||"",duration:z.toString()}),M=await fetch(`https://lrclib.net/api/get?${O.toString()}`);if(!M.ok){const I=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(G.metadata.title+" "+G.metadata.artist)}`);if(I.ok){const le=await I.json();if(Array.isArray(le)&&le.length>0){const oe=le.find(ce=>ce.syncedLyrics);if(oe){ye(oe.syncedLyrics,G);return}else if(le[0].plainLyrics){ye(le[0].plainLyrics,G);return}}}throw new Error("No lyrics found in fallback source.")}const ee=await M.json();ee.syncedLyrics?ye(ee.syncedLyrics,G):ee.plainLyrics?ye(ee.plainLyrics,G):alert("No lyrics found.")}}catch(L){console.error("Search failed:",L),L.message?.includes("CORS")||L.message?.includes("etwork")||L.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+L.message)}finally{be(L=>{const he=new Set(L);return he.delete(G.id),he})}},ye=(G,L)=>{let he=Ql(G);if(he.length===0&&(he=Zl(G)),he.length>0){const Ee=he.some(me=>me.words&&me.words.length>0);console.log(Ee?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(me=>me.map(se=>se.id===L.id?{...se,parsedLyrics:he,lyricFile:new File([G],`synched-lyrics${Ee?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:se))}else alert("Lyrics found but could not be parsed.")},Ie=(G,L,he)=>{const Ee=new Blob([G],{type:"application/octet-stream"}),me=URL.createObjectURL(Ee),se=document.createElement("a");se.href=me,se.download=L,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(me)},Je=async(G,L)=>{const he=G.parsedLyrics||[];if(he.length===0)return;let Ee="";const me=L==="lrc-enhanced"?"lrc":L,se=`${G.metadata.title||"lyrics"}.${me}`;let E=G.duration||0;if(E===0)try{E=await new Promise(O=>{const M=new Audio(URL.createObjectURL(G.audioFile));M.onloadedmetadata=()=>{O(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>O(0)})}catch(O){console.warn("Could not determine duration for export check",O)}const z=he.map(O=>({...O,words:O.words?O.words.filter(M=>M.text.trim().length>0).map(M=>({...M})):void 0}));for(let O=0;O<z.length;O++){const M=z[O],ee=z[O+1];if(M.endTime===void 0&&(ee?M.endTime=ee.time:M.endTime=E>0?E:M.time+5),M.words&&M.words.length>0)for(let I=0;I<M.words.length;I++){const le=M.words[I],oe=M.words[I+1];(le.endTime===void 0||le.endTime<=le.startTime)&&(oe?le.endTime=oe.startTime:le.endTime=M.endTime)}}if(L==="txt")Ee=z.map(O=>O.text).join(`
`);else if(L==="json")Ee=JSON.stringify(z,null,2);else if(L==="srt"){const O=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),I=Math.floor(M%3600/60).toString().padStart(2,"0"),le=Math.floor(M%60).toString().padStart(2,"0"),oe=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${I}:${le},${oe}`};Ee=z.map((M,ee)=>{const I=O(M.time),le=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,oe=O(le);return`${ee+1}
${I} --> ${oe}
${M.text}
`}).join(`
`)}else if(L==="lrc"){const O=[],M=ee=>{const I=Math.floor(ee/60).toString().padStart(2,"0"),le=(ee%60).toFixed(2).padStart(5,"0");return`[${I}:${le}]`};for(let ee=0;ee<he.length;ee++){const I=he[ee],le=he[ee+1];O.push(`${M(I.time)}${I.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const ce=(I.endTime??I.time+3)+4;(!(E>0)||ce<=E)&&(le?le.time>ce&&O.push(`${M(ce)}`):O.push(`${M(ce)}`))}Ee=O.join(`
`)}else if(L==="lrc-enhanced"){const O=[],M=I=>{const le=Math.floor(I/60).toString().padStart(2,"0"),oe=(I%60).toFixed(2).padStart(5,"0");return`[${le}:${oe}]`},ee=I=>{const le=Math.floor(I/60).toString().padStart(2,"0"),oe=(I%60).toFixed(2).padStart(5,"0");return`<${le}:${oe}>`};for(let I=0;I<he.length;I++){const le=he[I],oe=he[I+1];let ce="";le.words&&le.words.length>0?le.words.forEach((Ge,Dt)=>{const xt=Ge.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");ce+=`${ee(Ge.startTime)}${xt}`,Dt<le.words.length-1&&!xt.endsWith("-")&&(ce+=" ")}):ce=le.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),O.push(`${M(le.time)}${ce}`);const Oe=(le.endTime??le.time+3)+4;(!(E>0)||Oe<=E)&&(oe?oe.time>Oe&&O.push(`${M(Oe)}`):O.push(`${M(Oe)}`))}Ee=O.join(`
`)}else if(L==="ttml"){const O=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),I=Math.floor(M%3600/60).toString().padStart(2,"0"),le=Math.floor(M%60).toString().padStart(2,"0"),oe=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${I}:${le}.${oe}`};Ee=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,z.forEach(M=>{const ee=O(M.time),I=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+3,le=O(I);Ee+=`
      <p begin="${ee}" end="${le}">`,M.words&&M.words.length>0?M.words.forEach(oe=>{if(!oe.text.trim())return;const ce=O(oe.startTime);let A=oe.endTime;(A===void 0||A<=oe.startTime)&&(A=oe.startTime+.5);const Oe=O(A);let We=oe.text.replace(/[ \t]+/g," ").trim();We.endsWith("-")||(We+=" "),Ee+=`
        <span begin="${ce}" end="${Oe}">${We}</span>`}):Ee+=`
        <span begin="${ee}" end="${le}">${M.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ee+=`
      </p>`}),Ee+=`
    </div>
  </body>
</tt>`}else if(L==="vtt"){const O=M=>{const ee=Math.floor(M/3600).toString().padStart(2,"0"),I=Math.floor(M%3600/60).toString().padStart(2,"0"),le=Math.floor(M%60).toString().padStart(2,"0"),oe=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${ee}:${I}:${le}.${oe}`};Ee=`WEBVTT

`,z.forEach(M=>{const ee=O(M.time),I=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,le=O(I);let oe=M.text.trim();if(M.words&&M.words.length>0){const ce=M.words.map(A=>`<${O(A.startTime)}>${A.text.trim()}`).join(" ");ce.length>0&&(oe=ce)}Ee+=`${ee} --> ${le}
${oe}

`})}Ie(Ee,se)},Ve=async G=>{await w("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(L=>L.map(he=>he.id===G.id?{...he,parsedLyrics:[],lyricFile:void 0}:he))},et=async G=>{const L=G.target.files?.[0];if(!(!L||!Ce)){try{const he=await L.text(),Ee=L.name.split(".").pop()?.toLowerCase();let me=[];Ee==="lrc"?me=Ql(he):Ee==="srt"?me=Zl(he):Ee==="ttml"||Ee==="xml"?me=ea(he):Ee==="vtt"&&(me=ta(he)),me.length>0?t(se=>se.map(E=>E.id===Ce?{...E,lyricFile:L,parsedLyrics:me}:E)):alert("Could not parse lyrics. Ensure file is .lrc, .srt, or .vtt")}catch(he){console.error("Failed to load lyrics",he),alert("Failed to load lyrics file.")}ie(null),G.target.value=""}};return d.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${b?"bg-zinc-800 border-orange-500":""}`,onDragOver:q,onDragLeave:W,onDrop:Me,children:[b&&d.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:d.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[d.jsx(Yo,{size:48}),d.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),d.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, FLAC, Video (MP4/WebM), LRC, SRT, VTT"})]})}),d.jsx("input",{type:"file",ref:B,className:"hidden",accept:".lrc,.srt,.ttml,.xml,.vtt",onChange:et}),d.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[d.jsx(_r,{size:16,className:"text-orange-400"}),"Playlist"]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[d.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[d.jsx(vg,{size:14})," Add Files",d.jsx("input",{type:"file",className:"hidden",accept:"audio/*,video/*,.lrc,.srt,.ttml,.xml,.vtt",multiple:!0,onChange:it})]}),d.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[d.jsx(ib,{size:14}),d.jsx("input",{type:"file",className:"hidden",multiple:!0,webkitdirectory:"",onChange:it})]})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>ae("filename"),className:`p-1 rounded transition-colors ${re.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${re.key==="filename"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(Er,{size:14,className:re.key==="filename"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>ae("artist"),className:`p-1 rounded transition-colors ${re.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${re.key==="artist"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(s1,{size:14,className:re.key==="artist"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>ae("title"),className:`p-1 rounded transition-colors ${re.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${re.key==="title"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(Yl,{size:14,className:re.key==="title"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>ae("album"),className:`p-1 rounded transition-colors ${re.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${re.key==="album"?re.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(Yx,{size:14,className:re.key==="album"&&re.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>ae("random"),className:`p-1 rounded transition-colors ${re.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:d.jsx(Gb,{size:14})})]})]}),d.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[d.jsx("button",{onClick:()=>Et(!bt),className:`p-1 rounded transition-colors ${bt?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:d.jsx(db,{size:14})}),bt&&d.jsx("input",{type:Xe?"password":"text",value:Xe,onChange:G=>Ne(G.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),d.jsx("div",{className:"relative group",children:d.jsxs("select",{value:Ke,onChange:G=>Ue(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[d.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),d.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),d.jsx("div",{className:"relative group",children:d.jsxs("select",{value:ot,onChange:G=>ft(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[d.jsx("option",{value:"line",children:"Line"}),d.jsx("option",{value:"word",children:"Word"})]})}),d.jsx("button",{onClick:async()=>{n.length>0&&await w("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:d.jsx(Nr,{size:14})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),d.jsx("button",{onClick:S,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:d.jsx(hi,{size:14})})]})]}),d.jsx("div",{ref:_,tabIndex:0,onMouseEnter:()=>_.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[d.jsx(_r,{size:32,className:"mb-2 opacity-50"}),d.jsx("p",{children:"Playlist is empty"}),d.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((G,L)=>{const he=L===o,Ee=L===H,me=G.parsedLyrics||[],se=he?me.findIndex((E,z)=>{if(E.endTime!==void 0)return x>=E.time&&x<E.endTime;const O=me[z+1];return x>=E.time&&(!O||x<O.time)}):-1;return d.jsxs("div",{onClick:()=>$(L),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${he?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ee?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[d.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:E=>{E.stopPropagation(),he?h():r(L)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${he?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:he?u?d.jsx(yg,{size:14}):d.jsx(Wu,{size:14}):d.jsx(Wu,{size:14})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:`text-xs font-medium truncate ${he?"text-orange-100":"text-zinc-300"}`,title:G.audioFile.name,children:G.metadata.title}),d.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:G.metadata.artist,children:G.metadata.artist})]})]}),d.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[d.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(G.audioFile.size/1024/1024).toFixed(1),"MB"]}),G.lyricFile?d.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:G.lyricFile.name,children:[d.jsx(Er,{size:7}),d.jsx("span",{className:"truncate max-w-[80px]",children:G.lyricFile.name})]}):d.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),d.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:me.length>0?d.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:me.map((E,z)=>{const O=z===se;return d.jsxs("div",{id:O?`lyric-active-${L}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${O?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${V(E.time)} - ${E.text}`,onClick:M=>{M.stopPropagation(),L!==o?(r(L),setTimeout(()=>y(E.time),150)):y(E.time)},children:[d.jsx("span",{className:`font-mono text-[8px] ${O?"text-orange-200":"text-zinc-500"}`,children:V(E.time)}),d.jsx("span",{className:`truncate max-w-[120px] ${O?"text-white font-medium":"text-zinc-400"}`,children:E.text||""})]},z)})}):d.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),d.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[d.jsx("button",{onClick:E=>{E.stopPropagation(),ie(G.id),B.current&&(B.current.value=""),B.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:d.jsx(Yo,{size:14})}),d.jsx("button",{onClick:E=>{E.stopPropagation(),pe(G)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${He.has(G.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:He.has(G.id),children:He.has(G.id)?d.jsx(S0,{size:14,className:"animate-spin"}):d.jsx(Ub,{size:14})}),d.jsx("button",{onClick:E=>{E.stopPropagation(),ke(G)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${ge.has(G.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:ge.has(G.id)?"Stop Transcription":"AI Sync Transcribe",children:ge.has(G.id)?d.jsxs(d.Fragment,{children:[d.jsx(S0,{size:14,className:"animate-spin group-hover/btn:hidden"}),d.jsx(nd,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):d.jsx(td,{size:14})}),me.length>0&&d.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"vtt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download VTT",children:"VTT"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Je(G,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),d.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),Ve(G)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),d.jsx("button",{onClick:E=>{E.stopPropagation(),xe(L)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:d.jsx(Nr,{size:12})})]},G.id)})})]})},kd=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],VN=()=>{const n=new Set;if(kd.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const s=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=s,document.head.appendChild(r);const u=document.createElement("link");u.rel="preconnect",u.href="https://fonts.googleapis.com",document.head.appendChild(u);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},Id=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],Dr={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},Ku=Id.flatMap(n=>n.options.map(t=>t.value)),og={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,lyricLineHeight:1.2,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1,useRealColorMedia:!1},lg=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],sg=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],ag=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],rg=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],yd=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Smooth Transition Plus",value:"karaoke-smooth-plus"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],wr=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},cg=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],vd=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],fy=["none","upper","lower","title","sentence","invert"],ug=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],dg=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],ON=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Ni=({value:n,onChange:t,groups:o})=>{const[s,r]=Z.useState(!1),[u,h]=Z.useState(n);Z.useEffect(()=>{s||h(n)},[n,s]);const y=S=>{for(const w of o){const _=w.options.find(N=>N.value===S);if(_)return _.label}return S},v=S=>{t(S)},m=()=>{s&&t(u),r(!1)},x=S=>{t(S),h(S),r(!1)};return d.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[d.jsxs("button",{onClick:()=>r(!s),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:s?"Close List":"Expand List",children:[d.jsx("span",{className:"truncate",children:y(n)}),d.jsx(na,{size:14,className:`transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&d.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(S=>d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),d.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(w=>d.jsx("button",{onMouseEnter:()=>v(w.value),onClick:()=>x(w.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===w.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:w.label},w.value))})]},S.label))})]})},jN=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const s of t){const r=s.options.find(u=>u.value===n);if(r)return r.label}return"Select Font"},qN=({value:n,onChange:t,customFontName:o,groups:s=kd})=>{const[r,u]=Z.useState(!1),[h,y]=Z.useState(n);Z.useEffect(()=>{r||y(n)},[n,r]);const v=S=>{t(S)},m=()=>{r&&t(h)},x=S=>{t(S),y(S),u(!1)};return d.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[d.jsxs("button",{onClick:()=>u(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[d.jsx("span",{className:"truncate",style:{fontFamily:n},children:jN(n,s,o)}),d.jsx(na,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&d.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),d.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:d.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),s.map(S=>d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),d.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(w=>d.jsx("button",{onMouseEnter:()=>v(w.value),onClick:()=>x(w.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===w.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:w.label,children:d.jsx("span",{style:{fontFamily:w.value},children:w.label})},w.value))})]},S.label))]})]})},$N=Object.values(Dr).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),YN=[{label:"Visual Presets",options:$N},...kd],JN=({config:n,setConfig:t,preset:o,setPreset:s,onClose:r,isPlaylistMode:u,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:S,setResolution:w,aspectRatio:_,setAspectRatio:N,renderCodec:V,setRenderCodec:H,supportedCodecs:$,renderQuality:re,setRenderQuality:ue,renderFps:ge,setRenderFps:De,renderEngine:He,setRenderEngine:be,ffmpegCodec:Xe,setFfmpegCodec:Ne})=>{const{toast:Ke,confirm:Ue}=Lr(),ot=Z.useRef(null),ft=Z.useRef(null),bt=Z.useRef(null),Et=Z.useRef(null),B=Z.useRef(null),[Ce,ie]=Z.useState(!1),fe=(b,D)=>{let q={...n,[b]:D};if(b==="highlightEffect"){const Me=wr(D);q.useCustomHighlightColors=!1,Me?(q.highlightColor=Me.color,q.highlightBackground=Me.bg):(q.highlightColor="#fb923c",q.highlightBackground="#fb923c")}else if(b==="useCustomHighlightColors"&&D===!1){const W=n.highlightEffect,Me=wr(W);Me?(q.highlightColor=Me.color,q.highlightBackground=Me.bg):(q.highlightColor="#fb923c",q.highlightBackground="#fb923c")}t(q)},vt=b=>{s(b);const D=Dr[b];D&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...D})},U=b=>{const D=b.target.files?.[0];if(D){const q=new FileReader;q.onload=W=>{W.target?.result&&fe("channelInfoImage",W.target.result)},q.readAsDataURL(D)}b.target.value=""},ae=b=>{const D=b.target.files?.[0];if(D){const q=new FileReader;q.onload=W=>{W.target?.result&&fe("backgroundImage",W.target.result)},q.readAsDataURL(D)}b.target.value=""},Se=async()=>{await Ue("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(og),s("default"),w("1080p"),N("16:9"),H("auto"),De(30),ue("med"),be("mediarecorder"),Ne("h264"),bt.current&&(bt.current.value=""),Et.current&&(Et.current.value=""),x(),fe("enableGradientOverlay",!1),fe("useRealColorMedia",!1),Ke.success("All settings have been reset to default."))},Fe=()=>{const b=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),D={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:S,aspectRatio:_,renderCodec:V,renderFps:ge,renderQuality:re,renderEngine:He,ffmpegCodec:Xe,customFontName:v};D.backgroundSource!=="image"&&(D.backgroundImage=void 0),D.showChannelInfo||(D.channelInfoImage=void 0);try{const q=JSON.stringify(D,null,2),W=new Blob([q],{type:"application/json"}),Me=URL.createObjectURL(W),xe=document.createElement("a");xe.setAttribute("href",Me),xe.setAttribute("download",`render_settings_${b}.json`),document.body.appendChild(xe),xe.click(),xe.remove(),URL.revokeObjectURL(Me)}catch(q){console.error("Export failed:",q),Ke.error("Failed to export settings.")}},it=b=>{const D=b.target.files?.[0];if(!D)return;const q=new FileReader;q.onload=W=>{try{const Me=JSON.parse(W.target?.result);if(Me&&typeof Me=="object"){const{resolution:xe,aspectRatio:we,renderCodec:ke,renderFps:pe,renderQuality:ye,renderEngine:Ie,ffmpegCodec:Je,preset:Ve,customFontName:et,...G}=Me,L={...og,...G};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration","lyricLineHeight"].forEach(se=>{L[se]!==void 0&&(L[se]=Number(L[se]))}),L.useCustomHighlightColors!==void 0&&(L.useCustomHighlightColors=!!L.useCustomHighlightColors),L.useRealColorMedia!==void 0&&(L.useRealColorMedia=!!L.useRealColorMedia),L.showChannelInfo!==void 0&&(L.showChannelInfo=!!L.showChannelInfo),L.showIntro!==void 0&&(L.showIntro=!!L.showIntro),L.showTitle!==void 0&&(L.showTitle=!!L.showTitle),L.showArtist!==void 0&&(L.showArtist=!!L.showArtist),L.showCover!==void 0&&(L.showCover=!!L.showCover),L.showLyrics!==void 0&&(L.showLyrics=!!L.showLyrics),L.highlightEffect&&(!L.highlightColor||!L.highlightBackground)){const se=wr(L.highlightEffect);se&&(L.highlightColor||(L.highlightColor=se.color),L.highlightBackground||(L.highlightBackground=se.bg))}const Ee=(se,E)=>E.some(z=>z.options.some(O=>O.value===se));L.textEffect&&!Ee(L.textEffect,lg)&&(L.textEffect="shadow"),L.textAnimation&&!Ee(L.textAnimation,sg)&&(L.textAnimation="none"),L.transitionEffect&&!Ee(L.transitionEffect,ag)&&(L.transitionEffect="none"),L.visualTransitionType&&!Ee(L.visualTransitionType,rg)&&(L.visualTransitionType="none"),L.highlightEffect&&!Ee(L.highlightEffect,yd)&&(L.highlightEffect="karaoke"),L.backgroundSource&&!Ee(L.backgroundSource,cg)&&(L.backgroundSource="custom"),["current","playlist"].includes(L.renderMode)||(L.renderMode="current"),["left","center","right"].includes(L.textAlign)||(L.textAlign="center"),["top","center","bottom"].includes(L.contentPosition)||(L.contentPosition="center"),L.lyricDisplayMode&&!Ee(L.lyricDisplayMode,vd)&&(L.lyricDisplayMode="all"),["normal","bold"].includes(L.fontWeight)||(L.fontWeight="bold"),["normal","italic"].includes(L.fontStyle)||(L.fontStyle="normal"),["none","underline","line-through"].includes(L.textDecoration)||(L.textDecoration="none"),fy.includes(L.textCase)||(L.textCase="none"),["auto","manual"].includes(L.introMode)||(L.introMode="auto"),L.lyricStyleTarget&&!["active-only","all"].includes(L.lyricStyleTarget)&&(L.lyricStyleTarget="active-only");const me=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];L.infoPosition&&!me.includes(L.infoPosition)&&(L.infoPosition="top-left"),L.infoStyle&&!Ee(L.infoStyle,ug)&&(L.infoStyle="classic"),L.channelInfoPosition&&!me.includes(L.channelInfoPosition)&&(L.channelInfoPosition="bottom-right"),L.channelInfoStyle&&!Ee(L.channelInfoStyle,dg)&&(L.channelInfoStyle="classic"),t(L),xe&&w(xe),we&&N(we),ke&&H(ke),pe&&De(Number(pe)),ye&&ue(ye),Ie&&be(Ie),Je&&Ne(Je),s(Ve||"custom"),et&&et!==v?Ke.success(`Settings loaded. Note: Config used font "${et}".`):Ke.success("Settings loaded successfully!")}}catch(Me){console.error(Me),Ke.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},q.readAsText(D),b.target.value=""};return Z.useEffect(()=>{const b=D=>{ot.current&&!ot.current.contains(D.target)&&r()};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[r]),d.jsxs("div",{ref:ot,onMouseDown:b=>b.stopPropagation(),className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[d.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(br,{size:18,className:"text-purple-400"}),d.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{ref:B,type:"file",accept:".json,.txt",className:"hidden",onChange:it}),d.jsx("button",{onClick:()=>B.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:d.jsx(Yo,{size:16})}),d.jsx("button",{onClick:Fe,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:d.jsx(Kx,{size:16})}),d.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),d.jsx("button",{onClick:Se,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:d.jsx(ed,{size:16})}),d.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:d.jsx(hi,{size:20})})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(td,{size:14})," Visual Preset"]}),d.jsx(Ni,{value:o,onChange:b=>vt(b),groups:Id})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ws,{size:14})," Render Scope"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("button",{onClick:()=>fe("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),d.jsx("button",{onClick:()=>fe("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(b0,{size:14})," Background Source"]}),d.jsx(Ni,{value:n.backgroundSource,onChange:b=>{b==="gradient"&&!n.backgroundGradient?(s("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):b==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(s("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):b==="color"&&!n.backgroundColor?(s("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):fe("backgroundSource",b)},groups:cg}),n.backgroundSource==="smart-gradient"&&d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:n.backgroundColor,onChange:b=>fe("backgroundColor",b.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),d.jsx("input",{type:"text",value:n.backgroundColor,onChange:b=>fe("backgroundColor",b.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:n.backgroundColor,onChange:b=>fe("backgroundColor",b.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:n.backgroundColor,onChange:b=>fe("backgroundColor",b.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&d.jsx("input",{type:"text",value:n.backgroundGradient,onChange:b=>fe("backgroundGradient",b.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&d.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),d.jsx("input",{ref:Et,type:"file",accept:"image/*",onChange:ae,className:"hidden"}),n.backgroundImage?d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:d.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),d.jsx("button",{onClick:()=>fe("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),d.jsx("button",{onClick:()=>Et.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:d.jsx(br,{size:14})})]}):d.jsxs("button",{onClick:()=>Et.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(Yo,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(xb,{size:14})," Background Effects"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[d.jsx("button",{onClick:()=>fe("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),d.jsx("button",{onClick:()=>fe("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&d.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),d.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:d.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:b=>fe("backgroundBlurStrength",parseInt(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),d.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Real Color Media Source"}),d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Disable dark dimming effect on background"})]}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:n.useRealColorMedia??!1,onChange:b=>fe("useRealColorMedia",b.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),d.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:n.enableGradientOverlay??!1,onChange:b=>fe("enableGradientOverlay",b.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Er,{size:14})," Lyric Display Mode"]}),d.jsx(Ni,{value:n.lyricDisplayMode,onChange:b=>fe("lyricDisplayMode",b),groups:vd})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(td,{size:14})," Highlight Effect"]}),d.jsx(Ni,{value:n.highlightEffect||"none",onChange:b=>{fe("highlightEffect",b)},groups:yd}),n.highlightEffect&&n.highlightEffect!=="none"&&d.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[d.jsxs("button",{onClick:()=>fe("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[d.jsx("span",{children:"Custom Colors"}),d.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:d.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&d.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:b=>fe("highlightColor",b.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:b=>fe("highlightColor",b.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:b=>fe("highlightBackground",b.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:b=>fe("highlightBackground",b.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Sb,{size:14})," Visible Elements"]}),d.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(b=>d.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[d.jsx("span",{className:"text-xs text-zinc-300",children:b.label}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:n[b.key],onChange:D=>fe(b.key,D.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},b.key))})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx($o,{size:14})," Intro Settings"]}),d.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[d.jsx("button",{onClick:()=>fe("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),d.jsx("button",{onClick:()=>fe("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&d.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),d.jsx("textarea",{value:n.introText,onChange:b=>fe("introText",b.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(b0,{size:14})," Channel Info / Watermark"]}),d.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[d.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:b=>fe("showChannelInfo",b.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&d.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),d.jsx("input",{ref:bt,type:"file",accept:"image/*",onChange:U,className:"hidden"}),n.channelInfoImage?d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:d.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),d.jsx("button",{onClick:()=>fe("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),d.jsx("button",{onClick:()=>bt.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:d.jsx(br,{size:14})})]}):d.jsxs("button",{onClick:()=>bt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(Yo,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),d.jsx("textarea",{value:n.channelInfoText??"",onChange:b=>fe("channelInfoText",b.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("button",{onClick:()=>fe("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsx(Ni,{value:n.channelInfoStyle||"classic",onChange:b=>fe("channelInfoStyle",b),groups:dg})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Zs,{size:12})}),d.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:b=>fe("channelInfoMarginScale",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Zs,{size:12})}),d.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:b=>fe("channelInfoSizeScale",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Yl,{size:14})," Song Info Design"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("button",{onClick:()=>fe("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>fe("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsx(Ni,{value:n.infoStyle||"classic",onChange:b=>fe("infoStyle",b),groups:ug})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Zs,{size:12})}),d.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:b=>fe("infoMarginScale",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx($o,{size:12})}),d.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:b=>fe("infoSizeScale",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx($o,{size:14})," Typography & Style"]}),d.jsxs("div",{className:"space-y-4 pt-1",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),d.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(b=>d.jsx("button",{onClick:()=>fe("textAlign",b),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===b?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:b},b))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>fe("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:d.jsx(zx,{size:14})}),d.jsx("button",{onClick:()=>fe("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:d.jsx(x0,{size:14})}),d.jsx("button",{onClick:()=>fe("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:d.jsx(kx,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>fe("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(Lx,{size:14})}),d.jsx("button",{onClick:()=>fe("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(cb,{size:14})}),d.jsx("button",{onClick:()=>fe("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:d.jsx(t1,{size:14})}),d.jsx("button",{onClick:()=>fe("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:d.jsx(Kb,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>fe("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),d.jsx("button",{onClick:()=>fe("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),d.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>fe("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),d.jsx("button",{onClick:()=>fe("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),d.jsx("button",{onClick:()=>fe("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),d.jsx("button",{onClick:()=>fe("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),d.jsx("button",{onClick:()=>fe("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),d.jsx("button",{onClick:()=>fe("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(qN,{value:n.fontFamily,onChange:b=>fe("fontFamily",b),customFontName:v,groups:YN})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),d.jsx("input",{ref:ft,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[d.jsx($o,{size:14,className:"text-purple-400 shrink-0"}),d.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),d.jsx("button",{onClick:()=>{fe("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),d.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:d.jsx(Nr,{size:14})})]}):d.jsxs("button",{onClick:()=>ft.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(Yo,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx($o,{size:12})}),d.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:b=>fe("fontSizeScale",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),d.jsx("span",{className:"text-zinc-300",children:d.jsx($o,{size:16})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Current Line Height"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.lyricLineHeight||1.2).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(x0,{size:12})}),d.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:n.lyricLineHeight||1.2,onChange:b=>fe("lyricLineHeight",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&d.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",value:n.fontColor,onChange:b=>fe("fontColor",b.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",value:n.fontColor,onChange:b=>fe("fontColor",b.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),d.jsx(Ni,{value:n.textEffect,onChange:b=>fe("textEffect",b),groups:lg})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),d.jsx(Ni,{value:n.textAnimation,onChange:b=>fe("textAnimation",b),groups:sg})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),d.jsx(Ni,{value:n.transitionEffect,onChange:b=>fe("transitionEffect",b),groups:ag})]}),d.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),n.visualTransitionDuration&&d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.visualTransitionDuration.toFixed(1),"s"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(Ni,{value:n.visualTransitionType||"none",onChange:b=>fe("visualTransitionType",b),groups:rg})}),n.visualTransitionType&&n.visualTransitionType!=="none"&&d.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:d.jsx("input",{type:"range",min:"0.1",max:"5.0",step:"0.1",value:n.visualTransitionDuration||1,onChange:b=>fe("visualTransitionDuration",parseFloat(b.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),d.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ws,{size:14})," Output Settings"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>w("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),d.jsx("button",{onClick:()=>w("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),d.jsx(Ni,{value:String(ge),onChange:b=>De(parseInt(b)),groups:ON})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),d.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(b=>d.jsx("button",{onClick:()=>N(b),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${_===b?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:b},b))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Engine"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>be("mediarecorder"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${He==="mediarecorder"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses browser's MediaRecorder API. Renders in realtime while playing audio.",children:"MediaRecorder"}),d.jsx("button",{onClick:()=>be("ffmpeg"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${He==="ffmpeg"?"bg-orange-500 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses FFmpeg WASM. Frame-by-frame rendering with professional codecs. Faster than realtime!",children:"FFmpeg "})]}),d.jsx("p",{className:"text-[9px] text-zinc-600 ml-1 leading-tight",children:He==="mediarecorder"?"Realtime recording while audio plays. Browser-dependent codecs.":"Frame-by-frame capture. With pro codecs (H.264, H.265)."})]}),He==="mediarecorder"?d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),d.jsx(Ni,{value:V,onChange:b=>H(b),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...$]}]})]}):d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FFmpeg Codec"}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{label:"H.264",value:"h264",desc:"Best Compatibility"},{label:"H.265",value:"h265",desc:"Higher Quality"}].map(b=>d.jsxs("button",{onClick:()=>Ne(b.value),className:`py-2 px-2 rounded-md text-[10px] font-medium transition-all border text-left ${Xe===b.value?"bg-orange-500 border-orange-400 text-white":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"}`,title:b.desc,children:[d.jsx("div",{className:"font-bold",children:b.label}),d.jsx("div",{className:"text-[8px] opacity-75",children:b.desc})]},b.value))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>ue("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),d.jsx("button",{onClick:()=>ue("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),d.jsx("button",{onClick:()=>ue("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${re==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),d.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[d.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[d.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",d.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),d.jsxs("button",{onClick:()=>ie(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[d.jsx(Cr,{size:14})," View Keyboard Shortcuts"]})]})]}),Ce&&d.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>ie(!1),children:d.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[d.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[d.jsx(Cr,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),d.jsx("button",{onClick:()=>ie(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:d.jsx(hi,{size:18})})]}),d.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),d.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[d.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),d.jsxs("div",{className:"flex gap-1 items-center",children:[d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),d.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),d.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),d.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:d.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",d.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),d.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[d.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[d.jsx(Ws,{size:16})," Start Render"]}),d.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},py=(n,t,o,s,r,u,h,y,v,m,x,S,w,_,N,V=!0,H=!0)=>{const $=b=>{const D=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return D?{r:parseInt(D[1],16),g:parseInt(D[2],16),b:parseInt(D[3],16)}:{r:255,g:255,b:255}},re=b=>{let D=0,q=0;if(b instanceof ImageBitmap?(D=b.width,q=b.height):b instanceof HTMLVideoElement?(D=b.videoWidth,q=b.videoHeight):(D=b.width,q=b.height),D&&q){const W=Math.max(t/D,o/q),Me=t/2-D/2*W,xe=o/2-q/2*W;n.drawImage(b,Me,xe,D*W,q*W)}},ue=(b,D,q)=>{if(D.includes(`
`))return D.split(`
`).flatMap(ke=>ue(b,ke,q));const W=D.split(" ");let Me=[],xe=W[0]||"";for(let ke=1;ke<W.length;ke++){const pe=W[ke],ye=xe+" "+pe;b.measureText(ye).width<q?xe=ye:(Me.push(xe),xe=pe)}Me.push(xe);const we=[];for(const ke of Me)if(b.measureText(ke).width<=q)we.push(ke);else{let pe="";for(const ye of ke)b.measureText(pe+ye).width<=q?pe+=ye:(pe&&we.push(pe),pe=ye);pe&&we.push(pe)}return we},ge=(b,D,q,W,Me,xe)=>{if(Me==="vhs"&&b instanceof CanvasRenderingContext2D)b.save(),b.globalCompositeOperation="screen",b.fillStyle="#ff0000",b.fillText(D,q-2,W),b.fillStyle="#00ff00",b.fillText(D,q,W),b.fillStyle="#0000ff",b.fillText(D,q+2,W),b.restore();else if(Me==="3d"){const we=b.fillStyle;b.fillStyle="rgba(0,0,0,0.5)";for(let ke=1;ke<=4;ke++)b.fillText(D,q+ke,W+ke);b.fillStyle=we,b.fillText(D,q,W)}else if(Me==="neon"){const we=b.fillStyle;b.shadowColor=we,b.shadowBlur=20,b.fillText(D,q,W),b.shadowBlur=40,b.fillText(D,q,W)}else if(Me==="outline")b.strokeText(D,q,W),b.fillText(D,q,W);else if(Me==="gradient"){const we=b.createLinearGradient(q,W-20,q,W+20);we.addColorStop(0,b.fillStyle),we.addColorStop(1,"#ffffff"),b.fillStyle=we,b.fillText(D,q,W)}else if(Me==="fire")b.save(),b.shadowBlur=5,b.shadowColor="#ff0000",b.fillStyle="#ff4500",b.fillText(D,q,W),b.shadowBlur=2,b.shadowColor="#ffff00",b.fillStyle="#ffcc00",b.fillText(D,q+1,W-1),b.restore();else if(Me==="emboss")b.fillStyle="rgba(255,255,255,0.7)",b.fillText(D,q-1,W-1),b.fillStyle="rgba(0,0,0,0.7)",b.fillText(D,q+1,W+1),b.fillStyle="rgba(128,128,128,0.5)",b.fillText(D,q,W);else if(Me==="mirror")b.fillText(D,q,W),b.save(),b.translate(q,W),b.scale(1,-1),b.translate(-q,-W),b.globalAlpha*=.2,b.fillText(D,q,W-40),b.restore();else if(Me==="neon-multi")b.fillStyle,b.shadowBlur=10,b.shadowColor="#fff",b.fillText(D,q,W),b.shadowBlur=20,b.shadowColor="#ff00de",b.fillText(D,q,W),b.shadowBlur=35,b.shadowColor="#00ffff",b.fillText(D,q,W);else if(Me==="gold"){const we=b.createLinearGradient(q,W-20,q,W+20);we.addColorStop(0,"#d4af37"),we.addColorStop(1,"#C5A028"),b.fillStyle=we,b.fillText(D,q,W)}else if(Me==="chrome"){const we=b.createLinearGradient(q,W-20,q,W+20);we.addColorStop(0,"#ebebeb"),we.addColorStop(.5,"#616161"),we.addColorStop(.51,"#ebebeb"),we.addColorStop(1,"#ebebeb"),b.fillStyle=we,b.fillText(D,q,W)}else if(Me==="frozen")b.shadowColor="#03A9F4",b.shadowBlur=20,b.fillStyle="#ffffff",b.fillText(D,q,W);else if(Me==="rainbow"){const we=b.createLinearGradient(q-100,W,q+100,W);we.addColorStop(0,"violet"),we.addColorStop(.16,"indigo"),we.addColorStop(.32,"blue"),we.addColorStop(.48,"green"),we.addColorStop(.64,"yellow"),we.addColorStop(.8,"orange"),we.addColorStop(1,"red"),b.fillStyle=we,b.fillText(D,q,W)}else if(Me==="retro")b.fillStyle="#ff00ff",b.shadowColor="#00ffff",b.shadowBlur=0,b.shadowOffsetX=4,b.shadowOffsetY=4,b.fillText(D,q,W);else if(Me==="cyberpunk")b.save(),b.fillStyle="#05d9e8",b.fillText(D,q-1,W-1),b.restore(),b.save(),b.fillStyle="#000000",b.fillText(D,q+2,W+2),b.restore(),b.save(),b.fillStyle="#fcee0a",b.fillText(D,q,W),b.restore();else if(Me==="glitch-text"){const we=(Math.random()-.5)*5,ke=(Math.random()-.5)*2;b.save(),b.fillStyle="red",b.fillText(D,q+we,W+ke),b.restore(),b.save(),b.fillStyle="cyan",b.fillText(D,q-we,W-ke),b.restore(),b.fillStyle="#ffffff",b.fillText(D,q,W)}else Me==="hologram"?(b.fillStyle="rgba(0, 255, 255, 0.7)",b.shadowColor="rgba(0,255,255,0.5)",b.shadowBlur=10,b.fillText(D,q,W)):(Me==="comic"&&(b.lineWidth=3,b.strokeStyle="#000000",b.strokeText(D,q,W),b.fillStyle="#ffcc00"),b.fillText(D,q,W));if(xe&&xe!=="none"){const ke=b.measureText(D).width;let pe=q;if(b.textAlign==="center"?pe=q-ke/2:b.textAlign==="right"&&(pe=q-ke),b.save(),b.beginPath(),b.lineWidth=Math.max(2,4*ie),b.strokeStyle=b.fillStyle,xe.includes("line-through")&&(b.moveTo(pe,W),b.lineTo(pe+ke,W)),xe.includes("underline")){const ye=b.font.match(/(\d+(\.\d+)?)px/),Ie=ye?parseFloat(ye[1]):50,Je=W+Ie*.4;b.moveTo(pe,Je),b.lineTo(pe+ke,Je)}b.stroke(),b.restore()}},De=(b,D,q,W,Me,xe,we,ke,pe,ye,Ie,Je,Ve)=>{const et=ke?.textCase||"none",G=(oe,ce)=>{if(!oe)return oe;if(et==="upper")return oe.toUpperCase();if(et==="lower")return oe.toLowerCase();if(et==="title")return oe.replace(/\w\S*/g,A=>A.charAt(0).toUpperCase()+A.substr(1).toLowerCase());if(et==="sentence"){const A=oe.toLowerCase();return ce?A.charAt(0).toUpperCase()+A.slice(1):A}return et==="invert"?oe.replace(/\w\S*/g,A=>A.charAt(0).toLowerCase()+A.slice(1).toUpperCase()):oe};let L=D.words||[];if(L.length===0){const oe=D.text.split(`
`);L=[],oe.forEach((ce,A)=>{const Oe=ce.split(" ").map(We=>({text:We,startTime:D.time,endTime:D.endTime||D.time+3}));L.push(...Oe),A<oe.length-1&&L.push({text:`
`,startTime:D.time,endTime:D.endTime})})}const he=L.filter(oe=>oe.text===`
`||oe.text.trim().length>0).map((oe,ce)=>({...oe,text:oe.text===`
`?`
`:G(oe.text,ce===0).trim()}));(ke?.highlightEffect?.includes("cyberpunk")||ke?.textEffect==="cyberpunk")&&(pe="'Orbitron', sans-serif"),b.font=`${Je} ${Ie} ${ye}px ${pe}`;const Ee=[];let me=[],se=0,E=.3;["default","custom"].includes(m)?E=.25:m==="monospace"&&(E=.5);const z=b.measureText("M").width*E;he.forEach((oe,ce)=>{if(oe.text===`
`){me.length>0&&Ee.push(me),me=[],se=0;return}const A=b.measureText(oe.text).width;let We=!oe.text.endsWith(" ");const Ge=/[-]$/,Dt=/^[-]/;Ge.test(oe.text.trim())&&(We=!1);const xt=he[ce+1];xt&&(Dt.test(xt.text.trim())||xt.text===`
`)&&(We=!1);const Jt=We?z:0;se+A>Me&&me.length>0&&(Ee.push(me),me=[],se=0),me.push(oe),se+=A+Jt}),me.length>0&&Ee.push(me);const O=W-(Ee.length-1)*xe/2;let M=ke.highlightColor||"#fb923c",ee=ke.highlightBackground||"#ffffff";const I=ke.highlightEffect||"none";ke.useCustomHighlightColors||(I.includes("blue")||I.includes("cyan")?(M="#3b82f6",ee="#3b82f6"):I.includes("purple")?(M="#a855f7",ee="#a855f7"):I.includes("green")?(M="#22c55e",ee="#22c55e"):I.includes("pink")?(M="#ec4899",ee="#ec4899"):I.includes("neon")?(M="#ffffff",ee="#ffffff"):I.includes("gold")?(M="#FFD700",ee="#B8860B"):I.includes("chrome")?(M="#E0E0E0",ee="#757575"):I.includes("fire")?(M="#FF4500",ee="#FF0000"):I.includes("glass")?(M="#ffffff",ee="rgba(255,255,255,0.1)"):I==="karaoke"&&(M="#fb923c",ee="#fb923c"));let le=ke.fontColor||"#ffffff";Ee.forEach((oe,ce)=>{const A=O+ce*xe;let Oe=0;oe.forEach((Ge,Dt)=>{if(Oe+=b.measureText(Ge.text).width,Dt<oe.length-1){let Jt=!Ge.text.endsWith(" ");const ut=/[-]$/,st=/^[-]/;ut.test(Ge.text.trim())&&(Jt=!1);const Re=oe[Dt+1];Re&&st.test(Re.text.trim())&&(Jt=!1),Oe+=Jt?z:0}});let We=q;b.textAlign==="center"?We=q-Oe/2:b.textAlign==="right"&&(We=q-Oe),b.save(),b.textAlign="left",b.textBaseline="middle",oe.forEach((Ge,Dt)=>{const xt=b.measureText(Ge.text).width,Jt=we>=Ge.startTime,ut=we>=Ge.startTime&&we<Ge.endTime;let st=le;const Re=I.includes("fill")||I.includes("smooth"),dt=Re?Jt:ut;if(dt&&I!=="none")if(I==="karaoke-smooth")if(ut){const Ye=Ge.endTime-Ge.startTime,lt=we-Ge.startTime,Gt=Math.max(0,Math.min(1,lt/Ye)),jn=b.createLinearGradient(We,0,We+xt,0);jn.addColorStop(Gt,M),jn.addColorStop(Math.min(1,Gt+.001),le),st=jn}else st=M;else st=M;if(b.save(),b.fillStyle=st,(ut||Re&&Jt)&&(I.includes("pill")||I.includes("box")||I.includes("rounded")||I.includes("fill")||I.includes("glass"))&&dt){const Ye=I.includes("pill")?ye*.4:ye*.15;b.fillStyle=ee;let lt=4*Ve;I.includes("pill")?lt=999:I.includes("rounded")||I.includes("glass")?lt=8*Ve:I.includes("box")&&(lt=0),I.includes("glass")&&(b.fillStyle="rgba(255,255,255,0.1)",b.shadowColor="rgba(255,255,255,0.2)",b.shadowBlur=10),b.beginPath(),b.roundRect?b.roundRect(We-Ye,A-xe/2,xt+Ye*2,xe,lt):b.rect(We-Ye,A-xe/2,xt+Ye*2,xe),b.fill(),I.includes("glass")&&(b.strokeStyle="rgba(255,255,255,0.3)",b.lineWidth=1,b.stroke()),I.includes("fill")||I.includes("pill")||I.includes("box")||I.includes("rounded")?(b.fillStyle="#000000",st="#000000"):b.fillStyle=M}if(dt){if(I.includes("underline")){const Ye=Math.max(2,ye*.08),lt=A+ye*.6;b.fillStyle=M,b.fillRect(We,lt,xt,Ye),b.fillStyle=st}if((I.includes("glow")||I.includes("neon"))&&(I.includes("neon")?(b.fillStyle="#ffffff",b.shadowColor=M,b.shadowBlur=20):(b.shadowColor=M,b.shadowBlur=10)),I.includes("outline")&&(b.strokeStyle=M,b.lineWidth=2*Ve,b.strokeText(Ge.text,We,A),b.fillStyle="transparent",I==="karaoke-outline"&&(st="transparent",b.fillStyle="transparent")),I.includes("shadow")&&(b.shadowColor="#000000",b.shadowOffsetX=3*Ve,b.shadowOffsetY=3*Ve,b.shadowBlur=0),I.includes("gradient")){const Ye=b.createLinearGradient(We,A-xe/2,We+xt,A+xe/2);Ye.addColorStop(0,M),Ye.addColorStop(1,ee),b.fillStyle=Ye,st=Ye}}let je=A,ze=We,Rt=0,Ct=1,yt=1,$t=1,xn=0;if(dt){const Ye=we-Ge.startTime;if(I.includes("bounce")||I==="karaoke-bounce")je-=10*Ve;else if(I.includes("wave"))je+=Math.sin(we*5+Dt)*8*Ve;else if(I.includes("pulse")){const Gt=1+Math.sin(we*6)*.1;Ct=Gt,yt=Gt}else if(I.includes("shake"))ze+=(Math.random()-.5)*6*Ve,je+=(Math.random()-.5)*6*Ve;else if(I.includes("wobble"))Rt=Math.sin(we*6)*.1;else if(I.includes("rotate")&&!I.includes("in"))Rt=Math.sin(we*3)*.1;else if(I.includes("spin"))Rt=we*3%(Math.PI*2);else if(I.includes("jello"))Ct=1+Math.sin(we*8)*.15,yt=1-Math.sin(we*8)*.15;else if(I.includes("heartbeat")){const Gt=we*2%1;(Gt<.15||Gt>.3&&Gt<.45)&&(Ct=1.15,yt=1.15)}else if(I.includes("flash"))$t=.5+Math.sin(we*10)*.5;else if(I.includes("tada")){const Gt=we*2%1;Gt<.1?(Rt=-.05,Ct=.9):Gt<.2&&(Rt=.05,Ct=1.1)}else I.includes("swing")?Rt=Math.sin(we*4)*.15:I.includes("glitch")&&Math.sin(we*15)>.8&&(ze+=(Math.random()-.5)*10,je+=(Math.random()-.5)*10);const lt=.3;if(Ye<lt){const Gt=Ye/lt,Ft=(Cn=>1-Math.pow(1-Cn,3))(Gt);if(I.includes("fade"))$t=Gt;else if(I.includes("slide"))je+=(1-Ft)*30*Ve,$t=Ft;else if(I.includes("drop"))je-=(1-Ft)*50*Ve,$t=Ft;else if(I.includes("zoom")||I.includes("scale")){const Cn=.5+.5*Ft;Ct*=Cn,yt*=Cn}else if(I.includes("elastic")){const Cn=Gt===0?0:Gt===1?1:Math.pow(2,-10*Gt)*Math.sin((Gt*10-.75)*(2*Math.PI)/3)+1;Ct*=Cn,yt*=Cn}else if(I.includes("flip"))yt*=Ft;else if(I.includes("rotate-in"))Rt+=(1-Ft)*-1,$t=Ft;else if(I.includes("roll"))ze-=(1-Ft)*50*Ve,Rt-=(1-Ft)*Math.PI,$t=Ft;else if(I.includes("lightspeed"))ze+=(1-Ft)*100*Ve,$t=Ft;else if(I.includes("blur"))xn=(1-Ft)*10,$t=Ft;else if(I.includes("shatter")){const Cn=1+(1-Ft)*2;Ct*=Cn,yt*=Cn,xn=(1-Ft)*10,$t=Ft}else I.includes("spiral")&&(Ct*=Ft,yt*=Ft,Rt+=(1-Ft)*Math.PI*2)}else I.includes("scale")&&(Ct*=1.3,yt*=1.3)}if(b.save(),$t<1&&(b.globalAlpha*=$t),xn>0&&(b.filter=`blur(${xn}px)`),Rt!==0||Ct!==1||yt!==1){const Ye=ze+xt/2,lt=je;b.translate(Ye,lt),b.rotate(Rt),b.scale(Ct,yt),b.translate(-Ye,-lt)}if(dt){if(I==="karaoke-smooth-plus"){const Ye=ke.textEffect||"none";if(ut){const lt=Ge.endTime-Ge.startTime,Gt=we-Ge.startTime,jn=Math.max(0,Math.min(1,Gt/lt)),Ft=ze+xt*jn,Cn=ke?.textDecoration||"none",gi=oi=>{if(Cn!=="none"){b.lineWidth=Math.max(2,3*Ve),b.strokeStyle=oi,b.beginPath();const Bi=je+ye*.45;Cn.includes("underline")&&(b.moveTo(ze,Bi),b.lineTo(ze+xt,Bi)),Cn.includes("line-through")&&(b.moveTo(ze,je),b.lineTo(ze+xt,je)),b.stroke()}};b.save(),b.beginPath(),b.rect(ze-50,je-xe,Ft-(ze-50),xe*2),b.clip(),b.fillStyle=M,ge(b,Ge.text,ze,je,Ye),gi(M),b.restore(),b.save(),b.beginPath(),b.rect(Ft,je-xe,ze+xt+50-Ft,xe*2),b.clip(),b.fillStyle=le,b.fillText(Ge.text,ze,je),gi(le),b.restore(),st="rgba(0,0,0,0)"}else b.fillStyle=M,ge(b,Ge.text,ze,je,Ye),st=M}else if(I.includes("gradient")||I.includes("chrome")||I.includes("gold")){const Ye=b.createLinearGradient(ze,je-xe/2,ze,je+xe/2);I.includes("gold")?(Ye.addColorStop(0,"#d4af37"),Ye.addColorStop(1,"#C5A028")):I.includes("chrome")?(Ye.addColorStop(0,"#ebebeb"),Ye.addColorStop(.5,"#616161"),Ye.addColorStop(.51,"#ebebeb"),Ye.addColorStop(1,"#ebebeb")):(Ye.addColorStop(0,M),Ye.addColorStop(1,ee)),b.fillStyle=Ye}if(I.includes("shadow")&&(b.save(),b.fillStyle="#000000",b.fillText(Ge.text,ze+2*Ve,je+2*Ve),b.restore()),I.includes("3d")){const Ye=b.fillStyle;b.fillStyle="rgba(0,0,0,0.5)";for(let lt=1;lt<=3;lt++)b.fillText(Ge.text,ze+lt*Ve,je+lt*Ve);b.fillStyle=Ye}if(I.includes("neon-multi"))b.shadowBlur=10,b.shadowColor="#fff",b.fillText(Ge.text,ze,je),b.shadowBlur=20,b.shadowColor="#ff00de",b.fillText(Ge.text,ze,je),b.shadowBlur=35,b.shadowColor="#00ffff",b.fillText(Ge.text,ze,je);else if(I.includes("cyberpunk"))b.save(),b.fillStyle="#05d9e8",b.fillText(Ge.text,ze-1,je-1),b.restore(),b.save(),b.fillStyle="#000000",b.fillText(Ge.text,ze+2,je+2),b.restore(),b.fillStyle="#fcee0a",b.fillText(Ge.text,ze,je);else if(I.includes("glitch-text")){const Ye=(Math.random()-.5)*5,lt=(Math.random()-.5)*2;b.save(),b.fillStyle="red",b.fillText(Ge.text,ze+Ye,je+lt),b.restore(),b.save(),b.fillStyle="cyan",b.fillText(Ge.text,ze-Ye,je-lt),b.restore(),b.fillStyle="#ffffff",b.fillText(Ge.text,ze,je)}else if(I.includes("retro")||I.includes("vhs")){const Ye=Math.sin(we*5)*2*Ve,lt=Math.random()>.95?(Math.random()-.5)*5:0;b.globalCompositeOperation="screen",b.fillStyle="#ff0000",b.fillText(Ge.text,ze-3*Ve+Ye,je+lt),b.fillStyle="#00ff00",b.fillText(Ge.text,ze+lt,je-Ye),b.fillStyle="#0000ff",b.fillText(Ge.text,ze+3*Ve-Ye,je+lt)}else if(I.includes("fire")){const Ye=Math.abs(Math.sin(we*15))*5,lt=Math.sin(we*20)*1*Ve;b.shadowBlur=5+Ye,b.shadowColor="#ff0000",b.fillStyle="#ff4500",b.fillText(Ge.text,ze,je+lt),b.shadowBlur=2,b.shadowColor="#ffff00",b.fillStyle="#ffcc00",b.fillText(Ge.text,ze+Math.sin(we*25)*1*Ve,je-1*Ve+lt)}else if(I.includes("typewriter")){const Ye=we-Ge.startTime,lt=Ge.endTime-Ge.startTime,Gt=Math.min(1,Math.max(0,Ye/lt)),jn=Math.floor(Ge.text.length*Gt),Ft=Ge.text.substring(0,jn);I.includes("outline")?(b.strokeStyle=M,b.strokeText(Ft,ze,je)):b.fillText(Ft,ze,je)}else!I.includes("neon-multi")&&!I.includes("retro")&&!I.includes("vhs")&&!I.includes("fire")&&(I.includes("outline")?(b.strokeStyle=M,b.lineWidth=2*Ve,b.strokeText(Ge.text,ze,je)):b.fillText(Ge.text,ze,je))}else b.fillText(Ge.text,ze,je);const Vn=ke?.textDecoration||"none";if(Vn!=="none"){if(b.lineWidth=Math.max(2,3*Ve),b.strokeStyle=st,b.beginPath(),Vn.includes("underline")&&!I.includes("underline")){const Ye=je+ye*.45;b.moveTo(ze,Ye),b.lineTo(ze+xt,Ye)}Vn.includes("line-through")&&(b.moveTo(ze,je),b.lineTo(ze+xt,je)),b.stroke()}b.restore(),b.restore();let mn=!Ge.text.endsWith(" ");const Fi=/[-]$/,mi=/^[-]/;Fi.test(Ge.text.trim())&&(mn=!1);const On=oe[Dt+1];On&&mi.test(On.text.trim())&&(mn=!1),We+=xt+(mn?z:0)}),b.restore()})},He=(b,D,q,W,Me,xe,we,ke)=>{const pe=ue(b,D,Me),ye=W-(pe.length-1)*xe/2;pe.forEach((Ie,Je)=>{const Ve=ye+Je*xe;if(we==="glass"){const et=b.measureText(Ie).width;b.save(),b.fillStyle="rgba(255, 255, 255, 0.1)",b.beginPath(),b.roundRect?b.roundRect(q-(b.textAlign==="center"?et/2:b.textAlign==="right"?et:0)-10,Ve-xe/2,et+20,xe,8):b.rect(q-(b.textAlign==="center"?et/2:b.textAlign==="right"?et:0)-10,Ve-xe/2,et+20,xe),b.fill(),b.strokeStyle="rgba(255, 255, 255, 0.2)",b.stroke(),b.restore()}ge(b,Ie,q,Ve,we,ke)})},be='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',Xe='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',Ne='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Ke='"Metal Mania", cursive',Ue='"Fredoka One", cursive',ot='"Shadows Into Light", cursive',ft='"Dancing Script", cursive',bt='"Orbitron", sans-serif',Et='"UnifrakturMaguntia", cursive';let B=be;m==="classic"?B=Xe:m==="monospace"?B=Ne:m==="metal"?B=Ke:m==="kids"?B=Ue:m==="sad"?B=ot:m==="romantic"?B=ft:m==="tech"?B=bt:m==="gothic"?B=Et:m==="custom"&&(B=N?.fontFamily||be),x&&(B="CustomFont, sans-serif"),N&&N.fontFamily!=="sans-serif"&&(B=N.fontFamily);const Ce=t<=o,ie=Math.min(t,o)/1080;if(N&&(N.backgroundSource==="color"||N.backgroundSource==="smart-gradient")?n.fillStyle=N.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),N?.backgroundSource==="gradient"&&N.backgroundGradient)n.fillStyle=N.backgroundGradient,n.fillRect(0,0,t,o);else if(N?.backgroundSource==="smart-gradient"){const b=N.backgroundColor||"#312e81",D=$(b),q=n.createLinearGradient(0,0,t,o);q.addColorStop(0,b),q.addColorStop(.5,`rgb(${Math.floor(D.r*.6)}, ${Math.floor(D.g*.6)}, ${Math.floor(D.b*.6)})`),q.addColorStop(1,"#000000"),n.fillStyle=q,n.fillRect(0,0,t,o)}else if(N?.backgroundSource==="image"&&N.backgroundImage){const b=y.get("__custom_bg__");b&&re(b)}if(N&&N.backgroundBlurStrength>0?n.filter=`blur(${N.backgroundBlurStrength}px)`:w&&(n.filter="blur(12px)"),!N||N.backgroundSource==="timeline"||N.backgroundSource==="custom"){const b=N?N.backgroundSource==="timeline":!0;let D=!1;if(b){const q=N?.visualTransitionType||"none",W=N?.visualTransitionDuration||1,Me=h.filter(xe=>xe.type==="audio"?!1:s>=xe.startTime&&s<xe.endTime||q==="crossfade"&&s>=xe.endTime&&s<xe.endTime+W);Me.sort((xe,we)=>{const ke=(xe.layer||0)-(we.layer||0);return ke!==0?ke:xe.startTime-we.startTime}),Me.length>0&&(Me.forEach(xe=>{const we=xe.layer||0;if(N&&N.layerVisibility?.visual?.[we]===!1)return;const ke=xe.type==="video"?v.get(xe.id):null,pe=xe.type!=="video"?y.get(xe.id):null;let ye=1;if(q!=="none"){if(s<xe.startTime+W){const Ie=(s-xe.startTime)/W;ye=Math.max(0,Math.min(1,Ie))}if(s>=xe.endTime){let Ie=!1;if(q==="crossfade"&&(Ie=h.some(Je=>Je.id!==xe.id&&(Je.layer||0)===(xe.layer||0)&&Je.startTime>=xe.endTime-.1&&Je.startTime<xe.endTime+.2)),!Ie){const Ve=1-(s-xe.endTime)/W;ye=Math.min(ye,Math.max(0,Math.min(1,Ve)))}}else if(q==="fade-to-black"&&s>xe.endTime-W){const Ie=(xe.endTime-s)/W;ye=Math.min(ye,Math.max(0,Math.min(1,Ie)))}}ye>0&&(n.save(),n.globalAlpha=ye,ke?re(ke):pe&&re(pe),n.restore())}),D=!0)}if(!D&&u.coverUrl&&h.length===0){const q=u.backgroundType==="video"?v.get("background"):null,W=y.get("cover");q?re(q):W&&re(W)}}if((N&&N.backgroundBlurStrength>0||w)&&(n.filter="none"),!["just_video","none"].includes(m)&&!N?.useRealColorMedia&&(n.fillStyle=N&&(N.backgroundSource==="color"||N.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),N?.enableGradientOverlay){const b=n.createLinearGradient(0,o,0,0);b.addColorStop(0,"rgba(0, 0, 0, 0.95)"),b.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),b.addColorStop(.7,"rgba(0, 0, 0, 0)"),n.fillStyle=b,n.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const fe=r.findIndex((b,D)=>{if(b.endTime!==void 0)return s>=b.time&&s<b.endTime;const q=r[D+1];return s>=b.time&&(!q||s<q.time)});let vt=fe;if(vt===-1&&r.length>0)if(s<r[0].time)vt=0;else{const b=r.findIndex(D=>D.time>s);vt=b!==-1?b:r.length-1}const U=N?.introMode==="manual"&&N.introText?N.introText:`${u.title}
${u.artist}`;let ae=fe===-1&&s<5&&(N?.showIntro??!0)&&(N?.introMode!=="manual"||H)&&(r.length===0||s<r[0].time),Se=(Ce?50:60)*ie,Fe=(Ce?25:30)*ie,it=(Ce?80:100)*ie;if(m==="large"?(Se=(Ce?90:120)*ie,it=(Ce?110:140)*ie):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(Se=(Ce?80:110)*ie,it=(Ce?110:140)*ie):["sad","romantic","gothic"].includes(m)?(Se=(Ce?60:75)*ie,it=(Ce?90:120)*ie):["slideshow","subtitle"].includes(m)&&(Se=(Ce?30:40)*ie),Se*=S,Fe*=S,it*=S,(N?.showLyrics??!0)&&(fe!==-1||ae||N?.lyricDisplayMode==="all"&&r.length>0)){let b=o/2;N?.contentPosition==="top"?b=o*.15:N?.contentPosition==="bottom"&&(b=o*.9);let D=0;const q=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(q||m==="slideshow"||m==="subtitle"){const ke=ae?{text:U}:r[fe]||r[vt];if(ke){n.font=`900 ${Se}px ${B}`;const pe=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?ke.text.toUpperCase():ke.text,ye=ue(n,pe,t*.9);ye.length>1&&(D=(ye.length-1)*(Se*1.2)/2)}}let W=q?-1:-2,Me=q?1:2;N?.lyricDisplayMode==="active-only"?(W=0,Me=0):N?.lyricDisplayMode==="next-only"?(W=0,Me=1):N?.lyricDisplayMode==="previous-next"?(W=-1,Me=1):N?.lyricDisplayMode==="all"&&(W=-r.length,Me=r.length);const xe=new Map,we=new Map;{const ke=Math.max((Ce?30:40)*ie,it-Se);for(let pe=W;pe<=Me;pe++){let ye=0,Ie=!1;if(ae&&pe===0){const Je=Se*1.2,Ve=Fe*1.2,G=U.split(`
`).length>1;ye=Je+(G?Ve:0),Ie=!0}else{const Je=vt+pe;if(Je>=0&&Je<r.length){const Ve=r[Je];Ie=Je===fe;const et=Ie?Se:Fe;let G=Ie?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",L=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||Ie?(N?.fontWeight&&(G=N.fontWeight),N?.fontStyle&&(L=N.fontStyle)):(G="400",L="normal")),n.font=`${L} ${G} ${et}px ${B}`;let he=Ve.text,Ee=N?.textCase||"none";Ee==="none"&&Ie&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Ee="upper"),Ee==="upper"?he=he.toUpperCase():Ee==="lower"?he=he.toLowerCase():Ee==="title"?he=he.replace(/\w\S*/g,se=>se.charAt(0).toUpperCase()+se.substr(1).toLowerCase()):Ee==="sentence"?he=he.charAt(0).toUpperCase()+he.slice(1).toLowerCase():Ee==="invert"&&(he=he.replace(/\w\S*/g,se=>se.charAt(0).toLowerCase()+se.slice(1).toUpperCase())),ye=ue(n,he,t*.9).length*(et*1.2)}}we.set(pe,ye)}xe.set(0,b);for(let pe=1;pe<=Me;pe++){const ye=xe.get(pe-1)??b,Ie=we.get(pe-1)??0,Je=we.get(pe)??0;xe.set(pe,ye+Ie/2+ke+Je/2)}for(let pe=-1;pe>=W;pe--){const ye=xe.get(pe+1)??b,Ie=we.get(pe+1)??0,Je=we.get(pe)??0;xe.set(pe,ye-Ie/2-ke-Je/2)}}for(let ke=W;ke<=Me;ke++){let pe=null,ye=!1;if(ae)ke===0&&(pe={time:0,text:U},ye=!0);else{const Ie=vt+ke;Ie>=0&&Ie<r.length&&(pe=r[Ie],ye=Ie===fe)}if(pe){N?.lyricDisplayMode,n.textAlign=N?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const Ie=N?.fontColor||"#ffffff";let Je=Ie;if(!ye){const Re=$(Ie);Je=`rgba(${Re.r}, ${Re.g}, ${Re.b}, 0.5)`}let Ve=ye?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",et=["classic","romantic"].includes(m)?"italic":"normal",G="none";(m==="custom"||m==="default")&&((N?.lyricStyleTarget||"active-only")==="all"||ye?(N?.fontWeight&&(Ve=N.fontWeight),N?.fontStyle&&(et=N.fontStyle),N?.textDecoration&&(G=N.textDecoration)):(Ve="400",et="normal",G="none")),n.font=`${et} ${Ve} ${ye?Se:Fe}px ${B}`,n.fillStyle=Je;const L=N?.transitionEffect||"none";let he=1,Ee=0,me=0,se=1,E=1,z=0,O=0;if(ye&&L!=="none"){const Re=s-pe.time,dt=pe.endTime?pe.endTime-s:.5,je=.5,ze=Re<je?Re/je:pe.endTime&&dt<je?dt/je:1;if(ze<1){he=Math.min(1,ze*2);const Rt=yt=>1+2.70158*Math.pow(yt-1,3)+1.70158*Math.pow(yt-1,2),Ct=yt=>{const $t=2*Math.PI/3;return yt===0?0:yt===1?1:Math.pow(2,-10*yt)*Math.sin((yt*10-.75)*$t)+1};if(L==="slide")Ee=(1-ze)*(Re<je?30:-30);else if(L==="zoom"){const yt=.5+ze*.5;se=yt,E=yt}else if(L==="blur")z=(1-ze)*10;else if(L==="float")Ee=(1-ze)*(Re<je?50:-50);else if(L==="drop")Ee=(1-Rt(ze))*-200,he=ze;else if(L==="flip")E=ze;else if(L==="rotate-in")O=(1-ze)*-Math.PI/2,he=ze;else if(L==="spiral")se=ze,E=ze,O=(1-ze)*Math.PI*2,he=ze;else if(L==="shatter"){const yt=3-2*ze;se=yt,E=yt,z=(1-ze)*20,he=ze}else if(L==="lightspeed")me=(1-ze)*300,he=ze;else if(L==="roll")me=(1-ze)*-300,O=(1-ze)*-Math.PI,he=ze;else if(L==="elastic"){const yt=Ct(ze);se=yt,E=yt,he=ze}}}n.save(),n.globalAlpha=he,z>0&&(n.filter=`blur(${z}px)`);const M=ye&&N?.textAnimation||"none";let ee=pe.text,I=N?.textCase||"none";I==="none"&&ye&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(I="upper"),I==="upper"?ee=ee.toUpperCase():I==="lower"?ee=ee.toLowerCase():I==="title"?ee=ee.replace(/\w\S*/g,Re=>Re.charAt(0).toUpperCase()+Re.substr(1).toLowerCase()):I==="sentence"?ee=ee.charAt(0).toUpperCase()+ee.slice(1).toLowerCase():I==="invert"&&(ee=ee.replace(/\w\S*/g,Re=>Re.charAt(0).toLowerCase()+Re.slice(1).toUpperCase()));let le=0,oe=0,ce=1,A=1,Oe=0;if(ye&&M!=="none")if(M==="bounce")oe=Math.sin(s*6)*15*ie;else if(M==="pulse"){const Re=1+Math.sin(s*4)*.08;ce=Re,A=Re}else if(M==="wave")oe=Math.sin(s*4)*20*ie,Oe=Math.sin(s*4)*.05;else if(M==="glitch")Math.sin(s*10)>.8&&(le=(Math.random()-.5)*15*ie,oe=(Math.random()-.5)*15*ie);else if(M==="shake")le=(Math.random()-.5)*5*ie,oe=(Math.random()-.5)*5*ie;else if(M==="typewriter"){const dt=Math.floor((s-pe.time)*30);ee=ee.substring(0,Math.max(0,dt))}else if(M==="wobble"){Oe=Math.sin(s*5)*.05;const Re=1+Math.sin(s*3)*.05;ce=Re,A=Re}else if(M==="breathe"){const Re=1+Math.sin(s*2)*.03;ce=Re,A=Re}else if(M==="rotate")Oe=Math.sin(s*2)*.05;else if(M==="sway")Oe=Math.sin(s*2)*.08;else if(M==="flicker")n.globalAlpha=he*(.8+Math.random()*.2);else if(M==="jello")ce=1+Math.sin(s*6)*.1,A=1-Math.sin(s*6)*.1;else if(M==="spin")Oe=s%2*Math.PI;else if(M==="heartbeat"){const Re=s*1.5%1;(Re<.1||Re>.3&&Re<.4)&&(ce=1.1,A=1.1)}else if(M==="tada"){const Re=s*1.5%1;Re<.1?(ce=.9,A=.9,Oe=-.05):Re<.2?(ce=1.1,A=1.1,Oe=.05):(ce=1,A=1,Oe=0)}else M==="swing"&&(Oe=Math.sin(s*3)*.1);let We=0;xe.has(ke)?We=xe.get(ke)+(ke===0?Ee:0):(We=m==="subtitle"&&ke===0&&N?.lyricDisplayMode!=="all"?o-140*ie:b+ke*it+(ke===0?Ee:0),m!=="custom"&&(ke<0?We-=D:ke>0&&(We+=D))),We+=oe;let Ge=t/2;n.textAlign==="left"?Ge=60*ie:n.textAlign==="right"&&(Ge=t-60*ie),Ge+=me+le;const Dt=se*ce,xt=E*A,Jt=O+Oe;(Dt!==1||xt!==1||Jt!==0)&&(n.translate(Ge,We),n.rotate(Jt),n.scale(Dt,xt),n.translate(-Ge,-We));const ut=ye?N?.textEffect||"preset":"none";if(ae&&ke===0&&N?.introMode!=="manual"){const Re=ee.split(`
`),dt=Re[0],je=Re.slice(1).join(`
`),ze=Se*1.2,Rt=Fe*1.2,Ct=20*ie;let yt=We;je&&(yt=We-Rt/2-Ct/2);const $t=We+ze/2+Ct/2;if(n.font=`${et} ${Ve} ${Se}px ${B}`,He(n,dt,Ge,yt,t*.9,ze,ut,G),je){const xn=m==="custom"&&N?.fontWeight?N.fontWeight:"400";n.font=`${et} ${xn} ${Fe}px ${B}`,He(n,je,Ge,$t,t*.9,Rt,ut,G)}}else{const Re=ye?Se:Fe;N&&N.highlightEffect&&N.highlightEffect,ye&&pe?De(n,pe,Ge,We,t*.9,Re*(N?.lyricLineHeight||1.2),s,N,B,Re,Ve,et,ie):He(n,ee,Ge,We,t*.9,Re*(N?.lyricLineHeight||1.2),ut,G)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const b=N?N.showTitle||N.showArtist:!0,D=N?N.showCover:!0;if(b||D)if(m==="custom"||m==="default"){const q=N?.infoPosition||"top-left",W=N?.infoStyle||"classic",Me=W==="box",xe=Me?16*ie:12*ie,we=40*ie*(N?.infoMarginScale??1);let ke="left",pe="top";q.includes("left")?ke="left":q.includes("right")?ke="right":ke="center",q.includes("top")?pe="top":pe="bottom";const ye=N?.infoSizeScale??1,Ie=(W==="minimal"||W==="modern"?0:100*ie)*ye,Je=D&&Ie>0&&u.coverUrl!==null,Ve=Je?u.backgroundType==="video"?v.get("background"):y.get("cover"):null,et=(W==="minimal"?20:W==="modern"||W==="modern_art"?40:28)*ie,G=(W==="minimal"?14:W==="modern"||W==="modern_art"?24:18)*ie,L=et*ye,he=G*ye,Ee=`bold ${L}px ${B}`,me=`${he}px ${B}`,se=20*ie,E=Me?24*ie:0,z=N?.fontColor||"#ffffff",O=W==="modern"||W==="modern_art"?z:N?.fontColor||"#d4d4d8";n.font=Ee;const M=n.measureText(u.title),ee=N?.showTitle?M.width:0;n.font=me;const I=n.measureText(u.artist),le=N?.showArtist?I.width:0;let oe=0,ce=0;if(ke==="center"){oe=Math.max(Je&&Ve?Ie:0,ee,le)+E*2;let Re=0;Je&&Ve&&(Re+=Ie),(N?.showTitle??!0)&&(Re+=(Je&&Ve?se:0)+L),(N?.showArtist??!0)&&(Re+=(Je&&Ve||(N?.showTitle??!0)?5*ie:0)+he),ce=Re+E*2}else{const st=Math.max(ee,le);oe=(Je&&Ve?Ie+se:0)+st+E*2;const dt=(N?.showTitle?L:0)+(N?.showArtist?he+5*ie:0);ce=Math.max(dt,Je&&Ve?Ie:0)+E*2}let A=0,Oe=0;ke==="left"?A=we:ke==="right"?A=t-we:A=t/2,pe==="top"?Oe=we:Oe=o-we;let We=0,Ge=0;ke==="left"?We=A:ke==="right"?We=A-oe:We=A-oe/2,pe==="top"?Ge=Oe:Ge=Oe-ce,Me&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(We,Ge,oe,ce,xe),n.fill(),n.restore());const Dt=We+E,xt=Ge+E,Jt=oe-E*2,ut=ce-E*2;if(ke==="center"){let st=xt;const Re=Dt+Jt/2;if(n.textAlign="center",pe==="top"){if(Je&&Ve){n.save(),n.beginPath();const dt=Re-Ie/2;W==="circle_art"?n.arc(Re,st+Ie/2,Ie/2,0,Math.PI*2):n.roundRect(dt,st,Ie,Ie,xe/2),n.clip(),n.drawImage(Ve,dt,st,Ie,Ie),n.restore(),st+=Ie+se}(N?.showTitle??!0)&&(n.fillStyle=z,n.font=Ee,n.textBaseline="top",n.fillText(u.title,Re,st),st+=L+5*ie),(N?.showArtist??!0)&&(n.fillStyle=O,n.font=me,n.textBaseline="top",n.fillText(u.artist,Re,st))}else{if(Je&&Ve){n.save(),n.beginPath();const dt=Re-Ie/2;W==="circle_art"?n.arc(Re,st+Ie/2,Ie/2,0,Math.PI*2):n.roundRect(dt,st,Ie,Ie,xe/2),n.clip(),n.drawImage(Ve,dt,st,Ie,Ie),n.restore(),st+=Ie+se}(N?.showTitle??!0)&&(n.fillStyle=z,n.font=Ee,n.textBaseline="top",n.fillText(u.title,Re,st),st+=L+5*ie),(N?.showArtist??!0)&&(n.fillStyle=O,n.font=me,n.textBaseline="top",n.fillText(u.artist,Re,st))}}else{const st=ke==="right",Re=xt+ut/2;let dt=Dt;if(st&&(dt=Dt+Jt),Je&&Ve){const Rt=Re-Ie/2,Ct=st?dt-Ie:dt;n.save(),n.beginPath(),W==="circle_art"?n.arc(Ct+Ie/2,Rt+Ie/2,Ie/2,0,Math.PI*2):n.roundRect(Ct,Rt,Ie,Ie,xe/2),n.clip(),n.drawImage(Ve,Ct,Rt,Ie,Ie),n.restore(),st?dt-=Ie+se:dt+=Ie+se}const je=(N?.showTitle?L:0)+(N?.showArtist?he+5*ie:0);let ze=Re-je/2;n.textAlign=st?"right":"left",n.textBaseline="top",(N?.showTitle??!0)&&(n.fillStyle=z,n.font=Ee,n.fillText(u.title,dt,ze),ze+=L+5*ie),(N?.showArtist??!0)&&(n.fillStyle=O,n.font=me,n.fillText(u.artist,dt,ze))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(b){n.textAlign="center",n.textBaseline="middle";let q=80*ie;["testing","testing_up","one_line","one_line_up"].includes(m)&&(q=120*ie),(N?.showTitle??!0)&&(n.font=`bold ${20*ie}px ${B}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?u.title.toUpperCase():u.title,t/2,o-q-30*ie)),(N?.showArtist??!0)&&(n.font=`${16*ie}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,t/2,o-q))}}else{const q=40*ie*(N?.infoMarginScale??1),W=t===o,Me=(Ce?W?110:150:100)*ie,xe=u.coverUrl?y.get("cover"):null,we=12*ie;if(Ce){const ke=q*(W?1.5:3),pe=t/2,ye=pe-Me/2,Ie=ke;if(D&&(n.save(),n.beginPath(),n.roundRect(ye,Ie,Me,Me,we),n.clip(),xe?n.drawImage(xe,ye,Ie,Me,Me):(n.fillStyle="#27272a",n.fillRect(ye,Ie,Me,Me)),n.restore()),b){n.textAlign="center",n.textBaseline="top";const Je=Ie+(D?Me+25*ie:0);(N?.showTitle??!0)&&(n.font=`bold ${(W?26:36)*ie}px ${B}`,n.fillStyle="#ffffff",n.fillText(u.title,pe,Je)),(N?.showArtist??!0)&&(n.font=`${(W?18:24)*ie}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,pe,Je+(N?.showTitle??!0?(W?30:40)*ie:0)))}}else{const ke=q,pe=q;if(D&&(n.save(),n.beginPath(),n.roundRect(ke,pe,Me,Me,we),n.clip(),xe?n.drawImage(xe,ke,pe,Me,Me):(n.fillStyle="#27272a",n.fillRect(ke,pe,Me,Me)),n.restore()),b){n.textAlign="left",n.textBaseline="top";const ye=ke+(D?Me+25*ie:0),Ie=28*ie,Je=pe+Me/2-Ie;(N?.showTitle??!0)&&(n.font=`bold ${Ie}px ${B}`,n.fillStyle="#ffffff",n.fillText(u.title,ye,Je)),(N?.showArtist??!0)&&(n.font=`${18*ie}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(u.artist,ye,Je+(N?.showTitle??!0?Ie+5*ie:0)))}}}}if(N?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const b=N.channelInfoPosition||"bottom-right",D=N.channelInfoStyle||"classic",q=N.channelInfoSizeScale??1,W=N.channelInfoMarginScale??1,Me=y.get("__channel_info__"),xe=N.channelInfoText;if(!(!Me&&!xe)){if(!(D==="logo"&&!Me)){if(!(D==="minimal"&&!xe)){n.save();const we=40*ie*W,ke=80*ie*q,pe=D==="modern"||D==="logo"?ke*1.2:ke,ye=20*ie*q,Ie=y.get("__channel_info_text_svg__"),Je=!!Ie;let Ve=0,et=ye;if(Je&&Ie){et=ye*1.5;const ee=Ie.width/Ie.height;Ve=et*ee}else n.font=`bold ${ye}px sans-serif`,xe&&D!=="logo"&&(Ve=n.measureText(xe).width);const G=12*ie*q,L=12*ie*q,he=8*ie*q;let Ee=0,me=0;const se=!!Me&&D!=="minimal",E=!!xe&&D!=="logo";D==="modern"?(Ee=Math.max(se?pe:0,E?Ve+L*2:0),me=(se?pe:0)+(se&&E?G:0)+(E?et+he*2:0)):D==="box"?(Ee=(se?pe:0)+(se&&E?G:0)+(E?Ve:0)+L*2,me=Math.max(se?pe:0,E?et:0)+he*2):D==="minimal"?(Ee=E?Ve+L*2:0,me=E?et+he*2:0):D==="logo"?(Ee=pe,me=pe):(Ee=(se?pe:0)+(se&&E?G:0)+(E?Ve+L*2:0),me=Math.max(se?pe:0,E?et+he*2:0));let z=0,O=0;b.includes("left")?z=we:b.includes("right")?z=t-we-Ee:b.includes("center")&&(z=(t-Ee)/2),b.includes("top")?O=we:b.includes("bottom")&&(O=o-we-me),D==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(z,O,Ee,me,12*ie*q),n.fill()):n.fillRect(z,O,Ee,me),n.shadowColor="transparent",n.shadowBlur=0);const M=(ee,I,le,oe,ce)=>{if(D!=="box"&&D!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(ee,I,le,oe,8*ie*q),n.fill()):n.fillRect(ee,I,le,oe)),Je&&Ie){const A=ee+(le-Ve)/2,Oe=I+(oe-et)/2;n.drawImage(Ie,A,Oe,Ve,et)}else{n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const A=ee+(le-Ve)/2,Oe=I+(oe-et)/2+et*.1;n.fillText(ce,A,Oe),n.shadowColor="transparent"}};if(D==="modern"){let ee=O;if(se){const I=z+(Ee-pe)/2;n.drawImage(Me,I,ee,pe,pe),ee+=pe+G}if(E){const I=Ve+L*2,le=et+he*2,oe=z+(Ee-I)/2;M(oe,ee,I,le,xe)}}else{const ee=b.includes("right");let I=z+(D==="box"?L:0);const le=O+me/2;if(ee&&(D==="classic"||D==="circle")){if(E){const oe=Ve+L*2,ce=et+he*2;M(I,le-ce/2,oe,ce,xe),I+=oe+G}se&&(D==="circle"?(n.save(),n.beginPath(),n.arc(I+pe/2,le,pe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Me,I,le-pe/2,pe,pe),n.restore()):n.drawImage(Me,I,le-pe/2,pe,pe))}else if(se&&(D==="circle"?(n.save(),n.beginPath(),n.arc(I+pe/2,le,pe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Me,I,le-pe/2,pe,pe),n.restore()):n.drawImage(Me,I,le-pe/2,pe,pe),I+=pe+G),E){const oe=Ve+(D==="box"?0:L*2),ce=et+(D==="box"?0:he*2);D==="box"?Je&&Ie?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(Ie,I,le-et/2,Ve,et),n.shadowColor="transparent"):(n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(xe,I,le+et*.1),n.shadowColor="transparent"):M(I,le-ce/2,oe,ce,xe)}}n.restore()}}}}};var Zt;(function(n){n.LOAD="LOAD",n.EXEC="EXEC",n.FFPROBE="FFPROBE",n.WRITE_FILE="WRITE_FILE",n.READ_FILE="READ_FILE",n.DELETE_FILE="DELETE_FILE",n.RENAME="RENAME",n.CREATE_DIR="CREATE_DIR",n.LIST_DIR="LIST_DIR",n.DELETE_DIR="DELETE_DIR",n.ERROR="ERROR",n.DOWNLOAD="DOWNLOAD",n.PROGRESS="PROGRESS",n.LOG="LOG",n.MOUNT="MOUNT",n.UNMOUNT="UNMOUNT"})(Zt||(Zt={}));const KN=(()=>{let n=0;return()=>n++})(),XN=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),QN=new Error("called FFmpeg.terminate()");class ZN{#t=null;#i={};#n={};#o=[];#l=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:o,data:s}})=>{switch(o){case Zt.LOAD:this.loaded=!0,this.#i[t](s);break;case Zt.MOUNT:case Zt.UNMOUNT:case Zt.EXEC:case Zt.FFPROBE:case Zt.WRITE_FILE:case Zt.READ_FILE:case Zt.DELETE_FILE:case Zt.RENAME:case Zt.CREATE_DIR:case Zt.LIST_DIR:case Zt.DELETE_DIR:this.#i[t](s);break;case Zt.LOG:this.#o.forEach(r=>r(s));break;case Zt.PROGRESS:this.#l.forEach(r=>r(s));break;case Zt.ERROR:this.#n[t](s);break}delete this.#i[t],delete this.#n[t]})};#e=({type:t,data:o},s=[],r)=>this.#t?new Promise((u,h)=>{const y=KN();this.#t&&this.#t.postMessage({id:y,type:t,data:o},s),this.#i[y]=u,this.#n[y]=h,r?.addEventListener("abort",()=>{h(new DOMException(`Message # ${y} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(XN);on(t,o){t==="log"?this.#o.push(o):t==="progress"&&this.#l.push(o)}off(t,o){t==="log"?this.#o=this.#o.filter(s=>s!==o):t==="progress"&&(this.#l=this.#l.filter(s=>s!==o))}load=({classWorkerURL:t,...o}={},{signal:s}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:Zt.LOAD,data:o},void 0,s));exec=(t,o=-1,{signal:s}={})=>this.#e({type:Zt.EXEC,data:{args:t,timeout:o}},void 0,s);ffprobe=(t,o=-1,{signal:s}={})=>this.#e({type:Zt.FFPROBE,data:{args:t,timeout:o}},void 0,s);terminate=()=>{const t=Object.keys(this.#n);for(const o of t)this.#n[o](QN),delete this.#n[o],delete this.#i[o];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,o,{signal:s}={})=>{const r=[];return o instanceof Uint8Array&&r.push(o.buffer),this.#e({type:Zt.WRITE_FILE,data:{path:t,data:o}},r,s)};mount=(t,o,s)=>{const r=[];return this.#e({type:Zt.MOUNT,data:{fsType:t,options:o,mountPoint:s}},r)};unmount=t=>{const o=[];return this.#e({type:Zt.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:s}={})=>this.#e({type:Zt.READ_FILE,data:{path:t,encoding:o}},void 0,s);deleteFile=(t,{signal:o}={})=>this.#e({type:Zt.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:s}={})=>this.#e({type:Zt.RENAME,data:{oldPath:t,newPath:o}},void 0,s);createDir=(t,{signal:o}={})=>this.#e({type:Zt.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#e({type:Zt.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#e({type:Zt.DELETE_DIR,data:{path:t}},void 0,o)}var fg;(function(n){n.MEMFS="MEMFS",n.NODEFS="NODEFS",n.NODERAWFS="NODERAWFS",n.IDBFS="IDBFS",n.WORKERFS="WORKERFS",n.PROXYFS="PROXYFS"})(fg||(fg={}));const WN=new Error("failed to get response body reader"),eA=new Error("failed to complete download"),tA="Content-Length",nA=async(n,t)=>{const o=await fetch(n);let s;try{const r=parseInt(o.headers.get(tA)||"-1"),u=o.body?.getReader();if(!u)throw WN;const h=[];let y=0;for(;;){const{done:x,value:S}=await u.read(),w=S?S.length:0;if(x){if(r!=-1&&r!==y)throw eA;t&&t({url:n,total:r,received:y,delta:w,done:x});break}h.push(S),y+=w,t&&t({url:n,total:r,received:y,delta:w,done:x})}const v=new Uint8Array(y);let m=0;for(const x of h)v.set(x,m),m+=x.length;s=v.buffer}catch(r){console.log("failed to send download progress event: ",r),s=await o.arrayBuffer()}return s},$s=async(n,t,o=!1,s)=>{const r=o?await nA(n,s):await(await fetch(n)).arrayBuffer(),u=new Blob([r],{type:t});return URL.createObjectURL(u)};let Ys=null,Xu=!1,vr=!1;async function iA(n){if(Ys&&Xu)return Ys;if(vr){for(;vr;)await new Promise(t=>setTimeout(t,100));if(Ys&&Xu)return Ys}vr=!0;try{const t=new ZN;if(t.on("log",({message:s})=>{n?.(`[FFmpeg] ${s}`),console.log("[FFmpeg]",s)}),t.on("progress",({progress:s,time:r})=>{n?.(`[FFmpeg Progress] ${(s*100).toFixed(1)}% (${r}s)`)}),typeof window<"u"&&window.crossOriginIsolated){n?.("[FFmpeg] Cross-Origin Isolated: YES. Using Multi-Threaded Core ");const s="/ffmpeg",r="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm";let u,h,y;try{n?.("[FFmpeg] Attempting to load local core files...");const v=async(m,x)=>{const S=await fetch(m);if(!S.ok)throw new Error(`HTTP ${S.status}`);const w=S.headers.get("Content-Type");if(w&&w.includes("text/html"))throw new Error("Received HTML instead of binary");const _=await S.blob();return URL.createObjectURL(new Blob([_],{type:x}))};[u,h,y]=await Promise.all([v(`${s}/ffmpeg-core.js`,"text/javascript"),v(`${s}/ffmpeg-core.wasm`,"application/wasm"),v(`${s}/ffmpeg-core.worker.js`,"text/javascript")]),n?.("[FFmpeg] Using local core files (Offline Mode)")}catch(v){n?.("[FFmpeg] Local core files not found or failed to load. Falling back to online CDN."),console.warn("Local FFmpeg files not found:",v),[u,h,y]=await Promise.all([$s(`${r}/ffmpeg-core.js`,"text/javascript"),$s(`${r}/ffmpeg-core.wasm`,"application/wasm"),$s(`${r}/ffmpeg-core.worker.js`,"text/javascript")])}await t.load({coreURL:u,wasmURL:h,workerURL:y})}else{n?.("[FFmpeg] Cross-Origin Isolated: NO. Falling back to Single-Threaded Core "),n?.("[FFmpeg] Note: Rendering will be slower. Add COOP/COEP headers to server for multithreading.");const s="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await t.load({coreURL:await $s(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await $s(`${s}/ffmpeg-core.wasm`,"application/wasm")})}return Ys=t,Xu=!0,n?.("[FFmpeg] Loaded successfully"),t}finally{vr=!1}}function oA(n,t,o){const s=o==="1080p",u={low:s?28:30,med:s?23:25,high:s?18:20}[t];switch(n){case"h265":return{vcodec:"libx265",args:["-crf",u.toString(),"-preset","medium","-tag:v","hvc1"],format:"mp4",ext:"mp4"};case"vp9":return{vcodec:"libvpx-vp9",args:["-crf",u.toString(),"-b:v","0","-deadline","good","-cpu-used","2"],format:"webm",ext:"webm"};case"av1":return{vcodec:"libaom-av1",args:["-crf",(u+10).toString(),"-b:v","0","-cpu-used","4","-strict","experimental"],format:"mp4",ext:"mp4"};default:return{vcodec:"libx264",args:["-crf",u.toString(),"-preset","medium","-profile:v","high","-level","4.2"],format:"mp4",ext:"mp4"}}}async function lA(n){const{canvas:t,audioFile:o,lyrics:s,metadata:r,visualSlides:u,imageMap:h,videoMap:y,preset:v,customFontName:m,renderConfig:x,fps:S,quality:w,codec:_,aspectRatio:N,onProgress:V,onLog:H,abortSignal:$,isFirstSong:re=!0,isLastSong:ue=!0}=n;V(0,"Loading FFmpeg...");const ge=await iA(H),De=()=>$?.aborted===!0||$?.current===!0;if(De())throw new Error("Render aborted");V(5,"Preparing audio...");const He=URL.createObjectURL(o),be=await sA(He);URL.revokeObjectURL(He);const Xe=Math.ceil(be*S),Ne=t.getContext("2d");if(!Ne)throw new Error("Failed to get canvas context");V(10,"Rendering frames...");const Ke=await o.arrayBuffer();await ge.writeFile("audio.mp3",new Uint8Array(Ke));const Ue=Math.max(6,Xe.toString().length);for(let ie=0;ie<Xe;ie++){if(De())throw await xr(ge,ie,Ue),new Error("Render aborted");const fe=ie/S;aA(y,u,fe),py(Ne,t.width,t.height,fe,s,r,u,h,y,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,be,x,ue,re);const U=await(await new Promise((Fe,it)=>{t.toBlob(b=>b?Fe(b):it(new Error("Failed to create blob")),"image/jpeg",w==="high"?.98:w==="med"?.92:.85)})).arrayBuffer(),ae=`frame_${ie.toString().padStart(Ue,"0")}.jpg`;await ge.writeFile(ae,new Uint8Array(U));const Se=10+ie/Xe*70;V(Se,`Rendering frame ${ie+1}/${Xe}`)}if(De())throw await xr(ge,Xe,Ue),new Error("Render aborted");V(80,"Encoding video...");const ot=oA(_,w,n.resolution),ft=`output.${ot.ext}`,bt=["-framerate",S.toString(),"-i",`frame_%0${Ue}d.jpg`,"-i","audio.mp3","-c:v",ot.vcodec,...ot.args,"-c:a","aac","-b:a","192k","-pix_fmt","yuv420p","-movflags","+faststart","-shortest","-y",ft];H?.(`[FFmpeg] Running: ffmpeg ${bt.join(" ")}`);try{await ge.exec(bt)}catch(ie){throw console.error("FFmpeg encoding failed:",ie),await xr(ge,Xe,Ue),new Error(`FFmpeg encoding failed: ${ie}`)}V(95,"Finalizing...");const Et=await ge.readFile(ft),B=Et instanceof Uint8Array?new Uint8Array(Et):new TextEncoder().encode(Et),Ce=new Blob([B],{type:ot.format==="webm"?"video/webm":"video/mp4"});await xr(ge,Xe,Ue);try{await ge.deleteFile("audio.mp3"),await ge.deleteFile(ft)}catch{}return V(100,"Complete!"),{blob:Ce,duration:be,format:ot.ext}}async function sA(n){return new Promise((t,o)=>{const s=document.createElement("audio");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(n)},s.onerror=()=>{o(new Error("Failed to load audio metadata")),URL.revokeObjectURL(n)},s.src=n})}function aA(n,t,o){n.forEach((s,r)=>{if(r==="background"){const h=s.duration||1;h>0&&(s.currentTime=o%h);return}const u=t.find(h=>h.id===r);if(u&&u.type==="video"&&o>=u.startTime&&o<u.endTime){const h=u.playbackRate||1;let y=(o-u.startTime)*h+(u.mediaStartOffset||0);const v=u.mediaDuration||s.duration;v&&v>0&&y>=v&&(y=y%v),s.currentTime=y}})}async function xr(n,t,o){for(let s=0;s<t;s++)try{await n.deleteFile(`frame_${s.toString().padStart(o,"0")}.jpg`)}catch{}}function rA(){const{toast:n,confirm:t}=Lr(),o=Z.useRef(null),s=Z.useRef(null),r=Z.useRef(null),u=Z.useRef(null),h=Z.useRef(null),y=Z.useRef({aborted:!1}),v=Z.useRef(()=>{});Z.useEffect(()=>{VN()},[]);const[m,x]=Z.useState(null),[S,w]=Z.useState(0),[_,N]=Z.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[V,H]=Z.useState([]),[$,re]=Z.useState([]),[ue,ge]=Z.useState(0),[De,He]=Z.useState(!1),[be,Xe]=Z.useState("off"),[Ne,Ke]=Z.useState(0),[Ue,ot]=Z.useState(0),[ft,bt]=Z.useState(1),[Et,B]=Z.useState(!1),[Ce,ie]=Z.useState(Hn.PLAYER),[fe,vt]=Z.useState(!1),[U,ae]=Z.useState(!1),[Se,Fe]=Z.useState(!1),[it,b]=Z.useState(!1),[D,q]=Z.useState(!1),[W,Me]=Z.useState(0),[xe,we]=Z.useState("16:9"),[ke,pe]=Z.useState("1080p"),[ye,Ie]=Z.useState("default"),[Je,Ve]=Z.useState(null),[et,G]=Z.useState("auto"),[L,he]=Z.useState(30),[Ee,me]=Z.useState("med"),[se,E]=Z.useState("mediarecorder"),[z,O]=Z.useState("h264"),[M,ee]=Z.useState(""),[I,le]=Z.useState(!1),[oe,ce]=Z.useState(!1),[A,Oe]=Z.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",lyricLineHeight:1.2,useRealColorMedia:!1}),We=Z.useRef(A);Z.useEffect(()=>{We.current=A},[A]);const Ge=Z.useRef(null),Dt=Z.useRef(null),xt=A.backgroundBlurStrength>0,Jt=Z.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(Q=>MediaRecorder.isTypeSupported(Q.value)),[]),[ut,st]=Z.useState([]),[Re,dt]=Z.useState(-1),[je,ze]=Z.useState(!1),Rt=()=>{const R=ke==="1080p";switch(xe){case"9:16":return R?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return R?{w:1080,h:1440}:{w:720,h:960};case"4:3":return R?{w:1440,h:1080}:{w:960,h:720};case"1:1":return R?{w:1080,h:1080}:{w:720,h:720};case"1:2":return R?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return R?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return R?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return R?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return R?{w:1080,h:1350}:{w:720,h:900};case"20:9":return R?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return R?{w:2560,h:1080}:{w:1720,h:720};default:return R?{w:1920,h:1080}:{w:1280,h:720}}},{w:Ct,h:yt}=Rt(),[$t,xn]=Z.useState(!0),[Vn,Ji]=Z.useState(!0),[mn,Fi]=Z.useState(!1),mi=Z.useMemo(()=>{const R=A.visualTransitionType||"none",Q=A.visualTransitionDuration||1;return $.filter(te=>te.type==="audio"?!1:Ne>=te.startTime&&Ne<te.endTime||R==="crossfade"&&Ne>=te.endTime&&Ne<te.endTime+Q).sort((te,_e)=>{const Be=(te.layer||0)-(_e.layer||0);return Be!==0?Be:te.startTime-_e.startTime})},[$,Ne,A.visualTransitionType,A.visualTransitionDuration]),On=$.filter(R=>R.type==="audio"&&Ne>=R.startTime&&Ne<R.endTime),Ye=Z.useMemo(()=>ue===0?V:V.map(R=>({...R,time:R.time+ue,endTime:R.endTime!==void 0?R.endTime+ue:void 0})),[V,ue]),lt=Ye.findIndex((R,Q)=>{if(R.endTime!==void 0)return Ne>=R.time&&Ne<R.endTime;const Le=Ye[Q+1];return Ne>=R.time&&(!Le||Ne<Le.time)}),Gt=R=>{const Q=R.target.files?.[0];if(Q){const Le=URL.createObjectURL(Q);x(Le);const te={title:Q.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};N(te),Q.type.startsWith("audio/")?Qu(()=>import("./jsmediatags.min-Bf5ftXzF.js").then(_e=>_e.j),[]).then(_e=>{_e.read(Q,{onSuccess:Be=>{const{title:rt,artist:gt,picture:ht}=Be.tags;let zn=null;if(ht){const{data:fn,format:Pe}=ht;let kt="";for(let Pt=0;Pt<fn.length;Pt++)kt+=String.fromCharCode(fn[Pt]);zn=`data:${Pe};base64,${window.btoa(kt)}`}N({title:rt||te.title,artist:gt||te.artist,coverUrl:zn||null})},onError:Be=>{console.log("Error reading tags:",Be)}})}):Q.type.startsWith("video/")&&(b(!1),N({...te,coverUrl:Le,backgroundType:"video"})),ge(0),He(!1),Ke(0),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}R.target.value=""},jn=R=>{const Q=R.target.files?.[0];if(Q){const Le=URL.createObjectURL(Q),te=Q.type.startsWith("video/");te&&b(!1),N(_e=>({..._e,coverUrl:Le,backgroundType:te?"video":"image"}))}R.target.value=""},Ft=async R=>{const Q=R.target.files?.[0];if(Q)try{const Le=await Q.text(),te=Q.name.split(".").pop()?.toLowerCase();let _e=[];te==="lrc"?_e=Ql(Le):te==="srt"?_e=Zl(Le):te==="ttml"||te==="xml"?_e=ea(Le):te==="vtt"&&(_e=ta(Le)),_e.some(Be=>Be.words&&Be.words.length>0)&&(Oe(Be=>({...Be,highlightEffect:"karaoke"})),n.success(`${te?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),H(_e)}catch(Le){console.error("Failed to parse lyrics:",Le),n.error("Failed to parse lyric file.")}R.target.value=""};Z.useEffect(()=>{if(Re!==-1&&ut[Re]){const R=ut[Re];H(R.parsedLyrics||[])}},[ut,Re]);const Cn=async R=>{const Q=R.target.files?.[0];if(Q){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Le=URL.createObjectURL(Q),te=Q.name.replace(/\.[^/.]+$/,""),_e="CustomFont",Be=new FontFace(_e,`url(${Le})`);await Be.load(),document.fonts.add(Be),Ve(te),Oe(rt=>({...rt,fontFamily:_e})),n.success(`Loaded font: ${te}`)}catch(Le){console.error("Failed to load font:",Le),n.error("Failed to load font file.")}}R.target.value=""},gi=Z.useCallback(async(R,Q=!0,Le)=>{const te=Le||ut;if(R<0||R>=te.length)return;const _e=te[R],Be=URL.createObjectURL(_e.audioFile);if(x(Be),N({title:_e.metadata.title,artist:_e.metadata.artist,coverUrl:_e.metadata.coverUrl||null,backgroundType:_e.metadata.backgroundType||"image"}),H([]),_e.parsedLyrics&&_e.parsedLyrics.length>0)H(_e.parsedLyrics);else if(_e.lyricFile)try{const rt=await _e.lyricFile.text(),gt=_e.lyricFile.name.split(".").pop()?.toLowerCase();let ht=[];gt==="lrc"?ht=Ql(rt):gt==="srt"?ht=Zl(rt):gt==="ttml"||gt==="xml"?ht=ea(rt):gt==="vtt"&&(ht=ta(rt)),H(ht)}catch(rt){console.error("Failed to load lyrics",rt)}ge(0),dt(R),r.current&&(r.current.scrollTop=0),Q?setTimeout(()=>{o.current&&(o.current.play().catch(rt=>console.log("Autoplay failed",rt)),He(!0))},100):(He(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[ut]),oi=Z.useCallback(()=>{if(ut.length===0)return;const R=(Re+1)%ut.length;gi(R)},[ut,Re,gi]),Bi=Z.useCallback(()=>{if(ut.length===0)return;const R=(Re-1+ut.length)%ut.length;gi(R)},[ut,Re,gi]),Vi=()=>{o.current&&(De?(o.current.pause(),He(!1)):!m&&ut.length>0?gi(0):(o.current.play().catch(console.error),He(!0)))},qn=Z.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,He(!1),Ke(0))},[]),vo=()=>{Xe(R=>R==="off"?"one":R==="one"?"all":R==="all"?"all_repeat":"off")},Ki=()=>{document.fullscreenElement?(document.exitFullscreen(),vt(!1)):(s.current?.requestFullscreen(),vt(!0))},gn=()=>{const R=!mn;Fi(R),R&&Fe(!0),n.success(`Minimal Mode: ${R?"On":"Off"}`,{id:"minimal-mode"})},ia=()=>{o.current&&(Ke(o.current.currentTime),D&&Me(o.current.currentTime/Ue*100))},oa=()=>{o.current&&ot(o.current.duration)},Xi=R=>{const Q=parseFloat(R.target.value);o.current&&(o.current.currentTime=Q,Ke(Q))},Qi=R=>{if(!Ge.current||D||!Ue)return;const Q=Ge.current.getBoundingClientRect(),_e=Math.max(0,Math.min(R-Q.left,Q.width))/Q.width*Ue;o.current&&(o.current.currentTime=_e,Ke(_e))},Or=R=>{const Q=parseFloat(R.target.value);bt(Q),o.current&&(o.current.volume=Q),B(Q===0)},os=R=>{if(!Dt.current)return;const Q=Dt.current.getBoundingClientRect(),te=Math.max(0,Math.min(R-Q.left,Q.width))/Q.width;bt(te),o.current&&(o.current.volume=te),B(te===0)},la=async()=>{if(!o.current||!u.current)return;const R=A.renderMode==="playlist"&&ut.length>0,Q=[];if(R)for(const Ae of ut){let Qe=[];if(Ae.parsedLyrics&&Ae.parsedLyrics.length>0)Qe=Ae.parsedLyrics;else if(Ae.lyricFile)try{const qe=await Ae.lyricFile.text(),sn=Ae.lyricFile.name.split(".").pop()?.toLowerCase();sn==="lrc"?Qe=Ql(qe):sn==="srt"?Qe=Zl(qe):sn==="ttml"||sn==="xml"?Qe=ea(qe):sn==="vtt"&&(Qe=ta(qe))}catch(qe){console.error("Failed to parse lyrics for playlist item",qe)}const Mt=URL.createObjectURL(Ae.audioFile);Q.push({audioSrc:Mt,lyrics:Qe,metadata:Ae.metadata,isFileSource:!0})}else{if(!m)return;Q.push({audioSrc:m,lyrics:Ye,metadata:_,isFileSource:!1})}if(Q.length===0)return;const Le=R?`Start rendering ALL ${Q.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${xe} (${ke}) video? This will play the song from start to finish.`;if(!await t(`${Le} Please do not switch tabs during rendering.`,"Start Rendering?")){R&&Q.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc));return}le(!1),q(!0),Me(0);const _e={aborted:!1};y.current=_e,qn(),Xe("off"),An.current&&clearTimeout(An.current),ae(!1),Fe(!0),Zi.current&&Zi.current.pause();const Be=o.current,rt=ye,gt=new Map,ht=new Map,zn=new Map,fn=[],Pe=(Ae,Qe)=>new Promise(Mt=>{const qe=new Image;qe.crossOrigin="anonymous",qe.onload=()=>{gt.set(Ae,qe),Mt()},qe.onerror=()=>Mt(),qe.src=Qe}),kt=(Ae,Qe)=>new Promise(Mt=>{const qe=document.createElement("video");qe.crossOrigin="anonymous",qe.muted=!0,qe.playsInline=!0,qe.preload="auto";let sn=!1;const jt=()=>{sn||(sn=!0,ht.set(Ae,qe),Mt())};qe.oncanplay=()=>{sn||(qe.currentTime=.001)},qe.onseeked=()=>jt(),qe.onerror=()=>{console.warn("Failed to load video:",Qe),jt()},setTimeout(()=>jt(),5e3),qe.src=Qe,qe.load()}),Pt=(Ae,Qe)=>new Promise(Mt=>{const qe=document.createElement("audio");qe.crossOrigin="anonymous",qe.onloadedmetadata=()=>{zn.set(Ae,qe),Mt()},qe.onerror=()=>Mt(),qe.src=Qe});if($.forEach(Ae=>{Ae.type==="video"?fn.push(kt(Ae.id,Ae.url)):Ae.type==="audio"||Ae.type==="audio"?fn.push(Pt(Ae.id,Ae.url)):fn.push(Pe(Ae.id,Ae.url))}),A.showChannelInfo&&(A.channelInfoImage&&fn.push(Pe("__channel_info__",A.channelInfoImage)),A.channelInfoText)){const Ae=A.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(Ae))try{const Qe=document.createElement("div");Qe.style.position="absolute",Qe.style.visibility="hidden",Qe.style.whiteSpace="nowrap",Qe.style.fontFamily="sans-serif",Qe.style.fontWeight="bold",Qe.style.fontSize="100px",Qe.style.display="inline-flex",Qe.style.alignItems="center",Qe.style.gap="0.25em",Qe.innerHTML=Ae;const Mt=Qe.getElementsByTagName("svg");for(let Rn=0;Rn<Mt.length;Rn++)Mt[Rn].style.width="auto",Mt[Rn].style.height="1.5em";document.body.appendChild(Qe);const{width:qe,height:sn}=Qe.getBoundingClientRect();document.body.removeChild(Qe);const jt=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${qe}" height="${sn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${Ae}
                  </div>
                </foreignObject>
              </svg>
            `,vi=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(jt).replace(/%([0-9A-F]{2})/g,function(To,ml){return String.fromCharCode(parseInt(ml,16))}))}`;fn.push(Pe("__channel_info_text_svg__",vi))}catch(Qe){console.warn("Failed to process SVG channel info",Qe)}}if(A.backgroundSource==="image"&&A.backgroundImage&&fn.push(Pe("__custom_bg__",A.backgroundImage)),await Promise.all(fn),_e.aborted){q(!1),R&&Q.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc));return}const Mn=u.current,j=Mn.getContext("2d"),at=Mn.captureStream(L);let Tt=null;try{if(Be.captureStream)Tt=Be.captureStream();else if(Be.mozCaptureStream)Tt=Be.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),q(!1);return}const mt=new(window.AudioContext||window.webkitAudioContext),dn=mt.createMediaStreamDestination();mt.createMediaElementSource(Be).connect(dn),ht.forEach(Ae=>{Ae.muted=!0,mt.createMediaElementSource(Ae).connect(dn)}),zn.forEach(Ae=>{Ae.muted=!0,mt.createMediaElementSource(Ae).connect(dn)}),dn.stream.getAudioTracks().length>0?at.addTrack(dn.stream.getAudioTracks()[0]):Tt&&at.addTrack(Tt.getAudioTracks()[0]);const _n=(()=>{if(et!=="auto"&&MediaRecorder.isTypeSupported(et))return et;const Ae=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const Qe of Ae)if(MediaRecorder.isTypeSupported(Qe))return Qe;return"video/webm"})(),Ri=ke==="1080p"?8e6:4e6,ki=L>30?1.5:1,Qn=Ee==="high"?2:Ee==="low"?.5:1,Ii=Ri*ki*Qn,Wt=new MediaRecorder(at,{mimeType:_n,videoBitsPerSecond:Ii});h.current=Wt;const zi=[];Wt.ondataavailable=Ae=>{Ae.data.size>0&&zi.push(Ae.data)},Wt.onstop=()=>{if(_e.aborted)console.log("Render aborted");else{const Ae=new Blob(zi,{type:_n}),Qe=Mt=>{const qe=URL.createObjectURL(Mt),sn=document.createElement("a");sn.href=qe;const jt=_n.includes("mp4")?"mp4":"webm",bn=R?`Playlist_${Q.length}_Songs_${xe.replace(":","-")}.${jt}`:`${Q[0].metadata.title||"video"}_${xe.replace(":","-")}.${jt}`;sn.download=bn,document.body.appendChild(sn),sn.click(),document.body.removeChild(sn),URL.revokeObjectURL(qe)};_n.includes("webm"),Qe(Ae)}mt.close(),q(!1),w(Ae=>Ae+1),R&&Q.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc))};let X=0,$n=[],_t=_,Kt=0,Zn=0;const yi=1e3/L,si=Ae=>{if(_e.aborted)return;(Wt.state==="recording"||Wt.state==="paused")&&requestAnimationFrame(si);const Qe=Ae-Zn;if(Qe<yi)return;Zn=Ae-Qe%yi;const Mt=Be.currentTime;Kt>0&&Me(Mt/Kt*100),ht.forEach((qe,sn)=>{if(sn==="background"){const jt=qe.duration||1,bn=Mt%jt;let vi=Math.abs(qe.currentTime-bn);(bn<qe.currentTime&&qe.currentTime-bn>jt/2||vi>.5)&&(qe.currentTime=bn),qe.paused&&qe.play().catch(()=>{})}else{const jt=$.find(bn=>bn.id===sn);if(jt)if(Mt>=jt.startTime&&Mt<jt.endTime){const bn=jt.playbackRate||1;let vi=(Mt-jt.startTime)*bn+(jt.mediaStartOffset||0);const Rn=jt.mediaDuration||qe.duration;Rn&&Rn>0&&vi>=Rn&&(vi=vi%Rn),Math.abs(qe.playbackRate-bn)>.01&&(qe.playbackRate=bn),Math.abs(qe.currentTime-vi)>.5&&(qe.currentTime=vi);const To=jt.isMuted!==!1;qe.muted!==To&&(qe.muted=To),qe.paused&&qe.play().catch(()=>{})}else qe.paused||qe.pause(),qe.muted||(qe.muted=!0)}}),zn.forEach((qe,sn)=>{const jt=$.find(bn=>bn.id===sn);if(jt){const bn=jt.layer||0;if(A.layerVisibility?.audio?.[bn]!==!1&&Mt>=jt.startTime&&Mt<jt.endTime){const Rn=jt.playbackRate||1,To=(Mt-jt.startTime)*Rn+(jt.mediaStartOffset||0);Math.abs(qe.playbackRate-Rn)>.01&&(qe.playbackRate=Rn),Math.abs(qe.currentTime-To)>.5&&(qe.currentTime=To);const ml=jt.isMuted===!0;qe.muted!==ml&&(qe.muted=ml),qe.paused&&qe.play().catch(()=>{})}else qe.paused||qe.pause(),qe.muted||(qe.muted=!0)}}),j&&py(j,Mn.width,Mn.height,Mt,$n,_t,$,gt,ht,rt,Je,A.fontSizeScale,A.backgroundBlurStrength>0,Kt,A,A.renderMode==="current"||X===Q.length-1,A.renderMode==="current"||X===0)},Xo=async()=>{if(_e.aborted){Wt.stop();return}if(X>=Q.length){await new Promise(Qe=>setTimeout(Qe,500)),Wt.stop();return}const Ae=Q[X];Wt.state==="recording"&&Wt.pause(),$n=Ae.lyrics,_t=Ae.metadata,Kt=0,Ae.metadata.coverUrl&&(Ae.metadata.backgroundType==="video"?await kt("background",Ae.metadata.coverUrl):await Pe("cover",Ae.metadata.coverUrl)),Be.pause(),Be.src=Ae.audioSrc,Be.load(),await new Promise(Qe=>{const Mt=()=>{Be.removeEventListener("canplay",Mt),Qe()};Be.addEventListener("canplay",Mt),Be.readyState>=3&&Mt()}),Kt=Be.duration,Wt.state==="inactive"?(mt.state==="suspended"&&await mt.resume(),Wt.start(),requestAnimationFrame(si)):Wt.state==="paused"&&Wt.resume(),await Be.play(),await new Promise(Qe=>{const Mt=()=>{Be.removeEventListener("ended",Mt),Qe()};Be.addEventListener("ended",Mt)}),X++,Xo()};await Xo()},jr=async()=>{if(!u.current)return;const R=A.renderMode==="playlist"&&ut.length>0;let Q=null,Le=Ye,te=_;if(R&&ut.length>0)Q=ut[0].audioFile,Le=ut[0].parsedLyrics||[],te=ut[0].metadata;else if(ut.length>0&&Re>=0)Q=ut[Re].audioFile;else{n.error("Please load an audio file first.");return}if(!Q){n.error("No audio file available for FFmpeg export.");return}const _e=`Start FFmpeg rendering at ${ke} (${xe})? This uses frame-by-frame capture for higher quality. Rendering may take several minutes.`;if(!await t(_e,"Start FFmpeg Rendering?"))return;le(!1),q(!0),Me(0),ee("Initializing...");const rt={aborted:!1};y.current=rt,qn();const gt=u.current,{w:ht,h:zn}=Rt();gt.width=ht,gt.height=zn;const fn=new Map,Pe=new Map,kt=[],Pt=(j,at)=>new Promise(Tt=>{const mt=new Image;mt.crossOrigin="anonymous",mt.onload=()=>{fn.set(j,mt),Tt()},mt.onerror=()=>Tt(),mt.src=at}),Mn=(j,at)=>new Promise(Tt=>{const mt=document.createElement("video");mt.crossOrigin="anonymous",mt.muted=!0,mt.playsInline=!0,mt.preload="auto";let dn=!1;const ln=()=>{dn||(dn=!0,Pe.set(j,mt),Tt())};mt.oncanplay=()=>{dn||(mt.currentTime=.001)},mt.onseeked=()=>ln(),mt.onerror=()=>{console.warn("Failed to load video:",at),ln()},setTimeout(()=>ln(),5e3),mt.src=at,mt.load()});if($.forEach(j=>{j.type==="video"?kt.push(Mn(j.id,j.url)):j.type!=="audio"&&kt.push(Pt(j.id,j.url))}),te.coverUrl&&(te.backgroundType==="video"?kt.push(Mn("background",te.coverUrl)):kt.push(Pt("cover",te.coverUrl))),A.backgroundSource==="image"&&A.backgroundImage&&kt.push(Pt("__custom_bg__",A.backgroundImage)),A.showChannelInfo&&A.channelInfoImage&&kt.push(Pt("__channel_info__",A.channelInfoImage)),await Promise.all(kt),rt.aborted){q(!1);return}try{const j=await lA({canvas:gt,audioFile:Q,lyrics:Le,metadata:te,visualSlides:$,imageMap:fn,videoMap:Pe,preset:ye,customFontName:Je,renderConfig:A,resolution:ke,aspectRatio:xe,fps:L,quality:Ee,codec:z,onProgress:(dn,ln)=>{Me(dn),ee(ln)},onLog:dn=>console.log(dn),abortSignal:rt,isFirstSong:!0,isLastSong:!0}),at=`${te.title||"video"}_${xe.replace(":","-")}_ffmpeg.${j.format}`,Tt=URL.createObjectURL(j.blob),mt=document.createElement("a");mt.href=Tt,mt.download=at,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(Tt),n.success(`Video exported successfully! (${j.format.toUpperCase()}, ${Math.round(j.duration)}s)`)}catch(j){j.message!=="Render aborted"&&(console.error("FFmpeg render failed:",j),n.error(`FFmpeg render failed: ${j.message}`))}finally{q(!1),ee("")}},xo=async()=>{se==="ffmpeg"?await jr():await la()};Z.useEffect(()=>{v.current=xo});const bo=Z.useCallback(()=>{y.current&&(y.current.aborted=!0),h.current&&h.current.state==="recording"?h.current.stop():q(!1),qn()},[qn]),Xn=Z.useCallback(()=>{if(r.current){const R=o.current?.currentTime||0;if(lt===-1&&R<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(lt!==-1){const Q=r.current.querySelector('[data-lyric-active="true"]');if(Q){const Le=r.current;if(Q.offsetHeight===0)return;const te=Q.offsetTop,_e=Q.offsetHeight,Be=Le.clientHeight;let rt=.5;A.contentPosition==="top"&&(rt=.25),A.contentPosition==="bottom"&&(rt=.75);const gt=te-Be*rt+_e/2;Le.scrollTo({top:gt,behavior:"smooth"})}}}},[lt,ye,A.contentPosition]);Z.useEffect(()=>{Xn()},[Xn]),Z.useEffect(()=>{const R=setTimeout(()=>{Xn()},550);return()=>clearTimeout(R)},[U,Se,$t,Vn,Ce,je,Xn]);const An=Z.useRef(null),Ko=Z.useCallback(()=>{if(ae(!1),An.current&&clearTimeout(An.current),!D){const R=window.setTimeout(()=>{ae(!0)},3e3);An.current=R}},[D]),qr=()=>{Ko()},hl=Z.useRef(0),sa=()=>{Ko();const R=Date.now();R-hl.current<300&&gn(),hl.current=R};Z.useEffect(()=>{const R=Q=>{const Le=Q.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Le)||Ko(),!(Q.target instanceof HTMLInputElement||Q.target instanceof HTMLTextAreaElement)){if(D){Le==="escape"&&bo();return}switch(Q.key.toLowerCase()){case" ":case"k":Q.preventDefault(),Vi(),n.success(De?"Paused":"Playing",{id:"play-pause"});break;case"s":Q.preventDefault(),qn(),n.success("Stopped",{id:"stop"});break;case"n":Q.preventDefault(),oi(),n.success("Next Song",{id:"next-song"});break;case"o":Q.preventDefault();const _e=!mn;Fi(_e),_e&&Fe(!0),n.success(`Minimal Mode: ${_e?"On":"Off"}`,{id:"minimal-mode"});break;case"b":Q.preventDefault(),Bi(),n.success("Previous Song",{id:"prev-song"});break;case"r":Q.preventDefault(),vo();const Be=be==="off"?"one":be==="one"?"all":be==="all"?"all_repeat":"off",rt={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${rt[Be]}`,{id:"repeat"});break;case"l":Q.preventDefault();const gt=!je;ze(gt),gt&&ie(Hn.PLAYER);break;case"h":Q.preventDefault();const ht=!Se;Fe(ht),n.success(ht?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"y":Q.preventDefault(),ce(Ae=>!Ae);break;case"g":Q.preventDefault();const zn=vd.flatMap(Ae=>Ae.options.map(Qe=>Qe.value)),fn=We.current.lyricDisplayMode,kt=(zn.indexOf(fn)+1)%zn.length,Pt=zn[kt];Oe(Ae=>({...Ae,lyricDisplayMode:Pt})),n.success(`Lyric Mode: ${Pt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":Q.preventDefault();const Mn=fy,j=We.current.textCase,Tt=(Mn.indexOf(j)+1)%Mn.length,mt=Mn[Tt];Oe(Ae=>({...Ae,textCase:mt})),n.success(`Text Case: ${mt}`,{id:"text-case"});break;case"f":Ki();break;case"i":xn(Ae=>!Ae);break;case"p":Ji(Ae=>!Ae);break;case"d":Q.preventDefault(),le(Ae=>!Ae);break;case"t":je?(ze(!1),ie(Hn.EDITOR)):ie(Ae=>Ae===Hn.PLAYER?Hn.EDITOR:Hn.PLAYER);break;case"m":Q.preventDefault();const dn=!Et;B(dn),n.success(dn?"Muted":"Unmuted",{id:"mute"});break;case"x":Q.preventDefault();const ln=We.current.highlightEffect==="none";Oe(Ae=>({...Ae,highlightEffect:Ae.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${ln?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":Q.preventDefault();const li=yd.flatMap(Ae=>Ae.options.map(Qe=>Qe.value)),_n=We.current.highlightEffect||"none",Ri=li.indexOf(_n),Qn=((Ri===-1?0:Ri)+1)%li.length,Ii=li[Qn],Wt=wr(Ii);Oe(Ae=>{const Qe={...Ae,highlightEffect:Ii};return Qe.useCustomHighlightColors=!1,Wt&&(Qe.highlightColor=Wt.color,Qe.highlightBackground=Wt.bg),Qe}),n.success(`Effect: ${Ii.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":Q.preventDefault();const X=(Ku.indexOf(ye)+1)%Ku.length,$n=Ku[X];Ie($n);const _t=Dr[$n];if(_t){const Ae={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};Oe(Qe=>({...Qe,...Ae,..._t}))}let Kt=$n;for(const Ae of Id){const Qe=Ae.options.find(Mt=>Mt.value===$n);if(Qe){Kt=Qe.label;break}}n.success(`Preset: ${Kt}`,{id:"preset"});break;case"arrowleft":if(Q.preventDefault(),o.current){const Ae=Math.max(0,o.current.currentTime-5);o.current.currentTime=Ae,Ke(Ae)}break;case"arrowright":if(Q.preventDefault(),o.current){const Ae=Math.min(Ue,o.current.currentTime+5);o.current.currentTime=Ae,Ke(Ae)}break;case"arrowup":Q.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":Q.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":Q.preventDefault();const Zn=We.current.fontSizeScale,yi=Math.min(Zn+.1,3);Oe(Ae=>({...Ae,fontSizeScale:yi})),n.success(`Font Size: ${(yi*100).toFixed(0)}%`,{id:"font-size"});break;case"-":Q.preventDefault();const si=We.current.fontSizeScale,Xo=Math.max(si-.1,.1);Oe(Ae=>({...Ae,fontSizeScale:Xo})),n.success(`Font Size: ${(Xo*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(Q.ctrlKey||Q.metaKey)&&Q.shiftKey&&(Q.preventDefault(),v.current());break}}};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[De,be,Ce,D,Ko,bo,je,oi,Bi,n,mn,ye,Se,Et]),Z.useEffect(()=>{let R,Q=0;const Le=1e3/30,te=_e=>{if(o.current&&!o.current.paused&&De){R=requestAnimationFrame(te);const Be=_e-Q;Be>Le&&(Q=_e-Be%Le,Ke(o.current.currentTime))}};return De&&!D&&(R=requestAnimationFrame(te)),()=>{R&&cancelAnimationFrame(R)}},[De,D]);const Oi=$t&&(!U||Se)&&!D,So=Vn&&(!U||Se)&&!D&&!mn,Gn=mi.length>0?mi[0]:null;Gn?`${Gn.url}`:_.coverUrl&&`${_.coverUrl}`;const Zi=Z.useRef(null);return Z.useEffect(()=>{if(mi.forEach(R=>{const Q=R.layer||0;if(A.layerVisibility?.visual?.[Q]!==!1&&R.type==="video"){const Le=document.getElementById(`video-preview-${R.id}`);if(Le)if(D)Le.paused||Le.pause();else{const te=R.playbackRate||1;let _e=(Ne-R.startTime)*te+(R.mediaStartOffset||0);const Be=R.mediaDuration||Le.duration;Be&&Be>0&&_e>=Be&&(_e=_e%Be),Math.abs(Le.playbackRate-te)>.01&&(Le.playbackRate=te),Math.abs(Le.currentTime-_e)>.2&&(Le.currentTime=_e);const rt=R.isMuted!==!1;Le.muted!==rt&&(Le.muted=rt);const gt=R.volume!==void 0?R.volume:1;Math.abs(Le.volume-gt)>.01&&(Le.volume=gt),De&&Le.paused?Le.play().catch(()=>{}):!De&&!Le.paused&&Le.pause()}}}),_.backgroundType==="video"&&Zi.current){const R=Zi.current;if(D)R.paused||R.pause();else{const Q=R.duration||1,Le=Ne%Q;Math.abs(R.currentTime-Le)>.1&&(R.currentTime=Le),De&&R.paused?R.play().catch(()=>{}):!De&&!R.paused&&R.pause()}}On.forEach(R=>{const Q=document.getElementById(`audio-preview-${R.id}`);if(Q){const Le=R.playbackRate||1,te=(Ne-R.startTime)*Le+(R.mediaStartOffset||0);Math.abs(Q.playbackRate-Le)>.01&&(Q.playbackRate=Le),Math.abs(Q.currentTime-te)>.2&&(Q.currentTime=te);const _e=R.isMuted===!0;Q.muted!==_e&&(Q.muted=_e);const Be=R.volume!==void 0?R.volume:1;Math.abs(Q.volume-Be)>.01&&(Q.volume=Be),De&&Q.paused?Q.play().catch(()=>{}):!De&&!Q.paused&&Q.pause()}})},[Ne,De,mi,_,On,A.layerVisibility]),d.jsxs("div",{ref:s,onMouseMove:qr,onTouchStart:sa,onDoubleClick:gn,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${U&&!Se?"cursor-none":""}`,children:[d.jsx("audio",{ref:o,src:m||void 0,loop:be==="one",muted:Et,onTimeUpdate:ia,onLoadedMetadata:oa,onEnded:()=>{if(D)return;const R=ut.length>0;be==="one"||(be==="all_repeat"?R?oi():o.current?.play():be==="all"&&R&&Re<ut.length-1?oi():He(!1))},crossOrigin:"anonymous"},S),On.map(R=>d.jsx("audio",{id:`audio-preview-${R.id}`,src:R.url,className:"hidden",playsInline:!0},R.id)),d.jsx("canvas",{ref:u,width:Ct,height:yt,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),d.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[A.backgroundSource==="color"&&d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:A.backgroundColor}}),A.backgroundSource==="gradient"&&d.jsx("div",{className:"absolute inset-0",style:{background:A.backgroundGradient}}),A.backgroundSource==="image"&&A.backgroundImage&&d.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${A.backgroundImage})`}}),A.backgroundSource==="smart-gradient"&&d.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const R=A.backgroundColor||"#312e81",Q=parseInt(R.slice(1,3),16),Le=parseInt(R.slice(3,5),16),te=parseInt(R.slice(5,7),16),_e=`${Q},${Le},${te}`,Be=`${Math.floor(Q*.6)},${Math.floor(Le*.6)},${Math.floor(te*.6)}`;return`linear-gradient(to bottom right, rgb(${_e}), rgb(${Be}) 50%, #000000)`})()}}),(A.backgroundSource==="timeline"||A.backgroundSource==="custom")&&_.coverUrl&&$.length===0&&(_.backgroundType==="video"?d.jsx("video",{ref:Zi,src:_.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${it?"opacity-60":"opacity-0"}`,muted:!0,loop:!D,playsInline:!0,preload:"auto",onLoadedData:()=>b(!0)}):d.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${A.backgroundSource==="custom"||mi.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${_.coverUrl})`}})),A.backgroundSource==="color"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:A.backgroundColor}}),A.backgroundSource==="gradient"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:A.backgroundGradient}}),A.backgroundSource==="smart-gradient"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const R=A.backgroundColor||"#312e81",Q=parseInt(R.slice(1,3),16),Le=parseInt(R.slice(3,5),16),te=parseInt(R.slice(5,7),16),_e=`${Q},${Le},${te}`,Be=`${Math.floor(Q*.6)},${Math.floor(Le*.6)},${Math.floor(te*.6)}`;return`linear-gradient(to bottom right, rgb(${_e}), rgb(${Be}) 50%, #000000)`})()}}),!_.coverUrl&&mi.length===0&&(A.backgroundSource==="timeline"||A.backgroundSource==="custom")&&$.length===0&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),d.jsx("div",{className:`absolute inset-0 pointer-events-none ${A.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:A.backgroundSource==="timeline"&&mi.map(R=>{const Q=R.layer||0;if(A.layerVisibility?.visual?.[Q]===!1)return null;const Le=A.visualTransitionType||"none",te=A.visualTransitionDuration||1;let _e=1;if(Le!=="none"){if(Ne<R.startTime+te){const Be=(Ne-R.startTime)/te;_e=Math.max(0,Math.min(1,Be))}if(Ne>=R.endTime){let Be=!1;if(Le==="crossfade"&&(Be=$.some(rt=>rt.id!==R.id&&(rt.layer||0)===(R.layer||0)&&rt.startTime>=R.endTime-.1&&rt.startTime<R.endTime+.2)),!Be){const gt=1-(Ne-R.endTime)/te;_e=Math.min(_e,Math.max(0,Math.min(1,gt)))}}else if(Le==="fade-to-black"&&Ne>R.endTime-te){const Be=(R.endTime-Ne)/te;_e=Math.min(_e,Math.max(0,Math.min(1,Be)))}}return d.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:_e},children:R.type==="video"?d.jsx("video",{id:`video-preview-${R.id}`,src:R.url,className:"w-full h-full object-cover",muted:R.isMuted!==!1,playsInline:!0}):d.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${R.url})`}})},R.id)})}),d.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:A.backgroundBlurStrength>0?`blur(${A.backgroundBlurStrength}px)`:xt?"blur(12px)":"none",backgroundColor:A.useRealColorMedia?"transparent":A.backgroundBlurStrength>0||xt?"rgba(0,0,0,0.4)":void 0}}),A.enableGradientOverlay&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),d.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[A.showChannelInfo&&mn&&d.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${A.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${A.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${A.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":A.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":A.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":A.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":A.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${A.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${A.channelInfoSizeScale??1})`,transformOrigin:A.channelInfoPosition?.includes("top")?A.channelInfoPosition?.includes("center")?"top center":A.channelInfoPosition?.includes("left")?"top left":"top right":A.channelInfoPosition?.includes("center")?"bottom center":A.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...A.channelInfoPosition?.includes("center")?A.channelInfoPosition?.includes("top")?{marginTop:`${(A.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(A.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(A.channelInfoMarginScale??1)*1.5}rem`}},children:[A.channelInfoImage&&A.channelInfoStyle!=="minimal"&&d.jsx("img",{src:A.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${A.channelInfoStyle==="circle"?"rounded-full":""}`}),A.channelInfoText&&A.channelInfoStyle!=="logo"&&(()=>{const R=A.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(R)?d.jsx("div",{className:`text-white font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${A.channelInfoStyle==="minimal"||A.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,dangerouslySetInnerHTML:{__html:R}}):d.jsx("p",{className:`text-white font-bold drop-shadow-md text-lg 
                    ${A.channelInfoStyle==="minimal"||A.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,children:A.channelInfoText})})()]}),mn&&d.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${Oi?"opacity-100":"opacity-0"}
              ${A.infoPosition==="top-left"?"top-0 left-0 items-start text-left":A.infoPosition==="top-right"?"top-0 right-0 items-end text-right":A.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":A.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":A.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":A.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${A.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${A.infoSizeScale??1})`,transformOrigin:A.infoPosition?.includes("top")?A.infoPosition?.includes("center")?"top center":A.infoPosition?.includes("right")?"top right":"top left":A.infoPosition?.includes("center")?"bottom center":A.infoPosition?.includes("right")?"bottom right":"bottom left",...A.infoPosition?.includes("center")?A.infoPosition?.includes("top")?{marginTop:`${(A.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(A.infoMarginScale??1)*1.5}rem`}:{margin:`${(A.infoMarginScale??1)*1.5}rem`}},children:d.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${A.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${A.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${A.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${A.infoStyle==="modern"||A.infoStyle==="minimal",""}
            `,children:[d.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!A.showCover||A.infoStyle==="minimal"||A.infoStyle==="modern"?"hidden":"block"}
                ${A.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[_.coverUrl?_.backgroundType==="video"?d.jsx("video",{src:_.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:R=>R.currentTarget.play(),onMouseOut:R=>R.currentTarget.pause()}):d.jsx("img",{src:_.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:d.jsx(Yl,{size:24})}),d.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[d.jsx(Yo,{size:20,className:"text-white"}),d.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:jn})]})]}),d.jsxs("div",{className:`flex flex-col justify-center ${A.infoPosition?.includes("right")?"items-end":A.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[d.jsx("h1",{className:`font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${A.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${A.infoStyle==="minimal"?"text-sm":A.infoStyle==="modern"||A.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,children:_.title}),d.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${A.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:d.jsx("p",{className:`drop-shadow-md
                    ${A.infoStyle==="minimal"?"text-zinc-400 text-[10px]":A.infoStyle==="modern"||A.infoStyle==="modern_art"?"text-white text-sm font-medium":"text-zinc-300 text-xs"}
                  `,children:_.artist})})]})]})}),d.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Oi&&!mn?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:d.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[d.jsx("div",{className:"flex gap-4",children:d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${A.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[_.coverUrl?_.backgroundType==="video"?d.jsx("video",{src:_.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:R=>R.currentTarget.play(),onMouseOut:R=>R.currentTarget.pause()}):d.jsx("img",{src:_.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:d.jsx(Yl,{size:24})}),d.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[d.jsx(Yo,{size:20,className:"text-white"}),d.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:jn})]})]}),d.jsxs("div",{children:[d.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${A.showTitle?"opacity-100":"opacity-0"}`,children:_.title}),d.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${A.showArtist?"opacity-100":"opacity-0"}`,children:d.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:_.artist})})]})]})}),d.jsxs("div",{className:`flex gap-2 flex-wrap ${mn?"hidden":""}`,children:[d.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:d.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),d.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),d.jsx("button",{onClick:()=>Fe(!Se),className:`p-2 rounded-full transition-colors ${Se?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:Se?d.jsx(Ks,{size:20}):d.jsx(Js,{size:20})}),d.jsx("button",{onClick:()=>Fi(!mn),className:`p-2 rounded-full transition-colors ${mn?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:mn?d.jsx(Zs,{size:20}):d.jsx(T0,{size:20})}),d.jsx("button",{onClick:()=>{const R=!je;ze(R),R&&ie(Hn.PLAYER)},className:`p-2 rounded-full transition-colors ${je?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:d.jsx(_r,{size:20})}),d.jsx("button",{onClick:()=>{je&&ze(!1),ie(Ce===Hn.PLAYER?Hn.EDITOR:Hn.PLAYER)},className:`p-2 rounded-full transition-colors ${Ce===Hn.EDITOR&&!je?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:d.jsx(gg,{size:20})}),d.jsx("button",{onMouseDown:R=>{R.stopPropagation(),le(!I)},className:`p-2 rounded-full transition-colors ${I?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:d.jsx(br,{size:20})}),d.jsx("button",{onMouseDown:R=>{R.stopPropagation(),ce(!oe)},className:`p-2 rounded-full transition-colors ${oe?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Keyboard Shortcuts",children:d.jsx(Cr,{size:20})}),d.jsx("button",{onClick:Ki,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:fe?d.jsx(T0,{size:20}):d.jsx(Zs,{size:20})})]})]})}),d.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${A.contentPosition==="top"?"items-start pt-[10vh]":A.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:V.length>0?d.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${A.textAlign==="left"?"text-left":A.textAlign==="right"?"text-right":"text-center"} ${A.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:(Oi||So)&&ye!=="subtitle"?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[d.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${A.fontSizeScale}); line-height: calc(1.75rem * ${A.fontSizeScale} * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${A.fontSizeScale}); line-height: calc(1.75rem * ${A.fontSizeScale} * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${A.fontSizeScale}); line-height: calc(2rem * ${A.fontSizeScale} * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${A.fontSizeScale}); line-height: calc(2.25rem * ${A.fontSizeScale} * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${A.fontSizeScale}); line-height: calc(2.5rem * ${A.fontSizeScale} * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${A.fontSizeScale}); line-height: calc(1 * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${A.fontSizeScale}); line-height: calc(1 * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${A.fontSizeScale}); line-height: calc(1 * ${A.lyricLineHeight||1.2}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${A.fontSizeScale}); line-height: calc(1 * ${A.lyricLineHeight||1.2}); }
              `}),d.jsx("div",{className:`transition-all duration-500 ${A.contentPosition==="center"?Ce===Hn.EDITOR||je?"h-[25vh]":!Oi&&!So?"h-[50vh]":"h-[40vh]":"h-0"}`}),Ye.map((R,Q)=>{const Le=Q===lt,te=Ce===Hn.EDITOR||je,_e=["9:16","3:4","1:1","1:2","2:3"].includes(xe);if(A.lyricDisplayMode!=="all"){if(A.lyricDisplayMode==="active-only"&&Q!==lt)return d.jsx("p",{className:"hidden"},Q);if(A.lyricDisplayMode==="next-only"&&(Q<lt||Q>lt+1))return d.jsx("p",{className:"hidden"},Q);if(A.lyricDisplayMode==="previous-next"&&Math.abs(Q-lt)>1)return d.jsx("p",{className:"hidden"},Q)}else if(ye==="none"||ye==="just_video")return d.jsx("p",{className:"hidden"},Q);let Be="",rt="";const gt=A.transitionEffect;let ht="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Le?gt==="slide"?ht+="translate-y-0 opacity-100 ":gt==="zoom"?ht+="scale-100 opacity-100 ":gt==="float"?ht+="translate-y-0 opacity-100 ":gt==="blur"?ht+="blur-0 opacity-100 ":gt==="fade"?ht+="opacity-100 ":gt==="drop"?ht+="trans-drop-enter opacity-100 ":gt==="lightspeed"?ht+="trans-lightspeed-enter opacity-100 ":gt==="roll"?ht+="trans-roll-enter opacity-100 ":gt==="elastic"?ht+="trans-elastic-enter opacity-100 ":gt==="flip"?ht+="trans-flip-enter opacity-100 ":gt==="rotate-in"?ht+="trans-rotate-in-enter opacity-100 ":gt==="spiral"?ht+="trans-spiral-enter opacity-100 ":gt==="shatter"?ht+="trans-shatter-enter opacity-100 ":ht+="opacity-100 ":(gt==="slide"?ht+="translate-y-4 opacity-0 ":gt==="zoom"?ht+="scale-75 opacity-0 ":gt==="float"?ht+="translate-y-8 opacity-0 ":gt==="blur"?ht+="blur-md opacity-0 ":gt==="fade"?ht+="opacity-50 ":gt==="drop"?ht+="trans-drop-exit opacity-0 ":gt==="roll"?ht+="trans-roll-exit opacity-0 ":ht+="opacity-0 ",gt==="none"&&(ht=ht.replace("opacity-0","opacity-50"))),ye==="large"||ye==="large_upper"){const Tt=_e?te?"text-4xl":"text-6xl":te?"text-6xl":"text-8xl",mt=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${Tt} font-black text-white ${ye==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,rt=`${mt} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(ye==="big_center"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} font-black text-white uppercase tracking-tight text-center`,rt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ye==="testing_up"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-white uppercase tracking-tight text-center`,rt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ye==="testing"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-white tracking-tight text-center`,rt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ye==="one_line_up"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-white uppercase tracking-tight text-center`,rt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ye==="one_line"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-white tracking-tight text-center`,rt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ye==="metal"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,rt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ye==="kids"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,rt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ye==="sad"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-7xl",at=_e?te?"text-lg":"text-xl":te?"text-xl":"text-2xl";Be=`${j} text-zinc-200 tracking-wider text-center drop-shadow-md`,rt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ye==="romantic"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-7xl",at=_e?te?"text-lg":"text-xl":te?"text-xl":"text-2xl";Be=`${j} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,rt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(ye==="tech"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,rt=`${at} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(ye==="gothic"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-7xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl";Be=`${j} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,rt=`${at} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(ye==="monospace"){const j=_e?te?"text-2xl":"text-3xl":te?"text-3xl":"text-5xl",at=_e?te?"text-lg":"text-xl":te?"text-xl":"text-2xl";Be=`${j} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,rt=`${at} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(ye==="classic"){const j=_e?te?"text-2xl":"text-3xl":te?"text-3xl":"text-6xl",at=_e?te?"text-lg":"text-xl":te?"text-xl":"text-2xl";Be=`${j} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,rt=`${at} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(ye==="slideshow"||ye==="just_video")Be=`${_e?te?"text-2xl":"text-3xl":te?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,rt="hidden";else if(ye==="subtitle"){Be=`${_e?te?"text-2xl":"text-3xl":te?"text-3xl":"text-4xl"} text-white tracking-wide text-center whitespace-pre-wrap`,rt="hidden";let at="bottom-16";te&&So?at="bottom-[560px]":te?at="bottom-[360px]":So&&(at="bottom-[280px]"),ht=ht.replace("absolute","").replace("transform",""),ht+=`fixed ${at} left-1/2 -translate-x-1/2 w-full px-8 z-[100] pointer-events-none `}else if(ye==="custom"){const j=_e?te?"text-4xl":"text-5xl":te?"text-6xl":"text-8xl",at=_e?te?"text-xl":"text-2xl":te?"text-2xl":"text-3xl",Tt=A.textAlign==="center"?"text-center":A.textAlign==="right"?"text-right":"text-left";Be=`${j} tracking-tight ${Tt}`,rt=`${at} opacity-40 hover:opacity-100 ${Tt}`}else{const j=_e?te?"text-2xl":"text-3xl":te?"text-3xl":"text-5xl",at=_e?te?"text-lg":"text-xl":te?"text-xl":"text-2xl";Be=`${j} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,rt=`${at} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const fn=(A.lyricStyleTarget||"active-only")==="all"||Le;let Pe={color:A.fontColor,fontWeight:fn?A.fontWeight:void 0,fontStyle:fn?A.fontStyle:void 0,textDecoration:fn?A.textDecoration:void 0,fontFamily:A.fontFamily==="CustomFont"?"CustomFont, sans-serif":A.fontFamily};if((ye==="custom"||ye==="default")&&Le&&A.textEffect!=="none"){const j=A.textEffect;j==="glow"?Pe.textShadow=`0 0 10px ${A.fontColor}, 0 0 20px ${A.fontColor}`:j==="neon"?Pe.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${A.fontColor}, 0 0 40px ${A.fontColor}, 0 0 80px ${A.fontColor}`:j==="neon-multi"?Pe.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":j==="shadow"?Pe.textShadow="3px 3px 6px rgba(0,0,0,0.7)":j==="outline"?Pe.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":j==="3d"?Pe.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":j==="emboss"?(Pe.color="#ebebeb",Pe.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):j==="gold"?(Pe.background="linear-gradient(to bottom, #d4af37, #C5A028)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):j==="chrome"?(Pe.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):j==="fire"?(Pe.color="#fff",Pe.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):j==="frozen"?(Pe.color="#fff",Pe.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):j==="vhs"?Pe.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":j==="gradient"?(Pe.background=`linear-gradient(to right, ${A.fontColor}, #ffffff)`,Pe.WebkitBackgroundClip="text",Pe.color="transparent"):j==="rainbow"?(Pe.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Pe.WebkitBackgroundClip="text",Pe.color="transparent"):j==="glass"?(Pe.backgroundColor="rgba(255, 255, 255, 0.1)",Pe.backdropFilter="blur(8px)",Pe.padding="0.5rem 1rem",Pe.borderRadius="0.75rem",Pe.border="1px solid rgba(255, 255, 255, 0.2)",Pe.display="inline-block"):j==="mirror"?(Pe.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Pe.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):j==="retro"?(Pe.fontFamily="'Press Start 2P', cursive",Pe.color="#ff00ff",Pe.textShadow="4px 4px 0px #00ffff"):j==="cyberpunk"?(Pe.color="#fcee0a",Pe.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",Pe.fontFamily="'Orbitron', sans-serif",Pe.letterSpacing="1px"):j==="glitch-text"?(Pe.animation="anim-glitch 0.4s infinite linear",Pe.position="relative"):j==="hologram"?(Pe.color="rgba(0, 255, 255, 0.7)",Pe.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",Pe.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",Pe.WebkitBackgroundClip="text"):j==="comic"&&(Pe.fontFamily="'Bangers', cursive",Pe.color="#ffcc00",Pe.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",Pe.letterSpacing="1px")}let kt=R.text;const Pt=A.textCase;Pt==="upper"?kt=kt.toUpperCase():Pt==="lower"?kt=kt.toLowerCase():Pt==="title"?kt=kt.replace(/\w\S*/g,j=>j.charAt(0).toUpperCase()+j.substr(1).toLowerCase()):Pt==="sentence"?kt=kt.charAt(0).toUpperCase()+kt.slice(1).toLowerCase():Pt==="invert"&&(kt=kt.replace(/\w\S*/g,j=>j.charAt(0).toLowerCase()+j.slice(1).toUpperCase())),kt=kt.replace(/\s*([-])\s*/g,"$1"),Le&&A.textAnimation==="typewriter"&&(kt=kt.substring(0,Math.max(0,Math.floor((Ne-R.time)*35))));let Mn=kt;if(Le&&A.highlightEffect!=="none"){const j=A.highlightEffect,at=R.words&&R.words.length>0;if((j==="karaoke"||j?.startsWith("karaoke-"))&&at)Mn=R.words.filter(Tt=>Tt.text===`
`||Tt.text.trim().length>0).map((Tt,mt,dn)=>{if(Tt.text===`
`)return d.jsx("br",{},mt);let ln=Tt.text.trim();if(Pt==="upper")ln=ln.toUpperCase();else if(Pt==="lower")ln=ln.toLowerCase();else if(Pt==="title")ln=ln.replace(/\w\S*/g,_t=>_t.charAt(0).toUpperCase()+_t.substr(1).toLowerCase());else if(Pt==="sentence"){const _t=ln.toLowerCase();ln=mt===0?_t.charAt(0).toUpperCase()+_t.slice(1):_t}else Pt==="invert"&&(ln=ln.replace(/\w\S*/g,_t=>_t.charAt(0).toLowerCase()+_t.slice(1).toUpperCase()));const li=Tt.startTime+ue,_n=Tt.endTime+ue,Ri=Ne>=li&&Ne<_n,ki=Ne>=_n,Qn=/[-]$/,Ii=/^[-]/;let Wt=!ln.endsWith(" ");Qn.test(ln.trim())&&(Wt=!1);const zi=dn[mt+1];zi&&Ii.test(zi.text.trim())&&(Wt=!1),zi&&zi.text===`
`&&(Wt=!1),mt===dn.length-1&&(Wt=!1);let X={display:"inline-block",transition:"all 0.1s ease"};if(A.textDecoration&&A.textDecoration!=="none"&&(X.textDecoration=A.textDecoration),!Ri&&!ki)X.opacity=.5,X.transform="scale(1)";else if(ki)if(j==="karaoke-fill"){const _t=A.highlightBackground||"#fb923c";X.backgroundColor=_t,X.color="#000",X.padding="2px 6px",X.borderRadius="4px",X.opacity=1}else j==="karaoke-smooth"?(X.color=A.highlightColor||"#fb923c",X.opacity=1):(ye==="custom"&&(X.color=A.fontColor),X.opacity=1);if(Ri){const _t=A.highlightColor||"#fb923c",Kt=A.highlightBackground||"#fb923c";if(j==="karaoke-smooth"){const Zn=Tt.endTime-Tt.startTime,yi=Ne-li,si=Math.min(100,Math.max(0,yi/Zn*100));X.backgroundImage=`linear-gradient(90deg, ${_t} ${si}%, ${A.fontColor||"#ffffff"} ${si}%)`,X.backgroundClip="text",X.WebkitBackgroundClip="text",X.color="transparent",X.WebkitTextFillColor="transparent",X.textShadow="none"}else j==="karaoke"||j==="color"?(X.color=_t,X.textShadow=`0 0 10px ${_t}`):j==="karaoke-neon"?(X.color="#fff",X.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${_t}, 0 0 35px ${_t}`):j==="karaoke-scale"?(X.color=_t,X.transform="scale(1.3)"):j==="karaoke-underline"?(X.color=_t,X.textDecoration=(X.textDecoration||"")+" underline",X.textDecorationColor=_t,X.textUnderlineOffset="4px"):j==="karaoke-bounce"?(X.color=_t,X.transform="translateY(-10px)"):j==="karaoke-fill"?(X.backgroundColor=Kt,X.color="#000",X.padding="2px 6px",X.borderRadius="4px"):j==="karaoke-outline"?(X.color="transparent",X.WebkitTextStroke=`2px ${_t}`):j==="karaoke-shadow"?(X.color=_t,X.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):j==="karaoke-gradient"?(X.background=`linear-gradient(90deg, ${_t}, ${Kt})`,X.WebkitBackgroundClip="text",X.WebkitTextFillColor="transparent"):j==="karaoke-wave"?(X.color=_t,X.animation="bounce 0.3s ease infinite"):j==="karaoke-pill"?(X.backgroundColor=Kt,X.color="#000",X.padding="4px 16px",X.borderRadius="9999px"):j==="karaoke-box"?(X.backgroundColor=Kt,X.color="#000",X.padding="4px 8px",X.borderRadius="0"):j==="karaoke-rounded"?(X.backgroundColor=Kt,X.color="#000",X.padding="4px 12px",X.padding="4px 12px",X.borderRadius="12px"):j==="karaoke-glass"?(X.backgroundColor="rgba(255, 255, 255, 0.1)",X.color="#fff",X.padding="4px 12px",X.borderRadius="8px",X.backdropFilter="blur(4px)",X.border="1px solid rgba(255, 255, 255, 0.3)",X.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):j==="karaoke-neon-multi"?(X.color="#fff",X.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):j==="karaoke-soft-glow"?(X.color=_t,X.textShadow=`0 0 5px ${_t}, 0 0 15px ${_t}, 0 0 30px ${_t}`):j==="karaoke-3d"?X.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":j==="karaoke-emboss"?(X.color="#ebebeb",X.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):j==="karaoke-chrome"?(X.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",X.WebkitBackgroundClip="text",X.color="transparent"):j==="karaoke-gold"?(X.background="linear-gradient(to bottom, #d4af37, #C5A028)",X.WebkitBackgroundClip="text",X.color="transparent"):j==="karaoke-fire"?(X.color="#fff",X.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):j==="karaoke-frozen"?(X.color="#fff",X.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):j==="karaoke-rainbow"?(X.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",X.WebkitBackgroundClip="text",X.color="transparent"):j==="karaoke-mirror"?(X.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",X.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):j==="karaoke-vhs"?X.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":j==="karaoke-retro"?(X.fontFamily="'Press Start 2P', cursive",X.color="#ff00ff",X.textShadow="4px 4px 0px #00ffff"):j==="karaoke-cyberpunk"?(X.color="#fcee0a",X.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",X.fontFamily="'Orbitron', sans-serif"):j==="karaoke-hologram"?(X.color="rgba(0, 255, 255, 0.7)",X.textShadow="0 0 5px rgba(0,255,255,0.5)"):j==="karaoke-comic"?(X.fontFamily="'Bangers', cursive",X.color="#ffcc00",X.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):j==="karaoke-glitch-text"?X.animation="anim-glitch 0.4s infinite linear":j==="karaoke-pulse"?X.animation="anim-pulse 1s infinite ease-in-out":j==="karaoke-breathe"?X.animation="anim-breathe 2s infinite ease-in-out":j==="karaoke-float"?X.animation="anim-float 2s infinite ease-in-out":j==="karaoke-sway"?X.animation="anim-sway 2s infinite ease-in-out":j==="karaoke-flicker"?X.animation="anim-flicker 2s infinite linear":j==="karaoke-shake"?X.animation="anim-shake 0.2s infinite linear":j==="karaoke-wobble"?X.animation="anim-wobble 1s infinite ease-in-out":j==="karaoke-jello"?X.animation="anim-jello 1s infinite":j==="karaoke-rubberband"?X.animation="anim-rubberband 1s infinite":j==="karaoke-heartbeat"?X.animation="anim-heartbeat 1.3s infinite ease-in-out":j==="karaoke-flash"?X.animation="anim-flash 1s infinite":j==="karaoke-tada"?X.animation="anim-tada 1s infinite":j==="karaoke-swing"?X.animation="anim-swing 2s infinite":j==="karaoke-rotate"?X.animation="anim-rotate 4s infinite linear":j==="karaoke-spin"?X.animation="anim-rotate 1s infinite linear":j==="karaoke-glitch"?X.animation="anim-glitch 0.3s infinite linear":j==="karaoke-typewriter"?(X.animation="typewriter-reveal 0.5s steps(10, end) forwards",X.whiteSpace="nowrap",X.overflow="hidden",X.display="inline-block",X.verticalAlign="bottom"):j==="karaoke-fade"?X.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":j==="karaoke-slide"?X.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":j==="karaoke-drop"?X.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":j==="karaoke-lightspeed"?X.animation="trans-lightspeed-in 0.5s ease-out forwards":j==="karaoke-roll"?X.animation="trans-roll-in 0.5s ease-out forwards":j==="karaoke-zoom"?X.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":j==="karaoke-elastic"?X.animation="trans-elastic-in 0.7s ease-out forwards":j==="karaoke-scale-rotate"?X.animation="trans-scale-rotate-in 0.5s ease-out forwards":j==="karaoke-flip"?X.animation="trans-flip-in 0.5s ease-out forwards":j==="karaoke-rotate-in"?X.animation="trans-rotate-in 0.5s ease-out forwards":j==="karaoke-spiral"?X.animation="trans-spiral-in 0.6s ease-out forwards":j==="karaoke-blur"?X.animation="trans-blur-in 0.4s ease-out forwards":j==="karaoke-shatter"?X.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(j||"")&&(X.color=_t,X.textShadow=`0 0 10px ${_t}`,j?.includes("glow")&&(X.textShadow=`0 0 5px ${_t}, 0 0 15px ${_t}, 0 0 30px ${_t}`))}const $n=d.jsx("span",{className:"inline-block",style:X,children:ln},mt);return Wt?d.jsxs(hg.Fragment,{children:[$n," "]},mt):$n});else if(j==="karaoke"||j?.startsWith("karaoke-")){const Tt=A.highlightColor||"#fb923c",mt=A.highlightBackground||"#fb923c";Pe.color=Tt,j==="karaoke-neon"&&(Pe.textShadow=`0 0 10px ${Tt}, 0 0 20px ${Tt}`),j==="karaoke-scale"&&(Pe.transform=(Pe.transform||"")+" scale(1.1)"),j==="karaoke-underline"&&(Pe.textDecoration="underline"),j==="karaoke-bounce"&&(Pe.transform=(Pe.transform||"")+" translateY(-5px)"),j==="karaoke-fill"&&(Pe.backgroundColor=mt,Pe.color="#000",Pe.padding="4px 12px",Pe.borderRadius="6px"),j==="karaoke-outline"&&(Pe.color="transparent",Pe.WebkitTextStroke=`2px ${Tt}`),j==="karaoke-shadow"&&(Pe.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),j==="karaoke-gradient"&&(Pe.background=`linear-gradient(90deg, ${Tt}, ${mt})`,Pe.WebkitBackgroundClip="text",Pe.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(j)&&(Pe.backgroundColor=mt,Pe.color="#000",Pe.padding="4px 16px",Pe.borderRadius=j==="karaoke-pill"?"9999px":j==="karaoke-rounded"?"12px":"0"),j?.includes("glow")&&(Pe.textShadow=`0 0 10px ${Tt}, 0 0 20px ${Tt}`)}else j==="scale"?Pe.color=A.highlightColor||"#fb923c":A.highlightEffect==="background"&&(Pe.backgroundColor=(A.highlightBackground||"#fb923c")+"4D",Pe.padding="0 10px",Pe.borderRadius="8px")}return d.jsx("p",{"data-lyric-active":Le?"true":"false",className:`${ht} ${Le?Be:rt}`,onClick:()=>{Le&&(navigator.clipboard.writeText(R.text),n.success("Lyric copied to clipboard",1500)),o.current&&!D&&(o.current.currentTime=R.time,Ke(R.time))},children:d.jsx("span",{className:`inline-block ${Le&&A.textAnimation!=="none"&&A.textAnimation!=="typewriter"?`text-anim-${A.textAnimation}`:""}`,children:d.jsx("span",{style:Pe,className:"inline-block",children:Mn})})},Q)}),d.jsx("div",{className:`transition-all duration-500 ${A.contentPosition==="center"?Ce===Hn.EDITOR||je?"h-[25vh]":!Oi&&!So?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):d.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!Gn&&ye!=="none"&&d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[d.jsx(Yl,{size:64,className:"opacity-20"}),d.jsx("p",{children:"Load audio & lyrics to start"}),d.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),d.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${So?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:d.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:d.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 group",children:[d.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Jl(Ne)}),d.jsxs("div",{ref:Ge,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:R=>{R.currentTarget.setPointerCapture(R.pointerId),Qi(R.clientX)},onPointerMove:R=>{R.buttons===1&&Qi(R.clientX)},children:[d.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${Ne/Ue*100}%`}}),d.jsx("input",{type:"range",min:"0",max:Ue||0,value:Ne,onChange:Xi,disabled:D,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),d.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Jl(Ue)}),d.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[d.jsx("button",{onClick:()=>B(!Et),className:"text-zinc-400 hover:text-white",children:Et||ft===0?d.jsx(ql,{size:16}):d.jsx(qo,{size:16})}),d.jsxs("div",{ref:Dt,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:R=>{R.currentTarget.setPointerCapture(R.pointerId),os(R.clientX)},onPointerMove:R=>{R.buttons===1&&os(R.clientX)},children:[d.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${Et?0:ft*100}%`}}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Et?0:ft,onChange:Or,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),d.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[d.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[d.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio or video",children:[d.jsx(Yl,{size:18}),d.jsx("input",{type:"file",accept:"audio/*,video/*",className:"hidden",onChange:Gt,disabled:D})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${V.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt, .vtt, .ttml)",children:[d.jsx(Er,{size:18}),d.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml,.vtt",className:"hidden",onChange:Ft,disabled:D})]}),V.length>0&&d.jsx("button",{onClick:()=>H([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:D,children:d.jsx(hi,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[d.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[ue>0?"+":"",ue.toFixed(1),"s"]}),d.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[d.jsx("button",{onClick:()=>ge(R=>parseFloat((R+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:D,children:d.jsx(Zu,{size:12})}),d.jsx("button",{onClick:()=>ge(R=>parseFloat((R-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:D,children:d.jsx(na,{size:12})})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${Je?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:Je?`Custom Font: ${Je}`:"Load Custom Font (.ttf, .otf, .woff)",children:[d.jsx($o,{size:18}),d.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:Cn,disabled:D})]}),Je&&d.jsx("button",{onClick:()=>Ve(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:D,children:d.jsx(hi,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[d.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(A.fontSizeScale*100),"%"]}),d.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[d.jsx("button",{onClick:()=>Oe(R=>({...R,fontSizeScale:Math.min(R.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:D,children:d.jsx(Zu,{size:12})}),d.jsx("button",{onClick:()=>Oe(R=>({...R,fontSizeScale:Math.max(R.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:D,children:d.jsx(na,{size:12})})]})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:ye,onChange:R=>{const Q=R.target.value;Ie(Q);const Le=Dr[Q];if(Le){const te={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};Oe(_e=>({..._e,...te,...Le}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:D,title:"Select Visual Preset",children:[d.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),d.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),d.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),d.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),d.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),d.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),d.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),d.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),d.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),d.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),d.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),d.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),d.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),d.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),d.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),d.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),d.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),d.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),d.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),d.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),d.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),d.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:qn,title:"Stop (S)",disabled:D,children:d.jsx(nd,{size:20,fill:"currentColor"})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:D||ut.length===0,onClick:Bi,title:"Previous Song",children:d.jsx(Bb,{size:24})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:D,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:d.jsx(kb,{size:20})}),d.jsx("button",{onClick:Vi,disabled:D,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:De?d.jsx(yg,{size:28,fill:"currentColor"}):d.jsx(Wu,{size:28,fill:"currentColor",className:"ml-1"})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:D,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:d.jsx(Wx,{size:20})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:D||ut.length===0,onClick:oi,title:"Next Song",children:d.jsx(Ob,{size:24})}),d.jsxs("button",{className:`transition-colors disabled:opacity-50 ${be!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:vo,title:`Repeat: ${be==="off"?"Off":be==="one"?"One":be==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:D,children:[be==="one"&&d.jsx(Ab,{size:20}),be==="all_repeat"&&d.jsx(w0,{size:20}),be==="all"&&d.jsx(_r,{size:20}),be==="off"&&d.jsx(w0,{size:20,className:"opacity-50"})]})]}),d.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>Oe(R=>({...R,backgroundBlurStrength:R.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${xt?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${xt?"On":"Off"}`,disabled:D,children:xt?"BLUR":"SHARP"}),d.jsx("button",{onClick:()=>Oe(R=>({...R,highlightEffect:R.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${A.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:d.jsx($o,{size:20})}),d.jsx("button",{onClick:()=>pe(R=>R==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:D,children:ke}),d.jsx("button",{onClick:()=>we(R=>R==="16:9"?"9:16":R==="9:16"?"3:4":R==="3:4"?"1:1":R==="1:1"?"1:2":R==="1:2"?"2:1":R==="2:1"?"2:3":R==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:D,children:xe})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:et,onChange:R=>G(R.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:D,title:"Select Video Codec",children:[d.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),Jt.map(R=>d.jsx("option",{value:R.value,className:"bg-zinc-900",children:R.label},R.value))]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:Ee,onChange:R=>me(R.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:D,title:"Select Quality (Bitrate)",children:[d.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),d.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),d.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),d.jsx("button",{onClick:xo,disabled:D||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:`Export as Video (${se==="ffmpeg"?"FFmpeg":"MediaRecorder"})`,children:d.jsx(Ws,{size:18})})]})]})]})})}),je?d.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:d.jsx(BN,{playlist:ut,setPlaylist:st,currentTrackIndex:Re,setCurrentTrackIndex:dt,onPlayTrack:gi,isPlaying:De,onTogglePlay:Vi,currentTime:Ne,onSeek:R=>{o.current&&!D&&(o.current.currentTime=R,Ke(R))},onClearPlaylist:()=>{qn(),x(null),H([]),dt(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:R=>{R===Re?(qn(),x(null),H([]),dt(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):R<Re&&dt(Q=>Q-1),st(Q=>{const Le=[...Q];return Le.splice(R,1),Le})},onClose:()=>ze(!1)})}):Ce===Hn.EDITOR&&d.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:d.jsx(E1,{slides:$,setSlides:re,currentTime:Ne,duration:Ue||60,lyrics:V,onSeek:R=>{o.current&&!D&&(o.current.currentTime=R,Ke(R))},onClose:()=>ie(Hn.PLAYER),renderConfig:A,setRenderConfig:Oe})})]}),D&&d.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[d.jsx("div",{className:se==="ffmpeg"?"animate-pulse":"animate-bounce",children:d.jsx(Ws,{size:48,className:se==="ffmpeg"?"text-orange-500":"text-purple-500"})}),d.jsxs("h2",{className:"text-2xl font-bold text-white",children:[se==="ffmpeg"?"FFmpeg Rendering":"Rendering Video"," (",xe," ",ke,")"]}),d.jsx("p",{className:"text-zinc-400 max-w-md",children:se==="ffmpeg"?d.jsxs(d.Fragment,{children:["Frame-by-frame capture using FFmpeg WASM.",d.jsx("br",{}),d.jsx("span",{className:"text-orange-400 font-medium",children:M||"Initializing..."}),d.jsx("br",{}),"This is faster than realtime - no audio playback needed."]}):d.jsxs(d.Fragment,{children:["Rendering in real-time using Canvas 2D engine.",d.jsx("br",{}),"The audio will play during capture.",d.jsx("br",{}),"Please keep this tab active for best performance."]})}),d.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-300 ease-linear ${se==="ffmpeg"?"bg-orange-500":"bg-purple-500"}`,style:{width:`${W}%`}})}),d.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(W),"%"]}),d.jsxs("button",{onClick:bo,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[d.jsx(nd,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),I&&d.jsx(JN,{config:A,setConfig:Oe,preset:ye,setPreset:Ie,onClose:()=>le(!1),isPlaylistMode:je,hasPlaylist:ut.length>0,onRender:xo,customFontName:Je,onFontUpload:Cn,onClearCustomFont:()=>Ve(null),resolution:ke,setResolution:pe,aspectRatio:xe,setAspectRatio:we,renderCodec:et,setRenderCodec:G,supportedCodecs:Jt,renderQuality:Ee,setRenderQuality:me,renderFps:L,setRenderFps:he,renderEngine:se,setRenderEngine:E,ffmpegCodec:z,setFfmpegCodec:O}),oe&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>ce(!1),children:d.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",onClick:R=>R.stopPropagation(),children:[d.jsx("button",{onClick:()=>ce(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-zinc-400 hover:text-white transition-colors",children:d.jsx(hi,{size:20})}),d.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[d.jsx(Cr,{className:"text-purple-500"}),"Keyboard Shortcuts"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Playback"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Space"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"S"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Rewind 5s"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Forward 5s"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"R"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Mute"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"M"})]})]}),d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Interface"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"F"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"O"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Hold UI (No Auto-Hide)"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"H"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Header Info"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"I"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Shortcut Info"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Y"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"P"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Editor & Styles"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Timeline"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"T"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Playlist"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"L"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"D"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Export Video"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Ctrl+Shift+E"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"+ / -"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Visual Preset"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"J"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Highight Effect"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Z"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"X"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Text Case"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"C"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Lyric Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"G"})]})]}),d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Mouse & Touch"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Minimal Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Double Click / Tap"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Seek to Lyric"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Line"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Copy Active Lyric"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Active Line"})]})]})]})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-white/5 text-center",children:d.jsx("p",{className:"text-zinc-500 text-sm",children:"Shortcuts are disabled during video rendering."})})]})})]})}const hy=document.getElementById("root");if(!hy)throw new Error("Could not find root element to mount to");const cA=Sx.createRoot(hy);cA.render(d.jsx(hg.StrictMode,{children:d.jsx(x1,{children:d.jsx(rA,{})})}));export{uA as c,pg as g};
