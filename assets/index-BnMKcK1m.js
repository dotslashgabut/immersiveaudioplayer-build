(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function o(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(r){if(r.ep)return;r.ep=!0;const u=o(r);fetch(r.href,u)}})();var uk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ky(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kd={exports:{}},Rs={};var O0;function n1(){if(O0)return Rs;O0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(a,r,u){var p=null;if(u!==void 0&&(p=""+u),r.key!==void 0&&(p=""+r.key),"key"in r){u={};for(var g in r)g!=="key"&&(u[g]=r[g])}else u=r;return r=u.ref,{$$typeof:e,type:a,key:p,ref:r!==void 0?r:null,props:u}}return Rs.Fragment=t,Rs.jsx=o,Rs.jsxs=o,Rs}var G0;function i1(){return G0||(G0=1,Kd.exports=n1()),Kd.exports}var d=i1(),Xd={exports:{}},Rt={};var V0;function o1(){if(V0)return Rt;V0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,I={};function Y(D,oe,we){this.props=D,this.context=oe,this.refs=I,this.updater=we||E}Y.prototype.isReactComponent={},Y.prototype.setState=function(D,oe){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,oe,"setState")},Y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function de(){}de.prototype=Y.prototype;function se(D,oe,we){this.props=D,this.context=oe,this.refs=I,this.updater=we||E}var pe=se.prototype=new de;pe.constructor=se,j(pe,Y.prototype),pe.isPureReactComponent=!0;var Fe=Array.isArray;function _e(){}var Se={H:null,A:null,T:null,S:null},et=Object.prototype.hasOwnProperty;function Me(D,oe,we){var Be=we.ref;return{$$typeof:e,type:D,key:oe,ref:Be!==void 0?Be:null,props:we}}function Ye(D,oe){return Me(D.type,oe,D.props)}function ct(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function pt(D){var oe={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(we){return oe[we]})}var ht=/\/+/g;function bt(D,oe){return typeof D=="object"&&D!==null&&D.key!=null?pt(""+D.key):oe.toString(36)}function It(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(_e,_e):(D.status="pending",D.then(function(oe){D.status==="pending"&&(D.status="fulfilled",D.value=oe)},function(oe){D.status==="pending"&&(D.status="rejected",D.reason=oe)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function V(D,oe,we,Be,Je){var C=typeof D;(C==="undefined"||C==="boolean")&&(D=null);var B=!1;if(D===null)B=!0;else switch(C){case"bigint":case"string":case"number":B=!0;break;case"object":switch(D.$$typeof){case e:case t:B=!0;break;case x:return B=D._init,V(B(D._payload),oe,we,Be,Je)}}if(B)return Je=Je(D),B=Be===""?"."+bt(D,0):Be,Fe(Je)?(we="",B!=null&&(we=B.replace(ht,"$&/")+"/"),V(Je,oe,we,"",function(Ge){return Ge})):Je!=null&&(ct(Je)&&(Je=Ye(Je,we+(Je.key==null||D&&D.key===Je.key?"":(""+Je.key).replace(ht,"$&/")+"/")+B)),oe.push(Je)),1;B=0;var ne=Be===""?".":Be+":";if(Fe(D))for(var ce=0;ce<D.length;ce++)Be=D[ce],C=ne+bt(Be,ce),B+=V(Be,oe,we,C,Je);else if(ce=A(D),typeof ce=="function")for(D=ce.call(D),ce=0;!(Be=D.next()).done;)Be=Be.value,C=ne+bt(Be,ce++),B+=V(Be,oe,we,C,Je);else if(C==="object"){if(typeof D.then=="function")return V(It(D),oe,we,Be,Je);throw oe=String(D),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return B}function Ce(D,oe,we){if(D==null)return D;var Be=[],Je=0;return V(D,Be,"","",function(C){return oe.call(we,C,Je++)}),Be}function ie(D){if(D._status===-1){var oe=D._result;oe=oe(),oe.then(function(we){(D._status===0||D._status===-1)&&(D._status=1,D._result=we)},function(we){(D._status===0||D._status===-1)&&(D._status=2,D._result=we)}),D._status===-1&&(D._status=0,D._result=oe)}if(D._status===1)return D._result.default;throw D._result}var Et=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Xe={map:Ce,forEach:function(D,oe,we){Ce(D,function(){oe.apply(this,arguments)},we)},count:function(D){var oe=0;return Ce(D,function(){oe++}),oe},toArray:function(D){return Ce(D,function(oe){return oe})||[]},only:function(D){if(!ct(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Rt.Activity=b,Rt.Children=Xe,Rt.Component=Y,Rt.Fragment=o,Rt.Profiler=r,Rt.PureComponent=se,Rt.StrictMode=a,Rt.Suspense=v,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Se.H.useMemoCache(D)}},Rt.cache=function(D){return function(){return D.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(D,oe,we){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Be=j({},D.props),Je=D.key;if(oe!=null)for(C in oe.key!==void 0&&(Je=""+oe.key),oe)!et.call(oe,C)||C==="key"||C==="__self"||C==="__source"||C==="ref"&&oe.ref===void 0||(Be[C]=oe[C]);var C=arguments.length-2;if(C===1)Be.children=we;else if(1<C){for(var B=Array(C),ne=0;ne<C;ne++)B[ne]=arguments[ne+2];Be.children=B}return Me(D.type,Je,Be)},Rt.createContext=function(D){return D={$$typeof:p,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Rt.createElement=function(D,oe,we){var Be,Je={},C=null;if(oe!=null)for(Be in oe.key!==void 0&&(C=""+oe.key),oe)et.call(oe,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(Je[Be]=oe[Be]);var B=arguments.length-2;if(B===1)Je.children=we;else if(1<B){for(var ne=Array(B),ce=0;ce<B;ce++)ne[ce]=arguments[ce+2];Je.children=ne}if(D&&D.defaultProps)for(Be in B=D.defaultProps,B)Je[Be]===void 0&&(Je[Be]=B[Be]);return Me(D,C,Je)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(D){return{$$typeof:g,render:D}},Rt.isValidElement=ct,Rt.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:ie}},Rt.memo=function(D,oe){return{$$typeof:m,type:D,compare:oe===void 0?null:oe}},Rt.startTransition=function(D){var oe=Se.T,we={};Se.T=we;try{var Be=D(),Je=Se.S;Je!==null&&Je(we,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(_e,Et)}catch(C){Et(C)}finally{oe!==null&&we.types!==null&&(oe.types=we.types),Se.T=oe}},Rt.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},Rt.use=function(D){return Se.H.use(D)},Rt.useActionState=function(D,oe,we){return Se.H.useActionState(D,oe,we)},Rt.useCallback=function(D,oe){return Se.H.useCallback(D,oe)},Rt.useContext=function(D){return Se.H.useContext(D)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(D,oe){return Se.H.useDeferredValue(D,oe)},Rt.useEffect=function(D,oe){return Se.H.useEffect(D,oe)},Rt.useEffectEvent=function(D){return Se.H.useEffectEvent(D)},Rt.useId=function(){return Se.H.useId()},Rt.useImperativeHandle=function(D,oe,we){return Se.H.useImperativeHandle(D,oe,we)},Rt.useInsertionEffect=function(D,oe){return Se.H.useInsertionEffect(D,oe)},Rt.useLayoutEffect=function(D,oe){return Se.H.useLayoutEffect(D,oe)},Rt.useMemo=function(D,oe){return Se.H.useMemo(D,oe)},Rt.useOptimistic=function(D,oe){return Se.H.useOptimistic(D,oe)},Rt.useReducer=function(D,oe,we){return Se.H.useReducer(D,oe,we)},Rt.useRef=function(D){return Se.H.useRef(D)},Rt.useState=function(D){return Se.H.useState(D)},Rt.useSyncExternalStore=function(D,oe,we){return Se.H.useSyncExternalStore(D,oe,we)},Rt.useTransition=function(){return Se.H.useTransition()},Rt.version="19.2.3",Rt}var j0;function Gf(){return j0||(j0=1,Xd.exports=o1()),Xd.exports}var Q=Gf();const Vf=Ky(Q);var Wd={exports:{}},Is={},Qd={exports:{}},Zd={};var q0;function l1(){return q0||(q0=1,(function(e){function t(V,Ce){var ie=V.length;V.push(Ce);e:for(;0<ie;){var Et=ie-1>>>1,Xe=V[Et];if(0<r(Xe,Ce))V[Et]=Ce,V[ie]=Xe,ie=Et;else break e}}function o(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var Ce=V[0],ie=V.pop();if(ie!==Ce){V[0]=ie;e:for(var Et=0,Xe=V.length,D=Xe>>>1;Et<D;){var oe=2*(Et+1)-1,we=V[oe],Be=oe+1,Je=V[Be];if(0>r(we,ie))Be<Xe&&0>r(Je,we)?(V[Et]=Je,V[Be]=ie,Et=Be):(V[Et]=we,V[oe]=ie,Et=oe);else if(Be<Xe&&0>r(Je,ie))V[Et]=Je,V[Be]=ie,Et=Be;else break e}}return Ce}function r(V,Ce){var ie=V.sortIndex-Ce.sortIndex;return ie!==0?ie:V.id-Ce.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var p=Date,g=p.now();e.unstable_now=function(){return p.now()-g}}var v=[],m=[],x=1,b=null,T=3,A=!1,E=!1,j=!1,I=!1,Y=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function pe(V){for(var Ce=o(m);Ce!==null;){if(Ce.callback===null)a(m);else if(Ce.startTime<=V)a(m),Ce.sortIndex=Ce.expirationTime,t(v,Ce);else break;Ce=o(m)}}function Fe(V){if(j=!1,pe(V),!E)if(o(v)!==null)E=!0,_e||(_e=!0,pt());else{var Ce=o(m);Ce!==null&&It(Fe,Ce.startTime-V)}}var _e=!1,Se=-1,et=5,Me=-1;function Ye(){return I?!0:!(e.unstable_now()-Me<et)}function ct(){if(I=!1,_e){var V=e.unstable_now();Me=V;var Ce=!0;try{e:{E=!1,j&&(j=!1,de(Se),Se=-1),A=!0;var ie=T;try{t:{for(pe(V),b=o(v);b!==null&&!(b.expirationTime>V&&Ye());){var Et=b.callback;if(typeof Et=="function"){b.callback=null,T=b.priorityLevel;var Xe=Et(b.expirationTime<=V);if(V=e.unstable_now(),typeof Xe=="function"){b.callback=Xe,pe(V),Ce=!0;break t}b===o(v)&&a(v),pe(V)}else a(v);b=o(v)}if(b!==null)Ce=!0;else{var D=o(m);D!==null&&It(Fe,D.startTime-V),Ce=!1}}break e}finally{b=null,T=ie,A=!1}Ce=void 0}}finally{Ce?pt():_e=!1}}}var pt;if(typeof se=="function")pt=function(){se(ct)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,bt=ht.port2;ht.port1.onmessage=ct,pt=function(){bt.postMessage(null)}}else pt=function(){Y(ct,0)};function It(V,Ce){Se=Y(function(){V(e.unstable_now())},Ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):et=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(V){switch(T){case 1:case 2:case 3:var Ce=3;break;default:Ce=T}var ie=T;T=Ce;try{return V()}finally{T=ie}},e.unstable_requestPaint=function(){I=!0},e.unstable_runWithPriority=function(V,Ce){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=T;T=V;try{return Ce()}finally{T=ie}},e.unstable_scheduleCallback=function(V,Ce,ie){var Et=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Et+ie:Et):ie=Et,V){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ie+Xe,V={id:x++,callback:Ce,priorityLevel:V,startTime:ie,expirationTime:Xe,sortIndex:-1},ie>Et?(V.sortIndex=ie,t(m,V),o(v)===null&&V===o(m)&&(j?(de(Se),Se=-1):j=!0,It(Fe,ie-Et))):(V.sortIndex=Xe,t(v,V),E||A||(E=!0,_e||(_e=!0,pt()))),V},e.unstable_shouldYield=Ye,e.unstable_wrapCallback=function(V){var Ce=T;return function(){var ie=T;T=Ce;try{return V.apply(this,arguments)}finally{T=ie}}}})(Zd)),Zd}var $0;function a1(){return $0||($0=1,Qd.exports=l1()),Qd.exports}var ef={exports:{}},oi={};var Y0;function s1(){if(Y0)return oi;Y0=1;var e=Gf();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(v,m,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:v,containerInfo:m,implementation:x}}var p=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,oi.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(v,m,null,x)},oi.flushSync=function(v){var m=p.T,x=a.p;try{if(p.T=null,a.p=2,v)return v()}finally{p.T=m,a.p=x,a.d.f()}},oi.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(v,m))},oi.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},oi.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,b=g(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?a.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:A}):x==="script"&&a.d.X(v,{crossOrigin:b,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},oi.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=g(m.as,m.crossOrigin);a.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(v)},oi.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,b=g(x,m.crossOrigin);a.d.L(v,x,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},oi.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=g(m.as,m.crossOrigin);a.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(v)},oi.requestFormReset=function(v){a.d.r(v)},oi.unstable_batchedUpdates=function(v,m){return v(m)},oi.useFormState=function(v,m,x){return p.H.useFormState(v,m,x)},oi.useFormStatus=function(){return p.H.useHostTransitionStatus()},oi.version="19.2.3",oi}var J0;function r1(){if(J0)return ef.exports;J0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ef.exports=s1(),ef.exports}var K0;function c1(){if(K0)return Is;K0=1;var e=a1(),t=Gf(),o=r1();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function p(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function v(n){if(u(n)!==n)throw Error(a(188))}function m(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(a(188));return i!==n?null:n}for(var l=n,s=i;;){var h=l.return;if(h===null)break;var y=h.alternate;if(y===null){if(s=h.return,s!==null){l=s;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===l)return v(h),n;if(y===s)return v(h),i;y=y.sibling}throw Error(a(188))}if(l.return!==s.return)l=h,s=y;else{for(var S=!1,N=h.child;N;){if(N===l){S=!0,l=h,s=y;break}if(N===s){S=!0,s=h,l=y;break}N=N.sibling}if(!S){for(N=y.child;N;){if(N===l){S=!0,l=y,s=h;break}if(N===s){S=!0,s=y,l=h;break}N=N.sibling}if(!S)throw Error(a(189))}}if(l.alternate!==s)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:i}function x(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=x(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),se=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),Me=Symbol.for("react.activity"),Ye=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function pt(n){return n===null||typeof n!="object"?null:(n=ct&&n[ct]||n["@@iterator"],typeof n=="function"?n:null)}var ht=Symbol.for("react.client.reference");function bt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ht?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case Y:return"Profiler";case I:return"StrictMode";case Fe:return"Suspense";case _e:return"SuspenseList";case Me:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case se:return n.displayName||"Context";case de:return(n._context.displayName||"Context")+".Consumer";case pe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Se:return i=n.displayName||null,i!==null?i:bt(n.type)||"Memo";case et:i=n._payload,n=n._init;try{return bt(n(i))}catch{}}return null}var It=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Et=[],Xe=-1;function D(n){return{current:n}}function oe(n){0>Xe||(n.current=Et[Xe],Et[Xe]=null,Xe--)}function we(n,i){Xe++,Et[Xe]=n.current,n.current=i}var Be=D(null),Je=D(null),C=D(null),B=D(null);function ne(n,i){switch(we(C,i),we(Je,n),we(Be,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?u0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=u0(i),n=d0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}oe(Be),we(Be,n)}function ce(){oe(Be),oe(Je),oe(C)}function Ge(n){n.memoizedState!==null&&we(B,n);var i=Be.current,l=d0(i,n.type);i!==l&&(we(Je,n),we(Be,l))}function P(n){Je.current===n&&(oe(Be),oe(Je)),B.current===n&&(oe(B),Ns._currentValue=ie)}var Ue,Re;function ye(n){if(Ue===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ue=i&&i[1]||"",Re=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+n+Re}var fe=!1;function Pe(n,i){if(!n||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(i){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(le){var ee=le}Reflect.construct(n,[],Te)}else{try{Te.call()}catch(le){ee=le}n.call(Te.prototype)}}else{try{throw Error()}catch(le){ee=le}(Te=n())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(le){if(le&&ee&&typeof le.stack=="string")return[le.stack,ee.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=s.DetermineComponentFrameRoot(),S=y[0],N=y[1];if(S&&N){var L=S.split(`
`),X=N.split(`
`);for(h=s=0;s<L.length&&!L[s].includes("DetermineComponentFrameRoot");)s++;for(;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;if(s===L.length||h===X.length)for(s=L.length-1,h=X.length-1;1<=s&&0<=h&&L[s]!==X[h];)h--;for(;1<=s&&0<=h;s--,h--)if(L[s]!==X[h]){if(s!==1||h!==1)do if(s--,h--,0>h||L[s]!==X[h]){var me=`
`+L[s].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=s&&0<=h);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?ye(l):""}function Qe(n,i){switch(n.tag){case 26:case 27:case 5:return ye(n.type);case 16:return ye("Lazy");case 13:return n.child!==i&&i!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Pe(n.type,!1);case 11:return Pe(n.type.render,!1);case 1:return Pe(n.type,!0);case 31:return ye("Activity");default:return""}}function z(n){try{var i="",l=null;do i+=Qe(n,l),l=n,n=n.return;while(n);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var je=Object.prototype.hasOwnProperty,it=e.unstable_scheduleCallback,U=e.unstable_cancelCallback,Z=e.unstable_shouldYield,ae=e.unstable_requestPaint,Ee=e.unstable_now,ve=e.unstable_getCurrentPriorityLevel,Ne=e.unstable_ImmediatePriority,ue=e.unstable_UserBlockingPriority,Ve=e.unstable_NormalPriority,w=e.unstable_LowPriority,M=e.unstable_IdlePriority,R=e.log,G=e.unstable_setDisableYieldValue,$=null,he=null;function re(n){if(typeof R=="function"&&G(n),he&&typeof he.setStrictMode=="function")try{he.setStrictMode($,n)}catch{}}var ze=Math.clz32?Math.clz32:_,Ae=Math.log,ke=Math.LN2;function _(n){return n>>>=0,n===0?32:31-(Ae(n)/ke|0)|0}var ot=256,xt=262144,zt=4194304;function Nt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function tt(n,i,l){var s=n.pendingLanes;if(s===0)return 0;var h=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var N=s&134217727;return N!==0?(s=N&~y,s!==0?h=Nt(s):(S&=N,S!==0?h=Nt(S):l||(l=N&~n,l!==0&&(h=Nt(l))))):(N=s&~y,N!==0?h=Nt(N):S!==0?h=Nt(S):l||(l=s&~n,l!==0&&(h=Nt(l)))),h===0?0:i!==0&&i!==h&&(i&y)===0&&(y=h&-h,l=i&-i,y>=l||y===32&&(l&4194048)!==0)?i:h}function Jt(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ge(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var n=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),n}function dt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function mt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function st(n,i,l,s,h,y){var S=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var N=n.entanglements,L=n.expirationTimes,X=n.hiddenUpdates;for(l=S&~l;0<l;){var me=31-ze(l),Te=1<<me;N[me]=0,L[me]=-1;var ee=X[me];if(ee!==null)for(X[me]=null,me=0;me<ee.length;me++){var le=ee[me];le!==null&&(le.lane&=-536870913)}l&=~Te}s!==0&&Pt(n,s,0),y!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~i))}function Pt(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var s=31-ze(i);n.entangledLanes|=i,n.entanglements[s]=n.entanglements[s]|1073741824|l&261930}function $t(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var s=31-ze(l),h=1<<s;h&i|n[s]&i&&(n[s]|=i),l&=~h}}function Rn(n,i){var l=i&-i;return l=(l&42)!==0?1:Hn(l),(l&(n.suspendedLanes|i))!==0?0:l}function Hn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function An(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ai(){var n=Ce.p;return n!==0?n:(n=window.event,n===void 0?32:D0(n.type))}function bi(n,i){var l=Ce.p;try{return Ce.p=n,i()}finally{Ce.p=l}}var Jn=Math.random().toString(36).slice(2),qe="__reactFiber$"+Jn,St="__reactProps$"+Jn,Ft="__reactContainer$"+Jn,ni="__reactEvents$"+Jn,Bt="__reactListeners$"+Jn,gn="__reactHandles$"+Jn,xl="__reactResources$"+Jn,eo="__reactMarker$"+Jn;function Ho(n){delete n[qe],delete n[St],delete n[ni],delete n[Bt],delete n[gn]}function mo(n){var i=n[qe];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Ft]||l[qe]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=v0(n);n!==null;){if(l=n[qe])return l;n=v0(n)}return i}n=l,l=n.parentNode}return null}function Oo(n){if(n=n[qe]||n[Ft]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function bl(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function Si(n){var i=n[xl];return i||(i=n[xl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Sn(n){n[eo]=!0}var $l=new Set,Yl={};function Kn(n,i){go(n,i),go(n+"Capture",i)}function go(n,i){for(Yl[n]=i,n=0;n<i.length;n++)$l.add(i[n])}var nr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},ir={};function Qc(n){return je.call(ir,n)?!0:je.call($a,n)?!1:nr.test(n)?ir[n]=!0:($a[n]=!0,!1)}function Jl(n,i,l){if(Qc(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var s=i.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Sl(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function $i(n,i,l,s){if(s===null)n.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+s)}}function si(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function or(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zc(n,i,l){var s=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,y=s.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(n,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ya(n){if(!n._valueTracker){var i=or(n)?"checked":"value";n._valueTracker=Zc(n,i,""+n[i])}}function Kl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),s="";return n&&(s=or(n)?n.checked?"true":"false":n.value),n=s,n!==l?(i.setValue(n),!0):!1}function Go(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Xl=/[\n"\\]/g;function Vn(n){return n.replace(Xl,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Vo(n,i,l,s,h,y,S,N){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),i!=null?S==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+si(i)):n.value!==""+si(i)&&(n.value=""+si(i)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),i!=null?Wl(n,S,si(i)):l!=null?Wl(n,S,si(l)):s!=null&&n.removeAttribute("value"),h==null&&y!=null&&(n.defaultChecked=!!y),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+si(N):n.removeAttribute("name")}function lr(n,i,l,s,h,y,S,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),i!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Ya(n);return}l=l!=null?""+si(l):"",i=i!=null?""+si(i):l,N||i===n.value||(n.value=i),n.defaultValue=i}s=s??h,s=typeof s!="function"&&typeof s!="symbol"&&!!s,n.checked=N?n.checked:!!s,n.defaultChecked=!!s,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),Ya(n)}function Wl(n,i,l){i==="number"&&Go(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function jo(n,i,l,s){if(n=n.options,i){i={};for(var h=0;h<l.length;h++)i["$"+l[h]]=!0;for(l=0;l<n.length;l++)h=i.hasOwnProperty("$"+n[l].value),n[l].selected!==h&&(n[l].selected=h),h&&s&&(n[l].defaultSelected=!0)}else{for(l=""+si(l),i=null,h=0;h<n.length;h++){if(n[h].value===l){n[h].selected=!0,s&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function qo(n,i,l){if(i!=null&&(i=""+si(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+si(l):""}function yo(n,i,l,s){if(i==null){if(s!=null){if(l!=null)throw Error(a(92));if(It(s)){if(1<s.length)throw Error(a(93));s=s[0]}l=s}l==null&&(l=""),i=l}l=si(i),n.defaultValue=l,s=n.textContent,s===l&&s!==""&&s!==null&&(n.value=s),Ya(n)}function to(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Tl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function k(n,i,l){var s=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":s?n.setProperty(i,l):typeof l!="number"||l===0||Tl.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function J(n,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||i!=null&&i.hasOwnProperty(s)||(s.indexOf("--")===0?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="");for(var h in i)s=i[h],i.hasOwnProperty(h)&&l[h]!==s&&k(n,h,s)}else for(var y in i)i.hasOwnProperty(y)&&k(n,y,i[y])}function Le(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oe(n){return xe.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ze(){}var Tt=null;function gt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tn=null,ln=null;function He(n){var i=Oo(n);if(i&&(n=i.stateNode)){var l=n[St]||null;e:switch(n=i.stateNode,i.type){case"input":if(Vo(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Vn(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var s=l[i];if(s!==n&&s.form===n.form){var h=s[St]||null;if(!h)throw Error(a(90));Vo(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<l.length;i++)s=l[i],s.form===n.form&&Kl(s)}break e;case"textarea":qo(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&jo(n,!!l.multiple,i,!1)}}}var Mt=!1;function Xt(n,i,l){if(Mt)return n(i,l);Mt=!0;try{var s=n(i);return s}finally{if(Mt=!1,(Tn!==null||ln!==null)&&(Or(),Tn&&(i=Tn,n=ln,ln=Tn=null,He(i),n)))for(i=0;i<n.length;i++)He(n[i])}}function En(n,i){var l=n.stateNode;if(l===null)return null;var s=l[St]||null;if(s===null)return null;l=s[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var F=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ft=!1;if(F)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){ft=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{ft=!1}var $e=null,sn=null,Wt=null;function no(){if(Wt)return Wt;var n,i=sn,l=i.length,s,h="value"in $e?$e.value:$e.textContent,y=h.length;for(n=0;n<l&&i[n]===h[n];n++);var S=l-n;for(s=1;s<=S&&i[l-s]===h[y-s];s++);return Wt=h.slice(n,1<s?1-s:void 0)}function fi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function zi(){return!0}function $o(){return!1}function In(n){function i(l,s,h,y,S){this._reactName=l,this._targetInst=h,this.type=s,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(l=n[N],this[N]=l?l(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?zi:$o,this.isPropagationStopped=$o,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=In(ri),pi=b({},ri,{view:0,detail:0}),te=In(pi),hi,kt,zn,Yi=b({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zn&&(zn&&n.type==="mousemove"?(hi=n.screenX-zn.screenX,kt=n.screenY-zn.screenY):kt=hi=0,zn=n),hi)},movementY:function(n){return"movementY"in n?n.movementY:kt}}),io=In(Yi),vo=b({},Yi,{dataTransfer:0}),xo=In(vo),Ie=b({},pi,{relatedTarget:0}),lt=In(Ie),Gt=b({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),We=In(Gt),wn=b({},ri,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tn=In(wn),Dn=b({},ri,{data:0}),Ti=In(Dn),ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fx(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Ql[n])?!!i[n]:!1}function eu(){return fx}var px=b({},pi,{key:function(n){if(n.key){var i=ii[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yo[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(n){return n.type==="keypress"?fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hx=In(px),mx=b({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=In(mx),gx=b({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),yx=In(gx),vx=b({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),xx=In(vx),bx=b({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Sx=In(bx),Tx=b({},ri,{newState:0,oldState:0}),wx=In(Tx),Cx=[9,13,27,32],tu=F&&"CompositionEvent"in window,Ja=null;F&&"documentMode"in document&&(Ja=document.documentMode);var Ex=F&&"TextEvent"in window&&!Ja,gp=F&&(!tu||Ja&&8<Ja&&11>=Ja),yp=" ",vp=!1;function xp(n,i){switch(n){case"keyup":return Cx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zl=!1;function _x(n,i){switch(n){case"compositionend":return bp(i);case"keypress":return i.which!==32?null:(vp=!0,yp);case"textInput":return n=i.data,n===yp&&vp?null:n;default:return null}}function Nx(n,i){if(Zl)return n==="compositionend"||!tu&&xp(n,i)?(n=no(),Wt=sn=$e=null,Zl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gp&&i.locale!=="ko"?null:i.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ax[n.type]:i==="textarea"}function Tp(n,i,l,s){Tn?ln?ln.push(s):ln=[s]:Tn=s,i=Jr(i,"onChange"),0<i.length&&(l=new dn("onChange","change",null,l,s),n.push({event:l,listeners:i}))}var Ka=null,Xa=null;function Mx(n){o0(n,0)}function ar(n){var i=bl(n);if(Kl(i))return n}function wp(n,i){if(n==="change")return i}var Cp=!1;if(F){var nu;if(F){var iu="oninput"in document;if(!iu){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),iu=typeof Ep.oninput=="function"}nu=iu}else nu=!1;Cp=nu&&(!document.documentMode||9<document.documentMode)}function _p(){Ka&&(Ka.detachEvent("onpropertychange",Np),Xa=Ka=null)}function Np(n){if(n.propertyName==="value"&&ar(Xa)){var i=[];Tp(i,Xa,n,gt(n)),Xt(Mx,i)}}function kx(n,i,l){n==="focusin"?(_p(),Ka=i,Xa=l,Ka.attachEvent("onpropertychange",Np)):n==="focusout"&&_p()}function Rx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ar(Xa)}function Ix(n,i){if(n==="click")return ar(i)}function zx(n,i){if(n==="input"||n==="change")return ar(i)}function Dx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var wi=typeof Object.is=="function"?Object.is:Dx;function Wa(n,i){if(wi(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),s=Object.keys(i);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var h=l[s];if(!je.call(i,h)||!wi(n[h],i[h]))return!1}return!0}function Ap(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mp(n,i){var l=Ap(n);n=0;for(var s;l;){if(l.nodeType===3){if(s=n+l.textContent.length,n<=i&&s>=i)return{node:l,offset:i-n};n=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ap(l)}}function kp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?kp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Rp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Go(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Go(n.document)}return i}function ou(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Lx=F&&"documentMode"in document&&11>=document.documentMode,ea=null,lu=null,Qa=null,au=!1;function Ip(n,i,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;au||ea==null||ea!==Go(s)||(s=ea,"selectionStart"in s&&ou(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qa&&Wa(Qa,s)||(Qa=s,s=Jr(lu,"onSelect"),0<s.length&&(i=new dn("onSelect","select",null,i,l),n.push({event:i,listeners:s}),i.target=ea)))}function wl(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var ta={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionrun:wl("Transition","TransitionRun"),transitionstart:wl("Transition","TransitionStart"),transitioncancel:wl("Transition","TransitionCancel"),transitionend:wl("Transition","TransitionEnd")},su={},zp={};F&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function Cl(n){if(su[n])return su[n];if(!ta[n])return n;var i=ta[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in zp)return su[n]=i[l];return n}var Dp=Cl("animationend"),Lp=Cl("animationiteration"),Up=Cl("animationstart"),Ux=Cl("transitionrun"),Fx=Cl("transitionstart"),Px=Cl("transitioncancel"),Fp=Cl("transitionend"),Pp=new Map,ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ru.push("scrollEnd");function Ji(n,i){Pp.set(n,i),Kn(i,[n])}var sr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Di=[],na=0,cu=0;function rr(){for(var n=na,i=cu=na=0;i<n;){var l=Di[i];Di[i++]=null;var s=Di[i];Di[i++]=null;var h=Di[i];Di[i++]=null;var y=Di[i];if(Di[i++]=null,s!==null&&h!==null){var S=s.pending;S===null?h.next=h:(h.next=S.next,S.next=h),s.pending=h}y!==0&&Bp(l,h,y)}}function cr(n,i,l,s){Di[na++]=n,Di[na++]=i,Di[na++]=l,Di[na++]=s,cu|=s,n.lanes|=s,n=n.alternate,n!==null&&(n.lanes|=s)}function uu(n,i,l,s){return cr(n,i,l,s),ur(n)}function El(n,i){return cr(n,null,null,i),ur(n)}function Bp(n,i,l){n.lanes|=l;var s=n.alternate;s!==null&&(s.lanes|=l);for(var h=!1,y=n.return;y!==null;)y.childLanes|=l,s=y.alternate,s!==null&&(s.childLanes|=l),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(h=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,h&&i!==null&&(h=31-ze(l),n=y.hiddenUpdates,s=n[h],s===null?n[h]=[i]:s.push(i),i.lane=l|536870912),y):null}function ur(n){if(50<bs)throw bs=0,xd=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ia={};function Bx(n,i,l,s){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(n,i,l,s){return new Bx(n,i,l,s)}function du(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bo(n,i){var l=n.alternate;return l===null?(l=Ci(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Hp(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function dr(n,i,l,s,h,y){var S=0;if(s=n,typeof n=="function")du(n)&&(S=1);else if(typeof n=="string")S=jb(n,l,Be.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Me:return n=Ci(31,l,i,h),n.elementType=Me,n.lanes=y,n;case j:return _l(l.children,h,y,i);case I:S=8,h|=24;break;case Y:return n=Ci(12,l,i,h|2),n.elementType=Y,n.lanes=y,n;case Fe:return n=Ci(13,l,i,h),n.elementType=Fe,n.lanes=y,n;case _e:return n=Ci(19,l,i,h),n.elementType=_e,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:S=10;break e;case de:S=9;break e;case pe:S=11;break e;case Se:S=14;break e;case et:S=16,s=null;break e}S=29,l=Error(a(130,n===null?"null":typeof n,"")),s=null}return i=Ci(S,l,i,h),i.elementType=n,i.type=s,i.lanes=y,i}function _l(n,i,l,s){return n=Ci(7,n,s,i),n.lanes=l,n}function fu(n,i,l){return n=Ci(6,n,null,i),n.lanes=l,n}function Op(n){var i=Ci(18,null,null,0);return i.stateNode=n,i}function pu(n,i,l){return i=Ci(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Gp=new WeakMap;function Li(n,i){if(typeof n=="object"&&n!==null){var l=Gp.get(n);return l!==void 0?l:(i={value:n,source:i,stack:z(i)},Gp.set(n,i),i)}return{value:n,source:i,stack:z(i)}}var oa=[],la=0,fr=null,Za=0,Ui=[],Fi=0,Jo=null,oo=1,lo="";function So(n,i){oa[la++]=Za,oa[la++]=fr,fr=n,Za=i}function Vp(n,i,l){Ui[Fi++]=oo,Ui[Fi++]=lo,Ui[Fi++]=Jo,Jo=n;var s=oo;n=lo;var h=32-ze(s)-1;s&=~(1<<h),l+=1;var y=32-ze(i)+h;if(30<y){var S=h-h%5;y=(s&(1<<S)-1).toString(32),s>>=S,h-=S,oo=1<<32-ze(i)+h|l<<h|s,lo=y+n}else oo=1<<y|l<<h|s,lo=n}function hu(n){n.return!==null&&(So(n,1),Vp(n,1,0))}function mu(n){for(;n===fr;)fr=oa[--la],oa[la]=null,Za=oa[--la],oa[la]=null;for(;n===Jo;)Jo=Ui[--Fi],Ui[Fi]=null,lo=Ui[--Fi],Ui[Fi]=null,oo=Ui[--Fi],Ui[Fi]=null}function jp(n,i){Ui[Fi++]=oo,Ui[Fi++]=lo,Ui[Fi++]=Jo,oo=i.id,lo=i.overflow,Jo=n}var Xn=null,yn=null,Yt=!1,Ko=null,Pi=!1,gu=Error(a(519));function Xo(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw es(Li(i,n)),gu}function qp(n){var i=n.stateNode,l=n.type,s=n.memoizedProps;switch(i[qe]=n,i[St]=s,l){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(l=0;l<Ts.length;l++)Ot(Ts[l],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),lr(i,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),yo(i,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||s.suppressHydrationWarning===!0||r0(i.textContent,l)?(s.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),s.onScroll!=null&&Ot("scroll",i),s.onScrollEnd!=null&&Ot("scrollend",i),s.onClick!=null&&(i.onclick=Ze),i=!0):i=!1,i||Xo(n,!0)}function $p(n){for(Xn=n.return;Xn;)switch(Xn.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:Xn=Xn.return}}function aa(n){if(n!==Xn)return!1;if(!Yt)return $p(n),Yt=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Dd(n.type,n.memoizedProps)),l=!l),l&&yn&&Xo(n),$p(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));yn=y0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));yn=y0(n)}else i===27?(i=yn,ul(n.type)?(n=Bd,Bd=null,yn=n):yn=i):yn=Xn?Hi(n.stateNode.nextSibling):null;return!0}function Nl(){yn=Xn=null,Yt=!1}function yu(){var n=Ko;return n!==null&&(vi===null?vi=n:vi.push.apply(vi,n),Ko=null),n}function es(n){Ko===null?Ko=[n]:Ko.push(n)}var vu=D(null),Al=null,To=null;function Wo(n,i,l){we(vu,i._currentValue),i._currentValue=l}function wo(n){n._currentValue=vu.current,oe(vu)}function xu(n,i,l){for(;n!==null;){var s=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,s!==null&&(s.childLanes|=i)):s!==null&&(s.childLanes&i)!==i&&(s.childLanes|=i),n===l)break;n=n.return}}function bu(n,i,l,s){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var y=h.dependencies;if(y!==null){var S=h.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=h;for(var L=0;L<i.length;L++)if(N.context===i[L]){y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),xu(y.return,l,n),s||(S=null);break e}y=N.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(a(341));S.lanes|=l,y=S.alternate,y!==null&&(y.lanes|=l),xu(S,l,n),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===n){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function sa(n,i,l,s){n=null;for(var h=i,y=!1;h!==null;){if(!y){if((h.flags&524288)!==0)y=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var N=h.type;wi(h.pendingProps.value,S.value)||(n!==null?n.push(N):n=[N])}}else if(h===B.current){if(S=h.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Ns):n=[Ns])}h=h.return}n!==null&&bu(i,n,l,s),i.flags|=262144}function pr(n){for(n=n.firstContext;n!==null;){if(!wi(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ml(n){Al=n,To=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wn(n){return Yp(Al,n)}function hr(n,i){return Al===null&&Ml(n),Yp(n,i)}function Yp(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},To===null){if(n===null)throw Error(a(308));To=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else To=To.next=i;return l}var Hx=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,s){n.push(s)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},Ox=e.unstable_scheduleCallback,Gx=e.unstable_NormalPriority,Ln={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Su(){return{controller:new Hx,data:new Map,refCount:0}}function ts(n){n.refCount--,n.refCount===0&&Ox(Gx,function(){n.controller.abort()})}var ns=null,Tu=0,ra=0,ca=null;function Vx(n,i){if(ns===null){var l=ns=[];Tu=0,ra=Ed(),ca={status:"pending",value:void 0,then:function(s){l.push(s)}}}return Tu++,i.then(Jp,Jp),i}function Jp(){if(--Tu===0&&ns!==null){ca!==null&&(ca.status="fulfilled");var n=ns;ns=null,ra=0,ca=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function jx(n,i){var l=[],s={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return n.then(function(){s.status="fulfilled",s.value=i;for(var h=0;h<l.length;h++)(0,l[h])(i)},function(h){for(s.status="rejected",s.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),s}var Kp=V.S;V.S=function(n,i){Im=Ee(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vx(n,i),Kp!==null&&Kp(n,i)};var kl=D(null);function wu(){var n=kl.current;return n!==null?n:mn.pooledCache}function mr(n,i){i===null?we(kl,kl.current):we(kl,i.pool)}function Xp(){var n=wu();return n===null?null:{parent:Ln._currentValue,pool:n}}var ua=Error(a(460)),Cu=Error(a(474)),gr=Error(a(542)),yr={then:function(){}};function Wp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qp(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Ze,Ze),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,eh(n),n;default:if(typeof i.status=="string")i.then(Ze,Ze);else{if(n=mn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(s){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=s}},function(s){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=s}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,eh(n),n}throw Il=i,ua}}function Rl(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Il=l,ua):l}}var Il=null;function Zp(){if(Il===null)throw Error(a(459));var n=Il;return Il=null,n}function eh(n){if(n===ua||n===gr)throw Error(a(483))}var da=null,is=0;function vr(n){var i=is;return is+=1,da===null&&(da=[]),Qp(da,n,i)}function os(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function xr(n,i){throw i.$$typeof===T?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function th(n){function i(q,H){if(n){var K=q.deletions;K===null?(q.deletions=[H],q.flags|=16):K.push(H)}}function l(q,H){if(!n)return null;for(;H!==null;)i(q,H),H=H.sibling;return null}function s(q){for(var H=new Map;q!==null;)q.key!==null?H.set(q.key,q):H.set(q.index,q),q=q.sibling;return H}function h(q,H){return q=bo(q,H),q.index=0,q.sibling=null,q}function y(q,H,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<H?(q.flags|=67108866,H):K):(q.flags|=67108866,H)):(q.flags|=1048576,H)}function S(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function N(q,H,K,be){return H===null||H.tag!==6?(H=fu(K,q.mode,be),H.return=q,H):(H=h(H,K),H.return=q,H)}function L(q,H,K,be){var yt=K.type;return yt===j?me(q,H,K.props.children,be,K.key):H!==null&&(H.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===et&&Rl(yt)===H.type)?(H=h(H,K.props),os(H,K),H.return=q,H):(H=dr(K.type,K.key,K.props,null,q.mode,be),os(H,K),H.return=q,H)}function X(q,H,K,be){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=pu(K,q.mode,be),H.return=q,H):(H=h(H,K.children||[]),H.return=q,H)}function me(q,H,K,be,yt){return H===null||H.tag!==7?(H=_l(K,q.mode,be,yt),H.return=q,H):(H=h(H,K),H.return=q,H)}function Te(q,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=fu(""+H,q.mode,K),H.return=q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return K=dr(H.type,H.key,H.props,null,q.mode,K),os(K,H),K.return=q,K;case E:return H=pu(H,q.mode,K),H.return=q,H;case et:return H=Rl(H),Te(q,H,K)}if(It(H)||pt(H))return H=_l(H,q.mode,K,null),H.return=q,H;if(typeof H.then=="function")return Te(q,vr(H),K);if(H.$$typeof===se)return Te(q,hr(q,H),K);xr(q,H)}return null}function ee(q,H,K,be){var yt=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return yt!==null?null:N(q,H,""+K,be);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return K.key===yt?L(q,H,K,be):null;case E:return K.key===yt?X(q,H,K,be):null;case et:return K=Rl(K),ee(q,H,K,be)}if(It(K)||pt(K))return yt!==null?null:me(q,H,K,be,null);if(typeof K.then=="function")return ee(q,H,vr(K),be);if(K.$$typeof===se)return ee(q,H,hr(q,K),be);xr(q,K)}return null}function le(q,H,K,be,yt){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return q=q.get(K)||null,N(H,q,""+be,yt);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case A:return q=q.get(be.key===null?K:be.key)||null,L(H,q,be,yt);case E:return q=q.get(be.key===null?K:be.key)||null,X(H,q,be,yt);case et:return be=Rl(be),le(q,H,K,be,yt)}if(It(be)||pt(be))return q=q.get(K)||null,me(H,q,be,yt,null);if(typeof be.then=="function")return le(q,H,K,vr(be),yt);if(be.$$typeof===se)return le(q,H,K,hr(H,be),yt);xr(H,be)}return null}function at(q,H,K,be){for(var yt=null,Qt=null,ut=H,Lt=H=0,jt=null;ut!==null&&Lt<K.length;Lt++){ut.index>Lt?(jt=ut,ut=null):jt=ut.sibling;var Zt=ee(q,ut,K[Lt],be);if(Zt===null){ut===null&&(ut=jt);break}n&&ut&&Zt.alternate===null&&i(q,ut),H=y(Zt,H,Lt),Qt===null?yt=Zt:Qt.sibling=Zt,Qt=Zt,ut=jt}if(Lt===K.length)return l(q,ut),Yt&&So(q,Lt),yt;if(ut===null){for(;Lt<K.length;Lt++)ut=Te(q,K[Lt],be),ut!==null&&(H=y(ut,H,Lt),Qt===null?yt=ut:Qt.sibling=ut,Qt=ut);return Yt&&So(q,Lt),yt}for(ut=s(ut);Lt<K.length;Lt++)jt=le(ut,q,Lt,K[Lt],be),jt!==null&&(n&&jt.alternate!==null&&ut.delete(jt.key===null?Lt:jt.key),H=y(jt,H,Lt),Qt===null?yt=jt:Qt.sibling=jt,Qt=jt);return n&&ut.forEach(function(ml){return i(q,ml)}),Yt&&So(q,Lt),yt}function Ct(q,H,K,be){if(K==null)throw Error(a(151));for(var yt=null,Qt=null,ut=H,Lt=H=0,jt=null,Zt=K.next();ut!==null&&!Zt.done;Lt++,Zt=K.next()){ut.index>Lt?(jt=ut,ut=null):jt=ut.sibling;var ml=ee(q,ut,Zt.value,be);if(ml===null){ut===null&&(ut=jt);break}n&&ut&&ml.alternate===null&&i(q,ut),H=y(ml,H,Lt),Qt===null?yt=ml:Qt.sibling=ml,Qt=ml,ut=jt}if(Zt.done)return l(q,ut),Yt&&So(q,Lt),yt;if(ut===null){for(;!Zt.done;Lt++,Zt=K.next())Zt=Te(q,Zt.value,be),Zt!==null&&(H=y(Zt,H,Lt),Qt===null?yt=Zt:Qt.sibling=Zt,Qt=Zt);return Yt&&So(q,Lt),yt}for(ut=s(ut);!Zt.done;Lt++,Zt=K.next())Zt=le(ut,q,Lt,Zt.value,be),Zt!==null&&(n&&Zt.alternate!==null&&ut.delete(Zt.key===null?Lt:Zt.key),H=y(Zt,H,Lt),Qt===null?yt=Zt:Qt.sibling=Zt,Qt=Zt);return n&&ut.forEach(function(t1){return i(q,t1)}),Yt&&So(q,Lt),yt}function hn(q,H,K,be){if(typeof K=="object"&&K!==null&&K.type===j&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case A:e:{for(var yt=K.key;H!==null;){if(H.key===yt){if(yt=K.type,yt===j){if(H.tag===7){l(q,H.sibling),be=h(H,K.props.children),be.return=q,q=be;break e}}else if(H.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===et&&Rl(yt)===H.type){l(q,H.sibling),be=h(H,K.props),os(be,K),be.return=q,q=be;break e}l(q,H);break}else i(q,H);H=H.sibling}K.type===j?(be=_l(K.props.children,q.mode,be,K.key),be.return=q,q=be):(be=dr(K.type,K.key,K.props,null,q.mode,be),os(be,K),be.return=q,q=be)}return S(q);case E:e:{for(yt=K.key;H!==null;){if(H.key===yt)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){l(q,H.sibling),be=h(H,K.children||[]),be.return=q,q=be;break e}else{l(q,H);break}else i(q,H);H=H.sibling}be=pu(K,q.mode,be),be.return=q,q=be}return S(q);case et:return K=Rl(K),hn(q,H,K,be)}if(It(K))return at(q,H,K,be);if(pt(K)){if(yt=pt(K),typeof yt!="function")throw Error(a(150));return K=yt.call(K),Ct(q,H,K,be)}if(typeof K.then=="function")return hn(q,H,vr(K),be);if(K.$$typeof===se)return hn(q,H,hr(q,K),be);xr(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(l(q,H.sibling),be=h(H,K),be.return=q,q=be):(l(q,H),be=fu(K,q.mode,be),be.return=q,q=be),S(q)):l(q,H)}return function(q,H,K,be){try{is=0;var yt=hn(q,H,K,be);return da=null,yt}catch(ut){if(ut===ua||ut===gr)throw ut;var Qt=Ci(29,ut,null,q.mode);return Qt.lanes=be,Qt.return=q,Qt}}}var zl=th(!0),nh=th(!1),Qo=!1;function Eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _u(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Zo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function el(n,i,l){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,(nn&2)!==0){var h=s.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),s.pending=i,i=ur(n),Bp(n,null,l),i}return cr(n,s,i,l),ur(n)}function ls(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var s=i.lanes;s&=n.pendingLanes,l|=s,i.lanes=l,$t(n,l)}}function Nu(n,i){var l=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var h=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?h=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?h=y=i:y=y.next=i}else h=y=i;l={baseState:s.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:s.shared,callbacks:s.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Au=!1;function as(){if(Au){var n=ca;if(n!==null)throw n}}function ss(n,i,l,s){Au=!1;var h=n.updateQueue;Qo=!1;var y=h.firstBaseUpdate,S=h.lastBaseUpdate,N=h.shared.pending;if(N!==null){h.shared.pending=null;var L=N,X=L.next;L.next=null,S===null?y=X:S.next=X,S=L;var me=n.alternate;me!==null&&(me=me.updateQueue,N=me.lastBaseUpdate,N!==S&&(N===null?me.firstBaseUpdate=X:N.next=X,me.lastBaseUpdate=L))}if(y!==null){var Te=h.baseState;S=0,me=X=L=null,N=y;do{var ee=N.lane&-536870913,le=ee!==N.lane;if(le?(Vt&ee)===ee:(s&ee)===ee){ee!==0&&ee===ra&&(Au=!0),me!==null&&(me=me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var at=n,Ct=N;ee=i;var hn=l;switch(Ct.tag){case 1:if(at=Ct.payload,typeof at=="function"){Te=at.call(hn,Te,ee);break e}Te=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=Ct.payload,ee=typeof at=="function"?at.call(hn,Te,ee):at,ee==null)break e;Te=b({},Te,ee);break e;case 2:Qo=!0}}ee=N.callback,ee!==null&&(n.flags|=64,le&&(n.flags|=8192),le=h.callbacks,le===null?h.callbacks=[ee]:le.push(ee))}else le={lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},me===null?(X=me=le,L=Te):me=me.next=le,S|=ee;if(N=N.next,N===null){if(N=h.shared.pending,N===null)break;le=N,N=le.next,le.next=null,h.lastBaseUpdate=le,h.shared.pending=null}}while(!0);me===null&&(L=Te),h.baseState=L,h.firstBaseUpdate=X,h.lastBaseUpdate=me,y===null&&(h.shared.lanes=0),ll|=S,n.lanes=S,n.memoizedState=Te}}function ih(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function oh(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)ih(l[n],i)}var fa=D(null),br=D(0);function lh(n,i){n=Io,we(br,n),we(fa,i),Io=n|i.baseLanes}function Mu(){we(br,Io),we(fa,fa.current)}function ku(){Io=br.current,oe(fa),oe(br)}var Ei=D(null),Bi=null;function tl(n){var i=n.alternate;we(Mn,Mn.current&1),we(Ei,n),Bi===null&&(i===null||fa.current!==null||i.memoizedState!==null)&&(Bi=n)}function Ru(n){we(Mn,Mn.current),we(Ei,n),Bi===null&&(Bi=n)}function ah(n){n.tag===22?(we(Mn,Mn.current),we(Ei,n),Bi===null&&(Bi=n)):nl()}function nl(){we(Mn,Mn.current),we(Ei,Ei.current)}function _i(n){oe(Ei),Bi===n&&(Bi=null),oe(Mn)}var Mn=D(0);function Sr(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Fd(l)||Pd(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Co=0,Dt=null,fn=null,Un=null,Tr=!1,pa=!1,Dl=!1,wr=0,rs=0,ha=null,qx=0;function _n(){throw Error(a(321))}function Iu(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!wi(n[l],i[l]))return!1;return!0}function zu(n,i,l,s,h,y){return Co=y,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=n===null||n.memoizedState===null?Vh:Ju,Dl=!1,y=l(s,h),Dl=!1,pa&&(y=rh(i,l,s,h)),sh(n),y}function sh(n){V.H=ds;var i=fn!==null&&fn.next!==null;if(Co=0,Un=fn=Dt=null,Tr=!1,rs=0,ha=null,i)throw Error(a(300));n===null||Fn||(n=n.dependencies,n!==null&&pr(n)&&(Fn=!0))}function rh(n,i,l,s){Dt=n;var h=0;do{if(pa&&(ha=null),rs=0,pa=!1,25<=h)throw Error(a(301));if(h+=1,Un=fn=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=jh,y=i(l,s)}while(pa);return y}function $x(){var n=V.H,i=n.useState()[0];return i=typeof i.then=="function"?cs(i):i,n=n.useState()[0],(fn!==null?fn.memoizedState:null)!==n&&(Dt.flags|=1024),i}function Du(){var n=wr!==0;return wr=0,n}function Lu(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function Uu(n){if(Tr){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Tr=!1}Co=0,Un=fn=Dt=null,pa=!1,rs=wr=0,ha=null}function ci(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Dt.memoizedState=Un=n:Un=Un.next=n,Un}function kn(){if(fn===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=fn.next;var i=Un===null?Dt.memoizedState:Un.next;if(i!==null)Un=i,fn=n;else{if(n===null)throw Dt.alternate===null?Error(a(467)):Error(a(310));fn=n,n={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},Un===null?Dt.memoizedState=Un=n:Un=Un.next=n}return Un}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cs(n){var i=rs;return rs+=1,ha===null&&(ha=[]),n=Qp(ha,n,i),i=Dt,(Un===null?i.memoizedState:Un.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?Vh:Ju),n}function Er(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return cs(n);if(n.$$typeof===se)return Wn(n)}throw Error(a(438,String(n)))}function Fu(n){var i=null,l=Dt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var s=Dt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(i={data:s.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Cr(),Dt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),s=0;s<n;s++)l[s]=Ye;return i.index++,l}function Eo(n,i){return typeof i=="function"?i(n):i}function _r(n){var i=kn();return Pu(i,fn,n)}function Pu(n,i,l){var s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=l;var h=n.baseQueue,y=s.pending;if(y!==null){if(h!==null){var S=h.next;h.next=y.next,y.next=S}i.baseQueue=h=y,s.pending=null}if(y=n.baseState,h===null)n.memoizedState=y;else{i=h.next;var N=S=null,L=null,X=i,me=!1;do{var Te=X.lane&-536870913;if(Te!==X.lane?(Vt&Te)===Te:(Co&Te)===Te){var ee=X.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),Te===ra&&(me=!0);else if((Co&ee)===ee){X=X.next,ee===ra&&(me=!0);continue}else Te={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(N=L=Te,S=y):L=L.next=Te,Dt.lanes|=ee,ll|=ee;Te=X.action,Dl&&l(y,Te),y=X.hasEagerState?X.eagerState:l(y,Te)}else ee={lane:Te,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(N=L=ee,S=y):L=L.next=ee,Dt.lanes|=Te,ll|=Te;X=X.next}while(X!==null&&X!==i);if(L===null?S=y:L.next=N,!wi(y,n.memoizedState)&&(Fn=!0,me&&(l=ca,l!==null)))throw l;n.memoizedState=y,n.baseState=S,n.baseQueue=L,s.lastRenderedState=y}return h===null&&(s.lanes=0),[n.memoizedState,s.dispatch]}function Bu(n){var i=kn(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var s=l.dispatch,h=l.pending,y=i.memoizedState;if(h!==null){l.pending=null;var S=h=h.next;do y=n(y,S.action),S=S.next;while(S!==h);wi(y,i.memoizedState)||(Fn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,s]}function ch(n,i,l){var s=Dt,h=kn(),y=Yt;if(y){if(l===void 0)throw Error(a(407));l=l()}else l=i();var S=!wi((fn||h).memoizedState,l);if(S&&(h.memoizedState=l,Fn=!0),h=h.queue,Gu(fh.bind(null,s,h,n),[n]),h.getSnapshot!==i||S||Un!==null&&Un.memoizedState.tag&1){if(s.flags|=2048,ma(9,{destroy:void 0},dh.bind(null,s,h,l,i),null),mn===null)throw Error(a(349));y||(Co&127)!==0||uh(s,i,l)}return l}function uh(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Dt.updateQueue,i===null?(i=Cr(),Dt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function dh(n,i,l,s){i.value=l,i.getSnapshot=s,ph(i)&&hh(n)}function fh(n,i,l){return l(function(){ph(i)&&hh(n)})}function ph(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!wi(n,l)}catch{return!0}}function hh(n){var i=El(n,2);i!==null&&xi(i,n,2)}function Hu(n){var i=ci();if(typeof n=="function"){var l=n;if(n=l(),Dl){re(!0);try{l()}finally{re(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:n},i}function mh(n,i,l,s){return n.baseState=l,Pu(n,fn,typeof s=="function"?s:Eo)}function Yx(n,i,l,s,h){if(Mr(n))throw Error(a(485));if(n=i.action,n!==null){var y={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};V.T!==null?l(!0):y.isTransition=!1,s(y),l=i.pending,l===null?(y.next=i.pending=y,gh(i,y)):(y.next=l.next,i.pending=l.next=y)}}function gh(n,i){var l=i.action,s=i.payload,h=n.state;if(i.isTransition){var y=V.T,S={};V.T=S;try{var N=l(h,s),L=V.S;L!==null&&L(S,N),yh(n,i,N)}catch(X){Ou(n,i,X)}finally{y!==null&&S.types!==null&&(y.types=S.types),V.T=y}}else try{y=l(h,s),yh(n,i,y)}catch(X){Ou(n,i,X)}}function yh(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){vh(n,i,s)},function(s){return Ou(n,i,s)}):vh(n,i,l)}function vh(n,i,l){i.status="fulfilled",i.value=l,xh(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,gh(n,l)))}function Ou(n,i,l){var s=n.pending;if(n.pending=null,s!==null){s=s.next;do i.status="rejected",i.reason=l,xh(i),i=i.next;while(i!==s)}n.action=null}function xh(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function bh(n,i){return i}function Sh(n,i){if(Yt){var l=mn.formState;if(l!==null){e:{var s=Dt;if(Yt){if(yn){t:{for(var h=yn,y=Pi;h.nodeType!==8;){if(!y){h=null;break t}if(h=Hi(h.nextSibling),h===null){h=null;break t}}y=h.data,h=y==="F!"||y==="F"?h:null}if(h){yn=Hi(h.nextSibling),s=h.data==="F!";break e}}Xo(s)}s=!1}s&&(i=l[0])}}return l=ci(),l.memoizedState=l.baseState=i,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:i},l.queue=s,l=Hh.bind(null,Dt,s),s.dispatch=l,s=Hu(!1),y=Yu.bind(null,Dt,!1,s.queue),s=ci(),h={state:i,dispatch:null,action:n,pending:null},s.queue=h,l=Yx.bind(null,Dt,h,y,l),h.dispatch=l,s.memoizedState=n,[i,l,!1]}function Th(n){var i=kn();return wh(i,fn,n)}function wh(n,i,l){if(i=Pu(n,i,bh)[0],n=_r(Eo)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var s=cs(i)}catch(S){throw S===ua?gr:S}else s=i;i=kn();var h=i.queue,y=h.dispatch;return l!==i.memoizedState&&(Dt.flags|=2048,ma(9,{destroy:void 0},Jx.bind(null,h,l),null)),[s,y,n]}function Jx(n,i){n.action=i}function Ch(n){var i=kn(),l=fn;if(l!==null)return wh(i,l,n);kn(),i=i.memoizedState,l=kn();var s=l.queue.dispatch;return l.memoizedState=n,[i,s,!1]}function ma(n,i,l,s){return n={tag:n,create:l,deps:s,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=Cr(),Dt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(s=l.next,l.next=n,n.next=s,i.lastEffect=n),n}function Eh(){return kn().memoizedState}function Nr(n,i,l,s){var h=ci();Dt.flags|=n,h.memoizedState=ma(1|i,{destroy:void 0},l,s===void 0?null:s)}function Ar(n,i,l,s){var h=kn();s=s===void 0?null:s;var y=h.memoizedState.inst;fn!==null&&s!==null&&Iu(s,fn.memoizedState.deps)?h.memoizedState=ma(i,y,l,s):(Dt.flags|=n,h.memoizedState=ma(1|i,y,l,s))}function _h(n,i){Nr(8390656,8,n,i)}function Gu(n,i){Ar(2048,8,n,i)}function Kx(n){Dt.flags|=4;var i=Dt.updateQueue;if(i===null)i=Cr(),Dt.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function Nh(n){var i=kn().memoizedState;return Kx({ref:i,nextImpl:n}),function(){if((nn&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Ah(n,i){return Ar(4,2,n,i)}function Mh(n,i){return Ar(4,4,n,i)}function kh(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Rh(n,i,l){l=l!=null?l.concat([n]):null,Ar(4,4,kh.bind(null,i,n),l)}function Vu(){}function Ih(n,i){var l=kn();i=i===void 0?null:i;var s=l.memoizedState;return i!==null&&Iu(i,s[1])?s[0]:(l.memoizedState=[n,i],n)}function zh(n,i){var l=kn();i=i===void 0?null:i;var s=l.memoizedState;if(i!==null&&Iu(i,s[1]))return s[0];if(s=n(),Dl){re(!0);try{n()}finally{re(!1)}}return l.memoizedState=[s,i],s}function ju(n,i,l){return l===void 0||(Co&1073741824)!==0&&(Vt&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=Dm(),Dt.lanes|=n,ll|=n,l)}function Dh(n,i,l,s){return wi(l,i)?l:fa.current!==null?(n=ju(n,l,s),wi(n,i)||(Fn=!0),n):(Co&42)===0||(Co&1073741824)!==0&&(Vt&261930)===0?(Fn=!0,n.memoizedState=l):(n=Dm(),Dt.lanes|=n,ll|=n,i)}function Lh(n,i,l,s,h){var y=Ce.p;Ce.p=y!==0&&8>y?y:8;var S=V.T,N={};V.T=N,Yu(n,!1,i,l);try{var L=h(),X=V.S;if(X!==null&&X(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var me=jx(L,s);us(n,i,me,Mi(n))}else us(n,i,s,Mi(n))}catch(Te){us(n,i,{then:function(){},status:"rejected",reason:Te},Mi())}finally{Ce.p=y,S!==null&&N.types!==null&&(S.types=N.types),V.T=S}}function Xx(){}function qu(n,i,l,s){if(n.tag!==5)throw Error(a(476));var h=Uh(n).queue;Lh(n,h,i,ie,l===null?Xx:function(){return Fh(n),l(s)})}function Uh(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:ie},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Fh(n){var i=Uh(n);i.next===null&&(i=n.alternate.memoizedState),us(n,i.next.queue,{},Mi())}function $u(){return Wn(Ns)}function Ph(){return kn().memoizedState}function Bh(){return kn().memoizedState}function Wx(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=Mi();n=Zo(l);var s=el(i,n,l);s!==null&&(xi(s,i,l),ls(s,i,l)),i={cache:Su()},n.payload=i;return}i=i.return}}function Qx(n,i,l){var s=Mi();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mr(n)?Oh(i,l):(l=uu(n,i,l,s),l!==null&&(xi(l,n,s),Gh(l,i,s)))}function Hh(n,i,l){var s=Mi();us(n,i,l,s)}function us(n,i,l,s){var h={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mr(n))Oh(i,h);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,N=y(S,l);if(h.hasEagerState=!0,h.eagerState=N,wi(N,S))return cr(n,i,h,0),mn===null&&rr(),!1}catch{}if(l=uu(n,i,h,s),l!==null)return xi(l,n,s),Gh(l,i,s),!0}return!1}function Yu(n,i,l,s){if(s={lane:2,revertLane:Ed(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Mr(n)){if(i)throw Error(a(479))}else i=uu(n,l,s,2),i!==null&&xi(i,n,2)}function Mr(n){var i=n.alternate;return n===Dt||i!==null&&i===Dt}function Oh(n,i){pa=Tr=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Gh(n,i,l){if((l&4194048)!==0){var s=i.lanes;s&=n.pendingLanes,l|=s,i.lanes=l,$t(n,l)}}var ds={readContext:Wn,use:Er,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};ds.useEffectEvent=_n;var Vh={readContext:Wn,use:Er,useCallback:function(n,i){return ci().memoizedState=[n,i===void 0?null:i],n},useContext:Wn,useEffect:_h,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Nr(4194308,4,kh.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Nr(4194308,4,n,i)},useInsertionEffect:function(n,i){Nr(4,2,n,i)},useMemo:function(n,i){var l=ci();i=i===void 0?null:i;var s=n();if(Dl){re(!0);try{n()}finally{re(!1)}}return l.memoizedState=[s,i],s},useReducer:function(n,i,l){var s=ci();if(l!==void 0){var h=l(i);if(Dl){re(!0);try{l(i)}finally{re(!1)}}}else h=i;return s.memoizedState=s.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},s.queue=n,n=n.dispatch=Qx.bind(null,Dt,n),[s.memoizedState,n]},useRef:function(n){var i=ci();return n={current:n},i.memoizedState=n},useState:function(n){n=Hu(n);var i=n.queue,l=Hh.bind(null,Dt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:Vu,useDeferredValue:function(n,i){var l=ci();return ju(l,n,i)},useTransition:function(){var n=Hu(!1);return n=Lh.bind(null,Dt,n.queue,!0,!1),ci().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var s=Dt,h=ci();if(Yt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),mn===null)throw Error(a(349));(Vt&127)!==0||uh(s,i,l)}h.memoizedState=l;var y={value:l,getSnapshot:i};return h.queue=y,_h(fh.bind(null,s,y,n),[n]),s.flags|=2048,ma(9,{destroy:void 0},dh.bind(null,s,y,l,i),null),l},useId:function(){var n=ci(),i=mn.identifierPrefix;if(Yt){var l=lo,s=oo;l=(s&~(1<<32-ze(s)-1)).toString(32)+l,i="_"+i+"R_"+l,l=wr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=qx++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:$u,useFormState:Sh,useActionState:Sh,useOptimistic:function(n){var i=ci();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Yu.bind(null,Dt,!0,l),l.dispatch=i,[n,i]},useMemoCache:Fu,useCacheRefresh:function(){return ci().memoizedState=Wx.bind(null,Dt)},useEffectEvent:function(n){var i=ci(),l={impl:n};return i.memoizedState=l,function(){if((nn&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Ju={readContext:Wn,use:Er,useCallback:Ih,useContext:Wn,useEffect:Gu,useImperativeHandle:Rh,useInsertionEffect:Ah,useLayoutEffect:Mh,useMemo:zh,useReducer:_r,useRef:Eh,useState:function(){return _r(Eo)},useDebugValue:Vu,useDeferredValue:function(n,i){var l=kn();return Dh(l,fn.memoizedState,n,i)},useTransition:function(){var n=_r(Eo)[0],i=kn().memoizedState;return[typeof n=="boolean"?n:cs(n),i]},useSyncExternalStore:ch,useId:Ph,useHostTransitionStatus:$u,useFormState:Th,useActionState:Th,useOptimistic:function(n,i){var l=kn();return mh(l,fn,n,i)},useMemoCache:Fu,useCacheRefresh:Bh};Ju.useEffectEvent=Nh;var jh={readContext:Wn,use:Er,useCallback:Ih,useContext:Wn,useEffect:Gu,useImperativeHandle:Rh,useInsertionEffect:Ah,useLayoutEffect:Mh,useMemo:zh,useReducer:Bu,useRef:Eh,useState:function(){return Bu(Eo)},useDebugValue:Vu,useDeferredValue:function(n,i){var l=kn();return fn===null?ju(l,n,i):Dh(l,fn.memoizedState,n,i)},useTransition:function(){var n=Bu(Eo)[0],i=kn().memoizedState;return[typeof n=="boolean"?n:cs(n),i]},useSyncExternalStore:ch,useId:Ph,useHostTransitionStatus:$u,useFormState:Ch,useActionState:Ch,useOptimistic:function(n,i){var l=kn();return fn!==null?mh(l,fn,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Fu,useCacheRefresh:Bh};jh.useEffectEvent=Nh;function Ku(n,i,l,s){i=n.memoizedState,l=l(s,i),l=l==null?i:b({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Xu={enqueueSetState:function(n,i,l){n=n._reactInternals;var s=Mi(),h=Zo(s);h.payload=i,l!=null&&(h.callback=l),i=el(n,h,s),i!==null&&(xi(i,n,s),ls(i,n,s))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var s=Mi(),h=Zo(s);h.tag=1,h.payload=i,l!=null&&(h.callback=l),i=el(n,h,s),i!==null&&(xi(i,n,s),ls(i,n,s))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Mi(),s=Zo(l);s.tag=2,i!=null&&(s.callback=i),i=el(n,s,l),i!==null&&(xi(i,n,l),ls(i,n,l))}};function qh(n,i,l,s,h,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,y,S):i.prototype&&i.prototype.isPureReactComponent?!Wa(l,s)||!Wa(h,y):!0}function $h(n,i,l,s){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,s),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,s),i.state!==n&&Xu.enqueueReplaceState(i,i.state,null)}function Ll(n,i){var l=i;if("ref"in i){l={};for(var s in i)s!=="ref"&&(l[s]=i[s])}if(n=n.defaultProps){l===i&&(l=b({},l));for(var h in n)l[h]===void 0&&(l[h]=n[h])}return l}function Yh(n){sr(n)}function Jh(n){console.error(n)}function Kh(n){sr(n)}function kr(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(s){setTimeout(function(){throw s})}}function Xh(n,i,l){try{var s=n.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wu(n,i,l){return l=Zo(l),l.tag=3,l.payload={element:null},l.callback=function(){kr(n,i)},l}function Wh(n){return n=Zo(n),n.tag=3,n}function Qh(n,i,l,s){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var y=s.value;n.payload=function(){return h(y)},n.callback=function(){Xh(i,l,s)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Xh(i,l,s),typeof h!="function"&&(al===null?al=new Set([this]):al.add(this));var N=s.stack;this.componentDidCatch(s.value,{componentStack:N!==null?N:""})})}function Zx(n,i,l,s,h){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(i=l.alternate,i!==null&&sa(i,l,h,!0),l=Ei.current,l!==null){switch(l.tag){case 31:case 13:return Bi===null?Gr():l.alternate===null&&Nn===0&&(Nn=3),l.flags&=-257,l.flags|=65536,l.lanes=h,s===yr?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([s]):i.add(s),Td(n,s,h)),!1;case 22:return l.flags|=65536,s===yr?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([s]):l.add(s)),Td(n,s,h)),!1}throw Error(a(435,l.tag))}return Td(n,s,h),Gr(),!1}if(Yt)return i=Ei.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,s!==gu&&(n=Error(a(422),{cause:s}),es(Li(n,l)))):(s!==gu&&(i=Error(a(423),{cause:s}),es(Li(i,l))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,s=Li(s,l),h=Wu(n.stateNode,s,h),Nu(n,h),Nn!==4&&(Nn=2)),!1;var y=Error(a(520),{cause:s});if(y=Li(y,l),xs===null?xs=[y]:xs.push(y),Nn!==4&&(Nn=2),i===null)return!0;s=Li(s,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=h&-h,l.lanes|=n,n=Wu(l.stateNode,s,n),Nu(l,n),!1;case 1:if(i=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(al===null||!al.has(y))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Wh(h),Qh(h,n,l,s),Nu(l,h),!1}l=l.return}while(l!==null);return!1}var Qu=Error(a(461)),Fn=!1;function Qn(n,i,l,s){i.child=n===null?nh(i,null,l,s):zl(i,n.child,l,s)}function Zh(n,i,l,s,h){l=l.render;var y=i.ref;if("ref"in s){var S={};for(var N in s)N!=="ref"&&(S[N]=s[N])}else S=s;return Ml(i),s=zu(n,i,l,S,y,h),N=Du(),n!==null&&!Fn?(Lu(n,i,h),_o(n,i,h)):(Yt&&N&&hu(i),i.flags|=1,Qn(n,i,s,h),i.child)}function em(n,i,l,s,h){if(n===null){var y=l.type;return typeof y=="function"&&!du(y)&&y.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=y,tm(n,i,y,s,h)):(n=dr(l.type,null,s,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,!ad(n,h)){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Wa,l(S,s)&&n.ref===i.ref)return _o(n,i,h)}return i.flags|=1,n=bo(y,s),n.ref=i.ref,n.return=i,i.child=n}function tm(n,i,l,s,h){if(n!==null){var y=n.memoizedProps;if(Wa(y,s)&&n.ref===i.ref)if(Fn=!1,i.pendingProps=s=y,ad(n,h))(n.flags&131072)!==0&&(Fn=!0);else return i.lanes=n.lanes,_o(n,i,h)}return Zu(n,i,l,s,h)}function nm(n,i,l,s){var h=s.children,y=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,n!==null){for(s=i.child=n.child,h=0;s!==null;)h=h|s.lanes|s.childLanes,s=s.sibling;s=h&~y}else s=0,i.child=null;return im(n,i,y,l,s)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&mr(i,y!==null?y.cachePool:null),y!==null?lh(i,y):Mu(),ah(i);else return s=i.lanes=536870912,im(n,i,y!==null?y.baseLanes|l:l,l,s)}else y!==null?(mr(i,y.cachePool),lh(i,y),nl(),i.memoizedState=null):(n!==null&&mr(i,null),Mu(),nl());return Qn(n,i,h,l),i.child}function fs(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function im(n,i,l,s,h){var y=wu();return y=y===null?null:{parent:Ln._currentValue,pool:y},i.memoizedState={baseLanes:l,cachePool:y},n!==null&&mr(i,null),Mu(),ah(i),n!==null&&sa(n,i,s,!0),i.childLanes=h,null}function Rr(n,i){return i=zr({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function om(n,i,l){return zl(i,n.child,null,l),n=Rr(i,i.pendingProps),n.flags|=2,_i(i),i.memoizedState=null,n}function eb(n,i,l){var s=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Yt){if(s.mode==="hidden")return n=Rr(i,s),i.lanes=536870912,fs(null,n);if(Ru(i),(n=yn)?(n=g0(n,Pi),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Jo!==null?{id:oo,overflow:lo}:null,retryLane:536870912,hydrationErrors:null},l=Op(n),l.return=i,i.child=l,Xn=i,yn=null)):n=null,n===null)throw Xo(i);return i.lanes=536870912,null}return Rr(i,s)}var y=n.memoizedState;if(y!==null){var S=y.dehydrated;if(Ru(i),h)if(i.flags&256)i.flags&=-257,i=om(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(Fn||sa(n,i,l,!1),h=(l&n.childLanes)!==0,Fn||h){if(s=mn,s!==null&&(S=Rn(s,l),S!==0&&S!==y.retryLane))throw y.retryLane=S,El(n,S),xi(s,n,S),Qu;Gr(),i=om(n,i,l)}else n=y.treeContext,yn=Hi(S.nextSibling),Xn=i,Yt=!0,Ko=null,Pi=!1,n!==null&&jp(i,n),i=Rr(i,s),i.flags|=4096;return i}return n=bo(n.child,{mode:s.mode,children:s.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Ir(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function Zu(n,i,l,s,h){return Ml(i),l=zu(n,i,l,s,void 0,h),s=Du(),n!==null&&!Fn?(Lu(n,i,h),_o(n,i,h)):(Yt&&s&&hu(i),i.flags|=1,Qn(n,i,l,h),i.child)}function lm(n,i,l,s,h,y){return Ml(i),i.updateQueue=null,l=rh(i,s,l,h),sh(n),s=Du(),n!==null&&!Fn?(Lu(n,i,y),_o(n,i,y)):(Yt&&s&&hu(i),i.flags|=1,Qn(n,i,l,y),i.child)}function am(n,i,l,s,h){if(Ml(i),i.stateNode===null){var y=ia,S=l.contextType;typeof S=="object"&&S!==null&&(y=Wn(S)),y=new l(s,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Xu,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=s,y.state=i.memoizedState,y.refs={},Eu(i),S=l.contextType,y.context=typeof S=="object"&&S!==null?Wn(S):ia,y.state=i.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Ku(i,l,S,s),y.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Xu.enqueueReplaceState(y,y.state,null),ss(i,s,y,h),as(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),s=!0}else if(n===null){y=i.stateNode;var N=i.memoizedProps,L=Ll(l,N);y.props=L;var X=y.context,me=l.contextType;S=ia,typeof me=="object"&&me!==null&&(S=Wn(me));var Te=l.getDerivedStateFromProps;me=typeof Te=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||X!==S)&&$h(i,y,s,S),Qo=!1;var ee=i.memoizedState;y.state=ee,ss(i,s,y,h),as(),X=i.memoizedState,N||ee!==X||Qo?(typeof Te=="function"&&(Ku(i,l,Te,s),X=i.memoizedState),(L=Qo||qh(i,l,L,s,ee,X,S))?(me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=s,i.memoizedState=X),y.props=s,y.state=X,y.context=S,s=L):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),s=!1)}else{y=i.stateNode,_u(n,i),S=i.memoizedProps,me=Ll(l,S),y.props=me,Te=i.pendingProps,ee=y.context,X=l.contextType,L=ia,typeof X=="object"&&X!==null&&(L=Wn(X)),N=l.getDerivedStateFromProps,(X=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Te||ee!==L)&&$h(i,y,s,L),Qo=!1,ee=i.memoizedState,y.state=ee,ss(i,s,y,h),as();var le=i.memoizedState;S!==Te||ee!==le||Qo||n!==null&&n.dependencies!==null&&pr(n.dependencies)?(typeof N=="function"&&(Ku(i,l,N,s),le=i.memoizedState),(me=Qo||qh(i,l,me,s,ee,le,L)||n!==null&&n.dependencies!==null&&pr(n.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,le,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,le,L)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),i.memoizedProps=s,i.memoizedState=le),y.props=s,y.state=le,y.context=L,s=me):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),s=!1)}return y=s,Ir(n,i),s=(i.flags&128)!==0,y||s?(y=i.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,n!==null&&s?(i.child=zl(i,n.child,null,h),i.child=zl(i,null,l,h)):Qn(n,i,l,h),i.memoizedState=y.state,n=i.child):n=_o(n,i,h),n}function sm(n,i,l,s){return Nl(),i.flags|=256,Qn(n,i,l,s),i.child}var ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function td(n){return{baseLanes:n,cachePool:Xp()}}function nd(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=Ai),n}function rm(n,i,l){var s=i.pendingProps,h=!1,y=(i.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Mn.current&2)!==0),S&&(h=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,n===null){if(Yt){if(h?tl(i):nl(),(n=yn)?(n=g0(n,Pi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Jo!==null?{id:oo,overflow:lo}:null,retryLane:536870912,hydrationErrors:null},l=Op(n),l.return=i,i.child=l,Xn=i,yn=null)):n=null,n===null)throw Xo(i);return Pd(n)?i.lanes=32:i.lanes=536870912,null}var N=s.children;return s=s.fallback,h?(nl(),h=i.mode,N=zr({mode:"hidden",children:N},h),s=_l(s,h,l,null),N.return=i,s.return=i,N.sibling=s,i.child=N,s=i.child,s.memoizedState=td(l),s.childLanes=nd(n,S,l),i.memoizedState=ed,fs(null,s)):(tl(i),id(i,N))}var L=n.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(y)i.flags&256?(tl(i),i.flags&=-257,i=od(n,i,l)):i.memoizedState!==null?(nl(),i.child=n.child,i.flags|=128,i=null):(nl(),N=s.fallback,h=i.mode,s=zr({mode:"visible",children:s.children},h),N=_l(N,h,l,null),N.flags|=2,s.return=i,N.return=i,s.sibling=N,i.child=s,zl(i,n.child,null,l),s=i.child,s.memoizedState=td(l),s.childLanes=nd(n,S,l),i.memoizedState=ed,i=fs(null,s));else if(tl(i),Pd(N)){if(S=N.nextSibling&&N.nextSibling.dataset,S)var X=S.dgst;S=X,s=Error(a(419)),s.stack="",s.digest=S,es({value:s,source:null,stack:null}),i=od(n,i,l)}else if(Fn||sa(n,i,l,!1),S=(l&n.childLanes)!==0,Fn||S){if(S=mn,S!==null&&(s=Rn(S,l),s!==0&&s!==L.retryLane))throw L.retryLane=s,El(n,s),xi(S,n,s),Qu;Fd(N)||Gr(),i=od(n,i,l)}else Fd(N)?(i.flags|=192,i.child=n.child,i=null):(n=L.treeContext,yn=Hi(N.nextSibling),Xn=i,Yt=!0,Ko=null,Pi=!1,n!==null&&jp(i,n),i=id(i,s.children),i.flags|=4096);return i}return h?(nl(),N=s.fallback,h=i.mode,L=n.child,X=L.sibling,s=bo(L,{mode:"hidden",children:s.children}),s.subtreeFlags=L.subtreeFlags&65011712,X!==null?N=bo(X,N):(N=_l(N,h,l,null),N.flags|=2),N.return=i,s.return=i,s.sibling=N,i.child=s,fs(null,s),s=i.child,N=n.child.memoizedState,N===null?N=td(l):(h=N.cachePool,h!==null?(L=Ln._currentValue,h=h.parent!==L?{parent:L,pool:L}:h):h=Xp(),N={baseLanes:N.baseLanes|l,cachePool:h}),s.memoizedState=N,s.childLanes=nd(n,S,l),i.memoizedState=ed,fs(n.child,s)):(tl(i),l=n.child,n=l.sibling,l=bo(l,{mode:"visible",children:s.children}),l.return=i,l.sibling=null,n!==null&&(S=i.deletions,S===null?(i.deletions=[n],i.flags|=16):S.push(n)),i.child=l,i.memoizedState=null,l)}function id(n,i){return i=zr({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function zr(n,i){return n=Ci(22,n,null,i),n.lanes=0,n}function od(n,i,l){return zl(i,n.child,null,l),n=id(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function cm(n,i,l){n.lanes|=i;var s=n.alternate;s!==null&&(s.lanes|=i),xu(n.return,i,l)}function ld(n,i,l,s,h,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:h,treeForkCount:y}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=s,S.tail=l,S.tailMode=h,S.treeForkCount=y)}function um(n,i,l){var s=i.pendingProps,h=s.revealOrder,y=s.tail;s=s.children;var S=Mn.current,N=(S&2)!==0;if(N?(S=S&1|2,i.flags|=128):S&=1,we(Mn,S),Qn(n,i,s,l),s=Yt?Za:0,!N&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cm(n,l,i);else if(n.tag===19)cm(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(l=i.child,h=null;l!==null;)n=l.alternate,n!==null&&Sr(n)===null&&(h=l),l=l.sibling;l=h,l===null?(h=i.child,i.child=null):(h=l.sibling,l.sibling=null),ld(i,!1,h,l,y,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Sr(n)===null){i.child=h;break}n=h.sibling,h.sibling=l,l=h,h=n}ld(i,!0,l,null,y,s);break;case"together":ld(i,!1,null,null,void 0,s);break;default:i.memoizedState=null}return i.child}function _o(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),ll|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(sa(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,l=bo(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=bo(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function ad(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&pr(n)))}function tb(n,i,l){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),Wo(i,Ln,n.memoizedState.cache),Nl();break;case 27:case 5:Ge(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:Wo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ru(i),null;break;case 13:var s=i.memoizedState;if(s!==null)return s.dehydrated!==null?(tl(i),i.flags|=128,null):(l&i.child.childLanes)!==0?rm(n,i,l):(tl(i),n=_o(n,i,l),n!==null?n.sibling:null);tl(i);break;case 19:var h=(n.flags&128)!==0;if(s=(l&i.childLanes)!==0,s||(sa(n,i,l,!1),s=(l&i.childLanes)!==0),h){if(s)return um(n,i,l);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),we(Mn,Mn.current),s)break;return null;case 22:return i.lanes=0,nm(n,i,l,i.pendingProps);case 24:Wo(i,Ln,n.memoizedState.cache)}return _o(n,i,l)}function dm(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)Fn=!0;else{if(!ad(n,l)&&(i.flags&128)===0)return Fn=!1,tb(n,i,l);Fn=(n.flags&131072)!==0}else Fn=!1,Yt&&(i.flags&1048576)!==0&&Vp(i,Za,i.index);switch(i.lanes=0,i.tag){case 16:e:{var s=i.pendingProps;if(n=Rl(i.elementType),i.type=n,typeof n=="function")du(n)?(s=Ll(n,s),i.tag=1,i=am(null,i,n,s,l)):(i.tag=0,i=Zu(null,i,n,s,l));else{if(n!=null){var h=n.$$typeof;if(h===pe){i.tag=11,i=Zh(null,i,n,s,l);break e}else if(h===Se){i.tag=14,i=em(null,i,n,s,l);break e}}throw i=bt(n)||n,Error(a(306,i,""))}}return i;case 0:return Zu(n,i,i.type,i.pendingProps,l);case 1:return s=i.type,h=Ll(s,i.pendingProps),am(n,i,s,h,l);case 3:e:{if(ne(i,i.stateNode.containerInfo),n===null)throw Error(a(387));s=i.pendingProps;var y=i.memoizedState;h=y.element,_u(n,i),ss(i,s,null,l);var S=i.memoizedState;if(s=S.cache,Wo(i,Ln,s),s!==y.cache&&bu(i,[Ln],l,!0),as(),s=S.element,y.isDehydrated)if(y={element:s,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=sm(n,i,s,l);break e}else if(s!==h){h=Li(Error(a(424)),i),es(h),i=sm(n,i,s,l);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,yn=Hi(n.firstChild),Xn=i,Yt=!0,Ko=null,Pi=!0,l=nh(i,null,s,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Nl(),s===h){i=_o(n,i,l);break e}Qn(n,i,s,l)}i=i.child}return i;case 26:return Ir(n,i),n===null?(l=T0(i.type,null,i.pendingProps,null))?i.memoizedState=l:Yt||(l=i.type,n=i.pendingProps,s=Kr(C.current).createElement(l),s[qe]=i,s[St]=n,Zn(s,l,n),Sn(s),i.stateNode=s):i.memoizedState=T0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ge(i),n===null&&Yt&&(s=i.stateNode=x0(i.type,i.pendingProps,C.current),Xn=i,Pi=!0,h=yn,ul(i.type)?(Bd=h,yn=Hi(s.firstChild)):yn=h),Qn(n,i,i.pendingProps.children,l),Ir(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Yt&&((h=s=yn)&&(s=Rb(s,i.type,i.pendingProps,Pi),s!==null?(i.stateNode=s,Xn=i,yn=Hi(s.firstChild),Pi=!1,h=!0):h=!1),h||Xo(i)),Ge(i),h=i.type,y=i.pendingProps,S=n!==null?n.memoizedProps:null,s=y.children,Dd(h,y)?s=null:S!==null&&Dd(h,S)&&(i.flags|=32),i.memoizedState!==null&&(h=zu(n,i,$x,null,null,l),Ns._currentValue=h),Ir(n,i),Qn(n,i,s,l),i.child;case 6:return n===null&&Yt&&((n=l=yn)&&(l=Ib(l,i.pendingProps,Pi),l!==null?(i.stateNode=l,Xn=i,yn=null,n=!0):n=!1),n||Xo(i)),null;case 13:return rm(n,i,l);case 4:return ne(i,i.stateNode.containerInfo),s=i.pendingProps,n===null?i.child=zl(i,null,s,l):Qn(n,i,s,l),i.child;case 11:return Zh(n,i,i.type,i.pendingProps,l);case 7:return Qn(n,i,i.pendingProps,l),i.child;case 8:return Qn(n,i,i.pendingProps.children,l),i.child;case 12:return Qn(n,i,i.pendingProps.children,l),i.child;case 10:return s=i.pendingProps,Wo(i,i.type,s.value),Qn(n,i,s.children,l),i.child;case 9:return h=i.type._context,s=i.pendingProps.children,Ml(i),h=Wn(h),s=s(h),i.flags|=1,Qn(n,i,s,l),i.child;case 14:return em(n,i,i.type,i.pendingProps,l);case 15:return tm(n,i,i.type,i.pendingProps,l);case 19:return um(n,i,l);case 31:return eb(n,i,l);case 22:return nm(n,i,l,i.pendingProps);case 24:return Ml(i),s=Wn(Ln),n===null?(h=wu(),h===null&&(h=mn,y=Su(),h.pooledCache=y,y.refCount++,y!==null&&(h.pooledCacheLanes|=l),h=y),i.memoizedState={parent:s,cache:h},Eu(i),Wo(i,Ln,h)):((n.lanes&l)!==0&&(_u(n,i),ss(i,null,null,l),as()),h=n.memoizedState,y=i.memoizedState,h.parent!==s?(h={parent:s,cache:s},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Wo(i,Ln,s)):(s=y.cache,Wo(i,Ln,s),s!==h.cache&&bu(i,[Ln],l,!0))),Qn(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function No(n){n.flags|=4}function sd(n,i,l,s,h){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(Pm())n.flags|=8192;else throw Il=yr,Cu}else n.flags&=-16777217}function fm(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!N0(i))if(Pm())n.flags|=8192;else throw Il=yr,Cu}function Dr(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?De():536870912,n.lanes|=i,xa|=i)}function ps(n,i){if(!Yt)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function vn(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,s=0;if(i)for(var h=n.child;h!==null;)l|=h.lanes|h.childLanes,s|=h.subtreeFlags&65011712,s|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)l|=h.lanes|h.childLanes,s|=h.subtreeFlags,s|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=s,n.childLanes=l,i}function nb(n,i,l){var s=i.pendingProps;switch(mu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(i),null;case 1:return vn(i),null;case 3:return l=i.stateNode,s=null,n!==null&&(s=n.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),wo(Ln),ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(aa(i)?No(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,yu())),vn(i),null;case 26:var h=i.type,y=i.memoizedState;return n===null?(No(i),y!==null?(vn(i),fm(i,y)):(vn(i),sd(i,h,null,s,l))):y?y!==n.memoizedState?(No(i),vn(i),fm(i,y)):(vn(i),i.flags&=-16777217):(n=n.memoizedProps,n!==s&&No(i),vn(i),sd(i,h,n,s,l)),null;case 27:if(P(i),l=C.current,h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==s&&No(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return vn(i),null}n=Be.current,aa(i)?qp(i):(n=x0(h,s,l),i.stateNode=n,No(i))}return vn(i),null;case 5:if(P(i),h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==s&&No(i);else{if(!s){if(i.stateNode===null)throw Error(a(166));return vn(i),null}if(y=Be.current,aa(i))qp(i);else{var S=Kr(C.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof s.is=="string"?S.createElement("select",{is:s.is}):S.createElement("select"),s.multiple?y.multiple=!0:s.size&&(y.size=s.size);break;default:y=typeof s.is=="string"?S.createElement(h,{is:s.is}):S.createElement(h)}}y[qe]=i,y[St]=s;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=y;e:switch(Zn(y,h,s),h){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&No(i)}}return vn(i),sd(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==s&&No(i);else{if(typeof s!="string"&&i.stateNode===null)throw Error(a(166));if(n=C.current,aa(i)){if(n=i.stateNode,l=i.memoizedProps,s=null,h=Xn,h!==null)switch(h.tag){case 27:case 5:s=h.memoizedProps}n[qe]=i,n=!!(n.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||r0(n.nodeValue,l)),n||Xo(i,!0)}else n=Kr(n).createTextNode(s),n[qe]=i,i.stateNode=n}return vn(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(s=aa(i),l!==null){if(n===null){if(!s)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[qe]=i}else Nl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vn(i),n=!1}else l=yu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(_i(i),i):(_i(i),null);if((i.flags&128)!==0)throw Error(a(558))}return vn(i),null;case 13:if(s=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=aa(i),s!==null&&s.dehydrated!==null){if(n===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[qe]=i}else Nl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vn(i),h=!1}else h=yu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(_i(i),i):(_i(i),null)}return _i(i),(i.flags&128)!==0?(i.lanes=l,i):(l=s!==null,n=n!==null&&n.memoizedState!==null,l&&(s=i.child,h=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(h=s.alternate.memoizedState.cachePool.pool),y=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(y=s.memoizedState.cachePool.pool),y!==h&&(s.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),Dr(i,i.updateQueue),vn(i),null);case 4:return ce(),n===null&&Md(i.stateNode.containerInfo),vn(i),null;case 10:return wo(i.type),vn(i),null;case 19:if(oe(Mn),s=i.memoizedState,s===null)return vn(i),null;if(h=(i.flags&128)!==0,y=s.rendering,y===null)if(h)ps(s,!1);else{if(Nn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(y=Sr(n),y!==null){for(i.flags|=128,ps(s,!1),n=y.updateQueue,i.updateQueue=n,Dr(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Hp(l,n),l=l.sibling;return we(Mn,Mn.current&1|2),Yt&&So(i,s.treeForkCount),i.child}n=n.sibling}s.tail!==null&&Ee()>Br&&(i.flags|=128,h=!0,ps(s,!1),i.lanes=4194304)}else{if(!h)if(n=Sr(y),n!==null){if(i.flags|=128,h=!0,n=n.updateQueue,i.updateQueue=n,Dr(i,n),ps(s,!0),s.tail===null&&s.tailMode==="hidden"&&!y.alternate&&!Yt)return vn(i),null}else 2*Ee()-s.renderingStartTime>Br&&l!==536870912&&(i.flags|=128,h=!0,ps(s,!1),i.lanes=4194304);s.isBackwards?(y.sibling=i.child,i.child=y):(n=s.last,n!==null?n.sibling=y:i.child=y,s.last=y)}return s.tail!==null?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.renderingStartTime=Ee(),n.sibling=null,l=Mn.current,we(Mn,h?l&1|2:l&1),Yt&&So(i,s.treeForkCount),n):(vn(i),null);case 22:case 23:return _i(i),ku(),s=i.memoizedState!==null,n!==null?n.memoizedState!==null!==s&&(i.flags|=8192):s&&(i.flags|=8192),s?(l&536870912)!==0&&(i.flags&128)===0&&(vn(i),i.subtreeFlags&6&&(i.flags|=8192)):vn(i),l=i.updateQueue,l!==null&&Dr(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(i.flags|=2048),n!==null&&oe(kl),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),wo(Ln),vn(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function ib(n,i){switch(mu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return wo(Ln),ce(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return P(i),null;case 31:if(i.memoizedState!==null){if(_i(i),i.alternate===null)throw Error(a(340));Nl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(_i(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Nl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return oe(Mn),null;case 4:return ce(),null;case 10:return wo(i.type),null;case 22:case 23:return _i(i),ku(),n!==null&&oe(kl),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return wo(Ln),null;case 25:return null;default:return null}}function pm(n,i){switch(mu(i),i.tag){case 3:wo(Ln),ce();break;case 26:case 27:case 5:P(i);break;case 4:ce();break;case 31:i.memoizedState!==null&&_i(i);break;case 13:_i(i);break;case 19:oe(Mn);break;case 10:wo(i.type);break;case 22:case 23:_i(i),ku(),n!==null&&oe(kl);break;case 24:wo(Ln)}}function hs(n,i){try{var l=i.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var h=s.next;l=h;do{if((l.tag&n)===n){s=void 0;var y=l.create,S=l.inst;s=y(),S.destroy=s}l=l.next}while(l!==h)}}catch(N){cn(i,i.return,N)}}function il(n,i,l){try{var s=i.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var y=h.next;s=y;do{if((s.tag&n)===n){var S=s.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,h=i;var L=l,X=N;try{X()}catch(me){cn(h,L,me)}}}s=s.next}while(s!==y)}}catch(me){cn(i,i.return,me)}}function hm(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{oh(i,l)}catch(s){cn(n,n.return,s)}}}function mm(n,i,l){l.props=Ll(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(s){cn(n,i,s)}}function ms(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var s=n.stateNode;break;case 30:s=n.stateNode;break;default:s=n.stateNode}typeof l=="function"?n.refCleanup=l(s):l.current=s}}catch(h){cn(n,i,h)}}function ao(n,i){var l=n.ref,s=n.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(h){cn(n,i,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){cn(n,i,h)}else l.current=null}function gm(n){var i=n.type,l=n.memoizedProps,s=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(h){cn(n,n.return,h)}}function rd(n,i,l){try{var s=n.stateNode;Eb(s,n.type,l,i),s[St]=i}catch(h){cn(n,n.return,h)}}function ym(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ul(n.type)||n.tag===4}function cd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ul(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ud(n,i,l){var s=n.tag;if(s===5||s===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Ze));else if(s!==4&&(s===27&&ul(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(ud(n,i,l),n=n.sibling;n!==null;)ud(n,i,l),n=n.sibling}function Lr(n,i,l){var s=n.tag;if(s===5||s===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(s!==4&&(s===27&&ul(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Lr(n,i,l),n=n.sibling;n!==null;)Lr(n,i,l),n=n.sibling}function vm(n){var i=n.stateNode,l=n.memoizedProps;try{for(var s=n.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Zn(i,s,l),i[qe]=n,i[St]=l}catch(y){cn(n,n.return,y)}}var Ao=!1,Pn=!1,dd=!1,xm=typeof WeakSet=="function"?WeakSet:Set,jn=null;function ob(n,i){if(n=n.containerInfo,Id=nc,n=Rp(n),ou(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var h=s.anchorOffset,y=s.focusNode;s=s.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,N=-1,L=-1,X=0,me=0,Te=n,ee=null;t:for(;;){for(var le;Te!==l||h!==0&&Te.nodeType!==3||(N=S+h),Te!==y||s!==0&&Te.nodeType!==3||(L=S+s),Te.nodeType===3&&(S+=Te.nodeValue.length),(le=Te.firstChild)!==null;)ee=Te,Te=le;for(;;){if(Te===n)break t;if(ee===l&&++X===h&&(N=S),ee===y&&++me===s&&(L=S),(le=Te.nextSibling)!==null)break;Te=ee,ee=Te.parentNode}Te=le}l=N===-1||L===-1?null:{start:N,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(zd={focusedElem:n,selectionRange:l},nc=!1,jn=i;jn!==null;)if(i=jn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,jn=n;else for(;jn!==null;){switch(i=jn,y=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)h=n[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,l=i,h=y.memoizedProps,y=y.memoizedState,s=l.stateNode;try{var at=Ll(l.type,h);n=s.getSnapshotBeforeUpdate(at,y),s.__reactInternalSnapshotBeforeUpdate=n}catch(Ct){cn(l,l.return,Ct)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)Ud(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ud(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,jn=n;break}jn=i.return}}function bm(n,i,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:ko(n,l),s&4&&hs(5,l);break;case 1:if(ko(n,l),s&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(S){cn(l,l.return,S)}else{var h=Ll(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(h,i,n.__reactInternalSnapshotBeforeUpdate)}catch(S){cn(l,l.return,S)}}s&64&&hm(l),s&512&&ms(l,l.return);break;case 3:if(ko(n,l),s&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{oh(n,i)}catch(S){cn(l,l.return,S)}}break;case 27:i===null&&s&4&&vm(l);case 26:case 5:ko(n,l),i===null&&s&4&&gm(l),s&512&&ms(l,l.return);break;case 12:ko(n,l);break;case 31:ko(n,l),s&4&&wm(n,l);break;case 13:ko(n,l),s&4&&Cm(n,l),s&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=pb.bind(null,l),zb(n,l))));break;case 22:if(s=l.memoizedState!==null||Ao,!s){i=i!==null&&i.memoizedState!==null||Pn,h=Ao;var y=Pn;Ao=s,(Pn=i)&&!y?Ro(n,l,(l.subtreeFlags&8772)!==0):ko(n,l),Ao=h,Pn=y}break;case 30:break;default:ko(n,l)}}function Sm(n){var i=n.alternate;i!==null&&(n.alternate=null,Sm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ho(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Cn=null,mi=!1;function Mo(n,i,l){for(l=l.child;l!==null;)Tm(n,i,l),l=l.sibling}function Tm(n,i,l){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount($,l)}catch{}switch(l.tag){case 26:Pn||ao(l,i),Mo(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Pn||ao(l,i);var s=Cn,h=mi;ul(l.type)&&(Cn=l.stateNode,mi=!1),Mo(n,i,l),Cs(l.stateNode),Cn=s,mi=h;break;case 5:Pn||ao(l,i);case 6:if(s=Cn,h=mi,Cn=null,Mo(n,i,l),Cn=s,mi=h,Cn!==null)if(mi)try{(Cn.nodeType===9?Cn.body:Cn.nodeName==="HTML"?Cn.ownerDocument.body:Cn).removeChild(l.stateNode)}catch(y){cn(l,i,y)}else try{Cn.removeChild(l.stateNode)}catch(y){cn(l,i,y)}break;case 18:Cn!==null&&(mi?(n=Cn,h0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Na(n)):h0(Cn,l.stateNode));break;case 4:s=Cn,h=mi,Cn=l.stateNode.containerInfo,mi=!0,Mo(n,i,l),Cn=s,mi=h;break;case 0:case 11:case 14:case 15:il(2,l,i),Pn||il(4,l,i),Mo(n,i,l);break;case 1:Pn||(ao(l,i),s=l.stateNode,typeof s.componentWillUnmount=="function"&&mm(l,i,s)),Mo(n,i,l);break;case 21:Mo(n,i,l);break;case 22:Pn=(s=Pn)||l.memoizedState!==null,Mo(n,i,l),Pn=s;break;default:Mo(n,i,l)}}function wm(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Na(n)}catch(l){cn(i,i.return,l)}}}function Cm(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Na(n)}catch(l){cn(i,i.return,l)}}function lb(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new xm),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new xm),i;default:throw Error(a(435,n.tag))}}function Ur(n,i){var l=lb(n);i.forEach(function(s){if(!l.has(s)){l.add(s);var h=hb.bind(null,n,s);s.then(h,h)}})}function gi(n,i){var l=i.deletions;if(l!==null)for(var s=0;s<l.length;s++){var h=l[s],y=n,S=i,N=S;e:for(;N!==null;){switch(N.tag){case 27:if(ul(N.type)){Cn=N.stateNode,mi=!1;break e}break;case 5:Cn=N.stateNode,mi=!1;break e;case 3:case 4:Cn=N.stateNode.containerInfo,mi=!0;break e}N=N.return}if(Cn===null)throw Error(a(160));Tm(y,S,h),Cn=null,mi=!1,y=h.alternate,y!==null&&(y.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Em(i,n),i=i.sibling}var Ki=null;function Em(n,i){var l=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gi(i,n),yi(n),s&4&&(il(3,n,n.return),hs(3,n),il(5,n,n.return));break;case 1:gi(i,n),yi(n),s&512&&(Pn||l===null||ao(l,l.return)),s&64&&Ao&&(n=n.updateQueue,n!==null&&(s=n.callbacks,s!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var h=Ki;if(gi(i,n),yi(n),s&512&&(Pn||l===null||ao(l,l.return)),s&4){var y=l!==null?l.memoizedState:null;if(s=n.memoizedState,l===null)if(s===null)if(n.stateNode===null){e:{s=n.type,l=n.memoizedProps,h=h.ownerDocument||h;t:switch(s){case"title":y=h.getElementsByTagName("title")[0],(!y||y[eo]||y[qe]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=h.createElement(s),h.head.insertBefore(y,h.querySelector("head > title"))),Zn(y,s,l),y[qe]=n,Sn(y),s=y;break e;case"link":var S=E0("link","href",h).get(s+(l.href||""));if(S){for(var N=0;N<S.length;N++)if(y=S[N],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(N,1);break t}}y=h.createElement(s),Zn(y,s,l),h.head.appendChild(y);break;case"meta":if(S=E0("meta","content",h).get(s+(l.content||""))){for(N=0;N<S.length;N++)if(y=S[N],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(N,1);break t}}y=h.createElement(s),Zn(y,s,l),h.head.appendChild(y);break;default:throw Error(a(468,s))}y[qe]=n,Sn(y),s=y}n.stateNode=s}else _0(h,n.type,n.stateNode);else n.stateNode=C0(h,s,n.memoizedProps);else y!==s?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,s===null?_0(h,n.type,n.stateNode):C0(h,s,n.memoizedProps)):s===null&&n.stateNode!==null&&rd(n,n.memoizedProps,l.memoizedProps)}break;case 27:gi(i,n),yi(n),s&512&&(Pn||l===null||ao(l,l.return)),l!==null&&s&4&&rd(n,n.memoizedProps,l.memoizedProps);break;case 5:if(gi(i,n),yi(n),s&512&&(Pn||l===null||ao(l,l.return)),n.flags&32){h=n.stateNode;try{to(h,"")}catch(at){cn(n,n.return,at)}}s&4&&n.stateNode!=null&&(h=n.memoizedProps,rd(n,h,l!==null?l.memoizedProps:h)),s&1024&&(dd=!0);break;case 6:if(gi(i,n),yi(n),s&4){if(n.stateNode===null)throw Error(a(162));s=n.memoizedProps,l=n.stateNode;try{l.nodeValue=s}catch(at){cn(n,n.return,at)}}break;case 3:if(Qr=null,h=Ki,Ki=Xr(i.containerInfo),gi(i,n),Ki=h,yi(n),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Na(i.containerInfo)}catch(at){cn(n,n.return,at)}dd&&(dd=!1,_m(n));break;case 4:s=Ki,Ki=Xr(n.stateNode.containerInfo),gi(i,n),yi(n),Ki=s;break;case 12:gi(i,n),yi(n);break;case 31:gi(i,n),yi(n),s&4&&(s=n.updateQueue,s!==null&&(n.updateQueue=null,Ur(n,s)));break;case 13:gi(i,n),yi(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Pr=Ee()),s&4&&(s=n.updateQueue,s!==null&&(n.updateQueue=null,Ur(n,s)));break;case 22:h=n.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,X=Ao,me=Pn;if(Ao=X||h,Pn=me||L,gi(i,n),Pn=me,Ao=X,yi(n),s&8192)e:for(i=n.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(l===null||L||Ao||Pn||Ul(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){L=l=i;try{if(y=L.stateNode,h)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{N=L.stateNode;var Te=L.memoizedProps.style,ee=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;N.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(at){cn(L,L.return,at)}}}else if(i.tag===6){if(l===null){L=i;try{L.stateNode.nodeValue=h?"":L.memoizedProps}catch(at){cn(L,L.return,at)}}}else if(i.tag===18){if(l===null){L=i;try{var le=L.stateNode;h?m0(le,!0):m0(L.stateNode,!1)}catch(at){cn(L,L.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}s&4&&(s=n.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Ur(n,l))));break;case 19:gi(i,n),yi(n),s&4&&(s=n.updateQueue,s!==null&&(n.updateQueue=null,Ur(n,s)));break;case 30:break;case 21:break;default:gi(i,n),yi(n)}}function yi(n){var i=n.flags;if(i&2){try{for(var l,s=n.return;s!==null;){if(ym(s)){l=s;break}s=s.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var h=l.stateNode,y=cd(n);Lr(n,y,h);break;case 5:var S=l.stateNode;l.flags&32&&(to(S,""),l.flags&=-33);var N=cd(n);Lr(n,N,S);break;case 3:case 4:var L=l.stateNode.containerInfo,X=cd(n);ud(n,X,L);break;default:throw Error(a(161))}}catch(me){cn(n,n.return,me)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function _m(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;_m(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ko(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)bm(n,i.alternate,i),i=i.sibling}function Ul(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:il(4,i,i.return),Ul(i);break;case 1:ao(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&mm(i,i.return,l),Ul(i);break;case 27:Cs(i.stateNode);case 26:case 5:ao(i,i.return),Ul(i);break;case 22:i.memoizedState===null&&Ul(i);break;case 30:Ul(i);break;default:Ul(i)}n=n.sibling}}function Ro(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var s=i.alternate,h=n,y=i,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ro(h,y,l),hs(4,y);break;case 1:if(Ro(h,y,l),s=y,h=s.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(X){cn(s,s.return,X)}if(s=y,h=s.updateQueue,h!==null){var N=s.stateNode;try{var L=h.shared.hiddenCallbacks;if(L!==null)for(h.shared.hiddenCallbacks=null,h=0;h<L.length;h++)ih(L[h],N)}catch(X){cn(s,s.return,X)}}l&&S&64&&hm(y),ms(y,y.return);break;case 27:vm(y);case 26:case 5:Ro(h,y,l),l&&s===null&&S&4&&gm(y),ms(y,y.return);break;case 12:Ro(h,y,l);break;case 31:Ro(h,y,l),l&&S&4&&wm(h,y);break;case 13:Ro(h,y,l),l&&S&4&&Cm(h,y);break;case 22:y.memoizedState===null&&Ro(h,y,l),ms(y,y.return);break;case 30:break;default:Ro(h,y,l)}i=i.sibling}}function fd(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&ts(l))}function pd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ts(n))}function Xi(n,i,l,s){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nm(n,i,l,s),i=i.sibling}function Nm(n,i,l,s){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Xi(n,i,l,s),h&2048&&hs(9,i);break;case 1:Xi(n,i,l,s);break;case 3:Xi(n,i,l,s),h&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ts(n)));break;case 12:if(h&2048){Xi(n,i,l,s),n=i.stateNode;try{var y=i.memoizedProps,S=y.id,N=y.onPostCommit;typeof N=="function"&&N(S,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){cn(i,i.return,L)}}else Xi(n,i,l,s);break;case 31:Xi(n,i,l,s);break;case 13:Xi(n,i,l,s);break;case 23:break;case 22:y=i.stateNode,S=i.alternate,i.memoizedState!==null?y._visibility&2?Xi(n,i,l,s):gs(n,i):y._visibility&2?Xi(n,i,l,s):(y._visibility|=2,ga(n,i,l,s,(i.subtreeFlags&10256)!==0||!1)),h&2048&&fd(S,i);break;case 24:Xi(n,i,l,s),h&2048&&pd(i.alternate,i);break;default:Xi(n,i,l,s)}}function ga(n,i,l,s,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=n,S=i,N=l,L=s,X=S.flags;switch(S.tag){case 0:case 11:case 15:ga(y,S,N,L,h),hs(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&2?ga(y,S,N,L,h):gs(y,S):(me._visibility|=2,ga(y,S,N,L,h)),h&&X&2048&&fd(S.alternate,S);break;case 24:ga(y,S,N,L,h),h&&X&2048&&pd(S.alternate,S);break;default:ga(y,S,N,L,h)}i=i.sibling}}function gs(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,s=i,h=s.flags;switch(s.tag){case 22:gs(l,s),h&2048&&fd(s.alternate,s);break;case 24:gs(l,s),h&2048&&pd(s.alternate,s);break;default:gs(l,s)}i=i.sibling}}var ys=8192;function ya(n,i,l){if(n.subtreeFlags&ys)for(n=n.child;n!==null;)Am(n,i,l),n=n.sibling}function Am(n,i,l){switch(n.tag){case 26:ya(n,i,l),n.flags&ys&&n.memoizedState!==null&&qb(l,Ki,n.memoizedState,n.memoizedProps);break;case 5:ya(n,i,l);break;case 3:case 4:var s=Ki;Ki=Xr(n.stateNode.containerInfo),ya(n,i,l),Ki=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=ys,ys=16777216,ya(n,i,l),ys=s):ya(n,i,l));break;default:ya(n,i,l)}}function Mm(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function vs(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var s=i[l];jn=s,Rm(s,n)}Mm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)km(n),n=n.sibling}function km(n){switch(n.tag){case 0:case 11:case 15:vs(n),n.flags&2048&&il(9,n,n.return);break;case 3:vs(n);break;case 12:vs(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Fr(n)):vs(n);break;default:vs(n)}}function Fr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var s=i[l];jn=s,Rm(s,n)}Mm(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:il(8,i,i.return),Fr(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Fr(i));break;default:Fr(i)}n=n.sibling}}function Rm(n,i){for(;jn!==null;){var l=jn;switch(l.tag){case 0:case 11:case 15:il(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ts(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,jn=s;else e:for(l=n;jn!==null;){s=jn;var h=s.sibling,y=s.return;if(Sm(s),s===l){jn=null;break e}if(h!==null){h.return=y,jn=h;break e}jn=y}}}var ab={getCacheForType:function(n){var i=Wn(Ln),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return Wn(Ln).controller.signal}},sb=typeof WeakMap=="function"?WeakMap:Map,nn=0,mn=null,Ht=null,Vt=0,rn=0,Ni=null,ol=!1,va=!1,hd=!1,Io=0,Nn=0,ll=0,Fl=0,md=0,Ai=0,xa=0,xs=null,vi=null,gd=!1,Pr=0,Im=0,Br=1/0,Hr=null,al=null,On=0,sl=null,ba=null,zo=0,yd=0,vd=null,zm=null,bs=0,xd=null;function Mi(){return(nn&2)!==0&&Vt!==0?Vt&-Vt:V.T!==null?Ed():ai()}function Dm(){if(Ai===0)if((Vt&536870912)===0||Yt){var n=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),Ai=n}else Ai=536870912;return n=Ei.current,n!==null&&(n.flags|=32),Ai}function xi(n,i,l){(n===mn&&(rn===2||rn===9)||n.cancelPendingCommit!==null)&&(Sa(n,0),rl(n,Vt,Ai,!1)),mt(n,l),((nn&2)===0||n!==mn)&&(n===mn&&((nn&2)===0&&(Fl|=l),Nn===4&&rl(n,Vt,Ai,!1)),so(n))}function Lm(n,i,l){if((nn&6)!==0)throw Error(a(327));var s=!l&&(i&127)===0&&(i&n.expiredLanes)===0||Jt(n,i),h=s?ub(n,i):Sd(n,i,!0),y=s;do{if(h===0){va&&!s&&rl(n,i,0,!1);break}else{if(l=n.current.alternate,y&&!rb(l)){h=Sd(n,i,!1),y=!1;continue}if(h===2){if(y=i,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var N=n;h=xs;var L=N.current.memoizedState.isDehydrated;if(L&&(Sa(N,S).flags|=256),S=Sd(N,S,!1),S!==2){if(hd&&!L){N.errorRecoveryDisabledLanes|=y,Fl|=y,h=4;break e}y=vi,vi=h,y!==null&&(vi===null?vi=y:vi.push.apply(vi,y))}h=S}if(y=!1,h!==2)continue}}if(h===1){Sa(n,0),rl(n,i,0,!0);break}e:{switch(s=n,y=h,y){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:rl(s,i,Ai,!ol);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=Pr+300-Ee(),10<h)){if(rl(s,i,Ai,!ol),tt(s,0,!0)!==0)break e;zo=i,s.timeoutHandle=f0(Um.bind(null,s,l,vi,Hr,gd,i,Ai,Fl,xa,ol,y,"Throttled",-0,0),h);break e}Um(s,l,vi,Hr,gd,i,Ai,Fl,xa,ol,y,null,-0,0)}}break}while(!0);so(n)}function Um(n,i,l,s,h,y,S,N,L,X,me,Te,ee,le){if(n.timeoutHandle=-1,Te=i.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ze},Am(i,y,Te);var at=(y&62914560)===y?Pr-Ee():(y&4194048)===y?Im-Ee():0;if(at=$b(Te,at),at!==null){zo=y,n.cancelPendingCommit=at(jm.bind(null,n,i,y,l,s,h,S,N,L,me,Te,null,ee,le)),rl(n,y,S,!X);return}}jm(n,i,y,l,s,h,S,N,L)}function rb(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var h=l[s],y=h.getSnapshot;h=h.value;try{if(!wi(y(),h))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function rl(n,i,l,s){i&=~md,i&=~Fl,n.suspendedLanes|=i,n.pingedLanes&=~i,s&&(n.warmLanes|=i),s=n.expirationTimes;for(var h=i;0<h;){var y=31-ze(h),S=1<<y;s[y]=-1,h&=~S}l!==0&&Pt(n,l,i)}function Or(){return(nn&6)===0?(Ss(0),!1):!0}function bd(){if(Ht!==null){if(rn===0)var n=Ht.return;else n=Ht,To=Al=null,Uu(n),da=null,is=0,n=Ht;for(;n!==null;)pm(n.alternate,n),n=n.return;Ht=null}}function Sa(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,Ab(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),zo=0,bd(),mn=n,Ht=l=bo(n.current,null),Vt=i,rn=0,Ni=null,ol=!1,va=Jt(n,i),hd=!1,xa=Ai=md=Fl=ll=Nn=0,vi=xs=null,gd=!1,(i&8)!==0&&(i|=i&32);var s=n.entangledLanes;if(s!==0)for(n=n.entanglements,s&=i;0<s;){var h=31-ze(s),y=1<<h;i|=n[h],s&=~y}return Io=i,rr(),l}function Fm(n,i){Dt=null,V.H=ds,i===ua||i===gr?(i=Zp(),rn=3):i===Cu?(i=Zp(),rn=4):rn=i===Qu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ni=i,Ht===null&&(Nn=1,kr(n,Li(i,n.current)))}function Pm(){var n=Ei.current;return n===null?!0:(Vt&4194048)===Vt?Bi===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?n===Bi:!1}function Bm(){var n=V.H;return V.H=ds,n===null?ds:n}function Hm(){var n=V.A;return V.A=ab,n}function Gr(){Nn=4,ol||(Vt&4194048)!==Vt&&Ei.current!==null||(va=!0),(ll&134217727)===0&&(Fl&134217727)===0||mn===null||rl(mn,Vt,Ai,!1)}function Sd(n,i,l){var s=nn;nn|=2;var h=Bm(),y=Hm();(mn!==n||Vt!==i)&&(Hr=null,Sa(n,i)),i=!1;var S=Nn;e:do try{if(rn!==0&&Ht!==null){var N=Ht,L=Ni;switch(rn){case 8:bd(),S=6;break e;case 3:case 2:case 9:case 6:Ei.current===null&&(i=!0);var X=rn;if(rn=0,Ni=null,Ta(n,N,L,X),l&&va){S=0;break e}break;default:X=rn,rn=0,Ni=null,Ta(n,N,L,X)}}cb(),S=Nn;break}catch(me){Fm(n,me)}while(!0);return i&&n.shellSuspendCounter++,To=Al=null,nn=s,V.H=h,V.A=y,Ht===null&&(mn=null,Vt=0,rr()),S}function cb(){for(;Ht!==null;)Om(Ht)}function ub(n,i){var l=nn;nn|=2;var s=Bm(),h=Hm();mn!==n||Vt!==i?(Hr=null,Br=Ee()+500,Sa(n,i)):va=Jt(n,i);e:do try{if(rn!==0&&Ht!==null){i=Ht;var y=Ni;t:switch(rn){case 1:rn=0,Ni=null,Ta(n,i,y,1);break;case 2:case 9:if(Wp(y)){rn=0,Ni=null,Gm(i);break}i=function(){rn!==2&&rn!==9||mn!==n||(rn=7),so(n)},y.then(i,i);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:Wp(y)?(rn=0,Ni=null,Gm(i)):(rn=0,Ni=null,Ta(n,i,y,7));break;case 5:var S=null;switch(Ht.tag){case 26:S=Ht.memoizedState;case 5:case 27:var N=Ht;if(S?N0(S):N.stateNode.complete){rn=0,Ni=null;var L=N.sibling;if(L!==null)Ht=L;else{var X=N.return;X!==null?(Ht=X,Vr(X)):Ht=null}break t}}rn=0,Ni=null,Ta(n,i,y,5);break;case 6:rn=0,Ni=null,Ta(n,i,y,6);break;case 8:bd(),Nn=6;break e;default:throw Error(a(462))}}db();break}catch(me){Fm(n,me)}while(!0);return To=Al=null,V.H=s,V.A=h,nn=l,Ht!==null?0:(mn=null,Vt=0,rr(),Nn)}function db(){for(;Ht!==null&&!Z();)Om(Ht)}function Om(n){var i=dm(n.alternate,n,Io);n.memoizedProps=n.pendingProps,i===null?Vr(n):Ht=i}function Gm(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=lm(l,i,i.pendingProps,i.type,void 0,Vt);break;case 11:i=lm(l,i,i.pendingProps,i.type.render,i.ref,Vt);break;case 5:Uu(i);default:pm(l,i),i=Ht=Hp(i,Io),i=dm(l,i,Io)}n.memoizedProps=n.pendingProps,i===null?Vr(n):Ht=i}function Ta(n,i,l,s){To=Al=null,Uu(i),da=null,is=0;var h=i.return;try{if(Zx(n,h,i,l,Vt)){Nn=1,kr(n,Li(l,n.current)),Ht=null;return}}catch(y){if(h!==null)throw Ht=h,y;Nn=1,kr(n,Li(l,n.current)),Ht=null;return}i.flags&32768?(Yt||s===1?n=!0:va||(Vt&536870912)!==0?n=!1:(ol=n=!0,(s===2||s===9||s===3||s===6)&&(s=Ei.current,s!==null&&s.tag===13&&(s.flags|=16384))),Vm(i,n)):Vr(i)}function Vr(n){var i=n;do{if((i.flags&32768)!==0){Vm(i,ol);return}n=i.return;var l=nb(i.alternate,i,Io);if(l!==null){Ht=l;return}if(i=i.sibling,i!==null){Ht=i;return}Ht=i=n}while(i!==null);Nn===0&&(Nn=5)}function Vm(n,i){do{var l=ib(n.alternate,n);if(l!==null){l.flags&=32767,Ht=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){Ht=n;return}Ht=n=l}while(n!==null);Nn=6,Ht=null}function jm(n,i,l,s,h,y,S,N,L){n.cancelPendingCommit=null;do jr();while(On!==0);if((nn&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(y=i.lanes|i.childLanes,y|=cu,st(n,l,y,S,N,L),n===mn&&(Ht=mn=null,Vt=0),ba=i,sl=n,zo=l,yd=y,vd=h,zm=s,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,mb(Ve,function(){return Km(),null})):(n.callbackNode=null,n.callbackPriority=0),s=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||s){s=V.T,V.T=null,h=Ce.p,Ce.p=2,S=nn,nn|=4;try{ob(n,i,l)}finally{nn=S,Ce.p=h,V.T=s}}On=1,qm(),$m(),Ym()}}function qm(){if(On===1){On=0;var n=sl,i=ba,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var s=Ce.p;Ce.p=2;var h=nn;nn|=4;try{Em(i,n);var y=zd,S=Rp(n.containerInfo),N=y.focusedElem,L=y.selectionRange;if(S!==N&&N&&N.ownerDocument&&kp(N.ownerDocument.documentElement,N)){if(L!==null&&ou(N)){var X=L.start,me=L.end;if(me===void 0&&(me=X),"selectionStart"in N)N.selectionStart=X,N.selectionEnd=Math.min(me,N.value.length);else{var Te=N.ownerDocument||document,ee=Te&&Te.defaultView||window;if(ee.getSelection){var le=ee.getSelection(),at=N.textContent.length,Ct=Math.min(L.start,at),hn=L.end===void 0?Ct:Math.min(L.end,at);!le.extend&&Ct>hn&&(S=hn,hn=Ct,Ct=S);var q=Mp(N,Ct),H=Mp(N,hn);if(q&&H&&(le.rangeCount!==1||le.anchorNode!==q.node||le.anchorOffset!==q.offset||le.focusNode!==H.node||le.focusOffset!==H.offset)){var K=Te.createRange();K.setStart(q.node,q.offset),le.removeAllRanges(),Ct>hn?(le.addRange(K),le.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),le.addRange(K))}}}}for(Te=[],le=N;le=le.parentNode;)le.nodeType===1&&Te.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Te.length;N++){var be=Te[N];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}nc=!!Id,zd=Id=null}finally{nn=h,Ce.p=s,V.T=l}}n.current=i,On=2}}function $m(){if(On===2){On=0;var n=sl,i=ba,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var s=Ce.p;Ce.p=2;var h=nn;nn|=4;try{bm(n,i.alternate,i)}finally{nn=h,Ce.p=s,V.T=l}}On=3}}function Ym(){if(On===4||On===3){On=0,ae();var n=sl,i=ba,l=zo,s=zm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?On=5:(On=0,ba=sl=null,Jm(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(al=null),An(l),i=i.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot($,i,void 0,(i.current.flags&128)===128)}catch{}if(s!==null){i=V.T,h=Ce.p,Ce.p=2,V.T=null;try{for(var y=n.onRecoverableError,S=0;S<s.length;S++){var N=s[S];y(N.value,{componentStack:N.stack})}}finally{V.T=i,Ce.p=h}}(zo&3)!==0&&jr(),so(n),h=n.pendingLanes,(l&261930)!==0&&(h&42)!==0?n===xd?bs++:(bs=0,xd=n):bs=0,Ss(0)}}function Jm(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ts(i)))}function jr(){return qm(),$m(),Ym(),Km()}function Km(){if(On!==5)return!1;var n=sl,i=yd;yd=0;var l=An(zo),s=V.T,h=Ce.p;try{Ce.p=32>l?32:l,V.T=null,l=vd,vd=null;var y=sl,S=zo;if(On=0,ba=sl=null,zo=0,(nn&6)!==0)throw Error(a(331));var N=nn;if(nn|=4,km(y.current),Nm(y,y.current,S,l),nn=N,Ss(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot($,y)}catch{}return!0}finally{Ce.p=h,V.T=s,Jm(n,i)}}function Xm(n,i,l){i=Li(l,i),i=Wu(n.stateNode,i,2),n=el(n,i,2),n!==null&&(mt(n,2),so(n))}function cn(n,i,l){if(n.tag===3)Xm(n,n,l);else for(;i!==null;){if(i.tag===3){Xm(i,n,l);break}else if(i.tag===1){var s=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(al===null||!al.has(s))){n=Li(l,n),l=Wh(2),s=el(i,l,2),s!==null&&(Qh(l,s,i,n),mt(s,2),so(s));break}}i=i.return}}function Td(n,i,l){var s=n.pingCache;if(s===null){s=n.pingCache=new sb;var h=new Set;s.set(i,h)}else h=s.get(i),h===void 0&&(h=new Set,s.set(i,h));h.has(l)||(hd=!0,h.add(l),n=fb.bind(null,n,i,l),i.then(n,n))}function fb(n,i,l){var s=n.pingCache;s!==null&&s.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,mn===n&&(Vt&l)===l&&(Nn===4||Nn===3&&(Vt&62914560)===Vt&&300>Ee()-Pr?(nn&2)===0&&Sa(n,0):md|=l,xa===Vt&&(xa=0)),so(n)}function Wm(n,i){i===0&&(i=De()),n=El(n,i),n!==null&&(mt(n,i),so(n))}function pb(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Wm(n,l)}function hb(n,i){var l=0;switch(n.tag){case 31:case 13:var s=n.stateNode,h=n.memoizedState;h!==null&&(l=h.retryLane);break;case 19:s=n.stateNode;break;case 22:s=n.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(i),Wm(n,l)}function mb(n,i){return it(n,i)}var qr=null,wa=null,wd=!1,$r=!1,Cd=!1,cl=0;function so(n){n!==wa&&n.next===null&&(wa===null?qr=wa=n:wa=wa.next=n),$r=!0,wd||(wd=!0,yb())}function Ss(n,i){if(!Cd&&$r){Cd=!0;do for(var l=!1,s=qr;s!==null;){if(n!==0){var h=s.pendingLanes;if(h===0)var y=0;else{var S=s.suspendedLanes,N=s.pingedLanes;y=(1<<31-ze(42|n)+1)-1,y&=h&~(S&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,t0(s,y))}else y=Vt,y=tt(s,s===mn?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(y&3)===0||Jt(s,y)||(l=!0,t0(s,y));s=s.next}while(l);Cd=!1}}function gb(){Qm()}function Qm(){$r=wd=!1;var n=0;cl!==0&&Nb()&&(n=cl);for(var i=Ee(),l=null,s=qr;s!==null;){var h=s.next,y=Zm(s,i);y===0?(s.next=null,l===null?qr=h:l.next=h,h===null&&(wa=l)):(l=s,(n!==0||(y&3)!==0)&&($r=!0)),s=h}On!==0&&On!==5||Ss(n),cl!==0&&(cl=0)}function Zm(n,i){for(var l=n.suspendedLanes,s=n.pingedLanes,h=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-ze(y),N=1<<S,L=h[S];L===-1?((N&l)===0||(N&s)!==0)&&(h[S]=ge(N,i)):L<=i&&(n.expiredLanes|=N),y&=~N}if(i=mn,l=Vt,l=tt(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),s=n.callbackNode,l===0||n===i&&(rn===2||rn===9)||n.cancelPendingCommit!==null)return s!==null&&s!==null&&U(s),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Jt(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(s!==null&&U(s),An(l)){case 2:case 8:l=ue;break;case 32:l=Ve;break;case 268435456:l=M;break;default:l=Ve}return s=e0.bind(null,n),l=it(l,s),n.callbackPriority=i,n.callbackNode=l,i}return s!==null&&s!==null&&U(s),n.callbackPriority=2,n.callbackNode=null,2}function e0(n,i){if(On!==0&&On!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(jr()&&n.callbackNode!==l)return null;var s=Vt;return s=tt(n,n===mn?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),s===0?null:(Lm(n,s,i),Zm(n,Ee()),n.callbackNode!=null&&n.callbackNode===l?e0.bind(null,n):null)}function t0(n,i){if(jr())return null;Lm(n,i,!0)}function yb(){Mb(function(){(nn&6)!==0?it(Ne,gb):Qm()})}function Ed(){if(cl===0){var n=ra;n===0&&(n=ot,ot<<=1,(ot&261888)===0&&(ot=256)),cl=n}return cl}function n0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Oe(""+n)}function i0(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function vb(n,i,l,s,h){if(i==="submit"&&l&&l.stateNode===h){var y=n0((h[St]||null).action),S=s.submitter;S&&(i=(i=S[St]||null)?n0(i.formAction):S.getAttribute("formAction"),i!==null&&(y=i,S=null));var N=new dn("action","action",null,s,h);n.push({event:N,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(cl!==0){var L=S?i0(h,S):new FormData(h);qu(l,{pending:!0,data:L,method:h.method,action:y},null,L)}}else typeof y=="function"&&(N.preventDefault(),L=S?i0(h,S):new FormData(h),qu(l,{pending:!0,data:L,method:h.method,action:y},y,L))},currentTarget:h}]})}}for(var _d=0;_d<ru.length;_d++){var Nd=ru[_d],xb=Nd.toLowerCase(),bb=Nd[0].toUpperCase()+Nd.slice(1);Ji(xb,"on"+bb)}Ji(Dp,"onAnimationEnd"),Ji(Lp,"onAnimationIteration"),Ji(Up,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(Ux,"onTransitionRun"),Ji(Fx,"onTransitionStart"),Ji(Px,"onTransitionCancel"),Ji(Fp,"onTransitionEnd"),go("onMouseEnter",["mouseout","mouseover"]),go("onMouseLeave",["mouseout","mouseover"]),go("onPointerEnter",["pointerout","pointerover"]),go("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ts));function o0(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var s=n[l],h=s.event;s=s.listeners;e:{var y=void 0;if(i)for(var S=s.length-1;0<=S;S--){var N=s[S],L=N.instance,X=N.currentTarget;if(N=N.listener,L!==y&&h.isPropagationStopped())break e;y=N,h.currentTarget=X;try{y(h)}catch(me){sr(me)}h.currentTarget=null,y=L}else for(S=0;S<s.length;S++){if(N=s[S],L=N.instance,X=N.currentTarget,N=N.listener,L!==y&&h.isPropagationStopped())break e;y=N,h.currentTarget=X;try{y(h)}catch(me){sr(me)}h.currentTarget=null,y=L}}}}function Ot(n,i){var l=i[ni];l===void 0&&(l=i[ni]=new Set);var s=n+"__bubble";l.has(s)||(l0(i,n,2,!1),l.add(s))}function Ad(n,i,l){var s=0;i&&(s|=4),l0(l,n,s,i)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Md(n){if(!n[Yr]){n[Yr]=!0,$l.forEach(function(l){l!=="selectionchange"&&(Sb.has(l)||Ad(l,!1,n),Ad(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Yr]||(i[Yr]=!0,Ad("selectionchange",!1,i))}}function l0(n,i,l,s){switch(D0(i)){case 2:var h=Kb;break;case 8:h=Xb;break;default:h=jd}l=h.bind(null,i,l,n),h=void 0,!ft||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),s?h!==void 0?n.addEventListener(i,l,{capture:!0,passive:h}):n.addEventListener(i,l,!0):h!==void 0?n.addEventListener(i,l,{passive:h}):n.addEventListener(i,l,!1)}function kd(n,i,l,s,h){var y=s;if((i&1)===0&&(i&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var N=s.stateNode.containerInfo;if(N===h)break;if(S===4)for(S=s.return;S!==null;){var L=S.tag;if((L===3||L===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;N!==null;){if(S=mo(N),S===null)return;if(L=S.tag,L===5||L===6||L===26||L===27){s=y=S;continue e}N=N.parentNode}}s=s.return}Xt(function(){var X=y,me=gt(l),Te=[];e:{var ee=Pp.get(n);if(ee!==void 0){var le=dn,at=n;switch(n){case"keypress":if(fi(l)===0)break e;case"keydown":case"keyup":le=hx;break;case"focusin":at="focus",le=lt;break;case"focusout":at="blur",le=lt;break;case"beforeblur":case"afterblur":le=lt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=xo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=yx;break;case Dp:case Lp:case Up:le=We;break;case Fp:le=xx;break;case"scroll":case"scrollend":le=te;break;case"wheel":le=Sx;break;case"copy":case"cut":case"paste":le=tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=mp;break;case"toggle":case"beforetoggle":le=wx}var Ct=(i&4)!==0,hn=!Ct&&(n==="scroll"||n==="scrollend"),q=Ct?ee!==null?ee+"Capture":null:ee;Ct=[];for(var H=X,K;H!==null;){var be=H;if(K=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||K===null||q===null||(be=En(H,q),be!=null&&Ct.push(ws(H,be,K))),hn)break;H=H.return}0<Ct.length&&(ee=new le(ee,at,null,l,me),Te.push({event:ee,listeners:Ct}))}}if((i&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",ee&&l!==Tt&&(at=l.relatedTarget||l.fromElement)&&(mo(at)||at[Ft]))break e;if((le||ee)&&(ee=me.window===me?me:(ee=me.ownerDocument)?ee.defaultView||ee.parentWindow:window,le?(at=l.relatedTarget||l.toElement,le=X,at=at?mo(at):null,at!==null&&(hn=u(at),Ct=at.tag,at!==hn||Ct!==5&&Ct!==27&&Ct!==6)&&(at=null)):(le=null,at=X),le!==at)){if(Ct=io,be="onMouseLeave",q="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(Ct=mp,be="onPointerLeave",q="onPointerEnter",H="pointer"),hn=le==null?ee:bl(le),K=at==null?ee:bl(at),ee=new Ct(be,H+"leave",le,l,me),ee.target=hn,ee.relatedTarget=K,be=null,mo(me)===X&&(Ct=new Ct(q,H+"enter",at,l,me),Ct.target=K,Ct.relatedTarget=hn,be=Ct),hn=be,le&&at)t:{for(Ct=Tb,q=le,H=at,K=0,be=q;be;be=Ct(be))K++;be=0;for(var yt=H;yt;yt=Ct(yt))be++;for(;0<K-be;)q=Ct(q),K--;for(;0<be-K;)H=Ct(H),be--;for(;K--;){if(q===H||H!==null&&q===H.alternate){Ct=q;break t}q=Ct(q),H=Ct(H)}Ct=null}else Ct=null;le!==null&&a0(Te,ee,le,Ct,!1),at!==null&&hn!==null&&a0(Te,hn,at,Ct,!0)}}e:{if(ee=X?bl(X):window,le=ee.nodeName&&ee.nodeName.toLowerCase(),le==="select"||le==="input"&&ee.type==="file")var Qt=wp;else if(Sp(ee))if(Cp)Qt=zx;else{Qt=Rx;var ut=kx}else le=ee.nodeName,!le||le.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?X&&Le(X.elementType)&&(Qt=wp):Qt=Ix;if(Qt&&(Qt=Qt(n,X))){Tp(Te,Qt,l,me);break e}ut&&ut(n,ee,X),n==="focusout"&&X&&ee.type==="number"&&X.memoizedProps.value!=null&&Wl(ee,"number",ee.value)}switch(ut=X?bl(X):window,n){case"focusin":(Sp(ut)||ut.contentEditable==="true")&&(ea=ut,lu=X,Qa=null);break;case"focusout":Qa=lu=ea=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,Ip(Te,l,me);break;case"selectionchange":if(Lx)break;case"keydown":case"keyup":Ip(Te,l,me)}var Lt;if(tu)e:{switch(n){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else Zl?xp(n,l)&&(jt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(jt="onCompositionStart");jt&&(gp&&l.locale!=="ko"&&(Zl||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&Zl&&(Lt=no()):($e=me,sn="value"in $e?$e.value:$e.textContent,Zl=!0)),ut=Jr(X,jt),0<ut.length&&(jt=new Ti(jt,n,null,l,me),Te.push({event:jt,listeners:ut}),Lt?jt.data=Lt:(Lt=bp(l),Lt!==null&&(jt.data=Lt)))),(Lt=Ex?_x(n,l):Nx(n,l))&&(jt=Jr(X,"onBeforeInput"),0<jt.length&&(ut=new Ti("onBeforeInput","beforeinput",null,l,me),Te.push({event:ut,listeners:jt}),ut.data=Lt)),vb(Te,n,X,l,me)}o0(Te,i)})}function ws(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Jr(n,i){for(var l=i+"Capture",s=[];n!==null;){var h=n,y=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||y===null||(h=En(n,l),h!=null&&s.unshift(ws(n,h,y)),h=En(n,i),h!=null&&s.push(ws(n,h,y))),n.tag===3)return s;n=n.return}return[]}function Tb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function a0(n,i,l,s,h){for(var y=i._reactName,S=[];l!==null&&l!==s;){var N=l,L=N.alternate,X=N.stateNode;if(N=N.tag,L!==null&&L===s)break;N!==5&&N!==26&&N!==27||X===null||(L=X,h?(X=En(l,y),X!=null&&S.unshift(ws(l,X,L))):h||(X=En(l,y),X!=null&&S.push(ws(l,X,L)))),l=l.return}S.length!==0&&n.push({event:i,listeners:S})}var wb=/\r\n?/g,Cb=/\u0000|\uFFFD/g;function s0(n){return(typeof n=="string"?n:""+n).replace(wb,`
`).replace(Cb,"")}function r0(n,i){return i=s0(i),s0(n)===i}function pn(n,i,l,s,h,y){switch(l){case"children":typeof s=="string"?i==="body"||i==="textarea"&&s===""||to(n,s):(typeof s=="number"||typeof s=="bigint")&&i!=="body"&&to(n,""+s);break;case"className":Sl(n,"class",s);break;case"tabIndex":Sl(n,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Sl(n,l,s);break;case"style":J(n,s,y);break;case"data":if(i!=="object"){Sl(n,"data",s);break}case"src":case"href":if(s===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){n.removeAttribute(l);break}s=Oe(""+s),n.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(i!=="input"&&pn(n,i,"name",h.name,h,null),pn(n,i,"formEncType",h.formEncType,h,null),pn(n,i,"formMethod",h.formMethod,h,null),pn(n,i,"formTarget",h.formTarget,h,null)):(pn(n,i,"encType",h.encType,h,null),pn(n,i,"method",h.method,h,null),pn(n,i,"target",h.target,h,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){n.removeAttribute(l);break}s=Oe(""+s),n.setAttribute(l,s);break;case"onClick":s!=null&&(n.onclick=Ze);break;case"onScroll":s!=null&&Ot("scroll",n);break;case"onScrollEnd":s!=null&&Ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(h.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":n.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){n.removeAttribute("xlink:href");break}l=Oe(""+s),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?n.setAttribute(l,""+s):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":s===!0?n.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?n.setAttribute(l,s):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?n.setAttribute(l,s):n.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?n.removeAttribute(l):n.setAttribute(l,s);break;case"popover":Ot("beforetoggle",n),Ot("toggle",n),Jl(n,"popover",s);break;case"xlinkActuate":$i(n,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":$i(n,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":$i(n,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":$i(n,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":$i(n,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":$i(n,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":$i(n,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":$i(n,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":$i(n,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Jl(n,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=W.get(l)||l,Jl(n,l,s))}}function Rd(n,i,l,s,h,y){switch(l){case"style":J(n,s,y);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(h.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof s=="string"?to(n,s):(typeof s=="number"||typeof s=="bigint")&&to(n,""+s);break;case"onScroll":s!=null&&Ot("scroll",n);break;case"onScrollEnd":s!=null&&Ot("scrollend",n);break;case"onClick":s!=null&&(n.onclick=Ze);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),i=l.slice(2,h?l.length-7:void 0),y=n[St]||null,y=y!=null?y[l]:null,typeof y=="function"&&n.removeEventListener(i,y,h),typeof s=="function")){typeof y!="function"&&y!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,s,h);break e}l in n?n[l]=s:s===!0?n.setAttribute(l,""):Jl(n,l,s)}}}function Zn(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",n),Ot("load",n);var s=!1,h=!1,y;for(y in l)if(l.hasOwnProperty(y)){var S=l[y];if(S!=null)switch(y){case"src":s=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:pn(n,i,y,S,l,null)}}h&&pn(n,i,"srcSet",l.srcSet,l,null),s&&pn(n,i,"src",l.src,l,null);return;case"input":Ot("invalid",n);var N=y=S=h=null,L=null,X=null;for(s in l)if(l.hasOwnProperty(s)){var me=l[s];if(me!=null)switch(s){case"name":h=me;break;case"type":S=me;break;case"checked":L=me;break;case"defaultChecked":X=me;break;case"value":y=me;break;case"defaultValue":N=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,i));break;default:pn(n,i,s,me,l,null)}}lr(n,y,N,L,X,S,h,!1);return;case"select":Ot("invalid",n),s=S=y=null;for(h in l)if(l.hasOwnProperty(h)&&(N=l[h],N!=null))switch(h){case"value":y=N;break;case"defaultValue":S=N;break;case"multiple":s=N;default:pn(n,i,h,N,l,null)}i=y,l=S,n.multiple=!!s,i!=null?jo(n,!!s,i,!1):l!=null&&jo(n,!!s,l,!0);return;case"textarea":Ot("invalid",n),y=h=s=null;for(S in l)if(l.hasOwnProperty(S)&&(N=l[S],N!=null))switch(S){case"value":s=N;break;case"defaultValue":h=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:pn(n,i,S,N,l,null)}yo(n,s,h,y);return;case"option":for(L in l)l.hasOwnProperty(L)&&(s=l[L],s!=null)&&(L==="selected"?n.selected=s&&typeof s!="function"&&typeof s!="symbol":pn(n,i,L,s,l,null));return;case"dialog":Ot("beforetoggle",n),Ot("toggle",n),Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":Ot("load",n);break;case"video":case"audio":for(s=0;s<Ts.length;s++)Ot(Ts[s],n);break;case"image":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"embed":case"source":case"link":Ot("error",n),Ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(s=l[X],s!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:pn(n,i,X,s,l,null)}return;default:if(Le(i)){for(me in l)l.hasOwnProperty(me)&&(s=l[me],s!==void 0&&Rd(n,i,me,s,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(s=l[N],s!=null&&pn(n,i,N,s,l,null))}function Eb(n,i,l,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,y=null,S=null,N=null,L=null,X=null,me=null;for(le in l){var Te=l[le];if(l.hasOwnProperty(le)&&Te!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":L=Te;default:s.hasOwnProperty(le)||pn(n,i,le,null,s,Te)}}for(var ee in s){var le=s[ee];if(Te=l[ee],s.hasOwnProperty(ee)&&(le!=null||Te!=null))switch(ee){case"type":y=le;break;case"name":h=le;break;case"checked":X=le;break;case"defaultChecked":me=le;break;case"value":S=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,i));break;default:le!==Te&&pn(n,i,ee,le,s,Te)}}Vo(n,S,N,L,X,me,y,h);return;case"select":le=S=N=ee=null;for(y in l)if(L=l[y],l.hasOwnProperty(y)&&L!=null)switch(y){case"value":break;case"multiple":le=L;default:s.hasOwnProperty(y)||pn(n,i,y,null,s,L)}for(h in s)if(y=s[h],L=l[h],s.hasOwnProperty(h)&&(y!=null||L!=null))switch(h){case"value":ee=y;break;case"defaultValue":N=y;break;case"multiple":S=y;default:y!==L&&pn(n,i,h,y,s,L)}i=N,l=S,s=le,ee!=null?jo(n,!!l,ee,!1):!!s!=!!l&&(i!=null?jo(n,!!l,i,!0):jo(n,!!l,l?[]:"",!1));return;case"textarea":le=ee=null;for(N in l)if(h=l[N],l.hasOwnProperty(N)&&h!=null&&!s.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:pn(n,i,N,null,s,h)}for(S in s)if(h=s[S],y=l[S],s.hasOwnProperty(S)&&(h!=null||y!=null))switch(S){case"value":ee=h;break;case"defaultValue":le=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==y&&pn(n,i,S,h,s,y)}qo(n,ee,le);return;case"option":for(var at in l)ee=l[at],l.hasOwnProperty(at)&&ee!=null&&!s.hasOwnProperty(at)&&(at==="selected"?n.selected=!1:pn(n,i,at,null,s,ee));for(L in s)ee=s[L],le=l[L],s.hasOwnProperty(L)&&ee!==le&&(ee!=null||le!=null)&&(L==="selected"?n.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":pn(n,i,L,ee,s,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in l)ee=l[Ct],l.hasOwnProperty(Ct)&&ee!=null&&!s.hasOwnProperty(Ct)&&pn(n,i,Ct,null,s,ee);for(X in s)if(ee=s[X],le=l[X],s.hasOwnProperty(X)&&ee!==le&&(ee!=null||le!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:pn(n,i,X,ee,s,le)}return;default:if(Le(i)){for(var hn in l)ee=l[hn],l.hasOwnProperty(hn)&&ee!==void 0&&!s.hasOwnProperty(hn)&&Rd(n,i,hn,void 0,s,ee);for(me in s)ee=s[me],le=l[me],!s.hasOwnProperty(me)||ee===le||ee===void 0&&le===void 0||Rd(n,i,me,ee,s,le);return}}for(var q in l)ee=l[q],l.hasOwnProperty(q)&&ee!=null&&!s.hasOwnProperty(q)&&pn(n,i,q,null,s,ee);for(Te in s)ee=s[Te],le=l[Te],!s.hasOwnProperty(Te)||ee===le||ee==null&&le==null||pn(n,i,Te,ee,s,le)}function c0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _b(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var h=l[s],y=h.transferSize,S=h.initiatorType,N=h.duration;if(y&&N&&c0(S)){for(S=0,N=h.responseEnd,s+=1;s<l.length;s++){var L=l[s],X=L.startTime;if(X>N)break;var me=L.transferSize,Te=L.initiatorType;me&&c0(Te)&&(L=L.responseEnd,S+=me*(L<N?1:(N-X)/(L-X)))}if(--s,i+=8*(y+S)/(h.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Id=null,zd=null;function Kr(n){return n.nodeType===9?n:n.ownerDocument}function u0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Dd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ld=null;function Nb(){var n=window.event;return n&&n.type==="popstate"?n===Ld?!1:(Ld=n,!0):(Ld=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,Ab=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,Mb=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(n){return p0.resolve(null).then(n).catch(kb)}:f0;function kb(n){setTimeout(function(){throw n})}function ul(n){return n==="head"}function h0(n,i){var l=i,s=0;do{var h=l.nextSibling;if(n.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(s===0){n.removeChild(h),Na(i);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Cs(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Cs(l);for(var y=l.firstChild;y;){var S=y.nextSibling,N=y.nodeName;y[eo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=S}}else l==="body"&&Cs(n.ownerDocument.body);l=h}while(l);Na(i)}function m0(n,i){var l=n;n=0;do{var s=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=s}while(l)}function Ud(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ud(l),Ho(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function Rb(n,i,l,s){for(;n.nodeType===1;){var h=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!s&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(s){if(!n[eo])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var y=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Hi(n.nextSibling),n===null)break}return null}function Ib(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Hi(n.nextSibling),n===null))return null;return n}function g0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Hi(n.nextSibling),n===null))return null;return n}function Fd(n){return n.data==="$?"||n.data==="$~"}function Pd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function zb(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var s=function(){i(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),n._reactRetry=s}}function Hi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Bd=null;function y0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Hi(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function v0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function x0(n,i,l){switch(i=Kr(l),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Cs(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ho(n)}var Oi=new Map,b0=new Set;function Xr(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Do=Ce.d;Ce.d={f:Db,r:Lb,D:Ub,C:Fb,L:Pb,m:Bb,X:Ob,S:Hb,M:Gb};function Db(){var n=Do.f(),i=Or();return n||i}function Lb(n){var i=Oo(n);i!==null&&i.tag===5&&i.type==="form"?Fh(i):Do.r(n)}var Ca=typeof document>"u"?null:document;function S0(n,i,l){var s=Ca;if(s&&typeof i=="string"&&i){var h=Vn(i);h='link[rel="'+n+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),b0.has(h)||(b0.add(h),n={rel:n,crossOrigin:l,href:i},s.querySelector(h)===null&&(i=s.createElement("link"),Zn(i,"link",n),Sn(i),s.head.appendChild(i)))}}function Ub(n){Do.D(n),S0("dns-prefetch",n,null)}function Fb(n,i){Do.C(n,i),S0("preconnect",n,i)}function Pb(n,i,l){Do.L(n,i,l);var s=Ca;if(s&&n&&i){var h='link[rel="preload"][as="'+Vn(i)+'"]';i==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+Vn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+Vn(l.imageSizes)+'"]')):h+='[href="'+Vn(n)+'"]';var y=h;switch(i){case"style":y=Ea(n);break;case"script":y=_a(n)}Oi.has(y)||(n=b({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Oi.set(y,n),s.querySelector(h)!==null||i==="style"&&s.querySelector(Es(y))||i==="script"&&s.querySelector(_s(y))||(i=s.createElement("link"),Zn(i,"link",n),Sn(i),s.head.appendChild(i)))}}function Bb(n,i){Do.m(n,i);var l=Ca;if(l&&n){var s=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Vn(s)+'"][href="'+Vn(n)+'"]',y=h;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=_a(n)}if(!Oi.has(y)&&(n=b({rel:"modulepreload",href:n},i),Oi.set(y,n),l.querySelector(h)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_s(y)))return}s=l.createElement("link"),Zn(s,"link",n),Sn(s),l.head.appendChild(s)}}}function Hb(n,i,l){Do.S(n,i,l);var s=Ca;if(s&&n){var h=Si(s).hoistableStyles,y=Ea(n);i=i||"default";var S=h.get(y);if(!S){var N={loading:0,preload:null};if(S=s.querySelector(Es(y)))N.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Oi.get(y))&&Hd(n,l);var L=S=s.createElement("link");Sn(L),Zn(L,"link",n),L._p=new Promise(function(X,me){L.onload=X,L.onerror=me}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Wr(S,i,s)}S={type:"stylesheet",instance:S,count:1,state:N},h.set(y,S)}}}function Ob(n,i){Do.X(n,i);var l=Ca;if(l&&n){var s=Si(l).hoistableScripts,h=_a(n),y=s.get(h);y||(y=l.querySelector(_s(h)),y||(n=b({src:n,async:!0},i),(i=Oi.get(h))&&Od(n,i),y=l.createElement("script"),Sn(y),Zn(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},s.set(h,y))}}function Gb(n,i){Do.M(n,i);var l=Ca;if(l&&n){var s=Si(l).hoistableScripts,h=_a(n),y=s.get(h);y||(y=l.querySelector(_s(h)),y||(n=b({src:n,async:!0,type:"module"},i),(i=Oi.get(h))&&Od(n,i),y=l.createElement("script"),Sn(y),Zn(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},s.set(h,y))}}function T0(n,i,l,s){var h=(h=C.current)?Xr(h):null;if(!h)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Ea(l.href),l=Si(h).hoistableStyles,s=l.get(i),s||(s={type:"style",instance:null,count:0,state:null},l.set(i,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Ea(l.href);var y=Si(h).hoistableStyles,S=y.get(n);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=h.querySelector(Es(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Oi.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Oi.set(n,l),y||Vb(h,n,l,S.state))),i&&s===null)throw Error(a(528,""));return S}if(i&&s!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_a(l),l=Si(h).hoistableScripts,s=l.get(i),s||(s={type:"script",instance:null,count:0,state:null},l.set(i,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Ea(n){return'href="'+Vn(n)+'"'}function Es(n){return'link[rel="stylesheet"]['+n+"]"}function w0(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function Vb(n,i,l,s){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=n.createElement("link"),s.preload=i,i.addEventListener("load",function(){return s.loading|=1}),i.addEventListener("error",function(){return s.loading|=2}),Zn(i,"link",l),Sn(i),n.head.appendChild(i))}function _a(n){return'[src="'+Vn(n)+'"]'}function _s(n){return"script[async]"+n}function C0(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var s=n.querySelector('style[data-href~="'+Vn(l.href)+'"]');if(s)return i.instance=s,Sn(s),s;var h=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(n.ownerDocument||n).createElement("style"),Sn(s),Zn(s,"style",h),Wr(s,l.precedence,n),i.instance=s;case"stylesheet":h=Ea(l.href);var y=n.querySelector(Es(h));if(y)return i.state.loading|=4,i.instance=y,Sn(y),y;s=w0(l),(h=Oi.get(h))&&Hd(s,h),y=(n.ownerDocument||n).createElement("link"),Sn(y);var S=y;return S._p=new Promise(function(N,L){S.onload=N,S.onerror=L}),Zn(y,"link",s),i.state.loading|=4,Wr(y,l.precedence,n),i.instance=y;case"script":return y=_a(l.src),(h=n.querySelector(_s(y)))?(i.instance=h,Sn(h),h):(s=l,(h=Oi.get(y))&&(s=b({},l),Od(s,h)),n=n.ownerDocument||n,h=n.createElement("script"),Sn(h),Zn(h,"link",s),n.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(s=i.instance,i.state.loading|=4,Wr(s,l.precedence,n));return i.instance}function Wr(n,i,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=s.length?s[s.length-1]:null,y=h,S=0;S<s.length;S++){var N=s[S];if(N.dataset.precedence===i)y=N;else if(y!==h)break}y?y.parentNode.insertBefore(n,y.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function Hd(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Od(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Qr=null;function E0(n,i,l){if(Qr===null){var s=new Map,h=Qr=new Map;h.set(l,s)}else h=Qr,s=h.get(l),s||(s=new Map,h.set(l,s));if(s.has(n))return s;for(s.set(n,null),l=l.getElementsByTagName(n),h=0;h<l.length;h++){var y=l[h];if(!(y[eo]||y[qe]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(i)||"";S=n+S;var N=s.get(S);N?N.push(y):s.set(S,[y])}}return s}function _0(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function jb(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function N0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function qb(n,i,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=Ea(s.href),y=i.querySelector(Es(h));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Zr.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=y,Sn(y);return}y=i.ownerDocument||i,s=w0(s),(h=Oi.get(h))&&Hd(s,h),y=y.createElement("link"),Sn(y);var S=y;S._p=new Promise(function(N,L){S.onload=N,S.onerror=L}),Zn(y,"link",s),l.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Zr.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var Gd=0;function $b(n,i){return n.stylesheets&&n.count===0&&tc(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var s=setTimeout(function(){if(n.stylesheets&&tc(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+i);0<n.imgBytes&&Gd===0&&(Gd=62500*_b());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&tc(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Gd?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(s),clearTimeout(h)}}:null}function Zr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ec=null;function tc(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ec=new Map,i.forEach(Yb,n),ec=null,Zr.call(n))}function Yb(n,i){if(!(i.state.loading&4)){var l=ec.get(n);if(l)var s=l.get(null);else{l=new Map,ec.set(n,l);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<h.length;y++){var S=h[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),s=S)}s&&l.set(null,s)}h=i.instance,S=h.getAttribute("data-precedence"),y=l.get(S)||s,y===s&&l.set(null,h),l.set(S,h),this.count++,s=Zr.bind(this),h.addEventListener("load",s),h.addEventListener("error",s),y?y.parentNode.insertBefore(h,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),i.state.loading|=4}}var Ns={$$typeof:se,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Jb(n,i,l,s,h,y,S,N,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dt(0),this.hiddenUpdates=dt(null),this.identifierPrefix=s,this.onUncaughtError=h,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function A0(n,i,l,s,h,y,S,N,L,X,me,Te){return n=new Jb(n,i,l,S,L,X,me,Te,N),i=1,y===!0&&(i|=24),y=Ci(3,null,null,i),n.current=y,y.stateNode=n,i=Su(),i.refCount++,n.pooledCache=i,i.refCount++,y.memoizedState={element:s,isDehydrated:l,cache:i},Eu(y),n}function M0(n){return n?(n=ia,n):ia}function k0(n,i,l,s,h,y){h=M0(h),s.context===null?s.context=h:s.pendingContext=h,s=Zo(i),s.payload={element:l},y=y===void 0?null:y,y!==null&&(s.callback=y),l=el(n,s,i),l!==null&&(xi(l,n,i),ls(l,n,i))}function R0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Vd(n,i){R0(n,i),(n=n.alternate)&&R0(n,i)}function I0(n){if(n.tag===13||n.tag===31){var i=El(n,67108864);i!==null&&xi(i,n,67108864),Vd(n,67108864)}}function z0(n){if(n.tag===13||n.tag===31){var i=Mi();i=Hn(i);var l=El(n,i);l!==null&&xi(l,n,i),Vd(n,i)}}var nc=!0;function Kb(n,i,l,s){var h=V.T;V.T=null;var y=Ce.p;try{Ce.p=2,jd(n,i,l,s)}finally{Ce.p=y,V.T=h}}function Xb(n,i,l,s){var h=V.T;V.T=null;var y=Ce.p;try{Ce.p=8,jd(n,i,l,s)}finally{Ce.p=y,V.T=h}}function jd(n,i,l,s){if(nc){var h=qd(s);if(h===null)kd(n,i,s,ic,l),L0(n,s);else if(Qb(h,n,i,l,s))s.stopPropagation();else if(L0(n,s),i&4&&-1<Wb.indexOf(n)){for(;h!==null;){var y=Oo(h);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Nt(y.pendingLanes);if(S!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var L=1<<31-ze(S);N.entanglements[1]|=L,S&=~L}so(y),(nn&6)===0&&(Br=Ee()+500,Ss(0))}}break;case 31:case 13:N=El(y,2),N!==null&&xi(N,y,2),Or(),Vd(y,2)}if(y=qd(s),y===null&&kd(n,i,s,ic,l),y===h)break;h=y}h!==null&&s.stopPropagation()}else kd(n,i,s,null,l)}}function qd(n){return n=gt(n),$d(n)}var ic=null;function $d(n){if(ic=null,n=mo(n),n!==null){var i=u(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=p(i),n!==null)return n;n=null}else if(l===31){if(n=g(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ic=n,null}function D0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case Ne:return 2;case ue:return 8;case Ve:case w:return 32;case M:return 268435456;default:return 32}default:return 32}}var Yd=!1,dl=null,fl=null,pl=null,As=new Map,Ms=new Map,hl=[],Wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L0(n,i){switch(n){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":As.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(i.pointerId)}}function ks(n,i,l,s,h,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:l,eventSystemFlags:s,nativeEvent:y,targetContainers:[h]},i!==null&&(i=Oo(i),i!==null&&I0(i)),n):(n.eventSystemFlags|=s,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function Qb(n,i,l,s,h){switch(i){case"focusin":return dl=ks(dl,n,i,l,s,h),!0;case"dragenter":return fl=ks(fl,n,i,l,s,h),!0;case"mouseover":return pl=ks(pl,n,i,l,s,h),!0;case"pointerover":var y=h.pointerId;return As.set(y,ks(As.get(y)||null,n,i,l,s,h)),!0;case"gotpointercapture":return y=h.pointerId,Ms.set(y,ks(Ms.get(y)||null,n,i,l,s,h)),!0}return!1}function U0(n){var i=mo(n.target);if(i!==null){var l=u(i);if(l!==null){if(i=l.tag,i===13){if(i=p(l),i!==null){n.blockedOn=i,bi(n.priority,function(){z0(l)});return}}else if(i===31){if(i=g(l),i!==null){n.blockedOn=i,bi(n.priority,function(){z0(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function oc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=qd(n.nativeEvent);if(l===null){l=n.nativeEvent;var s=new l.constructor(l.type,l);Tt=s,l.target.dispatchEvent(s),Tt=null}else return i=Oo(l),i!==null&&I0(i),n.blockedOn=l,!1;i.shift()}return!0}function F0(n,i,l){oc(n)&&l.delete(i)}function Zb(){Yd=!1,dl!==null&&oc(dl)&&(dl=null),fl!==null&&oc(fl)&&(fl=null),pl!==null&&oc(pl)&&(pl=null),As.forEach(F0),Ms.forEach(F0)}function lc(n,i){n.blockedOn===i&&(n.blockedOn=null,Yd||(Yd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zb)))}var ac=null;function P0(n){ac!==n&&(ac=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ac===n&&(ac=null);for(var i=0;i<n.length;i+=3){var l=n[i],s=n[i+1],h=n[i+2];if(typeof s!="function"){if($d(s||l)===null)continue;break}var y=Oo(l);y!==null&&(n.splice(i,3),i-=3,qu(y,{pending:!0,data:h,method:l.method,action:s},s,h))}}))}function Na(n){function i(L){return lc(L,n)}dl!==null&&lc(dl,n),fl!==null&&lc(fl,n),pl!==null&&lc(pl,n),As.forEach(i),Ms.forEach(i);for(var l=0;l<hl.length;l++){var s=hl[l];s.blockedOn===n&&(s.blockedOn=null)}for(;0<hl.length&&(l=hl[0],l.blockedOn===null);)U0(l),l.blockedOn===null&&hl.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var h=l[s],y=l[s+1],S=h[St]||null;if(typeof y=="function")S||P0(l);else if(S){var N=null;if(y&&y.hasAttribute("formAction")){if(h=y,S=y[St]||null)N=S.formAction;else if($d(h)!==null)continue}else N=S.action;typeof N=="function"?l[s+1]=N:(l.splice(s,3),s-=3),P0(l)}}}function B0(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Jd(n){this._internalRoot=n}sc.prototype.render=Jd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,s=Mi();k0(l,s,n,i,null,null)},sc.prototype.unmount=Jd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;k0(n.current,2,null,n,null,null),Or(),i[Ft]=null}};function sc(n){this._internalRoot=n}sc.prototype.unstable_scheduleHydration=function(n){if(n){var i=ai();n={blockedOn:null,target:n,priority:i};for(var l=0;l<hl.length&&i!==0&&i<hl[l].priority;l++);hl.splice(l,0,n),l===0&&U0(n)}};var H0=t.version;if(H0!=="19.2.3")throw Error(a(527,H0,"19.2.3"));Ce.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=m(i),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var e1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{$=rc.inject(e1),he=rc}catch{}}return Is.createRoot=function(n,i){if(!r(n))throw Error(a(299));var l=!1,s="",h=Yh,y=Jh,S=Kh;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=A0(n,1,!1,null,null,l,s,null,h,y,S,B0),n[Ft]=i.current,Md(n),new Jd(i)},Is.hydrateRoot=function(n,i,l){if(!r(n))throw Error(a(299));var s=!1,h="",y=Yh,S=Jh,N=Kh,L=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),i=A0(n,1,!0,i,l??null,s,h,L,y,S,N,B0),i.context=M0(null),l=i.current,s=Mi(),s=Hn(s),h=Zo(s),h.callback=null,el(l,h,s),l=s,i.current.lanes=l,mt(i,l),so(i),n[Ft]=i.current,Md(n),new sc(i)},Is.version="19.2.3",Is}var X0;function u1(){if(X0)return Wd.exports;X0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wd.exports=c1(),Wd.exports}var d1=u1();const f1=Ky(d1),p1="modulepreload",h1=function(e){return"/"+e},W0={},df=function(t,o,a){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");r=v(o.map(m=>{if(m=h1(m),m in W0)return;W0[m]=!0;const x=m.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":p1,x||(T.as="script"),T.crossOrigin="",T.href=m,g&&T.setAttribute("nonce",g),document.head.appendChild(T),x)return new Promise((A,E)=>{T.addEventListener("load",A),T.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return r.then(p=>{for(const g of p||[])g.status==="rejected"&&u(g.reason);return t().catch(u)})};const m1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,a)=>a?a.toUpperCase():o.toLowerCase()),Q0=e=>{const t=g1(e);return t.charAt(0).toUpperCase()+t.slice(1)},Xy=(...e)=>e.filter((t,o,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===o).join(" ").trim(),y1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var v1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x1=Q.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:r="",children:u,iconNode:p,...g},v)=>Q.createElement("svg",{ref:v,...v1,width:t,height:t,stroke:e,strokeWidth:a?Number(o)*24/Number(t):o,className:Xy("lucide",r),...!u&&!y1(g)&&{"aria-hidden":"true"},...g},[...p.map(([m,x])=>Q.createElement(m,x)),...Array.isArray(u)?u:[u]]));const rt=(e,t)=>{const o=Q.forwardRef(({className:a,...r},u)=>Q.createElement(x1,{ref:u,iconNode:t,className:Xy(`lucide-${m1(Q0(e))}`,`lucide-${e}`,a),...r}));return o.displayName=Q0(e),o};const b1=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Z0=rt("align-vertical-justify-center",b1);const S1=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],T1=rt("align-vertical-justify-end",S1);const w1=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],C1=rt("align-vertical-justify-start",w1);const E1=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],tf=rt("bold",E1);const _1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],N1=rt("check",_1);const A1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qs=rt("chevron-down",A1);const M1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ff=rt("chevron-up",M1);const k1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],R1=rt("circle-alert",k1);const I1=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],z1=rt("clipboard",I1);const D1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],L1=rt("copy",D1);const U1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],F1=rt("disc",U1);const P1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],B1=rt("download",P1);const H1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fs=rt("eye-off",H1);const O1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ps=rt("eye",O1);const G1=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],V1=rt("fast-forward",G1);const j1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],q1=rt("file-down",j1);const $1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ac=rt("file-text",$1);const Y1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Wy=rt("film",Y1);const J1=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],K1=rt("folder",J1);const X1=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],cc=rt("grip-horizontal",X1);const W1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],eg=rt("image",W1);const Q1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Z1=rt("info",Q1);const eS=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],nf=rt("italic",eS);const tS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],nS=rt("key",tS);const iS=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Mc=rt("keyboard",iS);const oS=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],kc=rt("list-music",oS);const lS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tg=rt("loader-circle",lS);const aS=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Vs=rt("maximize",aS);const sS=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],ng=rt("minimize",sS);const rS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Ra=rt("music",rS);const cS=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],uS=rt("palette",cS);const dS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],fS=rt("panels-top-left",dS);const pS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Qy=rt("pause",pS);const hS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],pf=rt("play",hS);const mS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zy=rt("plus",mS);const gS=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],yS=rt("redo-2",gS);const vS=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],xS=rt("repeat-1",vS);const bS=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ig=rt("repeat",bS);const SS=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],TS=rt("rewind",SS);const wS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],hf=rt("rotate-ccw",wS);const CS=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],ES=rt("scissors",CS);const _S=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],NS=rt("search",_S);const AS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xc=rt("settings",AS);const MS=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],kS=rt("shuffle",MS);const RS=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],IS=rt("skip-back",RS);const zS=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],DS=rt("skip-forward",zS);const LS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],mf=rt("sparkles",LS);const US=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],FS=rt("split",US);const PS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],gf=rt("square",PS);const BS=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],HS=rt("strikethrough",BS);const OS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],La=rt("trash-2",OS);const GS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],VS=rt("triangle-alert",GS);const jS=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],yl=rt("type",jS);const qS=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],$S=rt("underline",qS);const YS=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],JS=rt("undo-2",YS);const KS=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],uo=rt("upload",KS);const XS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],WS=rt("user",XS);const QS=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],js=rt("video",QS);const ZS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],gl=rt("volume-2",ZS);const eT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Aa=rt("volume-x",eT);const tT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ri=rt("x",tT);const nT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],iT=rt("zoom-in",nT);const oT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],lT=rt("zoom-out",oT);var ei=(e=>(e.PLAYER="PLAYER",e.EDITOR="EDITOR",e))(ei||{});const jf=e=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return e.replace(t,"$1$2")},Bs=e=>{if(!e)return 0;const o=e.replace(",",".").trim().split(":");let a=0;return o.length===3?(a+=parseInt(o[0],10)*3600,a+=parseInt(o[1],10)*60,a+=parseFloat(o[2])):o.length===2?(a+=parseInt(o[0],10)*60,a+=parseFloat(o[1])):o.length===1&&(a+=parseFloat(o[0])),isNaN(a)?0:a},co=e=>{const t=Math.floor(e/60),o=Math.floor(e%60);return`${t}:${o.toString().padStart(2,"0")}`},Ua=e=>{const t=e.split(`
`),o=[],a=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(u=>{const p=[...u.matchAll(a)];if(p.length>0){let g=u.replace(a,"").trim();g=g.replace(/\\n/g,`
`);const v=[...g.matchAll(r)];let m,x=g.replace(r,"").replace(/  +/g," ").trim();if(v.length>0){m=[];for(let b=0;b<v.length;b++){const T=v[b],A=parseInt(T[1],10),E=parseInt(T[2],10),j=T[4];let I=A*60+E;j&&(I+=parseInt(j,10)/(j.length===3?1e3:100));const Y=(T.index||0)+T[0].length,de=b<v.length-1?v[b+1].index:g.length,se=g.substring(Y,de);if(se){const pe=se.split(`
`);pe.forEach((Fe,_e)=>{Fe&&m.push({text:Fe,startTime:I,endTime:0}),_e<pe.length-1&&m.push({text:`
`,startTime:I,endTime:0})})}}for(let b=0;b<m.length;b++)b<m.length-1?m[b].endTime=m[b+1].startTime:m[b].endTime=m[b].startTime+.5}p.forEach(b=>{const T=parseInt(b[1],10),A=parseInt(b[2],10),E=b[4];let j=T*60+A;E&&(E.length===2?j+=parseInt(E,10)/100:(E.length,j+=parseInt(E,10)/1e3)),o.push({time:j,text:x,words:m})})}}),o.sort((u,p)=>u.time-p.time)},Fa=e=>{const o=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),a=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,u=p=>{const g=p.match(r);if(g){const v=parseInt(g[1],10),m=parseInt(g[2],10),x=parseInt(g[3],10),b=parseInt(g[4],10);return v*3600+m*60+x+b/1e3}return null};return o.forEach(p=>{const g=p.split(`
`);if(g.length>=3){const v=g[1],x=g.slice(2).join(" ").trim(),b=jf(x),T=v.split(" --> ");if(T.length>=2){const A=u(T[0]),E=u(T[1]);A!==null&&b&&a.push({time:A,text:b,endTime:E!==null?E:void 0})}}}),a},qs=e=>{const t=[];try{const a=new DOMParser().parseFromString(e,"text/xml"),u=Array.from(a.getElementsByTagName("*")).filter(v=>v.localName==="p"),p=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Bs(m)},g=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<u.length;v++){const m=u[v],x=g(m,"begin"),b=g(m,"end"),T=jf(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=p(x),E=p(b),j=[],Y=Array.from(m.getElementsByTagName("*")).filter(de=>de.localName==="span");for(let de=0;de<Y.length;de++){const se=Y[de],pe=g(se,"begin"),Fe=g(se,"end"),_e=se.textContent?.replace(/\s+/g," ");if(pe&&Fe&&_e&&_e.length>0){const Se=p(pe),et=p(Fe);Se!==void 0&&et!==void 0&&j.push({text:_e,startTime:Se,endTime:et})}}A!==void 0&&t.push({time:A,text:T,endTime:E,words:j.length>0?j:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,a)=>o.time-a.time)},aT=e=>{try{const t=JSON.parse(e);if(Array.isArray(t)&&t.every(a=>typeof a=="object"&&a!==null&&typeof a.time=="number"&&typeof a.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},$s=e=>{const o=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`),a=[],r=/(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})/,u=g=>{const v=g.match(r);if(v){const m=v[1]?parseInt(v[1].replace(":",""),10):0,x=parseInt(v[2],10),b=parseInt(v[3],10),T=parseInt(v[4],10);return m*3600+x*60+b+T/1e3}return null};let p=0;for(o[0]&&o[0].startsWith("WEBVTT")&&(p=1);p<o.length;){const g=o[p].trim();if(g.includes("-->")){const v=g.split("-->");if(v.length>=2){const m=v[0].trim(),x=v[1].trim().split(" ")[0],b=u(m),T=u(x);if(b!==null){p++;let A=[];for(;p<o.length;){const E=o[p].trim();if(E===""||E.includes("-->"))break;A.push(o[p]),p++}if(p<o.length&&o[p].includes("-->"),A.length>0){const E=A.join(" ").trim(),j=/<(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})>/g;let I;const Y=[...E.matchAll(j)];if(Y.length>0){I=[],Y.forEach((pe,Fe)=>{const _e=pe[1]?parseInt(pe[1].replace(":",""),10):0,Se=parseInt(pe[2],10),et=parseInt(pe[3],10),Me=parseInt(pe[4],10),Ye=_e*3600+Se*60+et+Me/1e3,ct=(pe.index||0)+pe[0].length;let pt=E.length;Fe+1<Y.length&&(pt=Y[Fe+1].index||E.length);const ht=E.substring(ct,pt);if(Fe===0&&(pe.index||0)>0){const bt=E.substring(0,pe.index);bt.trim()&&I.push({text:bt.trim(),startTime:b,endTime:Ye})}ht&&I.push({text:ht,startTime:Ye,endTime:0})});for(let pe=0;pe<I.length;pe++)pe<I.length-1?I[pe].endTime=I[pe+1].startTime:I[pe].endTime=T!==null?T:I[pe].startTime+.5}const de=E.replace(/<[\d:.]+>/g,"").replace(/\s+/g," ").trim(),se=jf(de);a.push({time:b,text:se,endTime:T!==null?T:void 0,words:I&&I.length>0?I:void 0})}continue}}}p++}return a},sT=({toast:e,onRemove:t})=>{const[o,a]=Q.useState(!1);Q.useEffect(()=>{const g=setTimeout(()=>{r()},e.duration||500);return()=>clearTimeout(g)},[]);const r=()=>{a(!0),setTimeout(t,300)},u=()=>{switch(e.type){case"success":return d.jsx(N1,{size:18,className:"text-green-400"});case"error":return d.jsx(R1,{size:18,className:"text-red-400"});default:return d.jsx(Z1,{size:18,className:"text-blue-400"})}},p=()=>{switch(e.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return d.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${p()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[d.jsx("div",{className:"shrink-0",children:u()}),d.jsx("p",{className:"text-sm font-medium flex-1",children:e.message}),d.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(Ri,{size:16})})]})},rT=({toasts:e,removeToast:t})=>d.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>d.jsx("div",{className:"pointer-events-auto",children:d.jsx(sT,{toast:o,onRemove:()=>t(o.id)})},o.id))}),cT=({isOpen:e,message:t,onConfirm:o,onCancel:a,title:r="Confirm Action"})=>{const[u,p]=Q.useState(!1);return Q.useEffect(()=>{e?p(!0):setTimeout(()=>p(!1),300)},[e]),Q.useEffect(()=>{const g=v=>{e&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),a()))};return e&&window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}},[e,o,a]),!e&&!u?null:d.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${e?"opacity-100":"opacity-0"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),d.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${e?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:d.jsx(VS,{className:"text-orange-500",size:24})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),d.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),d.jsx("button",{onClick:a,className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(Ri,{size:20})})]})}),d.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[d.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),d.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},ev=Q.createContext(void 0),er=()=>{const e=Q.useContext(ev);if(!e)throw new Error("useUI must be used within a UIProvider");return e},uT=({children:e})=>{const[t,o]=Q.useState([]),a=Q.useCallback((b,T,A)=>{let E,j;typeof A=="number"?E=A:typeof A=="object"&&(E=A.duration,j=A.id);const I=j||Math.random().toString(36).substr(2,9);o(Y=>[...Y.filter(se=>se.id!==I),{id:I,type:b,message:T,duration:E}])},[]),r=Q.useCallback(b=>{o(T=>T.filter(A=>A.id!==b))},[]),u={success:(b,T)=>a("success",b,T),error:(b,T)=>a("error",b,T),info:(b,T)=>a("info",b,T)},[p,g]=Q.useState({isOpen:!1,message:"",title:"",resolve:null}),v=Q.useCallback((b,T="Confirm Action")=>new Promise(A=>{g({isOpen:!0,message:b,title:T,resolve:A})}),[]),m=Q.useCallback(()=>{p.resolve&&p.resolve(!0),g(b=>({...b,isOpen:!1,resolve:null}))},[p]),x=Q.useCallback(()=>{p.resolve&&p.resolve(!1),g(b=>({...b,isOpen:!1,resolve:null}))},[p]);return d.jsxs(ev.Provider,{value:{toast:u,confirm:v},children:[e,d.jsx(rT,{toasts:t,removeToast:r}),d.jsx(cT,{isOpen:p.isOpen,message:p.message,title:p.title,onConfirm:m,onCancel:x})]})},uc=e=>e>=150?.5:e>=100?1:e>=60?2:e>=40?5:e>=25?10:15,dT=(e,t)=>{const o=Math.floor(e/60),a=e%60;return t<1?`${o}:${a.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(a).toString().padStart(2,"0")}`},og=10,fT=50,an={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},pT=e=>new Promise(t=>{const o=URL.createObjectURL(e),a=document.createElement(e.type.startsWith("audio/")?"audio":"video");a.preload="metadata",a.onloadedmetadata=()=>{t(a.duration),URL.revokeObjectURL(o)},a.onerror=()=>{URL.revokeObjectURL(o),t(0)},a.src=o}),hT=({value:e,onChange:t})=>{const[o,a]=Q.useState(e.toString());Q.useEffect(()=>{const p=parseFloat(o);!isNaN(p)&&Math.abs(p-e)<.001||a(e.toString())},[e]);const r=()=>{const p=parseFloat(o);o===""||isNaN(p)?a(e.toString()):t(p)},u=p=>{const g=parseFloat(o),v=isNaN(g)?e:g,m=Math.round((v+p)*100)/100;m<.05||(t(m),a(m.toString()))};return d.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[d.jsx("button",{onClick:()=>u(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:d.jsx(Qs,{size:10})}),d.jsx("input",{type:"text",name:"speed-input","aria-label":"Speed Input",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:p=>{/^\d*\.?\d*$/.test(p.target.value)&&a(p.target.value)},onBlur:r,onKeyDown:p=>{p.stopPropagation(),p.key==="ArrowUp"&&(p.preventDefault(),u(.05)),p.key==="ArrowDown"&&(p.preventDefault(),u(-.05)),p.key==="Enter"&&p.currentTarget.blur()}}),d.jsx("button",{onClick:()=>u(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:d.jsx(ff,{size:10})})]})},mT=({slides:e,setSlides:t,currentTime:o,duration:a,lyrics:r,onSeek:u,onClose:p,renderConfig:g,setRenderConfig:v})=>{const{confirm:m,toast:x}=er(),b=Q.useRef(null),T=Q.useRef(null),A=Q.useRef(null),[E,j]=Q.useState(40),[I,Y]=Q.useState([]),[de,se]=Q.useState(null),[pe,Fe]=Q.useState([]),[_e,Se]=Q.useState(null),[et,Me]=Q.useState(!1),[Ye,ct]=Q.useState(null),[pt,ht]=Q.useState([{slides:e,selection:[]}]),[bt,It]=Q.useState(0),V=Q.useRef(!1),[Ce,ie]=Q.useState([]);Q.useEffect(()=>{if(V.current){V.current=!1;return}if(_e||et)return;const w=pt[bt],M={slides:e,selection:I};if(JSON.stringify(w)!==JSON.stringify(M)){const R=pt.slice(0,bt+1);R.push(M),R.length>fT?(R.shift(),ht(R)):(ht(R),It(bt+1))}},[e,I,pt,bt,_e,et]);const Et=bt>0,Xe=bt<pt.length-1,D=Q.useCallback(()=>{if(bt>0){const w=bt-1;It(w),V.current=!0,t(pt[w].slides),Y(pt[w].selection)}},[t,Y,pt,bt]),oe=Q.useCallback(()=>{if(bt<pt.length-1){const w=bt+1;It(w),V.current=!0,t(pt[w].slides),Y(pt[w].selection)}},[t,Y,pt,bt]),we=Math.max(0,...e.map(w=>w.endTime)),Be=Math.max(a,60,we),Je=Be*E,C=Q.useCallback(()=>{if(I.length===0)return;const w=e.filter(M=>I.includes(M.id));Fe(w),x.success(`Copied ${w.length} items`)},[I,e,x]),B=Q.useCallback(()=>{if(I.length===0)return;const w=e.filter(M=>I.includes(M.id));Fe(w),t(M=>M.filter(R=>!I.includes(R.id))),Y([]),x.success(`Cut ${w.length} items`)},[I,e,t,x]),ne=Q.useRef(e),ce=Q.useRef(E);Q.useEffect(()=>{ne.current=e,ce.current=E},[e,E]);const Ge=Q.useCallback(()=>{if(pe.length===0)return;const w=Math.min(...pe.map(G=>G.startTime)),M=o-w,R=pe.map(G=>({...G,id:Math.random().toString(36).substr(2,9),startTime:G.startTime+M,endTime:G.endTime+M}));t(G=>[...G,...R].sort(($,he)=>$.startTime-he.startTime)),Y(R.map(G=>G.id)),x.success(`Pasted ${R.length} items`)},[pe,o,t,x]),P=Q.useCallback(()=>{const w=e.filter($=>I.includes($.id)&&o>$.startTime&&o<$.endTime);if(w.length===0)return;let M=[];const R=[],G=[];w.forEach($=>{const he=o,re={...$,id:Math.random().toString(36).substr(2,9),endTime:he},ze=he-$.startTime,Ae={...$,id:Math.random().toString(36).substr(2,9),startTime:he,mediaStartOffset:($.mediaStartOffset||0)+ze};R.push($.id),M.push(re,Ae),G.push(Ae.id)}),t($=>[...$.filter(re=>!R.includes(re.id)),...M].sort((re,ze)=>re.startTime-ze.startTime)),Y(G),x.success(`Split ${w.length} items`)},[e,I,o,t,x]),Ue=async w=>{if(w.target.files&&w.target.files.length>0){const M=Array.from(w.target.files),R=M.every($=>$.type.startsWith("image/")),G=[];if(R){const $=M.length,he=o,ze=Math.max(0,a-he)/$,Ae=Math.max(3,ze);M.forEach((ke,_)=>{const ot=URL.createObjectURL(ke),xt=he+_*Ae,zt=xt+Ae;G.push({id:Math.random().toString(36).substr(2,9),url:ot,type:"image",startTime:xt,endTime:zt,name:ke.name,layer:0})})}else{let $=o;for(const he of M){const re=he.type.startsWith("image/")?"image":he.type.startsWith("video/")?"video":"audio";let ze=5;if(re!=="image"){const ke=await pT(he);ke>0&&(ze=ke)}const Ae=URL.createObjectURL(he);G.push({id:Math.random().toString(36).substr(2,9),url:Ae,type:re,startTime:$,endTime:$+ze,mediaDuration:re!=="image"?ze:void 0,name:he.name,isMuted:re==="video",volume:re==="video"||re==="audio"?1:void 0,layer:0}),$+=ze}}t($=>[...$,...G].sort((he,re)=>he.startTime-re.startTime)),w.target.value=""}},Re=w=>{t(M=>M.filter(R=>R.id!==w))},ye=async w=>{w.stopPropagation(),e.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},fe=(w,M,R)=>{if(w.stopPropagation(),w.preventDefault(),b.current?.focus(),w.shiftKey&&de){const Ae=e.findIndex(_=>_.id===de),ke=e.findIndex(_=>_.id===M);if(Ae!==-1&&ke!==-1){const _=Math.min(Ae,ke),ot=Math.max(Ae,ke),xt=e.slice(_,ot+1).map(zt=>zt.id);Y(zt=>{const Nt=new Set([...zt,...xt]);return Array.from(Nt)})}}else w.ctrlKey||w.metaKey?(Y(Ae=>Ae.includes(M)?Ae.filter(ke=>ke!==M):[...Ae,M]),se(M)):(I.includes(M)||Y([M]),se(M));const G=e.find(Ae=>Ae.id===M);if(!G)return;const $=I.includes(M),he=w.ctrlKey||w.metaKey||w.shiftKey;let re=[];if(!he&&!$)re=[M];else if(he){if(re=[M],(w.ctrlKey||w.metaKey)&&!$)re=[...I,M];else if((w.ctrlKey||w.metaKey)&&$){re=I.filter(Ae=>Ae!==M);return}}else re=I;const ze={};e.forEach(Ae=>{re.includes(Ae.id)&&(ze[Ae.id]={start:Ae.startTime,end:Ae.endTime})}),ze[M]||(ze[M]={start:G.startTime,end:G.endTime}),Se({id:M,type:R,startX:w.clientX,initialStart:G.startTime,initialEnd:G.endTime,initialMap:ze}),window.addEventListener("mousemove",ae),window.addEventListener("mouseup",Ee)},Pe=w=>{w.button===0&&(w.stopPropagation(),b.current?.focus(),Y([]),Me(!0),z(w.clientX),window.addEventListener("mousemove",je),window.addEventListener("mouseup",it))},Qe=w=>{if(w.button!==0)return;b.current?.focus();const M=w.clientX,R=w.clientY,G=A.current?.getBoundingClientRect();if(!G)return;const $=M-G.left,he=R-G.top;let re=!1;const ze=ke=>{const _=Math.sqrt(Math.pow(ke.clientX-M,2)+Math.pow(ke.clientY-R,2));if(!re&&_>5&&(re=!0,ct({x:$,y:he,w:0,h:0})),re&&A.current){const ot=A.current.getBoundingClientRect(),xt=ke.clientX-ot.left,zt=ke.clientY-ot.top;ct($t=>{if(!$t)return null;const Rn=xt-$,Hn=zt-he;return{x:Rn>0?$:xt,y:Hn>0?he:zt,w:Math.abs(Rn),h:Math.abs(Hn)}});const Nt=[],tt=ne.current,Jt=ce.current,ge=Math.min($,xt),De=Math.min(he,zt),dt=Math.abs(xt-$),mt=Math.abs(zt-he),st=ge+dt,Pt=De+mt;tt.forEach($t=>{const Rn=$t.startTime*Jt+96,Hn=$t.endTime*Jt+96;let An=0,ai=0;const bi=$t.layer||0;$t.type==="audio"?bi===0?(An=an.AUDIO_L1_TOP,ai=an.AUDIO_L1_TOP+an.AUDIO_L1_HEIGHT):(An=an.AUDIO_L2_TOP,ai=an.AUDIO_L2_TOP+an.AUDIO_L2_HEIGHT):bi===0?(An=an.VISUAL_L1_TOP,ai=an.VISUAL_L1_TOP+an.VISUAL_L1_HEIGHT):(An=an.VISUAL_L2_TOP,ai=an.VISUAL_L2_TOP+an.VISUAL_L2_HEIGHT);const Jn=ge<Hn&&st>Rn,qe=De<ai&&Pt>An;Jn&&qe&&Nt.push($t.id)}),Y(Nt)}},Ae=ke=>{re||(Y([]),z(ke.clientX)),ct(null),window.removeEventListener("mousemove",ze),window.removeEventListener("mouseup",Ae)};window.addEventListener("mousemove",ze),window.addEventListener("mouseup",Ae)},z=w=>{if(!A.current)return;const M=A.current.getBoundingClientRect(),R=w-M.left-96;let G=Math.max(0,Math.min(R/E,Be));G=Z(G),u(G)},je=w=>{z(w.clientX)},it=()=>{Me(!1),window.removeEventListener("mousemove",je),window.removeEventListener("mouseup",it)},U=w=>{const M=w.target;if(!(M.tagName==="INPUT"||M.tagName==="TEXTAREA"||M.isContentEditable)){if((w.ctrlKey||w.metaKey)&&w.key==="z"&&!w.shiftKey){w.preventDefault(),D();return}if((w.ctrlKey||w.metaKey)&&(w.key==="y"||w.key==="z"&&w.shiftKey)){w.preventDefault(),oe();return}if((w.ctrlKey||w.metaKey)&&w.key==="c"){w.preventDefault(),C();return}if((w.ctrlKey||w.metaKey)&&w.key==="x"){w.preventDefault(),B();return}if((w.ctrlKey||w.metaKey)&&w.key==="v"){w.preventDefault(),Ge();return}if(w.key.toLowerCase()==="x"&&!w.ctrlKey&&!w.metaKey||(w.ctrlKey||w.metaKey)&&w.key==="k"){w.preventDefault(),w.stopPropagation(),P();return}if((w.key==="Delete"||w.key==="Backspace")&&I.length>0&&(w.preventDefault(),t(R=>R.filter(G=>!I.includes(G.id))),Y([])),I.length>0&&(w.key==="ArrowLeft"||w.key==="ArrowRight")){w.preventDefault(),w.stopPropagation();const R=w.key==="ArrowRight"?.01:-.01,G=e.find($=>$.id===I[0]);if(G){const $=Math.max(0,G.startTime+R);u($)}t($=>$.map(re=>{if(I.includes(re.id)){const ze=re.endTime-re.startTime;let Ae=re.startTime+R;return Ae=Math.max(0,Ae),{...re,startTime:Ae,endTime:Ae+ze}}return re}).sort((re,ze)=>re.startTime-ze.startTime))}}},Z=(w,M=[])=>{const R=og/E,G=[0,a,o],$=uc(E),he=Math.round(w/$)*$;G.push(he),e.forEach(Ae=>{M.includes(Ae.id)||(G.push(Ae.startTime),G.push(Ae.endTime))}),r.forEach(Ae=>{G.push(Ae.time)});let re=w,ze=R;for(const Ae of G){const ke=Math.abs(Ae-w);ke<ze&&(ze=ke,re=Ae)}return re},ae=w=>{Se(M=>{if(!M)return null;const G=(w.clientX-M.startX)/E;let $=[];return t(he=>{if(M.type==="move"){const re=Object.keys(M.initialMap),ze=Object.values(M.initialMap),Ae=Math.min(...ze.map(mt=>mt.start)),ke=Math.max(...ze.map(mt=>mt.end)),_=M.initialMap[M.id],ot=[{type:"drag-start",initVal:_.start,ref:"start"},{type:"drag-end",initVal:_.end,ref:"end"},{type:"group-start",initVal:Ae,ref:"start"},{type:"group-end",initVal:ke,ref:"end"}],xt=og/E,zt=[0,a,o],Nt=uc(E);e.forEach(mt=>{re.includes(mt.id)||(zt.push(mt.startTime),zt.push(mt.endTime))}),r.forEach(mt=>{zt.push(mt.time)});let tt=G,Jt=xt,ge=!1,De=-1;ot.forEach(mt=>{const st=mt.initVal+G;for(const Rn of zt){const Hn=Math.abs(Rn-st);Hn<Jt&&(Jt=Hn,tt=Rn-mt.initVal,ge=!0,De=Rn)}const Pt=Math.round(st/Nt)*Nt,$t=Math.abs(Pt-st);$t<Jt&&(Jt=$t,tt=Pt-mt.initVal,ge=!0,De=Pt)});let dt=ge?tt:G;return ge&&($=[De]),Ae+dt<0&&(dt=-Ae,$=[0]),he.map(mt=>{const st=M.initialMap[mt.id];if(st){const Pt=st.end-st.start;let $t=mt.layer||0;const Rn=A.current?.getBoundingClientRect();if(Rn){const Hn=w.clientY-Rn.top,An=(ai,bi,Jn)=>ai>=bi-10&&ai<=bi+Jn+10;mt.type==="audio"?An(Hn,an.AUDIO_L1_TOP,an.AUDIO_L1_HEIGHT)?$t=0:An(Hn,an.AUDIO_L2_TOP,an.AUDIO_L2_HEIGHT)&&($t=1):An(Hn,an.VISUAL_L1_TOP,an.VISUAL_L1_HEIGHT)?$t=0:An(Hn,an.VISUAL_L2_TOP,an.VISUAL_L2_HEIGHT)&&($t=1)}return{...mt,startTime:st.start+dt,endTime:st.start+dt+Pt,layer:$t}}return mt})}else if(M.type==="resize-start"){let re=M.initialStart+G;const ze=Z(re,[M.id]);Math.abs(ze-re)>1e-4&&($=[ze]),re=ze;const Ae=.5,ke=M.initialEnd;return re=Math.max(0,Math.min(re,ke-Ae)),re===0&&($=[0]),he.map(_=>_.id!==M.id?_:{..._,startTime:re})}else{let re=M.initialEnd+G;const ze=Z(re,[M.id]);Math.abs(ze-re)>1e-4&&($=[ze]),re=ze;const Ae=.5,ke=M.initialStart;return re=Math.max(ke+Ae,re),he.map(_=>_.id!==M.id?_:{..._,endTime:re})}}),ie($),M})},Ee=w=>{_e&&_e.type==="move"&&Math.abs(w.clientX-_e.startX)<5&&!w.ctrlKey&&!w.metaKey&&!w.shiftKey&&Y([_e.id]),Se(null),ie([]),window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",Ee),t(M=>[...M].sort((R,G)=>R.startTime-G.startTime))},ve=()=>j(w=>Math.min(200,w+10)),Ne=()=>j(w=>Math.max(10,w-10)),ue=(w,M)=>{v(R=>{const G=R.layerVisibility?.[w]||{},$={...G,[M]:G[M]===!1};return{...R,layerVisibility:{...R.layerVisibility,[w]:$,...w==="visual"?{audio:R.layerVisibility?.audio||{}}:{visual:R.layerVisibility?.visual||{}}}}})},Ve=(w,M)=>g.layerVisibility?.[w]?.[M]!==!1;return d.jsxs("div",{ref:b,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:w=>w.currentTarget.focus(),onKeyDown:U,children:[d.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[d.jsx(Wy,{size:16,className:"text-purple-400"}),"Timeline"]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[d.jsx(Zy,{size:14})," Import Media",d.jsx("input",{type:"file",name:"import-media",id:"import-media",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:Ue})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:Ne,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:d.jsx(lT,{size:14})}),d.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[E,"px/s"]}),d.jsx("button",{onClick:ve,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:d.jsx(iT,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:D,disabled:!Et,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:d.jsx(JS,{size:14})}),d.jsx("button",{onClick:oe,disabled:!Xe,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:d.jsx(yS,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:C,disabled:I.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:d.jsx(L1,{size:14})}),d.jsx("button",{onClick:B,disabled:I.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:d.jsx(ES,{size:14})}),d.jsx("button",{onClick:Ge,disabled:pe.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:d.jsx(z1,{size:14})})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsx("div",{className:"flex items-center gap-1",children:d.jsx("button",{onClick:P,disabled:I.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:d.jsx(FS,{size:14})})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>{e.length>0&&I.length===e.length?Y([]):Y(e.map(w=>w.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),I.length===1&&d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[d.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),d.jsx("input",{type:"text",name:"duration-input","aria-label":"Slide Duration",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const w=e.find(M=>M.id===I[0]);return w?co(w.endTime-w.startTime):"00:00"})(),onBlur:w=>{const R=w.target.value.split(":");if(R.length===2){const $=parseInt(R[0])||0,he=parseInt(R[1])||0,re=$*60+he;re>0&&t(ze=>ze.map(Ae=>Ae.id===I[0]?{...Ae,endTime:Ae.startTime+re}:Ae))}const G=e.find($=>$.id===I[0]);G&&(w.target.value=co(G.endTime-G.startTime))},onKeyDown:w=>{w.key==="Enter"&&w.currentTarget.blur()}},I[0])]}),I.length===1&&(()=>{const w=e.find(M=>M.id===I[0]);return w&&(w.type==="video"||w.type==="audio")?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),d.jsxs("div",{className:"flex items-center gap-1 w-20",children:[d.jsx("button",{onClick:()=>{t(M=>M.map(R=>R.id===w.id?{...R,isMuted:!R.isMuted}:R))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:w.isMuted!==!1?"Unmute":"Mute",children:w.isMuted!==!1?d.jsx(Aa,{size:10}):d.jsx(gl,{size:10})}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",name:"volume-input","aria-label":"Volume Level",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:w.volume!==void 0?w.volume:1,onChange:M=>{const R=parseFloat(M.target.value);t(G=>G.map($=>$.id===w.id?{...$,volume:R,isMuted:R===0}:$))}})]}),d.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((w.volume||1)*100),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),d.jsx(hT,{value:w.playbackRate||1,onChange:M=>{t(R=>R.map(G=>G.id===w.id?{...G,playbackRate:M}:G))}})]})]}):null})()]})]}),d.jsxs("div",{className:"flex gap-2 shrink-0",children:[d.jsx("button",{onClick:ye,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:d.jsx(La,{size:14})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),d.jsx("button",{onClick:p,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:d.jsx(Ri,{size:14})})]})]}),d.jsx("div",{ref:T,onWheel:w=>{T.current&&w.shiftKey&&(w.preventDefault(),T.current.scrollLeft+=w.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:d.jsxs("div",{ref:A,className:"relative",style:{width:`${Je+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:Qe,children:[Ye&&d.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:Ye.x,top:Ye.y,width:Ye.w,height:Ye.h}}),Ce.map((w,M)=>d.jsx("div",{className:"absolute top-0 bottom-0 border-l border-yellow-400 z-[60] shadow-[0_0_8px_rgba(250,204,21,0.6)]",style:{left:w*E}},`snap-${M}`)),d.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const w=uc(E);return Array.from({length:Math.ceil(Je/(E*w))}).map((M,R)=>d.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:R*w*E}},R))})(),a>0&&d.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:a*E},children:d.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),d.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:Pe,children:[d.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),d.jsx("div",{className:"relative flex-1",children:(()=>{const w=uc(E);return Array.from({length:Math.ceil(Je/(E*w))}).map((M,R)=>{const G=R*w;return G>Be?null:d.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:G*E,width:w*E},children:dT(G,w)},R)})})()})]}),d.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*E}px)`,willChange:"transform"},children:d.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),d.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:an.VISUAL_L1_TOP,height:an.VISUAL_L1_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Visual 1"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),ue("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:Ve("visual",0)?d.jsx(Ps,{size:12}):d.jsx(Fs,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${Ve("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(w=>w.type!=="audio"&&(w.layer===0||w.layer===void 0)).map(w=>d.jsxs("div",{style:{left:w.startTime*E,width:Math.max(10,(w.endTime-w.startTime)*E)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${_e?.id===w.id||I.includes(w.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${I.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:M=>fe(M,w.id,"move"),children:[w.type==="video"?d.jsx("video",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):d.jsx("img",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:w.name}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:d.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:w.name})}),(_e?.id===w.id||I.includes(w.id))&&d.jsx("div",{className:"absolute top-0 left-0 bg-black/80 text-white text-[9px] px-1.5 py-0.5 rounded-br font-mono z-50 pointer-events-none",children:co(w.startTime)}),w.type==="video"&&w.mediaDuration&&w.endTime-w.startTime>w.mediaDuration+.1&&d.jsx("button",{onClick:M=>{M.stopPropagation(),t(R=>R.map(G=>G.id===w.id&&G.mediaDuration?{...G,endTime:G.startTime+G.mediaDuration}:G))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:d.jsx(hf,{size:10})}),w.type==="video"&&d.jsx("button",{onClick:M=>{M.stopPropagation(),t(R=>R.map(G=>G.id===w.id?{...G,isMuted:!G.isMuted}:G))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:w.isMuted!==!1?"Unmute":"Mute",children:w.isMuted!==!1?d.jsx(Aa,{size:10}):d.jsx(gl,{size:10})}),d.jsx("button",{onClick:M=>{M.stopPropagation(),Re(w.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:d.jsx(Ri,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-start"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-end"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})})]},w.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:an.VISUAL_L2_TOP,height:an.VISUAL_L2_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Visual 2"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),ue("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:Ve("visual",1)?d.jsx(Ps,{size:12}):d.jsx(Fs,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${Ve("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(w=>w.type!=="audio"&&w.layer===1).map(w=>d.jsxs("div",{style:{left:w.startTime*E,width:Math.max(10,(w.endTime-w.startTime)*E)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${_e?.id===w.id||I.includes(w.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${I.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:M=>fe(M,w.id,"move"),children:[w.type==="video"?d.jsx("video",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):d.jsx("img",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:w.name}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:d.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:w.name})}),(_e?.id===w.id||I.includes(w.id))&&d.jsx("div",{className:"absolute top-0 left-0 bg-black/80 text-white text-[9px] px-1.5 py-0.5 rounded-br font-mono z-50 pointer-events-none",children:co(w.startTime)}),w.type==="video"&&w.mediaDuration&&w.endTime-w.startTime>w.mediaDuration+.1&&d.jsx("button",{onClick:M=>{M.stopPropagation(),t(R=>R.map(G=>G.id===w.id&&G.mediaDuration?{...G,endTime:G.startTime+G.mediaDuration}:G))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:d.jsx(hf,{size:10})}),w.type==="video"&&d.jsx("button",{onClick:M=>{M.stopPropagation(),t(R=>R.map(G=>G.id===w.id?{...G,isMuted:!G.isMuted}:G))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:w.isMuted!==!1?d.jsx(Aa,{size:10}):d.jsx(gl,{size:10})}),d.jsx("button",{onClick:M=>{M.stopPropagation(),Re(w.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:d.jsx(Ri,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-start"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-end"),children:d.jsx(cc,{size:10,className:"text-white/70 rotate-90"})})]},w.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:an.LYRICS_TOP,height:an.LYRICS_HEIGHT},children:[d.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:d.jsx("span",{children:"Lyrics"})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((w,M)=>d.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:w.time*E},title:`${co(w.time)} - ${w.text}`,onClick:R=>{R.stopPropagation(),u(w.time)},children:[d.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:co(w.time)}),w.text]},M))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:an.AUDIO_L1_TOP,height:an.AUDIO_L1_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Audio 1"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),ue("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:Ve("audio",0)?d.jsx(Ps,{size:12}):d.jsx(Fs,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${Ve("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(w=>w.type==="audio"&&(w.layer===0||w.layer===void 0)).map(w=>d.jsxs("div",{style:{left:w.startTime*E,width:Math.max(10,(w.endTime-w.startTime)*E)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${_e?.id===w.id||I.includes(w.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${I.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:M=>fe(M,w.id,"move"),children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:d.jsx(gl,{size:16,className:"text-emerald-200"})}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:d.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:w.name})}),(_e?.id===w.id||I.includes(w.id))&&d.jsx("div",{className:"absolute top-0 left-0 bg-black/80 text-white text-[9px] px-1.5 py-0.5 rounded-br font-mono z-50 pointer-events-none",children:co(w.startTime)}),d.jsx("button",{onClick:M=>{M.stopPropagation(),t(R=>R.map(G=>G.id===w.id?{...G,isMuted:!G.isMuted}:G))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:w.isMuted===!0?"Unmute":"Mute",children:w.isMuted===!0?d.jsx(Aa,{size:10}):d.jsx(gl,{size:10})}),d.jsx("button",{onClick:M=>{M.stopPropagation(),Re(w.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:d.jsx(Ri,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-start")}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-end")})]},w.id))})]}),d.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:an.AUDIO_L2_TOP,height:an.AUDIO_L2_HEIGHT},children:[d.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[d.jsx("span",{children:"Audio 2"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),ue("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:Ve("audio",1)?d.jsx(Ps,{size:12}):d.jsx(Fs,{size:12,className:"text-zinc-600"})})]}),d.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${Ve("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:e.filter(w=>w.type==="audio"&&w.layer===1).map(w=>d.jsxs("div",{style:{left:w.startTime*E,width:Math.max(10,(w.endTime-w.startTime)*E)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${_e?.id===w.id||I.includes(w.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${I.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:M=>fe(M,w.id,"move"),children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:d.jsx(gl,{size:16,className:"text-emerald-200"})}),d.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:d.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:w.name})}),(_e?.id===w.id||I.includes(w.id))&&d.jsx("div",{className:"absolute top-0 left-0 bg-black/80 text-white text-[9px] px-1.5 py-0.5 rounded-br font-mono z-50 pointer-events-none",children:co(w.startTime)}),d.jsx("button",{onClick:M=>{M.stopPropagation(),t(R=>R.map(G=>G.id===w.id?{...G,isMuted:!G.isMuted}:G))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:w.isMuted===!0?"Unmute":"Mute",children:w.isMuted===!0?d.jsx(Aa,{size:10}):d.jsx(gl,{size:10})}),d.jsx("button",{onClick:M=>{M.stopPropagation(),Re(w.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:d.jsx(Ri,{size:10})}),d.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-start")}),d.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:M=>fe(M,w.id,"resize-end")})]},w.id))})]})]})})]})};var gT={};let yT,vT;function xT(){return{geminiUrl:yT,vertexUrl:vT}}function bT(e,t,o,a){var r,u;if(!e?.baseUrl){const p=xT();return t?(r=p.vertexUrl)!==null&&r!==void 0?r:o:(u=p.geminiUrl)!==null&&u!==void 0?u:a}return e.baseUrl}class Po{}function Ke(e,t){const o=/\{([^}]+)\}/g;return e.replace(o,(a,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const u=t[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(e,t,o){for(let u=0;u<t.length-1;u++){const p=t[u];if(p.endsWith("[]")){const g=p.slice(0,-2);if(!(g in e))if(Array.isArray(o))e[g]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${p}`);if(Array.isArray(e[g])){const v=e[g];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];f(x,t.slice(u+1),o[m])}else for(const m of v)f(m,t.slice(u+1),o)}return}else if(p.endsWith("[0]")){const g=p.slice(0,-3);g in e||(e[g]=[{}]);const v=e[g];f(v[0],t.slice(u+1),o);return}(!e[p]||typeof e[p]!="object")&&(e[p]={}),e=e[p]}const a=t[t.length-1],r=e[a];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(e,o):e[a]=o}function c(e,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let a=0;a<t.length;a++){if(typeof e!="object"||e===null)return o;const r=t[a];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in e){const p=e[u];return Array.isArray(p)?p.map(g=>c(g,t.slice(a+1),o)):o}else return o}else e=e[r]}return e}catch(a){if(a instanceof TypeError)return o;throw a}}function ST(e,t){for(const[o,a]of Object.entries(t)){const r=o.split("."),u=a.split("."),p=new Set;let g=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){g=v;break}if(g!==-1&&u.length>g)for(let v=g;v<u.length;v++){const m=u[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&p.add(m)}yf(e,r,u,0,p)}}function yf(e,t,o,a,r){if(a>=t.length||typeof e!="object"||e===null)return;const u=t[a];if(u.endsWith("[]")){const p=u.slice(0,-2),g=e;if(p in g&&Array.isArray(g[p]))for(const v of g[p])yf(v,t,o,a+1,r)}else if(u==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const p=e,g=Object.keys(p).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of g)v[m]=p[m];for(const[m,x]of Object.entries(v)){const b=[];for(const T of o.slice(a))T==="*"?b.push(m):b.push(T);f(p,b,x)}for(const m of g)delete p[m]}}else{const p=e;u in p&&yf(p[u],t,o,a+1,r)}}function qf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function TT(e){const t={},o=c(e,["operationName"]);o!=null&&f(t,["operationName"],o);const a=c(e,["resourceName"]);return a!=null&&f(t,["_url","resourceName"],a),t}function wT(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response","generateVideoResponse"]);return p!=null&&f(t,["response"],ET(p)),t}function CT(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],_T(p)),t}function ET(e){const t={},o=c(e,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>NT(p))),f(t,["generatedVideos"],u)}const a=c(e,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function _T(e){const t={},o=c(e,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>AT(p))),f(t,["generatedVideos"],u)}const a=c(e,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function NT(e){const t={},o=c(e,["video"]);return o!=null&&f(t,["video"],DT(o)),t}function AT(e){const t={},o=c(e,["_self"]);return o!=null&&f(t,["video"],LT(o)),t}function MT(e){const t={},o=c(e,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function kT(e){const t={},o=c(e,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function RT(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],IT(p)),t}function IT(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["parent"]);a!=null&&f(t,["parent"],a);const r=c(e,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function tv(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],zT(p)),t}function zT(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["parent"]);a!=null&&f(t,["parent"],a);const r=c(e,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function DT(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["uri"],o);const a=c(e,["encodedVideo"]);a!=null&&f(t,["videoBytes"],qf(a));const r=c(e,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function LT(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["uri"],o);const a=c(e,["bytesBase64Encoded"]);a!=null&&f(t,["videoBytes"],qf(a));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}var lg;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lg||(lg={}));var ag;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(ag||(ag={}));var sg;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(sg||(sg={}));var xn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(xn||(xn={}));var rg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(rg||(rg={}));var cg;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cg||(cg={}));var ug;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(ug||(ug={}));var dg;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dg||(dg={}));var fg;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(fg||(fg={}));var pg;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(pg||(pg={}));var hg;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hg||(hg={}));var mg;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(mg||(mg={}));var gg;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(gg||(gg={}));var yg;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(yg||(yg={}));var vg;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(vg||(vg={}));var xg;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xg||(xg={}));var bg;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bg||(bg={}));var Sg;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Sg||(Sg={}));var Tg;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tg||(Tg={}));var Rc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Rc||(Rc={}));var wg;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wg||(wg={}));var Cg;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Cg||(Cg={}));var Eg;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Eg||(Eg={}));var vf;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vf||(vf={}));var _g;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_g||(_g={}));var Ng;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Ng||(Ng={}));var Ag;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Ag||(Ag={}));var Mg;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Mg||(Mg={}));var kg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(kg||(kg={}));var Rg;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Rg||(Rg={}));var Ig;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Ig||(Ig={}));var zg;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zg||(zg={}));var Dg;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Dg||(Dg={}));var Lg;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Lg||(Lg={}));var Ug;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ug||(Ug={}));var Fg;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fg||(Fg={}));var Pg;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Pg||(Pg={}));var Bg;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Bg||(Bg={}));var Hg;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Hg||(Hg={}));var Og;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Og||(Og={}));var Gg;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Gg||(Gg={}));var Vg;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Vg||(Vg={}));var jg;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(jg||(jg={}));var qg;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(qg||(qg={}));var $g;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})($g||($g={}));var Yg;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Yg||(Yg={}));var Jg;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Jg||(Jg={}));var Kg;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Kg||(Kg={}));var Xg;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Xg||(Xg={}));var Wg;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Wg||(Wg={}));var Qg;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qg||(Qg={}));var Zg;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Zg||(Zg={}));var ey;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ey||(ey={}));var ty;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ty||(ty={}));var ny;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(ny||(ny={}));var Ia;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Ia||(Ia={}));class xf{constructor(t){const o={};for(const a of t.headers.entries())o[a[0]]=a[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class zs{get text(){var t,o,a,r,u,p,g,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const b=[];for(const T of(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)!==null&&v!==void 0?v:[]){for(const[A,E]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(E!==null||E!==void 0)&&b.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,a,r,u,p,g,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const b of(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(b))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,a,r,u,p,g,v;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,a,r,u,p,g,v,m;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,a,r,u,p,g,v,m;if(((r=(a=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(g=(p=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class iy{}class oy{}class UT{}class FT{}class PT{}class BT{}class ly{}class ay{}class sy{}class HT{}class Ic{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new Ic;let r;const u=t;return o?r=CT(u):r=wT(u),Object.assign(a,r),a}}class ry{}class cy{}class uy{}class dy{}class OT{}class GT{}class VT{}class $f{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new $f,u=RT(t);return Object.assign(a,u),a}}class jT{}class qT{}class $T{}class fy{}class YT{get text(){var t,o,a;let r="",u=!1;const p=[];for(const g of(a=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[v,m]of Object.entries(g))v!=="text"&&v!=="thought"&&m!==null&&p.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;u=!0,r+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var t,o,a;let r="";const u=[];for(const p of(a=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[g,v]of Object.entries(p))g!=="inlineData"&&v!==null&&u.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(r+=atob(p.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class JT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yf{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const a=new Yf,u=tv(t);return Object.assign(a,u),a}}function en(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function nv(e,t){const o=en(e,t);return o?o.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${o}`:o.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${o}`:o:""}function iv(e){return Array.isArray(e)?e.map(t=>zc(t)):[zc(e)]}function zc(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ov(e){const t=zc(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function lv(e){const t=zc(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function py(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function av(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>py(t)):[py(e)]}function bf(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function hy(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function my(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function li(e){if(e==null)throw new Error("ContentUnion is required");return bf(e)?e:{role:"user",parts:av(e)}}function Jf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const a=li(o);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(e.isVertexAI()){const o=li(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>li(o)):[li(t)]}function ji(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(hy(e)||my(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[li(e)]}const t=[],o=[],a=bf(e[0]);for(const r of e){const u=bf(r);if(u!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(r);else{if(hy(r)||my(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return a||t.push({role:"user",parts:av(o)}),t}function KT(e,t){e.includes("null")&&(t.nullable=!0);const o=e.filter(a=>a!=="null");if(o.length===1)t.type=Object.values(xn).includes(o[0].toUpperCase())?o[0].toUpperCase():xn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const a of o)t.anyOf.push({type:Object.values(xn).includes(a.toUpperCase())?a.toUpperCase():xn.TYPE_UNSPECIFIED})}}function Pa(e){const t={},o=["items"],a=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=e.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(t.nullable=!0,e=u[1]):u[1].type==="null"&&(t.nullable=!0,e=u[0])),e.type instanceof Array&&KT(e.type,t);for(const[p,g]of Object.entries(e))if(g!=null)if(p=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;t.type=Object.values(xn).includes(g.toUpperCase())?g.toUpperCase():xn.TYPE_UNSPECIFIED}else if(o.includes(p))t[p]=Pa(g);else if(a.includes(p)){const v=[];for(const m of g){if(m.type=="null"){t.nullable=!0;continue}v.push(Pa(m))}t[p]=v}else if(r.includes(p)){const v={};for(const[m,x]of Object.entries(g))v[m]=Pa(x);t[p]=v}else{if(p==="additionalProperties")continue;t[p]=g}return t}function Kf(e){return Pa(e)}function Xf(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Wf(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Va(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Pa(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Pa(t.response));return e}function ja(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of e)t.push(o);return t}function XT(e,t,o,a=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===a;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function Bo(e,t){if(typeof t!="string")throw new Error("name must be a string");return XT(e,t,"cachedContents")}function sv(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function vl(e){return qf(e)}function WT(e){return e!=null&&typeof e=="object"&&"name"in e}function QT(e){return e!=null&&typeof e=="object"&&"video"in e}function ZT(e){return e!=null&&typeof e=="object"&&"uri"in e}function rv(e){var t;let o;if(WT(e)&&(o=e.name),!(ZT(e)&&(o=e.uri,o===void 0))&&!(QT(e)&&(o=(t=e.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof e=="string"&&(o=e),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function cv(e,t){let o;return e.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function uv(e){for(const t of["models","tunedModels","publisherModels"])if(ew(e,t))return e[t];return[]}function ew(e,t){return e!==null&&typeof e=="object"&&t in e}function tw(e,t={}){const o=e,a={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(a.responseJsonSchema=o.outputSchema),t.behavior&&(a.behavior=t.behavior),{functionDeclarations:[a]}}function nw(e,t={}){const o=[],a=new Set;for(const r of e){const u=r.name;if(a.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);a.add(u);const p=tw(r,t);p.functionDeclarations&&o.push(...p.functionDeclarations)}return{functionDeclarations:o}}function dv(e,t){let o;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const a=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function iw(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function fv(e){if(typeof e!="object"||e===null)return{};const t=e,o=t.inlinedResponses;if(typeof o!="object"||o===null)return e;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let u=!1;for(const p of r){if(typeof p!="object"||p===null)continue;const v=p.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){u=!0;break}}return u&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function qa(e,t){const o=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function pv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function ow(e){const t={},o=c(e,["responsesFile"]);o!=null&&f(t,["fileName"],o);const a=c(e,["inlinedResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(p=>Pw(p))),f(t,["inlinedResponses"],u)}const r=c(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["inlinedEmbedContentResponses"],u)}return t}function lw(e){const t={},o=c(e,["predictionsFormat"]);o!=null&&f(t,["format"],o);const a=c(e,["gcsDestination","outputUriPrefix"]);a!=null&&f(t,["gcsUri"],a);const r=c(e,["bigqueryDestination","outputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function aw(e){const t={},o=c(e,["format"]);o!=null&&f(t,["predictionsFormat"],o);const a=c(e,["gcsUri"]);a!=null&&f(t,["gcsDestination","outputUriPrefix"],a);const r=c(e,["bigqueryUri"]);if(r!=null&&f(t,["bigqueryDestination","outputUri"],r),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function bc(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata","displayName"]);a!=null&&f(t,["displayName"],a);const r=c(e,["metadata","state"]);r!=null&&f(t,["state"],pv(r));const u=c(e,["metadata","createTime"]);u!=null&&f(t,["createTime"],u);const p=c(e,["metadata","endTime"]);p!=null&&f(t,["endTime"],p);const g=c(e,["metadata","updateTime"]);g!=null&&f(t,["updateTime"],g);const v=c(e,["metadata","model"]);v!=null&&f(t,["model"],v);const m=c(e,["metadata","output"]);return m!=null&&f(t,["dest"],ow(fv(m))),t}function Sf(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["displayName"]);a!=null&&f(t,["displayName"],a);const r=c(e,["state"]);r!=null&&f(t,["state"],pv(r));const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["createTime"]);p!=null&&f(t,["createTime"],p);const g=c(e,["startTime"]);g!=null&&f(t,["startTime"],g);const v=c(e,["endTime"]);v!=null&&f(t,["endTime"],v);const m=c(e,["updateTime"]);m!=null&&f(t,["updateTime"],m);const x=c(e,["model"]);x!=null&&f(t,["model"],x);const b=c(e,["inputConfig"]);b!=null&&f(t,["src"],sw(b));const T=c(e,["outputConfig"]);T!=null&&f(t,["dest"],lw(fv(T)));const A=c(e,["completionStats"]);return A!=null&&f(t,["completionStats"],A),t}function sw(e){const t={},o=c(e,["instancesFormat"]);o!=null&&f(t,["format"],o);const a=c(e,["gcsSource","uris"]);a!=null&&f(t,["gcsUri"],a);const r=c(e,["bigquerySource","inputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function rw(e,t){const o={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=c(t,["fileName"]);a!=null&&f(o,["fileName"],a);const r=c(t,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>Fw(e,p))),f(o,["requests","requests"],u)}return o}function cw(e){const t={},o=c(e,["format"]);o!=null&&f(t,["instancesFormat"],o);const a=c(e,["gcsUri"]);a!=null&&f(t,["gcsSource","uris"],a);const r=c(e,["bigqueryUri"]);if(r!=null&&f(t,["bigquerySource","inputUri"],r),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function uw(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function dw(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],qa(e,a)),o}function fw(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],qa(e,a)),o}function pw(e){const t={},o=c(e,["content"]);o!=null&&f(t,["content"],o);const a=c(e,["citationMetadata"]);a!=null&&f(t,["citationMetadata"],hw(a));const r=c(e,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const u=c(e,["finishReason"]);u!=null&&f(t,["finishReason"],u);const p=c(e,["avgLogprobs"]);p!=null&&f(t,["avgLogprobs"],p);const g=c(e,["groundingMetadata"]);g!=null&&f(t,["groundingMetadata"],g);const v=c(e,["index"]);v!=null&&f(t,["index"],v);const m=c(e,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(e,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),f(t,["safetyRatings"],T)}const b=c(e,["urlContextMetadata"]);return b!=null&&f(t,["urlContextMetadata"],b),t}function hw(e){const t={},o=c(e,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["citations"],a)}return t}function hv(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>qw(u))),f(t,["parts"],r)}const a=c(e,["role"]);return a!=null&&f(t,["role"],a),t}function mw(e,t){const o={},a=c(e,["displayName"]);if(t!==void 0&&a!=null&&f(t,["batch","displayName"],a),c(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function gw(e,t){const o={},a=c(e,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=c(e,["dest"]);return t!==void 0&&r!=null&&f(t,["outputConfig"],aw(iw(r))),o}function gy(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],rw(e,dv(e,r)));const u=c(t,["config"]);return u!=null&&mw(u,o),o}function yw(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["model"],en(e,a));const r=c(t,["src"]);r!=null&&f(o,["inputConfig"],cw(dv(e,r)));const u=c(t,["config"]);return u!=null&&gw(u,o),o}function vw(e,t){const o={},a=c(e,["displayName"]);return t!==void 0&&a!=null&&f(t,["batch","displayName"],a),o}function xw(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],_w(e,r));const u=c(t,["config"]);return u!=null&&vw(u,o),o}function bw(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],qa(e,a)),o}function Sw(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],qa(e,a)),o}function Tw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["name"]);a!=null&&f(t,["name"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);return u!=null&&f(t,["error"],u),t}function ww(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["name"]);a!=null&&f(t,["name"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);return u!=null&&f(t,["error"],u),t}function Cw(e,t){const o={},a=c(t,["contents"]);if(a!=null){let u=Jf(e,a);Array.isArray(u)&&(u=u.map(p=>p)),f(o,["requests[]","request","content"],u)}const r=c(t,["config"]);return r!=null&&(f(o,["_self"],Ew(r,o)),ST(o,{"requests[].*":"requests[].request.*"})),o}function Ew(e,t){const o={},a=c(e,["taskType"]);t!==void 0&&a!=null&&f(t,["requests[]","taskType"],a);const r=c(e,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const u=c(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&f(t,["requests[]","outputDimensionality"],u),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function _w(e,t){const o={},a=c(t,["fileName"]);a!=null&&f(o,["file_name"],a);const r=c(t,["inlinedRequests"]);return r!=null&&f(o,["requests"],Cw(e,r)),o}function Nw(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Aw(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const a=c(e,["args"]);a!=null&&f(t,["args"],a);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Mw(e){const t={},o=c(e,["mode"]);o!=null&&f(t,["mode"],o);const a=c(e,["allowedFunctionNames"]);if(a!=null&&f(t,["allowedFunctionNames"],a),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function kw(e,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],hv(li(r)));const u=c(t,["temperature"]);u!=null&&f(a,["temperature"],u);const p=c(t,["topP"]);p!=null&&f(a,["topP"],p);const g=c(t,["topK"]);g!=null&&f(a,["topK"],g);const v=c(t,["candidateCount"]);v!=null&&f(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&f(a,["presencePenalty"],A);const E=c(t,["frequencyPenalty"]);E!=null&&f(a,["frequencyPenalty"],E);const j=c(t,["seed"]);j!=null&&f(a,["seed"],j);const I=c(t,["responseMimeType"]);I!=null&&f(a,["responseMimeType"],I);const Y=c(t,["responseSchema"]);Y!=null&&f(a,["responseSchema"],Kf(Y));const de=c(t,["responseJsonSchema"]);if(de!=null&&f(a,["responseJsonSchema"],de),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=c(t,["safetySettings"]);if(o!==void 0&&se!=null){let ht=se;Array.isArray(ht)&&(ht=ht.map(bt=>$w(bt))),f(o,["safetySettings"],ht)}const pe=c(t,["tools"]);if(o!==void 0&&pe!=null){let ht=ja(pe);Array.isArray(ht)&&(ht=ht.map(bt=>Jw(Va(bt)))),f(o,["tools"],ht)}const Fe=c(t,["toolConfig"]);if(o!==void 0&&Fe!=null&&f(o,["toolConfig"],Yw(Fe)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _e=c(t,["cachedContent"]);o!==void 0&&_e!=null&&f(o,["cachedContent"],Bo(e,_e));const Se=c(t,["responseModalities"]);Se!=null&&f(a,["responseModalities"],Se);const et=c(t,["mediaResolution"]);et!=null&&f(a,["mediaResolution"],et);const Me=c(t,["speechConfig"]);if(Me!=null&&f(a,["speechConfig"],Xf(Me)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ye=c(t,["thinkingConfig"]);Ye!=null&&f(a,["thinkingConfig"],Ye);const ct=c(t,["imageConfig"]);ct!=null&&f(a,["imageConfig"],Uw(ct));const pt=c(t,["enableEnhancedCivicAnswers"]);return pt!=null&&f(a,["enableEnhancedCivicAnswers"],pt),a}function Rw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(m=>pw(m))),f(t,["candidates"],v)}const r=c(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const u=c(e,["promptFeedback"]);u!=null&&f(t,["promptFeedback"],u);const p=c(e,["responseId"]);p!=null&&f(t,["responseId"],p);const g=c(e,["usageMetadata"]);return g!=null&&f(t,["usageMetadata"],g),t}function Iw(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],qa(e,a)),o}function zw(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],qa(e,a)),o}function Dw(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function Lw(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function Uw(e){const t={},o=c(e,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const a=c(e,["imageSize"]);if(a!=null&&f(t,["imageSize"],a),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Fw(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["request","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let g=ji(r);Array.isArray(g)&&(g=g.map(v=>hv(v))),f(o,["request","contents"],g)}const u=c(t,["metadata"]);u!=null&&f(o,["metadata"],u);const p=c(t,["config"]);return p!=null&&f(o,["request","generationConfig"],kw(e,p,c(o,["request"],{}))),o}function Pw(e){const t={},o=c(e,["response"]);o!=null&&f(t,["response"],Rw(o));const a=c(e,["error"]);return a!=null&&f(t,["error"],a),t}function Bw(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);if(t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),c(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Hw(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const u=c(e,["filter"]);return t!==void 0&&u!=null&&f(t,["_query","filter"],u),o}function Ow(e){const t={},o=c(e,["config"]);return o!=null&&Bw(o,t),t}function Gw(e){const t={},o=c(e,["config"]);return o!=null&&Hw(o,t),t}function Vw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>bc(p))),f(t,["batchJobs"],u)}return t}function jw(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>Sf(p))),f(t,["batchJobs"],u)}return t}function qw(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const a=c(e,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],Nw(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],Aw(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],uw(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function $w(e){const t={},o=c(e,["category"]);if(o!=null&&f(t,["category"],o),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(e,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function Yw(e){const t={},o=c(e,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],Mw(o));const a=c(e,["retrievalConfig"]);return a!=null&&f(t,["retrievalConfig"],a),t}function Jw(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(e,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],Dw(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],Lw(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}var Fo;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Fo||(Fo={}));class ql{constructor(t,o,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,a,r)}init(t,o,a){var r,u;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let p={config:{}};!a||Object.keys(a).length===0?p={config:{}}:typeof a=="object"?p=Object.assign({},a):p=a,p.config&&(p.config.pageToken=o.nextPageToken),this.paramsInternal=p,this.pageInternalSize=(u=(r=p.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class Kw extends Po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ql(Fo.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=gy(this.apiClient,t),a=o._url,r=Ke("{model}:batchGenerateContent",a),g=o.batch.inputConfig.requests,v=g.requests,m=[];for(const x of v){const b=Object.assign({},x);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const A=b.request;A.systemInstruction=T,b.request=A}m.push(b)}return g.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const a=o?Object.assign({},o):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const u=this.getGcsUri(t),p=this.getBigqueryUri(t);if(u)u.endsWith(".jsonl")?a.dest=`${u.slice(0,-6)}/dest`:a.dest=`${u}_dest_${r}`;else if(p)a.dest=`${p}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=yw(this.apiClient,t);return g=Ke("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>Sf(x))}else{const m=gy(this.apiClient,t);return g=Ke("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>bc(x))}}async createEmbeddingsInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=xw(this.apiClient,t);return u=Ke("{model}:asyncBatchEmbedContent",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>bc(v))}}async get(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=zw(this.apiClient,t);return g=Ke("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>Sf(x))}else{const m=Iw(this.apiClient,t);return g=Ke("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>bc(x))}}async cancel(t){var o,a,r,u;let p="",g={};if(this.apiClient.isVertexAI()){const v=fw(this.apiClient,t);p=Ke("batchPredictionJobs/{name}:cancel",v._url),g=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const v=dw(this.apiClient,t);p=Ke("batches/{name}:cancel",v._url),g=v._query,delete v._url,delete v._query,await this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Gw(t);return g=Ke("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=jw(x),T=new fy;return Object.assign(T,b),T})}else{const m=Ow(t);return g=Ke("batches",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=Vw(x),T=new fy;return Object.assign(T,b),T})}}async delete(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Sw(this.apiClient,t);return g=Ke("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>ww(x))}else{const m=bw(this.apiClient,t);return g=Ke("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>Tw(x))}}}function Xw(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function yy(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>xC(u))),f(t,["parts"],r)}const a=c(e,["role"]);return a!=null&&f(t,["role"],a),t}function Ww(e,t){const o={},a=c(e,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(e,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const u=c(e,["displayName"]);t!==void 0&&u!=null&&f(t,["displayName"],u);const p=c(e,["contents"]);if(t!==void 0&&p!=null){let x=ji(p);Array.isArray(x)&&(x=x.map(b=>yy(b))),f(t,["contents"],x)}const g=c(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["systemInstruction"],yy(li(g)));const v=c(e,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(b=>SC(b))),f(t,["tools"],x)}const m=c(e,["toolConfig"]);if(t!==void 0&&m!=null&&f(t,["toolConfig"],bC(m)),c(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Qw(e,t){const o={},a=c(e,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(e,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const u=c(e,["displayName"]);t!==void 0&&u!=null&&f(t,["displayName"],u);const p=c(e,["contents"]);if(t!==void 0&&p!=null){let b=ji(p);Array.isArray(b)&&(b=b.map(T=>T)),f(t,["contents"],b)}const g=c(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["systemInstruction"],li(g));const v=c(e,["tools"]);if(t!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(T=>TC(T))),f(t,["tools"],b)}const m=c(e,["toolConfig"]);t!==void 0&&m!=null&&f(t,["toolConfig"],m);const x=c(e,["kmsKeyName"]);return t!==void 0&&x!=null&&f(t,["encryption_spec","kmsKeyName"],x),o}function Zw(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["model"],nv(e,a));const r=c(t,["config"]);return r!=null&&Ww(r,o),o}function eC(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["model"],nv(e,a));const r=c(t,["config"]);return r!=null&&Qw(r,o),o}function tC(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],Bo(e,a)),o}function nC(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],Bo(e,a)),o}function iC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function oC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function lC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function aC(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const a=c(e,["args"]);a!=null&&f(t,["args"],a);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function sC(e){const t={},o=c(e,["mode"]);o!=null&&f(t,["mode"],o);const a=c(e,["allowedFunctionNames"]);if(a!=null&&f(t,["allowedFunctionNames"],a),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function rC(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&f(t,["description"],o);const a=c(e,["name"]);a!=null&&f(t,["name"],a);const r=c(e,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const p=c(e,["response"]);p!=null&&f(t,["response"],p);const g=c(e,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function cC(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],Bo(e,a)),o}function uC(e,t){const o={},a=c(t,["name"]);return a!=null&&f(o,["_url","name"],Bo(e,a)),o}function dC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function fC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function pC(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function hC(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function mC(e){const t={},o=c(e,["config"]);return o!=null&&pC(o,t),t}function gC(e){const t={},o=c(e,["config"]);return o!=null&&hC(o,t),t}function yC(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["cachedContents"],u)}return t}function vC(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["cachedContents"],u)}return t}function xC(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const a=c(e,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],lC(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],aC(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],Xw(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function bC(e){const t={},o=c(e,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],sC(o));const a=c(e,["retrievalConfig"]);return a!=null&&f(t,["retrievalConfig"],a),t}function SC(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(e,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],dC(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],fC(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function TC(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>rC(T))),f(t,["functionDeclarations"],b)}const a=c(e,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=c(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(e,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(e,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const g=c(e,["enterpriseWebSearch"]);g!=null&&f(t,["enterpriseWebSearch"],g);const v=c(e,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(e,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(e,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function wC(e,t){const o={},a=c(e,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(e,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function CC(e,t){const o={},a=c(e,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(e,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function EC(e,t){const o={},a=c(t,["name"]);a!=null&&f(o,["_url","name"],Bo(e,a));const r=c(t,["config"]);return r!=null&&wC(r,o),o}function _C(e,t){const o={},a=c(t,["name"]);a!=null&&f(o,["_url","name"],Bo(e,a));const r=c(t,["config"]);return r!=null&&CC(r,o),o}class NC extends Po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ql(Fo.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(o),o)}async create(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=eC(this.apiClient,t);return g=Ke("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>x)}else{const m=Zw(this.apiClient,t);return g=Ke("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>x)}}async get(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=uC(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>x)}else{const m=cC(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>x)}}async delete(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=nC(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=oC(x),T=new uy;return Object.assign(T,b),T})}else{const m=tC(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=iC(x),T=new uy;return Object.assign(T,b),T})}}async update(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=_C(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>x)}else{const m=EC(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>x)}}async listInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=gC(t);return g=Ke("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=vC(x),T=new dy;return Object.assign(T,b),T})}else{const m=mC(t);return g=Ke("cachedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=yC(x),T=new dy;return Object.assign(T,b),T})}}}function Dc(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(o[a[r]]=e[a[r]]);return o}function vy(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],a=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(e){return this instanceof At?(this.v=e,this):new At(e)}function Wi(e,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(e,t||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",p),r[Symbol.asyncIterator]=function(){return this},r;function p(A){return function(E){return Promise.resolve(E).then(A,b)}}function g(A,E){a[A]&&(r[A]=function(j){return new Promise(function(I,Y){u.push([A,j,I,Y])>1||v(A,j)})},E&&(r[A]=E(r[A])))}function v(A,E){try{m(a[A](E))}catch(j){T(u[0][3],j)}}function m(A){A.value instanceof At?Promise.resolve(A.value.v).then(x,b):T(u[0][2],A)}function x(A){v("next",A)}function b(A){v("throw",A)}function T(A,E){A(E),u.shift(),u.length&&v(u[0][0],u[0][1])}}function Qi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],o;return t?t.call(e):(e=typeof vy=="function"?vy(e):e[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(u){o[u]=e[u]&&function(p){return new Promise(function(g,v){p=e[u](p),r(g,v,p.done,p.value)})}}function r(u,p,g,v){Promise.resolve(v).then(function(m){u({value:m,done:g})},p)}}function AC(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const o=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:mv(o)}function mv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function MC(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function xy(e){if(e===void 0||e.length===0)return[];const t=[],o=e.length;let a=0;for(;a<o;)if(e[a].role==="user")t.push(e[a]),a++;else{const r=[];let u=!0;for(;a<o&&e[a].role==="model";)r.push(e[a]),u&&!mv(e[a])&&(u=!1),a++;u?t.push(...r):t.pop()}return t}class kC{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new RC(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class RC{constructor(t,o,a,r={},u=[]){this.apiClient=t,this.modelsModule=o,this.model=a,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),MC(u)}async sendMessage(t){var o;await this.sendPromise;const a=li(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,p,g;const v=await r,m=(p=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content,x=v.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];x!=null&&(T=(g=x.slice(b))!==null&&g!==void 0?g:[]);const A=m?[m]:[];this.recordHistory(a,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const a=li(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,a)}getHistory(t=!1){const o=t?xy(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Wi(this,arguments,function*(){var r,u,p,g,v,m;const x=[];try{for(var b=!0,T=Qi(t),A;A=yield At(T.next()),r=A.done,!r;b=!0){g=A.value,b=!1;const E=g;if(AC(E)){const j=(m=(v=E.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;j!==void 0&&x.push(j)}yield yield At(E)}}catch(E){u={error:E}}finally{try{!b&&!r&&(p=T.return)&&(yield At(p.call(T)))}finally{if(u)throw u.error}}this.recordHistory(o,x)})}recordHistory(t,o,a){let r=[];o.length>0&&o.every(u=>u.role!==void 0)?r=o:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...xy(a)):this.history.push(t),this.history.push(...r)}}class jc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,jc.prototype)}}function IC(e){const t={},o=c(e,["file"]);return o!=null&&f(t,["file"],o),t}function zC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function DC(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","file"],rv(o)),t}function LC(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function UC(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","file"],rv(o)),t}function FC(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function PC(e){const t={},o=c(e,["config"]);return o!=null&&FC(o,t),t}function BC(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["files"],u)}return t}class HC extends Po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ql(Fo.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=PC(t);return u=Ke("files",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=BC(v),x=new jT;return Object.assign(x,m),x})}}async createInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=IC(t);return u=Ke("upload/v1beta/files",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=zC(v),x=new qT;return Object.assign(x,m),x})}}async get(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=UC(t);return u=Ke("files/{file}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=DC(t);return u=Ke("files/{file}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=LC(v),x=new $T;return Object.assign(x,m),x})}}}function Sc(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function OC(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>iE(u))),f(t,["parts"],r)}const a=c(e,["role"]);return a!=null&&f(t,["role"],a),t}function GC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function VC(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const a=c(e,["args"]);a!=null&&f(t,["args"],a);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function jC(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&f(t,["description"],o);const a=c(e,["name"]);a!=null&&f(t,["name"],a);const r=c(e,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const p=c(e,["response"]);p!=null&&f(t,["response"],p);const g=c(e,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function qC(e){const t={},o=c(e,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const a=c(e,["responseJsonSchema"]);a!=null&&f(t,["responseJsonSchema"],a);const r=c(e,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const u=c(e,["candidateCount"]);u!=null&&f(t,["candidateCount"],u);const p=c(e,["enableAffectiveDialog"]);p!=null&&f(t,["enableAffectiveDialog"],p);const g=c(e,["frequencyPenalty"]);g!=null&&f(t,["frequencyPenalty"],g);const v=c(e,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(e,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(e,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const b=c(e,["presencePenalty"]);b!=null&&f(t,["presencePenalty"],b);const T=c(e,["responseLogprobs"]);T!=null&&f(t,["responseLogprobs"],T);const A=c(e,["responseMimeType"]);A!=null&&f(t,["responseMimeType"],A);const E=c(e,["responseModalities"]);E!=null&&f(t,["responseModalities"],E);const j=c(e,["responseSchema"]);j!=null&&f(t,["responseSchema"],j);const I=c(e,["routingConfig"]);I!=null&&f(t,["routingConfig"],I);const Y=c(e,["seed"]);Y!=null&&f(t,["seed"],Y);const de=c(e,["speechConfig"]);de!=null&&f(t,["speechConfig"],de);const se=c(e,["stopSequences"]);se!=null&&f(t,["stopSequences"],se);const pe=c(e,["temperature"]);pe!=null&&f(t,["temperature"],pe);const Fe=c(e,["thinkingConfig"]);Fe!=null&&f(t,["thinkingConfig"],Fe);const _e=c(e,["topK"]);_e!=null&&f(t,["topK"],_e);const Se=c(e,["topP"]);if(Se!=null&&f(t,["topP"],Se),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function $C(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function YC(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function JC(e,t){const o={},a=c(e,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],a);const r=c(e,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const p=c(e,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const g=c(e,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const v=c(e,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(e,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(e,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(e,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Wf(b));const T=c(e,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const A=c(e,["enableAffectiveDialog"]);t!==void 0&&A!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],A);const E=c(e,["systemInstruction"]);t!==void 0&&E!=null&&f(t,["setup","systemInstruction"],OC(li(E)));const j=c(e,["tools"]);if(t!==void 0&&j!=null){let _e=ja(j);Array.isArray(_e)&&(_e=_e.map(Se=>lE(Va(Se)))),f(t,["setup","tools"],_e)}const I=c(e,["sessionResumption"]);t!==void 0&&I!=null&&f(t,["setup","sessionResumption"],oE(I));const Y=c(e,["inputAudioTranscription"]);t!==void 0&&Y!=null&&f(t,["setup","inputAudioTranscription"],Y);const de=c(e,["outputAudioTranscription"]);t!==void 0&&de!=null&&f(t,["setup","outputAudioTranscription"],de);const se=c(e,["realtimeInputConfig"]);t!==void 0&&se!=null&&f(t,["setup","realtimeInputConfig"],se);const pe=c(e,["contextWindowCompression"]);t!==void 0&&pe!=null&&f(t,["setup","contextWindowCompression"],pe);const Fe=c(e,["proactivity"]);if(t!==void 0&&Fe!=null&&f(t,["setup","proactivity"],Fe),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function KC(e,t){const o={},a=c(e,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],qC(a));const r=c(e,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const p=c(e,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const g=c(e,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const v=c(e,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(e,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(e,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(e,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Wf(b));const T=c(e,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const A=c(e,["enableAffectiveDialog"]);t!==void 0&&A!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],A);const E=c(e,["systemInstruction"]);t!==void 0&&E!=null&&f(t,["setup","systemInstruction"],li(E));const j=c(e,["tools"]);if(t!==void 0&&j!=null){let Se=ja(j);Array.isArray(Se)&&(Se=Se.map(et=>aE(Va(et)))),f(t,["setup","tools"],Se)}const I=c(e,["sessionResumption"]);t!==void 0&&I!=null&&f(t,["setup","sessionResumption"],I);const Y=c(e,["inputAudioTranscription"]);t!==void 0&&Y!=null&&f(t,["setup","inputAudioTranscription"],Y);const de=c(e,["outputAudioTranscription"]);t!==void 0&&de!=null&&f(t,["setup","outputAudioTranscription"],de);const se=c(e,["realtimeInputConfig"]);t!==void 0&&se!=null&&f(t,["setup","realtimeInputConfig"],se);const pe=c(e,["contextWindowCompression"]);t!==void 0&&pe!=null&&f(t,["setup","contextWindowCompression"],pe);const Fe=c(e,["proactivity"]);t!==void 0&&Fe!=null&&f(t,["setup","proactivity"],Fe);const _e=c(e,["explicitVadSignal"]);return t!==void 0&&_e!=null&&f(t,["setup","explicitVadSignal"],_e),o}function XC(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["setup","model"],en(e,a));const r=c(t,["config"]);return r!=null&&f(o,["config"],JC(r,o)),o}function WC(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["setup","model"],en(e,a));const r=c(t,["config"]);return r!=null&&f(o,["config"],KC(r,o)),o}function QC(e){const t={},o=c(e,["musicGenerationConfig"]);return o!=null&&f(t,["musicGenerationConfig"],o),t}function ZC(e){const t={},o=c(e,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["weightedPrompts"],a)}return t}function eE(e){const t={},o=c(e,["media"]);if(o!=null){let m=iv(o);Array.isArray(m)&&(m=m.map(x=>Sc(x))),f(t,["mediaChunks"],m)}const a=c(e,["audio"]);a!=null&&f(t,["audio"],Sc(lv(a)));const r=c(e,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const u=c(e,["video"]);u!=null&&f(t,["video"],Sc(ov(u)));const p=c(e,["text"]);p!=null&&f(t,["text"],p);const g=c(e,["activityStart"]);g!=null&&f(t,["activityStart"],g);const v=c(e,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function tE(e){const t={},o=c(e,["media"]);if(o!=null){let m=iv(o);Array.isArray(m)&&(m=m.map(x=>x)),f(t,["mediaChunks"],m)}const a=c(e,["audio"]);a!=null&&f(t,["audio"],lv(a));const r=c(e,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const u=c(e,["video"]);u!=null&&f(t,["video"],ov(u));const p=c(e,["text"]);p!=null&&f(t,["text"],p);const g=c(e,["activityStart"]);g!=null&&f(t,["activityStart"],g);const v=c(e,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function nE(e){const t={},o=c(e,["setupComplete"]);o!=null&&f(t,["setupComplete"],o);const a=c(e,["serverContent"]);a!=null&&f(t,["serverContent"],a);const r=c(e,["toolCall"]);r!=null&&f(t,["toolCall"],r);const u=c(e,["toolCallCancellation"]);u!=null&&f(t,["toolCallCancellation"],u);const p=c(e,["usageMetadata"]);p!=null&&f(t,["usageMetadata"],sE(p));const g=c(e,["goAway"]);g!=null&&f(t,["goAway"],g);const v=c(e,["sessionResumptionUpdate"]);v!=null&&f(t,["sessionResumptionUpdate"],v);const m=c(e,["voiceActivityDetectionSignal"]);return m!=null&&f(t,["voiceActivityDetectionSignal"],m),t}function iE(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const a=c(e,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],GC(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],VC(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],Sc(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function oE(e){const t={},o=c(e,["handle"]);if(o!=null&&f(t,["handle"],o),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function lE(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(e,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],$C(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],YC(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function aE(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>jC(T))),f(t,["functionDeclarations"],b)}const a=c(e,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=c(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(e,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(e,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const g=c(e,["enterpriseWebSearch"]);g!=null&&f(t,["enterpriseWebSearch"],g);const v=c(e,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(e,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(e,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function sE(e){const t={},o=c(e,["promptTokenCount"]);o!=null&&f(t,["promptTokenCount"],o);const a=c(e,["cachedContentTokenCount"]);a!=null&&f(t,["cachedContentTokenCount"],a);const r=c(e,["candidatesTokenCount"]);r!=null&&f(t,["responseTokenCount"],r);const u=c(e,["toolUsePromptTokenCount"]);u!=null&&f(t,["toolUsePromptTokenCount"],u);const p=c(e,["thoughtsTokenCount"]);p!=null&&f(t,["thoughtsTokenCount"],p);const g=c(e,["totalTokenCount"]);g!=null&&f(t,["totalTokenCount"],g);const v=c(e,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(E=>E)),f(t,["promptTokensDetails"],A)}const m=c(e,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(E=>E)),f(t,["cacheTokensDetails"],A)}const x=c(e,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(E=>E)),f(t,["responseTokensDetails"],A)}const b=c(e,["toolUsePromptTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(E=>E)),f(t,["toolUsePromptTokensDetails"],A)}const T=c(e,["trafficType"]);return T!=null&&f(t,["trafficType"],T),t}function rE(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function cE(e){const t={},o=c(e,["content"]);o!=null&&f(t,["content"],o);const a=c(e,["citationMetadata"]);a!=null&&f(t,["citationMetadata"],uE(a));const r=c(e,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const u=c(e,["finishReason"]);u!=null&&f(t,["finishReason"],u);const p=c(e,["avgLogprobs"]);p!=null&&f(t,["avgLogprobs"],p);const g=c(e,["groundingMetadata"]);g!=null&&f(t,["groundingMetadata"],g);const v=c(e,["index"]);v!=null&&f(t,["index"],v);const m=c(e,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(e,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),f(t,["safetyRatings"],T)}const b=c(e,["urlContextMetadata"]);return b!=null&&f(t,["urlContextMetadata"],b),t}function uE(e){const t={},o=c(e,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["citations"],a)}return t}function dE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let u=ji(r);Array.isArray(u)&&(u=u.map(p=>p)),f(o,["contents"],u)}return o}function fE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),f(t,["tokensInfo"],r)}return t}function pE(e){const t={},o=c(e,["values"]);o!=null&&f(t,["values"],o);const a=c(e,["statistics"]);return a!=null&&f(t,["statistics"],hE(a)),t}function hE(e){const t={},o=c(e,["truncated"]);o!=null&&f(t,["truncated"],o);const a=c(e,["token_count"]);return a!=null&&f(t,["tokenCount"],a),t}function qc(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>w_(u))),f(t,["parts"],r)}const a=c(e,["role"]);return a!=null&&f(t,["role"],a),t}function mE(e){const t={},o=c(e,["controlType"]);o!=null&&f(t,["controlType"],o);const a=c(e,["enableControlImageComputation"]);return a!=null&&f(t,["computeControl"],a),t}function gE(e){const t={};if(c(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function yE(e,t){const o={},a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],li(a));const r=c(e,["tools"]);if(t!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>xv(g))),f(t,["tools"],p)}const u=c(e,["generationConfig"]);return t!==void 0&&u!=null&&f(t,["generationConfig"],r_(u)),o}function vE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let p=ji(r);Array.isArray(p)&&(p=p.map(g=>qc(g))),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&gE(u),o}function xE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let p=ji(r);Array.isArray(p)&&(p=p.map(g=>g)),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&yE(u,o),o}function bE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["totalTokens"]);a!=null&&f(t,["totalTokens"],a);const r=c(e,["cachedContentTokenCount"]);return r!=null&&f(t,["cachedContentTokenCount"],r),t}function SE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["totalTokens"]);return a!=null&&f(t,["totalTokens"],a),t}function TE(e,t){const o={},a=c(t,["model"]);return a!=null&&f(o,["_url","name"],en(e,a)),o}function wE(e,t){const o={},a=c(t,["model"]);return a!=null&&f(o,["_url","name"],en(e,a)),o}function CE(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function EE(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function _E(e,t){const o={},a=c(e,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=c(e,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const u=c(e,["numberOfImages"]);t!==void 0&&u!=null&&f(t,["parameters","sampleCount"],u);const p=c(e,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const g=c(e,["guidanceScale"]);t!==void 0&&g!=null&&f(t,["parameters","guidanceScale"],g);const v=c(e,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(e,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(e,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&f(t,["parameters","includeSafetyAttributes"],b);const T=c(e,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const A=c(e,["language"]);t!==void 0&&A!=null&&f(t,["parameters","language"],A);const E=c(e,["outputMimeType"]);t!==void 0&&E!=null&&f(t,["parameters","outputOptions","mimeType"],E);const j=c(e,["outputCompressionQuality"]);t!==void 0&&j!=null&&f(t,["parameters","outputOptions","compressionQuality"],j);const I=c(e,["addWatermark"]);t!==void 0&&I!=null&&f(t,["parameters","addWatermark"],I);const Y=c(e,["labels"]);t!==void 0&&Y!=null&&f(t,["labels"],Y);const de=c(e,["editMode"]);t!==void 0&&de!=null&&f(t,["parameters","editMode"],de);const se=c(e,["baseSteps"]);return t!==void 0&&se!=null&&f(t,["parameters","editConfig","baseSteps"],se),o}function NE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>M_(v))),f(o,["instances[0]","referenceImages"],g)}const p=c(t,["config"]);return p!=null&&_E(p,o),o}function AE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>$c(u))),f(t,["generatedImages"],r)}return t}function ME(e,t){const o={},a=c(e,["taskType"]);t!==void 0&&a!=null&&f(t,["requests[]","taskType"],a);const r=c(e,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const u=c(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&f(t,["requests[]","outputDimensionality"],u),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function kE(e,t){const o={},a=c(e,["taskType"]);t!==void 0&&a!=null&&f(t,["instances[]","task_type"],a);const r=c(e,["title"]);t!==void 0&&r!=null&&f(t,["instances[]","title"],r);const u=c(e,["outputDimensionality"]);t!==void 0&&u!=null&&f(t,["parameters","outputDimensionality"],u);const p=c(e,["mimeType"]);t!==void 0&&p!=null&&f(t,["instances[]","mimeType"],p);const g=c(e,["autoTruncate"]);return t!==void 0&&g!=null&&f(t,["parameters","autoTruncate"],g),o}function RE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let g=Jf(e,r);Array.isArray(g)&&(g=g.map(v=>v)),f(o,["requests[]","content"],g)}const u=c(t,["config"]);u!=null&&ME(u,o);const p=c(t,["model"]);return p!==void 0&&f(o,["requests[]","model"],en(e,p)),o}function IE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let p=Jf(e,r);Array.isArray(p)&&(p=p.map(g=>g)),f(o,["instances[]","content"],p)}const u=c(t,["config"]);return u!=null&&kE(u,o),o}function zE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["embeddings"],u)}const r=c(e,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function DE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["predictions[]","embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(p=>pE(p))),f(t,["embeddings"],u)}const r=c(e,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function LE(e){const t={},o=c(e,["endpoint"]);o!=null&&f(t,["name"],o);const a=c(e,["deployedModelId"]);return a!=null&&f(t,["deployedModelId"],a),t}function UE(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function FE(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const a=c(e,["args"]);a!=null&&f(t,["args"],a);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function PE(e){const t={},o=c(e,["mode"]);o!=null&&f(t,["mode"],o);const a=c(e,["allowedFunctionNames"]);if(a!=null&&f(t,["allowedFunctionNames"],a),c(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function BE(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(e,["description"]);o!=null&&f(t,["description"],o);const a=c(e,["name"]);a!=null&&f(t,["name"],a);const r=c(e,["parameters"]);r!=null&&f(t,["parameters"],r);const u=c(e,["parametersJsonSchema"]);u!=null&&f(t,["parametersJsonSchema"],u);const p=c(e,["response"]);p!=null&&f(t,["response"],p);const g=c(e,["responseJsonSchema"]);return g!=null&&f(t,["responseJsonSchema"],g),t}function HE(e,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],qc(li(r)));const u=c(t,["temperature"]);u!=null&&f(a,["temperature"],u);const p=c(t,["topP"]);p!=null&&f(a,["topP"],p);const g=c(t,["topK"]);g!=null&&f(a,["topK"],g);const v=c(t,["candidateCount"]);v!=null&&f(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&f(a,["presencePenalty"],A);const E=c(t,["frequencyPenalty"]);E!=null&&f(a,["frequencyPenalty"],E);const j=c(t,["seed"]);j!=null&&f(a,["seed"],j);const I=c(t,["responseMimeType"]);I!=null&&f(a,["responseMimeType"],I);const Y=c(t,["responseSchema"]);Y!=null&&f(a,["responseSchema"],Kf(Y));const de=c(t,["responseJsonSchema"]);if(de!=null&&f(a,["responseJsonSchema"],de),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=c(t,["safetySettings"]);if(o!==void 0&&se!=null){let ht=se;Array.isArray(ht)&&(ht=ht.map(bt=>k_(bt))),f(o,["safetySettings"],ht)}const pe=c(t,["tools"]);if(o!==void 0&&pe!=null){let ht=ja(pe);Array.isArray(ht)&&(ht=ht.map(bt=>F_(Va(bt)))),f(o,["tools"],ht)}const Fe=c(t,["toolConfig"]);if(o!==void 0&&Fe!=null&&f(o,["toolConfig"],U_(Fe)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _e=c(t,["cachedContent"]);o!==void 0&&_e!=null&&f(o,["cachedContent"],Bo(e,_e));const Se=c(t,["responseModalities"]);Se!=null&&f(a,["responseModalities"],Se);const et=c(t,["mediaResolution"]);et!=null&&f(a,["mediaResolution"],et);const Me=c(t,["speechConfig"]);if(Me!=null&&f(a,["speechConfig"],Xf(Me)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ye=c(t,["thinkingConfig"]);Ye!=null&&f(a,["thinkingConfig"],Ye);const ct=c(t,["imageConfig"]);ct!=null&&f(a,["imageConfig"],p_(ct));const pt=c(t,["enableEnhancedCivicAnswers"]);return pt!=null&&f(a,["enableEnhancedCivicAnswers"],pt),a}function OE(e,t,o){const a={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],li(r));const u=c(t,["temperature"]);u!=null&&f(a,["temperature"],u);const p=c(t,["topP"]);p!=null&&f(a,["topP"],p);const g=c(t,["topK"]);g!=null&&f(a,["topK"],g);const v=c(t,["candidateCount"]);v!=null&&f(a,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(a,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(a,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(a,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(a,["logprobs"],T);const A=c(t,["presencePenalty"]);A!=null&&f(a,["presencePenalty"],A);const E=c(t,["frequencyPenalty"]);E!=null&&f(a,["frequencyPenalty"],E);const j=c(t,["seed"]);j!=null&&f(a,["seed"],j);const I=c(t,["responseMimeType"]);I!=null&&f(a,["responseMimeType"],I);const Y=c(t,["responseSchema"]);Y!=null&&f(a,["responseSchema"],Kf(Y));const de=c(t,["responseJsonSchema"]);de!=null&&f(a,["responseJsonSchema"],de);const se=c(t,["routingConfig"]);se!=null&&f(a,["routingConfig"],se);const pe=c(t,["modelSelectionConfig"]);pe!=null&&f(a,["modelConfig"],pe);const Fe=c(t,["safetySettings"]);if(o!==void 0&&Fe!=null){let V=Fe;Array.isArray(V)&&(V=V.map(Ce=>Ce)),f(o,["safetySettings"],V)}const _e=c(t,["tools"]);if(o!==void 0&&_e!=null){let V=ja(_e);Array.isArray(V)&&(V=V.map(Ce=>xv(Va(Ce)))),f(o,["tools"],V)}const Se=c(t,["toolConfig"]);o!==void 0&&Se!=null&&f(o,["toolConfig"],Se);const et=c(t,["labels"]);o!==void 0&&et!=null&&f(o,["labels"],et);const Me=c(t,["cachedContent"]);o!==void 0&&Me!=null&&f(o,["cachedContent"],Bo(e,Me));const Ye=c(t,["responseModalities"]);Ye!=null&&f(a,["responseModalities"],Ye);const ct=c(t,["mediaResolution"]);ct!=null&&f(a,["mediaResolution"],ct);const pt=c(t,["speechConfig"]);pt!=null&&f(a,["speechConfig"],Xf(pt));const ht=c(t,["audioTimestamp"]);ht!=null&&f(a,["audioTimestamp"],ht);const bt=c(t,["thinkingConfig"]);bt!=null&&f(a,["thinkingConfig"],bt);const It=c(t,["imageConfig"]);if(It!=null&&f(a,["imageConfig"],h_(It)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return a}function by(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let p=ji(r);Array.isArray(p)&&(p=p.map(g=>qc(g))),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&f(o,["generationConfig"],HE(e,u,o)),o}function Sy(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["contents"]);if(r!=null){let p=ji(r);Array.isArray(p)&&(p=p.map(g=>g)),f(o,["contents"],p)}const u=c(t,["config"]);return u!=null&&f(o,["generationConfig"],OE(e,u,o)),o}function Ty(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(m=>cE(m))),f(t,["candidates"],v)}const r=c(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const u=c(e,["promptFeedback"]);u!=null&&f(t,["promptFeedback"],u);const p=c(e,["responseId"]);p!=null&&f(t,["responseId"],p);const g=c(e,["usageMetadata"]);return g!=null&&f(t,["usageMetadata"],g),t}function wy(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(x=>x)),f(t,["candidates"],m)}const r=c(e,["createTime"]);r!=null&&f(t,["createTime"],r);const u=c(e,["modelVersion"]);u!=null&&f(t,["modelVersion"],u);const p=c(e,["promptFeedback"]);p!=null&&f(t,["promptFeedback"],p);const g=c(e,["responseId"]);g!=null&&f(t,["responseId"],g);const v=c(e,["usageMetadata"]);return v!=null&&f(t,["usageMetadata"],v),t}function GE(e,t){const o={};if(c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(e,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=c(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const u=c(e,["guidanceScale"]);if(t!==void 0&&u!=null&&f(t,["parameters","guidanceScale"],u),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(e,["safetyFilterLevel"]);t!==void 0&&p!=null&&f(t,["parameters","safetySetting"],p);const g=c(e,["personGeneration"]);t!==void 0&&g!=null&&f(t,["parameters","personGeneration"],g);const v=c(e,["includeSafetyAttributes"]);t!==void 0&&v!=null&&f(t,["parameters","includeSafetyAttributes"],v);const m=c(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const x=c(e,["language"]);t!==void 0&&x!=null&&f(t,["parameters","language"],x);const b=c(e,["outputMimeType"]);t!==void 0&&b!=null&&f(t,["parameters","outputOptions","mimeType"],b);const T=c(e,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T),c(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(e,["imageSize"]);if(t!==void 0&&A!=null&&f(t,["parameters","sampleImageSize"],A),c(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function VE(e,t){const o={},a=c(e,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=c(e,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const u=c(e,["numberOfImages"]);t!==void 0&&u!=null&&f(t,["parameters","sampleCount"],u);const p=c(e,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const g=c(e,["guidanceScale"]);t!==void 0&&g!=null&&f(t,["parameters","guidanceScale"],g);const v=c(e,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(e,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(e,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&f(t,["parameters","includeSafetyAttributes"],b);const T=c(e,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const A=c(e,["language"]);t!==void 0&&A!=null&&f(t,["parameters","language"],A);const E=c(e,["outputMimeType"]);t!==void 0&&E!=null&&f(t,["parameters","outputOptions","mimeType"],E);const j=c(e,["outputCompressionQuality"]);t!==void 0&&j!=null&&f(t,["parameters","outputOptions","compressionQuality"],j);const I=c(e,["addWatermark"]);t!==void 0&&I!=null&&f(t,["parameters","addWatermark"],I);const Y=c(e,["labels"]);t!==void 0&&Y!=null&&f(t,["labels"],Y);const de=c(e,["imageSize"]);t!==void 0&&de!=null&&f(t,["parameters","sampleImageSize"],de);const se=c(e,["enhancePrompt"]);return t!==void 0&&se!=null&&f(t,["parameters","enhancePrompt"],se),o}function jE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&GE(u,o),o}function qE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["config"]);return u!=null&&VE(u,o),o}function $E(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(p=>o_(p))),f(t,["generatedImages"],u)}const r=c(e,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],yv(r)),t}function YE(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(p=>$c(p))),f(t,["generatedImages"],u)}const r=c(e,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],vv(r)),t}function JE(e,t){const o={},a=c(e,["numberOfVideos"]);if(t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a),c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(e,["durationSeconds"]);if(t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(e,["aspectRatio"]);t!==void 0&&u!=null&&f(t,["parameters","aspectRatio"],u);const p=c(e,["resolution"]);t!==void 0&&p!=null&&f(t,["parameters","resolution"],p);const g=c(e,["personGeneration"]);if(t!==void 0&&g!=null&&f(t,["parameters","personGeneration"],g),c(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(e,["negativePrompt"]);t!==void 0&&v!=null&&f(t,["parameters","negativePrompt"],v);const m=c(e,["enhancePrompt"]);if(t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m),c(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=c(e,["lastFrame"]);t!==void 0&&x!=null&&f(t,["instances[0]","lastFrame"],Yc(x));const b=c(e,["referenceImages"]);if(t!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(A=>X_(A))),f(t,["instances[0]","referenceImages"],T)}if(c(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function KE(e,t){const o={},a=c(e,["numberOfVideos"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=c(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const u=c(e,["fps"]);t!==void 0&&u!=null&&f(t,["parameters","fps"],u);const p=c(e,["durationSeconds"]);t!==void 0&&p!=null&&f(t,["parameters","durationSeconds"],p);const g=c(e,["seed"]);t!==void 0&&g!=null&&f(t,["parameters","seed"],g);const v=c(e,["aspectRatio"]);t!==void 0&&v!=null&&f(t,["parameters","aspectRatio"],v);const m=c(e,["resolution"]);t!==void 0&&m!=null&&f(t,["parameters","resolution"],m);const x=c(e,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(e,["pubsubTopic"]);t!==void 0&&b!=null&&f(t,["parameters","pubsubTopic"],b);const T=c(e,["negativePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","negativePrompt"],T);const A=c(e,["enhancePrompt"]);t!==void 0&&A!=null&&f(t,["parameters","enhancePrompt"],A);const E=c(e,["generateAudio"]);t!==void 0&&E!=null&&f(t,["parameters","generateAudio"],E);const j=c(e,["lastFrame"]);t!==void 0&&j!=null&&f(t,["instances[0]","lastFrame"],Zi(j));const I=c(e,["referenceImages"]);if(t!==void 0&&I!=null){let se=I;Array.isArray(se)&&(se=se.map(pe=>W_(pe))),f(t,["instances[0]","referenceImages"],se)}const Y=c(e,["mask"]);t!==void 0&&Y!=null&&f(t,["instances[0]","mask"],K_(Y));const de=c(e,["compressionQuality"]);return t!==void 0&&de!=null&&f(t,["parameters","compressionQuality"],de),o}function XE(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response","generateVideoResponse"]);return p!=null&&f(t,["response"],e_(p)),t}function WE(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],t_(p)),t}function QE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&f(o,["instances[0]","image"],Yc(u));const p=c(t,["video"]);p!=null&&f(o,["instances[0]","video"],bv(p));const g=c(t,["source"]);g!=null&&n_(g,o);const v=c(t,["config"]);return v!=null&&JE(v,o),o}function ZE(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const u=c(t,["image"]);u!=null&&f(o,["instances[0]","image"],Zi(u));const p=c(t,["video"]);p!=null&&f(o,["instances[0]","video"],Sv(p));const g=c(t,["source"]);g!=null&&i_(g,o);const v=c(t,["config"]);return v!=null&&KE(v,o),o}function e_(e){const t={},o=c(e,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>a_(p))),f(t,["generatedVideos"],u)}const a=c(e,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function t_(e){const t={},o=c(e,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>s_(p))),f(t,["generatedVideos"],u)}const a=c(e,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(e,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function n_(e,t){const o={},a=c(e,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(e,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Yc(r));const u=c(e,["video"]);return t!==void 0&&u!=null&&f(t,["instances[0]","video"],bv(u)),o}function i_(e,t){const o={},a=c(e,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(e,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Zi(r));const u=c(e,["video"]);return t!==void 0&&u!=null&&f(t,["instances[0]","video"],Sv(u)),o}function o_(e){const t={},o=c(e,["_self"]);o!=null&&f(t,["image"],m_(o));const a=c(e,["raiFilteredReason"]);a!=null&&f(t,["raiFilteredReason"],a);const r=c(e,["_self"]);return r!=null&&f(t,["safetyAttributes"],yv(r)),t}function $c(e){const t={},o=c(e,["_self"]);o!=null&&f(t,["image"],gv(o));const a=c(e,["raiFilteredReason"]);a!=null&&f(t,["raiFilteredReason"],a);const r=c(e,["_self"]);r!=null&&f(t,["safetyAttributes"],vv(r));const u=c(e,["prompt"]);return u!=null&&f(t,["enhancedPrompt"],u),t}function l_(e){const t={},o=c(e,["_self"]);o!=null&&f(t,["mask"],gv(o));const a=c(e,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),f(t,["labels"],r)}return t}function a_(e){const t={},o=c(e,["video"]);return o!=null&&f(t,["video"],Y_(o)),t}function s_(e){const t={},o=c(e,["_self"]);return o!=null&&f(t,["video"],J_(o)),t}function r_(e){const t={},o=c(e,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const a=c(e,["responseJsonSchema"]);a!=null&&f(t,["responseJsonSchema"],a);const r=c(e,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const u=c(e,["candidateCount"]);u!=null&&f(t,["candidateCount"],u);const p=c(e,["enableAffectiveDialog"]);p!=null&&f(t,["enableAffectiveDialog"],p);const g=c(e,["frequencyPenalty"]);g!=null&&f(t,["frequencyPenalty"],g);const v=c(e,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(e,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(e,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const b=c(e,["presencePenalty"]);b!=null&&f(t,["presencePenalty"],b);const T=c(e,["responseLogprobs"]);T!=null&&f(t,["responseLogprobs"],T);const A=c(e,["responseMimeType"]);A!=null&&f(t,["responseMimeType"],A);const E=c(e,["responseModalities"]);E!=null&&f(t,["responseModalities"],E);const j=c(e,["responseSchema"]);j!=null&&f(t,["responseSchema"],j);const I=c(e,["routingConfig"]);I!=null&&f(t,["routingConfig"],I);const Y=c(e,["seed"]);Y!=null&&f(t,["seed"],Y);const de=c(e,["speechConfig"]);de!=null&&f(t,["speechConfig"],de);const se=c(e,["stopSequences"]);se!=null&&f(t,["stopSequences"],se);const pe=c(e,["temperature"]);pe!=null&&f(t,["temperature"],pe);const Fe=c(e,["thinkingConfig"]);Fe!=null&&f(t,["thinkingConfig"],Fe);const _e=c(e,["topK"]);_e!=null&&f(t,["topK"],_e);const Se=c(e,["topP"]);if(Se!=null&&f(t,["topP"],Se),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function c_(e,t){const o={},a=c(t,["model"]);return a!=null&&f(o,["_url","name"],en(e,a)),o}function u_(e,t){const o={},a=c(t,["model"]);return a!=null&&f(o,["_url","name"],en(e,a)),o}function d_(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function f_(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function p_(e){const t={},o=c(e,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const a=c(e,["imageSize"]);if(a!=null&&f(t,["imageSize"],a),c(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function h_(e){const t={},o=c(e,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const a=c(e,["imageSize"]);a!=null&&f(t,["imageSize"],a);const r=c(e,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);const u=c(e,["outputCompressionQuality"]);return u!=null&&f(t,["imageOutputOptions","compressionQuality"],u),t}function m_(e){const t={},o=c(e,["bytesBase64Encoded"]);o!=null&&f(t,["imageBytes"],vl(o));const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function gv(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const a=c(e,["bytesBase64Encoded"]);a!=null&&f(t,["imageBytes"],vl(a));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Yc(e){const t={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(e,["imageBytes"]);o!=null&&f(t,["bytesBase64Encoded"],vl(o));const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Zi(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const a=c(e,["imageBytes"]);a!=null&&f(t,["bytesBase64Encoded"],vl(a));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function g_(e,t,o){const a={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const p=c(t,["filter"]);o!==void 0&&p!=null&&f(o,["_query","filter"],p);const g=c(t,["queryBase"]);return o!==void 0&&g!=null&&f(o,["_url","models_url"],cv(e,g)),a}function y_(e,t,o){const a={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const u=c(t,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const p=c(t,["filter"]);o!==void 0&&p!=null&&f(o,["_query","filter"],p);const g=c(t,["queryBase"]);return o!==void 0&&g!=null&&f(o,["_url","models_url"],cv(e,g)),a}function v_(e,t){const o={},a=c(t,["config"]);return a!=null&&g_(e,a,o),o}function x_(e,t){const o={},a=c(t,["config"]);return a!=null&&y_(e,a,o),o}function b_(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["_self"]);if(r!=null){let u=uv(r);Array.isArray(u)&&(u=u.map(p=>Tf(p))),f(t,["models"],u)}return t}function S_(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["_self"]);if(r!=null){let u=uv(r);Array.isArray(u)&&(u=u.map(p=>wf(p))),f(t,["models"],u)}return t}function T_(e){const t={},o=c(e,["maskMode"]);o!=null&&f(t,["maskMode"],o);const a=c(e,["segmentationClasses"]);a!=null&&f(t,["maskClasses"],a);const r=c(e,["maskDilation"]);return r!=null&&f(t,["dilation"],r),t}function Tf(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["displayName"]);a!=null&&f(t,["displayName"],a);const r=c(e,["description"]);r!=null&&f(t,["description"],r);const u=c(e,["version"]);u!=null&&f(t,["version"],u);const p=c(e,["_self"]);p!=null&&f(t,["tunedModelInfo"],P_(p));const g=c(e,["inputTokenLimit"]);g!=null&&f(t,["inputTokenLimit"],g);const v=c(e,["outputTokenLimit"]);v!=null&&f(t,["outputTokenLimit"],v);const m=c(e,["supportedGenerationMethods"]);m!=null&&f(t,["supportedActions"],m);const x=c(e,["temperature"]);x!=null&&f(t,["temperature"],x);const b=c(e,["maxTemperature"]);b!=null&&f(t,["maxTemperature"],b);const T=c(e,["topP"]);T!=null&&f(t,["topP"],T);const A=c(e,["topK"]);A!=null&&f(t,["topK"],A);const E=c(e,["thinking"]);return E!=null&&f(t,["thinking"],E),t}function wf(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["displayName"]);a!=null&&f(t,["displayName"],a);const r=c(e,["description"]);r!=null&&f(t,["description"],r);const u=c(e,["versionId"]);u!=null&&f(t,["version"],u);const p=c(e,["deployedModels"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(T=>LE(T))),f(t,["endpoints"],b)}const g=c(e,["labels"]);g!=null&&f(t,["labels"],g);const v=c(e,["_self"]);v!=null&&f(t,["tunedModelInfo"],B_(v));const m=c(e,["defaultCheckpointId"]);m!=null&&f(t,["defaultCheckpointId"],m);const x=c(e,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(T=>T)),f(t,["checkpoints"],b)}return t}function w_(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const a=c(e,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],UE(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],FE(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],rE(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function C_(e){const t={},o=c(e,["productImage"]);return o!=null&&f(t,["image"],Zi(o)),t}function E_(e,t){const o={},a=c(e,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=c(e,["baseSteps"]);t!==void 0&&r!=null&&f(t,["parameters","baseSteps"],r);const u=c(e,["outputGcsUri"]);t!==void 0&&u!=null&&f(t,["parameters","storageUri"],u);const p=c(e,["seed"]);t!==void 0&&p!=null&&f(t,["parameters","seed"],p);const g=c(e,["safetyFilterLevel"]);t!==void 0&&g!=null&&f(t,["parameters","safetySetting"],g);const v=c(e,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const m=c(e,["addWatermark"]);t!==void 0&&m!=null&&f(t,["parameters","addWatermark"],m);const x=c(e,["outputMimeType"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","mimeType"],x);const b=c(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&f(t,["parameters","outputOptions","compressionQuality"],b);const T=c(e,["enhancePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","enhancePrompt"],T);const A=c(e,["labels"]);return t!==void 0&&A!=null&&f(t,["labels"],A),o}function __(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["source"]);r!=null&&A_(r,o);const u=c(t,["config"]);return u!=null&&E_(u,o),o}function N_(e){const t={},o=c(e,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>$c(r))),f(t,["generatedImages"],a)}return t}function A_(e,t){const o={},a=c(e,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(e,["personImage"]);t!==void 0&&r!=null&&f(t,["instances[0]","personImage","image"],Zi(r));const u=c(e,["productImages"]);if(t!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>C_(g))),f(t,["instances[0]","productImages"],p)}return o}function M_(e){const t={},o=c(e,["referenceImage"]);o!=null&&f(t,["referenceImage"],Zi(o));const a=c(e,["referenceId"]);a!=null&&f(t,["referenceId"],a);const r=c(e,["referenceType"]);r!=null&&f(t,["referenceType"],r);const u=c(e,["maskImageConfig"]);u!=null&&f(t,["maskImageConfig"],T_(u));const p=c(e,["controlImageConfig"]);p!=null&&f(t,["controlImageConfig"],mE(p));const g=c(e,["styleImageConfig"]);g!=null&&f(t,["styleImageConfig"],g);const v=c(e,["subjectImageConfig"]);return v!=null&&f(t,["subjectImageConfig"],v),t}function yv(e){const t={},o=c(e,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const a=c(e,["safetyAttributes","scores"]);a!=null&&f(t,["scores"],a);const r=c(e,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function vv(e){const t={},o=c(e,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const a=c(e,["safetyAttributes","scores"]);a!=null&&f(t,["scores"],a);const r=c(e,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function k_(e){const t={},o=c(e,["category"]);if(o!=null&&f(t,["category"],o),c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(e,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function R_(e){const t={},o=c(e,["image"]);return o!=null&&f(t,["image"],Zi(o)),t}function I_(e,t){const o={},a=c(e,["mode"]);t!==void 0&&a!=null&&f(t,["parameters","mode"],a);const r=c(e,["maxPredictions"]);t!==void 0&&r!=null&&f(t,["parameters","maxPredictions"],r);const u=c(e,["confidenceThreshold"]);t!==void 0&&u!=null&&f(t,["parameters","confidenceThreshold"],u);const p=c(e,["maskDilation"]);t!==void 0&&p!=null&&f(t,["parameters","maskDilation"],p);const g=c(e,["binaryColorThreshold"]);t!==void 0&&g!=null&&f(t,["parameters","binaryColorThreshold"],g);const v=c(e,["labels"]);return t!==void 0&&v!=null&&f(t,["labels"],v),o}function z_(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["source"]);r!=null&&L_(r,o);const u=c(t,["config"]);return u!=null&&I_(u,o),o}function D_(e){const t={},o=c(e,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>l_(r))),f(t,["generatedMasks"],a)}return t}function L_(e,t){const o={},a=c(e,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(e,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Zi(r));const u=c(e,["scribbleImage"]);return t!==void 0&&u!=null&&f(t,["instances[0]","scribble"],R_(u)),o}function U_(e){const t={},o=c(e,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],PE(o));const a=c(e,["retrievalConfig"]);return a!=null&&f(t,["retrievalConfig"],a),t}function F_(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(e,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],d_(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],f_(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function xv(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>BE(T))),f(t,["functionDeclarations"],b)}const a=c(e,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=c(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const u=c(e,["computerUse"]);if(u!=null&&f(t,["computerUse"],u),c(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(e,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const g=c(e,["enterpriseWebSearch"]);g!=null&&f(t,["enterpriseWebSearch"],g);const v=c(e,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(e,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(e,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function P_(e){const t={},o=c(e,["baseModel"]);o!=null&&f(t,["baseModel"],o);const a=c(e,["createTime"]);a!=null&&f(t,["createTime"],a);const r=c(e,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function B_(e){const t={},o=c(e,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(t,["baseModel"],o);const a=c(e,["createTime"]);a!=null&&f(t,["createTime"],a);const r=c(e,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function H_(e,t){const o={},a=c(e,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=c(e,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const u=c(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&f(t,["defaultCheckpointId"],u),o}function O_(e,t){const o={},a=c(e,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=c(e,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const u=c(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&f(t,["defaultCheckpointId"],u),o}function G_(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","name"],en(e,a));const r=c(t,["config"]);return r!=null&&H_(r,o),o}function V_(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["config"]);return r!=null&&O_(r,o),o}function j_(e,t){const o={},a=c(e,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=c(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const u=c(e,["personGeneration"]);t!==void 0&&u!=null&&f(t,["parameters","personGeneration"],u);const p=c(e,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const g=c(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);const v=c(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","compressionQuality"],v);const m=c(e,["enhanceInputImage"]);t!==void 0&&m!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=c(e,["imagePreservationFactor"]);t!==void 0&&x!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const b=c(e,["labels"]);t!==void 0&&b!=null&&f(t,["labels"],b);const T=c(e,["numberOfImages"]);t!==void 0&&T!=null&&f(t,["parameters","sampleCount"],T);const A=c(e,["mode"]);return t!==void 0&&A!=null&&f(t,["parameters","mode"],A),o}function q_(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["_url","model"],en(e,a));const r=c(t,["image"]);r!=null&&f(o,["instances[0]","image"],Zi(r));const u=c(t,["upscaleFactor"]);u!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],u);const p=c(t,["config"]);return p!=null&&j_(p,o),o}function $_(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>$c(u))),f(t,["generatedImages"],r)}return t}function Y_(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["uri"],o);const a=c(e,["encodedVideo"]);a!=null&&f(t,["videoBytes"],vl(a));const r=c(e,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function J_(e){const t={},o=c(e,["gcsUri"]);o!=null&&f(t,["uri"],o);const a=c(e,["bytesBase64Encoded"]);a!=null&&f(t,["videoBytes"],vl(a));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function K_(e){const t={},o=c(e,["image"]);o!=null&&f(t,["_self"],Zi(o));const a=c(e,["maskMode"]);return a!=null&&f(t,["maskMode"],a),t}function X_(e){const t={},o=c(e,["image"]);o!=null&&f(t,["image"],Yc(o));const a=c(e,["referenceType"]);return a!=null&&f(t,["referenceType"],a),t}function W_(e){const t={},o=c(e,["image"]);o!=null&&f(t,["image"],Zi(o));const a=c(e,["referenceType"]);return a!=null&&f(t,["referenceType"],a),t}function bv(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["uri"],o);const a=c(e,["videoBytes"]);a!=null&&f(t,["encodedVideo"],vl(a));const r=c(e,["mimeType"]);return r!=null&&f(t,["encoding"],r),t}function Sv(e){const t={},o=c(e,["uri"]);o!=null&&f(t,["gcsUri"],o);const a=c(e,["videoBytes"]);a!=null&&f(t,["bytesBase64Encoded"],vl(a));const r=c(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Q_(e,t){const o={},a=c(e,["displayName"]);return t!==void 0&&a!=null&&f(t,["displayName"],a),o}function Z_(e){const t={},o=c(e,["config"]);return o!=null&&Q_(o,t),t}function eN(e,t){const o={},a=c(e,["force"]);return t!==void 0&&a!=null&&f(t,["_query","force"],a),o}function tN(e){const t={},o=c(e,["name"]);o!=null&&f(t,["_url","name"],o);const a=c(e,["config"]);return a!=null&&eN(a,t),t}function nN(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","name"],o),t}function iN(e,t){const o={},a=c(e,["customMetadata"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["customMetadata"],u)}const r=c(e,["chunkingConfig"]);return t!==void 0&&r!=null&&f(t,["chunkingConfig"],r),o}function oN(e){const t={},o=c(e,["name"]);o!=null&&f(t,["name"],o);const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(e,["done"]);r!=null&&f(t,["done"],r);const u=c(e,["error"]);u!=null&&f(t,["error"],u);const p=c(e,["response"]);return p!=null&&f(t,["response"],aN(p)),t}function lN(e){const t={},o=c(e,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const a=c(e,["fileName"]);a!=null&&f(t,["fileName"],a);const r=c(e,["config"]);return r!=null&&iN(r,t),t}function aN(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["parent"]);a!=null&&f(t,["parent"],a);const r=c(e,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function sN(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function rN(e){const t={},o=c(e,["config"]);return o!=null&&sN(o,t),t}function cN(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["fileSearchStores"],u)}return t}function Tv(e,t){const o={},a=c(e,["mimeType"]);t!==void 0&&a!=null&&f(t,["mimeType"],a);const r=c(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const u=c(e,["customMetadata"]);if(t!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["customMetadata"],g)}const p=c(e,["chunkingConfig"]);return t!==void 0&&p!=null&&f(t,["chunkingConfig"],p),o}function uN(e){const t={},o=c(e,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const a=c(e,["config"]);return a!=null&&Tv(a,t),t}function dN(e){const t={},o=c(e,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}const fN="Content-Type",pN="X-Server-Timeout",hN="User-Agent",Cf="x-goog-api-client",mN="1.34.0",gN=`google-genai-sdk/${mN}`,yN="v1beta1",vN="v1beta";class xN{constructor(t){var o,a;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:yN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:vN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&a.push(t.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,a){const r=[this.getRequestUrlInternal(o)];return a&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,a);if(t.queryParams)for(const[p,g]of Object.entries(t.queryParams))r.searchParams.append(p,String(g));let u={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=t.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.unaryApiCall(r,u,t.httpMethod)}patchHttpOptions(t,o){const a=JSON.parse(JSON.stringify(t));for(const[r,u]of Object.entries(o))typeof u=="object"?a[r]=Object.assign(Object.assign({},a[r]),u):u!==void 0&&(a[r]=u);return a}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=t.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,r.toString(),t.abortSignal),this.streamApiCall(r,u,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,a,r){if(o&&o.timeout||r){const u=new AbortController,p=u.signal;if(o.timeout&&o?.timeout>0){const g=setTimeout(()=>u.abort(),o.timeout);g&&typeof g.unref=="function"&&g.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),t.signal=p}return o&&o.extraBody!==null&&bN(t,o.extraBody),t.headers=await this.getHeadersInternal(o,a),t}async unaryApiCall(t,o,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:a})).then(async r=>(await Cy(r),new xf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:a})).then(async r=>(await Cy(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Wi(this,arguments,function*(){var a;const r=(a=t?.body)===null||a===void 0?void 0:a.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let p="";const g="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield At(r.read());if(m){if(p.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=u.decode(x,{stream:!0});try{const E=JSON.parse(b);if("error"in E){const j=JSON.parse(JSON.stringify(E.error)),I=j.status,Y=j.code,de=`got status: ${I}. ${JSON.stringify(E)}`;if(Y>=400&&Y<600)throw new jc({message:de,status:Y})}}catch(E){if(E.name==="ApiError")throw E}p+=b;let T=-1,A=0;for(;;){T=-1,A=0;for(const I of v){const Y=p.indexOf(I);Y!==-1&&(T===-1||Y<T)&&(T=Y,A=I.length)}if(T===-1)break;const E=p.substring(0,T);p=p.substring(T+A);const j=E.trim();if(j.startsWith(g)){const I=j.substring(g.length).trim();try{const Y=new Response(I,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield At(new xf(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${I}. ${Y}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const t={},o=gN+" "+this.clientOptions.userAgentExtra;return t[hN]=o,t[Cf]=o,t[fN]="application/json",t}async getHeadersInternal(t,o){const a=new Headers;if(t&&t.headers){for(const[r,u]of Object.entries(t.headers))a.append(r,u);t.timeout&&t.timeout>0&&a.append(pN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,o),a}getFileName(t){var o;let a="";return typeof t=="string"&&(a=t.replace(/[/\\]+$/,""),a=(o=a.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),a}async uploadFile(t,o){var a;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,p=await u.stat(t);r.sizeBytes=String(p.size);const g=(a=o?.mimeType)!==null&&a!==void 0?a:p.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const v={file:r},m=this.getFileName(t),x=Ke("upload/v1beta/files",v._url),b=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return u.upload(t,b,this)}async uploadFileToFileSearchStore(t,o,a){var r;const u=this.clientOptions.uploader,p=await u.stat(o),g=String(p.size),v=(r=a?.mimeType)!==null&&r!==void 0?r:p.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),b={};a!=null&&Tv(a,b);const T=await this.fetchUploadUrl(m,g,v,x,b,a?.httpOptions);return u.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,a,r,u,p){var g;let v={};p?v=p:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${a}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(u),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(g=m?.headers)===null||g===void 0?void 0:g["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Cy(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const o=e.status;let a;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await e.json():a={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(a);throw o>=400&&o<600?new jc({message:r,status:o}):new Error(r)}}function bN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof e.body=="string"&&e.body.length>0)try{const u=JSON.parse(e.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(u,p){const g=Object.assign({},u);for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)){const m=p[v],x=g[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?g[v]=a(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),g[v]=m)}return g}const r=a(o,t);e.body=JSON.stringify(r)}const SN="mcp_used/unknown";let TN=!1;function wv(e){for(const t of e)if(wN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return TN}function Cv(e){var t;const o=(t=e[Cf])!==null&&t!==void 0?t:"";e[Cf]=(o+` ${SN}`).trimStart()}function wN(e){return e!==null&&typeof e=="object"&&e instanceof Qf}function CN(e){return Wi(this,arguments,function*(o,a=100){let r,u=0;for(;u<a;){const p=yield At(o.listTools({cursor:r}));for(const g of p.tools)yield yield At(g),u++;if(!p.nextCursor)break;r=p.nextCursor}})}class Qf{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new Qf(t,o)}async initialize(){var t,o,a,r;if(this.mcpTools.length>0)return;const u={},p=[];for(const x of this.mcpClients)try{for(var g=!0,v=(o=void 0,Qi(CN(x))),m;m=await v.next(),t=m.done,!t;g=!0){r=m.value,g=!1;const b=r;p.push(b);const T=b.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=x}}catch(b){o={error:b}}finally{try{!g&&!t&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}this.mcpTools=p,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),nw(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const a of t)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const p=await r.callTool({name:a.name,arguments:a.args},void 0,u);o.push({functionResponse:{name:a.name,response:p.isError?{error:p}:p}})}return o}}async function EN(e,t,o){const a=new JT;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(a,r),t(a)}class _N{constructor(t,o,a){this.apiClient=t,this.auth=o,this.webSocketFactory=a}async connect(t){var o,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),p=MN(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${g}`;let m=()=>{};const x=new Promise(se=>{m=se}),b=t.callbacks,T=function(){m({})},A=this.apiClient,E={onopen:T,onmessage:se=>{EN(A,b.onmessage,se)},onerror:(o=b?.onerror)!==null&&o!==void 0?o:function(se){},onclose:(a=b?.onclose)!==null&&a!==void 0?a:function(se){}},j=this.webSocketFactory.create(v,AN(p),E);j.connect(),await x;const de={setup:{model:en(this.apiClient,t.model)}};return j.send(JSON.stringify(de)),new NN(j,this.apiClient)}}class NN{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=ZC(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=QC(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Ia.PLAY)}pause(){this.sendPlaybackControl(Ia.PAUSE)}stop(){this.sendPlaybackControl(Ia.STOP)}resetContext(){this.sendPlaybackControl(Ia.RESET_CONTEXT)}close(){this.conn.close()}}function AN(e){const t={};return e.forEach((o,a)=>{t[a]=o}),t}function MN(e){const t=new Headers;for(const[o,a]of Object.entries(e))t.append(o,a);return t}const kN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RN(e,t,o){const a=new YT;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const u=JSON.parse(r);if(e.isVertexAI()){const p=nE(u);Object.assign(a,p)}else Object.assign(a,u);t(a)}class IN{constructor(t,o,a){this.apiClient=t,this.auth=o,this.webSocketFactory=a,this.music=new _N(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,a,r,u,p,g;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&wv(t.config.tools)&&Cv(b);const T=UN(b);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const Me=this.apiClient.getApiKey();let Ye="BidiGenerateContent",ct="key";Me?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ye="BidiGenerateContentConstrained",ct="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Ye}?${ct}=${Me}`}let A=()=>{};const E=new Promise(Me=>{A=Me}),j=t.callbacks,I=function(){var Me;(Me=j?.onopen)===null||Me===void 0||Me.call(j),A({})},Y=this.apiClient,de={onopen:I,onmessage:Me=>{RN(Y,j.onmessage,Me)},onerror:(o=j?.onerror)!==null&&o!==void 0?o:function(Me){},onclose:(a=j?.onclose)!==null&&a!==void 0?a:function(Me){}},se=this.webSocketFactory.create(x,LN(T),de);se.connect(),await E;let pe=en(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&pe.startsWith("publishers/")){const Me=this.apiClient.getProject(),Ye=this.apiClient.getLocation();pe=`projects/${Me}/locations/${Ye}/`+pe}let Fe={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Rc.AUDIO]}:t.config.responseModalities=[Rc.AUDIO]),!((u=t.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _e=(g=(p=t.config)===null||p===void 0?void 0:p.tools)!==null&&g!==void 0?g:[],Se=[];for(const Me of _e)if(this.isCallableTool(Me)){const Ye=Me;Se.push(await Ye.tool())}else Se.push(Me);Se.length>0&&(t.config.tools=Se);const et={model:pe,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Fe=WC(this.apiClient,et):Fe=XC(this.apiClient,et),delete Fe.config,se.send(JSON.stringify(Fe)),new DN(se,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const zN={turnComplete:!0};class DN{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let a=[];try{a=ji(o.turns),t.isVertexAI()||(a=a.map(r=>qc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:a,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let a=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?a=o.functionResponses:a=[o.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const u of a){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!t.isVertexAI()&&!("id"in u))throw new Error(kN)}return{toolResponse:{functionResponses:a}}}sendClientContent(t){t=Object.assign(Object.assign({},zN),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:tE(t)}:o={realtimeInput:eE(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function LN(e){const t={};return e.forEach((o,a)=>{t[a]=o}),t}function UN(e){const t=new Headers;for(const[o,a]of Object.entries(e))t.append(o,a);return t}const Ey=10;function _y(e){var t,o,a;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const p of(o=e?.tools)!==null&&o!==void 0?o:[])if(Ba(p)){r=!0;break}if(!r)return!0;const u=(a=e?.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Ba(e){return"callTool"in e&&typeof e.callTool=="function"}function FN(e){var t,o,a;return(a=(o=(t=e.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>Ba(r)))!==null&&a!==void 0?a:!1}function Ny(e){var t;const o=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((a,r)=>{if(Ba(a))return;const u=a;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(r)}),o}function Ay(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class PN extends Po{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var a,r,u,p,g;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!FN(o)||_y(o.config))return await this.generateContentInternal(v);const m=Ny(o);if(m.length>0){const j=m.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${j}.`)}let x,b;const T=ji(v.contents),A=(u=(r=(a=v.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:Ey;let E=0;for(;E<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const j=x.candidates[0].content,I=[];for(const Y of(g=(p=o.config)===null||p===void 0?void 0:p.tools)!==null&&g!==void 0?g:[])if(Ba(Y)){const se=await Y.callTool(x.functionCalls);I.push(...se)}E++,b={role:"user",parts:I},v.contents=ji(v.contents),v.contents.push(j),v.contents.push(b),Ay(v.config)&&(T.push(j),T.push(b))}return Ay(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var a,r,u,p,g;if(this.maybeMoveToResponseJsonSchem(o),_y(o.config)){const b=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(b)}const v=Ny(o);if(v.length>0){const b=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(r=(a=o?.config)===null||a===void 0?void 0:a.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,x=(g=(p=o?.config)===null||p===void 0?void 0:p.automaticFunctionCalling)===null||g===void 0?void 0:g.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(a=>{var r;let u;const p=[];if(a?.generatedImages)for(const v of a.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=v?.safetyAttributes:p.push(v);let g;return u?g={generatedImages:p,positivePromptSafetyAttributes:u,sdkHttpResponse:a.sdkHttpResponse}:g={generatedImages:p,sdkHttpResponse:a.sdkHttpResponse},g}),this.list=async o=>{var a;const p={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!p.config.queryBase){if(!((a=p.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");p.config.filter="labels.tune-type:*"}return new ql(Fo.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(p),p)},this.editImage=async o=>{const a={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(a.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async o=>{let a={numberOfImages:1,mode:"upscale"};o.config&&(a=Object.assign(Object.assign({},a),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var a,r,u,p,g,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=o.video)===null||a===void 0)&&a.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((p=(u=o.source)===null||u===void 0?void 0:u.video)===null||p===void 0)&&p.uri&&(!((v=(g=o.source)===null||g===void 0?void 0:g.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,a,r;const u=(o=t.config)===null||o===void 0?void 0:o.tools;if(!u)return t;const p=await Promise.all(u.map(async v=>Ba(v)?await v.tool():v)),g={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:p})};if(g.config.tools=p,t.config&&t.config.tools&&wv(t.config.tools)){const v=(r=(a=t.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Cv(m),g.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return g}async initAfcToolsMap(t){var o,a,r;const u=new Map;for(const p of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Ba(p)){const g=p,v=await g.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,g)}}return u}async processAfcStream(t){var o,a,r;const u=(r=(a=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Ey;let p=!1,g=0;const v=await this.initAfcToolsMap(t);return(function(m,x,b){return Wi(this,arguments,function*(){for(var T,A,E,j,I,Y;g<u;){p&&(g++,p=!1);const Fe=yield At(m.processParamsMaybeAddMcpUsage(b)),_e=yield At(m.generateContentStreamInternal(Fe)),Se=[],et=[];try{for(var de=!0,se=(A=void 0,Qi(_e)),pe;pe=yield At(se.next()),T=pe.done,!T;de=!0){j=pe.value,de=!1;const Me=j;if(yield yield At(Me),Me.candidates&&(!((I=Me.candidates[0])===null||I===void 0)&&I.content)){et.push(Me.candidates[0].content);for(const Ye of(Y=Me.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(g<u&&Ye.functionCall){if(!Ye.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Ye.functionCall.name)){const ct=yield At(x.get(Ye.functionCall.name).callTool([Ye.functionCall]));Se.push(...ct)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Ye.functionCall.name}`)}}}}catch(Me){A={error:Me}}finally{try{!de&&!T&&(E=se.return)&&(yield At(E.call(se)))}finally{if(A)throw A.error}}if(Se.length>0){p=!0;const Me=new zs;Me.candidates=[{content:{role:"user",parts:Se}}],yield yield At(Me);const Ye=[];Ye.push(...et),Ye.push({role:"user",parts:Se});const ct=ji(b.contents).concat(Ye);b.contents=ct}else break}})})(this,v,t)}async generateContentInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Sy(this.apiClient,t);return g=Ke("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=wy(x),T=new zs;return Object.assign(T,b),T})}else{const m=by(this.apiClient,t);return g=Ke("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=Ty(x),T=new zs;return Object.assign(T,b),T})}}async generateContentStreamInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=Sy(this.apiClient,t);return g=Ke("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.requestStream({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),p.then(function(b){return Wi(this,arguments,function*(){var T,A,E,j;try{for(var I=!0,Y=Qi(b),de;de=yield At(Y.next()),T=de.done,!T;I=!0){j=de.value,I=!1;const se=j,pe=wy(yield At(se.json()));pe.sdkHttpResponse={headers:se.headers};const Fe=new zs;Object.assign(Fe,pe),yield yield At(Fe)}}catch(se){A={error:se}}finally{try{!I&&!T&&(E=Y.return)&&(yield At(E.call(Y)))}finally{if(A)throw A.error}}})})}else{const m=by(this.apiClient,t);return g=Ke("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.requestStream({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}),p.then(function(b){return Wi(this,arguments,function*(){var T,A,E,j;try{for(var I=!0,Y=Qi(b),de;de=yield At(Y.next()),T=de.done,!T;I=!0){j=de.value,I=!1;const se=j,pe=Ty(yield At(se.json()));pe.sdkHttpResponse={headers:se.headers};const Fe=new zs;Object.assign(Fe,pe),yield yield At(Fe)}}catch(se){A={error:se}}finally{try{!I&&!T&&(E=Y.return)&&(yield At(E.call(Y)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=IE(this.apiClient,t);return g=Ke("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=DE(x),T=new iy;return Object.assign(T,b),T})}else{const m=RE(this.apiClient,t);return g=Ke("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=zE(x),T=new iy;return Object.assign(T,b),T})}}async generateImagesInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=qE(this.apiClient,t);return g=Ke("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=YE(x),T=new oy;return Object.assign(T,b),T})}else{const m=jE(this.apiClient,t);return g=Ke("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=$E(x),T=new oy;return Object.assign(T,b),T})}}async editImageInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=NE(this.apiClient,t);return u=Ke("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=AE(v),x=new UT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=q_(this.apiClient,t);return u=Ke("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=$_(v),x=new FT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=__(this.apiClient,t);return u=Ke("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=N_(v),x=new PT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=z_(this.apiClient,t);return u=Ke("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=D_(v),x=new BT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=u_(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>wf(x))}else{const m=c_(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>Tf(x))}}async listInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=x_(this.apiClient,t);return g=Ke("{models_url}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=S_(x),T=new ly;return Object.assign(T,b),T})}else{const m=v_(this.apiClient,t);return g=Ke("{models_url}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=b_(x),T=new ly;return Object.assign(T,b),T})}}async update(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=V_(this.apiClient,t);return g=Ke("{model}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>wf(x))}else{const m=G_(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>Tf(x))}}async delete(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=wE(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=EE(x),T=new ay;return Object.assign(T,b),T})}else{const m=TE(this.apiClient,t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=CE(x),T=new ay;return Object.assign(T,b),T})}}async countTokens(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=xE(this.apiClient,t);return g=Ke("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=SE(x),T=new sy;return Object.assign(T,b),T})}else{const m=vE(this.apiClient,t);return g=Ke("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=bE(x),T=new sy;return Object.assign(T,b),T})}}async computeTokens(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=dE(this.apiClient,t);return u=Ke("{model}:computeTokens",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=fE(v),x=new HT;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=ZE(this.apiClient,t);return g=Ke("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p.then(x=>{const b=WE(x),T=new Ic;return Object.assign(T,b),T})}else{const m=QE(this.apiClient,t);return g=Ke("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p.then(x=>{const b=XE(x),T=new Ic;return Object.assign(T,b),T})}}}class BN extends Po{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,a=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:p,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,a=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:p,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=kT(t);return g=Ke("{operationName}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),p}else{const m=MT(t);return g=Ke("{operationName}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json()),p}}async fetchPredictVideosOperationInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=TT(t);return u=Ke("{resourceName}:fetchPredictOperation",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function HN(e){const t={},o=c(e,["data"]);if(o!=null&&f(t,["data"],o),c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function ON(e){const t={},o=c(e,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>XN(u))),f(t,["parts"],r)}const a=c(e,["role"]);return a!=null&&f(t,["role"],a),t}function GN(e,t,o){const a={},r=c(t,["expireTime"]);o!==void 0&&r!=null&&f(o,["expireTime"],r);const u=c(t,["newSessionExpireTime"]);o!==void 0&&u!=null&&f(o,["newSessionExpireTime"],u);const p=c(t,["uses"]);o!==void 0&&p!=null&&f(o,["uses"],p);const g=c(t,["liveConnectConstraints"]);o!==void 0&&g!=null&&f(o,["bidiGenerateContentSetup"],KN(e,g));const v=c(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&f(o,["fieldMask"],v),a}function VN(e,t){const o={},a=c(t,["config"]);return a!=null&&f(o,["config"],GN(e,a,o)),o}function jN(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(e,["fileUri"]);o!=null&&f(t,["fileUri"],o);const a=c(e,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function qN(e){const t={},o=c(e,["id"]);o!=null&&f(t,["id"],o);const a=c(e,["args"]);a!=null&&f(t,["args"],a);const r=c(e,["name"]);if(r!=null&&f(t,["name"],r),c(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function $N(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(e,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function YN(e){const t={};if(c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(e,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function JN(e,t){const o={},a=c(e,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],a);const r=c(e,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const u=c(e,["temperature"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","temperature"],u);const p=c(e,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const g=c(e,["topK"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","topK"],g);const v=c(e,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(e,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(e,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(e,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Wf(b));const T=c(e,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const A=c(e,["enableAffectiveDialog"]);t!==void 0&&A!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],A);const E=c(e,["systemInstruction"]);t!==void 0&&E!=null&&f(t,["setup","systemInstruction"],ON(li(E)));const j=c(e,["tools"]);if(t!==void 0&&j!=null){let _e=ja(j);Array.isArray(_e)&&(_e=_e.map(Se=>QN(Va(Se)))),f(t,["setup","tools"],_e)}const I=c(e,["sessionResumption"]);t!==void 0&&I!=null&&f(t,["setup","sessionResumption"],WN(I));const Y=c(e,["inputAudioTranscription"]);t!==void 0&&Y!=null&&f(t,["setup","inputAudioTranscription"],Y);const de=c(e,["outputAudioTranscription"]);t!==void 0&&de!=null&&f(t,["setup","outputAudioTranscription"],de);const se=c(e,["realtimeInputConfig"]);t!==void 0&&se!=null&&f(t,["setup","realtimeInputConfig"],se);const pe=c(e,["contextWindowCompression"]);t!==void 0&&pe!=null&&f(t,["setup","contextWindowCompression"],pe);const Fe=c(e,["proactivity"]);if(t!==void 0&&Fe!=null&&f(t,["setup","proactivity"],Fe),c(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function KN(e,t){const o={},a=c(t,["model"]);a!=null&&f(o,["setup","model"],en(e,a));const r=c(t,["config"]);return r!=null&&f(o,["config"],JN(r,o)),o}function XN(e){const t={},o=c(e,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const a=c(e,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(e,["executableCode"]);r!=null&&f(t,["executableCode"],r);const u=c(e,["fileData"]);u!=null&&f(t,["fileData"],jN(u));const p=c(e,["functionCall"]);p!=null&&f(t,["functionCall"],qN(p));const g=c(e,["functionResponse"]);g!=null&&f(t,["functionResponse"],g);const v=c(e,["inlineData"]);v!=null&&f(t,["inlineData"],HN(v));const m=c(e,["text"]);m!=null&&f(t,["text"],m);const x=c(e,["thought"]);x!=null&&f(t,["thought"],x);const b=c(e,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(e,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function WN(e){const t={},o=c(e,["handle"]);if(o!=null&&f(t,["handle"],o),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function QN(e){const t={},o=c(e,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(e,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(e,["computerUse"]);r!=null&&f(t,["computerUse"],r);const u=c(e,["fileSearch"]);u!=null&&f(t,["fileSearch"],u);const p=c(e,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=c(e,["googleMaps"]);g!=null&&f(t,["googleMaps"],$N(g));const v=c(e,["googleSearch"]);v!=null&&f(t,["googleSearch"],YN(v));const m=c(e,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function ZN(e){const t=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(u=>`${o}.${u}`);t.push(...r)}else t.push(o)}return t.join(",")}function eA(e,t){let o=null;const a=e.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const u=a.setup;typeof u=="object"&&u!==null?(e.bidiGenerateContentSetup=u,o=u):delete e.bidiGenerateContentSetup}else a!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(o){const u=ZN(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)u?e.fieldMask=u:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const p=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];r.length>0&&(g=r.map(m=>p.includes(m)?`generationConfig.${m}`:m));const v=[];u&&v.push(u),g.length>0&&v.push(...g),v.length>0?e.fieldMask=v.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class tA extends Po{constructor(t){super(),this.apiClient=t}async create(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=VN(this.apiClient,t);u=Ke("auth_tokens",g._url),p=g._query,delete g.config,delete g._url,delete g._query;const v=eA(g,t.config);return r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function nA(e,t){const o={},a=c(e,["force"]);return t!==void 0&&a!=null&&f(t,["_query","force"],a),o}function iA(e){const t={},o=c(e,["name"]);o!=null&&f(t,["_url","name"],o);const a=c(e,["config"]);return a!=null&&nA(a,t),t}function oA(e){const t={},o=c(e,["name"]);return o!=null&&f(t,["_url","name"],o),t}function lA(e,t){const o={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(e,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function aA(e){const t={},o=c(e,["parent"]);o!=null&&f(t,["_url","parent"],o);const a=c(e,["config"]);return a!=null&&lA(a,t),t}function sA(e){const t={},o=c(e,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const a=c(e,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(e,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),f(t,["documents"],u)}return t}class rA extends Po{constructor(t){super(),this.apiClient=t,this.list=async o=>new ql(Fo.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:o.parent,config:a.config}),await this.listInternal(o),o)}async get(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=oA(t);return u=Ke("{name}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=iA(t);r=Ke("{name}",p._url),u=p._query,delete p._url,delete p._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=aA(t);return u=Ke("{parent}/documents",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=sA(v),x=new OT;return Object.assign(x,m),x})}}}class cA extends Po{constructor(t,o=new rA(t)){super(),this.apiClient=t,this.documents=o,this.list=async(a={})=>new ql(Fo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(a),a)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Z_(t);return u=Ke("fileSearchStores",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=nN(t);return u=Ke("{name}",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tN(t);r=Ke("{name}",p._url),u=p._query,delete p._url,delete p._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=rN(t);return u=Ke("fileSearchStores",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=cN(v),x=new GT;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=uN(t);return u=Ke("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=dN(v),x=new VT;return Object.assign(x,m),x})}}async importFile(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=lN(t);return u=Ke("{file_search_store_name}:importFile",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),r.then(v=>{const m=oN(v),x=new $f;return Object.assign(x,m),x})}}}let Ev=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return Ev=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),o=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(+a^o()&15>>+a/4).toString(16))};const uA=()=>Ev();function Ef(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const _f=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class qi extends Error{}class di extends qi{constructor(t,o,a,r){super(`${di.makeMessage(t,o,a)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,a){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):a;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,a,r){if(!t||!r)return new Jc({message:a,cause:_f(o)});const u=o;return t===400?new Nv(t,u,a,r):t===401?new Av(t,u,a,r):t===403?new Mv(t,u,a,r):t===404?new kv(t,u,a,r):t===409?new Rv(t,u,a,r):t===422?new Iv(t,u,a,r):t===429?new zv(t,u,a,r):t>=500?new Dv(t,u,a,r):new di(t,u,a,r)}}class Nf extends di{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Jc extends di{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class _v extends Jc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Nv extends di{}class Av extends di{}class Mv extends di{}class kv extends di{}class Rv extends di{}class Iv extends di{}class zv extends di{}class Dv extends di{}const dA=/^[a-z][a-z0-9+.-]*:/i,fA=e=>dA.test(e);let Af=e=>(Af=Array.isArray,Af(e));const pA=Af;let hA=pA;const My=hA;function mA(e){if(!e)return!0;for(const t in e)return!1;return!0}function gA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const yA=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new qi(`${e} must be an integer`);if(t<0)throw new qi(`${e} must be a positive integer`);return t},vA=e=>{try{return JSON.parse(e)}catch{return}};const xA=e=>new Promise(t=>setTimeout(t,e));const Ma="0.0.1";function bA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const SA=()=>{var e,t,o,a,r;const u=bA();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":Ry(Deno.build.os),"X-Stainless-Arch":ky(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":Ry((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":ky((a=globalThis.process.arch)!==null&&a!==void 0?a:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const p=TA();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function TA(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of e){const a=o.exec(navigator.userAgent);if(a){const r=a[1]||0,u=a[2]||0,p=a[3]||0;return{browser:t,version:`${r}.${u}.${p}`}}}return null}const ky=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ry=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let dc;const wA=()=>dc??(dc=SA());function CA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Lv(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function EA(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Lv({start(){},async pull(o){const{done:a,value:r}=await t.next();a?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Uv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _A(e){var t,o;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((o=(t=e[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const a=e.getReader(),r=a.cancel();a.releaseLock(),await r}const NA=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const Fv=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function of(e,t,o){return Fv(),new File(e,t??"unknown_file",o)}function AA(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const MA=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";const Pv=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",kA=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Pv(e),RA=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function IA(e,t,o){if(Fv(),e=await e,kA(e))return e instanceof File?e:of([await e.arrayBuffer()],e.name);if(RA(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),of(await Mf(r),t,o)}const a=await Mf(e);if(t||(t=AA(e)),!o?.type){const r=a.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return of(a,t,o)}async function Mf(e){var t,o,a,r,u;let p=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)p.push(e);else if(Pv(e))p.push(e instanceof Blob?e:await e.arrayBuffer());else if(MA(e))try{for(var g=!0,v=Qi(e),m;m=await v.next(),t=m.done,!t;g=!0){r=m.value,g=!1;const x=r;p.push(...await Mf(x))}}catch(x){o={error:x}}finally{try{!g&&!t&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}else{const x=(u=e?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof e}${x?`; constructor: ${x}`:""}${zA(e)}`)}return p}function zA(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(o=>`"${o}"`).join(", ")}]`}class Bv{constructor(t){this._client=t}}Bv._key=[];function Hv(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Iy=Object.freeze(Object.create(null)),DA=(e=Hv)=>(function(o,...a){if(o.length===1)return o[0];let r=!1;const u=[],p=o.reduce((x,b,T)=>{var A,E,j;/[?#]/.test(b)&&(r=!0);const I=a[T];let Y=(r?encodeURIComponent:e)(""+I);return T!==a.length&&(I==null||typeof I=="object"&&I.toString===((j=Object.getPrototypeOf((E=Object.getPrototypeOf((A=I.hasOwnProperty)!==null&&A!==void 0?A:Iy))!==null&&E!==void 0?E:Iy))===null||j===void 0?void 0:j.toString))&&(Y=I+"",u.push({start:x.length+b.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),x+b+(T===a.length?"":Y)},""),g=p.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(g))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((x,b)=>x.start-b.start),u.length>0){let x=0;const b=u.reduce((T,A)=>{const E=" ".repeat(A.start-x),j="^".repeat(A.length);return x=A.start+A.length,T+E+j},"");throw new qi(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${p}
${b}`)}return p}),fc=DA(Hv);class Ov extends Bv{create(t,o){var a;const{api_version:r=this._client.apiVersion}=t,u=Dc(t,["api_version"]);if("model"in u&&"agent_config"in u)throw new qi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new qi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(fc`/${r}/interactions`,Object.assign(Object.assign({body:u},o),{stream:(a=t.stream)!==null&&a!==void 0?a:!1}))}delete(t,o={},a){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(fc`/${r}/interactions/${t}`,a)}cancel(t,o={},a){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(fc`/${r}/interactions/${t}/cancel`,a)}get(t,o={},a){var r;const u=o??{},{api_version:p=this._client.apiVersion}=u,g=Dc(u,["api_version"]);return this._client.get(fc`/${p}/interactions/${t}`,Object.assign(Object.assign({query:g},a),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}Ov._key=Object.freeze(["interactions"]);class Gv extends Ov{}function LA(e){let t=0;for(const r of e)t+=r.length;const o=new Uint8Array(t);let a=0;for(const r of e)o.set(r,a),a+=r.length;return o}let pc;function Zf(e){let t;return(pc??(t=new globalThis.TextEncoder,pc=t.encode.bind(t)))(e)}let hc;function zy(e){let t;return(hc??(t=new globalThis.TextDecoder,hc=t.decode.bind(t)))(e)}class Kc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Zf(t):t;this.buffer=LA([this.buffer,o]);const a=[];let r;for(;(r=UA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){a.push(zy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,p=zy(this.buffer.subarray(0,u));a.push(p),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return a}flush(){return this.buffer.length?this.decode(`
`):[]}}Kc.NEWLINE_CHARS=new Set([`
`,"\r"]);Kc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function UA(e,t){for(let r=t??0;r<e.length;r++){if(e[r]===10)return{preceding:r,index:r+1,carriage:!1};if(e[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function FA(e){for(let a=0;a<e.length-1;a++){if(e[a]===10&&e[a+1]===10||e[a]===13&&e[a+1]===13)return a+2;if(e[a]===13&&e[a+1]===10&&a+3<e.length&&e[a+2]===13&&e[a+3]===10)return a+4}return-1}const Lc={off:0,error:200,warn:300,info:400,debug:500},Dy=(e,t,o)=>{if(e){if(gA(Lc,e))return e;ui(o).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Lc))}`)}};function Hs(){}function mc(e,t,o){return!t||Lc[e]>Lc[o]?Hs:t[e].bind(t)}const PA={error:Hs,warn:Hs,info:Hs,debug:Hs};let Ly=new WeakMap;function ui(e){var t;const o=e.logger,a=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!o)return PA;const r=Ly.get(o);if(r&&r[0]===a)return r[1];const u={error:mc("error",o,a),warn:mc("warn",o,a),info:mc("info",o,a),debug:mc("debug",o,a)};return Ly.set(o,[a,u]),u}const Pl=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class za{constructor(t,o,a){this.iterator=t,this.controller=o,this.client=a}static fromSSEResponse(t,o,a){let r=!1;const u=a?ui(a):console;function p(){return Wi(this,arguments,function*(){var v,m,x,b;if(r)throw new qi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,E=Qi(BA(t,o)),j;j=yield At(E.next()),v=j.done,!v;A=!0){b=j.value,A=!1;const I=b;if(!T)if(I.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield At(JSON.parse(I.data))}catch(Y){throw u.error("Could not parse message into JSON:",I.data),u.error("From chunk:",I.raw),Y}}}catch(I){m={error:I}}finally{try{!A&&!v&&(x=E.return)&&(yield At(x.call(E)))}finally{if(m)throw m.error}}T=!0}catch(I){if(Ef(I))return yield At(void 0);throw I}finally{T||o.abort()}})}return new za(p,o,a)}static fromReadableStream(t,o,a){let r=!1;function u(){return Wi(this,arguments,function*(){var v,m,x,b;const T=new Kc,A=Uv(t);try{for(var E=!0,j=Qi(A),I;I=yield At(j.next()),v=I.done,!v;E=!0){b=I.value,E=!1;const Y=b;for(const de of T.decode(Y))yield yield At(de)}}catch(Y){m={error:Y}}finally{try{!E&&!v&&(x=j.return)&&(yield At(x.call(j)))}finally{if(m)throw m.error}}for(const Y of T.flush())yield yield At(Y)})}function p(){return Wi(this,arguments,function*(){var v,m,x,b;if(r)throw new qi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,E=Qi(u()),j;j=yield At(E.next()),v=j.done,!v;A=!0){b=j.value,A=!1;const I=b;T||I&&(yield yield At(JSON.parse(I)))}}catch(I){m={error:I}}finally{try{!A&&!v&&(x=E.return)&&(yield At(x.call(E)))}finally{if(m)throw m.error}}T=!0}catch(I){if(Ef(I))return yield At(void 0);throw I}finally{T||o.abort()}})}return new za(p,o,a)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],a=this.iterator(),r=u=>({next:()=>{if(u.length===0){const p=a.next();t.push(p),o.push(p)}return u.shift()}});return[new za(()=>r(t),this.controller,this.client),new za(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Lv({async start(){o=t[Symbol.asyncIterator]()},async pull(a){try{const{value:r,done:u}=await o.next();if(u)return a.close();const p=Zf(JSON.stringify(r)+`
`);a.enqueue(p)}catch(r){a.error(r)}},async cancel(){var a;await((a=o.return)===null||a===void 0?void 0:a.call(o))}})}}function BA(e,t){return Wi(this,arguments,function*(){var a,r,u,p;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new qi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new qi("Attempted to iterate over a response with no body");const g=new OA,v=new Kc,m=Uv(e.body);try{for(var x=!0,b=Qi(HA(m)),T;T=yield At(b.next()),a=T.done,!a;x=!0){p=T.value,x=!1;const A=p;for(const E of v.decode(A)){const j=g.decode(E);j&&(yield yield At(j))}}}catch(A){r={error:A}}finally{try{!x&&!a&&(u=b.return)&&(yield At(u.call(b)))}finally{if(r)throw r.error}}for(const A of v.flush()){const E=g.decode(A);E&&(yield yield At(E))}})}function HA(e){return Wi(this,arguments,function*(){var o,a,r,u;let p=new Uint8Array;try{for(var g=!0,v=Qi(e),m;m=yield At(v.next()),o=m.done,!o;g=!0){u=m.value,g=!1;const x=u;if(x==null)continue;const b=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?Zf(x):x;let T=new Uint8Array(p.length+b.length);T.set(p),T.set(b,p.length),p=T;let A;for(;(A=FA(p))!==-1;)yield yield At(p.slice(0,A)),p=p.slice(A)}}catch(x){a={error:x}}finally{try{!g&&!o&&(r=v.return)&&(yield At(r.call(v)))}finally{if(a)throw a.error}}p.length>0&&(yield yield At(p))})}class OA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,a,r]=GA(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function GA(e,t){const o=e.indexOf(t);return o!==-1?[e.substring(0,o),t,e.substring(o+t.length)]:[e,"",""]}async function VA(e,t){const{response:o,requestLogID:a,retryOfRequestLogID:r,startTime:u}=t,p=await(async()=>{var g;if(t.options.stream)return ui(e).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,e):za.fromSSEResponse(o,t.controller,e);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(g=v?.split(";")[0])===null||g===void 0?void 0:g.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return ui(e).debug(`[${a}] response parsed`,Pl({retryOfRequestLogID:r,url:o.url,status:o.status,body:p,durationMs:Date.now()-u})),p}class ep extends Promise{constructor(t,o,a=VA){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=a,this.client=t}_thenUnwrap(t){return new ep(this.client,this.responsePromise,async(o,a)=>t(await this.parseResponse(o,a),a))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const Vv=Symbol("brand.privateNullableHeaders");function*jA(e){if(!e)return;if(Vv in e){const{values:a,nulls:r}=e;yield*a.entries();for(const u of r)yield[u,null];return}let t=!1,o;e instanceof Headers?o=e.entries():My(e)?o=e:(t=!0,o=Object.entries(e??{}));for(let a of o){const r=a[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=My(a[1])?a[1]:[a[1]];let p=!1;for(const g of u)g!==void 0&&(t&&!p&&(p=!0,yield[r,null]),yield[r,g])}}const Ds=e=>{const t=new Headers,o=new Set;for(const a of e){const r=new Set;for(const[u,p]of jA(a)){const g=u.toLowerCase();r.has(g)||(t.delete(u),r.add(g)),p===null?(t.delete(u),o.add(g)):(t.append(u,p),o.delete(g))}}return{[Vv]:!0,values:t,nulls:o}};const lf=e=>{var t,o,a,r,u,p;if(typeof globalThis.process<"u")return(a=(o=(t=gT)===null||t===void 0?void 0:t[e])===null||o===void 0?void 0:o.trim())!==null&&a!==void 0?a:void 0;if(typeof globalThis.Deno<"u")return(p=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,e))===null||p===void 0?void 0:p.trim()};var jv;class Xc{constructor(t){var o,a,r,u,p,g,v,{baseURL:m=lf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=lf("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:b="v1beta"}=t,T=Dc(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:b},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(a=A.timeout)!==null&&a!==void 0?a:Xc.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const E="warn";this.logLevel=E,this.logLevel=(p=(u=Dy(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:Dy(lf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:E,this.fetchOptions=A.fetchOptions,this.maxRetries=(g=A.maxRetries)!==null&&g!==void 0?g:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:CA(),this.encoder=NA,this._options=A,this.apiKey=x,this.apiVersion=b,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=Ds([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Ds([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ds([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,a])=>typeof a<"u").map(([o,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(o)}=`;throw new qi(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ma}`}defaultIdempotencyKey(){return`stainless-node-retry-${uA()}`}makeStatusError(t,o,a,r){return di.generate(t,o,a,r)}buildURL(t,o,a){const r=!this.baseURLOverridden()&&a||this.baseURL,u=fA(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),p=this.defaultQuery();return mA(p)||(o=Object.assign(Object.assign({},p),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(u.search=this.stringifyQuery(o)),u.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:a}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,a){return this.request(Promise.resolve(a).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new ep(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,a){var r,u,p;const g=await t,v=(r=g.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(g);const{req:m,url:x,timeout:b}=await this.buildRequest(g,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:g});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=a===void 0?"":`, retryOf: ${a}`,E=Date.now();if(ui(this).debug(`[${T}] sending request`,Pl({retryOfRequestLogID:a,method:g.method,url:x,options:g,headers:m.headers})),!((u=g.signal)===null||u===void 0)&&u.aborted)throw new Nf;const j=new AbortController,I=await this.fetchWithTimeout(x,m,b,j).catch(_f),Y=Date.now();if(I instanceof globalThis.Error){const se=`retrying, ${o} attempts remaining`;if(!((p=g.signal)===null||p===void 0)&&p.aborted)throw new Nf;const pe=Ef(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(o)return ui(this).info(`[${T}] connection ${pe?"timed out":"failed"} - ${se}`),ui(this).debug(`[${T}] connection ${pe?"timed out":"failed"} (${se})`,Pl({retryOfRequestLogID:a,url:x,durationMs:Y-E,message:I.message})),this.retryRequest(g,o,a??T);throw ui(this).info(`[${T}] connection ${pe?"timed out":"failed"} - error; no more retries left`),ui(this).debug(`[${T}] connection ${pe?"timed out":"failed"} (error; no more retries left)`,Pl({retryOfRequestLogID:a,url:x,durationMs:Y-E,message:I.message})),pe?new _v:new Jc({cause:I})}const de=`[${T}${A}] ${m.method} ${x} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${Y-E}ms`;if(!I.ok){const se=await this.shouldRetry(I);if(o&&se){const Me=`retrying, ${o} attempts remaining`;return await _A(I.body),ui(this).info(`${de} - ${Me}`),ui(this).debug(`[${T}] response error (${Me})`,Pl({retryOfRequestLogID:a,url:I.url,status:I.status,headers:I.headers,durationMs:Y-E})),this.retryRequest(g,o,a??T,I.headers)}const pe=se?"error; no more retries left":"error; not retryable";ui(this).info(`${de} - ${pe}`);const Fe=await I.text().catch(Me=>_f(Me).message),_e=vA(Fe),Se=_e?void 0:Fe;throw ui(this).debug(`[${T}] response error (${pe})`,Pl({retryOfRequestLogID:a,url:I.url,status:I.status,headers:I.headers,message:Se,durationMs:Date.now()-E})),this.makeStatusError(I.status,_e,Se,I.headers)}return ui(this).info(de),ui(this).debug(`[${T}] response start`,Pl({retryOfRequestLogID:a,url:I.url,status:I.status,headers:I.headers,durationMs:Y-E})),{response:I,options:g,controller:j,requestLogID:T,retryOfRequestLogID:a,startTime:E}}async fetchWithTimeout(t,o,a,r){const u=o||{},{signal:p,method:g}=u,v=Dc(u,["signal","method"]);p&&p.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),a),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);g&&(b.method=g.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,a,r){var u;let p;const g=r?.get("retry-after-ms");if(g){const m=parseFloat(g);Number.isNaN(m)||(p=m)}const v=r?.get("retry-after");if(v&&!p){const m=parseFloat(v);Number.isNaN(m)?p=Date.parse(v)-Date.now():p=m*1e3}if(!(p&&0<=p&&p<60*1e3)){const m=(u=t.maxRetries)!==null&&u!==void 0?u:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(o,m)}return await xA(p),this.makeRequest(t,o-1,a)}calculateDefaultRetryTimeoutMillis(t,o){const u=o-t,p=Math.min(.5*Math.pow(2,u),8),g=1-Math.random()*.25;return p*g*1e3}async buildRequest(t,{retryCount:o=0}={}){var a,r,u;const p=Object.assign({},t),{method:g,path:v,query:m,defaultBaseURL:x}=p,b=this.buildURL(v,m,x);"timeout"in p&&yA("timeout",p.timeout),p.timeout=(a=p.timeout)!==null&&a!==void 0?a:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:p}),E=await this.buildHeaders({options:t,method:g,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:E},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=p.fetchOptions)!==null&&u!==void 0?u:{}),url:b,timeout:p.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:a,retryCount:r}){let u={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=t.idempotencyKey);const p=await this.authHeaders(t);let g=Ds([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),wA()),this._options.defaultHeaders,a,t.headers,p]);return this.validateHeaders(g),g.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const a=Ds([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&a.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:EA(t)}:this.encoder({body:t,headers:a})}}Xc.DEFAULT_TIMEOUT=6e4;class Yn extends Xc{constructor(){super(...arguments),this.interactions=new Gv(this)}}jv=Yn;Yn.GeminiNextGenAPIClient=jv;Yn.GeminiNextGenAPIClientError=qi;Yn.APIError=di;Yn.APIConnectionError=Jc;Yn.APIConnectionTimeoutError=_v;Yn.APIUserAbortError=Nf;Yn.NotFoundError=kv;Yn.ConflictError=Rv;Yn.RateLimitError=zv;Yn.BadRequestError=Nv;Yn.AuthenticationError=Av;Yn.InternalServerError=Dv;Yn.PermissionDeniedError=Mv;Yn.UnprocessableEntityError=Iv;Yn.toFile=IA;Yn.Interactions=Gv;function qA(e,t){const o={},a=c(e,["name"]);return a!=null&&f(o,["_url","name"],a),o}function $A(e,t){const o={},a=c(e,["name"]);return a!=null&&f(o,["_url","name"],a),o}function YA(e,t){const o={},a=c(e,["sdkHttpResponse"]);return a!=null&&f(o,["sdkHttpResponse"],a),o}function JA(e,t){const o={},a=c(e,["sdkHttpResponse"]);return a!=null&&f(o,["sdkHttpResponse"],a),o}function KA(e,t,o){const a={};if(c(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&f(t,["displayName"],r),c(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(e,["epochCount"]);t!==void 0&&u!=null&&f(t,["tuningTask","hyperparameters","epochCount"],u);const p=c(e,["learningRateMultiplier"]);if(p!=null&&f(a,["tuningTask","hyperparameters","learningRateMultiplier"],p),c(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=c(e,["batchSize"]);t!==void 0&&g!=null&&f(t,["tuningTask","hyperparameters","batchSize"],g);const v=c(e,["learningRate"]);if(t!==void 0&&v!=null&&f(t,["tuningTask","hyperparameters","learningRate"],v),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return a}function XA(e,t,o){const a={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=c(e,["validationDataset"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec"],Uy(A))}else if(r==="PREFERENCE_TUNING"){const A=c(e,["validationDataset"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec"],Uy(A))}const u=c(e,["tunedModelDisplayName"]);t!==void 0&&u!=null&&f(t,["tunedModelDisplayName"],u);const p=c(e,["description"]);t!==void 0&&p!=null&&f(t,["description"],p);let g=c(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=c(e,["epochCount"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(g==="PREFERENCE_TUNING"){const A=c(e,["epochCount"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=c(e,["learningRateMultiplier"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=c(e,["learningRateMultiplier"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=c(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=c(e,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=c(e,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=c(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=c(e,["adapterSize"]);t!==void 0&&A!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=c(e,["adapterSize"]);t!==void 0&&A!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=c(e,["labels"]);t!==void 0&&b!=null&&f(t,["labels"],b);const T=c(e,["beta"]);return t!==void 0&&T!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),a}function WA(e,t){const o={},a=c(e,["baseModel"]);a!=null&&f(o,["baseModel"],a);const r=c(e,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const u=c(e,["trainingDataset"]);u!=null&&rM(u);const p=c(e,["config"]);return p!=null&&KA(p,o),o}function QA(e,t){const o={},a=c(e,["baseModel"]);a!=null&&f(o,["baseModel"],a);const r=c(e,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const u=c(e,["trainingDataset"]);u!=null&&cM(u,o,t);const p=c(e,["config"]);return p!=null&&XA(p,o,t),o}function ZA(e,t){const o={},a=c(e,["name"]);return a!=null&&f(o,["_url","name"],a),o}function eM(e,t){const o={},a=c(e,["name"]);return a!=null&&f(o,["_url","name"],a),o}function tM(e,t,o){const a={},r=c(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const u=c(e,["pageToken"]);t!==void 0&&u!=null&&f(t,["_query","pageToken"],u);const p=c(e,["filter"]);return t!==void 0&&p!=null&&f(t,["_query","filter"],p),a}function nM(e,t,o){const a={},r=c(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const u=c(e,["pageToken"]);t!==void 0&&u!=null&&f(t,["_query","pageToken"],u);const p=c(e,["filter"]);return t!==void 0&&p!=null&&f(t,["_query","filter"],p),a}function iM(e,t){const o={},a=c(e,["config"]);return a!=null&&tM(a,o),o}function oM(e,t){const o={},a=c(e,["config"]);return a!=null&&nM(a,o),o}function lM(e,t){const o={},a=c(e,["sdkHttpResponse"]);a!=null&&f(o,["sdkHttpResponse"],a);const r=c(e,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const u=c(e,["tunedModels"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>qv(g))),f(o,["tuningJobs"],p)}return o}function aM(e,t){const o={},a=c(e,["sdkHttpResponse"]);a!=null&&f(o,["sdkHttpResponse"],a);const r=c(e,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const u=c(e,["tuningJobs"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>kf(g))),f(o,["tuningJobs"],p)}return o}function sM(e,t){const o={},a=c(e,["name"]);a!=null&&f(o,["model"],a);const r=c(e,["name"]);return r!=null&&f(o,["endpoint"],r),o}function rM(e,t){const o={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=c(e,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),f(o,["examples","examples"],r)}return o}function cM(e,t,o){const a={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const p=c(e,["gcsUri"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],p)}else if(r==="PREFERENCE_TUNING"){const p=c(e,["gcsUri"]);t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],p)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const p=c(e,["vertexDatasetResource"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],p)}else if(u==="PREFERENCE_TUNING"){const p=c(e,["vertexDatasetResource"]);t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],p)}if(c(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function qv(e,t){const o={},a=c(e,["sdkHttpResponse"]);a!=null&&f(o,["sdkHttpResponse"],a);const r=c(e,["name"]);r!=null&&f(o,["name"],r);const u=c(e,["state"]);u!=null&&f(o,["state"],sv(u));const p=c(e,["createTime"]);p!=null&&f(o,["createTime"],p);const g=c(e,["tuningTask","startTime"]);g!=null&&f(o,["startTime"],g);const v=c(e,["tuningTask","completeTime"]);v!=null&&f(o,["endTime"],v);const m=c(e,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(e,["description"]);x!=null&&f(o,["description"],x);const b=c(e,["baseModel"]);b!=null&&f(o,["baseModel"],b);const T=c(e,["_self"]);return T!=null&&f(o,["tunedModel"],sM(T)),o}function kf(e,t){const o={},a=c(e,["sdkHttpResponse"]);a!=null&&f(o,["sdkHttpResponse"],a);const r=c(e,["name"]);r!=null&&f(o,["name"],r);const u=c(e,["state"]);u!=null&&f(o,["state"],sv(u));const p=c(e,["createTime"]);p!=null&&f(o,["createTime"],p);const g=c(e,["startTime"]);g!=null&&f(o,["startTime"],g);const v=c(e,["endTime"]);v!=null&&f(o,["endTime"],v);const m=c(e,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(e,["error"]);x!=null&&f(o,["error"],x);const b=c(e,["description"]);b!=null&&f(o,["description"],b);const T=c(e,["baseModel"]);T!=null&&f(o,["baseModel"],T);const A=c(e,["tunedModel"]);A!=null&&f(o,["tunedModel"],A);const E=c(e,["preTunedModel"]);E!=null&&f(o,["preTunedModel"],E);const j=c(e,["supervisedTuningSpec"]);j!=null&&f(o,["supervisedTuningSpec"],j);const I=c(e,["preferenceOptimizationSpec"]);I!=null&&f(o,["preferenceOptimizationSpec"],I);const Y=c(e,["tuningDataStats"]);Y!=null&&f(o,["tuningDataStats"],Y);const de=c(e,["encryptionSpec"]);de!=null&&f(o,["encryptionSpec"],de);const se=c(e,["partnerModelTuningSpec"]);se!=null&&f(o,["partnerModelTuningSpec"],se);const pe=c(e,["customBaseModel"]);pe!=null&&f(o,["customBaseModel"],pe);const Fe=c(e,["experiment"]);Fe!=null&&f(o,["experiment"],Fe);const _e=c(e,["labels"]);_e!=null&&f(o,["labels"],_e);const Se=c(e,["outputUri"]);Se!=null&&f(o,["outputUri"],Se);const et=c(e,["pipelineJob"]);et!=null&&f(o,["pipelineJob"],et);const Me=c(e,["serviceAccount"]);Me!=null&&f(o,["serviceAccount"],Me);const Ye=c(e,["tunedModelDisplayName"]);Ye!=null&&f(o,["tunedModelDisplayName"],Ye);const ct=c(e,["veoTuningSpec"]);return ct!=null&&f(o,["veoTuningSpec"],ct),o}function uM(e,t){const o={},a=c(e,["sdkHttpResponse"]);a!=null&&f(o,["sdkHttpResponse"],a);const r=c(e,["name"]);r!=null&&f(o,["name"],r);const u=c(e,["metadata"]);u!=null&&f(o,["metadata"],u);const p=c(e,["done"]);p!=null&&f(o,["done"],p);const g=c(e,["error"]);return g!=null&&f(o,["error"],g),o}function Uy(e,t){const o={},a=c(e,["gcsUri"]);a!=null&&f(o,["validationDatasetUri"],a);const r=c(e,["vertexDatasetResource"]);return r!=null&&f(o,["validationDatasetUri"],r),o}class dM extends Po{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ql(Fo.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var a;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((a=o.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),u=await this.tuneMldevInternal(r);let p="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?p=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(p=u.name.split("/operations/")[0]),{name:p,state:vf.JOB_STATE_QUEUED}}}}async getInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=eM(t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>kf(x))}else{const m=ZA(t);return g=Ke("{name}",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>qv(x))}}async listInternal(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=oM(t);return g=Ke("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=aM(x),T=new ry;return Object.assign(T,b),T})}else{const m=iM(t);return g=Ke("tunedModels",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=lM(x),T=new ry;return Object.assign(T,b),T})}}async cancel(t){var o,a,r,u;let p,g="",v={};if(this.apiClient.isVertexAI()){const m=$A(t);return g=Ke("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=JA(x),T=new cy;return Object.assign(T,b),T})}else{const m=qA(t);return g=Ke("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,p=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=t.config)===null||u===void 0?void 0:u.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),p.then(x=>{const b=YA(x),T=new cy;return Object.assign(T,b),T})}}async tuneInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI()){const g=QA(t,t);return u=Ke("tuningJobs",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>kf(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,a;let r,u="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=WA(t);return u=Ke("tunedModels",g._url),p=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>uM(v))}}}class fM{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pM=1024*1024*8,hM=3,mM=1e3,gM=2,Uc="x-goog-upload-status";async function yM(e,t,o){var a;const r=await $v(e,t,o),u=await r?.json();if(((a=r?.headers)===null||a===void 0?void 0:a[Uc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function vM(e,t,o){var a;const r=await $v(e,t,o),u=await r?.json();if(((a=r?.headers)===null||a===void 0?void 0:a[Uc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const p=tv(u),g=new Yf;return Object.assign(g,p),g}async function $v(e,t,o){var a,r;let u=0,p=0,g=new xf(new Response),v="upload";for(u=e.size;p<u;){const m=Math.min(pM,u-p),x=e.slice(p,p+m);p+m>=u&&(v+=", finalize");let b=0,T=mM;for(;b<hM&&(g=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(p),"Content-Length":String(m)}}}),!(!((a=g?.headers)===null||a===void 0)&&a[Uc]));)b++,await bM(T),T=T*gM;if(p+=m,((r=g?.headers)===null||r===void 0?void 0:r[Uc])!=="active")break;if(u<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return g}async function xM(e){return{size:e.size,type:e.type}}function bM(e){return new Promise(t=>setTimeout(t,e))}class SM{async upload(t,o,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yM(t,o,a)}async uploadToFileSearchStore(t,o,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vM(t,o,a)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xM(t)}}class TM{create(t,o,a){return new wM(t,o,a)}}class wM{constructor(t,o,a){this.url=t,this.headers=o,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Fy="x-goog-api-key";class CM{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(Fy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Fy,this.apiKey)}}}const EM="gl-node/";class _M{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new Yn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const a=bT(t.httpOptions,t.vertexai,void 0,void 0);a&&(t.httpOptions?t.httpOptions.baseUrl=a:t.httpOptions={baseUrl:a}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new CM(this.apiKey);this.apiClient=new xN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:EM+"web",uploader:new SM,downloader:new fM}),this.models=new PN(this.apiClient),this.live=new IN(this.apiClient,r,new TM),this.batches=new Kw(this.apiClient),this.chats=new kC(this.models,this.apiClient),this.caches=new NC(this.apiClient),this.files=new HC(this.apiClient),this.operations=new BN(this.apiClient),this.authTokens=new tA(this.apiClient),this.tunings=new dM(this.apiClient),this.fileSearchStores=new cA(this.apiClient)}}const NM=e=>new _M({apiKey:e}),AM={type:xn.OBJECT,properties:{segments:{type:xn.ARRAY,items:{type:xn.OBJECT,properties:{startTime:{type:xn.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:xn.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:xn.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},MM={type:xn.OBJECT,properties:{segments:{type:xn.ARRAY,items:{type:xn.OBJECT,properties:{startTime:{type:xn.STRING},endTime:{type:xn.STRING},text:{type:xn.STRING},words:{type:xn.ARRAY,items:{type:xn.OBJECT,properties:{text:{type:xn.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:xn.STRING,description:"Start time of the word"},endTime:{type:xn.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function gc(e){if(!e)return"00:00.000";let t=e.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const p=t.split(":");if(p.length===3){const g=parseInt(p[0],10)||0,v=parseInt(p[1],10)||0,m=p[2].split("."),x=parseInt(m[0],10)||0;let b=0;m[1]&&(b=parseFloat("0."+m[1])),o=g*3600+v*60+x+b}else if(p.length===2){const g=parseInt(p[0],10)||0,v=p[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=g*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const a=Math.floor(o/60),r=Math.floor(o%60),u=Math.round(o%1*1e3);return`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(u).padStart(3,"0")}`}function kM(e){const t=e.trim();try{const p=JSON.parse(t);if(p.segments&&Array.isArray(p.segments))return p;if(Array.isArray(p))return{segments:p}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const p=["]}","}","]}"];for(const v of p)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const g=t.substring(0,o+1)+"]}";try{const v=JSON.parse(g);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const a=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let u;for(;(u=r.exec(t))!==null;){const p=u[3]!==void 0?u[3]:u[4];let g=p;try{g=JSON.parse(`"${p.replace(/"/g,'\\"')}"`)}catch{g=p.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}a.push({startTime:u[1],endTime:u[2],text:g})}if(a.length>0)return{segments:a};throw new Error("Response structure invalid and could not be repaired.")}async function RM(e,t,o,a,r,u="line"){try{const p=NM(a),g=e.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";u==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. REPEATED WORDS & STUTTERS: **EXTREMELY IMPORTANT**
       - Treat every spoken utterance as a distinct word which must be timestamped.
       - Example: "No no no wait" -> 4 distinct word objects.
       - Example: "I I I didn't mean it" -> 3 distinct "I" objects followed by "didn't", "mean", "it".
       - NEVER merge repeated words into a single event.
    4. DETAILS: Inside each line object, you MUST provide a "words" array.
    5. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    6. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    7. FAST SPEECH / RAP / CONVERSATION HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics or conversation, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating precise timed lyrics and subtitled conversations.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${u.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,b={responseMimeType:"application/json",responseSchema:u==="word"?MM:AM,temperature:.1};g&&(b.thinkingConfig={thinkingBudget:1024});const T=new Promise((Y,de)=>{r?.aborted&&de(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>de(new DOMException("Aborted","AbortError")))});let E=(await Promise.race([p.models.generateContent({model:e,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:b}),T])).text;if(!E)throw new Error("Empty response from model");return E=E.trim(),E.startsWith("```json")?E=E.replace(/^```json\s*/,"").replace(/\s*```$/,""):E.startsWith("```")&&(E=E.replace(/^```\s*/,"").replace(/\s*```$/,"")),(kM(E).segments||[]).map(Y=>({startTime:gc(String(Y.startTime)),endTime:gc(String(Y.endTime)),text:String(Y.text),words:Y.words?Y.words.map(de=>({text:String(de.text),startTime:gc(String(de.startTime)),endTime:gc(String(de.endTime))})):void 0}))}catch(p){throw p.name==="AbortError"?p:(console.error(`Error with ${e}:`,p),new Error(p.message||"Transcription failed"))}}const IM=({playlist:e,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:a,onPlayTrack:r,isPlaying:u,onTogglePlay:p,onSeek:g,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:b})=>{const{confirm:T}=er(),A=Q.useRef(null),E=Q.useRef(new Map),j=U=>{const Z=Math.floor(U/60).toString().padStart(2,"0"),ae=(U%60).toFixed(2).padStart(5,"0");return`[${Z}:${ae}]`},[I,Y]=Q.useState(null),[de,se]=Q.useState({key:null,direction:"asc"}),[pe,Fe]=Q.useState(new Set),[_e,Se]=Q.useState(new Set),[et,Me]=Q.useState(localStorage.getItem("gemini_api_key")||""),[Ye,ct]=Q.useState("gemini-2.5-flash"),[pt,ht]=Q.useState("line"),[bt,It]=Q.useState(!1),V=Q.useRef(null),[Ce,ie]=Q.useState(null);Q.useEffect(()=>{et&&localStorage.setItem("gemini_api_key",et)},[et]);const Et=o>=0?e[o]:null,Xe=Et?.parsedLyrics||[],D=Q.useMemo(()=>Et?Xe.findIndex((U,Z)=>{if(U.endTime!==void 0)return x>=U.time&&x<U.endTime;const ae=Xe[Z+1];return x>=U.time&&(!ae||x<ae.time)}):-1,[x,Et,Xe]);Q.useEffect(()=>{if(D!==-1){const U=document.getElementById(`lyric-active-${o}`);U&&U.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[D,o]);const oe=U=>{if(e.length===0)return;const Z=o>=0?e[o]:null,ae=[...e];let Ee="asc";if(U==="random"){se({key:"random",direction:"asc"});for(let ve=ae.length-1;ve>0;ve--){const Ne=Math.floor(Math.random()*(ve+1));[ae[ve],ae[Ne]]=[ae[Ne],ae[ve]]}}else{de.key===U&&de.direction==="asc"&&(Ee="desc"),se({key:U,direction:Ee});const ve=Ee==="asc"?1:-1;U==="filename"?ae.sort((Ne,ue)=>ve*Ne.audioFile.name.localeCompare(ue.audioFile.name)):U==="artist"?ae.sort((Ne,ue)=>ve*(Ne.metadata.artist||"").localeCompare(ue.metadata.artist||"")):U==="title"?ae.sort((Ne,ue)=>ve*(Ne.metadata.title||"").localeCompare(ue.metadata.title||"")):U==="album"&&ae.sort((Ne,ue)=>ve*(Ne.metadata.album||"").localeCompare(ue.metadata.album||""))}if(t(ae),Z){const ve=ae.findIndex(Ne=>Ne.id===Z.id);ve!==-1&&a(ve)}},we=Q.useCallback(U=>{I!==null&&U.key==="Delete"?(U.preventDefault(),U.stopPropagation(),m?m(I):t(Z=>{const ae=[...Z];return ae.splice(I,1),ae}),I>=e.length-1&&Y(e.length>1?e.length-2:null)):U.key==="ArrowDown"&&e.length>0?(U.preventDefault(),U.stopPropagation(),Y(Z=>Z===null?0:Math.min(Z+1,e.length-1))):U.key==="ArrowUp"&&e.length>0?(U.preventDefault(),U.stopPropagation(),Y(Z=>Z===null?0:Math.max(Z-1,0))):U.key==="Enter"&&I!==null?(U.preventDefault(),U.stopPropagation(),r(I)):U.key==="Escape"&&Y(null)},[I,e.length,t,r]);Q.useEffect(()=>{const U=A.current;if(U)return U.addEventListener("keydown",we),()=>U.removeEventListener("keydown",we)},[we]),Q.useEffect(()=>{I!==null&&I>=e.length&&Y(e.length>0?e.length-1:null)},[e.length,I]);const Be=async U=>{const Z=new Map;U.forEach(Ne=>{const ue=Ne.name.split(".").pop()?.toLowerCase(),w=(Ne.webkitRelativePath||Ne.name).replace(/\.[^/.]+$/,"");Z.has(w)||Z.set(w,{});const M=Z.get(w);["mp3","wav","ogg","flac","m4a","mp4","webm","ogg","mkv","mov","avi","m4v"].includes(ue||"")?M.audio=Ne:["lrc","srt","ttml","xml","json","vtt"].includes(ue||"")&&(M.lyric=Ne)});const ae=[],Ee=async(Ne,ue)=>new Promise(Ve=>{if(Ne.type.startsWith("video/")){Ve({title:ue,artist:"Unknown Artist",coverUrl:URL.createObjectURL(Ne),backgroundType:"video"});return}df(()=>import("./jsmediatags.min-DdToJgZ2.js").then(w=>w.j),[]).then(w=>{w.read(Ne,{onSuccess:M=>{const{title:R,artist:G,album:$,picture:he}=M.tags;let re=null;if(he){const{data:ze,format:Ae}=he;let ke="";for(let _=0;_<ze.length;_++)ke+=String.fromCharCode(ze[_]);re=`data:${Ae};base64,${window.btoa(ke)}`}Ve({title:R||ue,artist:G||"Unknown Artist",album:$||void 0,coverUrl:re})},onError:()=>{Ve({title:ue,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{Ve({title:ue,artist:"Unknown Artist",coverUrl:null})})}),ve=async Ne=>{try{const ue=await Ne.text(),Ve=Ne.name.split(".").pop()?.toLowerCase();if(Ve==="lrc")return Ua(ue);if(Ve==="srt")return Fa(ue);if(Ve==="ttml"||Ve==="xml")return qs(ue);if(Ve==="vtt")return $s(ue);if(Ve==="json")return aT(ue)}catch(ue){console.error("Failed to parse lyrics",ue)}return[]};for(const[Ne,ue]of Z.entries())if(ue.audio){const Ve=await Ee(ue.audio,Ne),w=Math.random().toString(36).substr(2,9);let M=[];ue.lyric&&(M=await ve(ue.lyric)),ae.push({id:w,audioFile:ue.audio,lyricFile:ue.lyric,parsedLyrics:M,metadata:Ve,duration:0})}if(ae.length>0){const Ne=[...e,...ae];t(Ne),r(0,!1,Ne)}},Je=async U=>{if(U.target.files&&U.target.files.length>0){const Z=Array.from(U.target.files);await Be(Z),U.target.value=""}},[C,B]=Q.useState(!1),ne=U=>{U.preventDefault(),U.stopPropagation(),B(!0)},ce=U=>{U.preventDefault(),U.stopPropagation(),B(!1)},Ge=async U=>{if(U.preventDefault(),U.stopPropagation(),B(!1),U.dataTransfer.files&&U.dataTransfer.files.length>0){const Z=Array.from(U.dataTransfer.files);await Be(Z)}},P=U=>{m?m(U):t(Z=>{const ae=[...Z];return ae.splice(U,1),ae})},Ue=U=>new Promise((Z,ae)=>{const Ee=new FileReader;Ee.readAsDataURL(U),Ee.onload=()=>{const ve=Ee.result.split(",")[1];Z(ve)},Ee.onerror=ve=>ae(ve)}),Re=async U=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(pe.has(U.id)){const ve=E.current.get(U.id);ve&&ve.abort();return}const Z=et||"PLACEHOLDER_API_KEY";if(Z.trim().length<39){alert(`Invalid API Key length (${Z.trim().length}). It must be at least 39 characters.`),It(!0);return}Fe(ve=>new Set(ve).add(U.id));const ae=new AbortController;E.current.set(U.id,ae);const Ee=19.5*1024*1024;if(U.audioFile.size>Ee){alert(`File is too large (${(U.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),Fe(ve=>{const Ne=new Set(ve);return Ne.delete(U.id),Ne}),E.current.delete(U.id);return}try{const ve=await Ue(U.audioFile);let Ne=U.duration||0;if(Ne===0)try{Ne=await new Promise(w=>{const M=new Audio(URL.createObjectURL(U.audioFile));M.onloadedmetadata=()=>{w(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>{URL.revokeObjectURL(M.src),w(0)}})}catch(w){console.warn("Could not determine duration for AI validation",w)}let Ve=(await RM(Ye,ve,U.audioFile.type,Z,ae.signal,pt)).map(w=>({time:Bs(w.startTime),text:w.text,endTime:Bs(w.endTime),words:w.words?w.words.map(M=>({text:M.text,startTime:Bs(M.startTime),endTime:Bs(M.endTime)})):void 0}));Ne>0&&(Ve=Ve.filter(w=>w.time<Ne&&w.time>=0)),t(w=>w.map(M=>M.id===U.id?{...M,parsedLyrics:Ve.sort((R,G)=>R.time-G.time),duration:Ne>0?Ne:M.duration}:M))}catch(ve){if(ve.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",ve);let Ne="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)Ne="Connection lost. Please check your internet connection.";else if(ve.message){const ue=ve.message.toLowerCase();ue.includes("fetch")||ue.includes("network")||ue.includes("failed to connect")?Ne="Network error. Please check your connection.":(ue.includes("api key")||ve.message.includes("400")||ve.message.includes("401")||ve.message.includes("403"))&&(Ne="API Key Error: Please check if your key is valid and has credits.")}alert(Ne)}}finally{E.current.delete(U.id),Fe(ve=>{const Ne=new Set(ve);return Ne.delete(U.id),Ne})}},ye=async U=>{if(!navigator.onLine){alert("No internet connection.");return}Se(Z=>new Set(Z).add(U.id));try{const Z=await df(()=>import("./index.min-CpaJ5oc6.js").then(Ve=>Ve.i),[]);let ae;const Ee=Z.default||Z;console.log("SyncLyrics Module:",Z);const ve=["musixmatch","lrclib","netease"];if(typeof Ee=="function"&&Ee.prototype&&Ee.prototype.getLyrics){console.log("Detected Class usage");const Ve=new Ee({sources:ve});ae=w=>Ve.getLyrics(w)}else if(Ee.getLyrics&&typeof Ee.getLyrics=="function")console.log("Detected Instance usage"),ae=Ve=>Ee.getLyrics(Ve);else if(Ee.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const Ve=Ee.SyncLyrics;if(typeof Ve=="function"&&Ve.prototype&&Ve.prototype.getLyrics){console.log("Using SyncLyrics as Class");const w=new Ve({sources:ve});ae=M=>w.getLyrics(M)}else if(typeof Ve=="function")console.log("Using SyncLyrics as Function"),ae=Ve;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ee=="function")console.log("Detected Function usage"),ae=Ee;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ee}. Keys: ${typeof Ee=="object"?JSON.stringify(Object.keys(Ee)):"N/A"}`);const Ne={track:U.metadata.title,artist:U.metadata.artist,album:U.metadata.album,sources:ve};console.log("Searching lyrics with options:",Ne);const ue=await ae(Ne);if(ue&&typeof ue=="string")fe(ue,U);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let Ve=U.duration||0;if(Ve===0)try{Ve=await new Promise(G=>{const $=new Audio(URL.createObjectURL(U.audioFile));$.onloadedmetadata=()=>{const he=$.duration;URL.revokeObjectURL($.src),G(he)},$.onerror=()=>G(0)})}catch(G){console.warn("Could not determine duration for search",G)}const w=new URLSearchParams({artist_name:U.metadata.artist,track_name:U.metadata.title,album_name:U.metadata.album||"",duration:Ve.toString()}),M=await fetch(`https://lrclib.net/api/get?${w.toString()}`);if(!M.ok){const G=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(U.metadata.title+" "+U.metadata.artist)}`);if(G.ok){const $=await G.json();if(Array.isArray($)&&$.length>0){const he=$.find(re=>re.syncedLyrics);if(he){fe(he.syncedLyrics,U);return}else if($[0].plainLyrics){fe($[0].plainLyrics,U);return}}}throw new Error("No lyrics found in fallback source.")}const R=await M.json();R.syncedLyrics?fe(R.syncedLyrics,U):R.plainLyrics?fe(R.plainLyrics,U):alert("No lyrics found.")}}catch(Z){console.error("Search failed:",Z),Z.message?.includes("CORS")||Z.message?.includes("etwork")||Z.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+Z.message)}finally{Se(Z=>{const ae=new Set(Z);return ae.delete(U.id),ae})}},fe=(U,Z)=>{let ae=Ua(U);if(ae.length===0&&(ae=Fa(U)),ae.length>0){const Ee=ae.some(ve=>ve.words&&ve.words.length>0);console.log(Ee?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(ve=>ve.map(Ne=>Ne.id===Z.id?{...Ne,parsedLyrics:ae,lyricFile:new File([U],`synched-lyrics${Ee?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:Ne))}else alert("Lyrics found but could not be parsed.")},Pe=(U,Z,ae)=>{const Ee=new Blob([U],{type:"application/octet-stream"}),ve=URL.createObjectURL(Ee),Ne=document.createElement("a");Ne.href=ve,Ne.download=Z,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(ve)},Qe=async(U,Z)=>{const ae=U.parsedLyrics||[];if(ae.length===0)return;let Ee="";const ve=Z==="lrc-enhanced"?"lrc":Z,Ne=`${U.metadata.title||"lyrics"}.${ve}`;let ue=U.duration||0;if(ue===0)try{ue=await new Promise(w=>{const M=new Audio(URL.createObjectURL(U.audioFile));M.onloadedmetadata=()=>{w(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>w(0)})}catch(w){console.warn("Could not determine duration for export check",w)}const Ve=ae.map(w=>({...w,words:w.words?w.words.filter(M=>M.text.trim().length>0).map(M=>({...M})):void 0}));for(let w=0;w<Ve.length;w++){const M=Ve[w],R=Ve[w+1];if(M.endTime===void 0&&(R?M.endTime=R.time:M.endTime=ue>0?ue:M.time+5),M.words&&M.words.length>0)for(let G=0;G<M.words.length;G++){const $=M.words[G],he=M.words[G+1];(Z==="ttml"||$.endTime===void 0||$.endTime<=$.startTime)&&(he?$.endTime=he.startTime:$.endTime=M.endTime)}}if(Z==="txt")Ee=Ve.map(w=>w.text).join(`
`);else if(Z==="json")Ee=JSON.stringify(Ve,null,2);else if(Z==="srt"){const w=M=>{const R=Math.floor(M/3600).toString().padStart(2,"0"),G=Math.floor(M%3600/60).toString().padStart(2,"0"),$=Math.floor(M%60).toString().padStart(2,"0"),he=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${R}:${G}:${$},${he}`};Ee=Ve.map((M,R)=>{const G=w(M.time),$=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,he=w($);return`${R+1}
${G} --> ${he}
${M.text}
`}).join(`
`)}else if(Z==="lrc"){const w=[],M=R=>{const G=Math.floor(R/60).toString().padStart(2,"0"),$=(R%60).toFixed(2).padStart(5,"0");return`[${G}:${$}]`};for(let R=0;R<ae.length;R++){const G=ae[R],$=ae[R+1];w.push(`${M(G.time)}${G.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const re=(G.endTime??G.time+3)+4;(!(ue>0)||re<=ue)&&($?$.time>re&&w.push(`${M(re)}`):w.push(`${M(re)}`))}Ee=w.join(`
`)}else if(Z==="lrc-enhanced"){const w=[],M=G=>{const $=Math.floor(G/60).toString().padStart(2,"0"),he=(G%60).toFixed(2).padStart(5,"0");return`[${$}:${he}]`},R=G=>{const $=Math.floor(G/60).toString().padStart(2,"0"),he=(G%60).toFixed(2).padStart(5,"0");return`<${$}:${he}>`};for(let G=0;G<ae.length;G++){const $=ae[G],he=ae[G+1];let re="";$.words&&$.words.length>0?$.words.forEach((_,ot)=>{const xt=_.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");re+=`${R(_.startTime)}${xt}`,ot<$.words.length-1&&!xt.endsWith("-")&&(re+=" ")}):re=$.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),w.push(`${M($.time)}${re}`);const Ae=($.endTime??$.time+3)+4;(!(ue>0)||Ae<=ue)&&(he?he.time>Ae&&w.push(`${M(Ae)}`):w.push(`${M(Ae)}`))}Ee=w.join(`
`)}else if(Z==="ttml"){const w=M=>{const R=Math.floor(M/3600).toString().padStart(2,"0"),G=Math.floor(M%3600/60).toString().padStart(2,"0"),$=Math.floor(M%60).toString().padStart(2,"0"),he=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${R}:${G}:${$}.${he}`};Ee=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,Ve.forEach(M=>{const R=w(M.time),G=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+3,$=w(G);Ee+=`
      <p begin="${R}" end="${$}">`,M.words&&M.words.length>0?M.words.forEach(he=>{if(!he.text.trim())return;const re=w(he.startTime);let ze=he.endTime;(ze===void 0||ze<=he.startTime)&&(ze=he.startTime+.5);const Ae=w(ze);let ke=he.text.replace(/[ \t]+/g," ").trim();ke.endsWith("-")||(ke+=" "),Ee+=`
        <span begin="${re}" end="${Ae}">${ke}</span>`}):Ee+=`
        <span begin="${R}" end="${$}">${M.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ee+=`
      </p>`}),Ee+=`
    </div>
  </body>
</tt>`}else if(Z==="vtt"){const w=M=>{const R=Math.floor(M/3600).toString().padStart(2,"0"),G=Math.floor(M%3600/60).toString().padStart(2,"0"),$=Math.floor(M%60).toString().padStart(2,"0"),he=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${R}:${G}:${$}.${he}`};Ee=`WEBVTT

`,Ve.forEach(M=>{const R=w(M.time),G=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,$=w(G);let he=M.text.trim();if(M.words&&M.words.length>0){const re=M.words.map(ze=>`<${w(ze.startTime)}>${ze.text.trim()}`).join(" ");re.length>0&&(he=re)}Ee+=`${R} --> ${$}
${he}

`})}Pe(Ee,Ne)},z=async()=>{if(e.length===0)return;const U=async ae=>new Promise(Ee=>{const ve=new Audio(URL.createObjectURL(ae));ve.onloadedmetadata=()=>{Ee(ve.duration),URL.revokeObjectURL(ve.src)},ve.onerror=()=>{Ee(0),URL.revokeObjectURL(ve.src)}});let Z=`#EXTM3U
`;for(const ae of e){let Ee=ae.duration||0;if(Ee===0)try{Ee=await U(ae.audioFile)}catch(w){console.error("Failed to get duration for export",w)}const ve=Math.round(Ee),Ne=(ae.metadata.artist||"Unknown Artist").replace(/[\r\n]/g,""),ue=(ae.metadata.title||"Unknown Title").replace(/[\r\n]/g,"");Z+=`#EXTINF:${ve},${Ne} - ${ue}
`;const Ve=ae.audioFile.webkitRelativePath||ae.audioFile.name;Z+=`${Ve}
`}Pe(Z,"playlist.m3u8")},je=async U=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(Z=>Z.map(ae=>ae.id===U.id?{...ae,parsedLyrics:[],lyricFile:void 0}:ae))},it=async U=>{const Z=U.target.files?.[0];if(!(!Z||!Ce)){try{const ae=await Z.text(),Ee=Z.name.split(".").pop()?.toLowerCase();let ve=[];Ee==="lrc"?ve=Ua(ae):Ee==="srt"?ve=Fa(ae):Ee==="ttml"||Ee==="xml"?ve=qs(ae):Ee==="vtt"&&(ve=$s(ae)),ve.length>0?t(Ne=>Ne.map(ue=>ue.id===Ce?{...ue,lyricFile:Z,parsedLyrics:ve}:ue)):alert("Could not parse lyrics. Ensure file is .lrc, .srt, or .vtt")}catch(ae){console.error("Failed to load lyrics",ae),alert("Failed to load lyrics file.")}ie(null),U.target.value=""}};return d.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${C?"bg-zinc-800 border-orange-500":""}`,onDragOver:ne,onDragLeave:ce,onDrop:Ge,children:[C&&d.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:d.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[d.jsx(uo,{size:48}),d.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),d.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, FLAC, Video (MP4/WebM), LRC, SRT, VTT"})]})}),d.jsx("input",{type:"file",name:"manual-lyric-upload",id:"manual-lyric-upload",ref:V,className:"hidden",accept:".lrc,.srt,.ttml,.xml,.vtt",onChange:it}),d.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[d.jsx(kc,{size:16,className:"text-orange-400"}),"Playlist"]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[d.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[d.jsx(Zy,{size:14})," Add Files",d.jsx("input",{type:"file",name:"add-files",id:"add-files",className:"hidden",accept:"audio/*,video/*,.lrc,.srt,.ttml,.xml,.vtt",multiple:!0,onChange:Je})]}),d.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[d.jsx(K1,{size:14}),d.jsx("input",{type:"file",name:"add-folder",id:"add-folder",className:"hidden",multiple:!0,webkitdirectory:"",onChange:Je})]})]}),d.jsx("div",{className:"w-px h-4 bg-zinc-700"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>oe("filename"),className:`p-1 rounded transition-colors ${de.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${de.key==="filename"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(Ac,{size:14,className:de.key==="filename"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>oe("artist"),className:`p-1 rounded transition-colors ${de.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${de.key==="artist"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(WS,{size:14,className:de.key==="artist"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>oe("title"),className:`p-1 rounded transition-colors ${de.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${de.key==="title"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(Ra,{size:14,className:de.key==="title"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>oe("album"),className:`p-1 rounded transition-colors ${de.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${de.key==="album"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:d.jsx(F1,{size:14,className:de.key==="album"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),d.jsx("button",{onClick:()=>oe("random"),className:`p-1 rounded transition-colors ${de.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:d.jsx(kS,{size:14})})]})]}),d.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[d.jsx("button",{onClick:()=>It(!bt),className:`p-1 rounded transition-colors ${bt?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:d.jsx(nS,{size:14})}),bt&&d.jsx("input",{type:et?"password":"text",name:"api-key","aria-label":"Gemini API Key",value:et,onChange:U=>Me(U.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),d.jsx("div",{className:"relative group",children:d.jsxs("select",{value:Ye,onChange:U=>ct(U.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",name:"gemini-model",id:"gemini-model","aria-label":"Gemini Model",children:[d.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),d.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),d.jsx("div",{className:"relative group",children:d.jsxs("select",{value:pt,onChange:U=>ht(U.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",name:"transcription-mode",id:"transcription-mode","aria-label":"Transcription Mode",children:[d.jsx("option",{value:"line",children:"Line"}),d.jsx("option",{value:"word",children:"Word"})]})}),d.jsx("button",{onClick:z,className:"p-1 hover:bg-zinc-700 text-zinc-500 hover:text-white rounded transition-colors",title:"Export Playlist (.m3u8)",children:d.jsx(q1,{size:14})}),d.jsx("button",{onClick:async()=>{e.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:d.jsx(La,{size:14})}),d.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),d.jsx("button",{onClick:b,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:d.jsx(Ri,{size:14})})]})]}),d.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:e.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[d.jsx(kc,{size:32,className:"mb-2 opacity-50"}),d.jsx("p",{children:"Playlist is empty"}),d.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):e.map((U,Z)=>{const ae=Z===o,Ee=Z===I,ve=U.parsedLyrics||[],Ne=ae?ve.findIndex((ue,Ve)=>{if(ue.endTime!==void 0)return x>=ue.time&&x<ue.endTime;const w=ve[Ve+1];return x>=ue.time&&(!w||x<w.time)}):-1;return d.jsxs("div",{onClick:()=>Y(Z),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${ae?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ee?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[d.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:ue=>{ue.stopPropagation(),ae?p():r(Z)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${ae?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:ae?u?d.jsx(Qy,{size:14}):d.jsx(pf,{size:14}):d.jsx(pf,{size:14})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:`text-xs font-medium truncate ${ae?"text-orange-100":"text-zinc-300"}`,title:U.audioFile.name,children:U.metadata.title}),d.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:U.metadata.artist,children:U.metadata.artist})]})]}),d.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[d.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(U.audioFile.size/1024/1024).toFixed(1),"MB"]}),U.lyricFile?d.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:U.lyricFile.name,children:[d.jsx(Ac,{size:7}),d.jsx("span",{className:"truncate max-w-[80px]",children:U.lyricFile.name})]}):d.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),d.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:ve.length>0?d.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:ve.map((ue,Ve)=>{const w=Ve===Ne;return d.jsxs("div",{id:w?`lyric-active-${Z}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${w?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${j(ue.time)} - ${ue.text}`,onClick:M=>{M.stopPropagation(),Z!==o?(r(Z),setTimeout(()=>g(ue.time),150)):g(ue.time)},children:[d.jsx("span",{className:`font-mono text-[8px] ${w?"text-orange-200":"text-zinc-500"}`,children:j(ue.time)}),d.jsx("span",{className:`truncate max-w-[120px] ${w?"text-white font-medium":"text-zinc-400"}`,children:ue.text||""})]},Ve)})}):d.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),d.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[d.jsx("button",{onClick:ue=>{ue.stopPropagation(),ie(U.id),V.current&&(V.current.value=""),V.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:d.jsx(uo,{size:14})}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),ye(U)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${_e.has(U.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:_e.has(U.id),children:_e.has(U.id)?d.jsx(tg,{size:14,className:"animate-spin"}):d.jsx(NS,{size:14})}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Re(U)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${pe.has(U.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:pe.has(U.id)?"Stop Transcription":"AI Sync Transcribe",children:pe.has(U.id)?d.jsxs(d.Fragment,{children:[d.jsx(tg,{size:14,className:"animate-spin group-hover/btn:hidden"}),d.jsx(gf,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):d.jsx(mf,{size:14})}),ve.length>0&&d.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"vtt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download VTT",children:"VTT"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),Qe(U,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),d.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),je(U)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),d.jsx("button",{onClick:ue=>{ue.stopPropagation(),P(Z)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:d.jsx(La,{size:12})})]},U.id)})})]})},tp=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],zM=()=>{const e=new Set;if(tp.forEach(g=>{g.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&e.add(m)})}),e.size===0)return;const a=`https://fonts.googleapis.com/css2?${Array.from(e).map(g=>`family=${g.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=a,document.head.appendChild(r);const u=document.createElement("link");u.rel="preconnect",u.href="https://fonts.googleapis.com",document.head.appendChild(u);const p=document.createElement("link");p.rel="preconnect",p.href="https://fonts.gstatic.com",p.crossOrigin="anonymous",document.head.appendChild(p)},DM=e=>{const t=`google-font-${e.replace(/\s+/g,"-").toLowerCase()}`;if(document.getElementById(t))return;const o=document.createElement("link");o.id=t,o.rel="stylesheet",o.href=`https://fonts.googleapis.com/css2?family=${e.replace(/\s+/g,"+")}:wght@400;700&display=swap`,document.head.appendChild(o)},np=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],Fc={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},af=np.flatMap(e=>e.options.map(t=>t.value)),sf=({onApply:e,placeholder:t="Google Font Name"})=>{const{toast:o}=er(),[a,r]=Q.useState(""),u=()=>{if(!a.trim())return;const p=a.trim().replace(/['"]/g,"").replace(/\s+/g," ");DM(p),e(p),o.success(`Loaded & Applied: ${p}`),r("")};return d.jsxs("div",{className:"flex gap-2 mt-2 items-center",children:[d.jsx("span",{className:"text-[10px] text-zinc-500 font-bold uppercase whitespace-nowrap",children:"Google Font:"}),d.jsx("input",{type:"text",name:"google-font-name","aria-label":"Google Font Name",value:a,onChange:p=>r(p.target.value),placeholder:t,className:"flex-1 min-w-0 bg-zinc-900 border border-white/10 rounded-md px-2 py-1 text-[10px] text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500",onKeyDown:p=>{p.key==="Enter"&&u()}}),d.jsx("button",{onClick:u,disabled:!a.trim(),className:"bg-zinc-700 hover:bg-zinc-600 text-white text-[10px] px-2 py-1 rounded-md font-medium disabled:opacity-50 transition-colors",title:"Load and apply",children:"Load"})]})},Py={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,lyricLineHeight:1.2,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,infoFontFamily:"ui-sans-serif, system-ui, sans-serif",infoFontWeight:"bold",infoFontStyle:"normal",infoFontColor:"#ffffff",backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoFontFamily:"ui-sans-serif, system-ui, sans-serif",channelInfoFontWeight:"bold",channelInfoFontStyle:"normal",channelInfoFontColor:"#ffffff",channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1,useRealColorMedia:!1},By=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],Hy=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],Oy=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],Gy=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],Rf=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Smooth Transition White",value:"karaoke-smooth-white"},{label:"Smooth Transition Plus",value:"karaoke-smooth-plus"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],Tc=e=>{let t="",o="";return e.includes("blue")||e.includes("cyan")?(t=e.includes("cyan")?"#06b6d4":"#3b82f6",o=t):e.includes("purple")?(t="#a855f7",o=t):e.includes("green")?(t="#22c55e",o=t):e.includes("pink")?(t="#ec4899",o=t):(e==="karaoke-pill"||e==="karaoke-box"||e==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},Vy=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],If=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],Yv=["none","upper","lower","title","sentence","invert"],jy=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],qy=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],LM=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Gi=({value:e,onChange:t,groups:o})=>{const[a,r]=Q.useState(!1),[u,p]=Q.useState(e);Q.useEffect(()=>{a||p(e)},[e,a]);const g=b=>{for(const T of o){const A=T.options.find(E=>E.value===b);if(A)return A.label}return b},v=b=>{t(b)},m=()=>{a&&t(u),r(!1)},x=b=>{t(b),p(b),r(!1)};return d.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[d.jsxs("button",{onClick:()=>r(!a),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:a?"Close List":"Expand List",children:[d.jsx("span",{className:"truncate",children:g(e)}),d.jsx(Qs,{size:14,className:`transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&d.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(b=>d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),d.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>d.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${e===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},b.label))})]})},UM=(e,t,o)=>{if(e==="CustomFont"&&o)return o;for(const a of t){const r=a.options.find(u=>u.value===e);if(r)return r.label}return"Select Font"},rf=({value:e,onChange:t,customFontName:o,groups:a=tp})=>{const[r,u]=Q.useState(!1),[p,g]=Q.useState(e);Q.useEffect(()=>{r||g(e)},[e,r]);const v=b=>{t(b)},m=()=>{r&&t(p)},x=b=>{t(b),g(b),u(!1)};return d.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[d.jsxs("button",{onClick:()=>u(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[d.jsx("span",{className:"truncate",style:{fontFamily:e},children:UM(e,a,o)}),d.jsx(Qs,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&d.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),d.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${e==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:d.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),a.map(b=>d.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[d.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),d.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>d.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${e===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:d.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},b.label))]})]})},FM=Object.values(Fc).filter(e=>e.fontFamily).reduce((e,t)=>{if(!e.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),e.push({label:`${o} (Preset)`,value:t.fontFamily})}return e},[]),$y=[{label:"Visual Presets",options:FM},...tp],PM=({config:e,setConfig:t,preset:o,setPreset:a,onClose:r,isPlaylistMode:u,hasPlaylist:p,onRender:g,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:b,setResolution:T,aspectRatio:A,setAspectRatio:E,renderCodec:j,setRenderCodec:I,supportedCodecs:Y,renderQuality:de,setRenderQuality:se,renderFps:pe,setRenderFps:Fe,renderEngine:_e,setRenderEngine:Se,ffmpegCodec:et,setFfmpegCodec:Me,customChannelFontName:Ye,onChannelFontUpload:ct,onClearChannelCustomFont:pt,customInfoFontName:ht,onInfoFontUpload:bt,onClearInfoCustomFont:It})=>{const{toast:V,confirm:Ce}=er(),[ie,Et]=Q.useState([]),Xe=(z,je)=>{ie.includes(z)||Et(U=>[z,...U]);const it=z.includes(" ")?`'${z}'`:z;P(je,it)},D=Vf.useMemo(()=>ie.length===0?$y:[{label:"Loaded Google Fonts",options:ie.map(je=>({label:je,value:je.includes(" ")?`'${je}'`:je}))},...$y],[ie]),oe=Q.useRef(null),we=Q.useRef(null),Be=Q.useRef(null),Je=Q.useRef(null),C=Q.useRef(null),B=Q.useRef(null),ne=Q.useRef(null),[ce,Ge]=Q.useState(!1),P=(z,je)=>{let it={...e,[z]:je};if(z==="highlightEffect"){const Z=Tc(je);it.useCustomHighlightColors=!1,Z?(it.highlightColor=Z.color,it.highlightBackground=Z.bg):(it.highlightColor="#fb923c",it.highlightBackground="#fb923c")}else if(z==="useCustomHighlightColors"&&je===!1){const U=e.highlightEffect,Z=Tc(U);Z?(it.highlightColor=Z.color,it.highlightBackground=Z.bg):(it.highlightColor="#fb923c",it.highlightBackground="#fb923c")}t(it)},Ue=z=>{a(z);const je=Fc[z];je&&t({...e,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...je})},Re=z=>{const je=z.target.files?.[0];if(je){const it=new FileReader;it.onload=U=>{U.target?.result&&P("channelInfoImage",U.target.result)},it.readAsDataURL(je)}z.target.value=""},ye=z=>{const je=z.target.files?.[0];if(je){const it=new FileReader;it.onload=U=>{U.target?.result&&P("backgroundImage",U.target.result)},it.readAsDataURL(je)}z.target.value=""},fe=async()=>{await Ce("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(Py),a("default"),T("1080p"),E("16:9"),I("auto"),Fe(30),se("med"),Se("mediarecorder"),Me("h264"),C.current&&(C.current.value=""),B.current&&(B.current.value=""),x(),pt&&pt(),It&&It(),e.channelInfoFontFamily==="ChannelFont"&&Be.current&&(Be.current.value=""),e.infoFontFamily==="InfoFont"&&Je.current&&(Je.current.value=""),P("channelInfoFontWeight","bold"),P("channelInfoFontStyle","normal"),P("infoFontWeight","bold"),P("infoFontStyle","normal"),P("enableGradientOverlay",!1),P("useRealColorMedia",!1),V.success("All settings have been reset to default."))},Pe=()=>{const z=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),je={...e,fontSizeScale:typeof e.fontSizeScale=="number"?Number(e.fontSizeScale.toFixed(6)):e.fontSizeScale,infoSizeScale:typeof e.infoSizeScale=="number"?Number(e.infoSizeScale.toFixed(6)):e.infoSizeScale,infoMarginScale:typeof e.infoMarginScale=="number"?Number(e.infoMarginScale.toFixed(6)):e.infoMarginScale,channelInfoSizeScale:typeof e.channelInfoSizeScale=="number"?Number(e.channelInfoSizeScale.toFixed(6)):e.channelInfoSizeScale,channelInfoMarginScale:typeof e.channelInfoMarginScale=="number"?Number(e.channelInfoMarginScale.toFixed(6)):e.channelInfoMarginScale,preset:o,resolution:b,aspectRatio:A,renderCodec:j,renderFps:pe,renderQuality:de,renderEngine:_e,ffmpegCodec:et,customFontName:v,customChannelFontName:Ye,customInfoFontName:ht,channelInfoFontWeight:e.channelInfoFontWeight,channelInfoFontStyle:e.channelInfoFontStyle,infoFontWeight:e.infoFontWeight,infoFontStyle:e.infoFontStyle};je.backgroundSource!=="image"&&(je.backgroundImage=void 0),je.showChannelInfo||(je.channelInfoImage=void 0);try{const it=JSON.stringify(je,null,2),U=new Blob([it],{type:"application/json"}),Z=URL.createObjectURL(U),ae=document.createElement("a");ae.setAttribute("href",Z),ae.setAttribute("download",`render_settings_${z}.json`),document.body.appendChild(ae),ae.click(),ae.remove(),URL.revokeObjectURL(Z)}catch(it){console.error("Export failed:",it),V.error("Failed to export settings.")}},Qe=z=>{const je=z.target.files?.[0];if(!je)return;const it=new FileReader;it.onload=U=>{try{const Z=JSON.parse(U.target?.result);if(Z&&typeof Z=="object"){const{resolution:ae,aspectRatio:Ee,renderCodec:ve,renderFps:Ne,renderQuality:ue,renderEngine:Ve,ffmpegCodec:w,preset:M,customFontName:R,customChannelFontName:G,customInfoFontName:$,channelInfoFontWeight:he,channelInfoFontStyle:re,infoFontWeight:ze,infoFontStyle:Ae,...ke}=Z,_={...Py,...ke};if(he&&(_.channelInfoFontWeight=he),re&&(_.channelInfoFontStyle=re),ze&&(_.infoFontWeight=ze),Ae&&(_.infoFontStyle=Ae),["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration","lyricLineHeight"].forEach(Nt=>{_[Nt]!==void 0&&(_[Nt]=Number(_[Nt]))}),_.useCustomHighlightColors!==void 0&&(_.useCustomHighlightColors=!!_.useCustomHighlightColors),_.useRealColorMedia!==void 0&&(_.useRealColorMedia=!!_.useRealColorMedia),_.showChannelInfo!==void 0&&(_.showChannelInfo=!!_.showChannelInfo),_.showIntro!==void 0&&(_.showIntro=!!_.showIntro),_.showTitle!==void 0&&(_.showTitle=!!_.showTitle),_.showArtist!==void 0&&(_.showArtist=!!_.showArtist),_.showCover!==void 0&&(_.showCover=!!_.showCover),_.showLyrics!==void 0&&(_.showLyrics=!!_.showLyrics),_.highlightEffect&&(!_.highlightColor||!_.highlightBackground)){const Nt=Tc(_.highlightEffect);Nt&&(_.highlightColor||(_.highlightColor=Nt.color),_.highlightBackground||(_.highlightBackground=Nt.bg))}const xt=(Nt,tt)=>tt.some(Jt=>Jt.options.some(ge=>ge.value===Nt));_.textEffect&&!xt(_.textEffect,By)&&(_.textEffect="shadow"),_.textAnimation&&!xt(_.textAnimation,Hy)&&(_.textAnimation="none"),_.transitionEffect&&!xt(_.transitionEffect,Oy)&&(_.transitionEffect="none"),_.visualTransitionType&&!xt(_.visualTransitionType,Gy)&&(_.visualTransitionType="none"),_.highlightEffect&&!xt(_.highlightEffect,Rf)&&(_.highlightEffect="karaoke"),_.backgroundSource&&!xt(_.backgroundSource,Vy)&&(_.backgroundSource="custom"),["current","playlist"].includes(_.renderMode)||(_.renderMode="current"),["left","center","right"].includes(_.textAlign)||(_.textAlign="center"),["top","center","bottom"].includes(_.contentPosition)||(_.contentPosition="center"),_.lyricDisplayMode&&!xt(_.lyricDisplayMode,If)&&(_.lyricDisplayMode="all"),["normal","bold"].includes(_.fontWeight)||(_.fontWeight="bold"),["normal","italic"].includes(_.fontStyle)||(_.fontStyle="normal"),["none","underline","line-through"].includes(_.textDecoration)||(_.textDecoration="none"),Yv.includes(_.textCase)||(_.textCase="none"),["auto","manual"].includes(_.introMode)||(_.introMode="auto"),_.lyricStyleTarget&&!["active-only","all"].includes(_.lyricStyleTarget)&&(_.lyricStyleTarget="active-only");const zt=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];_.infoPosition&&!zt.includes(_.infoPosition)&&(_.infoPosition="top-left"),_.infoStyle&&!xt(_.infoStyle,jy)&&(_.infoStyle="classic"),_.channelInfoPosition&&!zt.includes(_.channelInfoPosition)&&(_.channelInfoPosition="bottom-right"),_.channelInfoStyle&&!xt(_.channelInfoStyle,qy)&&(_.channelInfoStyle="classic"),t(_),ae&&T(ae),Ee&&E(Ee),ve&&I(ve),Ne&&Fe(Number(Ne)),ue&&se(ue),Ve&&Se(Ve),w&&Me(w),a(M||"custom"),R&&R!==v?V.success(`Settings loaded. Note: Config used font "${R}".`):G||$?V.success(`Settings loaded. Custom fonts referenced: ${[G,$].filter(Boolean).join(", ")}`):V.success("Settings loaded successfully!")}}catch(Z){console.error(Z),V.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},it.readAsText(je),z.target.value=""};return Q.useEffect(()=>{const z=je=>{oe.current&&!oe.current.contains(je.target)&&r()};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[r]),d.jsxs("div",{ref:oe,onMouseDown:z=>z.stopPropagation(),className:"no-minimal-mode-toggle absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[d.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(xc,{size:18,className:"text-purple-400"}),d.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{ref:ne,type:"file",name:"import-settings",id:"import-settings",accept:".json,.txt",className:"hidden",onChange:Qe}),d.jsx("button",{onClick:()=>ne.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:d.jsx(uo,{size:16})}),d.jsx("button",{onClick:Pe,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:d.jsx(B1,{size:16})}),d.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),d.jsx("button",{onClick:fe,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:d.jsx(hf,{size:16})}),d.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:d.jsx(Ri,{size:20})})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(mf,{size:14})," Visual Preset"]}),d.jsx(Gi,{value:o,onChange:z=>Ue(z),groups:np})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(js,{size:14})," Render Scope"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("button",{onClick:()=>P("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${e.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),d.jsx("button",{onClick:()=>P("renderMode","playlist"),disabled:!p,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${e.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(eg,{size:14})," Background Source"]}),d.jsx(Gi,{value:e.backgroundSource,onChange:z=>{z==="gradient"&&!e.backgroundGradient?(a("custom"),t({...e,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):z==="smart-gradient"&&(!e.backgroundColor||e.backgroundColor==="#000000")?(a("custom"),t({...e,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):z==="color"&&!e.backgroundColor?(a("custom"),t({...e,backgroundSource:"color",backgroundColor:"#000000"})):P("backgroundSource",z)},groups:Vy}),e.backgroundSource==="smart-gradient"&&d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"smart-bg-color","aria-label":"Smart Gradient Base Color",value:e.backgroundColor,onChange:z=>P("backgroundColor",z.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),d.jsx("input",{type:"text",name:"smart-bg-hex","aria-label":"Smart Gradient Base Color Hex",value:e.backgroundColor,onChange:z=>P("backgroundColor",z.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),e.backgroundSource==="color"&&d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"solid-bg-color","aria-label":"Background Color",value:e.backgroundColor,onChange:z=>P("backgroundColor",z.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",name:"solid-bg-hex","aria-label":"Background Color Hex",value:e.backgroundColor,onChange:z=>P("backgroundColor",z.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),e.backgroundSource==="gradient"&&d.jsx("input",{type:"text",name:"custom-gradient","aria-label":"Custom CSS Gradient",value:e.backgroundGradient,onChange:z=>P("backgroundGradient",z.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),e.backgroundSource==="image"&&d.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),d.jsx("input",{ref:B,type:"file",name:"bg-image-upload",id:"bg-image-upload",accept:"image/*",onChange:ye,className:"hidden"}),e.backgroundImage?d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:d.jsx("img",{src:e.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),d.jsx("button",{onClick:()=>P("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),d.jsx("button",{onClick:()=>B.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:d.jsx(xc,{size:14})})]}):d.jsxs("button",{onClick:()=>B.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(uo,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(uS,{size:14})," Background Effects"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[d.jsx("button",{onClick:()=>P("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${e.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),d.jsx("button",{onClick:()=>P("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${e.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),e.backgroundBlurStrength>0&&d.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[e.backgroundBlurStrength,"px"]})]}),d.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:d.jsx("input",{type:"range",name:"blur-strength","aria-label":"Blur Intensity",min:"1",max:"64",step:"1",value:e.backgroundBlurStrength,onChange:z=>P("backgroundBlurStrength",parseInt(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),d.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Real Color Media Source"}),d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Disable dark dimming effect on background"})]}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",name:"real-color-media",checked:e.useRealColorMedia??!1,onChange:z=>P("useRealColorMedia",z.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),d.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),d.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",name:"gradient-overlay",checked:e.enableGradientOverlay??!1,onChange:z=>P("enableGradientOverlay",z.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ac,{size:14})," Lyric Display Mode"]}),d.jsx(Gi,{value:e.lyricDisplayMode,onChange:z=>P("lyricDisplayMode",z),groups:If})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(mf,{size:14})," Highlight Effect"]}),d.jsx(Gi,{value:e.highlightEffect||"none",onChange:z=>{P("highlightEffect",z)},groups:Rf}),e.highlightEffect&&e.highlightEffect!=="none"&&d.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[d.jsxs("button",{onClick:()=>P("useCustomHighlightColors",!e.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${e.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[d.jsx("span",{children:"Custom Colors"}),d.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${e.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:d.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${e.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),e.useCustomHighlightColors&&d.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"highlight-color","aria-label":"Highlight Text Color",value:e.highlightColor||"#fb923c",onChange:z=>P("highlightColor",z.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",name:"highlight-color-hex","aria-label":"Highlight Text Color Hex",value:e.highlightColor||"#fb923c",onChange:z=>P("highlightColor",z.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"highlight-bg-color","aria-label":"Highlight Background Color",value:e.highlightBackground||"#fb923c",onChange:z=>P("highlightBackground",z.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",name:"highlight-bg-hex","aria-label":"Highlight Background Color Hex",value:e.highlightBackground||"#fb923c",onChange:z=>P("highlightBackground",z.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(fS,{size:14})," Visible Elements"]}),d.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(z=>d.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[d.jsx("span",{className:"text-xs text-zinc-300",children:z.label}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",name:z.key,checked:e[z.key],onChange:je=>P(z.key,je.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},z.key))})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(yl,{size:14})," Intro Settings"]}),d.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[d.jsx("button",{onClick:()=>P("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${e.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),d.jsx("button",{onClick:()=>P("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${e.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),e.introMode==="manual"&&d.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),d.jsx("textarea",{name:"intro-text","aria-label":"Intro Text",value:e.introText,onChange:z=>P("introText",z.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(eg,{size:14})," Channel Info / Watermark"]}),d.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[d.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[d.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),d.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",name:"show-channel-info",checked:e.showChannelInfo??!1,onChange:z=>P("showChannelInfo",z.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),e.showChannelInfo&&d.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),d.jsx("input",{ref:C,type:"file",name:"channel-image-upload",id:"channel-image-upload",accept:"image/*",onChange:Re,className:"hidden"}),e.channelInfoImage?d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:d.jsx("img",{src:e.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),d.jsx("button",{onClick:()=>P("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),d.jsx("button",{onClick:()=>C.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:d.jsx(xc,{size:14})})]}):d.jsxs("button",{onClick:()=>C.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(uo,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),d.jsx("textarea",{name:"channel-info-text","aria-label":"Channel Info Text",value:e.channelInfoText??"",onChange:z=>P("channelInfoText",z.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("button",{onClick:()=>P("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${e.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${e.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${e.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${e.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${e.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${e.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsx(Gi,{value:e.channelInfoStyle||"classic",onChange:z=>P("channelInfoStyle",z),groups:qy})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.channelInfoMarginScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Vs,{size:12})}),d.jsx("input",{type:"range",name:"channel-margin","aria-label":"Channel Info Margin",min:"0.0",max:"5.0",step:"0.1",value:e.channelInfoMarginScale??1,onChange:z=>P("channelInfoMarginScale",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.channelInfoSizeScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Vs,{size:12})}),d.jsx("input",{type:"range",name:"channel-size","aria-label":"Channel Info Size",min:"0.5",max:"3.0",step:"0.1",value:e.channelInfoSizeScale??1,onChange:z=>P("channelInfoSizeScale",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(rf,{value:e.channelInfoFontFamily||"sans-serif",onChange:z=>P("channelInfoFontFamily",z),customFontName:Ye||null,groups:D}),d.jsx(sf,{onApply:z=>Xe(z,"channelInfoFontFamily"),placeholder:"Channel Font (e.g. Oswald)"}),d.jsx("input",{ref:Be,type:"file",name:"channel-font-upload",id:"channel-font-upload",accept:".ttf,.otf,.woff,.woff2",onChange:ct,className:"hidden"}),Ye?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-2 py-1.5 mt-1",children:[d.jsx("span",{className:"text-[10px] text-purple-300 font-medium truncate flex-1",children:Ye}),d.jsx("button",{onClick:()=>P("channelInfoFontFamily","ChannelFont"),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${e.channelInfoFontFamily==="ChannelFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"Use"}),d.jsx("button",{onClick:pt,className:"text-zinc-500 hover:text-red-400",children:d.jsx(La,{size:12})})]}):d.jsxs("button",{onClick:()=>Be.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-2 py-1.5 text-zinc-500 hover:text-purple-300 transition-colors mt-1",children:[d.jsx(uo,{size:10}),d.jsx("span",{className:"text-[10px]",children:"Upload Font"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>P("channelInfoFontWeight",e.channelInfoFontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.channelInfoFontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(tf,{size:14})}),d.jsx("button",{onClick:()=>P("channelInfoFontStyle",e.channelInfoFontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.channelInfoFontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(nf,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"channel-font-color","aria-label":"Channel Font Color",value:e.channelInfoFontColor||"#ffffff",onChange:z=>P("channelInfoFontColor",z.target.value),className:"w-6 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("span",{className:"text-[10px] text-zinc-400 font-mono uppercase",children:e.channelInfoFontColor||"#ffffff"})]})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ra,{size:14})," Song Info Design"]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("button",{onClick:()=>P("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${e.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${e.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${e.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${e.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${e.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),d.jsx("button",{onClick:()=>P("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${e.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:d.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsx(Gi,{value:e.infoStyle||"classic",onChange:z=>P("infoStyle",z),groups:jy})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.infoMarginScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Vs,{size:12})}),d.jsx("input",{type:"range",name:"info-margin","aria-label":"Song Info Margin",min:"0.0",max:"5.0",step:"0.1",value:e.infoMarginScale??1,onChange:z=>P("infoMarginScale",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.infoSizeScale??1).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(yl,{size:12})}),d.jsx("input",{type:"range",name:"info-size","aria-label":"Song Info Size",min:"0.5",max:"3.0",step:"0.1",value:e.infoSizeScale??1,onChange:z=>P("infoSizeScale",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(rf,{value:e.infoFontFamily||"sans-serif",onChange:z=>P("infoFontFamily",z),customFontName:ht||null,groups:D}),d.jsx(sf,{onApply:z=>Xe(z,"infoFontFamily"),placeholder:"Info Font (e.g. Roboto)"}),d.jsx("input",{ref:Je,type:"file",name:"info-font-upload",id:"info-font-upload",accept:".ttf,.otf,.woff,.woff2",onChange:bt,className:"hidden"}),ht?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-2 py-1.5 mt-1",children:[d.jsx("span",{className:"text-[10px] text-purple-300 font-medium truncate flex-1",children:ht}),d.jsx("button",{onClick:()=>P("infoFontFamily","InfoFont"),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${e.infoFontFamily==="InfoFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"Use"}),d.jsx("button",{onClick:It,className:"text-zinc-500 hover:text-red-400",children:d.jsx(La,{size:12})})]}):d.jsxs("button",{onClick:()=>Je.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-2 py-1.5 text-zinc-500 hover:text-purple-300 transition-colors mt-1",children:[d.jsx(uo,{size:10}),d.jsx("span",{className:"text-[10px]",children:"Upload Font"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>P("infoFontWeight",e.infoFontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.infoFontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(tf,{size:14})}),d.jsx("button",{onClick:()=>P("infoFontStyle",e.infoFontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.infoFontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(nf,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"info-font-color","aria-label":"Song Info Text Color",value:e.infoFontColor||"#ffffff",onChange:z=>P("infoFontColor",z.target.value),className:"w-6 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("span",{className:"text-[10px] text-zinc-400 font-mono uppercase",children:e.infoFontColor||"#ffffff"})]})]})]})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(yl,{size:14})," Typography & Style"]}),d.jsxs("div",{className:"space-y-4 pt-1",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),d.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(z=>d.jsx("button",{onClick:()=>P("textAlign",z),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${e.textAlign===z?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:z},z))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>P("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:d.jsx(C1,{size:14})}),d.jsx("button",{onClick:()=>P("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:d.jsx(Z0,{size:14})}),d.jsx("button",{onClick:()=>P("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:d.jsx(T1,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>P("fontWeight",e.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:d.jsx(tf,{size:14})}),d.jsx("button",{onClick:()=>P("fontStyle",e.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:d.jsx(nf,{size:14})}),d.jsx("button",{onClick:()=>P("textDecoration",e.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:d.jsx($S,{size:14})}),d.jsx("button",{onClick:()=>P("textDecoration",e.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${e.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:d.jsx(HS,{size:14})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>P("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${e.lyricStyleTarget==="active-only"||!e.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),d.jsx("button",{onClick:()=>P("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${e.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),d.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>P("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${e.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),d.jsx("button",{onClick:()=>P("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${e.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),d.jsx("button",{onClick:()=>P("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${e.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),d.jsx("button",{onClick:()=>P("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${e.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),d.jsx("button",{onClick:()=>P("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${e.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),d.jsx("button",{onClick:()=>P("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${e.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),d.jsx(rf,{value:e.fontFamily,onChange:z=>P("fontFamily",z),customFontName:v,groups:D}),d.jsx(sf,{onApply:z=>Xe(z,"fontFamily"),placeholder:"Lyrics Font (e.g. Pacifico)"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),d.jsx("input",{ref:we,type:"file",name:"main-font-upload",id:"main-font-upload",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[d.jsx(yl,{size:14,className:"text-purple-400 shrink-0"}),d.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),d.jsx("button",{onClick:()=>{P("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${e.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:e.fontFamily==="CustomFont"?"Active":"Use"}),d.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:d.jsx(La,{size:14})})]}):d.jsxs("button",{onClick:()=>we.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[d.jsx(uo,{size:14}),d.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.fontSizeScale*100).toFixed(0),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(yl,{size:12})}),d.jsx("input",{type:"range",name:"font-size","aria-label":"Font Size",min:"0.1",max:"3.0",step:"0.1",value:e.fontSizeScale,onChange:z=>P("fontSizeScale",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),d.jsx("span",{className:"text-zinc-300",children:d.jsx(yl,{size:16})})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Current Line Height"}),d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(e.lyricLineHeight||1.2).toFixed(1),"x"]})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[d.jsx("span",{className:"text-zinc-500",children:d.jsx(Z0,{size:12})}),d.jsx("input",{type:"range",name:"line-height","aria-label":"Line Height",min:"1.0",max:"3.0",step:"0.1",value:e.lyricLineHeight||1.2,onChange:z=>P("lyricLineHeight",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),e.fontFamily!=="sans-serif"&&e.fontFamily!=="CustomFont"&&d.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[d.jsx("input",{type:"color",name:"main-font-color","aria-label":"Main Font Color",value:e.fontColor,onChange:z=>P("fontColor",z.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),d.jsx("input",{type:"text",name:"main-font-hex","aria-label":"Main Font Color Hex",value:e.fontColor,onChange:z=>P("fontColor",z.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),d.jsx(Gi,{value:e.textEffect,onChange:z=>P("textEffect",z),groups:By})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),d.jsx(Gi,{value:e.textAnimation,onChange:z=>P("textAnimation",z),groups:Hy})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),d.jsx(Gi,{value:e.transitionEffect,onChange:z=>P("transitionEffect",z),groups:Oy})]}),d.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),e.visualTransitionDuration&&d.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[e.visualTransitionDuration.toFixed(1),"s"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(Gi,{value:e.visualTransitionType||"none",onChange:z=>P("visualTransitionType",z),groups:Gy})}),e.visualTransitionType&&e.visualTransitionType!=="none"&&d.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:d.jsx("input",{type:"range",name:"transition-duration","aria-label":"Transition Duration",min:"0.1",max:"5.0",step:"0.1",value:e.visualTransitionDuration||1,onChange:z=>P("visualTransitionDuration",parseFloat(z.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),d.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[d.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(js,{size:14})," Output Settings"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),d.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),d.jsx(Gi,{value:String(pe),onChange:z=>Fe(parseInt(z)),groups:LM})]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),d.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(z=>d.jsx("button",{onClick:()=>E(z),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===z?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:z},z))})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Engine"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[d.jsx("button",{onClick:()=>Se("mediarecorder"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${_e==="mediarecorder"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses browser's MediaRecorder API. Renders in realtime while playing audio.",children:"Realtime"}),d.jsx("button",{onClick:()=>Se("webcodecs"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${_e==="webcodecs"?"bg-blue-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses WebCodecs API. Hardware accelerated rendering. Fastest option.",children:"WebCodecs "}),d.jsx("button",{onClick:()=>Se("ffmpeg"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${_e==="ffmpeg"?"bg-orange-500 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses FFmpeg WASM. Frame-by-frame rendering with professional codecs.",children:"FFmpeg "})]}),d.jsx("p",{className:"text-[9px] text-zinc-600 ml-1 leading-tight",children:_e==="mediarecorder"?"Realtime recording. Fast but quality depends on browser.":_e==="webcodecs"?"Hardware accelerated (GPU). Very fast export with simple MP4.":"Software rendering. High compatiblity but slower."})]}),_e==="mediarecorder"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),d.jsx(Gi,{value:j,onChange:z=>I(z),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...Y]}]})]}),_e==="ffmpeg"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FFmpeg Codec"}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{label:"H.264",value:"h264",desc:"Best Compatibility"},{label:"H.265",value:"h265",desc:"Higher Quality"}].map(z=>d.jsxs("button",{onClick:()=>Me(z.value),className:`py-2 px-2 rounded-md text-[10px] font-medium transition-all border text-left ${et===z.value?"bg-orange-500 border-orange-400 text-white":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"}`,title:z.desc,children:[d.jsx("div",{className:"font-bold",children:z.label}),d.jsx("div",{className:"text-[8px] opacity-75",children:z.desc})]},z.value))})]}),_e==="webcodecs"&&d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),d.jsx("div",{className:"p-2 bg-zinc-800/50 rounded border border-white/5 text-[10px] text-zinc-400",children:"H.264 / AAC (Hardware Accelerated)"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>se("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${de==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),d.jsx("button",{onClick:()=>se("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${de==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),d.jsx("button",{onClick:()=>se("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${de==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),d.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[d.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[d.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",d.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),d.jsxs("button",{onClick:()=>Ge(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[d.jsx(Mc,{size:14})," View Keyboard Shortcuts"]})]})]}),ce&&d.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>Ge(!1),children:d.jsxs("div",{className:"no-minimal-mode-toggle bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:z=>z.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[d.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[d.jsx(Mc,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),d.jsx("button",{onClick:()=>Ge(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:d.jsx(Ri,{size:18})})]}),d.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),d.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[d.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),d.jsxs("div",{className:"flex gap-1 items-center",children:[d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),d.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),d.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),d.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),d.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:d.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",d.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),d.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[d.jsxs("button",{onClick:g,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[d.jsx(js,{size:16})," Start Render"]}),d.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},ip=(e,t,o,a,r,u,p,g,v,m,x,b,T,A,E,j=!0,I=!0)=>{const Y=C=>{const B=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(C);return B?{r:parseInt(B[1],16),g:parseInt(B[2],16),b:parseInt(B[3],16)}:{r:255,g:255,b:255}},de=C=>{let B=0,ne=0;if(C instanceof ImageBitmap?(B=C.width,ne=C.height):C instanceof HTMLVideoElement?(B=C.videoWidth,ne=C.videoHeight):(B=C.width,ne=C.height),B&&ne){const ce=Math.max(t/B,o/ne),Ge=t/2-B/2*ce,P=o/2-ne/2*ce;e.drawImage(C,Ge,P,B*ce,ne*ce)}},se=(C,B,ne)=>{if(B.includes(`
`))return B.split(`
`).flatMap(Re=>se(C,Re,ne));const ce=B.split(" ");let Ge=[],P=ce[0]||"";for(let Re=1;Re<ce.length;Re++){const ye=ce[Re],fe=P+" "+ye;C.measureText(fe).width<ne?P=fe:(Ge.push(P),P=ye)}Ge.push(P);const Ue=[];for(const Re of Ge)if(C.measureText(Re).width<=ne)Ue.push(Re);else{let ye="";for(const fe of Re)C.measureText(ye+fe).width<=ne?ye+=fe:(ye&&Ue.push(ye),ye=fe);ye&&Ue.push(ye)}return Ue},pe=(C,B,ne,ce,Ge,P)=>{if(Ge==="vhs"&&C instanceof CanvasRenderingContext2D)C.save(),C.globalCompositeOperation="screen",C.fillStyle="#ff0000",C.fillText(B,ne-2,ce),C.fillStyle="#00ff00",C.fillText(B,ne,ce),C.fillStyle="#0000ff",C.fillText(B,ne+2,ce),C.restore();else if(Ge==="3d"){const Ue=C.fillStyle;C.fillStyle="rgba(0,0,0,0.5)";for(let Re=1;Re<=4;Re++)C.fillText(B,ne+Re,ce+Re);C.fillStyle=Ue,C.fillText(B,ne,ce)}else if(Ge==="neon"){const Ue=C.fillStyle;C.shadowColor=Ue,C.shadowBlur=20,C.fillText(B,ne,ce),C.shadowBlur=40,C.fillText(B,ne,ce)}else if(Ge==="outline")C.strokeText(B,ne,ce),C.fillText(B,ne,ce);else if(Ge==="gradient"){const Ue=C.createLinearGradient(ne,ce-20,ne,ce+20);Ue.addColorStop(0,C.fillStyle),Ue.addColorStop(1,"#ffffff"),C.fillStyle=Ue,C.fillText(B,ne,ce)}else if(Ge==="fire")C.save(),C.shadowBlur=5,C.shadowColor="#ff0000",C.fillStyle="#ff4500",C.fillText(B,ne,ce),C.shadowBlur=2,C.shadowColor="#ffff00",C.fillStyle="#ffcc00",C.fillText(B,ne+1,ce-1),C.restore();else if(Ge==="emboss")C.fillStyle="rgba(255,255,255,0.7)",C.fillText(B,ne-1,ce-1),C.fillStyle="rgba(0,0,0,0.7)",C.fillText(B,ne+1,ce+1),C.fillStyle="rgba(128,128,128,0.5)",C.fillText(B,ne,ce);else if(Ge==="mirror")C.fillText(B,ne,ce),C.save(),C.translate(ne,ce),C.scale(1,-1),C.translate(-ne,-ce),C.globalAlpha*=.2,C.fillText(B,ne,ce-40),C.restore();else if(Ge==="neon-multi")C.fillStyle,C.shadowBlur=10,C.shadowColor="#fff",C.fillText(B,ne,ce),C.shadowBlur=20,C.shadowColor="#ff00de",C.fillText(B,ne,ce),C.shadowBlur=35,C.shadowColor="#00ffff",C.fillText(B,ne,ce);else if(Ge==="gold"){const Ue=C.createLinearGradient(ne,ce-20,ne,ce+20);Ue.addColorStop(0,"#d4af37"),Ue.addColorStop(1,"#C5A028"),C.fillStyle=Ue,C.fillText(B,ne,ce)}else if(Ge==="chrome"){const Ue=C.createLinearGradient(ne,ce-20,ne,ce+20);Ue.addColorStop(0,"#ebebeb"),Ue.addColorStop(.5,"#616161"),Ue.addColorStop(.51,"#ebebeb"),Ue.addColorStop(1,"#ebebeb"),C.fillStyle=Ue,C.fillText(B,ne,ce)}else if(Ge==="frozen")C.shadowColor="#03A9F4",C.shadowBlur=20,C.fillStyle="#ffffff",C.fillText(B,ne,ce);else if(Ge==="rainbow"){const Ue=C.createLinearGradient(ne-100,ce,ne+100,ce);Ue.addColorStop(0,"violet"),Ue.addColorStop(.16,"indigo"),Ue.addColorStop(.32,"blue"),Ue.addColorStop(.48,"green"),Ue.addColorStop(.64,"yellow"),Ue.addColorStop(.8,"orange"),Ue.addColorStop(1,"red"),C.fillStyle=Ue,C.fillText(B,ne,ce)}else if(Ge==="retro")C.fillStyle="#ff00ff",C.shadowColor="#00ffff",C.shadowBlur=0,C.shadowOffsetX=4,C.shadowOffsetY=4,C.fillText(B,ne,ce);else if(Ge==="cyberpunk")C.save(),C.fillStyle="#05d9e8",C.fillText(B,ne-1,ce-1),C.restore(),C.save(),C.fillStyle="#000000",C.fillText(B,ne+2,ce+2),C.restore(),C.save(),C.fillStyle="#fcee0a",C.fillText(B,ne,ce),C.restore();else if(Ge==="glitch-text"){const Ue=(Math.random()-.5)*5,Re=(Math.random()-.5)*2;C.save(),C.fillStyle="red",C.fillText(B,ne+Ue,ce+Re),C.restore(),C.save(),C.fillStyle="cyan",C.fillText(B,ne-Ue,ce-Re),C.restore(),C.fillStyle="#ffffff",C.fillText(B,ne,ce)}else Ge==="hologram"?(C.fillStyle="rgba(0, 255, 255, 0.7)",C.shadowColor="rgba(0,255,255,0.5)",C.shadowBlur=10,C.fillText(B,ne,ce)):(Ge==="comic"&&(C.lineWidth=3,C.strokeStyle="#000000",C.strokeText(B,ne,ce),C.fillStyle="#ffcc00"),C.fillText(B,ne,ce));if(P&&P!=="none"){const Re=C.measureText(B).width;let ye=ne;if(C.textAlign==="center"?ye=ne-Re/2:C.textAlign==="right"&&(ye=ne-Re),C.save(),C.beginPath(),C.lineWidth=Math.max(2,4*ie),C.strokeStyle=C.fillStyle,P.includes("line-through")&&(C.moveTo(ye,ce),C.lineTo(ye+Re,ce)),P.includes("underline")){const fe=C.font.match(/(\d+(\.\d+)?)px/),Pe=fe?parseFloat(fe[1]):50,Qe=ce+Pe*.4;C.moveTo(ye,Qe),C.lineTo(ye+Re,Qe)}C.stroke(),C.restore()}},Fe=(C,B,ne,ce,Ge,P,Ue,Re,ye,fe,Pe,Qe,z)=>{const je=Re?.textCase||"none",it=($,he)=>{if(!$)return $;if(je==="upper")return $.toUpperCase();if(je==="lower")return $.toLowerCase();if(je==="title")return $.replace(/\w\S*/g,re=>re.charAt(0).toUpperCase()+re.substr(1).toLowerCase());if(je==="sentence"){const re=$.toLowerCase();return he?re.charAt(0).toUpperCase()+re.slice(1):re}return je==="invert"?$.replace(/\w\S*/g,re=>re.charAt(0).toLowerCase()+re.slice(1).toUpperCase()):$};let U=B.words||[];if(U.length===0){const $=B.text.split(`
`);U=[],$.forEach((he,re)=>{const ze=he.split(" ").map(Ae=>({text:Ae,startTime:B.time,endTime:B.endTime||B.time+3}));U.push(...ze),re<$.length-1&&U.push({text:`
`,startTime:B.time,endTime:B.endTime})})}const Z=U.filter($=>$.text===`
`||$.text.trim().length>0).map(($,he)=>({...$,text:$.text===`
`?`
`:it($.text,he===0).trim()}));(Re?.highlightEffect?.includes("cyberpunk")||Re?.textEffect==="cyberpunk")&&(ye="'Orbitron', sans-serif"),C.font=`${Qe} ${Pe} ${fe}px ${ye}`;const ae=[];let Ee=[],ve=0,Ne=.3;["default","custom"].includes(m)?Ne=.25:m==="monospace"&&(Ne=.5);const ue=C.measureText("M").width*Ne;Z.forEach(($,he)=>{if($.text===`
`){Ee.length>0&&ae.push(Ee),Ee=[],ve=0;return}const re=C.measureText($.text).width;let Ae=!$.text.endsWith(" ");const ke=/[-]$/,_=/^[-]/;ke.test($.text.trim())&&(Ae=!1);const ot=Z[he+1];ot&&(_.test(ot.text.trim())||ot.text===`
`)&&(Ae=!1);const xt=Ae?ue:0;ve+re>Ge&&Ee.length>0&&(ae.push(Ee),Ee=[],ve=0),Ee.push($),ve+=re+xt}),Ee.length>0&&ae.push(Ee);const Ve=ce-(ae.length-1)*P/2;let w=Re.highlightColor||"#fb923c",M=Re.highlightBackground||"#ffffff";const R=Re.highlightEffect||"none";Re.useCustomHighlightColors||(R.includes("blue")||R.includes("cyan")?(w="#3b82f6",M="#3b82f6"):R.includes("purple")?(w="#a855f7",M="#a855f7"):R.includes("green")?(w="#22c55e",M="#22c55e"):R.includes("pink")?(w="#ec4899",M="#ec4899"):R.includes("neon")?(w="#ffffff",M="#ffffff"):R.includes("gold")?(w="#FFD700",M="#B8860B"):R.includes("chrome")?(w="#E0E0E0",M="#757575"):R.includes("fire")?(w="#FF4500",M="#FF0000"):R.includes("glass")?(w="#ffffff",M="rgba(255,255,255,0.1)"):R==="karaoke"&&(w="#fb923c",M="#fb923c"));let G=Re.fontColor||"#ffffff";Re.highlightEffect==="karaoke-smooth-white"&&(G="#ffffff"),ae.forEach(($,he)=>{const re=Ve+he*P;let ze=0;$.forEach((ke,_)=>{if(ze+=C.measureText(ke.text).width,_<$.length-1){let xt=!ke.text.endsWith(" ");const zt=/[-]$/,Nt=/^[-]/;zt.test(ke.text.trim())&&(xt=!1);const tt=$[_+1];tt&&Nt.test(tt.text.trim())&&(xt=!1),ze+=xt?ue:0}});let Ae=ne;C.textAlign==="center"?Ae=ne-ze/2:C.textAlign==="right"&&(Ae=ne-ze),C.save(),C.textAlign="left",C.textBaseline="middle",$.forEach((ke,_)=>{const ot=C.measureText(ke.text).width,xt=Ue>=ke.startTime,zt=Ue>=ke.startTime&&Ue<ke.endTime;let Nt=G;const tt=R.includes("fill")||R.includes("smooth"),Jt=tt?xt:zt;if(Jt&&R!=="none")if(R==="karaoke-smooth"||R==="karaoke-smooth-white")if(zt){const qe=ke.endTime-ke.startTime,St=Ue-ke.startTime,Ft=Math.max(0,Math.min(1,St/qe)),ni=C.createLinearGradient(Ae,0,Ae+ot,0);ni.addColorStop(Ft,w),ni.addColorStop(Math.min(1,Ft+.001),G),Nt=ni}else Nt=w;else Nt=w;if(C.save(),C.fillStyle=Nt,(zt||tt&&xt)&&(R.includes("pill")||R.includes("box")||R.includes("rounded")||R.includes("fill")||R.includes("glass"))&&Jt){const qe=R.includes("pill")?fe*.4:fe*.15;C.fillStyle=M;let St=4*z;R.includes("pill")?St=999:R.includes("rounded")||R.includes("glass")?St=8*z:R.includes("box")&&(St=0),R.includes("glass")&&(C.fillStyle="rgba(255,255,255,0.1)",C.shadowColor="rgba(255,255,255,0.2)",C.shadowBlur=10),C.beginPath(),C.roundRect?C.roundRect(Ae-qe,re-P/2,ot+qe*2,P,St):C.rect(Ae-qe,re-P/2,ot+qe*2,P),C.fill(),R.includes("glass")&&(C.strokeStyle="rgba(255,255,255,0.3)",C.lineWidth=1,C.stroke()),R.includes("fill")||R.includes("pill")||R.includes("box")||R.includes("rounded")?(C.fillStyle="#000000",Nt="#000000"):C.fillStyle=w}if(Jt){if(R.includes("underline")){const qe=Math.max(2,fe*.08),St=re+fe*.6;C.fillStyle=w,C.fillRect(Ae,St,ot,qe),C.fillStyle=Nt}if((R.includes("glow")||R.includes("neon"))&&(R.includes("neon")?(C.fillStyle="#ffffff",C.shadowColor=w,C.shadowBlur=20):(C.shadowColor=w,C.shadowBlur=10)),R.includes("outline")&&(C.strokeStyle=w,C.lineWidth=2*z,C.strokeText(ke.text,Ae,re),C.fillStyle="transparent",R==="karaoke-outline"&&(Nt="transparent",C.fillStyle="transparent")),R.includes("shadow")&&(C.shadowColor="#000000",C.shadowOffsetX=3*z,C.shadowOffsetY=3*z,C.shadowBlur=0),R.includes("gradient")){const qe=C.createLinearGradient(Ae,re-P/2,Ae+ot,re+P/2);qe.addColorStop(0,w),qe.addColorStop(1,M),C.fillStyle=qe,Nt=qe}}let ge=re,De=Ae,dt=0,mt=1,st=1,Pt=1,$t=0;if(Jt){const qe=Ue-ke.startTime;if(R.includes("bounce")||R==="karaoke-bounce")ge-=10*z;else if(R.includes("wave"))ge+=Math.sin(Ue*5+_)*8*z;else if(R.includes("pulse")){const Ft=1+Math.sin(Ue*6)*.1;mt=Ft,st=Ft}else if(R.includes("shake"))De+=(Math.random()-.5)*6*z,ge+=(Math.random()-.5)*6*z;else if(R.includes("wobble"))dt=Math.sin(Ue*6)*.1;else if(R.includes("rotate")&&!R.includes("in"))dt=Math.sin(Ue*3)*.1;else if(R.includes("spin"))dt=Ue*3%(Math.PI*2);else if(R.includes("jello"))mt=1+Math.sin(Ue*8)*.15,st=1-Math.sin(Ue*8)*.15;else if(R.includes("heartbeat")){const Ft=Ue*2%1;(Ft<.15||Ft>.3&&Ft<.45)&&(mt=1.15,st=1.15)}else if(R.includes("flash"))Pt=.5+Math.sin(Ue*10)*.5;else if(R.includes("tada")){const Ft=Ue*2%1;Ft<.1?(dt=-.05,mt=.9):Ft<.2&&(dt=.05,mt=1.1)}else R.includes("swing")?dt=Math.sin(Ue*4)*.15:R.includes("glitch")&&Math.sin(Ue*15)>.8&&(De+=(Math.random()-.5)*10,ge+=(Math.random()-.5)*10);const St=.3;if(qe<St){const Ft=qe/St,Bt=(gn=>1-Math.pow(1-gn,3))(Ft);if(R.includes("fade"))Pt=Ft;else if(R.includes("slide"))ge+=(1-Bt)*30*z,Pt=Bt;else if(R.includes("drop"))ge-=(1-Bt)*50*z,Pt=Bt;else if(R.includes("zoom")||R.includes("scale")){const gn=.5+.5*Bt;mt*=gn,st*=gn}else if(R.includes("elastic")){const gn=Ft===0?0:Ft===1?1:Math.pow(2,-10*Ft)*Math.sin((Ft*10-.75)*(2*Math.PI)/3)+1;mt*=gn,st*=gn}else if(R.includes("flip"))st*=Bt;else if(R.includes("rotate-in"))dt+=(1-Bt)*-1,Pt=Bt;else if(R.includes("roll"))De-=(1-Bt)*50*z,dt-=(1-Bt)*Math.PI,Pt=Bt;else if(R.includes("lightspeed"))De+=(1-Bt)*100*z,Pt=Bt;else if(R.includes("blur"))$t=(1-Bt)*10,Pt=Bt;else if(R.includes("shatter")){const gn=1+(1-Bt)*2;mt*=gn,st*=gn,$t=(1-Bt)*10,Pt=Bt}else R.includes("spiral")&&(mt*=Bt,st*=Bt,dt+=(1-Bt)*Math.PI*2)}else R.includes("scale")&&(mt*=1.3,st*=1.3)}if(C.save(),Pt<1&&(C.globalAlpha*=Pt),$t>0&&(C.filter=`blur(${$t}px)`),dt!==0||mt!==1||st!==1){const qe=De+ot/2,St=ge;C.translate(qe,St),C.rotate(dt),C.scale(mt,st),C.translate(-qe,-St)}if(Jt){if(R==="karaoke-smooth-plus"){const qe=Re.textEffect||"none";if(zt){const St=ke.endTime-ke.startTime,Ft=Ue-ke.startTime,ni=Math.max(0,Math.min(1,Ft/St)),Bt=De+ot*ni,gn=Re?.textDecoration||"none",xl=eo=>{if(gn!=="none"){C.lineWidth=Math.max(2,3*z),C.strokeStyle=eo,C.beginPath();const Ho=ge+fe*.45;gn.includes("underline")&&(C.moveTo(De,Ho),C.lineTo(De+ot,Ho)),gn.includes("line-through")&&(C.moveTo(De,ge),C.lineTo(De+ot,ge)),C.stroke()}};C.save(),C.beginPath(),C.rect(De-50,ge-P,Bt-(De-50),P*2),C.clip(),C.fillStyle=w,pe(C,ke.text,De,ge,qe),xl(w),C.restore(),C.save(),C.beginPath(),C.rect(Bt,ge-P,De+ot+50-Bt,P*2),C.clip(),C.fillStyle=G,C.fillText(ke.text,De,ge),xl(G),C.restore(),Nt="rgba(0,0,0,0)"}else C.fillStyle=w,pe(C,ke.text,De,ge,qe),Nt=w}else if(R.includes("gradient")||R.includes("chrome")||R.includes("gold")){const qe=C.createLinearGradient(De,ge-P/2,De,ge+P/2);R.includes("gold")?(qe.addColorStop(0,"#d4af37"),qe.addColorStop(1,"#C5A028")):R.includes("chrome")?(qe.addColorStop(0,"#ebebeb"),qe.addColorStop(.5,"#616161"),qe.addColorStop(.51,"#ebebeb"),qe.addColorStop(1,"#ebebeb")):(qe.addColorStop(0,w),qe.addColorStop(1,M)),C.fillStyle=qe}if(R.includes("shadow")&&(C.save(),C.fillStyle="#000000",C.fillText(ke.text,De+2*z,ge+2*z),C.restore()),R.includes("3d")){const qe=C.fillStyle;C.fillStyle="rgba(0,0,0,0.5)";for(let St=1;St<=3;St++)C.fillText(ke.text,De+St*z,ge+St*z);C.fillStyle=qe}if(R.includes("neon-multi"))C.shadowBlur=10,C.shadowColor="#fff",C.fillText(ke.text,De,ge),C.shadowBlur=20,C.shadowColor="#ff00de",C.fillText(ke.text,De,ge),C.shadowBlur=35,C.shadowColor="#00ffff",C.fillText(ke.text,De,ge);else if(R.includes("cyberpunk"))C.save(),C.fillStyle="#05d9e8",C.fillText(ke.text,De-1,ge-1),C.restore(),C.save(),C.fillStyle="#000000",C.fillText(ke.text,De+2,ge+2),C.restore(),C.fillStyle="#fcee0a",C.fillText(ke.text,De,ge);else if(R.includes("glitch-text")){const qe=(Math.random()-.5)*5,St=(Math.random()-.5)*2;C.save(),C.fillStyle="red",C.fillText(ke.text,De+qe,ge+St),C.restore(),C.save(),C.fillStyle="cyan",C.fillText(ke.text,De-qe,ge-St),C.restore(),C.fillStyle="#ffffff",C.fillText(ke.text,De,ge)}else if(R.includes("retro")||R.includes("vhs")){const qe=Math.sin(Ue*5)*2*z,St=Math.random()>.95?(Math.random()-.5)*5:0;C.globalCompositeOperation="screen",C.fillStyle="#ff0000",C.fillText(ke.text,De-3*z+qe,ge+St),C.fillStyle="#00ff00",C.fillText(ke.text,De+St,ge-qe),C.fillStyle="#0000ff",C.fillText(ke.text,De+3*z-qe,ge+St)}else if(R.includes("fire")){const qe=Math.abs(Math.sin(Ue*15))*5,St=Math.sin(Ue*20)*1*z;C.shadowBlur=5+qe,C.shadowColor="#ff0000",C.fillStyle="#ff4500",C.fillText(ke.text,De,ge+St),C.shadowBlur=2,C.shadowColor="#ffff00",C.fillStyle="#ffcc00",C.fillText(ke.text,De+Math.sin(Ue*25)*1*z,ge-1*z+St)}else if(R.includes("typewriter")){const qe=Ue-ke.startTime,St=ke.endTime-ke.startTime,Ft=Math.min(1,Math.max(0,qe/St)),ni=Math.floor(ke.text.length*Ft),Bt=ke.text.substring(0,ni);R.includes("outline")?(C.strokeStyle=w,C.strokeText(Bt,De,ge)):C.fillText(Bt,De,ge)}else!R.includes("neon-multi")&&!R.includes("retro")&&!R.includes("vhs")&&!R.includes("fire")&&(R.includes("outline")?(C.strokeStyle=w,C.lineWidth=2*z,C.strokeText(ke.text,De,ge)):C.fillText(ke.text,De,ge))}else C.fillText(ke.text,De,ge);const Rn=Re?.textDecoration||"none";if(Rn!=="none"){if(C.lineWidth=Math.max(2,3*z),C.strokeStyle=Nt,C.beginPath(),Rn.includes("underline")&&!R.includes("underline")){const qe=ge+fe*.45;C.moveTo(De,qe),C.lineTo(De+ot,qe)}Rn.includes("line-through")&&(C.moveTo(De,ge),C.lineTo(De+ot,ge)),C.stroke()}C.restore(),C.restore();let An=!ke.text.endsWith(" ");const ai=/[-]$/,bi=/^[-]/;ai.test(ke.text.trim())&&(An=!1);const Jn=$[_+1];Jn&&bi.test(Jn.text.trim())&&(An=!1),Ae+=ot+(An?ue:0)}),C.restore()})},_e=(C,B,ne,ce,Ge,P,Ue,Re)=>{const ye=se(C,B,Ge),fe=ce-(ye.length-1)*P/2;ye.forEach((Pe,Qe)=>{const z=fe+Qe*P;if(Ue==="glass"){const je=C.measureText(Pe).width;C.save(),C.fillStyle="rgba(255, 255, 255, 0.1)",C.beginPath(),C.roundRect?C.roundRect(ne-(C.textAlign==="center"?je/2:C.textAlign==="right"?je:0)-10,z-P/2,je+20,P,8):C.rect(ne-(C.textAlign==="center"?je/2:C.textAlign==="right"?je:0)-10,z-P/2,je+20,P),C.fill(),C.strokeStyle="rgba(255, 255, 255, 0.2)",C.stroke(),C.restore()}pe(C,Pe,ne,z,Ue,Re)})},Se='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',et='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',Me='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Ye='"Metal Mania", cursive',ct='"Fredoka One", cursive',pt='"Shadows Into Light", cursive',ht='"Dancing Script", cursive',bt='"Orbitron", sans-serif',It='"UnifrakturMaguntia", cursive';let V=Se;m==="classic"?V=et:m==="monospace"?V=Me:m==="metal"?V=Ye:m==="kids"?V=ct:m==="sad"?V=pt:m==="romantic"?V=ht:m==="tech"?V=bt:m==="gothic"?V=It:m==="custom"&&(V=E?.fontFamily||Se),x&&(V="CustomFont, sans-serif"),E&&E.fontFamily!=="sans-serif"&&(V=E.fontFamily);const Ce=t<=o,ie=Math.min(t,o)/1080;if(E&&(E.backgroundSource==="color"||E.backgroundSource==="smart-gradient")?e.fillStyle=E.backgroundColor||"#000000":e.fillStyle="#000000",e.fillRect(0,0,t,o),E?.backgroundSource==="gradient"&&E.backgroundGradient)e.fillStyle=E.backgroundGradient,e.fillRect(0,0,t,o);else if(E?.backgroundSource==="smart-gradient"){const C=E.backgroundColor||"#312e81",B=Y(C),ne=e.createLinearGradient(0,0,t,o);ne.addColorStop(0,C),ne.addColorStop(.5,`rgb(${Math.floor(B.r*.6)}, ${Math.floor(B.g*.6)}, ${Math.floor(B.b*.6)})`),ne.addColorStop(1,"#000000"),e.fillStyle=ne,e.fillRect(0,0,t,o)}else if(E?.backgroundSource==="image"&&E.backgroundImage){const C=g.get("__custom_bg__");C&&de(C)}if(E&&E.backgroundBlurStrength>0?e.filter=`blur(${E.backgroundBlurStrength}px)`:T&&(e.filter="blur(12px)"),!E||E.backgroundSource==="timeline"||E.backgroundSource==="custom"){const C=E?E.backgroundSource==="timeline":!0;let B=!1;if(C){const ne=E?.visualTransitionType||"none",ce=E?.visualTransitionDuration||1,Ge=p.filter(P=>P.type==="audio"?!1:a>=P.startTime&&a<P.endTime||ne==="crossfade"&&a>=P.endTime&&a<P.endTime+ce);Ge.sort((P,Ue)=>{const Re=(P.layer||0)-(Ue.layer||0);return Re!==0?Re:P.startTime-Ue.startTime}),Ge.length>0&&(Ge.forEach(P=>{const Ue=P.layer||0;if(E&&E.layerVisibility?.visual?.[Ue]===!1)return;const Re=P.type==="video"?v.get(P.id):null,ye=P.type!=="video"?g.get(P.id):null;let fe=1;if(ne!=="none"){if(a<P.startTime+ce){const Pe=(a-P.startTime)/ce;fe=Math.max(0,Math.min(1,Pe))}if(a>=P.endTime){let Pe=!1;if(ne==="crossfade"&&(Pe=p.some(Qe=>Qe.id!==P.id&&(Qe.layer||0)===(P.layer||0)&&Qe.startTime>=P.endTime-.1&&Qe.startTime<P.endTime+.2)),!Pe){const z=1-(a-P.endTime)/ce;fe=Math.min(fe,Math.max(0,Math.min(1,z)))}}else if(ne==="fade-to-black"&&a>P.endTime-ce){const Pe=(P.endTime-a)/ce;fe=Math.min(fe,Math.max(0,Math.min(1,Pe)))}}fe>0&&(e.save(),e.globalAlpha=fe,Re?de(Re):ye&&de(ye),e.restore())}),B=!0)}if(!B&&u.coverUrl&&p.length===0){const ne=u.backgroundType==="video"?v.get("background"):null,ce=g.get("cover");ne?de(ne):ce&&de(ce)}}if((E&&E.backgroundBlurStrength>0||T)&&(e.filter="none"),!["just_video","none"].includes(m)&&!E?.useRealColorMedia&&(e.fillStyle=E&&(E.backgroundSource==="color"||E.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",e.fillRect(0,0,t,o)),E?.enableGradientOverlay){const C=e.createLinearGradient(0,o,0,0);C.addColorStop(0,"rgba(0, 0, 0, 0.95)"),C.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),C.addColorStop(.7,"rgba(0, 0, 0, 0)"),e.fillStyle=C,e.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const Et=r.findIndex((C,B)=>{if(C.endTime!==void 0)return a>=C.time&&a<C.endTime;const ne=r[B+1];return a>=C.time&&(!ne||a<ne.time)});let Xe=Et;if(Xe===-1&&r.length>0)if(a<r[0].time)Xe=0;else{const C=r.findIndex(B=>B.time>a);Xe=C!==-1?C:r.length-1}const D=E?.introMode==="manual"&&E.introText?E.introText:`${u.title}
${u.artist}`;let oe=Et===-1&&a<5&&(E?.showIntro??!0)&&(E?.introMode!=="manual"||I)&&(r.length===0||a<r[0].time),we=(Ce?50:60)*ie,Be=(Ce?25:30)*ie,Je=(Ce?80:100)*ie;if(m==="large"?(we=(Ce?90:120)*ie,Je=(Ce?110:140)*ie):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(we=(Ce?80:110)*ie,Je=(Ce?110:140)*ie):["sad","romantic","gothic"].includes(m)?(we=(Ce?60:75)*ie,Je=(Ce?90:120)*ie):["slideshow","subtitle"].includes(m)&&(we=(Ce?30:40)*ie),we*=b,Be*=b,Je*=b,(E?.showLyrics??!0)&&(Et!==-1||oe||E?.lyricDisplayMode==="all"&&r.length>0)){let C=o/2;E?.contentPosition==="top"?C=o*.15:E?.contentPosition==="bottom"&&(C=o*.9);let B=0;const ne=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(ne||m==="slideshow"||m==="subtitle"){const Re=oe?{text:D}:r[Et]||r[Xe];if(Re){e.font=`900 ${we}px ${V}`;const ye=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?Re.text.toUpperCase():Re.text,fe=se(e,ye,t*.9);fe.length>1&&(B=(fe.length-1)*(we*1.2)/2)}}let ce=ne?-1:-2,Ge=ne?1:2;E?.lyricDisplayMode==="active-only"?(ce=0,Ge=0):E?.lyricDisplayMode==="next-only"?(ce=0,Ge=1):E?.lyricDisplayMode==="previous-next"?(ce=-1,Ge=1):E?.lyricDisplayMode==="all"&&(ce=-r.length,Ge=r.length);const P=new Map,Ue=new Map;{const Re=Math.max((Ce?30:40)*ie,Je-we);for(let ye=ce;ye<=Ge;ye++){let fe=0,Pe=!1;if(oe&&ye===0){const Qe=we*1.2,z=Be*1.2,it=D.split(`
`).length>1;fe=Qe+(it?z:0),Pe=!0}else{const Qe=Xe+ye;if(Qe>=0&&Qe<r.length){const z=r[Qe];Pe=Qe===Et;const je=Pe?we:Be;let it=Pe?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",U=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((E?.lyricStyleTarget||"active-only")==="all"||Pe?(E?.fontWeight&&(it=E.fontWeight),E?.fontStyle&&(U=E.fontStyle)):(it="400",U="normal")),e.font=`${U} ${it} ${je}px ${V}`;let Z=z.text,ae=E?.textCase||"none";ae==="none"&&Pe&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(ae="upper"),ae==="upper"?Z=Z.toUpperCase():ae==="lower"?Z=Z.toLowerCase():ae==="title"?Z=Z.replace(/\w\S*/g,ve=>ve.charAt(0).toUpperCase()+ve.substr(1).toLowerCase()):ae==="sentence"?Z=Z.charAt(0).toUpperCase()+Z.slice(1).toLowerCase():ae==="invert"&&(Z=Z.replace(/\w\S*/g,ve=>ve.charAt(0).toLowerCase()+ve.slice(1).toUpperCase())),fe=se(e,Z,t*.9).length*(je*1.2)}}Ue.set(ye,fe)}P.set(0,C);for(let ye=1;ye<=Ge;ye++){const fe=P.get(ye-1)??C,Pe=Ue.get(ye-1)??0,Qe=Ue.get(ye)??0;P.set(ye,fe+Pe/2+Re+Qe/2)}for(let ye=-1;ye>=ce;ye--){const fe=P.get(ye+1)??C,Pe=Ue.get(ye+1)??0,Qe=Ue.get(ye)??0;P.set(ye,fe-Pe/2-Re-Qe/2)}}for(let Re=ce;Re<=Ge;Re++){let ye=null,fe=!1;if(oe)Re===0&&(ye={time:0,text:D},fe=!0);else{const Pe=Xe+Re;Pe>=0&&Pe<r.length&&(ye=r[Pe],fe=Pe===Et)}if(ye){E?.lyricDisplayMode,e.textAlign=E?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),e.textBaseline="middle";const Pe=E?.fontColor||"#ffffff";let Qe=Pe;if(!fe)if(E?.highlightEffect==="karaoke-smooth-white")Qe="#ffffff";else{const tt=Y(Pe);Qe=`rgba(${tt.r}, ${tt.g}, ${tt.b}, 0.5)`}let z=fe?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",je=["classic","romantic"].includes(m)?"italic":"normal",it="none";(m==="custom"||m==="default")&&((E?.lyricStyleTarget||"active-only")==="all"||fe?(E?.fontWeight&&(z=E.fontWeight),E?.fontStyle&&(je=E.fontStyle),E?.textDecoration&&(it=E.textDecoration)):(z="400",je="normal",it="none")),e.font=`${je} ${z} ${fe?we:Be}px ${V}`,e.fillStyle=Qe;const U=E?.transitionEffect||"none";let Z=1,ae=0,Ee=0,ve=1,Ne=1,ue=0,Ve=0;if(fe&&U!=="none"){const tt=a-ye.time,Jt=ye.endTime?ye.endTime-a:.5,ge=.5,De=tt<ge?tt/ge:ye.endTime&&Jt<ge?Jt/ge:1;if(De<1){Z=Math.min(1,De*2);const dt=st=>1+2.70158*Math.pow(st-1,3)+1.70158*Math.pow(st-1,2),mt=st=>{const Pt=2*Math.PI/3;return st===0?0:st===1?1:Math.pow(2,-10*st)*Math.sin((st*10-.75)*Pt)+1};if(U==="slide")ae=(1-De)*(tt<ge?30:-30);else if(U==="zoom"){const st=.5+De*.5;ve=st,Ne=st}else if(U==="blur")ue=(1-De)*10;else if(U==="float")ae=(1-De)*(tt<ge?50:-50);else if(U==="drop")ae=(1-dt(De))*-200,Z=De;else if(U==="flip")Ne=De;else if(U==="rotate-in")Ve=(1-De)*-Math.PI/2,Z=De;else if(U==="spiral")ve=De,Ne=De,Ve=(1-De)*Math.PI*2,Z=De;else if(U==="shatter"){const st=3-2*De;ve=st,Ne=st,ue=(1-De)*20,Z=De}else if(U==="lightspeed")Ee=(1-De)*300,Z=De;else if(U==="roll")Ee=(1-De)*-300,Ve=(1-De)*-Math.PI,Z=De;else if(U==="elastic"){const st=mt(De);ve=st,Ne=st,Z=De}}}e.save(),e.globalAlpha=Z,ue>0&&(e.filter=`blur(${ue}px)`);const w=fe&&E?.textAnimation||"none";let M=ye.text,R=E?.textCase||"none";R==="none"&&fe&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(R="upper"),R==="upper"?M=M.toUpperCase():R==="lower"?M=M.toLowerCase():R==="title"?M=M.replace(/\w\S*/g,tt=>tt.charAt(0).toUpperCase()+tt.substr(1).toLowerCase()):R==="sentence"?M=M.charAt(0).toUpperCase()+M.slice(1).toLowerCase():R==="invert"&&(M=M.replace(/\w\S*/g,tt=>tt.charAt(0).toLowerCase()+tt.slice(1).toUpperCase()));let G=0,$=0,he=1,re=1,ze=0;if(fe&&w!=="none")if(w==="bounce")$=Math.sin(a*6)*15*ie;else if(w==="pulse"){const tt=1+Math.sin(a*4)*.08;he=tt,re=tt}else if(w==="wave")$=Math.sin(a*4)*20*ie,ze=Math.sin(a*4)*.05;else if(w==="glitch")Math.sin(a*10)>.8&&(G=(Math.random()-.5)*15*ie,$=(Math.random()-.5)*15*ie);else if(w==="shake")G=(Math.random()-.5)*5*ie,$=(Math.random()-.5)*5*ie;else if(w==="typewriter"){const Jt=Math.floor((a-ye.time)*30);M=M.substring(0,Math.max(0,Jt))}else if(w==="wobble"){ze=Math.sin(a*5)*.05;const tt=1+Math.sin(a*3)*.05;he=tt,re=tt}else if(w==="breathe"){const tt=1+Math.sin(a*2)*.03;he=tt,re=tt}else if(w==="rotate")ze=Math.sin(a*2)*.05;else if(w==="sway")ze=Math.sin(a*2)*.08;else if(w==="flicker")e.globalAlpha=Z*(.8+Math.random()*.2);else if(w==="jello")he=1+Math.sin(a*6)*.1,re=1-Math.sin(a*6)*.1;else if(w==="spin")ze=a%2*Math.PI;else if(w==="heartbeat"){const tt=a*1.5%1;(tt<.1||tt>.3&&tt<.4)&&(he=1.1,re=1.1)}else if(w==="tada"){const tt=a*1.5%1;tt<.1?(he=.9,re=.9,ze=-.05):tt<.2?(he=1.1,re=1.1,ze=.05):(he=1,re=1,ze=0)}else w==="swing"&&(ze=Math.sin(a*3)*.1);let Ae=0;P.has(Re)?Ae=P.get(Re)+(Re===0?ae:0):(Ae=m==="subtitle"&&Re===0&&E?.lyricDisplayMode!=="all"?o-140*ie:C+Re*Je+(Re===0?ae:0),m!=="custom"&&(Re<0?Ae-=B:Re>0&&(Ae+=B))),Ae+=$;let ke=t/2;e.textAlign==="left"?ke=60*ie:e.textAlign==="right"&&(ke=t-60*ie),ke+=Ee+G;const _=ve*he,ot=Ne*re,xt=Ve+ze;(_!==1||ot!==1||xt!==0)&&(e.translate(ke,Ae),e.rotate(xt),e.scale(_,ot),e.translate(-ke,-Ae));const zt=fe?E?.textEffect||"preset":"none";if(oe&&Re===0&&E?.introMode!=="manual"){const tt=M.split(`
`),Jt=tt[0],ge=tt.slice(1).join(`
`),De=we*1.2,dt=Be*1.2,mt=20*ie;let st=Ae;ge&&(st=Ae-dt/2-mt/2);const Pt=Ae+De/2+mt/2;if(e.font=`${je} ${z} ${we}px ${V}`,_e(e,Jt,ke,st,t*.9,De,zt,it),ge){const $t=m==="custom"&&E?.fontWeight?E.fontWeight:"400";e.font=`${je} ${$t} ${Be}px ${V}`,_e(e,ge,ke,Pt,t*.9,dt,zt,it)}}else{const tt=fe?we:Be;E&&E.highlightEffect&&E.highlightEffect,fe&&ye?Fe(e,ye,ke,Ae,t*.9,tt*(E?.lyricLineHeight||1.2),a,E,V,tt,z,je,ie):_e(e,M,ke,Ae,t*.9,tt*(E?.lyricLineHeight||1.2),zt,it)}e.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const C=E?E.showTitle||E.showArtist:!0,B=E?E.showCover:!0;if(C||B)if(m==="custom"||m==="default"){const ne=E?.infoPosition||"top-left",ce=E?.infoStyle||"classic",Ge=ce==="box",P=Ge?16*ie:12*ie,Ue=40*ie*(E?.infoMarginScale??1);let Re="left",ye="top";ne.includes("left")?Re="left":ne.includes("right")?Re="right":Re="center",ne.includes("top")?ye="top":ye="bottom";const fe=E?.infoSizeScale??1,Pe=(ce==="minimal"||ce==="modern"?0:100*ie)*fe,Qe=B&&Pe>0&&u.coverUrl!==null,z=Qe?u.backgroundType==="video"?v.get("background"):g.get("cover"):null,je=(ce==="minimal"?20:ce==="modern"||ce==="modern_art"?40:28)*ie,it=(ce==="minimal"?14:ce==="modern"||ce==="modern_art"?24:18)*ie,U=je*fe,Z=it*fe,ae=E?.infoFontFamily||V,Ee=E?.infoFontWeight||"bold",ve=E?.infoFontStyle||"normal",Ne=`${ve} ${Ee} ${U}px ${ae}`,ue=`${ve} ${Ee} ${Z}px ${ae}`,Ve=20*ie,w=Ge?24*ie:0,M=E?.infoFontColor||"#ffffff",R=ce==="modern"||ce==="modern_art"?M:E?.infoFontColor||"#d4d4d8";e.font=Ne;const G=e.measureText(u.title),$=E?.showTitle?G.width:0;e.font=ue;const he=e.measureText(u.artist),re=E?.showArtist?he.width:0;let ze=0,Ae=0;if(Re==="center"){ze=Math.max(Qe&&z?Pe:0,$,re)+w*2;let De=0;Qe&&z&&(De+=Pe),(E?.showTitle??!0)&&(De+=(Qe&&z?Ve:0)+U),(E?.showArtist??!0)&&(De+=(Qe&&z||(E?.showTitle??!0)?5*ie:0)+Z),Ae=De+w*2}else{const ge=Math.max($,re);ze=(Qe&&z?Pe+Ve:0)+ge+w*2;const dt=(E?.showTitle?U:0)+(E?.showArtist?Z+5*ie:0);Ae=Math.max(dt,Qe&&z?Pe:0)+w*2}let ke=0,_=0;Re==="left"?ke=Ue:Re==="right"?ke=t-Ue:ke=t/2,ye==="top"?_=Ue:_=o-Ue;let ot=0,xt=0;Re==="left"?ot=ke:Re==="right"?ot=ke-ze:ot=ke-ze/2,ye==="top"?xt=_:xt=_-Ae,Ge&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.6)",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=20,e.beginPath(),e.roundRect(ot,xt,ze,Ae,P),e.fill(),e.restore());const zt=ot+w,Nt=xt+w,tt=ze-w*2,Jt=Ae-w*2;if(Re==="center"){let ge=Nt;const De=zt+tt/2;if(e.textAlign="center",ye==="top"){if(Qe&&z){e.save(),e.beginPath();const dt=De-Pe/2;ce==="circle_art"?e.arc(De,ge+Pe/2,Pe/2,0,Math.PI*2):e.roundRect(dt,ge,Pe,Pe,P/2),e.clip(),e.drawImage(z,dt,ge,Pe,Pe),e.restore(),ge+=Pe+Ve}(E?.showTitle??!0)&&(e.fillStyle=M,e.font=Ne,e.textBaseline="top",e.fillText(u.title,De,ge),ge+=U+5*ie),(E?.showArtist??!0)&&(e.fillStyle=R,e.font=ue,e.textBaseline="top",e.fillText(u.artist,De,ge))}else{if(Qe&&z){e.save(),e.beginPath();const dt=De-Pe/2;ce==="circle_art"?e.arc(De,ge+Pe/2,Pe/2,0,Math.PI*2):e.roundRect(dt,ge,Pe,Pe,P/2),e.clip(),e.drawImage(z,dt,ge,Pe,Pe),e.restore(),ge+=Pe+Ve}(E?.showTitle??!0)&&(e.fillStyle=M,e.font=Ne,e.textBaseline="top",e.fillText(u.title,De,ge),ge+=U+5*ie),(E?.showArtist??!0)&&(e.fillStyle=R,e.font=ue,e.textBaseline="top",e.fillText(u.artist,De,ge))}}else{const ge=Re==="right",De=Nt+Jt/2;let dt=zt;if(ge&&(dt=zt+tt),Qe&&z){const Pt=De-Pe/2,$t=ge?dt-Pe:dt;e.save(),e.beginPath(),ce==="circle_art"?e.arc($t+Pe/2,Pt+Pe/2,Pe/2,0,Math.PI*2):e.roundRect($t,Pt,Pe,Pe,P/2),e.clip(),e.drawImage(z,$t,Pt,Pe,Pe),e.restore(),ge?dt-=Pe+Ve:dt+=Pe+Ve}const mt=(E?.showTitle?U:0)+(E?.showArtist?Z+5*ie:0);let st=De-mt/2;e.textAlign=ge?"right":"left",e.textBaseline="top",(E?.showTitle??!0)&&(e.fillStyle=M,e.font=Ne,e.fillText(u.title,dt,st),st+=U+5*ie),(E?.showArtist??!0)&&(e.fillStyle=R,e.font=ue,e.fillText(u.artist,dt,st))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(C){e.textAlign="center",e.textBaseline="middle";let ne=80*ie;["testing","testing_up","one_line","one_line_up"].includes(m)&&(ne=120*ie),(E?.showTitle??!0)&&(e.font=`bold ${20*ie}px ${V}`,e.fillStyle="#ffffff",e.fillText(m==="tech"?u.title.toUpperCase():u.title,t/2,o-ne-30*ie)),(E?.showArtist??!0)&&(e.font=`${16*ie}px ${V}`,e.fillStyle="#d4d4d8",e.fillText(u.artist,t/2,o-ne))}}else{const ne=40*ie*(E?.infoMarginScale??1),ce=t===o,Ge=(Ce?ce?110:150:100)*ie,P=u.coverUrl?g.get("cover"):null,Ue=12*ie;if(Ce){const Re=ne*(ce?1.5:3),ye=t/2,fe=ye-Ge/2,Pe=Re;if(B&&(e.save(),e.beginPath(),e.roundRect(fe,Pe,Ge,Ge,Ue),e.clip(),P?e.drawImage(P,fe,Pe,Ge,Ge):(e.fillStyle="#27272a",e.fillRect(fe,Pe,Ge,Ge)),e.restore()),C){e.textAlign="center",e.textBaseline="top";const Qe=Pe+(B?Ge+25*ie:0),z=E?.infoFontFamily||V,je=E?.infoFontColor||"#ffffff",it=E?.infoFontColor||"#d4d4d8",U=E?.infoFontWeight||"bold",Z=E?.infoFontStyle||"normal";(E?.showTitle??!0)&&(e.font=`${Z} ${U} ${(ce?26:36)*ie}px ${z}`,e.fillStyle=je,e.fillText(u.title,ye,Qe)),(E?.showArtist??!0)&&(e.font=`${Z} ${U} ${(ce?18:24)*ie}px ${z}`,e.fillStyle=it,e.fillText(u.artist,ye,Qe+(E?.showTitle??!0?(ce?30:40)*ie:0)))}}else{const Re=ne,ye=ne;if(B&&(e.save(),e.beginPath(),e.roundRect(Re,ye,Ge,Ge,Ue),e.clip(),P?e.drawImage(P,Re,ye,Ge,Ge):(e.fillStyle="#27272a",e.fillRect(Re,ye,Ge,Ge)),e.restore()),C){e.textAlign="left",e.textBaseline="top";const fe=E?.infoFontFamily||V,Pe=E?.infoFontColor||"#ffffff",Qe=E?.infoFontColor||"#d4d4d8",z=E?.infoFontWeight||"bold",je=E?.infoFontStyle||"normal",it=Re+(B?Ge+25*ie:0),U=28*ie,Z=ye+Ge/2-U;(E?.showTitle??!0)&&(e.font=`${je} ${z} ${U}px ${fe}`,e.fillStyle=Pe,e.fillText(u.title,it,Z)),(E?.showArtist??!0)&&(e.font=`${je} ${z} ${18*ie}px ${fe}`,e.fillStyle=Qe,e.fillText(u.artist,it,Z+(E?.showTitle??!0?U+5*ie:0)))}}}}if(E?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const C=E.channelInfoPosition||"bottom-right",B=E.channelInfoStyle||"classic",ne=E.channelInfoSizeScale??1,ce=E.channelInfoMarginScale??1,Ge=g.get("__channel_info__"),P=E.channelInfoText;if(!(!Ge&&!P)){if(!(B==="logo"&&!Ge)){if(!(B==="minimal"&&!P)){e.save();const Ue=40*ie*ce,Re=80*ie*ne,ye=B==="modern"||B==="logo"?Re*1.2:Re,fe=20*ie*ne,Pe=g.get("__channel_info_text_svg__"),Qe=!!Pe;let z=0,je=fe;if(Qe&&Pe){je=fe*1.5;const M=Pe.width/Pe.height;z=je*M}else{const M=E.channelInfoFontWeight||"bold",R=E.channelInfoFontStyle||"normal";e.font=`${R} ${M} ${fe}px ${E.channelInfoFontFamily||"sans-serif"}`,P&&B!=="logo"&&(z=e.measureText(P).width)}const it=12*ie*ne,U=12*ie*ne,Z=8*ie*ne;let ae=0,Ee=0;const ve=!!Ge&&B!=="minimal",Ne=!!P&&B!=="logo";B==="modern"?(ae=Math.max(ve?ye:0,Ne?z+U*2:0),Ee=(ve?ye:0)+(ve&&Ne?it:0)+(Ne?je+Z*2:0)):B==="box"?(ae=(ve?ye:0)+(ve&&Ne?it:0)+(Ne?z:0)+U*2,Ee=Math.max(ve?ye:0,Ne?je:0)+Z*2):B==="minimal"?(ae=Ne?z+U*2:0,Ee=Ne?je+Z*2:0):B==="logo"?(ae=ye,Ee=ye):(ae=(ve?ye:0)+(ve&&Ne?it:0)+(Ne?z+U*2:0),Ee=Math.max(ve?ye:0,Ne?je+Z*2:0));let ue=0,Ve=0;C.includes("left")?ue=Ue:C.includes("right")?ue=t-Ue-ae:C.includes("center")&&(ue=(t-ae)/2),C.includes("top")?Ve=Ue:C.includes("bottom")&&(Ve=o-Ue-Ee),B==="box"&&(e.fillStyle="rgba(0, 0, 0, 0.4)",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=10,e.roundRect?(e.beginPath(),e.roundRect(ue,Ve,ae,Ee,12*ie*ne),e.fill()):e.fillRect(ue,Ve,ae,Ee),e.shadowColor="transparent",e.shadowBlur=0);const w=(M,R,G,$,he)=>{if(B!=="box"&&B!=="minimal"&&(e.fillStyle="rgba(0, 0, 0, 0.2)",e.roundRect?(e.beginPath(),e.roundRect(M,R,G,$,8*ie*ne),e.fill()):e.fillRect(M,R,G,$)),Qe&&Pe){const re=M+(G-z)/2,ze=R+($-je)/2;e.drawImage(Pe,re,ze,z,je)}else{e.fillStyle=E.channelInfoFontColor||"#ffffff",e.textAlign="left",e.textBaseline="top",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4;const re=M+(G-z)/2,ze=R+($-je)/2+je*.1;e.fillText(he,re,ze),e.shadowColor="transparent"}};if(B==="modern"){let M=Ve;if(ve){const R=ue+(ae-ye)/2;e.drawImage(Ge,R,M,ye,ye),M+=ye+it}if(Ne){const R=z+U*2,G=je+Z*2,$=ue+(ae-R)/2;w($,M,R,G,P)}}else{const M=C.includes("right");let R=ue+(B==="box"?U:0);const G=Ve+Ee/2;if(M&&(B==="classic"||B==="circle")){if(Ne){const $=z+U*2,he=je+Z*2;w(R,G-he/2,$,he,P),R+=$+it}ve&&(B==="circle"?(e.save(),e.beginPath(),e.arc(R+ye/2,G,ye/2,0,Math.PI*2),e.closePath(),e.clip(),e.drawImage(Ge,R,G-ye/2,ye,ye),e.restore()):e.drawImage(Ge,R,G-ye/2,ye,ye))}else if(ve&&(B==="circle"?(e.save(),e.beginPath(),e.arc(R+ye/2,G,ye/2,0,Math.PI*2),e.closePath(),e.clip(),e.drawImage(Ge,R,G-ye/2,ye,ye),e.restore()):e.drawImage(Ge,R,G-ye/2,ye,ye),R+=ye+it),Ne){const $=z+(B==="box"?0:U*2),he=je+(B==="box"?0:Z*2);B==="box"?Qe&&Pe?(e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.drawImage(Pe,R,G-je/2,z,je),e.shadowColor="transparent"):(e.fillStyle=E.channelInfoFontColor||"#ffffff",e.textAlign="left",e.textBaseline="middle",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.fillText(P,R,G+je*.1),e.shadowColor="transparent"):w(R,G-he/2,$,he,P)}}e.restore()}}}}};var un;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(un||(un={}));const BM=(()=>{let e=0;return()=>e++})(),HM=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),OM=new Error("called FFmpeg.terminate()");class GM{#t=null;#i={};#n={};#o=[];#l=[];loaded=!1;#a=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:o,data:a}})=>{switch(o){case un.LOAD:this.loaded=!0,this.#i[t](a);break;case un.MOUNT:case un.UNMOUNT:case un.EXEC:case un.FFPROBE:case un.WRITE_FILE:case un.READ_FILE:case un.DELETE_FILE:case un.RENAME:case un.CREATE_DIR:case un.LIST_DIR:case un.DELETE_DIR:this.#i[t](a);break;case un.LOG:this.#o.forEach(r=>r(a));break;case un.PROGRESS:this.#l.forEach(r=>r(a));break;case un.ERROR:this.#n[t](a);break}delete this.#i[t],delete this.#n[t]})};#e=({type:t,data:o},a=[],r)=>this.#t?new Promise((u,p)=>{const g=BM();this.#t&&this.#t.postMessage({id:g,type:t,data:o},a),this.#i[g]=u,this.#n[g]=p,r?.addEventListener("abort",()=>{p(new DOMException(`Message # ${g} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(HM);on(t,o){t==="log"?this.#o.push(o):t==="progress"&&this.#l.push(o)}off(t,o){t==="log"?this.#o=this.#o.filter(a=>a!==o):t==="progress"&&(this.#l=this.#l.filter(a=>a!==o))}load=({classWorkerURL:t,...o}={},{signal:a}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#a()),this.#e({type:un.LOAD,data:o},void 0,a));exec=(t,o=-1,{signal:a}={})=>this.#e({type:un.EXEC,data:{args:t,timeout:o}},void 0,a);ffprobe=(t,o=-1,{signal:a}={})=>this.#e({type:un.FFPROBE,data:{args:t,timeout:o}},void 0,a);terminate=()=>{const t=Object.keys(this.#n);for(const o of t)this.#n[o](OM),delete this.#n[o],delete this.#i[o];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,o,{signal:a}={})=>{const r=[];return o instanceof Uint8Array&&r.push(o.buffer),this.#e({type:un.WRITE_FILE,data:{path:t,data:o}},r,a)};mount=(t,o,a)=>{const r=[];return this.#e({type:un.MOUNT,data:{fsType:t,options:o,mountPoint:a}},r)};unmount=t=>{const o=[];return this.#e({type:un.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:a}={})=>this.#e({type:un.READ_FILE,data:{path:t,encoding:o}},void 0,a);deleteFile=(t,{signal:o}={})=>this.#e({type:un.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:a}={})=>this.#e({type:un.RENAME,data:{oldPath:t,newPath:o}},void 0,a);createDir=(t,{signal:o}={})=>this.#e({type:un.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#e({type:un.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#e({type:un.DELETE_DIR,data:{path:t}},void 0,o)}var Yy;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(Yy||(Yy={}));const VM=new Error("failed to get response body reader"),jM=new Error("failed to complete download"),qM="Content-Length",$M=async(e,t)=>{const o=await fetch(e);let a;try{const r=parseInt(o.headers.get(qM)||"-1"),u=o.body?.getReader();if(!u)throw VM;const p=[];let g=0;for(;;){const{done:x,value:b}=await u.read(),T=b?b.length:0;if(x){if(r!=-1&&r!==g)throw jM;t&&t({url:e,total:r,received:g,delta:T,done:x});break}p.push(b),g+=T,t&&t({url:e,total:r,received:g,delta:T,done:x})}const v=new Uint8Array(g);let m=0;for(const x of p)v.set(x,m),m+=x.length;a=v.buffer}catch(r){console.log("failed to send download progress event: ",r),a=await o.arrayBuffer()}return a},Ls=async(e,t,o=!1,a)=>{const r=o?await $M(e,a):await(await fetch(e)).arrayBuffer(),u=new Blob([r],{type:t});return URL.createObjectURL(u)};let Us=null,cf=!1,yc=!1;async function YM(e){if(Us&&cf)return Us;if(yc){for(;yc;)await new Promise(t=>setTimeout(t,100));if(Us&&cf)return Us}yc=!0;try{const t=new GM;if(t.on("log",({message:a})=>{e?.(`[FFmpeg] ${a}`),console.log("[FFmpeg]",a)}),t.on("progress",({progress:a,time:r})=>{e?.(`[FFmpeg Progress] ${(a*100).toFixed(1)}% (${r}s)`)}),typeof window<"u"&&window.crossOriginIsolated){e?.("[FFmpeg] Cross-Origin Isolated: YES. Using Multi-Threaded Core ");const a="./ffmpeg",r="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm";let u,p,g;try{e?.("[FFmpeg] Attempting to load local core files...");const v=async(m,x)=>{const b=await fetch(m);if(!b.ok)throw new Error(`HTTP ${b.status}`);const T=b.headers.get("Content-Type");if(T&&T.includes("text/html"))throw new Error("Received HTML instead of binary");const A=await b.blob();return URL.createObjectURL(new Blob([A],{type:x}))};[u,p,g]=await Promise.all([v(`${a}/ffmpeg-core.js`,"text/javascript"),v(`${a}/ffmpeg-core.wasm`,"application/wasm"),v(`${a}/ffmpeg-core.worker.js`,"text/javascript")]),e?.("[FFmpeg] Using local core files (Offline Mode)")}catch(v){e?.("[FFmpeg] Local core files not found or failed to load. Falling back to online CDN."),console.warn("Local FFmpeg files not found:",v),[u,p,g]=await Promise.all([Ls(`${r}/ffmpeg-core.js`,"text/javascript"),Ls(`${r}/ffmpeg-core.wasm`,"application/wasm"),Ls(`${r}/ffmpeg-core.worker.js`,"text/javascript")])}await t.load({coreURL:u,wasmURL:p,workerURL:g})}else{e?.("[FFmpeg] Cross-Origin Isolated: NO. Falling back to Single-Threaded Core "),e?.("[FFmpeg] Note: Rendering will be slower. Add COOP/COEP headers to server for multithreading.");const a="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await t.load({coreURL:await Ls(`${a}/ffmpeg-core.js`,"text/javascript"),wasmURL:await Ls(`${a}/ffmpeg-core.wasm`,"application/wasm")})}return Us=t,cf=!0,e?.("[FFmpeg] Loaded successfully"),t}finally{yc=!1}}function JM(e,t,o){const a=o==="1080p",u={low:a?28:30,med:a?23:25,high:a?18:20}[t];switch(e){case"h265":return{vcodec:"libx265",args:["-crf",u.toString(),"-preset","medium","-tag:v","hvc1"],format:"mp4",ext:"mp4"};case"vp9":return{vcodec:"libvpx-vp9",args:["-crf",u.toString(),"-b:v","0","-deadline","good","-cpu-used","2"],format:"webm",ext:"webm"};case"av1":return{vcodec:"libaom-av1",args:["-crf",(u+10).toString(),"-b:v","0","-cpu-used","4","-strict","experimental"],format:"mp4",ext:"mp4"};default:return{vcodec:"libx264",args:["-crf",u.toString(),"-preset","medium","-profile:v","high","-level","4.2"],format:"mp4",ext:"mp4"}}}async function KM(e){const{canvas:t,audioFile:o,lyrics:a,metadata:r,visualSlides:u,imageMap:p,videoMap:g,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,codec:A,aspectRatio:E,onProgress:j,onLog:I,abortSignal:Y,isFirstSong:de=!0,isLastSong:se=!0}=e;j(0,"Loading FFmpeg...");const pe=await YM(I),Fe=()=>Y?.aborted===!0||Y?.current===!0;if(Fe())throw new Error("Render aborted");j(5,"Preparing audio...");const _e=URL.createObjectURL(o),Se=await XM(_e);URL.revokeObjectURL(_e);const et=Math.ceil(Se*b),Me=t.getContext("2d");if(!Me)throw new Error("Failed to get canvas context");j(10,"Rendering frames...");const Ye=await o.arrayBuffer();await pe.writeFile("audio.mp3",new Uint8Array(Ye));const ct=Math.max(6,et.toString().length);for(let ie=0;ie<et;ie++){if(Fe())throw await vc(pe,ie,ct),new Error("Render aborted");const Et=ie/b;WM(g,u,Et),ip(Me,t.width,t.height,Et,a,r,u,p,g,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,Se,x,se,de);const D=await(await new Promise((Be,Je)=>{t.toBlob(C=>C?Be(C):Je(new Error("Failed to create blob")),"image/jpeg",T==="high"?.98:T==="med"?.92:.85)})).arrayBuffer(),oe=`frame_${ie.toString().padStart(ct,"0")}.jpg`;await pe.writeFile(oe,new Uint8Array(D));const we=10+ie/et*70;j(we,`Rendering frame ${ie+1}/${et}`)}if(Fe())throw await vc(pe,et,ct),new Error("Render aborted");j(80,"Encoding video...");const pt=JM(A,T,e.resolution),ht=`output.${pt.ext}`,bt=["-framerate",b.toString(),"-i",`frame_%0${ct}d.jpg`,"-i","audio.mp3","-c:v",pt.vcodec,...pt.args,"-c:a","aac","-b:a","192k","-pix_fmt","yuv420p","-movflags","+faststart","-shortest","-y",ht];I?.(`[FFmpeg] Running: ffmpeg ${bt.join(" ")}`);try{await pe.exec(bt)}catch(ie){throw console.error("FFmpeg encoding failed:",ie),await vc(pe,et,ct),new Error(`FFmpeg encoding failed: ${ie}`)}j(95,"Finalizing...");const It=await pe.readFile(ht),V=It instanceof Uint8Array?new Uint8Array(It):new TextEncoder().encode(It),Ce=new Blob([V],{type:pt.format==="webm"?"video/webm":"video/mp4"});await vc(pe,et,ct);try{await pe.deleteFile("audio.mp3"),await pe.deleteFile(ht)}catch{}return j(100,"Complete!"),{blob:Ce,duration:Se,format:pt.ext}}async function XM(e){return new Promise((t,o)=>{const a=document.createElement("audio");a.preload="metadata",a.onloadedmetadata=()=>{t(a.duration),URL.revokeObjectURL(e)},a.onerror=()=>{o(new Error("Failed to load audio metadata")),URL.revokeObjectURL(e)},a.src=e})}function WM(e,t,o){e.forEach((a,r)=>{if(r==="background"){const p=a.duration||1;p>0&&(a.currentTime=o%p);return}const u=t.find(p=>p.id===r);if(u&&u.type==="video"&&o>=u.startTime&&o<u.endTime){const p=u.playbackRate||1;let g=(o-u.startTime)*p+(u.mediaStartOffset||0);const v=u.mediaDuration||a.duration;v&&v>0&&g>=v&&(g=g%v),a.currentTime=g}})}async function vc(e,t,o){for(let a=0;a<t;a++)try{await e.deleteFile(`frame_${a.toString().padStart(o,"0")}.jpg`)}catch{}}var op=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)},O=(e,t,o)=>(op(e,t,"read from private field"),o?o.call(e):t.get(e)),Ut=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},$n=(e,t,o,a)=>(op(e,t,"write to private field"),t.set(e,o),o),QM=(e,t,o,a)=>({set _(r){$n(e,t,r)},get _(){return O(e,t,a)}}),qt=(e,t,o)=>(op(e,t,"access private method"),o),Kt=new Uint8Array(8),ho=new DataView(Kt.buffer),Gn=e=>[(e%256+256)%256],on=e=>(ho.setUint16(0,e,!1),[Kt[0],Kt[1]]),ZM=e=>(ho.setInt16(0,e,!1),[Kt[0],Kt[1]]),Jv=e=>(ho.setUint32(0,e,!1),[Kt[1],Kt[2],Kt[3]]),nt=e=>(ho.setUint32(0,e,!1),[Kt[0],Kt[1],Kt[2],Kt[3]]),e2=e=>(ho.setInt32(0,e,!1),[Kt[0],Kt[1],Kt[2],Kt[3]]),jl=e=>(ho.setUint32(0,Math.floor(e/2**32),!1),ho.setUint32(4,e,!1),[Kt[0],Kt[1],Kt[2],Kt[3],Kt[4],Kt[5],Kt[6],Kt[7]]),lp=e=>(ho.setInt16(0,2**8*e,!1),[Kt[0],Kt[1]]),fo=e=>(ho.setInt32(0,2**16*e,!1),[Kt[0],Kt[1],Kt[2],Kt[3]]),uf=e=>(ho.setInt32(0,2**30*e,!1),[Kt[0],Kt[1],Kt[2],Kt[3]]),Vi=(e,t=!1)=>{let o=Array(e.length).fill(null).map((a,r)=>e.charCodeAt(r));return t&&o.push(0),o},Pc=e=>e&&e[e.length-1],ap=e=>{let t;for(let o of e)(!t||o.presentationTimestamp>t.presentationTimestamp)&&(t=o);return t},po=(e,t,o=!0)=>{let a=e*t;return o?Math.round(a):a},Kv=e=>{let t=e*(Math.PI/180),o=Math.cos(t),a=Math.sin(t);return[o,a,0,-a,o,0,0,0,1]},Xv=Kv(0),Wv=e=>[fo(e[0]),fo(e[1]),uf(e[2]),fo(e[3]),fo(e[4]),uf(e[5]),fo(e[6]),fo(e[7]),uf(e[8])],Ys=e=>!e||typeof e!="object"?e:Array.isArray(e)?e.map(Ys):Object.fromEntries(Object.entries(e).map(([t,o])=>[t,Ys(o)])),Oa=e=>e>=0&&e<2**32,Bn=(e,t,o)=>({type:e,contents:t&&new Uint8Array(t.flat(10)),children:o}),bn=(e,t,o,a,r)=>Bn(e,[Gn(t),Jv(o),a??[]],r),t2=e=>{let t=512;return e.fragmented?Bn("ftyp",[Vi("iso5"),nt(t),Vi("iso5"),Vi("iso6"),Vi("mp41")]):Bn("ftyp",[Vi("isom"),nt(t),Vi("isom"),e.holdsAvc?Vi("avc1"):[],Vi("mp41")])},zf=e=>({type:"mdat",largeSize:e}),n2=e=>({type:"free",size:e}),wc=(e,t,o=!1)=>Bn("moov",null,[i2(t,e),...e.map(a=>o2(a,t)),o?L2(e):null]),i2=(e,t)=>{let o=po(Math.max(0,...t.filter(p=>p.samples.length>0).map(p=>{const g=ap(p.samples);return g.presentationTimestamp+g.duration})),Uf),a=Math.max(...t.map(p=>p.id))+1,r=!Oa(e)||!Oa(o),u=r?jl:nt;return bn("mvhd",+r,0,[u(e),u(e),nt(Uf),u(o),fo(1),lp(1),Array(10).fill(0),Wv(Xv),Array(24).fill(0),nt(a)])},o2=(e,t)=>Bn("trak",null,[l2(e,t),a2(e,t)]),l2=(e,t)=>{let o=ap(e.samples),a=po(o?o.presentationTimestamp+o.duration:0,Uf),r=!Oa(t)||!Oa(a),u=r?jl:nt,p;return e.info.type==="video"?p=typeof e.info.rotation=="number"?Kv(e.info.rotation):e.info.rotation:p=Xv,bn("tkhd",+r,3,[u(t),u(t),nt(e.id),nt(0),u(a),Array(8).fill(0),on(0),on(0),lp(e.info.type==="audio"?1:0),on(0),Wv(p),fo(e.info.type==="video"?e.info.width:0),fo(e.info.type==="video"?e.info.height:0)])},a2=(e,t)=>Bn("mdia",null,[s2(e,t),r2(e.info.type==="video"?"vide":"soun"),c2(e)]),s2=(e,t)=>{let o=ap(e.samples),a=po(o?o.presentationTimestamp+o.duration:0,e.timescale),r=!Oa(t)||!Oa(a),u=r?jl:nt;return bn("mdhd",+r,0,[u(t),u(t),nt(e.timescale),u(a),on(21956),on(0)])},r2=e=>bn("hdlr",0,0,[Vi("mhlr"),Vi(e),nt(0),nt(0),nt(0),Vi("mp4-muxer-hdlr",!0)]),c2=e=>Bn("minf",null,[e.info.type==="video"?u2():d2(),f2(),m2(e)]),u2=()=>bn("vmhd",0,1,[on(0),on(0),on(0),on(0)]),d2=()=>bn("smhd",0,0,[on(0),on(0)]),f2=()=>Bn("dinf",null,[p2()]),p2=()=>bn("dref",0,0,[nt(1)],[h2()]),h2=()=>bn("url ",0,1),m2=e=>{const t=e.compositionTimeOffsetTable.length>1||e.compositionTimeOffsetTable.some(o=>o.sampleCompositionTimeOffset!==0);return Bn("stbl",null,[g2(e),M2(e),k2(e),R2(e),I2(e),z2(e),t?D2(e):null])},g2=e=>bn("stsd",0,0,[nt(1)],[e.info.type==="video"?y2(q2[e.info.codec],e):_2(Y2[e.info.codec],e)]),y2=(e,t)=>Bn(e,[Array(6).fill(0),on(1),on(0),on(0),Array(12).fill(0),on(t.info.width),on(t.info.height),nt(4718592),nt(4718592),nt(0),on(1),Array(32).fill(0),on(24),ZM(65535)],[$2[t.info.codec](t),t.info.decoderConfig.colorSpace?S2(t):null]),v2={bt709:1,bt470bg:5,smpte170m:6},x2={bt709:1,smpte170m:6,"iec61966-2-1":13},b2={rgb:0,bt709:1,bt470bg:5,smpte170m:6},S2=e=>Bn("colr",[Vi("nclx"),on(v2[e.info.decoderConfig.colorSpace.primaries]),on(x2[e.info.decoderConfig.colorSpace.transfer]),on(b2[e.info.decoderConfig.colorSpace.matrix]),Gn((e.info.decoderConfig.colorSpace.fullRange?1:0)<<7)]),T2=e=>e.info.decoderConfig&&Bn("avcC",[...new Uint8Array(e.info.decoderConfig.description)]),w2=e=>e.info.decoderConfig&&Bn("hvcC",[...new Uint8Array(e.info.decoderConfig.description)]),C2=e=>{if(!e.info.decoderConfig)return null;let t=e.info.decoderConfig;if(!t.colorSpace)throw new Error("'colorSpace' is required in the decoder config for VP9.");let o=t.codec.split("."),a=Number(o[1]),r=Number(o[2]),g=(Number(o[3])<<4)+(0<<1)+Number(t.colorSpace.fullRange);return bn("vpcC",1,0,[Gn(a),Gn(r),Gn(g),Gn(2),Gn(2),Gn(2),on(0)])},E2=()=>{let o=(1<<7)+1;return Bn("av1C",[o,0,0,0])},_2=(e,t)=>Bn(e,[Array(6).fill(0),on(1),on(0),on(0),nt(0),on(t.info.numberOfChannels),on(16),on(0),on(0),fo(t.info.sampleRate)],[J2[t.info.codec](t)]),N2=e=>{let t=new Uint8Array(e.info.decoderConfig.description);return bn("esds",0,0,[nt(58753152),Gn(32+t.byteLength),on(1),Gn(0),nt(75530368),Gn(18+t.byteLength),Gn(64),Gn(21),Jv(0),nt(130071),nt(130071),nt(92307584),Gn(t.byteLength),...t,nt(109084800),Gn(1),Gn(2)])},A2=e=>{let t=3840,o=0;const a=e.info.decoderConfig?.description;if(a){if(a.byteLength<18)throw new TypeError("Invalid decoder description provided for Opus; must be at least 18 bytes long.");const r=ArrayBuffer.isView(a)?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(a);t=r.getUint16(10,!0),o=r.getInt16(14,!0)}return Bn("dOps",[Gn(0),Gn(e.info.numberOfChannels),on(t),nt(e.info.sampleRate),lp(o),Gn(0)])},M2=e=>bn("stts",0,0,[nt(e.timeToSampleTable.length),e.timeToSampleTable.map(t=>[nt(t.sampleCount),nt(t.sampleDelta)])]),k2=e=>{if(e.samples.every(o=>o.type==="key"))return null;let t=[...e.samples.entries()].filter(([,o])=>o.type==="key");return bn("stss",0,0,[nt(t.length),t.map(([o])=>nt(o+1))])},R2=e=>bn("stsc",0,0,[nt(e.compactlyCodedChunkTable.length),e.compactlyCodedChunkTable.map(t=>[nt(t.firstChunk),nt(t.samplesPerChunk),nt(1)])]),I2=e=>bn("stsz",0,0,[nt(0),nt(e.samples.length),e.samples.map(t=>nt(t.size))]),z2=e=>e.finalizedChunks.length>0&&Pc(e.finalizedChunks).offset>=2**32?bn("co64",0,0,[nt(e.finalizedChunks.length),e.finalizedChunks.map(t=>jl(t.offset))]):bn("stco",0,0,[nt(e.finalizedChunks.length),e.finalizedChunks.map(t=>nt(t.offset))]),D2=e=>bn("ctts",0,0,[nt(e.compositionTimeOffsetTable.length),e.compositionTimeOffsetTable.map(t=>[nt(t.sampleCount),nt(t.sampleCompositionTimeOffset)])]),L2=e=>Bn("mvex",null,e.map(U2)),U2=e=>bn("trex",0,0,[nt(e.id),nt(1),nt(0),nt(0),nt(0)]),Jy=(e,t)=>Bn("moof",null,[F2(e),...t.map(P2)]),F2=e=>bn("mfhd",0,0,[nt(e)]),Qv=e=>{let t=0,o=0,a=0,r=0,u=e.type==="delta";return o|=+u,u?t|=1:t|=2,t<<24|o<<16|a<<8|r},P2=e=>Bn("traf",null,[B2(e),H2(e),O2(e)]),B2=e=>{let t=0;t|=8,t|=16,t|=32,t|=131072;let o=e.currentChunk.samples[1]??e.currentChunk.samples[0],a={duration:o.timescaleUnitsToNextSample,size:o.size,flags:Qv(o)};return bn("tfhd",0,t,[nt(e.id),nt(a.duration),nt(a.size),nt(a.flags)])},H2=e=>bn("tfdt",1,0,[jl(po(e.currentChunk.startTimestamp,e.timescale))]),O2=e=>{let t=e.currentChunk.samples.map(j=>j.timescaleUnitsToNextSample),o=e.currentChunk.samples.map(j=>j.size),a=e.currentChunk.samples.map(Qv),r=e.currentChunk.samples.map(j=>po(j.presentationTimestamp-j.decodeTimestamp,e.timescale)),u=new Set(t),p=new Set(o),g=new Set(a),v=new Set(r),m=g.size===2&&a[0]!==a[1],x=u.size>1,b=p.size>1,T=!m&&g.size>1,A=v.size>1||[...v].some(j=>j!==0),E=0;return E|=1,E|=4*+m,E|=256*+x,E|=512*+b,E|=1024*+T,E|=2048*+A,bn("trun",1,E,[nt(e.currentChunk.samples.length),nt(e.currentChunk.offset-e.currentChunk.moofOffset||0),m?nt(a[0]):[],e.currentChunk.samples.map((j,I)=>[x?nt(t[I]):[],b?nt(o[I]):[],T?nt(a[I]):[],A?e2(r[I]):[]])])},G2=e=>Bn("mfra",null,[...e.map(V2),j2()]),V2=(e,t)=>bn("tfra",1,0,[nt(e.id),nt(63),nt(e.finalizedChunks.length),e.finalizedChunks.map(a=>[jl(po(a.startTimestamp,e.timescale)),jl(a.moofOffset),nt(t+1),nt(1),nt(1)])]),j2=()=>bn("mfro",0,0,[nt(0)]),q2={avc:"avc1",hevc:"hvc1",vp9:"vp09",av1:"av01"},$2={avc:T2,hevc:w2,vp9:C2,av1:E2},Y2={aac:"mp4a",opus:"Opus"},J2={aac:N2,opus:A2},Wc=class{},Zv=class extends Wc{constructor(){super(...arguments),this.buffer=null}},ex=class extends Wc{constructor(e){if(super(),this.options=e,typeof e!="object")throw new TypeError("StreamTarget requires an options object to be passed to its constructor.");if(e.onData){if(typeof e.onData!="function")throw new TypeError("options.onData, when provided, must be a function.");if(e.onData.length<2)throw new TypeError("options.onData, when provided, must be a function that takes in at least two arguments (data and position). Ignoring the position argument, which specifies the byte offset at which the data is to be written, can lead to broken outputs.")}if(e.chunked!==void 0&&typeof e.chunked!="boolean")throw new TypeError("options.chunked, when provided, must be a boolean.");if(e.chunkSize!==void 0&&(!Number.isInteger(e.chunkSize)||e.chunkSize<1024))throw new TypeError("options.chunkSize, when provided, must be an integer and not smaller than 1024.")}},K2=class extends Wc{constructor(e,t){if(super(),this.stream=e,this.options=t,!(e instanceof FileSystemWritableFileStream))throw new TypeError("FileSystemWritableFileStreamTarget requires a FileSystemWritableFileStream instance.");if(t!==void 0&&typeof t!="object")throw new TypeError("FileSystemWritableFileStreamTarget's options, when provided, must be an object.");if(t&&t.chunkSize!==void 0&&(!Number.isInteger(t.chunkSize)||t.chunkSize<=0))throw new TypeError("options.chunkSize, when provided, must be a positive integer")}},Bl,ka,tx=class{constructor(){this.pos=0,Ut(this,Bl,new Uint8Array(8)),Ut(this,ka,new DataView(O(this,Bl).buffer)),this.offsets=new WeakMap}seek(e){this.pos=e}writeU32(e){O(this,ka).setUint32(0,e,!1),this.write(O(this,Bl).subarray(0,4))}writeU64(e){O(this,ka).setUint32(0,Math.floor(e/2**32),!1),O(this,ka).setUint32(4,e,!1),this.write(O(this,Bl).subarray(0,8))}writeAscii(e){for(let t=0;t<e.length;t++)O(this,ka).setUint8(t%8,e.charCodeAt(t)),t%8===7&&this.write(O(this,Bl));e.length%8!==0&&this.write(O(this,Bl).subarray(0,e.length%8))}writeBox(e){if(this.offsets.set(e,this.pos),e.contents&&!e.children)this.writeBoxHeader(e,e.size??e.contents.byteLength+8),this.write(e.contents);else{let t=this.pos;if(this.writeBoxHeader(e,0),e.contents&&this.write(e.contents),e.children)for(let r of e.children)r&&this.writeBox(r);let o=this.pos,a=e.size??o-t;this.seek(t),this.writeBoxHeader(e,a),this.seek(o)}}writeBoxHeader(e,t){this.writeU32(e.largeSize?1:t),this.writeAscii(e.type),e.largeSize&&this.writeU64(t)}measureBoxHeader(e){return 8+(e.largeSize?8:0)}patchBox(e){let t=this.pos;this.seek(this.offsets.get(e)),this.writeBox(e),this.seek(t)}measureBox(e){if(e.contents&&!e.children)return this.measureBoxHeader(e)+e.contents.byteLength;{let t=this.measureBoxHeader(e);if(e.contents&&(t+=e.contents.byteLength),e.children)for(let o of e.children)o&&(t+=this.measureBox(o));return t}}};Bl=new WeakMap;ka=new WeakMap;var Cc,Vl,Zs,Os,Ec,Df,X2=class extends tx{constructor(e){super(),Ut(this,Ec),Ut(this,Cc,void 0),Ut(this,Vl,new ArrayBuffer(2**16)),Ut(this,Zs,new Uint8Array(O(this,Vl))),Ut(this,Os,0),$n(this,Cc,e)}write(e){qt(this,Ec,Df).call(this,this.pos+e.byteLength),O(this,Zs).set(e,this.pos),this.pos+=e.byteLength,$n(this,Os,Math.max(O(this,Os),this.pos))}finalize(){qt(this,Ec,Df).call(this,this.pos),O(this,Cc).buffer=O(this,Vl).slice(0,Math.max(O(this,Os),this.pos))}};Cc=new WeakMap;Vl=new WeakMap;Zs=new WeakMap;Os=new WeakMap;Ec=new WeakSet;Df=function(e){let t=O(this,Vl).byteLength;for(;t<e;)t*=2;if(t===O(this,Vl).byteLength)return;let o=new ArrayBuffer(t),a=new Uint8Array(o);a.set(O(this,Zs),0),$n(this,Vl,o),$n(this,Zs,a)};var W2=2**24,Q2=2,Js,Hl,Gs,Uo,Ii,Bc,Lf,sp,nx,rp,ix,Ks,Hc,cp=class extends tx{constructor(e){super(),Ut(this,Bc),Ut(this,sp),Ut(this,rp),Ut(this,Ks),Ut(this,Js,void 0),Ut(this,Hl,[]),Ut(this,Gs,void 0),Ut(this,Uo,void 0),Ut(this,Ii,[]),$n(this,Js,e),$n(this,Gs,e.options?.chunked??!1),$n(this,Uo,e.options?.chunkSize??W2)}write(e){O(this,Hl).push({data:e.slice(),start:this.pos}),this.pos+=e.byteLength}flush(){if(O(this,Hl).length===0)return;let e=[],t=[...O(this,Hl)].sort((o,a)=>o.start-a.start);e.push({start:t[0].start,size:t[0].data.byteLength});for(let o=1;o<t.length;o++){let a=e[e.length-1],r=t[o];r.start<=a.start+a.size?a.size=Math.max(a.size,r.start+r.data.byteLength-a.start):e.push({start:r.start,size:r.data.byteLength})}for(let o of e){o.data=new Uint8Array(o.size);for(let a of O(this,Hl))o.start<=a.start&&a.start<o.start+o.size&&o.data.set(a.data,a.start-o.start);O(this,Gs)?(qt(this,Bc,Lf).call(this,o.data,o.start),qt(this,Ks,Hc).call(this)):O(this,Js).options.onData?.(o.data,o.start)}O(this,Hl).length=0}finalize(){O(this,Gs)&&qt(this,Ks,Hc).call(this,!0)}};Js=new WeakMap;Hl=new WeakMap;Gs=new WeakMap;Uo=new WeakMap;Ii=new WeakMap;Bc=new WeakSet;Lf=function(e,t){let o=O(this,Ii).findIndex(g=>g.start<=t&&t<g.start+O(this,Uo));o===-1&&(o=qt(this,rp,ix).call(this,t));let a=O(this,Ii)[o],r=t-a.start,u=e.subarray(0,Math.min(O(this,Uo)-r,e.byteLength));a.data.set(u,r);let p={start:r,end:r+u.byteLength};if(qt(this,sp,nx).call(this,a,p),a.written[0].start===0&&a.written[0].end===O(this,Uo)&&(a.shouldFlush=!0),O(this,Ii).length>Q2){for(let g=0;g<O(this,Ii).length-1;g++)O(this,Ii)[g].shouldFlush=!0;qt(this,Ks,Hc).call(this)}u.byteLength<e.byteLength&&qt(this,Bc,Lf).call(this,e.subarray(u.byteLength),t+u.byteLength)};sp=new WeakSet;nx=function(e,t){let o=0,a=e.written.length-1,r=-1;for(;o<=a;){let u=Math.floor(o+(a-o+1)/2);e.written[u].start<=t.start?(o=u+1,r=u):a=u-1}for(e.written.splice(r+1,0,t),(r===-1||e.written[r].end<t.start)&&r++;r<e.written.length-1&&e.written[r].end>=e.written[r+1].start;)e.written[r].end=Math.max(e.written[r].end,e.written[r+1].end),e.written.splice(r+1,1)};rp=new WeakSet;ix=function(e){let o={start:Math.floor(e/O(this,Uo))*O(this,Uo),data:new Uint8Array(O(this,Uo)),written:[],shouldFlush:!1};return O(this,Ii).push(o),O(this,Ii).sort((a,r)=>a.start-r.start),O(this,Ii).indexOf(o)};Ks=new WeakSet;Hc=function(e=!1){for(let t=0;t<O(this,Ii).length;t++){let o=O(this,Ii)[t];if(!(!o.shouldFlush&&!e)){for(let a of o.written)O(this,Js).options.onData?.(o.data.subarray(a.start,a.end),o.start+a.start);O(this,Ii).splice(t--,1)}}};var Z2=class extends cp{constructor(e){super(new ex({onData:(t,o)=>e.stream.write({type:"write",data:t,position:o}),chunked:!0,chunkSize:e.options?.chunkSize}))}},Uf=1e3,ek=["avc","hevc","vp9","av1"],tk=["aac","opus"],nk=2082844800,ik=["strict","offset","cross-track-offset"],vt,_t,Oc,ki,ti,qn,Da,Ha,up,Ol,Gl,Xs,Ff,ox,Pf,lx,dp,ax,Bf,sx,fp,rx,_c,Hf,ro,Lo,pp,cx,Ws,Gc,Vc,hp,Ga,tr,Nc,Of,ok=class{constructor(e){if(Ut(this,Ff),Ut(this,Pf),Ut(this,dp),Ut(this,Bf),Ut(this,fp),Ut(this,_c),Ut(this,ro),Ut(this,pp),Ut(this,Ws),Ut(this,Vc),Ut(this,Ga),Ut(this,Nc),Ut(this,vt,void 0),Ut(this,_t,void 0),Ut(this,Oc,void 0),Ut(this,ki,void 0),Ut(this,ti,null),Ut(this,qn,null),Ut(this,Da,Math.floor(Date.now()/1e3)+nk),Ut(this,Ha,[]),Ut(this,up,1),Ut(this,Ol,[]),Ut(this,Gl,[]),Ut(this,Xs,!1),qt(this,Ff,ox).call(this,e),e.video=Ys(e.video),e.audio=Ys(e.audio),e.fastStart=Ys(e.fastStart),this.target=e.target,$n(this,vt,{firstTimestampBehavior:"strict",...e}),e.target instanceof Zv)$n(this,_t,new X2(e.target));else if(e.target instanceof ex)$n(this,_t,new cp(e.target));else if(e.target instanceof K2)$n(this,_t,new Z2(e.target));else throw new Error(`Invalid target: ${e.target}`);qt(this,Bf,sx).call(this),qt(this,Pf,lx).call(this)}addVideoChunk(e,t,o,a){if(!(e instanceof EncodedVideoChunk))throw new TypeError("addVideoChunk's first argument (sample) must be of type EncodedVideoChunk.");if(t&&typeof t!="object")throw new TypeError("addVideoChunk's second argument (meta), when provided, must be an object.");if(o!==void 0&&(!Number.isFinite(o)||o<0))throw new TypeError("addVideoChunk's third argument (timestamp), when provided, must be a non-negative real number.");if(a!==void 0&&!Number.isFinite(a))throw new TypeError("addVideoChunk's fourth argument (compositionTimeOffset), when provided, must be a real number.");let r=new Uint8Array(e.byteLength);e.copyTo(r),this.addVideoChunkRaw(r,e.type,o??e.timestamp,e.duration,t,a)}addVideoChunkRaw(e,t,o,a,r,u){if(!(e instanceof Uint8Array))throw new TypeError("addVideoChunkRaw's first argument (data) must be an instance of Uint8Array.");if(t!=="key"&&t!=="delta")throw new TypeError("addVideoChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(o)||o<0)throw new TypeError("addVideoChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(a)||a<0)throw new TypeError("addVideoChunkRaw's fourth argument (duration) must be a non-negative real number.");if(r&&typeof r!="object")throw new TypeError("addVideoChunkRaw's fifth argument (meta), when provided, must be an object.");if(u!==void 0&&!Number.isFinite(u))throw new TypeError("addVideoChunkRaw's sixth argument (compositionTimeOffset), when provided, must be a real number.");if(qt(this,Nc,Of).call(this),!O(this,vt).video)throw new Error("No video track declared.");if(typeof O(this,vt).fastStart=="object"&&O(this,ti).samples.length===O(this,vt).fastStart.expectedVideoChunks)throw new Error(`Cannot add more video chunks than specified in 'fastStart' (${O(this,vt).fastStart.expectedVideoChunks}).`);let p=qt(this,_c,Hf).call(this,O(this,ti),e,t,o,a,r,u);if(O(this,vt).fastStart==="fragmented"&&O(this,qn)){for(;O(this,Gl).length>0&&O(this,Gl)[0].decodeTimestamp<=p.decodeTimestamp;){let g=O(this,Gl).shift();qt(this,ro,Lo).call(this,O(this,qn),g)}p.decodeTimestamp<=O(this,qn).lastDecodeTimestamp?qt(this,ro,Lo).call(this,O(this,ti),p):O(this,Ol).push(p)}else qt(this,ro,Lo).call(this,O(this,ti),p)}addAudioChunk(e,t,o){if(!(e instanceof EncodedAudioChunk))throw new TypeError("addAudioChunk's first argument (sample) must be of type EncodedAudioChunk.");if(t&&typeof t!="object")throw new TypeError("addAudioChunk's second argument (meta), when provided, must be an object.");if(o!==void 0&&(!Number.isFinite(o)||o<0))throw new TypeError("addAudioChunk's third argument (timestamp), when provided, must be a non-negative real number.");let a=new Uint8Array(e.byteLength);e.copyTo(a),this.addAudioChunkRaw(a,e.type,o??e.timestamp,e.duration,t)}addAudioChunkRaw(e,t,o,a,r){if(!(e instanceof Uint8Array))throw new TypeError("addAudioChunkRaw's first argument (data) must be an instance of Uint8Array.");if(t!=="key"&&t!=="delta")throw new TypeError("addAudioChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(o)||o<0)throw new TypeError("addAudioChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(a)||a<0)throw new TypeError("addAudioChunkRaw's fourth argument (duration) must be a non-negative real number.");if(r&&typeof r!="object")throw new TypeError("addAudioChunkRaw's fifth argument (meta), when provided, must be an object.");if(qt(this,Nc,Of).call(this),!O(this,vt).audio)throw new Error("No audio track declared.");if(typeof O(this,vt).fastStart=="object"&&O(this,qn).samples.length===O(this,vt).fastStart.expectedAudioChunks)throw new Error(`Cannot add more audio chunks than specified in 'fastStart' (${O(this,vt).fastStart.expectedAudioChunks}).`);let u=qt(this,_c,Hf).call(this,O(this,qn),e,t,o,a,r);if(O(this,vt).fastStart==="fragmented"&&O(this,ti)){for(;O(this,Ol).length>0&&O(this,Ol)[0].decodeTimestamp<=u.decodeTimestamp;){let p=O(this,Ol).shift();qt(this,ro,Lo).call(this,O(this,ti),p)}u.decodeTimestamp<=O(this,ti).lastDecodeTimestamp?qt(this,ro,Lo).call(this,O(this,qn),u):O(this,Gl).push(u)}else qt(this,ro,Lo).call(this,O(this,qn),u)}finalize(){if(O(this,Xs))throw new Error("Cannot finalize a muxer more than once.");if(O(this,vt).fastStart==="fragmented"){for(let t of O(this,Ol))qt(this,ro,Lo).call(this,O(this,ti),t);for(let t of O(this,Gl))qt(this,ro,Lo).call(this,O(this,qn),t);qt(this,Vc,hp).call(this,!1)}else O(this,ti)&&qt(this,Ws,Gc).call(this,O(this,ti)),O(this,qn)&&qt(this,Ws,Gc).call(this,O(this,qn));let e=[O(this,ti),O(this,qn)].filter(Boolean);if(O(this,vt).fastStart==="in-memory"){let t;for(let a=0;a<2;a++){let r=wc(e,O(this,Da)),u=O(this,_t).measureBox(r);t=O(this,_t).measureBox(O(this,ki));let p=O(this,_t).pos+u+t;for(let g of O(this,Ha)){g.offset=p;for(let{data:v}of g.samples)p+=v.byteLength,t+=v.byteLength}if(p<2**32)break;t>=2**32&&(O(this,ki).largeSize=!0)}let o=wc(e,O(this,Da));O(this,_t).writeBox(o),O(this,ki).size=t,O(this,_t).writeBox(O(this,ki));for(let a of O(this,Ha))for(let r of a.samples)O(this,_t).write(r.data),r.data=null}else if(O(this,vt).fastStart==="fragmented"){let t=O(this,_t).pos,o=G2(e);O(this,_t).writeBox(o);let a=O(this,_t).pos-t;O(this,_t).seek(O(this,_t).pos-4),O(this,_t).writeU32(a)}else{let t=O(this,_t).offsets.get(O(this,ki)),o=O(this,_t).pos-t;O(this,ki).size=o,O(this,ki).largeSize=o>=2**32,O(this,_t).patchBox(O(this,ki));let a=wc(e,O(this,Da));if(typeof O(this,vt).fastStart=="object"){O(this,_t).seek(O(this,Oc)),O(this,_t).writeBox(a);let r=t-O(this,_t).pos;O(this,_t).writeBox(n2(r))}else O(this,_t).writeBox(a)}qt(this,Ga,tr).call(this),O(this,_t).finalize(),$n(this,Xs,!0)}};vt=new WeakMap;_t=new WeakMap;Oc=new WeakMap;ki=new WeakMap;ti=new WeakMap;qn=new WeakMap;Da=new WeakMap;Ha=new WeakMap;up=new WeakMap;Ol=new WeakMap;Gl=new WeakMap;Xs=new WeakMap;Ff=new WeakSet;ox=function(e){if(typeof e!="object")throw new TypeError("The muxer requires an options object to be passed to its constructor.");if(!(e.target instanceof Wc))throw new TypeError("The target must be provided and an instance of Target.");if(e.video){if(!ek.includes(e.video.codec))throw new TypeError(`Unsupported video codec: ${e.video.codec}`);if(!Number.isInteger(e.video.width)||e.video.width<=0)throw new TypeError(`Invalid video width: ${e.video.width}. Must be a positive integer.`);if(!Number.isInteger(e.video.height)||e.video.height<=0)throw new TypeError(`Invalid video height: ${e.video.height}. Must be a positive integer.`);const t=e.video.rotation;if(typeof t=="number"&&![0,90,180,270].includes(t))throw new TypeError(`Invalid video rotation: ${t}. Has to be 0, 90, 180 or 270.`);if(Array.isArray(t)&&(t.length!==9||t.some(o=>typeof o!="number")))throw new TypeError(`Invalid video transformation matrix: ${t.join()}`);if(e.video.frameRate!==void 0&&(!Number.isInteger(e.video.frameRate)||e.video.frameRate<=0))throw new TypeError(`Invalid video frame rate: ${e.video.frameRate}. Must be a positive integer.`)}if(e.audio){if(!tk.includes(e.audio.codec))throw new TypeError(`Unsupported audio codec: ${e.audio.codec}`);if(!Number.isInteger(e.audio.numberOfChannels)||e.audio.numberOfChannels<=0)throw new TypeError(`Invalid number of audio channels: ${e.audio.numberOfChannels}. Must be a positive integer.`);if(!Number.isInteger(e.audio.sampleRate)||e.audio.sampleRate<=0)throw new TypeError(`Invalid audio sample rate: ${e.audio.sampleRate}. Must be a positive integer.`)}if(e.firstTimestampBehavior&&!ik.includes(e.firstTimestampBehavior))throw new TypeError(`Invalid first timestamp behavior: ${e.firstTimestampBehavior}`);if(typeof e.fastStart=="object"){if(e.video){if(e.fastStart.expectedVideoChunks===void 0)throw new TypeError("'fastStart' is an object but is missing property 'expectedVideoChunks'.");if(!Number.isInteger(e.fastStart.expectedVideoChunks)||e.fastStart.expectedVideoChunks<0)throw new TypeError("'expectedVideoChunks' must be a non-negative integer.")}if(e.audio){if(e.fastStart.expectedAudioChunks===void 0)throw new TypeError("'fastStart' is an object but is missing property 'expectedAudioChunks'.");if(!Number.isInteger(e.fastStart.expectedAudioChunks)||e.fastStart.expectedAudioChunks<0)throw new TypeError("'expectedAudioChunks' must be a non-negative integer.")}}else if(![!1,"in-memory","fragmented"].includes(e.fastStart))throw new TypeError("'fastStart' option must be false, 'in-memory', 'fragmented' or an object.");if(e.minFragmentDuration!==void 0&&(!Number.isFinite(e.minFragmentDuration)||e.minFragmentDuration<0))throw new TypeError("'minFragmentDuration' must be a non-negative number.")};Pf=new WeakSet;lx=function(){if(O(this,_t).writeBox(t2({holdsAvc:O(this,vt).video?.codec==="avc",fragmented:O(this,vt).fastStart==="fragmented"})),$n(this,Oc,O(this,_t).pos),O(this,vt).fastStart==="in-memory")$n(this,ki,zf(!1));else if(O(this,vt).fastStart!=="fragmented"){if(typeof O(this,vt).fastStart=="object"){let e=qt(this,dp,ax).call(this);O(this,_t).seek(O(this,_t).pos+e)}$n(this,ki,zf(!0)),O(this,_t).writeBox(O(this,ki))}qt(this,Ga,tr).call(this)};dp=new WeakSet;ax=function(){if(typeof O(this,vt).fastStart!="object")return;let e=0,t=[O(this,vt).fastStart.expectedVideoChunks,O(this,vt).fastStart.expectedAudioChunks];for(let o of t)o&&(e+=8*Math.ceil(2/3*o),e+=4*o,e+=12*Math.ceil(2/3*o),e+=4*o,e+=8*o);return e+=4096,e};Bf=new WeakSet;sx=function(){if(O(this,vt).video&&$n(this,ti,{id:1,info:{type:"video",codec:O(this,vt).video.codec,width:O(this,vt).video.width,height:O(this,vt).video.height,rotation:O(this,vt).video.rotation??0,decoderConfig:null},timescale:O(this,vt).video.frameRate??57600,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),O(this,vt).audio&&($n(this,qn,{id:O(this,vt).video?2:1,info:{type:"audio",codec:O(this,vt).audio.codec,numberOfChannels:O(this,vt).audio.numberOfChannels,sampleRate:O(this,vt).audio.sampleRate,decoderConfig:null},timescale:O(this,vt).audio.sampleRate,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),O(this,vt).audio.codec==="aac")){let e=qt(this,fp,rx).call(this,2,O(this,vt).audio.sampleRate,O(this,vt).audio.numberOfChannels);O(this,qn).info.decoderConfig={codec:O(this,vt).audio.codec,description:e,numberOfChannels:O(this,vt).audio.numberOfChannels,sampleRate:O(this,vt).audio.sampleRate}}};fp=new WeakSet;rx=function(e,t,o){let r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350].indexOf(t),u=o,p="";p+=e.toString(2).padStart(5,"0"),p+=r.toString(2).padStart(4,"0"),r===15&&(p+=t.toString(2).padStart(24,"0")),p+=u.toString(2).padStart(4,"0");let g=Math.ceil(p.length/8)*8;p=p.padEnd(g,"0");let v=new Uint8Array(p.length/8);for(let m=0;m<p.length;m+=8)v[m/8]=parseInt(p.slice(m,m+8),2);return v};_c=new WeakSet;Hf=function(e,t,o,a,r,u,p){let g=a/1e6,v=(a-(p??0))/1e6,m=r/1e6,x=qt(this,pp,cx).call(this,g,v,e);return g=x.presentationTimestamp,v=x.decodeTimestamp,u?.decoderConfig&&(e.info.decoderConfig===null?e.info.decoderConfig=u.decoderConfig:Object.assign(e.info.decoderConfig,u.decoderConfig)),{presentationTimestamp:g,decodeTimestamp:v,duration:m,data:t,size:t.byteLength,type:o,timescaleUnitsToNextSample:po(m,e.timescale)}};ro=new WeakSet;Lo=function(e,t){O(this,vt).fastStart!=="fragmented"&&e.samples.push(t);const o=po(t.presentationTimestamp-t.decodeTimestamp,e.timescale);if(e.lastTimescaleUnits!==null){let r=po(t.decodeTimestamp,e.timescale,!1),u=Math.round(r-e.lastTimescaleUnits);if(e.lastTimescaleUnits+=u,e.lastSample.timescaleUnitsToNextSample=u,O(this,vt).fastStart!=="fragmented"){let p=Pc(e.timeToSampleTable);p.sampleCount===1?(p.sampleDelta=u,p.sampleCount++):p.sampleDelta===u?p.sampleCount++:(p.sampleCount--,e.timeToSampleTable.push({sampleCount:2,sampleDelta:u}));const g=Pc(e.compositionTimeOffsetTable);g.sampleCompositionTimeOffset===o?g.sampleCount++:e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:o})}}else e.lastTimescaleUnits=0,O(this,vt).fastStart!=="fragmented"&&(e.timeToSampleTable.push({sampleCount:1,sampleDelta:po(t.duration,e.timescale)}),e.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:o}));e.lastSample=t;let a=!1;if(!e.currentChunk)a=!0;else{let r=t.presentationTimestamp-e.currentChunk.startTimestamp;if(O(this,vt).fastStart==="fragmented"){let u=O(this,ti)??O(this,qn);const p=O(this,vt).minFragmentDuration??1;e===u&&t.type==="key"&&r>=p&&(a=!0,qt(this,Vc,hp).call(this))}else a=r>=.5}a&&(e.currentChunk&&qt(this,Ws,Gc).call(this,e),e.currentChunk={startTimestamp:t.presentationTimestamp,samples:[]}),e.currentChunk.samples.push(t)};pp=new WeakSet;cx=function(e,t,o){const a=O(this,vt).firstTimestampBehavior==="strict",r=o.lastDecodeTimestamp===-1;if(a&&r&&t!==0)throw new Error(`The first chunk for your media track must have a timestamp of 0 (received DTS=${t}).Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of thedocument, which is probably what you want.

If you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.
`);if(O(this,vt).firstTimestampBehavior==="offset"||O(this,vt).firstTimestampBehavior==="cross-track-offset"){o.firstDecodeTimestamp===void 0&&(o.firstDecodeTimestamp=t);let p;O(this,vt).firstTimestampBehavior==="offset"?p=o.firstDecodeTimestamp:p=Math.min(O(this,ti)?.firstDecodeTimestamp??1/0,O(this,qn)?.firstDecodeTimestamp??1/0),t-=p,e-=p}if(t<o.lastDecodeTimestamp)throw new Error(`Timestamps must be monotonically increasing (DTS went from ${o.lastDecodeTimestamp*1e6} to ${t*1e6}).`);return o.lastDecodeTimestamp=t,{presentationTimestamp:e,decodeTimestamp:t}};Ws=new WeakSet;Gc=function(e){if(O(this,vt).fastStart==="fragmented")throw new Error("Can't finalize individual chunks if 'fastStart' is set to 'fragmented'.");if(e.currentChunk){if(e.finalizedChunks.push(e.currentChunk),O(this,Ha).push(e.currentChunk),(e.compactlyCodedChunkTable.length===0||Pc(e.compactlyCodedChunkTable).samplesPerChunk!==e.currentChunk.samples.length)&&e.compactlyCodedChunkTable.push({firstChunk:e.finalizedChunks.length,samplesPerChunk:e.currentChunk.samples.length}),O(this,vt).fastStart==="in-memory"){e.currentChunk.offset=0;return}e.currentChunk.offset=O(this,_t).pos;for(let t of e.currentChunk.samples)O(this,_t).write(t.data),t.data=null;qt(this,Ga,tr).call(this)}};Vc=new WeakSet;hp=function(e=!0){if(O(this,vt).fastStart!=="fragmented")throw new Error("Can't finalize a fragment unless 'fastStart' is set to 'fragmented'.");let t=[O(this,ti),O(this,qn)].filter(g=>g&&g.currentChunk);if(t.length===0)return;let o=QM(this,up)._++;if(o===1){let g=wc(t,O(this,Da),!0);O(this,_t).writeBox(g)}let a=O(this,_t).pos,r=Jy(o,t);O(this,_t).writeBox(r);{let g=zf(!1),v=0;for(let x of t)for(let b of x.currentChunk.samples)v+=b.size;let m=O(this,_t).measureBox(g)+v;m>=2**32&&(g.largeSize=!0,m=O(this,_t).measureBox(g)+v),g.size=m,O(this,_t).writeBox(g)}for(let g of t){g.currentChunk.offset=O(this,_t).pos,g.currentChunk.moofOffset=a;for(let v of g.currentChunk.samples)O(this,_t).write(v.data),v.data=null}let u=O(this,_t).pos;O(this,_t).seek(O(this,_t).offsets.get(r));let p=Jy(o,t);O(this,_t).writeBox(p),O(this,_t).seek(u);for(let g of t)g.finalizedChunks.push(g.currentChunk),O(this,Ha).push(g.currentChunk),g.currentChunk=null;e&&qt(this,Ga,tr).call(this)};Ga=new WeakSet;tr=function(){O(this,_t)instanceof cp&&O(this,_t).flush()};Nc=new WeakSet;Of=function(){if(O(this,Xs))throw new Error("Cannot add new video or audio chunks after the file has been finalized.")};function ux(){return typeof window<"u"&&"VideoEncoder"in window&&"AudioEncoder"in window}async function lk(e){const t=await e.arrayBuffer(),o=new(window.AudioContext||window.webkitAudioContext),a=await o.decodeAudioData(t);return o.close(),a}async function ak(e,t,o){const a=[];e.forEach((r,u)=>{let p=-1;if(u==="background"){const g=r.duration||1;g>0&&(p=o%g)}else{const g=t.find(v=>v.id===u);if(g&&g.type==="video"&&o>=g.startTime&&o<g.endTime){const v=g.playbackRate||1;let m=(o-g.startTime)*v+(g.mediaStartOffset||0);const x=g.mediaDuration||r.duration;x&&x>0&&m>=x&&(m=m%x),p=m}}if(p>=0){if(r.readyState===0)return;Math.abs(r.currentTime-p)>.05&&a.push(new Promise(g=>{let v=!1;const m=()=>{v||(v=!0,r.removeEventListener("seeked",m),g())};r.addEventListener("seeked",m),r.currentTime=p,setTimeout(()=>{v||(v=!0,r.removeEventListener("seeked",m),g())},500)}))}}),a.length>0&&await Promise.all(a)}async function sk(e){const{canvas:t,audioFile:o,lyrics:a,metadata:r,visualSlides:u,imageMap:p,videoMap:g,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,onProgress:A,onLog:E,abortSignal:j,isFirstSong:I=!0,isLastSong:Y=!0}=e;if(!ux())throw new Error("WebCodecs API is not supported in this browser.");const de=()=>j?.aborted===!0||j?.current===!0;A(0,"Initializing WebCodecs..."),E?.("Decoding audio...");const se=await lk(o),pe=se.duration,Fe=Math.ceil(pe*b),_e=new ok({target:new Zv,video:{codec:"avc",width:t.width,height:t.height},audio:{codec:"aac",sampleRate:se.sampleRate,numberOfChannels:se.numberOfChannels},fastStart:"in-memory"}),Me=(e.resolution==="1080p"?8e6:4e6)*(T==="high"?1.5:T==="low"?.5:1),Ye=new VideoEncoder({output:(Xe,D)=>_e.addVideoChunk(Xe,D),error:Xe=>{throw Xe}});Ye.configure({codec:"avc1.4d002a",width:t.width,height:t.height,bitrate:Me,framerate:b});const ct=new AudioEncoder({output:(Xe,D)=>_e.addAudioChunk(Xe,D),error:Xe=>{throw Xe}});ct.configure({codec:"mp4a.40.2",sampleRate:se.sampleRate,numberOfChannels:se.numberOfChannels,bitrate:128e3}),A(5,"Encoding Audio..."),E?.("Encoding audio tracks...");const pt=se.numberOfChannels,ht=se.sampleRate,bt=ht,It=se.length;for(let Xe=0;Xe<It;Xe+=bt){if(de())throw new Error("Render aborted");const D=Math.min(bt,It-Xe),oe=Math.round(Xe/ht*1e6),we=new Float32Array(D*pt);for(let Je=0;Je<pt;Je++){const B=se.getChannelData(Je).subarray(Xe,Xe+D);we.set(B,Je*D)}const Be=new AudioData({format:"f32-planar",sampleRate:ht,numberOfFrames:D,numberOfChannels:pt,timestamp:oe,data:we});for(ct.encode(Be),Be.close();ct.encodeQueueSize>10;)await new Promise(Je=>setTimeout(Je,10))}await ct.flush(),A(10,"Rendering Frames...");const V=t.getContext("2d",{desynchronized:!1});if(!V)throw new Error("No canvas context");const Ce=1/b*1e6;for(let Xe=0;Xe<Fe;Xe++){if(de())throw new Error("Render aborted");const D=Xe/b;await ak(g,u,D),ip(V,t.width,t.height,D,a,r,u,p,g,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,pe,x,Y,I);const oe=Math.round(Xe*Ce),we=Math.round(Ce),Be=new VideoFrame(t,{timestamp:oe,duration:we}),Je=Xe%(b*2)===0;Ye.encode(Be,{keyFrame:Je}),Be.close();const C=10+Xe/Fe*89;A(C,`Rendering frame ${Xe}/${Fe}`),Ye.encodeQueueSize>5&&await new Promise(B=>{const ne=()=>{Ye.encodeQueueSize<=2?B(null):setTimeout(ne,10)};ne()}),Xe%2===0&&await new Promise(B=>setTimeout(B,0))}A(99,"Finalizing frames..."),await Ye.flush(),E?.("Video encoder flushed."),A(99.5,"Muxing and saving..."),_e.finalize();const{buffer:ie}=_e.target,Et=new Blob([ie],{type:"video/mp4"});return A(100,"Done!"),{blob:Et,duration:pe,format:"mp4"}}function rk(){const{toast:e,confirm:t}=er(),o=Q.useRef(null),a=Q.useRef(null),r=Q.useRef(null),u=Q.useRef(null),p=Q.useRef(null),g=Q.useRef({aborted:!1}),v=Q.useRef(()=>{});Q.useEffect(()=>{zM()},[]);const[m,x]=Q.useState(null),[b,T]=Q.useState(0),[A,E]=Q.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[j,I]=Q.useState([]),[Y,de]=Q.useState([]),[se,pe]=Q.useState(0),[Fe,_e]=Q.useState(!1),[Se,et]=Q.useState("off"),[Me,Ye]=Q.useState(0),[ct,pt]=Q.useState(0),[ht,bt]=Q.useState(1),[It,V]=Q.useState(!1),[Ce,ie]=Q.useState(ei.PLAYER),[Et,Xe]=Q.useState(!1),[D,oe]=Q.useState(!1),[we,Be]=Q.useState(!1),[Je,C]=Q.useState(!1),[B,ne]=Q.useState(!1),[ce,Ge]=Q.useState(0),[P,Ue]=Q.useState("16:9"),[Re,ye]=Q.useState("1080p"),[fe,Pe]=Q.useState("default"),[Qe,z]=Q.useState(null),[je,it]=Q.useState(null),[U,Z]=Q.useState(null),[ae,Ee]=Q.useState("auto"),[ve,Ne]=Q.useState(30),[ue,Ve]=Q.useState("med"),[w,M]=Q.useState("mediarecorder"),[R,G]=Q.useState("h264"),[$,he]=Q.useState(""),[re,ze]=Q.useState(!1),[Ae,ke]=Q.useState(!1),[_,ot]=Q.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",lyricLineHeight:1.2,useRealColorMedia:!1,channelInfoFontWeight:"bold",channelInfoFontStyle:"normal",infoFontWeight:"bold",infoFontStyle:"normal"}),xt=Q.useRef(_);Q.useEffect(()=>{xt.current=_},[_]);const zt=Q.useRef(null),Nt=Q.useRef(null),tt=_.backgroundBlurStrength>0,Jt=Q.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(J=>MediaRecorder.isTypeSupported(J.value)),[]),[ge,De]=Q.useState([]),[dt,mt]=Q.useState(-1),[st,Pt]=Q.useState(!1),$t=()=>{const k=Re==="1080p";switch(P){case"9:16":return k?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return k?{w:1080,h:1440}:{w:720,h:960};case"4:3":return k?{w:1440,h:1080}:{w:960,h:720};case"1:1":return k?{w:1080,h:1080}:{w:720,h:720};case"1:2":return k?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return k?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return k?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return k?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return k?{w:1080,h:1350}:{w:720,h:900};case"20:9":return k?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return k?{w:2560,h:1080}:{w:1720,h:720};default:return k?{w:1920,h:1080}:{w:1280,h:720}}},{w:Rn,h:Hn}=$t(),[An,ai]=Q.useState(!0),[bi,Jn]=Q.useState(!0),[qe,St]=Q.useState(!1),Ft=Q.useMemo(()=>{const k=_.visualTransitionType||"none",J=_.visualTransitionDuration||1;return Y.filter(W=>W.type==="audio"?!1:Me>=W.startTime&&Me<W.endTime||k==="crossfade"&&Me>=W.endTime&&Me<W.endTime+J).sort((W,xe)=>{const Oe=(W.layer||0)-(xe.layer||0);return Oe!==0?Oe:W.startTime-xe.startTime})},[Y,Me,_.visualTransitionType,_.visualTransitionDuration]),ni=Y.filter(k=>k.type==="audio"&&Me>=k.startTime&&Me<k.endTime),Bt=Q.useMemo(()=>se===0?j:j.map(k=>({...k,time:k.time+se,endTime:k.endTime!==void 0?k.endTime+se:void 0})),[j,se]),gn=Bt.findIndex((k,J)=>{if(k.endTime!==void 0)return Me>=k.time&&Me<k.endTime;const Le=Bt[J+1];return Me>=k.time&&(!Le||Me<Le.time)}),xl=k=>{const J=k.target.files?.[0];if(J){const Le=URL.createObjectURL(J);x(Le);const W={title:J.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};E(W),J.type.startsWith("audio/")?df(()=>import("./jsmediatags.min-DdToJgZ2.js").then(xe=>xe.j),[]).then(xe=>{xe.read(J,{onSuccess:Oe=>{const{title:Ze,artist:Tt,picture:gt}=Oe.tags;let Tn=null;if(gt){const{data:ln,format:He}=gt;let Mt="";for(let Xt=0;Xt<ln.length;Xt++)Mt+=String.fromCharCode(ln[Xt]);Tn=`data:${He};base64,${window.btoa(Mt)}`}E({title:Ze||W.title,artist:Tt||W.artist,coverUrl:Tn||null})},onError:Oe=>{console.log("Error reading tags:",Oe)}})}):J.type.startsWith("video/")&&(C(!1),E({...W,coverUrl:Le,backgroundType:"video"})),pe(0),_e(!1),Ye(0),mt(-1),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}k.target.value=""},eo=k=>{const J=k.target.files?.[0];if(J){const Le=URL.createObjectURL(J),W=J.type.startsWith("video/");W&&C(!1),E(xe=>({...xe,coverUrl:Le,backgroundType:W?"video":"image"}))}k.target.value=""},Ho=async k=>{const J=k.target.files?.[0];if(J)try{const Le=await J.text(),W=J.name.split(".").pop()?.toLowerCase();let xe=[];W==="lrc"?xe=Ua(Le):W==="srt"?xe=Fa(Le):W==="ttml"||W==="xml"?xe=qs(Le):W==="vtt"&&(xe=$s(Le)),xe.some(Oe=>Oe.words&&Oe.words.length>0)&&(ot(Oe=>({...Oe,highlightEffect:"karaoke"})),e.success(`${W?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),I(xe)}catch(Le){console.error("Failed to parse lyrics:",Le),e.error("Failed to parse lyric file.")}k.target.value=""};Q.useEffect(()=>{if(dt!==-1&&ge[dt]){const k=ge[dt];I(k.parsedLyrics||[])}},[ge,dt]);const mo=async k=>{const J=k.target.files?.[0];if(J){if(!window.FontFace||!document.fonts){e.error("Custom fonts are not supported in this browser.");return}try{const Le=URL.createObjectURL(J),W=J.name.replace(/\.[^/.]+$/,""),xe="CustomFont",Oe=new FontFace(xe,`url(${Le})`);await Oe.load(),document.fonts.add(Oe),z(W),ot(Ze=>({...Ze,fontFamily:xe})),e.success(`Loaded font: ${W}`)}catch(Le){console.error("Failed to load font:",Le),e.error("Failed to load font file.")}}k.target.value=""},Oo=async k=>{const J=k.target.files?.[0];if(J){if(!window.FontFace||!document.fonts){e.error("Custom fonts are not supported in this browser.");return}try{const Le=URL.createObjectURL(J),W=J.name.replace(/\.[^/.]+$/,""),xe="ChannelFont",Oe=new FontFace(xe,`url(${Le})`);await Oe.load(),document.fonts.add(Oe),it(W),ot(Ze=>({...Ze,channelInfoFontFamily:xe})),e.success(`Loaded Channel font: ${W}`)}catch(Le){console.error("Failed to load font:",Le),e.error("Failed to load channel font file.")}}k.target.value=""},bl=async k=>{const J=k.target.files?.[0];if(J){if(!window.FontFace||!document.fonts){e.error("Custom fonts are not supported in this browser.");return}try{const Le=URL.createObjectURL(J),W=J.name.replace(/\.[^/.]+$/,""),xe="InfoFont",Oe=new FontFace(xe,`url(${Le})`);await Oe.load(),document.fonts.add(Oe),Z(W),ot(Ze=>({...Ze,infoFontFamily:xe})),e.success(`Loaded Info font: ${W}`)}catch(Le){console.error("Failed to load font:",Le),e.error("Failed to load info font file.")}}k.target.value=""},Si=Q.useCallback(async(k,J=!0,Le)=>{const W=Le||ge;if(k<0||k>=W.length)return;const xe=W[k],Oe=URL.createObjectURL(xe.audioFile);if(x(Oe),E({title:xe.metadata.title,artist:xe.metadata.artist,coverUrl:xe.metadata.coverUrl||null,backgroundType:xe.metadata.backgroundType||"image"}),I([]),xe.parsedLyrics&&xe.parsedLyrics.length>0)I(xe.parsedLyrics);else if(xe.lyricFile)try{const Ze=await xe.lyricFile.text(),Tt=xe.lyricFile.name.split(".").pop()?.toLowerCase();let gt=[];Tt==="lrc"?gt=Ua(Ze):Tt==="srt"?gt=Fa(Ze):Tt==="ttml"||Tt==="xml"?gt=qs(Ze):Tt==="vtt"&&(gt=$s(Ze)),I(gt)}catch(Ze){console.error("Failed to load lyrics",Ze)}pe(0),mt(k),r.current&&(r.current.scrollTop=0),J?setTimeout(()=>{o.current&&(o.current.play().catch(Ze=>console.log("Autoplay failed",Ze)),_e(!0))},100):(_e(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[ge]),Sn=Q.useCallback(()=>{if(ge.length===0)return;const k=(dt+1)%ge.length;Si(k)},[ge,dt,Si]),$l=Q.useCallback(()=>{if(ge.length===0)return;const k=(dt-1+ge.length)%ge.length;Si(k)},[ge,dt,Si]),Yl=()=>{o.current&&(Fe?(o.current.pause(),_e(!1)):!m&&ge.length>0?Si(0):(o.current.play().catch(console.error),_e(!0)))},Kn=Q.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,_e(!1),Ye(0))},[]),go=()=>{et(k=>k==="off"?"one":k==="one"?"all":k==="all"?"all_repeat":"off")},nr=()=>{document.fullscreenElement?(document.exitFullscreen(),Xe(!1)):(a.current?.requestFullscreen(),Xe(!0))},$a=k=>{if(k&&k.target.closest(".no-minimal-mode-toggle"))return;const J=!qe;St(J),J&&Be(!0),e.success(`Minimal Mode: ${J?"On":"Off"}`,{id:"minimal-mode"})},ir=()=>{o.current&&(Ye(o.current.currentTime),B&&Ge(o.current.currentTime/ct*100))},Qc=()=>{o.current&&pt(o.current.duration)},Jl=k=>{const J=parseFloat(k.target.value);o.current&&(o.current.currentTime=J,Ye(J))},Sl=k=>{if(!zt.current||B||!ct)return;const J=zt.current.getBoundingClientRect(),xe=Math.max(0,Math.min(k-J.left,J.width))/J.width*ct;o.current&&(o.current.currentTime=xe,Ye(xe))},$i=k=>{const J=parseFloat(k.target.value);bt(J),o.current&&(o.current.volume=J),V(J===0)},si=k=>{if(!Nt.current)return;const J=Nt.current.getBoundingClientRect(),W=Math.max(0,Math.min(k-J.left,J.width))/J.width;bt(W),o.current&&(o.current.volume=W),V(W===0)},or=async()=>{if(!o.current||!u.current)return;const k=_.renderMode==="playlist"&&ge.length>0,J=[];if(k)for(const Ie of ge){let lt=[];if(Ie.parsedLyrics&&Ie.parsedLyrics.length>0)lt=Ie.parsedLyrics;else if(Ie.lyricFile)try{const We=await Ie.lyricFile.text(),wn=Ie.lyricFile.name.split(".").pop()?.toLowerCase();wn==="lrc"?lt=Ua(We):wn==="srt"?lt=Fa(We):wn==="ttml"||wn==="xml"?lt=qs(We):wn==="vtt"&&(lt=$s(We))}catch(We){console.error("Failed to parse lyrics for playlist item",We)}const Gt=URL.createObjectURL(Ie.audioFile);J.push({audioSrc:Gt,lyrics:lt,metadata:Ie.metadata,isFileSource:!0})}else{if(!m)return;J.push({audioSrc:m,lyrics:Bt,metadata:A,isFileSource:!1})}if(J.length===0)return;const Le=k?`Start rendering ALL ${J.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${P} (${Re}) video? This will play the song from start to finish.`;if(!await t(`${Le} Please do not switch tabs during rendering.`,"Start Rendering?")){k&&J.forEach(Ie=>Ie.isFileSource&&URL.revokeObjectURL(Ie.audioSrc));return}ze(!1),ne(!0),Ge(0);const xe={aborted:!1};g.current=xe,Kn(),et("off"),Vn.current&&clearTimeout(Vn.current),oe(!1),Be(!0),Tl.current&&Tl.current.pause();const Oe=o.current,Ze=fe,Tt=new Map,gt=new Map,Tn=new Map,ln=[],He=(Ie,lt)=>new Promise(Gt=>{const We=new Image;We.crossOrigin="anonymous",We.onload=()=>{Tt.set(Ie,We),Gt()},We.onerror=()=>Gt(),We.src=lt}),Mt=(Ie,lt)=>new Promise(Gt=>{const We=document.createElement("video");We.crossOrigin="anonymous",We.muted=!0,We.playsInline=!0,We.preload="auto";let wn=!1;const tn=()=>{wn||(wn=!0,gt.set(Ie,We),Gt())};We.oncanplay=()=>{wn||(We.currentTime=.001)},We.onseeked=()=>tn(),We.onerror=()=>{console.warn("Failed to load video:",lt),tn()},setTimeout(()=>tn(),5e3),We.src=lt,We.load()}),Xt=(Ie,lt)=>new Promise(Gt=>{const We=document.createElement("audio");We.crossOrigin="anonymous",We.onloadedmetadata=()=>{Tn.set(Ie,We),Gt()},We.onerror=()=>Gt(),We.src=lt});if(Y.forEach(Ie=>{Ie.type==="video"?ln.push(Mt(Ie.id,Ie.url)):Ie.type==="audio"||Ie.type==="audio"?ln.push(Xt(Ie.id,Ie.url)):ln.push(He(Ie.id,Ie.url))}),_.showChannelInfo&&(_.channelInfoImage&&ln.push(He("__channel_info__",_.channelInfoImage)),_.channelInfoText)){const Ie=_.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(Ie))try{const lt=document.createElement("div");lt.style.position="absolute",lt.style.visibility="hidden",lt.style.whiteSpace="nowrap",lt.style.fontFamily="sans-serif",lt.style.fontWeight="bold",lt.style.fontSize="100px",lt.style.display="inline-flex",lt.style.alignItems="center",lt.style.gap="0.25em",lt.innerHTML=Ie;const Gt=lt.getElementsByTagName("svg");for(let ii=0;ii<Gt.length;ii++)Gt[ii].style.width="auto",Gt[ii].style.height="1.5em";document.body.appendChild(lt);const{width:We,height:wn}=lt.getBoundingClientRect();document.body.removeChild(lt);const tn=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${We}" height="${wn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${Ie}
                  </div>
                </foreignObject>
              </svg>
            `,Ti=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(tn).replace(/%([0-9A-F]{2})/g,function(Yo,Ql){return String.fromCharCode(parseInt(Ql,16))}))}`;ln.push(He("__channel_info_text_svg__",Ti))}catch(lt){console.warn("Failed to process SVG channel info",lt)}}if(_.backgroundSource==="image"&&_.backgroundImage&&ln.push(He("__custom_bg__",_.backgroundImage)),await Promise.all(ln),xe.aborted){ne(!1),k&&J.forEach(Ie=>Ie.isFileSource&&URL.revokeObjectURL(Ie.audioSrc));return}const En=u.current,F=En.getContext("2d"),ft=En.captureStream(ve);let wt=null;try{if(Oe.captureStream)wt=Oe.captureStream();else if(Oe.mozCaptureStream)wt=Oe.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{e.error("Your browser does not support audio capture for recording."),ne(!1);return}const $e=new(window.AudioContext||window.webkitAudioContext),sn=$e.createMediaStreamDestination();$e.createMediaElementSource(Oe).connect(sn),gt.forEach(Ie=>{Ie.muted=!0,$e.createMediaElementSource(Ie).connect(sn)}),Tn.forEach(Ie=>{Ie.muted=!0,$e.createMediaElementSource(Ie).connect(sn)}),sn.stream.getAudioTracks().length>0?ft.addTrack(sn.stream.getAudioTracks()[0]):wt&&ft.addTrack(wt.getAudioTracks()[0]);const fi=(()=>{if(ae!=="auto"&&MediaRecorder.isTypeSupported(ae))return ae;const Ie=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const lt of Ie)if(MediaRecorder.isTypeSupported(lt))return lt;return"video/webm"})(),zi=Re==="1080p"?8e6:4e6,$o=ve>30?1.5:1,In=ue==="high"?2:ue==="low"?.5:1,ri=zi*$o*In,dn=new MediaRecorder(ft,{mimeType:fi,videoBitsPerSecond:ri});p.current=dn;const pi=[];dn.ondataavailable=Ie=>{Ie.data.size>0&&pi.push(Ie.data)},dn.onstop=()=>{if(xe.aborted)console.log("Render aborted");else{const Ie=new Blob(pi,{type:fi}),lt=Gt=>{const We=URL.createObjectURL(Gt),wn=document.createElement("a");wn.href=We;const tn=fi.includes("mp4")?"mp4":"webm",Dn=k?`Playlist_${J.length}_Songs_${P.replace(":","-")}.${tn}`:`${J[0].metadata.title||"video"}_${P.replace(":","-")}.${tn}`;wn.download=Dn,document.body.appendChild(wn),wn.click(),document.body.removeChild(wn),URL.revokeObjectURL(We)};fi.includes("webm"),lt(Ie)}$e.close(),ne(!1),T(Ie=>Ie+1),k&&J.forEach(Ie=>Ie.isFileSource&&URL.revokeObjectURL(Ie.audioSrc))};let te=0,hi=[],kt=A,zn=0,Yi=0;const io=1e3/ve,vo=Ie=>{if(xe.aborted)return;(dn.state==="recording"||dn.state==="paused")&&requestAnimationFrame(vo);const lt=Ie-Yi;if(lt<io)return;Yi=Ie-lt%io;const Gt=Oe.currentTime;zn>0&&Ge(Gt/zn*100),gt.forEach((We,wn)=>{if(wn==="background"){const tn=We.duration||1,Dn=Gt%tn;let Ti=Math.abs(We.currentTime-Dn);(Dn<We.currentTime&&We.currentTime-Dn>tn/2||Ti>.5)&&(We.currentTime=Dn),We.paused&&We.play().catch(()=>{})}else{const tn=Y.find(Dn=>Dn.id===wn);if(tn)if(Gt>=tn.startTime&&Gt<tn.endTime){const Dn=tn.playbackRate||1;let Ti=(Gt-tn.startTime)*Dn+(tn.mediaStartOffset||0);const ii=tn.mediaDuration||We.duration;ii&&ii>0&&Ti>=ii&&(Ti=Ti%ii),Math.abs(We.playbackRate-Dn)>.01&&(We.playbackRate=Dn),Math.abs(We.currentTime-Ti)>.5&&(We.currentTime=Ti);const Yo=tn.isMuted!==!1;We.muted!==Yo&&(We.muted=Yo),We.paused&&We.play().catch(()=>{})}else We.paused||We.pause(),We.muted||(We.muted=!0)}}),Tn.forEach((We,wn)=>{const tn=Y.find(Dn=>Dn.id===wn);if(tn){const Dn=tn.layer||0;if(_.layerVisibility?.audio?.[Dn]!==!1&&Gt>=tn.startTime&&Gt<tn.endTime){const ii=tn.playbackRate||1,Yo=(Gt-tn.startTime)*ii+(tn.mediaStartOffset||0);Math.abs(We.playbackRate-ii)>.01&&(We.playbackRate=ii),Math.abs(We.currentTime-Yo)>.5&&(We.currentTime=Yo);const Ql=tn.isMuted===!0;We.muted!==Ql&&(We.muted=Ql),We.paused&&We.play().catch(()=>{})}else We.paused||We.pause(),We.muted||(We.muted=!0)}}),F&&ip(F,En.width,En.height,Gt,hi,kt,Y,Tt,gt,Ze,Qe,_.fontSizeScale,_.backgroundBlurStrength>0,zn,_,_.renderMode==="current"||te===J.length-1,_.renderMode==="current"||te===0)},xo=async()=>{if(xe.aborted){dn.stop();return}if(te>=J.length){await new Promise(lt=>setTimeout(lt,500)),dn.stop();return}const Ie=J[te];dn.state==="recording"&&dn.pause(),hi=Ie.lyrics,kt=Ie.metadata,zn=0,Ie.metadata.coverUrl&&(Ie.metadata.backgroundType==="video"?await Mt("background",Ie.metadata.coverUrl):await He("cover",Ie.metadata.coverUrl)),Oe.pause(),Oe.src=Ie.audioSrc,Oe.load(),await new Promise(lt=>{const Gt=()=>{Oe.removeEventListener("canplay",Gt),lt()};Oe.addEventListener("canplay",Gt),Oe.readyState>=3&&Gt()}),zn=Oe.duration,dn.state==="inactive"?($e.state==="suspended"&&await $e.resume(),dn.start(),requestAnimationFrame(vo)):dn.state==="paused"&&dn.resume(),await Oe.play(),await new Promise(lt=>{const Gt=()=>{Oe.removeEventListener("ended",Gt),lt()};Oe.addEventListener("ended",Gt)}),te++,xo()};await xo()},Zc=async()=>{if(!u.current)return;const k=_.renderMode==="playlist"&&ge.length>0;let J=null,Le=Bt,W=A;if(k&&ge.length>0)J=ge[0].audioFile,Le=ge[0].parsedLyrics||[],W=ge[0].metadata;else if(ge.length>0&&dt>=0)J=ge[dt].audioFile;else if(m)try{J=await(await fetch(m)).blob()}catch(F){console.error("FFmpeg: Failed to fetch audio blob",F),e.error("Failed to load audio source for rendering.");return}else{e.error("Please load an audio file first.");return}if(!J){e.error("No audio file available for FFmpeg export.");return}const xe=`Start FFmpeg rendering at ${Re} (${P})? This uses frame-by-frame capture for higher quality. Rendering may take several minutes.`;if(!await t(xe,"Start FFmpeg Rendering?"))return;ze(!1),ne(!0),Ge(0),he("Initializing...");const Ze={aborted:!1};g.current=Ze,Kn();const Tt=u.current,{w:gt,h:Tn}=$t();Tt.width=gt,Tt.height=Tn;const ln=new Map,He=new Map,Mt=[],Xt=(F,ft)=>new Promise(wt=>{const $e=new Image;$e.crossOrigin="anonymous",$e.onload=()=>{ln.set(F,$e),wt()},$e.onerror=()=>wt(),$e.src=ft}),En=(F,ft)=>new Promise(wt=>{const $e=document.createElement("video");$e.crossOrigin="anonymous",$e.muted=!0,$e.playsInline=!0,$e.preload="auto";let sn=!1;const Wt=()=>{sn||(sn=!0,He.set(F,$e),wt())};$e.oncanplay=()=>{sn||($e.currentTime=.001)},$e.onseeked=()=>Wt(),$e.onerror=()=>{console.warn("Failed to load video:",ft),Wt()},setTimeout(()=>Wt(),5e3),$e.src=ft,$e.load()});if(Y.forEach(F=>{F.type==="video"?Mt.push(En(F.id,F.url)):F.type!=="audio"&&Mt.push(Xt(F.id,F.url))}),W.coverUrl&&(W.backgroundType==="video"?Mt.push(En("background",W.coverUrl)):Mt.push(Xt("cover",W.coverUrl))),_.backgroundSource==="image"&&_.backgroundImage&&Mt.push(Xt("__custom_bg__",_.backgroundImage)),_.showChannelInfo&&_.channelInfoImage&&Mt.push(Xt("__channel_info__",_.channelInfoImage)),await Promise.all(Mt),Ze.aborted){ne(!1);return}try{const F=await KM({canvas:Tt,audioFile:J,lyrics:Le,metadata:W,visualSlides:Y,imageMap:ln,videoMap:He,preset:fe,customFontName:Qe,renderConfig:_,resolution:Re,aspectRatio:P,fps:ve,quality:ue,codec:R,onProgress:(sn,Wt)=>{Ge(sn),he(Wt)},onLog:sn=>console.log(sn),abortSignal:Ze,isFirstSong:!0,isLastSong:!0}),ft=`${W.title||"video"}_${P.replace(":","-")}_ffmpeg.${F.format}`,wt=URL.createObjectURL(F.blob),$e=document.createElement("a");$e.href=wt,$e.download=ft,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(wt),e.success(`Video exported successfully! (${F.format.toUpperCase()}, ${Math.round(F.duration)}s)`)}catch(F){F.message!=="Render aborted"&&(console.error("FFmpeg render failed:",F),e.error(`FFmpeg render failed: ${F.message}`))}finally{ne(!1),he("")}},Ya=async()=>{if(!u.current)return;const k=_.renderMode==="playlist"&&ge.length>0;let J=null,Le=Bt,W=A;if(k&&ge.length>0)J=ge[0].audioFile,Le=ge[0].parsedLyrics||[],W=ge[0].metadata;else if(ge.length>0&&dt>=0)J=ge[dt].audioFile;else if(m)try{J=await(await fetch(m)).blob()}catch(F){console.error("WebCodecs: Failed to fetch audio blob",F),e.error("Failed to load audio source for rendering.");return}else{e.error("Please load an audio file first.");return}if(!J){e.error("No audio file available for export.");return}if(!ux()){e.error("WebCodecs is not supported in this browser.");return}const{w:xe,h:Oe}=$t(),Ze=`Start WebCodecs rendering at ${Re} @ ${ve}fps?
Resolution: ${xe}x${Oe}

This uses hardware acceleration and is very fast.`;if(!await t(Ze,"Start WebCodecs Rendering?"))return;ze(!1),ne(!0),Ge(0),he("Initializing WebCodecs...");const gt={aborted:!1};g.current=gt,Kn();const Tn=u.current;Tn.width=xe,Tn.height=Oe;const ln=new Map,He=new Map,Mt=[],Xt=(F,ft)=>new Promise(wt=>{const $e=new Image;$e.crossOrigin="anonymous",$e.onload=()=>{ln.set(F,$e),wt()},$e.onerror=()=>wt(),$e.src=ft}),En=(F,ft)=>new Promise(wt=>{const $e=document.createElement("video");$e.crossOrigin="anonymous",$e.muted=!0,$e.playsInline=!0,$e.preload="auto";let sn=!1;const Wt=()=>{sn||(sn=!0,He.set(F,$e),wt())};$e.oncanplay=()=>{sn||($e.currentTime=.001)},$e.onseeked=()=>Wt(),$e.onerror=()=>{console.warn("Failed to load video:",ft),Wt()},setTimeout(()=>Wt(),5e3),$e.src=ft,$e.load()});if(Y.forEach(F=>{F.type==="video"?Mt.push(En(F.id,F.url)):F.type!=="audio"&&Mt.push(Xt(F.id,F.url))}),W.coverUrl&&(W.backgroundType==="video"?Mt.push(En("background",W.coverUrl)):Mt.push(Xt("cover",W.coverUrl))),_.backgroundSource==="image"&&_.backgroundImage&&Mt.push(Xt("__custom_bg__",_.backgroundImage)),_.showChannelInfo&&_.channelInfoImage&&Mt.push(Xt("__channel_info__",_.channelInfoImage)),await Promise.all(Mt),gt.aborted){ne(!1);return}try{const F=await sk({canvas:Tn,audioFile:J,lyrics:Le,metadata:W,visualSlides:Y,imageMap:ln,videoMap:He,preset:fe,customFontName:Qe,renderConfig:_,resolution:Re,aspectRatio:P,fps:ve,quality:ue,onProgress:(sn,Wt)=>{Ge(sn),he(Wt)},abortSignal:gt,isFirstSong:!0,isLastSong:!0}),ft=`${W.title||"video"}_${P.replace(":","-")}_webcodecs.${F.format}`,wt=URL.createObjectURL(F.blob),$e=document.createElement("a");$e.href=wt,$e.download=ft,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(wt),e.success(`Video exported successfully! (${Math.round(F.duration)}s)`)}catch(F){F.message!=="Render aborted"&&(console.error("WebCodecs render failed:",F),e.error(`Render failed: ${F.message}`))}finally{ne(!1),he("")}},Kl=async()=>{w==="ffmpeg"?await Zc():w==="webcodecs"?await Ya():await or()};Q.useEffect(()=>{v.current=Kl});const Go=Q.useCallback(()=>{g.current&&(g.current.aborted=!0),p.current&&p.current.state==="recording"?p.current.stop():ne(!1),Kn()},[Kn]),Xl=Q.useCallback(()=>{if(r.current){const k=o.current?.currentTime||0;if(gn===-1&&k<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(gn!==-1){const J=r.current.querySelector('[data-lyric-active="true"]');if(J){const Le=r.current;if(J.offsetHeight===0)return;const W=J.offsetTop,xe=J.offsetHeight,Oe=Le.clientHeight;let Ze=.5;_.contentPosition==="top"&&(Ze=.25),_.contentPosition==="bottom"&&(Ze=.75);const Tt=W-Oe*Ze+xe/2;Le.scrollTo({top:Tt,behavior:"smooth"})}}}},[gn,fe,_.contentPosition]);Q.useEffect(()=>{Xl()},[Xl]),Q.useEffect(()=>{const k=setTimeout(()=>{Xl()},550);return()=>clearTimeout(k)},[D,we,An,bi,Ce,st,Xl]);const Vn=Q.useRef(null),Vo=Q.useCallback(()=>{if(oe(!1),Vn.current&&clearTimeout(Vn.current),!B){const k=window.setTimeout(()=>{oe(!0)},3e3);Vn.current=k}},[B]),lr=()=>{Vo()},Wl=Q.useRef(0),jo=k=>{Vo();const J=Date.now();if(J-Wl.current<300){if(k.target.closest(".no-minimal-mode-toggle"))return;$a(k)}Wl.current=J};Q.useEffect(()=>{const k=J=>{const Le=J.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Le)||Vo(),!(J.target instanceof HTMLInputElement||J.target instanceof HTMLTextAreaElement)){if(B){Le==="escape"&&Go();return}switch(J.key.toLowerCase()){case" ":case"k":J.preventDefault(),Yl(),e.success(Fe?"Paused":"Playing",{id:"play-pause"});break;case"s":J.preventDefault(),Kn(),e.success("Stopped",{id:"stop"});break;case"n":J.preventDefault(),Sn(),e.success("Next Song",{id:"next-song"});break;case"o":J.preventDefault();const xe=!qe;St(xe),xe&&Be(!0),e.success(`Minimal Mode: ${xe?"On":"Off"}`,{id:"minimal-mode"});break;case"b":J.preventDefault(),$l(),e.success("Previous Song",{id:"prev-song"});break;case"r":J.preventDefault(),go();const Oe=Se==="off"?"one":Se==="one"?"all":Se==="all"?"all_repeat":"off",Ze={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};e.success(`Repeat: ${Ze[Oe]}`,{id:"repeat"});break;case"l":J.preventDefault();const Tt=!st;Pt(Tt),Tt&&ie(ei.PLAYER);break;case"h":J.preventDefault();const gt=!we;Be(gt),e.success(gt?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"y":J.preventDefault(),ke(Ie=>!Ie);break;case"g":J.preventDefault();const Tn=If.flatMap(Ie=>Ie.options.map(lt=>lt.value)),ln=xt.current.lyricDisplayMode,Mt=(Tn.indexOf(ln)+1)%Tn.length,Xt=Tn[Mt];ot(Ie=>({...Ie,lyricDisplayMode:Xt})),e.success(`Lyric Mode: ${Xt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":J.preventDefault();const En=Yv,F=xt.current.textCase,wt=(En.indexOf(F)+1)%En.length,$e=En[wt];ot(Ie=>({...Ie,textCase:$e})),e.success(`Text Case: ${$e}`,{id:"text-case"});break;case"f":nr();break;case"i":ai(Ie=>!Ie);break;case"p":Jn(Ie=>!Ie);break;case"d":J.preventDefault(),ze(Ie=>!Ie);break;case"t":st?(Pt(!1),ie(ei.EDITOR)):ie(Ie=>Ie===ei.PLAYER?ei.EDITOR:ei.PLAYER);break;case"m":J.preventDefault();const sn=!It;V(sn),e.success(sn?"Muted":"Unmuted",{id:"mute"});break;case"x":J.preventDefault();const Wt=xt.current.highlightEffect==="none";ot(Ie=>({...Ie,highlightEffect:Ie.highlightEffect==="none"?"karaoke":"none"})),e.success(`Highlight: ${Wt?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":J.preventDefault();const no=Rf.flatMap(Ie=>Ie.options.map(lt=>lt.value)),fi=xt.current.highlightEffect||"none",zi=no.indexOf(fi),In=((zi===-1?0:zi)+1)%no.length,ri=no[In],dn=Tc(ri);ot(Ie=>{const lt={...Ie,highlightEffect:ri};return lt.useCustomHighlightColors=!1,dn&&(lt.highlightColor=dn.color,lt.highlightBackground=dn.bg),lt}),e.success(`Effect: ${ri.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":J.preventDefault();const te=(af.indexOf(fe)+1)%af.length,hi=af[te];Pe(hi);const kt=Fc[hi];if(kt){const Ie={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};ot(lt=>({...lt,...Ie,...kt}))}let zn=hi;for(const Ie of np){const lt=Ie.options.find(Gt=>Gt.value===hi);if(lt){zn=lt.label;break}}e.success(`Preset: ${zn}`,{id:"preset"});break;case"arrowleft":if(J.preventDefault(),o.current){const Ie=Math.max(0,o.current.currentTime-5);o.current.currentTime=Ie,Ye(Ie)}break;case"arrowright":if(J.preventDefault(),o.current){const Ie=Math.min(ct,o.current.currentTime+5);o.current.currentTime=Ie,Ye(Ie)}break;case"arrowup":J.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":J.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":J.preventDefault();const Yi=xt.current.fontSizeScale,io=Math.min(Yi+.1,3);ot(Ie=>({...Ie,fontSizeScale:io})),e.success(`Font Size: ${(io*100).toFixed(0)}%`,{id:"font-size"});break;case"-":J.preventDefault();const vo=xt.current.fontSizeScale,xo=Math.max(vo-.1,.1);ot(Ie=>({...Ie,fontSizeScale:xo})),e.success(`Font Size: ${(xo*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(J.ctrlKey||J.metaKey)&&J.shiftKey&&(J.preventDefault(),v.current());break}}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[Fe,Se,Ce,B,Vo,Go,st,Sn,$l,e,qe,fe,we,It]),Q.useEffect(()=>{let k,J=0;const Le=1e3/30,W=xe=>{if(o.current&&!o.current.paused&&Fe){k=requestAnimationFrame(W);const Oe=xe-J;Oe>Le&&(J=xe-Oe%Le,Ye(o.current.currentTime))}};return Fe&&!B&&(k=requestAnimationFrame(W)),()=>{k&&cancelAnimationFrame(k)}},[Fe,B]);const qo=An&&(!D||we)&&!B,yo=bi&&(!D||we)&&!B&&!qe,to=Ft.length>0?Ft[0]:null;to?`${to.url}`:A.coverUrl&&`${A.coverUrl}`;const Tl=Q.useRef(null);return Q.useEffect(()=>{if(Ft.forEach(k=>{const J=k.layer||0;if(_.layerVisibility?.visual?.[J]!==!1&&k.type==="video"){const Le=document.getElementById(`video-preview-${k.id}`);if(Le)if(B)Le.paused||Le.pause();else{const W=k.playbackRate||1;let xe=(Me-k.startTime)*W+(k.mediaStartOffset||0);const Oe=k.mediaDuration||Le.duration;Oe&&Oe>0&&xe>=Oe&&(xe=xe%Oe),Math.abs(Le.playbackRate-W)>.01&&(Le.playbackRate=W),Math.abs(Le.currentTime-xe)>.2&&(Le.currentTime=xe);const Ze=k.isMuted!==!1;Le.muted!==Ze&&(Le.muted=Ze);const Tt=k.volume!==void 0?k.volume:1;Math.abs(Le.volume-Tt)>.01&&(Le.volume=Tt),Fe&&Le.paused?Le.play().catch(()=>{}):!Fe&&!Le.paused&&Le.pause()}}}),A.backgroundType==="video"&&Tl.current){const k=Tl.current;if(B)k.paused||k.pause();else{const J=k.duration||1,Le=Me%J;Math.abs(k.currentTime-Le)>.1&&(k.currentTime=Le),Fe&&k.paused?k.play().catch(()=>{}):!Fe&&!k.paused&&k.pause()}}ni.forEach(k=>{const J=document.getElementById(`audio-preview-${k.id}`);if(J){const Le=k.playbackRate||1,W=(Me-k.startTime)*Le+(k.mediaStartOffset||0);Math.abs(J.playbackRate-Le)>.01&&(J.playbackRate=Le),Math.abs(J.currentTime-W)>.2&&(J.currentTime=W);const xe=k.isMuted===!0;J.muted!==xe&&(J.muted=xe);const Oe=k.volume!==void 0?k.volume:1;Math.abs(J.volume-Oe)>.01&&(J.volume=Oe),Fe&&J.paused?J.play().catch(()=>{}):!Fe&&!J.paused&&J.pause()}})},[Me,Fe,Ft,A,ni,_.layerVisibility]),d.jsxs("div",{ref:a,onMouseMove:lr,onTouchStart:jo,onDoubleClick:$a,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${D&&!we?"cursor-none":""}`,children:[d.jsx("audio",{ref:o,src:m||void 0,loop:Se==="one",muted:It,onTimeUpdate:ir,onLoadedMetadata:Qc,onEnded:()=>{if(B)return;const k=ge.length>0;Se==="one"||(Se==="all_repeat"?k?Sn():o.current?.play():Se==="all"&&k&&dt<ge.length-1?Sn():_e(!1))},crossOrigin:"anonymous"},b),ni.map(k=>d.jsx("audio",{id:`audio-preview-${k.id}`,src:k.url,className:"hidden",playsInline:!0},k.id)),d.jsx("canvas",{ref:u,width:Rn,height:Hn,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),d.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[_.backgroundSource==="color"&&d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:_.backgroundColor}}),_.backgroundSource==="gradient"&&d.jsx("div",{className:"absolute inset-0",style:{background:_.backgroundGradient}}),_.backgroundSource==="image"&&_.backgroundImage&&d.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${_.backgroundImage})`}}),_.backgroundSource==="smart-gradient"&&d.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const k=_.backgroundColor||"#312e81",J=parseInt(k.slice(1,3),16),Le=parseInt(k.slice(3,5),16),W=parseInt(k.slice(5,7),16),xe=`${J},${Le},${W}`,Oe=`${Math.floor(J*.6)},${Math.floor(Le*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${xe}), rgb(${Oe}) 50%, #000000)`})()}}),(_.backgroundSource==="timeline"||_.backgroundSource==="custom")&&A.coverUrl&&Y.length===0&&(A.backgroundType==="video"?d.jsx("video",{ref:Tl,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${Je?"opacity-60":"opacity-0"}`,muted:!0,loop:!B,playsInline:!0,preload:"auto",onLoadedData:()=>C(!0)}):d.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${_.backgroundSource==="custom"||Ft.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),_.backgroundSource==="color"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:_.backgroundColor}}),_.backgroundSource==="gradient"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:_.backgroundGradient}}),_.backgroundSource==="smart-gradient"&&d.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const k=_.backgroundColor||"#312e81",J=parseInt(k.slice(1,3),16),Le=parseInt(k.slice(3,5),16),W=parseInt(k.slice(5,7),16),xe=`${J},${Le},${W}`,Oe=`${Math.floor(J*.6)},${Math.floor(Le*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${xe}), rgb(${Oe}) 50%, #000000)`})()}}),!A.coverUrl&&Ft.length===0&&(_.backgroundSource==="timeline"||_.backgroundSource==="custom")&&Y.length===0&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),d.jsx("div",{className:`absolute inset-0 pointer-events-none ${_.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:_.backgroundSource==="timeline"&&Ft.map(k=>{const J=k.layer||0;if(_.layerVisibility?.visual?.[J]===!1)return null;const Le=_.visualTransitionType||"none",W=_.visualTransitionDuration||1;let xe=1;if(Le!=="none"){if(Me<k.startTime+W){const Oe=(Me-k.startTime)/W;xe=Math.max(0,Math.min(1,Oe))}if(Me>=k.endTime){let Oe=!1;if(Le==="crossfade"&&(Oe=Y.some(Ze=>Ze.id!==k.id&&(Ze.layer||0)===(k.layer||0)&&Ze.startTime>=k.endTime-.1&&Ze.startTime<k.endTime+.2)),!Oe){const Tt=1-(Me-k.endTime)/W;xe=Math.min(xe,Math.max(0,Math.min(1,Tt)))}}else if(Le==="fade-to-black"&&Me>k.endTime-W){const Oe=(k.endTime-Me)/W;xe=Math.min(xe,Math.max(0,Math.min(1,Oe)))}}return d.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:xe},children:k.type==="video"?d.jsx("video",{id:`video-preview-${k.id}`,src:k.url,className:"w-full h-full object-cover",muted:k.isMuted!==!1,playsInline:!0}):d.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${k.url})`}})},k.id)})}),d.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:_.backgroundBlurStrength>0?`blur(${_.backgroundBlurStrength}px)`:tt?"blur(12px)":"none",backgroundColor:_.useRealColorMedia?"transparent":_.backgroundBlurStrength>0||tt?"rgba(0,0,0,0.4)":void 0}}),_.enableGradientOverlay&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),d.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[_.showChannelInfo&&qe&&d.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${_.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${_.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${_.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":_.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":_.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":_.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":_.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${_.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${_.channelInfoSizeScale??1})`,transformOrigin:_.channelInfoPosition?.includes("top")?_.channelInfoPosition?.includes("center")?"top center":_.channelInfoPosition?.includes("left")?"top left":"top right":_.channelInfoPosition?.includes("center")?"bottom center":_.channelInfoPosition?.includes("left")?"bottom left":"bottom right",..._.channelInfoPosition?.includes("center")?_.channelInfoPosition?.includes("top")?{marginTop:`${(_.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(_.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(_.channelInfoMarginScale??1)*1.5}rem`}},children:[_.channelInfoImage&&_.channelInfoStyle!=="minimal"&&d.jsx("img",{src:_.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${_.channelInfoStyle==="circle"?"rounded-full":""}`}),_.channelInfoText&&_.channelInfoStyle!=="logo"&&(()=>{const k=_.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(k)?d.jsx("div",{className:`font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${_.channelInfoStyle==="minimal"||_.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,style:{fontFamily:_.channelInfoFontFamily,color:_.channelInfoFontColor||"white",fontWeight:_.channelInfoFontWeight||"bold",fontStyle:_.channelInfoFontStyle||"normal"},dangerouslySetInnerHTML:{__html:k}}):d.jsx("p",{className:`font-bold drop-shadow-md text-lg 
                    ${_.channelInfoStyle==="minimal"||_.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,style:{fontFamily:_.channelInfoFontFamily,color:_.channelInfoFontColor||"white",fontWeight:_.channelInfoFontWeight||"bold",fontStyle:_.channelInfoFontStyle||"normal"},children:_.channelInfoText})})()]}),qe&&d.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${qo?"opacity-100":"opacity-0"}
              ${_.infoPosition==="top-left"?"top-0 left-0 items-start text-left":_.infoPosition==="top-right"?"top-0 right-0 items-end text-right":_.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":_.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":_.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":_.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${_.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${_.infoSizeScale??1})`,transformOrigin:_.infoPosition?.includes("top")?_.infoPosition?.includes("center")?"top center":_.infoPosition?.includes("right")?"top right":"top left":_.infoPosition?.includes("center")?"bottom center":_.infoPosition?.includes("right")?"bottom right":"bottom left",..._.infoPosition?.includes("center")?_.infoPosition?.includes("top")?{marginTop:`${(_.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(_.infoMarginScale??1)*1.5}rem`}:{margin:`${(_.infoMarginScale??1)*1.5}rem`}},children:d.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${_.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${_.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${_.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${_.infoStyle==="modern"||_.infoStyle==="minimal",""}
            `,children:[d.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!_.showCover||_.infoStyle==="minimal"||_.infoStyle==="modern"?"hidden":"block"}
                ${_.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?d.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):d.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:d.jsx(Ra,{size:24})}),d.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[d.jsx(uo,{size:20,className:"text-white"}),d.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:eo})]})]}),d.jsxs("div",{className:`flex flex-col justify-center ${_.infoPosition?.includes("right")?"items-end":_.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[d.jsx("h1",{className:`font-bold drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${_.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${_.infoStyle==="minimal"?"text-sm":_.infoStyle==="modern"||_.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,style:{fontFamily:_.infoFontFamily,color:_.infoFontColor||"white",fontWeight:_.infoFontWeight||"bold",fontStyle:_.infoFontStyle||"normal"},children:A.title}),d.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${_.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:d.jsx("p",{className:`drop-shadow-md
                    ${_.infoStyle==="minimal"?"text-[10px]":_.infoStyle==="modern"||_.infoStyle==="modern_art"?"text-sm font-medium":"text-xs"}
                  `,style:{fontFamily:_.infoFontFamily,color:_.infoFontColor||(_.infoStyle==="minimal"?"#a1a1aa":"#d4d4d8"),fontWeight:_.infoFontWeight||"bold",fontStyle:_.infoFontStyle||"normal"},children:A.artist})})]})]})}),d.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${qo&&!qe?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:d.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[d.jsx("div",{className:"flex gap-4",children:d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${_.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?d.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):d.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:d.jsx(Ra,{size:24})}),d.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[d.jsx(uo,{size:20,className:"text-white"}),d.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:eo})]})]}),d.jsxs("div",{children:[d.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${_.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),d.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${_.showArtist?"opacity-100":"opacity-0"}`,children:d.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),d.jsxs("div",{className:`flex gap-2 flex-wrap ${qe?"hidden":""}`,children:[d.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",className:"bi bi-github",viewBox:"0 0 16 16",children:d.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),d.jsx("a",{href:"https://ai.studio/apps/drive/11YaG-jtLXb8BnXM3aMfj7wmKIw-S3mt3?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalEditorPlus - Universal Lyrics/Subtitle Editor",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalEditorPlus"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),d.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),d.jsx("button",{onClick:()=>Be(!we),className:`p-2 rounded-full transition-colors ${we?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:we?d.jsx(Ps,{size:20}):d.jsx(Fs,{size:20})}),d.jsx("button",{onClick:()=>St(!qe),className:`p-2 rounded-full transition-colors ${qe?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:qe?d.jsx(Vs,{size:20}):d.jsx(ng,{size:20})}),d.jsx("button",{onClick:()=>{const k=!st;Pt(k),k&&ie(ei.PLAYER)},className:`p-2 rounded-full transition-colors ${st?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:d.jsx(kc,{size:20})}),d.jsx("button",{onClick:()=>{st&&Pt(!1),ie(Ce===ei.PLAYER?ei.EDITOR:ei.PLAYER)},className:`p-2 rounded-full transition-colors ${Ce===ei.EDITOR&&!st?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:d.jsx(Wy,{size:20})}),d.jsx("button",{onMouseDown:k=>{k.stopPropagation(),ze(!re)},className:`p-2 rounded-full transition-colors ${re?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:d.jsx(xc,{size:20})}),d.jsx("button",{onMouseDown:k=>{k.stopPropagation(),ke(!Ae)},className:`p-2 rounded-full transition-colors ${Ae?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Keyboard Shortcuts (Y)",children:d.jsx(Mc,{size:20})}),d.jsx("button",{onClick:nr,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:Et?d.jsx(ng,{size:20}):d.jsx(Vs,{size:20})})]})]})}),d.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${_.contentPosition==="top"?"items-start pt-[10vh]":_.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:j.length>0?d.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${_.textAlign==="left"?"text-left":_.textAlign==="right"?"text-right":"text-center"} ${_.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:(qo||yo)&&fe!=="subtitle"?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[d.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${_.fontSizeScale}); line-height: calc(1.75rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${_.fontSizeScale}); line-height: calc(1.75rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${_.fontSizeScale}); line-height: calc(2rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${_.fontSizeScale}); line-height: calc(2.25rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${_.fontSizeScale}); line-height: calc(2.5rem * ${_.fontSizeScale} * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${_.fontSizeScale}); line-height: calc(1 * ${_.lyricLineHeight||1.2}); }
              `}),d.jsx("div",{className:`transition-all duration-500 ${_.contentPosition==="center"?Ce===ei.EDITOR||st?"h-[25vh]":!qo&&!yo?"h-[50vh]":"h-[40vh]":"h-0"}`}),Bt.map((k,J)=>{const Le=J===gn,W=Ce===ei.EDITOR||st,xe=["9:16","3:4","1:1","1:2","2:3"].includes(P);if(_.lyricDisplayMode!=="all"){if(_.lyricDisplayMode==="active-only"&&J!==gn)return d.jsx("p",{className:"hidden"},J);if(_.lyricDisplayMode==="next-only"&&(J<gn||J>gn+1))return d.jsx("p",{className:"hidden"},J);if(_.lyricDisplayMode==="previous-next"&&Math.abs(J-gn)>1)return d.jsx("p",{className:"hidden"},J)}else if(fe==="none"||fe==="just_video")return d.jsx("p",{className:"hidden"},J);let Oe="",Ze="";const Tt=_.transitionEffect;let gt="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Le?Tt==="slide"?gt+="translate-y-0 opacity-100 ":Tt==="zoom"?gt+="scale-100 opacity-100 ":Tt==="float"?gt+="translate-y-0 opacity-100 ":Tt==="blur"?gt+="blur-0 opacity-100 ":Tt==="fade"?gt+="opacity-100 ":Tt==="drop"?gt+="trans-drop-enter opacity-100 ":Tt==="lightspeed"?gt+="trans-lightspeed-enter opacity-100 ":Tt==="roll"?gt+="trans-roll-enter opacity-100 ":Tt==="elastic"?gt+="trans-elastic-enter opacity-100 ":Tt==="flip"?gt+="trans-flip-enter opacity-100 ":Tt==="rotate-in"?gt+="trans-rotate-in-enter opacity-100 ":Tt==="spiral"?gt+="trans-spiral-enter opacity-100 ":Tt==="shatter"?gt+="trans-shatter-enter opacity-100 ":gt+="opacity-100 ":(Tt==="slide"?gt+="translate-y-4 opacity-0 ":Tt==="zoom"?gt+="scale-75 opacity-0 ":Tt==="float"?gt+="translate-y-8 opacity-0 ":Tt==="blur"?gt+="blur-md opacity-0 ":Tt==="fade"?gt+="opacity-50 ":Tt==="drop"?gt+="trans-drop-exit opacity-0 ":Tt==="roll"?gt+="trans-roll-exit opacity-0 ":gt+="opacity-0 ",Tt==="none"&&(gt=gt.replace("opacity-0","opacity-50"))),fe==="large"||fe==="large_upper"){const wt=xe?W?"text-4xl":"text-6xl":W?"text-6xl":"text-8xl",$e=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${wt} font-black text-white ${fe==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,Ze=`${$e} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(fe==="big_center"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} font-black text-white uppercase tracking-tight text-center`,Ze=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(fe==="testing_up"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-white uppercase tracking-tight text-center`,Ze=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(fe==="testing"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-white tracking-tight text-center`,Ze=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(fe==="one_line_up"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-white uppercase tracking-tight text-center`,Ze=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(fe==="one_line"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-white tracking-tight text-center`,Ze=`${ft} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(fe==="metal"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,Ze=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(fe==="kids"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,Ze=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(fe==="sad"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",ft=xe?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Oe=`${F} text-zinc-200 tracking-wider text-center drop-shadow-md`,Ze=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(fe==="romantic"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",ft=xe?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Oe=`${F} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,Ze=`${ft} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(fe==="tech"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,Ze=`${ft} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(fe==="gothic"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Oe=`${F} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,Ze=`${ft} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(fe==="monospace"){const F=xe?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",ft=xe?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Oe=`${F} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,Ze=`${ft} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(fe==="classic"){const F=xe?W?"text-2xl":"text-3xl":W?"text-3xl":"text-6xl",ft=xe?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Oe=`${F} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,Ze=`${ft} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(fe==="slideshow"||fe==="just_video")Oe=`${xe?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,Ze="hidden";else if(fe==="subtitle"){Oe=`${xe?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center whitespace-pre-wrap`,Ze="hidden";let ft="bottom-16";W&&yo?ft="bottom-[560px]":W?ft="bottom-[360px]":yo&&(ft="bottom-[280px]"),gt=gt.replace("absolute","").replace("transform",""),gt+=`fixed ${ft} left-1/2 -translate-x-1/2 w-full px-8 z-[100] pointer-events-none `}else if(fe==="custom"){const F=xe?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",ft=xe?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl",wt=_.textAlign==="center"?"text-center":_.textAlign==="right"?"text-right":"text-left";Oe=`${F} tracking-tight ${wt}`,Ze=`${ft} opacity-40 hover:opacity-100 ${wt}`}else{const F=xe?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",ft=xe?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Oe=`${F} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,Ze=`${ft} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const ln=(_.lyricStyleTarget||"active-only")==="all"||Le;let He={color:_.fontColor,fontWeight:ln?_.fontWeight:void 0,fontStyle:ln?_.fontStyle:void 0,textDecoration:ln?_.textDecoration:void 0,fontFamily:_.fontFamily==="CustomFont"?"CustomFont, sans-serif":_.fontFamily};if((fe==="custom"||fe==="default")&&Le&&_.textEffect!=="none"){const F=_.textEffect;F==="glow"?He.textShadow=`0 0 10px ${_.fontColor}, 0 0 20px ${_.fontColor}`:F==="neon"?He.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${_.fontColor}, 0 0 40px ${_.fontColor}, 0 0 80px ${_.fontColor}`:F==="neon-multi"?He.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":F==="shadow"?He.textShadow="3px 3px 6px rgba(0,0,0,0.7)":F==="outline"?He.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":F==="3d"?He.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":F==="emboss"?(He.color="#ebebeb",He.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):F==="gold"?(He.background="linear-gradient(to bottom, #d4af37, #C5A028)",He.WebkitBackgroundClip="text",He.color="transparent"):F==="chrome"?(He.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",He.WebkitBackgroundClip="text",He.color="transparent"):F==="fire"?(He.color="#fff",He.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):F==="frozen"?(He.color="#fff",He.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):F==="vhs"?He.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":F==="gradient"?(He.background=`linear-gradient(to right, ${_.fontColor}, #ffffff)`,He.WebkitBackgroundClip="text",He.color="transparent"):F==="rainbow"?(He.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",He.WebkitBackgroundClip="text",He.color="transparent"):F==="glass"?(He.backgroundColor="rgba(255, 255, 255, 0.1)",He.backdropFilter="blur(8px)",He.padding="0.5rem 1rem",He.borderRadius="0.75rem",He.border="1px solid rgba(255, 255, 255, 0.2)",He.display="inline-block"):F==="mirror"?(He.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",He.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):F==="retro"?(He.fontFamily="'Press Start 2P', cursive",He.color="#ff00ff",He.textShadow="4px 4px 0px #00ffff"):F==="cyberpunk"?(He.color="#fcee0a",He.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",He.fontFamily="'Orbitron', sans-serif",He.letterSpacing="1px"):F==="glitch-text"?(He.animation="anim-glitch 0.4s infinite linear",He.position="relative"):F==="hologram"?(He.color="rgba(0, 255, 255, 0.7)",He.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",He.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",He.WebkitBackgroundClip="text"):F==="comic"&&(He.fontFamily="'Bangers', cursive",He.color="#ffcc00",He.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",He.letterSpacing="1px")}let Mt=k.text;const Xt=_.textCase;Xt==="upper"?Mt=Mt.toUpperCase():Xt==="lower"?Mt=Mt.toLowerCase():Xt==="title"?Mt=Mt.replace(/\w\S*/g,F=>F.charAt(0).toUpperCase()+F.substr(1).toLowerCase()):Xt==="sentence"?Mt=Mt.charAt(0).toUpperCase()+Mt.slice(1).toLowerCase():Xt==="invert"&&(Mt=Mt.replace(/\w\S*/g,F=>F.charAt(0).toLowerCase()+F.slice(1).toUpperCase())),Mt=Mt.replace(/\s*([-])\s*/g,"$1"),Le&&_.textAnimation==="typewriter"&&(Mt=Mt.substring(0,Math.max(0,Math.floor((Me-k.time)*35))));let En=Mt;if(Le&&_.highlightEffect!=="none"){const F=_.highlightEffect,ft=k.words&&k.words.length>0;if((F==="karaoke"||F?.startsWith("karaoke-"))&&ft)En=k.words.filter(wt=>wt.text===`
`||wt.text.trim().length>0).map((wt,$e,sn)=>{if(wt.text===`
`)return d.jsx("br",{},$e);let Wt=wt.text.trim();if(Xt==="upper")Wt=Wt.toUpperCase();else if(Xt==="lower")Wt=Wt.toLowerCase();else if(Xt==="title")Wt=Wt.replace(/\w\S*/g,kt=>kt.charAt(0).toUpperCase()+kt.substr(1).toLowerCase());else if(Xt==="sentence"){const kt=Wt.toLowerCase();Wt=$e===0?kt.charAt(0).toUpperCase()+kt.slice(1):kt}else Xt==="invert"&&(Wt=Wt.replace(/\w\S*/g,kt=>kt.charAt(0).toLowerCase()+kt.slice(1).toUpperCase()));const no=wt.startTime+se,fi=wt.endTime+se,zi=Me>=no&&Me<fi,$o=Me>=fi,In=/[-]$/,ri=/^[-]/;let dn=!Wt.endsWith(" ");In.test(Wt.trim())&&(dn=!1);const pi=sn[$e+1];pi&&ri.test(pi.text.trim())&&(dn=!1),pi&&pi.text===`
`&&(dn=!1),$e===sn.length-1&&(dn=!1);let te={display:"inline-block",transition:"all 0.1s ease"};if(_.textDecoration&&_.textDecoration!=="none"&&(te.textDecoration=_.textDecoration),!zi&&!$o)F==="karaoke-smooth-white"?(te.opacity=1,te.color="#ffffff"):te.opacity=.5,te.transform="scale(1)";else if($o)if(F==="karaoke-fill"){const kt=_.highlightBackground||"#fb923c";te.backgroundColor=kt,te.color="#000",te.padding="2px 6px",te.borderRadius="4px",te.opacity=1}else F==="karaoke-smooth"||F==="karaoke-smooth-white"?(te.color=_.highlightColor||"#fb923c",te.opacity=1):(fe==="custom"&&(te.color=_.fontColor),te.opacity=1);if(zi){const kt=_.highlightColor||"#fb923c",zn=_.highlightBackground||"#fb923c";if(F==="karaoke-smooth"||F==="karaoke-smooth-white"){const Yi=wt.endTime-wt.startTime,io=Me-no,vo=Math.min(100,Math.max(0,io/Yi*100)),xo=F==="karaoke-smooth-white"?"#ffffff":_.fontColor||"#ffffff";te.backgroundImage=`linear-gradient(90deg, ${kt} ${vo}%, ${xo} ${vo}%)`,te.backgroundClip="text",te.WebkitBackgroundClip="text",te.color="transparent",te.WebkitTextFillColor="transparent",te.textShadow="none"}else F==="karaoke"||F==="color"?(te.color=kt,te.textShadow=`0 0 10px ${kt}`):F==="karaoke-neon"?(te.color="#fff",te.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${kt}, 0 0 35px ${kt}`):F==="karaoke-scale"?(te.color=kt,te.transform="scale(1.3)"):F==="karaoke-underline"?(te.color=kt,te.textDecoration=(te.textDecoration||"")+" underline",te.textDecorationColor=kt,te.textUnderlineOffset="4px"):F==="karaoke-bounce"?(te.color=kt,te.transform="translateY(-10px)"):F==="karaoke-fill"?(te.backgroundColor=zn,te.color="#000",te.padding="2px 6px",te.borderRadius="4px"):F==="karaoke-outline"?(te.color="transparent",te.WebkitTextStroke=`2px ${kt}`):F==="karaoke-shadow"?(te.color=kt,te.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):F==="karaoke-gradient"?(te.background=`linear-gradient(90deg, ${kt}, ${zn})`,te.WebkitBackgroundClip="text",te.WebkitTextFillColor="transparent"):F==="karaoke-wave"?(te.color=kt,te.animation="bounce 0.3s ease infinite"):F==="karaoke-pill"?(te.backgroundColor=zn,te.color="#000",te.padding="4px 16px",te.borderRadius="9999px"):F==="karaoke-box"?(te.backgroundColor=zn,te.color="#000",te.padding="4px 8px",te.borderRadius="0"):F==="karaoke-rounded"?(te.backgroundColor=zn,te.color="#000",te.padding="4px 12px",te.padding="4px 12px",te.borderRadius="12px"):F==="karaoke-glass"?(te.backgroundColor="rgba(255, 255, 255, 0.1)",te.color="#fff",te.padding="4px 12px",te.borderRadius="8px",te.backdropFilter="blur(4px)",te.border="1px solid rgba(255, 255, 255, 0.3)",te.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):F==="karaoke-neon-multi"?(te.color="#fff",te.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):F==="karaoke-soft-glow"?(te.color=kt,te.textShadow=`0 0 5px ${kt}, 0 0 15px ${kt}, 0 0 30px ${kt}`):F==="karaoke-3d"?te.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":F==="karaoke-emboss"?(te.color="#ebebeb",te.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):F==="karaoke-chrome"?(te.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",te.WebkitBackgroundClip="text",te.color="transparent"):F==="karaoke-gold"?(te.background="linear-gradient(to bottom, #d4af37, #C5A028)",te.WebkitBackgroundClip="text",te.color="transparent"):F==="karaoke-fire"?(te.color="#fff",te.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):F==="karaoke-frozen"?(te.color="#fff",te.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):F==="karaoke-rainbow"?(te.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",te.WebkitBackgroundClip="text",te.color="transparent"):F==="karaoke-mirror"?(te.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",te.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):F==="karaoke-vhs"?te.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":F==="karaoke-retro"?(te.fontFamily="'Press Start 2P', cursive",te.color="#ff00ff",te.textShadow="4px 4px 0px #00ffff"):F==="karaoke-cyberpunk"?(te.color="#fcee0a",te.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",te.fontFamily="'Orbitron', sans-serif"):F==="karaoke-hologram"?(te.color="rgba(0, 255, 255, 0.7)",te.textShadow="0 0 5px rgba(0,255,255,0.5)"):F==="karaoke-comic"?(te.fontFamily="'Bangers', cursive",te.color="#ffcc00",te.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):F==="karaoke-glitch-text"?te.animation="anim-glitch 0.4s infinite linear":F==="karaoke-pulse"?te.animation="anim-pulse 1s infinite ease-in-out":F==="karaoke-breathe"?te.animation="anim-breathe 2s infinite ease-in-out":F==="karaoke-float"?te.animation="anim-float 2s infinite ease-in-out":F==="karaoke-sway"?te.animation="anim-sway 2s infinite ease-in-out":F==="karaoke-flicker"?te.animation="anim-flicker 2s infinite linear":F==="karaoke-shake"?te.animation="anim-shake 0.2s infinite linear":F==="karaoke-wobble"?te.animation="anim-wobble 1s infinite ease-in-out":F==="karaoke-jello"?te.animation="anim-jello 1s infinite":F==="karaoke-rubberband"?te.animation="anim-rubberband 1s infinite":F==="karaoke-heartbeat"?te.animation="anim-heartbeat 1.3s infinite ease-in-out":F==="karaoke-flash"?te.animation="anim-flash 1s infinite":F==="karaoke-tada"?te.animation="anim-tada 1s infinite":F==="karaoke-swing"?te.animation="anim-swing 2s infinite":F==="karaoke-rotate"?te.animation="anim-rotate 4s infinite linear":F==="karaoke-spin"?te.animation="anim-rotate 1s infinite linear":F==="karaoke-glitch"?te.animation="anim-glitch 0.3s infinite linear":F==="karaoke-typewriter"?(te.animation="typewriter-reveal 0.5s steps(10, end) forwards",te.whiteSpace="nowrap",te.overflow="hidden",te.display="inline-block",te.verticalAlign="bottom"):F==="karaoke-fade"?te.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":F==="karaoke-slide"?te.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":F==="karaoke-drop"?te.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":F==="karaoke-lightspeed"?te.animation="trans-lightspeed-in 0.5s ease-out forwards":F==="karaoke-roll"?te.animation="trans-roll-in 0.5s ease-out forwards":F==="karaoke-zoom"?te.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":F==="karaoke-elastic"?te.animation="trans-elastic-in 0.7s ease-out forwards":F==="karaoke-scale-rotate"?te.animation="trans-scale-rotate-in 0.5s ease-out forwards":F==="karaoke-flip"?te.animation="trans-flip-in 0.5s ease-out forwards":F==="karaoke-rotate-in"?te.animation="trans-rotate-in 0.5s ease-out forwards":F==="karaoke-spiral"?te.animation="trans-spiral-in 0.6s ease-out forwards":F==="karaoke-blur"?te.animation="trans-blur-in 0.4s ease-out forwards":F==="karaoke-shatter"?te.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(F||"")&&(te.color=kt,te.textShadow=`0 0 10px ${kt}`,F?.includes("glow")&&(te.textShadow=`0 0 5px ${kt}, 0 0 15px ${kt}, 0 0 30px ${kt}`))}const hi=d.jsx("span",{className:"inline-block",style:te,children:Wt},$e);return dn?d.jsxs(Vf.Fragment,{children:[hi," "]},$e):hi});else if(F==="karaoke"||F?.startsWith("karaoke-")){const wt=_.highlightColor||"#fb923c",$e=_.highlightBackground||"#fb923c";He.color=wt,F==="karaoke-neon"&&(He.textShadow=`0 0 10px ${wt}, 0 0 20px ${wt}`),F==="karaoke-scale"&&(He.transform=(He.transform||"")+" scale(1.1)"),F==="karaoke-underline"&&(He.textDecoration="underline"),F==="karaoke-bounce"&&(He.transform=(He.transform||"")+" translateY(-5px)"),F==="karaoke-fill"&&(He.backgroundColor=$e,He.color="#000",He.padding="4px 12px",He.borderRadius="6px"),F==="karaoke-outline"&&(He.color="transparent",He.WebkitTextStroke=`2px ${wt}`),F==="karaoke-shadow"&&(He.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),F==="karaoke-gradient"&&(He.background=`linear-gradient(90deg, ${wt}, ${$e})`,He.WebkitBackgroundClip="text",He.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(F)&&(He.backgroundColor=$e,He.color="#000",He.padding="4px 16px",He.borderRadius=F==="karaoke-pill"?"9999px":F==="karaoke-rounded"?"12px":"0"),F?.includes("glow")&&(He.textShadow=`0 0 10px ${wt}, 0 0 20px ${wt}`)}else F==="scale"?He.color=_.highlightColor||"#fb923c":_.highlightEffect==="background"&&(He.backgroundColor=(_.highlightBackground||"#fb923c")+"4D",He.padding="0 10px",He.borderRadius="8px")}return d.jsx("p",{"data-lyric-active":Le?"true":"false",className:`${gt} ${Le?Oe:Ze}`,onClick:()=>{Le&&(navigator.clipboard.writeText(k.text),e.success("Lyric copied to clipboard",1500)),o.current&&!B&&(o.current.currentTime=k.time,Ye(k.time))},children:d.jsx("span",{className:`inline-block ${Le&&_.textAnimation!=="none"&&_.textAnimation!=="typewriter"?`text-anim-${_.textAnimation}`:""}`,children:d.jsx("span",{style:He,className:"inline-block",children:En})})},J)}),d.jsx("div",{className:`transition-all duration-500 ${_.contentPosition==="center"?Ce===ei.EDITOR||st?"h-[25vh]":!qo&&!yo?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):d.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!to&&fe!=="none"&&d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[d.jsx(Ra,{size:64,className:"opacity-20"}),d.jsx("p",{children:"Load audio & lyrics to start"}),d.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),d.jsx("div",{className:`no-minimal-mode-toggle transition-all duration-500 ease-in-out overflow-hidden ${yo?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:d.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:d.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 group",children:[d.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:co(Me)}),d.jsxs("div",{ref:zt,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),Sl(k.clientX)},onPointerMove:k=>{k.buttons===1&&Sl(k.clientX)},children:[d.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${Me/ct*100}%`}}),d.jsx("input",{type:"range",name:"progress",id:"progress-bar","aria-label":"Seek Progress",min:"0",max:ct||0,value:Me,onChange:Jl,disabled:B,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),d.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:co(ct)}),d.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[d.jsx("button",{onClick:()=>V(!It),className:"text-zinc-400 hover:text-white",children:It||ht===0?d.jsx(Aa,{size:16}):d.jsx(gl,{size:16})}),d.jsxs("div",{ref:Nt,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),si(k.clientX)},onPointerMove:k=>{k.buttons===1&&si(k.clientX)},children:[d.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${It?0:ht*100}%`}}),d.jsx("input",{type:"range",name:"volume",id:"volume-control","aria-label":"Volume Control",min:"0",max:"1",step:"0.05",value:It?0:ht,onChange:$i,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),d.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[d.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[d.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio or video",children:[d.jsx(Ra,{size:18}),d.jsx("input",{type:"file",name:"audio-file",id:"audio-file",accept:"audio/*,video/*",className:"hidden",onChange:xl,disabled:B})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${j.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt, .vtt, .ttml)",children:[d.jsx(Ac,{size:18}),d.jsx("input",{type:"file",name:"lyrics-file",id:"lyrics-file",accept:".lrc,.srt,.ttml,.xml,.vtt",className:"hidden",onChange:Ho,disabled:B})]}),j.length>0&&d.jsx("button",{onClick:()=>I([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:B,children:d.jsx(Ri,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[d.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[se>0?"+":"",se.toFixed(1),"s"]}),d.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[d.jsx("button",{onClick:()=>pe(k=>parseFloat((k+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:B,children:d.jsx(ff,{size:12})}),d.jsx("button",{onClick:()=>pe(k=>parseFloat((k-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:B,children:d.jsx(Qs,{size:12})})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${Qe?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:Qe?`Custom Font: ${Qe}`:"Load Custom Font (.ttf, .otf, .woff)",children:[d.jsx(yl,{size:18}),d.jsx("input",{type:"file",name:"font-file",id:"font-file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:mo,disabled:B})]}),Qe&&d.jsx("button",{onClick:()=>z(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:B,children:d.jsx(Ri,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[d.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(_.fontSizeScale*100),"%"]}),d.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[d.jsx("button",{onClick:()=>ot(k=>({...k,fontSizeScale:Math.min(k.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:B,children:d.jsx(ff,{size:12})}),d.jsx("button",{onClick:()=>ot(k=>({...k,fontSizeScale:Math.max(k.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:B,children:d.jsx(Qs,{size:12})})]})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:fe,onChange:k=>{const J=k.target.value;Pe(J);const Le=Fc[J];if(Le){const W={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};ot(xe=>({...xe,...W,...Le}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:B,title:"Select Visual Preset",name:"preset",id:"preset-select","aria-label":"Visual Preset",children:[d.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),d.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),d.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),d.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),d.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),d.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),d.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),d.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),d.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),d.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),d.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),d.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),d.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),d.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),d.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),d.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),d.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),d.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),d.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),d.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),d.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),d.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:Kn,title:"Stop (S)",disabled:B,children:d.jsx(gf,{size:20,fill:"currentColor"})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:B||ge.length===0,onClick:$l,title:"Previous Song",children:d.jsx(IS,{size:24})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:B,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:d.jsx(TS,{size:20})}),d.jsx("button",{onClick:Yl,disabled:B,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:Fe?d.jsx(Qy,{size:28,fill:"currentColor"}):d.jsx(pf,{size:28,fill:"currentColor",className:"ml-1"})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:B,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:d.jsx(V1,{size:20})}),d.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:B||ge.length===0,onClick:Sn,title:"Next Song",children:d.jsx(DS,{size:24})}),d.jsxs("button",{className:`transition-colors disabled:opacity-50 ${Se!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:go,title:`Repeat: ${Se==="off"?"Off":Se==="one"?"One":Se==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:B,children:[Se==="one"&&d.jsx(xS,{size:20}),Se==="all_repeat"&&d.jsx(ig,{size:20}),Se==="all"&&d.jsx(kc,{size:20}),Se==="off"&&d.jsx(ig,{size:20,className:"opacity-50"})]})]}),d.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>ot(k=>({...k,backgroundBlurStrength:k.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${tt?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${tt?"On":"Off"}`,disabled:B,children:tt?"BLUR":"SHARP"}),d.jsx("button",{onClick:()=>ot(k=>({...k,highlightEffect:k.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${_.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:d.jsx(yl,{size:20})}),d.jsx("button",{onClick:()=>ye(k=>k==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:B,children:Re}),d.jsx("button",{onClick:()=>Ue(k=>k==="16:9"?"9:16":k==="9:16"?"3:4":k==="3:4"?"1:1":k==="1:1"?"1:2":k==="1:2"?"2:1":k==="2:1"?"2:3":k==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:B,children:P})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:ae,onChange:k=>Ee(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:B,title:"Select Video Codec",name:"codec",id:"codec-select","aria-label":"Video Codec",children:[d.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),Jt.map(k=>d.jsx("option",{value:k.value,className:"bg-zinc-900",children:k.label},k.value))]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),d.jsxs("div",{className:"relative group",children:[d.jsxs("select",{value:ue,onChange:k=>Ve(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:B,title:"Select Quality (Bitrate)",name:"quality",id:"quality-select","aria-label":"Render Quality",children:[d.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),d.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),d.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:d.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),d.jsx("button",{onClick:Kl,disabled:B||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:`Export as Video (${w==="ffmpeg"?"FFmpeg":"MediaRecorder"})`,children:d.jsx(js,{size:18})})]})]})]})})}),st?d.jsx("div",{className:"no-minimal-mode-toggle animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:d.jsx(IM,{playlist:ge,setPlaylist:De,currentTrackIndex:dt,setCurrentTrackIndex:mt,onPlayTrack:Si,isPlaying:Fe,onTogglePlay:Yl,currentTime:Me,onSeek:k=>{o.current&&!B&&(o.current.currentTime=k,Ye(k))},onClearPlaylist:()=>{Kn(),x(null),I([]),mt(-1),E({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:k=>{k===dt?(Kn(),x(null),I([]),mt(-1),E({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):k<dt&&mt(J=>J-1),De(J=>{const Le=[...J];return Le.splice(k,1),Le})},onClose:()=>Pt(!1)})}):Ce===ei.EDITOR&&d.jsx("div",{className:"no-minimal-mode-toggle animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:d.jsx(mT,{slides:Y,setSlides:de,currentTime:Me,duration:ct||60,lyrics:j,onSeek:k=>{o.current&&!B&&(o.current.currentTime=k,Ye(k))},onClose:()=>ie(ei.PLAYER),renderConfig:_,setRenderConfig:ot})})]}),B&&d.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[d.jsx("div",{className:w==="ffmpeg"?"animate-pulse":"animate-bounce",children:d.jsx(js,{size:48,className:w==="ffmpeg"?"text-orange-500":"text-purple-500"})}),d.jsxs("h2",{className:"text-2xl font-bold text-white",children:[w==="ffmpeg"?"FFmpeg Rendering":"Rendering Video"," (",P," ",Re,")"]}),d.jsx("p",{className:"text-zinc-400 max-w-md",children:w==="ffmpeg"?d.jsxs(d.Fragment,{children:["Frame-by-frame capture using FFmpeg WASM.",d.jsx("br",{}),d.jsx("span",{className:"text-orange-400 font-medium",children:$||"Initializing..."}),d.jsx("br",{}),"This is faster than realtime - no audio playback needed."]}):d.jsxs(d.Fragment,{children:["Rendering in real-time using Canvas 2D engine.",d.jsx("br",{}),"The audio will play during capture.",d.jsx("br",{}),"Please keep this tab active for best performance."]})}),d.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full transition-all duration-300 ease-linear ${w==="ffmpeg"?"bg-orange-500":"bg-purple-500"}`,style:{width:`${ce}%`}})}),d.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(ce),"%"]}),d.jsxs("button",{onClick:Go,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[d.jsx(gf,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),re&&d.jsx(PM,{config:_,setConfig:ot,preset:fe,setPreset:Pe,onClose:()=>ze(!1),isPlaylistMode:st,hasPlaylist:ge.length>0,onRender:Kl,customFontName:Qe,onFontUpload:mo,onClearCustomFont:()=>{z(null),ot(k=>({...k,fontFamily:"ui-sans-serif, system-ui, sans-serif"}))},customChannelFontName:je,onChannelFontUpload:Oo,onClearChannelCustomFont:()=>{it(null),ot(k=>({...k,channelInfoFontFamily:void 0}))},customInfoFontName:U,onInfoFontUpload:bl,onClearInfoCustomFont:()=>{Z(null),ot(k=>({...k,infoFontFamily:void 0}))},resolution:Re,setResolution:ye,aspectRatio:P,setAspectRatio:Ue,renderCodec:ae,setRenderCodec:Ee,supportedCodecs:Jt,renderQuality:ue,setRenderQuality:Ve,renderFps:ve,setRenderFps:Ne,renderEngine:w,setRenderEngine:M,ffmpegCodec:R,setFfmpegCodec:G}),Ae&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>ke(!1),children:d.jsxs("div",{className:"no-minimal-mode-toggle bg-zinc-900 border border-white/10 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",onClick:k=>k.stopPropagation(),children:[d.jsx("button",{onClick:()=>ke(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Ri,{size:20})}),d.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[d.jsx(Mc,{className:"text-purple-500"}),"Keyboard Shortcuts"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Playback"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Space"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"S"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Rewind 5s"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Forward 5s"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"R"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Mute"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"M"})]})]}),d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Interface"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"F"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"O"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Hold UI (No Auto-Hide)"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"H"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Header Info"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"I"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Shortcut Info"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Y"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"P"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Editor & Styles"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Timeline"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"T"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Playlist"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"L"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"D"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Export Video"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Ctrl+Shift+E"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"+ / -"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Visual Preset"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"J"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Highight Effect"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Z"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"X"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Text Case"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"C"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Cycle Lyric Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"G"})]})]}),d.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Mouse & Touch"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Toggle Minimal Mode"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Double Click / Tap"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Seek to Lyric"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Line"})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-zinc-300",children:"Copy Active Lyric"})," ",d.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Active Line"})]})]})]})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-white/5 text-center",children:d.jsx("p",{className:"text-zinc-500 text-sm",children:"Shortcuts are disabled during video rendering."})})]})})]})}const dx=document.getElementById("root");if(!dx)throw new Error("Could not find root element to mount to");const ck=f1.createRoot(dx);ck.render(d.jsx(Vf.StrictMode,{children:d.jsx(uT,{children:d.jsx(rk,{})})}));export{uk as c,Ky as g};
