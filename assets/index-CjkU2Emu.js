(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(r){if(r.ep)return;r.ep=!0;const d=o(r);fetch(r.href,d)}})();var uA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yu={exports:{}},Qs={};var g0;function mx(){if(g0)return Qs;g0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var y in r)y!=="key"&&(d[y]=r[y])}else d=r;return r=d.ref,{$$typeof:n,type:s,key:h,ref:r!==void 0?r:null,props:d}}return Qs.Fragment=t,Qs.jsx=o,Qs.jsxs=o,Qs}var y0;function gx(){return y0||(y0=1,Yu.exports=mx()),Yu.exports}var u=gx(),Ju={exports:{}},Et={};var v0;function yx(){if(v0)return Et;v0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function N(U){return U===null||typeof U!="object"?null:(U=T&&U[T]||U["@@iterator"],typeof U=="function"?U:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,P={};function Y(U,le,xe){this.props=U,this.context=le,this.refs=P,this.updater=xe||_}Y.prototype.isReactComponent={},Y.prototype.setState=function(U,le){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,le,"setState")},Y.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function de(){}de.prototype=Y.prototype;function pe(U,le,xe){this.props=U,this.context=le,this.refs=P,this.updater=xe||_}var ve=pe.prototype=new de;ve.constructor=pe,q(ve,Y.prototype),ve.isPureReactComponent=!0;var Le=Array.isArray;function Be(){}var Te={H:null,A:null,T:null,S:null},We=Object.prototype.hasOwnProperty;function Ne(U,le,xe){var je=xe.ref;return{$$typeof:n,type:U,key:le,ref:je!==void 0?je:null,props:xe}}function Qe(U,le){return Ne(U.type,le,U.props)}function He(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function rt(U){var le={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(xe){return le[xe]})}var ft=/\/+/g;function _t(U,le){return typeof U=="object"&&U!==null&&U.key!=null?rt(""+U.key):le.toString(36)}function Nt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(Be,Be):(U.status="pending",U.then(function(le){U.status==="pending"&&(U.status="fulfilled",U.value=le)},function(le){U.status==="pending"&&(U.status="rejected",U.reason=le)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function j(U,le,xe,je,st){var w=typeof U;(w==="undefined"||w==="boolean")&&(U=null);var A=!1;if(U===null)A=!0;else switch(w){case"bigint":case"string":case"number":A=!0;break;case"object":switch(U.$$typeof){case n:case t:A=!0;break;case x:return A=U._init,j(A(U._payload),le,xe,je,st)}}if(A)return st=st(U),A=je===""?"."+_t(U,0):je,Le(st)?(xe="",A!=null&&(xe=A.replace(ft,"$&/")+"/"),j(st,le,xe,"",function(Ge){return Ge})):st!=null&&(He(st)&&(st=Qe(st,xe+(st.key==null||U&&U.key===st.key?"":(""+st.key).replace(ft,"$&/")+"/")+A)),le.push(st)),1;A=0;var te=je===""?".":je+":";if(Le(U))for(var ce=0;ce<U.length;ce++)je=U[ce],w=te+_t(je,ce),A+=j(je,le,xe,w,st);else if(ce=N(U),typeof ce=="function")for(U=ce.call(U),ce=0;!(je=U.next()).done;)je=je.value,w=te+_t(je,ce++),A+=j(je,le,xe,w,st);else if(w==="object"){if(typeof U.then=="function")return j(Nt(U),le,xe,je,st);throw le=String(U),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return A}function Ce(U,le,xe){if(U==null)return U;var je=[],st=0;return j(U,je,"","",function(w){return le.call(xe,w,st++)}),je}function oe(U){if(U._status===-1){var le=U._result;le=le(),le.then(function(xe){(U._status===0||U._status===-1)&&(U._status=1,U._result=xe)},function(xe){(U._status===0||U._status===-1)&&(U._status=2,U._result=xe)}),U._status===-1&&(U._status=0,U._result=le)}if(U._status===1)return U._result.default;throw U._result}var yt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},vt={map:Ce,forEach:function(U,le,xe){Ce(U,function(){le.apply(this,arguments)},xe)},count:function(U){var le=0;return Ce(U,function(){le++}),le},toArray:function(U){return Ce(U,function(le){return le})||[]},only:function(U){if(!He(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Et.Activity=b,Et.Children=vt,Et.Component=Y,Et.Fragment=o,Et.Profiler=r,Et.PureComponent=pe,Et.StrictMode=s,Et.Suspense=v,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Te,Et.__COMPILER_RUNTIME={__proto__:null,c:function(U){return Te.H.useMemoCache(U)}},Et.cache=function(U){return function(){return U.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(U,le,xe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var je=q({},U.props),st=U.key;if(le!=null)for(w in le.key!==void 0&&(st=""+le.key),le)!We.call(le,w)||w==="key"||w==="__self"||w==="__source"||w==="ref"&&le.ref===void 0||(je[w]=le[w]);var w=arguments.length-2;if(w===1)je.children=xe;else if(1<w){for(var A=Array(w),te=0;te<w;te++)A[te]=arguments[te+2];je.children=A}return Ne(U.type,st,je)},Et.createContext=function(U){return U={$$typeof:h,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:d,_context:U},U},Et.createElement=function(U,le,xe){var je,st={},w=null;if(le!=null)for(je in le.key!==void 0&&(w=""+le.key),le)We.call(le,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(st[je]=le[je]);var A=arguments.length-2;if(A===1)st.children=xe;else if(1<A){for(var te=Array(A),ce=0;ce<A;ce++)te[ce]=arguments[ce+2];st.children=te}if(U&&U.defaultProps)for(je in A=U.defaultProps,A)st[je]===void 0&&(st[je]=A[je]);return Ne(U,w,st)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(U){return{$$typeof:y,render:U}},Et.isValidElement=He,Et.lazy=function(U){return{$$typeof:x,_payload:{_status:-1,_result:U},_init:oe}},Et.memo=function(U,le){return{$$typeof:m,type:U,compare:le===void 0?null:le}},Et.startTransition=function(U){var le=Te.T,xe={};Te.T=xe;try{var je=U(),st=Te.S;st!==null&&st(xe,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Be,yt)}catch(w){yt(w)}finally{le!==null&&xe.types!==null&&(le.types=xe.types),Te.T=le}},Et.unstable_useCacheRefresh=function(){return Te.H.useCacheRefresh()},Et.use=function(U){return Te.H.use(U)},Et.useActionState=function(U,le,xe){return Te.H.useActionState(U,le,xe)},Et.useCallback=function(U,le){return Te.H.useCallback(U,le)},Et.useContext=function(U){return Te.H.useContext(U)},Et.useDebugValue=function(){},Et.useDeferredValue=function(U,le){return Te.H.useDeferredValue(U,le)},Et.useEffect=function(U,le){return Te.H.useEffect(U,le)},Et.useEffectEvent=function(U){return Te.H.useEffectEvent(U)},Et.useId=function(){return Te.H.useId()},Et.useImperativeHandle=function(U,le,xe){return Te.H.useImperativeHandle(U,le,xe)},Et.useInsertionEffect=function(U,le){return Te.H.useInsertionEffect(U,le)},Et.useLayoutEffect=function(U,le){return Te.H.useLayoutEffect(U,le)},Et.useMemo=function(U,le){return Te.H.useMemo(U,le)},Et.useOptimistic=function(U,le){return Te.H.useOptimistic(U,le)},Et.useReducer=function(U,le,xe){return Te.H.useReducer(U,le,xe)},Et.useRef=function(U){return Te.H.useRef(U)},Et.useState=function(U){return Te.H.useState(U)},Et.useSyncExternalStore=function(U,le,xe){return Te.H.useSyncExternalStore(U,le,xe)},Et.useTransition=function(){return Te.H.useTransition()},Et.version="19.2.3",Et}var x0;function Md(){return x0||(x0=1,Ju.exports=yx()),Ju.exports}var Z=Md();const wg=Tg(Z);var Ku={exports:{}},Ws={},Xu={exports:{}},Qu={};var b0;function vx(){return b0||(b0=1,(function(n){function t(j,Ce){var oe=j.length;j.push(Ce);e:for(;0<oe;){var yt=oe-1>>>1,vt=j[yt];if(0<r(vt,Ce))j[yt]=Ce,j[oe]=vt,oe=yt;else break e}}function o(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var Ce=j[0],oe=j.pop();if(oe!==Ce){j[0]=oe;e:for(var yt=0,vt=j.length,U=vt>>>1;yt<U;){var le=2*(yt+1)-1,xe=j[le],je=le+1,st=j[je];if(0>r(xe,oe))je<vt&&0>r(st,xe)?(j[yt]=st,j[je]=oe,yt=je):(j[yt]=xe,j[le]=oe,yt=le);else if(je<vt&&0>r(st,oe))j[yt]=st,j[je]=oe,yt=je;else break e}}return Ce}function r(j,Ce){var oe=j.sortIndex-Ce.sortIndex;return oe!==0?oe:j.id-Ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,b=null,T=3,N=!1,_=!1,q=!1,P=!1,Y=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function ve(j){for(var Ce=o(m);Ce!==null;){if(Ce.callback===null)s(m);else if(Ce.startTime<=j)s(m),Ce.sortIndex=Ce.expirationTime,t(v,Ce);else break;Ce=o(m)}}function Le(j){if(q=!1,ve(j),!_)if(o(v)!==null)_=!0,Be||(Be=!0,rt());else{var Ce=o(m);Ce!==null&&Nt(Le,Ce.startTime-j)}}var Be=!1,Te=-1,We=5,Ne=-1;function Qe(){return P?!0:!(n.unstable_now()-Ne<We)}function He(){if(P=!1,Be){var j=n.unstable_now();Ne=j;var Ce=!0;try{e:{_=!1,q&&(q=!1,de(Te),Te=-1),N=!0;var oe=T;try{t:{for(ve(j),b=o(v);b!==null&&!(b.expirationTime>j&&Qe());){var yt=b.callback;if(typeof yt=="function"){b.callback=null,T=b.priorityLevel;var vt=yt(b.expirationTime<=j);if(j=n.unstable_now(),typeof vt=="function"){b.callback=vt,ve(j),Ce=!0;break t}b===o(v)&&s(v),ve(j)}else s(v);b=o(v)}if(b!==null)Ce=!0;else{var U=o(m);U!==null&&Nt(Le,U.startTime-j),Ce=!1}}break e}finally{b=null,T=oe,N=!1}Ce=void 0}}finally{Ce?rt():Be=!1}}}var rt;if(typeof pe=="function")rt=function(){pe(He)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,_t=ft.port2;ft.port1.onmessage=He,rt=function(){_t.postMessage(null)}}else rt=function(){Y(He,0)};function Nt(j,Ce){Te=Y(function(){j(n.unstable_now())},Ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):We=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(j){switch(T){case 1:case 2:case 3:var Ce=3;break;default:Ce=T}var oe=T;T=Ce;try{return j()}finally{T=oe}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(j,Ce){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var oe=T;T=j;try{return Ce()}finally{T=oe}},n.unstable_scheduleCallback=function(j,Ce,oe){var yt=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?yt+oe:yt):oe=yt,j){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=oe+vt,j={id:x++,callback:Ce,priorityLevel:j,startTime:oe,expirationTime:vt,sortIndex:-1},oe>yt?(j.sortIndex=oe,t(m,j),o(v)===null&&j===o(m)&&(q?(de(Te),Te=-1):q=!0,Nt(Le,oe-yt))):(j.sortIndex=vt,t(v,j),_||N||(_=!0,Be||(Be=!0,rt()))),j},n.unstable_shouldYield=Qe,n.unstable_wrapCallback=function(j){var Ce=T;return function(){var oe=T;T=Ce;try{return j.apply(this,arguments)}finally{T=oe}}}})(Qu)),Qu}var S0;function xx(){return S0||(S0=1,Xu.exports=vx()),Xu.exports}var Wu={exports:{}},Gn={};var T0;function bx(){if(T0)return Gn;T0=1;var n=Md();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(v,m,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gn.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return d(v,m,null,x)},Gn.flushSync=function(v){var m=h.T,x=s.p;try{if(h.T=null,s.p=2,v)return v()}finally{h.T=m,s.p=x,s.d.f()}},Gn.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(v,m))},Gn.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Gn.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,b=y(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:N}):x==="script"&&s.d.X(v,{crossOrigin:b,integrity:T,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Gn.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);s.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(v)},Gn.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,b=y(x,m.crossOrigin);s.d.L(v,x,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Gn.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);s.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(v)},Gn.requestFormReset=function(v){s.d.r(v)},Gn.unstable_batchedUpdates=function(v,m){return v(m)},Gn.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},Gn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Gn.version="19.2.3",Gn}var w0;function Sx(){if(w0)return Wu.exports;w0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Wu.exports=bx(),Wu.exports}var E0;function Tx(){if(E0)return Ws;E0=1;var n=xx(),t=Md(),o=Sx();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=d(e),i===null)throw Error(s(188));return i!==e?null:e}for(var l=e,a=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(a=p.return,a!==null){l=a;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return v(p),e;if(g===a)return v(p),i;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=p,a=g;else{for(var S=!1,C=p.child;C;){if(C===l){S=!0,l=p,a=g;break}if(C===a){S=!0,a=p,l=g;break}C=C.sibling}if(!S){for(C=g.child;C;){if(C===l){S=!0,l=g,a=p;break}if(C===a){S=!0,a=g,l=p;break}C=C.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),Ne=Symbol.for("react.activity"),Qe=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function rt(e){return e===null||typeof e!="object"?null:(e=He&&e[He]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Symbol.for("react.client.reference");function _t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case Y:return"Profiler";case P:return"StrictMode";case Le:return"Suspense";case Be:return"SuspenseList";case Ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case pe:return e.displayName||"Context";case de:return(e._context.displayName||"Context")+".Consumer";case ve:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return i=e.displayName||null,i!==null?i:_t(e.type)||"Memo";case We:i=e._payload,e=e._init;try{return _t(e(i))}catch{}}return null}var Nt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},yt=[],vt=-1;function U(e){return{current:e}}function le(e){0>vt||(e.current=yt[vt],yt[vt]=null,vt--)}function xe(e,i){vt++,yt[vt]=e.current,e.current=i}var je=U(null),st=U(null),w=U(null),A=U(null);function te(e,i){switch(xe(w,i),xe(st,e),xe(je,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Hh(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Hh(i),e=Gh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(je),xe(je,e)}function ce(){le(je),le(st),le(w)}function Ge(e){e.memoizedState!==null&&xe(A,e);var i=je.current,l=Gh(i,e.type);i!==l&&(xe(st,e),xe(je,l))}function _e(e){st.current===e&&(le(je),le(st)),A.current===e&&(le(A),Ys._currentValue=oe)}var Ee,Re;function I(e){if(Ee===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ee=i&&i[1]||"",Re=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+e+Re}var ne=!1;function ge(e,i){if(!e||ne)return"";ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ie){var Q=ie}Reflect.construct(e,[],we)}else{try{we.call()}catch(ie){Q=ie}e.call(we.prototype)}}else{try{throw Error()}catch(ie){Q=ie}(we=e())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ie){if(ie&&Q&&typeof ie.stack=="string")return[ie.stack,Q.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),S=g[0],C=g[1];if(S&&C){var z=S.split(`
`),K=C.split(`
`);for(p=a=0;a<z.length&&!z[a].includes("DetermineComponentFrameRoot");)a++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(a===z.length||p===K.length)for(a=z.length-1,p=K.length-1;1<=a&&0<=p&&z[a]!==K[p];)p--;for(;1<=a&&0<=p;a--,p--)if(z[a]!==K[p]){if(a!==1||p!==1)do if(a--,p--,0>p||z[a]!==K[p]){var he=`
`+z[a].replace(" at new "," at ");return e.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",e.displayName)),he}while(1<=a&&0<=p);break}}}finally{ne=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?I(l):""}function Oe(e,i){switch(e.tag){case 26:case 27:case 5:return I(e.type);case 16:return I("Lazy");case 13:return e.child!==i&&i!==null?I("Suspense Fallback"):I("Suspense");case 19:return I("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return I("Activity");default:return""}}function ke(e){try{var i="",l=null;do i+=Oe(e,l),l=e,e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Xe=Object.prototype.hasOwnProperty,H=n.unstable_scheduleCallback,ae=n.unstable_cancelCallback,ue=n.unstable_shouldYield,Me=n.unstable_requestPaint,ye=n.unstable_now,me=n.unstable_getCurrentPriorityLevel,E=n.unstable_ImmediatePriority,D=n.unstable_UserBlockingPriority,O=n.unstable_NormalPriority,R=n.unstable_LowPriority,ee=n.unstable_IdlePriority,L=n.log,re=n.unstable_setDisableYieldValue,se=null,fe=null;function G(e){if(typeof L=="function"&&re(e),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(se,e)}catch{}}var Je=Math.clz32?Math.clz32:M,Ke=Math.log,Ue=Math.LN2;function M(e){return e>>>=0,e===0?32:31-(Ke(e)/Ue|0)|0}var Ze=256,Dt=262144,Yt=4194304;function ct(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ze(e,i,l){var a=e.pendingLanes;if(a===0)return 0;var p=0,g=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~g,a!==0?p=ct(a):(S&=C,S!==0?p=ct(S):l||(l=C&~e,l!==0&&(p=ct(l))))):(C=a&~g,C!==0?p=ct(C):S!==0?p=ct(S):l||(l=a&~e,l!==0&&(p=ct(l)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:p}function xt(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Fe(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),e}function bt(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function St(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lt(e,i,l,a,p,g){var S=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var C=e.entanglements,z=e.expirationTimes,K=e.hiddenUpdates;for(l=S&~l;0<l;){var he=31-Je(l),we=1<<he;C[he]=0,z[he]=-1;var Q=K[he];if(Q!==null)for(K[he]=null,he=0;he<Q.length;he++){var ie=Q[he];ie!==null&&(ie.lane&=-536870913)}l&=~we}a!==0&&Gt(e,a,0),g!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=g&~(S&~i))}function Gt(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var a=31-Je(i);e.entangledLanes|=i,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function yn(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var a=31-Je(l),p=1<<a;p&i|e[a]&i&&(e[a]|=i),l&=~p}}function $n(e,i){var l=i&-i;return l=(l&42)!==0?1:qi(l),(l&(e.suspendedLanes|i))!==0?0:l}function qi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ci(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function go(){var e=Ce.p;return e!==0?e:(e=window.event,e===void 0?32:c0(e.type))}function $o(e,i){var l=Ce.p;try{return Ce.p=e,i()}finally{Ce.p=l}}var Wn=Math.random().toString(36).slice(2),qe="__reactFiber$"+Wn,ht="__reactProps$"+Wn,Rt="__reactContainer$"+Wn,Pn="__reactEvents$"+Wn,Lt="__reactListeners$"+Wn,an="__reactHandles$"+Wn,Yo="__reactResources$"+Wn,Fi="__reactMarker$"+Wn;function yo(e){delete e[qe],delete e[ht],delete e[Pn],delete e[Lt],delete e[an]}function $i(e){var i=e[qe];if(i)return i;for(var l=e.parentNode;l;){if(i=l[Rt]||l[qe]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=Yh(e);e!==null;){if(l=e[qe])return l;e=Yh(e)}return i}e=l,l=e.parentNode}return null}function vo(e){if(e=e[qe]||e[Rt]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Jo(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Zn(e){var i=e[Yo];return i||(i=e[Yo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function dn(e){e[Fi]=!0}var ml=new Set,gl={};function Hn(e,i){Yi(e,i),Yi(e+"Capture",i)}function Yi(e,i){for(gl[e]=i,e=0;e<i.length;e++)ml.add(i[e])}var fa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},pa={};function Xr(e){return Xe.call(pa,e)?!0:Xe.call(us,e)?!1:fa.test(e)?pa[e]=!0:(us[e]=!0,!1)}function yl(e,i,l){if(Xr(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function Ko(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function Ri(e,i,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+a)}}function jn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ha(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qr(e,i,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xo(e){if(!e._valueTracker){var i=ha(e)?"checked":"value";e._valueTracker=Qr(e,i,""+e[i])}}function vl(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return e&&(a=ha(e)?e.checked?"true":"false":e.value),e=a,e!==l?(i.setValue(e),!0):!1}function Ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qo=/[\n"\\]/g;function Mn(e){return e.replace(Qo,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ds(e,i,l,a,p,g,S,C){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),i!=null?S==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+jn(i)):e.value!==""+jn(i)&&(e.value=""+jn(i)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),i!=null?ps(e,S,jn(i)):l!=null?ps(e,S,jn(l)):a!=null&&e.removeAttribute("value"),p==null&&g!=null&&(e.defaultChecked=!!g),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+jn(C):e.removeAttribute("name")}function fs(e,i,l,a,p,g,S,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Xo(e);return}l=l!=null?""+jn(l):"",i=i!=null?""+jn(i):l,C||i===e.value||(e.value=i),e.defaultValue=i}a=a??p,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),Xo(e)}function ps(e,i,l){i==="number"&&Ji(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function ui(e,i,l,a){if(e=e.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<e.length;l++)p=i.hasOwnProperty("$"+e[l].value),e[l].selected!==p&&(e[l].selected=p),p&&a&&(e[l].defaultSelected=!0)}else{for(l=""+jn(l),i=null,p=0;p<e.length;p++){if(e[p].value===l){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Ki(e,i,l){if(i!=null&&(i=""+jn(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+jn(l):""}function xl(e,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(Nt(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=jn(i),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),Xo(e)}function di(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var k=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $(e,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":a?e.setProperty(i,l):typeof l!="number"||l===0||k.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function Ie(e,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var p in i)a=i[p],i.hasOwnProperty(p)&&l[p]!==a&&$(e,p,a)}else for(var g in i)i.hasOwnProperty(g)&&$(e,g,i[g])}function W(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ve=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nt(e){return Ve.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ut(){}var mt=null;function Rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var on=null,De=null;function Pt(e){var i=vo(e);if(i&&(e=i.stateNode)){var l=e[ht]||null;e:switch(e=i.stateNode,i.type){case"input":if(ds(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Mn(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==e&&a.form===e.form){var p=a[ht]||null;if(!p)throw Error(s(90));ds(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===e.form&&vl(a)}break e;case"textarea":Ki(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&ui(e,!!l.multiple,i,!1)}}}var Kt=!1;function kn(e,i,l){if(Kt)return e(i,l);Kt=!0;try{var a=e(i);return a}finally{if(Kt=!1,(on!==null||De!==null)&&(Xa(),on&&(i=on,e=De,De=on=null,Pt(i),e)))for(i=0;i<e.length;i++)Pt(e[i])}}function B(e,i){var l=e.stateNode;if(l===null)return null;var a=l[ht]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var at=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),At=!1;if(at)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){At=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{At=!1}var Zt=null,sn=null,fi=null;function pi(){if(fi)return fi;var e,i=sn,l=i.length,a,p="value"in Zt?Zt.value:Zt.textContent,g=p.length;for(e=0;e<l&&i[e]===p[e];e++);var S=l-e;for(a=1;a<=S&&i[l-a]===p[g-a];a++);return fi=p.slice(e,1<a?1-a:void 0)}function hi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Pi(){return!0}function xo(){return!1}function hn(e){function i(l,a,p,g,S){this._reactName=l,this._targetInst=p,this.type=a,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(l=e[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Pi:xo,this.isPropagationStopped=xo,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),i}var Ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ei=hn(Ot),X=b({},Ot,{view:0,detail:0}),mi=hn(X),wt,_n,gi,yi=b({},X,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gi&&(gi&&e.type==="mousemove"?(wt=e.screenX-gi.screenX,_n=e.screenY-gi.screenY):_n=wt=0,gi=e),wt)},movementY:function(e){return"movementY"in e?e.movementY:_n}}),Hi=hn(yi),Xi=b({},yi,{dataTransfer:0}),Ae=hn(Xi),tt=b({},X,{relatedTarget:0}),kt=hn(tt),Ye=b({},Ot,{animationName:0,elapsedTime:0,pseudoElement:0}),fn=hn(Ye),qt=b({},Ot,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=hn(qt),vi=b({},Ot,{data:0}),In=hn(vi),bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Ey[e])?!!i[e]:!1}function Wr(){return Cy}var _y=b({},X,{key:function(e){if(e.key){var i=bo[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=hi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(e){return e.type==="keypress"?hi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ny=hn(_y),Ay=b({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vd=hn(Ay),My=b({},X,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),Ry=hn(My),ky=b({},Ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iy=hn(ky),zy=b({},yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=hn(zy),Ly=b({},Ot,{newState:0,oldState:0}),Uy=hn(Ly),Fy=[9,13,27,32],Zr=at&&"CompositionEvent"in window,hs=null;at&&"documentMode"in document&&(hs=document.documentMode);var Py=at&&"TextEvent"in window&&!hs,Od=at&&(!Zr||hs&&8<hs&&11>=hs),qd=" ",$d=!1;function Yd(e,i){switch(e){case"keyup":return Fy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sl=!1;function Hy(e,i){switch(e){case"compositionend":return Jd(i);case"keypress":return i.which!==32?null:($d=!0,qd);case"textInput":return e=i.data,e===qd&&$d?null:e;default:return null}}function Gy(e,i){if(Sl)return e==="compositionend"||!Zr&&Yd(e,i)?(e=pi(),fi=sn=Zt=null,Sl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Od&&i.locale!=="ko"?null:i.data;default:return null}}var By={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!By[e.type]:i==="textarea"}function Xd(e,i,l,a){on?De?De.push(a):De=[a]:on=a,i=ir(i,"onChange"),0<i.length&&(l=new ei("onChange","change",null,l,a),e.push({event:l,listeners:i}))}var ms=null,gs=null;function jy(e){zh(e,0)}function ma(e){var i=Jo(e);if(vl(i))return e}function Qd(e,i){if(e==="change")return i}var Wd=!1;if(at){var ec;if(at){var tc="oninput"in document;if(!tc){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),tc=typeof Zd.oninput=="function"}ec=tc}else ec=!1;Wd=ec&&(!document.documentMode||9<document.documentMode)}function ef(){ms&&(ms.detachEvent("onpropertychange",tf),gs=ms=null)}function tf(e){if(e.propertyName==="value"&&ma(gs)){var i=[];Xd(i,gs,e,Rn(e)),kn(jy,i)}}function Vy(e,i,l){e==="focusin"?(ef(),ms=i,gs=l,ms.attachEvent("onpropertychange",tf)):e==="focusout"&&ef()}function Oy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ma(gs)}function qy(e,i){if(e==="click")return ma(i)}function $y(e,i){if(e==="input"||e==="change")return ma(i)}function Yy(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ti=typeof Object.is=="function"?Object.is:Yy;function ys(e,i){if(ti(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var p=l[a];if(!Xe.call(i,p)||!ti(e[p],i[p]))return!1}return!0}function nf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function of(e,i){var l=nf(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=i&&a>=i)return{node:l,offset:i-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=nf(l)}}function lf(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?lf(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function sf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ji(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Ji(e.document)}return i}function nc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Jy=at&&"documentMode"in document&&11>=document.documentMode,Tl=null,ic=null,vs=null,oc=!1;function af(e,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;oc||Tl==null||Tl!==Ji(a)||(a=Tl,"selectionStart"in a&&nc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),vs&&ys(vs,a)||(vs=a,a=ir(ic,"onSelect"),0<a.length&&(i=new ei("onSelect","select",null,i,l),e.push({event:i,listeners:a}),i.target=Tl)))}function Wo(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var wl={animationend:Wo("Animation","AnimationEnd"),animationiteration:Wo("Animation","AnimationIteration"),animationstart:Wo("Animation","AnimationStart"),transitionrun:Wo("Transition","TransitionRun"),transitionstart:Wo("Transition","TransitionStart"),transitioncancel:Wo("Transition","TransitionCancel"),transitionend:Wo("Transition","TransitionEnd")},lc={},rf={};at&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Zo(e){if(lc[e])return lc[e];if(!wl[e])return e;var i=wl[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in rf)return lc[e]=i[l];return e}var cf=Zo("animationend"),uf=Zo("animationiteration"),df=Zo("animationstart"),Ky=Zo("transitionrun"),Xy=Zo("transitionstart"),Qy=Zo("transitioncancel"),ff=Zo("transitionend"),pf=new Map,sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sc.push("scrollEnd");function ki(e,i){pf.set(e,i),Hn(i,[e])}var ga=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xi=[],El=0,ac=0;function ya(){for(var e=El,i=ac=El=0;i<e;){var l=xi[i];xi[i++]=null;var a=xi[i];xi[i++]=null;var p=xi[i];xi[i++]=null;var g=xi[i];if(xi[i++]=null,a!==null&&p!==null){var S=a.pending;S===null?p.next=p:(p.next=S.next,S.next=p),a.pending=p}g!==0&&hf(l,p,g)}}function va(e,i,l,a){xi[El++]=e,xi[El++]=i,xi[El++]=l,xi[El++]=a,ac|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function rc(e,i,l,a){return va(e,i,l,a),xa(e)}function el(e,i){return va(e,null,null,i),xa(e)}function hf(e,i,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var p=!1,g=e.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(p=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,p&&i!==null&&(p=31-Je(l),e=g.hiddenUpdates,a=e[p],a===null?e[p]=[i]:a.push(i),i.lane=l|536870912),g):null}function xa(e){if(50<Gs)throw Gs=0,yu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Cl={};function Wy(e,i,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(e,i,l,a){return new Wy(e,i,l,a)}function cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qi(e,i){var l=e.alternate;return l===null?(l=ni(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function mf(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function ba(e,i,l,a,p,g){var S=0;if(a=e,typeof e=="function")cc(e)&&(S=1);else if(typeof e=="string")S=ix(e,l,je.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ne:return e=ni(31,l,i,p),e.elementType=Ne,e.lanes=g,e;case q:return tl(l.children,p,g,i);case P:S=8,p|=24;break;case Y:return e=ni(12,l,i,p|2),e.elementType=Y,e.lanes=g,e;case Le:return e=ni(13,l,i,p),e.elementType=Le,e.lanes=g,e;case Be:return e=ni(19,l,i,p),e.elementType=Be,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pe:S=10;break e;case de:S=9;break e;case ve:S=11;break e;case Te:S=14;break e;case We:S=16,a=null;break e}S=29,l=Error(s(130,e===null?"null":typeof e,"")),a=null}return i=ni(S,l,i,p),i.elementType=e,i.type=a,i.lanes=g,i}function tl(e,i,l,a){return e=ni(7,e,a,i),e.lanes=l,e}function uc(e,i,l){return e=ni(6,e,null,i),e.lanes=l,e}function gf(e){var i=ni(18,null,null,0);return i.stateNode=e,i}function dc(e,i,l){return i=ni(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var yf=new WeakMap;function bi(e,i){if(typeof e=="object"&&e!==null){var l=yf.get(e);return l!==void 0?l:(i={value:e,source:i,stack:ke(i)},yf.set(e,i),i)}return{value:e,source:i,stack:ke(i)}}var _l=[],Nl=0,Sa=null,xs=0,Si=[],Ti=0,So=null,Gi=1,Bi="";function Wi(e,i){_l[Nl++]=xs,_l[Nl++]=Sa,Sa=e,xs=i}function vf(e,i,l){Si[Ti++]=Gi,Si[Ti++]=Bi,Si[Ti++]=So,So=e;var a=Gi;e=Bi;var p=32-Je(a)-1;a&=~(1<<p),l+=1;var g=32-Je(i)+p;if(30<g){var S=p-p%5;g=(a&(1<<S)-1).toString(32),a>>=S,p-=S,Gi=1<<32-Je(i)+p|l<<p|a,Bi=g+e}else Gi=1<<g|l<<p|a,Bi=e}function fc(e){e.return!==null&&(Wi(e,1),vf(e,1,0))}function pc(e){for(;e===Sa;)Sa=_l[--Nl],_l[Nl]=null,xs=_l[--Nl],_l[Nl]=null;for(;e===So;)So=Si[--Ti],Si[Ti]=null,Bi=Si[--Ti],Si[Ti]=null,Gi=Si[--Ti],Si[Ti]=null}function xf(e,i){Si[Ti++]=Gi,Si[Ti++]=Bi,Si[Ti++]=So,Gi=i.id,Bi=i.overflow,So=e}var zn=null,rn=null,Ht=!1,To=null,wi=!1,hc=Error(s(519));function wo(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bs(bi(i,e)),hc}function bf(e){var i=e.stateNode,l=e.type,a=e.memoizedProps;switch(i[qe]=e,i[ht]=a,l){case"dialog":zt("cancel",i),zt("close",i);break;case"iframe":case"object":case"embed":zt("load",i);break;case"video":case"audio":for(l=0;l<js.length;l++)zt(js[l],i);break;case"source":zt("error",i);break;case"img":case"image":case"link":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"input":zt("invalid",i),fs(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":zt("invalid",i);break;case"textarea":zt("invalid",i),xl(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||Fh(i.textContent,l)?(a.popover!=null&&(zt("beforetoggle",i),zt("toggle",i)),a.onScroll!=null&&zt("scroll",i),a.onScrollEnd!=null&&zt("scrollend",i),a.onClick!=null&&(i.onclick=ut),i=!0):i=!1,i||wo(e,!0)}function Sf(e){for(zn=e.return;zn;)switch(zn.tag){case 5:case 31:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:zn=zn.return}}function Al(e){if(e!==zn)return!1;if(!Ht)return Sf(e),Ht=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Iu(e.type,e.memoizedProps)),l=!l),l&&rn&&wo(e),Sf(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));rn=$h(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));rn=$h(e)}else i===27?(i=rn,Fo(e.type)?(e=Fu,Fu=null,rn=e):rn=i):rn=zn?Ci(e.stateNode.nextSibling):null;return!0}function nl(){rn=zn=null,Ht=!1}function mc(){var e=To;return e!==null&&(Xn===null?Xn=e:Xn.push.apply(Xn,e),To=null),e}function bs(e){To===null?To=[e]:To.push(e)}var gc=U(null),il=null,Zi=null;function Eo(e,i,l){xe(gc,i._currentValue),i._currentValue=l}function eo(e){e._currentValue=gc.current,le(gc)}function yc(e,i,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===l)break;e=e.return}}function vc(e,i,l,a){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=p;for(var z=0;z<i.length;z++)if(C.context===i[z]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),yc(g.return,l,e),a||(S=null);break e}g=C.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(s(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),yc(S,l,e),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===e){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ml(e,i,l,a){e=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var C=p.type;ti(p.pendingProps.value,S.value)||(e!==null?e.push(C):e=[C])}}else if(p===A.current){if(S=p.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Ys):e=[Ys])}p=p.return}e!==null&&vc(i,e,l,a),i.flags|=262144}function Ta(e){for(e=e.firstContext;e!==null;){if(!ti(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ol(e){il=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Dn(e){return Tf(il,e)}function wa(e,i){return il===null&&ol(e),Tf(e,i)}function Tf(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Zi===null){if(e===null)throw Error(s(308));Zi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Zi=Zi.next=i;return l}var Zy=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},ev=n.unstable_scheduleCallback,tv=n.unstable_NormalPriority,Sn={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xc(){return{controller:new Zy,data:new Map,refCount:0}}function Ss(e){e.refCount--,e.refCount===0&&ev(tv,function(){e.controller.abort()})}var Ts=null,bc=0,Rl=0,kl=null;function nv(e,i){if(Ts===null){var l=Ts=[];bc=0,Rl=wu(),kl={status:"pending",value:void 0,then:function(a){l.push(a)}}}return bc++,i.then(wf,wf),i}function wf(){if(--bc===0&&Ts!==null){kl!==null&&(kl.status="fulfilled");var e=Ts;Ts=null,Rl=0,kl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function iv(e,i){var l=[],a={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return e.then(function(){a.status="fulfilled",a.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(a.status="rejected",a.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),a}var Ef=j.S;j.S=function(e,i){ah=ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&nv(e,i),Ef!==null&&Ef(e,i)};var ll=U(null);function Sc(){var e=ll.current;return e!==null?e:ln.pooledCache}function Ea(e,i){i===null?xe(ll,ll.current):xe(ll,i.pool)}function Cf(){var e=Sc();return e===null?null:{parent:Sn._currentValue,pool:e}}var Il=Error(s(460)),Tc=Error(s(474)),Ca=Error(s(542)),_a={then:function(){}};function _f(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nf(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(ut,ut),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Mf(e),e;default:if(typeof i.status=="string")i.then(ut,ut);else{if(e=ln,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(a){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=a}},function(a){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Mf(e),e}throw al=i,Il}}function sl(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(al=l,Il):l}}var al=null;function Af(){if(al===null)throw Error(s(459));var e=al;return al=null,e}function Mf(e){if(e===Il||e===Ca)throw Error(s(483))}var zl=null,ws=0;function Na(e){var i=ws;return ws+=1,zl===null&&(zl=[]),Nf(zl,e,i)}function Es(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Aa(e,i){throw i.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Rf(e){function i(V,F){if(e){var J=V.deletions;J===null?(V.deletions=[F],V.flags|=16):J.push(F)}}function l(V,F){if(!e)return null;for(;F!==null;)i(V,F),F=F.sibling;return null}function a(V){for(var F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function p(V,F){return V=Qi(V,F),V.index=0,V.sibling=null,V}function g(V,F,J){return V.index=J,e?(J=V.alternate,J!==null?(J=J.index,J<F?(V.flags|=67108866,F):J):(V.flags|=67108866,F)):(V.flags|=1048576,F)}function S(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function C(V,F,J,be){return F===null||F.tag!==6?(F=uc(J,V.mode,be),F.return=V,F):(F=p(F,J),F.return=V,F)}function z(V,F,J,be){var dt=J.type;return dt===q?he(V,F,J.props.children,be,J.key):F!==null&&(F.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===We&&sl(dt)===F.type)?(F=p(F,J.props),Es(F,J),F.return=V,F):(F=ba(J.type,J.key,J.props,null,V.mode,be),Es(F,J),F.return=V,F)}function K(V,F,J,be){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=dc(J,V.mode,be),F.return=V,F):(F=p(F,J.children||[]),F.return=V,F)}function he(V,F,J,be,dt){return F===null||F.tag!==7?(F=tl(J,V.mode,be,dt),F.return=V,F):(F=p(F,J),F.return=V,F)}function we(V,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=uc(""+F,V.mode,J),F.return=V,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return J=ba(F.type,F.key,F.props,null,V.mode,J),Es(J,F),J.return=V,J;case _:return F=dc(F,V.mode,J),F.return=V,F;case We:return F=sl(F),we(V,F,J)}if(Nt(F)||rt(F))return F=tl(F,V.mode,J,null),F.return=V,F;if(typeof F.then=="function")return we(V,Na(F),J);if(F.$$typeof===pe)return we(V,wa(V,F),J);Aa(V,F)}return null}function Q(V,F,J,be){var dt=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return dt!==null?null:C(V,F,""+J,be);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return J.key===dt?z(V,F,J,be):null;case _:return J.key===dt?K(V,F,J,be):null;case We:return J=sl(J),Q(V,F,J,be)}if(Nt(J)||rt(J))return dt!==null?null:he(V,F,J,be,null);if(typeof J.then=="function")return Q(V,F,Na(J),be);if(J.$$typeof===pe)return Q(V,F,wa(V,J),be);Aa(V,J)}return null}function ie(V,F,J,be,dt){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return V=V.get(J)||null,C(F,V,""+be,dt);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case N:return V=V.get(be.key===null?J:be.key)||null,z(F,V,be,dt);case _:return V=V.get(be.key===null?J:be.key)||null,K(F,V,be,dt);case We:return be=sl(be),ie(V,F,J,be,dt)}if(Nt(be)||rt(be))return V=V.get(J)||null,he(F,V,be,dt,null);if(typeof be.then=="function")return ie(V,F,J,Na(be),dt);if(be.$$typeof===pe)return ie(V,F,J,wa(F,be),dt);Aa(F,be)}return null}function et(V,F,J,be){for(var dt=null,Bt=null,ot=F,Mt=F=0,Ft=null;ot!==null&&Mt<J.length;Mt++){ot.index>Mt?(Ft=ot,ot=null):Ft=ot.sibling;var jt=Q(V,ot,J[Mt],be);if(jt===null){ot===null&&(ot=Ft);break}e&&ot&&jt.alternate===null&&i(V,ot),F=g(jt,F,Mt),Bt===null?dt=jt:Bt.sibling=jt,Bt=jt,ot=Ft}if(Mt===J.length)return l(V,ot),Ht&&Wi(V,Mt),dt;if(ot===null){for(;Mt<J.length;Mt++)ot=we(V,J[Mt],be),ot!==null&&(F=g(ot,F,Mt),Bt===null?dt=ot:Bt.sibling=ot,Bt=ot);return Ht&&Wi(V,Mt),dt}for(ot=a(ot);Mt<J.length;Mt++)Ft=ie(ot,V,Mt,J[Mt],be),Ft!==null&&(e&&Ft.alternate!==null&&ot.delete(Ft.key===null?Mt:Ft.key),F=g(Ft,F,Mt),Bt===null?dt=Ft:Bt.sibling=Ft,Bt=Ft);return e&&ot.forEach(function(jo){return i(V,jo)}),Ht&&Wi(V,Mt),dt}function gt(V,F,J,be){if(J==null)throw Error(s(151));for(var dt=null,Bt=null,ot=F,Mt=F=0,Ft=null,jt=J.next();ot!==null&&!jt.done;Mt++,jt=J.next()){ot.index>Mt?(Ft=ot,ot=null):Ft=ot.sibling;var jo=Q(V,ot,jt.value,be);if(jo===null){ot===null&&(ot=Ft);break}e&&ot&&jo.alternate===null&&i(V,ot),F=g(jo,F,Mt),Bt===null?dt=jo:Bt.sibling=jo,Bt=jo,ot=Ft}if(jt.done)return l(V,ot),Ht&&Wi(V,Mt),dt;if(ot===null){for(;!jt.done;Mt++,jt=J.next())jt=we(V,jt.value,be),jt!==null&&(F=g(jt,F,Mt),Bt===null?dt=jt:Bt.sibling=jt,Bt=jt);return Ht&&Wi(V,Mt),dt}for(ot=a(ot);!jt.done;Mt++,jt=J.next())jt=ie(ot,V,Mt,jt.value,be),jt!==null&&(e&&jt.alternate!==null&&ot.delete(jt.key===null?Mt:jt.key),F=g(jt,F,Mt),Bt===null?dt=jt:Bt.sibling=jt,Bt=jt);return e&&ot.forEach(function(hx){return i(V,hx)}),Ht&&Wi(V,Mt),dt}function nn(V,F,J,be){if(typeof J=="object"&&J!==null&&J.type===q&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case N:e:{for(var dt=J.key;F!==null;){if(F.key===dt){if(dt=J.type,dt===q){if(F.tag===7){l(V,F.sibling),be=p(F,J.props.children),be.return=V,V=be;break e}}else if(F.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===We&&sl(dt)===F.type){l(V,F.sibling),be=p(F,J.props),Es(be,J),be.return=V,V=be;break e}l(V,F);break}else i(V,F);F=F.sibling}J.type===q?(be=tl(J.props.children,V.mode,be,J.key),be.return=V,V=be):(be=ba(J.type,J.key,J.props,null,V.mode,be),Es(be,J),be.return=V,V=be)}return S(V);case _:e:{for(dt=J.key;F!==null;){if(F.key===dt)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){l(V,F.sibling),be=p(F,J.children||[]),be.return=V,V=be;break e}else{l(V,F);break}else i(V,F);F=F.sibling}be=dc(J,V.mode,be),be.return=V,V=be}return S(V);case We:return J=sl(J),nn(V,F,J,be)}if(Nt(J))return et(V,F,J,be);if(rt(J)){if(dt=rt(J),typeof dt!="function")throw Error(s(150));return J=dt.call(J),gt(V,F,J,be)}if(typeof J.then=="function")return nn(V,F,Na(J),be);if(J.$$typeof===pe)return nn(V,F,wa(V,J),be);Aa(V,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(l(V,F.sibling),be=p(F,J),be.return=V,V=be):(l(V,F),be=uc(J,V.mode,be),be.return=V,V=be),S(V)):l(V,F)}return function(V,F,J,be){try{ws=0;var dt=nn(V,F,J,be);return zl=null,dt}catch(ot){if(ot===Il||ot===Ca)throw ot;var Bt=ni(29,ot,null,V.mode);return Bt.lanes=be,Bt.return=V,Bt}}}var rl=Rf(!0),kf=Rf(!1),Co=!1;function wc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ec(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _o(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function No(e,i,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,($t&2)!==0){var p=a.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),a.pending=i,i=xa(e),hf(e,null,l),i}return va(e,a,i,l),xa(e)}function Cs(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,yn(e,l)}}function Cc(e,i){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var _c=!1;function _s(){if(_c){var e=kl;if(e!==null)throw e}}function Ns(e,i,l,a){_c=!1;var p=e.updateQueue;Co=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var z=C,K=z.next;z.next=null,S===null?g=K:S.next=K,S=z;var he=e.alternate;he!==null&&(he=he.updateQueue,C=he.lastBaseUpdate,C!==S&&(C===null?he.firstBaseUpdate=K:C.next=K,he.lastBaseUpdate=z))}if(g!==null){var we=p.baseState;S=0,he=K=z=null,C=g;do{var Q=C.lane&-536870913,ie=Q!==C.lane;if(ie?(Ut&Q)===Q:(a&Q)===Q){Q!==0&&Q===Rl&&(_c=!0),he!==null&&(he=he.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var et=e,gt=C;Q=i;var nn=l;switch(gt.tag){case 1:if(et=gt.payload,typeof et=="function"){we=et.call(nn,we,Q);break e}we=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=gt.payload,Q=typeof et=="function"?et.call(nn,we,Q):et,Q==null)break e;we=b({},we,Q);break e;case 2:Co=!0}}Q=C.callback,Q!==null&&(e.flags|=64,ie&&(e.flags|=8192),ie=p.callbacks,ie===null?p.callbacks=[Q]:ie.push(Q))}else ie={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},he===null?(K=he=ie,z=we):he=he.next=ie,S|=Q;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;ie=C,C=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);he===null&&(z=we),p.baseState=z,p.firstBaseUpdate=K,p.lastBaseUpdate=he,g===null&&(p.shared.lanes=0),Io|=S,e.lanes=S,e.memoizedState=we}}function If(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function zf(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)If(l[e],i)}var Dl=U(null),Ma=U(0);function Df(e,i){e=co,xe(Ma,e),xe(Dl,i),co=e|i.baseLanes}function Nc(){xe(Ma,co),xe(Dl,Dl.current)}function Ac(){co=Ma.current,le(Dl),le(Ma)}var ii=U(null),Ei=null;function Ao(e){var i=e.alternate;xe(vn,vn.current&1),xe(ii,e),Ei===null&&(i===null||Dl.current!==null||i.memoizedState!==null)&&(Ei=e)}function Mc(e){xe(vn,vn.current),xe(ii,e),Ei===null&&(Ei=e)}function Lf(e){e.tag===22?(xe(vn,vn.current),xe(ii,e),Ei===null&&(Ei=e)):Mo()}function Mo(){xe(vn,vn.current),xe(ii,ii.current)}function oi(e){le(ii),Ei===e&&(Ei=null),le(vn)}var vn=U(0);function Ra(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lu(l)||Uu(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var to=0,Ct=null,en=null,Tn=null,ka=!1,Ll=!1,cl=!1,Ia=0,As=0,Ul=null,ov=0;function mn(){throw Error(s(321))}function Rc(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ti(e[l],i[l]))return!1;return!0}function kc(e,i,l,a,p,g){return to=g,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=e===null||e.memoizedState===null?vp:$c,cl=!1,g=l(a,p),cl=!1,Ll&&(g=Ff(i,l,a,p)),Uf(e),g}function Uf(e){j.H=ks;var i=en!==null&&en.next!==null;if(to=0,Tn=en=Ct=null,ka=!1,As=0,Ul=null,i)throw Error(s(300));e===null||wn||(e=e.dependencies,e!==null&&Ta(e)&&(wn=!0))}function Ff(e,i,l,a){Ct=e;var p=0;do{if(Ll&&(Ul=null),As=0,Ll=!1,25<=p)throw Error(s(301));if(p+=1,Tn=en=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=xp,g=i(l,a)}while(Ll);return g}function lv(){var e=j.H,i=e.useState()[0];return i=typeof i.then=="function"?Ms(i):i,e=e.useState()[0],(en!==null?en.memoizedState:null)!==e&&(Ct.flags|=1024),i}function Ic(){var e=Ia!==0;return Ia=0,e}function zc(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function Dc(e){if(ka){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ka=!1}to=0,Tn=en=Ct=null,Ll=!1,As=Ia=0,Ul=null}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Ct.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function xn(){if(en===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=en.next;var i=Tn===null?Ct.memoizedState:Tn.next;if(i!==null)Tn=i,en=e;else{if(e===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));en=e,e={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Tn===null?Ct.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function za(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ms(e){var i=As;return As+=1,Ul===null&&(Ul=[]),e=Nf(Ul,e,i),i=Ct,(Tn===null?i.memoizedState:Tn.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?vp:$c),e}function Da(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ms(e);if(e.$$typeof===pe)return Dn(e)}throw Error(s(438,String(e)))}function Lc(e){var i=null,l=Ct.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Ct.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=za(),Ct.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),a=0;a<e;a++)l[a]=Qe;return i.index++,l}function no(e,i){return typeof i=="function"?i(e):i}function La(e){var i=xn();return Uc(i,en,e)}function Uc(e,i,l){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var p=e.baseQueue,g=a.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}i.baseQueue=p=g,a.pending=null}if(g=e.baseState,p===null)e.memoizedState=g;else{i=p.next;var C=S=null,z=null,K=i,he=!1;do{var we=K.lane&-536870913;if(we!==K.lane?(Ut&we)===we:(to&we)===we){var Q=K.revertLane;if(Q===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),we===Rl&&(he=!0);else if((to&Q)===Q){K=K.next,Q===Rl&&(he=!0);continue}else we={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(C=z=we,S=g):z=z.next=we,Ct.lanes|=Q,Io|=Q;we=K.action,cl&&l(g,we),g=K.hasEagerState?K.eagerState:l(g,we)}else Q={lane:we,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(C=z=Q,S=g):z=z.next=Q,Ct.lanes|=we,Io|=we;K=K.next}while(K!==null&&K!==i);if(z===null?S=g:z.next=C,!ti(g,e.memoizedState)&&(wn=!0,he&&(l=kl,l!==null)))throw l;e.memoizedState=g,e.baseState=S,e.baseQueue=z,a.lastRenderedState=g}return p===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Fc(e){var i=xn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var a=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do g=e(g,S.action),S=S.next;while(S!==p);ti(g,i.memoizedState)||(wn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,a]}function Pf(e,i,l){var a=Ct,p=xn(),g=Ht;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=i();var S=!ti((en||p).memoizedState,l);if(S&&(p.memoizedState=l,wn=!0),p=p.queue,Gc(Bf.bind(null,a,p,e),[e]),p.getSnapshot!==i||S||Tn!==null&&Tn.memoizedState.tag&1){if(a.flags|=2048,Fl(9,{destroy:void 0},Gf.bind(null,a,p,l,i),null),ln===null)throw Error(s(349));g||(to&127)!==0||Hf(a,i,l)}return l}function Hf(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Ct.updateQueue,i===null?(i=za(),Ct.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function Gf(e,i,l,a){i.value=l,i.getSnapshot=a,jf(i)&&Vf(e)}function Bf(e,i,l){return l(function(){jf(i)&&Vf(e)})}function jf(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ti(e,l)}catch{return!0}}function Vf(e){var i=el(e,2);i!==null&&Qn(i,e,2)}function Pc(e){var i=Vn();if(typeof e=="function"){var l=e;if(e=l(),cl){G(!0);try{l()}finally{G(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:e},i}function Of(e,i,l,a){return e.baseState=l,Uc(e,en,typeof a=="function"?a:no)}function sv(e,i,l,a,p){if(Pa(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};j.T!==null?l(!0):g.isTransition=!1,a(g),l=i.pending,l===null?(g.next=i.pending=g,qf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function qf(e,i){var l=i.action,a=i.payload,p=e.state;if(i.isTransition){var g=j.T,S={};j.T=S;try{var C=l(p,a),z=j.S;z!==null&&z(S,C),$f(e,i,C)}catch(K){Hc(e,i,K)}finally{g!==null&&S.types!==null&&(g.types=S.types),j.T=g}}else try{g=l(p,a),$f(e,i,g)}catch(K){Hc(e,i,K)}}function $f(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Yf(e,i,a)},function(a){return Hc(e,i,a)}):Yf(e,i,l)}function Yf(e,i,l){i.status="fulfilled",i.value=l,Jf(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,qf(e,l)))}function Hc(e,i,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,Jf(i),i=i.next;while(i!==a)}e.action=null}function Jf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Kf(e,i){return i}function Xf(e,i){if(Ht){var l=ln.formState;if(l!==null){e:{var a=Ct;if(Ht){if(rn){t:{for(var p=rn,g=wi;p.nodeType!==8;){if(!g){p=null;break t}if(p=Ci(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){rn=Ci(p.nextSibling),a=p.data==="F!";break e}}wo(a)}a=!1}a&&(i=l[0])}}return l=Vn(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:i},l.queue=a,l=mp.bind(null,Ct,a),a.dispatch=l,a=Pc(!1),g=qc.bind(null,Ct,!1,a.queue),a=Vn(),p={state:i,dispatch:null,action:e,pending:null},a.queue=p,l=sv.bind(null,Ct,p,g,l),p.dispatch=l,a.memoizedState=e,[i,l,!1]}function Qf(e){var i=xn();return Wf(i,en,e)}function Wf(e,i,l){if(i=Uc(e,i,Kf)[0],e=La(no)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=Ms(i)}catch(S){throw S===Il?Ca:S}else a=i;i=xn();var p=i.queue,g=p.dispatch;return l!==i.memoizedState&&(Ct.flags|=2048,Fl(9,{destroy:void 0},av.bind(null,p,l),null)),[a,g,e]}function av(e,i){e.action=i}function Zf(e){var i=xn(),l=en;if(l!==null)return Wf(i,l,e);xn(),i=i.memoizedState,l=xn();var a=l.queue.dispatch;return l.memoizedState=e,[i,a,!1]}function Fl(e,i,l,a){return e={tag:e,create:l,deps:a,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=za(),Ct.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,i.lastEffect=e),e}function ep(){return xn().memoizedState}function Ua(e,i,l,a){var p=Vn();Ct.flags|=e,p.memoizedState=Fl(1|i,{destroy:void 0},l,a===void 0?null:a)}function Fa(e,i,l,a){var p=xn();a=a===void 0?null:a;var g=p.memoizedState.inst;en!==null&&a!==null&&Rc(a,en.memoizedState.deps)?p.memoizedState=Fl(i,g,l,a):(Ct.flags|=e,p.memoizedState=Fl(1|i,g,l,a))}function tp(e,i){Ua(8390656,8,e,i)}function Gc(e,i){Fa(2048,8,e,i)}function rv(e){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=za(),Ct.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function np(e){var i=xn().memoizedState;return rv({ref:i,nextImpl:e}),function(){if(($t&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ip(e,i){return Fa(4,2,e,i)}function op(e,i){return Fa(4,4,e,i)}function lp(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function sp(e,i,l){l=l!=null?l.concat([e]):null,Fa(4,4,lp.bind(null,i,e),l)}function Bc(){}function ap(e,i){var l=xn();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&Rc(i,a[1])?a[0]:(l.memoizedState=[e,i],e)}function rp(e,i){var l=xn();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&Rc(i,a[1]))return a[0];if(a=e(),cl){G(!0);try{e()}finally{G(!1)}}return l.memoizedState=[a,i],a}function jc(e,i,l){return l===void 0||(to&1073741824)!==0&&(Ut&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=ch(),Ct.lanes|=e,Io|=e,l)}function cp(e,i,l,a){return ti(l,i)?l:Dl.current!==null?(e=jc(e,l,a),ti(e,i)||(wn=!0),e):(to&42)===0||(to&1073741824)!==0&&(Ut&261930)===0?(wn=!0,e.memoizedState=l):(e=ch(),Ct.lanes|=e,Io|=e,i)}function up(e,i,l,a,p){var g=Ce.p;Ce.p=g!==0&&8>g?g:8;var S=j.T,C={};j.T=C,qc(e,!1,i,l);try{var z=p(),K=j.S;if(K!==null&&K(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var he=iv(z,a);Rs(e,i,he,ai(e))}else Rs(e,i,a,ai(e))}catch(we){Rs(e,i,{then:function(){},status:"rejected",reason:we},ai())}finally{Ce.p=g,S!==null&&C.types!==null&&(S.types=C.types),j.T=S}}function cv(){}function Vc(e,i,l,a){if(e.tag!==5)throw Error(s(476));var p=dp(e).queue;up(e,p,i,oe,l===null?cv:function(){return fp(e),l(a)})}function dp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:oe},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function fp(e){var i=dp(e);i.next===null&&(i=e.alternate.memoizedState),Rs(e,i.next.queue,{},ai())}function Oc(){return Dn(Ys)}function pp(){return xn().memoizedState}function hp(){return xn().memoizedState}function uv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=ai();e=_o(l);var a=No(i,e,l);a!==null&&(Qn(a,i,l),Cs(a,i,l)),i={cache:xc()},e.payload=i;return}i=i.return}}function dv(e,i,l){var a=ai();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pa(e)?gp(i,l):(l=rc(e,i,l,a),l!==null&&(Qn(l,e,a),yp(l,i,a)))}function mp(e,i,l){var a=ai();Rs(e,i,l,a)}function Rs(e,i,l,a){var p={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Pa(e))gp(i,p);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,C=g(S,l);if(p.hasEagerState=!0,p.eagerState=C,ti(C,S))return va(e,i,p,0),ln===null&&ya(),!1}catch{}if(l=rc(e,i,p,a),l!==null)return Qn(l,e,a),yp(l,i,a),!0}return!1}function qc(e,i,l,a){if(a={lane:2,revertLane:wu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Pa(e)){if(i)throw Error(s(479))}else i=rc(e,l,a,2),i!==null&&Qn(i,e,2)}function Pa(e){var i=e.alternate;return e===Ct||i!==null&&i===Ct}function gp(e,i){Ll=ka=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function yp(e,i,l){if((l&4194048)!==0){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,yn(e,l)}}var ks={readContext:Dn,use:Da,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};ks.useEffectEvent=mn;var vp={readContext:Dn,use:Da,useCallback:function(e,i){return Vn().memoizedState=[e,i===void 0?null:i],e},useContext:Dn,useEffect:tp,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,Ua(4194308,4,lp.bind(null,i,e),l)},useLayoutEffect:function(e,i){return Ua(4194308,4,e,i)},useInsertionEffect:function(e,i){Ua(4,2,e,i)},useMemo:function(e,i){var l=Vn();i=i===void 0?null:i;var a=e();if(cl){G(!0);try{e()}finally{G(!1)}}return l.memoizedState=[a,i],a},useReducer:function(e,i,l){var a=Vn();if(l!==void 0){var p=l(i);if(cl){G(!0);try{l(i)}finally{G(!1)}}}else p=i;return a.memoizedState=a.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},a.queue=e,e=e.dispatch=dv.bind(null,Ct,e),[a.memoizedState,e]},useRef:function(e){var i=Vn();return e={current:e},i.memoizedState=e},useState:function(e){e=Pc(e);var i=e.queue,l=mp.bind(null,Ct,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:Bc,useDeferredValue:function(e,i){var l=Vn();return jc(l,e,i)},useTransition:function(){var e=Pc(!1);return e=up.bind(null,Ct,e.queue,!0,!1),Vn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var a=Ct,p=Vn();if(Ht){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),ln===null)throw Error(s(349));(Ut&127)!==0||Hf(a,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,tp(Bf.bind(null,a,g,e),[e]),a.flags|=2048,Fl(9,{destroy:void 0},Gf.bind(null,a,g,l,i),null),l},useId:function(){var e=Vn(),i=ln.identifierPrefix;if(Ht){var l=Bi,a=Gi;l=(a&~(1<<32-Je(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Ia++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=ov++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Oc,useFormState:Xf,useActionState:Xf,useOptimistic:function(e){var i=Vn();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=qc.bind(null,Ct,!0,l),l.dispatch=i,[e,i]},useMemoCache:Lc,useCacheRefresh:function(){return Vn().memoizedState=uv.bind(null,Ct)},useEffectEvent:function(e){var i=Vn(),l={impl:e};return i.memoizedState=l,function(){if(($t&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},$c={readContext:Dn,use:Da,useCallback:ap,useContext:Dn,useEffect:Gc,useImperativeHandle:sp,useInsertionEffect:ip,useLayoutEffect:op,useMemo:rp,useReducer:La,useRef:ep,useState:function(){return La(no)},useDebugValue:Bc,useDeferredValue:function(e,i){var l=xn();return cp(l,en.memoizedState,e,i)},useTransition:function(){var e=La(no)[0],i=xn().memoizedState;return[typeof e=="boolean"?e:Ms(e),i]},useSyncExternalStore:Pf,useId:pp,useHostTransitionStatus:Oc,useFormState:Qf,useActionState:Qf,useOptimistic:function(e,i){var l=xn();return Of(l,en,e,i)},useMemoCache:Lc,useCacheRefresh:hp};$c.useEffectEvent=np;var xp={readContext:Dn,use:Da,useCallback:ap,useContext:Dn,useEffect:Gc,useImperativeHandle:sp,useInsertionEffect:ip,useLayoutEffect:op,useMemo:rp,useReducer:Fc,useRef:ep,useState:function(){return Fc(no)},useDebugValue:Bc,useDeferredValue:function(e,i){var l=xn();return en===null?jc(l,e,i):cp(l,en.memoizedState,e,i)},useTransition:function(){var e=Fc(no)[0],i=xn().memoizedState;return[typeof e=="boolean"?e:Ms(e),i]},useSyncExternalStore:Pf,useId:pp,useHostTransitionStatus:Oc,useFormState:Zf,useActionState:Zf,useOptimistic:function(e,i){var l=xn();return en!==null?Of(l,en,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:hp};xp.useEffectEvent=np;function Yc(e,i,l,a){i=e.memoizedState,l=l(a,i),l=l==null?i:b({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Jc={enqueueSetState:function(e,i,l){e=e._reactInternals;var a=ai(),p=_o(a);p.payload=i,l!=null&&(p.callback=l),i=No(e,p,a),i!==null&&(Qn(i,e,a),Cs(i,e,a))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var a=ai(),p=_o(a);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=No(e,p,a),i!==null&&(Qn(i,e,a),Cs(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=ai(),a=_o(l);a.tag=2,i!=null&&(a.callback=i),i=No(e,a,l),i!==null&&(Qn(i,e,l),Cs(i,e,l))}};function bp(e,i,l,a,p,g,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,S):i.prototype&&i.prototype.isPureReactComponent?!ys(l,a)||!ys(p,g):!0}function Sp(e,i,l,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==e&&Jc.enqueueReplaceState(i,i.state,null)}function ul(e,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(e=e.defaultProps){l===i&&(l=b({},l));for(var p in e)l[p]===void 0&&(l[p]=e[p])}return l}function Tp(e){ga(e)}function wp(e){console.error(e)}function Ep(e){ga(e)}function Ha(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function Cp(e,i,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Kc(e,i,l){return l=_o(l),l.tag=3,l.payload={element:null},l.callback=function(){Ha(e,i)},l}function _p(e){return e=_o(e),e.tag=3,e}function Np(e,i,l,a){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;e.payload=function(){return p(g)},e.callback=function(){Cp(i,l,a)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){Cp(i,l,a),typeof p!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function fv(e,i,l,a,p){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&Ml(i,l,p,!0),l=ii.current,l!==null){switch(l.tag){case 31:case 13:return Ei===null?Qa():l.alternate===null&&gn===0&&(gn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,a===_a?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),bu(e,a,p)),!1;case 22:return l.flags|=65536,a===_a?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),bu(e,a,p)),!1}throw Error(s(435,l.tag))}return bu(e,a,p),Qa(),!1}if(Ht)return i=ii.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,a!==hc&&(e=Error(s(422),{cause:a}),bs(bi(e,l)))):(a!==hc&&(i=Error(s(423),{cause:a}),bs(bi(i,l))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,a=bi(a,l),p=Kc(e.stateNode,a,p),Cc(e,p),gn!==4&&(gn=2)),!1;var g=Error(s(520),{cause:a});if(g=bi(g,l),Hs===null?Hs=[g]:Hs.push(g),gn!==4&&(gn=2),i===null)return!0;a=bi(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=p&-p,l.lanes|=e,e=Kc(l.stateNode,a,e),Cc(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(zo===null||!zo.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=_p(p),Np(p,e,l,a),Cc(l,p),!1}l=l.return}while(l!==null);return!1}var Xc=Error(s(461)),wn=!1;function Ln(e,i,l,a){i.child=e===null?kf(i,null,l,a):rl(i,e.child,l,a)}function Ap(e,i,l,a,p){l=l.render;var g=i.ref;if("ref"in a){var S={};for(var C in a)C!=="ref"&&(S[C]=a[C])}else S=a;return ol(i),a=kc(e,i,l,S,g,p),C=Ic(),e!==null&&!wn?(zc(e,i,p),io(e,i,p)):(Ht&&C&&fc(i),i.flags|=1,Ln(e,i,a,p),i.child)}function Mp(e,i,l,a,p){if(e===null){var g=l.type;return typeof g=="function"&&!cc(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,Rp(e,i,g,a,p)):(e=ba(l.type,null,a,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!ou(e,p)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:ys,l(S,a)&&e.ref===i.ref)return io(e,i,p)}return i.flags|=1,e=Qi(g,a),e.ref=i.ref,e.return=i,i.child=e}function Rp(e,i,l,a,p){if(e!==null){var g=e.memoizedProps;if(ys(g,a)&&e.ref===i.ref)if(wn=!1,i.pendingProps=a=g,ou(e,p))(e.flags&131072)!==0&&(wn=!0);else return i.lanes=e.lanes,io(e,i,p)}return Qc(e,i,l,a,p)}function kp(e,i,l,a){var p=a.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(a=i.child=e.child,p=0;a!==null;)p=p|a.lanes|a.childLanes,a=a.sibling;a=p&~g}else a=0,i.child=null;return Ip(e,i,g,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ea(i,g!==null?g.cachePool:null),g!==null?Df(i,g):Nc(),Lf(i);else return a=i.lanes=536870912,Ip(e,i,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(Ea(i,g.cachePool),Df(i,g),Mo(),i.memoizedState=null):(e!==null&&Ea(i,null),Nc(),Mo());return Ln(e,i,p,l),i.child}function Is(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ip(e,i,l,a,p){var g=Sc();return g=g===null?null:{parent:Sn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&Ea(i,null),Nc(),Lf(i),e!==null&&Ml(e,i,a,!0),i.childLanes=p,null}function Ga(e,i){return i=ja({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function zp(e,i,l){return rl(i,e.child,null,l),e=Ga(i,i.pendingProps),e.flags|=2,oi(i),i.memoizedState=null,e}function pv(e,i,l){var a=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ht){if(a.mode==="hidden")return e=Ga(i,a),i.lanes=536870912,Is(null,e);if(Mc(i),(e=rn)?(e=qh(e,wi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:So!==null?{id:Gi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=gf(e),l.return=i,i.child=l,zn=i,rn=null)):e=null,e===null)throw wo(i);return i.lanes=536870912,null}return Ga(i,a)}var g=e.memoizedState;if(g!==null){var S=g.dehydrated;if(Mc(i),p)if(i.flags&256)i.flags&=-257,i=zp(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(wn||Ml(e,i,l,!1),p=(l&e.childLanes)!==0,wn||p){if(a=ln,a!==null&&(S=$n(a,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,el(e,S),Qn(a,e,S),Xc;Qa(),i=zp(e,i,l)}else e=g.treeContext,rn=Ci(S.nextSibling),zn=i,Ht=!0,To=null,wi=!1,e!==null&&xf(i,e),i=Ga(i,a),i.flags|=4096;return i}return e=Qi(e.child,{mode:a.mode,children:a.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Ba(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function Qc(e,i,l,a,p){return ol(i),l=kc(e,i,l,a,void 0,p),a=Ic(),e!==null&&!wn?(zc(e,i,p),io(e,i,p)):(Ht&&a&&fc(i),i.flags|=1,Ln(e,i,l,p),i.child)}function Dp(e,i,l,a,p,g){return ol(i),i.updateQueue=null,l=Ff(i,a,l,p),Uf(e),a=Ic(),e!==null&&!wn?(zc(e,i,g),io(e,i,g)):(Ht&&a&&fc(i),i.flags|=1,Ln(e,i,l,g),i.child)}function Lp(e,i,l,a,p){if(ol(i),i.stateNode===null){var g=Cl,S=l.contextType;typeof S=="object"&&S!==null&&(g=Dn(S)),g=new l(a,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Jc,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=a,g.state=i.memoizedState,g.refs={},wc(i),S=l.contextType,g.context=typeof S=="object"&&S!==null?Dn(S):Cl,g.state=i.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Yc(i,l,S,a),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Jc.enqueueReplaceState(g,g.state,null),Ns(i,a,g,p),_s(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(e===null){g=i.stateNode;var C=i.memoizedProps,z=ul(l,C);g.props=z;var K=g.context,he=l.contextType;S=Cl,typeof he=="object"&&he!==null&&(S=Dn(he));var we=l.getDerivedStateFromProps;he=typeof we=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,he||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||K!==S)&&Sp(i,g,a,S),Co=!1;var Q=i.memoizedState;g.state=Q,Ns(i,a,g,p),_s(),K=i.memoizedState,C||Q!==K||Co?(typeof we=="function"&&(Yc(i,l,we,a),K=i.memoizedState),(z=Co||bp(i,l,z,a,Q,K,S))?(he||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=K),g.props=a,g.state=K,g.context=S,a=z):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{g=i.stateNode,Ec(e,i),S=i.memoizedProps,he=ul(l,S),g.props=he,we=i.pendingProps,Q=g.context,K=l.contextType,z=Cl,typeof K=="object"&&K!==null&&(z=Dn(K)),C=l.getDerivedStateFromProps,(K=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==we||Q!==z)&&Sp(i,g,a,z),Co=!1,Q=i.memoizedState,g.state=Q,Ns(i,a,g,p),_s();var ie=i.memoizedState;S!==we||Q!==ie||Co||e!==null&&e.dependencies!==null&&Ta(e.dependencies)?(typeof C=="function"&&(Yc(i,l,C,a),ie=i.memoizedState),(he=Co||bp(i,l,he,a,Q,ie,z)||e!==null&&e.dependencies!==null&&Ta(e.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ie,z),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ie,z)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=ie),g.props=a,g.state=ie,g.context=z,a=he):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(i.flags|=1024),a=!1)}return g=a,Ba(e,i),a=(i.flags&128)!==0,g||a?(g=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&a?(i.child=rl(i,e.child,null,p),i.child=rl(i,null,l,p)):Ln(e,i,l,p),i.memoizedState=g.state,e=i.child):e=io(e,i,p),e}function Up(e,i,l,a){return nl(),i.flags|=256,Ln(e,i,l,a),i.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zc(e){return{baseLanes:e,cachePool:Cf()}}function eu(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=si),e}function Fp(e,i,l){var a=i.pendingProps,p=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=e!==null&&e.memoizedState===null?!1:(vn.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ht){if(p?Ao(i):Mo(),(e=rn)?(e=qh(e,wi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:So!==null?{id:Gi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=gf(e),l.return=i,i.child=l,zn=i,rn=null)):e=null,e===null)throw wo(i);return Uu(e)?i.lanes=32:i.lanes=536870912,null}var C=a.children;return a=a.fallback,p?(Mo(),p=i.mode,C=ja({mode:"hidden",children:C},p),a=tl(a,p,l,null),C.return=i,a.return=i,C.sibling=a,i.child=C,a=i.child,a.memoizedState=Zc(l),a.childLanes=eu(e,S,l),i.memoizedState=Wc,Is(null,a)):(Ao(i),tu(i,C))}var z=e.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(g)i.flags&256?(Ao(i),i.flags&=-257,i=nu(e,i,l)):i.memoizedState!==null?(Mo(),i.child=e.child,i.flags|=128,i=null):(Mo(),C=a.fallback,p=i.mode,a=ja({mode:"visible",children:a.children},p),C=tl(C,p,l,null),C.flags|=2,a.return=i,C.return=i,a.sibling=C,i.child=a,rl(i,e.child,null,l),a=i.child,a.memoizedState=Zc(l),a.childLanes=eu(e,S,l),i.memoizedState=Wc,i=Is(null,a));else if(Ao(i),Uu(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var K=S.dgst;S=K,a=Error(s(419)),a.stack="",a.digest=S,bs({value:a,source:null,stack:null}),i=nu(e,i,l)}else if(wn||Ml(e,i,l,!1),S=(l&e.childLanes)!==0,wn||S){if(S=ln,S!==null&&(a=$n(S,l),a!==0&&a!==z.retryLane))throw z.retryLane=a,el(e,a),Qn(S,e,a),Xc;Lu(C)||Qa(),i=nu(e,i,l)}else Lu(C)?(i.flags|=192,i.child=e.child,i=null):(e=z.treeContext,rn=Ci(C.nextSibling),zn=i,Ht=!0,To=null,wi=!1,e!==null&&xf(i,e),i=tu(i,a.children),i.flags|=4096);return i}return p?(Mo(),C=a.fallback,p=i.mode,z=e.child,K=z.sibling,a=Qi(z,{mode:"hidden",children:a.children}),a.subtreeFlags=z.subtreeFlags&65011712,K!==null?C=Qi(K,C):(C=tl(C,p,l,null),C.flags|=2),C.return=i,a.return=i,a.sibling=C,i.child=a,Is(null,a),a=i.child,C=e.child.memoizedState,C===null?C=Zc(l):(p=C.cachePool,p!==null?(z=Sn._currentValue,p=p.parent!==z?{parent:z,pool:z}:p):p=Cf(),C={baseLanes:C.baseLanes|l,cachePool:p}),a.memoizedState=C,a.childLanes=eu(e,S,l),i.memoizedState=Wc,Is(e.child,a)):(Ao(i),l=e.child,e=l.sibling,l=Qi(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,e!==null&&(S=i.deletions,S===null?(i.deletions=[e],i.flags|=16):S.push(e)),i.child=l,i.memoizedState=null,l)}function tu(e,i){return i=ja({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function ja(e,i){return e=ni(22,e,null,i),e.lanes=0,e}function nu(e,i,l){return rl(i,e.child,null,l),e=tu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Pp(e,i,l){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),yc(e.return,i,l)}function iu(e,i,l,a,p,g){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:p,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=a,S.tail=l,S.tailMode=p,S.treeForkCount=g)}function Hp(e,i,l){var a=i.pendingProps,p=a.revealOrder,g=a.tail;a=a.children;var S=vn.current,C=(S&2)!==0;if(C?(S=S&1|2,i.flags|=128):S&=1,xe(vn,S),Ln(e,i,a,l),a=Ht?xs:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pp(e,l,i);else if(e.tag===19)Pp(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(l=i.child,p=null;l!==null;)e=l.alternate,e!==null&&Ra(e)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),iu(i,!1,p,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Ra(e)===null){i.child=p;break}e=p.sibling,p.sibling=l,l=p,p=e}iu(i,!0,l,null,g,a);break;case"together":iu(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function io(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),Io|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(Ml(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,l=Qi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Qi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function ou(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Ta(e)))}function hv(e,i,l){switch(i.tag){case 3:te(i,i.stateNode.containerInfo),Eo(i,Sn,e.memoizedState.cache),nl();break;case 27:case 5:Ge(i);break;case 4:te(i,i.stateNode.containerInfo);break;case 10:Eo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Mc(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(Ao(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Fp(e,i,l):(Ao(i),e=io(e,i,l),e!==null?e.sibling:null);Ao(i);break;case 19:var p=(e.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(Ml(e,i,l,!1),a=(l&i.childLanes)!==0),p){if(a)return Hp(e,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),xe(vn,vn.current),a)break;return null;case 22:return i.lanes=0,kp(e,i,l,i.pendingProps);case 24:Eo(i,Sn,e.memoizedState.cache)}return io(e,i,l)}function Gp(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)wn=!0;else{if(!ou(e,l)&&(i.flags&128)===0)return wn=!1,hv(e,i,l);wn=(e.flags&131072)!==0}else wn=!1,Ht&&(i.flags&1048576)!==0&&vf(i,xs,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(e=sl(i.elementType),i.type=e,typeof e=="function")cc(e)?(a=ul(e,a),i.tag=1,i=Lp(null,i,e,a,l)):(i.tag=0,i=Qc(null,i,e,a,l));else{if(e!=null){var p=e.$$typeof;if(p===ve){i.tag=11,i=Ap(null,i,e,a,l);break e}else if(p===Te){i.tag=14,i=Mp(null,i,e,a,l);break e}}throw i=_t(e)||e,Error(s(306,i,""))}}return i;case 0:return Qc(e,i,i.type,i.pendingProps,l);case 1:return a=i.type,p=ul(a,i.pendingProps),Lp(e,i,a,p,l);case 3:e:{if(te(i,i.stateNode.containerInfo),e===null)throw Error(s(387));a=i.pendingProps;var g=i.memoizedState;p=g.element,Ec(e,i),Ns(i,a,null,l);var S=i.memoizedState;if(a=S.cache,Eo(i,Sn,a),a!==g.cache&&vc(i,[Sn],l,!0),_s(),a=S.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Up(e,i,a,l);break e}else if(a!==p){p=bi(Error(s(424)),i),bs(p),i=Up(e,i,a,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,rn=Ci(e.firstChild),zn=i,Ht=!0,To=null,wi=!0,l=kf(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(nl(),a===p){i=io(e,i,l);break e}Ln(e,i,a,l)}i=i.child}return i;case 26:return Ba(e,i),e===null?(l=Qh(i.type,null,i.pendingProps,null))?i.memoizedState=l:Ht||(l=i.type,e=i.pendingProps,a=or(w.current).createElement(l),a[qe]=i,a[ht]=e,Un(a,l,e),dn(a),i.stateNode=a):i.memoizedState=Qh(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Ge(i),e===null&&Ht&&(a=i.stateNode=Jh(i.type,i.pendingProps,w.current),zn=i,wi=!0,p=rn,Fo(i.type)?(Fu=p,rn=Ci(a.firstChild)):rn=p),Ln(e,i,i.pendingProps.children,l),Ba(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ht&&((p=a=rn)&&(a=Ov(a,i.type,i.pendingProps,wi),a!==null?(i.stateNode=a,zn=i,rn=Ci(a.firstChild),wi=!1,p=!0):p=!1),p||wo(i)),Ge(i),p=i.type,g=i.pendingProps,S=e!==null?e.memoizedProps:null,a=g.children,Iu(p,g)?a=null:S!==null&&Iu(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=kc(e,i,lv,null,null,l),Ys._currentValue=p),Ba(e,i),Ln(e,i,a,l),i.child;case 6:return e===null&&Ht&&((e=l=rn)&&(l=qv(l,i.pendingProps,wi),l!==null?(i.stateNode=l,zn=i,rn=null,e=!0):e=!1),e||wo(i)),null;case 13:return Fp(e,i,l);case 4:return te(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=rl(i,null,a,l):Ln(e,i,a,l),i.child;case 11:return Ap(e,i,i.type,i.pendingProps,l);case 7:return Ln(e,i,i.pendingProps,l),i.child;case 8:return Ln(e,i,i.pendingProps.children,l),i.child;case 12:return Ln(e,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,Eo(i,i.type,a.value),Ln(e,i,a.children,l),i.child;case 9:return p=i.type._context,a=i.pendingProps.children,ol(i),p=Dn(p),a=a(p),i.flags|=1,Ln(e,i,a,l),i.child;case 14:return Mp(e,i,i.type,i.pendingProps,l);case 15:return Rp(e,i,i.type,i.pendingProps,l);case 19:return Hp(e,i,l);case 31:return pv(e,i,l);case 22:return kp(e,i,l,i.pendingProps);case 24:return ol(i),a=Dn(Sn),e===null?(p=Sc(),p===null&&(p=ln,g=xc(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),i.memoizedState={parent:a,cache:p},wc(i),Eo(i,Sn,p)):((e.lanes&l)!==0&&(Ec(e,i),Ns(i,null,null,l),_s()),p=e.memoizedState,g=i.memoizedState,p.parent!==a?(p={parent:a,cache:a},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Eo(i,Sn,a)):(a=g.cache,Eo(i,Sn,a),a!==p.cache&&vc(i,[Sn],l,!0))),Ln(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function oo(e){e.flags|=4}function lu(e,i,l,a,p){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(ph())e.flags|=8192;else throw al=_a,Tc}else e.flags&=-16777217}function Bp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!n0(i))if(ph())e.flags|=8192;else throw al=_a,Tc}function Va(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Pe():536870912,e.lanes|=i,Bl|=i)}function zs(e,i){if(!Ht)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function cn(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(i)for(var p=e.child;p!==null;)l|=p.lanes|p.childLanes,a|=p.subtreeFlags&65011712,a|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)l|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=l,i}function mv(e,i,l){var a=i.pendingProps;switch(pc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(i),null;case 1:return cn(i),null;case 3:return l=i.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),eo(Sn),ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Al(i)?oo(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,mc())),cn(i),null;case 26:var p=i.type,g=i.memoizedState;return e===null?(oo(i),g!==null?(cn(i),Bp(i,g)):(cn(i),lu(i,p,null,a,l))):g?g!==e.memoizedState?(oo(i),cn(i),Bp(i,g)):(cn(i),i.flags&=-16777217):(e=e.memoizedProps,e!==a&&oo(i),cn(i),lu(i,p,e,a,l)),null;case 27:if(_e(i),l=w.current,p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&oo(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return cn(i),null}e=je.current,Al(i)?bf(i):(e=Jh(p,a,l),i.stateNode=e,oo(i))}return cn(i),null;case 5:if(_e(i),p=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&oo(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return cn(i),null}if(g=je.current,Al(i))bf(i);else{var S=or(w.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?S.createElement("select",{is:a.is}):S.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?S.createElement(p,{is:a.is}):S.createElement(p)}}g[qe]=i,g[ht]=a;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;e:switch(Un(g,p,a),p){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&oo(i)}}return cn(i),lu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==a&&oo(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(e=w.current,Al(i)){if(e=i.stateNode,l=i.memoizedProps,a=null,p=zn,p!==null)switch(p.tag){case 27:case 5:a=p.memoizedProps}e[qe]=i,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||Fh(e.nodeValue,l)),e||wo(i,!0)}else e=or(e).createTextNode(a),e[qe]=i,i.stateNode=e}return cn(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(a=Al(i),l!==null){if(e===null){if(!a)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[qe]=i}else nl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;cn(i),e=!1}else l=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(oi(i),i):(oi(i),null);if((i.flags&128)!==0)throw Error(s(558))}return cn(i),null;case 13:if(a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Al(i),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[qe]=i}else nl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;cn(i),p=!1}else p=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(oi(i),i):(oi(i),null)}return oi(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=i.child,p=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(p=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==p&&(a.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),Va(i,i.updateQueue),cn(i),null);case 4:return ce(),e===null&&Nu(i.stateNode.containerInfo),cn(i),null;case 10:return eo(i.type),cn(i),null;case 19:if(le(vn),a=i.memoizedState,a===null)return cn(i),null;if(p=(i.flags&128)!==0,g=a.rendering,g===null)if(p)zs(a,!1);else{if(gn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=Ra(e),g!==null){for(i.flags|=128,zs(a,!1),e=g.updateQueue,i.updateQueue=e,Va(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)mf(l,e),l=l.sibling;return xe(vn,vn.current&1|2),Ht&&Wi(i,a.treeForkCount),i.child}e=e.sibling}a.tail!==null&&ye()>Ja&&(i.flags|=128,p=!0,zs(a,!1),i.lanes=4194304)}else{if(!p)if(e=Ra(g),e!==null){if(i.flags|=128,p=!0,e=e.updateQueue,i.updateQueue=e,Va(i,e),zs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!Ht)return cn(i),null}else 2*ye()-a.renderingStartTime>Ja&&l!==536870912&&(i.flags|=128,p=!0,zs(a,!1),i.lanes=4194304);a.isBackwards?(g.sibling=i.child,i.child=g):(e=a.last,e!==null?e.sibling=g:i.child=g,a.last=g)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ye(),e.sibling=null,l=vn.current,xe(vn,p?l&1|2:l&1),Ht&&Wi(i,a.treeForkCount),e):(cn(i),null);case 22:case 23:return oi(i),Ac(),a=i.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(cn(i),i.subtreeFlags&6&&(i.flags|=8192)):cn(i),l=i.updateQueue,l!==null&&Va(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),e!==null&&le(ll),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),eo(Sn),cn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function gv(e,i){switch(pc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return eo(Sn),ce(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return _e(i),null;case 31:if(i.memoizedState!==null){if(oi(i),i.alternate===null)throw Error(s(340));nl()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(oi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));nl()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return le(vn),null;case 4:return ce(),null;case 10:return eo(i.type),null;case 22:case 23:return oi(i),Ac(),e!==null&&le(ll),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return eo(Sn),null;case 25:return null;default:return null}}function jp(e,i){switch(pc(i),i.tag){case 3:eo(Sn),ce();break;case 26:case 27:case 5:_e(i);break;case 4:ce();break;case 31:i.memoizedState!==null&&oi(i);break;case 13:oi(i);break;case 19:le(vn);break;case 10:eo(i.type);break;case 22:case 23:oi(i),Ac(),e!==null&&le(ll);break;case 24:eo(Sn)}}function Ds(e,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var p=a.next;l=p;do{if((l.tag&e)===e){a=void 0;var g=l.create,S=l.inst;a=g(),S.destroy=a}l=l.next}while(l!==p)}}catch(C){Qt(i,i.return,C)}}function Ro(e,i,l){try{var a=i.updateQueue,p=a!==null?a.lastEffect:null;if(p!==null){var g=p.next;a=g;do{if((a.tag&e)===e){var S=a.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,p=i;var z=l,K=C;try{K()}catch(he){Qt(p,z,he)}}}a=a.next}while(a!==g)}}catch(he){Qt(i,i.return,he)}}function Vp(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{zf(i,l)}catch(a){Qt(e,e.return,a)}}}function Op(e,i,l){l.props=ul(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){Qt(e,i,a)}}function Ls(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(p){Qt(e,i,p)}}function ji(e,i){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(p){Qt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Qt(e,i,p)}else l.current=null}function qp(e){var i=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(p){Qt(e,e.return,p)}}function su(e,i,l){try{var a=e.stateNode;Pv(a,e.type,l,i),a[ht]=i}catch(p){Qt(e,e.return,p)}}function $p(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fo(e.type)||e.tag===4}function au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ru(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ut));else if(a!==4&&(a===27&&Fo(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(ru(e,i,l),e=e.sibling;e!==null;)ru(e,i,l),e=e.sibling}function Oa(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(a!==4&&(a===27&&Fo(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Oa(e,i,l),e=e.sibling;e!==null;)Oa(e,i,l),e=e.sibling}function Yp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Un(i,a,l),i[qe]=e,i[ht]=l}catch(g){Qt(e,e.return,g)}}var lo=!1,En=!1,cu=!1,Jp=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function yv(e,i){if(e=e.containerInfo,Ru=dr,e=sf(e),nc(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var p=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,C=-1,z=-1,K=0,he=0,we=e,Q=null;t:for(;;){for(var ie;we!==l||p!==0&&we.nodeType!==3||(C=S+p),we!==g||a!==0&&we.nodeType!==3||(z=S+a),we.nodeType===3&&(S+=we.nodeValue.length),(ie=we.firstChild)!==null;)Q=we,we=ie;for(;;){if(we===e)break t;if(Q===l&&++K===p&&(C=S),Q===g&&++he===a&&(z=S),(ie=we.nextSibling)!==null)break;we=Q,Q=we.parentNode}we=ie}l=C===-1||z===-1?null:{start:C,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(ku={focusedElem:e,selectionRange:l},dr=!1,Nn=i;Nn!==null;)if(i=Nn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Nn=e;else for(;Nn!==null;){switch(i=Nn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)p=e[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,p=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var et=ul(l.type,p);e=a.getSnapshotBeforeUpdate(et,g),a.__reactInternalSnapshotBeforeUpdate=e}catch(gt){Qt(l,l.return,gt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)Du(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Du(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Nn=e;break}Nn=i.return}}function Kp(e,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:ao(e,l),a&4&&Ds(5,l);break;case 1:if(ao(e,l),a&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(S){Qt(l,l.return,S)}else{var p=ul(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(S){Qt(l,l.return,S)}}a&64&&Vp(l),a&512&&Ls(l,l.return);break;case 3:if(ao(e,l),a&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{zf(e,i)}catch(S){Qt(l,l.return,S)}}break;case 27:i===null&&a&4&&Yp(l);case 26:case 5:ao(e,l),i===null&&a&4&&qp(l),a&512&&Ls(l,l.return);break;case 12:ao(e,l);break;case 31:ao(e,l),a&4&&Wp(e,l);break;case 13:ao(e,l),a&4&&Zp(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=_v.bind(null,l),$v(e,l))));break;case 22:if(a=l.memoizedState!==null||lo,!a){i=i!==null&&i.memoizedState!==null||En,p=lo;var g=En;lo=a,(En=i)&&!g?ro(e,l,(l.subtreeFlags&8772)!==0):ao(e,l),lo=p,En=g}break;case 30:break;default:ao(e,l)}}function Xp(e){var i=e.alternate;i!==null&&(e.alternate=null,Xp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&yo(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pn=null,Yn=!1;function so(e,i,l){for(l=l.child;l!==null;)Qp(e,i,l),l=l.sibling}function Qp(e,i,l){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(se,l)}catch{}switch(l.tag){case 26:En||ji(l,i),so(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:En||ji(l,i);var a=pn,p=Yn;Fo(l.type)&&(pn=l.stateNode,Yn=!1),so(e,i,l),Os(l.stateNode),pn=a,Yn=p;break;case 5:En||ji(l,i);case 6:if(a=pn,p=Yn,pn=null,so(e,i,l),pn=a,Yn=p,pn!==null)if(Yn)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(l.stateNode)}catch(g){Qt(l,i,g)}else try{pn.removeChild(l.stateNode)}catch(g){Qt(l,i,g)}break;case 18:pn!==null&&(Yn?(e=pn,Vh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Kl(e)):Vh(pn,l.stateNode));break;case 4:a=pn,p=Yn,pn=l.stateNode.containerInfo,Yn=!0,so(e,i,l),pn=a,Yn=p;break;case 0:case 11:case 14:case 15:Ro(2,l,i),En||Ro(4,l,i),so(e,i,l);break;case 1:En||(ji(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&Op(l,i,a)),so(e,i,l);break;case 21:so(e,i,l);break;case 22:En=(a=En)||l.memoizedState!==null,so(e,i,l),En=a;break;default:so(e,i,l)}}function Wp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Kl(e)}catch(l){Qt(i,i.return,l)}}}function Zp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Kl(e)}catch(l){Qt(i,i.return,l)}}function vv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Jp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Jp),i;default:throw Error(s(435,e.tag))}}function qa(e,i){var l=vv(e);i.forEach(function(a){if(!l.has(a)){l.add(a);var p=Nv.bind(null,e,a);a.then(p,p)}})}function Jn(e,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var p=l[a],g=e,S=i,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Fo(C.type)){pn=C.stateNode,Yn=!1;break e}break;case 5:pn=C.stateNode,Yn=!1;break e;case 3:case 4:pn=C.stateNode.containerInfo,Yn=!0;break e}C=C.return}if(pn===null)throw Error(s(160));Qp(g,S,p),pn=null,Yn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)eh(i,e),i=i.sibling}var Ii=null;function eh(e,i){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Jn(i,e),Kn(e),a&4&&(Ro(3,e,e.return),Ds(3,e),Ro(5,e,e.return));break;case 1:Jn(i,e),Kn(e),a&512&&(En||l===null||ji(l,l.return)),a&64&&lo&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var p=Ii;if(Jn(i,e),Kn(e),a&512&&(En||l===null||ji(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,p=p.ownerDocument||p;t:switch(a){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Fi]||g[qe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(a),p.head.insertBefore(g,p.querySelector("head > title"))),Un(g,a,l),g[qe]=e,dn(g),a=g;break e;case"link":var S=e0("link","href",p).get(a+(l.href||""));if(S){for(var C=0;C<S.length;C++)if(g=S[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(C,1);break t}}g=p.createElement(a),Un(g,a,l),p.head.appendChild(g);break;case"meta":if(S=e0("meta","content",p).get(a+(l.content||""))){for(C=0;C<S.length;C++)if(g=S[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(C,1);break t}}g=p.createElement(a),Un(g,a,l),p.head.appendChild(g);break;default:throw Error(s(468,a))}g[qe]=e,dn(g),a=g}e.stateNode=a}else t0(p,e.type,e.stateNode);else e.stateNode=Zh(p,a,e.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?t0(p,e.type,e.stateNode):Zh(p,a,e.memoizedProps)):a===null&&e.stateNode!==null&&su(e,e.memoizedProps,l.memoizedProps)}break;case 27:Jn(i,e),Kn(e),a&512&&(En||l===null||ji(l,l.return)),l!==null&&a&4&&su(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Jn(i,e),Kn(e),a&512&&(En||l===null||ji(l,l.return)),e.flags&32){p=e.stateNode;try{di(p,"")}catch(et){Qt(e,e.return,et)}}a&4&&e.stateNode!=null&&(p=e.memoizedProps,su(e,p,l!==null?l.memoizedProps:p)),a&1024&&(cu=!0);break;case 6:if(Jn(i,e),Kn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(et){Qt(e,e.return,et)}}break;case 3:if(ar=null,p=Ii,Ii=lr(i.containerInfo),Jn(i,e),Ii=p,Kn(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Kl(i.containerInfo)}catch(et){Qt(e,e.return,et)}cu&&(cu=!1,th(e));break;case 4:a=Ii,Ii=lr(e.stateNode.containerInfo),Jn(i,e),Kn(e),Ii=a;break;case 12:Jn(i,e),Kn(e);break;case 31:Jn(i,e),Kn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,qa(e,a)));break;case 13:Jn(i,e),Kn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ya=ye()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,qa(e,a)));break;case 22:p=e.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,K=lo,he=En;if(lo=K||p,En=he||z,Jn(i,e),En=he,lo=K,Kn(e),a&8192)e:for(i=e.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||z||lo||En||dl(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){z=l=i;try{if(g=z.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=z.stateNode;var we=z.memoizedProps.style,Q=we!=null&&we.hasOwnProperty("display")?we.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(et){Qt(z,z.return,et)}}}else if(i.tag===6){if(l===null){z=i;try{z.stateNode.nodeValue=p?"":z.memoizedProps}catch(et){Qt(z,z.return,et)}}}else if(i.tag===18){if(l===null){z=i;try{var ie=z.stateNode;p?Oh(ie,!0):Oh(z.stateNode,!1)}catch(et){Qt(z,z.return,et)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,qa(e,l))));break;case 19:Jn(i,e),Kn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,qa(e,a)));break;case 30:break;case 21:break;default:Jn(i,e),Kn(e)}}function Kn(e){var i=e.flags;if(i&2){try{for(var l,a=e.return;a!==null;){if($p(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var p=l.stateNode,g=au(e);Oa(e,g,p);break;case 5:var S=l.stateNode;l.flags&32&&(di(S,""),l.flags&=-33);var C=au(e);Oa(e,C,S);break;case 3:case 4:var z=l.stateNode.containerInfo,K=au(e);ru(e,K,z);break;default:throw Error(s(161))}}catch(he){Qt(e,e.return,he)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function th(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;th(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ao(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Kp(e,i.alternate,i),i=i.sibling}function dl(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ro(4,i,i.return),dl(i);break;case 1:ji(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Op(i,i.return,l),dl(i);break;case 27:Os(i.stateNode);case 26:case 5:ji(i,i.return),dl(i);break;case 22:i.memoizedState===null&&dl(i);break;case 30:dl(i);break;default:dl(i)}e=e.sibling}}function ro(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,p=e,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:ro(p,g,l),Ds(4,g);break;case 1:if(ro(p,g,l),a=g,p=a.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){Qt(a,a.return,K)}if(a=g,p=a.updateQueue,p!==null){var C=a.stateNode;try{var z=p.shared.hiddenCallbacks;if(z!==null)for(p.shared.hiddenCallbacks=null,p=0;p<z.length;p++)If(z[p],C)}catch(K){Qt(a,a.return,K)}}l&&S&64&&Vp(g),Ls(g,g.return);break;case 27:Yp(g);case 26:case 5:ro(p,g,l),l&&a===null&&S&4&&qp(g),Ls(g,g.return);break;case 12:ro(p,g,l);break;case 31:ro(p,g,l),l&&S&4&&Wp(p,g);break;case 13:ro(p,g,l),l&&S&4&&Zp(p,g);break;case 22:g.memoizedState===null&&ro(p,g,l),Ls(g,g.return);break;case 30:break;default:ro(p,g,l)}i=i.sibling}}function uu(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Ss(l))}function du(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ss(e))}function zi(e,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)nh(e,i,l,a),i=i.sibling}function nh(e,i,l,a){var p=i.flags;switch(i.tag){case 0:case 11:case 15:zi(e,i,l,a),p&2048&&Ds(9,i);break;case 1:zi(e,i,l,a);break;case 3:zi(e,i,l,a),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Ss(e)));break;case 12:if(p&2048){zi(e,i,l,a),e=i.stateNode;try{var g=i.memoizedProps,S=g.id,C=g.onPostCommit;typeof C=="function"&&C(S,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Qt(i,i.return,z)}}else zi(e,i,l,a);break;case 31:zi(e,i,l,a);break;case 13:zi(e,i,l,a);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?zi(e,i,l,a):Us(e,i):g._visibility&2?zi(e,i,l,a):(g._visibility|=2,Pl(e,i,l,a,(i.subtreeFlags&10256)!==0||!1)),p&2048&&uu(S,i);break;case 24:zi(e,i,l,a),p&2048&&du(i.alternate,i);break;default:zi(e,i,l,a)}}function Pl(e,i,l,a,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,S=i,C=l,z=a,K=S.flags;switch(S.tag){case 0:case 11:case 15:Pl(g,S,C,z,p),Ds(8,S);break;case 23:break;case 22:var he=S.stateNode;S.memoizedState!==null?he._visibility&2?Pl(g,S,C,z,p):Us(g,S):(he._visibility|=2,Pl(g,S,C,z,p)),p&&K&2048&&uu(S.alternate,S);break;case 24:Pl(g,S,C,z,p),p&&K&2048&&du(S.alternate,S);break;default:Pl(g,S,C,z,p)}i=i.sibling}}function Us(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,a=i,p=a.flags;switch(a.tag){case 22:Us(l,a),p&2048&&uu(a.alternate,a);break;case 24:Us(l,a),p&2048&&du(a.alternate,a);break;default:Us(l,a)}i=i.sibling}}var Fs=8192;function Hl(e,i,l){if(e.subtreeFlags&Fs)for(e=e.child;e!==null;)ih(e,i,l),e=e.sibling}function ih(e,i,l){switch(e.tag){case 26:Hl(e,i,l),e.flags&Fs&&e.memoizedState!==null&&ox(l,Ii,e.memoizedState,e.memoizedProps);break;case 5:Hl(e,i,l);break;case 3:case 4:var a=Ii;Ii=lr(e.stateNode.containerInfo),Hl(e,i,l),Ii=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Fs,Fs=16777216,Hl(e,i,l),Fs=a):Hl(e,i,l));break;default:Hl(e,i,l)}}function oh(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ps(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Nn=a,sh(a,e)}oh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lh(e),e=e.sibling}function lh(e){switch(e.tag){case 0:case 11:case 15:Ps(e),e.flags&2048&&Ro(9,e,e.return);break;case 3:Ps(e);break;case 12:Ps(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,$a(e)):Ps(e);break;default:Ps(e)}}function $a(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Nn=a,sh(a,e)}oh(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ro(8,i,i.return),$a(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,$a(i));break;default:$a(i)}e=e.sibling}}function sh(e,i){for(;Nn!==null;){var l=Nn;switch(l.tag){case 0:case 11:case 15:Ro(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ss(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Nn=a;else e:for(l=e;Nn!==null;){a=Nn;var p=a.sibling,g=a.return;if(Xp(a),a===l){Nn=null;break e}if(p!==null){p.return=g,Nn=p;break e}Nn=g}}}var xv={getCacheForType:function(e){var i=Dn(Sn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return Dn(Sn).controller.signal}},bv=typeof WeakMap=="function"?WeakMap:Map,$t=0,ln=null,It=null,Ut=0,Xt=0,li=null,ko=!1,Gl=!1,fu=!1,co=0,gn=0,Io=0,fl=0,pu=0,si=0,Bl=0,Hs=null,Xn=null,hu=!1,Ya=0,ah=0,Ja=1/0,Ka=null,zo=null,Cn=0,Do=null,jl=null,uo=0,mu=0,gu=null,rh=null,Gs=0,yu=null;function ai(){return($t&2)!==0&&Ut!==0?Ut&-Ut:j.T!==null?wu():go()}function ch(){if(si===0)if((Ut&536870912)===0||Ht){var e=Dt;Dt<<=1,(Dt&3932160)===0&&(Dt=262144),si=e}else si=536870912;return e=ii.current,e!==null&&(e.flags|=32),si}function Qn(e,i,l){(e===ln&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(Vl(e,0),Lo(e,Ut,si,!1)),St(e,l),(($t&2)===0||e!==ln)&&(e===ln&&(($t&2)===0&&(fl|=l),gn===4&&Lo(e,Ut,si,!1)),Vi(e))}function uh(e,i,l){if(($t&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&e.expiredLanes)===0||xt(e,i),p=a?wv(e,i):xu(e,i,!0),g=a;do{if(p===0){Gl&&!a&&Lo(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!Sv(l)){p=xu(e,i,!1),g=!1;continue}if(p===2){if(g=i,e.errorRecoveryDisabledLanes&g)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var C=e;p=Hs;var z=C.current.memoizedState.isDehydrated;if(z&&(Vl(C,S).flags|=256),S=xu(C,S,!1),S!==2){if(fu&&!z){C.errorRecoveryDisabledLanes|=g,fl|=g,p=4;break e}g=Xn,Xn=p,g!==null&&(Xn===null?Xn=g:Xn.push.apply(Xn,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Vl(e,0),Lo(e,i,0,!0);break}e:{switch(a=e,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Lo(a,i,si,!ko);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Ya+300-ye(),10<p)){if(Lo(a,i,si,!ko),ze(a,0,!0)!==0)break e;uo=i,a.timeoutHandle=Bh(dh.bind(null,a,l,Xn,Ka,hu,i,si,fl,Bl,ko,g,"Throttled",-0,0),p);break e}dh(a,l,Xn,Ka,hu,i,si,fl,Bl,ko,g,null,-0,0)}}break}while(!0);Vi(e)}function dh(e,i,l,a,p,g,S,C,z,K,he,we,Q,ie){if(e.timeoutHandle=-1,we=i.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ut},ih(i,g,we);var et=(g&62914560)===g?Ya-ye():(g&4194048)===g?ah-ye():0;if(et=lx(we,et),et!==null){uo=g,e.cancelPendingCommit=et(xh.bind(null,e,i,g,l,a,p,S,C,z,he,we,null,Q,ie)),Lo(e,g,S,!K);return}}xh(e,i,g,l,a,p,S,C,z)}function Sv(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var p=l[a],g=p.getSnapshot;p=p.value;try{if(!ti(g(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Lo(e,i,l,a){i&=~pu,i&=~fl,e.suspendedLanes|=i,e.pingedLanes&=~i,a&&(e.warmLanes|=i),a=e.expirationTimes;for(var p=i;0<p;){var g=31-Je(p),S=1<<g;a[g]=-1,p&=~S}l!==0&&Gt(e,l,i)}function Xa(){return($t&6)===0?(Bs(0),!1):!0}function vu(){if(It!==null){if(Xt===0)var e=It.return;else e=It,Zi=il=null,Dc(e),zl=null,ws=0,e=It;for(;e!==null;)jp(e.alternate,e),e=e.return;It=null}}function Vl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Bv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),uo=0,vu(),ln=e,It=l=Qi(e.current,null),Ut=i,Xt=0,li=null,ko=!1,Gl=xt(e,i),fu=!1,Bl=si=pu=fl=Io=gn=0,Xn=Hs=null,hu=!1,(i&8)!==0&&(i|=i&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=i;0<a;){var p=31-Je(a),g=1<<p;i|=e[p],a&=~g}return co=i,ya(),l}function fh(e,i){Ct=null,j.H=ks,i===Il||i===Ca?(i=Af(),Xt=3):i===Tc?(i=Af(),Xt=4):Xt=i===Xc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,li=i,It===null&&(gn=1,Ha(e,bi(i,e.current)))}function ph(){var e=ii.current;return e===null?!0:(Ut&4194048)===Ut?Ei===null:(Ut&62914560)===Ut||(Ut&536870912)!==0?e===Ei:!1}function hh(){var e=j.H;return j.H=ks,e===null?ks:e}function mh(){var e=j.A;return j.A=xv,e}function Qa(){gn=4,ko||(Ut&4194048)!==Ut&&ii.current!==null||(Gl=!0),(Io&134217727)===0&&(fl&134217727)===0||ln===null||Lo(ln,Ut,si,!1)}function xu(e,i,l){var a=$t;$t|=2;var p=hh(),g=mh();(ln!==e||Ut!==i)&&(Ka=null,Vl(e,i)),i=!1;var S=gn;e:do try{if(Xt!==0&&It!==null){var C=It,z=li;switch(Xt){case 8:vu(),S=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(i=!0);var K=Xt;if(Xt=0,li=null,Ol(e,C,z,K),l&&Gl){S=0;break e}break;default:K=Xt,Xt=0,li=null,Ol(e,C,z,K)}}Tv(),S=gn;break}catch(he){fh(e,he)}while(!0);return i&&e.shellSuspendCounter++,Zi=il=null,$t=a,j.H=p,j.A=g,It===null&&(ln=null,Ut=0,ya()),S}function Tv(){for(;It!==null;)gh(It)}function wv(e,i){var l=$t;$t|=2;var a=hh(),p=mh();ln!==e||Ut!==i?(Ka=null,Ja=ye()+500,Vl(e,i)):Gl=xt(e,i);e:do try{if(Xt!==0&&It!==null){i=It;var g=li;t:switch(Xt){case 1:Xt=0,li=null,Ol(e,i,g,1);break;case 2:case 9:if(_f(g)){Xt=0,li=null,yh(i);break}i=function(){Xt!==2&&Xt!==9||ln!==e||(Xt=7),Vi(e)},g.then(i,i);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:_f(g)?(Xt=0,li=null,yh(i)):(Xt=0,li=null,Ol(e,i,g,7));break;case 5:var S=null;switch(It.tag){case 26:S=It.memoizedState;case 5:case 27:var C=It;if(S?n0(S):C.stateNode.complete){Xt=0,li=null;var z=C.sibling;if(z!==null)It=z;else{var K=C.return;K!==null?(It=K,Wa(K)):It=null}break t}}Xt=0,li=null,Ol(e,i,g,5);break;case 6:Xt=0,li=null,Ol(e,i,g,6);break;case 8:vu(),gn=6;break e;default:throw Error(s(462))}}Ev();break}catch(he){fh(e,he)}while(!0);return Zi=il=null,j.H=a,j.A=p,$t=l,It!==null?0:(ln=null,Ut=0,ya(),gn)}function Ev(){for(;It!==null&&!ue();)gh(It)}function gh(e){var i=Gp(e.alternate,e,co);e.memoizedProps=e.pendingProps,i===null?Wa(e):It=i}function yh(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=Dp(l,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=Dp(l,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:Dc(i);default:jp(l,i),i=It=mf(i,co),i=Gp(l,i,co)}e.memoizedProps=e.pendingProps,i===null?Wa(e):It=i}function Ol(e,i,l,a){Zi=il=null,Dc(i),zl=null,ws=0;var p=i.return;try{if(fv(e,p,i,l,Ut)){gn=1,Ha(e,bi(l,e.current)),It=null;return}}catch(g){if(p!==null)throw It=p,g;gn=1,Ha(e,bi(l,e.current)),It=null;return}i.flags&32768?(Ht||a===1?e=!0:Gl||(Ut&536870912)!==0?e=!1:(ko=e=!0,(a===2||a===9||a===3||a===6)&&(a=ii.current,a!==null&&a.tag===13&&(a.flags|=16384))),vh(i,e)):Wa(i)}function Wa(e){var i=e;do{if((i.flags&32768)!==0){vh(i,ko);return}e=i.return;var l=mv(i.alternate,i,co);if(l!==null){It=l;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);gn===0&&(gn=5)}function vh(e,i){do{var l=gv(e.alternate,e);if(l!==null){l.flags&=32767,It=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=l}while(e!==null);gn=6,It=null}function xh(e,i,l,a,p,g,S,C,z){e.cancelPendingCommit=null;do Za();while(Cn!==0);if(($t&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=ac,lt(e,l,g,S,C,z),e===ln&&(It=ln=null,Ut=0),jl=i,Do=e,uo=l,mu=g,gu=p,rh=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Av(O,function(){return Eh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=j.T,j.T=null,p=Ce.p,Ce.p=2,S=$t,$t|=4;try{yv(e,i,l)}finally{$t=S,Ce.p=p,j.T=a}}Cn=1,bh(),Sh(),Th()}}function bh(){if(Cn===1){Cn=0;var e=Do,i=jl,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=j.T,j.T=null;var a=Ce.p;Ce.p=2;var p=$t;$t|=4;try{eh(i,e);var g=ku,S=sf(e.containerInfo),C=g.focusedElem,z=g.selectionRange;if(S!==C&&C&&C.ownerDocument&&lf(C.ownerDocument.documentElement,C)){if(z!==null&&nc(C)){var K=z.start,he=z.end;if(he===void 0&&(he=K),"selectionStart"in C)C.selectionStart=K,C.selectionEnd=Math.min(he,C.value.length);else{var we=C.ownerDocument||document,Q=we&&we.defaultView||window;if(Q.getSelection){var ie=Q.getSelection(),et=C.textContent.length,gt=Math.min(z.start,et),nn=z.end===void 0?gt:Math.min(z.end,et);!ie.extend&&gt>nn&&(S=nn,nn=gt,gt=S);var V=of(C,gt),F=of(C,nn);if(V&&F&&(ie.rangeCount!==1||ie.anchorNode!==V.node||ie.anchorOffset!==V.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var J=we.createRange();J.setStart(V.node,V.offset),ie.removeAllRanges(),gt>nn?(ie.addRange(J),ie.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ie.addRange(J))}}}}for(we=[],ie=C;ie=ie.parentNode;)ie.nodeType===1&&we.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<we.length;C++){var be=we[C];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}dr=!!Ru,ku=Ru=null}finally{$t=p,Ce.p=a,j.T=l}}e.current=i,Cn=2}}function Sh(){if(Cn===2){Cn=0;var e=Do,i=jl,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=j.T,j.T=null;var a=Ce.p;Ce.p=2;var p=$t;$t|=4;try{Kp(e,i.alternate,i)}finally{$t=p,Ce.p=a,j.T=l}}Cn=3}}function Th(){if(Cn===4||Cn===3){Cn=0,Me();var e=Do,i=jl,l=uo,a=rh;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Cn=5:(Cn=0,jl=Do=null,wh(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(zo=null),ci(l),i=i.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(se,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=j.T,p=Ce.p,Ce.p=2,j.T=null;try{for(var g=e.onRecoverableError,S=0;S<a.length;S++){var C=a[S];g(C.value,{componentStack:C.stack})}}finally{j.T=i,Ce.p=p}}(uo&3)!==0&&Za(),Vi(e),p=e.pendingLanes,(l&261930)!==0&&(p&42)!==0?e===yu?Gs++:(Gs=0,yu=e):Gs=0,Bs(0)}}function wh(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Ss(i)))}function Za(){return bh(),Sh(),Th(),Eh()}function Eh(){if(Cn!==5)return!1;var e=Do,i=mu;mu=0;var l=ci(uo),a=j.T,p=Ce.p;try{Ce.p=32>l?32:l,j.T=null,l=gu,gu=null;var g=Do,S=uo;if(Cn=0,jl=Do=null,uo=0,($t&6)!==0)throw Error(s(331));var C=$t;if($t|=4,lh(g.current),nh(g,g.current,S,l),$t=C,Bs(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(se,g)}catch{}return!0}finally{Ce.p=p,j.T=a,wh(e,i)}}function Ch(e,i,l){i=bi(l,i),i=Kc(e.stateNode,i,2),e=No(e,i,2),e!==null&&(St(e,2),Vi(e))}function Qt(e,i,l){if(e.tag===3)Ch(e,e,l);else for(;i!==null;){if(i.tag===3){Ch(i,e,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(zo===null||!zo.has(a))){e=bi(l,e),l=_p(2),a=No(i,l,2),a!==null&&(Np(l,a,i,e),St(a,2),Vi(a));break}}i=i.return}}function bu(e,i,l){var a=e.pingCache;if(a===null){a=e.pingCache=new bv;var p=new Set;a.set(i,p)}else p=a.get(i),p===void 0&&(p=new Set,a.set(i,p));p.has(l)||(fu=!0,p.add(l),e=Cv.bind(null,e,i,l),i.then(e,e))}function Cv(e,i,l){var a=e.pingCache;a!==null&&a.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,ln===e&&(Ut&l)===l&&(gn===4||gn===3&&(Ut&62914560)===Ut&&300>ye()-Ya?($t&2)===0&&Vl(e,0):pu|=l,Bl===Ut&&(Bl=0)),Vi(e)}function _h(e,i){i===0&&(i=Pe()),e=el(e,i),e!==null&&(St(e,i),Vi(e))}function _v(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),_h(e,l)}function Nv(e,i){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(l=p.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),_h(e,l)}function Av(e,i){return H(e,i)}var er=null,ql=null,Su=!1,tr=!1,Tu=!1,Uo=0;function Vi(e){e!==ql&&e.next===null&&(ql===null?er=ql=e:ql=ql.next=e),tr=!0,Su||(Su=!0,Rv())}function Bs(e,i){if(!Tu&&tr){Tu=!0;do for(var l=!1,a=er;a!==null;){if(e!==0){var p=a.pendingLanes;if(p===0)var g=0;else{var S=a.suspendedLanes,C=a.pingedLanes;g=(1<<31-Je(42|e)+1)-1,g&=p&~(S&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Rh(a,g))}else g=Ut,g=ze(a,a===ln?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||xt(a,g)||(l=!0,Rh(a,g));a=a.next}while(l);Tu=!1}}function Mv(){Nh()}function Nh(){tr=Su=!1;var e=0;Uo!==0&&Gv()&&(e=Uo);for(var i=ye(),l=null,a=er;a!==null;){var p=a.next,g=Ah(a,i);g===0?(a.next=null,l===null?er=p:l.next=p,p===null&&(ql=l)):(l=a,(e!==0||(g&3)!==0)&&(tr=!0)),a=p}Cn!==0&&Cn!==5||Bs(e),Uo!==0&&(Uo=0)}function Ah(e,i){for(var l=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var S=31-Je(g),C=1<<S,z=p[S];z===-1?((C&l)===0||(C&a)!==0)&&(p[S]=Fe(C,i)):z<=i&&(e.expiredLanes|=C),g&=~C}if(i=ln,l=Ut,l=ze(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===i&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ae(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||xt(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(a!==null&&ae(a),ci(l)){case 2:case 8:l=D;break;case 32:l=O;break;case 268435456:l=ee;break;default:l=O}return a=Mh.bind(null,e),l=H(l,a),e.callbackPriority=i,e.callbackNode=l,i}return a!==null&&a!==null&&ae(a),e.callbackPriority=2,e.callbackNode=null,2}function Mh(e,i){if(Cn!==0&&Cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Za()&&e.callbackNode!==l)return null;var a=Ut;return a=ze(e,e===ln?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(uh(e,a,i),Ah(e,ye()),e.callbackNode!=null&&e.callbackNode===l?Mh.bind(null,e):null)}function Rh(e,i){if(Za())return null;uh(e,i,!0)}function Rv(){jv(function(){($t&6)!==0?H(E,Mv):Nh()})}function wu(){if(Uo===0){var e=Rl;e===0&&(e=Ze,Ze<<=1,(Ze&261888)===0&&(Ze=256)),Uo=e}return Uo}function kh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:nt(""+e)}function Ih(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function kv(e,i,l,a,p){if(i==="submit"&&l&&l.stateNode===p){var g=kh((p[ht]||null).action),S=a.submitter;S&&(i=(i=S[ht]||null)?kh(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var C=new ei("action","action",null,a,p);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Uo!==0){var z=S?Ih(p,S):new FormData(p);Vc(l,{pending:!0,data:z,method:p.method,action:g},null,z)}}else typeof g=="function"&&(C.preventDefault(),z=S?Ih(p,S):new FormData(p),Vc(l,{pending:!0,data:z,method:p.method,action:g},g,z))},currentTarget:p}]})}}for(var Eu=0;Eu<sc.length;Eu++){var Cu=sc[Eu],Iv=Cu.toLowerCase(),zv=Cu[0].toUpperCase()+Cu.slice(1);ki(Iv,"on"+zv)}ki(cf,"onAnimationEnd"),ki(uf,"onAnimationIteration"),ki(df,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Ky,"onTransitionRun"),ki(Xy,"onTransitionStart"),ki(Qy,"onTransitionCancel"),ki(ff,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(js));function zh(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],p=a.event;a=a.listeners;e:{var g=void 0;if(i)for(var S=a.length-1;0<=S;S--){var C=a[S],z=C.instance,K=C.currentTarget;if(C=C.listener,z!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=K;try{g(p)}catch(he){ga(he)}p.currentTarget=null,g=z}else for(S=0;S<a.length;S++){if(C=a[S],z=C.instance,K=C.currentTarget,C=C.listener,z!==g&&p.isPropagationStopped())break e;g=C,p.currentTarget=K;try{g(p)}catch(he){ga(he)}p.currentTarget=null,g=z}}}}function zt(e,i){var l=i[Pn];l===void 0&&(l=i[Pn]=new Set);var a=e+"__bubble";l.has(a)||(Dh(i,e,2,!1),l.add(a))}function _u(e,i,l){var a=0;i&&(a|=4),Dh(l,e,a,i)}var nr="_reactListening"+Math.random().toString(36).slice(2);function Nu(e){if(!e[nr]){e[nr]=!0,ml.forEach(function(l){l!=="selectionchange"&&(Dv.has(l)||_u(l,!1,e),_u(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[nr]||(i[nr]=!0,_u("selectionchange",!1,i))}}function Dh(e,i,l,a){switch(c0(i)){case 2:var p=rx;break;case 8:p=cx;break;default:p=ju}l=p.bind(null,i,l,e),p=void 0,!At||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(i,l,{capture:!0,passive:p}):e.addEventListener(i,l,!0):p!==void 0?e.addEventListener(i,l,{passive:p}):e.addEventListener(i,l,!1)}function Au(e,i,l,a,p){var g=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var S=a.tag;if(S===3||S===4){var C=a.stateNode.containerInfo;if(C===p)break;if(S===4)for(S=a.return;S!==null;){var z=S.tag;if((z===3||z===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;C!==null;){if(S=$i(C),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){a=g=S;continue e}C=C.parentNode}}a=a.return}kn(function(){var K=g,he=Rn(l),we=[];e:{var Q=pf.get(e);if(Q!==void 0){var ie=ei,et=e;switch(e){case"keypress":if(hi(l)===0)break e;case"keydown":case"keyup":ie=Ny;break;case"focusin":et="focus",ie=kt;break;case"focusout":et="blur",ie=kt;break;case"beforeblur":case"afterblur":ie=kt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Ae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Ry;break;case cf:case uf:case df:ie=fn;break;case ff:ie=Iy;break;case"scroll":case"scrollend":ie=mi;break;case"wheel":ie=Dy;break;case"copy":case"cut":case"paste":ie=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Vd;break;case"toggle":case"beforetoggle":ie=Uy}var gt=(i&4)!==0,nn=!gt&&(e==="scroll"||e==="scrollend"),V=gt?Q!==null?Q+"Capture":null:Q;gt=[];for(var F=K,J;F!==null;){var be=F;if(J=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||J===null||V===null||(be=B(F,V),be!=null&&gt.push(Vs(F,be,J))),nn)break;F=F.return}0<gt.length&&(Q=new ie(Q,et,null,l,he),we.push({event:Q,listeners:gt}))}}if((i&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",Q&&l!==mt&&(et=l.relatedTarget||l.fromElement)&&($i(et)||et[Rt]))break e;if((ie||Q)&&(Q=he.window===he?he:(Q=he.ownerDocument)?Q.defaultView||Q.parentWindow:window,ie?(et=l.relatedTarget||l.toElement,ie=K,et=et?$i(et):null,et!==null&&(nn=d(et),gt=et.tag,et!==nn||gt!==5&&gt!==27&&gt!==6)&&(et=null)):(ie=null,et=K),ie!==et)){if(gt=Hi,be="onMouseLeave",V="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Vd,be="onPointerLeave",V="onPointerEnter",F="pointer"),nn=ie==null?Q:Jo(ie),J=et==null?Q:Jo(et),Q=new gt(be,F+"leave",ie,l,he),Q.target=nn,Q.relatedTarget=J,be=null,$i(he)===K&&(gt=new gt(V,F+"enter",et,l,he),gt.target=J,gt.relatedTarget=nn,be=gt),nn=be,ie&&et)t:{for(gt=Lv,V=ie,F=et,J=0,be=V;be;be=gt(be))J++;be=0;for(var dt=F;dt;dt=gt(dt))be++;for(;0<J-be;)V=gt(V),J--;for(;0<be-J;)F=gt(F),be--;for(;J--;){if(V===F||F!==null&&V===F.alternate){gt=V;break t}V=gt(V),F=gt(F)}gt=null}else gt=null;ie!==null&&Lh(we,Q,ie,gt,!1),et!==null&&nn!==null&&Lh(we,nn,et,gt,!0)}}e:{if(Q=K?Jo(K):window,ie=Q.nodeName&&Q.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Q.type==="file")var Bt=Qd;else if(Kd(Q))if(Wd)Bt=$y;else{Bt=Oy;var ot=Vy}else ie=Q.nodeName,!ie||ie.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&W(K.elementType)&&(Bt=Qd):Bt=qy;if(Bt&&(Bt=Bt(e,K))){Xd(we,Bt,l,he);break e}ot&&ot(e,Q,K),e==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&ps(Q,"number",Q.value)}switch(ot=K?Jo(K):window,e){case"focusin":(Kd(ot)||ot.contentEditable==="true")&&(Tl=ot,ic=K,vs=null);break;case"focusout":vs=ic=Tl=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,af(we,l,he);break;case"selectionchange":if(Jy)break;case"keydown":case"keyup":af(we,l,he)}var Mt;if(Zr)e:{switch(e){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else Sl?Yd(e,l)&&(Ft="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ft="onCompositionStart");Ft&&(Od&&l.locale!=="ko"&&(Sl||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Sl&&(Mt=pi()):(Zt=he,sn="value"in Zt?Zt.value:Zt.textContent,Sl=!0)),ot=ir(K,Ft),0<ot.length&&(Ft=new In(Ft,e,null,l,he),we.push({event:Ft,listeners:ot}),Mt?Ft.data=Mt:(Mt=Jd(l),Mt!==null&&(Ft.data=Mt)))),(Mt=Py?Hy(e,l):Gy(e,l))&&(Ft=ir(K,"onBeforeInput"),0<Ft.length&&(ot=new In("onBeforeInput","beforeinput",null,l,he),we.push({event:ot,listeners:Ft}),ot.data=Mt)),kv(we,e,K,l,he)}zh(we,i)})}function Vs(e,i,l){return{instance:e,listener:i,currentTarget:l}}function ir(e,i){for(var l=i+"Capture",a=[];e!==null;){var p=e,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=B(e,l),p!=null&&a.unshift(Vs(e,p,g)),p=B(e,i),p!=null&&a.push(Vs(e,p,g))),e.tag===3)return a;e=e.return}return[]}function Lv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Lh(e,i,l,a,p){for(var g=i._reactName,S=[];l!==null&&l!==a;){var C=l,z=C.alternate,K=C.stateNode;if(C=C.tag,z!==null&&z===a)break;C!==5&&C!==26&&C!==27||K===null||(z=K,p?(K=B(l,g),K!=null&&S.unshift(Vs(l,K,z))):p||(K=B(l,g),K!=null&&S.push(Vs(l,K,z)))),l=l.return}S.length!==0&&e.push({event:i,listeners:S})}var Uv=/\r\n?/g,Fv=/\u0000|\uFFFD/g;function Uh(e){return(typeof e=="string"?e:""+e).replace(Uv,`
`).replace(Fv,"")}function Fh(e,i){return i=Uh(i),Uh(e)===i}function tn(e,i,l,a,p,g){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||di(e,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&di(e,""+a);break;case"className":Ko(e,"class",a);break;case"tabIndex":Ko(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ko(e,l,a);break;case"style":Ie(e,a,g);break;case"data":if(i!=="object"){Ko(e,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=nt(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&tn(e,i,"name",p.name,p,null),tn(e,i,"formEncType",p.formEncType,p,null),tn(e,i,"formMethod",p.formMethod,p,null),tn(e,i,"formTarget",p.formTarget,p,null)):(tn(e,i,"encType",p.encType,p,null),tn(e,i,"method",p.method,p,null),tn(e,i,"target",p.target,p,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=nt(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=ut);break;case"onScroll":a!=null&&zt("scroll",e);break;case"onScrollEnd":a!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=nt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":zt("beforetoggle",e),zt("toggle",e),yl(e,"popover",a);break;case"xlinkActuate":Ri(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Ri(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Ri(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Ri(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Ri(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Ri(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Ri(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Ri(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Ri(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":yl(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Se.get(l)||l,yl(e,l,a))}}function Mu(e,i,l,a,p,g){switch(l){case"style":Ie(e,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof a=="string"?di(e,a):(typeof a=="number"||typeof a=="bigint")&&di(e,""+a);break;case"onScroll":a!=null&&zt("scroll",e);break;case"onScrollEnd":a!=null&&zt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),g=e[ht]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,p),typeof a=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,a,p);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):yl(e,l,a)}}}function Un(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var a=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":a=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tn(e,i,g,S,l,null)}}p&&tn(e,i,"srcSet",l.srcSet,l,null),a&&tn(e,i,"src",l.src,l,null);return;case"input":zt("invalid",e);var C=g=S=p=null,z=null,K=null;for(a in l)if(l.hasOwnProperty(a)){var he=l[a];if(he!=null)switch(a){case"name":p=he;break;case"type":S=he;break;case"checked":z=he;break;case"defaultChecked":K=he;break;case"value":g=he;break;case"defaultValue":C=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,i));break;default:tn(e,i,a,he,l,null)}}fs(e,g,C,z,K,S,p,!1);return;case"select":zt("invalid",e),a=S=g=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":g=C;break;case"defaultValue":S=C;break;case"multiple":a=C;default:tn(e,i,p,C,l,null)}i=g,l=S,e.multiple=!!a,i!=null?ui(e,!!a,i,!1):l!=null&&ui(e,!!a,l,!0);return;case"textarea":zt("invalid",e),g=p=a=null;for(S in l)if(l.hasOwnProperty(S)&&(C=l[S],C!=null))switch(S){case"value":a=C;break;case"defaultValue":p=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:tn(e,i,S,C,l,null)}xl(e,a,p,g);return;case"option":for(z in l)l.hasOwnProperty(z)&&(a=l[z],a!=null)&&(z==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":tn(e,i,z,a,l,null));return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(a=0;a<js.length;a++)zt(js[a],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(a=l[K],a!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tn(e,i,K,a,l,null)}return;default:if(W(i)){for(he in l)l.hasOwnProperty(he)&&(a=l[he],a!==void 0&&Mu(e,i,he,a,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(a=l[C],a!=null&&tn(e,i,C,a,l,null))}function Pv(e,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,C=null,z=null,K=null,he=null;for(ie in l){var we=l[ie];if(l.hasOwnProperty(ie)&&we!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":z=we;default:a.hasOwnProperty(ie)||tn(e,i,ie,null,a,we)}}for(var Q in a){var ie=a[Q];if(we=l[Q],a.hasOwnProperty(Q)&&(ie!=null||we!=null))switch(Q){case"type":g=ie;break;case"name":p=ie;break;case"checked":K=ie;break;case"defaultChecked":he=ie;break;case"value":S=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:ie!==we&&tn(e,i,Q,ie,a,we)}}ds(e,S,C,z,K,he,g,p);return;case"select":ie=S=C=Q=null;for(g in l)if(z=l[g],l.hasOwnProperty(g)&&z!=null)switch(g){case"value":break;case"multiple":ie=z;default:a.hasOwnProperty(g)||tn(e,i,g,null,a,z)}for(p in a)if(g=a[p],z=l[p],a.hasOwnProperty(p)&&(g!=null||z!=null))switch(p){case"value":Q=g;break;case"defaultValue":C=g;break;case"multiple":S=g;default:g!==z&&tn(e,i,p,g,a,z)}i=C,l=S,a=ie,Q!=null?ui(e,!!l,Q,!1):!!a!=!!l&&(i!=null?ui(e,!!l,i,!0):ui(e,!!l,l?[]:"",!1));return;case"textarea":ie=Q=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:tn(e,i,C,null,a,p)}for(S in a)if(p=a[S],g=l[S],a.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":Q=p;break;case"defaultValue":ie=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&tn(e,i,S,p,a,g)}Ki(e,Q,ie);return;case"option":for(var et in l)Q=l[et],l.hasOwnProperty(et)&&Q!=null&&!a.hasOwnProperty(et)&&(et==="selected"?e.selected=!1:tn(e,i,et,null,a,Q));for(z in a)Q=a[z],ie=l[z],a.hasOwnProperty(z)&&Q!==ie&&(Q!=null||ie!=null)&&(z==="selected"?e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":tn(e,i,z,Q,a,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in l)Q=l[gt],l.hasOwnProperty(gt)&&Q!=null&&!a.hasOwnProperty(gt)&&tn(e,i,gt,null,a,Q);for(K in a)if(Q=a[K],ie=l[K],a.hasOwnProperty(K)&&Q!==ie&&(Q!=null||ie!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:tn(e,i,K,Q,a,ie)}return;default:if(W(i)){for(var nn in l)Q=l[nn],l.hasOwnProperty(nn)&&Q!==void 0&&!a.hasOwnProperty(nn)&&Mu(e,i,nn,void 0,a,Q);for(he in a)Q=a[he],ie=l[he],!a.hasOwnProperty(he)||Q===ie||Q===void 0&&ie===void 0||Mu(e,i,he,Q,a,ie);return}}for(var V in l)Q=l[V],l.hasOwnProperty(V)&&Q!=null&&!a.hasOwnProperty(V)&&tn(e,i,V,null,a,Q);for(we in a)Q=a[we],ie=l[we],!a.hasOwnProperty(we)||Q===ie||Q==null&&ie==null||tn(e,i,we,Q,a,ie)}function Ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var p=l[a],g=p.transferSize,S=p.initiatorType,C=p.duration;if(g&&C&&Ph(S)){for(S=0,C=p.responseEnd,a+=1;a<l.length;a++){var z=l[a],K=z.startTime;if(K>C)break;var he=z.transferSize,we=z.initiatorType;he&&Ph(we)&&(z=z.responseEnd,S+=he*(z<C?1:(C-K)/(z-K)))}if(--a,i+=8*(g+S)/(p.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ru=null,ku=null;function or(e){return e.nodeType===9?e:e.ownerDocument}function Hh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Iu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var zu=null;function Gv(){var e=window.event;return e&&e.type==="popstate"?e===zu?!1:(zu=e,!0):(zu=null,!1)}var Bh=typeof setTimeout=="function"?setTimeout:void 0,Bv=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,jv=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(e){return jh.resolve(null).then(e).catch(Vv)}:Bh;function Vv(e){setTimeout(function(){throw e})}function Fo(e){return e==="head"}function Vh(e,i){var l=i,a=0;do{var p=l.nextSibling;if(e.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(p),Kl(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Os(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Os(l);for(var g=l.firstChild;g;){var S=g.nextSibling,C=g.nodeName;g[Fi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&Os(e.ownerDocument.body);l=p}while(l);Kl(i)}function Oh(e,i){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function Du(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Du(l),yo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Ov(e,i,l,a){for(;e.nodeType===1;){var p=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Fi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Ci(e.nextSibling),e===null)break}return null}function qv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Ci(e.nextSibling),e===null))return null;return e}function qh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Ci(e.nextSibling),e===null))return null;return e}function Lu(e){return e.data==="$?"||e.data==="$~"}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $v(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Ci(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Fu=null;function $h(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return Ci(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function Yh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Jh(e,i,l){switch(i=or(l),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Os(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);yo(e)}var _i=new Map,Kh=new Set;function lr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fo=Ce.d;Ce.d={f:Yv,r:Jv,D:Kv,C:Xv,L:Qv,m:Wv,X:ex,S:Zv,M:tx};function Yv(){var e=fo.f(),i=Xa();return e||i}function Jv(e){var i=vo(e);i!==null&&i.tag===5&&i.type==="form"?fp(i):fo.r(e)}var $l=typeof document>"u"?null:document;function Xh(e,i,l){var a=$l;if(a&&typeof i=="string"&&i){var p=Mn(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Kh.has(p)||(Kh.add(p),e={rel:e,crossOrigin:l,href:i},a.querySelector(p)===null&&(i=a.createElement("link"),Un(i,"link",e),dn(i),a.head.appendChild(i)))}}function Kv(e){fo.D(e),Xh("dns-prefetch",e,null)}function Xv(e,i){fo.C(e,i),Xh("preconnect",e,i)}function Qv(e,i,l){fo.L(e,i,l);var a=$l;if(a&&e&&i){var p='link[rel="preload"][as="'+Mn(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Mn(l.imageSizes)+'"]')):p+='[href="'+Mn(e)+'"]';var g=p;switch(i){case"style":g=Yl(e);break;case"script":g=Jl(e)}_i.has(g)||(e=b({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),_i.set(g,e),a.querySelector(p)!==null||i==="style"&&a.querySelector(qs(g))||i==="script"&&a.querySelector($s(g))||(i=a.createElement("link"),Un(i,"link",e),dn(i),a.head.appendChild(i)))}}function Wv(e,i){fo.m(e,i);var l=$l;if(l&&e){var a=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Mn(a)+'"][href="'+Mn(e)+'"]',g=p;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Jl(e)}if(!_i.has(g)&&(e=b({rel:"modulepreload",href:e},i),_i.set(g,e),l.querySelector(p)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($s(g)))return}a=l.createElement("link"),Un(a,"link",e),dn(a),l.head.appendChild(a)}}}function Zv(e,i,l){fo.S(e,i,l);var a=$l;if(a&&e){var p=Zn(a).hoistableStyles,g=Yl(e);i=i||"default";var S=p.get(g);if(!S){var C={loading:0,preload:null};if(S=a.querySelector(qs(g)))C.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":i},l),(l=_i.get(g))&&Pu(e,l);var z=S=a.createElement("link");dn(z),Un(z,"link",e),z._p=new Promise(function(K,he){z.onload=K,z.onerror=he}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,sr(S,i,a)}S={type:"stylesheet",instance:S,count:1,state:C},p.set(g,S)}}}function ex(e,i){fo.X(e,i);var l=$l;if(l&&e){var a=Zn(l).hoistableScripts,p=Jl(e),g=a.get(p);g||(g=l.querySelector($s(p)),g||(e=b({src:e,async:!0},i),(i=_i.get(p))&&Hu(e,i),g=l.createElement("script"),dn(g),Un(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(p,g))}}function tx(e,i){fo.M(e,i);var l=$l;if(l&&e){var a=Zn(l).hoistableScripts,p=Jl(e),g=a.get(p);g||(g=l.querySelector($s(p)),g||(e=b({src:e,async:!0,type:"module"},i),(i=_i.get(p))&&Hu(e,i),g=l.createElement("script"),dn(g),Un(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(p,g))}}function Qh(e,i,l,a){var p=(p=w.current)?lr(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Yl(l.href),l=Zn(p).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Yl(l.href);var g=Zn(p).hoistableStyles,S=g.get(e);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,S),(g=p.querySelector(qs(e)))&&!g._p&&(S.instance=g,S.state.loading=5),_i.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_i.set(e,l),g||nx(p,e,l,S.state))),i&&a===null)throw Error(s(528,""));return S}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Jl(l),l=Zn(p).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Yl(e){return'href="'+Mn(e)+'"'}function qs(e){return'link[rel="stylesheet"]['+e+"]"}function Wh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function nx(e,i,l,a){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=e.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Un(i,"link",l),dn(i),e.head.appendChild(i))}function Jl(e){return'[src="'+Mn(e)+'"]'}function $s(e){return"script[async]"+e}function Zh(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=e.querySelector('style[data-href~="'+Mn(l.href)+'"]');if(a)return i.instance=a,dn(a),a;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),dn(a),Un(a,"style",p),sr(a,l.precedence,e),i.instance=a;case"stylesheet":p=Yl(l.href);var g=e.querySelector(qs(p));if(g)return i.state.loading|=4,i.instance=g,dn(g),g;a=Wh(l),(p=_i.get(p))&&Pu(a,p),g=(e.ownerDocument||e).createElement("link"),dn(g);var S=g;return S._p=new Promise(function(C,z){S.onload=C,S.onerror=z}),Un(g,"link",a),i.state.loading|=4,sr(g,l.precedence,e),i.instance=g;case"script":return g=Jl(l.src),(p=e.querySelector($s(g)))?(i.instance=p,dn(p),p):(a=l,(p=_i.get(g))&&(a=b({},l),Hu(a,p)),e=e.ownerDocument||e,p=e.createElement("script"),dn(p),Un(p,"link",a),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,sr(a,l.precedence,e));return i.instance}function sr(e,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=a.length?a[a.length-1]:null,g=p,S=0;S<a.length;S++){var C=a[S];if(C.dataset.precedence===i)g=C;else if(g!==p)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function Pu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Hu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ar=null;function e0(e,i,l){if(ar===null){var a=new Map,p=ar=new Map;p.set(l,a)}else p=ar,a=p.get(l),a||(a=new Map,p.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),p=0;p<l.length;p++){var g=l[p];if(!(g[Fi]||g[qe]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=e+S;var C=a.get(S);C?C.push(g):a.set(S,[g])}}return a}function t0(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function ix(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function n0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ox(e,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Yl(a.href),g=i.querySelector(qs(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=rr.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,dn(g);return}g=i.ownerDocument||i,a=Wh(a),(p=_i.get(p))&&Pu(a,p),g=g.createElement("link"),dn(g);var S=g;S._p=new Promise(function(C,z){S.onload=C,S.onerror=z}),Un(g,"link",a),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=rr.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var Gu=0;function lx(e,i){return e.stylesheets&&e.count===0&&ur(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&ur(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&Gu===0&&(Gu=62500*Hv());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ur(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Gu?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(p)}}:null}function rr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ur(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var cr=null;function ur(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,cr=new Map,i.forEach(sx,e),cr=null,rr.call(e))}function sx(e,i){if(!(i.state.loading&4)){var l=cr.get(e);if(l)var a=l.get(null);else{l=new Map,cr.set(e,l);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),a=S)}a&&l.set(null,a)}p=i.instance,S=p.getAttribute("data-precedence"),g=l.get(S)||a,g===a&&l.set(null,p),l.set(S,p),this.count++,a=rr.bind(this),p.addEventListener("load",a),p.addEventListener("error",a),g?g.parentNode.insertBefore(p,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var Ys={$$typeof:pe,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function ax(e,i,l,a,p,g,S,C,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=a,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function i0(e,i,l,a,p,g,S,C,z,K,he,we){return e=new ax(e,i,l,S,z,K,he,we,C),i=1,g===!0&&(i|=24),g=ni(3,null,null,i),e.current=g,g.stateNode=e,i=xc(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:i},wc(g),e}function o0(e){return e?(e=Cl,e):Cl}function l0(e,i,l,a,p,g){p=o0(p),a.context===null?a.context=p:a.pendingContext=p,a=_o(i),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=No(e,a,i),l!==null&&(Qn(l,e,i),Cs(l,e,i))}function s0(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function Bu(e,i){s0(e,i),(e=e.alternate)&&s0(e,i)}function a0(e){if(e.tag===13||e.tag===31){var i=el(e,67108864);i!==null&&Qn(i,e,67108864),Bu(e,67108864)}}function r0(e){if(e.tag===13||e.tag===31){var i=ai();i=qi(i);var l=el(e,i);l!==null&&Qn(l,e,i),Bu(e,i)}}var dr=!0;function rx(e,i,l,a){var p=j.T;j.T=null;var g=Ce.p;try{Ce.p=2,ju(e,i,l,a)}finally{Ce.p=g,j.T=p}}function cx(e,i,l,a){var p=j.T;j.T=null;var g=Ce.p;try{Ce.p=8,ju(e,i,l,a)}finally{Ce.p=g,j.T=p}}function ju(e,i,l,a){if(dr){var p=Vu(a);if(p===null)Au(e,i,a,fr,l),u0(e,a);else if(dx(p,e,i,l,a))a.stopPropagation();else if(u0(e,a),i&4&&-1<ux.indexOf(e)){for(;p!==null;){var g=vo(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=ct(g.pendingLanes);if(S!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var z=1<<31-Je(S);C.entanglements[1]|=z,S&=~z}Vi(g),($t&6)===0&&(Ja=ye()+500,Bs(0))}}break;case 31:case 13:C=el(g,2),C!==null&&Qn(C,g,2),Xa(),Bu(g,2)}if(g=Vu(a),g===null&&Au(e,i,a,fr,l),g===p)break;p=g}p!==null&&a.stopPropagation()}else Au(e,i,a,null,l)}}function Vu(e){return e=Rn(e),Ou(e)}var fr=null;function Ou(e){if(fr=null,e=$i(e),e!==null){var i=d(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return fr=e,null}function c0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case E:return 2;case D:return 8;case O:case R:return 32;case ee:return 268435456;default:return 32}default:return 32}}var qu=!1,Po=null,Ho=null,Go=null,Js=new Map,Ks=new Map,Bo=[],ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u0(e,i){switch(e){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":Ho=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":Js.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(i.pointerId)}}function Xs(e,i,l,a,p,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[p]},i!==null&&(i=vo(i),i!==null&&a0(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function dx(e,i,l,a,p){switch(i){case"focusin":return Po=Xs(Po,e,i,l,a,p),!0;case"dragenter":return Ho=Xs(Ho,e,i,l,a,p),!0;case"mouseover":return Go=Xs(Go,e,i,l,a,p),!0;case"pointerover":var g=p.pointerId;return Js.set(g,Xs(Js.get(g)||null,e,i,l,a,p)),!0;case"gotpointercapture":return g=p.pointerId,Ks.set(g,Xs(Ks.get(g)||null,e,i,l,a,p)),!0}return!1}function d0(e){var i=$i(e.target);if(i!==null){var l=d(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,$o(e.priority,function(){r0(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,$o(e.priority,function(){r0(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pr(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Vu(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);mt=a,l.target.dispatchEvent(a),mt=null}else return i=vo(l),i!==null&&a0(i),e.blockedOn=l,!1;i.shift()}return!0}function f0(e,i,l){pr(e)&&l.delete(i)}function fx(){qu=!1,Po!==null&&pr(Po)&&(Po=null),Ho!==null&&pr(Ho)&&(Ho=null),Go!==null&&pr(Go)&&(Go=null),Js.forEach(f0),Ks.forEach(f0)}function hr(e,i){e.blockedOn===i&&(e.blockedOn=null,qu||(qu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fx)))}var mr=null;function p0(e){mr!==e&&(mr=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mr===e&&(mr=null);for(var i=0;i<e.length;i+=3){var l=e[i],a=e[i+1],p=e[i+2];if(typeof a!="function"){if(Ou(a||l)===null)continue;break}var g=vo(l);g!==null&&(e.splice(i,3),i-=3,Vc(g,{pending:!0,data:p,method:l.method,action:a},a,p))}}))}function Kl(e){function i(z){return hr(z,e)}Po!==null&&hr(Po,e),Ho!==null&&hr(Ho,e),Go!==null&&hr(Go,e),Js.forEach(i),Ks.forEach(i);for(var l=0;l<Bo.length;l++){var a=Bo[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Bo.length&&(l=Bo[0],l.blockedOn===null);)d0(l),l.blockedOn===null&&Bo.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var p=l[a],g=l[a+1],S=p[ht]||null;if(typeof g=="function")S||p0(l);else if(S){var C=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[ht]||null)C=S.formAction;else if(Ou(p)!==null)continue}else C=S.action;typeof C=="function"?l[a+1]=C:(l.splice(a,3),a-=3),p0(l)}}}function h0(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function $u(e){this._internalRoot=e}gr.prototype.render=$u.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=ai();l0(l,a,e,i,null,null)},gr.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;l0(e.current,2,null,e,null,null),Xa(),i[Rt]=null}};function gr(e){this._internalRoot=e}gr.prototype.unstable_scheduleHydration=function(e){if(e){var i=go();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Bo.length&&i!==0&&i<Bo[l].priority;l++);Bo.splice(l,0,e),l===0&&d0(e)}};var m0=t.version;if(m0!=="19.2.3")throw Error(s(527,m0,"19.2.3"));Ce.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var px={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yr.isDisabled&&yr.supportsFiber)try{se=yr.inject(px),fe=yr}catch{}}return Ws.createRoot=function(e,i){if(!r(e))throw Error(s(299));var l=!1,a="",p=Tp,g=wp,S=Ep;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=i0(e,1,!1,null,null,l,a,null,p,g,S,h0),e[Rt]=i.current,Nu(e),new $u(i)},Ws.hydrateRoot=function(e,i,l){if(!r(e))throw Error(s(299));var a=!1,p="",g=Tp,S=wp,C=Ep,z=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),i=i0(e,1,!0,i,l??null,a,p,z,g,S,C,h0),i.context=o0(null),l=i.current,a=ai(),a=qi(a),p=_o(a),p.callback=null,No(l,p,a),l=a,i.current.lanes=l,St(i,l),Vi(i),e[Rt]=i.current,Nu(e),new gr(i)},Ws.version="19.2.3",Ws}var C0;function wx(){if(C0)return Ku.exports;C0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ku.exports=Tx(),Ku.exports}var Ex=wx();const Cx=Tg(Ex),_x="modulepreload",Nx=function(n){return"/"+n},_0={},ad=function(t,o,s){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=Nx(m),m in _0)return;_0[m]=!0;const x=m.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":_x,x||(T.as="script"),T.crossOrigin="",T.href=m,y&&T.setAttribute("nonce",y),document.head.appendChild(T),x)return new Promise((N,_)=>{T.addEventListener("load",N),T.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&d(y.reason);return t().catch(d)})};const Ax=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),N0=n=>{const t=Mx(n);return t.charAt(0).toUpperCase()+t.slice(1)},Eg=(...n)=>n.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),Rx=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ix=Z.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:r="",children:d,iconNode:h,...y},v)=>Z.createElement("svg",{ref:v,...kx,width:t,height:t,stroke:n,strokeWidth:s?Number(o)*24/Number(t):o,className:Eg("lucide",r),...!d&&!Rx(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>Z.createElement(m,x)),...Array.isArray(d)?d:[d]]));const it=(n,t)=>{const o=Z.forwardRef(({className:s,...r},d)=>Z.createElement(Ix,{ref:d,iconNode:t,className:Eg(`lucide-${Ax(N0(n))}`,`lucide-${n}`,s),...r}));return o.displayName=N0(n),o};const zx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],A0=it("align-vertical-justify-center",zx);const Dx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],Lx=it("align-vertical-justify-end",Dx);const Ux=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],Fx=it("align-vertical-justify-start",Ux);const Px=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Zu=it("bold",Px);const Hx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gx=it("check",Hx);const Bx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],da=it("chevron-down",Bx);const jx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rd=it("chevron-up",jx);const Vx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ox=it("circle-alert",Vx);const qx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],$x=it("clipboard",qx);const Yx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Jx=it("copy",Yx);const Kx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xx=it("disc",Kx);const Qx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Wx=it("download",Qx);const Zx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ia=it("eye-off",Zx);const eb=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oa=it("eye",eb);const tb=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],nb=it("fast-forward",tb);const ib=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ir=it("file-text",ib);const ob=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Cg=it("film",ob);const lb=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sb=it("folder",lb);const ab=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],vr=it("grip-horizontal",ab);const rb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],M0=it("image",rb);const cb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ub=it("info",cb);const db=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ed=it("italic",db);const fb=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pb=it("key",fb);const hb=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],zr=it("keyboard",hb);const mb=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Dr=it("list-music",mb);const gb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],R0=it("loader-circle",gb);const yb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],aa=it("maximize",yb);const vb=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],k0=it("minimize",vb);const xb=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Wl=it("music",xb);const bb=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Sb=it("palette",bb);const Tb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],wb=it("panels-top-left",Tb);const Eb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],_g=it("pause",Eb);const Cb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],cd=it("play",Cb);const _b=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ng=it("plus",_b);const Nb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Ab=it("redo-2",Nb);const Mb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],Rb=it("repeat-1",Mb);const kb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],I0=it("repeat",kb);const Ib=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],zb=it("rewind",Ib);const Db=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ud=it("rotate-ccw",Db);const Lb=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Ub=it("scissors",Lb);const Fb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Pb=it("search",Fb);const Hb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ar=it("settings",Hb);const Gb=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Bb=it("shuffle",Gb);const jb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Vb=it("skip-back",jb);const Ob=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],qb=it("skip-forward",Ob);const $b=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dd=it("sparkles",$b);const Yb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Jb=it("split",Yb);const Kb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],fd=it("square",Kb);const Xb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Qb=it("strikethrough",Xb);const Wb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ns=it("trash-2",Wb);const Zb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e1=it("triangle-alert",Zb);const t1=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Oo=it("type",t1);const n1=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],i1=it("underline",n1);const o1=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],l1=it("undo-2",o1);const s1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Oi=it("upload",s1);const a1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],r1=it("user",a1);const c1=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ra=it("video",c1);const u1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Vo=it("volume-2",u1);const d1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Xl=it("volume-x",d1);const f1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ri=it("x",f1);const p1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],h1=it("zoom-in",p1);const m1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],g1=it("zoom-out",m1);var Fn=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(Fn||{});const Rd=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},la=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let s=0;return o.length===3?(s+=parseInt(o[0],10)*3600,s+=parseInt(o[1],10)*60,s+=parseFloat(o[2])):o.length===2?(s+=parseInt(o[0],10)*60,s+=parseFloat(o[1])):o.length===1&&(s+=parseFloat(o[0])),isNaN(s)?0:s},Zl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},is=n=>{const t=n.split(`
`),o=[],s=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(d=>{const h=[...d.matchAll(s)];if(h.length>0){let y=d.replace(s,"").trim();y=y.replace(/\\n/g,`
`);const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(v.length>0){m=[];for(let b=0;b<v.length;b++){const T=v[b],N=parseInt(T[1],10),_=parseInt(T[2],10),q=T[4];let P=N*60+_;q&&(P+=parseInt(q,10)/(q.length===3?1e3:100));const Y=(T.index||0)+T[0].length,de=b<v.length-1?v[b+1].index:y.length,pe=y.substring(Y,de);if(pe){const ve=pe.split(`
`);ve.forEach((Le,Be)=>{Le&&m.push({text:Le,startTime:P,endTime:0}),Be<ve.length-1&&m.push({text:`
`,startTime:P,endTime:0})})}}for(let b=0;b<m.length;b++)b<m.length-1?m[b].endTime=m[b+1].startTime:m[b].endTime=m[b].startTime+.5}h.forEach(b=>{const T=parseInt(b[1],10),N=parseInt(b[2],10),_=b[4];let q=T*60+N;_&&(_.length===2?q+=parseInt(_,10)/100:(_.length,q+=parseInt(_,10)/1e3)),o.push({time:q,text:x,words:m})})}}),o.sort((d,h)=>d.time-h.time)},os=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),s=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,d=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),b=parseInt(y[4],10);return v*3600+m*60+x+b/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),b=Rd(x),T=v.split(" --> ");if(T.length>=2){const N=d(T[0]),_=d(T[1]);N!==null&&b&&s.push({time:N,text:b,endTime:_!==null?_:void 0})}}}),s},ca=n=>{const t=[];try{const s=new DOMParser().parseFromString(n,"text/xml"),d=Array.from(s.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):la(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<d.length;v++){const m=d[v],x=y(m,"begin"),b=y(m,"end"),T=Rd(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const N=h(x),_=h(b),q=[],Y=Array.from(m.getElementsByTagName("*")).filter(de=>de.localName==="span");for(let de=0;de<Y.length;de++){const pe=Y[de],ve=y(pe,"begin"),Le=y(pe,"end"),Be=pe.textContent?.replace(/\s+/g," ");if(ve&&Le&&Be&&Be.length>0){const Te=h(ve),We=h(Le);Te!==void 0&&We!==void 0&&q.push({text:Be,startTime:Te,endTime:We})}}N!==void 0&&t.push({time:N,text:T,endTime:_,words:q.length>0?q:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,s)=>o.time-s.time)},y1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(s=>typeof s=="object"&&s!==null&&typeof s.time=="number"&&typeof s.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},ua=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`),s=[],r=/(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})/,d=y=>{const v=y.match(r);if(v){const m=v[1]?parseInt(v[1].replace(":",""),10):0,x=parseInt(v[2],10),b=parseInt(v[3],10),T=parseInt(v[4],10);return m*3600+x*60+b+T/1e3}return null};let h=0;for(o[0]&&o[0].startsWith("WEBVTT")&&(h=1);h<o.length;){const y=o[h].trim();if(y.includes("-->")){const v=y.split("-->");if(v.length>=2){const m=v[0].trim(),x=v[1].trim().split(" ")[0],b=d(m),T=d(x);if(b!==null){h++;let N=[];for(;h<o.length;){const _=o[h].trim();if(_===""||_.includes("-->"))break;N.push(o[h]),h++}if(h<o.length&&o[h].includes("-->"),N.length>0){const _=N.join(" ").trim(),q=/<(\d{2}:)?(\d{2}):(\d{2})\.(\d{3})>/g;let P;const Y=[..._.matchAll(q)];if(Y.length>0){P=[],Y.forEach((ve,Le)=>{const Be=ve[1]?parseInt(ve[1].replace(":",""),10):0,Te=parseInt(ve[2],10),We=parseInt(ve[3],10),Ne=parseInt(ve[4],10),Qe=Be*3600+Te*60+We+Ne/1e3,He=(ve.index||0)+ve[0].length;let rt=_.length;Le+1<Y.length&&(rt=Y[Le+1].index||_.length);const ft=_.substring(He,rt);if(Le===0&&(ve.index||0)>0){const _t=_.substring(0,ve.index);_t.trim()&&P.push({text:_t.trim(),startTime:b,endTime:Qe})}ft&&P.push({text:ft,startTime:Qe,endTime:0})});for(let ve=0;ve<P.length;ve++)ve<P.length-1?P[ve].endTime=P[ve+1].startTime:P[ve].endTime=T!==null?T:P[ve].startTime+.5}const de=_.replace(/<[\d:.]+>/g,"").replace(/\s+/g," ").trim(),pe=Rd(de);s.push({time:b,text:pe,endTime:T!==null?T:void 0,words:P&&P.length>0?P:void 0})}continue}}}h++}return s},v1=({toast:n,onRemove:t})=>{const[o,s]=Z.useState(!1);Z.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{s(!0),setTimeout(t,300)},d=()=>{switch(n.type){case"success":return u.jsx(Gx,{size:18,className:"text-green-400"});case"error":return u.jsx(Ox,{size:18,className:"text-red-400"});default:return u.jsx(ub,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return u.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[u.jsx("div",{className:"shrink-0",children:d()}),u.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),u.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:u.jsx(ri,{size:16})})]})},x1=({toasts:n,removeToast:t})=>u.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>u.jsx("div",{className:"pointer-events-auto",children:u.jsx(v1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),b1=({isOpen:n,message:t,onConfirm:o,onCancel:s,title:r="Confirm Action"})=>{const[d,h]=Z.useState(!1);return Z.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),Z.useEffect(()=>{const y=v=>{n&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),s()))};return n&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[n,o,s]),!n&&!d?null:u.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),u.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:u.jsx(e1,{className:"text-orange-500",size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),u.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),u.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",children:u.jsx(ri,{size:20})})]})}),u.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[u.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),u.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},Ag=Z.createContext(void 0),jr=()=>{const n=Z.useContext(Ag);if(!n)throw new Error("useUI must be used within a UIProvider");return n},S1=({children:n})=>{const[t,o]=Z.useState([]),s=Z.useCallback((b,T,N)=>{let _,q;typeof N=="number"?_=N:typeof N=="object"&&(_=N.duration,q=N.id);const P=q||Math.random().toString(36).substr(2,9);o(Y=>[...Y.filter(pe=>pe.id!==P),{id:P,type:b,message:T,duration:_}])},[]),r=Z.useCallback(b=>{o(T=>T.filter(N=>N.id!==b))},[]),d={success:(b,T)=>s("success",b,T),error:(b,T)=>s("error",b,T),info:(b,T)=>s("info",b,T)},[h,y]=Z.useState({isOpen:!1,message:"",title:"",resolve:null}),v=Z.useCallback((b,T="Confirm Action")=>new Promise(N=>{y({isOpen:!0,message:b,title:T,resolve:N})}),[]),m=Z.useCallback(()=>{h.resolve&&h.resolve(!0),y(b=>({...b,isOpen:!1,resolve:null}))},[h]),x=Z.useCallback(()=>{h.resolve&&h.resolve(!1),y(b=>({...b,isOpen:!1,resolve:null}))},[h]);return u.jsxs(Ag.Provider,{value:{toast:d,confirm:v},children:[n,u.jsx(x1,{toasts:t,removeToast:r}),u.jsx(b1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},xr=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,T1=(n,t)=>{const o=Math.floor(n/60),s=n%60;return t<1?`${o}:${s.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(s).toString().padStart(2,"0")}`},z0=10,w1=50,Jt={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},E1=n=>new Promise(t=>{const o=URL.createObjectURL(n),s=document.createElement(n.type.startsWith("audio/")?"audio":"video");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(o)},s.onerror=()=>{URL.revokeObjectURL(o),t(0)},s.src=o}),C1=({value:n,onChange:t})=>{const[o,s]=Z.useState(n.toString());Z.useEffect(()=>{const h=parseFloat(o);!isNaN(h)&&Math.abs(h-n)<.001||s(n.toString())},[n]);const r=()=>{const h=parseFloat(o);o===""||isNaN(h)?s(n.toString()):t(h)},d=h=>{const y=parseFloat(o),v=isNaN(y)?n:y,m=Math.round((v+h)*100)/100;m<.05||(t(m),s(m.toString()))};return u.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[u.jsx("button",{onClick:()=>d(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:u.jsx(da,{size:10})}),u.jsx("input",{type:"text",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:h=>{/^\d*\.?\d*$/.test(h.target.value)&&s(h.target.value)},onBlur:r,onKeyDown:h=>{h.stopPropagation(),h.key==="ArrowUp"&&(h.preventDefault(),d(.05)),h.key==="ArrowDown"&&(h.preventDefault(),d(-.05)),h.key==="Enter"&&h.currentTarget.blur()}}),u.jsx("button",{onClick:()=>d(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:u.jsx(rd,{size:10})})]})},_1=({slides:n,setSlides:t,currentTime:o,duration:s,lyrics:r,onSeek:d,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=jr(),x=Z.useRef(null),b=Z.useRef(null),T=Z.useRef(null),[N,_]=Z.useState(40),[q,P]=Z.useState([n]),[Y,de]=Z.useState(0),pe=Z.useRef(!1);Z.useEffect(()=>{if(pe.current){pe.current=!1;return}const E=q[Y];if(JSON.stringify(E)!==JSON.stringify(n)){const D=q.slice(0,Y+1);D.push(n),D.length>w1?(D.shift(),P(D)):(P(D),de(Y+1))}},[n,q,Y]);const ve=Y>0,Le=Y<q.length-1,Be=Z.useCallback(()=>{if(Y>0){const E=Y-1;de(E),pe.current=!0,t(q[E])}},[t,q,Y]),Te=Z.useCallback(()=>{if(Y<q.length-1){const E=Y+1;de(E),pe.current=!0,t(q[E])}},[t,q,Y]),We=Math.max(0,...n.map(E=>E.endTime)),Ne=Math.max(s,60,We),Qe=Ne*N,[He,rt]=Z.useState([]),[ft,_t]=Z.useState(null),[Nt,j]=Z.useState([]),Ce=Z.useCallback(()=>{if(He.length===0)return;const E=n.filter(D=>He.includes(D.id));j(E)},[He,n]),oe=Z.useCallback(()=>{if(He.length===0)return;const E=n.filter(D=>He.includes(D.id));j(E),t(D=>D.filter(O=>!He.includes(O.id))),rt([])},[He,n,t]),yt=Z.useRef(n),vt=Z.useRef(N);Z.useEffect(()=>{yt.current=n,vt.current=N},[n,N]);const U=Z.useCallback(()=>{if(Nt.length===0)return;const E=Math.min(...Nt.map(R=>R.startTime)),D=o-E,O=Nt.map(R=>({...R,id:Math.random().toString(36).substr(2,9),startTime:R.startTime+D,endTime:R.endTime+D}));t(R=>[...R,...O].sort((ee,L)=>ee.startTime-L.startTime)),rt(O.map(R=>R.id))},[Nt,o,t]),le=Z.useCallback(()=>{const E=n.filter(ee=>He.includes(ee.id)&&o>ee.startTime&&o<ee.endTime);if(E.length===0)return;let D=[];const O=[],R=[];E.forEach(ee=>{const L=o,re={...ee,id:Math.random().toString(36).substr(2,9),endTime:L},se=L-ee.startTime,fe={...ee,id:Math.random().toString(36).substr(2,9),startTime:L,mediaStartOffset:(ee.mediaStartOffset||0)+se};O.push(ee.id),D.push(re,fe),R.push(fe.id)}),t(ee=>[...ee.filter(re=>!O.includes(re.id)),...D].sort((re,se)=>re.startTime-se.startTime)),rt(R)},[n,He,o,t]),[xe,je]=Z.useState(null),[st,w]=Z.useState(!1),[A,te]=Z.useState(null),ce=async E=>{if(E.target.files&&E.target.files.length>0){const D=Array.from(E.target.files),O=D.every(ee=>ee.type.startsWith("image/")),R=[];if(O){const ee=D.length,L=o,se=Math.max(0,s-L)/ee,fe=Math.max(3,se);D.forEach((G,Je)=>{const Ke=URL.createObjectURL(G),Ue=L+Je*fe,M=Ue+fe;R.push({id:Math.random().toString(36).substr(2,9),url:Ke,type:"image",startTime:Ue,endTime:M,name:G.name,layer:0})})}else{let ee=o;for(const L of D){const re=L.type.startsWith("image/")?"image":L.type.startsWith("video/")?"video":"audio";let se=5;if(re!=="image"){const G=await E1(L);G>0&&(se=G)}const fe=URL.createObjectURL(L);R.push({id:Math.random().toString(36).substr(2,9),url:fe,type:re,startTime:ee,endTime:ee+se,mediaDuration:re!=="image"?se:void 0,name:L.name,isMuted:re==="video",volume:re==="video"||re==="audio"?1:void 0,layer:0}),ee+=se}}t(ee=>[...ee,...R].sort((L,re)=>L.startTime-re.startTime)),E.target.value=""}},Ge=E=>{t(D=>D.filter(O=>O.id!==E))},_e=async E=>{E.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},Ee=(E,D,O)=>{if(E.stopPropagation(),E.preventDefault(),x.current?.focus(),E.shiftKey&&ft){const fe=n.findIndex(Je=>Je.id===ft),G=n.findIndex(Je=>Je.id===D);if(fe!==-1&&G!==-1){const Je=Math.min(fe,G),Ke=Math.max(fe,G),Ue=n.slice(Je,Ke+1).map(M=>M.id);rt(M=>{const Ze=new Set([...M,...Ue]);return Array.from(Ze)})}}else E.ctrlKey||E.metaKey?(rt(fe=>fe.includes(D)?fe.filter(G=>G!==D):[...fe,D]),_t(D)):(He.includes(D)||rt([D]),_t(D));const R=n.find(fe=>fe.id===D);if(!R)return;const ee=He.includes(D),L=E.ctrlKey||E.metaKey||E.shiftKey;let re=[];if(!L&&!ee)re=[D];else if(L){if(re=[D],(E.ctrlKey||E.metaKey)&&!ee)re=[...He,D];else if((E.ctrlKey||E.metaKey)&&ee){re=He.filter(fe=>fe!==D);return}}else re=He;const se={};n.forEach(fe=>{re.includes(fe.id)&&(se[fe.id]={start:fe.startTime,end:fe.endTime})}),se[D]||(se[D]={start:R.startTime,end:R.endTime}),je({id:D,type:O,startX:E.clientX,initialStart:R.startTime,initialEnd:R.endTime,initialMap:se}),window.addEventListener("mousemove",H),window.addEventListener("mouseup",ae)},Re=E=>{E.button===0&&(E.stopPropagation(),x.current?.focus(),rt([]),w(!0),ne(E.clientX),window.addEventListener("mousemove",ge),window.addEventListener("mouseup",Oe))},I=E=>{if(E.button!==0)return;x.current?.focus();const D=E.clientX,O=E.clientY,R=T.current?.getBoundingClientRect();if(!R)return;const ee=D-R.left,L=O-R.top;let re=!1;const se=G=>{const Je=Math.sqrt(Math.pow(G.clientX-D,2)+Math.pow(G.clientY-O,2));if(!re&&Je>5&&(re=!0,te({x:ee,y:L,w:0,h:0})),re&&T.current){const Ke=T.current.getBoundingClientRect(),Ue=G.clientX-Ke.left,M=G.clientY-Ke.top;te(St=>{if(!St)return null;const lt=Ue-ee,Gt=M-L;return{x:lt>0?ee:Ue,y:Gt>0?L:M,w:Math.abs(lt),h:Math.abs(Gt)}});const Ze=[],Dt=yt.current,Yt=vt.current,ct=Math.min(ee,Ue),ze=Math.min(L,M),xt=Math.abs(Ue-ee),Fe=Math.abs(M-L),Pe=ct+xt,bt=ze+Fe;Dt.forEach(St=>{const lt=St.startTime*Yt+96,Gt=St.endTime*Yt+96;let yn=0,$n=0;const qi=St.layer||0;St.type==="audio"?qi===0?(yn=Jt.AUDIO_L1_TOP,$n=Jt.AUDIO_L1_TOP+Jt.AUDIO_L1_HEIGHT):(yn=Jt.AUDIO_L2_TOP,$n=Jt.AUDIO_L2_TOP+Jt.AUDIO_L2_HEIGHT):qi===0?(yn=Jt.VISUAL_L1_TOP,$n=Jt.VISUAL_L1_TOP+Jt.VISUAL_L1_HEIGHT):(yn=Jt.VISUAL_L2_TOP,$n=Jt.VISUAL_L2_TOP+Jt.VISUAL_L2_HEIGHT);const ci=ct<Gt&&Pe>lt,go=ze<$n&&bt>yn;ci&&go&&Ze.push(St.id)}),rt(Ze)}},fe=G=>{re||(rt([]),ne(G.clientX)),te(null),window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",fe)};window.addEventListener("mousemove",se),window.addEventListener("mouseup",fe)},ne=E=>{if(!T.current)return;const D=T.current.getBoundingClientRect(),O=E-D.left-96;let R=Math.max(0,Math.min(O/N,Ne));R=Xe(R),d(R)},ge=E=>{ne(E.clientX)},Oe=()=>{w(!1),window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",Oe)},ke=E=>{const D=E.target;if(!(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.isContentEditable)){if((E.ctrlKey||E.metaKey)&&E.key==="z"&&!E.shiftKey){E.preventDefault(),Be();return}if((E.ctrlKey||E.metaKey)&&(E.key==="y"||E.key==="z"&&E.shiftKey)){E.preventDefault(),Te();return}if((E.ctrlKey||E.metaKey)&&E.key==="c"){E.preventDefault(),Ce();return}if((E.ctrlKey||E.metaKey)&&E.key==="x"){E.preventDefault(),oe();return}if((E.ctrlKey||E.metaKey)&&E.key==="v"){E.preventDefault(),U();return}if(E.key.toLowerCase()==="x"&&!E.ctrlKey&&!E.metaKey||(E.ctrlKey||E.metaKey)&&E.key==="k"){E.preventDefault(),E.stopPropagation(),le();return}if((E.key==="Delete"||E.key==="Backspace")&&He.length>0&&(E.preventDefault(),t(O=>O.filter(R=>!He.includes(R.id))),rt([])),He.length>0&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault(),E.stopPropagation();const O=E.key==="ArrowRight"?.01:-.01,R=n.find(ee=>ee.id===He[0]);if(R){const ee=Math.max(0,R.startTime+O);d(ee)}t(ee=>ee.map(re=>{if(He.includes(re.id)){const se=re.endTime-re.startTime;let fe=re.startTime+O;return fe=Math.max(0,fe),{...re,startTime:fe,endTime:fe+se}}return re}).sort((re,se)=>re.startTime-se.startTime))}}},Xe=(E,D=[])=>{const O=z0/N,R=[0,s,o],ee=xr(N),L=Math.round(E/ee)*ee;R.push(L),n.forEach(fe=>{D.includes(fe.id)||(R.push(fe.startTime),R.push(fe.endTime))}),r.forEach(fe=>{R.push(fe.time)});let re=E,se=O;for(const fe of R){const G=Math.abs(fe-E);G<se&&(se=G,re=fe)}return re},H=E=>{je(D=>{if(!D)return null;const R=(E.clientX-D.startX)/N;return t(ee=>{if(D.type==="move"){const L=Object.keys(D.initialMap),re=Object.values(D.initialMap),se=Math.min(...re.map(ze=>ze.start)),fe=Math.max(...re.map(ze=>ze.end)),G=D.initialMap[D.id],Je=[{type:"drag-start",initVal:G.start},{type:"drag-end",initVal:G.end},{type:"group-start",initVal:se},{type:"group-end",initVal:fe}],Ke=z0/N,Ue=[0,s,o],M=xr(N);n.forEach(ze=>{L.includes(ze.id)||(Ue.push(ze.startTime),Ue.push(ze.endTime))}),r.forEach(ze=>{Ue.push(ze.time)});let Ze=R,Dt=Ke,Yt=!1;Je.forEach(ze=>{const xt=ze.initVal+R;for(const bt of Ue){const St=Math.abs(bt-xt);St<Dt&&(Dt=St,Ze=bt-ze.initVal,Yt=!0)}const Fe=Math.round(xt/M)*M,Pe=Math.abs(Fe-xt);Pe<Dt&&(Dt=Pe,Ze=Fe-ze.initVal,Yt=!0)});let ct=Yt?Ze:R;return se+ct<0&&(ct=-se),ee.map(ze=>{const xt=D.initialMap[ze.id];if(xt){const Fe=xt.end-xt.start;let Pe=ze.layer||0;const bt=(lt,Gt,yn)=>lt>=Gt&&lt<=Gt+yn,St=T.current?.getBoundingClientRect();if(St){const lt=E.clientY-St.top;ze.type==="audio"?(bt(lt,Jt.AUDIO_L1_TOP,Jt.AUDIO_L1_HEIGHT)&&(Pe=0),bt(lt,Jt.AUDIO_L2_TOP,Jt.AUDIO_L2_HEIGHT)&&(Pe=1)):(bt(lt,Jt.VISUAL_L1_TOP,Jt.VISUAL_L1_HEIGHT)&&(Pe=0),bt(lt,Jt.VISUAL_L2_TOP,Jt.VISUAL_L2_HEIGHT)&&(Pe=1))}return{...ze,startTime:xt.start+ct,endTime:xt.start+ct+Fe,layer:Pe}}return ze})}else if(D.type==="resize-start"){let L=D.initialStart+R;L=Xe(L,[D.id]);const re=.5,se=D.initialEnd;return L=Math.max(0,Math.min(L,se-re)),ee.map(fe=>fe.id!==D.id?fe:{...fe,startTime:L})}else{let L=D.initialEnd+R;L=Xe(L,[D.id]);const re=.5,se=D.initialStart;return L=Math.max(se+re,L),ee.map(fe=>fe.id!==D.id?fe:{...fe,endTime:L})}}),D})},ae=E=>{xe&&xe.type==="move"&&Math.abs(E.clientX-xe.startX)<5&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&rt([xe.id]),je(null),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",ae),t(D=>[...D].sort((O,R)=>O.startTime-R.startTime))},ue=()=>_(E=>Math.min(200,E+10)),Me=()=>_(E=>Math.max(10,E-10)),ye=(E,D)=>{v(O=>{const R=O.layerVisibility?.[E]||{},ee={...R,[D]:R[D]===!1};return{...O,layerVisibility:{...O.layerVisibility,[E]:ee,...E==="visual"?{audio:O.layerVisibility?.audio||{}}:{visual:O.layerVisibility?.visual||{}}}}})},me=(E,D)=>y.layerVisibility?.[E]?.[D]!==!1;return u.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:E=>E.currentTarget.focus(),onKeyDown:ke,children:[u.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[u.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[u.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[u.jsx(Cg,{size:16,className:"text-purple-400"}),"Timeline"]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[u.jsx(Ng,{size:14})," Import Media",u.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:ce})]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:Me,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:u.jsx(g1,{size:14})}),u.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[N,"px/s"]}),u.jsx("button",{onClick:ue,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:u.jsx(h1,{size:14})})]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:Be,disabled:!ve,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:u.jsx(l1,{size:14})}),u.jsx("button",{onClick:Te,disabled:!Le,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:u.jsx(Ab,{size:14})})]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:Ce,disabled:He.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:u.jsx(Jx,{size:14})}),u.jsx("button",{onClick:oe,disabled:He.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:u.jsx(Ub,{size:14})}),u.jsx("button",{onClick:U,disabled:Nt.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:u.jsx($x,{size:14})})]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsx("div",{className:"flex items-center gap-1",children:u.jsx("button",{onClick:le,disabled:He.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:u.jsx(Jb,{size:14})})}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>{n.length>0&&He.length===n.length?rt([]):rt(n.map(E=>E.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),He.length===1&&u.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[u.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),u.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const E=n.find(D=>D.id===He[0]);return E?Zl(E.endTime-E.startTime):"00:00"})(),onBlur:E=>{const O=E.target.value.split(":");if(O.length===2){const ee=parseInt(O[0])||0,L=parseInt(O[1])||0,re=ee*60+L;re>0&&t(se=>se.map(fe=>fe.id===He[0]?{...fe,endTime:fe.startTime+re}:fe))}const R=n.find(ee=>ee.id===He[0]);R&&(E.target.value=Zl(R.endTime-R.startTime))},onKeyDown:E=>{E.key==="Enter"&&E.currentTarget.blur()}},He[0])]}),He.length===1&&(()=>{const E=n.find(D=>D.id===He[0]);return E&&(E.type==="video"||E.type==="audio")?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[u.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),u.jsxs("div",{className:"flex items-center gap-1 w-20",children:[u.jsx("button",{onClick:()=>{t(D=>D.map(O=>O.id===E.id?{...O,isMuted:!O.isMuted}:O))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?u.jsx(Xl,{size:10}):u.jsx(Vo,{size:10})}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:E.volume!==void 0?E.volume:1,onChange:D=>{const O=parseFloat(D.target.value);t(R=>R.map(ee=>ee.id===E.id?{...ee,volume:O,isMuted:O===0}:ee))}})]}),u.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((E.volume||1)*100),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),u.jsx(C1,{value:E.playbackRate||1,onChange:D=>{t(O=>O.map(R=>R.id===E.id?{...R,playbackRate:D}:R))}})]})]}):null})()]})]}),u.jsxs("div",{className:"flex gap-2 shrink-0",children:[u.jsx("button",{onClick:_e,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:u.jsx(ns,{size:14})}),u.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),u.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:u.jsx(ri,{size:14})})]})]}),u.jsx("div",{ref:b,onWheel:E=>{b.current&&E.shiftKey&&(E.preventDefault(),b.current.scrollLeft+=E.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:u.jsxs("div",{ref:T,className:"relative",style:{width:`${Qe+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:I,children:[A&&u.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:A.x,top:A.y,width:A.w,height:A.h}}),u.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const E=xr(N);return Array.from({length:Math.ceil(Qe/(N*E))}).map((D,O)=>u.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:O*E*N}},O))})(),s>0&&u.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:s*N},children:u.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),u.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:Re,children:[u.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),u.jsx("div",{className:"relative flex-1",children:(()=>{const E=xr(N);return Array.from({length:Math.ceil(Qe/(N*E))}).map((D,O)=>{const R=O*E;return R>Ne?null:u.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:R*N,width:E*N},children:T1(R,E)},O)})})()})]}),u.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*N}px)`,willChange:"transform"},children:u.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),u.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Jt.VISUAL_L1_TOP,height:Jt.VISUAL_L1_HEIGHT},children:[u.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[u.jsx("span",{children:"Visual 1"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),ye("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:me("visual",0)?u.jsx(oa,{size:12}):u.jsx(ia,{size:12,className:"text-zinc-600"})})]}),u.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${me("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&(E.layer===0||E.layer===void 0)).map(E=>u.jsxs("div",{style:{left:E.startTime*N,width:Math.max(10,(E.endTime-E.startTime)*N)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${xe?.id===E.id||He.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${He.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:D=>Ee(D,E.id,"move"),children:[E.type==="video"?u.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):u.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),u.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:u.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&u.jsx("button",{onClick:D=>{D.stopPropagation(),t(O=>O.map(R=>R.id===E.id&&R.mediaDuration?{...R,endTime:R.startTime+R.mediaDuration}:R))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:u.jsx(ud,{size:10})}),E.type==="video"&&u.jsx("button",{onClick:D=>{D.stopPropagation(),t(O=>O.map(R=>R.id===E.id?{...R,isMuted:!R.isMuted}:R))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?u.jsx(Xl,{size:10}):u.jsx(Vo,{size:10})}),u.jsx("button",{onClick:D=>{D.stopPropagation(),Ge(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:u.jsx(ri,{size:10})}),u.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-start"),children:u.jsx(vr,{size:10,className:"text-white/70 rotate-90"})}),u.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-end"),children:u.jsx(vr,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),u.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Jt.VISUAL_L2_TOP,height:Jt.VISUAL_L2_HEIGHT},children:[u.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[u.jsx("span",{children:"Visual 2"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),ye("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:me("visual",1)?u.jsx(oa,{size:12}):u.jsx(ia,{size:12,className:"text-zinc-600"})})]}),u.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${me("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&E.layer===1).map(E=>u.jsxs("div",{style:{left:E.startTime*N,width:Math.max(10,(E.endTime-E.startTime)*N)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${xe?.id===E.id||He.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${He.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:D=>Ee(D,E.id,"move"),children:[E.type==="video"?u.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):u.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),u.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:u.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&E.mediaDuration&&E.endTime-E.startTime>E.mediaDuration+.1&&u.jsx("button",{onClick:D=>{D.stopPropagation(),t(O=>O.map(R=>R.id===E.id&&R.mediaDuration?{...R,endTime:R.startTime+R.mediaDuration}:R))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:u.jsx(ud,{size:10})}),E.type==="video"&&u.jsx("button",{onClick:D=>{D.stopPropagation(),t(O=>O.map(R=>R.id===E.id?{...R,isMuted:!R.isMuted}:R))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:E.isMuted!==!1?u.jsx(Xl,{size:10}):u.jsx(Vo,{size:10})}),u.jsx("button",{onClick:D=>{D.stopPropagation(),Ge(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:u.jsx(ri,{size:10})}),u.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-start"),children:u.jsx(vr,{size:10,className:"text-white/70 rotate-90"})}),u.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-end"),children:u.jsx(vr,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),u.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Jt.LYRICS_TOP,height:Jt.LYRICS_HEIGHT},children:[u.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:u.jsx("span",{children:"Lyrics"})}),u.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((E,D)=>u.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:E.time*N},title:`${Zl(E.time)} - ${E.text}`,onClick:O=>{O.stopPropagation(),d(E.time)},children:[u.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Zl(E.time)}),E.text]},D))})]}),u.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Jt.AUDIO_L1_TOP,height:Jt.AUDIO_L1_HEIGHT},children:[u.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[u.jsx("span",{children:"Audio 1"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),ye("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:me("audio",0)?u.jsx(oa,{size:12}):u.jsx(ia,{size:12,className:"text-zinc-600"})})]}),u.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${me("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&(E.layer===0||E.layer===void 0)).map(E=>u.jsxs("div",{style:{left:E.startTime*N,width:Math.max(10,(E.endTime-E.startTime)*N)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${xe?.id===E.id||He.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${He.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:D=>Ee(D,E.id,"move"),children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:u.jsx(Vo,{size:16,className:"text-emerald-200"})}),u.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:u.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),u.jsx("button",{onClick:D=>{D.stopPropagation(),t(O=>O.map(R=>R.id===E.id?{...R,isMuted:!R.isMuted}:R))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?u.jsx(Xl,{size:10}):u.jsx(Vo,{size:10})}),u.jsx("button",{onClick:D=>{D.stopPropagation(),Ge(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:u.jsx(ri,{size:10})}),u.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-start")}),u.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-end")})]},E.id))})]}),u.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Jt.AUDIO_L2_TOP,height:Jt.AUDIO_L2_HEIGHT},children:[u.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[u.jsx("span",{children:"Audio 2"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),ye("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:me("audio",1)?u.jsx(oa,{size:12}):u.jsx(ia,{size:12,className:"text-zinc-600"})})]}),u.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${me("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&E.layer===1).map(E=>u.jsxs("div",{style:{left:E.startTime*N,width:Math.max(10,(E.endTime-E.startTime)*N)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${xe?.id===E.id||He.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${He.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:D=>Ee(D,E.id,"move"),children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:u.jsx(Vo,{size:16,className:"text-emerald-200"})}),u.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:u.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),u.jsx("button",{onClick:D=>{D.stopPropagation(),t(O=>O.map(R=>R.id===E.id?{...R,isMuted:!R.isMuted}:R))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?u.jsx(Xl,{size:10}):u.jsx(Vo,{size:10})}),u.jsx("button",{onClick:D=>{D.stopPropagation(),Ge(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:u.jsx(ri,{size:10})}),u.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-start")}),u.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:D=>Ee(D,E.id,"resize-end")})]},E.id))})]})]})})]})};var N1={};let A1,M1;function R1(){return{geminiUrl:A1,vertexUrl:M1}}function k1(n,t,o,s){var r,d;if(!n?.baseUrl){const h=R1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(d=h.geminiUrl)!==null&&d!==void 0?d:s}return n.baseUrl}class ho{}function $e(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const d=t[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(n,t,o){for(let d=0;d<t.length-1;d++){const h=t[d];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];f(x,t.slice(d+1),o[m])}else for(const m of v)f(m,t.slice(d+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];f(v[0],t.slice(d+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const s=t[t.length-1],r=n[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[s]=o}function c(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let s=0;s<t.length;s++){if(typeof n!="object"||n===null)return o;const r=t[s];if(r.endsWith("[]")){const d=r.slice(0,-2);if(d in n){const h=n[d];return Array.isArray(h)?h.map(y=>c(y,t.slice(s+1),o)):o}else return o}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return o;throw s}}function I1(n,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),d=s.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&d.length>y)for(let v=y;v<d.length;v++){const m=d[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}pd(n,r,d,0,h)}}function pd(n,t,o,s,r){if(s>=t.length||typeof n!="object"||n===null)return;const d=t[s];if(d.endsWith("[]")){const h=d.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])pd(v,t,o,s+1,r)}else if(d==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const b=[];for(const T of o.slice(s))T==="*"?b.push(m):b.push(T);f(h,b,x)}for(const m of y)delete h[m]}}else{const h=n;d in h&&pd(h[d],t,o,s+1,r)}}function kd(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function z1(n){const t={},o=c(n,["operationName"]);o!=null&&f(t,["operationName"],o);const s=c(n,["resourceName"]);return s!=null&&f(t,["_url","resourceName"],s),t}function D1(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response","generateVideoResponse"]);return h!=null&&f(t,["response"],U1(h)),t}function L1(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response"]);return h!=null&&f(t,["response"],F1(h)),t}function U1(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>P1(h))),f(t,["generatedVideos"],d)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function F1(n){const t={},o=c(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>H1(h))),f(t,["generatedVideos"],d)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function P1(n){const t={},o=c(n,["video"]);return o!=null&&f(t,["video"],q1(o)),t}function H1(n){const t={},o=c(n,["_self"]);return o!=null&&f(t,["video"],$1(o)),t}function G1(n){const t={},o=c(n,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function B1(n){const t={},o=c(n,["operationName"]);return o!=null&&f(t,["_url","operationName"],o),t}function j1(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response"]);return h!=null&&f(t,["response"],V1(h)),t}function V1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["parent"]);s!=null&&f(t,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function Mg(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response"]);return h!=null&&f(t,["response"],O1(h)),t}function O1(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["parent"]);s!=null&&f(t,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function q1(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["uri"],o);const s=c(n,["encodedVideo"]);s!=null&&f(t,["videoBytes"],kd(s));const r=c(n,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function $1(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["uri"],o);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(t,["videoBytes"],kd(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}var D0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(D0||(D0={}));var L0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(L0||(L0={}));var U0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(U0||(U0={}));var un;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(un||(un={}));var F0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(F0||(F0={}));var P0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(P0||(P0={}));var H0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(H0||(H0={}));var G0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(G0||(G0={}));var B0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(B0||(B0={}));var j0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(j0||(j0={}));var V0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(V0||(V0={}));var O0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(O0||(O0={}));var q0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(q0||(q0={}));var $0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})($0||($0={}));var Y0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Y0||(Y0={}));var J0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(J0||(J0={}));var K0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(K0||(K0={}));var X0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(X0||(X0={}));var Q0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Q0||(Q0={}));var Lr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Lr||(Lr={}));var W0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(W0||(W0={}));var Z0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Z0||(Z0={}));var em;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(em||(em={}));var hd;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hd||(hd={}));var tm;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tm||(tm={}));var nm;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nm||(nm={}));var im;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(im||(im={}));var om;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(om||(om={}));var lm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(lm||(lm={}));var sm;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sm||(sm={}));var am;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(am||(am={}));var rm;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(rm||(rm={}));var cm;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(cm||(cm={}));var um;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(um||(um={}));var dm;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dm||(dm={}));var fm;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fm||(fm={}));var pm;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(pm||(pm={}));var hm;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hm||(hm={}));var mm;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(mm||(mm={}));var gm;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(gm||(gm={}));var ym;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ym||(ym={}));var vm;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(vm||(vm={}));var xm;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xm||(xm={}));var bm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bm||(bm={}));var Sm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Sm||(Sm={}));var Tm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Tm||(Tm={}));var wm;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(wm||(wm={}));var Em;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Em||(Em={}));var Cm;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Cm||(Cm={}));var _m;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_m||(_m={}));var Nm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nm||(Nm={}));var Am;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Am||(Am={}));var Mm;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mm||(Mm={}));var Rm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Rm||(Rm={}));var km;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(km||(km={}));var es;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(es||(es={}));class md{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class Zs{get text(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const b=[];for(const T of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[N,_]of Object.entries(T))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(_!==null||_!==void 0)&&b.push(N);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const b of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,N]of Object.entries(b))T!=="inlineData"&&(N!==null||N!==void 0)&&x.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class Im{}class zm{}class Y1{}class J1{}class K1{}class X1{}class Dm{}class Lm{}class Um{}class Q1{}class Ur{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Ur;let r;const d=t;return o?r=L1(d):r=D1(d),Object.assign(s,r),s}}class Fm{}class Pm{}class Hm{}class Gm{}class W1{}class Z1{}class eS{}class Id{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Id,d=j1(t);return Object.assign(s,d),s}}class tS{}class nS{}class iS{}class Bm{}class oS{get text(){var t,o,s;let r="",d=!1;const h=[];for(const y of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;d=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var t,o,s;let r="";const d=[];for(const h of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&d.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class lS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class zd{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new zd,d=Mg(t);return Object.assign(s,d),s}}function Vt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Rg(n,t){const o=Vt(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function kg(n){return Array.isArray(n)?n.map(t=>Fr(t)):[Fr(n)]}function Fr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Ig(n){const t=Fr(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function zg(n){const t=Fr(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function jm(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Dg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>jm(t)):[jm(n)]}function gd(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Vm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Om(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Bn(n){if(n==null)throw new Error("ContentUnion is required");return gd(n)?n:{role:"user",parts:Dg(n)}}function Dd(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=Bn(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const o=Bn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>Bn(o)):[Bn(t)]}function Ai(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Vm(n)||Om(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bn(n)]}const t=[],o=[],s=gd(n[0]);for(const r of n){const d=gd(r);if(d!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(r);else{if(Vm(r)||Om(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:Dg(o)}),t}function sS(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(un).includes(o[0].toUpperCase())?o[0].toUpperCase():un.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(un).includes(s.toUpperCase())?s.toUpperCase():un.TYPE_UNSPECIFIED})}}function ls(n){const t={},o=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=n.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(t.nullable=!0,n=d[1]):d[1].type==="null"&&(t.nullable=!0,n=d[0])),n.type instanceof Array&&sS(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(un).includes(y.toUpperCase())?y.toUpperCase():un.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=ls(y);else if(s.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(ls(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=ls(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function Ld(n){return ls(n)}function Ud(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Fd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function as(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ls(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ls(t.response));return n}function rs(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function aS(n,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function mo(n,t){if(typeof t!="string")throw new Error("name must be a string");return aS(n,t,"cachedContents")}function Lg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function qo(n){return kd(n)}function rS(n){return n!=null&&typeof n=="object"&&"name"in n}function cS(n){return n!=null&&typeof n=="object"&&"video"in n}function uS(n){return n!=null&&typeof n=="object"&&"uri"in n}function Ug(n){var t;let o;if(rS(n)&&(o=n.name),!(uS(n)&&(o=n.uri,o===void 0))&&!(cS(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Fg(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function Pg(n){for(const t of["models","tunedModels","publisherModels"])if(dS(n,t))return n[t];return[]}function dS(n,t){return n!==null&&typeof n=="object"&&t in n}function fS(n,t={}){const o=n,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function pS(n,t={}){const o=[],s=new Set;for(const r of n){const d=r.name;if(s.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);s.add(d);const h=fS(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function Hg(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function hS(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Gg(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let d=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){d=!0;break}}return d&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function cs(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Bg(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function mS(n){const t={},o=c(n,["responsesFile"]);o!=null&&f(t,["fileName"],o);const s=c(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>KS(h))),f(t,["inlinedResponses"],d)}const r=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["inlinedEmbedContentResponses"],d)}return t}function gS(n){const t={},o=c(n,["predictionsFormat"]);o!=null&&f(t,["format"],o);const s=c(n,["gcsDestination","outputUriPrefix"]);s!=null&&f(t,["gcsUri"],s);const r=c(n,["bigqueryDestination","outputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function yS(n){const t={},o=c(n,["format"]);o!=null&&f(t,["predictionsFormat"],o);const s=c(n,["gcsUri"]);s!=null&&f(t,["gcsDestination","outputUriPrefix"],s);const r=c(n,["bigqueryUri"]);if(r!=null&&f(t,["bigqueryDestination","outputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Mr(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata","displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["metadata","state"]);r!=null&&f(t,["state"],Bg(r));const d=c(n,["metadata","createTime"]);d!=null&&f(t,["createTime"],d);const h=c(n,["metadata","endTime"]);h!=null&&f(t,["endTime"],h);const y=c(n,["metadata","updateTime"]);y!=null&&f(t,["updateTime"],y);const v=c(n,["metadata","model"]);v!=null&&f(t,["model"],v);const m=c(n,["metadata","output"]);return m!=null&&f(t,["dest"],mS(Gg(m))),t}function yd(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["state"]);r!=null&&f(t,["state"],Bg(r));const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["createTime"]);h!=null&&f(t,["createTime"],h);const y=c(n,["startTime"]);y!=null&&f(t,["startTime"],y);const v=c(n,["endTime"]);v!=null&&f(t,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&f(t,["updateTime"],m);const x=c(n,["model"]);x!=null&&f(t,["model"],x);const b=c(n,["inputConfig"]);b!=null&&f(t,["src"],vS(b));const T=c(n,["outputConfig"]);T!=null&&f(t,["dest"],gS(Gg(T)));const N=c(n,["completionStats"]);return N!=null&&f(t,["completionStats"],N),t}function vS(n){const t={},o=c(n,["instancesFormat"]);o!=null&&f(t,["format"],o);const s=c(n,["gcsSource","uris"]);s!=null&&f(t,["gcsUri"],s);const r=c(n,["bigquerySource","inputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function xS(n,t){const o={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(t,["fileName"]);s!=null&&f(o,["fileName"],s);const r=c(t,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>JS(n,h))),f(o,["requests","requests"],d)}return o}function bS(n){const t={},o=c(n,["format"]);o!=null&&f(t,["instancesFormat"],o);const s=c(n,["gcsUri"]);s!=null&&f(t,["gcsSource","uris"],s);const r=c(n,["bigqueryUri"]);if(r!=null&&f(t,["bigquerySource","inputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function SS(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function TS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],cs(n,s)),o}function wS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],cs(n,s)),o}function ES(n){const t={},o=c(n,["content"]);o!=null&&f(t,["content"],o);const s=c(n,["citationMetadata"]);s!=null&&f(t,["citationMetadata"],CS(s));const r=c(n,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const d=c(n,["finishReason"]);d!=null&&f(t,["finishReason"],d);const h=c(n,["avgLogprobs"]);h!=null&&f(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&f(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&f(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(N=>N)),f(t,["safetyRatings"],T)}const b=c(n,["urlContextMetadata"]);return b!=null&&f(t,["urlContextMetadata"],b),t}function CS(n){const t={},o=c(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["citations"],s)}return t}function jg(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>nT(d))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function _S(n,t){const o={},s=c(n,["displayName"]);if(t!==void 0&&s!=null&&f(t,["batch","displayName"],s),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function NS(n,t){const o={},s=c(n,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(n,["dest"]);return t!==void 0&&r!=null&&f(t,["outputConfig"],yS(hS(r))),o}function qm(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],xS(n,Hg(n,r)));const d=c(t,["config"]);return d!=null&&_S(d,o),o}function AS(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Vt(n,s));const r=c(t,["src"]);r!=null&&f(o,["inputConfig"],bS(Hg(n,r)));const d=c(t,["config"]);return d!=null&&NS(d,o),o}function MS(n,t){const o={},s=c(n,["displayName"]);return t!==void 0&&s!=null&&f(t,["batch","displayName"],s),o}function RS(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["src"]);r!=null&&f(o,["batch","inputConfig"],FS(n,r));const d=c(t,["config"]);return d!=null&&MS(d,o),o}function kS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],cs(n,s)),o}function IS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],cs(n,s)),o}function zS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);return d!=null&&f(t,["error"],d),t}function DS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);return d!=null&&f(t,["error"],d),t}function LS(n,t){const o={},s=c(t,["contents"]);if(s!=null){let d=Dd(n,s);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["requests[]","request","content"],d)}const r=c(t,["config"]);return r!=null&&(f(o,["_self"],US(r,o)),I1(o,{"requests[].*":"requests[].request.*"})),o}function US(n,t){const o={},s=c(n,["taskType"]);t!==void 0&&s!=null&&f(t,["requests[]","taskType"],s);const r=c(n,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const d=c(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&f(t,["requests[]","outputDimensionality"],d),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function FS(n,t){const o={},s=c(t,["fileName"]);s!=null&&f(o,["file_name"],s);const r=c(t,["inlinedRequests"]);return r!=null&&f(o,["requests"],LS(n,r)),o}function PS(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function HS(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GS(n){const t={},o=c(n,["mode"]);o!=null&&f(t,["mode"],o);const s=c(n,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function BS(n,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],jg(Bn(r)));const d=c(t,["temperature"]);d!=null&&f(s,["temperature"],d);const h=c(t,["topP"]);h!=null&&f(s,["topP"],h);const y=c(t,["topK"]);y!=null&&f(s,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(s,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(s,["logprobs"],T);const N=c(t,["presencePenalty"]);N!=null&&f(s,["presencePenalty"],N);const _=c(t,["frequencyPenalty"]);_!=null&&f(s,["frequencyPenalty"],_);const q=c(t,["seed"]);q!=null&&f(s,["seed"],q);const P=c(t,["responseMimeType"]);P!=null&&f(s,["responseMimeType"],P);const Y=c(t,["responseSchema"]);Y!=null&&f(s,["responseSchema"],Ld(Y));const de=c(t,["responseJsonSchema"]);if(de!=null&&f(s,["responseJsonSchema"],de),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const pe=c(t,["safetySettings"]);if(o!==void 0&&pe!=null){let ft=pe;Array.isArray(ft)&&(ft=ft.map(_t=>iT(_t))),f(o,["safetySettings"],ft)}const ve=c(t,["tools"]);if(o!==void 0&&ve!=null){let ft=rs(ve);Array.isArray(ft)&&(ft=ft.map(_t=>lT(as(_t)))),f(o,["tools"],ft)}const Le=c(t,["toolConfig"]);if(o!==void 0&&Le!=null&&f(o,["toolConfig"],oT(Le)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Be=c(t,["cachedContent"]);o!==void 0&&Be!=null&&f(o,["cachedContent"],mo(n,Be));const Te=c(t,["responseModalities"]);Te!=null&&f(s,["responseModalities"],Te);const We=c(t,["mediaResolution"]);We!=null&&f(s,["mediaResolution"],We);const Ne=c(t,["speechConfig"]);if(Ne!=null&&f(s,["speechConfig"],Ud(Ne)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=c(t,["thinkingConfig"]);Qe!=null&&f(s,["thinkingConfig"],Qe);const He=c(t,["imageConfig"]);He!=null&&f(s,["imageConfig"],YS(He));const rt=c(t,["enableEnhancedCivicAnswers"]);return rt!=null&&f(s,["enableEnhancedCivicAnswers"],rt),s}function jS(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>ES(m))),f(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const d=c(n,["promptFeedback"]);d!=null&&f(t,["promptFeedback"],d);const h=c(n,["responseId"]);h!=null&&f(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&f(t,["usageMetadata"],y),t}function VS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],cs(n,s)),o}function OS(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],cs(n,s)),o}function qS(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function $S(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function YS(n){const t={},o=c(n,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(n,["imageSize"]);if(s!=null&&f(t,["imageSize"],s),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function JS(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["request","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let y=Ai(r);Array.isArray(y)&&(y=y.map(v=>jg(v))),f(o,["request","contents"],y)}const d=c(t,["metadata"]);d!=null&&f(o,["metadata"],d);const h=c(t,["config"]);return h!=null&&f(o,["request","generationConfig"],BS(n,h,c(o,["request"],{}))),o}function KS(n){const t={},o=c(n,["response"]);o!=null&&f(t,["response"],jS(o));const s=c(n,["error"]);return s!=null&&f(t,["error"],s),t}function XS(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);if(t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function QS(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const d=c(n,["filter"]);return t!==void 0&&d!=null&&f(t,["_query","filter"],d),o}function WS(n){const t={},o=c(n,["config"]);return o!=null&&XS(o,t),t}function ZS(n){const t={},o=c(n,["config"]);return o!=null&&QS(o,t),t}function eT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>Mr(h))),f(t,["batchJobs"],d)}return t}function tT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>yd(h))),f(t,["batchJobs"],d)}return t}function nT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(n,["fileData"]);d!=null&&f(t,["fileData"],PS(d));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],HS(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],SS(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function iT(n){const t={},o=c(n,["category"]);if(o!=null&&f(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(n,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function oT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],GS(o));const s=c(n,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function lT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(n,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],qS(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],$S(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}var po;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(po||(po={}));class hl{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,d;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!s||Object.keys(s).length===0?h={config:{}}:typeof s=="object"?h=Object.assign({},s):h=s,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(d=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class sT extends ho{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new hl(po.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=qm(this.apiClient,t),s=o._url,r=$e("{model}:batchGenerateContent",s),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const b=Object.assign({},x);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const N=b.request;N.systemInstruction=T,b.request=N}m.push(b)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const d=this.getGcsUri(t),h=this.getBigqueryUri(t);if(d)d.endsWith(".jsonl")?s.dest=`${d.slice(0,-6)}/dest`:s.dest=`${d}_dest_${r}`;else if(h)s.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=AS(this.apiClient,t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>yd(x))}else{const m=qm(this.apiClient,t);return y=$e("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Mr(x))}}async createEmbeddingsInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=RS(this.apiClient,t);return d=$e("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>Mr(v))}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=OS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>yd(x))}else{const m=VS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Mr(x))}}async cancel(t){var o,s,r,d;let h="",y={};if(this.apiClient.isVertexAI()){const v=wS(this.apiClient,t);h=$e("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=TS(this.apiClient,t);h=$e("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ZS(t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=tT(x),T=new Bm;return Object.assign(T,b),T})}else{const m=WS(t);return y=$e("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=eT(x),T=new Bm;return Object.assign(T,b),T})}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=IS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>DS(x))}else{const m=kS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>zS(x))}}}function aT(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function $m(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>RT(d))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function rT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const d=c(n,["displayName"]);t!==void 0&&d!=null&&f(t,["displayName"],d);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let x=Ai(h);Array.isArray(x)&&(x=x.map(b=>$m(b))),f(t,["contents"],x)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&f(t,["systemInstruction"],$m(Bn(y)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(b=>IT(b))),f(t,["tools"],x)}const m=c(n,["toolConfig"]);if(t!==void 0&&m!=null&&f(t,["toolConfig"],kT(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function cT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const d=c(n,["displayName"]);t!==void 0&&d!=null&&f(t,["displayName"],d);const h=c(n,["contents"]);if(t!==void 0&&h!=null){let b=Ai(h);Array.isArray(b)&&(b=b.map(T=>T)),f(t,["contents"],b)}const y=c(n,["systemInstruction"]);t!==void 0&&y!=null&&f(t,["systemInstruction"],Bn(y));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(T=>zT(T))),f(t,["tools"],b)}const m=c(n,["toolConfig"]);t!==void 0&&m!=null&&f(t,["toolConfig"],m);const x=c(n,["kmsKeyName"]);return t!==void 0&&x!=null&&f(t,["encryption_spec","kmsKeyName"],x),o}function uT(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Rg(n,s));const r=c(t,["config"]);return r!=null&&rT(r,o),o}function dT(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["model"],Rg(n,s));const r=c(t,["config"]);return r!=null&&cT(r,o),o}function fT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],mo(n,s)),o}function pT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],mo(n,s)),o}function hT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function mT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function gT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function yT(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function vT(n){const t={},o=c(n,["mode"]);o!=null&&f(t,["mode"],o);const s=c(n,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function xT(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&f(t,["description"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["parameters"]);r!=null&&f(t,["parameters"],r);const d=c(n,["parametersJsonSchema"]);d!=null&&f(t,["parametersJsonSchema"],d);const h=c(n,["response"]);h!=null&&f(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&f(t,["responseJsonSchema"],y),t}function bT(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],mo(n,s)),o}function ST(n,t){const o={},s=c(t,["name"]);return s!=null&&f(o,["_url","name"],mo(n,s)),o}function TT(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function wT(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function ET(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function CT(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function _T(n){const t={},o=c(n,["config"]);return o!=null&&ET(o,t),t}function NT(n){const t={},o=c(n,["config"]);return o!=null&&CT(o,t),t}function AT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["cachedContents"],d)}return t}function MT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["cachedContents"],d)}return t}function RT(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(n,["fileData"]);d!=null&&f(t,["fileData"],gT(d));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],yT(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],aT(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function kT(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],vT(o));const s=c(n,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function IT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(n,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],TT(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],wT(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function zT(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>xT(T))),f(t,["functionDeclarations"],b)}const s=c(n,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(n,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const d=c(n,["computerUse"]);if(d!=null&&f(t,["computerUse"],d),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&f(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&f(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function DT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function LT(n,t){const o={},s=c(n,["ttl"]);t!==void 0&&s!=null&&f(t,["ttl"],s);const r=c(n,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),o}function UT(n,t){const o={},s=c(t,["name"]);s!=null&&f(o,["_url","name"],mo(n,s));const r=c(t,["config"]);return r!=null&&DT(r,o),o}function FT(n,t){const o={},s=c(t,["name"]);s!=null&&f(o,["_url","name"],mo(n,s));const r=c(t,["config"]);return r!=null&&LT(r,o),o}class PT extends ho{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new hl(po.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=dT(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=uT(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ST(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=bT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=pT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=mT(x),T=new Hm;return Object.assign(T,b),T})}else{const m=fT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=hT(x),T=new Hm;return Object.assign(T,b),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=FT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=UT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=NT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=MT(x),T=new Gm;return Object.assign(T,b),T})}else{const m=_T(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=AT(x),T=new Gm;return Object.assign(T,b),T})}}}function Pr(n,t){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(o[s[r]]=n[s[r]]);return o}function Ym(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tt(n){return this instanceof Tt?(this.v=n,this):new Tt(n)}function Di(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,t||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(N){return function(_){return Promise.resolve(_).then(N,b)}}function y(N,_){s[N]&&(r[N]=function(q){return new Promise(function(P,Y){d.push([N,q,P,Y])>1||v(N,q)})},_&&(r[N]=_(r[N])))}function v(N,_){try{m(s[N](_))}catch(q){T(d[0][3],q)}}function m(N){N.value instanceof Tt?Promise.resolve(N.value.v).then(x,b):T(d[0][2],N)}function x(N){v("next",N)}function b(N){v("throw",N)}function T(N,_){N(_),d.shift(),d.length&&v(d[0][0],d[0][1])}}function Li(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Ym=="function"?Ym(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(d){o[d]=n[d]&&function(h){return new Promise(function(y,v){h=n[d](h),r(y,v,h.done,h.value)})}}function r(d,h,y,v){Promise.resolve(v).then(function(m){d({value:m,done:y})},h)}}function HT(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:Vg(o)}function Vg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function GT(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Jm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let s=0;for(;s<o;)if(n[s].role==="user")t.push(n[s]),s++;else{const r=[];let d=!0;for(;s<o&&n[s].role==="model";)r.push(n[s]),d&&!Vg(n[s])&&(d=!1),s++;d?t.push(...r):t.pop()}return t}class BT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new jT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class jT{constructor(t,o,s,r={},d=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),GT(d)}async sendMessage(t){var o;await this.sendPromise;const s=Bn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var d,h,y;const v=await r,m=(h=(d=v.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];x!=null&&(T=(y=x.slice(b))!==null&&y!==void 0?y:[]);const N=m?[m]:[];this.recordHistory(s,N,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=Bn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,s)}getHistory(t=!1){const o=t?Jm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Di(this,arguments,function*(){var r,d,h,y,v,m;const x=[];try{for(var b=!0,T=Li(t),N;N=yield Tt(T.next()),r=N.done,!r;b=!0){y=N.value,b=!1;const _=y;if(HT(_)){const q=(m=(v=_.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;q!==void 0&&x.push(q)}yield yield Tt(_)}}catch(_){d={error:_}}finally{try{!b&&!r&&(h=T.return)&&(yield Tt(h.call(T)))}finally{if(d)throw d.error}}this.recordHistory(o,x)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(d=>d.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Jm(s)):this.history.push(t),this.history.push(...r)}}class Vr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Vr.prototype)}}function VT(n){const t={},o=c(n,["file"]);return o!=null&&f(t,["file"],o),t}function OT(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function qT(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","file"],Ug(o)),t}function $T(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function YT(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","file"],Ug(o)),t}function JT(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function KT(n){const t={},o=c(n,["config"]);return o!=null&&JT(o,t),t}function XT(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["files"],d)}return t}class QT extends ho{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new hl(po.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=KT(t);return d=$e("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=XT(v),x=new tS;return Object.assign(x,m),x})}}async createInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=VT(t);return d=$e("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=OT(v),x=new nS;return Object.assign(x,m),x})}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=YT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=qT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=$T(v),x=new iS;return Object.assign(x,m),x})}}}function Rr(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function WT(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>hw(d))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function ZT(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function ew(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function tw(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&f(t,["description"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["parameters"]);r!=null&&f(t,["parameters"],r);const d=c(n,["parametersJsonSchema"]);d!=null&&f(t,["parametersJsonSchema"],d);const h=c(n,["response"]);h!=null&&f(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&f(t,["responseJsonSchema"],y),t}function nw(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const s=c(n,["responseJsonSchema"]);s!=null&&f(t,["responseJsonSchema"],s);const r=c(n,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const d=c(n,["candidateCount"]);d!=null&&f(t,["candidateCount"],d);const h=c(n,["enableAffectiveDialog"]);h!=null&&f(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&f(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const b=c(n,["presencePenalty"]);b!=null&&f(t,["presencePenalty"],b);const T=c(n,["responseLogprobs"]);T!=null&&f(t,["responseLogprobs"],T);const N=c(n,["responseMimeType"]);N!=null&&f(t,["responseMimeType"],N);const _=c(n,["responseModalities"]);_!=null&&f(t,["responseModalities"],_);const q=c(n,["responseSchema"]);q!=null&&f(t,["responseSchema"],q);const P=c(n,["routingConfig"]);P!=null&&f(t,["routingConfig"],P);const Y=c(n,["seed"]);Y!=null&&f(t,["seed"],Y);const de=c(n,["speechConfig"]);de!=null&&f(t,["speechConfig"],de);const pe=c(n,["stopSequences"]);pe!=null&&f(t,["stopSequences"],pe);const ve=c(n,["temperature"]);ve!=null&&f(t,["temperature"],ve);const Le=c(n,["thinkingConfig"]);Le!=null&&f(t,["thinkingConfig"],Le);const Be=c(n,["topK"]);Be!=null&&f(t,["topK"],Be);const Te=c(n,["topP"]);if(Te!=null&&f(t,["topP"],Te),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function iw(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function ow(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function lw(n,t){const o={},s=c(n,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],s);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const d=c(n,["temperature"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","temperature"],d);const h=c(n,["topP"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Fd(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const N=c(n,["enableAffectiveDialog"]);t!==void 0&&N!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],N);const _=c(n,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],WT(Bn(_)));const q=c(n,["tools"]);if(t!==void 0&&q!=null){let Be=rs(q);Array.isArray(Be)&&(Be=Be.map(Te=>gw(as(Te)))),f(t,["setup","tools"],Be)}const P=c(n,["sessionResumption"]);t!==void 0&&P!=null&&f(t,["setup","sessionResumption"],mw(P));const Y=c(n,["inputAudioTranscription"]);t!==void 0&&Y!=null&&f(t,["setup","inputAudioTranscription"],Y);const de=c(n,["outputAudioTranscription"]);t!==void 0&&de!=null&&f(t,["setup","outputAudioTranscription"],de);const pe=c(n,["realtimeInputConfig"]);t!==void 0&&pe!=null&&f(t,["setup","realtimeInputConfig"],pe);const ve=c(n,["contextWindowCompression"]);t!==void 0&&ve!=null&&f(t,["setup","contextWindowCompression"],ve);const Le=c(n,["proactivity"]);if(t!==void 0&&Le!=null&&f(t,["setup","proactivity"],Le),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function sw(n,t){const o={},s=c(n,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],nw(s));const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const d=c(n,["temperature"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","temperature"],d);const h=c(n,["topP"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Fd(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const N=c(n,["enableAffectiveDialog"]);t!==void 0&&N!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],N);const _=c(n,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],Bn(_));const q=c(n,["tools"]);if(t!==void 0&&q!=null){let Te=rs(q);Array.isArray(Te)&&(Te=Te.map(We=>yw(as(We)))),f(t,["setup","tools"],Te)}const P=c(n,["sessionResumption"]);t!==void 0&&P!=null&&f(t,["setup","sessionResumption"],P);const Y=c(n,["inputAudioTranscription"]);t!==void 0&&Y!=null&&f(t,["setup","inputAudioTranscription"],Y);const de=c(n,["outputAudioTranscription"]);t!==void 0&&de!=null&&f(t,["setup","outputAudioTranscription"],de);const pe=c(n,["realtimeInputConfig"]);t!==void 0&&pe!=null&&f(t,["setup","realtimeInputConfig"],pe);const ve=c(n,["contextWindowCompression"]);t!==void 0&&ve!=null&&f(t,["setup","contextWindowCompression"],ve);const Le=c(n,["proactivity"]);t!==void 0&&Le!=null&&f(t,["setup","proactivity"],Le);const Be=c(n,["explicitVadSignal"]);return t!==void 0&&Be!=null&&f(t,["setup","explicitVadSignal"],Be),o}function aw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Vt(n,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],lw(r,o)),o}function rw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Vt(n,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],sw(r,o)),o}function cw(n){const t={},o=c(n,["musicGenerationConfig"]);return o!=null&&f(t,["musicGenerationConfig"],o),t}function uw(n){const t={},o=c(n,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["weightedPrompts"],s)}return t}function dw(n){const t={},o=c(n,["media"]);if(o!=null){let m=kg(o);Array.isArray(m)&&(m=m.map(x=>Rr(x))),f(t,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(t,["audio"],Rr(zg(s)));const r=c(n,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const d=c(n,["video"]);d!=null&&f(t,["video"],Rr(Ig(d)));const h=c(n,["text"]);h!=null&&f(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&f(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function fw(n){const t={},o=c(n,["media"]);if(o!=null){let m=kg(o);Array.isArray(m)&&(m=m.map(x=>x)),f(t,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(t,["audio"],zg(s));const r=c(n,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const d=c(n,["video"]);d!=null&&f(t,["video"],Ig(d));const h=c(n,["text"]);h!=null&&f(t,["text"],h);const y=c(n,["activityStart"]);y!=null&&f(t,["activityStart"],y);const v=c(n,["activityEnd"]);return v!=null&&f(t,["activityEnd"],v),t}function pw(n){const t={},o=c(n,["setupComplete"]);o!=null&&f(t,["setupComplete"],o);const s=c(n,["serverContent"]);s!=null&&f(t,["serverContent"],s);const r=c(n,["toolCall"]);r!=null&&f(t,["toolCall"],r);const d=c(n,["toolCallCancellation"]);d!=null&&f(t,["toolCallCancellation"],d);const h=c(n,["usageMetadata"]);h!=null&&f(t,["usageMetadata"],vw(h));const y=c(n,["goAway"]);y!=null&&f(t,["goAway"],y);const v=c(n,["sessionResumptionUpdate"]);v!=null&&f(t,["sessionResumptionUpdate"],v);const m=c(n,["voiceActivityDetectionSignal"]);return m!=null&&f(t,["voiceActivityDetectionSignal"],m),t}function hw(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(n,["fileData"]);d!=null&&f(t,["fileData"],ZT(d));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],ew(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],Rr(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function mw(n){const t={},o=c(n,["handle"]);if(o!=null&&f(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function gw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(n,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],iw(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],ow(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function yw(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>tw(T))),f(t,["functionDeclarations"],b)}const s=c(n,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(n,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const d=c(n,["computerUse"]);if(d!=null&&f(t,["computerUse"],d),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&f(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&f(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function vw(n){const t={},o=c(n,["promptTokenCount"]);o!=null&&f(t,["promptTokenCount"],o);const s=c(n,["cachedContentTokenCount"]);s!=null&&f(t,["cachedContentTokenCount"],s);const r=c(n,["candidatesTokenCount"]);r!=null&&f(t,["responseTokenCount"],r);const d=c(n,["toolUsePromptTokenCount"]);d!=null&&f(t,["toolUsePromptTokenCount"],d);const h=c(n,["thoughtsTokenCount"]);h!=null&&f(t,["thoughtsTokenCount"],h);const y=c(n,["totalTokenCount"]);y!=null&&f(t,["totalTokenCount"],y);const v=c(n,["promptTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(_=>_)),f(t,["promptTokensDetails"],N)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(_=>_)),f(t,["cacheTokensDetails"],N)}const x=c(n,["candidatesTokensDetails"]);if(x!=null){let N=x;Array.isArray(N)&&(N=N.map(_=>_)),f(t,["responseTokensDetails"],N)}const b=c(n,["toolUsePromptTokensDetails"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(_=>_)),f(t,["toolUsePromptTokensDetails"],N)}const T=c(n,["trafficType"]);return T!=null&&f(t,["trafficType"],T),t}function xw(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function bw(n){const t={},o=c(n,["content"]);o!=null&&f(t,["content"],o);const s=c(n,["citationMetadata"]);s!=null&&f(t,["citationMetadata"],Sw(s));const r=c(n,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const d=c(n,["finishReason"]);d!=null&&f(t,["finishReason"],d);const h=c(n,["avgLogprobs"]);h!=null&&f(t,["avgLogprobs"],h);const y=c(n,["groundingMetadata"]);y!=null&&f(t,["groundingMetadata"],y);const v=c(n,["index"]);v!=null&&f(t,["index"],v);const m=c(n,["logprobsResult"]);m!=null&&f(t,["logprobsResult"],m);const x=c(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(N=>N)),f(t,["safetyRatings"],T)}const b=c(n,["urlContextMetadata"]);return b!=null&&f(t,["urlContextMetadata"],b),t}function Sw(n){const t={},o=c(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(t,["citations"],s)}return t}function Tw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let d=Ai(r);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["contents"],d)}return o}function ww(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),f(t,["tokensInfo"],r)}return t}function Ew(n){const t={},o=c(n,["values"]);o!=null&&f(t,["values"],o);const s=c(n,["statistics"]);return s!=null&&f(t,["statistics"],Cw(s)),t}function Cw(n){const t={},o=c(n,["truncated"]);o!=null&&f(t,["truncated"],o);const s=c(n,["token_count"]);return s!=null&&f(t,["tokenCount"],s),t}function Or(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>DE(d))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function _w(n){const t={},o=c(n,["controlType"]);o!=null&&f(t,["controlType"],o);const s=c(n,["enableControlImageComputation"]);return s!=null&&f(t,["computeControl"],s),t}function Nw(n){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Aw(n,t){const o={},s=c(n,["systemInstruction"]);t!==void 0&&s!=null&&f(t,["systemInstruction"],Bn(s));const r=c(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>Yg(y))),f(t,["tools"],h)}const d=c(n,["generationConfig"]);return t!==void 0&&d!=null&&f(t,["generationConfig"],xE(d)),o}function Mw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>Or(y))),f(o,["contents"],h)}const d=c(t,["config"]);return d!=null&&Nw(d),o}function Rw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["contents"],h)}const d=c(t,["config"]);return d!=null&&Aw(d,o),o}function kw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["totalTokens"]);s!=null&&f(t,["totalTokens"],s);const r=c(n,["cachedContentTokenCount"]);return r!=null&&f(t,["cachedContentTokenCount"],r),t}function Iw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["totalTokens"]);return s!=null&&f(t,["totalTokens"],s),t}function zw(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Vt(n,s)),o}function Dw(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Vt(n,s)),o}function Lw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function Uw(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}function Fw(n,t){const o={},s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const d=c(n,["numberOfImages"]);t!==void 0&&d!=null&&f(t,["parameters","sampleCount"],d);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&f(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&f(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&f(t,["parameters","includeSafetyAttributes"],b);const T=c(n,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const N=c(n,["language"]);t!==void 0&&N!=null&&f(t,["parameters","language"],N);const _=c(n,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const q=c(n,["outputCompressionQuality"]);t!==void 0&&q!=null&&f(t,["parameters","outputOptions","compressionQuality"],q);const P=c(n,["addWatermark"]);t!==void 0&&P!=null&&f(t,["parameters","addWatermark"],P);const Y=c(n,["labels"]);t!==void 0&&Y!=null&&f(t,["labels"],Y);const de=c(n,["editMode"]);t!==void 0&&de!=null&&f(t,["parameters","editMode"],de);const pe=c(n,["baseSteps"]);return t!==void 0&&pe!=null&&f(t,["parameters","editConfig","baseSteps"],pe),o}function Pw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const d=c(t,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>GE(v))),f(o,["instances[0]","referenceImages"],y)}const h=c(t,["config"]);return h!=null&&Fw(h,o),o}function Hw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>qr(d))),f(t,["generatedImages"],r)}return t}function Gw(n,t){const o={},s=c(n,["taskType"]);t!==void 0&&s!=null&&f(t,["requests[]","taskType"],s);const r=c(n,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const d=c(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&f(t,["requests[]","outputDimensionality"],d),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Bw(n,t){const o={},s=c(n,["taskType"]);t!==void 0&&s!=null&&f(t,["instances[]","task_type"],s);const r=c(n,["title"]);t!==void 0&&r!=null&&f(t,["instances[]","title"],r);const d=c(n,["outputDimensionality"]);t!==void 0&&d!=null&&f(t,["parameters","outputDimensionality"],d);const h=c(n,["mimeType"]);t!==void 0&&h!=null&&f(t,["instances[]","mimeType"],h);const y=c(n,["autoTruncate"]);return t!==void 0&&y!=null&&f(t,["parameters","autoTruncate"],y),o}function jw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let y=Dd(n,r);Array.isArray(y)&&(y=y.map(v=>v)),f(o,["requests[]","content"],y)}const d=c(t,["config"]);d!=null&&Gw(d,o);const h=c(t,["model"]);return h!==void 0&&f(o,["requests[]","model"],Vt(n,h)),o}function Vw(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let h=Dd(n,r);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["instances[]","content"],h)}const d=c(t,["config"]);return d!=null&&Bw(d,o),o}function Ow(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["embeddings"],d)}const r=c(n,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function qw(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions[]","embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>Ew(h))),f(t,["embeddings"],d)}const r=c(n,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function $w(n){const t={},o=c(n,["endpoint"]);o!=null&&f(t,["name"],o);const s=c(n,["deployedModelId"]);return s!=null&&f(t,["deployedModelId"],s),t}function Yw(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Jw(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Kw(n){const t={},o=c(n,["mode"]);o!=null&&f(t,["mode"],o);const s=c(n,["allowedFunctionNames"]);if(s!=null&&f(t,["allowedFunctionNames"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Xw(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(n,["description"]);o!=null&&f(t,["description"],o);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const r=c(n,["parameters"]);r!=null&&f(t,["parameters"],r);const d=c(n,["parametersJsonSchema"]);d!=null&&f(t,["parametersJsonSchema"],d);const h=c(n,["response"]);h!=null&&f(t,["response"],h);const y=c(n,["responseJsonSchema"]);return y!=null&&f(t,["responseJsonSchema"],y),t}function Qw(n,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],Or(Bn(r)));const d=c(t,["temperature"]);d!=null&&f(s,["temperature"],d);const h=c(t,["topP"]);h!=null&&f(s,["topP"],h);const y=c(t,["topK"]);y!=null&&f(s,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(s,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(s,["logprobs"],T);const N=c(t,["presencePenalty"]);N!=null&&f(s,["presencePenalty"],N);const _=c(t,["frequencyPenalty"]);_!=null&&f(s,["frequencyPenalty"],_);const q=c(t,["seed"]);q!=null&&f(s,["seed"],q);const P=c(t,["responseMimeType"]);P!=null&&f(s,["responseMimeType"],P);const Y=c(t,["responseSchema"]);Y!=null&&f(s,["responseSchema"],Ld(Y));const de=c(t,["responseJsonSchema"]);if(de!=null&&f(s,["responseJsonSchema"],de),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const pe=c(t,["safetySettings"]);if(o!==void 0&&pe!=null){let ft=pe;Array.isArray(ft)&&(ft=ft.map(_t=>BE(_t))),f(o,["safetySettings"],ft)}const ve=c(t,["tools"]);if(o!==void 0&&ve!=null){let ft=rs(ve);Array.isArray(ft)&&(ft=ft.map(_t=>JE(as(_t)))),f(o,["tools"],ft)}const Le=c(t,["toolConfig"]);if(o!==void 0&&Le!=null&&f(o,["toolConfig"],YE(Le)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Be=c(t,["cachedContent"]);o!==void 0&&Be!=null&&f(o,["cachedContent"],mo(n,Be));const Te=c(t,["responseModalities"]);Te!=null&&f(s,["responseModalities"],Te);const We=c(t,["mediaResolution"]);We!=null&&f(s,["mediaResolution"],We);const Ne=c(t,["speechConfig"]);if(Ne!=null&&f(s,["speechConfig"],Ud(Ne)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=c(t,["thinkingConfig"]);Qe!=null&&f(s,["thinkingConfig"],Qe);const He=c(t,["imageConfig"]);He!=null&&f(s,["imageConfig"],EE(He));const rt=c(t,["enableEnhancedCivicAnswers"]);return rt!=null&&f(s,["enableEnhancedCivicAnswers"],rt),s}function Ww(n,t,o){const s={},r=c(t,["systemInstruction"]);o!==void 0&&r!=null&&f(o,["systemInstruction"],Bn(r));const d=c(t,["temperature"]);d!=null&&f(s,["temperature"],d);const h=c(t,["topP"]);h!=null&&f(s,["topP"],h);const y=c(t,["topK"]);y!=null&&f(s,["topK"],y);const v=c(t,["candidateCount"]);v!=null&&f(s,["candidateCount"],v);const m=c(t,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const x=c(t,["stopSequences"]);x!=null&&f(s,["stopSequences"],x);const b=c(t,["responseLogprobs"]);b!=null&&f(s,["responseLogprobs"],b);const T=c(t,["logprobs"]);T!=null&&f(s,["logprobs"],T);const N=c(t,["presencePenalty"]);N!=null&&f(s,["presencePenalty"],N);const _=c(t,["frequencyPenalty"]);_!=null&&f(s,["frequencyPenalty"],_);const q=c(t,["seed"]);q!=null&&f(s,["seed"],q);const P=c(t,["responseMimeType"]);P!=null&&f(s,["responseMimeType"],P);const Y=c(t,["responseSchema"]);Y!=null&&f(s,["responseSchema"],Ld(Y));const de=c(t,["responseJsonSchema"]);de!=null&&f(s,["responseJsonSchema"],de);const pe=c(t,["routingConfig"]);pe!=null&&f(s,["routingConfig"],pe);const ve=c(t,["modelSelectionConfig"]);ve!=null&&f(s,["modelConfig"],ve);const Le=c(t,["safetySettings"]);if(o!==void 0&&Le!=null){let j=Le;Array.isArray(j)&&(j=j.map(Ce=>Ce)),f(o,["safetySettings"],j)}const Be=c(t,["tools"]);if(o!==void 0&&Be!=null){let j=rs(Be);Array.isArray(j)&&(j=j.map(Ce=>Yg(as(Ce)))),f(o,["tools"],j)}const Te=c(t,["toolConfig"]);o!==void 0&&Te!=null&&f(o,["toolConfig"],Te);const We=c(t,["labels"]);o!==void 0&&We!=null&&f(o,["labels"],We);const Ne=c(t,["cachedContent"]);o!==void 0&&Ne!=null&&f(o,["cachedContent"],mo(n,Ne));const Qe=c(t,["responseModalities"]);Qe!=null&&f(s,["responseModalities"],Qe);const He=c(t,["mediaResolution"]);He!=null&&f(s,["mediaResolution"],He);const rt=c(t,["speechConfig"]);rt!=null&&f(s,["speechConfig"],Ud(rt));const ft=c(t,["audioTimestamp"]);ft!=null&&f(s,["audioTimestamp"],ft);const _t=c(t,["thinkingConfig"]);_t!=null&&f(s,["thinkingConfig"],_t);const Nt=c(t,["imageConfig"]);if(Nt!=null&&f(s,["imageConfig"],CE(Nt)),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Km(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>Or(y))),f(o,["contents"],h)}const d=c(t,["config"]);return d!=null&&f(o,["generationConfig"],Qw(n,d,o)),o}function Xm(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["contents"]);if(r!=null){let h=Ai(r);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["contents"],h)}const d=c(t,["config"]);return d!=null&&f(o,["generationConfig"],Ww(n,d,o)),o}function Qm(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>bw(m))),f(t,["candidates"],v)}const r=c(n,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const d=c(n,["promptFeedback"]);d!=null&&f(t,["promptFeedback"],d);const h=c(n,["responseId"]);h!=null&&f(t,["responseId"],h);const y=c(n,["usageMetadata"]);return y!=null&&f(t,["usageMetadata"],y),t}function Wm(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(x=>x)),f(t,["candidates"],m)}const r=c(n,["createTime"]);r!=null&&f(t,["createTime"],r);const d=c(n,["modelVersion"]);d!=null&&f(t,["modelVersion"],d);const h=c(n,["promptFeedback"]);h!=null&&f(t,["promptFeedback"],h);const y=c(n,["responseId"]);y!=null&&f(t,["responseId"],y);const v=c(n,["usageMetadata"]);return v!=null&&f(t,["usageMetadata"],v),t}function Zw(n,t){const o={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(n,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(n,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const d=c(n,["guidanceScale"]);if(t!==void 0&&d!=null&&f(t,["parameters","guidanceScale"],d),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=c(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const y=c(n,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const v=c(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&f(t,["parameters","includeSafetyAttributes"],v);const m=c(n,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const x=c(n,["language"]);t!==void 0&&x!=null&&f(t,["parameters","language"],x);const b=c(n,["outputMimeType"]);t!==void 0&&b!=null&&f(t,["parameters","outputOptions","mimeType"],b);const T=c(n,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=c(n,["imageSize"]);if(t!==void 0&&N!=null&&f(t,["parameters","sampleImageSize"],N),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function eE(n,t){const o={},s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(n,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const d=c(n,["numberOfImages"]);t!==void 0&&d!=null&&f(t,["parameters","sampleCount"],d);const h=c(n,["aspectRatio"]);t!==void 0&&h!=null&&f(t,["parameters","aspectRatio"],h);const y=c(n,["guidanceScale"]);t!==void 0&&y!=null&&f(t,["parameters","guidanceScale"],y);const v=c(n,["seed"]);t!==void 0&&v!=null&&f(t,["parameters","seed"],v);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&f(t,["parameters","includeSafetyAttributes"],b);const T=c(n,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const N=c(n,["language"]);t!==void 0&&N!=null&&f(t,["parameters","language"],N);const _=c(n,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const q=c(n,["outputCompressionQuality"]);t!==void 0&&q!=null&&f(t,["parameters","outputOptions","compressionQuality"],q);const P=c(n,["addWatermark"]);t!==void 0&&P!=null&&f(t,["parameters","addWatermark"],P);const Y=c(n,["labels"]);t!==void 0&&Y!=null&&f(t,["labels"],Y);const de=c(n,["imageSize"]);t!==void 0&&de!=null&&f(t,["parameters","sampleImageSize"],de);const pe=c(n,["enhancePrompt"]);return t!==void 0&&pe!=null&&f(t,["parameters","enhancePrompt"],pe),o}function tE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const d=c(t,["config"]);return d!=null&&Zw(d,o),o}function nE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const d=c(t,["config"]);return d!=null&&eE(d,o),o}function iE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>mE(h))),f(t,["generatedImages"],d)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],qg(r)),t}function oE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>qr(h))),f(t,["generatedImages"],d)}const r=c(n,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],$g(r)),t}function lE(n,t){const o={},s=c(n,["numberOfVideos"]);if(t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(n,["durationSeconds"]);if(t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(n,["aspectRatio"]);t!==void 0&&d!=null&&f(t,["parameters","aspectRatio"],d);const h=c(n,["resolution"]);t!==void 0&&h!=null&&f(t,["parameters","resolution"],h);const y=c(n,["personGeneration"]);if(t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=c(n,["negativePrompt"]);t!==void 0&&v!=null&&f(t,["parameters","negativePrompt"],v);const m=c(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=c(n,["lastFrame"]);t!==void 0&&x!=null&&f(t,["instances[0]","lastFrame"],$r(x));const b=c(n,["referenceImages"]);if(t!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(N=>aC(N))),f(t,["instances[0]","referenceImages"],T)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function sE(n,t){const o={},s=c(n,["numberOfVideos"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(n,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const d=c(n,["fps"]);t!==void 0&&d!=null&&f(t,["parameters","fps"],d);const h=c(n,["durationSeconds"]);t!==void 0&&h!=null&&f(t,["parameters","durationSeconds"],h);const y=c(n,["seed"]);t!==void 0&&y!=null&&f(t,["parameters","seed"],y);const v=c(n,["aspectRatio"]);t!==void 0&&v!=null&&f(t,["parameters","aspectRatio"],v);const m=c(n,["resolution"]);t!==void 0&&m!=null&&f(t,["parameters","resolution"],m);const x=c(n,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const b=c(n,["pubsubTopic"]);t!==void 0&&b!=null&&f(t,["parameters","pubsubTopic"],b);const T=c(n,["negativePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","negativePrompt"],T);const N=c(n,["enhancePrompt"]);t!==void 0&&N!=null&&f(t,["parameters","enhancePrompt"],N);const _=c(n,["generateAudio"]);t!==void 0&&_!=null&&f(t,["parameters","generateAudio"],_);const q=c(n,["lastFrame"]);t!==void 0&&q!=null&&f(t,["instances[0]","lastFrame"],Ui(q));const P=c(n,["referenceImages"]);if(t!==void 0&&P!=null){let pe=P;Array.isArray(pe)&&(pe=pe.map(ve=>rC(ve))),f(t,["instances[0]","referenceImages"],pe)}const Y=c(n,["mask"]);t!==void 0&&Y!=null&&f(t,["instances[0]","mask"],sC(Y));const de=c(n,["compressionQuality"]);return t!==void 0&&de!=null&&f(t,["parameters","compressionQuality"],de),o}function aE(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response","generateVideoResponse"]);return h!=null&&f(t,["response"],dE(h)),t}function rE(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response"]);return h!=null&&f(t,["response"],fE(h)),t}function cE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const d=c(t,["image"]);d!=null&&f(o,["instances[0]","image"],$r(d));const h=c(t,["video"]);h!=null&&f(o,["instances[0]","video"],Jg(h));const y=c(t,["source"]);y!=null&&pE(y,o);const v=c(t,["config"]);return v!=null&&lE(v,o),o}function uE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["prompt"]);r!=null&&f(o,["instances[0]","prompt"],r);const d=c(t,["image"]);d!=null&&f(o,["instances[0]","image"],Ui(d));const h=c(t,["video"]);h!=null&&f(o,["instances[0]","video"],Kg(h));const y=c(t,["source"]);y!=null&&hE(y,o);const v=c(t,["config"]);return v!=null&&sE(v,o),o}function dE(n){const t={},o=c(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>yE(h))),f(t,["generatedVideos"],d)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function fE(n){const t={},o=c(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>vE(h))),f(t,["generatedVideos"],d)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(t,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function pE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],$r(r));const d=c(n,["video"]);return t!==void 0&&d!=null&&f(t,["instances[0]","video"],Jg(d)),o}function hE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Ui(r));const d=c(n,["video"]);return t!==void 0&&d!=null&&f(t,["instances[0]","video"],Kg(d)),o}function mE(n){const t={},o=c(n,["_self"]);o!=null&&f(t,["image"],_E(o));const s=c(n,["raiFilteredReason"]);s!=null&&f(t,["raiFilteredReason"],s);const r=c(n,["_self"]);return r!=null&&f(t,["safetyAttributes"],qg(r)),t}function qr(n){const t={},o=c(n,["_self"]);o!=null&&f(t,["image"],Og(o));const s=c(n,["raiFilteredReason"]);s!=null&&f(t,["raiFilteredReason"],s);const r=c(n,["_self"]);r!=null&&f(t,["safetyAttributes"],$g(r));const d=c(n,["prompt"]);return d!=null&&f(t,["enhancedPrompt"],d),t}function gE(n){const t={},o=c(n,["_self"]);o!=null&&f(t,["mask"],Og(o));const s=c(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),f(t,["labels"],r)}return t}function yE(n){const t={},o=c(n,["video"]);return o!=null&&f(t,["video"],oC(o)),t}function vE(n){const t={},o=c(n,["_self"]);return o!=null&&f(t,["video"],lC(o)),t}function xE(n){const t={},o=c(n,["modelSelectionConfig"]);o!=null&&f(t,["modelConfig"],o);const s=c(n,["responseJsonSchema"]);s!=null&&f(t,["responseJsonSchema"],s);const r=c(n,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const d=c(n,["candidateCount"]);d!=null&&f(t,["candidateCount"],d);const h=c(n,["enableAffectiveDialog"]);h!=null&&f(t,["enableAffectiveDialog"],h);const y=c(n,["frequencyPenalty"]);y!=null&&f(t,["frequencyPenalty"],y);const v=c(n,["logprobs"]);v!=null&&f(t,["logprobs"],v);const m=c(n,["maxOutputTokens"]);m!=null&&f(t,["maxOutputTokens"],m);const x=c(n,["mediaResolution"]);x!=null&&f(t,["mediaResolution"],x);const b=c(n,["presencePenalty"]);b!=null&&f(t,["presencePenalty"],b);const T=c(n,["responseLogprobs"]);T!=null&&f(t,["responseLogprobs"],T);const N=c(n,["responseMimeType"]);N!=null&&f(t,["responseMimeType"],N);const _=c(n,["responseModalities"]);_!=null&&f(t,["responseModalities"],_);const q=c(n,["responseSchema"]);q!=null&&f(t,["responseSchema"],q);const P=c(n,["routingConfig"]);P!=null&&f(t,["routingConfig"],P);const Y=c(n,["seed"]);Y!=null&&f(t,["seed"],Y);const de=c(n,["speechConfig"]);de!=null&&f(t,["speechConfig"],de);const pe=c(n,["stopSequences"]);pe!=null&&f(t,["stopSequences"],pe);const ve=c(n,["temperature"]);ve!=null&&f(t,["temperature"],ve);const Le=c(n,["thinkingConfig"]);Le!=null&&f(t,["thinkingConfig"],Le);const Be=c(n,["topK"]);Be!=null&&f(t,["topK"],Be);const Te=c(n,["topP"]);if(Te!=null&&f(t,["topP"],Te),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function bE(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Vt(n,s)),o}function SE(n,t){const o={},s=c(t,["model"]);return s!=null&&f(o,["_url","name"],Vt(n,s)),o}function TE(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function wE(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function EE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(n,["imageSize"]);if(s!=null&&f(t,["imageSize"],s),c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function CE(n){const t={},o=c(n,["aspectRatio"]);o!=null&&f(t,["aspectRatio"],o);const s=c(n,["imageSize"]);s!=null&&f(t,["imageSize"],s);const r=c(n,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);const d=c(n,["outputCompressionQuality"]);return d!=null&&f(t,["imageOutputOptions","compressionQuality"],d),t}function _E(n){const t={},o=c(n,["bytesBase64Encoded"]);o!=null&&f(t,["imageBytes"],qo(o));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Og(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(t,["imageBytes"],qo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function $r(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(n,["imageBytes"]);o!=null&&f(t,["bytesBase64Encoded"],qo(o));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Ui(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["gcsUri"],o);const s=c(n,["imageBytes"]);s!=null&&f(t,["bytesBase64Encoded"],qo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function NE(n,t,o){const s={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const d=c(t,["pageToken"]);o!==void 0&&d!=null&&f(o,["_query","pageToken"],d);const h=c(t,["filter"]);o!==void 0&&h!=null&&f(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&f(o,["_url","models_url"],Fg(n,y)),s}function AE(n,t,o){const s={},r=c(t,["pageSize"]);o!==void 0&&r!=null&&f(o,["_query","pageSize"],r);const d=c(t,["pageToken"]);o!==void 0&&d!=null&&f(o,["_query","pageToken"],d);const h=c(t,["filter"]);o!==void 0&&h!=null&&f(o,["_query","filter"],h);const y=c(t,["queryBase"]);return o!==void 0&&y!=null&&f(o,["_url","models_url"],Fg(n,y)),s}function ME(n,t){const o={},s=c(t,["config"]);return s!=null&&NE(n,s,o),o}function RE(n,t){const o={},s=c(t,["config"]);return s!=null&&AE(n,s,o),o}function kE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["_self"]);if(r!=null){let d=Pg(r);Array.isArray(d)&&(d=d.map(h=>vd(h))),f(t,["models"],d)}return t}function IE(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["_self"]);if(r!=null){let d=Pg(r);Array.isArray(d)&&(d=d.map(h=>xd(h))),f(t,["models"],d)}return t}function zE(n){const t={},o=c(n,["maskMode"]);o!=null&&f(t,["maskMode"],o);const s=c(n,["segmentationClasses"]);s!=null&&f(t,["maskClasses"],s);const r=c(n,["maskDilation"]);return r!=null&&f(t,["dilation"],r),t}function vd(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);r!=null&&f(t,["description"],r);const d=c(n,["version"]);d!=null&&f(t,["version"],d);const h=c(n,["_self"]);h!=null&&f(t,["tunedModelInfo"],KE(h));const y=c(n,["inputTokenLimit"]);y!=null&&f(t,["inputTokenLimit"],y);const v=c(n,["outputTokenLimit"]);v!=null&&f(t,["outputTokenLimit"],v);const m=c(n,["supportedGenerationMethods"]);m!=null&&f(t,["supportedActions"],m);const x=c(n,["temperature"]);x!=null&&f(t,["temperature"],x);const b=c(n,["maxTemperature"]);b!=null&&f(t,["maxTemperature"],b);const T=c(n,["topP"]);T!=null&&f(t,["topP"],T);const N=c(n,["topK"]);N!=null&&f(t,["topK"],N);const _=c(n,["thinking"]);return _!=null&&f(t,["thinking"],_),t}function xd(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["displayName"]);s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);r!=null&&f(t,["description"],r);const d=c(n,["versionId"]);d!=null&&f(t,["version"],d);const h=c(n,["deployedModels"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(T=>$w(T))),f(t,["endpoints"],b)}const y=c(n,["labels"]);y!=null&&f(t,["labels"],y);const v=c(n,["_self"]);v!=null&&f(t,["tunedModelInfo"],XE(v));const m=c(n,["defaultCheckpointId"]);m!=null&&f(t,["defaultCheckpointId"],m);const x=c(n,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(T=>T)),f(t,["checkpoints"],b)}return t}function DE(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(n,["fileData"]);d!=null&&f(t,["fileData"],Yw(d));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],Jw(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],xw(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function LE(n){const t={},o=c(n,["productImage"]);return o!=null&&f(t,["image"],Ui(o)),t}function UE(n,t){const o={},s=c(n,["numberOfImages"]);t!==void 0&&s!=null&&f(t,["parameters","sampleCount"],s);const r=c(n,["baseSteps"]);t!==void 0&&r!=null&&f(t,["parameters","baseSteps"],r);const d=c(n,["outputGcsUri"]);t!==void 0&&d!=null&&f(t,["parameters","storageUri"],d);const h=c(n,["seed"]);t!==void 0&&h!=null&&f(t,["parameters","seed"],h);const y=c(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&f(t,["parameters","safetySetting"],y);const v=c(n,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const m=c(n,["addWatermark"]);t!==void 0&&m!=null&&f(t,["parameters","addWatermark"],m);const x=c(n,["outputMimeType"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","mimeType"],x);const b=c(n,["outputCompressionQuality"]);t!==void 0&&b!=null&&f(t,["parameters","outputOptions","compressionQuality"],b);const T=c(n,["enhancePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","enhancePrompt"],T);const N=c(n,["labels"]);return t!==void 0&&N!=null&&f(t,["labels"],N),o}function FE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["source"]);r!=null&&HE(r,o);const d=c(t,["config"]);return d!=null&&UE(d,o),o}function PE(n){const t={},o=c(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>qr(r))),f(t,["generatedImages"],s)}return t}function HE(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["personImage"]);t!==void 0&&r!=null&&f(t,["instances[0]","personImage","image"],Ui(r));const d=c(n,["productImages"]);if(t!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>LE(y))),f(t,["instances[0]","productImages"],h)}return o}function GE(n){const t={},o=c(n,["referenceImage"]);o!=null&&f(t,["referenceImage"],Ui(o));const s=c(n,["referenceId"]);s!=null&&f(t,["referenceId"],s);const r=c(n,["referenceType"]);r!=null&&f(t,["referenceType"],r);const d=c(n,["maskImageConfig"]);d!=null&&f(t,["maskImageConfig"],zE(d));const h=c(n,["controlImageConfig"]);h!=null&&f(t,["controlImageConfig"],_w(h));const y=c(n,["styleImageConfig"]);y!=null&&f(t,["styleImageConfig"],y);const v=c(n,["subjectImageConfig"]);return v!=null&&f(t,["subjectImageConfig"],v),t}function qg(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const s=c(n,["safetyAttributes","scores"]);s!=null&&f(t,["scores"],s);const r=c(n,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function $g(n){const t={},o=c(n,["safetyAttributes","categories"]);o!=null&&f(t,["categories"],o);const s=c(n,["safetyAttributes","scores"]);s!=null&&f(t,["scores"],s);const r=c(n,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function BE(n){const t={},o=c(n,["category"]);if(o!=null&&f(t,["category"],o),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(n,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function jE(n){const t={},o=c(n,["image"]);return o!=null&&f(t,["image"],Ui(o)),t}function VE(n,t){const o={},s=c(n,["mode"]);t!==void 0&&s!=null&&f(t,["parameters","mode"],s);const r=c(n,["maxPredictions"]);t!==void 0&&r!=null&&f(t,["parameters","maxPredictions"],r);const d=c(n,["confidenceThreshold"]);t!==void 0&&d!=null&&f(t,["parameters","confidenceThreshold"],d);const h=c(n,["maskDilation"]);t!==void 0&&h!=null&&f(t,["parameters","maskDilation"],h);const y=c(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&f(t,["parameters","binaryColorThreshold"],y);const v=c(n,["labels"]);return t!==void 0&&v!=null&&f(t,["labels"],v),o}function OE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["source"]);r!=null&&$E(r,o);const d=c(t,["config"]);return d!=null&&VE(d,o),o}function qE(n){const t={},o=c(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>gE(r))),f(t,["generatedMasks"],s)}return t}function $E(n,t){const o={},s=c(n,["prompt"]);t!==void 0&&s!=null&&f(t,["instances[0]","prompt"],s);const r=c(n,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],Ui(r));const d=c(n,["scribbleImage"]);return t!==void 0&&d!=null&&f(t,["instances[0]","scribble"],jE(d)),o}function YE(n){const t={},o=c(n,["functionCallingConfig"]);o!=null&&f(t,["functionCallingConfig"],Kw(o));const s=c(n,["retrievalConfig"]);return s!=null&&f(t,["retrievalConfig"],s),t}function JE(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(n,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],TE(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],wE(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function Yg(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let b=o;Array.isArray(b)&&(b=b.map(T=>Xw(T))),f(t,["functionDeclarations"],b)}const s=c(n,["retrieval"]);s!=null&&f(t,["retrieval"],s);const r=c(n,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const d=c(n,["computerUse"]);if(d!=null&&f(t,["computerUse"],d),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=c(n,["codeExecution"]);h!=null&&f(t,["codeExecution"],h);const y=c(n,["enterpriseWebSearch"]);y!=null&&f(t,["enterpriseWebSearch"],y);const v=c(n,["googleMaps"]);v!=null&&f(t,["googleMaps"],v);const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],m);const x=c(n,["urlContext"]);return x!=null&&f(t,["urlContext"],x),t}function KE(n){const t={},o=c(n,["baseModel"]);o!=null&&f(t,["baseModel"],o);const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const r=c(n,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function XE(n){const t={},o=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(t,["baseModel"],o);const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const r=c(n,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function QE(n,t){const o={},s=c(n,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const d=c(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&f(t,["defaultCheckpointId"],d),o}function WE(n,t){const o={},s=c(n,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const r=c(n,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const d=c(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&f(t,["defaultCheckpointId"],d),o}function ZE(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","name"],Vt(n,s));const r=c(t,["config"]);return r!=null&&QE(r,o),o}function eC(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["config"]);return r!=null&&WE(r,o),o}function tC(n,t){const o={},s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const r=c(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const d=c(n,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const h=c(n,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const y=c(n,["outputMimeType"]);t!==void 0&&y!=null&&f(t,["parameters","outputOptions","mimeType"],y);const v=c(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","compressionQuality"],v);const m=c(n,["enhanceInputImage"]);t!==void 0&&m!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=c(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const b=c(n,["labels"]);t!==void 0&&b!=null&&f(t,["labels"],b);const T=c(n,["numberOfImages"]);t!==void 0&&T!=null&&f(t,["parameters","sampleCount"],T);const N=c(n,["mode"]);return t!==void 0&&N!=null&&f(t,["parameters","mode"],N),o}function nC(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["_url","model"],Vt(n,s));const r=c(t,["image"]);r!=null&&f(o,["instances[0]","image"],Ui(r));const d=c(t,["upscaleFactor"]);d!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],d);const h=c(t,["config"]);return h!=null&&tC(h,o),o}function iC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>qr(d))),f(t,["generatedImages"],r)}return t}function oC(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["uri"],o);const s=c(n,["encodedVideo"]);s!=null&&f(t,["videoBytes"],qo(s));const r=c(n,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function lC(n){const t={},o=c(n,["gcsUri"]);o!=null&&f(t,["uri"],o);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(t,["videoBytes"],qo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function sC(n){const t={},o=c(n,["image"]);o!=null&&f(t,["_self"],Ui(o));const s=c(n,["maskMode"]);return s!=null&&f(t,["maskMode"],s),t}function aC(n){const t={},o=c(n,["image"]);o!=null&&f(t,["image"],$r(o));const s=c(n,["referenceType"]);return s!=null&&f(t,["referenceType"],s),t}function rC(n){const t={},o=c(n,["image"]);o!=null&&f(t,["image"],Ui(o));const s=c(n,["referenceType"]);return s!=null&&f(t,["referenceType"],s),t}function Jg(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["uri"],o);const s=c(n,["videoBytes"]);s!=null&&f(t,["encodedVideo"],qo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["encoding"],r),t}function Kg(n){const t={},o=c(n,["uri"]);o!=null&&f(t,["gcsUri"],o);const s=c(n,["videoBytes"]);s!=null&&f(t,["bytesBase64Encoded"],qo(s));const r=c(n,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function cC(n,t){const o={},s=c(n,["displayName"]);return t!==void 0&&s!=null&&f(t,["displayName"],s),o}function uC(n){const t={},o=c(n,["config"]);return o!=null&&cC(o,t),t}function dC(n,t){const o={},s=c(n,["force"]);return t!==void 0&&s!=null&&f(t,["_query","force"],s),o}function fC(n){const t={},o=c(n,["name"]);o!=null&&f(t,["_url","name"],o);const s=c(n,["config"]);return s!=null&&dC(s,t),t}function pC(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","name"],o),t}function hC(n,t){const o={},s=c(n,["customMetadata"]);if(t!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["customMetadata"],d)}const r=c(n,["chunkingConfig"]);return t!==void 0&&r!=null&&f(t,["chunkingConfig"],r),o}function mC(n){const t={},o=c(n,["name"]);o!=null&&f(t,["name"],o);const s=c(n,["metadata"]);s!=null&&f(t,["metadata"],s);const r=c(n,["done"]);r!=null&&f(t,["done"],r);const d=c(n,["error"]);d!=null&&f(t,["error"],d);const h=c(n,["response"]);return h!=null&&f(t,["response"],yC(h)),t}function gC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const s=c(n,["fileName"]);s!=null&&f(t,["fileName"],s);const r=c(n,["config"]);return r!=null&&hC(r,t),t}function yC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["parent"]);s!=null&&f(t,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function vC(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function xC(n){const t={},o=c(n,["config"]);return o!=null&&vC(o,t),t}function bC(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["fileSearchStores"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["fileSearchStores"],d)}return t}function Xg(n,t){const o={},s=c(n,["mimeType"]);t!==void 0&&s!=null&&f(t,["mimeType"],s);const r=c(n,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const d=c(n,["customMetadata"]);if(t!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),f(t,["customMetadata"],y)}const h=c(n,["chunkingConfig"]);return t!==void 0&&h!=null&&f(t,["chunkingConfig"],h),o}function SC(n){const t={},o=c(n,["fileSearchStoreName"]);o!=null&&f(t,["_url","file_search_store_name"],o);const s=c(n,["config"]);return s!=null&&Xg(s,t),t}function TC(n){const t={},o=c(n,["sdkHttpResponse"]);return o!=null&&f(t,["sdkHttpResponse"],o),t}const wC="Content-Type",EC="X-Server-Timeout",CC="User-Agent",bd="x-goog-api-client",_C="1.34.0",NC=`google-genai-sdk/${_C}`,AC="v1beta1",MC="v1beta";class RC{constructor(t){var o,s;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:AC,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:MC,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let d={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=t.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.unaryApiCall(r,d,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,d]of Object.entries(o))typeof d=="object"?s[r]=Object.assign(Object.assign({},s[r]),d):d!==void 0&&(s[r]=d);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=t.body,d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.streamApiCall(r,d,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const d=new AbortController,h=d.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>d.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{d.abort()}),t.signal=h}return o&&o.extraBody!==null&&kC(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Zm(r),new md(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Zm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Di(this,arguments,function*(){var s;const r=(s=t?.body)===null||s===void 0?void 0:s.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield Tt(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=d.decode(x,{stream:!0});try{const _=JSON.parse(b);if("error"in _){const q=JSON.parse(JSON.stringify(_.error)),P=q.status,Y=q.code,de=`got status: ${P}. ${JSON.stringify(_)}`;if(Y>=400&&Y<600)throw new Vr({message:de,status:Y})}}catch(_){if(_.name==="ApiError")throw _}h+=b;let T=-1,N=0;for(;;){T=-1,N=0;for(const P of v){const Y=h.indexOf(P);Y!==-1&&(T===-1||Y<T)&&(T=Y,N=P.length)}if(T===-1)break;const _=h.substring(0,T);h=h.substring(T+N);const q=_.trim();if(q.startsWith(y)){const P=q.substring(y.length).trim();try{const Y=new Response(P,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield Tt(new md(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${P}. ${Y}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=NC+" "+this.clientOptions.userAgentExtra;return t[CC]=o,t[bd]=o,t[wC]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,d]of Object.entries(t.headers))s.append(r,d);t.timeout&&t.timeout>0&&s.append(EC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,h=await d.stat(t);r.sizeBytes=String(h.size);const y=(s=o?.mimeType)!==null&&s!==void 0?s:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=$e("upload/v1beta/files",v._url),b=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return d.upload(t,b,this)}async uploadFileToFileSearchStore(t,o,s){var r;const d=this.clientOptions.uploader,h=await d.stat(o),y=String(h.size),v=(r=s?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),b={};s!=null&&Xg(s,b);const T=await this.fetchUploadUrl(m,y,v,x,b,s?.httpOptions);return d.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,d,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(d),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Zm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let s;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new Vr({message:r,status:o}):new Error(r)}}function kC(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const d=JSON.parse(n.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))o=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(d,h){const y=Object.assign({},d);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=s(o,t);n.body=JSON.stringify(r)}const IC="mcp_used/unknown";let zC=!1;function Qg(n){for(const t of n)if(DC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return zC}function Wg(n){var t;const o=(t=n[bd])!==null&&t!==void 0?t:"";n[bd]=(o+` ${IC}`).trimStart()}function DC(n){return n!==null&&typeof n=="object"&&n instanceof Pd}function LC(n){return Di(this,arguments,function*(o,s=100){let r,d=0;for(;d<s;){const h=yield Tt(o.listTools({cursor:r}));for(const y of h.tools)yield yield Tt(y),d++;if(!h.nextCursor)break;r=h.nextCursor}})}class Pd{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new Pd(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const d={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,Li(LC(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const b=r;h.push(b);const T=b.name;if(d[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);d[T]=x}}catch(b){o={error:b}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),pS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const h=await r.callTool({name:s.name,arguments:s.args},void 0,d);o.push({functionResponse:{name:s.name,response:h.isError?{error:h}:h}})}return o}}async function UC(n,t,o){const s=new lS;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class FC{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),h=GC(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(pe=>{m=pe}),b=t.callbacks,T=function(){m({})},N=this.apiClient,_={onopen:T,onmessage:pe=>{UC(N,b.onmessage,pe)},onerror:(o=b?.onerror)!==null&&o!==void 0?o:function(pe){},onclose:(s=b?.onclose)!==null&&s!==void 0?s:function(pe){}},q=this.webSocketFactory.create(v,HC(h),_);q.connect(),await x;const de={setup:{model:Vt(this.apiClient,t.model)}};return q.send(JSON.stringify(de)),new PC(q,this.apiClient)}}class PC{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=uw(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=cw(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(es.PLAY)}pause(){this.sendPlaybackControl(es.PAUSE)}stop(){this.sendPlaybackControl(es.STOP)}resetContext(){this.sendPlaybackControl(es.RESET_CONTEXT)}close(){this.conn.close()}}function HC(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function GC(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const BC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jC(n,t,o){const s=new oS;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const d=JSON.parse(r);if(n.isVertexAI()){const h=pw(d);Object.assign(s,h)}else Object.assign(s,d);t(s)}class VC{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new FC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,d,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();t.config&&t.config.tools&&Qg(t.config.tools)&&Wg(b);const T=YC(b);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const Ne=this.apiClient.getApiKey();let Qe="BidiGenerateContent",He="key";Ne?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Qe="BidiGenerateContentConstrained",He="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Qe}?${He}=${Ne}`}let N=()=>{};const _=new Promise(Ne=>{N=Ne}),q=t.callbacks,P=function(){var Ne;(Ne=q?.onopen)===null||Ne===void 0||Ne.call(q),N({})},Y=this.apiClient,de={onopen:P,onmessage:Ne=>{jC(Y,q.onmessage,Ne)},onerror:(o=q?.onerror)!==null&&o!==void 0?o:function(Ne){},onclose:(s=q?.onclose)!==null&&s!==void 0?s:function(Ne){}},pe=this.webSocketFactory.create(x,$C(T),de);pe.connect(),await _;let ve=Vt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&ve.startsWith("publishers/")){const Ne=this.apiClient.getProject(),Qe=this.apiClient.getLocation();ve=`projects/${Ne}/locations/${Qe}/`+ve}let Le={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Lr.AUDIO]}:t.config.responseModalities=[Lr.AUDIO]),!((d=t.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Be=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],Te=[];for(const Ne of Be)if(this.isCallableTool(Ne)){const Qe=Ne;Te.push(await Qe.tool())}else Te.push(Ne);Te.length>0&&(t.config.tools=Te);const We={model:ve,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Le=rw(this.apiClient,We):Le=aw(this.apiClient,We),delete Le.config,pe.send(JSON.stringify(Le)),new qC(pe,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const OC={turnComplete:!0};class qC{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=Ai(o.turns),t.isVertexAI()||(s=s.map(r=>Or(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const d of s){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!t.isVertexAI()&&!("id"in d))throw new Error(BC)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},OC),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:fw(t)}:o={realtimeInput:dw(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function $C(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function YC(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const eg=10;function tg(n){var t,o,s;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if(ss(h)){r=!0;break}if(!r)return!0;const d=(s=n?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function ss(n){return"callTool"in n&&typeof n.callTool=="function"}function JC(n){var t,o,s;return(s=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>ss(r)))!==null&&s!==void 0?s:!1}function ng(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((s,r)=>{if(ss(s))return;const d=s;d.functionDeclarations&&d.functionDeclarations.length>0&&o.push(r)}),o}function ig(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class KC extends ho{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,d,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!JC(o)||tg(o.config))return await this.generateContentInternal(v);const m=ng(o);if(m.length>0){const q=m.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${q}.`)}let x,b;const T=Ai(v.contents),N=(d=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:eg;let _=0;for(;_<N&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const q=x.candidates[0].content,P=[];for(const Y of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if(ss(Y)){const pe=await Y.callTool(x.functionCalls);P.push(...pe)}_++,b={role:"user",parts:P},v.contents=Ai(v.contents),v.contents.push(q),v.contents.push(b),ig(v.config)&&(T.push(q),T.push(b))}return ig(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var s,r,d,h,y;if(this.maybeMoveToResponseJsonSchem(o),tg(o.config)){const b=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(b)}const v=ng(o);if(v.length>0){const b=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(d=(r=(s=o?.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||d===void 0?void 0:d.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let d;const h=[];if(s?.generatedImages)for(const v of s.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=v?.safetyAttributes:h.push(v);let y;return d?y={generatedImages:h,positivePromptSafetyAttributes:d,sdkHttpResponse:s.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:s.sdkHttpResponse},y}),this.list=async o=>{var s;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((s=h.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new hl(po.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,d,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(d=o.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const d=(o=t.config)===null||o===void 0?void 0:o.tools;if(!d)return t;const h=await Promise.all(d.map(async v=>ss(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&Qg(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Wg(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,s,r;const d=new Map;for(const h of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(ss(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(d.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);d.set(m.name,y)}}return d}async processAfcStream(t){var o,s,r;const d=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:eg;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,b){return Di(this,arguments,function*(){for(var T,N,_,q,P,Y;y<d;){h&&(y++,h=!1);const Le=yield Tt(m.processParamsMaybeAddMcpUsage(b)),Be=yield Tt(m.generateContentStreamInternal(Le)),Te=[],We=[];try{for(var de=!0,pe=(N=void 0,Li(Be)),ve;ve=yield Tt(pe.next()),T=ve.done,!T;de=!0){q=ve.value,de=!1;const Ne=q;if(yield yield Tt(Ne),Ne.candidates&&(!((P=Ne.candidates[0])===null||P===void 0)&&P.content)){We.push(Ne.candidates[0].content);for(const Qe of(Y=Ne.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(y<d&&Qe.functionCall){if(!Qe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Qe.functionCall.name)){const He=yield Tt(x.get(Qe.functionCall.name).callTool([Qe.functionCall]));Te.push(...He)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Qe.functionCall.name}`)}}}}catch(Ne){N={error:Ne}}finally{try{!de&&!T&&(_=pe.return)&&(yield Tt(_.call(pe)))}finally{if(N)throw N.error}}if(Te.length>0){h=!0;const Ne=new Zs;Ne.candidates=[{content:{role:"user",parts:Te}}],yield yield Tt(Ne);const Qe=[];Qe.push(...We),Qe.push({role:"user",parts:Te});const He=Ai(b.contents).concat(Qe);b.contents=He}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Xm(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Wm(x),T=new Zs;return Object.assign(T,b),T})}else{const m=Km(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Qm(x),T=new Zs;return Object.assign(T,b),T})}}async generateContentStreamInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Xm(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),h.then(function(b){return Di(this,arguments,function*(){var T,N,_,q;try{for(var P=!0,Y=Li(b),de;de=yield Tt(Y.next()),T=de.done,!T;P=!0){q=de.value,P=!1;const pe=q,ve=Wm(yield Tt(pe.json()));ve.sdkHttpResponse={headers:pe.headers};const Le=new Zs;Object.assign(Le,ve),yield yield Tt(Le)}}catch(pe){N={error:pe}}finally{try{!P&&!T&&(_=Y.return)&&(yield Tt(_.call(Y)))}finally{if(N)throw N.error}}})})}else{const m=Km(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}),h.then(function(b){return Di(this,arguments,function*(){var T,N,_,q;try{for(var P=!0,Y=Li(b),de;de=yield Tt(Y.next()),T=de.done,!T;P=!0){q=de.value,P=!1;const pe=q,ve=Qm(yield Tt(pe.json()));ve.sdkHttpResponse={headers:pe.headers};const Le=new Zs;Object.assign(Le,ve),yield yield Tt(Le)}}catch(pe){N={error:pe}}finally{try{!P&&!T&&(_=Y.return)&&(yield Tt(_.call(Y)))}finally{if(N)throw N.error}}})})}}async embedContent(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Vw(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=qw(x),T=new Im;return Object.assign(T,b),T})}else{const m=jw(this.apiClient,t);return y=$e("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Ow(x),T=new Im;return Object.assign(T,b),T})}}async generateImagesInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=nE(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=oE(x),T=new zm;return Object.assign(T,b),T})}else{const m=tE(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=iE(x),T=new zm;return Object.assign(T,b),T})}}async editImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=Pw(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=Hw(v),x=new Y1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=nC(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=iC(v),x=new J1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=FE(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=PE(v),x=new K1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=OE(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=qE(v),x=new X1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=SE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>xd(x))}else{const m=bE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>vd(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=RE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=IE(x),T=new Dm;return Object.assign(T,b),T})}else{const m=ME(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=kE(x),T=new Dm;return Object.assign(T,b),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eC(this.apiClient,t);return y=$e("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>xd(x))}else{const m=ZE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>vd(x))}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Dw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Uw(x),T=new Lm;return Object.assign(T,b),T})}else{const m=zw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Lw(x),T=new Lm;return Object.assign(T,b),T})}}async countTokens(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Rw(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=Iw(x),T=new Um;return Object.assign(T,b),T})}else{const m=Mw(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=kw(x),T=new Um;return Object.assign(T,b),T})}}async computeTokens(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=Tw(this.apiClient,t);return d=$e("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=ww(v),x=new Q1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=uE(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>{const b=rE(x),T=new Ur;return Object.assign(T,b),T})}else{const m=cE(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>{const b=aE(x),T=new Ur;return Object.assign(T,b),T})}}}class XC extends ho{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=B1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h}else{const m=G1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=z1(t);return d=$e("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function QC(n){const t={},o=c(n,["data"]);if(o!=null&&f(t,["data"],o),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function WC(n){const t={},o=c(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>a_(d))),f(t,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(t,["role"],s),t}function ZC(n,t,o){const s={},r=c(t,["expireTime"]);o!==void 0&&r!=null&&f(o,["expireTime"],r);const d=c(t,["newSessionExpireTime"]);o!==void 0&&d!=null&&f(o,["newSessionExpireTime"],d);const h=c(t,["uses"]);o!==void 0&&h!=null&&f(o,["uses"],h);const y=c(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&f(o,["bidiGenerateContentSetup"],s_(n,y));const v=c(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&f(o,["fieldMask"],v),s}function e_(n,t){const o={},s=c(t,["config"]);return s!=null&&f(o,["config"],ZC(n,s,o)),o}function t_(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(n,["fileUri"]);o!=null&&f(t,["fileUri"],o);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function n_(n){const t={},o=c(n,["id"]);o!=null&&f(t,["id"],o);const s=c(n,["args"]);s!=null&&f(t,["args"],s);const r=c(n,["name"]);if(r!=null&&f(t,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function i_(n){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(n,["enableWidget"]);return o!=null&&f(t,["enableWidget"],o),t}function o_(n){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(n,["timeRangeFilter"]);return o!=null&&f(t,["timeRangeFilter"],o),t}function l_(n,t){const o={},s=c(n,["generationConfig"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig"],s);const r=c(n,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const d=c(n,["temperature"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","temperature"],d);const h=c(n,["topP"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","topP"],h);const y=c(n,["topK"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","topK"],y);const v=c(n,["maxOutputTokens"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","maxOutputTokens"],v);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const x=c(n,["seed"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","seed"],x);const b=c(n,["speechConfig"]);t!==void 0&&b!=null&&f(t,["setup","generationConfig","speechConfig"],Fd(b));const T=c(n,["thinkingConfig"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","thinkingConfig"],T);const N=c(n,["enableAffectiveDialog"]);t!==void 0&&N!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],N);const _=c(n,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],WC(Bn(_)));const q=c(n,["tools"]);if(t!==void 0&&q!=null){let Be=rs(q);Array.isArray(Be)&&(Be=Be.map(Te=>c_(as(Te)))),f(t,["setup","tools"],Be)}const P=c(n,["sessionResumption"]);t!==void 0&&P!=null&&f(t,["setup","sessionResumption"],r_(P));const Y=c(n,["inputAudioTranscription"]);t!==void 0&&Y!=null&&f(t,["setup","inputAudioTranscription"],Y);const de=c(n,["outputAudioTranscription"]);t!==void 0&&de!=null&&f(t,["setup","outputAudioTranscription"],de);const pe=c(n,["realtimeInputConfig"]);t!==void 0&&pe!=null&&f(t,["setup","realtimeInputConfig"],pe);const ve=c(n,["contextWindowCompression"]);t!==void 0&&ve!=null&&f(t,["setup","contextWindowCompression"],ve);const Le=c(n,["proactivity"]);if(t!==void 0&&Le!=null&&f(t,["setup","proactivity"],Le),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function s_(n,t){const o={},s=c(t,["model"]);s!=null&&f(o,["setup","model"],Vt(n,s));const r=c(t,["config"]);return r!=null&&f(o,["config"],l_(r,o)),o}function a_(n){const t={},o=c(n,["mediaResolution"]);o!=null&&f(t,["mediaResolution"],o);const s=c(n,["codeExecutionResult"]);s!=null&&f(t,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(n,["fileData"]);d!=null&&f(t,["fileData"],t_(d));const h=c(n,["functionCall"]);h!=null&&f(t,["functionCall"],n_(h));const y=c(n,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const v=c(n,["inlineData"]);v!=null&&f(t,["inlineData"],QC(v));const m=c(n,["text"]);m!=null&&f(t,["text"],m);const x=c(n,["thought"]);x!=null&&f(t,["thought"],x);const b=c(n,["thoughtSignature"]);b!=null&&f(t,["thoughtSignature"],b);const T=c(n,["videoMetadata"]);return T!=null&&f(t,["videoMetadata"],T),t}function r_(n){const t={},o=c(n,["handle"]);if(o!=null&&f(t,["handle"],o),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function c_(n){const t={},o=c(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(b=>b)),f(t,["functionDeclarations"],x)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(n,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const h=c(n,["codeExecution"]);if(h!=null&&f(t,["codeExecution"],h),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=c(n,["googleMaps"]);y!=null&&f(t,["googleMaps"],i_(y));const v=c(n,["googleSearch"]);v!=null&&f(t,["googleSearch"],o_(v));const m=c(n,["urlContext"]);return m!=null&&f(t,["urlContext"],m),t}function u_(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const s=n[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(d=>`${o}.${d}`);t.push(...r)}else t.push(o)}return t.join(",")}function d_(n,t){let o=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const d=s.setup;typeof d=="object"&&d!==null?(n.bidiGenerateContentSetup=d,o=d):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const d=u_(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)d?n.fieldMask=d:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];d&&v.push(d),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class f_ extends ho{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=e_(this.apiClient,t);d=$e("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=d_(y,t.config);return r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function p_(n,t){const o={},s=c(n,["force"]);return t!==void 0&&s!=null&&f(t,["_query","force"],s),o}function h_(n){const t={},o=c(n,["name"]);o!=null&&f(t,["_url","name"],o);const s=c(n,["config"]);return s!=null&&p_(s,t),t}function m_(n){const t={},o=c(n,["name"]);return o!=null&&f(t,["_url","name"],o),t}function g_(n,t){const o={},s=c(n,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const r=c(n,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),o}function y_(n){const t={},o=c(n,["parent"]);o!=null&&f(t,["_url","parent"],o);const s=c(n,["config"]);return s!=null&&g_(s,t),t}function v_(n){const t={},o=c(n,["sdkHttpResponse"]);o!=null&&f(t,["sdkHttpResponse"],o);const s=c(n,["nextPageToken"]);s!=null&&f(t,["nextPageToken"],s);const r=c(n,["documents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),f(t,["documents"],d)}return t}class x_ extends ho{constructor(t){super(),this.apiClient=t,this.list=async o=>new hl(po.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=m_(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=h_(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=y_(t);return d=$e("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=v_(v),x=new W1;return Object.assign(x,m),x})}}}class b_ extends ho{constructor(t,o=new x_(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new hl(po.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=uC(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=pC(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fC(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=xC(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=bC(v),x=new Z1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=SC(t);return d=$e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=TC(v),x=new eS;return Object.assign(x,m),x})}}async importFile(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=gC(t);return d=$e("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=mC(v),x=new Id;return Object.assign(x,m),x})}}}let Zg=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Zg=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const S_=()=>Zg();function Sd(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Td=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Mi extends Error{}class qn extends Mi{constructor(t,o,s,r){super(`${qn.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Yr({message:s,cause:Td(o)});const d=o;return t===400?new ty(t,d,s,r):t===401?new ny(t,d,s,r):t===403?new iy(t,d,s,r):t===404?new oy(t,d,s,r):t===409?new ly(t,d,s,r):t===422?new sy(t,d,s,r):t===429?new ay(t,d,s,r):t>=500?new ry(t,d,s,r):new qn(t,d,s,r)}}class wd extends qn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Yr extends qn{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class ey extends Yr{constructor({message:t}={}){super({message:t??"Request timed out."})}}class ty extends qn{}class ny extends qn{}class iy extends qn{}class oy extends qn{}class ly extends qn{}class sy extends qn{}class ay extends qn{}class ry extends qn{}const T_=/^[a-z][a-z0-9+.-]*:/i,w_=n=>T_.test(n);let Ed=n=>(Ed=Array.isArray,Ed(n));const E_=Ed;let C_=E_;const og=C_;function __(n){if(!n)return!0;for(const t in n)return!1;return!0}function N_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const A_=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Mi(`${n} must be an integer`);if(t<0)throw new Mi(`${n} must be a positive integer`);return t},M_=n=>{try{return JSON.parse(n)}catch{return}};const R_=n=>new Promise(t=>setTimeout(t,n));const Ql="0.0.1";function k_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const I_=()=>{var n,t,o,s,r;const d=k_();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ql,"X-Stainless-OS":sg(Deno.build.os),"X-Stainless-Arch":lg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ql,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ql,"X-Stainless-OS":sg((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":lg((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=z_();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ql,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ql,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function z_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,d=s[2]||0,h=s[3]||0;return{browser:t,version:`${r}.${d}.${h}`}}}return null}const lg=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",sg=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let br;const D_=()=>br??(br=I_());function L_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function cy(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function U_(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return cy({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function uy(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function F_(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}const P_=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const dy=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function td(n,t,o){return dy(),new File(n,t??"unknown_file",o)}function H_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const G_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const fy=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",B_=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&fy(n),j_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function V_(n,t,o){if(dy(),n=await n,B_(n))return n instanceof File?n:td([await n.arrayBuffer()],n.name);if(j_(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),td(await Cd(r),t,o)}const s=await Cd(n);if(t||(t=H_(n)),!o?.type){const r=s.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return td(s,t,o)}async function Cd(n){var t,o,s,r,d;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(fy(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(G_(n))try{for(var y=!0,v=Li(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await Cd(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const x=(d=n?.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${O_(n)}`)}return h}function O_(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class py{constructor(t){this._client=t}}py._key=[];function hy(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ag=Object.freeze(Object.create(null)),q_=(n=hy)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const d=[],h=o.reduce((x,b,T)=>{var N,_,q;/[?#]/.test(b)&&(r=!0);const P=s[T];let Y=(r?encodeURIComponent:n)(""+P);return T!==s.length&&(P==null||typeof P=="object"&&P.toString===((q=Object.getPrototypeOf((_=Object.getPrototypeOf((N=P.hasOwnProperty)!==null&&N!==void 0?N:ag))!==null&&_!==void 0?_:ag))===null||q===void 0?void 0:q.toString))&&(Y=P+"",d.push({start:x.length+b.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),x+b+(T===s.length?"":Y)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)d.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(d.sort((x,b)=>x.start-b.start),d.length>0){let x=0;const b=d.reduce((T,N)=>{const _=" ".repeat(N.start-x),q="^".repeat(N.length);return x=N.start+N.length,T+_+q},"");throw new Mi(`Path parameters result in path with invalid segments:
${d.map(T=>T.error).join(`
`)}
${h}
${b}`)}return h}),Sr=q_(hy);class my extends py{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,d=Pr(t,["api_version"]);if("model"in d&&"agent_config"in d)throw new Mi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new Mi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sr`/${r}/interactions`,Object.assign(Object.assign({body:d},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(Sr`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(Sr`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const d=o??{},{api_version:h=this._client.apiVersion}=d,y=Pr(d,["api_version"]);return this._client.get(Sr`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},s),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}my._key=Object.freeze(["interactions"]);class gy extends my{}function $_(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of n)o.set(r,s),s+=r.length;return o}let Tr;function Hd(n){let t;return(Tr??(t=new globalThis.TextEncoder,Tr=t.encode.bind(t)))(n)}let wr;function rg(n){let t;return(wr??(t=new globalThis.TextDecoder,wr=t.decode.bind(t)))(n)}class Jr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Hd(t):t;this.buffer=$_([this.buffer,o]);const s=[];let r;for(;(r=Y_(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(rg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=rg(this.buffer.subarray(0,d));s.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Jr.NEWLINE_CHARS=new Set([`
`,"\r"]);Jr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Y_(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function J_(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const Hr={off:0,error:200,warn:300,info:400,debug:500},cg=(n,t,o)=>{if(n){if(N_(Hr,n))return n;On(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Hr))}`)}};function sa(){}function Er(n,t,o){return!t||Hr[n]>Hr[o]?sa:t[n].bind(t)}const K_={error:sa,warn:sa,info:sa,debug:sa};let ug=new WeakMap;function On(n){var t;const o=n.logger,s=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return K_;const r=ug.get(o);if(r&&r[0]===s)return r[1];const d={error:Er("error",o,s),warn:Er("warn",o,s),info:Er("info",o,s),debug:Er("debug",o,s)};return ug.set(o,[s,d]),d}const pl=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class ts{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const d=s?On(s):console;function h(){return Di(this,arguments,function*(){var v,m,x,b;if(r)throw new Mi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var N=!0,_=Li(X_(t,o)),q;q=yield Tt(_.next()),v=q.done,!v;N=!0){b=q.value,N=!1;const P=b;if(!T)if(P.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Tt(JSON.parse(P.data))}catch(Y){throw d.error("Could not parse message into JSON:",P.data),d.error("From chunk:",P.raw),Y}}}catch(P){m={error:P}}finally{try{!N&&!v&&(x=_.return)&&(yield Tt(x.call(_)))}finally{if(m)throw m.error}}T=!0}catch(P){if(Sd(P))return yield Tt(void 0);throw P}finally{T||o.abort()}})}return new ts(h,o,s)}static fromReadableStream(t,o,s){let r=!1;function d(){return Di(this,arguments,function*(){var v,m,x,b;const T=new Jr,N=uy(t);try{for(var _=!0,q=Li(N),P;P=yield Tt(q.next()),v=P.done,!v;_=!0){b=P.value,_=!1;const Y=b;for(const de of T.decode(Y))yield yield Tt(de)}}catch(Y){m={error:Y}}finally{try{!_&&!v&&(x=q.return)&&(yield Tt(x.call(q)))}finally{if(m)throw m.error}}for(const Y of T.flush())yield yield Tt(Y)})}function h(){return Di(this,arguments,function*(){var v,m,x,b;if(r)throw new Mi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var N=!0,_=Li(d()),q;q=yield Tt(_.next()),v=q.done,!v;N=!0){b=q.value,N=!1;const P=b;T||P&&(yield yield Tt(JSON.parse(P)))}}catch(P){m={error:P}}finally{try{!N&&!v&&(x=_.return)&&(yield Tt(x.call(_)))}finally{if(m)throw m.error}}T=!0}catch(P){if(Sd(P))return yield Tt(void 0);throw P}finally{T||o.abort()}})}return new ts(h,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=d=>({next:()=>{if(d.length===0){const h=s.next();t.push(h),o.push(h)}return d.shift()}});return[new ts(()=>r(t),this.controller,this.client),new ts(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return cy({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:d}=await o.next();if(d)return s.close();const h=Hd(JSON.stringify(r)+`
`);s.enqueue(h)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function X_(n,t){return Di(this,arguments,function*(){var s,r,d,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Mi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Mi("Attempted to iterate over a response with no body");const y=new W_,v=new Jr,m=uy(n.body);try{for(var x=!0,b=Li(Q_(m)),T;T=yield Tt(b.next()),s=T.done,!s;x=!0){h=T.value,x=!1;const N=h;for(const _ of v.decode(N)){const q=y.decode(_);q&&(yield yield Tt(q))}}}catch(N){r={error:N}}finally{try{!x&&!s&&(d=b.return)&&(yield Tt(d.call(b)))}finally{if(r)throw r.error}}for(const N of v.flush()){const _=y.decode(N);_&&(yield yield Tt(_))}})}function Q_(n){return Di(this,arguments,function*(){var o,s,r,d;let h=new Uint8Array;try{for(var y=!0,v=Li(n),m;m=yield Tt(v.next()),o=m.done,!o;y=!0){d=m.value,y=!1;const x=d;if(x==null)continue;const b=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?Hd(x):x;let T=new Uint8Array(h.length+b.length);T.set(h),T.set(b,h.length),h=T;let N;for(;(N=J_(h))!==-1;)yield yield Tt(h.slice(0,N)),h=h.slice(N)}}catch(x){s={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield Tt(r.call(v)))}finally{if(s)throw s.error}}h.length>0&&(yield yield Tt(h))})}class W_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=Z_(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function Z_(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function eN(n,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:d}=t,h=await(async()=>{var y;if(t.options.stream)return On(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):ts.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return On(n).debug(`[${s}] response parsed`,pl({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-d})),h}class Gd extends Promise{constructor(t,o,s=eN){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new Gd(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const yy=Symbol("brand.privateNullableHeaders");function*tN(n){if(!n)return;if(yy in n){const{values:s,nulls:r}=n;yield*s.entries();for(const d of r)yield[d,null];return}let t=!1,o;n instanceof Headers?o=n.entries():og(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const d=og(s[1])?s[1]:[s[1]];let h=!1;for(const y of d)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const ea=n=>{const t=new Headers,o=new Set;for(const s of n){const r=new Set;for(const[d,h]of tN(s)){const y=d.toLowerCase();r.has(y)||(t.delete(d),r.add(y)),h===null?(t.delete(d),o.add(y)):(t.append(d,h),o.delete(y))}}return{[yy]:!0,values:t,nulls:o}};const nd=n=>{var t,o,s,r,d,h;if(typeof globalThis.process<"u")return(s=(o=(t=N1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(h=(d=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||d===void 0?void 0:d.call(r,n))===null||h===void 0?void 0:h.trim()};var vy;class Kr{constructor(t){var o,s,r,d,h,y,v,{baseURL:m=nd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=nd("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:b="v1beta"}=t,T=Pr(t,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:x,apiVersion:b},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(s=N.timeout)!==null&&s!==void 0?s:Kr.DEFAULT_TIMEOUT,this.logger=(r=N.logger)!==null&&r!==void 0?r:console;const _="warn";this.logLevel=_,this.logLevel=(h=(d=cg(N.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:cg(nd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:_,this.fetchOptions=N.fetchOptions,this.maxRetries=(y=N.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=N.fetch)!==null&&v!==void 0?v:L_(),this.encoder=P_,this._options=N,this.apiKey=x,this.apiVersion=b,this.clientAdapter=N.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=ea([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return ea([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ea([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new Mi(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ql}`}defaultIdempotencyKey(){return`stainless-node-retry-${S_()}`}makeStatusError(t,o,s,r){return qn.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,d=w_(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return __(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(d.search=this.stringifyQuery(o)),d.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new Gd(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,d,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:b}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=s===void 0?"":`, retryOf: ${s}`,_=Date.now();if(On(this).debug(`[${T}] sending request`,pl({retryOfRequestLogID:s,method:y.method,url:x,options:y,headers:m.headers})),!((d=y.signal)===null||d===void 0)&&d.aborted)throw new wd;const q=new AbortController,P=await this.fetchWithTimeout(x,m,b,q).catch(Td),Y=Date.now();if(P instanceof globalThis.Error){const pe=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new wd;const ve=Sd(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(o)return On(this).info(`[${T}] connection ${ve?"timed out":"failed"} - ${pe}`),On(this).debug(`[${T}] connection ${ve?"timed out":"failed"} (${pe})`,pl({retryOfRequestLogID:s,url:x,durationMs:Y-_,message:P.message})),this.retryRequest(y,o,s??T);throw On(this).info(`[${T}] connection ${ve?"timed out":"failed"} - error; no more retries left`),On(this).debug(`[${T}] connection ${ve?"timed out":"failed"} (error; no more retries left)`,pl({retryOfRequestLogID:s,url:x,durationMs:Y-_,message:P.message})),ve?new ey:new Yr({cause:P})}const de=`[${T}${N}] ${m.method} ${x} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${Y-_}ms`;if(!P.ok){const pe=await this.shouldRetry(P);if(o&&pe){const Ne=`retrying, ${o} attempts remaining`;return await F_(P.body),On(this).info(`${de} - ${Ne}`),On(this).debug(`[${T}] response error (${Ne})`,pl({retryOfRequestLogID:s,url:P.url,status:P.status,headers:P.headers,durationMs:Y-_})),this.retryRequest(y,o,s??T,P.headers)}const ve=pe?"error; no more retries left":"error; not retryable";On(this).info(`${de} - ${ve}`);const Le=await P.text().catch(Ne=>Td(Ne).message),Be=M_(Le),Te=Be?void 0:Le;throw On(this).debug(`[${T}] response error (${ve})`,pl({retryOfRequestLogID:s,url:P.url,status:P.status,headers:P.headers,message:Te,durationMs:Date.now()-_})),this.makeStatusError(P.status,Be,Te,P.headers)}return On(this).info(de),On(this).debug(`[${T}] response start`,pl({retryOfRequestLogID:s,url:P.url,status:P.status,headers:P.headers,durationMs:Y-_})),{response:P,options:y,controller:q,requestLogID:T,retryOfRequestLogID:s,startTime:_}}async fetchWithTimeout(t,o,s,r){const d=o||{},{signal:h,method:y}=d,v=Pr(d,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(b.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,b)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var d;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(d=t.maxRetries)!==null&&d!==void 0?d:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await R_(h),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const d=o-t,h=Math.min(.5*Math.pow(2,d),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,d;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,b=this.buildURL(v,m,x);"timeout"in h&&A_("timeout",h.timeout),h.timeout=(s=h.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:N}=this.buildBody({options:h}),_=await this.buildHeaders({options:t,method:y,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:_},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(d=h.fetchOptions)!==null&&d!==void 0?d:{}),url:b,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let d={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=ea([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),D_()),this._options.defaultHeaders,s,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=ea([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:U_(t)}:this.encoder({body:t,headers:s})}}Kr.DEFAULT_TIMEOUT=6e4;class An extends Kr{constructor(){super(...arguments),this.interactions=new gy(this)}}vy=An;An.GeminiNextGenAPIClient=vy;An.GeminiNextGenAPIClientError=Mi;An.APIError=qn;An.APIConnectionError=Yr;An.APIConnectionTimeoutError=ey;An.APIUserAbortError=wd;An.NotFoundError=oy;An.ConflictError=ly;An.RateLimitError=ay;An.BadRequestError=ty;An.AuthenticationError=ny;An.InternalServerError=ry;An.PermissionDeniedError=iy;An.UnprocessableEntityError=sy;An.toFile=V_;An.Interactions=gy;function nN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function iN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function oN(n,t){const o={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(o,["sdkHttpResponse"],s),o}function lN(n,t){const o={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(o,["sdkHttpResponse"],s),o}function sN(n,t,o){const s={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&f(t,["displayName"],r),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=c(n,["epochCount"]);t!==void 0&&d!=null&&f(t,["tuningTask","hyperparameters","epochCount"],d);const h=c(n,["learningRateMultiplier"]);if(h!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],h),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=c(n,["batchSize"]);t!==void 0&&y!=null&&f(t,["tuningTask","hyperparameters","batchSize"],y);const v=c(n,["learningRate"]);if(t!==void 0&&v!=null&&f(t,["tuningTask","hyperparameters","learningRate"],v),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function aN(n,t,o){const s={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const N=c(n,["validationDataset"]);t!==void 0&&N!=null&&f(t,["supervisedTuningSpec"],dg(N))}else if(r==="PREFERENCE_TUNING"){const N=c(n,["validationDataset"]);t!==void 0&&N!=null&&f(t,["preferenceOptimizationSpec"],dg(N))}const d=c(n,["tunedModelDisplayName"]);t!==void 0&&d!=null&&f(t,["tunedModelDisplayName"],d);const h=c(n,["description"]);t!==void 0&&h!=null&&f(t,["description"],h);let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const N=c(n,["epochCount"]);t!==void 0&&N!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(y==="PREFERENCE_TUNING"){const N=c(n,["epochCount"]);t!==void 0&&N!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const N=c(n,["learningRateMultiplier"]);t!==void 0&&N!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(v==="PREFERENCE_TUNING"){const N=c(n,["learningRateMultiplier"]);t!==void 0&&N!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let m=c(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=c(n,["exportLastCheckpointOnly"]);t!==void 0&&N!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(m==="PREFERENCE_TUNING"){const N=c(n,["exportLastCheckpointOnly"]);t!==void 0&&N!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let x=c(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const N=c(n,["adapterSize"]);t!==void 0&&N!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(x==="PREFERENCE_TUNING"){const N=c(n,["adapterSize"]);t!==void 0&&N!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=c(n,["labels"]);t!==void 0&&b!=null&&f(t,["labels"],b);const T=c(n,["beta"]);return t!==void 0&&T!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function rN(n,t){const o={},s=c(n,["baseModel"]);s!=null&&f(o,["baseModel"],s);const r=c(n,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const d=c(n,["trainingDataset"]);d!=null&&xN(d);const h=c(n,["config"]);return h!=null&&sN(h,o),o}function cN(n,t){const o={},s=c(n,["baseModel"]);s!=null&&f(o,["baseModel"],s);const r=c(n,["preTunedModel"]);r!=null&&f(o,["preTunedModel"],r);const d=c(n,["trainingDataset"]);d!=null&&bN(d,o,t);const h=c(n,["config"]);return h!=null&&aN(h,o,t),o}function uN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function dN(n,t){const o={},s=c(n,["name"]);return s!=null&&f(o,["_url","name"],s),o}function fN(n,t,o){const s={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const d=c(n,["pageToken"]);t!==void 0&&d!=null&&f(t,["_query","pageToken"],d);const h=c(n,["filter"]);return t!==void 0&&h!=null&&f(t,["_query","filter"],h),s}function pN(n,t,o){const s={},r=c(n,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const d=c(n,["pageToken"]);t!==void 0&&d!=null&&f(t,["_query","pageToken"],d);const h=c(n,["filter"]);return t!==void 0&&h!=null&&f(t,["_query","filter"],h),s}function hN(n,t){const o={},s=c(n,["config"]);return s!=null&&fN(s,o),o}function mN(n,t){const o={},s=c(n,["config"]);return s!=null&&pN(s,o),o}function gN(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const d=c(n,["tunedModels"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>xy(y))),f(o,["tuningJobs"],h)}return o}function yN(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(o,["nextPageToken"],r);const d=c(n,["tuningJobs"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>_d(y))),f(o,["tuningJobs"],h)}return o}function vN(n,t){const o={},s=c(n,["name"]);s!=null&&f(o,["model"],s);const r=c(n,["name"]);return r!=null&&f(o,["endpoint"],r),o}function xN(n,t){const o={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),f(o,["examples","examples"],r)}return o}function bN(n,t,o){const s={};let r=c(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=c(n,["gcsUri"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let d=c(o,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(d==="PREFERENCE_TUNING"){const h=c(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function xy(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(o,["name"],r);const d=c(n,["state"]);d!=null&&f(o,["state"],Lg(d));const h=c(n,["createTime"]);h!=null&&f(o,["createTime"],h);const y=c(n,["tuningTask","startTime"]);y!=null&&f(o,["startTime"],y);const v=c(n,["tuningTask","completeTime"]);v!=null&&f(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(n,["description"]);x!=null&&f(o,["description"],x);const b=c(n,["baseModel"]);b!=null&&f(o,["baseModel"],b);const T=c(n,["_self"]);return T!=null&&f(o,["tunedModel"],vN(T)),o}function _d(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(o,["name"],r);const d=c(n,["state"]);d!=null&&f(o,["state"],Lg(d));const h=c(n,["createTime"]);h!=null&&f(o,["createTime"],h);const y=c(n,["startTime"]);y!=null&&f(o,["startTime"],y);const v=c(n,["endTime"]);v!=null&&f(o,["endTime"],v);const m=c(n,["updateTime"]);m!=null&&f(o,["updateTime"],m);const x=c(n,["error"]);x!=null&&f(o,["error"],x);const b=c(n,["description"]);b!=null&&f(o,["description"],b);const T=c(n,["baseModel"]);T!=null&&f(o,["baseModel"],T);const N=c(n,["tunedModel"]);N!=null&&f(o,["tunedModel"],N);const _=c(n,["preTunedModel"]);_!=null&&f(o,["preTunedModel"],_);const q=c(n,["supervisedTuningSpec"]);q!=null&&f(o,["supervisedTuningSpec"],q);const P=c(n,["preferenceOptimizationSpec"]);P!=null&&f(o,["preferenceOptimizationSpec"],P);const Y=c(n,["tuningDataStats"]);Y!=null&&f(o,["tuningDataStats"],Y);const de=c(n,["encryptionSpec"]);de!=null&&f(o,["encryptionSpec"],de);const pe=c(n,["partnerModelTuningSpec"]);pe!=null&&f(o,["partnerModelTuningSpec"],pe);const ve=c(n,["customBaseModel"]);ve!=null&&f(o,["customBaseModel"],ve);const Le=c(n,["experiment"]);Le!=null&&f(o,["experiment"],Le);const Be=c(n,["labels"]);Be!=null&&f(o,["labels"],Be);const Te=c(n,["outputUri"]);Te!=null&&f(o,["outputUri"],Te);const We=c(n,["pipelineJob"]);We!=null&&f(o,["pipelineJob"],We);const Ne=c(n,["serviceAccount"]);Ne!=null&&f(o,["serviceAccount"],Ne);const Qe=c(n,["tunedModelDisplayName"]);Qe!=null&&f(o,["tunedModelDisplayName"],Qe);const He=c(n,["veoTuningSpec"]);return He!=null&&f(o,["veoTuningSpec"],He),o}function SN(n,t){const o={},s=c(n,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(o,["name"],r);const d=c(n,["metadata"]);d!=null&&f(o,["metadata"],d);const h=c(n,["done"]);h!=null&&f(o,["done"],h);const y=c(n,["error"]);return y!=null&&f(o,["error"],y),o}function dg(n,t){const o={},s=c(n,["gcsUri"]);s!=null&&f(o,["validationDatasetUri"],s);const r=c(n,["vertexDatasetResource"]);return r!=null&&f(o,["validationDatasetUri"],r),o}class TN extends ho{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new hl(po.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},o),{preTunedModel:r});return d.baseModel=void 0,await this.tuneInternal(d)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),d=await this.tuneMldevInternal(r);let h="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?h=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(h=d.name.split("/operations/")[0]),{name:h,state:hd.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=dN(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>_d(x))}else{const m=uN(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>xy(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=mN(t);return y=$e("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=yN(x),T=new Fm;return Object.assign(T,b),T})}else{const m=hN(t);return y=$e("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=gN(x),T=new Fm;return Object.assign(T,b),T})}}async cancel(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=iN(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=lN(x),T=new Pm;return Object.assign(T,b),T})}else{const m=nN(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const b=oN(x),T=new Pm;return Object.assign(T,b),T})}}async tuneInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=cN(t,t);return d=$e("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>_d(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=rN(t);return d=$e("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>SN(v))}}}class wN{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EN=1024*1024*8,CN=3,_N=1e3,NN=2,Gr="x-goog-upload-status";async function AN(n,t,o){var s;const r=await by(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[Gr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function MN(n,t,o){var s;const r=await by(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[Gr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=Mg(d),y=new zd;return Object.assign(y,h),y}async function by(n,t,o){var s,r;let d=0,h=0,y=new md(new Response),v="upload";for(d=n.size;h<d;){const m=Math.min(EN,d-h),x=n.slice(h,h+m);h+m>=d&&(v+=", finalize");let b=0,T=_N;for(;b<CN&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((s=y?.headers)===null||s===void 0)&&s[Gr]));)b++,await kN(T),T=T*NN;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[Gr])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function RN(n){return{size:n.size,type:n.type}}function kN(n){return new Promise(t=>setTimeout(t,n))}class IN{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await AN(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await MN(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await RN(t)}}class zN{create(t,o,s){return new DN(t,o,s)}}class DN{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const fg="x-goog-api-key";class LN{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(fg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(fg,this.apiKey)}}}const UN="gl-node/";class FN{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new An({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=k1(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new LN(this.apiKey);this.apiClient=new RC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:UN+"web",uploader:new IN,downloader:new wN}),this.models=new KC(this.apiClient),this.live=new VC(this.apiClient,r,new zN),this.batches=new sT(this.apiClient),this.chats=new BT(this.models,this.apiClient),this.caches=new PT(this.apiClient),this.files=new QT(this.apiClient),this.operations=new XC(this.apiClient),this.authTokens=new f_(this.apiClient),this.tunings=new TN(this.apiClient),this.fileSearchStores=new b_(this.apiClient)}}const PN=n=>new FN({apiKey:n}),HN={type:un.OBJECT,properties:{segments:{type:un.ARRAY,items:{type:un.OBJECT,properties:{startTime:{type:un.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:un.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:un.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},GN={type:un.OBJECT,properties:{segments:{type:un.ARRAY,items:{type:un.OBJECT,properties:{startTime:{type:un.STRING},endTime:{type:un.STRING},text:{type:un.STRING},words:{type:un.ARRAY,items:{type:un.OBJECT,properties:{text:{type:un.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:un.STRING,description:"Start time of the word"},endTime:{type:un.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function Cr(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let b=0;m[1]&&(b=parseFloat("0."+m[1])),o=y*3600+v*60+x+b}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const s=Math.floor(o/60),r=Math.floor(o%60),d=Math.round(o%1*1e3);return`${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(d).padStart(3,"0")}`}function BN(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const s=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let d;for(;(d=r.exec(t))!==null;){const h=d[3]!==void 0?d[3]:d[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}s.push({startTime:d[1],endTime:d[2],text:y})}if(s.length>0)return{segments:s};throw new Error("Response structure invalid and could not be repaired.")}async function jN(n,t,o,s,r,d="line"){try{const h=PN(s),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";d==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. REPEATED WORDS & STUTTERS: **EXTREMELY IMPORTANT**
       - Treat every spoken utterance as a distinct word which must be timestamped.
       - Example: "No no no wait" -> 4 distinct word objects.
       - Example: "I I I didn't mean it" -> 3 distinct "I" objects followed by "didn't", "mean", "it".
       - NEVER merge repeated words into a single event.
    4. DETAILS: Inside each line object, you MUST provide a "words" array.
    5. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    6. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    7. FAST SPEECH / RAP / CONVERSATION HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics or conversation, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating precise timed lyrics and subtitled conversations.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${d.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,b={responseMimeType:"application/json",responseSchema:d==="word"?GN:HN,temperature:.1};y&&(b.thinkingConfig={thinkingBudget:1024});const T=new Promise((Y,de)=>{r?.aborted&&de(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>de(new DOMException("Aborted","AbortError")))});let _=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:b}),T])).text;if(!_)throw new Error("Empty response from model");return _=_.trim(),_.startsWith("```json")?_=_.replace(/^```json\s*/,"").replace(/\s*```$/,""):_.startsWith("```")&&(_=_.replace(/^```\s*/,"").replace(/\s*```$/,"")),(BN(_).segments||[]).map(Y=>({startTime:Cr(String(Y.startTime)),endTime:Cr(String(Y.endTime)),text:String(Y.text),words:Y.words?Y.words.map(de=>({text:String(de.text),startTime:Cr(String(de.startTime)),endTime:Cr(String(de.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const VN=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:s,onPlayTrack:r,isPlaying:d,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:b})=>{const{confirm:T}=jr(),N=Z.useRef(null),_=Z.useRef(new Map),q=H=>{const ae=Math.floor(H/60).toString().padStart(2,"0"),ue=(H%60).toFixed(2).padStart(5,"0");return`[${ae}:${ue}]`},[P,Y]=Z.useState(null),[de,pe]=Z.useState({key:null,direction:"asc"}),[ve,Le]=Z.useState(new Set),[Be,Te]=Z.useState(new Set),[We,Ne]=Z.useState(localStorage.getItem("gemini_api_key")||""),[Qe,He]=Z.useState("gemini-2.5-flash"),[rt,ft]=Z.useState("line"),[_t,Nt]=Z.useState(!1),j=Z.useRef(null),[Ce,oe]=Z.useState(null);Z.useEffect(()=>{We&&localStorage.setItem("gemini_api_key",We)},[We]);const yt=o>=0?n[o]:null,vt=yt?.parsedLyrics||[],U=Z.useMemo(()=>yt?vt.findIndex((H,ae)=>{if(H.endTime!==void 0)return x>=H.time&&x<H.endTime;const ue=vt[ae+1];return x>=H.time&&(!ue||x<ue.time)}):-1,[x,yt,vt]);Z.useEffect(()=>{if(U!==-1){const H=document.getElementById(`lyric-active-${o}`);H&&H.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[U,o]);const le=H=>{if(n.length===0)return;const ae=o>=0?n[o]:null,ue=[...n];let Me="asc";if(H==="random"){pe({key:"random",direction:"asc"});for(let ye=ue.length-1;ye>0;ye--){const me=Math.floor(Math.random()*(ye+1));[ue[ye],ue[me]]=[ue[me],ue[ye]]}}else{de.key===H&&de.direction==="asc"&&(Me="desc"),pe({key:H,direction:Me});const ye=Me==="asc"?1:-1;H==="filename"?ue.sort((me,E)=>ye*me.audioFile.name.localeCompare(E.audioFile.name)):H==="artist"?ue.sort((me,E)=>ye*(me.metadata.artist||"").localeCompare(E.metadata.artist||"")):H==="title"?ue.sort((me,E)=>ye*(me.metadata.title||"").localeCompare(E.metadata.title||"")):H==="album"&&ue.sort((me,E)=>ye*(me.metadata.album||"").localeCompare(E.metadata.album||""))}if(t(ue),ae){const ye=ue.findIndex(me=>me.id===ae.id);ye!==-1&&s(ye)}},xe=Z.useCallback(H=>{P!==null&&H.key==="Delete"?(H.preventDefault(),H.stopPropagation(),m?m(P):t(ae=>{const ue=[...ae];return ue.splice(P,1),ue}),P>=n.length-1&&Y(n.length>1?n.length-2:null)):H.key==="ArrowDown"&&n.length>0?(H.preventDefault(),H.stopPropagation(),Y(ae=>ae===null?0:Math.min(ae+1,n.length-1))):H.key==="ArrowUp"&&n.length>0?(H.preventDefault(),H.stopPropagation(),Y(ae=>ae===null?0:Math.max(ae-1,0))):H.key==="Enter"&&P!==null?(H.preventDefault(),H.stopPropagation(),r(P)):H.key==="Escape"&&Y(null)},[P,n.length,t,r]);Z.useEffect(()=>{const H=N.current;if(H)return H.addEventListener("keydown",xe),()=>H.removeEventListener("keydown",xe)},[xe]),Z.useEffect(()=>{P!==null&&P>=n.length&&Y(n.length>0?n.length-1:null)},[n.length,P]);const je=async H=>{const ae=new Map;H.forEach(me=>{const E=me.name.split(".").pop()?.toLowerCase(),O=(me.webkitRelativePath||me.name).replace(/\.[^/.]+$/,"");ae.has(O)||ae.set(O,{});const R=ae.get(O);["mp3","wav","ogg","flac","m4a","mp4","webm","ogg","mkv","mov","avi","m4v"].includes(E||"")?R.audio=me:["lrc","srt","ttml","xml","json","vtt"].includes(E||"")&&(R.lyric=me)});const ue=[],Me=async(me,E)=>new Promise(D=>{if(me.type.startsWith("video/")){D({title:E,artist:"Unknown Artist",coverUrl:URL.createObjectURL(me),backgroundType:"video"});return}ad(()=>import("./jsmediatags.min-DJupGrYy.js").then(O=>O.j),[]).then(O=>{O.read(me,{onSuccess:R=>{const{title:ee,artist:L,album:re,picture:se}=R.tags;let fe=null;if(se){const{data:G,format:Je}=se;let Ke="";for(let Ue=0;Ue<G.length;Ue++)Ke+=String.fromCharCode(G[Ue]);fe=`data:${Je};base64,${window.btoa(Ke)}`}D({title:ee||E,artist:L||"Unknown Artist",album:re||void 0,coverUrl:fe})},onError:()=>{D({title:E,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{D({title:E,artist:"Unknown Artist",coverUrl:null})})}),ye=async me=>{try{const E=await me.text(),D=me.name.split(".").pop()?.toLowerCase();if(D==="lrc")return is(E);if(D==="srt")return os(E);if(D==="ttml"||D==="xml")return ca(E);if(D==="vtt")return ua(E);if(D==="json")return y1(E)}catch(E){console.error("Failed to parse lyrics",E)}return[]};for(const[me,E]of ae.entries())if(E.audio){const D=await Me(E.audio,me),O=Math.random().toString(36).substr(2,9);let R=[];E.lyric&&(R=await ye(E.lyric)),ue.push({id:O,audioFile:E.audio,lyricFile:E.lyric,parsedLyrics:R,metadata:D,duration:0})}if(ue.length>0){const me=[...n,...ue];t(me),r(0,!1,me)}},st=async H=>{if(H.target.files&&H.target.files.length>0){const ae=Array.from(H.target.files);await je(ae),H.target.value=""}},[w,A]=Z.useState(!1),te=H=>{H.preventDefault(),H.stopPropagation(),A(!0)},ce=H=>{H.preventDefault(),H.stopPropagation(),A(!1)},Ge=async H=>{if(H.preventDefault(),H.stopPropagation(),A(!1),H.dataTransfer.files&&H.dataTransfer.files.length>0){const ae=Array.from(H.dataTransfer.files);await je(ae)}},_e=H=>{m?m(H):t(ae=>{const ue=[...ae];return ue.splice(H,1),ue})},Ee=H=>new Promise((ae,ue)=>{const Me=new FileReader;Me.readAsDataURL(H),Me.onload=()=>{const ye=Me.result.split(",")[1];ae(ye)},Me.onerror=ye=>ue(ye)}),Re=async H=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(ve.has(H.id)){const ye=_.current.get(H.id);ye&&ye.abort();return}const ae=We||"PLACEHOLDER_API_KEY";if(ae.trim().length<39){alert(`Invalid API Key length (${ae.trim().length}). It must be at least 39 characters.`),Nt(!0);return}Le(ye=>new Set(ye).add(H.id));const ue=new AbortController;_.current.set(H.id,ue);const Me=19.5*1024*1024;if(H.audioFile.size>Me){alert(`File is too large (${(H.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),Le(ye=>{const me=new Set(ye);return me.delete(H.id),me}),_.current.delete(H.id);return}try{const ye=await Ee(H.audioFile);let me=H.duration||0;if(me===0)try{me=await new Promise(O=>{const R=new Audio(URL.createObjectURL(H.audioFile));R.onloadedmetadata=()=>{O(R.duration),URL.revokeObjectURL(R.src)},R.onerror=()=>{URL.revokeObjectURL(R.src),O(0)}})}catch(O){console.warn("Could not determine duration for AI validation",O)}let D=(await jN(Qe,ye,H.audioFile.type,ae,ue.signal,rt)).map(O=>({time:la(O.startTime),text:O.text,endTime:la(O.endTime),words:O.words?O.words.map(R=>({text:R.text,startTime:la(R.startTime),endTime:la(R.endTime)})):void 0}));me>0&&(D=D.filter(O=>O.time<me&&O.time>=0)),t(O=>O.map(R=>R.id===H.id?{...R,parsedLyrics:D.sort((ee,L)=>ee.time-L.time),duration:me>0?me:R.duration}:R))}catch(ye){if(ye.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",ye);let me="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)me="Connection lost. Please check your internet connection.";else if(ye.message){const E=ye.message.toLowerCase();E.includes("fetch")||E.includes("network")||E.includes("failed to connect")?me="Network error. Please check your connection.":(E.includes("api key")||ye.message.includes("400")||ye.message.includes("401")||ye.message.includes("403"))&&(me="API Key Error: Please check if your key is valid and has credits.")}alert(me)}}finally{_.current.delete(H.id),Le(ye=>{const me=new Set(ye);return me.delete(H.id),me})}},I=async H=>{if(!navigator.onLine){alert("No internet connection.");return}Te(ae=>new Set(ae).add(H.id));try{const ae=await ad(()=>import("./index.min-C5KIgp5v.js").then(D=>D.i),[]);let ue;const Me=ae.default||ae;console.log("SyncLyrics Module:",ae);const ye=["musixmatch","lrclib","netease"];if(typeof Me=="function"&&Me.prototype&&Me.prototype.getLyrics){console.log("Detected Class usage");const D=new Me({sources:ye});ue=O=>D.getLyrics(O)}else if(Me.getLyrics&&typeof Me.getLyrics=="function")console.log("Detected Instance usage"),ue=D=>Me.getLyrics(D);else if(Me.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const D=Me.SyncLyrics;if(typeof D=="function"&&D.prototype&&D.prototype.getLyrics){console.log("Using SyncLyrics as Class");const O=new D({sources:ye});ue=R=>O.getLyrics(R)}else if(typeof D=="function")console.log("Using SyncLyrics as Function"),ue=D;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Me=="function")console.log("Detected Function usage"),ue=Me;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Me}. Keys: ${typeof Me=="object"?JSON.stringify(Object.keys(Me)):"N/A"}`);const me={track:H.metadata.title,artist:H.metadata.artist,album:H.metadata.album,sources:ye};console.log("Searching lyrics with options:",me);const E=await ue(me);if(E&&typeof E=="string")ne(E,H);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let D=H.duration||0;if(D===0)try{D=await new Promise(L=>{const re=new Audio(URL.createObjectURL(H.audioFile));re.onloadedmetadata=()=>{const se=re.duration;URL.revokeObjectURL(re.src),L(se)},re.onerror=()=>L(0)})}catch(L){console.warn("Could not determine duration for search",L)}const O=new URLSearchParams({artist_name:H.metadata.artist,track_name:H.metadata.title,album_name:H.metadata.album||"",duration:D.toString()}),R=await fetch(`https://lrclib.net/api/get?${O.toString()}`);if(!R.ok){const L=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(H.metadata.title+" "+H.metadata.artist)}`);if(L.ok){const re=await L.json();if(Array.isArray(re)&&re.length>0){const se=re.find(fe=>fe.syncedLyrics);if(se){ne(se.syncedLyrics,H);return}else if(re[0].plainLyrics){ne(re[0].plainLyrics,H);return}}}throw new Error("No lyrics found in fallback source.")}const ee=await R.json();ee.syncedLyrics?ne(ee.syncedLyrics,H):ee.plainLyrics?ne(ee.plainLyrics,H):alert("No lyrics found.")}}catch(ae){console.error("Search failed:",ae),ae.message?.includes("CORS")||ae.message?.includes("etwork")||ae.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+ae.message)}finally{Te(ae=>{const ue=new Set(ae);return ue.delete(H.id),ue})}},ne=(H,ae)=>{let ue=is(H);if(ue.length===0&&(ue=os(H)),ue.length>0){const Me=ue.some(ye=>ye.words&&ye.words.length>0);console.log(Me?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(ye=>ye.map(me=>me.id===ae.id?{...me,parsedLyrics:ue,lyricFile:new File([H],`synched-lyrics${Me?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:me))}else alert("Lyrics found but could not be parsed.")},ge=(H,ae,ue)=>{const Me=new Blob([H],{type:"application/octet-stream"}),ye=URL.createObjectURL(Me),me=document.createElement("a");me.href=ye,me.download=ae,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(ye)},Oe=async(H,ae)=>{const ue=H.parsedLyrics||[];if(ue.length===0)return;let Me="";const ye=ae==="lrc-enhanced"?"lrc":ae,me=`${H.metadata.title||"lyrics"}.${ye}`;let E=H.duration||0;if(E===0)try{E=await new Promise(O=>{const R=new Audio(URL.createObjectURL(H.audioFile));R.onloadedmetadata=()=>{O(R.duration),URL.revokeObjectURL(R.src)},R.onerror=()=>O(0)})}catch(O){console.warn("Could not determine duration for export check",O)}const D=ue.map(O=>({...O,words:O.words?O.words.filter(R=>R.text.trim().length>0).map(R=>({...R})):void 0}));for(let O=0;O<D.length;O++){const R=D[O],ee=D[O+1];if(R.endTime===void 0&&(ee?R.endTime=ee.time:R.endTime=E>0?E:R.time+5),R.words&&R.words.length>0)for(let L=0;L<R.words.length;L++){const re=R.words[L],se=R.words[L+1];(ae==="ttml"||re.endTime===void 0||re.endTime<=re.startTime)&&(se?re.endTime=se.startTime:re.endTime=R.endTime)}}if(ae==="txt")Me=D.map(O=>O.text).join(`
`);else if(ae==="json")Me=JSON.stringify(D,null,2);else if(ae==="srt"){const O=R=>{const ee=Math.floor(R/3600).toString().padStart(2,"0"),L=Math.floor(R%3600/60).toString().padStart(2,"0"),re=Math.floor(R%60).toString().padStart(2,"0"),se=Math.floor(R%1*1e3).toString().padStart(3,"0");return`${ee}:${L}:${re},${se}`};Me=D.map((R,ee)=>{const L=O(R.time),re=R.endTime!==void 0&&R.endTime>R.time?R.endTime:R.time+2,se=O(re);return`${ee+1}
${L} --> ${se}
${R.text}
`}).join(`
`)}else if(ae==="lrc"){const O=[],R=ee=>{const L=Math.floor(ee/60).toString().padStart(2,"0"),re=(ee%60).toFixed(2).padStart(5,"0");return`[${L}:${re}]`};for(let ee=0;ee<ue.length;ee++){const L=ue[ee],re=ue[ee+1];O.push(`${R(L.time)}${L.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const fe=(L.endTime??L.time+3)+4;(!(E>0)||fe<=E)&&(re?re.time>fe&&O.push(`${R(fe)}`):O.push(`${R(fe)}`))}Me=O.join(`
`)}else if(ae==="lrc-enhanced"){const O=[],R=L=>{const re=Math.floor(L/60).toString().padStart(2,"0"),se=(L%60).toFixed(2).padStart(5,"0");return`[${re}:${se}]`},ee=L=>{const re=Math.floor(L/60).toString().padStart(2,"0"),se=(L%60).toFixed(2).padStart(5,"0");return`<${re}:${se}>`};for(let L=0;L<ue.length;L++){const re=ue[L],se=ue[L+1];let fe="";re.words&&re.words.length>0?re.words.forEach((Ue,M)=>{const Ze=Ue.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");fe+=`${ee(Ue.startTime)}${Ze}`,M<re.words.length-1&&!Ze.endsWith("-")&&(fe+=" ")}):fe=re.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),O.push(`${R(re.time)}${fe}`);const Je=(re.endTime??re.time+3)+4;(!(E>0)||Je<=E)&&(se?se.time>Je&&O.push(`${R(Je)}`):O.push(`${R(Je)}`))}Me=O.join(`
`)}else if(ae==="ttml"){const O=R=>{const ee=Math.floor(R/3600).toString().padStart(2,"0"),L=Math.floor(R%3600/60).toString().padStart(2,"0"),re=Math.floor(R%60).toString().padStart(2,"0"),se=Math.floor(R%1*1e3).toString().padStart(3,"0");return`${ee}:${L}:${re}.${se}`};Me=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,D.forEach(R=>{const ee=O(R.time),L=R.endTime!==void 0&&R.endTime>R.time?R.endTime:R.time+3,re=O(L);Me+=`
      <p begin="${ee}" end="${re}">`,R.words&&R.words.length>0?R.words.forEach(se=>{if(!se.text.trim())return;const fe=O(se.startTime);let G=se.endTime;(G===void 0||G<=se.startTime)&&(G=se.startTime+.5);const Je=O(G);let Ke=se.text.replace(/[ \t]+/g," ").trim();Ke.endsWith("-")||(Ke+=" "),Me+=`
        <span begin="${fe}" end="${Je}">${Ke}</span>`}):Me+=`
        <span begin="${ee}" end="${re}">${R.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Me+=`
      </p>`}),Me+=`
    </div>
  </body>
</tt>`}else if(ae==="vtt"){const O=R=>{const ee=Math.floor(R/3600).toString().padStart(2,"0"),L=Math.floor(R%3600/60).toString().padStart(2,"0"),re=Math.floor(R%60).toString().padStart(2,"0"),se=Math.floor(R%1*1e3).toString().padStart(3,"0");return`${ee}:${L}:${re}.${se}`};Me=`WEBVTT

`,D.forEach(R=>{const ee=O(R.time),L=R.endTime!==void 0&&R.endTime>R.time?R.endTime:R.time+2,re=O(L);let se=R.text.trim();if(R.words&&R.words.length>0){const fe=R.words.map(G=>`<${O(G.startTime)}>${G.text.trim()}`).join(" ");fe.length>0&&(se=fe)}Me+=`${ee} --> ${re}
${se}

`})}ge(Me,me)},ke=async H=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(ae=>ae.map(ue=>ue.id===H.id?{...ue,parsedLyrics:[],lyricFile:void 0}:ue))},Xe=async H=>{const ae=H.target.files?.[0];if(!(!ae||!Ce)){try{const ue=await ae.text(),Me=ae.name.split(".").pop()?.toLowerCase();let ye=[];Me==="lrc"?ye=is(ue):Me==="srt"?ye=os(ue):Me==="ttml"||Me==="xml"?ye=ca(ue):Me==="vtt"&&(ye=ua(ue)),ye.length>0?t(me=>me.map(E=>E.id===Ce?{...E,lyricFile:ae,parsedLyrics:ye}:E)):alert("Could not parse lyrics. Ensure file is .lrc, .srt, or .vtt")}catch(ue){console.error("Failed to load lyrics",ue),alert("Failed to load lyrics file.")}oe(null),H.target.value=""}};return u.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${w?"bg-zinc-800 border-orange-500":""}`,onDragOver:te,onDragLeave:ce,onDrop:Ge,children:[w&&u.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[u.jsx(Oi,{size:48}),u.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),u.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, FLAC, Video (MP4/WebM), LRC, SRT, VTT"})]})}),u.jsx("input",{type:"file",ref:j,className:"hidden",accept:".lrc,.srt,.ttml,.xml,.vtt",onChange:Xe}),u.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[u.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[u.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[u.jsx(Dr,{size:16,className:"text-orange-400"}),"Playlist"]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[u.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[u.jsx(Ng,{size:14})," Add Files",u.jsx("input",{type:"file",className:"hidden",accept:"audio/*,video/*,.lrc,.srt,.ttml,.xml,.vtt",multiple:!0,onChange:st})]}),u.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[u.jsx(sb,{size:14}),u.jsx("input",{type:"file",className:"hidden",multiple:!0,webkitdirectory:"",onChange:st})]})]}),u.jsx("div",{className:"w-px h-4 bg-zinc-700"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>le("filename"),className:`p-1 rounded transition-colors ${de.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${de.key==="filename"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:u.jsx(Ir,{size:14,className:de.key==="filename"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),u.jsx("button",{onClick:()=>le("artist"),className:`p-1 rounded transition-colors ${de.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${de.key==="artist"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:u.jsx(r1,{size:14,className:de.key==="artist"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),u.jsx("button",{onClick:()=>le("title"),className:`p-1 rounded transition-colors ${de.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${de.key==="title"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:u.jsx(Wl,{size:14,className:de.key==="title"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),u.jsx("button",{onClick:()=>le("album"),className:`p-1 rounded transition-colors ${de.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${de.key==="album"?de.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:u.jsx(Xx,{size:14,className:de.key==="album"&&de.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),u.jsx("button",{onClick:()=>le("random"),className:`p-1 rounded transition-colors ${de.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:u.jsx(Bb,{size:14})})]})]}),u.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[u.jsx("button",{onClick:()=>Nt(!_t),className:`p-1 rounded transition-colors ${_t?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:u.jsx(pb,{size:14})}),_t&&u.jsx("input",{type:We?"password":"text",value:We,onChange:H=>Ne(H.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),u.jsx("div",{className:"relative group",children:u.jsxs("select",{value:Qe,onChange:H=>He(H.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[u.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),u.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),u.jsx("div",{className:"relative group",children:u.jsxs("select",{value:rt,onChange:H=>ft(H.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"word",children:"Word"})]})}),u.jsx("button",{onClick:async()=>{n.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:u.jsx(ns,{size:14})}),u.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),u.jsx("button",{onClick:b,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:u.jsx(ri,{size:14})})]})]}),u.jsx("div",{ref:N,tabIndex:0,onMouseEnter:()=>N.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[u.jsx(Dr,{size:32,className:"mb-2 opacity-50"}),u.jsx("p",{children:"Playlist is empty"}),u.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((H,ae)=>{const ue=ae===o,Me=ae===P,ye=H.parsedLyrics||[],me=ue?ye.findIndex((E,D)=>{if(E.endTime!==void 0)return x>=E.time&&x<E.endTime;const O=ye[D+1];return x>=E.time&&(!O||x<O.time)}):-1;return u.jsxs("div",{onClick:()=>Y(ae),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${ue?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Me?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[u.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:E=>{E.stopPropagation(),ue?h():r(ae)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${ue?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:ue?d?u.jsx(_g,{size:14}):u.jsx(cd,{size:14}):u.jsx(cd,{size:14})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`text-xs font-medium truncate ${ue?"text-orange-100":"text-zinc-300"}`,title:H.audioFile.name,children:H.metadata.title}),u.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:H.metadata.artist,children:H.metadata.artist})]})]}),u.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[u.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(H.audioFile.size/1024/1024).toFixed(1),"MB"]}),H.lyricFile?u.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:H.lyricFile.name,children:[u.jsx(Ir,{size:7}),u.jsx("span",{className:"truncate max-w-[80px]",children:H.lyricFile.name})]}):u.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),u.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:ye.length>0?u.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:ye.map((E,D)=>{const O=D===me;return u.jsxs("div",{id:O?`lyric-active-${ae}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${O?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${q(E.time)} - ${E.text}`,onClick:R=>{R.stopPropagation(),ae!==o?(r(ae),setTimeout(()=>y(E.time),150)):y(E.time)},children:[u.jsx("span",{className:`font-mono text-[8px] ${O?"text-orange-200":"text-zinc-500"}`,children:q(E.time)}),u.jsx("span",{className:`truncate max-w-[120px] ${O?"text-white font-medium":"text-zinc-400"}`,children:E.text||""})]},D)})}):u.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),u.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[u.jsx("button",{onClick:E=>{E.stopPropagation(),oe(H.id),j.current&&(j.current.value=""),j.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:u.jsx(Oi,{size:14})}),u.jsx("button",{onClick:E=>{E.stopPropagation(),I(H)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${Be.has(H.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:Be.has(H.id),children:Be.has(H.id)?u.jsx(R0,{size:14,className:"animate-spin"}):u.jsx(Pb,{size:14})}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Re(H)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${ve.has(H.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:ve.has(H.id)?"Stop Transcription":"AI Sync Transcribe",children:ve.has(H.id)?u.jsxs(u.Fragment,{children:[u.jsx(R0,{size:14,className:"animate-spin group-hover/btn:hidden"}),u.jsx(fd,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):u.jsx(dd,{size:14})}),ye.length>0&&u.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"vtt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download VTT",children:"VTT"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),Oe(H,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),u.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),u.jsx("button",{onClick:E=>{E.stopPropagation(),ke(H)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),u.jsx("button",{onClick:E=>{E.stopPropagation(),_e(ae)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:u.jsx(ns,{size:12})})]},H.id)})})]})},Bd=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],ON=()=>{const n=new Set;if(Bd.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const s=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=s,document.head.appendChild(r);const d=document.createElement("link");d.rel="preconnect",d.href="https://fonts.googleapis.com",document.head.appendChild(d);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},jd=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],Br={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},id=jd.flatMap(n=>n.options.map(t=>t.value)),pg={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,lyricLineHeight:1.2,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,infoFontFamily:"ui-sans-serif, system-ui, sans-serif",infoFontWeight:"bold",infoFontStyle:"normal",infoFontColor:"#ffffff",backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoFontFamily:"ui-sans-serif, system-ui, sans-serif",channelInfoFontWeight:"bold",channelInfoFontStyle:"normal",channelInfoFontColor:"#ffffff",channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1,useRealColorMedia:!1},hg=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],mg=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],gg=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],yg=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],Nd=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Smooth Transition White",value:"karaoke-smooth-white"},{label:"Smooth Transition Plus",value:"karaoke-smooth-plus"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],kr=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},vg=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],Ad=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],Sy=["none","upper","lower","title","sentence","invert"],xg=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],bg=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],qN=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Ni=({value:n,onChange:t,groups:o})=>{const[s,r]=Z.useState(!1),[d,h]=Z.useState(n);Z.useEffect(()=>{s||h(n)},[n,s]);const y=b=>{for(const T of o){const N=T.options.find(_=>_.value===b);if(N)return N.label}return b},v=b=>{t(b)},m=()=>{s&&t(d),r(!1)},x=b=>{t(b),h(b),r(!1)};return u.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[u.jsxs("button",{onClick:()=>r(!s),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:s?"Close List":"Expand List",children:[u.jsx("span",{className:"truncate",children:y(n)}),u.jsx(da,{size:14,className:`transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&u.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(b=>u.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[u.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),u.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>u.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},b.label))})]})},$N=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const s of t){const r=s.options.find(d=>d.value===n);if(r)return r.label}return"Select Font"},od=({value:n,onChange:t,customFontName:o,groups:s=Bd})=>{const[r,d]=Z.useState(!1),[h,y]=Z.useState(n);Z.useEffect(()=>{r||y(n)},[n,r]);const v=b=>{t(b)},m=()=>{r&&t(h)},x=b=>{t(b),y(b),d(!1)};return u.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[u.jsxs("button",{onClick:()=>d(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[u.jsx("span",{className:"truncate",style:{fontFamily:n},children:$N(n,s,o)}),u.jsx(da,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&u.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&u.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[u.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),u.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:u.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),s.map(b=>u.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[u.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:b.label}),u.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:b.options.map(T=>u.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:u.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},b.label))]})]})},YN=Object.values(Br).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),ld=[{label:"Visual Presets",options:YN},...Bd],JN=({config:n,setConfig:t,preset:o,setPreset:s,onClose:r,isPlaylistMode:d,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:b,setResolution:T,aspectRatio:N,setAspectRatio:_,renderCodec:q,setRenderCodec:P,supportedCodecs:Y,renderQuality:de,setRenderQuality:pe,renderFps:ve,setRenderFps:Le,renderEngine:Be,setRenderEngine:Te,ffmpegCodec:We,setFfmpegCodec:Ne,customChannelFontName:Qe,onChannelFontUpload:He,onClearChannelCustomFont:rt,customInfoFontName:ft,onInfoFontUpload:_t,onClearInfoCustomFont:Nt})=>{const{toast:j,confirm:Ce}=jr(),oe=Z.useRef(null),yt=Z.useRef(null),vt=Z.useRef(null),U=Z.useRef(null),le=Z.useRef(null),xe=Z.useRef(null),je=Z.useRef(null),[st,w]=Z.useState(!1),A=(I,ne)=>{let ge={...n,[I]:ne};if(I==="highlightEffect"){const ke=kr(ne);ge.useCustomHighlightColors=!1,ke?(ge.highlightColor=ke.color,ge.highlightBackground=ke.bg):(ge.highlightColor="#fb923c",ge.highlightBackground="#fb923c")}else if(I==="useCustomHighlightColors"&&ne===!1){const Oe=n.highlightEffect,ke=kr(Oe);ke?(ge.highlightColor=ke.color,ge.highlightBackground=ke.bg):(ge.highlightColor="#fb923c",ge.highlightBackground="#fb923c")}t(ge)},te=I=>{s(I);const ne=Br[I];ne&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...ne})},ce=I=>{const ne=I.target.files?.[0];if(ne){const ge=new FileReader;ge.onload=Oe=>{Oe.target?.result&&A("channelInfoImage",Oe.target.result)},ge.readAsDataURL(ne)}I.target.value=""},Ge=I=>{const ne=I.target.files?.[0];if(ne){const ge=new FileReader;ge.onload=Oe=>{Oe.target?.result&&A("backgroundImage",Oe.target.result)},ge.readAsDataURL(ne)}I.target.value=""},_e=async()=>{await Ce("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(pg),s("default"),T("1080p"),_("16:9"),P("auto"),Le(30),pe("med"),Te("mediarecorder"),Ne("h264"),le.current&&(le.current.value=""),xe.current&&(xe.current.value=""),x(),rt&&rt(),Nt&&Nt(),n.channelInfoFontFamily==="ChannelFont"&&vt.current&&(vt.current.value=""),n.infoFontFamily==="InfoFont"&&U.current&&(U.current.value=""),A("channelInfoFontWeight","bold"),A("channelInfoFontStyle","normal"),A("infoFontWeight","bold"),A("infoFontStyle","normal"),A("enableGradientOverlay",!1),A("useRealColorMedia",!1),j.success("All settings have been reset to default."))},Ee=()=>{const I=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),ne={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:b,aspectRatio:N,renderCodec:q,renderFps:ve,renderQuality:de,renderEngine:Be,ffmpegCodec:We,customFontName:v,customChannelFontName:Qe,customInfoFontName:ft,channelInfoFontWeight:n.channelInfoFontWeight,channelInfoFontStyle:n.channelInfoFontStyle,infoFontWeight:n.infoFontWeight,infoFontStyle:n.infoFontStyle};ne.backgroundSource!=="image"&&(ne.backgroundImage=void 0),ne.showChannelInfo||(ne.channelInfoImage=void 0);try{const ge=JSON.stringify(ne,null,2),Oe=new Blob([ge],{type:"application/json"}),ke=URL.createObjectURL(Oe),Xe=document.createElement("a");Xe.setAttribute("href",ke),Xe.setAttribute("download",`render_settings_${I}.json`),document.body.appendChild(Xe),Xe.click(),Xe.remove(),URL.revokeObjectURL(ke)}catch(ge){console.error("Export failed:",ge),j.error("Failed to export settings.")}},Re=I=>{const ne=I.target.files?.[0];if(!ne)return;const ge=new FileReader;ge.onload=Oe=>{try{const ke=JSON.parse(Oe.target?.result);if(ke&&typeof ke=="object"){const{resolution:Xe,aspectRatio:H,renderCodec:ae,renderFps:ue,renderQuality:Me,renderEngine:ye,ffmpegCodec:me,preset:E,customFontName:D,customChannelFontName:O,customInfoFontName:R,channelInfoFontWeight:ee,channelInfoFontStyle:L,infoFontWeight:re,infoFontStyle:se,...fe}=ke,G={...pg,...fe};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration","lyricLineHeight"].forEach(M=>{G[M]!==void 0&&(G[M]=Number(G[M]))}),G.useCustomHighlightColors!==void 0&&(G.useCustomHighlightColors=!!G.useCustomHighlightColors),G.useRealColorMedia!==void 0&&(G.useRealColorMedia=!!G.useRealColorMedia),G.showChannelInfo!==void 0&&(G.showChannelInfo=!!G.showChannelInfo),G.showIntro!==void 0&&(G.showIntro=!!G.showIntro),G.showTitle!==void 0&&(G.showTitle=!!G.showTitle),G.showArtist!==void 0&&(G.showArtist=!!G.showArtist),G.showCover!==void 0&&(G.showCover=!!G.showCover),G.showLyrics!==void 0&&(G.showLyrics=!!G.showLyrics),G.highlightEffect&&(!G.highlightColor||!G.highlightBackground)){const M=kr(G.highlightEffect);M&&(G.highlightColor||(G.highlightColor=M.color),G.highlightBackground||(G.highlightBackground=M.bg))}const Ke=(M,Ze)=>Ze.some(Dt=>Dt.options.some(Yt=>Yt.value===M));G.textEffect&&!Ke(G.textEffect,hg)&&(G.textEffect="shadow"),G.textAnimation&&!Ke(G.textAnimation,mg)&&(G.textAnimation="none"),G.transitionEffect&&!Ke(G.transitionEffect,gg)&&(G.transitionEffect="none"),G.visualTransitionType&&!Ke(G.visualTransitionType,yg)&&(G.visualTransitionType="none"),G.highlightEffect&&!Ke(G.highlightEffect,Nd)&&(G.highlightEffect="karaoke"),G.backgroundSource&&!Ke(G.backgroundSource,vg)&&(G.backgroundSource="custom"),["current","playlist"].includes(G.renderMode)||(G.renderMode="current"),["left","center","right"].includes(G.textAlign)||(G.textAlign="center"),["top","center","bottom"].includes(G.contentPosition)||(G.contentPosition="center"),G.lyricDisplayMode&&!Ke(G.lyricDisplayMode,Ad)&&(G.lyricDisplayMode="all"),["normal","bold"].includes(G.fontWeight)||(G.fontWeight="bold"),["normal","italic"].includes(G.fontStyle)||(G.fontStyle="normal"),["none","underline","line-through"].includes(G.textDecoration)||(G.textDecoration="none"),Sy.includes(G.textCase)||(G.textCase="none"),["auto","manual"].includes(G.introMode)||(G.introMode="auto"),G.lyricStyleTarget&&!["active-only","all"].includes(G.lyricStyleTarget)&&(G.lyricStyleTarget="active-only");const Ue=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];G.infoPosition&&!Ue.includes(G.infoPosition)&&(G.infoPosition="top-left"),G.infoStyle&&!Ke(G.infoStyle,xg)&&(G.infoStyle="classic"),G.channelInfoPosition&&!Ue.includes(G.channelInfoPosition)&&(G.channelInfoPosition="bottom-right"),G.channelInfoStyle&&!Ke(G.channelInfoStyle,bg)&&(G.channelInfoStyle="classic"),t(G),Xe&&T(Xe),H&&_(H),ae&&P(ae),ue&&Le(Number(ue)),Me&&pe(Me),ye&&Te(ye),me&&Ne(me),s(E||"custom"),D&&D!==v?j.success(`Settings loaded. Note: Config used font "${D}".`):O||R?j.success(`Settings loaded. Custom fonts referenced: ${[O,R].filter(Boolean).join(", ")}`):j.success("Settings loaded successfully!")}}catch(ke){console.error(ke),j.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},ge.readAsText(ne),I.target.value=""};return Z.useEffect(()=>{const I=ne=>{oe.current&&!oe.current.contains(ne.target)&&r()};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[r]),u.jsxs("div",{ref:oe,onMouseDown:I=>I.stopPropagation(),className:"no-minimal-mode-toggle absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[u.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ar,{size:18,className:"text-purple-400"}),u.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{ref:je,type:"file",accept:".json,.txt",className:"hidden",onChange:Re}),u.jsx("button",{onClick:()=>je.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:u.jsx(Oi,{size:16})}),u.jsx("button",{onClick:Ee,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:u.jsx(Wx,{size:16})}),u.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),u.jsx("button",{onClick:_e,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:u.jsx(ud,{size:16})}),u.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:u.jsx(ri,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(dd,{size:14})," Visual Preset"]}),u.jsx(Ni,{value:o,onChange:I=>te(I),groups:jd})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(ra,{size:14})," Render Scope"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("button",{onClick:()=>A("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),u.jsx("button",{onClick:()=>A("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(M0,{size:14})," Background Source"]}),u.jsx(Ni,{value:n.backgroundSource,onChange:I=>{I==="gradient"&&!n.backgroundGradient?(s("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):I==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(s("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):I==="color"&&!n.backgroundColor?(s("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):A("backgroundSource",I)},groups:vg}),n.backgroundSource==="smart-gradient"&&u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.backgroundColor,onChange:I=>A("backgroundColor",I.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[u.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),u.jsx("input",{type:"text",value:n.backgroundColor,onChange:I=>A("backgroundColor",I.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.backgroundColor,onChange:I=>A("backgroundColor",I.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsx("input",{type:"text",value:n.backgroundColor,onChange:I=>A("backgroundColor",I.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&u.jsx("input",{type:"text",value:n.backgroundGradient,onChange:I=>A("backgroundGradient",I.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&u.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),u.jsx("input",{ref:xe,type:"file",accept:"image/*",onChange:Ge,className:"hidden"}),n.backgroundImage?u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[u.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:u.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),u.jsx("button",{onClick:()=>A("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),u.jsx("button",{onClick:()=>xe.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:u.jsx(Ar,{size:14})})]}):u.jsxs("button",{onClick:()=>xe.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[u.jsx(Oi,{size:14}),u.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Sb,{size:14})," Background Effects"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[u.jsx("button",{onClick:()=>A("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),u.jsx("button",{onClick:()=>A("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&u.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),u.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:u.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:I=>A("backgroundBlurStrength",parseInt(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),u.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Real Color Media Source"}),u.jsx("span",{className:"text-[10px] text-zinc-500",children:"Disable dark dimming effect on background"})]}),u.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:n.useRealColorMedia??!1,onChange:I=>A("useRealColorMedia",I.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),u.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),u.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),u.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:n.enableGradientOverlay??!1,onChange:I=>A("enableGradientOverlay",I.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ir,{size:14})," Lyric Display Mode"]}),u.jsx(Ni,{value:n.lyricDisplayMode,onChange:I=>A("lyricDisplayMode",I),groups:Ad})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(dd,{size:14})," Highlight Effect"]}),u.jsx(Ni,{value:n.highlightEffect||"none",onChange:I=>{A("highlightEffect",I)},groups:Nd}),n.highlightEffect&&n.highlightEffect!=="none"&&u.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[u.jsxs("button",{onClick:()=>A("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[u.jsx("span",{children:"Custom Colors"}),u.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:u.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&u.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:I=>A("highlightColor",I.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:I=>A("highlightColor",I.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:I=>A("highlightBackground",I.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:I=>A("highlightBackground",I.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(wb,{size:14})," Visible Elements"]}),u.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(I=>u.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[u.jsx("span",{className:"text-xs text-zinc-300",children:I.label}),u.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:n[I.key],onChange:ne=>A(I.key,ne.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},I.key))})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Oo,{size:14})," Intro Settings"]}),u.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[u.jsx("button",{onClick:()=>A("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),u.jsx("button",{onClick:()=>A("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&u.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),u.jsx("textarea",{value:n.introText,onChange:I=>A("introText",I.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(M0,{size:14})," Channel Info / Watermark"]}),u.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[u.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[u.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),u.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:I=>A("showChannelInfo",I.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&u.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),u.jsx("input",{ref:le,type:"file",accept:"image/*",onChange:ce,className:"hidden"}),n.channelInfoImage?u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[u.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:u.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),u.jsx("button",{onClick:()=>A("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),u.jsx("button",{onClick:()=>le.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:u.jsx(Ar,{size:14})})]}):u.jsxs("button",{onClick:()=>le.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[u.jsx(Oi,{size:14}),u.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),u.jsx("textarea",{value:n.channelInfoText??"",onChange:I=>A("channelInfoText",I.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsx("button",{onClick:()=>A("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),u.jsx(Ni,{value:n.channelInfoStyle||"classic",onChange:I=>A("channelInfoStyle",I),groups:bg})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[u.jsx("span",{className:"text-zinc-500",children:u.jsx(aa,{size:12})}),u.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:I=>A("channelInfoMarginScale",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[u.jsx("span",{className:"text-zinc-500",children:u.jsx(aa,{size:12})}),u.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:I=>A("channelInfoSizeScale",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),u.jsx(od,{value:n.channelInfoFontFamily||"sans-serif",onChange:I=>A("channelInfoFontFamily",I),customFontName:Qe||null,groups:ld}),u.jsx("input",{ref:vt,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:He,className:"hidden"}),Qe?u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-2 py-1.5 mt-1",children:[u.jsx("span",{className:"text-[10px] text-purple-300 font-medium truncate flex-1",children:Qe}),u.jsx("button",{onClick:()=>A("channelInfoFontFamily","ChannelFont"),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${n.channelInfoFontFamily==="ChannelFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"Use"}),u.jsx("button",{onClick:rt,className:"text-zinc-500 hover:text-red-400",children:u.jsx(ns,{size:12})})]}):u.jsxs("button",{onClick:()=>vt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-2 py-1.5 text-zinc-500 hover:text-purple-300 transition-colors mt-1",children:[u.jsx(Oi,{size:10}),u.jsx("span",{className:"text-[10px]",children:"Upload Font"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Style"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[u.jsx("button",{onClick:()=>A("channelInfoFontWeight",n.channelInfoFontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.channelInfoFontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:u.jsx(Zu,{size:14})}),u.jsx("button",{onClick:()=>A("channelInfoFontStyle",n.channelInfoFontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.channelInfoFontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:u.jsx(ed,{size:14})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Color"}),u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.channelInfoFontColor||"#ffffff",onChange:I=>A("channelInfoFontColor",I.target.value),className:"w-6 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsx("span",{className:"text-[10px] text-zinc-400 font-mono uppercase",children:n.channelInfoFontColor||"#ffffff"})]})]})]})]})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Wl,{size:14})," Song Info Design"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsx("button",{onClick:()=>A("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),u.jsx("button",{onClick:()=>A("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),u.jsx(Ni,{value:n.infoStyle||"classic",onChange:I=>A("infoStyle",I),groups:xg})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[u.jsx("span",{className:"text-zinc-500",children:u.jsx(aa,{size:12})}),u.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:I=>A("infoMarginScale",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[u.jsx("span",{className:"text-zinc-500",children:u.jsx(Oo,{size:12})}),u.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:I=>A("infoSizeScale",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),u.jsx(od,{value:n.infoFontFamily||"sans-serif",onChange:I=>A("infoFontFamily",I),customFontName:ft||null,groups:ld}),u.jsx("input",{ref:U,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:_t,className:"hidden"}),ft?u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-2 py-1.5 mt-1",children:[u.jsx("span",{className:"text-[10px] text-purple-300 font-medium truncate flex-1",children:ft}),u.jsx("button",{onClick:()=>A("infoFontFamily","InfoFont"),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${n.infoFontFamily==="InfoFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:"Use"}),u.jsx("button",{onClick:Nt,className:"text-zinc-500 hover:text-red-400",children:u.jsx(ns,{size:12})})]}):u.jsxs("button",{onClick:()=>U.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-2 py-1.5 text-zinc-500 hover:text-purple-300 transition-colors mt-1",children:[u.jsx(Oi,{size:10}),u.jsx("span",{className:"text-[10px]",children:"Upload Font"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Style"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[u.jsx("button",{onClick:()=>A("infoFontWeight",n.infoFontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.infoFontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:u.jsx(Zu,{size:14})}),u.jsx("button",{onClick:()=>A("infoFontStyle",n.infoFontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.infoFontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:u.jsx(ed,{size:14})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Color"}),u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.infoFontColor||"#ffffff",onChange:I=>A("infoFontColor",I.target.value),className:"w-6 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsx("span",{className:"text-[10px] text-zinc-400 font-mono uppercase",children:n.infoFontColor||"#ffffff"})]})]})]})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Oo,{size:14})," Typography & Style"]}),u.jsxs("div",{className:"space-y-4 pt-1",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),u.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(I=>u.jsx("button",{onClick:()=>A("textAlign",I),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===I?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:I},I))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[u.jsx("button",{onClick:()=>A("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:u.jsx(Fx,{size:14})}),u.jsx("button",{onClick:()=>A("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:u.jsx(A0,{size:14})}),u.jsx("button",{onClick:()=>A("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:u.jsx(Lx,{size:14})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[u.jsx("button",{onClick:()=>A("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:u.jsx(Zu,{size:14})}),u.jsx("button",{onClick:()=>A("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:u.jsx(ed,{size:14})}),u.jsx("button",{onClick:()=>A("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:u.jsx(i1,{size:14})}),u.jsx("button",{onClick:()=>A("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:u.jsx(Qb,{size:14})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[u.jsx("button",{onClick:()=>A("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),u.jsx("button",{onClick:()=>A("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),u.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>A("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),u.jsx("button",{onClick:()=>A("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),u.jsx("button",{onClick:()=>A("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),u.jsx("button",{onClick:()=>A("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),u.jsx("button",{onClick:()=>A("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),u.jsx("button",{onClick:()=>A("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),u.jsx(od,{value:n.fontFamily,onChange:I=>A("fontFamily",I),customFontName:v,groups:ld})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),u.jsx("input",{ref:yt,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[u.jsx(Oo,{size:14,className:"text-purple-400 shrink-0"}),u.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),u.jsx("button",{onClick:()=>{A("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),u.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:u.jsx(ns,{size:14})})]}):u.jsxs("button",{onClick:()=>yt.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[u.jsx(Oi,{size:14}),u.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[u.jsx("span",{className:"text-zinc-500",children:u.jsx(Oo,{size:12})}),u.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:I=>A("fontSizeScale",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),u.jsx("span",{className:"text-zinc-300",children:u.jsx(Oo,{size:16})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Current Line Height"}),u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.lyricLineHeight||1.2).toFixed(1),"x"]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[u.jsx("span",{className:"text-zinc-500",children:u.jsx(A0,{size:12})}),u.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:n.lyricLineHeight||1.2,onChange:I=>A("lyricLineHeight",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&u.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),u.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[u.jsx("input",{type:"color",value:n.fontColor,onChange:I=>A("fontColor",I.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),u.jsx("input",{type:"text",value:n.fontColor,onChange:I=>A("fontColor",I.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),u.jsx(Ni,{value:n.textEffect,onChange:I=>A("textEffect",I),groups:hg})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),u.jsx(Ni,{value:n.textAnimation,onChange:I=>A("textAnimation",I),groups:mg})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),u.jsx(Ni,{value:n.transitionEffect,onChange:I=>A("transitionEffect",I),groups:gg})]}),u.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),n.visualTransitionDuration&&u.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.visualTransitionDuration.toFixed(1),"s"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Ni,{value:n.visualTransitionType||"none",onChange:I=>A("visualTransitionType",I),groups:yg})}),n.visualTransitionType&&n.visualTransitionType!=="none"&&u.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:u.jsx("input",{type:"range",min:"0.1",max:"5.0",step:"0.1",value:n.visualTransitionDuration||1,onChange:I=>A("visualTransitionDuration",parseFloat(I.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),u.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[u.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(ra,{size:14})," Output Settings"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),u.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${b==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),u.jsx(Ni,{value:String(ve),onChange:I=>Le(parseInt(I)),groups:qN})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),u.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(I=>u.jsx("button",{onClick:()=>_(I),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${N===I?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:I},I))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Engine"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>Te("mediarecorder"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Be==="mediarecorder"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses browser's MediaRecorder API. Renders in realtime while playing audio.",children:"MediaRecorder"}),u.jsx("button",{onClick:()=>Te("ffmpeg"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Be==="ffmpeg"?"bg-orange-500 text-white":"text-zinc-500 hover:text-zinc-300"}`,title:"Uses FFmpeg WASM. Frame-by-frame rendering with professional codecs. Faster than realtime!",children:"FFmpeg "})]}),u.jsx("p",{className:"text-[9px] text-zinc-600 ml-1 leading-tight",children:Be==="mediarecorder"?"Realtime recording while audio plays. Browser-dependent codecs.":"Frame-by-frame capture. With pro codecs (H.264, H.265)."})]}),Be==="mediarecorder"?u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),u.jsx(Ni,{value:q,onChange:I=>P(I),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...Y]}]})]}):u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FFmpeg Codec"}),u.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{label:"H.264",value:"h264",desc:"Best Compatibility"},{label:"H.265",value:"h265",desc:"Higher Quality"}].map(I=>u.jsxs("button",{onClick:()=>Ne(I.value),className:`py-2 px-2 rounded-md text-[10px] font-medium transition-all border text-left ${We===I.value?"bg-orange-500 border-orange-400 text-white":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"}`,title:I.desc,children:[u.jsx("div",{className:"font-bold",children:I.label}),u.jsx("div",{className:"text-[8px] opacity-75",children:I.desc})]},I.value))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),u.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>pe("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${de==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),u.jsx("button",{onClick:()=>pe("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${de==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),u.jsx("button",{onClick:()=>pe("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${de==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),u.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[u.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[u.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",u.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),u.jsxs("button",{onClick:()=>w(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[u.jsx(zr,{size:14})," View Keyboard Shortcuts"]})]})]}),st&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>w(!1),children:u.jsxs("div",{className:"no-minimal-mode-toggle bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:I=>I.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[u.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[u.jsx(zr,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),u.jsx("button",{onClick:()=>w(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:u.jsx(ri,{size:18})})]}),u.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),u.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[u.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),u.jsxs("div",{className:"flex gap-1 items-center",children:[u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),u.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),u.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),u.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),u.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:u.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",u.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),u.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[u.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[u.jsx(ra,{size:16})," Start Render"]}),u.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},Ty=(n,t,o,s,r,d,h,y,v,m,x,b,T,N,_,q=!0,P=!0)=>{const Y=w=>{const A=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return A?{r:parseInt(A[1],16),g:parseInt(A[2],16),b:parseInt(A[3],16)}:{r:255,g:255,b:255}},de=w=>{let A=0,te=0;if(w instanceof ImageBitmap?(A=w.width,te=w.height):w instanceof HTMLVideoElement?(A=w.videoWidth,te=w.videoHeight):(A=w.width,te=w.height),A&&te){const ce=Math.max(t/A,o/te),Ge=t/2-A/2*ce,_e=o/2-te/2*ce;n.drawImage(w,Ge,_e,A*ce,te*ce)}},pe=(w,A,te)=>{if(A.includes(`
`))return A.split(`
`).flatMap(Re=>pe(w,Re,te));const ce=A.split(" ");let Ge=[],_e=ce[0]||"";for(let Re=1;Re<ce.length;Re++){const I=ce[Re],ne=_e+" "+I;w.measureText(ne).width<te?_e=ne:(Ge.push(_e),_e=I)}Ge.push(_e);const Ee=[];for(const Re of Ge)if(w.measureText(Re).width<=te)Ee.push(Re);else{let I="";for(const ne of Re)w.measureText(I+ne).width<=te?I+=ne:(I&&Ee.push(I),I=ne);I&&Ee.push(I)}return Ee},ve=(w,A,te,ce,Ge,_e)=>{if(Ge==="vhs"&&w instanceof CanvasRenderingContext2D)w.save(),w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(A,te-2,ce),w.fillStyle="#00ff00",w.fillText(A,te,ce),w.fillStyle="#0000ff",w.fillText(A,te+2,ce),w.restore();else if(Ge==="3d"){const Ee=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let Re=1;Re<=4;Re++)w.fillText(A,te+Re,ce+Re);w.fillStyle=Ee,w.fillText(A,te,ce)}else if(Ge==="neon"){const Ee=w.fillStyle;w.shadowColor=Ee,w.shadowBlur=20,w.fillText(A,te,ce),w.shadowBlur=40,w.fillText(A,te,ce)}else if(Ge==="outline")w.strokeText(A,te,ce),w.fillText(A,te,ce);else if(Ge==="gradient"){const Ee=w.createLinearGradient(te,ce-20,te,ce+20);Ee.addColorStop(0,w.fillStyle),Ee.addColorStop(1,"#ffffff"),w.fillStyle=Ee,w.fillText(A,te,ce)}else if(Ge==="fire")w.save(),w.shadowBlur=5,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(A,te,ce),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(A,te+1,ce-1),w.restore();else if(Ge==="emboss")w.fillStyle="rgba(255,255,255,0.7)",w.fillText(A,te-1,ce-1),w.fillStyle="rgba(0,0,0,0.7)",w.fillText(A,te+1,ce+1),w.fillStyle="rgba(128,128,128,0.5)",w.fillText(A,te,ce);else if(Ge==="mirror")w.fillText(A,te,ce),w.save(),w.translate(te,ce),w.scale(1,-1),w.translate(-te,-ce),w.globalAlpha*=.2,w.fillText(A,te,ce-40),w.restore();else if(Ge==="neon-multi")w.fillStyle,w.shadowBlur=10,w.shadowColor="#fff",w.fillText(A,te,ce),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(A,te,ce),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(A,te,ce);else if(Ge==="gold"){const Ee=w.createLinearGradient(te,ce-20,te,ce+20);Ee.addColorStop(0,"#d4af37"),Ee.addColorStop(1,"#C5A028"),w.fillStyle=Ee,w.fillText(A,te,ce)}else if(Ge==="chrome"){const Ee=w.createLinearGradient(te,ce-20,te,ce+20);Ee.addColorStop(0,"#ebebeb"),Ee.addColorStop(.5,"#616161"),Ee.addColorStop(.51,"#ebebeb"),Ee.addColorStop(1,"#ebebeb"),w.fillStyle=Ee,w.fillText(A,te,ce)}else if(Ge==="frozen")w.shadowColor="#03A9F4",w.shadowBlur=20,w.fillStyle="#ffffff",w.fillText(A,te,ce);else if(Ge==="rainbow"){const Ee=w.createLinearGradient(te-100,ce,te+100,ce);Ee.addColorStop(0,"violet"),Ee.addColorStop(.16,"indigo"),Ee.addColorStop(.32,"blue"),Ee.addColorStop(.48,"green"),Ee.addColorStop(.64,"yellow"),Ee.addColorStop(.8,"orange"),Ee.addColorStop(1,"red"),w.fillStyle=Ee,w.fillText(A,te,ce)}else if(Ge==="retro")w.fillStyle="#ff00ff",w.shadowColor="#00ffff",w.shadowBlur=0,w.shadowOffsetX=4,w.shadowOffsetY=4,w.fillText(A,te,ce);else if(Ge==="cyberpunk")w.save(),w.fillStyle="#05d9e8",w.fillText(A,te-1,ce-1),w.restore(),w.save(),w.fillStyle="#000000",w.fillText(A,te+2,ce+2),w.restore(),w.save(),w.fillStyle="#fcee0a",w.fillText(A,te,ce),w.restore();else if(Ge==="glitch-text"){const Ee=(Math.random()-.5)*5,Re=(Math.random()-.5)*2;w.save(),w.fillStyle="red",w.fillText(A,te+Ee,ce+Re),w.restore(),w.save(),w.fillStyle="cyan",w.fillText(A,te-Ee,ce-Re),w.restore(),w.fillStyle="#ffffff",w.fillText(A,te,ce)}else Ge==="hologram"?(w.fillStyle="rgba(0, 255, 255, 0.7)",w.shadowColor="rgba(0,255,255,0.5)",w.shadowBlur=10,w.fillText(A,te,ce)):(Ge==="comic"&&(w.lineWidth=3,w.strokeStyle="#000000",w.strokeText(A,te,ce),w.fillStyle="#ffcc00"),w.fillText(A,te,ce));if(_e&&_e!=="none"){const Re=w.measureText(A).width;let I=te;if(w.textAlign==="center"?I=te-Re/2:w.textAlign==="right"&&(I=te-Re),w.save(),w.beginPath(),w.lineWidth=Math.max(2,4*oe),w.strokeStyle=w.fillStyle,_e.includes("line-through")&&(w.moveTo(I,ce),w.lineTo(I+Re,ce)),_e.includes("underline")){const ne=w.font.match(/(\d+(\.\d+)?)px/),ge=ne?parseFloat(ne[1]):50,Oe=ce+ge*.4;w.moveTo(I,Oe),w.lineTo(I+Re,Oe)}w.stroke(),w.restore()}},Le=(w,A,te,ce,Ge,_e,Ee,Re,I,ne,ge,Oe,ke)=>{const Xe=Re?.textCase||"none",H=(se,fe)=>{if(!se)return se;if(Xe==="upper")return se.toUpperCase();if(Xe==="lower")return se.toLowerCase();if(Xe==="title")return se.replace(/\w\S*/g,G=>G.charAt(0).toUpperCase()+G.substr(1).toLowerCase());if(Xe==="sentence"){const G=se.toLowerCase();return fe?G.charAt(0).toUpperCase()+G.slice(1):G}return Xe==="invert"?se.replace(/\w\S*/g,G=>G.charAt(0).toLowerCase()+G.slice(1).toUpperCase()):se};let ae=A.words||[];if(ae.length===0){const se=A.text.split(`
`);ae=[],se.forEach((fe,G)=>{const Je=fe.split(" ").map(Ke=>({text:Ke,startTime:A.time,endTime:A.endTime||A.time+3}));ae.push(...Je),G<se.length-1&&ae.push({text:`
`,startTime:A.time,endTime:A.endTime})})}const ue=ae.filter(se=>se.text===`
`||se.text.trim().length>0).map((se,fe)=>({...se,text:se.text===`
`?`
`:H(se.text,fe===0).trim()}));(Re?.highlightEffect?.includes("cyberpunk")||Re?.textEffect==="cyberpunk")&&(I="'Orbitron', sans-serif"),w.font=`${Oe} ${ge} ${ne}px ${I}`;const Me=[];let ye=[],me=0,E=.3;["default","custom"].includes(m)?E=.25:m==="monospace"&&(E=.5);const D=w.measureText("M").width*E;ue.forEach((se,fe)=>{if(se.text===`
`){ye.length>0&&Me.push(ye),ye=[],me=0;return}const G=w.measureText(se.text).width;let Ke=!se.text.endsWith(" ");const Ue=/[-]$/,M=/^[-]/;Ue.test(se.text.trim())&&(Ke=!1);const Ze=ue[fe+1];Ze&&(M.test(Ze.text.trim())||Ze.text===`
`)&&(Ke=!1);const Dt=Ke?D:0;me+G>Ge&&ye.length>0&&(Me.push(ye),ye=[],me=0),ye.push(se),me+=G+Dt}),ye.length>0&&Me.push(ye);const O=ce-(Me.length-1)*_e/2;let R=Re.highlightColor||"#fb923c",ee=Re.highlightBackground||"#ffffff";const L=Re.highlightEffect||"none";Re.useCustomHighlightColors||(L.includes("blue")||L.includes("cyan")?(R="#3b82f6",ee="#3b82f6"):L.includes("purple")?(R="#a855f7",ee="#a855f7"):L.includes("green")?(R="#22c55e",ee="#22c55e"):L.includes("pink")?(R="#ec4899",ee="#ec4899"):L.includes("neon")?(R="#ffffff",ee="#ffffff"):L.includes("gold")?(R="#FFD700",ee="#B8860B"):L.includes("chrome")?(R="#E0E0E0",ee="#757575"):L.includes("fire")?(R="#FF4500",ee="#FF0000"):L.includes("glass")?(R="#ffffff",ee="rgba(255,255,255,0.1)"):L==="karaoke"&&(R="#fb923c",ee="#fb923c"));let re=Re.fontColor||"#ffffff";Re.highlightEffect==="karaoke-smooth-white"&&(re="#ffffff"),Me.forEach((se,fe)=>{const G=O+fe*_e;let Je=0;se.forEach((Ue,M)=>{if(Je+=w.measureText(Ue.text).width,M<se.length-1){let Dt=!Ue.text.endsWith(" ");const Yt=/[-]$/,ct=/^[-]/;Yt.test(Ue.text.trim())&&(Dt=!1);const ze=se[M+1];ze&&ct.test(ze.text.trim())&&(Dt=!1),Je+=Dt?D:0}});let Ke=te;w.textAlign==="center"?Ke=te-Je/2:w.textAlign==="right"&&(Ke=te-Je),w.save(),w.textAlign="left",w.textBaseline="middle",se.forEach((Ue,M)=>{const Ze=w.measureText(Ue.text).width,Dt=Ee>=Ue.startTime,Yt=Ee>=Ue.startTime&&Ee<Ue.endTime;let ct=re;const ze=L.includes("fill")||L.includes("smooth"),xt=ze?Dt:Yt;if(xt&&L!=="none")if(L==="karaoke-smooth"||L==="karaoke-smooth-white")if(Yt){const qe=Ue.endTime-Ue.startTime,ht=Ee-Ue.startTime,Rt=Math.max(0,Math.min(1,ht/qe)),Pn=w.createLinearGradient(Ke,0,Ke+Ze,0);Pn.addColorStop(Rt,R),Pn.addColorStop(Math.min(1,Rt+.001),re),ct=Pn}else ct=R;else ct=R;if(w.save(),w.fillStyle=ct,(Yt||ze&&Dt)&&(L.includes("pill")||L.includes("box")||L.includes("rounded")||L.includes("fill")||L.includes("glass"))&&xt){const qe=L.includes("pill")?ne*.4:ne*.15;w.fillStyle=ee;let ht=4*ke;L.includes("pill")?ht=999:L.includes("rounded")||L.includes("glass")?ht=8*ke:L.includes("box")&&(ht=0),L.includes("glass")&&(w.fillStyle="rgba(255,255,255,0.1)",w.shadowColor="rgba(255,255,255,0.2)",w.shadowBlur=10),w.beginPath(),w.roundRect?w.roundRect(Ke-qe,G-_e/2,Ze+qe*2,_e,ht):w.rect(Ke-qe,G-_e/2,Ze+qe*2,_e),w.fill(),L.includes("glass")&&(w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.stroke()),L.includes("fill")||L.includes("pill")||L.includes("box")||L.includes("rounded")?(w.fillStyle="#000000",ct="#000000"):w.fillStyle=R}if(xt){if(L.includes("underline")){const qe=Math.max(2,ne*.08),ht=G+ne*.6;w.fillStyle=R,w.fillRect(Ke,ht,Ze,qe),w.fillStyle=ct}if((L.includes("glow")||L.includes("neon"))&&(L.includes("neon")?(w.fillStyle="#ffffff",w.shadowColor=R,w.shadowBlur=20):(w.shadowColor=R,w.shadowBlur=10)),L.includes("outline")&&(w.strokeStyle=R,w.lineWidth=2*ke,w.strokeText(Ue.text,Ke,G),w.fillStyle="transparent",L==="karaoke-outline"&&(ct="transparent",w.fillStyle="transparent")),L.includes("shadow")&&(w.shadowColor="#000000",w.shadowOffsetX=3*ke,w.shadowOffsetY=3*ke,w.shadowBlur=0),L.includes("gradient")){const qe=w.createLinearGradient(Ke,G-_e/2,Ke+Ze,G+_e/2);qe.addColorStop(0,R),qe.addColorStop(1,ee),w.fillStyle=qe,ct=qe}}let Fe=G,Pe=Ke,bt=0,St=1,lt=1,Gt=1,yn=0;if(xt){const qe=Ee-Ue.startTime;if(L.includes("bounce")||L==="karaoke-bounce")Fe-=10*ke;else if(L.includes("wave"))Fe+=Math.sin(Ee*5+M)*8*ke;else if(L.includes("pulse")){const Rt=1+Math.sin(Ee*6)*.1;St=Rt,lt=Rt}else if(L.includes("shake"))Pe+=(Math.random()-.5)*6*ke,Fe+=(Math.random()-.5)*6*ke;else if(L.includes("wobble"))bt=Math.sin(Ee*6)*.1;else if(L.includes("rotate")&&!L.includes("in"))bt=Math.sin(Ee*3)*.1;else if(L.includes("spin"))bt=Ee*3%(Math.PI*2);else if(L.includes("jello"))St=1+Math.sin(Ee*8)*.15,lt=1-Math.sin(Ee*8)*.15;else if(L.includes("heartbeat")){const Rt=Ee*2%1;(Rt<.15||Rt>.3&&Rt<.45)&&(St=1.15,lt=1.15)}else if(L.includes("flash"))Gt=.5+Math.sin(Ee*10)*.5;else if(L.includes("tada")){const Rt=Ee*2%1;Rt<.1?(bt=-.05,St=.9):Rt<.2&&(bt=.05,St=1.1)}else L.includes("swing")?bt=Math.sin(Ee*4)*.15:L.includes("glitch")&&Math.sin(Ee*15)>.8&&(Pe+=(Math.random()-.5)*10,Fe+=(Math.random()-.5)*10);const ht=.3;if(qe<ht){const Rt=qe/ht,Lt=(an=>1-Math.pow(1-an,3))(Rt);if(L.includes("fade"))Gt=Rt;else if(L.includes("slide"))Fe+=(1-Lt)*30*ke,Gt=Lt;else if(L.includes("drop"))Fe-=(1-Lt)*50*ke,Gt=Lt;else if(L.includes("zoom")||L.includes("scale")){const an=.5+.5*Lt;St*=an,lt*=an}else if(L.includes("elastic")){const an=Rt===0?0:Rt===1?1:Math.pow(2,-10*Rt)*Math.sin((Rt*10-.75)*(2*Math.PI)/3)+1;St*=an,lt*=an}else if(L.includes("flip"))lt*=Lt;else if(L.includes("rotate-in"))bt+=(1-Lt)*-1,Gt=Lt;else if(L.includes("roll"))Pe-=(1-Lt)*50*ke,bt-=(1-Lt)*Math.PI,Gt=Lt;else if(L.includes("lightspeed"))Pe+=(1-Lt)*100*ke,Gt=Lt;else if(L.includes("blur"))yn=(1-Lt)*10,Gt=Lt;else if(L.includes("shatter")){const an=1+(1-Lt)*2;St*=an,lt*=an,yn=(1-Lt)*10,Gt=Lt}else L.includes("spiral")&&(St*=Lt,lt*=Lt,bt+=(1-Lt)*Math.PI*2)}else L.includes("scale")&&(St*=1.3,lt*=1.3)}if(w.save(),Gt<1&&(w.globalAlpha*=Gt),yn>0&&(w.filter=`blur(${yn}px)`),bt!==0||St!==1||lt!==1){const qe=Pe+Ze/2,ht=Fe;w.translate(qe,ht),w.rotate(bt),w.scale(St,lt),w.translate(-qe,-ht)}if(xt){if(L==="karaoke-smooth-plus"){const qe=Re.textEffect||"none";if(Yt){const ht=Ue.endTime-Ue.startTime,Rt=Ee-Ue.startTime,Pn=Math.max(0,Math.min(1,Rt/ht)),Lt=Pe+Ze*Pn,an=Re?.textDecoration||"none",Yo=Fi=>{if(an!=="none"){w.lineWidth=Math.max(2,3*ke),w.strokeStyle=Fi,w.beginPath();const yo=Fe+ne*.45;an.includes("underline")&&(w.moveTo(Pe,yo),w.lineTo(Pe+Ze,yo)),an.includes("line-through")&&(w.moveTo(Pe,Fe),w.lineTo(Pe+Ze,Fe)),w.stroke()}};w.save(),w.beginPath(),w.rect(Pe-50,Fe-_e,Lt-(Pe-50),_e*2),w.clip(),w.fillStyle=R,ve(w,Ue.text,Pe,Fe,qe),Yo(R),w.restore(),w.save(),w.beginPath(),w.rect(Lt,Fe-_e,Pe+Ze+50-Lt,_e*2),w.clip(),w.fillStyle=re,w.fillText(Ue.text,Pe,Fe),Yo(re),w.restore(),ct="rgba(0,0,0,0)"}else w.fillStyle=R,ve(w,Ue.text,Pe,Fe,qe),ct=R}else if(L.includes("gradient")||L.includes("chrome")||L.includes("gold")){const qe=w.createLinearGradient(Pe,Fe-_e/2,Pe,Fe+_e/2);L.includes("gold")?(qe.addColorStop(0,"#d4af37"),qe.addColorStop(1,"#C5A028")):L.includes("chrome")?(qe.addColorStop(0,"#ebebeb"),qe.addColorStop(.5,"#616161"),qe.addColorStop(.51,"#ebebeb"),qe.addColorStop(1,"#ebebeb")):(qe.addColorStop(0,R),qe.addColorStop(1,ee)),w.fillStyle=qe}if(L.includes("shadow")&&(w.save(),w.fillStyle="#000000",w.fillText(Ue.text,Pe+2*ke,Fe+2*ke),w.restore()),L.includes("3d")){const qe=w.fillStyle;w.fillStyle="rgba(0,0,0,0.5)";for(let ht=1;ht<=3;ht++)w.fillText(Ue.text,Pe+ht*ke,Fe+ht*ke);w.fillStyle=qe}if(L.includes("neon-multi"))w.shadowBlur=10,w.shadowColor="#fff",w.fillText(Ue.text,Pe,Fe),w.shadowBlur=20,w.shadowColor="#ff00de",w.fillText(Ue.text,Pe,Fe),w.shadowBlur=35,w.shadowColor="#00ffff",w.fillText(Ue.text,Pe,Fe);else if(L.includes("cyberpunk"))w.save(),w.fillStyle="#05d9e8",w.fillText(Ue.text,Pe-1,Fe-1),w.restore(),w.save(),w.fillStyle="#000000",w.fillText(Ue.text,Pe+2,Fe+2),w.restore(),w.fillStyle="#fcee0a",w.fillText(Ue.text,Pe,Fe);else if(L.includes("glitch-text")){const qe=(Math.random()-.5)*5,ht=(Math.random()-.5)*2;w.save(),w.fillStyle="red",w.fillText(Ue.text,Pe+qe,Fe+ht),w.restore(),w.save(),w.fillStyle="cyan",w.fillText(Ue.text,Pe-qe,Fe-ht),w.restore(),w.fillStyle="#ffffff",w.fillText(Ue.text,Pe,Fe)}else if(L.includes("retro")||L.includes("vhs")){const qe=Math.sin(Ee*5)*2*ke,ht=Math.random()>.95?(Math.random()-.5)*5:0;w.globalCompositeOperation="screen",w.fillStyle="#ff0000",w.fillText(Ue.text,Pe-3*ke+qe,Fe+ht),w.fillStyle="#00ff00",w.fillText(Ue.text,Pe+ht,Fe-qe),w.fillStyle="#0000ff",w.fillText(Ue.text,Pe+3*ke-qe,Fe+ht)}else if(L.includes("fire")){const qe=Math.abs(Math.sin(Ee*15))*5,ht=Math.sin(Ee*20)*1*ke;w.shadowBlur=5+qe,w.shadowColor="#ff0000",w.fillStyle="#ff4500",w.fillText(Ue.text,Pe,Fe+ht),w.shadowBlur=2,w.shadowColor="#ffff00",w.fillStyle="#ffcc00",w.fillText(Ue.text,Pe+Math.sin(Ee*25)*1*ke,Fe-1*ke+ht)}else if(L.includes("typewriter")){const qe=Ee-Ue.startTime,ht=Ue.endTime-Ue.startTime,Rt=Math.min(1,Math.max(0,qe/ht)),Pn=Math.floor(Ue.text.length*Rt),Lt=Ue.text.substring(0,Pn);L.includes("outline")?(w.strokeStyle=R,w.strokeText(Lt,Pe,Fe)):w.fillText(Lt,Pe,Fe)}else!L.includes("neon-multi")&&!L.includes("retro")&&!L.includes("vhs")&&!L.includes("fire")&&(L.includes("outline")?(w.strokeStyle=R,w.lineWidth=2*ke,w.strokeText(Ue.text,Pe,Fe)):w.fillText(Ue.text,Pe,Fe))}else w.fillText(Ue.text,Pe,Fe);const $n=Re?.textDecoration||"none";if($n!=="none"){if(w.lineWidth=Math.max(2,3*ke),w.strokeStyle=ct,w.beginPath(),$n.includes("underline")&&!L.includes("underline")){const qe=Fe+ne*.45;w.moveTo(Pe,qe),w.lineTo(Pe+Ze,qe)}$n.includes("line-through")&&(w.moveTo(Pe,Fe),w.lineTo(Pe+Ze,Fe)),w.stroke()}w.restore(),w.restore();let ci=!Ue.text.endsWith(" ");const go=/[-]$/,$o=/^[-]/;go.test(Ue.text.trim())&&(ci=!1);const Wn=se[M+1];Wn&&$o.test(Wn.text.trim())&&(ci=!1),Ke+=Ze+(ci?D:0)}),w.restore()})},Be=(w,A,te,ce,Ge,_e,Ee,Re)=>{const I=pe(w,A,Ge),ne=ce-(I.length-1)*_e/2;I.forEach((ge,Oe)=>{const ke=ne+Oe*_e;if(Ee==="glass"){const Xe=w.measureText(ge).width;w.save(),w.fillStyle="rgba(255, 255, 255, 0.1)",w.beginPath(),w.roundRect?w.roundRect(te-(w.textAlign==="center"?Xe/2:w.textAlign==="right"?Xe:0)-10,ke-_e/2,Xe+20,_e,8):w.rect(te-(w.textAlign==="center"?Xe/2:w.textAlign==="right"?Xe:0)-10,ke-_e/2,Xe+20,_e),w.fill(),w.strokeStyle="rgba(255, 255, 255, 0.2)",w.stroke(),w.restore()}ve(w,ge,te,ke,Ee,Re)})},Te='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',We='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',Ne='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Qe='"Metal Mania", cursive',He='"Fredoka One", cursive',rt='"Shadows Into Light", cursive',ft='"Dancing Script", cursive',_t='"Orbitron", sans-serif',Nt='"UnifrakturMaguntia", cursive';let j=Te;m==="classic"?j=We:m==="monospace"?j=Ne:m==="metal"?j=Qe:m==="kids"?j=He:m==="sad"?j=rt:m==="romantic"?j=ft:m==="tech"?j=_t:m==="gothic"?j=Nt:m==="custom"&&(j=_?.fontFamily||Te),x&&(j="CustomFont, sans-serif"),_&&_.fontFamily!=="sans-serif"&&(j=_.fontFamily);const Ce=t<=o,oe=Math.min(t,o)/1080;if(_&&(_.backgroundSource==="color"||_.backgroundSource==="smart-gradient")?n.fillStyle=_.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),_?.backgroundSource==="gradient"&&_.backgroundGradient)n.fillStyle=_.backgroundGradient,n.fillRect(0,0,t,o);else if(_?.backgroundSource==="smart-gradient"){const w=_.backgroundColor||"#312e81",A=Y(w),te=n.createLinearGradient(0,0,t,o);te.addColorStop(0,w),te.addColorStop(.5,`rgb(${Math.floor(A.r*.6)}, ${Math.floor(A.g*.6)}, ${Math.floor(A.b*.6)})`),te.addColorStop(1,"#000000"),n.fillStyle=te,n.fillRect(0,0,t,o)}else if(_?.backgroundSource==="image"&&_.backgroundImage){const w=y.get("__custom_bg__");w&&de(w)}if(_&&_.backgroundBlurStrength>0?n.filter=`blur(${_.backgroundBlurStrength}px)`:T&&(n.filter="blur(12px)"),!_||_.backgroundSource==="timeline"||_.backgroundSource==="custom"){const w=_?_.backgroundSource==="timeline":!0;let A=!1;if(w){const te=_?.visualTransitionType||"none",ce=_?.visualTransitionDuration||1,Ge=h.filter(_e=>_e.type==="audio"?!1:s>=_e.startTime&&s<_e.endTime||te==="crossfade"&&s>=_e.endTime&&s<_e.endTime+ce);Ge.sort((_e,Ee)=>{const Re=(_e.layer||0)-(Ee.layer||0);return Re!==0?Re:_e.startTime-Ee.startTime}),Ge.length>0&&(Ge.forEach(_e=>{const Ee=_e.layer||0;if(_&&_.layerVisibility?.visual?.[Ee]===!1)return;const Re=_e.type==="video"?v.get(_e.id):null,I=_e.type!=="video"?y.get(_e.id):null;let ne=1;if(te!=="none"){if(s<_e.startTime+ce){const ge=(s-_e.startTime)/ce;ne=Math.max(0,Math.min(1,ge))}if(s>=_e.endTime){let ge=!1;if(te==="crossfade"&&(ge=h.some(Oe=>Oe.id!==_e.id&&(Oe.layer||0)===(_e.layer||0)&&Oe.startTime>=_e.endTime-.1&&Oe.startTime<_e.endTime+.2)),!ge){const ke=1-(s-_e.endTime)/ce;ne=Math.min(ne,Math.max(0,Math.min(1,ke)))}}else if(te==="fade-to-black"&&s>_e.endTime-ce){const ge=(_e.endTime-s)/ce;ne=Math.min(ne,Math.max(0,Math.min(1,ge)))}}ne>0&&(n.save(),n.globalAlpha=ne,Re?de(Re):I&&de(I),n.restore())}),A=!0)}if(!A&&d.coverUrl&&h.length===0){const te=d.backgroundType==="video"?v.get("background"):null,ce=y.get("cover");te?de(te):ce&&de(ce)}}if((_&&_.backgroundBlurStrength>0||T)&&(n.filter="none"),!["just_video","none"].includes(m)&&!_?.useRealColorMedia&&(n.fillStyle=_&&(_.backgroundSource==="color"||_.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),_?.enableGradientOverlay){const w=n.createLinearGradient(0,o,0,0);w.addColorStop(0,"rgba(0, 0, 0, 0.95)"),w.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),w.addColorStop(.7,"rgba(0, 0, 0, 0)"),n.fillStyle=w,n.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const yt=r.findIndex((w,A)=>{if(w.endTime!==void 0)return s>=w.time&&s<w.endTime;const te=r[A+1];return s>=w.time&&(!te||s<te.time)});let vt=yt;if(vt===-1&&r.length>0)if(s<r[0].time)vt=0;else{const w=r.findIndex(A=>A.time>s);vt=w!==-1?w:r.length-1}const U=_?.introMode==="manual"&&_.introText?_.introText:`${d.title}
${d.artist}`;let le=yt===-1&&s<5&&(_?.showIntro??!0)&&(_?.introMode!=="manual"||P)&&(r.length===0||s<r[0].time),xe=(Ce?50:60)*oe,je=(Ce?25:30)*oe,st=(Ce?80:100)*oe;if(m==="large"?(xe=(Ce?90:120)*oe,st=(Ce?110:140)*oe):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(xe=(Ce?80:110)*oe,st=(Ce?110:140)*oe):["sad","romantic","gothic"].includes(m)?(xe=(Ce?60:75)*oe,st=(Ce?90:120)*oe):["slideshow","subtitle"].includes(m)&&(xe=(Ce?30:40)*oe),xe*=b,je*=b,st*=b,(_?.showLyrics??!0)&&(yt!==-1||le||_?.lyricDisplayMode==="all"&&r.length>0)){let w=o/2;_?.contentPosition==="top"?w=o*.15:_?.contentPosition==="bottom"&&(w=o*.9);let A=0;const te=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(te||m==="slideshow"||m==="subtitle"){const Re=le?{text:U}:r[yt]||r[vt];if(Re){n.font=`900 ${xe}px ${j}`;const I=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?Re.text.toUpperCase():Re.text,ne=pe(n,I,t*.9);ne.length>1&&(A=(ne.length-1)*(xe*1.2)/2)}}let ce=te?-1:-2,Ge=te?1:2;_?.lyricDisplayMode==="active-only"?(ce=0,Ge=0):_?.lyricDisplayMode==="next-only"?(ce=0,Ge=1):_?.lyricDisplayMode==="previous-next"?(ce=-1,Ge=1):_?.lyricDisplayMode==="all"&&(ce=-r.length,Ge=r.length);const _e=new Map,Ee=new Map;{const Re=Math.max((Ce?30:40)*oe,st-xe);for(let I=ce;I<=Ge;I++){let ne=0,ge=!1;if(le&&I===0){const Oe=xe*1.2,ke=je*1.2,H=U.split(`
`).length>1;ne=Oe+(H?ke:0),ge=!0}else{const Oe=vt+I;if(Oe>=0&&Oe<r.length){const ke=r[Oe];ge=Oe===yt;const Xe=ge?xe:je;let H=ge?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",ae=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((_?.lyricStyleTarget||"active-only")==="all"||ge?(_?.fontWeight&&(H=_.fontWeight),_?.fontStyle&&(ae=_.fontStyle)):(H="400",ae="normal")),n.font=`${ae} ${H} ${Xe}px ${j}`;let ue=ke.text,Me=_?.textCase||"none";Me==="none"&&ge&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Me="upper"),Me==="upper"?ue=ue.toUpperCase():Me==="lower"?ue=ue.toLowerCase():Me==="title"?ue=ue.replace(/\w\S*/g,me=>me.charAt(0).toUpperCase()+me.substr(1).toLowerCase()):Me==="sentence"?ue=ue.charAt(0).toUpperCase()+ue.slice(1).toLowerCase():Me==="invert"&&(ue=ue.replace(/\w\S*/g,me=>me.charAt(0).toLowerCase()+me.slice(1).toUpperCase())),ne=pe(n,ue,t*.9).length*(Xe*1.2)}}Ee.set(I,ne)}_e.set(0,w);for(let I=1;I<=Ge;I++){const ne=_e.get(I-1)??w,ge=Ee.get(I-1)??0,Oe=Ee.get(I)??0;_e.set(I,ne+ge/2+Re+Oe/2)}for(let I=-1;I>=ce;I--){const ne=_e.get(I+1)??w,ge=Ee.get(I+1)??0,Oe=Ee.get(I)??0;_e.set(I,ne-ge/2-Re-Oe/2)}}for(let Re=ce;Re<=Ge;Re++){let I=null,ne=!1;if(le)Re===0&&(I={time:0,text:U},ne=!0);else{const ge=vt+Re;ge>=0&&ge<r.length&&(I=r[ge],ne=ge===yt)}if(I){_?.lyricDisplayMode,n.textAlign=_?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const ge=_?.fontColor||"#ffffff";let Oe=ge;if(!ne)if(_?.highlightEffect==="karaoke-smooth-white")Oe="#ffffff";else{const ze=Y(ge);Oe=`rgba(${ze.r}, ${ze.g}, ${ze.b}, 0.5)`}let ke=ne?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",Xe=["classic","romantic"].includes(m)?"italic":"normal",H="none";(m==="custom"||m==="default")&&((_?.lyricStyleTarget||"active-only")==="all"||ne?(_?.fontWeight&&(ke=_.fontWeight),_?.fontStyle&&(Xe=_.fontStyle),_?.textDecoration&&(H=_.textDecoration)):(ke="400",Xe="normal",H="none")),n.font=`${Xe} ${ke} ${ne?xe:je}px ${j}`,n.fillStyle=Oe;const ae=_?.transitionEffect||"none";let ue=1,Me=0,ye=0,me=1,E=1,D=0,O=0;if(ne&&ae!=="none"){const ze=s-I.time,xt=I.endTime?I.endTime-s:.5,Fe=.5,Pe=ze<Fe?ze/Fe:I.endTime&&xt<Fe?xt/Fe:1;if(Pe<1){ue=Math.min(1,Pe*2);const bt=lt=>1+2.70158*Math.pow(lt-1,3)+1.70158*Math.pow(lt-1,2),St=lt=>{const Gt=2*Math.PI/3;return lt===0?0:lt===1?1:Math.pow(2,-10*lt)*Math.sin((lt*10-.75)*Gt)+1};if(ae==="slide")Me=(1-Pe)*(ze<Fe?30:-30);else if(ae==="zoom"){const lt=.5+Pe*.5;me=lt,E=lt}else if(ae==="blur")D=(1-Pe)*10;else if(ae==="float")Me=(1-Pe)*(ze<Fe?50:-50);else if(ae==="drop")Me=(1-bt(Pe))*-200,ue=Pe;else if(ae==="flip")E=Pe;else if(ae==="rotate-in")O=(1-Pe)*-Math.PI/2,ue=Pe;else if(ae==="spiral")me=Pe,E=Pe,O=(1-Pe)*Math.PI*2,ue=Pe;else if(ae==="shatter"){const lt=3-2*Pe;me=lt,E=lt,D=(1-Pe)*20,ue=Pe}else if(ae==="lightspeed")ye=(1-Pe)*300,ue=Pe;else if(ae==="roll")ye=(1-Pe)*-300,O=(1-Pe)*-Math.PI,ue=Pe;else if(ae==="elastic"){const lt=St(Pe);me=lt,E=lt,ue=Pe}}}n.save(),n.globalAlpha=ue,D>0&&(n.filter=`blur(${D}px)`);const R=ne&&_?.textAnimation||"none";let ee=I.text,L=_?.textCase||"none";L==="none"&&ne&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(L="upper"),L==="upper"?ee=ee.toUpperCase():L==="lower"?ee=ee.toLowerCase():L==="title"?ee=ee.replace(/\w\S*/g,ze=>ze.charAt(0).toUpperCase()+ze.substr(1).toLowerCase()):L==="sentence"?ee=ee.charAt(0).toUpperCase()+ee.slice(1).toLowerCase():L==="invert"&&(ee=ee.replace(/\w\S*/g,ze=>ze.charAt(0).toLowerCase()+ze.slice(1).toUpperCase()));let re=0,se=0,fe=1,G=1,Je=0;if(ne&&R!=="none")if(R==="bounce")se=Math.sin(s*6)*15*oe;else if(R==="pulse"){const ze=1+Math.sin(s*4)*.08;fe=ze,G=ze}else if(R==="wave")se=Math.sin(s*4)*20*oe,Je=Math.sin(s*4)*.05;else if(R==="glitch")Math.sin(s*10)>.8&&(re=(Math.random()-.5)*15*oe,se=(Math.random()-.5)*15*oe);else if(R==="shake")re=(Math.random()-.5)*5*oe,se=(Math.random()-.5)*5*oe;else if(R==="typewriter"){const xt=Math.floor((s-I.time)*30);ee=ee.substring(0,Math.max(0,xt))}else if(R==="wobble"){Je=Math.sin(s*5)*.05;const ze=1+Math.sin(s*3)*.05;fe=ze,G=ze}else if(R==="breathe"){const ze=1+Math.sin(s*2)*.03;fe=ze,G=ze}else if(R==="rotate")Je=Math.sin(s*2)*.05;else if(R==="sway")Je=Math.sin(s*2)*.08;else if(R==="flicker")n.globalAlpha=ue*(.8+Math.random()*.2);else if(R==="jello")fe=1+Math.sin(s*6)*.1,G=1-Math.sin(s*6)*.1;else if(R==="spin")Je=s%2*Math.PI;else if(R==="heartbeat"){const ze=s*1.5%1;(ze<.1||ze>.3&&ze<.4)&&(fe=1.1,G=1.1)}else if(R==="tada"){const ze=s*1.5%1;ze<.1?(fe=.9,G=.9,Je=-.05):ze<.2?(fe=1.1,G=1.1,Je=.05):(fe=1,G=1,Je=0)}else R==="swing"&&(Je=Math.sin(s*3)*.1);let Ke=0;_e.has(Re)?Ke=_e.get(Re)+(Re===0?Me:0):(Ke=m==="subtitle"&&Re===0&&_?.lyricDisplayMode!=="all"?o-140*oe:w+Re*st+(Re===0?Me:0),m!=="custom"&&(Re<0?Ke-=A:Re>0&&(Ke+=A))),Ke+=se;let Ue=t/2;n.textAlign==="left"?Ue=60*oe:n.textAlign==="right"&&(Ue=t-60*oe),Ue+=ye+re;const M=me*fe,Ze=E*G,Dt=O+Je;(M!==1||Ze!==1||Dt!==0)&&(n.translate(Ue,Ke),n.rotate(Dt),n.scale(M,Ze),n.translate(-Ue,-Ke));const Yt=ne?_?.textEffect||"preset":"none";if(le&&Re===0&&_?.introMode!=="manual"){const ze=ee.split(`
`),xt=ze[0],Fe=ze.slice(1).join(`
`),Pe=xe*1.2,bt=je*1.2,St=20*oe;let lt=Ke;Fe&&(lt=Ke-bt/2-St/2);const Gt=Ke+Pe/2+St/2;if(n.font=`${Xe} ${ke} ${xe}px ${j}`,Be(n,xt,Ue,lt,t*.9,Pe,Yt,H),Fe){const yn=m==="custom"&&_?.fontWeight?_.fontWeight:"400";n.font=`${Xe} ${yn} ${je}px ${j}`,Be(n,Fe,Ue,Gt,t*.9,bt,Yt,H)}}else{const ze=ne?xe:je;_&&_.highlightEffect&&_.highlightEffect,ne&&I?Le(n,I,Ue,Ke,t*.9,ze*(_?.lyricLineHeight||1.2),s,_,j,ze,ke,Xe,oe):Be(n,ee,Ue,Ke,t*.9,ze*(_?.lyricLineHeight||1.2),Yt,H)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const w=_?_.showTitle||_.showArtist:!0,A=_?_.showCover:!0;if(w||A)if(m==="custom"||m==="default"){const te=_?.infoPosition||"top-left",ce=_?.infoStyle||"classic",Ge=ce==="box",_e=Ge?16*oe:12*oe,Ee=40*oe*(_?.infoMarginScale??1);let Re="left",I="top";te.includes("left")?Re="left":te.includes("right")?Re="right":Re="center",te.includes("top")?I="top":I="bottom";const ne=_?.infoSizeScale??1,ge=(ce==="minimal"||ce==="modern"?0:100*oe)*ne,Oe=A&&ge>0&&d.coverUrl!==null,ke=Oe?d.backgroundType==="video"?v.get("background"):y.get("cover"):null,Xe=(ce==="minimal"?20:ce==="modern"||ce==="modern_art"?40:28)*oe,H=(ce==="minimal"?14:ce==="modern"||ce==="modern_art"?24:18)*oe,ae=Xe*ne,ue=H*ne,Me=`bold ${ae}px ${j}`,ye=`${ue}px ${j}`,me=20*oe,E=Ge?24*oe:0,D=_?.fontColor||"#ffffff",O=ce==="modern"||ce==="modern_art"?D:_?.fontColor||"#d4d4d8";n.font=Me;const R=n.measureText(d.title),ee=_?.showTitle?R.width:0;n.font=ye;const L=n.measureText(d.artist),re=_?.showArtist?L.width:0;let se=0,fe=0;if(Re==="center"){se=Math.max(Oe&&ke?ge:0,ee,re)+E*2;let ze=0;Oe&&ke&&(ze+=ge),(_?.showTitle??!0)&&(ze+=(Oe&&ke?me:0)+ae),(_?.showArtist??!0)&&(ze+=(Oe&&ke||(_?.showTitle??!0)?5*oe:0)+ue),fe=ze+E*2}else{const ct=Math.max(ee,re);se=(Oe&&ke?ge+me:0)+ct+E*2;const xt=(_?.showTitle?ae:0)+(_?.showArtist?ue+5*oe:0);fe=Math.max(xt,Oe&&ke?ge:0)+E*2}let G=0,Je=0;Re==="left"?G=Ee:Re==="right"?G=t-Ee:G=t/2,I==="top"?Je=Ee:Je=o-Ee;let Ke=0,Ue=0;Re==="left"?Ke=G:Re==="right"?Ke=G-se:Ke=G-se/2,I==="top"?Ue=Je:Ue=Je-fe,Ge&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(Ke,Ue,se,fe,_e),n.fill(),n.restore());const M=Ke+E,Ze=Ue+E,Dt=se-E*2,Yt=fe-E*2;if(Re==="center"){let ct=Ze;const ze=M+Dt/2;if(n.textAlign="center",I==="top"){if(Oe&&ke){n.save(),n.beginPath();const xt=ze-ge/2;ce==="circle_art"?n.arc(ze,ct+ge/2,ge/2,0,Math.PI*2):n.roundRect(xt,ct,ge,ge,_e/2),n.clip(),n.drawImage(ke,xt,ct,ge,ge),n.restore(),ct+=ge+me}(_?.showTitle??!0)&&(n.fillStyle=D,n.font=Me,n.textBaseline="top",n.fillText(d.title,ze,ct),ct+=ae+5*oe),(_?.showArtist??!0)&&(n.fillStyle=O,n.font=ye,n.textBaseline="top",n.fillText(d.artist,ze,ct))}else{if(Oe&&ke){n.save(),n.beginPath();const xt=ze-ge/2;ce==="circle_art"?n.arc(ze,ct+ge/2,ge/2,0,Math.PI*2):n.roundRect(xt,ct,ge,ge,_e/2),n.clip(),n.drawImage(ke,xt,ct,ge,ge),n.restore(),ct+=ge+me}(_?.showTitle??!0)&&(n.fillStyle=D,n.font=Me,n.textBaseline="top",n.fillText(d.title,ze,ct),ct+=ae+5*oe),(_?.showArtist??!0)&&(n.fillStyle=O,n.font=ye,n.textBaseline="top",n.fillText(d.artist,ze,ct))}}else{const ct=Re==="right",ze=Ze+Yt/2;let xt=M;if(ct&&(xt=M+Dt),Oe&&ke){const bt=ze-ge/2,St=ct?xt-ge:xt;n.save(),n.beginPath(),ce==="circle_art"?n.arc(St+ge/2,bt+ge/2,ge/2,0,Math.PI*2):n.roundRect(St,bt,ge,ge,_e/2),n.clip(),n.drawImage(ke,St,bt,ge,ge),n.restore(),ct?xt-=ge+me:xt+=ge+me}const Fe=(_?.showTitle?ae:0)+(_?.showArtist?ue+5*oe:0);let Pe=ze-Fe/2;n.textAlign=ct?"right":"left",n.textBaseline="top",(_?.showTitle??!0)&&(n.fillStyle=D,n.font=Me,n.fillText(d.title,xt,Pe),Pe+=ae+5*oe),(_?.showArtist??!0)&&(n.fillStyle=O,n.font=ye,n.fillText(d.artist,xt,Pe))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(w){n.textAlign="center",n.textBaseline="middle";let te=80*oe;["testing","testing_up","one_line","one_line_up"].includes(m)&&(te=120*oe),(_?.showTitle??!0)&&(n.font=`bold ${20*oe}px ${j}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?d.title.toUpperCase():d.title,t/2,o-te-30*oe)),(_?.showArtist??!0)&&(n.font=`${16*oe}px ${j}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,t/2,o-te))}}else{const te=40*oe*(_?.infoMarginScale??1),ce=t===o,Ge=(Ce?ce?110:150:100)*oe,_e=d.coverUrl?y.get("cover"):null,Ee=12*oe;if(Ce){const Re=te*(ce?1.5:3),I=t/2,ne=I-Ge/2,ge=Re;if(A&&(n.save(),n.beginPath(),n.roundRect(ne,ge,Ge,Ge,Ee),n.clip(),_e?n.drawImage(_e,ne,ge,Ge,Ge):(n.fillStyle="#27272a",n.fillRect(ne,ge,Ge,Ge)),n.restore()),w){n.textAlign="center",n.textBaseline="top";const Oe=ge+(A?Ge+25*oe:0),ke=_?.infoFontFamily||j,Xe=_?.infoFontColor||"#ffffff",H=_?.infoFontColor||"#d4d4d8",ae=_?.infoFontWeight||"bold",ue=_?.infoFontStyle||"normal";(_?.showTitle??!0)&&(n.font=`${ue} ${ae} ${(ce?26:36)*oe}px ${ke}`,n.fillStyle=Xe,n.fillText(d.title,I,Oe)),(_?.showArtist??!0)&&(n.font=`${ue} ${ae} ${(ce?18:24)*oe}px ${ke}`,n.fillStyle=H,n.fillText(d.artist,I,Oe+(_?.showTitle??!0?(ce?30:40)*oe:0)))}}else{const Re=te,I=te;if(A&&(n.save(),n.beginPath(),n.roundRect(Re,I,Ge,Ge,Ee),n.clip(),_e?n.drawImage(_e,Re,I,Ge,Ge):(n.fillStyle="#27272a",n.fillRect(Re,I,Ge,Ge)),n.restore()),w){n.textAlign="left",n.textBaseline="top";const ne=_?.infoFontFamily||j,ge=_?.infoFontColor||"#ffffff",Oe=_?.infoFontColor||"#d4d4d8",ke=_?.infoFontWeight||"bold",Xe=_?.infoFontStyle||"normal",H=Re+(A?Ge+25*oe:0),ae=28*oe,ue=I+Ge/2-ae;(_?.showTitle??!0)&&(n.font=`${Xe} ${ke} ${ae}px ${ne}`,n.fillStyle=ge,n.fillText(d.title,H,ue)),(_?.showArtist??!0)&&(n.font=`${Xe} ${ke} ${18*oe}px ${ne}`,n.fillStyle=Oe,n.fillText(d.artist,H,ue+(_?.showTitle??!0?ae+5*oe:0)))}}}}if(_?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const w=_.channelInfoPosition||"bottom-right",A=_.channelInfoStyle||"classic",te=_.channelInfoSizeScale??1,ce=_.channelInfoMarginScale??1,Ge=y.get("__channel_info__"),_e=_.channelInfoText;if(!(!Ge&&!_e)){if(!(A==="logo"&&!Ge)){if(!(A==="minimal"&&!_e)){n.save();const Ee=40*oe*ce,Re=80*oe*te,I=A==="modern"||A==="logo"?Re*1.2:Re,ne=20*oe*te,ge=y.get("__channel_info_text_svg__"),Oe=!!ge;let ke=0,Xe=ne;if(Oe&&ge){Xe=ne*1.5;const ee=ge.width/ge.height;ke=Xe*ee}else{const ee=_.channelInfoFontWeight||"bold",L=_.channelInfoFontStyle||"normal";n.font=`${L} ${ee} ${ne}px ${_.channelInfoFontFamily||"sans-serif"}`,_e&&A!=="logo"&&(ke=n.measureText(_e).width)}const H=12*oe*te,ae=12*oe*te,ue=8*oe*te;let Me=0,ye=0;const me=!!Ge&&A!=="minimal",E=!!_e&&A!=="logo";A==="modern"?(Me=Math.max(me?I:0,E?ke+ae*2:0),ye=(me?I:0)+(me&&E?H:0)+(E?Xe+ue*2:0)):A==="box"?(Me=(me?I:0)+(me&&E?H:0)+(E?ke:0)+ae*2,ye=Math.max(me?I:0,E?Xe:0)+ue*2):A==="minimal"?(Me=E?ke+ae*2:0,ye=E?Xe+ue*2:0):A==="logo"?(Me=I,ye=I):(Me=(me?I:0)+(me&&E?H:0)+(E?ke+ae*2:0),ye=Math.max(me?I:0,E?Xe+ue*2:0));let D=0,O=0;w.includes("left")?D=Ee:w.includes("right")?D=t-Ee-Me:w.includes("center")&&(D=(t-Me)/2),w.includes("top")?O=Ee:w.includes("bottom")&&(O=o-Ee-ye),A==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(D,O,Me,ye,12*oe*te),n.fill()):n.fillRect(D,O,Me,ye),n.shadowColor="transparent",n.shadowBlur=0);const R=(ee,L,re,se,fe)=>{if(A!=="box"&&A!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(ee,L,re,se,8*oe*te),n.fill()):n.fillRect(ee,L,re,se)),Oe&&ge){const G=ee+(re-ke)/2,Je=L+(se-Xe)/2;n.drawImage(ge,G,Je,ke,Xe)}else{n.fillStyle=_.channelInfoFontColor||"#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const G=ee+(re-ke)/2,Je=L+(se-Xe)/2+Xe*.1;n.fillText(fe,G,Je),n.shadowColor="transparent"}};if(A==="modern"){let ee=O;if(me){const L=D+(Me-I)/2;n.drawImage(Ge,L,ee,I,I),ee+=I+H}if(E){const L=ke+ae*2,re=Xe+ue*2,se=D+(Me-L)/2;R(se,ee,L,re,_e)}}else{const ee=w.includes("right");let L=D+(A==="box"?ae:0);const re=O+ye/2;if(ee&&(A==="classic"||A==="circle")){if(E){const se=ke+ae*2,fe=Xe+ue*2;R(L,re-fe/2,se,fe,_e),L+=se+H}me&&(A==="circle"?(n.save(),n.beginPath(),n.arc(L+I/2,re,I/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Ge,L,re-I/2,I,I),n.restore()):n.drawImage(Ge,L,re-I/2,I,I))}else if(me&&(A==="circle"?(n.save(),n.beginPath(),n.arc(L+I/2,re,I/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Ge,L,re-I/2,I,I),n.restore()):n.drawImage(Ge,L,re-I/2,I,I),L+=I+H),E){const se=ke+(A==="box"?0:ae*2),fe=Xe+(A==="box"?0:ue*2);A==="box"?Oe&&ge?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(ge,L,re-Xe/2,ke,Xe),n.shadowColor="transparent"):(n.fillStyle=_.channelInfoFontColor||"#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(_e,L,re+Xe*.1),n.shadowColor="transparent"):R(L,re-fe/2,se,fe,_e)}}n.restore()}}}}};var Wt;(function(n){n.LOAD="LOAD",n.EXEC="EXEC",n.FFPROBE="FFPROBE",n.WRITE_FILE="WRITE_FILE",n.READ_FILE="READ_FILE",n.DELETE_FILE="DELETE_FILE",n.RENAME="RENAME",n.CREATE_DIR="CREATE_DIR",n.LIST_DIR="LIST_DIR",n.DELETE_DIR="DELETE_DIR",n.ERROR="ERROR",n.DOWNLOAD="DOWNLOAD",n.PROGRESS="PROGRESS",n.LOG="LOG",n.MOUNT="MOUNT",n.UNMOUNT="UNMOUNT"})(Wt||(Wt={}));const KN=(()=>{let n=0;return()=>n++})(),XN=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),QN=new Error("called FFmpeg.terminate()");class WN{#t=null;#i={};#n={};#o=[];#l=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:o,data:s}})=>{switch(o){case Wt.LOAD:this.loaded=!0,this.#i[t](s);break;case Wt.MOUNT:case Wt.UNMOUNT:case Wt.EXEC:case Wt.FFPROBE:case Wt.WRITE_FILE:case Wt.READ_FILE:case Wt.DELETE_FILE:case Wt.RENAME:case Wt.CREATE_DIR:case Wt.LIST_DIR:case Wt.DELETE_DIR:this.#i[t](s);break;case Wt.LOG:this.#o.forEach(r=>r(s));break;case Wt.PROGRESS:this.#l.forEach(r=>r(s));break;case Wt.ERROR:this.#n[t](s);break}delete this.#i[t],delete this.#n[t]})};#e=({type:t,data:o},s=[],r)=>this.#t?new Promise((d,h)=>{const y=KN();this.#t&&this.#t.postMessage({id:y,type:t,data:o},s),this.#i[y]=d,this.#n[y]=h,r?.addEventListener("abort",()=>{h(new DOMException(`Message # ${y} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(XN);on(t,o){t==="log"?this.#o.push(o):t==="progress"&&this.#l.push(o)}off(t,o){t==="log"?this.#o=this.#o.filter(s=>s!==o):t==="progress"&&(this.#l=this.#l.filter(s=>s!==o))}load=({classWorkerURL:t,...o}={},{signal:s}={})=>(this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:Wt.LOAD,data:o},void 0,s));exec=(t,o=-1,{signal:s}={})=>this.#e({type:Wt.EXEC,data:{args:t,timeout:o}},void 0,s);ffprobe=(t,o=-1,{signal:s}={})=>this.#e({type:Wt.FFPROBE,data:{args:t,timeout:o}},void 0,s);terminate=()=>{const t=Object.keys(this.#n);for(const o of t)this.#n[o](QN),delete this.#n[o],delete this.#i[o];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,o,{signal:s}={})=>{const r=[];return o instanceof Uint8Array&&r.push(o.buffer),this.#e({type:Wt.WRITE_FILE,data:{path:t,data:o}},r,s)};mount=(t,o,s)=>{const r=[];return this.#e({type:Wt.MOUNT,data:{fsType:t,options:o,mountPoint:s}},r)};unmount=t=>{const o=[];return this.#e({type:Wt.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:s}={})=>this.#e({type:Wt.READ_FILE,data:{path:t,encoding:o}},void 0,s);deleteFile=(t,{signal:o}={})=>this.#e({type:Wt.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:s}={})=>this.#e({type:Wt.RENAME,data:{oldPath:t,newPath:o}},void 0,s);createDir=(t,{signal:o}={})=>this.#e({type:Wt.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#e({type:Wt.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#e({type:Wt.DELETE_DIR,data:{path:t}},void 0,o)}var Sg;(function(n){n.MEMFS="MEMFS",n.NODEFS="NODEFS",n.NODERAWFS="NODERAWFS",n.IDBFS="IDBFS",n.WORKERFS="WORKERFS",n.PROXYFS="PROXYFS"})(Sg||(Sg={}));const ZN=new Error("failed to get response body reader"),eA=new Error("failed to complete download"),tA="Content-Length",nA=async(n,t)=>{const o=await fetch(n);let s;try{const r=parseInt(o.headers.get(tA)||"-1"),d=o.body?.getReader();if(!d)throw ZN;const h=[];let y=0;for(;;){const{done:x,value:b}=await d.read(),T=b?b.length:0;if(x){if(r!=-1&&r!==y)throw eA;t&&t({url:n,total:r,received:y,delta:T,done:x});break}h.push(b),y+=T,t&&t({url:n,total:r,received:y,delta:T,done:x})}const v=new Uint8Array(y);let m=0;for(const x of h)v.set(x,m),m+=x.length;s=v.buffer}catch(r){console.log("failed to send download progress event: ",r),s=await o.arrayBuffer()}return s},ta=async(n,t,o=!1,s)=>{const r=o?await nA(n,s):await(await fetch(n)).arrayBuffer(),d=new Blob([r],{type:t});return URL.createObjectURL(d)};let na=null,sd=!1,_r=!1;async function iA(n){if(na&&sd)return na;if(_r){for(;_r;)await new Promise(t=>setTimeout(t,100));if(na&&sd)return na}_r=!0;try{const t=new WN;if(t.on("log",({message:s})=>{n?.(`[FFmpeg] ${s}`),console.log("[FFmpeg]",s)}),t.on("progress",({progress:s,time:r})=>{n?.(`[FFmpeg Progress] ${(s*100).toFixed(1)}% (${r}s)`)}),typeof window<"u"&&window.crossOriginIsolated){n?.("[FFmpeg] Cross-Origin Isolated: YES. Using Multi-Threaded Core ");const s="./ffmpeg",r="https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm";let d,h,y;try{n?.("[FFmpeg] Attempting to load local core files...");const v=async(m,x)=>{const b=await fetch(m);if(!b.ok)throw new Error(`HTTP ${b.status}`);const T=b.headers.get("Content-Type");if(T&&T.includes("text/html"))throw new Error("Received HTML instead of binary");const N=await b.blob();return URL.createObjectURL(new Blob([N],{type:x}))};[d,h,y]=await Promise.all([v(`${s}/ffmpeg-core.js`,"text/javascript"),v(`${s}/ffmpeg-core.wasm`,"application/wasm"),v(`${s}/ffmpeg-core.worker.js`,"text/javascript")]),n?.("[FFmpeg] Using local core files (Offline Mode)")}catch(v){n?.("[FFmpeg] Local core files not found or failed to load. Falling back to online CDN."),console.warn("Local FFmpeg files not found:",v),[d,h,y]=await Promise.all([ta(`${r}/ffmpeg-core.js`,"text/javascript"),ta(`${r}/ffmpeg-core.wasm`,"application/wasm"),ta(`${r}/ffmpeg-core.worker.js`,"text/javascript")])}await t.load({coreURL:d,wasmURL:h,workerURL:y})}else{n?.("[FFmpeg] Cross-Origin Isolated: NO. Falling back to Single-Threaded Core "),n?.("[FFmpeg] Note: Rendering will be slower. Add COOP/COEP headers to server for multithreading.");const s="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await t.load({coreURL:await ta(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await ta(`${s}/ffmpeg-core.wasm`,"application/wasm")})}return na=t,sd=!0,n?.("[FFmpeg] Loaded successfully"),t}finally{_r=!1}}function oA(n,t,o){const s=o==="1080p",d={low:s?28:30,med:s?23:25,high:s?18:20}[t];switch(n){case"h265":return{vcodec:"libx265",args:["-crf",d.toString(),"-preset","medium","-tag:v","hvc1"],format:"mp4",ext:"mp4"};case"vp9":return{vcodec:"libvpx-vp9",args:["-crf",d.toString(),"-b:v","0","-deadline","good","-cpu-used","2"],format:"webm",ext:"webm"};case"av1":return{vcodec:"libaom-av1",args:["-crf",(d+10).toString(),"-b:v","0","-cpu-used","4","-strict","experimental"],format:"mp4",ext:"mp4"};default:return{vcodec:"libx264",args:["-crf",d.toString(),"-preset","medium","-profile:v","high","-level","4.2"],format:"mp4",ext:"mp4"}}}async function lA(n){const{canvas:t,audioFile:o,lyrics:s,metadata:r,visualSlides:d,imageMap:h,videoMap:y,preset:v,customFontName:m,renderConfig:x,fps:b,quality:T,codec:N,aspectRatio:_,onProgress:q,onLog:P,abortSignal:Y,isFirstSong:de=!0,isLastSong:pe=!0}=n;q(0,"Loading FFmpeg...");const ve=await iA(P),Le=()=>Y?.aborted===!0||Y?.current===!0;if(Le())throw new Error("Render aborted");q(5,"Preparing audio...");const Be=URL.createObjectURL(o),Te=await sA(Be);URL.revokeObjectURL(Be);const We=Math.ceil(Te*b),Ne=t.getContext("2d");if(!Ne)throw new Error("Failed to get canvas context");q(10,"Rendering frames...");const Qe=await o.arrayBuffer();await ve.writeFile("audio.mp3",new Uint8Array(Qe));const He=Math.max(6,We.toString().length);for(let oe=0;oe<We;oe++){if(Le())throw await Nr(ve,oe,He),new Error("Render aborted");const yt=oe/b;aA(y,d,yt),Ty(Ne,t.width,t.height,yt,s,r,d,h,y,v,m,x.fontSizeScale,x.backgroundBlurStrength>0,Te,x,pe,de);const U=await(await new Promise((je,st)=>{t.toBlob(w=>w?je(w):st(new Error("Failed to create blob")),"image/jpeg",T==="high"?.98:T==="med"?.92:.85)})).arrayBuffer(),le=`frame_${oe.toString().padStart(He,"0")}.jpg`;await ve.writeFile(le,new Uint8Array(U));const xe=10+oe/We*70;q(xe,`Rendering frame ${oe+1}/${We}`)}if(Le())throw await Nr(ve,We,He),new Error("Render aborted");q(80,"Encoding video...");const rt=oA(N,T,n.resolution),ft=`output.${rt.ext}`,_t=["-framerate",b.toString(),"-i",`frame_%0${He}d.jpg`,"-i","audio.mp3","-c:v",rt.vcodec,...rt.args,"-c:a","aac","-b:a","192k","-pix_fmt","yuv420p","-movflags","+faststart","-shortest","-y",ft];P?.(`[FFmpeg] Running: ffmpeg ${_t.join(" ")}`);try{await ve.exec(_t)}catch(oe){throw console.error("FFmpeg encoding failed:",oe),await Nr(ve,We,He),new Error(`FFmpeg encoding failed: ${oe}`)}q(95,"Finalizing...");const Nt=await ve.readFile(ft),j=Nt instanceof Uint8Array?new Uint8Array(Nt):new TextEncoder().encode(Nt),Ce=new Blob([j],{type:rt.format==="webm"?"video/webm":"video/mp4"});await Nr(ve,We,He);try{await ve.deleteFile("audio.mp3"),await ve.deleteFile(ft)}catch{}return q(100,"Complete!"),{blob:Ce,duration:Te,format:rt.ext}}async function sA(n){return new Promise((t,o)=>{const s=document.createElement("audio");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(n)},s.onerror=()=>{o(new Error("Failed to load audio metadata")),URL.revokeObjectURL(n)},s.src=n})}function aA(n,t,o){n.forEach((s,r)=>{if(r==="background"){const h=s.duration||1;h>0&&(s.currentTime=o%h);return}const d=t.find(h=>h.id===r);if(d&&d.type==="video"&&o>=d.startTime&&o<d.endTime){const h=d.playbackRate||1;let y=(o-d.startTime)*h+(d.mediaStartOffset||0);const v=d.mediaDuration||s.duration;v&&v>0&&y>=v&&(y=y%v),s.currentTime=y}})}async function Nr(n,t,o){for(let s=0;s<t;s++)try{await n.deleteFile(`frame_${s.toString().padStart(o,"0")}.jpg`)}catch{}}function rA(){const{toast:n,confirm:t}=jr(),o=Z.useRef(null),s=Z.useRef(null),r=Z.useRef(null),d=Z.useRef(null),h=Z.useRef(null),y=Z.useRef({aborted:!1}),v=Z.useRef(()=>{});Z.useEffect(()=>{ON()},[]);const[m,x]=Z.useState(null),[b,T]=Z.useState(0),[N,_]=Z.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[q,P]=Z.useState([]),[Y,de]=Z.useState([]),[pe,ve]=Z.useState(0),[Le,Be]=Z.useState(!1),[Te,We]=Z.useState("off"),[Ne,Qe]=Z.useState(0),[He,rt]=Z.useState(0),[ft,_t]=Z.useState(1),[Nt,j]=Z.useState(!1),[Ce,oe]=Z.useState(Fn.PLAYER),[yt,vt]=Z.useState(!1),[U,le]=Z.useState(!1),[xe,je]=Z.useState(!1),[st,w]=Z.useState(!1),[A,te]=Z.useState(!1),[ce,Ge]=Z.useState(0),[_e,Ee]=Z.useState("16:9"),[Re,I]=Z.useState("1080p"),[ne,ge]=Z.useState("default"),[Oe,ke]=Z.useState(null),[Xe,H]=Z.useState(null),[ae,ue]=Z.useState(null),[Me,ye]=Z.useState("auto"),[me,E]=Z.useState(30),[D,O]=Z.useState("med"),[R,ee]=Z.useState("mediarecorder"),[L,re]=Z.useState("h264"),[se,fe]=Z.useState(""),[G,Je]=Z.useState(!1),[Ke,Ue]=Z.useState(!1),[M,Ze]=Z.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"preset",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",lyricLineHeight:1.2,useRealColorMedia:!1,channelInfoFontWeight:"bold",channelInfoFontStyle:"normal",infoFontWeight:"bold",infoFontStyle:"normal"}),Dt=Z.useRef(M);Z.useEffect(()=>{Dt.current=M},[M]);const Yt=Z.useRef(null),ct=Z.useRef(null),ze=M.backgroundBlurStrength>0,xt=Z.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter($=>MediaRecorder.isTypeSupported($.value)),[]),[Fe,Pe]=Z.useState([]),[bt,St]=Z.useState(-1),[lt,Gt]=Z.useState(!1),yn=()=>{const k=Re==="1080p";switch(_e){case"9:16":return k?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return k?{w:1080,h:1440}:{w:720,h:960};case"4:3":return k?{w:1440,h:1080}:{w:960,h:720};case"1:1":return k?{w:1080,h:1080}:{w:720,h:720};case"1:2":return k?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return k?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return k?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return k?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return k?{w:1080,h:1350}:{w:720,h:900};case"20:9":return k?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return k?{w:2560,h:1080}:{w:1720,h:720};default:return k?{w:1920,h:1080}:{w:1280,h:720}}},{w:$n,h:qi}=yn(),[ci,go]=Z.useState(!0),[$o,Wn]=Z.useState(!0),[qe,ht]=Z.useState(!1),Rt=Z.useMemo(()=>{const k=M.visualTransitionType||"none",$=M.visualTransitionDuration||1;return Y.filter(W=>W.type==="audio"?!1:Ne>=W.startTime&&Ne<W.endTime||k==="crossfade"&&Ne>=W.endTime&&Ne<W.endTime+$).sort((W,Se)=>{const Ve=(W.layer||0)-(Se.layer||0);return Ve!==0?Ve:W.startTime-Se.startTime})},[Y,Ne,M.visualTransitionType,M.visualTransitionDuration]),Pn=Y.filter(k=>k.type==="audio"&&Ne>=k.startTime&&Ne<k.endTime),Lt=Z.useMemo(()=>pe===0?q:q.map(k=>({...k,time:k.time+pe,endTime:k.endTime!==void 0?k.endTime+pe:void 0})),[q,pe]),an=Lt.findIndex((k,$)=>{if(k.endTime!==void 0)return Ne>=k.time&&Ne<k.endTime;const Ie=Lt[$+1];return Ne>=k.time&&(!Ie||Ne<Ie.time)}),Yo=k=>{const $=k.target.files?.[0];if($){const Ie=URL.createObjectURL($);x(Ie);const W={title:$.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};_(W),$.type.startsWith("audio/")?ad(()=>import("./jsmediatags.min-DJupGrYy.js").then(Se=>Se.j),[]).then(Se=>{Se.read($,{onSuccess:Ve=>{const{title:nt,artist:ut,picture:mt}=Ve.tags;let Rn=null;if(mt){const{data:on,format:De}=mt;let Pt="";for(let Kt=0;Kt<on.length;Kt++)Pt+=String.fromCharCode(on[Kt]);Rn=`data:${De};base64,${window.btoa(Pt)}`}_({title:nt||W.title,artist:ut||W.artist,coverUrl:Rn||null})},onError:Ve=>{console.log("Error reading tags:",Ve)}})}):$.type.startsWith("video/")&&(w(!1),_({...W,coverUrl:Ie,backgroundType:"video"})),ve(0),Be(!1),Qe(0),St(-1),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}k.target.value=""},Fi=k=>{const $=k.target.files?.[0];if($){const Ie=URL.createObjectURL($),W=$.type.startsWith("video/");W&&w(!1),_(Se=>({...Se,coverUrl:Ie,backgroundType:W?"video":"image"}))}k.target.value=""},yo=async k=>{const $=k.target.files?.[0];if($)try{const Ie=await $.text(),W=$.name.split(".").pop()?.toLowerCase();let Se=[];W==="lrc"?Se=is(Ie):W==="srt"?Se=os(Ie):W==="ttml"||W==="xml"?Se=ca(Ie):W==="vtt"&&(Se=ua(Ie)),Se.some(Ve=>Ve.words&&Ve.words.length>0)&&(Ze(Ve=>({...Ve,highlightEffect:"karaoke"})),n.success(`${W?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),P(Se)}catch(Ie){console.error("Failed to parse lyrics:",Ie),n.error("Failed to parse lyric file.")}k.target.value=""};Z.useEffect(()=>{if(bt!==-1&&Fe[bt]){const k=Fe[bt];P(k.parsedLyrics||[])}},[Fe,bt]);const $i=async k=>{const $=k.target.files?.[0];if($){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Ie=URL.createObjectURL($),W=$.name.replace(/\.[^/.]+$/,""),Se="CustomFont",Ve=new FontFace(Se,`url(${Ie})`);await Ve.load(),document.fonts.add(Ve),ke(W),Ze(nt=>({...nt,fontFamily:Se})),n.success(`Loaded font: ${W}`)}catch(Ie){console.error("Failed to load font:",Ie),n.error("Failed to load font file.")}}k.target.value=""},vo=async k=>{const $=k.target.files?.[0];if($){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Ie=URL.createObjectURL($),W=$.name.replace(/\.[^/.]+$/,""),Se="ChannelFont",Ve=new FontFace(Se,`url(${Ie})`);await Ve.load(),document.fonts.add(Ve),H(W),Ze(nt=>({...nt,channelInfoFontFamily:Se})),n.success(`Loaded Channel font: ${W}`)}catch(Ie){console.error("Failed to load font:",Ie),n.error("Failed to load channel font file.")}}k.target.value=""},Jo=async k=>{const $=k.target.files?.[0];if($){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Ie=URL.createObjectURL($),W=$.name.replace(/\.[^/.]+$/,""),Se="InfoFont",Ve=new FontFace(Se,`url(${Ie})`);await Ve.load(),document.fonts.add(Ve),ue(W),Ze(nt=>({...nt,infoFontFamily:Se})),n.success(`Loaded Info font: ${W}`)}catch(Ie){console.error("Failed to load font:",Ie),n.error("Failed to load info font file.")}}k.target.value=""},Zn=Z.useCallback(async(k,$=!0,Ie)=>{const W=Ie||Fe;if(k<0||k>=W.length)return;const Se=W[k],Ve=URL.createObjectURL(Se.audioFile);if(x(Ve),_({title:Se.metadata.title,artist:Se.metadata.artist,coverUrl:Se.metadata.coverUrl||null,backgroundType:Se.metadata.backgroundType||"image"}),P([]),Se.parsedLyrics&&Se.parsedLyrics.length>0)P(Se.parsedLyrics);else if(Se.lyricFile)try{const nt=await Se.lyricFile.text(),ut=Se.lyricFile.name.split(".").pop()?.toLowerCase();let mt=[];ut==="lrc"?mt=is(nt):ut==="srt"?mt=os(nt):ut==="ttml"||ut==="xml"?mt=ca(nt):ut==="vtt"&&(mt=ua(nt)),P(mt)}catch(nt){console.error("Failed to load lyrics",nt)}ve(0),St(k),r.current&&(r.current.scrollTop=0),$?setTimeout(()=>{o.current&&(o.current.play().catch(nt=>console.log("Autoplay failed",nt)),Be(!0))},100):(Be(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[Fe]),dn=Z.useCallback(()=>{if(Fe.length===0)return;const k=(bt+1)%Fe.length;Zn(k)},[Fe,bt,Zn]),ml=Z.useCallback(()=>{if(Fe.length===0)return;const k=(bt-1+Fe.length)%Fe.length;Zn(k)},[Fe,bt,Zn]),gl=()=>{o.current&&(Le?(o.current.pause(),Be(!1)):!m&&Fe.length>0?Zn(0):(o.current.play().catch(console.error),Be(!0)))},Hn=Z.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,Be(!1),Qe(0))},[]),Yi=()=>{We(k=>k==="off"?"one":k==="one"?"all":k==="all"?"all_repeat":"off")},fa=()=>{document.fullscreenElement?(document.exitFullscreen(),vt(!1)):(s.current?.requestFullscreen(),vt(!0))},us=k=>{if(k&&k.target.closest(".no-minimal-mode-toggle"))return;const $=!qe;ht($),$&&je(!0),n.success(`Minimal Mode: ${$?"On":"Off"}`,{id:"minimal-mode"})},pa=()=>{o.current&&(Qe(o.current.currentTime),A&&Ge(o.current.currentTime/He*100))},Xr=()=>{o.current&&rt(o.current.duration)},yl=k=>{const $=parseFloat(k.target.value);o.current&&(o.current.currentTime=$,Qe($))},Ko=k=>{if(!Yt.current||A||!He)return;const $=Yt.current.getBoundingClientRect(),Se=Math.max(0,Math.min(k-$.left,$.width))/$.width*He;o.current&&(o.current.currentTime=Se,Qe(Se))},Ri=k=>{const $=parseFloat(k.target.value);_t($),o.current&&(o.current.volume=$),j($===0)},jn=k=>{if(!ct.current)return;const $=ct.current.getBoundingClientRect(),W=Math.max(0,Math.min(k-$.left,$.width))/$.width;_t(W),o.current&&(o.current.volume=W),j(W===0)},ha=async()=>{if(!o.current||!d.current)return;const k=M.renderMode==="playlist"&&Fe.length>0,$=[];if(k)for(const Ae of Fe){let tt=[];if(Ae.parsedLyrics&&Ae.parsedLyrics.length>0)tt=Ae.parsedLyrics;else if(Ae.lyricFile)try{const Ye=await Ae.lyricFile.text(),fn=Ae.lyricFile.name.split(".").pop()?.toLowerCase();fn==="lrc"?tt=is(Ye):fn==="srt"?tt=os(Ye):fn==="ttml"||fn==="xml"?tt=ca(Ye):fn==="vtt"&&(tt=ua(Ye))}catch(Ye){console.error("Failed to parse lyrics for playlist item",Ye)}const kt=URL.createObjectURL(Ae.audioFile);$.push({audioSrc:kt,lyrics:tt,metadata:Ae.metadata,isFileSource:!0})}else{if(!m)return;$.push({audioSrc:m,lyrics:Lt,metadata:N,isFileSource:!1})}if($.length===0)return;const Ie=k?`Start rendering ALL ${$.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${_e} (${Re}) video? This will play the song from start to finish.`;if(!await t(`${Ie} Please do not switch tabs during rendering.`,"Start Rendering?")){k&&$.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc));return}Je(!1),te(!0),Ge(0);const Se={aborted:!1};y.current=Se,Hn(),We("off"),Qo.current&&clearTimeout(Qo.current),le(!1),je(!0),di.current&&di.current.pause();const Ve=o.current,nt=ne,ut=new Map,mt=new Map,Rn=new Map,on=[],De=(Ae,tt)=>new Promise(kt=>{const Ye=new Image;Ye.crossOrigin="anonymous",Ye.onload=()=>{ut.set(Ae,Ye),kt()},Ye.onerror=()=>kt(),Ye.src=tt}),Pt=(Ae,tt)=>new Promise(kt=>{const Ye=document.createElement("video");Ye.crossOrigin="anonymous",Ye.muted=!0,Ye.playsInline=!0,Ye.preload="auto";let fn=!1;const qt=()=>{fn||(fn=!0,mt.set(Ae,Ye),kt())};Ye.oncanplay=()=>{fn||(Ye.currentTime=.001)},Ye.onseeked=()=>qt(),Ye.onerror=()=>{console.warn("Failed to load video:",tt),qt()},setTimeout(()=>qt(),5e3),Ye.src=tt,Ye.load()}),Kt=(Ae,tt)=>new Promise(kt=>{const Ye=document.createElement("audio");Ye.crossOrigin="anonymous",Ye.onloadedmetadata=()=>{Rn.set(Ae,Ye),kt()},Ye.onerror=()=>kt(),Ye.src=tt});if(Y.forEach(Ae=>{Ae.type==="video"?on.push(Pt(Ae.id,Ae.url)):Ae.type==="audio"||Ae.type==="audio"?on.push(Kt(Ae.id,Ae.url)):on.push(De(Ae.id,Ae.url))}),M.showChannelInfo&&(M.channelInfoImage&&on.push(De("__channel_info__",M.channelInfoImage)),M.channelInfoText)){const Ae=M.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(Ae))try{const tt=document.createElement("div");tt.style.position="absolute",tt.style.visibility="hidden",tt.style.whiteSpace="nowrap",tt.style.fontFamily="sans-serif",tt.style.fontWeight="bold",tt.style.fontSize="100px",tt.style.display="inline-flex",tt.style.alignItems="center",tt.style.gap="0.25em",tt.innerHTML=Ae;const kt=tt.getElementsByTagName("svg");for(let In=0;In<kt.length;In++)kt[In].style.width="auto",kt[In].style.height="1.5em";document.body.appendChild(tt);const{width:Ye,height:fn}=tt.getBoundingClientRect();document.body.removeChild(tt);const qt=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${Ye}" height="${fn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${Ae}
                  </div>
                </foreignObject>
              </svg>
            `,vi=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(qt).replace(/%([0-9A-F]{2})/g,function(bo,bl){return String.fromCharCode(parseInt(bl,16))}))}`;on.push(De("__channel_info_text_svg__",vi))}catch(tt){console.warn("Failed to process SVG channel info",tt)}}if(M.backgroundSource==="image"&&M.backgroundImage&&on.push(De("__custom_bg__",M.backgroundImage)),await Promise.all(on),Se.aborted){te(!1),k&&$.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc));return}const kn=d.current,B=kn.getContext("2d"),at=kn.captureStream(me);let At=null;try{if(Ve.captureStream)At=Ve.captureStream();else if(Ve.mozCaptureStream)At=Ve.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),te(!1);return}const pt=new(window.AudioContext||window.webkitAudioContext),Zt=pt.createMediaStreamDestination();pt.createMediaElementSource(Ve).connect(Zt),mt.forEach(Ae=>{Ae.muted=!0,pt.createMediaElementSource(Ae).connect(Zt)}),Rn.forEach(Ae=>{Ae.muted=!0,pt.createMediaElementSource(Ae).connect(Zt)}),Zt.stream.getAudioTracks().length>0?at.addTrack(Zt.stream.getAudioTracks()[0]):At&&at.addTrack(At.getAudioTracks()[0]);const pi=(()=>{if(Me!=="auto"&&MediaRecorder.isTypeSupported(Me))return Me;const Ae=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const tt of Ae)if(MediaRecorder.isTypeSupported(tt))return tt;return"video/webm"})(),hi=Re==="1080p"?8e6:4e6,Pi=me>30?1.5:1,xo=D==="high"?2:D==="low"?.5:1,hn=hi*Pi*xo,Ot=new MediaRecorder(at,{mimeType:pi,videoBitsPerSecond:hn});h.current=Ot;const ei=[];Ot.ondataavailable=Ae=>{Ae.data.size>0&&ei.push(Ae.data)},Ot.onstop=()=>{if(Se.aborted)console.log("Render aborted");else{const Ae=new Blob(ei,{type:pi}),tt=kt=>{const Ye=URL.createObjectURL(kt),fn=document.createElement("a");fn.href=Ye;const qt=pi.includes("mp4")?"mp4":"webm",bn=k?`Playlist_${$.length}_Songs_${_e.replace(":","-")}.${qt}`:`${$[0].metadata.title||"video"}_${_e.replace(":","-")}.${qt}`;fn.download=bn,document.body.appendChild(fn),fn.click(),document.body.removeChild(fn),URL.revokeObjectURL(Ye)};pi.includes("webm"),tt(Ae)}pt.close(),te(!1),T(Ae=>Ae+1),k&&$.forEach(Ae=>Ae.isFileSource&&URL.revokeObjectURL(Ae.audioSrc))};let X=0,mi=[],wt=N,_n=0,gi=0;const yi=1e3/me,Hi=Ae=>{if(Se.aborted)return;(Ot.state==="recording"||Ot.state==="paused")&&requestAnimationFrame(Hi);const tt=Ae-gi;if(tt<yi)return;gi=Ae-tt%yi;const kt=Ve.currentTime;_n>0&&Ge(kt/_n*100),mt.forEach((Ye,fn)=>{if(fn==="background"){const qt=Ye.duration||1,bn=kt%qt;let vi=Math.abs(Ye.currentTime-bn);(bn<Ye.currentTime&&Ye.currentTime-bn>qt/2||vi>.5)&&(Ye.currentTime=bn),Ye.paused&&Ye.play().catch(()=>{})}else{const qt=Y.find(bn=>bn.id===fn);if(qt)if(kt>=qt.startTime&&kt<qt.endTime){const bn=qt.playbackRate||1;let vi=(kt-qt.startTime)*bn+(qt.mediaStartOffset||0);const In=qt.mediaDuration||Ye.duration;In&&In>0&&vi>=In&&(vi=vi%In),Math.abs(Ye.playbackRate-bn)>.01&&(Ye.playbackRate=bn),Math.abs(Ye.currentTime-vi)>.5&&(Ye.currentTime=vi);const bo=qt.isMuted!==!1;Ye.muted!==bo&&(Ye.muted=bo),Ye.paused&&Ye.play().catch(()=>{})}else Ye.paused||Ye.pause(),Ye.muted||(Ye.muted=!0)}}),Rn.forEach((Ye,fn)=>{const qt=Y.find(bn=>bn.id===fn);if(qt){const bn=qt.layer||0;if(M.layerVisibility?.audio?.[bn]!==!1&&kt>=qt.startTime&&kt<qt.endTime){const In=qt.playbackRate||1,bo=(kt-qt.startTime)*In+(qt.mediaStartOffset||0);Math.abs(Ye.playbackRate-In)>.01&&(Ye.playbackRate=In),Math.abs(Ye.currentTime-bo)>.5&&(Ye.currentTime=bo);const bl=qt.isMuted===!0;Ye.muted!==bl&&(Ye.muted=bl),Ye.paused&&Ye.play().catch(()=>{})}else Ye.paused||Ye.pause(),Ye.muted||(Ye.muted=!0)}}),B&&Ty(B,kn.width,kn.height,kt,mi,wt,Y,ut,mt,nt,Oe,M.fontSizeScale,M.backgroundBlurStrength>0,_n,M,M.renderMode==="current"||X===$.length-1,M.renderMode==="current"||X===0)},Xi=async()=>{if(Se.aborted){Ot.stop();return}if(X>=$.length){await new Promise(tt=>setTimeout(tt,500)),Ot.stop();return}const Ae=$[X];Ot.state==="recording"&&Ot.pause(),mi=Ae.lyrics,wt=Ae.metadata,_n=0,Ae.metadata.coverUrl&&(Ae.metadata.backgroundType==="video"?await Pt("background",Ae.metadata.coverUrl):await De("cover",Ae.metadata.coverUrl)),Ve.pause(),Ve.src=Ae.audioSrc,Ve.load(),await new Promise(tt=>{const kt=()=>{Ve.removeEventListener("canplay",kt),tt()};Ve.addEventListener("canplay",kt),Ve.readyState>=3&&kt()}),_n=Ve.duration,Ot.state==="inactive"?(pt.state==="suspended"&&await pt.resume(),Ot.start(),requestAnimationFrame(Hi)):Ot.state==="paused"&&Ot.resume(),await Ve.play(),await new Promise(tt=>{const kt=()=>{Ve.removeEventListener("ended",kt),tt()};Ve.addEventListener("ended",kt)}),X++,Xi()};await Xi()},Qr=async()=>{if(!d.current)return;const k=M.renderMode==="playlist"&&Fe.length>0;let $=null,Ie=Lt,W=N;if(k&&Fe.length>0)$=Fe[0].audioFile,Ie=Fe[0].parsedLyrics||[],W=Fe[0].metadata;else if(Fe.length>0&&bt>=0)$=Fe[bt].audioFile;else if(m)try{$=await(await fetch(m)).blob()}catch(B){console.error("FFmpeg: Failed to fetch audio blob",B),n.error("Failed to load audio source for rendering.");return}else{n.error("Please load an audio file first.");return}if(!$){n.error("No audio file available for FFmpeg export.");return}const Se=`Start FFmpeg rendering at ${Re} (${_e})? This uses frame-by-frame capture for higher quality. Rendering may take several minutes.`;if(!await t(Se,"Start FFmpeg Rendering?"))return;Je(!1),te(!0),Ge(0),fe("Initializing...");const nt={aborted:!1};y.current=nt,Hn();const ut=d.current,{w:mt,h:Rn}=yn();ut.width=mt,ut.height=Rn;const on=new Map,De=new Map,Pt=[],Kt=(B,at)=>new Promise(At=>{const pt=new Image;pt.crossOrigin="anonymous",pt.onload=()=>{on.set(B,pt),At()},pt.onerror=()=>At(),pt.src=at}),kn=(B,at)=>new Promise(At=>{const pt=document.createElement("video");pt.crossOrigin="anonymous",pt.muted=!0,pt.playsInline=!0,pt.preload="auto";let Zt=!1;const sn=()=>{Zt||(Zt=!0,De.set(B,pt),At())};pt.oncanplay=()=>{Zt||(pt.currentTime=.001)},pt.onseeked=()=>sn(),pt.onerror=()=>{console.warn("Failed to load video:",at),sn()},setTimeout(()=>sn(),5e3),pt.src=at,pt.load()});if(Y.forEach(B=>{B.type==="video"?Pt.push(kn(B.id,B.url)):B.type!=="audio"&&Pt.push(Kt(B.id,B.url))}),W.coverUrl&&(W.backgroundType==="video"?Pt.push(kn("background",W.coverUrl)):Pt.push(Kt("cover",W.coverUrl))),M.backgroundSource==="image"&&M.backgroundImage&&Pt.push(Kt("__custom_bg__",M.backgroundImage)),M.showChannelInfo&&M.channelInfoImage&&Pt.push(Kt("__channel_info__",M.channelInfoImage)),await Promise.all(Pt),nt.aborted){te(!1);return}try{const B=await lA({canvas:ut,audioFile:$,lyrics:Ie,metadata:W,visualSlides:Y,imageMap:on,videoMap:De,preset:ne,customFontName:Oe,renderConfig:M,resolution:Re,aspectRatio:_e,fps:me,quality:D,codec:L,onProgress:(Zt,sn)=>{Ge(Zt),fe(sn)},onLog:Zt=>console.log(Zt),abortSignal:nt,isFirstSong:!0,isLastSong:!0}),at=`${W.title||"video"}_${_e.replace(":","-")}_ffmpeg.${B.format}`,At=URL.createObjectURL(B.blob),pt=document.createElement("a");pt.href=At,pt.download=at,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(At),n.success(`Video exported successfully! (${B.format.toUpperCase()}, ${Math.round(B.duration)}s)`)}catch(B){B.message!=="Render aborted"&&(console.error("FFmpeg render failed:",B),n.error(`FFmpeg render failed: ${B.message}`))}finally{te(!1),fe("")}},Xo=async()=>{R==="ffmpeg"?await Qr():await ha()};Z.useEffect(()=>{v.current=Xo});const vl=Z.useCallback(()=>{y.current&&(y.current.aborted=!0),h.current&&h.current.state==="recording"?h.current.stop():te(!1),Hn()},[Hn]),Ji=Z.useCallback(()=>{if(r.current){const k=o.current?.currentTime||0;if(an===-1&&k<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(an!==-1){const $=r.current.querySelector('[data-lyric-active="true"]');if($){const Ie=r.current;if($.offsetHeight===0)return;const W=$.offsetTop,Se=$.offsetHeight,Ve=Ie.clientHeight;let nt=.5;M.contentPosition==="top"&&(nt=.25),M.contentPosition==="bottom"&&(nt=.75);const ut=W-Ve*nt+Se/2;Ie.scrollTo({top:ut,behavior:"smooth"})}}}},[an,ne,M.contentPosition]);Z.useEffect(()=>{Ji()},[Ji]),Z.useEffect(()=>{const k=setTimeout(()=>{Ji()},550);return()=>clearTimeout(k)},[U,xe,ci,$o,Ce,lt,Ji]);const Qo=Z.useRef(null),Mn=Z.useCallback(()=>{if(le(!1),Qo.current&&clearTimeout(Qo.current),!A){const k=window.setTimeout(()=>{le(!0)},3e3);Qo.current=k}},[A]),ds=()=>{Mn()},fs=Z.useRef(0),ps=k=>{Mn();const $=Date.now();if($-fs.current<300){if(k.target.closest(".no-minimal-mode-toggle"))return;us(k)}fs.current=$};Z.useEffect(()=>{const k=$=>{const Ie=$.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Ie)||Mn(),!($.target instanceof HTMLInputElement||$.target instanceof HTMLTextAreaElement)){if(A){Ie==="escape"&&vl();return}switch($.key.toLowerCase()){case" ":case"k":$.preventDefault(),gl(),n.success(Le?"Paused":"Playing",{id:"play-pause"});break;case"s":$.preventDefault(),Hn(),n.success("Stopped",{id:"stop"});break;case"n":$.preventDefault(),dn(),n.success("Next Song",{id:"next-song"});break;case"o":$.preventDefault();const Se=!qe;ht(Se),Se&&je(!0),n.success(`Minimal Mode: ${Se?"On":"Off"}`,{id:"minimal-mode"});break;case"b":$.preventDefault(),ml(),n.success("Previous Song",{id:"prev-song"});break;case"r":$.preventDefault(),Yi();const Ve=Te==="off"?"one":Te==="one"?"all":Te==="all"?"all_repeat":"off",nt={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${nt[Ve]}`,{id:"repeat"});break;case"l":$.preventDefault();const ut=!lt;Gt(ut),ut&&oe(Fn.PLAYER);break;case"h":$.preventDefault();const mt=!xe;je(mt),n.success(mt?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"y":$.preventDefault(),Ue(Ae=>!Ae);break;case"g":$.preventDefault();const Rn=Ad.flatMap(Ae=>Ae.options.map(tt=>tt.value)),on=Dt.current.lyricDisplayMode,Pt=(Rn.indexOf(on)+1)%Rn.length,Kt=Rn[Pt];Ze(Ae=>({...Ae,lyricDisplayMode:Kt})),n.success(`Lyric Mode: ${Kt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":$.preventDefault();const kn=Sy,B=Dt.current.textCase,At=(kn.indexOf(B)+1)%kn.length,pt=kn[At];Ze(Ae=>({...Ae,textCase:pt})),n.success(`Text Case: ${pt}`,{id:"text-case"});break;case"f":fa();break;case"i":go(Ae=>!Ae);break;case"p":Wn(Ae=>!Ae);break;case"d":$.preventDefault(),Je(Ae=>!Ae);break;case"t":lt?(Gt(!1),oe(Fn.EDITOR)):oe(Ae=>Ae===Fn.PLAYER?Fn.EDITOR:Fn.PLAYER);break;case"m":$.preventDefault();const Zt=!Nt;j(Zt),n.success(Zt?"Muted":"Unmuted",{id:"mute"});break;case"x":$.preventDefault();const sn=Dt.current.highlightEffect==="none";Ze(Ae=>({...Ae,highlightEffect:Ae.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${sn?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":$.preventDefault();const fi=Nd.flatMap(Ae=>Ae.options.map(tt=>tt.value)),pi=Dt.current.highlightEffect||"none",hi=fi.indexOf(pi),xo=((hi===-1?0:hi)+1)%fi.length,hn=fi[xo],Ot=kr(hn);Ze(Ae=>{const tt={...Ae,highlightEffect:hn};return tt.useCustomHighlightColors=!1,Ot&&(tt.highlightColor=Ot.color,tt.highlightBackground=Ot.bg),tt}),n.success(`Effect: ${hn.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":$.preventDefault();const X=(id.indexOf(ne)+1)%id.length,mi=id[X];ge(mi);const wt=Br[mi];if(wt){const Ae={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};Ze(tt=>({...tt,...Ae,...wt}))}let _n=mi;for(const Ae of jd){const tt=Ae.options.find(kt=>kt.value===mi);if(tt){_n=tt.label;break}}n.success(`Preset: ${_n}`,{id:"preset"});break;case"arrowleft":if($.preventDefault(),o.current){const Ae=Math.max(0,o.current.currentTime-5);o.current.currentTime=Ae,Qe(Ae)}break;case"arrowright":if($.preventDefault(),o.current){const Ae=Math.min(He,o.current.currentTime+5);o.current.currentTime=Ae,Qe(Ae)}break;case"arrowup":$.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":$.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":$.preventDefault();const gi=Dt.current.fontSizeScale,yi=Math.min(gi+.1,3);Ze(Ae=>({...Ae,fontSizeScale:yi})),n.success(`Font Size: ${(yi*100).toFixed(0)}%`,{id:"font-size"});break;case"-":$.preventDefault();const Hi=Dt.current.fontSizeScale,Xi=Math.max(Hi-.1,.1);Ze(Ae=>({...Ae,fontSizeScale:Xi})),n.success(`Font Size: ${(Xi*100).toFixed(0)}%`,{id:"font-size"});break;case"e":($.ctrlKey||$.metaKey)&&$.shiftKey&&($.preventDefault(),v.current());break}}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[Le,Te,Ce,A,Mn,vl,lt,dn,ml,n,qe,ne,xe,Nt]),Z.useEffect(()=>{let k,$=0;const Ie=1e3/30,W=Se=>{if(o.current&&!o.current.paused&&Le){k=requestAnimationFrame(W);const Ve=Se-$;Ve>Ie&&($=Se-Ve%Ie,Qe(o.current.currentTime))}};return Le&&!A&&(k=requestAnimationFrame(W)),()=>{k&&cancelAnimationFrame(k)}},[Le,A]);const ui=ci&&(!U||xe)&&!A,Ki=$o&&(!U||xe)&&!A&&!qe,xl=Rt.length>0?Rt[0]:null;xl?`${xl.url}`:N.coverUrl&&`${N.coverUrl}`;const di=Z.useRef(null);return Z.useEffect(()=>{if(Rt.forEach(k=>{const $=k.layer||0;if(M.layerVisibility?.visual?.[$]!==!1&&k.type==="video"){const Ie=document.getElementById(`video-preview-${k.id}`);if(Ie)if(A)Ie.paused||Ie.pause();else{const W=k.playbackRate||1;let Se=(Ne-k.startTime)*W+(k.mediaStartOffset||0);const Ve=k.mediaDuration||Ie.duration;Ve&&Ve>0&&Se>=Ve&&(Se=Se%Ve),Math.abs(Ie.playbackRate-W)>.01&&(Ie.playbackRate=W),Math.abs(Ie.currentTime-Se)>.2&&(Ie.currentTime=Se);const nt=k.isMuted!==!1;Ie.muted!==nt&&(Ie.muted=nt);const ut=k.volume!==void 0?k.volume:1;Math.abs(Ie.volume-ut)>.01&&(Ie.volume=ut),Le&&Ie.paused?Ie.play().catch(()=>{}):!Le&&!Ie.paused&&Ie.pause()}}}),N.backgroundType==="video"&&di.current){const k=di.current;if(A)k.paused||k.pause();else{const $=k.duration||1,Ie=Ne%$;Math.abs(k.currentTime-Ie)>.1&&(k.currentTime=Ie),Le&&k.paused?k.play().catch(()=>{}):!Le&&!k.paused&&k.pause()}}Pn.forEach(k=>{const $=document.getElementById(`audio-preview-${k.id}`);if($){const Ie=k.playbackRate||1,W=(Ne-k.startTime)*Ie+(k.mediaStartOffset||0);Math.abs($.playbackRate-Ie)>.01&&($.playbackRate=Ie),Math.abs($.currentTime-W)>.2&&($.currentTime=W);const Se=k.isMuted===!0;$.muted!==Se&&($.muted=Se);const Ve=k.volume!==void 0?k.volume:1;Math.abs($.volume-Ve)>.01&&($.volume=Ve),Le&&$.paused?$.play().catch(()=>{}):!Le&&!$.paused&&$.pause()}})},[Ne,Le,Rt,N,Pn,M.layerVisibility]),u.jsxs("div",{ref:s,onMouseMove:ds,onTouchStart:ps,onDoubleClick:us,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${U&&!xe?"cursor-none":""}`,children:[u.jsx("audio",{ref:o,src:m||void 0,loop:Te==="one",muted:Nt,onTimeUpdate:pa,onLoadedMetadata:Xr,onEnded:()=>{if(A)return;const k=Fe.length>0;Te==="one"||(Te==="all_repeat"?k?dn():o.current?.play():Te==="all"&&k&&bt<Fe.length-1?dn():Be(!1))},crossOrigin:"anonymous"},b),Pn.map(k=>u.jsx("audio",{id:`audio-preview-${k.id}`,src:k.url,className:"hidden",playsInline:!0},k.id)),u.jsx("canvas",{ref:d,width:$n,height:qi,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),u.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[M.backgroundSource==="color"&&u.jsx("div",{className:"absolute inset-0",style:{backgroundColor:M.backgroundColor}}),M.backgroundSource==="gradient"&&u.jsx("div",{className:"absolute inset-0",style:{background:M.backgroundGradient}}),M.backgroundSource==="image"&&M.backgroundImage&&u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${M.backgroundImage})`}}),M.backgroundSource==="smart-gradient"&&u.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const k=M.backgroundColor||"#312e81",$=parseInt(k.slice(1,3),16),Ie=parseInt(k.slice(3,5),16),W=parseInt(k.slice(5,7),16),Se=`${$},${Ie},${W}`,Ve=`${Math.floor($*.6)},${Math.floor(Ie*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${Se}), rgb(${Ve}) 50%, #000000)`})()}}),(M.backgroundSource==="timeline"||M.backgroundSource==="custom")&&N.coverUrl&&Y.length===0&&(N.backgroundType==="video"?u.jsx("video",{ref:di,src:N.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${st?"opacity-60":"opacity-0"}`,muted:!0,loop:!A,playsInline:!0,preload:"auto",onLoadedData:()=>w(!0)}):u.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${M.backgroundSource==="custom"||Rt.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${N.coverUrl})`}})),M.backgroundSource==="color"&&u.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:M.backgroundColor}}),M.backgroundSource==="gradient"&&u.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:M.backgroundGradient}}),M.backgroundSource==="smart-gradient"&&u.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const k=M.backgroundColor||"#312e81",$=parseInt(k.slice(1,3),16),Ie=parseInt(k.slice(3,5),16),W=parseInt(k.slice(5,7),16),Se=`${$},${Ie},${W}`,Ve=`${Math.floor($*.6)},${Math.floor(Ie*.6)},${Math.floor(W*.6)}`;return`linear-gradient(to bottom right, rgb(${Se}), rgb(${Ve}) 50%, #000000)`})()}}),!N.coverUrl&&Rt.length===0&&(M.backgroundSource==="timeline"||M.backgroundSource==="custom")&&Y.length===0&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),u.jsx("div",{className:`absolute inset-0 pointer-events-none ${M.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:M.backgroundSource==="timeline"&&Rt.map(k=>{const $=k.layer||0;if(M.layerVisibility?.visual?.[$]===!1)return null;const Ie=M.visualTransitionType||"none",W=M.visualTransitionDuration||1;let Se=1;if(Ie!=="none"){if(Ne<k.startTime+W){const Ve=(Ne-k.startTime)/W;Se=Math.max(0,Math.min(1,Ve))}if(Ne>=k.endTime){let Ve=!1;if(Ie==="crossfade"&&(Ve=Y.some(nt=>nt.id!==k.id&&(nt.layer||0)===(k.layer||0)&&nt.startTime>=k.endTime-.1&&nt.startTime<k.endTime+.2)),!Ve){const ut=1-(Ne-k.endTime)/W;Se=Math.min(Se,Math.max(0,Math.min(1,ut)))}}else if(Ie==="fade-to-black"&&Ne>k.endTime-W){const Ve=(k.endTime-Ne)/W;Se=Math.min(Se,Math.max(0,Math.min(1,Ve)))}}return u.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:Se},children:k.type==="video"?u.jsx("video",{id:`video-preview-${k.id}`,src:k.url,className:"w-full h-full object-cover",muted:k.isMuted!==!1,playsInline:!0}):u.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${k.url})`}})},k.id)})}),u.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:M.backgroundBlurStrength>0?`blur(${M.backgroundBlurStrength}px)`:ze?"blur(12px)":"none",backgroundColor:M.useRealColorMedia?"transparent":M.backgroundBlurStrength>0||ze?"rgba(0,0,0,0.4)":void 0}}),M.enableGradientOverlay&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),u.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[M.showChannelInfo&&qe&&u.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${M.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${M.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${M.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":M.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":M.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":M.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":M.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${M.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${M.channelInfoSizeScale??1})`,transformOrigin:M.channelInfoPosition?.includes("top")?M.channelInfoPosition?.includes("center")?"top center":M.channelInfoPosition?.includes("left")?"top left":"top right":M.channelInfoPosition?.includes("center")?"bottom center":M.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...M.channelInfoPosition?.includes("center")?M.channelInfoPosition?.includes("top")?{marginTop:`${(M.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(M.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(M.channelInfoMarginScale??1)*1.5}rem`}},children:[M.channelInfoImage&&M.channelInfoStyle!=="minimal"&&u.jsx("img",{src:M.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${M.channelInfoStyle==="circle"?"rounded-full":""}`}),M.channelInfoText&&M.channelInfoStyle!=="logo"&&(()=>{const k=M.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(k)?u.jsx("div",{className:`font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${M.channelInfoStyle==="minimal"||M.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,style:{fontFamily:M.channelInfoFontFamily,color:M.channelInfoFontColor||"white",fontWeight:M.channelInfoFontWeight||"bold",fontStyle:M.channelInfoFontStyle||"normal"},dangerouslySetInnerHTML:{__html:k}}):u.jsx("p",{className:`font-bold drop-shadow-md text-lg 
                    ${M.channelInfoStyle==="minimal"||M.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,style:{fontFamily:M.channelInfoFontFamily,color:M.channelInfoFontColor||"white",fontWeight:M.channelInfoFontWeight||"bold",fontStyle:M.channelInfoFontStyle||"normal"},children:M.channelInfoText})})()]}),qe&&u.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${ui?"opacity-100":"opacity-0"}
              ${M.infoPosition==="top-left"?"top-0 left-0 items-start text-left":M.infoPosition==="top-right"?"top-0 right-0 items-end text-right":M.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":M.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":M.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":M.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${M.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${M.infoSizeScale??1})`,transformOrigin:M.infoPosition?.includes("top")?M.infoPosition?.includes("center")?"top center":M.infoPosition?.includes("right")?"top right":"top left":M.infoPosition?.includes("center")?"bottom center":M.infoPosition?.includes("right")?"bottom right":"bottom left",...M.infoPosition?.includes("center")?M.infoPosition?.includes("top")?{marginTop:`${(M.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(M.infoMarginScale??1)*1.5}rem`}:{margin:`${(M.infoMarginScale??1)*1.5}rem`}},children:u.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${M.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${M.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${M.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${M.infoStyle==="modern"||M.infoStyle==="minimal",""}
            `,children:[u.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!M.showCover||M.infoStyle==="minimal"||M.infoStyle==="modern"?"hidden":"block"}
                ${M.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[N.coverUrl?N.backgroundType==="video"?u.jsx("video",{src:N.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):u.jsx("img",{src:N.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:u.jsx(Wl,{size:24})}),u.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[u.jsx(Oi,{size:20,className:"text-white"}),u.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:Fi})]})]}),u.jsxs("div",{className:`flex flex-col justify-center ${M.infoPosition?.includes("right")?"items-end":M.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[u.jsx("h1",{className:`font-bold drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${M.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${M.infoStyle==="minimal"?"text-sm":M.infoStyle==="modern"||M.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,style:{fontFamily:M.infoFontFamily,color:M.infoFontColor||"white",fontWeight:M.infoFontWeight||"bold",fontStyle:M.infoFontStyle||"normal"},children:N.title}),u.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${M.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:u.jsx("p",{className:`drop-shadow-md
                    ${M.infoStyle==="minimal"?"text-[10px]":M.infoStyle==="modern"||M.infoStyle==="modern_art"?"text-sm font-medium":"text-xs"}
                  `,style:{fontFamily:M.infoFontFamily,color:M.infoFontColor||(M.infoStyle==="minimal"?"#a1a1aa":"#d4d4d8"),fontWeight:M.infoFontWeight||"bold",fontStyle:M.infoFontStyle||"normal"},children:N.artist})})]})]})}),u.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${ui&&!qe?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:u.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[u.jsx("div",{className:"flex gap-4",children:u.jsxs("div",{className:"flex gap-4 items-center",children:[u.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${M.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[N.coverUrl?N.backgroundType==="video"?u.jsx("video",{src:N.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):u.jsx("img",{src:N.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:u.jsx(Wl,{size:24})}),u.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[u.jsx(Oi,{size:20,className:"text-white"}),u.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:Fi})]})]}),u.jsxs("div",{children:[u.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${M.showTitle?"opacity-100":"opacity-0"}`,children:N.title}),u.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${M.showArtist?"opacity-100":"opacity-0"}`,children:u.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:N.artist})})]})]})}),u.jsxs("div",{className:`flex gap-2 flex-wrap ${qe?"hidden":""}`,children:[u.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:u.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),u.jsx("a",{href:"https://ai.studio/apps/drive/11YaG-jtLXb8BnXM3aMfj7wmKIw-S3mt3?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalEditorPlus - Universal Lyrics/Subtitle Editor",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalEditorPlus"}),u.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),u.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),u.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),u.jsx("button",{onClick:()=>je(!xe),className:`p-2 rounded-full transition-colors ${xe?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:xe?u.jsx(oa,{size:20}):u.jsx(ia,{size:20})}),u.jsx("button",{onClick:()=>ht(!qe),className:`p-2 rounded-full transition-colors ${qe?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:qe?u.jsx(aa,{size:20}):u.jsx(k0,{size:20})}),u.jsx("button",{onClick:()=>{const k=!lt;Gt(k),k&&oe(Fn.PLAYER)},className:`p-2 rounded-full transition-colors ${lt?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:u.jsx(Dr,{size:20})}),u.jsx("button",{onClick:()=>{lt&&Gt(!1),oe(Ce===Fn.PLAYER?Fn.EDITOR:Fn.PLAYER)},className:`p-2 rounded-full transition-colors ${Ce===Fn.EDITOR&&!lt?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:u.jsx(Cg,{size:20})}),u.jsx("button",{onMouseDown:k=>{k.stopPropagation(),Je(!G)},className:`p-2 rounded-full transition-colors ${G?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:u.jsx(Ar,{size:20})}),u.jsx("button",{onMouseDown:k=>{k.stopPropagation(),Ue(!Ke)},className:`p-2 rounded-full transition-colors ${Ke?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Keyboard Shortcuts (Y)",children:u.jsx(zr,{size:20})}),u.jsx("button",{onClick:fa,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:yt?u.jsx(k0,{size:20}):u.jsx(aa,{size:20})})]})]})}),u.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${M.contentPosition==="top"?"items-start pt-[10vh]":M.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:q.length>0?u.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${M.textAlign==="left"?"text-left":M.textAlign==="right"?"text-right":"text-center"} ${M.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:(ui||Ki)&&ne!=="subtitle"?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[u.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${M.fontSizeScale}); line-height: calc(1.75rem * ${M.fontSizeScale} * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${M.fontSizeScale}); line-height: calc(1.75rem * ${M.fontSizeScale} * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${M.fontSizeScale}); line-height: calc(2rem * ${M.fontSizeScale} * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${M.fontSizeScale}); line-height: calc(2.25rem * ${M.fontSizeScale} * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${M.fontSizeScale}); line-height: calc(2.5rem * ${M.fontSizeScale} * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${M.fontSizeScale}); line-height: calc(1 * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${M.fontSizeScale}); line-height: calc(1 * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${M.fontSizeScale}); line-height: calc(1 * ${M.lyricLineHeight||1.2}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${M.fontSizeScale}); line-height: calc(1 * ${M.lyricLineHeight||1.2}); }
              `}),u.jsx("div",{className:`transition-all duration-500 ${M.contentPosition==="center"?Ce===Fn.EDITOR||lt?"h-[25vh]":!ui&&!Ki?"h-[50vh]":"h-[40vh]":"h-0"}`}),Lt.map((k,$)=>{const Ie=$===an,W=Ce===Fn.EDITOR||lt,Se=["9:16","3:4","1:1","1:2","2:3"].includes(_e);if(M.lyricDisplayMode!=="all"){if(M.lyricDisplayMode==="active-only"&&$!==an)return u.jsx("p",{className:"hidden"},$);if(M.lyricDisplayMode==="next-only"&&($<an||$>an+1))return u.jsx("p",{className:"hidden"},$);if(M.lyricDisplayMode==="previous-next"&&Math.abs($-an)>1)return u.jsx("p",{className:"hidden"},$)}else if(ne==="none"||ne==="just_video")return u.jsx("p",{className:"hidden"},$);let Ve="",nt="";const ut=M.transitionEffect;let mt="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Ie?ut==="slide"?mt+="translate-y-0 opacity-100 ":ut==="zoom"?mt+="scale-100 opacity-100 ":ut==="float"?mt+="translate-y-0 opacity-100 ":ut==="blur"?mt+="blur-0 opacity-100 ":ut==="fade"?mt+="opacity-100 ":ut==="drop"?mt+="trans-drop-enter opacity-100 ":ut==="lightspeed"?mt+="trans-lightspeed-enter opacity-100 ":ut==="roll"?mt+="trans-roll-enter opacity-100 ":ut==="elastic"?mt+="trans-elastic-enter opacity-100 ":ut==="flip"?mt+="trans-flip-enter opacity-100 ":ut==="rotate-in"?mt+="trans-rotate-in-enter opacity-100 ":ut==="spiral"?mt+="trans-spiral-enter opacity-100 ":ut==="shatter"?mt+="trans-shatter-enter opacity-100 ":mt+="opacity-100 ":(ut==="slide"?mt+="translate-y-4 opacity-0 ":ut==="zoom"?mt+="scale-75 opacity-0 ":ut==="float"?mt+="translate-y-8 opacity-0 ":ut==="blur"?mt+="blur-md opacity-0 ":ut==="fade"?mt+="opacity-50 ":ut==="drop"?mt+="trans-drop-exit opacity-0 ":ut==="roll"?mt+="trans-roll-exit opacity-0 ":mt+="opacity-0 ",ut==="none"&&(mt=mt.replace("opacity-0","opacity-50"))),ne==="large"||ne==="large_upper"){const At=Se?W?"text-4xl":"text-6xl":W?"text-6xl":"text-8xl",pt=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${At} font-black text-white ${ne==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,nt=`${pt} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(ne==="big_center"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} font-black text-white uppercase tracking-tight text-center`,nt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ne==="testing_up"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-white uppercase tracking-tight text-center`,nt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ne==="testing"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-white tracking-tight text-center`,nt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ne==="one_line_up"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-white uppercase tracking-tight text-center`,nt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ne==="one_line"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-white tracking-tight text-center`,nt=`${at} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(ne==="metal"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,nt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ne==="kids"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,nt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ne==="sad"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",at=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ve=`${B} text-zinc-200 tracking-wider text-center drop-shadow-md`,nt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(ne==="romantic"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",at=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ve=`${B} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,nt=`${at} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(ne==="tech"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,nt=`${at} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(ne==="gothic"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-7xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl";Ve=`${B} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,nt=`${at} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(ne==="monospace"){const B=Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",at=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ve=`${B} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,nt=`${at} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(ne==="classic"){const B=Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-6xl",at=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ve=`${B} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,nt=`${at} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(ne==="slideshow"||ne==="just_video")Ve=`${Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,nt="hidden";else if(ne==="subtitle"){Ve=`${Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-4xl"} text-white tracking-wide text-center whitespace-pre-wrap`,nt="hidden";let at="bottom-16";W&&Ki?at="bottom-[560px]":W?at="bottom-[360px]":Ki&&(at="bottom-[280px]"),mt=mt.replace("absolute","").replace("transform",""),mt+=`fixed ${at} left-1/2 -translate-x-1/2 w-full px-8 z-[100] pointer-events-none `}else if(ne==="custom"){const B=Se?W?"text-4xl":"text-5xl":W?"text-6xl":"text-8xl",at=Se?W?"text-xl":"text-2xl":W?"text-2xl":"text-3xl",At=M.textAlign==="center"?"text-center":M.textAlign==="right"?"text-right":"text-left";Ve=`${B} tracking-tight ${At}`,nt=`${at} opacity-40 hover:opacity-100 ${At}`}else{const B=Se?W?"text-2xl":"text-3xl":W?"text-3xl":"text-5xl",at=Se?W?"text-lg":"text-xl":W?"text-xl":"text-2xl";Ve=`${B} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,nt=`${at} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const on=(M.lyricStyleTarget||"active-only")==="all"||Ie;let De={color:M.fontColor,fontWeight:on?M.fontWeight:void 0,fontStyle:on?M.fontStyle:void 0,textDecoration:on?M.textDecoration:void 0,fontFamily:M.fontFamily==="CustomFont"?"CustomFont, sans-serif":M.fontFamily};if((ne==="custom"||ne==="default")&&Ie&&M.textEffect!=="none"){const B=M.textEffect;B==="glow"?De.textShadow=`0 0 10px ${M.fontColor}, 0 0 20px ${M.fontColor}`:B==="neon"?De.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${M.fontColor}, 0 0 40px ${M.fontColor}, 0 0 80px ${M.fontColor}`:B==="neon-multi"?De.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":B==="shadow"?De.textShadow="3px 3px 6px rgba(0,0,0,0.7)":B==="outline"?De.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":B==="3d"?De.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":B==="emboss"?(De.color="#ebebeb",De.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):B==="gold"?(De.background="linear-gradient(to bottom, #d4af37, #C5A028)",De.WebkitBackgroundClip="text",De.color="transparent"):B==="chrome"?(De.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",De.WebkitBackgroundClip="text",De.color="transparent"):B==="fire"?(De.color="#fff",De.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):B==="frozen"?(De.color="#fff",De.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):B==="vhs"?De.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":B==="gradient"?(De.background=`linear-gradient(to right, ${M.fontColor}, #ffffff)`,De.WebkitBackgroundClip="text",De.color="transparent"):B==="rainbow"?(De.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",De.WebkitBackgroundClip="text",De.color="transparent"):B==="glass"?(De.backgroundColor="rgba(255, 255, 255, 0.1)",De.backdropFilter="blur(8px)",De.padding="0.5rem 1rem",De.borderRadius="0.75rem",De.border="1px solid rgba(255, 255, 255, 0.2)",De.display="inline-block"):B==="mirror"?(De.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",De.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):B==="retro"?(De.fontFamily="'Press Start 2P', cursive",De.color="#ff00ff",De.textShadow="4px 4px 0px #00ffff"):B==="cyberpunk"?(De.color="#fcee0a",De.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",De.fontFamily="'Orbitron', sans-serif",De.letterSpacing="1px"):B==="glitch-text"?(De.animation="anim-glitch 0.4s infinite linear",De.position="relative"):B==="hologram"?(De.color="rgba(0, 255, 255, 0.7)",De.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",De.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",De.WebkitBackgroundClip="text"):B==="comic"&&(De.fontFamily="'Bangers', cursive",De.color="#ffcc00",De.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",De.letterSpacing="1px")}let Pt=k.text;const Kt=M.textCase;Kt==="upper"?Pt=Pt.toUpperCase():Kt==="lower"?Pt=Pt.toLowerCase():Kt==="title"?Pt=Pt.replace(/\w\S*/g,B=>B.charAt(0).toUpperCase()+B.substr(1).toLowerCase()):Kt==="sentence"?Pt=Pt.charAt(0).toUpperCase()+Pt.slice(1).toLowerCase():Kt==="invert"&&(Pt=Pt.replace(/\w\S*/g,B=>B.charAt(0).toLowerCase()+B.slice(1).toUpperCase())),Pt=Pt.replace(/\s*([-])\s*/g,"$1"),Ie&&M.textAnimation==="typewriter"&&(Pt=Pt.substring(0,Math.max(0,Math.floor((Ne-k.time)*35))));let kn=Pt;if(Ie&&M.highlightEffect!=="none"){const B=M.highlightEffect,at=k.words&&k.words.length>0;if((B==="karaoke"||B?.startsWith("karaoke-"))&&at)kn=k.words.filter(At=>At.text===`
`||At.text.trim().length>0).map((At,pt,Zt)=>{if(At.text===`
`)return u.jsx("br",{},pt);let sn=At.text.trim();if(Kt==="upper")sn=sn.toUpperCase();else if(Kt==="lower")sn=sn.toLowerCase();else if(Kt==="title")sn=sn.replace(/\w\S*/g,wt=>wt.charAt(0).toUpperCase()+wt.substr(1).toLowerCase());else if(Kt==="sentence"){const wt=sn.toLowerCase();sn=pt===0?wt.charAt(0).toUpperCase()+wt.slice(1):wt}else Kt==="invert"&&(sn=sn.replace(/\w\S*/g,wt=>wt.charAt(0).toLowerCase()+wt.slice(1).toUpperCase()));const fi=At.startTime+pe,pi=At.endTime+pe,hi=Ne>=fi&&Ne<pi,Pi=Ne>=pi,xo=/[-]$/,hn=/^[-]/;let Ot=!sn.endsWith(" ");xo.test(sn.trim())&&(Ot=!1);const ei=Zt[pt+1];ei&&hn.test(ei.text.trim())&&(Ot=!1),ei&&ei.text===`
`&&(Ot=!1),pt===Zt.length-1&&(Ot=!1);let X={display:"inline-block",transition:"all 0.1s ease"};if(M.textDecoration&&M.textDecoration!=="none"&&(X.textDecoration=M.textDecoration),!hi&&!Pi)B==="karaoke-smooth-white"?(X.opacity=1,X.color="#ffffff"):X.opacity=.5,X.transform="scale(1)";else if(Pi)if(B==="karaoke-fill"){const wt=M.highlightBackground||"#fb923c";X.backgroundColor=wt,X.color="#000",X.padding="2px 6px",X.borderRadius="4px",X.opacity=1}else B==="karaoke-smooth"||B==="karaoke-smooth-white"?(X.color=M.highlightColor||"#fb923c",X.opacity=1):(ne==="custom"&&(X.color=M.fontColor),X.opacity=1);if(hi){const wt=M.highlightColor||"#fb923c",_n=M.highlightBackground||"#fb923c";if(B==="karaoke-smooth"||B==="karaoke-smooth-white"){const gi=At.endTime-At.startTime,yi=Ne-fi,Hi=Math.min(100,Math.max(0,yi/gi*100)),Xi=B==="karaoke-smooth-white"?"#ffffff":M.fontColor||"#ffffff";X.backgroundImage=`linear-gradient(90deg, ${wt} ${Hi}%, ${Xi} ${Hi}%)`,X.backgroundClip="text",X.WebkitBackgroundClip="text",X.color="transparent",X.WebkitTextFillColor="transparent",X.textShadow="none"}else B==="karaoke"||B==="color"?(X.color=wt,X.textShadow=`0 0 10px ${wt}`):B==="karaoke-neon"?(X.color="#fff",X.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${wt}, 0 0 35px ${wt}`):B==="karaoke-scale"?(X.color=wt,X.transform="scale(1.3)"):B==="karaoke-underline"?(X.color=wt,X.textDecoration=(X.textDecoration||"")+" underline",X.textDecorationColor=wt,X.textUnderlineOffset="4px"):B==="karaoke-bounce"?(X.color=wt,X.transform="translateY(-10px)"):B==="karaoke-fill"?(X.backgroundColor=_n,X.color="#000",X.padding="2px 6px",X.borderRadius="4px"):B==="karaoke-outline"?(X.color="transparent",X.WebkitTextStroke=`2px ${wt}`):B==="karaoke-shadow"?(X.color=wt,X.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):B==="karaoke-gradient"?(X.background=`linear-gradient(90deg, ${wt}, ${_n})`,X.WebkitBackgroundClip="text",X.WebkitTextFillColor="transparent"):B==="karaoke-wave"?(X.color=wt,X.animation="bounce 0.3s ease infinite"):B==="karaoke-pill"?(X.backgroundColor=_n,X.color="#000",X.padding="4px 16px",X.borderRadius="9999px"):B==="karaoke-box"?(X.backgroundColor=_n,X.color="#000",X.padding="4px 8px",X.borderRadius="0"):B==="karaoke-rounded"?(X.backgroundColor=_n,X.color="#000",X.padding="4px 12px",X.padding="4px 12px",X.borderRadius="12px"):B==="karaoke-glass"?(X.backgroundColor="rgba(255, 255, 255, 0.1)",X.color="#fff",X.padding="4px 12px",X.borderRadius="8px",X.backdropFilter="blur(4px)",X.border="1px solid rgba(255, 255, 255, 0.3)",X.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):B==="karaoke-neon-multi"?(X.color="#fff",X.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):B==="karaoke-soft-glow"?(X.color=wt,X.textShadow=`0 0 5px ${wt}, 0 0 15px ${wt}, 0 0 30px ${wt}`):B==="karaoke-3d"?X.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":B==="karaoke-emboss"?(X.color="#ebebeb",X.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):B==="karaoke-chrome"?(X.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",X.WebkitBackgroundClip="text",X.color="transparent"):B==="karaoke-gold"?(X.background="linear-gradient(to bottom, #d4af37, #C5A028)",X.WebkitBackgroundClip="text",X.color="transparent"):B==="karaoke-fire"?(X.color="#fff",X.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):B==="karaoke-frozen"?(X.color="#fff",X.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):B==="karaoke-rainbow"?(X.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",X.WebkitBackgroundClip="text",X.color="transparent"):B==="karaoke-mirror"?(X.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",X.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):B==="karaoke-vhs"?X.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":B==="karaoke-retro"?(X.fontFamily="'Press Start 2P', cursive",X.color="#ff00ff",X.textShadow="4px 4px 0px #00ffff"):B==="karaoke-cyberpunk"?(X.color="#fcee0a",X.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8",X.fontFamily="'Orbitron', sans-serif"):B==="karaoke-hologram"?(X.color="rgba(0, 255, 255, 0.7)",X.textShadow="0 0 5px rgba(0,255,255,0.5)"):B==="karaoke-comic"?(X.fontFamily="'Bangers', cursive",X.color="#ffcc00",X.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):B==="karaoke-glitch-text"?X.animation="anim-glitch 0.4s infinite linear":B==="karaoke-pulse"?X.animation="anim-pulse 1s infinite ease-in-out":B==="karaoke-breathe"?X.animation="anim-breathe 2s infinite ease-in-out":B==="karaoke-float"?X.animation="anim-float 2s infinite ease-in-out":B==="karaoke-sway"?X.animation="anim-sway 2s infinite ease-in-out":B==="karaoke-flicker"?X.animation="anim-flicker 2s infinite linear":B==="karaoke-shake"?X.animation="anim-shake 0.2s infinite linear":B==="karaoke-wobble"?X.animation="anim-wobble 1s infinite ease-in-out":B==="karaoke-jello"?X.animation="anim-jello 1s infinite":B==="karaoke-rubberband"?X.animation="anim-rubberband 1s infinite":B==="karaoke-heartbeat"?X.animation="anim-heartbeat 1.3s infinite ease-in-out":B==="karaoke-flash"?X.animation="anim-flash 1s infinite":B==="karaoke-tada"?X.animation="anim-tada 1s infinite":B==="karaoke-swing"?X.animation="anim-swing 2s infinite":B==="karaoke-rotate"?X.animation="anim-rotate 4s infinite linear":B==="karaoke-spin"?X.animation="anim-rotate 1s infinite linear":B==="karaoke-glitch"?X.animation="anim-glitch 0.3s infinite linear":B==="karaoke-typewriter"?(X.animation="typewriter-reveal 0.5s steps(10, end) forwards",X.whiteSpace="nowrap",X.overflow="hidden",X.display="inline-block",X.verticalAlign="bottom"):B==="karaoke-fade"?X.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":B==="karaoke-slide"?X.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":B==="karaoke-drop"?X.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":B==="karaoke-lightspeed"?X.animation="trans-lightspeed-in 0.5s ease-out forwards":B==="karaoke-roll"?X.animation="trans-roll-in 0.5s ease-out forwards":B==="karaoke-zoom"?X.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":B==="karaoke-elastic"?X.animation="trans-elastic-in 0.7s ease-out forwards":B==="karaoke-scale-rotate"?X.animation="trans-scale-rotate-in 0.5s ease-out forwards":B==="karaoke-flip"?X.animation="trans-flip-in 0.5s ease-out forwards":B==="karaoke-rotate-in"?X.animation="trans-rotate-in 0.5s ease-out forwards":B==="karaoke-spiral"?X.animation="trans-spiral-in 0.6s ease-out forwards":B==="karaoke-blur"?X.animation="trans-blur-in 0.4s ease-out forwards":B==="karaoke-shatter"?X.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(B||"")&&(X.color=wt,X.textShadow=`0 0 10px ${wt}`,B?.includes("glow")&&(X.textShadow=`0 0 5px ${wt}, 0 0 15px ${wt}, 0 0 30px ${wt}`))}const mi=u.jsx("span",{className:"inline-block",style:X,children:sn},pt);return Ot?u.jsxs(wg.Fragment,{children:[mi," "]},pt):mi});else if(B==="karaoke"||B?.startsWith("karaoke-")){const At=M.highlightColor||"#fb923c",pt=M.highlightBackground||"#fb923c";De.color=At,B==="karaoke-neon"&&(De.textShadow=`0 0 10px ${At}, 0 0 20px ${At}`),B==="karaoke-scale"&&(De.transform=(De.transform||"")+" scale(1.1)"),B==="karaoke-underline"&&(De.textDecoration="underline"),B==="karaoke-bounce"&&(De.transform=(De.transform||"")+" translateY(-5px)"),B==="karaoke-fill"&&(De.backgroundColor=pt,De.color="#000",De.padding="4px 12px",De.borderRadius="6px"),B==="karaoke-outline"&&(De.color="transparent",De.WebkitTextStroke=`2px ${At}`),B==="karaoke-shadow"&&(De.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),B==="karaoke-gradient"&&(De.background=`linear-gradient(90deg, ${At}, ${pt})`,De.WebkitBackgroundClip="text",De.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(B)&&(De.backgroundColor=pt,De.color="#000",De.padding="4px 16px",De.borderRadius=B==="karaoke-pill"?"9999px":B==="karaoke-rounded"?"12px":"0"),B?.includes("glow")&&(De.textShadow=`0 0 10px ${At}, 0 0 20px ${At}`)}else B==="scale"?De.color=M.highlightColor||"#fb923c":M.highlightEffect==="background"&&(De.backgroundColor=(M.highlightBackground||"#fb923c")+"4D",De.padding="0 10px",De.borderRadius="8px")}return u.jsx("p",{"data-lyric-active":Ie?"true":"false",className:`${mt} ${Ie?Ve:nt}`,onClick:()=>{Ie&&(navigator.clipboard.writeText(k.text),n.success("Lyric copied to clipboard",1500)),o.current&&!A&&(o.current.currentTime=k.time,Qe(k.time))},children:u.jsx("span",{className:`inline-block ${Ie&&M.textAnimation!=="none"&&M.textAnimation!=="typewriter"?`text-anim-${M.textAnimation}`:""}`,children:u.jsx("span",{style:De,className:"inline-block",children:kn})})},$)}),u.jsx("div",{className:`transition-all duration-500 ${M.contentPosition==="center"?Ce===Fn.EDITOR||lt?"h-[25vh]":!ui&&!Ki?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):u.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!xl&&ne!=="none"&&u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[u.jsx(Wl,{size:64,className:"opacity-20"}),u.jsx("p",{children:"Load audio & lyrics to start"}),u.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),u.jsx("div",{className:`no-minimal-mode-toggle transition-all duration-500 ease-in-out overflow-hidden ${Ki?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:u.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3 group",children:[u.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Zl(Ne)}),u.jsxs("div",{ref:Yt,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),Ko(k.clientX)},onPointerMove:k=>{k.buttons===1&&Ko(k.clientX)},children:[u.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${Ne/He*100}%`}}),u.jsx("input",{type:"range",min:"0",max:He||0,value:Ne,onChange:yl,disabled:A,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),u.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Zl(He)}),u.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[u.jsx("button",{onClick:()=>j(!Nt),className:"text-zinc-400 hover:text-white",children:Nt||ft===0?u.jsx(Xl,{size:16}):u.jsx(Vo,{size:16})}),u.jsxs("div",{ref:ct,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),jn(k.clientX)},onPointerMove:k=>{k.buttons===1&&jn(k.clientX)},children:[u.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${Nt?0:ft*100}%`}}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:Nt?0:ft,onChange:Ri,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),u.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[u.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[u.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio or video",children:[u.jsx(Wl,{size:18}),u.jsx("input",{type:"file",accept:"audio/*,video/*",className:"hidden",onChange:Yo,disabled:A})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${q.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt, .vtt, .ttml)",children:[u.jsx(Ir,{size:18}),u.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml,.vtt",className:"hidden",onChange:yo,disabled:A})]}),q.length>0&&u.jsx("button",{onClick:()=>P([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:A,children:u.jsx(ri,{size:14})})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[u.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[pe>0?"+":"",pe.toFixed(1),"s"]}),u.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[u.jsx("button",{onClick:()=>ve(k=>parseFloat((k+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:A,children:u.jsx(rd,{size:12})}),u.jsx("button",{onClick:()=>ve(k=>parseFloat((k-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:A,children:u.jsx(da,{size:12})})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${Oe?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:Oe?`Custom Font: ${Oe}`:"Load Custom Font (.ttf, .otf, .woff)",children:[u.jsx(Oo,{size:18}),u.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:$i,disabled:A})]}),Oe&&u.jsx("button",{onClick:()=>ke(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:A,children:u.jsx(ri,{size:14})})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[u.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(M.fontSizeScale*100),"%"]}),u.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[u.jsx("button",{onClick:()=>Ze(k=>({...k,fontSizeScale:Math.min(k.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:A,children:u.jsx(rd,{size:12})}),u.jsx("button",{onClick:()=>Ze(k=>({...k,fontSizeScale:Math.max(k.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:A,children:u.jsx(da,{size:12})})]})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("select",{value:ne,onChange:k=>{const $=k.target.value;ge($);const Ie=Br[$];if(Ie){const W={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"preset",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};Ze(Se=>({...Se,...W,...Ie}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:A,title:"Select Visual Preset",children:[u.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),u.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),u.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),u.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),u.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),u.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),u.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),u.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),u.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),u.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),u.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),u.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),u.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),u.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),u.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),u.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),u.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),u.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),u.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),u.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),u.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),u.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:u.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),u.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[u.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:Hn,title:"Stop (S)",disabled:A,children:u.jsx(fd,{size:20,fill:"currentColor"})}),u.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:A||Fe.length===0,onClick:ml,title:"Previous Song",children:u.jsx(Vb,{size:24})}),u.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:A,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:u.jsx(zb,{size:20})}),u.jsx("button",{onClick:gl,disabled:A,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:Le?u.jsx(_g,{size:28,fill:"currentColor"}):u.jsx(cd,{size:28,fill:"currentColor",className:"ml-1"})}),u.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:A,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:u.jsx(nb,{size:20})}),u.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:A||Fe.length===0,onClick:dn,title:"Next Song",children:u.jsx(qb,{size:24})}),u.jsxs("button",{className:`transition-colors disabled:opacity-50 ${Te!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:Yi,title:`Repeat: ${Te==="off"?"Off":Te==="one"?"One":Te==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:A,children:[Te==="one"&&u.jsx(Rb,{size:20}),Te==="all_repeat"&&u.jsx(I0,{size:20}),Te==="all"&&u.jsx(Dr,{size:20}),Te==="off"&&u.jsx(I0,{size:20,className:"opacity-50"})]})]}),u.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>Ze(k=>({...k,backgroundBlurStrength:k.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${ze?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${ze?"On":"Off"}`,disabled:A,children:ze?"BLUR":"SHARP"}),u.jsx("button",{onClick:()=>Ze(k=>({...k,highlightEffect:k.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${M.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:u.jsx(Oo,{size:20})}),u.jsx("button",{onClick:()=>I(k=>k==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:A,children:Re}),u.jsx("button",{onClick:()=>Ee(k=>k==="16:9"?"9:16":k==="9:16"?"3:4":k==="3:4"?"1:1":k==="1:1"?"1:2":k==="1:2"?"2:1":k==="2:1"?"2:3":k==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:A,children:_e})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("select",{value:Me,onChange:k=>ye(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:A,title:"Select Video Codec",children:[u.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),xt.map(k=>u.jsx("option",{value:k.value,className:"bg-zinc-900",children:k.label},k.value))]}),u.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:u.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("select",{value:D,onChange:k=>O(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:A,title:"Select Quality (Bitrate)",children:[u.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),u.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),u.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),u.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:u.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),u.jsx("button",{onClick:Xo,disabled:A||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:`Export as Video (${R==="ffmpeg"?"FFmpeg":"MediaRecorder"})`,children:u.jsx(ra,{size:18})})]})]})]})})}),lt?u.jsx("div",{className:"no-minimal-mode-toggle animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:u.jsx(VN,{playlist:Fe,setPlaylist:Pe,currentTrackIndex:bt,setCurrentTrackIndex:St,onPlayTrack:Zn,isPlaying:Le,onTogglePlay:gl,currentTime:Ne,onSeek:k=>{o.current&&!A&&(o.current.currentTime=k,Qe(k))},onClearPlaylist:()=>{Hn(),x(null),P([]),St(-1),_({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:k=>{k===bt?(Hn(),x(null),P([]),St(-1),_({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):k<bt&&St($=>$-1),Pe($=>{const Ie=[...$];return Ie.splice(k,1),Ie})},onClose:()=>Gt(!1)})}):Ce===Fn.EDITOR&&u.jsx("div",{className:"no-minimal-mode-toggle animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:u.jsx(_1,{slides:Y,setSlides:de,currentTime:Ne,duration:He||60,lyrics:q,onSeek:k=>{o.current&&!A&&(o.current.currentTime=k,Qe(k))},onClose:()=>oe(Fn.PLAYER),renderConfig:M,setRenderConfig:Ze})})]}),A&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[u.jsx("div",{className:R==="ffmpeg"?"animate-pulse":"animate-bounce",children:u.jsx(ra,{size:48,className:R==="ffmpeg"?"text-orange-500":"text-purple-500"})}),u.jsxs("h2",{className:"text-2xl font-bold text-white",children:[R==="ffmpeg"?"FFmpeg Rendering":"Rendering Video"," (",_e," ",Re,")"]}),u.jsx("p",{className:"text-zinc-400 max-w-md",children:R==="ffmpeg"?u.jsxs(u.Fragment,{children:["Frame-by-frame capture using FFmpeg WASM.",u.jsx("br",{}),u.jsx("span",{className:"text-orange-400 font-medium",children:se||"Initializing..."}),u.jsx("br",{}),"This is faster than realtime - no audio playback needed."]}):u.jsxs(u.Fragment,{children:["Rendering in real-time using Canvas 2D engine.",u.jsx("br",{}),"The audio will play during capture.",u.jsx("br",{}),"Please keep this tab active for best performance."]})}),u.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-300 ease-linear ${R==="ffmpeg"?"bg-orange-500":"bg-purple-500"}`,style:{width:`${ce}%`}})}),u.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(ce),"%"]}),u.jsxs("button",{onClick:vl,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[u.jsx(fd,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),G&&u.jsx(JN,{config:M,setConfig:Ze,preset:ne,setPreset:ge,onClose:()=>Je(!1),isPlaylistMode:lt,hasPlaylist:Fe.length>0,onRender:Xo,customFontName:Oe,onFontUpload:$i,onClearCustomFont:()=>{ke(null),Ze(k=>({...k,fontFamily:"ui-sans-serif, system-ui, sans-serif"}))},customChannelFontName:Xe,onChannelFontUpload:vo,onClearChannelCustomFont:()=>{H(null),Ze(k=>({...k,channelInfoFontFamily:void 0}))},customInfoFontName:ae,onInfoFontUpload:Jo,onClearInfoCustomFont:()=>{ue(null),Ze(k=>({...k,infoFontFamily:void 0}))},resolution:Re,setResolution:I,aspectRatio:_e,setAspectRatio:Ee,renderCodec:Me,setRenderCodec:ye,supportedCodecs:xt,renderQuality:D,setRenderQuality:O,renderFps:me,setRenderFps:E,renderEngine:R,setRenderEngine:ee,ffmpegCodec:L,setFfmpegCodec:re}),Ke&&u.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>Ue(!1),children:u.jsxs("div",{className:"no-minimal-mode-toggle bg-zinc-900 border border-white/10 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",onClick:k=>k.stopPropagation(),children:[u.jsx("button",{onClick:()=>Ue(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-zinc-400 hover:text-white transition-colors",children:u.jsx(ri,{size:20})}),u.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[u.jsx(zr,{className:"text-purple-500"}),"Keyboard Shortcuts"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Playback"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Space"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"S"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Rewind 5s"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Forward 5s"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:""})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"R"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Mute"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"M"})]})]}),u.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Interface"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"F"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"O"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Hold UI (No Auto-Hide)"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"H"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Header Info"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"I"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Shortcut Info"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Y"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"P"})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider",children:"Editor & Styles"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Timeline"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"T"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Playlist"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"L"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"D"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Export Video"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Ctrl+Shift+E"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"+ / -"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Cycle Visual Preset"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"J"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Cycle Highight Effect"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Z"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"X"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Cycle Text Case"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"C"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Cycle Lyric Mode"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"G"})]})]}),u.jsx("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider mt-6",children:"Mouse & Touch"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Toggle Minimal Mode"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Double Click / Tap"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Seek to Lyric"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Line"})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-zinc-300",children:"Copy Active Lyric"})," ",u.jsx("span",{className:"font-mono text-purple-400 bg-white/5 px-2 py-0.5 rounded",children:"Click Active Line"})]})]})]})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-white/5 text-center",children:u.jsx("p",{className:"text-zinc-500 text-sm",children:"Shortcuts are disabled during video rendering."})})]})})]})}const wy=document.getElementById("root");if(!wy)throw new Error("Could not find root element to mount to");const cA=Cx.createRoot(wy);cA.render(u.jsx(wg.StrictMode,{children:u.jsx(S1,{children:u.jsx(rA,{})})}));export{uA as c,Tg as g};
