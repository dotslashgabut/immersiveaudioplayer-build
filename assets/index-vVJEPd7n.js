(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(r){if(r.ep)return;r.ep=!0;const d=o(r);fetch(r.href,d)}})();var HA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Km(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wc={exports:{}},zs={};var qh;function Wv(){if(qh)return zs;qh=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var y in r)y!=="key"&&(d[y]=r[y])}else d=r;return r=d.ref,{$$typeof:n,type:s,key:h,ref:r!==void 0?r:null,props:d}}return zs.Fragment=t,zs.jsx=o,zs.jsxs=o,zs}var $h;function ex(){return $h||($h=1,wc.exports=Wv()),wc.exports}var p=ex(),_c={exports:{}},bt={};var jh;function tx(){if(jh)return bt;jh=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),T=Symbol.iterator;function A(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function J(z,M,ee){this.props=z,this.context=M,this.refs=F,this.updater=ee||N}J.prototype.isReactComponent={},J.prototype.setState=function(z,M){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,M,"setState")},J.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function se(){}se.prototype=J.prototype;function ce(z,M,ee){this.props=z,this.context=M,this.refs=F,this.updater=ee||N}var Ie=ce.prototype=new se;Ie.constructor=ce,O(Ie,J.prototype),Ie.isPureReactComponent=!0;var Re=Array.isArray;function Ue(){}var xe={H:null,A:null,T:null,S:null},it=Object.prototype.hasOwnProperty;function we(z,M,ee){var Te=ee.ref;return{$$typeof:n,type:z,key:M,ref:Te!==void 0?Te:null,props:ee}}function Xe(z,M){return we(z.type,M,z.props)}function ze(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function pt(z){var M={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ee){return M[ee]})}var St=/\/+/g;function Mt(z,M){return typeof z=="object"&&z!==null&&z.key!=null?pt(""+z.key):M.toString(36)}function be(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Ue,Ue):(z.status="pending",z.then(function(M){z.status==="pending"&&(z.status="fulfilled",z.value=M)},function(M){z.status==="pending"&&(z.status="rejected",z.reason=M)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function B(z,M,ee,Te,Je){var _=typeof z;(_==="undefined"||_==="boolean")&&(z=null);var L=!1;if(z===null)L=!0;else switch(_){case"bigint":case"string":case"number":L=!0;break;case"object":switch(z.$$typeof){case n:case t:L=!0;break;case x:return L=z._init,B(L(z._payload),M,ee,Te,Je)}}if(L)return Je=Je(z),L=Te===""?"."+Mt(z,0):Te,Re(Je)?(ee="",L!=null&&(ee=L.replace(St,"$&/")+"/"),B(Je,M,ee,"",function(ke){return ke})):Je!=null&&(ze(Je)&&(Je=Xe(Je,ee+(Je.key==null||z&&z.key===Je.key?"":(""+Je.key).replace(St,"$&/")+"/")+L)),M.push(Je)),1;L=0;var ne=Te===""?".":Te+":";if(Re(z))for(var ie=0;ie<z.length;ie++)Te=z[ie],_=ne+Mt(Te,ie),L+=B(Te,M,ee,_,Je);else if(ie=A(z),typeof ie=="function")for(z=ie.call(z),ie=0;!(Te=z.next()).done;)Te=Te.value,_=ne+Mt(Te,ie++),L+=B(Te,M,ee,_,Je);else if(_==="object"){if(typeof z.then=="function")return B(be(z),M,ee,Te,Je);throw M=String(z),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return L}function ve(z,M,ee){if(z==null)return z;var Te=[],Je=0;return B(z,Te,"","",function(_){return M.call(ee,_,Je++)}),Te}function ue(z){if(z._status===-1){var M=z._result;M=M(),M.then(function(ee){(z._status===0||z._status===-1)&&(z._status=1,z._result=ee)},function(ee){(z._status===0||z._status===-1)&&(z._status=2,z._result=ee)}),z._status===-1&&(z._status=0,z._result=M)}if(z._status===1)return z._result.default;throw z._result}var mt=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},gt={map:ve,forEach:function(z,M,ee){ve(z,function(){M.apply(this,arguments)},ee)},count:function(z){var M=0;return ve(z,function(){M++}),M},toArray:function(z){return ve(z,function(M){return M})||[]},only:function(z){if(!ze(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return bt.Activity=S,bt.Children=gt,bt.Component=J,bt.Fragment=o,bt.Profiler=r,bt.PureComponent=ce,bt.StrictMode=s,bt.Suspense=v,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe,bt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return xe.H.useMemoCache(z)}},bt.cache=function(z){return function(){return z.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(z,M,ee){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Te=O({},z.props),Je=z.key;if(M!=null)for(_ in M.key!==void 0&&(Je=""+M.key),M)!it.call(M,_)||_==="key"||_==="__self"||_==="__source"||_==="ref"&&M.ref===void 0||(Te[_]=M[_]);var _=arguments.length-2;if(_===1)Te.children=ee;else if(1<_){for(var L=Array(_),ne=0;ne<_;ne++)L[ne]=arguments[ne+2];Te.children=L}return we(z.type,Je,Te)},bt.createContext=function(z){return z={$$typeof:h,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:d,_context:z},z},bt.createElement=function(z,M,ee){var Te,Je={},_=null;if(M!=null)for(Te in M.key!==void 0&&(_=""+M.key),M)it.call(M,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Je[Te]=M[Te]);var L=arguments.length-2;if(L===1)Je.children=ee;else if(1<L){for(var ne=Array(L),ie=0;ie<L;ie++)ne[ie]=arguments[ie+2];Je.children=ne}if(z&&z.defaultProps)for(Te in L=z.defaultProps,L)Je[Te]===void 0&&(Je[Te]=L[Te]);return we(z,_,Je)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(z){return{$$typeof:y,render:z}},bt.isValidElement=ze,bt.lazy=function(z){return{$$typeof:x,_payload:{_status:-1,_result:z},_init:ue}},bt.memo=function(z,M){return{$$typeof:m,type:z,compare:M===void 0?null:M}},bt.startTransition=function(z){var M=xe.T,ee={};xe.T=ee;try{var Te=z(),Je=xe.S;Je!==null&&Je(ee,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(Ue,mt)}catch(_){mt(_)}finally{M!==null&&ee.types!==null&&(M.types=ee.types),xe.T=M}},bt.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()},bt.use=function(z){return xe.H.use(z)},bt.useActionState=function(z,M,ee){return xe.H.useActionState(z,M,ee)},bt.useCallback=function(z,M){return xe.H.useCallback(z,M)},bt.useContext=function(z){return xe.H.useContext(z)},bt.useDebugValue=function(){},bt.useDeferredValue=function(z,M){return xe.H.useDeferredValue(z,M)},bt.useEffect=function(z,M){return xe.H.useEffect(z,M)},bt.useEffectEvent=function(z){return xe.H.useEffectEvent(z)},bt.useId=function(){return xe.H.useId()},bt.useImperativeHandle=function(z,M,ee){return xe.H.useImperativeHandle(z,M,ee)},bt.useInsertionEffect=function(z,M){return xe.H.useInsertionEffect(z,M)},bt.useLayoutEffect=function(z,M){return xe.H.useLayoutEffect(z,M)},bt.useMemo=function(z,M){return xe.H.useMemo(z,M)},bt.useOptimistic=function(z,M){return xe.H.useOptimistic(z,M)},bt.useReducer=function(z,M,ee){return xe.H.useReducer(z,M,ee)},bt.useRef=function(z){return xe.H.useRef(z)},bt.useState=function(z){return xe.H.useState(z)},bt.useSyncExternalStore=function(z,M,ee){return xe.H.useSyncExternalStore(z,M,ee)},bt.useTransition=function(){return xe.H.useTransition()},bt.version="19.2.3",bt}var Yh;function td(){return Yh||(Yh=1,_c.exports=tx()),_c.exports}var W=td();const Xm=Km(W);var Ac={exports:{}},Ds={},Nc={exports:{}},Mc={};var Jh;function nx(){return Jh||(Jh=1,(function(n){function t(B,ve){var ue=B.length;B.push(ve);e:for(;0<ue;){var mt=ue-1>>>1,gt=B[mt];if(0<r(gt,ve))B[mt]=ve,B[ue]=gt,ue=mt;else break e}}function o(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ve=B[0],ue=B.pop();if(ue!==ve){B[0]=ue;e:for(var mt=0,gt=B.length,z=gt>>>1;mt<z;){var M=2*(mt+1)-1,ee=B[M],Te=M+1,Je=B[Te];if(0>r(ee,ue))Te<gt&&0>r(Je,ee)?(B[mt]=Je,B[Te]=ue,mt=Te):(B[mt]=ee,B[M]=ue,mt=M);else if(Te<gt&&0>r(Je,ue))B[mt]=Je,B[Te]=ue,mt=Te;else break e}}return ve}function r(B,ve){var ue=B.sortIndex-ve.sortIndex;return ue!==0?ue:B.id-ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,S=null,T=3,A=!1,N=!1,O=!1,F=!1,J=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function Ie(B){for(var ve=o(m);ve!==null;){if(ve.callback===null)s(m);else if(ve.startTime<=B)s(m),ve.sortIndex=ve.expirationTime,t(v,ve);else break;ve=o(m)}}function Re(B){if(O=!1,Ie(B),!N)if(o(v)!==null)N=!0,Ue||(Ue=!0,pt());else{var ve=o(m);ve!==null&&be(Re,ve.startTime-B)}}var Ue=!1,xe=-1,it=5,we=-1;function Xe(){return F?!0:!(n.unstable_now()-we<it)}function ze(){if(F=!1,Ue){var B=n.unstable_now();we=B;var ve=!0;try{e:{N=!1,O&&(O=!1,se(xe),xe=-1),A=!0;var ue=T;try{t:{for(Ie(B),S=o(v);S!==null&&!(S.expirationTime>B&&Xe());){var mt=S.callback;if(typeof mt=="function"){S.callback=null,T=S.priorityLevel;var gt=mt(S.expirationTime<=B);if(B=n.unstable_now(),typeof gt=="function"){S.callback=gt,Ie(B),ve=!0;break t}S===o(v)&&s(v),Ie(B)}else s(v);S=o(v)}if(S!==null)ve=!0;else{var z=o(m);z!==null&&be(Re,z.startTime-B),ve=!1}}break e}finally{S=null,T=ue,A=!1}ve=void 0}}finally{ve?pt():Ue=!1}}}var pt;if(typeof ce=="function")pt=function(){ce(ze)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,Mt=St.port2;St.port1.onmessage=ze,pt=function(){Mt.postMessage(null)}}else pt=function(){J(ze,0)};function be(B,ve){xe=J(function(){B(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(B){switch(T){case 1:case 2:case 3:var ve=3;break;default:ve=T}var ue=T;T=ve;try{return B()}finally{T=ue}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(B,ve){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ue=T;T=B;try{return ve()}finally{T=ue}},n.unstable_scheduleCallback=function(B,ve,ue){var mt=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?mt+ue:mt):ue=mt,B){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=ue+gt,B={id:x++,callback:ve,priorityLevel:B,startTime:ue,expirationTime:gt,sortIndex:-1},ue>mt?(B.sortIndex=ue,t(m,B),o(v)===null&&B===o(m)&&(O?(se(xe),xe=-1):O=!0,be(Re,ue-mt))):(B.sortIndex=gt,t(v,B),N||A||(N=!0,Ue||(Ue=!0,pt()))),B},n.unstable_shouldYield=Xe,n.unstable_wrapCallback=function(B){var ve=T;return function(){var ue=T;T=ve;try{return B.apply(this,arguments)}finally{T=ue}}}})(Mc)),Mc}var Kh;function ix(){return Kh||(Kh=1,Nc.exports=nx()),Nc.exports}var Rc={exports:{}},zn={};var Xh;function ox(){if(Xh)return zn;Xh=1;var n=td();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(v,m,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,zn.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return d(v,m,null,x)},zn.flushSync=function(v){var m=h.T,x=s.p;try{if(h.T=null,s.p=2,v)return v()}finally{h.T=m,s.p=x,s.d.f()}},zn.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(v,m))},zn.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},zn.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:A}):x==="script"&&s.d.X(v,{crossOrigin:S,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},zn.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);s.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(v)},zn.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin);s.d.L(v,x,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},zn.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);s.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(v)},zn.requestFormReset=function(v){s.d.r(v)},zn.unstable_batchedUpdates=function(v,m){return v(m)},zn.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},zn.useFormStatus=function(){return h.H.useHostTransitionStatus()},zn.version="19.2.3",zn}var Qh;function lx(){if(Qh)return Rc.exports;Qh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Rc.exports=ox(),Rc.exports}var Zh;function sx(){if(Zh)return Ds;Zh=1;var n=ix(),t=td(),o=lx();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=d(e),i===null)throw Error(s(188));return i!==e?null:e}for(var l=e,a=i;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(a=f.return,a!==null){l=a;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return v(f),e;if(g===a)return v(f),i;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=f,a=g;else{for(var b=!1,w=f.child;w;){if(w===l){b=!0,l=f,a=g;break}if(w===a){b=!0,a=f,l=g;break}w=w.sibling}if(!b){for(w=g.child;w;){if(w===l){b=!0,l=g,a=f;break}if(w===a){b=!0,a=g,l=f;break}w=w.sibling}if(!b)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),Ie=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),Xe=Symbol.for("react.memo_cache_sentinel"),ze=Symbol.iterator;function pt(e){return e===null||typeof e!="object"?null:(e=ze&&e[ze]||e["@@iterator"],typeof e=="function"?e:null)}var St=Symbol.for("react.client.reference");function Mt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===St?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case J:return"Profiler";case F:return"StrictMode";case Re:return"Suspense";case Ue:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case ce:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case Ie:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xe:return i=e.displayName||null,i!==null?i:Mt(e.type)||"Memo";case it:i=e._payload,e=e._init;try{return Mt(e(i))}catch{}}return null}var be=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},mt=[],gt=-1;function z(e){return{current:e}}function M(e){0>gt||(e.current=mt[gt],mt[gt]=null,gt--)}function ee(e,i){gt++,mt[gt]=e.current,e.current=i}var Te=z(null),Je=z(null),_=z(null),L=z(null);function ne(e,i){switch(ee(_,i),ee(Je,e),ee(Te,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ph(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ph(i),e=hh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(Te),ee(Te,e)}function ie(){M(Te),M(Je),M(_)}function ke(e){e.memoizedState!==null&&ee(L,e);var i=Te.current,l=hh(i,e.type);i!==l&&(ee(Je,e),ee(Te,l))}function Le(e){Je.current===e&&(M(Te),M(Je)),L.current===e&&(M(L),Ms._currentValue=ue)}var Se,Me;function pe(e){if(Se===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Se=i&&i[1]||"",Me=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+e+Me}var P=!1;function Ae(e,i){if(!e||P)return"";P=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(Q){var Y=Q}Reflect.construct(e,[],me)}else{try{me.call()}catch(Q){Y=Q}e.call(me.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(me=e())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),b=g[0],w=g[1];if(b&&w){var R=b.split(`
`),j=w.split(`
`);for(f=a=0;a<R.length&&!R[a].includes("DetermineComponentFrameRoot");)a++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(a===R.length||f===j.length)for(a=R.length-1,f=j.length-1;1<=a&&0<=f&&R[a]!==j[f];)f--;for(;1<=a&&0<=f;a--,f--)if(R[a]!==j[f]){if(a!==1||f!==1)do if(a--,f--,0>f||R[a]!==j[f]){var re=`
`+R[a].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=a&&0<=f);break}}}finally{P=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?pe(l):""}function je(e,i){switch(e.tag){case 26:case 27:case 5:return pe(e.type);case 16:return pe("Lazy");case 13:return e.child!==i&&i!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Ae(e.type,!1);case 11:return Ae(e.type.render,!1);case 1:return Ae(e.type,!0);case 31:return pe("Activity");default:return""}}function Be(e){try{var i="",l=null;do i+=je(e,l),l=e,e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ye=Object.prototype.hasOwnProperty,G=n.unstable_scheduleCallback,le=n.unstable_cancelCallback,de=n.unstable_shouldYield,Ee=n.unstable_requestPaint,ye=n.unstable_now,he=n.unstable_getCurrentPriorityLevel,E=n.unstable_ImmediatePriority,C=n.unstable_UserBlockingPriority,V=n.unstable_NormalPriority,k=n.unstable_LowPriority,K=n.unstable_IdlePriority,I=n.log,X=n.unstable_setDisableYieldValue,ae=null,te=null;function Ne(e){if(typeof I=="function"&&X(e),te&&typeof te.setStrictMode=="function")try{te.setStrictMode(ae,e)}catch{}}var Oe=Math.clz32?Math.clz32:zt,et=Math.log,Fe=Math.LN2;function zt(e){return e>>>=0,e===0?32:31-(et(e)/Fe|0)|0}var wt=256,Ft=262144,en=4194304;function st(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,i,l){var a=e.pendingLanes;if(a===0)return 0;var f=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var w=a&134217727;return w!==0?(a=w&~g,a!==0?f=st(a):(b&=w,b!==0?f=st(b):l||(l=w&~e,l!==0&&(f=st(l))))):(w=a&~g,w!==0?f=st(w):b!==0?f=st(b):l||(l=a&~e,l!==0&&(f=st(l)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:f}function tt(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function rt(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=en;return en<<=1,(en&62914560)===0&&(en=4194304),e}function _t(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function yt(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ot(e,i,l,a,f,g){var b=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var w=e.entanglements,R=e.expirationTimes,j=e.hiddenUpdates;for(l=b&~l;0<l;){var re=31-Oe(l),me=1<<re;w[re]=0,R[re]=-1;var Y=j[re];if(Y!==null)for(j[re]=null,re=0;re<Y.length;re++){var Q=Y[re];Q!==null&&(Q.lane&=-536870913)}l&=~me}a!==0&&Ot(e,a,0),g!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~i))}function Ot(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var a=31-Oe(i);e.entangledLanes|=i,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function fn(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var a=31-Oe(l),f=1<<a;f&i|e[a]&i&&(e[a]|=i),l&=~f}}function Vn(e,i){var l=i&-i;return l=(l&42)!==0?1:zi(l),(l&(e.suspendedLanes|i))!==0?0:l}function zi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ai(){var e=ve.p;return e!==0?e:(e=window.event,e===void 0?32:Ph(e.type))}function ro(e,i){var l=ve.p;try{return ve.p=e,i()}finally{ve.p=l}}var Un=Math.random().toString(36).slice(2),Qe="__reactFiber$"+Un,Et="__reactProps$"+Un,Ht="__reactContainer$"+Un,ri="__reactEvents$"+Un,jt="__reactListeners$"+Un,Bn="__reactHandles$"+Un,qs="__reactResources$"+Un,Gi="__reactMarker$"+Un;function Go(e){delete e[Qe],delete e[Et],delete e[ri],delete e[jt],delete e[Bn]}function Ti(e){var i=e[Qe];if(i)return i;for(var l=e.parentNode;l;){if(i=l[Ht]||l[Qe]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=Sh(e);e!==null;){if(l=e[Qe])return l;e=Sh(e)}return i}e=l,l=e.parentNode}return null}function ui(e){if(e=e[Qe]||e[Ht]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Hi(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Vi(e){var i=e[qs];return i||(i=e[qs]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function an(e){e[Gi]=!0}var Bi=new Set,ol={};function Kn(e,i){D(e,i),D(e+"Capture",i)}function D(e,i){for(ol[e]=i,e=0;e<i.length;e++)Bi.add(i[e])}var oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ve={},ge={};function Ce(e){return Ye.call(ge,e)?!0:Ye.call(Ve,e)?!1:oe.test(e)?ge[e]=!0:(Ve[e]=!0,!1)}function nt(e,i,l){if(Ce(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function dt(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function ft(e,i,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+a)}}function at(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bn(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function In(e,i,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Ge(e){if(!e._valueTracker){var i=bn(e)?"checked":"value";e._valueTracker=In(e,i,""+e[i])}}function Xt(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return e&&(a=bn(e)?e.checked?"true":"false":e.value),e=a,e!==l?(i.setValue(e),!0):!1}function Qt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ci=/[\n"\\]/g;function q(e){return e.replace(Ci,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ht(e,i,l,a,f,g,b,w){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+at(i)):e.value!==""+at(i)&&(e.value=""+at(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?tn(e,b,at(i)):l!=null?tn(e,b,at(l)):a!=null&&e.removeAttribute("value"),f==null&&g!=null&&(e.defaultChecked=!!g),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+at(w):e.removeAttribute("name")}function Ut(e,i,l,a,f,g,b,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ge(e);return}l=l!=null?""+at(l):"",i=i!=null?""+at(i):l,w||i===e.value||(e.value=i),e.defaultValue=i}a=a??f,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=w?e.checked:!!a,e.defaultChecked=!!a,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),Ge(e)}function tn(e,i,l){i==="number"&&Qt(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Xn(e,i,l,a){if(e=e.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<e.length;l++)f=i.hasOwnProperty("$"+e[l].value),e[l].selected!==f&&(e[l].selected=f),f&&a&&(e[l].defaultSelected=!0)}else{for(l=""+at(l),i=null,f=0;f<e.length;f++){if(e[f].value===l){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Sn(e,i,l){if(i!=null&&(i=""+at(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+at(l):""}function Qn(e,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(be(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=at(i),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),Ge(e)}function Zn(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var Fi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uo(e,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":a?e.setProperty(i,l):typeof l!="number"||l===0||Fi.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function co(e,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var f in i)a=i[f],i.hasOwnProperty(f)&&l[f]!==a&&uo(e,f,a)}else for(var g in i)i.hasOwnProperty(g)&&uo(e,g,i[g])}function un(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Z(e){return Wn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function mn(){}var vt=null;function Ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ei=null,ci=null;function Ho(e){var i=ui(e);if(i&&(e=i.stateNode)){var l=e[Et]||null;e:switch(e=i.stateNode,i.type){case"input":if(ht(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+q(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==e&&a.form===e.form){var f=a[Et]||null;if(!f)throw Error(s(90));ht(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===e.form&&Xt(a)}break e;case"textarea":Sn(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Xn(e,!!l.multiple,i,!1)}}}var qe=!1;function De(e,i,l){if(qe)return e(i,l);qe=!0;try{var a=e(i);return a}finally{if(qe=!1,(Ei!==null||ci!==null)&&(Ma(),Ei&&(i=Ei,e=ci,ci=Ei=null,Ho(i),e)))for(i=0;i<e.length;i++)Ho(e[i])}}function ut(e,i){var l=e.stateNode;if(l===null)return null;var a=l[Et]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var He=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nn=!1;if(He)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){nn=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{nn=!1}var Zt=null,wi=null,wn=null;function ll(){if(wn)return wn;var e,i=wi,l=i.length,a,f="value"in Zt?Zt.value:Zt.textContent,g=f.length;for(e=0;e<l&&i[e]===f[e];e++);var b=l-e;for(a=1;a<=b&&i[l-a]===f[g-a];a++);return wn=f.slice(e,1<a?1-a:void 0)}function Oi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function $s(){return!0}function hd(){return!1}function On(e){function i(l,a,f,g,b){this._reactName=l,this._targetInst=f,this.type=a,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(l=e[w],this[w]=l?l(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$s:hd,this.isPropagationStopped=hd,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),i}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=On(Vo),Jl=S({},Vo,{view:0,detail:0}),Qg=On(Jl),Ar,Nr,Kl,Ys=S({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kl&&(Kl&&e.type==="mousemove"?(Ar=e.screenX-Kl.screenX,Nr=e.screenY-Kl.screenY):Nr=Ar=0,Kl=e),Ar)},movementY:function(e){return"movementY"in e?e.movementY:Nr}}),md=On(Ys),Zg=S({},Ys,{dataTransfer:0}),Wg=On(Zg),ey=S({},Jl,{relatedTarget:0}),Mr=On(ey),ty=S({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),ny=On(ty),iy=S({},Vo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oy=On(iy),ly=S({},Vo,{data:0}),gd=On(ly),sy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ry[e])?!!i[e]:!1}function Rr(){return uy}var cy=S({},Jl,{key:function(e){if(e.key){var i=sy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ay[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(e){return e.type==="keypress"?Oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dy=On(cy),fy=S({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=On(fy),py=S({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),hy=On(py),my=S({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gy=On(my),yy=S({},Ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vy=On(yy),xy=S({},Vo,{newState:0,oldState:0}),by=On(xy),Sy=[9,13,27,32],kr=He&&"CompositionEvent"in window,Xl=null;He&&"documentMode"in document&&(Xl=document.documentMode);var Ty=He&&"TextEvent"in window&&!Xl,vd=He&&(!kr||Xl&&8<Xl&&11>=Xl),xd=" ",bd=!1;function Sd(e,i){switch(e){case"keyup":return Sy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Td(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sl=!1;function Cy(e,i){switch(e){case"compositionend":return Td(i);case"keypress":return i.which!==32?null:(bd=!0,xd);case"textInput":return e=i.data,e===xd&&bd?null:e;default:return null}}function Ey(e,i){if(sl)return e==="compositionend"||!kr&&Sd(e,i)?(e=ll(),wn=wi=Zt=null,sl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vd&&i.locale!=="ko"?null:i.data;default:return null}}var wy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!wy[e.type]:i==="textarea"}function Ed(e,i,l,a){Ei?ci?ci.push(a):ci=[a]:Ei=a,i=La(i,"onChange"),0<i.length&&(l=new js("onChange","change",null,l,a),e.push({event:l,listeners:i}))}var Ql=null,Zl=null;function _y(e){ah(e,0)}function Js(e){var i=Hi(e);if(Xt(i))return e}function wd(e,i){if(e==="change")return i}var _d=!1;if(He){var Ir;if(He){var zr="oninput"in document;if(!zr){var Ad=document.createElement("div");Ad.setAttribute("oninput","return;"),zr=typeof Ad.oninput=="function"}Ir=zr}else Ir=!1;_d=Ir&&(!document.documentMode||9<document.documentMode)}function Nd(){Ql&&(Ql.detachEvent("onpropertychange",Md),Zl=Ql=null)}function Md(e){if(e.propertyName==="value"&&Js(Zl)){var i=[];Ed(i,Zl,e,Ln(e)),De(_y,i)}}function Ay(e,i,l){e==="focusin"?(Nd(),Ql=i,Zl=l,Ql.attachEvent("onpropertychange",Md)):e==="focusout"&&Nd()}function Ny(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Js(Zl)}function My(e,i){if(e==="click")return Js(i)}function Ry(e,i){if(e==="input"||e==="change")return Js(i)}function ky(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ei=typeof Object.is=="function"?Object.is:ky;function Wl(e,i){if(ei(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var f=l[a];if(!Ye.call(i,f)||!ei(e[f],i[f]))return!1}return!0}function Rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kd(e,i){var l=Rd(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=i&&a>=i)return{node:l,offset:i-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Rd(l)}}function Id(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Id(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function zd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Qt(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Qt(e.document)}return i}function Dr(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Iy=He&&"documentMode"in document&&11>=document.documentMode,al=null,Ur=null,es=null,Lr=!1;function Dd(e,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Lr||al==null||al!==Qt(a)||(a=al,"selectionStart"in a&&Dr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),es&&Wl(es,a)||(es=a,a=La(Ur,"onSelect"),0<a.length&&(i=new js("onSelect","select",null,i,l),e.push({event:i,listeners:a}),i.target=al)))}function Bo(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var rl={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionrun:Bo("Transition","TransitionRun"),transitionstart:Bo("Transition","TransitionStart"),transitioncancel:Bo("Transition","TransitionCancel"),transitionend:Bo("Transition","TransitionEnd")},Pr={},Ud={};He&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Fo(e){if(Pr[e])return Pr[e];if(!rl[e])return e;var i=rl[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in Ud)return Pr[e]=i[l];return e}var Ld=Fo("animationend"),Pd=Fo("animationiteration"),Gd=Fo("animationstart"),zy=Fo("transitionrun"),Dy=Fo("transitionstart"),Uy=Fo("transitioncancel"),Hd=Fo("transitionend"),Vd=new Map,Gr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gr.push("scrollEnd");function _i(e,i){Vd.set(e,i),Kn(i,[e])}var Ks=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},di=[],ul=0,Hr=0;function Xs(){for(var e=ul,i=Hr=ul=0;i<e;){var l=di[i];di[i++]=null;var a=di[i];di[i++]=null;var f=di[i];di[i++]=null;var g=di[i];if(di[i++]=null,a!==null&&f!==null){var b=a.pending;b===null?f.next=f:(f.next=b.next,b.next=f),a.pending=f}g!==0&&Bd(l,f,g)}}function Qs(e,i,l,a){di[ul++]=e,di[ul++]=i,di[ul++]=l,di[ul++]=a,Hr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Vr(e,i,l,a){return Qs(e,i,l,a),Zs(e)}function Oo(e,i){return Qs(e,null,null,i),Zs(e)}function Bd(e,i,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var f=!1,g=e.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(f=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,f&&i!==null&&(f=31-Oe(l),e=g.hiddenUpdates,a=e[f],a===null?e[f]=[i]:a.push(i),i.lane=l|536870912),g):null}function Zs(e){if(50<Ts)throw Ts=0,Ku=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var cl={};function Ly(e,i,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(e,i,l,a){return new Ly(e,i,l,a)}function Br(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qi(e,i){var l=e.alternate;return l===null?(l=ti(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Fd(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ws(e,i,l,a,f,g){var b=0;if(a=e,typeof e=="function")Br(e)&&(b=1);else if(typeof e=="string")b=Bv(e,l,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=ti(31,l,i,f),e.elementType=we,e.lanes=g,e;case O:return qo(l.children,f,g,i);case F:b=8,f|=24;break;case J:return e=ti(12,l,i,f|2),e.elementType=J,e.lanes=g,e;case Re:return e=ti(13,l,i,f),e.elementType=Re,e.lanes=g,e;case Ue:return e=ti(19,l,i,f),e.elementType=Ue,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:b=10;break e;case se:b=9;break e;case Ie:b=11;break e;case xe:b=14;break e;case it:b=16,a=null;break e}b=29,l=Error(s(130,e===null?"null":typeof e,"")),a=null}return i=ti(b,l,i,f),i.elementType=e,i.type=a,i.lanes=g,i}function qo(e,i,l,a){return e=ti(7,e,a,i),e.lanes=l,e}function Fr(e,i,l){return e=ti(6,e,null,i),e.lanes=l,e}function Od(e){var i=ti(18,null,null,0);return i.stateNode=e,i}function Or(e,i,l){return i=ti(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var qd=new WeakMap;function fi(e,i){if(typeof e=="object"&&e!==null){var l=qd.get(e);return l!==void 0?l:(i={value:e,source:i,stack:Be(i)},qd.set(e,i),i)}return{value:e,source:i,stack:Be(i)}}var dl=[],fl=0,ea=null,ts=0,pi=[],hi=0,fo=null,Di=1,Ui="";function $i(e,i){dl[fl++]=ts,dl[fl++]=ea,ea=e,ts=i}function $d(e,i,l){pi[hi++]=Di,pi[hi++]=Ui,pi[hi++]=fo,fo=e;var a=Di;e=Ui;var f=32-Oe(a)-1;a&=~(1<<f),l+=1;var g=32-Oe(i)+f;if(30<g){var b=f-f%5;g=(a&(1<<b)-1).toString(32),a>>=b,f-=b,Di=1<<32-Oe(i)+f|l<<f|a,Ui=g+e}else Di=1<<g|l<<f|a,Ui=e}function qr(e){e.return!==null&&($i(e,1),$d(e,1,0))}function $r(e){for(;e===ea;)ea=dl[--fl],dl[fl]=null,ts=dl[--fl],dl[fl]=null;for(;e===fo;)fo=pi[--hi],pi[hi]=null,Ui=pi[--hi],pi[hi]=null,Di=pi[--hi],pi[hi]=null}function jd(e,i){pi[hi++]=Di,pi[hi++]=Ui,pi[hi++]=fo,Di=i.id,Ui=i.overflow,fo=e}var _n=null,on=null,It=!1,po=null,mi=!1,jr=Error(s(519));function ho(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ns(fi(i,e)),jr}function Yd(e){var i=e.stateNode,l=e.type,a=e.memoizedProps;switch(i[Qe]=e,i[Et]=a,l){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(l=0;l<Es.length;l++)Nt(Es[l],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),Ut(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),Qn(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||dh(i.textContent,l)?(a.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),a.onScroll!=null&&Nt("scroll",i),a.onScrollEnd!=null&&Nt("scrollend",i),a.onClick!=null&&(i.onclick=mn),i=!0):i=!1,i||ho(e,!0)}function Jd(e){for(_n=e.return;_n;)switch(_n.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:_n=_n.return}}function pl(e){if(e!==_n)return!1;if(!It)return Jd(e),It=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||cc(e.type,e.memoizedProps)),l=!l),l&&on&&ho(e),Jd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));on=bh(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));on=bh(e)}else i===27?(i=on,No(e.type)?(e=mc,mc=null,on=e):on=i):on=_n?yi(e.stateNode.nextSibling):null;return!0}function $o(){on=_n=null,It=!1}function Yr(){var e=po;return e!==null&&(Yn===null?Yn=e:Yn.push.apply(Yn,e),po=null),e}function ns(e){po===null?po=[e]:po.push(e)}var Jr=z(null),jo=null,ji=null;function mo(e,i,l){ee(Jr,i._currentValue),i._currentValue=l}function Yi(e){e._currentValue=Jr.current,M(Jr)}function Kr(e,i,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===l)break;e=e.return}}function Xr(e,i,l,a){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=f;for(var R=0;R<i.length;R++)if(w.context===i[R]){g.lanes|=l,w=g.alternate,w!==null&&(w.lanes|=l),Kr(g.return,l,e),a||(b=null);break e}g=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),Kr(b,l,e),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===e){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function hl(e,i,l,a){e=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var w=f.type;ei(f.pendingProps.value,b.value)||(e!==null?e.push(w):e=[w])}}else if(f===L.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Ms):e=[Ms])}f=f.return}e!==null&&Xr(i,e,l,a),i.flags|=262144}function ta(e){for(e=e.firstContext;e!==null;){if(!ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yo(e){jo=e,ji=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function An(e){return Kd(jo,e)}function na(e,i){return jo===null&&Yo(e),Kd(e,i)}function Kd(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},ji===null){if(e===null)throw Error(s(308));ji=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ji=ji.next=i;return l}var Py=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Gy=n.unstable_scheduleCallback,Hy=n.unstable_NormalPriority,gn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qr(){return{controller:new Py,data:new Map,refCount:0}}function is(e){e.refCount--,e.refCount===0&&Gy(Hy,function(){e.controller.abort()})}var os=null,Zr=0,ml=0,gl=null;function Vy(e,i){if(os===null){var l=os=[];Zr=0,ml=tc(),gl={status:"pending",value:void 0,then:function(a){l.push(a)}}}return Zr++,i.then(Xd,Xd),i}function Xd(){if(--Zr===0&&os!==null){gl!==null&&(gl.status="fulfilled");var e=os;os=null,ml=0,gl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function By(e,i){var l=[],a={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return e.then(function(){a.status="fulfilled",a.value=i;for(var f=0;f<l.length;f++)(0,l[f])(i)},function(f){for(a.status="rejected",a.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),a}var Qd=B.S;B.S=function(e,i){Up=ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vy(e,i),Qd!==null&&Qd(e,i)};var Jo=z(null);function Wr(){var e=Jo.current;return e!==null?e:Wt.pooledCache}function ia(e,i){i===null?ee(Jo,Jo.current):ee(Jo,i.pool)}function Zd(){var e=Wr();return e===null?null:{parent:gn._currentValue,pool:e}}var yl=Error(s(460)),eu=Error(s(474)),oa=Error(s(542)),la={then:function(){}};function Wd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ef(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(mn,mn),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,nf(e),e;default:if(typeof i.status=="string")i.then(mn,mn);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(a){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=a}},function(a){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,nf(e),e}throw Xo=i,yl}}function Ko(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Xo=l,yl):l}}var Xo=null;function tf(){if(Xo===null)throw Error(s(459));var e=Xo;return Xo=null,e}function nf(e){if(e===yl||e===oa)throw Error(s(483))}var vl=null,ls=0;function sa(e){var i=ls;return ls+=1,vl===null&&(vl=[]),ef(vl,e,i)}function ss(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function aa(e,i){throw i.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function of(e){function i(H,U){if(e){var $=H.deletions;$===null?(H.deletions=[U],H.flags|=16):$.push(U)}}function l(H,U){if(!e)return null;for(;U!==null;)i(H,U),U=U.sibling;return null}function a(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function f(H,U){return H=qi(H,U),H.index=0,H.sibling=null,H}function g(H,U,$){return H.index=$,e?($=H.alternate,$!==null?($=$.index,$<U?(H.flags|=67108866,U):$):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function b(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function w(H,U,$,fe){return U===null||U.tag!==6?(U=Fr($,H.mode,fe),U.return=H,U):(U=f(U,$),U.return=H,U)}function R(H,U,$,fe){var lt=$.type;return lt===O?re(H,U,$.props.children,fe,$.key):U!==null&&(U.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===it&&Ko(lt)===U.type)?(U=f(U,$.props),ss(U,$),U.return=H,U):(U=Ws($.type,$.key,$.props,null,H.mode,fe),ss(U,$),U.return=H,U)}function j(H,U,$,fe){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=Or($,H.mode,fe),U.return=H,U):(U=f(U,$.children||[]),U.return=H,U)}function re(H,U,$,fe,lt){return U===null||U.tag!==7?(U=qo($,H.mode,fe,lt),U.return=H,U):(U=f(U,$),U.return=H,U)}function me(H,U,$){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Fr(""+U,H.mode,$),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return $=Ws(U.type,U.key,U.props,null,H.mode,$),ss($,U),$.return=H,$;case N:return U=Or(U,H.mode,$),U.return=H,U;case it:return U=Ko(U),me(H,U,$)}if(be(U)||pt(U))return U=qo(U,H.mode,$,null),U.return=H,U;if(typeof U.then=="function")return me(H,sa(U),$);if(U.$$typeof===ce)return me(H,na(H,U),$);aa(H,U)}return null}function Y(H,U,$,fe){var lt=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return lt!==null?null:w(H,U,""+$,fe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return $.key===lt?R(H,U,$,fe):null;case N:return $.key===lt?j(H,U,$,fe):null;case it:return $=Ko($),Y(H,U,$,fe)}if(be($)||pt($))return lt!==null?null:re(H,U,$,fe,null);if(typeof $.then=="function")return Y(H,U,sa($),fe);if($.$$typeof===ce)return Y(H,U,na(H,$),fe);aa(H,$)}return null}function Q(H,U,$,fe,lt){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return H=H.get($)||null,w(U,H,""+fe,lt);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return H=H.get(fe.key===null?$:fe.key)||null,R(U,H,fe,lt);case N:return H=H.get(fe.key===null?$:fe.key)||null,j(U,H,fe,lt);case it:return fe=Ko(fe),Q(H,U,$,fe,lt)}if(be(fe)||pt(fe))return H=H.get($)||null,re(U,H,fe,lt,null);if(typeof fe.then=="function")return Q(H,U,$,sa(fe),lt);if(fe.$$typeof===ce)return Q(H,U,$,na(U,fe),lt);aa(U,fe)}return null}function Ke(H,U,$,fe){for(var lt=null,Lt=null,Ze=U,Ct=U=0,kt=null;Ze!==null&&Ct<$.length;Ct++){Ze.index>Ct?(kt=Ze,Ze=null):kt=Ze.sibling;var Pt=Y(H,Ze,$[Ct],fe);if(Pt===null){Ze===null&&(Ze=kt);break}e&&Ze&&Pt.alternate===null&&i(H,Ze),U=g(Pt,U,Ct),Lt===null?lt=Pt:Lt.sibling=Pt,Lt=Pt,Ze=kt}if(Ct===$.length)return l(H,Ze),It&&$i(H,Ct),lt;if(Ze===null){for(;Ct<$.length;Ct++)Ze=me(H,$[Ct],fe),Ze!==null&&(U=g(Ze,U,Ct),Lt===null?lt=Ze:Lt.sibling=Ze,Lt=Ze);return It&&$i(H,Ct),lt}for(Ze=a(Ze);Ct<$.length;Ct++)kt=Q(Ze,H,Ct,$[Ct],fe),kt!==null&&(e&&kt.alternate!==null&&Ze.delete(kt.key===null?Ct:kt.key),U=g(kt,U,Ct),Lt===null?lt=kt:Lt.sibling=kt,Lt=kt);return e&&Ze.forEach(function(zo){return i(H,zo)}),It&&$i(H,Ct),lt}function ct(H,U,$,fe){if($==null)throw Error(s(151));for(var lt=null,Lt=null,Ze=U,Ct=U=0,kt=null,Pt=$.next();Ze!==null&&!Pt.done;Ct++,Pt=$.next()){Ze.index>Ct?(kt=Ze,Ze=null):kt=Ze.sibling;var zo=Y(H,Ze,Pt.value,fe);if(zo===null){Ze===null&&(Ze=kt);break}e&&Ze&&zo.alternate===null&&i(H,Ze),U=g(zo,U,Ct),Lt===null?lt=zo:Lt.sibling=zo,Lt=zo,Ze=kt}if(Pt.done)return l(H,Ze),It&&$i(H,Ct),lt;if(Ze===null){for(;!Pt.done;Ct++,Pt=$.next())Pt=me(H,Pt.value,fe),Pt!==null&&(U=g(Pt,U,Ct),Lt===null?lt=Pt:Lt.sibling=Pt,Lt=Pt);return It&&$i(H,Ct),lt}for(Ze=a(Ze);!Pt.done;Ct++,Pt=$.next())Pt=Q(Ze,H,Ct,Pt.value,fe),Pt!==null&&(e&&Pt.alternate!==null&&Ze.delete(Pt.key===null?Ct:Pt.key),U=g(Pt,U,Ct),Lt===null?lt=Pt:Lt.sibling=Pt,Lt=Pt);return e&&Ze.forEach(function(Zv){return i(H,Zv)}),It&&$i(H,Ct),lt}function Kt(H,U,$,fe){if(typeof $=="object"&&$!==null&&$.type===O&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case A:e:{for(var lt=$.key;U!==null;){if(U.key===lt){if(lt=$.type,lt===O){if(U.tag===7){l(H,U.sibling),fe=f(U,$.props.children),fe.return=H,H=fe;break e}}else if(U.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===it&&Ko(lt)===U.type){l(H,U.sibling),fe=f(U,$.props),ss(fe,$),fe.return=H,H=fe;break e}l(H,U);break}else i(H,U);U=U.sibling}$.type===O?(fe=qo($.props.children,H.mode,fe,$.key),fe.return=H,H=fe):(fe=Ws($.type,$.key,$.props,null,H.mode,fe),ss(fe,$),fe.return=H,H=fe)}return b(H);case N:e:{for(lt=$.key;U!==null;){if(U.key===lt)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){l(H,U.sibling),fe=f(U,$.children||[]),fe.return=H,H=fe;break e}else{l(H,U);break}else i(H,U);U=U.sibling}fe=Or($,H.mode,fe),fe.return=H,H=fe}return b(H);case it:return $=Ko($),Kt(H,U,$,fe)}if(be($))return Ke(H,U,$,fe);if(pt($)){if(lt=pt($),typeof lt!="function")throw Error(s(150));return $=lt.call($),ct(H,U,$,fe)}if(typeof $.then=="function")return Kt(H,U,sa($),fe);if($.$$typeof===ce)return Kt(H,U,na(H,$),fe);aa(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,U!==null&&U.tag===6?(l(H,U.sibling),fe=f(U,$),fe.return=H,H=fe):(l(H,U),fe=Fr($,H.mode,fe),fe.return=H,H=fe),b(H)):l(H,U)}return function(H,U,$,fe){try{ls=0;var lt=Kt(H,U,$,fe);return vl=null,lt}catch(Ze){if(Ze===yl||Ze===oa)throw Ze;var Lt=ti(29,Ze,null,H.mode);return Lt.lanes=fe,Lt.return=H,Lt}}}var Qo=of(!0),lf=of(!1),go=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vo(e,i,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Vt&2)!==0){var f=a.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i,i=Zs(e),Bd(e,null,l),i}return Qs(e,a,i,l),Zs(e)}function as(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,fn(e,l)}}function iu(e,i){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?f=g=i:g=g.next=i}else f=g=i;l={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var ou=!1;function rs(){if(ou){var e=gl;if(e!==null)throw e}}function us(e,i,l,a){ou=!1;var f=e.updateQueue;go=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var R=w,j=R.next;R.next=null,b===null?g=j:b.next=j,b=R;var re=e.alternate;re!==null&&(re=re.updateQueue,w=re.lastBaseUpdate,w!==b&&(w===null?re.firstBaseUpdate=j:w.next=j,re.lastBaseUpdate=R))}if(g!==null){var me=f.baseState;b=0,re=j=R=null,w=g;do{var Y=w.lane&-536870913,Q=Y!==w.lane;if(Q?(Rt&Y)===Y:(a&Y)===Y){Y!==0&&Y===ml&&(ou=!0),re!==null&&(re=re.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ke=e,ct=w;Y=i;var Kt=l;switch(ct.tag){case 1:if(Ke=ct.payload,typeof Ke=="function"){me=Ke.call(Kt,me,Y);break e}me=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=ct.payload,Y=typeof Ke=="function"?Ke.call(Kt,me,Y):Ke,Y==null)break e;me=S({},me,Y);break e;case 2:go=!0}}Y=w.callback,Y!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},re===null?(j=re=Q,R=me):re=re.next=Q,b|=Y;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);re===null&&(R=me),f.baseState=R,f.firstBaseUpdate=j,f.lastBaseUpdate=re,g===null&&(f.shared.lanes=0),Co|=b,e.lanes=b,e.memoizedState=me}}function sf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function af(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)sf(l[e],i)}var xl=z(null),ra=z(0);function rf(e,i){e=no,ee(ra,e),ee(xl,i),no=e|i.baseLanes}function lu(){ee(ra,no),ee(xl,xl.current)}function su(){no=ra.current,M(xl),M(ra)}var ni=z(null),gi=null;function xo(e){var i=e.alternate;ee(pn,pn.current&1),ee(ni,e),gi===null&&(i===null||xl.current!==null||i.memoizedState!==null)&&(gi=e)}function au(e){ee(pn,pn.current),ee(ni,e),gi===null&&(gi=e)}function uf(e){e.tag===22?(ee(pn,pn.current),ee(ni,e),gi===null&&(gi=e)):bo()}function bo(){ee(pn,pn.current),ee(ni,ni.current)}function ii(e){M(ni),gi===e&&(gi=null),M(pn)}var pn=z(0);function ua(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||pc(l)||hc(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,Tt=null,Yt=null,yn=null,ca=!1,bl=!1,Zo=!1,da=0,cs=0,Sl=null,Fy=0;function cn(){throw Error(s(321))}function ru(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ei(e[l],i[l]))return!1;return!0}function uu(e,i,l,a,f,g){return Ji=g,Tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?jf:Eu,Zo=!1,g=l(a,f),Zo=!1,bl&&(g=df(i,l,a,f)),cf(e),g}function cf(e){B.H=ps;var i=Yt!==null&&Yt.next!==null;if(Ji=0,yn=Yt=Tt=null,ca=!1,cs=0,Sl=null,i)throw Error(s(300));e===null||vn||(e=e.dependencies,e!==null&&ta(e)&&(vn=!0))}function df(e,i,l,a){Tt=e;var f=0;do{if(bl&&(Sl=null),cs=0,bl=!1,25<=f)throw Error(s(301));if(f+=1,yn=Yt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=Yf,g=i(l,a)}while(bl);return g}function Oy(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?ds(i):i,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(Tt.flags|=1024),i}function cu(){var e=da!==0;return da=0,e}function du(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function fu(e){if(ca){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ca=!1}Ji=0,yn=Yt=Tt=null,bl=!1,cs=da=0,Sl=null}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Tt.memoizedState=yn=e:yn=yn.next=e,yn}function hn(){if(Yt===null){var e=Tt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var i=yn===null?Tt.memoizedState:yn.next;if(i!==null)yn=i,Yt=e;else{if(e===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},yn===null?Tt.memoizedState=yn=e:yn=yn.next=e}return yn}function fa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ds(e){var i=cs;return cs+=1,Sl===null&&(Sl=[]),e=ef(Sl,e,i),i=Tt,(yn===null?i.memoizedState:yn.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?jf:Eu),e}function pa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ds(e);if(e.$$typeof===ce)return An(e)}throw Error(s(438,String(e)))}function pu(e){var i=null,l=Tt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Tt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=fa(),Tt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),a=0;a<e;a++)l[a]=Xe;return i.index++,l}function Ki(e,i){return typeof i=="function"?i(e):i}function ha(e){var i=hn();return hu(i,Yt,e)}function hu(e,i,l){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var f=e.baseQueue,g=a.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}i.baseQueue=f=g,a.pending=null}if(g=e.baseState,f===null)e.memoizedState=g;else{i=f.next;var w=b=null,R=null,j=i,re=!1;do{var me=j.lane&-536870913;if(me!==j.lane?(Rt&me)===me:(Ji&me)===me){var Y=j.revertLane;if(Y===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),me===ml&&(re=!0);else if((Ji&Y)===Y){j=j.next,Y===ml&&(re=!0);continue}else me={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(w=R=me,b=g):R=R.next=me,Tt.lanes|=Y,Co|=Y;me=j.action,Zo&&l(g,me),g=j.hasEagerState?j.eagerState:l(g,me)}else Y={lane:me,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(w=R=Y,b=g):R=R.next=Y,Tt.lanes|=me,Co|=me;j=j.next}while(j!==null&&j!==i);if(R===null?b=g:R.next=w,!ei(g,e.memoizedState)&&(vn=!0,re&&(l=gl,l!==null)))throw l;e.memoizedState=g,e.baseState=b,e.baseQueue=R,a.lastRenderedState=g}return f===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function mu(e){var i=hn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var a=l.dispatch,f=l.pending,g=i.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do g=e(g,b.action),b=b.next;while(b!==f);ei(g,i.memoizedState)||(vn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,a]}function ff(e,i,l){var a=Tt,f=hn(),g=It;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=i();var b=!ei((Yt||f).memoizedState,l);if(b&&(f.memoizedState=l,vn=!0),f=f.queue,vu(mf.bind(null,a,f,e),[e]),f.getSnapshot!==i||b||yn!==null&&yn.memoizedState.tag&1){if(a.flags|=2048,Tl(9,{destroy:void 0},hf.bind(null,a,f,l,i),null),Wt===null)throw Error(s(349));g||(Ji&127)!==0||pf(a,i,l)}return l}function pf(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Tt.updateQueue,i===null?(i=fa(),Tt.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function hf(e,i,l,a){i.value=l,i.getSnapshot=a,gf(i)&&yf(e)}function mf(e,i,l){return l(function(){gf(i)&&yf(e)})}function gf(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ei(e,l)}catch{return!0}}function yf(e){var i=Oo(e,2);i!==null&&Jn(i,e,2)}function gu(e){var i=Pn();if(typeof e=="function"){var l=e;if(e=l(),Zo){Ne(!0);try{l()}finally{Ne(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e},i}function vf(e,i,l,a){return e.baseState=l,hu(e,Yt,typeof a=="function"?a:Ki)}function qy(e,i,l,a,f){if(ya(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};B.T!==null?l(!0):g.isTransition=!1,a(g),l=i.pending,l===null?(g.next=i.pending=g,xf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function xf(e,i){var l=i.action,a=i.payload,f=e.state;if(i.isTransition){var g=B.T,b={};B.T=b;try{var w=l(f,a),R=B.S;R!==null&&R(b,w),bf(e,i,w)}catch(j){yu(e,i,j)}finally{g!==null&&b.types!==null&&(g.types=b.types),B.T=g}}else try{g=l(f,a),bf(e,i,g)}catch(j){yu(e,i,j)}}function bf(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Sf(e,i,a)},function(a){return yu(e,i,a)}):Sf(e,i,l)}function Sf(e,i,l){i.status="fulfilled",i.value=l,Tf(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,xf(e,l)))}function yu(e,i,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,Tf(i),i=i.next;while(i!==a)}e.action=null}function Tf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Cf(e,i){return i}function Ef(e,i){if(It){var l=Wt.formState;if(l!==null){e:{var a=Tt;if(It){if(on){t:{for(var f=on,g=mi;f.nodeType!==8;){if(!g){f=null;break t}if(f=yi(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){on=yi(f.nextSibling),a=f.data==="F!";break e}}ho(a)}a=!1}a&&(i=l[0])}}return l=Pn(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:i},l.queue=a,l=Of.bind(null,Tt,a),a.dispatch=l,a=gu(!1),g=Cu.bind(null,Tt,!1,a.queue),a=Pn(),f={state:i,dispatch:null,action:e,pending:null},a.queue=f,l=qy.bind(null,Tt,f,g,l),f.dispatch=l,a.memoizedState=e,[i,l,!1]}function wf(e){var i=hn();return _f(i,Yt,e)}function _f(e,i,l){if(i=hu(e,i,Cf)[0],e=ha(Ki)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=ds(i)}catch(b){throw b===yl?oa:b}else a=i;i=hn();var f=i.queue,g=f.dispatch;return l!==i.memoizedState&&(Tt.flags|=2048,Tl(9,{destroy:void 0},$y.bind(null,f,l),null)),[a,g,e]}function $y(e,i){e.action=i}function Af(e){var i=hn(),l=Yt;if(l!==null)return _f(i,l,e);hn(),i=i.memoizedState,l=hn();var a=l.queue.dispatch;return l.memoizedState=e,[i,a,!1]}function Tl(e,i,l,a){return e={tag:e,create:l,deps:a,inst:i,next:null},i=Tt.updateQueue,i===null&&(i=fa(),Tt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,i.lastEffect=e),e}function Nf(){return hn().memoizedState}function ma(e,i,l,a){var f=Pn();Tt.flags|=e,f.memoizedState=Tl(1|i,{destroy:void 0},l,a===void 0?null:a)}function ga(e,i,l,a){var f=hn();a=a===void 0?null:a;var g=f.memoizedState.inst;Yt!==null&&a!==null&&ru(a,Yt.memoizedState.deps)?f.memoizedState=Tl(i,g,l,a):(Tt.flags|=e,f.memoizedState=Tl(1|i,g,l,a))}function Mf(e,i){ma(8390656,8,e,i)}function vu(e,i){ga(2048,8,e,i)}function jy(e){Tt.flags|=4;var i=Tt.updateQueue;if(i===null)i=fa(),Tt.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function Rf(e){var i=hn().memoizedState;return jy({ref:i,nextImpl:e}),function(){if((Vt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function kf(e,i){return ga(4,2,e,i)}function If(e,i){return ga(4,4,e,i)}function zf(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Df(e,i,l){l=l!=null?l.concat([e]):null,ga(4,4,zf.bind(null,i,e),l)}function xu(){}function Uf(e,i){var l=hn();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&ru(i,a[1])?a[0]:(l.memoizedState=[e,i],e)}function Lf(e,i){var l=hn();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&ru(i,a[1]))return a[0];if(a=e(),Zo){Ne(!0);try{e()}finally{Ne(!1)}}return l.memoizedState=[a,i],a}function bu(e,i,l){return l===void 0||(Ji&1073741824)!==0&&(Rt&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=Pp(),Tt.lanes|=e,Co|=e,l)}function Pf(e,i,l,a){return ei(l,i)?l:xl.current!==null?(e=bu(e,l,a),ei(e,i)||(vn=!0),e):(Ji&42)===0||(Ji&1073741824)!==0&&(Rt&261930)===0?(vn=!0,e.memoizedState=l):(e=Pp(),Tt.lanes|=e,Co|=e,i)}function Gf(e,i,l,a,f){var g=ve.p;ve.p=g!==0&&8>g?g:8;var b=B.T,w={};B.T=w,Cu(e,!1,i,l);try{var R=f(),j=B.S;if(j!==null&&j(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var re=By(R,a);fs(e,i,re,si(e))}else fs(e,i,a,si(e))}catch(me){fs(e,i,{then:function(){},status:"rejected",reason:me},si())}finally{ve.p=g,b!==null&&w.types!==null&&(b.types=w.types),B.T=b}}function Yy(){}function Su(e,i,l,a){if(e.tag!==5)throw Error(s(476));var f=Hf(e).queue;Gf(e,f,i,ue,l===null?Yy:function(){return Vf(e),l(a)})}function Hf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:ue},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Vf(e){var i=Hf(e);i.next===null&&(i=e.alternate.memoizedState),fs(e,i.next.queue,{},si())}function Tu(){return An(Ms)}function Bf(){return hn().memoizedState}function Ff(){return hn().memoizedState}function Jy(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=si();e=yo(l);var a=vo(i,e,l);a!==null&&(Jn(a,i,l),as(a,i,l)),i={cache:Qr()},e.payload=i;return}i=i.return}}function Ky(e,i,l){var a=si();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ya(e)?qf(i,l):(l=Vr(e,i,l,a),l!==null&&(Jn(l,e,a),$f(l,i,a)))}function Of(e,i,l){var a=si();fs(e,i,l,a)}function fs(e,i,l,a){var f={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ya(e))qf(i,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,w=g(b,l);if(f.hasEagerState=!0,f.eagerState=w,ei(w,b))return Qs(e,i,f,0),Wt===null&&Xs(),!1}catch{}if(l=Vr(e,i,f,a),l!==null)return Jn(l,e,a),$f(l,i,a),!0}return!1}function Cu(e,i,l,a){if(a={lane:2,revertLane:tc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ya(e)){if(i)throw Error(s(479))}else i=Vr(e,l,a,2),i!==null&&Jn(i,e,2)}function ya(e){var i=e.alternate;return e===Tt||i!==null&&i===Tt}function qf(e,i){bl=ca=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function $f(e,i,l){if((l&4194048)!==0){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,fn(e,l)}}var ps={readContext:An,use:pa,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};ps.useEffectEvent=cn;var jf={readContext:An,use:pa,useCallback:function(e,i){return Pn().memoizedState=[e,i===void 0?null:i],e},useContext:An,useEffect:Mf,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,ma(4194308,4,zf.bind(null,i,e),l)},useLayoutEffect:function(e,i){return ma(4194308,4,e,i)},useInsertionEffect:function(e,i){ma(4,2,e,i)},useMemo:function(e,i){var l=Pn();i=i===void 0?null:i;var a=e();if(Zo){Ne(!0);try{e()}finally{Ne(!1)}}return l.memoizedState=[a,i],a},useReducer:function(e,i,l){var a=Pn();if(l!==void 0){var f=l(i);if(Zo){Ne(!0);try{l(i)}finally{Ne(!1)}}}else f=i;return a.memoizedState=a.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},a.queue=e,e=e.dispatch=Ky.bind(null,Tt,e),[a.memoizedState,e]},useRef:function(e){var i=Pn();return e={current:e},i.memoizedState=e},useState:function(e){e=gu(e);var i=e.queue,l=Of.bind(null,Tt,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:xu,useDeferredValue:function(e,i){var l=Pn();return bu(l,e,i)},useTransition:function(){var e=gu(!1);return e=Gf.bind(null,Tt,e.queue,!0,!1),Pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var a=Tt,f=Pn();if(It){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Wt===null)throw Error(s(349));(Rt&127)!==0||pf(a,i,l)}f.memoizedState=l;var g={value:l,getSnapshot:i};return f.queue=g,Mf(mf.bind(null,a,g,e),[e]),a.flags|=2048,Tl(9,{destroy:void 0},hf.bind(null,a,g,l,i),null),l},useId:function(){var e=Pn(),i=Wt.identifierPrefix;if(It){var l=Ui,a=Di;l=(a&~(1<<32-Oe(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=da++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Fy++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Tu,useFormState:Ef,useActionState:Ef,useOptimistic:function(e){var i=Pn();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Cu.bind(null,Tt,!0,l),l.dispatch=i,[e,i]},useMemoCache:pu,useCacheRefresh:function(){return Pn().memoizedState=Jy.bind(null,Tt)},useEffectEvent:function(e){var i=Pn(),l={impl:e};return i.memoizedState=l,function(){if((Vt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Eu={readContext:An,use:pa,useCallback:Uf,useContext:An,useEffect:vu,useImperativeHandle:Df,useInsertionEffect:kf,useLayoutEffect:If,useMemo:Lf,useReducer:ha,useRef:Nf,useState:function(){return ha(Ki)},useDebugValue:xu,useDeferredValue:function(e,i){var l=hn();return Pf(l,Yt.memoizedState,e,i)},useTransition:function(){var e=ha(Ki)[0],i=hn().memoizedState;return[typeof e=="boolean"?e:ds(e),i]},useSyncExternalStore:ff,useId:Bf,useHostTransitionStatus:Tu,useFormState:wf,useActionState:wf,useOptimistic:function(e,i){var l=hn();return vf(l,Yt,e,i)},useMemoCache:pu,useCacheRefresh:Ff};Eu.useEffectEvent=Rf;var Yf={readContext:An,use:pa,useCallback:Uf,useContext:An,useEffect:vu,useImperativeHandle:Df,useInsertionEffect:kf,useLayoutEffect:If,useMemo:Lf,useReducer:mu,useRef:Nf,useState:function(){return mu(Ki)},useDebugValue:xu,useDeferredValue:function(e,i){var l=hn();return Yt===null?bu(l,e,i):Pf(l,Yt.memoizedState,e,i)},useTransition:function(){var e=mu(Ki)[0],i=hn().memoizedState;return[typeof e=="boolean"?e:ds(e),i]},useSyncExternalStore:ff,useId:Bf,useHostTransitionStatus:Tu,useFormState:Af,useActionState:Af,useOptimistic:function(e,i){var l=hn();return Yt!==null?vf(l,Yt,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:pu,useCacheRefresh:Ff};Yf.useEffectEvent=Rf;function wu(e,i,l,a){i=e.memoizedState,l=l(a,i),l=l==null?i:S({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var _u={enqueueSetState:function(e,i,l){e=e._reactInternals;var a=si(),f=yo(a);f.payload=i,l!=null&&(f.callback=l),i=vo(e,f,a),i!==null&&(Jn(i,e,a),as(i,e,a))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var a=si(),f=yo(a);f.tag=1,f.payload=i,l!=null&&(f.callback=l),i=vo(e,f,a),i!==null&&(Jn(i,e,a),as(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=si(),a=yo(l);a.tag=2,i!=null&&(a.callback=i),i=vo(e,a,l),i!==null&&(Jn(i,e,l),as(i,e,l))}};function Jf(e,i,l,a,f,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,b):i.prototype&&i.prototype.isPureReactComponent?!Wl(l,a)||!Wl(f,g):!0}function Kf(e,i,l,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==e&&_u.enqueueReplaceState(i,i.state,null)}function Wo(e,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(e=e.defaultProps){l===i&&(l=S({},l));for(var f in e)l[f]===void 0&&(l[f]=e[f])}return l}function Xf(e){Ks(e)}function Qf(e){console.error(e)}function Zf(e){Ks(e)}function va(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function Wf(e,i,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Au(e,i,l){return l=yo(l),l.tag=3,l.payload={element:null},l.callback=function(){va(e,i)},l}function ep(e){return e=yo(e),e.tag=3,e}function tp(e,i,l,a){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;e.payload=function(){return f(g)},e.callback=function(){Wf(i,l,a)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Wf(i,l,a),typeof f!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var w=a.stack;this.componentDidCatch(a.value,{componentStack:w!==null?w:""})})}function Xy(e,i,l,a,f){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&hl(i,l,f,!0),l=ni.current,l!==null){switch(l.tag){case 31:case 13:return gi===null?Ra():l.alternate===null&&dn===0&&(dn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,a===la?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),Zu(e,a,f)),!1;case 22:return l.flags|=65536,a===la?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),Zu(e,a,f)),!1}throw Error(s(435,l.tag))}return Zu(e,a,f),Ra(),!1}if(It)return i=ni.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,a!==jr&&(e=Error(s(422),{cause:a}),ns(fi(e,l)))):(a!==jr&&(i=Error(s(423),{cause:a}),ns(fi(i,l))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,a=fi(a,l),f=Au(e.stateNode,a,f),iu(e,f),dn!==4&&(dn=2)),!1;var g=Error(s(520),{cause:a});if(g=fi(g,l),Ss===null?Ss=[g]:Ss.push(g),dn!==4&&(dn=2),i===null)return!0;a=fi(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=f&-f,l.lanes|=e,e=Au(l.stateNode,a,e),iu(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Eo===null||!Eo.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=ep(f),tp(f,e,l,a),iu(l,f),!1}l=l.return}while(l!==null);return!1}var Nu=Error(s(461)),vn=!1;function Nn(e,i,l,a){i.child=e===null?lf(i,null,l,a):Qo(i,e.child,l,a)}function np(e,i,l,a,f){l=l.render;var g=i.ref;if("ref"in a){var b={};for(var w in a)w!=="ref"&&(b[w]=a[w])}else b=a;return Yo(i),a=uu(e,i,l,b,g,f),w=cu(),e!==null&&!vn?(du(e,i,f),Xi(e,i,f)):(It&&w&&qr(i),i.flags|=1,Nn(e,i,a,f),i.child)}function ip(e,i,l,a,f){if(e===null){var g=l.type;return typeof g=="function"&&!Br(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,op(e,i,g,a,f)):(e=Ws(l.type,null,a,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!Lu(e,f)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:Wl,l(b,a)&&e.ref===i.ref)return Xi(e,i,f)}return i.flags|=1,e=qi(g,a),e.ref=i.ref,e.return=i,i.child=e}function op(e,i,l,a,f){if(e!==null){var g=e.memoizedProps;if(Wl(g,a)&&e.ref===i.ref)if(vn=!1,i.pendingProps=a=g,Lu(e,f))(e.flags&131072)!==0&&(vn=!0);else return i.lanes=e.lanes,Xi(e,i,f)}return Mu(e,i,l,a,f)}function lp(e,i,l,a){var f=a.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(a=i.child=e.child,f=0;a!==null;)f=f|a.lanes|a.childLanes,a=a.sibling;a=f&~g}else a=0,i.child=null;return sp(e,i,g,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&ia(i,g!==null?g.cachePool:null),g!==null?rf(i,g):lu(),uf(i);else return a=i.lanes=536870912,sp(e,i,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(ia(i,g.cachePool),rf(i,g),bo(),i.memoizedState=null):(e!==null&&ia(i,null),lu(),bo());return Nn(e,i,f,l),i.child}function hs(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function sp(e,i,l,a,f){var g=Wr();return g=g===null?null:{parent:gn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&ia(i,null),lu(),uf(i),e!==null&&hl(e,i,a,!0),i.childLanes=f,null}function xa(e,i){return i=Sa({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function ap(e,i,l){return Qo(i,e.child,null,l),e=xa(i,i.pendingProps),e.flags|=2,ii(i),i.memoizedState=null,e}function Qy(e,i,l){var a=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(It){if(a.mode==="hidden")return e=xa(i,a),i.lanes=536870912,hs(null,e);if(au(i),(e=on)?(e=xh(e,mi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:fo!==null?{id:Di,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=Od(e),l.return=i,i.child=l,_n=i,on=null)):e=null,e===null)throw ho(i);return i.lanes=536870912,null}return xa(i,a)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(au(i),f)if(i.flags&256)i.flags&=-257,i=ap(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(vn||hl(e,i,l,!1),f=(l&e.childLanes)!==0,vn||f){if(a=Wt,a!==null&&(b=Vn(a,l),b!==0&&b!==g.retryLane))throw g.retryLane=b,Oo(e,b),Jn(a,e,b),Nu;Ra(),i=ap(e,i,l)}else e=g.treeContext,on=yi(b.nextSibling),_n=i,It=!0,po=null,mi=!1,e!==null&&jd(i,e),i=xa(i,a),i.flags|=4096;return i}return e=qi(e.child,{mode:a.mode,children:a.children}),e.ref=i.ref,i.child=e,e.return=i,e}function ba(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function Mu(e,i,l,a,f){return Yo(i),l=uu(e,i,l,a,void 0,f),a=cu(),e!==null&&!vn?(du(e,i,f),Xi(e,i,f)):(It&&a&&qr(i),i.flags|=1,Nn(e,i,l,f),i.child)}function rp(e,i,l,a,f,g){return Yo(i),i.updateQueue=null,l=df(i,a,l,f),cf(e),a=cu(),e!==null&&!vn?(du(e,i,g),Xi(e,i,g)):(It&&a&&qr(i),i.flags|=1,Nn(e,i,l,g),i.child)}function up(e,i,l,a,f){if(Yo(i),i.stateNode===null){var g=cl,b=l.contextType;typeof b=="object"&&b!==null&&(g=An(b)),g=new l(a,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=_u,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=a,g.state=i.memoizedState,g.refs={},tu(i),b=l.contextType,g.context=typeof b=="object"&&b!==null?An(b):cl,g.state=i.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(wu(i,l,b,a),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&_u.enqueueReplaceState(g,g.state,null),us(i,a,g,f),rs(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(e===null){g=i.stateNode;var w=i.memoizedProps,R=Wo(l,w);g.props=R;var j=g.context,re=l.contextType;b=cl,typeof re=="object"&&re!==null&&(b=An(re));var me=l.getDerivedStateFromProps;re=typeof me=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||j!==b)&&Kf(i,g,a,b),go=!1;var Y=i.memoizedState;g.state=Y,us(i,a,g,f),rs(),j=i.memoizedState,w||Y!==j||go?(typeof me=="function"&&(wu(i,l,me,a),j=i.memoizedState),(R=go||Jf(i,l,R,a,Y,j,b))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=j),g.props=a,g.state=j,g.context=b,a=R):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{g=i.stateNode,nu(e,i),b=i.memoizedProps,re=Wo(l,b),g.props=re,me=i.pendingProps,Y=g.context,j=l.contextType,R=cl,typeof j=="object"&&j!==null&&(R=An(j)),w=l.getDerivedStateFromProps,(j=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==me||Y!==R)&&Kf(i,g,a,R),go=!1,Y=i.memoizedState,g.state=Y,us(i,a,g,f),rs();var Q=i.memoizedState;b!==me||Y!==Q||go||e!==null&&e.dependencies!==null&&ta(e.dependencies)?(typeof w=="function"&&(wu(i,l,w,a),Q=i.memoizedState),(re=go||Jf(i,l,re,a,Y,Q,R)||e!==null&&e.dependencies!==null&&ta(e.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,Q,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,Q,R)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=Q),g.props=a,g.state=Q,g.context=R,a=re):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=1024),a=!1)}return g=a,ba(e,i),a=(i.flags&128)!==0,g||a?(g=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&a?(i.child=Qo(i,e.child,null,f),i.child=Qo(i,null,l,f)):Nn(e,i,l,f),i.memoizedState=g.state,e=i.child):e=Xi(e,i,f),e}function cp(e,i,l,a){return $o(),i.flags|=256,Nn(e,i,l,a),i.child}var Ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ku(e){return{baseLanes:e,cachePool:Zd()}}function Iu(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=li),e}function dp(e,i,l){var a=i.pendingProps,f=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(pn.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(It){if(f?xo(i):bo(),(e=on)?(e=xh(e,mi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:fo!==null?{id:Di,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=Od(e),l.return=i,i.child=l,_n=i,on=null)):e=null,e===null)throw ho(i);return hc(e)?i.lanes=32:i.lanes=536870912,null}var w=a.children;return a=a.fallback,f?(bo(),f=i.mode,w=Sa({mode:"hidden",children:w},f),a=qo(a,f,l,null),w.return=i,a.return=i,w.sibling=a,i.child=w,a=i.child,a.memoizedState=ku(l),a.childLanes=Iu(e,b,l),i.memoizedState=Ru,hs(null,a)):(xo(i),zu(i,w))}var R=e.memoizedState;if(R!==null&&(w=R.dehydrated,w!==null)){if(g)i.flags&256?(xo(i),i.flags&=-257,i=Du(e,i,l)):i.memoizedState!==null?(bo(),i.child=e.child,i.flags|=128,i=null):(bo(),w=a.fallback,f=i.mode,a=Sa({mode:"visible",children:a.children},f),w=qo(w,f,l,null),w.flags|=2,a.return=i,w.return=i,a.sibling=w,i.child=a,Qo(i,e.child,null,l),a=i.child,a.memoizedState=ku(l),a.childLanes=Iu(e,b,l),i.memoizedState=Ru,i=hs(null,a));else if(xo(i),hc(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var j=b.dgst;b=j,a=Error(s(419)),a.stack="",a.digest=b,ns({value:a,source:null,stack:null}),i=Du(e,i,l)}else if(vn||hl(e,i,l,!1),b=(l&e.childLanes)!==0,vn||b){if(b=Wt,b!==null&&(a=Vn(b,l),a!==0&&a!==R.retryLane))throw R.retryLane=a,Oo(e,a),Jn(b,e,a),Nu;pc(w)||Ra(),i=Du(e,i,l)}else pc(w)?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,on=yi(w.nextSibling),_n=i,It=!0,po=null,mi=!1,e!==null&&jd(i,e),i=zu(i,a.children),i.flags|=4096);return i}return f?(bo(),w=a.fallback,f=i.mode,R=e.child,j=R.sibling,a=qi(R,{mode:"hidden",children:a.children}),a.subtreeFlags=R.subtreeFlags&65011712,j!==null?w=qi(j,w):(w=qo(w,f,l,null),w.flags|=2),w.return=i,a.return=i,a.sibling=w,i.child=a,hs(null,a),a=i.child,w=e.child.memoizedState,w===null?w=ku(l):(f=w.cachePool,f!==null?(R=gn._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=Zd(),w={baseLanes:w.baseLanes|l,cachePool:f}),a.memoizedState=w,a.childLanes=Iu(e,b,l),i.memoizedState=Ru,hs(e.child,a)):(xo(i),l=e.child,e=l.sibling,l=qi(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=l,i.memoizedState=null,l)}function zu(e,i){return i=Sa({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Sa(e,i){return e=ti(22,e,null,i),e.lanes=0,e}function Du(e,i,l){return Qo(i,e.child,null,l),e=zu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function fp(e,i,l){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),Kr(e.return,i,l)}function Uu(e,i,l,a,f,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:f,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=a,b.tail=l,b.tailMode=f,b.treeForkCount=g)}function pp(e,i,l){var a=i.pendingProps,f=a.revealOrder,g=a.tail;a=a.children;var b=pn.current,w=(b&2)!==0;if(w?(b=b&1|2,i.flags|=128):b&=1,ee(pn,b),Nn(e,i,a,l),a=It?ts:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fp(e,l,i);else if(e.tag===19)fp(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(l=i.child,f=null;l!==null;)e=l.alternate,e!==null&&ua(e)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),Uu(i,!1,f,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&ua(e)===null){i.child=f;break}e=f.sibling,f.sibling=l,l=f,f=e}Uu(i,!0,l,null,g,a);break;case"together":Uu(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function Xi(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),Co|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(hl(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,l=qi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=qi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function Lu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ta(e)))}function Zy(e,i,l){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),mo(i,gn,e.memoizedState.cache),$o();break;case 27:case 5:ke(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:mo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,au(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(xo(i),i.flags|=128,null):(l&i.child.childLanes)!==0?dp(e,i,l):(xo(i),e=Xi(e,i,l),e!==null?e.sibling:null);xo(i);break;case 19:var f=(e.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(hl(e,i,l,!1),a=(l&i.childLanes)!==0),f){if(a)return pp(e,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(pn,pn.current),a)break;return null;case 22:return i.lanes=0,lp(e,i,l,i.pendingProps);case 24:mo(i,gn,e.memoizedState.cache)}return Xi(e,i,l)}function hp(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)vn=!0;else{if(!Lu(e,l)&&(i.flags&128)===0)return vn=!1,Zy(e,i,l);vn=(e.flags&131072)!==0}else vn=!1,It&&(i.flags&1048576)!==0&&$d(i,ts,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(e=Ko(i.elementType),i.type=e,typeof e=="function")Br(e)?(a=Wo(e,a),i.tag=1,i=up(null,i,e,a,l)):(i.tag=0,i=Mu(null,i,e,a,l));else{if(e!=null){var f=e.$$typeof;if(f===Ie){i.tag=11,i=np(null,i,e,a,l);break e}else if(f===xe){i.tag=14,i=ip(null,i,e,a,l);break e}}throw i=Mt(e)||e,Error(s(306,i,""))}}return i;case 0:return Mu(e,i,i.type,i.pendingProps,l);case 1:return a=i.type,f=Wo(a,i.pendingProps),up(e,i,a,f,l);case 3:e:{if(ne(i,i.stateNode.containerInfo),e===null)throw Error(s(387));a=i.pendingProps;var g=i.memoizedState;f=g.element,nu(e,i),us(i,a,null,l);var b=i.memoizedState;if(a=b.cache,mo(i,gn,a),a!==g.cache&&Xr(i,[gn],l,!0),rs(),a=b.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=cp(e,i,a,l);break e}else if(a!==f){f=fi(Error(s(424)),i),ns(f),i=cp(e,i,a,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,on=yi(e.firstChild),_n=i,It=!0,po=null,mi=!0,l=lf(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if($o(),a===f){i=Xi(e,i,l);break e}Nn(e,i,a,l)}i=i.child}return i;case 26:return ba(e,i),e===null?(l=wh(i.type,null,i.pendingProps,null))?i.memoizedState=l:It||(l=i.type,e=i.pendingProps,a=Pa(_.current).createElement(l),a[Qe]=i,a[Et]=e,Mn(a,l,e),an(a),i.stateNode=a):i.memoizedState=wh(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return ke(i),e===null&&It&&(a=i.stateNode=Th(i.type,i.pendingProps,_.current),_n=i,mi=!0,f=on,No(i.type)?(mc=f,on=yi(a.firstChild)):on=f),Nn(e,i,i.pendingProps.children,l),ba(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&It&&((f=a=on)&&(a=Nv(a,i.type,i.pendingProps,mi),a!==null?(i.stateNode=a,_n=i,on=yi(a.firstChild),mi=!1,f=!0):f=!1),f||ho(i)),ke(i),f=i.type,g=i.pendingProps,b=e!==null?e.memoizedProps:null,a=g.children,cc(f,g)?a=null:b!==null&&cc(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=uu(e,i,Oy,null,null,l),Ms._currentValue=f),ba(e,i),Nn(e,i,a,l),i.child;case 6:return e===null&&It&&((e=l=on)&&(l=Mv(l,i.pendingProps,mi),l!==null?(i.stateNode=l,_n=i,on=null,e=!0):e=!1),e||ho(i)),null;case 13:return dp(e,i,l);case 4:return ne(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Qo(i,null,a,l):Nn(e,i,a,l),i.child;case 11:return np(e,i,i.type,i.pendingProps,l);case 7:return Nn(e,i,i.pendingProps,l),i.child;case 8:return Nn(e,i,i.pendingProps.children,l),i.child;case 12:return Nn(e,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,mo(i,i.type,a.value),Nn(e,i,a.children,l),i.child;case 9:return f=i.type._context,a=i.pendingProps.children,Yo(i),f=An(f),a=a(f),i.flags|=1,Nn(e,i,a,l),i.child;case 14:return ip(e,i,i.type,i.pendingProps,l);case 15:return op(e,i,i.type,i.pendingProps,l);case 19:return pp(e,i,l);case 31:return Qy(e,i,l);case 22:return lp(e,i,l,i.pendingProps);case 24:return Yo(i),a=An(gn),e===null?(f=Wr(),f===null&&(f=Wt,g=Qr(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),i.memoizedState={parent:a,cache:f},tu(i),mo(i,gn,f)):((e.lanes&l)!==0&&(nu(e,i),us(i,null,null,l),rs()),f=e.memoizedState,g=i.memoizedState,f.parent!==a?(f={parent:a,cache:a},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),mo(i,gn,a)):(a=g.cache,mo(i,gn,a),a!==f.cache&&Xr(i,[gn],l,!0))),Nn(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Qi(e){e.flags|=4}function Pu(e,i,l,a,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Bp())e.flags|=8192;else throw Xo=la,eu}else e.flags&=-16777217}function mp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rh(i))if(Bp())e.flags|=8192;else throw Xo=la,eu}function Ta(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Pe():536870912,e.lanes|=i,_l|=i)}function ms(e,i){if(!It)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ln(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(i)for(var f=e.child;f!==null;)l|=f.lanes|f.childLanes,a|=f.subtreeFlags&65011712,a|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)l|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=l,i}function Wy(e,i,l){var a=i.pendingProps;switch($r(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(i),null;case 1:return ln(i),null;case 3:return l=i.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Yi(gn),ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(pl(i)?Qi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yr())),ln(i),null;case 26:var f=i.type,g=i.memoizedState;return e===null?(Qi(i),g!==null?(ln(i),mp(i,g)):(ln(i),Pu(i,f,null,a,l))):g?g!==e.memoizedState?(Qi(i),ln(i),mp(i,g)):(ln(i),i.flags&=-16777217):(e=e.memoizedProps,e!==a&&Qi(i),ln(i),Pu(i,f,e,a,l)),null;case 27:if(Le(i),l=_.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&Qi(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return ln(i),null}e=Te.current,pl(i)?Yd(i):(e=Th(f,a,l),i.stateNode=e,Qi(i))}return ln(i),null;case 5:if(Le(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&Qi(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return ln(i),null}if(g=Te.current,pl(i))Yd(i);else{var b=Pa(_.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?b.createElement("select",{is:a.is}):b.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?b.createElement(f,{is:a.is}):b.createElement(f)}}g[Qe]=i,g[Et]=a;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(Mn(g,f,a),f){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Qi(i)}}return ln(i),Pu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==a&&Qi(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(e=_.current,pl(i)){if(e=i.stateNode,l=i.memoizedProps,a=null,f=_n,f!==null)switch(f.tag){case 27:case 5:a=f.memoizedProps}e[Qe]=i,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||dh(e.nodeValue,l)),e||ho(i,!0)}else e=Pa(e).createTextNode(a),e[Qe]=i,i.stateNode=e}return ln(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(a=pl(i),l!==null){if(e===null){if(!a)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Qe]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ln(i),e=!1}else l=Yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(ii(i),i):(ii(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ln(i),null;case 13:if(a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=pl(i),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Qe]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ln(i),f=!1}else f=Yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ii(i),i):(ii(i),null)}return ii(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=i.child,f=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(f=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==f&&(a.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),Ta(i,i.updateQueue),ln(i),null);case 4:return ie(),e===null&&lc(i.stateNode.containerInfo),ln(i),null;case 10:return Yi(i.type),ln(i),null;case 19:if(M(pn),a=i.memoizedState,a===null)return ln(i),null;if(f=(i.flags&128)!==0,g=a.rendering,g===null)if(f)ms(a,!1);else{if(dn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=ua(e),g!==null){for(i.flags|=128,ms(a,!1),e=g.updateQueue,i.updateQueue=e,Ta(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)Fd(l,e),l=l.sibling;return ee(pn,pn.current&1|2),It&&$i(i,a.treeForkCount),i.child}e=e.sibling}a.tail!==null&&ye()>Aa&&(i.flags|=128,f=!0,ms(a,!1),i.lanes=4194304)}else{if(!f)if(e=ua(g),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Ta(i,e),ms(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!It)return ln(i),null}else 2*ye()-a.renderingStartTime>Aa&&l!==536870912&&(i.flags|=128,f=!0,ms(a,!1),i.lanes=4194304);a.isBackwards?(g.sibling=i.child,i.child=g):(e=a.last,e!==null?e.sibling=g:i.child=g,a.last=g)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ye(),e.sibling=null,l=pn.current,ee(pn,f?l&1|2:l&1),It&&$i(i,a.treeForkCount),e):(ln(i),null);case 22:case 23:return ii(i),su(),a=i.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(ln(i),i.subtreeFlags&6&&(i.flags|=8192)):ln(i),l=i.updateQueue,l!==null&&Ta(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),e!==null&&M(Jo),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Yi(gn),ln(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ev(e,i){switch($r(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Yi(gn),ie(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Le(i),null;case 31:if(i.memoizedState!==null){if(ii(i),i.alternate===null)throw Error(s(340));$o()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ii(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));$o()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return M(pn),null;case 4:return ie(),null;case 10:return Yi(i.type),null;case 22:case 23:return ii(i),su(),e!==null&&M(Jo),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Yi(gn),null;case 25:return null;default:return null}}function gp(e,i){switch($r(i),i.tag){case 3:Yi(gn),ie();break;case 26:case 27:case 5:Le(i);break;case 4:ie();break;case 31:i.memoizedState!==null&&ii(i);break;case 13:ii(i);break;case 19:M(pn);break;case 10:Yi(i.type);break;case 22:case 23:ii(i),su(),e!==null&&M(Jo);break;case 24:Yi(gn)}}function gs(e,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var f=a.next;l=f;do{if((l.tag&e)===e){a=void 0;var g=l.create,b=l.inst;a=g(),b.destroy=a}l=l.next}while(l!==f)}}catch(w){$t(i,i.return,w)}}function So(e,i,l){try{var a=i.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var g=f.next;a=g;do{if((a.tag&e)===e){var b=a.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=i;var R=l,j=w;try{j()}catch(re){$t(f,R,re)}}}a=a.next}while(a!==g)}}catch(re){$t(i,i.return,re)}}function yp(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{af(i,l)}catch(a){$t(e,e.return,a)}}}function vp(e,i,l){l.props=Wo(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){$t(e,i,a)}}function ys(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(f){$t(e,i,f)}}function Li(e,i){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(f){$t(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){$t(e,i,f)}else l.current=null}function xp(e){var i=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(f){$t(e,e.return,f)}}function Gu(e,i,l){try{var a=e.stateNode;Tv(a,e.type,l,i),a[Et]=i}catch(f){$t(e,e.return,f)}}function bp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&No(e.type)||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&No(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vu(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=mn));else if(a!==4&&(a===27&&No(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(Vu(e,i,l),e=e.sibling;e!==null;)Vu(e,i,l),e=e.sibling}function Ca(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(a!==4&&(a===27&&No(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ca(e,i,l),e=e.sibling;e!==null;)Ca(e,i,l),e=e.sibling}function Sp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Mn(i,a,l),i[Qe]=e,i[Et]=l}catch(g){$t(e,e.return,g)}}var Zi=!1,xn=!1,Bu=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function tv(e,i){if(e=e.containerInfo,rc=qa,e=zd(e),Dr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var f=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,w=-1,R=-1,j=0,re=0,me=e,Y=null;t:for(;;){for(var Q;me!==l||f!==0&&me.nodeType!==3||(w=b+f),me!==g||a!==0&&me.nodeType!==3||(R=b+a),me.nodeType===3&&(b+=me.nodeValue.length),(Q=me.firstChild)!==null;)Y=me,me=Q;for(;;){if(me===e)break t;if(Y===l&&++j===f&&(w=b),Y===g&&++re===a&&(R=b),(Q=me.nextSibling)!==null)break;me=Y,Y=me.parentNode}me=Q}l=w===-1||R===-1?null:{start:w,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(uc={focusedElem:e,selectionRange:l},qa=!1,Cn=i;Cn!==null;)if(i=Cn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Cn=e;else for(;Cn!==null;){switch(i=Cn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)f=e[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,f=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var Ke=Wo(l.type,f);e=a.getSnapshotBeforeUpdate(Ke,g),a.__reactInternalSnapshotBeforeUpdate=e}catch(ct){$t(l,l.return,ct)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)fc(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Cn=e;break}Cn=i.return}}function Cp(e,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:eo(e,l),a&4&&gs(5,l);break;case 1:if(eo(e,l),a&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(b){$t(l,l.return,b)}else{var f=Wo(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){$t(l,l.return,b)}}a&64&&yp(l),a&512&&ys(l,l.return);break;case 3:if(eo(e,l),a&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{af(e,i)}catch(b){$t(l,l.return,b)}}break;case 27:i===null&&a&4&&Sp(l);case 26:case 5:eo(e,l),i===null&&a&4&&xp(l),a&512&&ys(l,l.return);break;case 12:eo(e,l);break;case 31:eo(e,l),a&4&&_p(e,l);break;case 13:eo(e,l),a&4&&Ap(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=cv.bind(null,l),Rv(e,l))));break;case 22:if(a=l.memoizedState!==null||Zi,!a){i=i!==null&&i.memoizedState!==null||xn,f=Zi;var g=xn;Zi=a,(xn=i)&&!g?to(e,l,(l.subtreeFlags&8772)!==0):eo(e,l),Zi=f,xn=g}break;case 30:break;default:eo(e,l)}}function Ep(e){var i=e.alternate;i!==null&&(e.alternate=null,Ep(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Go(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rn=null,qn=!1;function Wi(e,i,l){for(l=l.child;l!==null;)wp(e,i,l),l=l.sibling}function wp(e,i,l){if(te&&typeof te.onCommitFiberUnmount=="function")try{te.onCommitFiberUnmount(ae,l)}catch{}switch(l.tag){case 26:xn||Li(l,i),Wi(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xn||Li(l,i);var a=rn,f=qn;No(l.type)&&(rn=l.stateNode,qn=!1),Wi(e,i,l),_s(l.stateNode),rn=a,qn=f;break;case 5:xn||Li(l,i);case 6:if(a=rn,f=qn,rn=null,Wi(e,i,l),rn=a,qn=f,rn!==null)if(qn)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(l.stateNode)}catch(g){$t(l,i,g)}else try{rn.removeChild(l.stateNode)}catch(g){$t(l,i,g)}break;case 18:rn!==null&&(qn?(e=rn,yh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Dl(e)):yh(rn,l.stateNode));break;case 4:a=rn,f=qn,rn=l.stateNode.containerInfo,qn=!0,Wi(e,i,l),rn=a,qn=f;break;case 0:case 11:case 14:case 15:So(2,l,i),xn||So(4,l,i),Wi(e,i,l);break;case 1:xn||(Li(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&vp(l,i,a)),Wi(e,i,l);break;case 21:Wi(e,i,l);break;case 22:xn=(a=xn)||l.memoizedState!==null,Wi(e,i,l),xn=a;break;default:Wi(e,i,l)}}function _p(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Dl(e)}catch(l){$t(i,i.return,l)}}}function Ap(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Dl(e)}catch(l){$t(i,i.return,l)}}function nv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Tp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Tp),i;default:throw Error(s(435,e.tag))}}function Ea(e,i){var l=nv(e);i.forEach(function(a){if(!l.has(a)){l.add(a);var f=dv.bind(null,e,a);a.then(f,f)}})}function $n(e,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var f=l[a],g=e,b=i,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(No(w.type)){rn=w.stateNode,qn=!1;break e}break;case 5:rn=w.stateNode,qn=!1;break e;case 3:case 4:rn=w.stateNode.containerInfo,qn=!0;break e}w=w.return}if(rn===null)throw Error(s(160));wp(g,b,f),rn=null,qn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Np(i,e),i=i.sibling}var Ai=null;function Np(e,i){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:$n(i,e),jn(e),a&4&&(So(3,e,e.return),gs(3,e),So(5,e,e.return));break;case 1:$n(i,e),jn(e),a&512&&(xn||l===null||Li(l,l.return)),a&64&&Zi&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var f=Ai;if($n(i,e),jn(e),a&512&&(xn||l===null||Li(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,f=f.ownerDocument||f;t:switch(a){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Gi]||g[Qe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(a),f.head.insertBefore(g,f.querySelector("head > title"))),Mn(g,a,l),g[Qe]=e,an(g),a=g;break e;case"link":var b=Nh("link","href",f).get(a+(l.href||""));if(b){for(var w=0;w<b.length;w++)if(g=b[w],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(w,1);break t}}g=f.createElement(a),Mn(g,a,l),f.head.appendChild(g);break;case"meta":if(b=Nh("meta","content",f).get(a+(l.content||""))){for(w=0;w<b.length;w++)if(g=b[w],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(w,1);break t}}g=f.createElement(a),Mn(g,a,l),f.head.appendChild(g);break;default:throw Error(s(468,a))}g[Qe]=e,an(g),a=g}e.stateNode=a}else Mh(f,e.type,e.stateNode);else e.stateNode=Ah(f,a,e.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?Mh(f,e.type,e.stateNode):Ah(f,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Gu(e,e.memoizedProps,l.memoizedProps)}break;case 27:$n(i,e),jn(e),a&512&&(xn||l===null||Li(l,l.return)),l!==null&&a&4&&Gu(e,e.memoizedProps,l.memoizedProps);break;case 5:if($n(i,e),jn(e),a&512&&(xn||l===null||Li(l,l.return)),e.flags&32){f=e.stateNode;try{Zn(f,"")}catch(Ke){$t(e,e.return,Ke)}}a&4&&e.stateNode!=null&&(f=e.memoizedProps,Gu(e,f,l!==null?l.memoizedProps:f)),a&1024&&(Bu=!0);break;case 6:if($n(i,e),jn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(Ke){$t(e,e.return,Ke)}}break;case 3:if(Va=null,f=Ai,Ai=Ga(i.containerInfo),$n(i,e),Ai=f,jn(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Dl(i.containerInfo)}catch(Ke){$t(e,e.return,Ke)}Bu&&(Bu=!1,Mp(e));break;case 4:a=Ai,Ai=Ga(e.stateNode.containerInfo),$n(i,e),jn(e),Ai=a;break;case 12:$n(i,e),jn(e);break;case 31:$n(i,e),jn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ea(e,a)));break;case 13:$n(i,e),jn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_a=ye()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ea(e,a)));break;case 22:f=e.memoizedState!==null;var R=l!==null&&l.memoizedState!==null,j=Zi,re=xn;if(Zi=j||f,xn=re||R,$n(i,e),xn=re,Zi=j,jn(e),a&8192)e:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(l===null||R||Zi||xn||el(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){R=l=i;try{if(g=R.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=R.stateNode;var me=R.memoizedProps.style,Y=me!=null&&me.hasOwnProperty("display")?me.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Ke){$t(R,R.return,Ke)}}}else if(i.tag===6){if(l===null){R=i;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(Ke){$t(R,R.return,Ke)}}}else if(i.tag===18){if(l===null){R=i;try{var Q=R.stateNode;f?vh(Q,!0):vh(R.stateNode,!1)}catch(Ke){$t(R,R.return,Ke)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Ea(e,l))));break;case 19:$n(i,e),jn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ea(e,a)));break;case 30:break;case 21:break;default:$n(i,e),jn(e)}}function jn(e){var i=e.flags;if(i&2){try{for(var l,a=e.return;a!==null;){if(bp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var f=l.stateNode,g=Hu(e);Ca(e,g,f);break;case 5:var b=l.stateNode;l.flags&32&&(Zn(b,""),l.flags&=-33);var w=Hu(e);Ca(e,w,b);break;case 3:case 4:var R=l.stateNode.containerInfo,j=Hu(e);Vu(e,j,R);break;default:throw Error(s(161))}}catch(re){$t(e,e.return,re)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Mp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Mp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function eo(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cp(e,i.alternate,i),i=i.sibling}function el(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:So(4,i,i.return),el(i);break;case 1:Li(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&vp(i,i.return,l),el(i);break;case 27:_s(i.stateNode);case 26:case 5:Li(i,i.return),el(i);break;case 22:i.memoizedState===null&&el(i);break;case 30:el(i);break;default:el(i)}e=e.sibling}}function to(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,f=e,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:to(f,g,l),gs(4,g);break;case 1:if(to(f,g,l),a=g,f=a.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){$t(a,a.return,j)}if(a=g,f=a.updateQueue,f!==null){var w=a.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)sf(R[f],w)}catch(j){$t(a,a.return,j)}}l&&b&64&&yp(g),ys(g,g.return);break;case 27:Sp(g);case 26:case 5:to(f,g,l),l&&a===null&&b&4&&xp(g),ys(g,g.return);break;case 12:to(f,g,l);break;case 31:to(f,g,l),l&&b&4&&_p(f,g);break;case 13:to(f,g,l),l&&b&4&&Ap(f,g);break;case 22:g.memoizedState===null&&to(f,g,l),ys(g,g.return);break;case 30:break;default:to(f,g,l)}i=i.sibling}}function Fu(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&is(l))}function Ou(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&is(e))}function Ni(e,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Rp(e,i,l,a),i=i.sibling}function Rp(e,i,l,a){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ni(e,i,l,a),f&2048&&gs(9,i);break;case 1:Ni(e,i,l,a);break;case 3:Ni(e,i,l,a),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&is(e)));break;case 12:if(f&2048){Ni(e,i,l,a),e=i.stateNode;try{var g=i.memoizedProps,b=g.id,w=g.onPostCommit;typeof w=="function"&&w(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){$t(i,i.return,R)}}else Ni(e,i,l,a);break;case 31:Ni(e,i,l,a);break;case 13:Ni(e,i,l,a);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?Ni(e,i,l,a):vs(e,i):g._visibility&2?Ni(e,i,l,a):(g._visibility|=2,Cl(e,i,l,a,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fu(b,i);break;case 24:Ni(e,i,l,a),f&2048&&Ou(i.alternate,i);break;default:Ni(e,i,l,a)}}function Cl(e,i,l,a,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,b=i,w=l,R=a,j=b.flags;switch(b.tag){case 0:case 11:case 15:Cl(g,b,w,R,f),gs(8,b);break;case 23:break;case 22:var re=b.stateNode;b.memoizedState!==null?re._visibility&2?Cl(g,b,w,R,f):vs(g,b):(re._visibility|=2,Cl(g,b,w,R,f)),f&&j&2048&&Fu(b.alternate,b);break;case 24:Cl(g,b,w,R,f),f&&j&2048&&Ou(b.alternate,b);break;default:Cl(g,b,w,R,f)}i=i.sibling}}function vs(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,a=i,f=a.flags;switch(a.tag){case 22:vs(l,a),f&2048&&Fu(a.alternate,a);break;case 24:vs(l,a),f&2048&&Ou(a.alternate,a);break;default:vs(l,a)}i=i.sibling}}var xs=8192;function El(e,i,l){if(e.subtreeFlags&xs)for(e=e.child;e!==null;)kp(e,i,l),e=e.sibling}function kp(e,i,l){switch(e.tag){case 26:El(e,i,l),e.flags&xs&&e.memoizedState!==null&&Fv(l,Ai,e.memoizedState,e.memoizedProps);break;case 5:El(e,i,l);break;case 3:case 4:var a=Ai;Ai=Ga(e.stateNode.containerInfo),El(e,i,l),Ai=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=xs,xs=16777216,El(e,i,l),xs=a):El(e,i,l));break;default:El(e,i,l)}}function Ip(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function bs(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Cn=a,Dp(a,e)}Ip(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zp(e),e=e.sibling}function zp(e){switch(e.tag){case 0:case 11:case 15:bs(e),e.flags&2048&&So(9,e,e.return);break;case 3:bs(e);break;case 12:bs(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,wa(e)):bs(e);break;default:bs(e)}}function wa(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Cn=a,Dp(a,e)}Ip(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:So(8,i,i.return),wa(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,wa(i));break;default:wa(i)}e=e.sibling}}function Dp(e,i){for(;Cn!==null;){var l=Cn;switch(l.tag){case 0:case 11:case 15:So(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:is(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Cn=a;else e:for(l=e;Cn!==null;){a=Cn;var f=a.sibling,g=a.return;if(Ep(a),a===l){Cn=null;break e}if(f!==null){f.return=g,Cn=f;break e}Cn=g}}}var iv={getCacheForType:function(e){var i=An(gn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return An(gn).controller.signal}},ov=typeof WeakMap=="function"?WeakMap:Map,Vt=0,Wt=null,At=null,Rt=0,qt=0,oi=null,To=!1,wl=!1,qu=!1,no=0,dn=0,Co=0,tl=0,$u=0,li=0,_l=0,Ss=null,Yn=null,ju=!1,_a=0,Up=0,Aa=1/0,Na=null,Eo=null,Tn=0,wo=null,Al=null,io=0,Yu=0,Ju=null,Lp=null,Ts=0,Ku=null;function si(){return(Vt&2)!==0&&Rt!==0?Rt&-Rt:B.T!==null?tc():ai()}function Pp(){if(li===0)if((Rt&536870912)===0||It){var e=Ft;Ft<<=1,(Ft&3932160)===0&&(Ft=262144),li=e}else li=536870912;return e=ni.current,e!==null&&(e.flags|=32),li}function Jn(e,i,l){(e===Wt&&(qt===2||qt===9)||e.cancelPendingCommit!==null)&&(Nl(e,0),_o(e,Rt,li,!1)),yt(e,l),((Vt&2)===0||e!==Wt)&&(e===Wt&&((Vt&2)===0&&(tl|=l),dn===4&&_o(e,Rt,li,!1)),Pi(e))}function Gp(e,i,l){if((Vt&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&e.expiredLanes)===0||tt(e,i),f=a?av(e,i):Qu(e,i,!0),g=a;do{if(f===0){wl&&!a&&_o(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!lv(l)){f=Qu(e,i,!1),g=!1;continue}if(f===2){if(g=i,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var w=e;f=Ss;var R=w.current.memoizedState.isDehydrated;if(R&&(Nl(w,b).flags|=256),b=Qu(w,b,!1),b!==2){if(qu&&!R){w.errorRecoveryDisabledLanes|=g,tl|=g,f=4;break e}g=Yn,Yn=f,g!==null&&(Yn===null?Yn=g:Yn.push.apply(Yn,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){Nl(e,0),_o(e,i,0,!0);break}e:{switch(a=e,g=f,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:_o(a,i,li,!To);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=_a+300-ye(),10<f)){if(_o(a,i,li,!To),_e(a,0,!0)!==0)break e;io=i,a.timeoutHandle=mh(Hp.bind(null,a,l,Yn,Na,ju,i,li,tl,_l,To,g,"Throttled",-0,0),f);break e}Hp(a,l,Yn,Na,ju,i,li,tl,_l,To,g,null,-0,0)}}break}while(!0);Pi(e)}function Hp(e,i,l,a,f,g,b,w,R,j,re,me,Y,Q){if(e.timeoutHandle=-1,me=i.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},kp(i,g,me);var Ke=(g&62914560)===g?_a-ye():(g&4194048)===g?Up-ye():0;if(Ke=Ov(me,Ke),Ke!==null){io=g,e.cancelPendingCommit=Ke(Yp.bind(null,e,i,g,l,a,f,b,w,R,re,me,null,Y,Q)),_o(e,g,b,!j);return}}Yp(e,i,g,l,a,f,b,w,R)}function lv(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var f=l[a],g=f.getSnapshot;f=f.value;try{if(!ei(g(),f))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _o(e,i,l,a){i&=~$u,i&=~tl,e.suspendedLanes|=i,e.pingedLanes&=~i,a&&(e.warmLanes|=i),a=e.expirationTimes;for(var f=i;0<f;){var g=31-Oe(f),b=1<<g;a[g]=-1,f&=~b}l!==0&&Ot(e,l,i)}function Ma(){return(Vt&6)===0?(Cs(0),!1):!0}function Xu(){if(At!==null){if(qt===0)var e=At.return;else e=At,ji=jo=null,fu(e),vl=null,ls=0,e=At;for(;e!==null;)gp(e.alternate,e),e=e.return;At=null}}function Nl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,wv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),io=0,Xu(),Wt=e,At=l=qi(e.current,null),Rt=i,qt=0,oi=null,To=!1,wl=tt(e,i),qu=!1,_l=li=$u=tl=Co=dn=0,Yn=Ss=null,ju=!1,(i&8)!==0&&(i|=i&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=i;0<a;){var f=31-Oe(a),g=1<<f;i|=e[f],a&=~g}return no=i,Xs(),l}function Vp(e,i){Tt=null,B.H=ps,i===yl||i===oa?(i=tf(),qt=3):i===eu?(i=tf(),qt=4):qt=i===Nu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,oi=i,At===null&&(dn=1,va(e,fi(i,e.current)))}function Bp(){var e=ni.current;return e===null?!0:(Rt&4194048)===Rt?gi===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?e===gi:!1}function Fp(){var e=B.H;return B.H=ps,e===null?ps:e}function Op(){var e=B.A;return B.A=iv,e}function Ra(){dn=4,To||(Rt&4194048)!==Rt&&ni.current!==null||(wl=!0),(Co&134217727)===0&&(tl&134217727)===0||Wt===null||_o(Wt,Rt,li,!1)}function Qu(e,i,l){var a=Vt;Vt|=2;var f=Fp(),g=Op();(Wt!==e||Rt!==i)&&(Na=null,Nl(e,i)),i=!1;var b=dn;e:do try{if(qt!==0&&At!==null){var w=At,R=oi;switch(qt){case 8:Xu(),b=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(i=!0);var j=qt;if(qt=0,oi=null,Ml(e,w,R,j),l&&wl){b=0;break e}break;default:j=qt,qt=0,oi=null,Ml(e,w,R,j)}}sv(),b=dn;break}catch(re){Vp(e,re)}while(!0);return i&&e.shellSuspendCounter++,ji=jo=null,Vt=a,B.H=f,B.A=g,At===null&&(Wt=null,Rt=0,Xs()),b}function sv(){for(;At!==null;)qp(At)}function av(e,i){var l=Vt;Vt|=2;var a=Fp(),f=Op();Wt!==e||Rt!==i?(Na=null,Aa=ye()+500,Nl(e,i)):wl=tt(e,i);e:do try{if(qt!==0&&At!==null){i=At;var g=oi;t:switch(qt){case 1:qt=0,oi=null,Ml(e,i,g,1);break;case 2:case 9:if(Wd(g)){qt=0,oi=null,$p(i);break}i=function(){qt!==2&&qt!==9||Wt!==e||(qt=7),Pi(e)},g.then(i,i);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:Wd(g)?(qt=0,oi=null,$p(i)):(qt=0,oi=null,Ml(e,i,g,7));break;case 5:var b=null;switch(At.tag){case 26:b=At.memoizedState;case 5:case 27:var w=At;if(b?Rh(b):w.stateNode.complete){qt=0,oi=null;var R=w.sibling;if(R!==null)At=R;else{var j=w.return;j!==null?(At=j,ka(j)):At=null}break t}}qt=0,oi=null,Ml(e,i,g,5);break;case 6:qt=0,oi=null,Ml(e,i,g,6);break;case 8:Xu(),dn=6;break e;default:throw Error(s(462))}}rv();break}catch(re){Vp(e,re)}while(!0);return ji=jo=null,B.H=a,B.A=f,Vt=l,At!==null?0:(Wt=null,Rt=0,Xs(),dn)}function rv(){for(;At!==null&&!de();)qp(At)}function qp(e){var i=hp(e.alternate,e,no);e.memoizedProps=e.pendingProps,i===null?ka(e):At=i}function $p(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=rp(l,i,i.pendingProps,i.type,void 0,Rt);break;case 11:i=rp(l,i,i.pendingProps,i.type.render,i.ref,Rt);break;case 5:fu(i);default:gp(l,i),i=At=Fd(i,no),i=hp(l,i,no)}e.memoizedProps=e.pendingProps,i===null?ka(e):At=i}function Ml(e,i,l,a){ji=jo=null,fu(i),vl=null,ls=0;var f=i.return;try{if(Xy(e,f,i,l,Rt)){dn=1,va(e,fi(l,e.current)),At=null;return}}catch(g){if(f!==null)throw At=f,g;dn=1,va(e,fi(l,e.current)),At=null;return}i.flags&32768?(It||a===1?e=!0:wl||(Rt&536870912)!==0?e=!1:(To=e=!0,(a===2||a===9||a===3||a===6)&&(a=ni.current,a!==null&&a.tag===13&&(a.flags|=16384))),jp(i,e)):ka(i)}function ka(e){var i=e;do{if((i.flags&32768)!==0){jp(i,To);return}e=i.return;var l=Wy(i.alternate,i,no);if(l!==null){At=l;return}if(i=i.sibling,i!==null){At=i;return}At=i=e}while(i!==null);dn===0&&(dn=5)}function jp(e,i){do{var l=ev(e.alternate,e);if(l!==null){l.flags&=32767,At=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){At=e;return}At=e=l}while(e!==null);dn=6,At=null}function Yp(e,i,l,a,f,g,b,w,R){e.cancelPendingCommit=null;do Ia();while(Tn!==0);if((Vt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Hr,ot(e,l,g,b,w,R),e===Wt&&(At=Wt=null,Rt=0),Al=i,wo=e,io=l,Yu=g,Ju=f,Lp=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fv(V,function(){return Zp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null,f=ve.p,ve.p=2,b=Vt,Vt|=4;try{tv(e,i,l)}finally{Vt=b,ve.p=f,B.T=a}}Tn=1,Jp(),Kp(),Xp()}}function Jp(){if(Tn===1){Tn=0;var e=wo,i=Al,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var a=ve.p;ve.p=2;var f=Vt;Vt|=4;try{Np(i,e);var g=uc,b=zd(e.containerInfo),w=g.focusedElem,R=g.selectionRange;if(b!==w&&w&&w.ownerDocument&&Id(w.ownerDocument.documentElement,w)){if(R!==null&&Dr(w)){var j=R.start,re=R.end;if(re===void 0&&(re=j),"selectionStart"in w)w.selectionStart=j,w.selectionEnd=Math.min(re,w.value.length);else{var me=w.ownerDocument||document,Y=me&&me.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),Ke=w.textContent.length,ct=Math.min(R.start,Ke),Kt=R.end===void 0?ct:Math.min(R.end,Ke);!Q.extend&&ct>Kt&&(b=Kt,Kt=ct,ct=b);var H=kd(w,ct),U=kd(w,Kt);if(H&&U&&(Q.rangeCount!==1||Q.anchorNode!==H.node||Q.anchorOffset!==H.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var $=me.createRange();$.setStart(H.node,H.offset),Q.removeAllRanges(),ct>Kt?(Q.addRange($),Q.extend(U.node,U.offset)):($.setEnd(U.node,U.offset),Q.addRange($))}}}}for(me=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&me.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<me.length;w++){var fe=me[w];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}qa=!!rc,uc=rc=null}finally{Vt=f,ve.p=a,B.T=l}}e.current=i,Tn=2}}function Kp(){if(Tn===2){Tn=0;var e=wo,i=Al,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var a=ve.p;ve.p=2;var f=Vt;Vt|=4;try{Cp(e,i.alternate,i)}finally{Vt=f,ve.p=a,B.T=l}}Tn=3}}function Xp(){if(Tn===4||Tn===3){Tn=0,Ee();var e=wo,i=Al,l=io,a=Lp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Tn=5:(Tn=0,Al=wo=null,Qp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Eo=null),kn(l),i=i.stateNode,te&&typeof te.onCommitFiberRoot=="function")try{te.onCommitFiberRoot(ae,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=B.T,f=ve.p,ve.p=2,B.T=null;try{for(var g=e.onRecoverableError,b=0;b<a.length;b++){var w=a[b];g(w.value,{componentStack:w.stack})}}finally{B.T=i,ve.p=f}}(io&3)!==0&&Ia(),Pi(e),f=e.pendingLanes,(l&261930)!==0&&(f&42)!==0?e===Ku?Ts++:(Ts=0,Ku=e):Ts=0,Cs(0)}}function Qp(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,is(i)))}function Ia(){return Jp(),Kp(),Xp(),Zp()}function Zp(){if(Tn!==5)return!1;var e=wo,i=Yu;Yu=0;var l=kn(io),a=B.T,f=ve.p;try{ve.p=32>l?32:l,B.T=null,l=Ju,Ju=null;var g=wo,b=io;if(Tn=0,Al=wo=null,io=0,(Vt&6)!==0)throw Error(s(331));var w=Vt;if(Vt|=4,zp(g.current),Rp(g,g.current,b,l),Vt=w,Cs(0,!1),te&&typeof te.onPostCommitFiberRoot=="function")try{te.onPostCommitFiberRoot(ae,g)}catch{}return!0}finally{ve.p=f,B.T=a,Qp(e,i)}}function Wp(e,i,l){i=fi(l,i),i=Au(e.stateNode,i,2),e=vo(e,i,2),e!==null&&(yt(e,2),Pi(e))}function $t(e,i,l){if(e.tag===3)Wp(e,e,l);else for(;i!==null;){if(i.tag===3){Wp(i,e,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Eo===null||!Eo.has(a))){e=fi(l,e),l=ep(2),a=vo(i,l,2),a!==null&&(tp(l,a,i,e),yt(a,2),Pi(a));break}}i=i.return}}function Zu(e,i,l){var a=e.pingCache;if(a===null){a=e.pingCache=new ov;var f=new Set;a.set(i,f)}else f=a.get(i),f===void 0&&(f=new Set,a.set(i,f));f.has(l)||(qu=!0,f.add(l),e=uv.bind(null,e,i,l),i.then(e,e))}function uv(e,i,l){var a=e.pingCache;a!==null&&a.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Wt===e&&(Rt&l)===l&&(dn===4||dn===3&&(Rt&62914560)===Rt&&300>ye()-_a?(Vt&2)===0&&Nl(e,0):$u|=l,_l===Rt&&(_l=0)),Pi(e)}function eh(e,i){i===0&&(i=Pe()),e=Oo(e,i),e!==null&&(yt(e,i),Pi(e))}function cv(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),eh(e,l)}function dv(e,i){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(l=f.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),eh(e,l)}function fv(e,i){return G(e,i)}var za=null,Rl=null,Wu=!1,Da=!1,ec=!1,Ao=0;function Pi(e){e!==Rl&&e.next===null&&(Rl===null?za=Rl=e:Rl=Rl.next=e),Da=!0,Wu||(Wu=!0,hv())}function Cs(e,i){if(!ec&&Da){ec=!0;do for(var l=!1,a=za;a!==null;){if(e!==0){var f=a.pendingLanes;if(f===0)var g=0;else{var b=a.suspendedLanes,w=a.pingedLanes;g=(1<<31-Oe(42|e)+1)-1,g&=f&~(b&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,oh(a,g))}else g=Rt,g=_e(a,a===Wt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||tt(a,g)||(l=!0,oh(a,g));a=a.next}while(l);ec=!1}}function pv(){th()}function th(){Da=Wu=!1;var e=0;Ao!==0&&Ev()&&(e=Ao);for(var i=ye(),l=null,a=za;a!==null;){var f=a.next,g=nh(a,i);g===0?(a.next=null,l===null?za=f:l.next=f,f===null&&(Rl=l)):(l=a,(e!==0||(g&3)!==0)&&(Da=!0)),a=f}Tn!==0&&Tn!==5||Cs(e),Ao!==0&&(Ao=0)}function nh(e,i){for(var l=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-Oe(g),w=1<<b,R=f[b];R===-1?((w&l)===0||(w&a)!==0)&&(f[b]=rt(w,i)):R<=i&&(e.expiredLanes|=w),g&=~w}if(i=Wt,l=Rt,l=_e(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===i&&(qt===2||qt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&le(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||tt(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(a!==null&&le(a),kn(l)){case 2:case 8:l=C;break;case 32:l=V;break;case 268435456:l=K;break;default:l=V}return a=ih.bind(null,e),l=G(l,a),e.callbackPriority=i,e.callbackNode=l,i}return a!==null&&a!==null&&le(a),e.callbackPriority=2,e.callbackNode=null,2}function ih(e,i){if(Tn!==0&&Tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Ia()&&e.callbackNode!==l)return null;var a=Rt;return a=_e(e,e===Wt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Gp(e,a,i),nh(e,ye()),e.callbackNode!=null&&e.callbackNode===l?ih.bind(null,e):null)}function oh(e,i){if(Ia())return null;Gp(e,i,!0)}function hv(){_v(function(){(Vt&6)!==0?G(E,pv):th()})}function tc(){if(Ao===0){var e=ml;e===0&&(e=wt,wt<<=1,(wt&261888)===0&&(wt=256)),Ao=e}return Ao}function lh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Z(""+e)}function sh(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function mv(e,i,l,a,f){if(i==="submit"&&l&&l.stateNode===f){var g=lh((f[Et]||null).action),b=a.submitter;b&&(i=(i=b[Et]||null)?lh(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var w=new js("action","action",null,a,f);e.push({event:w,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ao!==0){var R=b?sh(f,b):new FormData(f);Su(l,{pending:!0,data:R,method:f.method,action:g},null,R)}}else typeof g=="function"&&(w.preventDefault(),R=b?sh(f,b):new FormData(f),Su(l,{pending:!0,data:R,method:f.method,action:g},g,R))},currentTarget:f}]})}}for(var nc=0;nc<Gr.length;nc++){var ic=Gr[nc],gv=ic.toLowerCase(),yv=ic[0].toUpperCase()+ic.slice(1);_i(gv,"on"+yv)}_i(Ld,"onAnimationEnd"),_i(Pd,"onAnimationIteration"),_i(Gd,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(zy,"onTransitionRun"),_i(Dy,"onTransitionStart"),_i(Uy,"onTransitionCancel"),_i(Hd,"onTransitionEnd"),D("onMouseEnter",["mouseout","mouseover"]),D("onMouseLeave",["mouseout","mouseover"]),D("onPointerEnter",["pointerout","pointerover"]),D("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Es));function ah(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],f=a.event;a=a.listeners;e:{var g=void 0;if(i)for(var b=a.length-1;0<=b;b--){var w=a[b],R=w.instance,j=w.currentTarget;if(w=w.listener,R!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=j;try{g(f)}catch(re){Ks(re)}f.currentTarget=null,g=R}else for(b=0;b<a.length;b++){if(w=a[b],R=w.instance,j=w.currentTarget,w=w.listener,R!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=j;try{g(f)}catch(re){Ks(re)}f.currentTarget=null,g=R}}}}function Nt(e,i){var l=i[ri];l===void 0&&(l=i[ri]=new Set);var a=e+"__bubble";l.has(a)||(rh(i,e,2,!1),l.add(a))}function oc(e,i,l){var a=0;i&&(a|=4),rh(l,e,a,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function lc(e){if(!e[Ua]){e[Ua]=!0,Bi.forEach(function(l){l!=="selectionchange"&&(vv.has(l)||oc(l,!1,e),oc(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,oc("selectionchange",!1,i))}}function rh(e,i,l,a){switch(Ph(i)){case 2:var f=jv;break;case 8:f=Yv;break;default:f=bc}l=f.bind(null,i,l,e),f=void 0,!nn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(i,l,{capture:!0,passive:f}):e.addEventListener(i,l,!0):f!==void 0?e.addEventListener(i,l,{passive:f}):e.addEventListener(i,l,!1)}function sc(e,i,l,a,f){var g=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var b=a.tag;if(b===3||b===4){var w=a.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=a.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=Ti(w),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){a=g=b;continue e}w=w.parentNode}}a=a.return}De(function(){var j=g,re=Ln(l),me=[];e:{var Y=Vd.get(e);if(Y!==void 0){var Q=js,Ke=e;switch(e){case"keypress":if(Oi(l)===0)break e;case"keydown":case"keyup":Q=dy;break;case"focusin":Ke="focus",Q=Mr;break;case"focusout":Ke="blur",Q=Mr;break;case"beforeblur":case"afterblur":Q=Mr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=hy;break;case Ld:case Pd:case Gd:Q=ny;break;case Hd:Q=gy;break;case"scroll":case"scrollend":Q=Qg;break;case"wheel":Q=vy;break;case"copy":case"cut":case"paste":Q=oy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=yd;break;case"toggle":case"beforetoggle":Q=by}var ct=(i&4)!==0,Kt=!ct&&(e==="scroll"||e==="scrollend"),H=ct?Y!==null?Y+"Capture":null:Y;ct=[];for(var U=j,$;U!==null;){var fe=U;if($=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||$===null||H===null||(fe=ut(U,H),fe!=null&&ct.push(ws(U,fe,$))),Kt)break;U=U.return}0<ct.length&&(Y=new Q(Y,Ke,null,l,re),me.push({event:Y,listeners:ct}))}}if((i&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",Y&&l!==vt&&(Ke=l.relatedTarget||l.fromElement)&&(Ti(Ke)||Ke[Ht]))break e;if((Q||Y)&&(Y=re.window===re?re:(Y=re.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(Ke=l.relatedTarget||l.toElement,Q=j,Ke=Ke?Ti(Ke):null,Ke!==null&&(Kt=d(Ke),ct=Ke.tag,Ke!==Kt||ct!==5&&ct!==27&&ct!==6)&&(Ke=null)):(Q=null,Ke=j),Q!==Ke)){if(ct=md,fe="onMouseLeave",H="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(ct=yd,fe="onPointerLeave",H="onPointerEnter",U="pointer"),Kt=Q==null?Y:Hi(Q),$=Ke==null?Y:Hi(Ke),Y=new ct(fe,U+"leave",Q,l,re),Y.target=Kt,Y.relatedTarget=$,fe=null,Ti(re)===j&&(ct=new ct(H,U+"enter",Ke,l,re),ct.target=$,ct.relatedTarget=Kt,fe=ct),Kt=fe,Q&&Ke)t:{for(ct=xv,H=Q,U=Ke,$=0,fe=H;fe;fe=ct(fe))$++;fe=0;for(var lt=U;lt;lt=ct(lt))fe++;for(;0<$-fe;)H=ct(H),$--;for(;0<fe-$;)U=ct(U),fe--;for(;$--;){if(H===U||U!==null&&H===U.alternate){ct=H;break t}H=ct(H),U=ct(U)}ct=null}else ct=null;Q!==null&&uh(me,Y,Q,ct,!1),Ke!==null&&Kt!==null&&uh(me,Kt,Ke,ct,!0)}}e:{if(Y=j?Hi(j):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Lt=wd;else if(Cd(Y))if(_d)Lt=Ry;else{Lt=Ny;var Ze=Ay}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?j&&un(j.elementType)&&(Lt=wd):Lt=My;if(Lt&&(Lt=Lt(e,j))){Ed(me,Lt,l,re);break e}Ze&&Ze(e,Y,j),e==="focusout"&&j&&Y.type==="number"&&j.memoizedProps.value!=null&&tn(Y,"number",Y.value)}switch(Ze=j?Hi(j):window,e){case"focusin":(Cd(Ze)||Ze.contentEditable==="true")&&(al=Ze,Ur=j,es=null);break;case"focusout":es=Ur=al=null;break;case"mousedown":Lr=!0;break;case"contextmenu":case"mouseup":case"dragend":Lr=!1,Dd(me,l,re);break;case"selectionchange":if(Iy)break;case"keydown":case"keyup":Dd(me,l,re)}var Ct;if(kr)e:{switch(e){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else sl?Sd(e,l)&&(kt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(kt="onCompositionStart");kt&&(vd&&l.locale!=="ko"&&(sl||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&sl&&(Ct=ll()):(Zt=re,wi="value"in Zt?Zt.value:Zt.textContent,sl=!0)),Ze=La(j,kt),0<Ze.length&&(kt=new gd(kt,e,null,l,re),me.push({event:kt,listeners:Ze}),Ct?kt.data=Ct:(Ct=Td(l),Ct!==null&&(kt.data=Ct)))),(Ct=Ty?Cy(e,l):Ey(e,l))&&(kt=La(j,"onBeforeInput"),0<kt.length&&(Ze=new gd("onBeforeInput","beforeinput",null,l,re),me.push({event:Ze,listeners:kt}),Ze.data=Ct)),mv(me,e,j,l,re)}ah(me,i)})}function ws(e,i,l){return{instance:e,listener:i,currentTarget:l}}function La(e,i){for(var l=i+"Capture",a=[];e!==null;){var f=e,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ut(e,l),f!=null&&a.unshift(ws(e,f,g)),f=ut(e,i),f!=null&&a.push(ws(e,f,g))),e.tag===3)return a;e=e.return}return[]}function xv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uh(e,i,l,a,f){for(var g=i._reactName,b=[];l!==null&&l!==a;){var w=l,R=w.alternate,j=w.stateNode;if(w=w.tag,R!==null&&R===a)break;w!==5&&w!==26&&w!==27||j===null||(R=j,f?(j=ut(l,g),j!=null&&b.unshift(ws(l,j,R))):f||(j=ut(l,g),j!=null&&b.push(ws(l,j,R)))),l=l.return}b.length!==0&&e.push({event:i,listeners:b})}var bv=/\r\n?/g,Sv=/\u0000|\uFFFD/g;function ch(e){return(typeof e=="string"?e:""+e).replace(bv,`
`).replace(Sv,"")}function dh(e,i){return i=ch(i),ch(e)===i}function Jt(e,i,l,a,f,g){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||Zn(e,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&Zn(e,""+a);break;case"className":dt(e,"class",a);break;case"tabIndex":dt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,l,a);break;case"style":co(e,a,g);break;case"data":if(i!=="object"){dt(e,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=Z(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&Jt(e,i,"name",f.name,f,null),Jt(e,i,"formEncType",f.formEncType,f,null),Jt(e,i,"formMethod",f.formMethod,f,null),Jt(e,i,"formTarget",f.formTarget,f,null)):(Jt(e,i,"encType",f.encType,f,null),Jt(e,i,"method",f.method,f,null),Jt(e,i,"target",f.target,f,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=Z(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=mn);break;case"onScroll":a!=null&&Nt("scroll",e);break;case"onScrollEnd":a!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=Z(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),nt(e,"popover",a);break;case"xlinkActuate":ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ft(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ft(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ft(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ft(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":nt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Fn.get(l)||l,nt(e,l,a))}}function ac(e,i,l,a,f,g){switch(l){case"style":co(e,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof a=="string"?Zn(e,a):(typeof a=="number"||typeof a=="bigint")&&Zn(e,""+a);break;case"onScroll":a!=null&&Nt("scroll",e);break;case"onScrollEnd":a!=null&&Nt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),i=l.slice(2,f?l.length-7:void 0),g=e[Et]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,f),typeof a=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,a,f);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):nt(e,l,a)}}}function Mn(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var a=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":a=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Jt(e,i,g,b,l,null)}}f&&Jt(e,i,"srcSet",l.srcSet,l,null),a&&Jt(e,i,"src",l.src,l,null);return;case"input":Nt("invalid",e);var w=g=b=f=null,R=null,j=null;for(a in l)if(l.hasOwnProperty(a)){var re=l[a];if(re!=null)switch(a){case"name":f=re;break;case"type":b=re;break;case"checked":R=re;break;case"defaultChecked":j=re;break;case"value":g=re;break;case"defaultValue":w=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,i));break;default:Jt(e,i,a,re,l,null)}}Ut(e,g,w,R,j,b,f,!1);return;case"select":Nt("invalid",e),a=b=g=null;for(f in l)if(l.hasOwnProperty(f)&&(w=l[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":b=w;break;case"multiple":a=w;default:Jt(e,i,f,w,l,null)}i=g,l=b,e.multiple=!!a,i!=null?Xn(e,!!a,i,!1):l!=null&&Xn(e,!!a,l,!0);return;case"textarea":Nt("invalid",e),g=f=a=null;for(b in l)if(l.hasOwnProperty(b)&&(w=l[b],w!=null))switch(b){case"value":a=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Jt(e,i,b,w,l,null)}Qn(e,a,f,g);return;case"option":for(R in l)l.hasOwnProperty(R)&&(a=l[R],a!=null)&&(R==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":Jt(e,i,R,a,l,null));return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(a=0;a<Es.length;a++)Nt(Es[a],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(a=l[j],a!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Jt(e,i,j,a,l,null)}return;default:if(un(i)){for(re in l)l.hasOwnProperty(re)&&(a=l[re],a!==void 0&&ac(e,i,re,a,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(a=l[w],a!=null&&Jt(e,i,w,a,l,null))}function Tv(e,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,w=null,R=null,j=null,re=null;for(Q in l){var me=l[Q];if(l.hasOwnProperty(Q)&&me!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":R=me;default:a.hasOwnProperty(Q)||Jt(e,i,Q,null,a,me)}}for(var Y in a){var Q=a[Y];if(me=l[Y],a.hasOwnProperty(Y)&&(Q!=null||me!=null))switch(Y){case"type":g=Q;break;case"name":f=Q;break;case"checked":j=Q;break;case"defaultChecked":re=Q;break;case"value":b=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==me&&Jt(e,i,Y,Q,a,me)}}ht(e,b,w,R,j,re,g,f);return;case"select":Q=b=w=Y=null;for(g in l)if(R=l[g],l.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":Q=R;default:a.hasOwnProperty(g)||Jt(e,i,g,null,a,R)}for(f in a)if(g=a[f],R=l[f],a.hasOwnProperty(f)&&(g!=null||R!=null))switch(f){case"value":Y=g;break;case"defaultValue":w=g;break;case"multiple":b=g;default:g!==R&&Jt(e,i,f,g,a,R)}i=w,l=b,a=Q,Y!=null?Xn(e,!!l,Y,!1):!!a!=!!l&&(i!=null?Xn(e,!!l,i,!0):Xn(e,!!l,l?[]:"",!1));return;case"textarea":Q=Y=null;for(w in l)if(f=l[w],l.hasOwnProperty(w)&&f!=null&&!a.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Jt(e,i,w,null,a,f)}for(b in a)if(f=a[b],g=l[b],a.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":Y=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==g&&Jt(e,i,b,f,a,g)}Sn(e,Y,Q);return;case"option":for(var Ke in l)Y=l[Ke],l.hasOwnProperty(Ke)&&Y!=null&&!a.hasOwnProperty(Ke)&&(Ke==="selected"?e.selected=!1:Jt(e,i,Ke,null,a,Y));for(R in a)Y=a[R],Q=l[R],a.hasOwnProperty(R)&&Y!==Q&&(Y!=null||Q!=null)&&(R==="selected"?e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":Jt(e,i,R,Y,a,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in l)Y=l[ct],l.hasOwnProperty(ct)&&Y!=null&&!a.hasOwnProperty(ct)&&Jt(e,i,ct,null,a,Y);for(j in a)if(Y=a[j],Q=l[j],a.hasOwnProperty(j)&&Y!==Q&&(Y!=null||Q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Jt(e,i,j,Y,a,Q)}return;default:if(un(i)){for(var Kt in l)Y=l[Kt],l.hasOwnProperty(Kt)&&Y!==void 0&&!a.hasOwnProperty(Kt)&&ac(e,i,Kt,void 0,a,Y);for(re in a)Y=a[re],Q=l[re],!a.hasOwnProperty(re)||Y===Q||Y===void 0&&Q===void 0||ac(e,i,re,Y,a,Q);return}}for(var H in l)Y=l[H],l.hasOwnProperty(H)&&Y!=null&&!a.hasOwnProperty(H)&&Jt(e,i,H,null,a,Y);for(me in a)Y=a[me],Q=l[me],!a.hasOwnProperty(me)||Y===Q||Y==null&&Q==null||Jt(e,i,me,Y,a,Q)}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var f=l[a],g=f.transferSize,b=f.initiatorType,w=f.duration;if(g&&w&&fh(b)){for(b=0,w=f.responseEnd,a+=1;a<l.length;a++){var R=l[a],j=R.startTime;if(j>w)break;var re=R.transferSize,me=R.initiatorType;re&&fh(me)&&(R=R.responseEnd,b+=re*(R<w?1:(w-j)/(R-j)))}if(--a,i+=8*(g+b)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var rc=null,uc=null;function Pa(e){return e.nodeType===9?e:e.ownerDocument}function ph(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function cc(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dc=null;function Ev(){var e=window.event;return e&&e.type==="popstate"?e===dc?!1:(dc=e,!0):(dc=null,!1)}var mh=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,gh=typeof Promise=="function"?Promise:void 0,_v=typeof queueMicrotask=="function"?queueMicrotask:typeof gh<"u"?function(e){return gh.resolve(null).then(e).catch(Av)}:mh;function Av(e){setTimeout(function(){throw e})}function No(e){return e==="head"}function yh(e,i){var l=i,a=0;do{var f=l.nextSibling;if(e.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(f),Dl(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")_s(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,_s(l);for(var g=l.firstChild;g;){var b=g.nextSibling,w=g.nodeName;g[Gi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=b}}else l==="body"&&_s(e.ownerDocument.body);l=f}while(l);Dl(i)}function vh(e,i){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function fc(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":fc(l),Go(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Nv(e,i,l,a){for(;e.nodeType===1;){var f=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Gi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=yi(e.nextSibling),e===null)break}return null}function Mv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=yi(e.nextSibling),e===null))return null;return e}function xh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=yi(e.nextSibling),e===null))return null;return e}function pc(e){return e.data==="$?"||e.data==="$~"}function hc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Rv(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function yi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var mc=null;function bh(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return yi(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function Sh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Th(e,i,l){switch(i=Pa(l),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function _s(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Go(e)}var vi=new Map,Ch=new Set;function Ga(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var oo=ve.d;ve.d={f:kv,r:Iv,D:zv,C:Dv,L:Uv,m:Lv,X:Gv,S:Pv,M:Hv};function kv(){var e=oo.f(),i=Ma();return e||i}function Iv(e){var i=ui(e);i!==null&&i.tag===5&&i.type==="form"?Vf(i):oo.r(e)}var kl=typeof document>"u"?null:document;function Eh(e,i,l){var a=kl;if(a&&typeof i=="string"&&i){var f=q(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Ch.has(f)||(Ch.add(f),e={rel:e,crossOrigin:l,href:i},a.querySelector(f)===null&&(i=a.createElement("link"),Mn(i,"link",e),an(i),a.head.appendChild(i)))}}function zv(e){oo.D(e),Eh("dns-prefetch",e,null)}function Dv(e,i){oo.C(e,i),Eh("preconnect",e,i)}function Uv(e,i,l){oo.L(e,i,l);var a=kl;if(a&&e&&i){var f='link[rel="preload"][as="'+q(i)+'"]';i==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+q(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+q(l.imageSizes)+'"]')):f+='[href="'+q(e)+'"]';var g=f;switch(i){case"style":g=Il(e);break;case"script":g=zl(e)}vi.has(g)||(e=S({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),vi.set(g,e),a.querySelector(f)!==null||i==="style"&&a.querySelector(As(g))||i==="script"&&a.querySelector(Ns(g))||(i=a.createElement("link"),Mn(i,"link",e),an(i),a.head.appendChild(i)))}}function Lv(e,i){oo.m(e,i);var l=kl;if(l&&e){var a=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+q(a)+'"][href="'+q(e)+'"]',g=f;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=zl(e)}if(!vi.has(g)&&(e=S({rel:"modulepreload",href:e},i),vi.set(g,e),l.querySelector(f)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ns(g)))return}a=l.createElement("link"),Mn(a,"link",e),an(a),l.head.appendChild(a)}}}function Pv(e,i,l){oo.S(e,i,l);var a=kl;if(a&&e){var f=Vi(a).hoistableStyles,g=Il(e);i=i||"default";var b=f.get(g);if(!b){var w={loading:0,preload:null};if(b=a.querySelector(As(g)))w.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":i},l),(l=vi.get(g))&&gc(e,l);var R=b=a.createElement("link");an(R),Mn(R,"link",e),R._p=new Promise(function(j,re){R.onload=j,R.onerror=re}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ha(b,i,a)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(g,b)}}}function Gv(e,i){oo.X(e,i);var l=kl;if(l&&e){var a=Vi(l).hoistableScripts,f=zl(e),g=a.get(f);g||(g=l.querySelector(Ns(f)),g||(e=S({src:e,async:!0},i),(i=vi.get(f))&&yc(e,i),g=l.createElement("script"),an(g),Mn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function Hv(e,i){oo.M(e,i);var l=kl;if(l&&e){var a=Vi(l).hoistableScripts,f=zl(e),g=a.get(f);g||(g=l.querySelector(Ns(f)),g||(e=S({src:e,async:!0,type:"module"},i),(i=vi.get(f))&&yc(e,i),g=l.createElement("script"),an(g),Mn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function wh(e,i,l,a){var f=(f=_.current)?Ga(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Il(l.href),l=Vi(f).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Il(l.href);var g=Vi(f).hoistableStyles,b=g.get(e);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=f.querySelector(As(e)))&&!g._p&&(b.instance=g,b.state.loading=5),vi.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},vi.set(e,l),g||Vv(f,e,l,b.state))),i&&a===null)throw Error(s(528,""));return b}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=zl(l),l=Vi(f).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Il(e){return'href="'+q(e)+'"'}function As(e){return'link[rel="stylesheet"]['+e+"]"}function _h(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Vv(e,i,l,a){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=e.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Mn(i,"link",l),an(i),e.head.appendChild(i))}function zl(e){return'[src="'+q(e)+'"]'}function Ns(e){return"script[async]"+e}function Ah(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=e.querySelector('style[data-href~="'+q(l.href)+'"]');if(a)return i.instance=a,an(a),a;var f=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),an(a),Mn(a,"style",f),Ha(a,l.precedence,e),i.instance=a;case"stylesheet":f=Il(l.href);var g=e.querySelector(As(f));if(g)return i.state.loading|=4,i.instance=g,an(g),g;a=_h(l),(f=vi.get(f))&&gc(a,f),g=(e.ownerDocument||e).createElement("link"),an(g);var b=g;return b._p=new Promise(function(w,R){b.onload=w,b.onerror=R}),Mn(g,"link",a),i.state.loading|=4,Ha(g,l.precedence,e),i.instance=g;case"script":return g=zl(l.src),(f=e.querySelector(Ns(g)))?(i.instance=f,an(f),f):(a=l,(f=vi.get(g))&&(a=S({},l),yc(a,f)),e=e.ownerDocument||e,f=e.createElement("script"),an(f),Mn(f,"link",a),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Ha(a,l.precedence,e));return i.instance}function Ha(e,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=a.length?a[a.length-1]:null,g=f,b=0;b<a.length;b++){var w=a[b];if(w.dataset.precedence===i)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function gc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function yc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Va=null;function Nh(e,i,l){if(Va===null){var a=new Map,f=Va=new Map;f.set(l,a)}else f=Va,a=f.get(l),a||(a=new Map,f.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),f=0;f<l.length;f++){var g=l[f];if(!(g[Gi]||g[Qe]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=e+b;var w=a.get(b);w?w.push(g):a.set(b,[g])}}return a}function Mh(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Bv(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Rh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fv(e,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=Il(a.href),g=i.querySelector(As(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Ba.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,an(g);return}g=i.ownerDocument||i,a=_h(a),(f=vi.get(f))&&gc(a,f),g=g.createElement("link"),an(g);var b=g;b._p=new Promise(function(w,R){b.onload=w,b.onerror=R}),Mn(g,"link",a),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Ba.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var vc=0;function Ov(e,i){return e.stylesheets&&e.count===0&&Oa(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&Oa(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&vc===0&&(vc=62500*Cv());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Oa(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>vc?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(f)}}:null}function Ba(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fa=null;function Oa(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fa=new Map,i.forEach(qv,e),Fa=null,Ba.call(e))}function qv(e,i){if(!(i.state.loading&4)){var l=Fa.get(e);if(l)var a=l.get(null);else{l=new Map,Fa.set(e,l);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),a=b)}a&&l.set(null,a)}f=i.instance,b=f.getAttribute("data-precedence"),g=l.get(b)||a,g===a&&l.set(null,f),l.set(b,f),this.count++,a=Ba.bind(this),f.addEventListener("load",a),f.addEventListener("error",a),g?g.parentNode.insertBefore(f,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Ms={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function $v(e,i,l,a,f,g,b,w,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.hiddenUpdates=_t(null),this.identifierPrefix=a,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function kh(e,i,l,a,f,g,b,w,R,j,re,me){return e=new $v(e,i,l,b,R,j,re,me,w),i=1,g===!0&&(i|=24),g=ti(3,null,null,i),e.current=g,g.stateNode=e,i=Qr(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:i},tu(g),e}function Ih(e){return e?(e=cl,e):cl}function zh(e,i,l,a,f,g){f=Ih(f),a.context===null?a.context=f:a.pendingContext=f,a=yo(i),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=vo(e,a,i),l!==null&&(Jn(l,e,i),as(l,e,i))}function Dh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function xc(e,i){Dh(e,i),(e=e.alternate)&&Dh(e,i)}function Uh(e){if(e.tag===13||e.tag===31){var i=Oo(e,67108864);i!==null&&Jn(i,e,67108864),xc(e,67108864)}}function Lh(e){if(e.tag===13||e.tag===31){var i=si();i=zi(i);var l=Oo(e,i);l!==null&&Jn(l,e,i),xc(e,i)}}var qa=!0;function jv(e,i,l,a){var f=B.T;B.T=null;var g=ve.p;try{ve.p=2,bc(e,i,l,a)}finally{ve.p=g,B.T=f}}function Yv(e,i,l,a){var f=B.T;B.T=null;var g=ve.p;try{ve.p=8,bc(e,i,l,a)}finally{ve.p=g,B.T=f}}function bc(e,i,l,a){if(qa){var f=Sc(a);if(f===null)sc(e,i,a,$a,l),Gh(e,a);else if(Kv(f,e,i,l,a))a.stopPropagation();else if(Gh(e,a),i&4&&-1<Jv.indexOf(e)){for(;f!==null;){var g=ui(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=st(g.pendingLanes);if(b!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var R=1<<31-Oe(b);w.entanglements[1]|=R,b&=~R}Pi(g),(Vt&6)===0&&(Aa=ye()+500,Cs(0))}}break;case 31:case 13:w=Oo(g,2),w!==null&&Jn(w,g,2),Ma(),xc(g,2)}if(g=Sc(a),g===null&&sc(e,i,a,$a,l),g===f)break;f=g}f!==null&&a.stopPropagation()}else sc(e,i,a,null,l)}}function Sc(e){return e=Ln(e),Tc(e)}var $a=null;function Tc(e){if($a=null,e=Ti(e),e!==null){var i=d(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return $a=e,null}function Ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case E:return 2;case C:return 8;case V:case k:return 32;case K:return 268435456;default:return 32}default:return 32}}var Cc=!1,Mo=null,Ro=null,ko=null,Rs=new Map,ks=new Map,Io=[],Jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gh(e,i){switch(e){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Rs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(i.pointerId)}}function Is(e,i,l,a,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[f]},i!==null&&(i=ui(i),i!==null&&Uh(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Kv(e,i,l,a,f){switch(i){case"focusin":return Mo=Is(Mo,e,i,l,a,f),!0;case"dragenter":return Ro=Is(Ro,e,i,l,a,f),!0;case"mouseover":return ko=Is(ko,e,i,l,a,f),!0;case"pointerover":var g=f.pointerId;return Rs.set(g,Is(Rs.get(g)||null,e,i,l,a,f)),!0;case"gotpointercapture":return g=f.pointerId,ks.set(g,Is(ks.get(g)||null,e,i,l,a,f)),!0}return!1}function Hh(e){var i=Ti(e.target);if(i!==null){var l=d(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,ro(e.priority,function(){Lh(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,ro(e.priority,function(){Lh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ja(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Sc(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);vt=a,l.target.dispatchEvent(a),vt=null}else return i=ui(l),i!==null&&Uh(i),e.blockedOn=l,!1;i.shift()}return!0}function Vh(e,i,l){ja(e)&&l.delete(i)}function Xv(){Cc=!1,Mo!==null&&ja(Mo)&&(Mo=null),Ro!==null&&ja(Ro)&&(Ro=null),ko!==null&&ja(ko)&&(ko=null),Rs.forEach(Vh),ks.forEach(Vh)}function Ya(e,i){e.blockedOn===i&&(e.blockedOn=null,Cc||(Cc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Xv)))}var Ja=null;function Bh(e){Ja!==e&&(Ja=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ja===e&&(Ja=null);for(var i=0;i<e.length;i+=3){var l=e[i],a=e[i+1],f=e[i+2];if(typeof a!="function"){if(Tc(a||l)===null)continue;break}var g=ui(l);g!==null&&(e.splice(i,3),i-=3,Su(g,{pending:!0,data:f,method:l.method,action:a},a,f))}}))}function Dl(e){function i(R){return Ya(R,e)}Mo!==null&&Ya(Mo,e),Ro!==null&&Ya(Ro,e),ko!==null&&Ya(ko,e),Rs.forEach(i),ks.forEach(i);for(var l=0;l<Io.length;l++){var a=Io[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Io.length&&(l=Io[0],l.blockedOn===null);)Hh(l),l.blockedOn===null&&Io.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var f=l[a],g=l[a+1],b=f[Et]||null;if(typeof g=="function")b||Bh(l);else if(b){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[Et]||null)w=b.formAction;else if(Tc(f)!==null)continue}else w=b.action;typeof w=="function"?l[a+1]=w:(l.splice(a,3),a-=3),Bh(l)}}}function Fh(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Ec(e){this._internalRoot=e}Ka.prototype.render=Ec.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=si();zh(l,a,e,i,null,null)},Ka.prototype.unmount=Ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;zh(e.current,2,null,e,null,null),Ma(),i[Ht]=null}};function Ka(e){this._internalRoot=e}Ka.prototype.unstable_scheduleHydration=function(e){if(e){var i=ai();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Io.length&&i!==0&&i<Io[l].priority;l++);Io.splice(l,0,e),l===0&&Hh(e)}};var Oh=t.version;if(Oh!=="19.2.3")throw Error(s(527,Oh,"19.2.3"));ve.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Qv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{ae=Xa.inject(Qv),te=Xa}catch{}}return Ds.createRoot=function(e,i){if(!r(e))throw Error(s(299));var l=!1,a="",f=Xf,g=Qf,b=Zf;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=kh(e,1,!1,null,null,l,a,null,f,g,b,Fh),e[Ht]=i.current,lc(e),new Ec(i)},Ds.hydrateRoot=function(e,i,l){if(!r(e))throw Error(s(299));var a=!1,f="",g=Xf,b=Qf,w=Zf,R=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(R=l.formState)),i=kh(e,1,!0,i,l??null,a,f,R,g,b,w,Fh),i.context=Ih(null),l=i.current,a=si(),a=zi(a),f=yo(a),f.callback=null,vo(l,f,a),l=a,i.current.lanes=l,yt(i,l),Pi(i),e[Ht]=i.current,lc(e),new Ka(i)},Ds.version="19.2.3",Ds}var Wh;function ax(){if(Wh)return Ac.exports;Wh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ac.exports=sx(),Ac.exports}var rx=ax();const ux=Km(rx),cx="modulepreload",dx=function(n){return"/"+n},e0={},Dc=function(t,o,s){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=dx(m),m in e0)return;e0[m]=!0;const x=m.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":cx,x||(T.as="script"),T.crossOrigin="",T.href=m,y&&T.setAttribute("nonce",y),document.head.appendChild(T),x)return new Promise((A,N)=>{T.addEventListener("load",A),T.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&d(y.reason);return t().catch(d)})};const fx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),px=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),t0=n=>{const t=px(n);return t.charAt(0).toUpperCase()+t.slice(1)},Qm=(...n)=>n.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),hx=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var mx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gx=W.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:r="",children:d,iconNode:h,...y},v)=>W.createElement("svg",{ref:v,...mx,width:t,height:t,stroke:n,strokeWidth:s?Number(o)*24/Number(t):o,className:Qm("lucide",r),...!d&&!hx(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>W.createElement(m,x)),...Array.isArray(d)?d:[d]]));const We=(n,t)=>{const o=W.forwardRef(({className:s,...r},d)=>W.createElement(gx,{ref:d,iconNode:t,className:Qm(`lucide-${fx(t0(n))}`,`lucide-${n}`,s),...r}));return o.displayName=t0(n),o};const yx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vx=We("align-vertical-justify-center",yx);const xx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],bx=We("align-vertical-justify-end",xx);const Sx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],Tx=We("align-vertical-justify-start",Sx);const Cx=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Ex=We("bold",Cx);const wx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_x=We("check",wx);const Ax=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rr=We("chevron-down",Ax);const Nx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],n0=We("chevron-up",Nx);const Mx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rx=We("circle-alert",Mx);const kx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ix=We("clipboard",kx);const zx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Dx=We("copy",zx);const Ux=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Lx=We("disc",Ux);const Px=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gx=We("download",Px);const Hx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ps=We("eye-off",Hx);const Vx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gs=We("eye",Vx);const Bx=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Fx=We("fast-forward",Bx);const Ox=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ur=We("file-text",Ox);const qx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Zm=We("film",qx);const $x=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Qa=We("grip-horizontal",$x);const jx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],i0=We("image",jx);const Yx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Jx=We("info",Yx);const Kx=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Xx=We("italic",Kx);const Qx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Zx=We("key",Qx);const Wx=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],o0=We("keyboard",Wx);const eb=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],cr=We("list-music",eb);const tb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],l0=We("loader-circle",tb);const nb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Bs=We("maximize",nb);const ib=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],s0=We("minimize",ib);const ob=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Pl=We("music",ob);const lb=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],sb=We("palette",lb);const ab=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],rb=We("panels-top-left",ab);const ub=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Wm=We("pause",ub);const cb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Uc=We("play",cb);const db=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eg=We("plus",db);const fb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],pb=We("redo-2",fb);const hb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],mb=We("repeat-1",hb);const gb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],a0=We("repeat",gb);const yb=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],vb=We("rewind",yb);const xb=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bb=We("rotate-ccw",xb);const Sb=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Tb=We("scissors",Sb);const Cb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Eb=We("search",Cb);const wb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lr=We("settings",wb);const _b=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Ab=We("shuffle",_b);const Nb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Mb=We("skip-back",Nb);const Rb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],kb=We("skip-forward",Rb);const Ib=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Lc=We("sparkles",Ib);const zb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Db=We("split",zb);const Ub=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Pc=We("square",Ub);const Lb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Pb=We("strikethrough",Lb);const Gb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],dr=We("trash-2",Gb);const Hb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vb=We("triangle-alert",Hb);const Bb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Uo=We("type",Bb);const Fb=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Ob=We("underline",Fb);const qb=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],$b=We("undo-2",qb);const jb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Lo=We("upload",jb);const Yb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jb=We("user",Yb);const Kb=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Fs=We("video",Kb);const Xb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Do=We("volume-2",Xb);const Qb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Ul=We("volume-x",Qb);const Zb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xi=We("x",Zb);const Wb=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],e1=We("zoom-in",Wb);const t1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],n1=We("zoom-out",t1);var Rn=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(Rn||{});const tg=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},Hs=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let s=0;return o.length===3?(s+=parseInt(o[0],10)*3600,s+=parseInt(o[1],10)*60,s+=parseFloat(o[2])):o.length===2?(s+=parseInt(o[0],10)*60,s+=parseFloat(o[1])):o.length===1&&(s+=parseFloat(o[0])),isNaN(s)?0:s},Gl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},Bl=n=>{const t=n.split(`
`),o=[],s=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(d=>{const h=[...d.matchAll(s)];if(h.length>0){let y=d.replace(s,"").trim();const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(x=x.replace(/\\n/g,`
`),v.length>0){m=[];for(let S=0;S<v.length;S++){const T=v[S],A=parseInt(T[1],10),N=parseInt(T[2],10),O=T[4];let F=A*60+N;O&&(F+=parseInt(O,10)/(O.length===3?1e3:100));const J=(T.index||0)+T[0].length,se=S<v.length-1?v[S+1].index:y.length,ce=y.substring(J,se);ce&&ce.split(/(\\n)/g).forEach(Re=>{Re&&m.push({text:Re==="\\n"?`
`:Re,startTime:F,endTime:0})})}for(let S=0;S<m.length;S++)S<m.length-1?m[S].endTime=m[S+1].startTime:m[S].endTime=m[S].startTime+.5}h.forEach(S=>{const T=parseInt(S[1],10),A=parseInt(S[2],10),N=S[4];let O=T*60+A;N&&(N.length===2?O+=parseInt(N,10)/100:(N.length,O+=parseInt(N,10)/1e3)),o.push({time:O,text:x,words:m})})}}),o.sort((d,h)=>d.time-h.time)},Fl=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),s=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,d=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),S=parseInt(y[4],10);return v*3600+m*60+x+S/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),S=tg(x),T=v.split(" --> ");if(T.length>=2){const A=d(T[0]),N=d(T[1]);A!==null&&S&&s.push({time:A,text:S,endTime:N!==null?N:void 0})}}}),s},Os=n=>{const t=[];try{const s=new DOMParser().parseFromString(n,"text/xml"),d=Array.from(s.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Hs(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<d.length;v++){const m=d[v],x=y(m,"begin"),S=y(m,"end"),T=tg(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=h(x),N=h(S),O=[],J=Array.from(m.getElementsByTagName("*")).filter(se=>se.localName==="span");for(let se=0;se<J.length;se++){const ce=J[se],Ie=y(ce,"begin"),Re=y(ce,"end"),Ue=ce.textContent?.replace(/\s+/g," ");if(Ie&&Re&&Ue&&Ue.length>0){const xe=h(Ie),it=h(Re);xe!==void 0&&it!==void 0&&O.push({text:Ue,startTime:xe,endTime:it})}}A!==void 0&&t.push({time:A,text:T,endTime:N,words:O.length>0?O:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,s)=>o.time-s.time)},i1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(s=>typeof s=="object"&&s!==null&&typeof s.time=="number"&&typeof s.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},o1=({toast:n,onRemove:t})=>{const[o,s]=W.useState(!1);W.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{s(!0),setTimeout(t,300)},d=()=>{switch(n.type){case"success":return p.jsx(_x,{size:18,className:"text-green-400"});case"error":return p.jsx(Rx,{size:18,className:"text-red-400"});default:return p.jsx(Jx,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return p.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[p.jsx("div",{className:"shrink-0",children:d()}),p.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),p.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:p.jsx(xi,{size:16})})]})},l1=({toasts:n,removeToast:t})=>p.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>p.jsx("div",{className:"pointer-events-auto",children:p.jsx(o1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),s1=({isOpen:n,message:t,onConfirm:o,onCancel:s,title:r="Confirm Action"})=>{const[d,h]=W.useState(!1);return W.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),W.useEffect(()=>{const y=v=>{n&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),s()))};return n&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[n,o,s]),!n&&!d?null:p.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),p.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:p.jsx(Vb,{className:"text-orange-500",size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),p.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),p.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",children:p.jsx(xi,{size:20})})]})}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},ng=W.createContext(void 0),xr=()=>{const n=W.useContext(ng);if(!n)throw new Error("useUI must be used within a UIProvider");return n},a1=({children:n})=>{const[t,o]=W.useState([]),s=W.useCallback((S,T,A)=>{let N,O;typeof A=="number"?N=A:typeof A=="object"&&(N=A.duration,O=A.id);const F=O||Math.random().toString(36).substr(2,9);o(J=>[...J.filter(ce=>ce.id!==F),{id:F,type:S,message:T,duration:N}])},[]),r=W.useCallback(S=>{o(T=>T.filter(A=>A.id!==S))},[]),d={success:(S,T)=>s("success",S,T),error:(S,T)=>s("error",S,T),info:(S,T)=>s("info",S,T)},[h,y]=W.useState({isOpen:!1,message:"",title:"",resolve:null}),v=W.useCallback((S,T="Confirm Action")=>new Promise(A=>{y({isOpen:!0,message:S,title:T,resolve:A})}),[]),m=W.useCallback(()=>{h.resolve&&h.resolve(!0),y(S=>({...S,isOpen:!1,resolve:null}))},[h]),x=W.useCallback(()=>{h.resolve&&h.resolve(!1),y(S=>({...S,isOpen:!1,resolve:null}))},[h]);return p.jsxs(ng.Provider,{value:{toast:d,confirm:v},children:[n,p.jsx(l1,{toasts:t,removeToast:r}),p.jsx(s1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},Za=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,r1=(n,t)=>{const o=Math.floor(n/60),s=n%60;return t<1?`${o}:${s.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(s).toString().padStart(2,"0")}`},r0=10,u1=50,Bt={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},c1=n=>new Promise(t=>{const o=URL.createObjectURL(n),s=document.createElement(n.type.startsWith("audio/")?"audio":"video");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(o)},s.onerror=()=>{URL.revokeObjectURL(o),t(0)},s.src=o}),d1=({slides:n,setSlides:t,currentTime:o,duration:s,lyrics:r,onSeek:d,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=xr(),x=W.useRef(null),S=W.useRef(null),T=W.useRef(null),[A,N]=W.useState(40),[O,F]=W.useState([n]),[J,se]=W.useState(0),ce=W.useRef(!1);W.useEffect(()=>{if(ce.current){ce.current=!1;return}const E=O[J];if(JSON.stringify(E)!==JSON.stringify(n)){const C=O.slice(0,J+1);C.push(n),C.length>u1?(C.shift(),F(C)):(F(C),se(J+1))}},[n,O,J]);const Ie=J>0,Re=J<O.length-1,Ue=W.useCallback(()=>{if(J>0){const E=J-1;se(E),ce.current=!0,t(O[E])}},[t,O,J]),xe=W.useCallback(()=>{if(J<O.length-1){const E=J+1;se(E),ce.current=!0,t(O[E])}},[t,O,J]),it=Math.max(0,...n.map(E=>E.endTime)),we=Math.max(s,60,it),Xe=we*A,[ze,pt]=W.useState([]),[St,Mt]=W.useState(null),[be,B]=W.useState([]),ve=W.useCallback(()=>{if(ze.length===0)return;const E=n.filter(C=>ze.includes(C.id));B(E)},[ze,n]),ue=W.useCallback(()=>{if(ze.length===0)return;const E=n.filter(C=>ze.includes(C.id));B(E),t(C=>C.filter(V=>!ze.includes(V.id))),pt([])},[ze,n,t]),mt=W.useRef(n),gt=W.useRef(A);W.useEffect(()=>{mt.current=n,gt.current=A},[n,A]);const z=W.useCallback(()=>{if(be.length===0)return;const E=Math.min(...be.map(k=>k.startTime)),C=o-E,V=be.map(k=>({...k,id:Math.random().toString(36).substr(2,9),startTime:k.startTime+C,endTime:k.endTime+C}));t(k=>[...k,...V].sort((K,I)=>K.startTime-I.startTime)),pt(V.map(k=>k.id))},[be,o,t]),M=W.useCallback(()=>{const E=n.filter(K=>ze.includes(K.id)&&o>K.startTime&&o<K.endTime);if(E.length===0)return;let C=[];const V=[],k=[];E.forEach(K=>{const I=o,X={...K,id:Math.random().toString(36).substr(2,9),endTime:I},ae=I-K.startTime,te={...K,id:Math.random().toString(36).substr(2,9),startTime:I,mediaStartOffset:(K.mediaStartOffset||0)+ae};V.push(K.id),C.push(X,te),k.push(te.id)}),t(K=>[...K.filter(X=>!V.includes(X.id)),...C].sort((X,ae)=>X.startTime-ae.startTime)),pt(k)},[n,ze,o,t]),[ee,Te]=W.useState(null),[Je,_]=W.useState(!1),[L,ne]=W.useState(null),ie=async E=>{if(E.target.files&&E.target.files.length>0){const C=Array.from(E.target.files),V=C.every(K=>K.type.startsWith("image/")),k=[];if(V){const K=C.length,I=o,ae=Math.max(0,s-I)/K,te=Math.max(3,ae);C.forEach((Ne,Oe)=>{const et=URL.createObjectURL(Ne),Fe=I+Oe*te,zt=Fe+te;k.push({id:Math.random().toString(36).substr(2,9),url:et,type:"image",startTime:Fe,endTime:zt,name:Ne.name,layer:0})})}else{let K=o;for(const I of C){const X=I.type.startsWith("image/")?"image":I.type.startsWith("video/")?"video":"audio";let ae=5;if(X!=="image"){const Ne=await c1(I);Ne>0&&(ae=Ne)}const te=URL.createObjectURL(I);k.push({id:Math.random().toString(36).substr(2,9),url:te,type:X,startTime:K,endTime:K+ae,name:I.name,isMuted:X==="video",volume:X==="video"||X==="audio"?1:void 0,layer:0}),K+=ae}}t(K=>[...K,...k].sort((I,X)=>I.startTime-X.startTime)),E.target.value=""}},ke=E=>{t(C=>C.filter(V=>V.id!==E))},Le=async E=>{E.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},Se=(E,C,V)=>{if(E.stopPropagation(),E.preventDefault(),x.current?.focus(),E.shiftKey&&St){const te=n.findIndex(Oe=>Oe.id===St),Ne=n.findIndex(Oe=>Oe.id===C);if(te!==-1&&Ne!==-1){const Oe=Math.min(te,Ne),et=Math.max(te,Ne),Fe=n.slice(Oe,et+1).map(zt=>zt.id);pt(zt=>{const wt=new Set([...zt,...Fe]);return Array.from(wt)})}}else E.ctrlKey||E.metaKey?(pt(te=>te.includes(C)?te.filter(Ne=>Ne!==C):[...te,C]),Mt(C)):(ze.includes(C)||pt([C]),Mt(C));const k=n.find(te=>te.id===C);if(!k)return;const K=ze.includes(C),I=E.ctrlKey||E.metaKey||E.shiftKey;let X=[];if(!I&&!K)X=[C];else if(I){if(X=[C],(E.ctrlKey||E.metaKey)&&!K)X=[...ze,C];else if((E.ctrlKey||E.metaKey)&&K){X=ze.filter(te=>te!==C);return}}else X=ze;const ae={};n.forEach(te=>{X.includes(te.id)&&(ae[te.id]={start:te.startTime,end:te.endTime})}),ae[C]||(ae[C]={start:k.startTime,end:k.endTime}),Te({id:C,type:V,startX:E.clientX,initialStart:k.startTime,initialEnd:k.endTime,initialMap:ae}),window.addEventListener("mousemove",G),window.addEventListener("mouseup",le)},Me=E=>{E.button===0&&(E.stopPropagation(),x.current?.focus(),pt([]),_(!0),P(E.clientX),window.addEventListener("mousemove",Ae),window.addEventListener("mouseup",je))},pe=E=>{if(E.button!==0)return;x.current?.focus();const C=E.clientX,V=E.clientY,k=T.current?.getBoundingClientRect();if(!k)return;const K=C-k.left,I=V-k.top;let X=!1;const ae=Ne=>{const Oe=Math.sqrt(Math.pow(Ne.clientX-C,2)+Math.pow(Ne.clientY-V,2));if(!X&&Oe>5&&(X=!0,ne({x:K,y:I,w:0,h:0})),X&&T.current){const et=T.current.getBoundingClientRect(),Fe=Ne.clientX-et.left-96,zt=Ne.clientY-et.top;ne(yt=>{if(!yt)return null;const ot=Fe-K,Ot=zt-I;return{x:ot>0?K:Fe,y:Ot>0?I:zt,w:Math.abs(ot),h:Math.abs(Ot)}});const wt=[],Ft=mt.current,en=gt.current,st=Math.min(K,Fe),_e=Math.min(I,zt),tt=Math.abs(Fe-K),rt=Math.abs(zt-I),Pe=st+tt,_t=_e+rt;Ft.forEach(yt=>{const ot=yt.startTime*en,Ot=yt.endTime*en;let fn=0,Vn=0;const zi=yt.layer||0;yt.type==="audio"?zi===0?(fn=Bt.AUDIO_L1_TOP,Vn=Bt.AUDIO_L1_TOP+Bt.AUDIO_L1_HEIGHT):(fn=Bt.AUDIO_L2_TOP,Vn=Bt.AUDIO_L2_TOP+Bt.AUDIO_L2_HEIGHT):zi===0?(fn=Bt.VISUAL_L1_TOP,Vn=Bt.VISUAL_L1_TOP+Bt.VISUAL_L1_HEIGHT):(fn=Bt.VISUAL_L2_TOP,Vn=Bt.VISUAL_L2_TOP+Bt.VISUAL_L2_HEIGHT);const kn=st<Ot&&Pe>ot,ai=_e<Vn&&_t>fn;kn&&ai&&wt.push(yt.id)}),pt(wt)}},te=Ne=>{X||(pt([]),P(Ne.clientX)),ne(null),window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",te)};window.addEventListener("mousemove",ae),window.addEventListener("mouseup",te)},P=E=>{if(!T.current)return;const C=T.current.getBoundingClientRect(),V=E-C.left-96;let k=Math.max(0,Math.min(V/A,we));k=Ye(k),d(k)},Ae=E=>{P(E.clientX)},je=()=>{_(!1),window.removeEventListener("mousemove",Ae),window.removeEventListener("mouseup",je)},Be=E=>{const C=E.target;if(!(C.tagName==="INPUT"||C.tagName==="TEXTAREA"||C.isContentEditable)){if((E.ctrlKey||E.metaKey)&&E.key==="z"&&!E.shiftKey){E.preventDefault(),Ue();return}if((E.ctrlKey||E.metaKey)&&(E.key==="y"||E.key==="z"&&E.shiftKey)){E.preventDefault(),xe();return}if((E.ctrlKey||E.metaKey)&&E.key==="c"){E.preventDefault(),ve();return}if((E.ctrlKey||E.metaKey)&&E.key==="x"){E.preventDefault(),ue();return}if((E.ctrlKey||E.metaKey)&&E.key==="v"){E.preventDefault(),z();return}if(E.key.toLowerCase()==="x"&&!E.ctrlKey&&!E.metaKey||(E.ctrlKey||E.metaKey)&&E.key==="k"){E.preventDefault(),E.stopPropagation(),M();return}if((E.key==="Delete"||E.key==="Backspace")&&ze.length>0&&(E.preventDefault(),t(V=>V.filter(k=>!ze.includes(k.id))),pt([])),ze.length>0&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault(),E.stopPropagation();const V=E.key==="ArrowRight"?.01:-.01,k=n.find(K=>K.id===ze[0]);if(k){const K=Math.max(0,k.startTime+V);d(K)}t(K=>K.map(X=>{if(ze.includes(X.id)){const ae=X.endTime-X.startTime;let te=X.startTime+V;return te=Math.max(0,te),{...X,startTime:te,endTime:te+ae}}return X}).sort((X,ae)=>X.startTime-ae.startTime))}}},Ye=(E,C=[])=>{const V=r0/A,k=[0,s,o],K=Za(A),I=Math.round(E/K)*K;k.push(I),n.forEach(te=>{C.includes(te.id)||(k.push(te.startTime),k.push(te.endTime))}),r.forEach(te=>{k.push(te.time)});let X=E,ae=V;for(const te of k){const Ne=Math.abs(te-E);Ne<ae&&(ae=Ne,X=te)}return X},G=E=>{Te(C=>{if(!C)return null;const k=(E.clientX-C.startX)/A;return t(K=>{if(C.type==="move"){const I=Object.keys(C.initialMap),X=Object.values(C.initialMap),ae=Math.min(...X.map(_e=>_e.start)),te=Math.max(...X.map(_e=>_e.end)),Ne=C.initialMap[C.id],Oe=[{type:"drag-start",initVal:Ne.start},{type:"drag-end",initVal:Ne.end},{type:"group-start",initVal:ae},{type:"group-end",initVal:te}],et=r0/A,Fe=[0,s,o],zt=Za(A);n.forEach(_e=>{I.includes(_e.id)||(Fe.push(_e.startTime),Fe.push(_e.endTime))}),r.forEach(_e=>{Fe.push(_e.time)});let wt=k,Ft=et,en=!1;Oe.forEach(_e=>{const tt=_e.initVal+k;for(const _t of Fe){const yt=Math.abs(_t-tt);yt<Ft&&(Ft=yt,wt=_t-_e.initVal,en=!0)}const rt=Math.round(tt/zt)*zt,Pe=Math.abs(rt-tt);Pe<Ft&&(Ft=Pe,wt=rt-_e.initVal,en=!0)});let st=en?wt:k;return ae+st<0&&(st=-ae),K.map(_e=>{const tt=C.initialMap[_e.id];if(tt){const rt=tt.end-tt.start;let Pe=_e.layer||0;const _t=(ot,Ot,fn)=>ot>=Ot&&ot<=Ot+fn,yt=T.current?.getBoundingClientRect();if(yt){const ot=E.clientY-yt.top;_e.type==="audio"?(_t(ot,Bt.AUDIO_L1_TOP,Bt.AUDIO_L1_HEIGHT)&&(Pe=0),_t(ot,Bt.AUDIO_L2_TOP,Bt.AUDIO_L2_HEIGHT)&&(Pe=1)):(_t(ot,Bt.VISUAL_L1_TOP,Bt.VISUAL_L1_HEIGHT)&&(Pe=0),_t(ot,Bt.VISUAL_L2_TOP,Bt.VISUAL_L2_HEIGHT)&&(Pe=1))}return{..._e,startTime:tt.start+st,endTime:tt.start+st+rt,layer:Pe}}return _e})}else if(C.type==="resize-start"){let I=C.initialStart+k;I=Ye(I,[C.id]);const X=.5,ae=C.initialEnd;return I=Math.max(0,Math.min(I,ae-X)),K.map(te=>te.id!==C.id?te:{...te,startTime:I})}else{let I=C.initialEnd+k;I=Ye(I,[C.id]);const X=.5,ae=C.initialStart;return I=Math.max(ae+X,I),K.map(te=>te.id!==C.id?te:{...te,endTime:I})}}),C})},le=E=>{ee&&ee.type==="move"&&Math.abs(E.clientX-ee.startX)<5&&!E.ctrlKey&&!E.metaKey&&!E.shiftKey&&pt([ee.id]),Te(null),window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",le),t(C=>[...C].sort((V,k)=>V.startTime-k.startTime))},de=()=>N(E=>Math.min(200,E+10)),Ee=()=>N(E=>Math.max(10,E-10)),ye=(E,C)=>{v(V=>{const k=V.layerVisibility?.[E]||{},K={...k,[C]:k[C]===!1};return{...V,layerVisibility:{...V.layerVisibility,[E]:K,...E==="visual"?{audio:V.layerVisibility?.audio||{}}:{visual:V.layerVisibility?.visual||{}}}}})},he=(E,C)=>y.layerVisibility?.[E]?.[C]!==!1;return p.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:E=>E.currentTarget.focus(),onKeyDown:Be,children:[p.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[p.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[p.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[p.jsx(Zm,{size:16,className:"text-purple-400"}),"Timeline"]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[p.jsx(eg,{size:14})," Import Media",p.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:ie})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:Ee,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:p.jsx(n1,{size:14})}),p.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[A,"px/s"]}),p.jsx("button",{onClick:de,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:p.jsx(e1,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:Ue,disabled:!Ie,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:p.jsx($b,{size:14})}),p.jsx("button",{onClick:xe,disabled:!Re,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:p.jsx(pb,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:ve,disabled:ze.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:p.jsx(Dx,{size:14})}),p.jsx("button",{onClick:ue,disabled:ze.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:p.jsx(Tb,{size:14})}),p.jsx("button",{onClick:z,disabled:be.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:p.jsx(Ix,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsx("div",{className:"flex items-center gap-1",children:p.jsx("button",{onClick:M,disabled:ze.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:p.jsx(Db,{size:14})})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>{n.length>0&&ze.length===n.length?pt([]):pt(n.map(E=>E.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),ze.length===1&&p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[p.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),p.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const E=n.find(C=>C.id===ze[0]);return E?Gl(E.endTime-E.startTime):"00:00"})(),onBlur:E=>{const V=E.target.value.split(":");if(V.length===2){const K=parseInt(V[0])||0,I=parseInt(V[1])||0,X=K*60+I;X>0&&t(ae=>ae.map(te=>te.id===ze[0]?{...te,endTime:te.startTime+X}:te))}const k=n.find(K=>K.id===ze[0]);k&&(E.target.value=Gl(k.endTime-k.startTime))},onKeyDown:E=>{E.key==="Enter"&&E.currentTarget.blur()}},ze[0])]}),ze.length===1&&(()=>{const E=n.find(C=>C.id===ze[0]);return E&&(E.type==="video"||E.type==="audio")?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),p.jsxs("div",{className:"flex items-center gap-1 w-20",children:[p.jsx("button",{onClick:()=>{t(C=>C.map(V=>V.id===E.id?{...V,isMuted:!V.isMuted}:V))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?p.jsx(Ul,{size:10}):p.jsx(Do,{size:10})}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:E.volume!==void 0?E.volume:1,onChange:C=>{const V=parseFloat(C.target.value);t(k=>k.map(K=>K.id===E.id?{...K,volume:V,isMuted:V===0}:K))}})]}),p.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((E.volume||1)*100),"%"]})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),p.jsx("select",{className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none cursor-pointer w-10",value:E.playbackRate||1,onChange:C=>{const V=parseFloat(C.target.value);t(k=>k.map(K=>K.id===E.id?{...K,playbackRate:V}:K))},children:[.25,.5,.75,1,1.25,1.5,2,3,4].map(C=>p.jsxs("option",{value:C,className:"bg-zinc-800 text-zinc-300",children:[C,"x"]},C))})]})]}):null})()]})]}),p.jsxs("div",{className:"flex gap-2 shrink-0",children:[p.jsx("button",{onClick:Le,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:p.jsx(dr,{size:14})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),p.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:p.jsx(xi,{size:14})})]})]}),p.jsx("div",{ref:S,onWheel:E=>{S.current&&E.shiftKey&&(E.preventDefault(),S.current.scrollLeft+=E.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:p.jsxs("div",{ref:T,className:"relative",style:{width:`${Xe+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:pe,children:[L&&p.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:L.x,top:L.y,width:L.w,height:L.h}}),p.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const E=Za(A);return Array.from({length:Math.ceil(Xe/(A*E))}).map((C,V)=>p.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:V*E*A}},V))})(),s>0&&p.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:s*A},children:p.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),p.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:Me,children:[p.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),p.jsx("div",{className:"relative flex-1",children:(()=>{const E=Za(A);return Array.from({length:Math.ceil(Xe/(A*E))}).map((C,V)=>{const k=V*E;return k>we?null:p.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:k*A,width:E*A},children:r1(k,E)},V)})})()})]}),p.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*A}px)`,willChange:"transform"},children:p.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),p.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Bt.VISUAL_L1_TOP,height:Bt.VISUAL_L1_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Visual 1"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ye("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("visual",0)?p.jsx(Gs,{size:12}):p.jsx(Ps,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&(E.layer===0||E.layer===void 0)).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${ee?.id===E.id||ze.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${ze.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>Se(C,E.id,"move"),children:[E.type==="video"?p.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):p.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:p.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(V=>V.map(k=>k.id===E.id?{...k,isMuted:!k.isMuted}:k))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted!==!1?"Unmute":"Mute",children:E.isMuted!==!1?p.jsx(Ul,{size:10}):p.jsx(Do,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),ke(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:p.jsx(xi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-start"),children:p.jsx(Qa,{size:10,className:"text-white/70 rotate-90"})}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-end"),children:p.jsx(Qa,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Bt.VISUAL_L2_TOP,height:Bt.VISUAL_L2_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Visual 2"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ye("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("visual",1)?p.jsx(Gs,{size:12}):p.jsx(Ps,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type!=="audio"&&E.layer===1).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${ee?.id===E.id||ze.includes(E.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${ze.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:C=>Se(C,E.id,"move"),children:[E.type==="video"?p.jsx("video",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):p.jsx("img",{src:E.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:E.name}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:p.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:E.name})}),E.type==="video"&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(V=>V.map(k=>k.id===E.id?{...k,isMuted:!k.isMuted}:k))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:E.isMuted!==!1?p.jsx(Ul,{size:10}):p.jsx(Do,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),ke(E.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:p.jsx(xi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-start"),children:p.jsx(Qa,{size:10,className:"text-white/70 rotate-90"})}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-end"),children:p.jsx(Qa,{size:10,className:"text-white/70 rotate-90"})})]},E.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Bt.LYRICS_TOP,height:Bt.LYRICS_HEIGHT},children:[p.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:p.jsx("span",{children:"Lyrics"})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((E,C)=>p.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:E.time*A},title:`${Gl(E.time)} - ${E.text}`,onClick:V=>{V.stopPropagation(),d(E.time)},children:[p.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Gl(E.time)}),E.text]},C))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Bt.AUDIO_L1_TOP,height:Bt.AUDIO_L1_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Audio 1"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ye("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("audio",0)?p.jsx(Gs,{size:12}):p.jsx(Ps,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&(E.layer===0||E.layer===void 0)).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ee?.id===E.id||ze.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${ze.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>Se(C,E.id,"move"),children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:p.jsx(Do,{size:16,className:"text-emerald-200"})}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:p.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),t(V=>V.map(k=>k.id===E.id?{...k,isMuted:!k.isMuted}:k))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?p.jsx(Ul,{size:10}):p.jsx(Do,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),ke(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:p.jsx(xi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-start")}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-end")})]},E.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Bt.AUDIO_L2_TOP,height:Bt.AUDIO_L2_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Audio 2"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),ye("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:he("audio",1)?p.jsx(Gs,{size:12}):p.jsx(Ps,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${he("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(E=>E.type==="audio"&&E.layer===1).map(E=>p.jsxs("div",{style:{left:E.startTime*A,width:Math.max(10,(E.endTime-E.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ee?.id===E.id||ze.includes(E.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${ze.includes(E.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>Se(C,E.id,"move"),children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:p.jsx(Do,{size:16,className:"text-emerald-200"})}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:p.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:E.name})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),t(V=>V.map(k=>k.id===E.id?{...k,isMuted:!k.isMuted}:k))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:E.isMuted===!0?"Unmute":"Mute",children:E.isMuted===!0?p.jsx(Ul,{size:10}):p.jsx(Do,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),ke(E.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:p.jsx(xi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-start")}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Se(C,E.id,"resize-end")})]},E.id))})]})]})})]})};var f1={};let p1,h1;function m1(){return{geminiUrl:p1,vertexUrl:h1}}function g1(n,t,o,s){var r,d;if(!n?.baseUrl){const h=m1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(d=h.geminiUrl)!==null&&d!==void 0?d:s}return n.baseUrl}class so{}function $e(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const d=t[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(n,t,o){for(let d=0;d<t.length-1;d++){const h=t[d];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];c(x,t.slice(d+1),o[m])}else for(const m of v)c(m,t.slice(d+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];c(v[0],t.slice(d+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const s=t[t.length-1],r=n[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[s]=o}function u(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let s=0;s<t.length;s++){if(typeof n!="object"||n===null)return o;const r=t[s];if(r.endsWith("[]")){const d=r.slice(0,-2);if(d in n){const h=n[d];return Array.isArray(h)?h.map(y=>u(y,t.slice(s+1),o)):o}else return o}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return o;throw s}}function y1(n,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),d=s.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&d.length>y)for(let v=y;v<d.length;v++){const m=d[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}Gc(n,r,d,0,h)}}function Gc(n,t,o,s,r){if(s>=t.length||typeof n!="object"||n===null)return;const d=t[s];if(d.endsWith("[]")){const h=d.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])Gc(v,t,o,s+1,r)}else if(d==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const S=[];for(const T of o.slice(s))T==="*"?S.push(m):S.push(T);c(h,S,x)}for(const m of y)delete h[m]}}else{const h=n;d in h&&Gc(h[d],t,o,s+1,r)}}function nd(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function v1(n){const t={},o=u(n,["operationName"]);o!=null&&c(t,["operationName"],o);const s=u(n,["resourceName"]);return s!=null&&c(t,["_url","resourceName"],s),t}function x1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response","generateVideoResponse"]);return h!=null&&c(t,["response"],S1(h)),t}function b1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],T1(h)),t}function S1(n){const t={},o=u(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>C1(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function T1(n){const t={},o=u(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>E1(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function C1(n){const t={},o=u(n,["video"]);return o!=null&&c(t,["video"],R1(o)),t}function E1(n){const t={},o=u(n,["_self"]);return o!=null&&c(t,["video"],k1(o)),t}function w1(n){const t={},o=u(n,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function _1(n){const t={},o=u(n,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function A1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],N1(h)),t}function N1(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function ig(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],M1(h)),t}function M1(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function R1(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&c(t,["videoBytes"],nd(s));const r=u(n,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function k1(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],nd(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}var u0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(u0||(u0={}));var c0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(c0||(c0={}));var d0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(d0||(d0={}));var sn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(sn||(sn={}));var f0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(f0||(f0={}));var p0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(p0||(p0={}));var h0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(h0||(h0={}));var m0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(m0||(m0={}));var g0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(g0||(g0={}));var y0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(y0||(y0={}));var v0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v0||(v0={}));var x0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(x0||(x0={}));var b0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(b0||(b0={}));var S0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(S0||(S0={}));var T0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(T0||(T0={}));var C0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(C0||(C0={}));var E0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(E0||(E0={}));var w0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(w0||(w0={}));var _0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_0||(_0={}));var fr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(fr||(fr={}));var A0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(A0||(A0={}));var N0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(N0||(N0={}));var M0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(M0||(M0={}));var Hc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hc||(Hc={}));var R0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(R0||(R0={}));var k0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(k0||(k0={}));var I0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(I0||(I0={}));var z0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(z0||(z0={}));var D0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(D0||(D0={}));var U0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(U0||(U0={}));var L0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(L0||(L0={}));var P0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(P0||(P0={}));var G0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(G0||(G0={}));var H0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(H0||(H0={}));var V0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(V0||(V0={}));var B0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(B0||(B0={}));var F0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(F0||(F0={}));var O0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(O0||(O0={}));var q0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(q0||(q0={}));var $0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})($0||($0={}));var j0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(j0||(j0={}));var Y0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Y0||(Y0={}));var J0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(J0||(J0={}));var K0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(K0||(K0={}));var X0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(X0||(X0={}));var Q0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Q0||(Q0={}));var Z0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z0||(Z0={}));var W0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(W0||(W0={}));var em;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(em||(em={}));var tm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tm||(tm={}));var nm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nm||(nm={}));var im;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(im||(im={}));var om;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(om||(om={}));var lm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lm||(lm={}));var sm;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(sm||(sm={}));var Hl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Hl||(Hl={}));class Vc{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class Us{get text(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const S=[];for(const T of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[A,N]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&S.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const S of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(S))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);S.inlineData&&typeof S.inlineData.data=="string"&&(m+=atob(S.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class am{}class rm{}class I1{}class z1{}class D1{}class U1{}class um{}class cm{}class dm{}class L1{}class pr{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new pr;let r;const d=t;return o?r=b1(d):r=x1(d),Object.assign(s,r),s}}class fm{}class pm{}class hm{}class mm{}class P1{}class G1{}class H1{}class id{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new id,d=A1(t);return Object.assign(s,d),s}}class V1{}class B1{}class F1{}class gm{}class O1{get text(){var t,o,s;let r="",d=!1;const h=[];for(const y of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;d=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var t,o,s;let r="";const d=[];for(const h of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&d.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class q1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class od{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new od,d=ig(t);return Object.assign(s,d),s}}function Gt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function og(n,t){const o=Gt(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function lg(n){return Array.isArray(n)?n.map(t=>hr(t)):[hr(n)]}function hr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function sg(n){const t=hr(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ag(n){const t=hr(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ym(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function rg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>ym(t)):[ym(n)]}function Bc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Dn(n){if(n==null)throw new Error("ContentUnion is required");return Bc(n)?n:{role:"user",parts:rg(n)}}function ld(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=Dn(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const o=Dn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>Dn(o)):[Dn(t)]}function bi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(vm(n)||xm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dn(n)]}const t=[],o=[],s=Bc(n[0]);for(const r of n){const d=Bc(r);if(d!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(r);else{if(vm(r)||xm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:rg(o)}),t}function $1(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(sn).includes(o[0].toUpperCase())?o[0].toUpperCase():sn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(sn).includes(s.toUpperCase())?s.toUpperCase():sn.TYPE_UNSPECIFIED})}}function Ol(n){const t={},o=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=n.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(t.nullable=!0,n=d[1]):d[1].type==="null"&&(t.nullable=!0,n=d[0])),n.type instanceof Array&&$1(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(sn).includes(y.toUpperCase())?y.toUpperCase():sn.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=Ol(y);else if(s.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(Ol(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=Ol(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function sd(n){return Ol(n)}function ad(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function rd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function $l(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ol(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ol(t.response));return n}function jl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function j1(n,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function ao(n,t){if(typeof t!="string")throw new Error("name must be a string");return j1(n,t,"cachedContents")}function ug(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Po(n){return nd(n)}function Y1(n){return n!=null&&typeof n=="object"&&"name"in n}function J1(n){return n!=null&&typeof n=="object"&&"video"in n}function K1(n){return n!=null&&typeof n=="object"&&"uri"in n}function cg(n){var t;let o;if(Y1(n)&&(o=n.name),!(K1(n)&&(o=n.uri,o===void 0))&&!(J1(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function dg(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function fg(n){for(const t of["models","tunedModels","publisherModels"])if(X1(n,t))return n[t];return[]}function X1(n,t){return n!==null&&typeof n=="object"&&t in n}function Q1(n,t={}){const o=n,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function Z1(n,t={}){const o=[],s=new Set;for(const r of n){const d=r.name;if(s.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);s.add(d);const h=Q1(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function pg(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function W1(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function hg(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let d=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){d=!0;break}}return d&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function Yl(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function mg(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function eS(n){const t={},o=u(n,["responsesFile"]);o!=null&&c(t,["fileName"],o);const s=u(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>DS(h))),c(t,["inlinedResponses"],d)}const r=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["inlinedEmbedContentResponses"],d)}return t}function tS(n){const t={},o=u(n,["predictionsFormat"]);o!=null&&c(t,["format"],o);const s=u(n,["gcsDestination","outputUriPrefix"]);s!=null&&c(t,["gcsUri"],s);const r=u(n,["bigqueryDestination","outputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function nS(n){const t={},o=u(n,["format"]);o!=null&&c(t,["predictionsFormat"],o);const s=u(n,["gcsUri"]);s!=null&&c(t,["gcsDestination","outputUriPrefix"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&c(t,["bigqueryDestination","outputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function sr(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata","displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["metadata","state"]);r!=null&&c(t,["state"],mg(r));const d=u(n,["metadata","createTime"]);d!=null&&c(t,["createTime"],d);const h=u(n,["metadata","endTime"]);h!=null&&c(t,["endTime"],h);const y=u(n,["metadata","updateTime"]);y!=null&&c(t,["updateTime"],y);const v=u(n,["metadata","model"]);v!=null&&c(t,["model"],v);const m=u(n,["metadata","output"]);return m!=null&&c(t,["dest"],eS(hg(m))),t}function Fc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["state"]);r!=null&&c(t,["state"],mg(r));const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["createTime"]);h!=null&&c(t,["createTime"],h);const y=u(n,["startTime"]);y!=null&&c(t,["startTime"],y);const v=u(n,["endTime"]);v!=null&&c(t,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(t,["updateTime"],m);const x=u(n,["model"]);x!=null&&c(t,["model"],x);const S=u(n,["inputConfig"]);S!=null&&c(t,["src"],iS(S));const T=u(n,["outputConfig"]);T!=null&&c(t,["dest"],tS(hg(T)));const A=u(n,["completionStats"]);return A!=null&&c(t,["completionStats"],A),t}function iS(n){const t={},o=u(n,["instancesFormat"]);o!=null&&c(t,["format"],o);const s=u(n,["gcsSource","uris"]);s!=null&&c(t,["gcsUri"],s);const r=u(n,["bigquerySource","inputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function oS(n,t){const o={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(t,["fileName"]);s!=null&&c(o,["fileName"],s);const r=u(t,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>zS(n,h))),c(o,["requests","requests"],d)}return o}function lS(n){const t={},o=u(n,["format"]);o!=null&&c(t,["instancesFormat"],o);const s=u(n,["gcsUri"]);s!=null&&c(t,["gcsSource","uris"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&c(t,["bigquerySource","inputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function sS(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function aS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Yl(n,s)),o}function rS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Yl(n,s)),o}function uS(n){const t={},o=u(n,["content"]);o!=null&&c(t,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],cS(s));const r=u(n,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const d=u(n,["finishReason"]);d!=null&&c(t,["finishReason"],d);const h=u(n,["avgLogprobs"]);h!=null&&c(t,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(t,["groundingMetadata"],y);const v=u(n,["index"]);v!=null&&c(t,["index"],v);const m=u(n,["logprobsResult"]);m!=null&&c(t,["logprobsResult"],m);const x=u(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),c(t,["safetyRatings"],T)}const S=u(n,["urlContextMetadata"]);return S!=null&&c(t,["urlContextMetadata"],S),t}function cS(n){const t={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function gg(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>BS(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function dS(n,t){const o={},s=u(n,["displayName"]);if(t!==void 0&&s!=null&&c(t,["batch","displayName"],s),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function fS(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["dest"]);return t!==void 0&&r!=null&&c(t,["outputConfig"],nS(W1(r))),o}function bm(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],oS(n,pg(n,r)));const d=u(t,["config"]);return d!=null&&dS(d,o),o}function pS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],Gt(n,s));const r=u(t,["src"]);r!=null&&c(o,["inputConfig"],lS(pg(n,r)));const d=u(t,["config"]);return d!=null&&fS(d,o),o}function hS(n,t){const o={},s=u(n,["displayName"]);return t!==void 0&&s!=null&&c(t,["batch","displayName"],s),o}function mS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],TS(n,r));const d=u(t,["config"]);return d!=null&&hS(d,o),o}function gS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Yl(n,s)),o}function yS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Yl(n,s)),o}function vS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);return d!=null&&c(t,["error"],d),t}function xS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);return d!=null&&c(t,["error"],d),t}function bS(n,t){const o={},s=u(t,["contents"]);if(s!=null){let d=ld(n,s);Array.isArray(d)&&(d=d.map(h=>h)),c(o,["requests[]","request","content"],d)}const r=u(t,["config"]);return r!=null&&(c(o,["_self"],SS(r,o)),y1(o,{"requests[].*":"requests[].request.*"})),o}function SS(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const d=u(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function TS(n,t){const o={},s=u(t,["fileName"]);s!=null&&c(o,["file_name"],s);const r=u(t,["inlinedRequests"]);return r!=null&&c(o,["requests"],bS(n,r)),o}function CS(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function ES(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function wS(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function _S(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],gg(Dn(r)));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const J=u(t,["responseSchema"]);J!=null&&c(s,["responseSchema"],sd(J));const se=u(t,["responseJsonSchema"]);if(se!=null&&c(s,["responseJsonSchema"],se),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=u(t,["safetySettings"]);if(o!==void 0&&ce!=null){let St=ce;Array.isArray(St)&&(St=St.map(Mt=>FS(Mt))),c(o,["safetySettings"],St)}const Ie=u(t,["tools"]);if(o!==void 0&&Ie!=null){let St=jl(Ie);Array.isArray(St)&&(St=St.map(Mt=>qS($l(Mt)))),c(o,["tools"],St)}const Re=u(t,["toolConfig"]);if(o!==void 0&&Re!=null&&c(o,["toolConfig"],OS(Re)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Ue=u(t,["cachedContent"]);o!==void 0&&Ue!=null&&c(o,["cachedContent"],ao(n,Ue));const xe=u(t,["responseModalities"]);xe!=null&&c(s,["responseModalities"],xe);const it=u(t,["mediaResolution"]);it!=null&&c(s,["mediaResolution"],it);const we=u(t,["speechConfig"]);if(we!=null&&c(s,["speechConfig"],ad(we)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Xe=u(t,["thinkingConfig"]);Xe!=null&&c(s,["thinkingConfig"],Xe);const ze=u(t,["imageConfig"]);ze!=null&&c(s,["imageConfig"],IS(ze));const pt=u(t,["enableEnhancedCivicAnswers"]);return pt!=null&&c(s,["enableEnhancedCivicAnswers"],pt),s}function AS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>uS(m))),c(t,["candidates"],v)}const r=u(n,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const d=u(n,["promptFeedback"]);d!=null&&c(t,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(t,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(t,["usageMetadata"],y),t}function NS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Yl(n,s)),o}function MS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Yl(n,s)),o}function RS(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function kS(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function IS(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function zS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["request","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let y=bi(r);Array.isArray(y)&&(y=y.map(v=>gg(v))),c(o,["request","contents"],y)}const d=u(t,["metadata"]);d!=null&&c(o,["metadata"],d);const h=u(t,["config"]);return h!=null&&c(o,["request","generationConfig"],_S(n,h,u(o,["request"],{}))),o}function DS(n){const t={},o=u(n,["response"]);o!=null&&c(t,["response"],AS(o));const s=u(n,["error"]);return s!=null&&c(t,["error"],s),t}function US(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);if(t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function LS(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);t!==void 0&&r!=null&&c(t,["_query","pageToken"],r);const d=u(n,["filter"]);return t!==void 0&&d!=null&&c(t,["_query","filter"],d),o}function PS(n){const t={},o=u(n,["config"]);return o!=null&&US(o,t),t}function GS(n){const t={},o=u(n,["config"]);return o!=null&&LS(o,t),t}function HS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>sr(h))),c(t,["batchJobs"],d)}return t}function VS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>Fc(h))),c(t,["batchJobs"],d)}return t}function BS(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],CS(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],ES(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],sS(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function FS(n){const t={},o=u(n,["category"]);if(o!=null&&c(t,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function OS(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],wS(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function qS(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],RS(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],kS(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}var lo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(lo||(lo={}));class il{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,d;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!s||Object.keys(s).length===0?h={config:{}}:typeof s=="object"?h=Object.assign({},s):h=s,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(d=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class $S extends so{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new il(lo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=bm(this.apiClient,t),s=o._url,r=$e("{model}:batchGenerateContent",s),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const S=Object.assign({},x);if(S.systemInstruction){const T=S.systemInstruction;delete S.systemInstruction;const A=S.request;A.systemInstruction=T,S.request=A}m.push(S)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const d=this.getGcsUri(t),h=this.getBigqueryUri(t);if(d)d.endsWith(".jsonl")?s.dest=`${d.slice(0,-6)}/dest`:s.dest=`${d}_dest_${r}`;else if(h)s.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=pS(this.apiClient,t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>Fc(x))}else{const m=bm(this.apiClient,t);return y=$e("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>sr(x))}}async createEmbeddingsInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=mS(this.apiClient,t);return d=$e("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>sr(v))}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=MS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>Fc(x))}else{const m=NS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>sr(x))}}async cancel(t){var o,s,r,d;let h="",y={};if(this.apiClient.isVertexAI()){const v=rS(this.apiClient,t);h=$e("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=aS(this.apiClient,t);h=$e("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=GS(t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=VS(x),T=new gm;return Object.assign(T,S),T})}else{const m=PS(t);return y=$e("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=HS(x),T=new gm;return Object.assign(T,S),T})}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=yS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>xS(x))}else{const m=gS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>vS(x))}}}function jS(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Sm(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>mT(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function YS(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const d=u(n,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const h=u(n,["contents"]);if(t!==void 0&&h!=null){let x=bi(h);Array.isArray(x)&&(x=x.map(S=>Sm(S))),c(t,["contents"],x)}const y=u(n,["systemInstruction"]);t!==void 0&&y!=null&&c(t,["systemInstruction"],Sm(Dn(y)));const v=u(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>yT(S))),c(t,["tools"],x)}const m=u(n,["toolConfig"]);if(t!==void 0&&m!=null&&c(t,["toolConfig"],gT(m)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function JS(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const d=u(n,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const h=u(n,["contents"]);if(t!==void 0&&h!=null){let S=bi(h);Array.isArray(S)&&(S=S.map(T=>T)),c(t,["contents"],S)}const y=u(n,["systemInstruction"]);t!==void 0&&y!=null&&c(t,["systemInstruction"],Dn(y));const v=u(n,["tools"]);if(t!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>vT(T))),c(t,["tools"],S)}const m=u(n,["toolConfig"]);t!==void 0&&m!=null&&c(t,["toolConfig"],m);const x=u(n,["kmsKeyName"]);return t!==void 0&&x!=null&&c(t,["encryption_spec","kmsKeyName"],x),o}function KS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],og(n,s));const r=u(t,["config"]);return r!=null&&YS(r,o),o}function XS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],og(n,s));const r=u(t,["config"]);return r!=null&&JS(r,o),o}function QS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],ao(n,s)),o}function ZS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],ao(n,s)),o}function WS(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function eT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function tT(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function nT(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function iT(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function oT(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function lT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],ao(n,s)),o}function sT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],ao(n,s)),o}function aT(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function rT(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function uT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function cT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function dT(n){const t={},o=u(n,["config"]);return o!=null&&uT(o,t),t}function fT(n){const t={},o=u(n,["config"]);return o!=null&&cT(o,t),t}function pT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["cachedContents"],d)}return t}function hT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["cachedContents"],d)}return t}function mT(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],tT(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],nT(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],jS(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function gT(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],iT(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function yT(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],aT(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],rT(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function vT(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>oT(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function xT(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function bT(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function ST(n,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],ao(n,s));const r=u(t,["config"]);return r!=null&&xT(r,o),o}function TT(n,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],ao(n,s));const r=u(t,["config"]);return r!=null&&bT(r,o),o}class CT extends so{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new il(lo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=XS(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=KS(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=sT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=lT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=ZS(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=eT(x),T=new hm;return Object.assign(T,S),T})}else{const m=QS(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=WS(x),T=new hm;return Object.assign(T,S),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=TT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=ST(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=fT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=hT(x),T=new mm;return Object.assign(T,S),T})}else{const m=dT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=pT(x),T=new mm;return Object.assign(T,S),T})}}}function mr(n,t){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(o[s[r]]=n[s[r]]);return o}function Tm(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(n){return this instanceof xt?(this.v=n,this):new xt(n)}function Ri(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,t||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(A){return function(N){return Promise.resolve(N).then(A,S)}}function y(A,N){s[A]&&(r[A]=function(O){return new Promise(function(F,J){d.push([A,O,F,J])>1||v(A,O)})},N&&(r[A]=N(r[A])))}function v(A,N){try{m(s[A](N))}catch(O){T(d[0][3],O)}}function m(A){A.value instanceof xt?Promise.resolve(A.value.v).then(x,S):T(d[0][2],A)}function x(A){v("next",A)}function S(A){v("throw",A)}function T(A,N){A(N),d.shift(),d.length&&v(d[0][0],d[0][1])}}function ki(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Tm=="function"?Tm(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(d){o[d]=n[d]&&function(h){return new Promise(function(y,v){h=n[d](h),r(y,v,h.done,h.value)})}}function r(d,h,y,v){Promise.resolve(v).then(function(m){d({value:m,done:y})},h)}}function ET(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:yg(o)}function yg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function wT(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Cm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let s=0;for(;s<o;)if(n[s].role==="user")t.push(n[s]),s++;else{const r=[];let d=!0;for(;s<o&&n[s].role==="model";)r.push(n[s]),d&&!yg(n[s])&&(d=!1),s++;d?t.push(...r):t.pop()}return t}class _T{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new AT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class AT{constructor(t,o,s,r={},d=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),wT(d)}async sendMessage(t){var o;await this.sendPromise;const s=Dn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var d,h,y;const v=await r,m=(h=(d=v.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let T=[];x!=null&&(T=(y=x.slice(S))!==null&&y!==void 0?y:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=Dn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,s)}getHistory(t=!1){const o=t?Cm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Ri(this,arguments,function*(){var r,d,h,y,v,m;const x=[];try{for(var S=!0,T=ki(t),A;A=yield xt(T.next()),r=A.done,!r;S=!0){y=A.value,S=!1;const N=y;if(ET(N)){const O=(m=(v=N.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;O!==void 0&&x.push(O)}yield yield xt(N)}}catch(N){d={error:N}}finally{try{!S&&!r&&(h=T.return)&&(yield xt(h.call(T)))}finally{if(d)throw d.error}}this.recordHistory(o,x)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(d=>d.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Cm(s)):this.history.push(t),this.history.push(...r)}}class br extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,br.prototype)}}function NT(n){const t={},o=u(n,["file"]);return o!=null&&c(t,["file"],o),t}function MT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function RT(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","file"],cg(o)),t}function kT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function IT(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","file"],cg(o)),t}function zT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function DT(n){const t={},o=u(n,["config"]);return o!=null&&zT(o,t),t}function UT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["files"],d)}return t}class LT extends so{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new il(lo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=DT(t);return d=$e("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=UT(v),x=new V1;return Object.assign(x,m),x})}}async createInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=NT(t);return d=$e("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=MT(v),x=new B1;return Object.assign(x,m),x})}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=IT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=RT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=kT(v),x=new F1;return Object.assign(x,m),x})}}}function ar(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function PT(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>WT(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function GT(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function HT(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function VT(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function BT(n){const t={},o=u(n,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const d=u(n,["candidateCount"]);d!=null&&c(t,["candidateCount"],d);const h=u(n,["enableAffectiveDialog"]);h!=null&&c(t,["enableAffectiveDialog"],h);const y=u(n,["frequencyPenalty"]);y!=null&&c(t,["frequencyPenalty"],y);const v=u(n,["logprobs"]);v!=null&&c(t,["logprobs"],v);const m=u(n,["maxOutputTokens"]);m!=null&&c(t,["maxOutputTokens"],m);const x=u(n,["mediaResolution"]);x!=null&&c(t,["mediaResolution"],x);const S=u(n,["presencePenalty"]);S!=null&&c(t,["presencePenalty"],S);const T=u(n,["responseLogprobs"]);T!=null&&c(t,["responseLogprobs"],T);const A=u(n,["responseMimeType"]);A!=null&&c(t,["responseMimeType"],A);const N=u(n,["responseModalities"]);N!=null&&c(t,["responseModalities"],N);const O=u(n,["responseSchema"]);O!=null&&c(t,["responseSchema"],O);const F=u(n,["routingConfig"]);F!=null&&c(t,["routingConfig"],F);const J=u(n,["seed"]);J!=null&&c(t,["seed"],J);const se=u(n,["speechConfig"]);se!=null&&c(t,["speechConfig"],se);const ce=u(n,["stopSequences"]);ce!=null&&c(t,["stopSequences"],ce);const Ie=u(n,["temperature"]);Ie!=null&&c(t,["temperature"],Ie);const Re=u(n,["thinkingConfig"]);Re!=null&&c(t,["thinkingConfig"],Re);const Ue=u(n,["topK"]);Ue!=null&&c(t,["topK"],Ue);const xe=u(n,["topP"]);if(xe!=null&&c(t,["topP"],xe),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function FT(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function OT(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function qT(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],rd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],PT(Dn(N)));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let Ue=jl(O);Array.isArray(Ue)&&(Ue=Ue.map(xe=>tC($l(xe)))),c(t,["setup","tools"],Ue)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],eC(F));const J=u(n,["inputAudioTranscription"]);t!==void 0&&J!=null&&c(t,["setup","inputAudioTranscription"],J);const se=u(n,["outputAudioTranscription"]);t!==void 0&&se!=null&&c(t,["setup","outputAudioTranscription"],se);const ce=u(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&c(t,["setup","realtimeInputConfig"],ce);const Ie=u(n,["contextWindowCompression"]);t!==void 0&&Ie!=null&&c(t,["setup","contextWindowCompression"],Ie);const Re=u(n,["proactivity"]);if(t!==void 0&&Re!=null&&c(t,["setup","proactivity"],Re),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function $T(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],BT(s));const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],rd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],Dn(N));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let xe=jl(O);Array.isArray(xe)&&(xe=xe.map(it=>nC($l(it)))),c(t,["setup","tools"],xe)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],F);const J=u(n,["inputAudioTranscription"]);t!==void 0&&J!=null&&c(t,["setup","inputAudioTranscription"],J);const se=u(n,["outputAudioTranscription"]);t!==void 0&&se!=null&&c(t,["setup","outputAudioTranscription"],se);const ce=u(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&c(t,["setup","realtimeInputConfig"],ce);const Ie=u(n,["contextWindowCompression"]);t!==void 0&&Ie!=null&&c(t,["setup","contextWindowCompression"],Ie);const Re=u(n,["proactivity"]);t!==void 0&&Re!=null&&c(t,["setup","proactivity"],Re);const Ue=u(n,["explicitVadSignal"]);return t!==void 0&&Ue!=null&&c(t,["setup","explicitVadSignal"],Ue),o}function jT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],qT(r,o)),o}function YT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],$T(r,o)),o}function JT(n){const t={},o=u(n,["musicGenerationConfig"]);return o!=null&&c(t,["musicGenerationConfig"],o),t}function KT(n){const t={},o=u(n,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["weightedPrompts"],s)}return t}function XT(n){const t={},o=u(n,["media"]);if(o!=null){let m=lg(o);Array.isArray(m)&&(m=m.map(x=>ar(x))),c(t,["mediaChunks"],m)}const s=u(n,["audio"]);s!=null&&c(t,["audio"],ar(ag(s)));const r=u(n,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const d=u(n,["video"]);d!=null&&c(t,["video"],ar(sg(d)));const h=u(n,["text"]);h!=null&&c(t,["text"],h);const y=u(n,["activityStart"]);y!=null&&c(t,["activityStart"],y);const v=u(n,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function QT(n){const t={},o=u(n,["media"]);if(o!=null){let m=lg(o);Array.isArray(m)&&(m=m.map(x=>x)),c(t,["mediaChunks"],m)}const s=u(n,["audio"]);s!=null&&c(t,["audio"],ag(s));const r=u(n,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const d=u(n,["video"]);d!=null&&c(t,["video"],sg(d));const h=u(n,["text"]);h!=null&&c(t,["text"],h);const y=u(n,["activityStart"]);y!=null&&c(t,["activityStart"],y);const v=u(n,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function ZT(n){const t={},o=u(n,["setupComplete"]);o!=null&&c(t,["setupComplete"],o);const s=u(n,["serverContent"]);s!=null&&c(t,["serverContent"],s);const r=u(n,["toolCall"]);r!=null&&c(t,["toolCall"],r);const d=u(n,["toolCallCancellation"]);d!=null&&c(t,["toolCallCancellation"],d);const h=u(n,["usageMetadata"]);h!=null&&c(t,["usageMetadata"],iC(h));const y=u(n,["goAway"]);y!=null&&c(t,["goAway"],y);const v=u(n,["sessionResumptionUpdate"]);v!=null&&c(t,["sessionResumptionUpdate"],v);const m=u(n,["voiceActivityDetectionSignal"]);return m!=null&&c(t,["voiceActivityDetectionSignal"],m),t}function WT(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],GT(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],HT(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],ar(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function eC(n){const t={},o=u(n,["handle"]);if(o!=null&&c(t,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function tC(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],FT(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],OT(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function nC(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>VT(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function iC(n){const t={},o=u(n,["promptTokenCount"]);o!=null&&c(t,["promptTokenCount"],o);const s=u(n,["cachedContentTokenCount"]);s!=null&&c(t,["cachedContentTokenCount"],s);const r=u(n,["candidatesTokenCount"]);r!=null&&c(t,["responseTokenCount"],r);const d=u(n,["toolUsePromptTokenCount"]);d!=null&&c(t,["toolUsePromptTokenCount"],d);const h=u(n,["thoughtsTokenCount"]);h!=null&&c(t,["thoughtsTokenCount"],h);const y=u(n,["totalTokenCount"]);y!=null&&c(t,["totalTokenCount"],y);const v=u(n,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["promptTokensDetails"],A)}const m=u(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["cacheTokensDetails"],A)}const x=u(n,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["responseTokensDetails"],A)}const S=u(n,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["toolUsePromptTokensDetails"],A)}const T=u(n,["trafficType"]);return T!=null&&c(t,["trafficType"],T),t}function oC(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function lC(n){const t={},o=u(n,["content"]);o!=null&&c(t,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],sC(s));const r=u(n,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const d=u(n,["finishReason"]);d!=null&&c(t,["finishReason"],d);const h=u(n,["avgLogprobs"]);h!=null&&c(t,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(t,["groundingMetadata"],y);const v=u(n,["index"]);v!=null&&c(t,["index"],v);const m=u(n,["logprobsResult"]);m!=null&&c(t,["logprobsResult"],m);const x=u(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),c(t,["safetyRatings"],T)}const S=u(n,["urlContextMetadata"]);return S!=null&&c(t,["urlContextMetadata"],S),t}function sC(n){const t={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function aC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let d=bi(r);Array.isArray(d)&&(d=d.map(h=>h)),c(o,["contents"],d)}return o}function rC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(t,["tokensInfo"],r)}return t}function uC(n){const t={},o=u(n,["values"]);o!=null&&c(t,["values"],o);const s=u(n,["statistics"]);return s!=null&&c(t,["statistics"],cC(s)),t}function cC(n){const t={},o=u(n,["truncated"]);o!=null&&c(t,["truncated"],o);const s=u(n,["token_count"]);return s!=null&&c(t,["tokenCount"],s),t}function Sr(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>xE(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function dC(n){const t={},o=u(n,["controlType"]);o!=null&&c(t,["controlType"],o);const s=u(n,["enableControlImageComputation"]);return s!=null&&c(t,["computeControl"],s),t}function fC(n){const t={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function pC(n,t){const o={},s=u(n,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],Dn(s));const r=u(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>Sg(y))),c(t,["tools"],h)}const d=u(n,["generationConfig"]);return t!==void 0&&d!=null&&c(t,["generationConfig"],oE(d)),o}function hC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=bi(r);Array.isArray(h)&&(h=h.map(y=>Sr(y))),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&fC(d),o}function mC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=bi(r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&pC(d,o),o}function gC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);s!=null&&c(t,["totalTokens"],s);const r=u(n,["cachedContentTokenCount"]);return r!=null&&c(t,["cachedContentTokenCount"],r),t}function yC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);return s!=null&&c(t,["totalTokens"],s),t}function vC(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function xC(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function bC(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function SC(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function TC(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const d=u(n,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const h=u(n,["aspectRatio"]);t!==void 0&&h!=null&&c(t,["parameters","aspectRatio"],h);const y=u(n,["guidanceScale"]);t!==void 0&&y!=null&&c(t,["parameters","guidanceScale"],y);const v=u(n,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const m=u(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&c(t,["parameters","includeSafetyAttributes"],S);const T=u(n,["includeRaiReason"]);t!==void 0&&T!=null&&c(t,["parameters","includeRaiReason"],T);const A=u(n,["language"]);t!==void 0&&A!=null&&c(t,["parameters","language"],A);const N=u(n,["outputMimeType"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","mimeType"],N);const O=u(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&c(t,["parameters","outputOptions","compressionQuality"],O);const F=u(n,["addWatermark"]);t!==void 0&&F!=null&&c(t,["parameters","addWatermark"],F);const J=u(n,["labels"]);t!==void 0&&J!=null&&c(t,["labels"],J);const se=u(n,["editMode"]);t!==void 0&&se!=null&&c(t,["parameters","editMode"],se);const ce=u(n,["baseSteps"]);return t!==void 0&&ce!=null&&c(t,["parameters","editConfig","baseSteps"],ce),o}function CC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>wE(v))),c(o,["instances[0]","referenceImages"],y)}const h=u(t,["config"]);return h!=null&&TC(h,o),o}function EC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Tr(d))),c(t,["generatedImages"],r)}return t}function wC(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const d=u(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function _C(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["instances[]","task_type"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["instances[]","title"],r);const d=u(n,["outputDimensionality"]);t!==void 0&&d!=null&&c(t,["parameters","outputDimensionality"],d);const h=u(n,["mimeType"]);t!==void 0&&h!=null&&c(t,["instances[]","mimeType"],h);const y=u(n,["autoTruncate"]);return t!==void 0&&y!=null&&c(t,["parameters","autoTruncate"],y),o}function AC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let y=ld(n,r);Array.isArray(y)&&(y=y.map(v=>v)),c(o,["requests[]","content"],y)}const d=u(t,["config"]);d!=null&&wC(d,o);const h=u(t,["model"]);return h!==void 0&&c(o,["requests[]","model"],Gt(n,h)),o}function NC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=ld(n,r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["instances[]","content"],h)}const d=u(t,["config"]);return d!=null&&_C(d,o),o}function MC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["embeddings"],d)}const r=u(n,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function RC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions[]","embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>uC(h))),c(t,["embeddings"],d)}const r=u(n,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function kC(n){const t={},o=u(n,["endpoint"]);o!=null&&c(t,["name"],o);const s=u(n,["deployedModelId"]);return s!=null&&c(t,["deployedModelId"],s),t}function IC(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function zC(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function DC(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function UC(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function LC(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Sr(Dn(r)));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const J=u(t,["responseSchema"]);J!=null&&c(s,["responseSchema"],sd(J));const se=u(t,["responseJsonSchema"]);if(se!=null&&c(s,["responseJsonSchema"],se),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ce=u(t,["safetySettings"]);if(o!==void 0&&ce!=null){let St=ce;Array.isArray(St)&&(St=St.map(Mt=>_E(Mt))),c(o,["safetySettings"],St)}const Ie=u(t,["tools"]);if(o!==void 0&&Ie!=null){let St=jl(Ie);Array.isArray(St)&&(St=St.map(Mt=>zE($l(Mt)))),c(o,["tools"],St)}const Re=u(t,["toolConfig"]);if(o!==void 0&&Re!=null&&c(o,["toolConfig"],IE(Re)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Ue=u(t,["cachedContent"]);o!==void 0&&Ue!=null&&c(o,["cachedContent"],ao(n,Ue));const xe=u(t,["responseModalities"]);xe!=null&&c(s,["responseModalities"],xe);const it=u(t,["mediaResolution"]);it!=null&&c(s,["mediaResolution"],it);const we=u(t,["speechConfig"]);if(we!=null&&c(s,["speechConfig"],ad(we)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Xe=u(t,["thinkingConfig"]);Xe!=null&&c(s,["thinkingConfig"],Xe);const ze=u(t,["imageConfig"]);ze!=null&&c(s,["imageConfig"],uE(ze));const pt=u(t,["enableEnhancedCivicAnswers"]);return pt!=null&&c(s,["enableEnhancedCivicAnswers"],pt),s}function PC(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Dn(r));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const J=u(t,["responseSchema"]);J!=null&&c(s,["responseSchema"],sd(J));const se=u(t,["responseJsonSchema"]);se!=null&&c(s,["responseJsonSchema"],se);const ce=u(t,["routingConfig"]);ce!=null&&c(s,["routingConfig"],ce);const Ie=u(t,["modelSelectionConfig"]);Ie!=null&&c(s,["modelConfig"],Ie);const Re=u(t,["safetySettings"]);if(o!==void 0&&Re!=null){let B=Re;Array.isArray(B)&&(B=B.map(ve=>ve)),c(o,["safetySettings"],B)}const Ue=u(t,["tools"]);if(o!==void 0&&Ue!=null){let B=jl(Ue);Array.isArray(B)&&(B=B.map(ve=>Sg($l(ve)))),c(o,["tools"],B)}const xe=u(t,["toolConfig"]);o!==void 0&&xe!=null&&c(o,["toolConfig"],xe);const it=u(t,["labels"]);o!==void 0&&it!=null&&c(o,["labels"],it);const we=u(t,["cachedContent"]);o!==void 0&&we!=null&&c(o,["cachedContent"],ao(n,we));const Xe=u(t,["responseModalities"]);Xe!=null&&c(s,["responseModalities"],Xe);const ze=u(t,["mediaResolution"]);ze!=null&&c(s,["mediaResolution"],ze);const pt=u(t,["speechConfig"]);pt!=null&&c(s,["speechConfig"],ad(pt));const St=u(t,["audioTimestamp"]);St!=null&&c(s,["audioTimestamp"],St);const Mt=u(t,["thinkingConfig"]);Mt!=null&&c(s,["thinkingConfig"],Mt);const be=u(t,["imageConfig"]);if(be!=null&&c(s,["imageConfig"],cE(be)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Em(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=bi(r);Array.isArray(h)&&(h=h.map(y=>Sr(y))),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&c(o,["generationConfig"],LC(n,d,o)),o}function wm(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["contents"]);if(r!=null){let h=bi(r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&c(o,["generationConfig"],PC(n,d,o)),o}function _m(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>lC(m))),c(t,["candidates"],v)}const r=u(n,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const d=u(n,["promptFeedback"]);d!=null&&c(t,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(t,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(t,["usageMetadata"],y),t}function Am(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(x=>x)),c(t,["candidates"],m)}const r=u(n,["createTime"]);r!=null&&c(t,["createTime"],r);const d=u(n,["modelVersion"]);d!=null&&c(t,["modelVersion"],d);const h=u(n,["promptFeedback"]);h!=null&&c(t,["promptFeedback"],h);const y=u(n,["responseId"]);y!=null&&c(t,["responseId"],y);const v=u(n,["usageMetadata"]);return v!=null&&c(t,["usageMetadata"],v),t}function GC(n,t){const o={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(n,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["aspectRatio"]);t!==void 0&&r!=null&&c(t,["parameters","aspectRatio"],r);const d=u(n,["guidanceScale"]);if(t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=u(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&c(t,["parameters","safetySetting"],h);const y=u(n,["personGeneration"]);t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y);const v=u(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&c(t,["parameters","includeSafetyAttributes"],v);const m=u(n,["includeRaiReason"]);t!==void 0&&m!=null&&c(t,["parameters","includeRaiReason"],m);const x=u(n,["language"]);t!==void 0&&x!=null&&c(t,["parameters","language"],x);const S=u(n,["outputMimeType"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","mimeType"],S);const T=u(n,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&c(t,["parameters","outputOptions","compressionQuality"],T),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=u(n,["imageSize"]);if(t!==void 0&&A!=null&&c(t,["parameters","sampleImageSize"],A),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function HC(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const d=u(n,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const h=u(n,["aspectRatio"]);t!==void 0&&h!=null&&c(t,["parameters","aspectRatio"],h);const y=u(n,["guidanceScale"]);t!==void 0&&y!=null&&c(t,["parameters","guidanceScale"],y);const v=u(n,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const m=u(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&c(t,["parameters","includeSafetyAttributes"],S);const T=u(n,["includeRaiReason"]);t!==void 0&&T!=null&&c(t,["parameters","includeRaiReason"],T);const A=u(n,["language"]);t!==void 0&&A!=null&&c(t,["parameters","language"],A);const N=u(n,["outputMimeType"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","mimeType"],N);const O=u(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&c(t,["parameters","outputOptions","compressionQuality"],O);const F=u(n,["addWatermark"]);t!==void 0&&F!=null&&c(t,["parameters","addWatermark"],F);const J=u(n,["labels"]);t!==void 0&&J!=null&&c(t,["labels"],J);const se=u(n,["imageSize"]);t!==void 0&&se!=null&&c(t,["parameters","sampleImageSize"],se);const ce=u(n,["enhancePrompt"]);return t!==void 0&&ce!=null&&c(t,["parameters","enhancePrompt"],ce),o}function VC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["config"]);return d!=null&&GC(d,o),o}function BC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["config"]);return d!=null&&HC(d,o),o}function FC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>eE(h))),c(t,["generatedImages"],d)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],xg(r)),t}function OC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>Tr(h))),c(t,["generatedImages"],d)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],bg(r)),t}function qC(n,t){const o={},s=u(n,["numberOfVideos"]);if(t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(n,["durationSeconds"]);if(t!==void 0&&r!=null&&c(t,["parameters","durationSeconds"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["aspectRatio"]);t!==void 0&&d!=null&&c(t,["parameters","aspectRatio"],d);const h=u(n,["resolution"]);t!==void 0&&h!=null&&c(t,["parameters","resolution"],h);const y=u(n,["personGeneration"]);if(t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=u(n,["negativePrompt"]);t!==void 0&&v!=null&&c(t,["parameters","negativePrompt"],v);const m=u(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&c(t,["parameters","enhancePrompt"],m),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=u(n,["lastFrame"]);t!==void 0&&x!=null&&c(t,["instances[0]","lastFrame"],Cr(x));const S=u(n,["referenceImages"]);if(t!==void 0&&S!=null){let T=S;Array.isArray(T)&&(T=T.map(A=>jE(A))),c(t,["instances[0]","referenceImages"],T)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function $C(n,t){const o={},s=u(n,["numberOfVideos"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const d=u(n,["fps"]);t!==void 0&&d!=null&&c(t,["parameters","fps"],d);const h=u(n,["durationSeconds"]);t!==void 0&&h!=null&&c(t,["parameters","durationSeconds"],h);const y=u(n,["seed"]);t!==void 0&&y!=null&&c(t,["parameters","seed"],y);const v=u(n,["aspectRatio"]);t!==void 0&&v!=null&&c(t,["parameters","aspectRatio"],v);const m=u(n,["resolution"]);t!==void 0&&m!=null&&c(t,["parameters","resolution"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["pubsubTopic"]);t!==void 0&&S!=null&&c(t,["parameters","pubsubTopic"],S);const T=u(n,["negativePrompt"]);t!==void 0&&T!=null&&c(t,["parameters","negativePrompt"],T);const A=u(n,["enhancePrompt"]);t!==void 0&&A!=null&&c(t,["parameters","enhancePrompt"],A);const N=u(n,["generateAudio"]);t!==void 0&&N!=null&&c(t,["parameters","generateAudio"],N);const O=u(n,["lastFrame"]);t!==void 0&&O!=null&&c(t,["instances[0]","lastFrame"],Ii(O));const F=u(n,["referenceImages"]);if(t!==void 0&&F!=null){let ce=F;Array.isArray(ce)&&(ce=ce.map(Ie=>YE(Ie))),c(t,["instances[0]","referenceImages"],ce)}const J=u(n,["mask"]);t!==void 0&&J!=null&&c(t,["instances[0]","mask"],$E(J));const se=u(n,["compressionQuality"]);return t!==void 0&&se!=null&&c(t,["parameters","compressionQuality"],se),o}function jC(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response","generateVideoResponse"]);return h!=null&&c(t,["response"],XC(h)),t}function YC(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],QC(h)),t}function JC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["image"]);d!=null&&c(o,["instances[0]","image"],Cr(d));const h=u(t,["video"]);h!=null&&c(o,["instances[0]","video"],Tg(h));const y=u(t,["source"]);y!=null&&ZC(y,o);const v=u(t,["config"]);return v!=null&&qC(v,o),o}function KC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["image"]);d!=null&&c(o,["instances[0]","image"],Ii(d));const h=u(t,["video"]);h!=null&&c(o,["instances[0]","video"],Cg(h));const y=u(t,["source"]);y!=null&&WC(y,o);const v=u(t,["config"]);return v!=null&&$C(v,o),o}function XC(n){const t={},o=u(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>nE(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function QC(n){const t={},o=u(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>iE(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function ZC(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Cr(r));const d=u(n,["video"]);return t!==void 0&&d!=null&&c(t,["instances[0]","video"],Tg(d)),o}function WC(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Ii(r));const d=u(n,["video"]);return t!==void 0&&d!=null&&c(t,["instances[0]","video"],Cg(d)),o}function eE(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["image"],dE(o));const s=u(n,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(n,["_self"]);return r!=null&&c(t,["safetyAttributes"],xg(r)),t}function Tr(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["image"],vg(o));const s=u(n,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(n,["_self"]);r!=null&&c(t,["safetyAttributes"],bg(r));const d=u(n,["prompt"]);return d!=null&&c(t,["enhancedPrompt"],d),t}function tE(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["mask"],vg(o));const s=u(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(t,["labels"],r)}return t}function nE(n){const t={},o=u(n,["video"]);return o!=null&&c(t,["video"],OE(o)),t}function iE(n){const t={},o=u(n,["_self"]);return o!=null&&c(t,["video"],qE(o)),t}function oE(n){const t={},o=u(n,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const d=u(n,["candidateCount"]);d!=null&&c(t,["candidateCount"],d);const h=u(n,["enableAffectiveDialog"]);h!=null&&c(t,["enableAffectiveDialog"],h);const y=u(n,["frequencyPenalty"]);y!=null&&c(t,["frequencyPenalty"],y);const v=u(n,["logprobs"]);v!=null&&c(t,["logprobs"],v);const m=u(n,["maxOutputTokens"]);m!=null&&c(t,["maxOutputTokens"],m);const x=u(n,["mediaResolution"]);x!=null&&c(t,["mediaResolution"],x);const S=u(n,["presencePenalty"]);S!=null&&c(t,["presencePenalty"],S);const T=u(n,["responseLogprobs"]);T!=null&&c(t,["responseLogprobs"],T);const A=u(n,["responseMimeType"]);A!=null&&c(t,["responseMimeType"],A);const N=u(n,["responseModalities"]);N!=null&&c(t,["responseModalities"],N);const O=u(n,["responseSchema"]);O!=null&&c(t,["responseSchema"],O);const F=u(n,["routingConfig"]);F!=null&&c(t,["routingConfig"],F);const J=u(n,["seed"]);J!=null&&c(t,["seed"],J);const se=u(n,["speechConfig"]);se!=null&&c(t,["speechConfig"],se);const ce=u(n,["stopSequences"]);ce!=null&&c(t,["stopSequences"],ce);const Ie=u(n,["temperature"]);Ie!=null&&c(t,["temperature"],Ie);const Re=u(n,["thinkingConfig"]);Re!=null&&c(t,["thinkingConfig"],Re);const Ue=u(n,["topK"]);Ue!=null&&c(t,["topK"],Ue);const xe=u(n,["topP"]);if(xe!=null&&c(t,["topP"],xe),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function lE(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function sE(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Gt(n,s)),o}function aE(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function rE(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function uE(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function cE(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);s!=null&&c(t,["imageSize"],s);const r=u(n,["outputMimeType"]);r!=null&&c(t,["imageOutputOptions","mimeType"],r);const d=u(n,["outputCompressionQuality"]);return d!=null&&c(t,["imageOutputOptions","compressionQuality"],d),t}function dE(n){const t={},o=u(n,["bytesBase64Encoded"]);o!=null&&c(t,["imageBytes"],Po(o));const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function vg(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["imageBytes"],Po(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Cr(n){const t={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(n,["imageBytes"]);o!=null&&c(t,["bytesBase64Encoded"],Po(o));const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Ii(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["imageBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Po(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function fE(n,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const d=u(t,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const h=u(t,["filter"]);o!==void 0&&h!=null&&c(o,["_query","filter"],h);const y=u(t,["queryBase"]);return o!==void 0&&y!=null&&c(o,["_url","models_url"],dg(n,y)),s}function pE(n,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const d=u(t,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const h=u(t,["filter"]);o!==void 0&&h!=null&&c(o,["_query","filter"],h);const y=u(t,["queryBase"]);return o!==void 0&&y!=null&&c(o,["_url","models_url"],dg(n,y)),s}function hE(n,t){const o={},s=u(t,["config"]);return s!=null&&fE(n,s,o),o}function mE(n,t){const o={},s=u(t,["config"]);return s!=null&&pE(n,s,o),o}function gE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let d=fg(r);Array.isArray(d)&&(d=d.map(h=>Oc(h))),c(t,["models"],d)}return t}function yE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let d=fg(r);Array.isArray(d)&&(d=d.map(h=>qc(h))),c(t,["models"],d)}return t}function vE(n){const t={},o=u(n,["maskMode"]);o!=null&&c(t,["maskMode"],o);const s=u(n,["segmentationClasses"]);s!=null&&c(t,["maskClasses"],s);const r=u(n,["maskDilation"]);return r!=null&&c(t,["dilation"],r),t}function Oc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);r!=null&&c(t,["description"],r);const d=u(n,["version"]);d!=null&&c(t,["version"],d);const h=u(n,["_self"]);h!=null&&c(t,["tunedModelInfo"],DE(h));const y=u(n,["inputTokenLimit"]);y!=null&&c(t,["inputTokenLimit"],y);const v=u(n,["outputTokenLimit"]);v!=null&&c(t,["outputTokenLimit"],v);const m=u(n,["supportedGenerationMethods"]);m!=null&&c(t,["supportedActions"],m);const x=u(n,["temperature"]);x!=null&&c(t,["temperature"],x);const S=u(n,["maxTemperature"]);S!=null&&c(t,["maxTemperature"],S);const T=u(n,["topP"]);T!=null&&c(t,["topP"],T);const A=u(n,["topK"]);A!=null&&c(t,["topK"],A);const N=u(n,["thinking"]);return N!=null&&c(t,["thinking"],N),t}function qc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);r!=null&&c(t,["description"],r);const d=u(n,["versionId"]);d!=null&&c(t,["version"],d);const h=u(n,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(T=>kC(T))),c(t,["endpoints"],S)}const y=u(n,["labels"]);y!=null&&c(t,["labels"],y);const v=u(n,["_self"]);v!=null&&c(t,["tunedModelInfo"],UE(v));const m=u(n,["defaultCheckpointId"]);m!=null&&c(t,["defaultCheckpointId"],m);const x=u(n,["checkpoints"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(T=>T)),c(t,["checkpoints"],S)}return t}function xE(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],IC(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],zC(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],oC(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function bE(n){const t={},o=u(n,["productImage"]);return o!=null&&c(t,["image"],Ii(o)),t}function SE(n,t){const o={},s=u(n,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["baseSteps"]);t!==void 0&&r!=null&&c(t,["parameters","baseSteps"],r);const d=u(n,["outputGcsUri"]);t!==void 0&&d!=null&&c(t,["parameters","storageUri"],d);const h=u(n,["seed"]);t!==void 0&&h!=null&&c(t,["parameters","seed"],h);const y=u(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&c(t,["parameters","safetySetting"],y);const v=u(n,["personGeneration"]);t!==void 0&&v!=null&&c(t,["parameters","personGeneration"],v);const m=u(n,["addWatermark"]);t!==void 0&&m!=null&&c(t,["parameters","addWatermark"],m);const x=u(n,["outputMimeType"]);t!==void 0&&x!=null&&c(t,["parameters","outputOptions","mimeType"],x);const S=u(n,["outputCompressionQuality"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","compressionQuality"],S);const T=u(n,["enhancePrompt"]);t!==void 0&&T!=null&&c(t,["parameters","enhancePrompt"],T);const A=u(n,["labels"]);return t!==void 0&&A!=null&&c(t,["labels"],A),o}function TE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["source"]);r!=null&&EE(r,o);const d=u(t,["config"]);return d!=null&&SE(d,o),o}function CE(n){const t={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Tr(r))),c(t,["generatedImages"],s)}return t}function EE(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["personImage"]);t!==void 0&&r!=null&&c(t,["instances[0]","personImage","image"],Ii(r));const d=u(n,["productImages"]);if(t!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>bE(y))),c(t,["instances[0]","productImages"],h)}return o}function wE(n){const t={},o=u(n,["referenceImage"]);o!=null&&c(t,["referenceImage"],Ii(o));const s=u(n,["referenceId"]);s!=null&&c(t,["referenceId"],s);const r=u(n,["referenceType"]);r!=null&&c(t,["referenceType"],r);const d=u(n,["maskImageConfig"]);d!=null&&c(t,["maskImageConfig"],vE(d));const h=u(n,["controlImageConfig"]);h!=null&&c(t,["controlImageConfig"],dC(h));const y=u(n,["styleImageConfig"]);y!=null&&c(t,["styleImageConfig"],y);const v=u(n,["subjectImageConfig"]);return v!=null&&c(t,["subjectImageConfig"],v),t}function xg(n){const t={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(n,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function bg(n){const t={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(n,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function _E(n){const t={},o=u(n,["category"]);if(o!=null&&c(t,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function AE(n){const t={},o=u(n,["image"]);return o!=null&&c(t,["image"],Ii(o)),t}function NE(n,t){const o={},s=u(n,["mode"]);t!==void 0&&s!=null&&c(t,["parameters","mode"],s);const r=u(n,["maxPredictions"]);t!==void 0&&r!=null&&c(t,["parameters","maxPredictions"],r);const d=u(n,["confidenceThreshold"]);t!==void 0&&d!=null&&c(t,["parameters","confidenceThreshold"],d);const h=u(n,["maskDilation"]);t!==void 0&&h!=null&&c(t,["parameters","maskDilation"],h);const y=u(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&c(t,["parameters","binaryColorThreshold"],y);const v=u(n,["labels"]);return t!==void 0&&v!=null&&c(t,["labels"],v),o}function ME(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["source"]);r!=null&&kE(r,o);const d=u(t,["config"]);return d!=null&&NE(d,o),o}function RE(n){const t={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>tE(r))),c(t,["generatedMasks"],s)}return t}function kE(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Ii(r));const d=u(n,["scribbleImage"]);return t!==void 0&&d!=null&&c(t,["instances[0]","scribble"],AE(d)),o}function IE(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],DC(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function zE(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],aE(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],rE(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function Sg(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>UC(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function DE(n){const t={},o=u(n,["baseModel"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function UE(n){const t={},o=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function LE(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const d=u(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),o}function PE(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const d=u(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),o}function GE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","name"],Gt(n,s));const r=u(t,["config"]);return r!=null&&LE(r,o),o}function HE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&PE(r,o),o}function VE(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&c(t,["parameters","safetySetting"],r);const d=u(n,["personGeneration"]);t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d);const h=u(n,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const y=u(n,["outputMimeType"]);t!==void 0&&y!=null&&c(t,["parameters","outputOptions","mimeType"],y);const v=u(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&c(t,["parameters","outputOptions","compressionQuality"],v);const m=u(n,["enhanceInputImage"]);t!==void 0&&m!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=u(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const S=u(n,["labels"]);t!==void 0&&S!=null&&c(t,["labels"],S);const T=u(n,["numberOfImages"]);t!==void 0&&T!=null&&c(t,["parameters","sampleCount"],T);const A=u(n,["mode"]);return t!==void 0&&A!=null&&c(t,["parameters","mode"],A),o}function BE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Gt(n,s));const r=u(t,["image"]);r!=null&&c(o,["instances[0]","image"],Ii(r));const d=u(t,["upscaleFactor"]);d!=null&&c(o,["parameters","upscaleConfig","upscaleFactor"],d);const h=u(t,["config"]);return h!=null&&VE(h,o),o}function FE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Tr(d))),c(t,["generatedImages"],r)}return t}function OE(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&c(t,["videoBytes"],Po(s));const r=u(n,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function qE(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],Po(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function $E(n){const t={},o=u(n,["image"]);o!=null&&c(t,["_self"],Ii(o));const s=u(n,["maskMode"]);return s!=null&&c(t,["maskMode"],s),t}function jE(n){const t={},o=u(n,["image"]);o!=null&&c(t,["image"],Cr(o));const s=u(n,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function YE(n){const t={},o=u(n,["image"]);o!=null&&c(t,["image"],Ii(o));const s=u(n,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function Tg(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["videoBytes"]);s!=null&&c(t,["encodedVideo"],Po(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["encoding"],r),t}function Cg(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["videoBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Po(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function JE(n,t){const o={},s=u(n,["displayName"]);return t!==void 0&&s!=null&&c(t,["displayName"],s),o}function KE(n){const t={},o=u(n,["config"]);return o!=null&&JE(o,t),t}function XE(n,t){const o={},s=u(n,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function QE(n){const t={},o=u(n,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(n,["config"]);return s!=null&&XE(s,t),t}function ZE(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function WE(n,t){const o={},s=u(n,["customMetadata"]);if(t!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["customMetadata"],d)}const r=u(n,["chunkingConfig"]);return t!==void 0&&r!=null&&c(t,["chunkingConfig"],r),o}function ew(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],nw(h)),t}function tw(n){const t={},o=u(n,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(n,["fileName"]);s!=null&&c(t,["fileName"],s);const r=u(n,["config"]);return r!=null&&WE(r,t),t}function nw(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function iw(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function ow(n){const t={},o=u(n,["config"]);return o!=null&&iw(o,t),t}function lw(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["fileSearchStores"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["fileSearchStores"],d)}return t}function Eg(n,t){const o={},s=u(n,["mimeType"]);t!==void 0&&s!=null&&c(t,["mimeType"],s);const r=u(n,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const d=u(n,["customMetadata"]);if(t!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),c(t,["customMetadata"],y)}const h=u(n,["chunkingConfig"]);return t!==void 0&&h!=null&&c(t,["chunkingConfig"],h),o}function sw(n){const t={},o=u(n,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(n,["config"]);return s!=null&&Eg(s,t),t}function aw(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}const rw="Content-Type",uw="X-Server-Timeout",cw="User-Agent",$c="x-goog-api-client",dw="1.34.0",fw=`google-genai-sdk/${dw}`,pw="v1beta1",hw="v1beta";class mw{constructor(t){var o,s;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:pw,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:hw,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let d={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=t.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.unaryApiCall(r,d,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,d]of Object.entries(o))typeof d=="object"?s[r]=Object.assign(Object.assign({},s[r]),d):d!==void 0&&(s[r]=d);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=t.body,d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.streamApiCall(r,d,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const d=new AbortController,h=d.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>d.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{d.abort()}),t.signal=h}return o&&o.extraBody!==null&&gw(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Nm(r),new Vc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Nm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Ri(this,arguments,function*(){var s;const r=(s=t?.body)===null||s===void 0?void 0:s.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield xt(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const S=d.decode(x,{stream:!0});try{const N=JSON.parse(S);if("error"in N){const O=JSON.parse(JSON.stringify(N.error)),F=O.status,J=O.code,se=`got status: ${F}. ${JSON.stringify(N)}`;if(J>=400&&J<600)throw new br({message:se,status:J})}}catch(N){if(N.name==="ApiError")throw N}h+=S;let T=-1,A=0;for(;;){T=-1,A=0;for(const F of v){const J=h.indexOf(F);J!==-1&&(T===-1||J<T)&&(T=J,A=F.length)}if(T===-1)break;const N=h.substring(0,T);h=h.substring(T+A);const O=N.trim();if(O.startsWith(y)){const F=O.substring(y.length).trim();try{const J=new Response(F,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield xt(new Vc(J))}catch(J){throw new Error(`exception parsing stream chunk ${F}. ${J}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=fw+" "+this.clientOptions.userAgentExtra;return t[cw]=o,t[$c]=o,t[rw]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,d]of Object.entries(t.headers))s.append(r,d);t.timeout&&t.timeout>0&&s.append(uw,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,h=await d.stat(t);r.sizeBytes=String(h.size);const y=(s=o?.mimeType)!==null&&s!==void 0?s:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=$e("upload/v1beta/files",v._url),S=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return d.upload(t,S,this)}async uploadFileToFileSearchStore(t,o,s){var r;const d=this.clientOptions.uploader,h=await d.stat(o),y=String(h.size),v=(r=s?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),S={};s!=null&&Eg(s,S);const T=await this.fetchUploadUrl(m,y,v,x,S,s?.httpOptions);return d.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,d,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(d),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Nm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let s;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new br({message:r,status:o}):new Error(r)}}function gw(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const d=JSON.parse(n.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))o=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(d,h){const y=Object.assign({},d);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=s(o,t);n.body=JSON.stringify(r)}const yw="mcp_used/unknown";let vw=!1;function wg(n){for(const t of n)if(xw(t)||typeof t=="object"&&"inputSchema"in t)return!0;return vw}function _g(n){var t;const o=(t=n[$c])!==null&&t!==void 0?t:"";n[$c]=(o+` ${yw}`).trimStart()}function xw(n){return n!==null&&typeof n=="object"&&n instanceof ud}function bw(n){return Ri(this,arguments,function*(o,s=100){let r,d=0;for(;d<s;){const h=yield xt(o.listTools({cursor:r}));for(const y of h.tools)yield yield xt(y),d++;if(!h.nextCursor)break;r=h.nextCursor}})}class ud{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new ud(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const d={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,ki(bw(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const S=r;h.push(S);const T=S.name;if(d[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);d[T]=x}}catch(S){o={error:S}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),Z1(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const h=await r.callTool({name:s.name,arguments:s.args},void 0,d);o.push({functionResponse:{name:s.name,response:h.isError?{error:h}:h}})}return o}}async function Sw(n,t,o){const s=new q1;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class Tw{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),h=ww(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(ce=>{m=ce}),S=t.callbacks,T=function(){m({})},A=this.apiClient,N={onopen:T,onmessage:ce=>{Sw(A,S.onmessage,ce)},onerror:(o=S?.onerror)!==null&&o!==void 0?o:function(ce){},onclose:(s=S?.onclose)!==null&&s!==void 0?s:function(ce){}},O=this.webSocketFactory.create(v,Ew(h),N);O.connect(),await x;const se={setup:{model:Gt(this.apiClient,t.model)}};return O.send(JSON.stringify(se)),new Cw(O,this.apiClient)}}class Cw{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=KT(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=JT(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Hl.PLAY)}pause(){this.sendPlaybackControl(Hl.PAUSE)}stop(){this.sendPlaybackControl(Hl.STOP)}resetContext(){this.sendPlaybackControl(Hl.RESET_CONTEXT)}close(){this.conn.close()}}function Ew(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function ww(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const _w="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Aw(n,t,o){const s=new O1;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const d=JSON.parse(r);if(n.isVertexAI()){const h=ZT(d);Object.assign(s,h)}else Object.assign(s,d);t(s)}class Nw{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new Tw(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,d,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const S=this.apiClient.getHeaders();t.config&&t.config.tools&&wg(t.config.tools)&&_g(S);const T=Iw(S);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const we=this.apiClient.getApiKey();let Xe="BidiGenerateContent",ze="key";we?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Xe="BidiGenerateContentConstrained",ze="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Xe}?${ze}=${we}`}let A=()=>{};const N=new Promise(we=>{A=we}),O=t.callbacks,F=function(){var we;(we=O?.onopen)===null||we===void 0||we.call(O),A({})},J=this.apiClient,se={onopen:F,onmessage:we=>{Aw(J,O.onmessage,we)},onerror:(o=O?.onerror)!==null&&o!==void 0?o:function(we){},onclose:(s=O?.onclose)!==null&&s!==void 0?s:function(we){}},ce=this.webSocketFactory.create(x,kw(T),se);ce.connect(),await N;let Ie=Gt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&Ie.startsWith("publishers/")){const we=this.apiClient.getProject(),Xe=this.apiClient.getLocation();Ie=`projects/${we}/locations/${Xe}/`+Ie}let Re={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[fr.AUDIO]}:t.config.responseModalities=[fr.AUDIO]),!((d=t.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Ue=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],xe=[];for(const we of Ue)if(this.isCallableTool(we)){const Xe=we;xe.push(await Xe.tool())}else xe.push(we);xe.length>0&&(t.config.tools=xe);const it={model:Ie,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?Re=YT(this.apiClient,it):Re=jT(this.apiClient,it),delete Re.config,ce.send(JSON.stringify(Re)),new Rw(ce,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Mw={turnComplete:!0};class Rw{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=bi(o.turns),t.isVertexAI()||(s=s.map(r=>Sr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const d of s){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!t.isVertexAI()&&!("id"in d))throw new Error(_w)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},Mw),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:QT(t)}:o={realtimeInput:XT(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function kw(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function Iw(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const Mm=10;function Rm(n){var t,o,s;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if(ql(h)){r=!0;break}if(!r)return!0;const d=(s=n?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function ql(n){return"callTool"in n&&typeof n.callTool=="function"}function zw(n){var t,o,s;return(s=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>ql(r)))!==null&&s!==void 0?s:!1}function km(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((s,r)=>{if(ql(s))return;const d=s;d.functionDeclarations&&d.functionDeclarations.length>0&&o.push(r)}),o}function Im(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class Dw extends so{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,d,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!zw(o)||Rm(o.config))return await this.generateContentInternal(v);const m=km(o);if(m.length>0){const O=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let x,S;const T=bi(v.contents),A=(d=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:Mm;let N=0;for(;N<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const O=x.candidates[0].content,F=[];for(const J of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if(ql(J)){const ce=await J.callTool(x.functionCalls);F.push(...ce)}N++,S={role:"user",parts:F},v.contents=bi(v.contents),v.contents.push(O),v.contents.push(S),Im(v.config)&&(T.push(O),T.push(S))}return Im(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var s,r,d,h,y;if(this.maybeMoveToResponseJsonSchem(o),Rm(o.config)){const S=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(S)}const v=km(o);if(v.length>0){const S=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(d=(r=(s=o?.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||d===void 0?void 0:d.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let d;const h=[];if(s?.generatedImages)for(const v of s.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=v?.safetyAttributes:h.push(v);let y;return d?y={generatedImages:h,positivePromptSafetyAttributes:d,sdkHttpResponse:s.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:s.sdkHttpResponse},y}),this.list=async o=>{var s;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((s=h.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new il(lo.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,d,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(d=o.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const d=(o=t.config)===null||o===void 0?void 0:o.tools;if(!d)return t;const h=await Promise.all(d.map(async v=>ql(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&wg(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),_g(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,s,r;const d=new Map;for(const h of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(ql(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(d.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);d.set(m.name,y)}}return d}async processAfcStream(t){var o,s,r;const d=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Mm;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,S){return Ri(this,arguments,function*(){for(var T,A,N,O,F,J;y<d;){h&&(y++,h=!1);const Re=yield xt(m.processParamsMaybeAddMcpUsage(S)),Ue=yield xt(m.generateContentStreamInternal(Re)),xe=[],it=[];try{for(var se=!0,ce=(A=void 0,ki(Ue)),Ie;Ie=yield xt(ce.next()),T=Ie.done,!T;se=!0){O=Ie.value,se=!1;const we=O;if(yield yield xt(we),we.candidates&&(!((F=we.candidates[0])===null||F===void 0)&&F.content)){it.push(we.candidates[0].content);for(const Xe of(J=we.candidates[0].content.parts)!==null&&J!==void 0?J:[])if(y<d&&Xe.functionCall){if(!Xe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Xe.functionCall.name)){const ze=yield xt(x.get(Xe.functionCall.name).callTool([Xe.functionCall]));xe.push(...ze)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Xe.functionCall.name}`)}}}}catch(we){A={error:we}}finally{try{!se&&!T&&(N=ce.return)&&(yield xt(N.call(ce)))}finally{if(A)throw A.error}}if(xe.length>0){h=!0;const we=new Us;we.candidates=[{content:{role:"user",parts:xe}}],yield yield xt(we);const Xe=[];Xe.push(...it),Xe.push({role:"user",parts:xe});const ze=bi(S.contents).concat(Xe);S.contents=ze}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=wm(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Am(x),T=new Us;return Object.assign(T,S),T})}else{const m=Em(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=_m(x),T=new Us;return Object.assign(T,S),T})}}async generateContentStreamInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=wm(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),h.then(function(S){return Ri(this,arguments,function*(){var T,A,N,O;try{for(var F=!0,J=ki(S),se;se=yield xt(J.next()),T=se.done,!T;F=!0){O=se.value,F=!1;const ce=O,Ie=Am(yield xt(ce.json()));Ie.sdkHttpResponse={headers:ce.headers};const Re=new Us;Object.assign(Re,Ie),yield yield xt(Re)}}catch(ce){A={error:ce}}finally{try{!F&&!T&&(N=J.return)&&(yield xt(N.call(J)))}finally{if(A)throw A.error}}})})}else{const m=Em(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}),h.then(function(S){return Ri(this,arguments,function*(){var T,A,N,O;try{for(var F=!0,J=ki(S),se;se=yield xt(J.next()),T=se.done,!T;F=!0){O=se.value,F=!1;const ce=O,Ie=_m(yield xt(ce.json()));Ie.sdkHttpResponse={headers:ce.headers};const Re=new Us;Object.assign(Re,Ie),yield yield xt(Re)}}catch(ce){A={error:ce}}finally{try{!F&&!T&&(N=J.return)&&(yield xt(N.call(J)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=NC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=RC(x),T=new am;return Object.assign(T,S),T})}else{const m=AC(this.apiClient,t);return y=$e("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=MC(x),T=new am;return Object.assign(T,S),T})}}async generateImagesInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=BC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=OC(x),T=new rm;return Object.assign(T,S),T})}else{const m=VC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=FC(x),T=new rm;return Object.assign(T,S),T})}}async editImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=CC(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=EC(v),x=new I1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=BE(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=FE(v),x=new z1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=TE(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=CE(v),x=new D1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=ME(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=RE(v),x=new U1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=sE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>qc(x))}else{const m=lE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Oc(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=mE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=yE(x),T=new um;return Object.assign(T,S),T})}else{const m=hE(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=gE(x),T=new um;return Object.assign(T,S),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=HE(this.apiClient,t);return y=$e("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>qc(x))}else{const m=GE(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Oc(x))}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xC(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=SC(x),T=new cm;return Object.assign(T,S),T})}else{const m=vC(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=bC(x),T=new cm;return Object.assign(T,S),T})}}async countTokens(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=mC(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=yC(x),T=new dm;return Object.assign(T,S),T})}else{const m=hC(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=gC(x),T=new dm;return Object.assign(T,S),T})}}async computeTokens(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=aC(this.apiClient,t);return d=$e("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=rC(v),x=new L1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=KC(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>{const S=YC(x),T=new pr;return Object.assign(T,S),T})}else{const m=JC(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>{const S=jC(x),T=new pr;return Object.assign(T,S),T})}}}class Uw extends so{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h}else{const m=w1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=v1(t);return d=$e("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function Lw(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Pw(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>jw(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function Gw(n,t,o){const s={},r=u(t,["expireTime"]);o!==void 0&&r!=null&&c(o,["expireTime"],r);const d=u(t,["newSessionExpireTime"]);o!==void 0&&d!=null&&c(o,["newSessionExpireTime"],d);const h=u(t,["uses"]);o!==void 0&&h!=null&&c(o,["uses"],h);const y=u(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&c(o,["bidiGenerateContentSetup"],$w(n,y));const v=u(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&c(o,["fieldMask"],v),s}function Hw(n,t){const o={},s=u(t,["config"]);return s!=null&&c(o,["config"],Gw(n,s,o)),o}function Vw(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Bw(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Fw(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function Ow(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function qw(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],rd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],Pw(Dn(N)));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let Ue=jl(O);Array.isArray(Ue)&&(Ue=Ue.map(xe=>Jw($l(xe)))),c(t,["setup","tools"],Ue)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],Yw(F));const J=u(n,["inputAudioTranscription"]);t!==void 0&&J!=null&&c(t,["setup","inputAudioTranscription"],J);const se=u(n,["outputAudioTranscription"]);t!==void 0&&se!=null&&c(t,["setup","outputAudioTranscription"],se);const ce=u(n,["realtimeInputConfig"]);t!==void 0&&ce!=null&&c(t,["setup","realtimeInputConfig"],ce);const Ie=u(n,["contextWindowCompression"]);t!==void 0&&Ie!=null&&c(t,["setup","contextWindowCompression"],Ie);const Re=u(n,["proactivity"]);if(t!==void 0&&Re!=null&&c(t,["setup","proactivity"],Re),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function $w(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Gt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],qw(r,o)),o}function jw(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],Vw(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],Bw(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],Lw(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function Yw(n){const t={},o=u(n,["handle"]);if(o!=null&&c(t,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Jw(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],Fw(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],Ow(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function Kw(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const s=n[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(d=>`${o}.${d}`);t.push(...r)}else t.push(o)}return t.join(",")}function Xw(n,t){let o=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const d=s.setup;typeof d=="object"&&d!==null?(n.bidiGenerateContentSetup=d,o=d):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const d=Kw(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)d?n.fieldMask=d:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];d&&v.push(d),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Qw extends so{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=Hw(this.apiClient,t);d=$e("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=Xw(y,t.config);return r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function Zw(n,t){const o={},s=u(n,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function Ww(n){const t={},o=u(n,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(n,["config"]);return s!=null&&Zw(s,t),t}function e_(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function t_(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function n_(n){const t={},o=u(n,["parent"]);o!=null&&c(t,["_url","parent"],o);const s=u(n,["config"]);return s!=null&&t_(s,t),t}function i_(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["documents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["documents"],d)}return t}class o_ extends so{constructor(t){super(),this.apiClient=t,this.list=async o=>new il(lo.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=e_(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ww(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=n_(t);return d=$e("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=i_(v),x=new P1;return Object.assign(x,m),x})}}}class l_ extends so{constructor(t,o=new o_(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new il(lo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=KE(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=ZE(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QE(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=ow(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=lw(v),x=new G1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=sw(t);return d=$e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=aw(v),x=new H1;return Object.assign(x,m),x})}}async importFile(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=tw(t);return d=$e("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=ew(v),x=new id;return Object.assign(x,m),x})}}}let Ag=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Ag=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const s_=()=>Ag();function jc(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Yc=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Si extends Error{}class Hn extends Si{constructor(t,o,s,r){super(`${Hn.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Er({message:s,cause:Yc(o)});const d=o;return t===400?new Mg(t,d,s,r):t===401?new Rg(t,d,s,r):t===403?new kg(t,d,s,r):t===404?new Ig(t,d,s,r):t===409?new zg(t,d,s,r):t===422?new Dg(t,d,s,r):t===429?new Ug(t,d,s,r):t>=500?new Lg(t,d,s,r):new Hn(t,d,s,r)}}class Jc extends Hn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Er extends Hn{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Ng extends Er{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Mg extends Hn{}class Rg extends Hn{}class kg extends Hn{}class Ig extends Hn{}class zg extends Hn{}class Dg extends Hn{}class Ug extends Hn{}class Lg extends Hn{}const a_=/^[a-z][a-z0-9+.-]*:/i,r_=n=>a_.test(n);let Kc=n=>(Kc=Array.isArray,Kc(n));const u_=Kc;let c_=u_;const zm=c_;function d_(n){if(!n)return!0;for(const t in n)return!1;return!0}function f_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const p_=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Si(`${n} must be an integer`);if(t<0)throw new Si(`${n} must be a positive integer`);return t},h_=n=>{try{return JSON.parse(n)}catch{return}};const m_=n=>new Promise(t=>setTimeout(t,n));const Ll="0.0.1";function g_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const y_=()=>{var n,t,o,s,r;const d=g_();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ll,"X-Stainless-OS":Um(Deno.build.os),"X-Stainless-Arch":Dm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ll,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ll,"X-Stainless-OS":Um((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Dm((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=v_();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ll,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ll,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function v_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,d=s[2]||0,h=s[3]||0;return{browser:t,version:`${r}.${d}.${h}`}}}return null}const Dm=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Um=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Wa;const x_=()=>Wa??(Wa=y_());function b_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Pg(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function S_(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Pg({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Gg(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function T_(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}const C_=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const Hg=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kc(n,t,o){return Hg(),new File(n,t??"unknown_file",o)}function E_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const w_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const Vg=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",__=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Vg(n),A_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function N_(n,t,o){if(Hg(),n=await n,__(n))return n instanceof File?n:kc([await n.arrayBuffer()],n.name);if(A_(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),kc(await Xc(r),t,o)}const s=await Xc(n);if(t||(t=E_(n)),!o?.type){const r=s.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return kc(s,t,o)}async function Xc(n){var t,o,s,r,d;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(Vg(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(w_(n))try{for(var y=!0,v=ki(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await Xc(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const x=(d=n?.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${M_(n)}`)}return h}function M_(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class Bg{constructor(t){this._client=t}}Bg._key=[];function Fg(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Lm=Object.freeze(Object.create(null)),R_=(n=Fg)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const d=[],h=o.reduce((x,S,T)=>{var A,N,O;/[?#]/.test(S)&&(r=!0);const F=s[T];let J=(r?encodeURIComponent:n)(""+F);return T!==s.length&&(F==null||typeof F=="object"&&F.toString===((O=Object.getPrototypeOf((N=Object.getPrototypeOf((A=F.hasOwnProperty)!==null&&A!==void 0?A:Lm))!==null&&N!==void 0?N:Lm))===null||O===void 0?void 0:O.toString))&&(J=F+"",d.push({start:x.length+S.length,length:J.length,error:`Value of type ${Object.prototype.toString.call(F).slice(8,-1)} is not a valid path parameter`})),x+S+(T===s.length?"":J)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)d.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(d.sort((x,S)=>x.start-S.start),d.length>0){let x=0;const S=d.reduce((T,A)=>{const N=" ".repeat(A.start-x),O="^".repeat(A.length);return x=A.start+A.length,T+N+O},"");throw new Si(`Path parameters result in path with invalid segments:
${d.map(T=>T.error).join(`
`)}
${h}
${S}`)}return h}),er=R_(Fg);class Og extends Bg{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,d=mr(t,["api_version"]);if("model"in d&&"agent_config"in d)throw new Si("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new Si("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(er`/${r}/interactions`,Object.assign(Object.assign({body:d},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(er`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(er`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const d=o??{},{api_version:h=this._client.apiVersion}=d,y=mr(d,["api_version"]);return this._client.get(er`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},s),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}Og._key=Object.freeze(["interactions"]);class qg extends Og{}function k_(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of n)o.set(r,s),s+=r.length;return o}let tr;function cd(n){let t;return(tr??(t=new globalThis.TextEncoder,tr=t.encode.bind(t)))(n)}let nr;function Pm(n){let t;return(nr??(t=new globalThis.TextDecoder,nr=t.decode.bind(t)))(n)}class wr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?cd(t):t;this.buffer=k_([this.buffer,o]);const s=[];let r;for(;(r=I_(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Pm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=Pm(this.buffer.subarray(0,d));s.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}wr.NEWLINE_CHARS=new Set([`
`,"\r"]);wr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function I_(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function z_(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const gr={off:0,error:200,warn:300,info:400,debug:500},Gm=(n,t,o)=>{if(n){if(f_(gr,n))return n;Gn(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(gr))}`)}};function Vs(){}function ir(n,t,o){return!t||gr[n]>gr[o]?Vs:t[n].bind(t)}const D_={error:Vs,warn:Vs,info:Vs,debug:Vs};let Hm=new WeakMap;function Gn(n){var t;const o=n.logger,s=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return D_;const r=Hm.get(o);if(r&&r[0]===s)return r[1];const d={error:ir("error",o,s),warn:ir("warn",o,s),info:ir("info",o,s),debug:ir("debug",o,s)};return Hm.set(o,[s,d]),d}const nl=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Vl{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const d=s?Gn(s):console;function h(){return Ri(this,arguments,function*(){var v,m,x,S;if(r)throw new Si("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=ki(U_(t,o)),O;O=yield xt(N.next()),v=O.done,!v;A=!0){S=O.value,A=!1;const F=S;if(!T)if(F.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield xt(JSON.parse(F.data))}catch(J){throw d.error("Could not parse message into JSON:",F.data),d.error("From chunk:",F.raw),J}}}catch(F){m={error:F}}finally{try{!A&&!v&&(x=N.return)&&(yield xt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(F){if(jc(F))return yield xt(void 0);throw F}finally{T||o.abort()}})}return new Vl(h,o,s)}static fromReadableStream(t,o,s){let r=!1;function d(){return Ri(this,arguments,function*(){var v,m,x,S;const T=new wr,A=Gg(t);try{for(var N=!0,O=ki(A),F;F=yield xt(O.next()),v=F.done,!v;N=!0){S=F.value,N=!1;const J=S;for(const se of T.decode(J))yield yield xt(se)}}catch(J){m={error:J}}finally{try{!N&&!v&&(x=O.return)&&(yield xt(x.call(O)))}finally{if(m)throw m.error}}for(const J of T.flush())yield yield xt(J)})}function h(){return Ri(this,arguments,function*(){var v,m,x,S;if(r)throw new Si("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=ki(d()),O;O=yield xt(N.next()),v=O.done,!v;A=!0){S=O.value,A=!1;const F=S;T||F&&(yield yield xt(JSON.parse(F)))}}catch(F){m={error:F}}finally{try{!A&&!v&&(x=N.return)&&(yield xt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(F){if(jc(F))return yield xt(void 0);throw F}finally{T||o.abort()}})}return new Vl(h,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=d=>({next:()=>{if(d.length===0){const h=s.next();t.push(h),o.push(h)}return d.shift()}});return[new Vl(()=>r(t),this.controller,this.client),new Vl(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Pg({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:d}=await o.next();if(d)return s.close();const h=cd(JSON.stringify(r)+`
`);s.enqueue(h)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function U_(n,t){return Ri(this,arguments,function*(){var s,r,d,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Si("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Si("Attempted to iterate over a response with no body");const y=new P_,v=new wr,m=Gg(n.body);try{for(var x=!0,S=ki(L_(m)),T;T=yield xt(S.next()),s=T.done,!s;x=!0){h=T.value,x=!1;const A=h;for(const N of v.decode(A)){const O=y.decode(N);O&&(yield yield xt(O))}}}catch(A){r={error:A}}finally{try{!x&&!s&&(d=S.return)&&(yield xt(d.call(S)))}finally{if(r)throw r.error}}for(const A of v.flush()){const N=y.decode(A);N&&(yield yield xt(N))}})}function L_(n){return Ri(this,arguments,function*(){var o,s,r,d;let h=new Uint8Array;try{for(var y=!0,v=ki(n),m;m=yield xt(v.next()),o=m.done,!o;y=!0){d=m.value,y=!1;const x=d;if(x==null)continue;const S=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?cd(x):x;let T=new Uint8Array(h.length+S.length);T.set(h),T.set(S,h.length),h=T;let A;for(;(A=z_(h))!==-1;)yield yield xt(h.slice(0,A)),h=h.slice(A)}}catch(x){s={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield xt(r.call(v)))}finally{if(s)throw s.error}}h.length>0&&(yield yield xt(h))})}class P_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=G_(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function G_(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function H_(n,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:d}=t,h=await(async()=>{var y;if(t.options.stream)return Gn(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):Vl.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return Gn(n).debug(`[${s}] response parsed`,nl({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-d})),h}class dd extends Promise{constructor(t,o,s=H_){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new dd(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const $g=Symbol("brand.privateNullableHeaders");function*V_(n){if(!n)return;if($g in n){const{values:s,nulls:r}=n;yield*s.entries();for(const d of r)yield[d,null];return}let t=!1,o;n instanceof Headers?o=n.entries():zm(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const d=zm(s[1])?s[1]:[s[1]];let h=!1;for(const y of d)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const Ls=n=>{const t=new Headers,o=new Set;for(const s of n){const r=new Set;for(const[d,h]of V_(s)){const y=d.toLowerCase();r.has(y)||(t.delete(d),r.add(y)),h===null?(t.delete(d),o.add(y)):(t.append(d,h),o.delete(y))}}return{[$g]:!0,values:t,nulls:o}};const Ic=n=>{var t,o,s,r,d,h;if(typeof globalThis.process<"u")return(s=(o=(t=f1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(h=(d=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||d===void 0?void 0:d.call(r,n))===null||h===void 0?void 0:h.trim()};var jg;class _r{constructor(t){var o,s,r,d,h,y,v,{baseURL:m=Ic("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=Ic("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:S="v1beta"}=t,T=mr(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:S},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:_r.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(h=(d=Gm(A.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:Gm(Ic("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(y=A.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:b_(),this.encoder=C_,this._options=A,this.apiKey=x,this.apiVersion=S,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=Ls([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Ls([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ls([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new Si(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ll}`}defaultIdempotencyKey(){return`stainless-node-retry-${s_()}`}makeStatusError(t,o,s,r){return Hn.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,d=r_(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return d_(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(d.search=this.stringifyQuery(o)),d.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new dd(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,d,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:S}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Gn(this).debug(`[${T}] sending request`,nl({retryOfRequestLogID:s,method:y.method,url:x,options:y,headers:m.headers})),!((d=y.signal)===null||d===void 0)&&d.aborted)throw new Jc;const O=new AbortController,F=await this.fetchWithTimeout(x,m,S,O).catch(Yc),J=Date.now();if(F instanceof globalThis.Error){const ce=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new Jc;const Ie=jc(F)||/timed? ?out/i.test(String(F)+("cause"in F?String(F.cause):""));if(o)return Gn(this).info(`[${T}] connection ${Ie?"timed out":"failed"} - ${ce}`),Gn(this).debug(`[${T}] connection ${Ie?"timed out":"failed"} (${ce})`,nl({retryOfRequestLogID:s,url:x,durationMs:J-N,message:F.message})),this.retryRequest(y,o,s??T);throw Gn(this).info(`[${T}] connection ${Ie?"timed out":"failed"} - error; no more retries left`),Gn(this).debug(`[${T}] connection ${Ie?"timed out":"failed"} (error; no more retries left)`,nl({retryOfRequestLogID:s,url:x,durationMs:J-N,message:F.message})),Ie?new Ng:new Er({cause:F})}const se=`[${T}${A}] ${m.method} ${x} ${F.ok?"succeeded":"failed"} with status ${F.status} in ${J-N}ms`;if(!F.ok){const ce=await this.shouldRetry(F);if(o&&ce){const we=`retrying, ${o} attempts remaining`;return await T_(F.body),Gn(this).info(`${se} - ${we}`),Gn(this).debug(`[${T}] response error (${we})`,nl({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,durationMs:J-N})),this.retryRequest(y,o,s??T,F.headers)}const Ie=ce?"error; no more retries left":"error; not retryable";Gn(this).info(`${se} - ${Ie}`);const Re=await F.text().catch(we=>Yc(we).message),Ue=h_(Re),xe=Ue?void 0:Re;throw Gn(this).debug(`[${T}] response error (${Ie})`,nl({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,message:xe,durationMs:Date.now()-N})),this.makeStatusError(F.status,Ue,xe,F.headers)}return Gn(this).info(se),Gn(this).debug(`[${T}] response start`,nl({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,durationMs:J-N})),{response:F,options:y,controller:O,requestLogID:T,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(t,o,s,r){const d=o||{},{signal:h,method:y}=d,v=mr(d,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(S.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,S)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var d;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(d=t.maxRetries)!==null&&d!==void 0?d:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await m_(h),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const d=o-t,h=Math.min(.5*Math.pow(2,d),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,d;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,S=this.buildURL(v,m,x);"timeout"in h&&p_("timeout",h.timeout),h.timeout=(s=h.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:h}),N=await this.buildHeaders({options:t,method:y,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:N},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(d=h.fetchOptions)!==null&&d!==void 0?d:{}),url:S,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let d={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=Ls([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),x_()),this._options.defaultHeaders,s,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=Ls([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:S_(t)}:this.encoder({body:t,headers:s})}}_r.DEFAULT_TIMEOUT=6e4;class En extends _r{constructor(){super(...arguments),this.interactions=new qg(this)}}jg=En;En.GeminiNextGenAPIClient=jg;En.GeminiNextGenAPIClientError=Si;En.APIError=Hn;En.APIConnectionError=Er;En.APIConnectionTimeoutError=Ng;En.APIUserAbortError=Jc;En.NotFoundError=Ig;En.ConflictError=zg;En.RateLimitError=Ug;En.BadRequestError=Mg;En.AuthenticationError=Rg;En.InternalServerError=Lg;En.PermissionDeniedError=kg;En.UnprocessableEntityError=Dg;En.toFile=N_;En.Interactions=qg;function B_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function F_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function O_(n,t){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function q_(n,t){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function $_(n,t,o){const s={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&c(t,["displayName"],r),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=u(n,["epochCount"]);t!==void 0&&d!=null&&c(t,["tuningTask","hyperparameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);if(h!=null&&c(s,["tuningTask","hyperparameters","learningRateMultiplier"],h),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=u(n,["batchSize"]);t!==void 0&&y!=null&&c(t,["tuningTask","hyperparameters","batchSize"],y);const v=u(n,["learningRate"]);if(t!==void 0&&v!=null&&c(t,["tuningTask","hyperparameters","learningRate"],v),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function j_(n,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=u(n,["validationDataset"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec"],Vm(A))}else if(r==="PREFERENCE_TUNING"){const A=u(n,["validationDataset"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec"],Vm(A))}const d=u(n,["tunedModelDisplayName"]);t!==void 0&&d!=null&&c(t,["tunedModelDisplayName"],d);const h=u(n,["description"]);t!==void 0&&h!=null&&c(t,["description"],h);let y=u(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=u(n,["epochCount"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(y==="PREFERENCE_TUNING"){const A=u(n,["epochCount"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=u(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=u(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=u(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=u(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=u(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=u(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=u(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=u(n,["adapterSize"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=u(n,["adapterSize"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=u(n,["labels"]);t!==void 0&&S!=null&&c(t,["labels"],S);const T=u(n,["beta"]);return t!==void 0&&T!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function Y_(n,t){const o={},s=u(n,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const d=u(n,["trainingDataset"]);d!=null&&oA(d);const h=u(n,["config"]);return h!=null&&$_(h,o),o}function J_(n,t){const o={},s=u(n,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const d=u(n,["trainingDataset"]);d!=null&&lA(d,o,t);const h=u(n,["config"]);return h!=null&&j_(h,o,t),o}function K_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function X_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function Q_(n,t,o){const s={},r=u(n,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const d=u(n,["pageToken"]);t!==void 0&&d!=null&&c(t,["_query","pageToken"],d);const h=u(n,["filter"]);return t!==void 0&&h!=null&&c(t,["_query","filter"],h),s}function Z_(n,t,o){const s={},r=u(n,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const d=u(n,["pageToken"]);t!==void 0&&d!=null&&c(t,["_query","pageToken"],d);const h=u(n,["filter"]);return t!==void 0&&h!=null&&c(t,["_query","filter"],h),s}function W_(n,t){const o={},s=u(n,["config"]);return s!=null&&Q_(s,o),o}function eA(n,t){const o={},s=u(n,["config"]);return s!=null&&Z_(s,o),o}function tA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const d=u(n,["tunedModels"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>Yg(y))),c(o,["tuningJobs"],h)}return o}function nA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const d=u(n,["tuningJobs"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>Qc(y))),c(o,["tuningJobs"],h)}return o}function iA(n,t){const o={},s=u(n,["name"]);s!=null&&c(o,["model"],s);const r=u(n,["name"]);return r!=null&&c(o,["endpoint"],r),o}function oA(n,t){const o={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(o,["examples","examples"],r)}return o}function lA(n,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=u(n,["gcsUri"]);t!==void 0&&h!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=u(n,["gcsUri"]);t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let d=u(o,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=u(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(d==="PREFERENCE_TUNING"){const h=u(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Yg(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["state"]);d!=null&&c(o,["state"],ug(d));const h=u(n,["createTime"]);h!=null&&c(o,["createTime"],h);const y=u(n,["tuningTask","startTime"]);y!=null&&c(o,["startTime"],y);const v=u(n,["tuningTask","completeTime"]);v!=null&&c(o,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(o,["updateTime"],m);const x=u(n,["description"]);x!=null&&c(o,["description"],x);const S=u(n,["baseModel"]);S!=null&&c(o,["baseModel"],S);const T=u(n,["_self"]);return T!=null&&c(o,["tunedModel"],iA(T)),o}function Qc(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["state"]);d!=null&&c(o,["state"],ug(d));const h=u(n,["createTime"]);h!=null&&c(o,["createTime"],h);const y=u(n,["startTime"]);y!=null&&c(o,["startTime"],y);const v=u(n,["endTime"]);v!=null&&c(o,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(o,["updateTime"],m);const x=u(n,["error"]);x!=null&&c(o,["error"],x);const S=u(n,["description"]);S!=null&&c(o,["description"],S);const T=u(n,["baseModel"]);T!=null&&c(o,["baseModel"],T);const A=u(n,["tunedModel"]);A!=null&&c(o,["tunedModel"],A);const N=u(n,["preTunedModel"]);N!=null&&c(o,["preTunedModel"],N);const O=u(n,["supervisedTuningSpec"]);O!=null&&c(o,["supervisedTuningSpec"],O);const F=u(n,["preferenceOptimizationSpec"]);F!=null&&c(o,["preferenceOptimizationSpec"],F);const J=u(n,["tuningDataStats"]);J!=null&&c(o,["tuningDataStats"],J);const se=u(n,["encryptionSpec"]);se!=null&&c(o,["encryptionSpec"],se);const ce=u(n,["partnerModelTuningSpec"]);ce!=null&&c(o,["partnerModelTuningSpec"],ce);const Ie=u(n,["customBaseModel"]);Ie!=null&&c(o,["customBaseModel"],Ie);const Re=u(n,["experiment"]);Re!=null&&c(o,["experiment"],Re);const Ue=u(n,["labels"]);Ue!=null&&c(o,["labels"],Ue);const xe=u(n,["outputUri"]);xe!=null&&c(o,["outputUri"],xe);const it=u(n,["pipelineJob"]);it!=null&&c(o,["pipelineJob"],it);const we=u(n,["serviceAccount"]);we!=null&&c(o,["serviceAccount"],we);const Xe=u(n,["tunedModelDisplayName"]);Xe!=null&&c(o,["tunedModelDisplayName"],Xe);const ze=u(n,["veoTuningSpec"]);return ze!=null&&c(o,["veoTuningSpec"],ze),o}function sA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["metadata"]);d!=null&&c(o,["metadata"],d);const h=u(n,["done"]);h!=null&&c(o,["done"],h);const y=u(n,["error"]);return y!=null&&c(o,["error"],y),o}function Vm(n,t){const o={},s=u(n,["gcsUri"]);s!=null&&c(o,["validationDatasetUri"],s);const r=u(n,["vertexDatasetResource"]);return r!=null&&c(o,["validationDatasetUri"],r),o}class aA extends so{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new il(lo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},o),{preTunedModel:r});return d.baseModel=void 0,await this.tuneInternal(d)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),d=await this.tuneMldevInternal(r);let h="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?h=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(h=d.name.split("/operations/")[0]),{name:h,state:Hc.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=X_(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>Qc(x))}else{const m=K_(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>Yg(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eA(t);return y=$e("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=nA(x),T=new fm;return Object.assign(T,S),T})}else{const m=W_(t);return y=$e("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=tA(x),T=new fm;return Object.assign(T,S),T})}}async cancel(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=F_(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=q_(x),T=new pm;return Object.assign(T,S),T})}else{const m=B_(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=O_(x),T=new pm;return Object.assign(T,S),T})}}async tuneInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=J_(t,t);return d=$e("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>Qc(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Y_(t);return d=$e("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>sA(v))}}}class rA{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uA=1024*1024*8,cA=3,dA=1e3,fA=2,yr="x-goog-upload-status";async function pA(n,t,o){var s;const r=await Jg(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[yr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function hA(n,t,o){var s;const r=await Jg(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[yr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=ig(d),y=new od;return Object.assign(y,h),y}async function Jg(n,t,o){var s,r;let d=0,h=0,y=new Vc(new Response),v="upload";for(d=n.size;h<d;){const m=Math.min(uA,d-h),x=n.slice(h,h+m);h+m>=d&&(v+=", finalize");let S=0,T=dA;for(;S<cA&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((s=y?.headers)===null||s===void 0)&&s[yr]));)S++,await gA(T),T=T*fA;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[yr])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function mA(n){return{size:n.size,type:n.type}}function gA(n){return new Promise(t=>setTimeout(t,n))}class yA{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pA(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hA(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mA(t)}}class vA{create(t,o,s){return new xA(t,o,s)}}class xA{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Bm="x-goog-api-key";class bA{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(Bm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Bm,this.apiKey)}}}const SA="gl-node/";class TA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new En({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=g1(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new bA(this.apiKey);this.apiClient=new mw({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:SA+"web",uploader:new yA,downloader:new rA}),this.models=new Dw(this.apiClient),this.live=new Nw(this.apiClient,r,new vA),this.batches=new $S(this.apiClient),this.chats=new _T(this.models,this.apiClient),this.caches=new CT(this.apiClient),this.files=new LT(this.apiClient),this.operations=new Uw(this.apiClient),this.authTokens=new Qw(this.apiClient),this.tunings=new aA(this.apiClient),this.fileSearchStores=new l_(this.apiClient)}}const CA=n=>new TA({apiKey:n}),EA={type:sn.OBJECT,properties:{segments:{type:sn.ARRAY,items:{type:sn.OBJECT,properties:{startTime:{type:sn.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:sn.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:sn.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},wA={type:sn.OBJECT,properties:{segments:{type:sn.ARRAY,items:{type:sn.OBJECT,properties:{startTime:{type:sn.STRING},endTime:{type:sn.STRING},text:{type:sn.STRING},words:{type:sn.ARRAY,items:{type:sn.OBJECT,properties:{text:{type:sn.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:sn.STRING,description:"Start time of the word"},endTime:{type:sn.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function or(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let S=0;m[1]&&(S=parseFloat("0."+m[1])),o=y*3600+v*60+x+S}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const s=Math.floor(o/60),r=Math.floor(o%60),d=Math.round(o%1*1e3);return`${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(d).padStart(3,"0")}`}function _A(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const s=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let d;for(;(d=r.exec(t))!==null;){const h=d[3]!==void 0?d[3]:d[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}s.push({startTime:d[1],endTime:d[2],text:y})}if(s.length>0)return{segments:s};throw new Error("Response structure invalid and could not be repaired.")}async function AA(n,t,o,s,r,d="line"){try{const h=CA(s),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";d==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. DETAILS: Inside each line object, you MUST provide a "words" array.
    4. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    5. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    6. FAST SPEECH / RAP HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating timed lyrics.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${d.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,S={responseMimeType:"application/json",responseSchema:d==="word"?wA:EA,temperature:.1};y&&(S.thinkingConfig={thinkingBudget:1024});const T=new Promise((J,se)=>{r?.aborted&&se(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>se(new DOMException("Aborted","AbortError")))});let N=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:S}),T])).text;if(!N)throw new Error("Empty response from model");return N=N.trim(),N.startsWith("```json")?N=N.replace(/^```json\s*/,"").replace(/\s*```$/,""):N.startsWith("```")&&(N=N.replace(/^```\s*/,"").replace(/\s*```$/,"")),(_A(N).segments||[]).map(J=>({startTime:or(String(J.startTime)),endTime:or(String(J.endTime)),text:String(J.text),words:J.words?J.words.map(se=>({text:String(se.text),startTime:or(String(se.startTime)),endTime:or(String(se.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const NA=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:s,onPlayTrack:r,isPlaying:d,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:S})=>{const{confirm:T}=xr(),A=W.useRef(null),N=W.useRef(new Map),O=G=>{const le=Math.floor(G/60).toString().padStart(2,"0"),de=(G%60).toFixed(2).padStart(5,"0");return`[${le}:${de}]`},[F,J]=W.useState(null),[se,ce]=W.useState({key:null,direction:"asc"}),[Ie,Re]=W.useState(new Set),[Ue,xe]=W.useState(new Set),[it,we]=W.useState(localStorage.getItem("gemini_api_key")||""),[Xe,ze]=W.useState("gemini-2.5-flash"),[pt,St]=W.useState("line"),[Mt,be]=W.useState(!1),B=W.useRef(null),[ve,ue]=W.useState(null);W.useEffect(()=>{it&&localStorage.setItem("gemini_api_key",it)},[it]);const mt=o>=0?n[o]:null,gt=mt?.parsedLyrics||[],z=W.useMemo(()=>mt?gt.findIndex((G,le)=>{if(G.endTime!==void 0)return x>=G.time&&x<G.endTime;const de=gt[le+1];return x>=G.time&&(!de||x<de.time)}):-1,[x,mt,gt]);W.useEffect(()=>{if(z!==-1){const G=document.getElementById(`lyric-active-${o}`);G&&G.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[z,o]);const M=G=>{if(n.length===0)return;const le=o>=0?n[o]:null,de=[...n];let Ee="asc";if(G==="random"){ce({key:"random",direction:"asc"});for(let ye=de.length-1;ye>0;ye--){const he=Math.floor(Math.random()*(ye+1));[de[ye],de[he]]=[de[he],de[ye]]}}else{se.key===G&&se.direction==="asc"&&(Ee="desc"),ce({key:G,direction:Ee});const ye=Ee==="asc"?1:-1;G==="filename"?de.sort((he,E)=>ye*he.audioFile.name.localeCompare(E.audioFile.name)):G==="artist"?de.sort((he,E)=>ye*(he.metadata.artist||"").localeCompare(E.metadata.artist||"")):G==="title"?de.sort((he,E)=>ye*(he.metadata.title||"").localeCompare(E.metadata.title||"")):G==="album"&&de.sort((he,E)=>ye*(he.metadata.album||"").localeCompare(E.metadata.album||""))}if(t(de),le){const ye=de.findIndex(he=>he.id===le.id);ye!==-1&&s(ye)}},ee=W.useCallback(G=>{F!==null&&G.key==="Delete"?(G.preventDefault(),G.stopPropagation(),m?m(F):t(le=>{const de=[...le];return de.splice(F,1),de}),F>=n.length-1&&J(n.length>1?n.length-2:null)):G.key==="ArrowDown"&&n.length>0?(G.preventDefault(),G.stopPropagation(),J(le=>le===null?0:Math.min(le+1,n.length-1))):G.key==="ArrowUp"&&n.length>0?(G.preventDefault(),G.stopPropagation(),J(le=>le===null?0:Math.max(le-1,0))):G.key==="Enter"&&F!==null?(G.preventDefault(),G.stopPropagation(),r(F)):G.key==="Escape"&&J(null)},[F,n.length,t,r]);W.useEffect(()=>{const G=A.current;if(G)return G.addEventListener("keydown",ee),()=>G.removeEventListener("keydown",ee)},[ee]),W.useEffect(()=>{F!==null&&F>=n.length&&J(n.length>0?n.length-1:null)},[n.length,F]);const Te=async G=>{const le=new Map;G.forEach(he=>{const E=he.name.split(".").pop()?.toLowerCase(),C=he.name.replace(/\.[^/.]+$/,"");le.has(C)||le.set(C,{});const V=le.get(C);["mp3","wav","ogg","flac","m4a"].includes(E||"")?V.audio=he:["lrc","srt","ttml","xml","json"].includes(E||"")&&(V.lyric=he)});const de=[],Ee=async(he,E)=>new Promise(C=>{Dc(()=>import("./jsmediatags.min-DJjCvWcp.js").then(V=>V.j),[]).then(V=>{V.read(he,{onSuccess:k=>{const{title:K,artist:I,album:X,picture:ae}=k.tags;let te=null;if(ae){const{data:Ne,format:Oe}=ae;let et="";for(let Fe=0;Fe<Ne.length;Fe++)et+=String.fromCharCode(Ne[Fe]);te=`data:${Oe};base64,${window.btoa(et)}`}C({title:K||E,artist:I||"Unknown Artist",album:X||void 0,coverUrl:te})},onError:()=>{C({title:E,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{C({title:E,artist:"Unknown Artist",coverUrl:null})})}),ye=async he=>{try{const E=await he.text(),C=he.name.split(".").pop()?.toLowerCase();if(C==="lrc")return Bl(E);if(C==="srt")return Fl(E);if(C==="ttml"||C==="xml")return Os(E);if(C==="json")return i1(E)}catch(E){console.error("Failed to parse lyrics",E)}return[]};for(const[he,E]of le.entries())if(E.audio){const C=await Ee(E.audio,he),V=Math.random().toString(36).substr(2,9);let k=[];E.lyric&&(k=await ye(E.lyric)),de.push({id:V,audioFile:E.audio,lyricFile:E.lyric,parsedLyrics:k,metadata:C,duration:0})}if(de.length>0){const he=[...n,...de];t(he),r(0,!1,he)}},Je=async G=>{if(G.target.files&&G.target.files.length>0){const le=Array.from(G.target.files);await Te(le),G.target.value=""}},[_,L]=W.useState(!1),ne=G=>{G.preventDefault(),G.stopPropagation(),L(!0)},ie=G=>{G.preventDefault(),G.stopPropagation(),L(!1)},ke=async G=>{if(G.preventDefault(),G.stopPropagation(),L(!1),G.dataTransfer.files&&G.dataTransfer.files.length>0){const le=Array.from(G.dataTransfer.files);await Te(le)}},Le=G=>{m?m(G):t(le=>{const de=[...le];return de.splice(G,1),de})},Se=G=>new Promise((le,de)=>{const Ee=new FileReader;Ee.readAsDataURL(G),Ee.onload=()=>{const ye=Ee.result.split(",")[1];le(ye)},Ee.onerror=ye=>de(ye)}),Me=async G=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(Ie.has(G.id)){const ye=N.current.get(G.id);ye&&ye.abort();return}const le=it||"PLACEHOLDER_API_KEY";if(le.trim().length!==39){alert(`Invalid API Key length (${le.trim().length}). It must be exactly 39 characters.`),be(!0);return}Re(ye=>new Set(ye).add(G.id));const de=new AbortController;N.current.set(G.id,de);const Ee=19.5*1024*1024;if(G.audioFile.size>Ee){alert(`File is too large (${(G.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),Re(ye=>{const he=new Set(ye);return he.delete(G.id),he}),N.current.delete(G.id);return}try{const ye=await Se(G.audioFile);let he=G.duration||0;if(he===0)try{he=await new Promise(V=>{const k=new Audio(URL.createObjectURL(G.audioFile));k.onloadedmetadata=()=>{V(k.duration),URL.revokeObjectURL(k.src)},k.onerror=()=>{URL.revokeObjectURL(k.src),V(0)}})}catch(V){console.warn("Could not determine duration for AI validation",V)}let C=(await AA(Xe,ye,G.audioFile.type,le,de.signal,pt)).map(V=>({time:Hs(V.startTime),text:V.text,endTime:Hs(V.endTime),words:V.words?V.words.map(k=>({text:k.text,startTime:Hs(k.startTime),endTime:Hs(k.endTime)})):void 0}));he>0&&(C=C.filter(V=>V.time<he&&V.time>=0)),t(V=>V.map(k=>k.id===G.id?{...k,parsedLyrics:C.sort((K,I)=>K.time-I.time),duration:he>0?he:k.duration}:k))}catch(ye){if(ye.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",ye);let he="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)he="Connection lost. Please check your internet connection.";else if(ye.message){const E=ye.message.toLowerCase();E.includes("fetch")||E.includes("network")||E.includes("failed to connect")?he="Network error. Please check your connection.":(E.includes("api key")||ye.message.includes("400")||ye.message.includes("401")||ye.message.includes("403"))&&(he="API Key Error: Please check if your key is valid and has credits.")}alert(he)}}finally{N.current.delete(G.id),Re(ye=>{const he=new Set(ye);return he.delete(G.id),he})}},pe=async G=>{if(!navigator.onLine){alert("No internet connection.");return}xe(le=>new Set(le).add(G.id));try{const le=await Dc(()=>import("./index.min-DI8eis3Z.js").then(C=>C.i),[]);let de;const Ee=le.default||le;console.log("SyncLyrics Module:",le);const ye=["musixmatch","lrclib","netease"];if(typeof Ee=="function"&&Ee.prototype&&Ee.prototype.getLyrics){console.log("Detected Class usage");const C=new Ee({sources:ye});de=V=>C.getLyrics(V)}else if(Ee.getLyrics&&typeof Ee.getLyrics=="function")console.log("Detected Instance usage"),de=C=>Ee.getLyrics(C);else if(Ee.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const C=Ee.SyncLyrics;if(typeof C=="function"&&C.prototype&&C.prototype.getLyrics){console.log("Using SyncLyrics as Class");const V=new C({sources:ye});de=k=>V.getLyrics(k)}else if(typeof C=="function")console.log("Using SyncLyrics as Function"),de=C;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ee=="function")console.log("Detected Function usage"),de=Ee;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ee}. Keys: ${typeof Ee=="object"?JSON.stringify(Object.keys(Ee)):"N/A"}`);const he={track:G.metadata.title,artist:G.metadata.artist,album:G.metadata.album,sources:ye};console.log("Searching lyrics with options:",he);const E=await de(he);if(E&&typeof E=="string")P(E,G);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let C=G.duration||0;if(C===0)try{C=await new Promise(I=>{const X=new Audio(URL.createObjectURL(G.audioFile));X.onloadedmetadata=()=>{const ae=X.duration;URL.revokeObjectURL(X.src),I(ae)},X.onerror=()=>I(0)})}catch(I){console.warn("Could not determine duration for search",I)}const V=new URLSearchParams({artist_name:G.metadata.artist,track_name:G.metadata.title,album_name:G.metadata.album||"",duration:C.toString()}),k=await fetch(`https://lrclib.net/api/get?${V.toString()}`);if(!k.ok){const I=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(G.metadata.title+" "+G.metadata.artist)}`);if(I.ok){const X=await I.json();if(Array.isArray(X)&&X.length>0){const ae=X.find(te=>te.syncedLyrics);if(ae){P(ae.syncedLyrics,G);return}else if(X[0].plainLyrics){P(X[0].plainLyrics,G);return}}}throw new Error("No lyrics found in fallback source.")}const K=await k.json();K.syncedLyrics?P(K.syncedLyrics,G):K.plainLyrics?P(K.plainLyrics,G):alert("No lyrics found.")}}catch(le){console.error("Search failed:",le),le.message?.includes("CORS")||le.message?.includes("etwork")||le.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+le.message)}finally{xe(le=>{const de=new Set(le);return de.delete(G.id),de})}},P=(G,le)=>{let de=Bl(G);if(de.length===0&&(de=Fl(G)),de.length>0){const Ee=de.some(ye=>ye.words&&ye.words.length>0);console.log(Ee?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(ye=>ye.map(he=>he.id===le.id?{...he,parsedLyrics:de,lyricFile:new File([G],`synched-lyrics${Ee?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:he))}else alert("Lyrics found but could not be parsed.")},Ae=(G,le,de)=>{const Ee=new Blob([G],{type:"application/octet-stream"}),ye=URL.createObjectURL(Ee),he=document.createElement("a");he.href=ye,he.download=le,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ye)},je=async(G,le)=>{const de=G.parsedLyrics||[];if(de.length===0)return;let Ee="";const ye=le==="lrc-enhanced"?"lrc":le,he=`${G.metadata.title||"lyrics"}.${ye}`;let E=G.duration||0;if(E===0)try{E=await new Promise(V=>{const k=new Audio(URL.createObjectURL(G.audioFile));k.onloadedmetadata=()=>{V(k.duration),URL.revokeObjectURL(k.src)},k.onerror=()=>V(0)})}catch(V){console.warn("Could not determine duration for export check",V)}const C=de.map(V=>({...V,words:V.words?V.words.filter(k=>k.text.trim().length>0).map(k=>({...k})):void 0}));for(let V=0;V<C.length;V++){const k=C[V],K=C[V+1];if(k.endTime===void 0&&(K?k.endTime=K.time:k.endTime=E>0?E:k.time+5),k.words&&k.words.length>0)for(let I=0;I<k.words.length;I++){const X=k.words[I],ae=k.words[I+1];(X.endTime===void 0||X.endTime<=X.startTime)&&(ae?X.endTime=ae.startTime:X.endTime=k.endTime)}}if(le==="txt")Ee=C.map(V=>V.text).join(`
`);else if(le==="json")Ee=JSON.stringify(C,null,2);else if(le==="srt"){const V=k=>{const K=Math.floor(k/3600).toString().padStart(2,"0"),I=Math.floor(k%3600/60).toString().padStart(2,"0"),X=Math.floor(k%60).toString().padStart(2,"0"),ae=Math.floor(k%1*1e3).toString().padStart(3,"0");return`${K}:${I}:${X},${ae}`};Ee=C.map((k,K)=>{const I=V(k.time),X=k.endTime!==void 0&&k.endTime>k.time?k.endTime:k.time+2,ae=V(X);return`${K+1}
${I} --> ${ae}
${k.text}
`}).join(`
`)}else if(le==="lrc"){const V=[],k=K=>{const I=Math.floor(K/60).toString().padStart(2,"0"),X=(K%60).toFixed(2).padStart(5,"0");return`[${I}:${X}]`};for(let K=0;K<de.length;K++){const I=de[K],X=de[K+1];V.push(`${k(I.time)}${I.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const te=(I.endTime??I.time+3)+4;(!(E>0)||te<=E)&&(X?X.time>te&&V.push(`${k(te)}`):V.push(`${k(te)}`))}Ee=V.join(`
`)}else if(le==="lrc-enhanced"){const V=[],k=I=>{const X=Math.floor(I/60).toString().padStart(2,"0"),ae=(I%60).toFixed(2).padStart(5,"0");return`[${X}:${ae}]`},K=I=>{const X=Math.floor(I/60).toString().padStart(2,"0"),ae=(I%60).toFixed(2).padStart(5,"0");return`<${X}:${ae}>`};for(let I=0;I<de.length;I++){const X=de[I],ae=de[I+1];let te="";X.words&&X.words.length>0?X.words.forEach((Fe,zt)=>{const wt=Fe.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");te+=`${K(Fe.startTime)}${wt}`,zt<X.words.length-1&&!wt.endsWith("-")&&(te+=" ")}):te=X.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),V.push(`${k(X.time)}${te}`);const Oe=(X.endTime??X.time+3)+4;(!(E>0)||Oe<=E)&&(ae?ae.time>Oe&&V.push(`${k(Oe)}`):V.push(`${k(Oe)}`))}Ee=V.join(`
`)}else if(le==="ttml"){const V=k=>{const K=Math.floor(k/3600).toString().padStart(2,"0"),I=Math.floor(k%3600/60).toString().padStart(2,"0"),X=Math.floor(k%60).toString().padStart(2,"0"),ae=Math.floor(k%1*1e3).toString().padStart(3,"0");return`${K}:${I}:${X}.${ae}`};Ee=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,C.forEach(k=>{const K=V(k.time),I=k.endTime!==void 0&&k.endTime>k.time?k.endTime:k.time+3,X=V(I);Ee+=`
      <p begin="${K}" end="${X}">`,k.words&&k.words.length>0?k.words.forEach(ae=>{if(!ae.text.trim())return;const te=V(ae.startTime);let Ne=ae.endTime;(Ne===void 0||Ne<=ae.startTime)&&(Ne=ae.startTime+.5);const Oe=V(Ne);let et=ae.text.replace(/[ \t]+/g," ").trim();et.endsWith("-")||(et+=" "),Ee+=`
        <span begin="${te}" end="${Oe}">${et}</span>`}):Ee+=`
        <span begin="${K}" end="${X}">${k.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ee+=`
      </p>`}),Ee+=`
    </div>
  </body>
</tt>`}Ae(Ee,he)},Be=async G=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(le=>le.map(de=>de.id===G.id?{...de,parsedLyrics:[],lyricFile:void 0}:de))},Ye=async G=>{const le=G.target.files?.[0];if(!(!le||!ve)){try{const de=await le.text(),Ee=le.name.split(".").pop()?.toLowerCase();let ye=[];Ee==="lrc"?ye=Bl(de):Ee==="srt"?ye=Fl(de):(Ee==="ttml"||Ee==="xml")&&(ye=Os(de)),ye.length>0?t(he=>he.map(E=>E.id===ve?{...E,lyricFile:le,parsedLyrics:ye}:E)):alert("Could not parse lyrics. Ensure file is .lrc or .srt")}catch(de){console.error("Failed to load lyrics",de),alert("Failed to load lyrics file.")}ue(null),G.target.value=""}};return p.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${_?"bg-zinc-800 border-orange-500":""}`,onDragOver:ne,onDragLeave:ie,onDrop:ke,children:[_&&p.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:p.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[p.jsx(Lo,{size:48}),p.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),p.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, OGG, FLAC, M4A, LRC, SRT, TTML"})]})}),p.jsx("input",{type:"file",ref:B,className:"hidden",accept:".lrc,.srt,.ttml,.xml",onChange:Ye}),p.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[p.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[p.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[p.jsx(cr,{size:16,className:"text-orange-400"}),"Playlist"]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-orange-600 hover:bg-orange-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[p.jsx(eg,{size:14})," Add Audio & Lyrics",p.jsx("input",{type:"file",className:"hidden",accept:"audio/*,.lrc,.srt,.ttml,.xml",multiple:!0,onChange:Je})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>M("filename"),className:`p-1 rounded transition-colors ${se.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${se.key==="filename"?se.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(ur,{size:14,className:se.key==="filename"&&se.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("artist"),className:`p-1 rounded transition-colors ${se.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${se.key==="artist"?se.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Jb,{size:14,className:se.key==="artist"&&se.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("title"),className:`p-1 rounded transition-colors ${se.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${se.key==="title"?se.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Pl,{size:14,className:se.key==="title"&&se.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("album"),className:`p-1 rounded transition-colors ${se.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${se.key==="album"?se.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Lx,{size:14,className:se.key==="album"&&se.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>M("random"),className:`p-1 rounded transition-colors ${se.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:p.jsx(Ab,{size:14})})]})]}),p.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[p.jsx("button",{onClick:()=>be(!Mt),className:`p-1 rounded transition-colors ${Mt?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:p.jsx(Zx,{size:14})}),Mt&&p.jsx("input",{type:it?"password":"text",value:it,onChange:G=>we(G.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),p.jsx("div",{className:"relative group",children:p.jsxs("select",{value:Xe,onChange:G=>ze(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[p.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),p.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),p.jsx("div",{className:"relative group",children:p.jsxs("select",{value:pt,onChange:G=>St(G.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[p.jsx("option",{value:"line",children:"Line"}),p.jsx("option",{value:"word",children:"Word"})]})}),p.jsx("button",{onClick:async()=>{n.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:p.jsx(dr,{size:14})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),p.jsx("button",{onClick:S,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:p.jsx(xi,{size:14})})]})]}),p.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[p.jsx(cr,{size:32,className:"mb-2 opacity-50"}),p.jsx("p",{children:"Playlist is empty"}),p.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((G,le)=>{const de=le===o,Ee=le===F,ye=G.parsedLyrics||[],he=de?ye.findIndex((E,C)=>{if(E.endTime!==void 0)return x>=E.time&&x<E.endTime;const V=ye[C+1];return x>=E.time&&(!V||x<V.time)}):-1;return p.jsxs("div",{onClick:()=>J(le),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${de?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ee?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[p.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:E=>{E.stopPropagation(),de?h():r(le)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${de?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:de?d?p.jsx(Wm,{size:14}):p.jsx(Uc,{size:14}):p.jsx(Uc,{size:14})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:`text-xs font-medium truncate ${de?"text-orange-100":"text-zinc-300"}`,title:G.audioFile.name,children:G.metadata.title}),p.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:G.metadata.artist,children:G.metadata.artist})]})]}),p.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[p.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(G.audioFile.size/1024/1024).toFixed(1),"MB"]}),G.lyricFile?p.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:G.lyricFile.name,children:[p.jsx(ur,{size:7}),p.jsx("span",{className:"truncate max-w-[80px]",children:G.lyricFile.name})]}):p.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),p.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:ye.length>0?p.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:ye.map((E,C)=>{const V=C===he;return p.jsxs("div",{id:V?`lyric-active-${le}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${V?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${O(E.time)} - ${E.text}`,onClick:k=>{k.stopPropagation(),le!==o?(r(le),setTimeout(()=>y(E.time),150)):y(E.time)},children:[p.jsx("span",{className:`font-mono text-[8px] ${V?"text-orange-200":"text-zinc-500"}`,children:O(E.time)}),p.jsx("span",{className:`truncate max-w-[120px] ${V?"text-white font-medium":"text-zinc-400"}`,children:E.text||""})]},C)})}):p.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[p.jsx("button",{onClick:E=>{E.stopPropagation(),ue(G.id),B.current&&(B.current.value=""),B.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:p.jsx(Lo,{size:14})}),p.jsx("button",{onClick:E=>{E.stopPropagation(),pe(G)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${Ue.has(G.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:Ue.has(G.id),children:Ue.has(G.id)?p.jsx(l0,{size:14,className:"animate-spin"}):p.jsx(Eb,{size:14})}),p.jsx("button",{onClick:E=>{E.stopPropagation(),Me(G)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${Ie.has(G.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:Ie.has(G.id)?"Stop Transcription":"AI Sync Transcribe",children:Ie.has(G.id)?p.jsxs(p.Fragment,{children:[p.jsx(l0,{size:14,className:"animate-spin group-hover/btn:hidden"}),p.jsx(Pc,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):p.jsx(Lc,{size:14})}),ye.length>0&&p.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),je(G,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),p.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),p.jsx("button",{onClick:E=>{E.stopPropagation(),Be(G)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),p.jsx("button",{onClick:E=>{E.stopPropagation(),Le(le)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:p.jsx(dr,{size:12})})]},G.id)})})]})},fd=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],MA=()=>{const n=new Set;if(fd.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const s=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=s,document.head.appendChild(r);const d=document.createElement("link");d.rel="preconnect",d.href="https://fonts.googleapis.com",document.head.appendChild(d);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},pd=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],vr={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},zc=pd.flatMap(n=>n.options.map(t=>t.value)),Fm={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"shadow",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0},Om=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],qm=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],$m=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],Zc=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],Wc=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},jm=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],ed=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],Kg=["none","upper","lower","title","sentence","invert"],Ym=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],Jm=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],RA=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],Mi=({value:n,onChange:t,groups:o})=>{const[s,r]=W.useState(!1),[d,h]=W.useState(n);W.useEffect(()=>{s||h(n)},[n,s]);const y=S=>{for(const T of o){const A=T.options.find(N=>N.value===S);if(A)return A.label}return S},v=S=>{t(S)},m=()=>{s&&t(d),r(!1)},x=S=>{t(S),h(S),r(!1)};return p.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[p.jsxs("button",{onClick:()=>r(!s),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:s?"Close List":"Expand List",children:[p.jsx("span",{className:"truncate",children:y(n)}),p.jsx(rr,{size:14,className:`transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&p.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(S=>p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),p.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(T=>p.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},S.label))})]})},kA=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const s of t){const r=s.options.find(d=>d.value===n);if(r)return r.label}return"Select Font"},IA=({value:n,onChange:t,customFontName:o,groups:s=fd})=>{const[r,d]=W.useState(!1),[h,y]=W.useState(n);W.useEffect(()=>{r||y(n)},[n,r]);const v=S=>{t(S)},m=()=>{r&&t(h)},x=S=>{t(S),y(S),d(!1)};return p.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[p.jsxs("button",{onClick:()=>d(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[p.jsx("span",{className:"truncate",style:{fontFamily:n},children:kA(n,s,o)}),p.jsx(rr,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&p.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),p.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:p.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),s.map(S=>p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),p.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(T=>p.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:p.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},S.label))]})]})},zA=Object.values(vr).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),DA=[{label:"Visual Presets",options:zA},...fd],UA=({config:n,setConfig:t,preset:o,setPreset:s,onClose:r,isPlaylistMode:d,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:S,setResolution:T,aspectRatio:A,setAspectRatio:N,renderCodec:O,setRenderCodec:F,supportedCodecs:J,renderQuality:se,setRenderQuality:ce,renderFps:Ie,setRenderFps:Re})=>{const{toast:Ue,confirm:xe}=xr(),it=W.useRef(null),we=W.useRef(null),Xe=W.useRef(null),ze=W.useRef(null),pt=W.useRef(null),[St,Mt]=W.useState(!1),be=(M,ee)=>{let Te={...n,[M]:ee};if(M==="highlightEffect"){const _=Wc(ee);Te.useCustomHighlightColors=!1,_&&(Te.highlightColor=_.color,Te.highlightBackground=_.bg)}t(Te)},B=M=>{s(M);const ee=vr[M];ee&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...ee})},ve=M=>{const ee=M.target.files?.[0];if(ee){const Te=new FileReader;Te.onload=Je=>{Je.target?.result&&be("channelInfoImage",Je.target.result)},Te.readAsDataURL(ee)}M.target.value=""},ue=M=>{const ee=M.target.files?.[0];if(ee){const Te=new FileReader;Te.onload=Je=>{Je.target?.result&&be("backgroundImage",Je.target.result)},Te.readAsDataURL(ee)}M.target.value=""},mt=async()=>{await xe("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(Fm),s("default"),T("1080p"),N("16:9"),F("auto"),Re(30),ce("med"),Xe.current&&(Xe.current.value=""),ze.current&&(ze.current.value=""),x(),Ue.success("All settings have been reset to default."))},gt=()=>{const M=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),ee={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:S,aspectRatio:A,renderCodec:O,renderFps:Ie,renderQuality:se,customFontName:v};ee.backgroundSource!=="image"&&(ee.backgroundImage=void 0),ee.showChannelInfo||(ee.channelInfoImage=void 0);try{const Te=JSON.stringify(ee,null,2),Je=new Blob([Te],{type:"application/json"}),_=URL.createObjectURL(Je),L=document.createElement("a");L.setAttribute("href",_),L.setAttribute("download",`render_settings_${M}.json`),document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(_)}catch(Te){console.error("Export failed:",Te),Ue.error("Failed to export settings.")}},z=M=>{const ee=M.target.files?.[0];if(!ee)return;const Te=new FileReader;Te.onload=Je=>{try{const _=JSON.parse(Je.target?.result);if(_&&typeof _=="object"){const{resolution:L,aspectRatio:ne,renderCodec:ie,renderFps:ke,renderQuality:Le,preset:Se,customFontName:Me,...pe}=_,P={...Fm,...pe};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale"].forEach(Ye=>{P[Ye]!==void 0&&(P[Ye]=Number(P[Ye]))}),P.useCustomHighlightColors!==void 0&&(P.useCustomHighlightColors=!!P.useCustomHighlightColors),P.showChannelInfo!==void 0&&(P.showChannelInfo=!!P.showChannelInfo),P.showIntro!==void 0&&(P.showIntro=!!P.showIntro),P.showTitle!==void 0&&(P.showTitle=!!P.showTitle),P.showArtist!==void 0&&(P.showArtist=!!P.showArtist),P.showCover!==void 0&&(P.showCover=!!P.showCover),P.showLyrics!==void 0&&(P.showLyrics=!!P.showLyrics),P.highlightEffect&&(!P.highlightColor||!P.highlightBackground)){const Ye=Wc(P.highlightEffect);Ye&&(P.highlightColor||(P.highlightColor=Ye.color),P.highlightBackground||(P.highlightBackground=Ye.bg))}const je=(Ye,G)=>G.some(le=>le.options.some(de=>de.value===Ye));P.textEffect&&!je(P.textEffect,Om)&&(P.textEffect="shadow"),P.textAnimation&&!je(P.textAnimation,qm)&&(P.textAnimation="none"),P.transitionEffect&&!je(P.transitionEffect,$m)&&(P.transitionEffect="none"),P.highlightEffect&&!je(P.highlightEffect,Zc)&&(P.highlightEffect="karaoke"),P.backgroundSource&&!je(P.backgroundSource,jm)&&(P.backgroundSource="custom"),["current","playlist"].includes(P.renderMode)||(P.renderMode="current"),["left","center","right"].includes(P.textAlign)||(P.textAlign="center"),["top","center","bottom"].includes(P.contentPosition)||(P.contentPosition="center"),P.lyricDisplayMode&&!je(P.lyricDisplayMode,ed)&&(P.lyricDisplayMode="all"),["normal","bold"].includes(P.fontWeight)||(P.fontWeight="bold"),["normal","italic"].includes(P.fontStyle)||(P.fontStyle="normal"),["none","underline","line-through"].includes(P.textDecoration)||(P.textDecoration="none"),Kg.includes(P.textCase)||(P.textCase="none"),["auto","manual"].includes(P.introMode)||(P.introMode="auto"),P.lyricStyleTarget&&!["active-only","all"].includes(P.lyricStyleTarget)&&(P.lyricStyleTarget="active-only");const Be=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];P.infoPosition&&!Be.includes(P.infoPosition)&&(P.infoPosition="top-left"),P.infoStyle&&!je(P.infoStyle,Ym)&&(P.infoStyle="classic"),P.channelInfoPosition&&!Be.includes(P.channelInfoPosition)&&(P.channelInfoPosition="bottom-right"),P.channelInfoStyle&&!je(P.channelInfoStyle,Jm)&&(P.channelInfoStyle="classic"),t(P),L&&T(L),ne&&N(ne),ie&&F(ie),ke&&Re(Number(ke)),Le&&ce(Le),s(Se||"custom"),Me&&Me!==v?Ue.success(`Settings loaded. Note: Config used font "${Me}".`):Ue.success("Settings loaded successfully!")}}catch(_){console.error(_),Ue.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},Te.readAsText(ee),M.target.value=""};return W.useEffect(()=>{const M=ee=>{it.current&&!it.current.contains(ee.target)&&r()};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[r]),p.jsxs("div",{ref:it,onMouseDown:M=>M.stopPropagation(),className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[p.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(lr,{size:18,className:"text-purple-400"}),p.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{ref:pt,type:"file",accept:".json,.txt",className:"hidden",onChange:z}),p.jsx("button",{onClick:()=>pt.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:p.jsx(Lo,{size:16})}),p.jsx("button",{onClick:gt,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:p.jsx(Gx,{size:16})}),p.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),p.jsx("button",{onClick:mt,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:p.jsx(bb,{size:16})}),p.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:p.jsx(xi,{size:20})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Lc,{size:14})," Visual Preset"]}),p.jsx(Mi,{value:o,onChange:M=>B(M),groups:pd})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Fs,{size:14})," Render Scope"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("button",{onClick:()=>be("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),p.jsx("button",{onClick:()=>be("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(i0,{size:14})," Background Source"]}),p.jsx(Mi,{value:n.backgroundSource,onChange:M=>{M==="gradient"&&!n.backgroundGradient?(s("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):M==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(s("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):M==="color"&&!n.backgroundColor?(s("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):be("backgroundSource",M)},groups:jm}),n.backgroundSource==="smart-gradient"&&p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.backgroundColor,onChange:M=>be("backgroundColor",M.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),p.jsx("input",{type:"text",value:n.backgroundColor,onChange:M=>be("backgroundColor",M.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.backgroundColor,onChange:M=>be("backgroundColor",M.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.backgroundColor,onChange:M=>be("backgroundColor",M.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&p.jsx("input",{type:"text",value:n.backgroundGradient,onChange:M=>be("backgroundGradient",M.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&p.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),p.jsx("input",{ref:ze,type:"file",accept:"image/*",onChange:ue,className:"hidden"}),n.backgroundImage?p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[p.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:p.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),p.jsx("button",{onClick:()=>be("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),p.jsx("button",{onClick:()=>ze.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:p.jsx(lr,{size:14})})]}):p.jsxs("button",{onClick:()=>ze.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Lo,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(sb,{size:14})," Background Effects"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[p.jsx("button",{onClick:()=>be("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),p.jsx("button",{onClick:()=>be("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&p.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),p.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:p.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:M=>be("backgroundBlurStrength",parseInt(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(ur,{size:14})," Lyric Display Mode"]}),p.jsx(Mi,{value:n.lyricDisplayMode,onChange:M=>be("lyricDisplayMode",M),groups:ed})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Lc,{size:14})," Highlight Effect"]}),p.jsx(Mi,{value:n.highlightEffect||"none",onChange:M=>{be("highlightEffect",M)},groups:Zc}),n.highlightEffect&&n.highlightEffect!=="none"&&p.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[p.jsxs("button",{onClick:()=>be("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[p.jsx("span",{children:"Custom Colors"}),p.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:p.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&p.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:M=>be("highlightColor",M.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:M=>be("highlightColor",M.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:M=>be("highlightBackground",M.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:M=>be("highlightBackground",M.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(rb,{size:14})," Visible Elements"]}),p.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(M=>p.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[p.jsx("span",{className:"text-xs text-zinc-300",children:M.label}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n[M.key],onChange:ee=>be(M.key,ee.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},M.key))})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Uo,{size:14})," Intro Settings"]}),p.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[p.jsx("button",{onClick:()=>be("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),p.jsx("button",{onClick:()=>be("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&p.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),p.jsx("textarea",{value:n.introText,onChange:M=>be("introText",M.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(i0,{size:14})," Channel Info / Watermark"]}),p.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[p.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:M=>be("showChannelInfo",M.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&p.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),p.jsx("input",{ref:Xe,type:"file",accept:"image/*",onChange:ve,className:"hidden"}),n.channelInfoImage?p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[p.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:p.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),p.jsx("button",{onClick:()=>be("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),p.jsx("button",{onClick:()=>Xe.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:p.jsx(lr,{size:14})})]}):p.jsxs("button",{onClick:()=>Xe.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Lo,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),p.jsx("textarea",{value:n.channelInfoText??"",onChange:M=>be("channelInfoText",M.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx("button",{onClick:()=>be("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsx(Mi,{value:n.channelInfoStyle||"classic",onChange:M=>be("channelInfoStyle",M),groups:Jm})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Bs,{size:12})}),p.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:M=>be("channelInfoMarginScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Bs,{size:12})}),p.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:M=>be("channelInfoSizeScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Pl,{size:14})," Song Info Design"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx("button",{onClick:()=>be("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsx(Mi,{value:n.infoStyle||"classic",onChange:M=>be("infoStyle",M),groups:Ym})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Bs,{size:12})}),p.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:M=>be("infoMarginScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Uo,{size:12})}),p.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:M=>be("infoSizeScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Uo,{size:14})," Typography & Style"]}),p.jsxs("div",{className:"space-y-4 pt-1",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),p.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(M=>p.jsx("button",{onClick:()=>be("textAlign",M),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===M?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:M},M))})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>be("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:p.jsx(Tx,{size:14})}),p.jsx("button",{onClick:()=>be("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:p.jsx(vx,{size:14})}),p.jsx("button",{onClick:()=>be("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:p.jsx(bx,{size:14})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>be("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:p.jsx(Ex,{size:14})}),p.jsx("button",{onClick:()=>be("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:p.jsx(Xx,{size:14})}),p.jsx("button",{onClick:()=>be("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:p.jsx(Ob,{size:14})}),p.jsx("button",{onClick:()=>be("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:p.jsx(Pb,{size:14})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>be("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),p.jsx("button",{onClick:()=>be("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),p.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>be("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),p.jsx("button",{onClick:()=>be("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),p.jsx("button",{onClick:()=>be("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),p.jsx("button",{onClick:()=>be("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),p.jsx("button",{onClick:()=>be("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),p.jsx("button",{onClick:()=>be("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),p.jsx(IA,{value:n.fontFamily,onChange:M=>be("fontFamily",M),customFontName:v,groups:DA})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),p.jsx("input",{ref:we,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[p.jsx(Uo,{size:14,className:"text-purple-400 shrink-0"}),p.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),p.jsx("button",{onClick:()=>{be("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),p.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:p.jsx(dr,{size:14})})]}):p.jsxs("button",{onClick:()=>we.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Lo,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Uo,{size:12})}),p.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:M=>be("fontSizeScale",parseFloat(M.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),p.jsx("span",{className:"text-zinc-300",children:p.jsx(Uo,{size:16})})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&p.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.fontColor,onChange:M=>be("fontColor",M.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.fontColor,onChange:M=>be("fontColor",M.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),p.jsx(Mi,{value:n.textEffect,onChange:M=>be("textEffect",M),groups:Om})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),p.jsx(Mi,{value:n.textAnimation,onChange:M=>be("textAnimation",M),groups:qm})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),p.jsx(Mi,{value:n.transitionEffect,onChange:M=>be("transitionEffect",M),groups:$m})]}),p.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Fs,{size:14})," Output Settings"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),p.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),p.jsx(Mi,{value:String(Ie),onChange:M=>Re(parseInt(M)),groups:RA})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),p.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(M=>p.jsx("button",{onClick:()=>N(M),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===M?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:M},M))})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),p.jsx(Mi,{value:O,onChange:M=>F(M),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...J]}]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>ce("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${se==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),p.jsx("button",{onClick:()=>ce("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${se==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),p.jsx("button",{onClick:()=>ce("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${se==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),p.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[p.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[p.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",p.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),p.jsxs("button",{onClick:()=>Mt(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[p.jsx(o0,{size:14})," View Keyboard Shortcuts"]})]})]}),St&&p.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>Mt(!1),children:p.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:M=>M.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[p.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[p.jsx(o0,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),p.jsx("button",{onClick:()=>Mt(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:p.jsx(xi,{size:18})})]}),p.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),p.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[p.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),p.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),p.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),p.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:p.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",p.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),p.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[p.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[p.jsx(Fs,{size:16})," Start Render"]}),p.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},LA=(n,t,o,s,r,d,h,y,v,m,x,S,T,A,N,O=!0,F=!0)=>{const J=_=>{const L=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return L?{r:parseInt(L[1],16),g:parseInt(L[2],16),b:parseInt(L[3],16)}:{r:255,g:255,b:255}},se=_=>{let L=0,ne=0;if(_ instanceof ImageBitmap?(L=_.width,ne=_.height):_ instanceof HTMLVideoElement?(L=_.videoWidth,ne=_.videoHeight):(L=_.width,ne=_.height),L&&ne){const ie=Math.max(t/L,o/ne),ke=t/2-L/2*ie,Le=o/2-ne/2*ie;n.drawImage(_,ke,Le,L*ie,ne*ie)}},ce=(_,L,ne)=>{if(L.includes(`
`))return L.split(`
`).flatMap(Me=>ce(_,Me,ne));const ie=L.split(" ");let ke=[],Le=ie[0]||"";for(let Me=1;Me<ie.length;Me++){const pe=ie[Me],P=Le+" "+pe;_.measureText(P).width<ne?Le=P:(ke.push(Le),Le=pe)}ke.push(Le);const Se=[];for(const Me of ke)if(_.measureText(Me).width<=ne)Se.push(Me);else{let pe="";for(const P of Me)_.measureText(pe+P).width<=ne?pe+=P:(pe&&Se.push(pe),pe=P);pe&&Se.push(pe)}return Se},Ie=(_,L,ne,ie,ke,Le)=>{if(ke==="vhs"&&_ instanceof CanvasRenderingContext2D)_.save(),_.globalCompositeOperation="screen",_.fillStyle="#ff0000",_.fillText(L,ne-2,ie),_.fillStyle="#00ff00",_.fillText(L,ne,ie),_.fillStyle="#0000ff",_.fillText(L,ne+2,ie),_.restore();else if(ke==="3d"){const Se=_.fillStyle;_.fillStyle="rgba(0,0,0,0.5)";for(let Me=1;Me<=4;Me++)_.fillText(L,ne+Me,ie+Me);_.fillStyle=Se,_.fillText(L,ne,ie)}else if(ke==="neon"){const Se=_.fillStyle;_.shadowColor=Se,_.shadowBlur=20,_.fillText(L,ne,ie),_.shadowBlur=40,_.fillText(L,ne,ie)}else if(ke==="outline")_.strokeText(L,ne,ie),_.fillText(L,ne,ie);else if(ke==="gradient"){const Se=_.createLinearGradient(ne,ie-20,ne,ie+20);Se.addColorStop(0,_.fillStyle),Se.addColorStop(1,"#ffffff"),_.fillStyle=Se,_.fillText(L,ne,ie)}else if(ke==="fire")_.save(),_.shadowBlur=5,_.shadowColor="#ff0000",_.fillStyle="#ff4500",_.fillText(L,ne,ie),_.shadowBlur=2,_.shadowColor="#ffff00",_.fillStyle="#ffcc00",_.fillText(L,ne+1,ie-1),_.restore();else if(ke==="emboss")_.fillStyle="rgba(255,255,255,0.7)",_.fillText(L,ne-1,ie-1),_.fillStyle="rgba(0,0,0,0.7)",_.fillText(L,ne+1,ie+1),_.fillStyle="rgba(128,128,128,0.5)",_.fillText(L,ne,ie);else if(ke==="mirror")_.fillText(L,ne,ie),_.save(),_.translate(ne,ie),_.scale(1,-1),_.translate(-ne,-ie),_.globalAlpha*=.2,_.fillText(L,ne,ie-40),_.restore();else if(ke==="neon-multi")_.fillStyle,_.shadowBlur=10,_.shadowColor="#fff",_.fillText(L,ne,ie),_.shadowBlur=20,_.shadowColor="#ff00de",_.fillText(L,ne,ie),_.shadowBlur=35,_.shadowColor="#00ffff",_.fillText(L,ne,ie);else if(ke==="gold"){const Se=_.createLinearGradient(ne,ie-20,ne,ie+20);Se.addColorStop(0,"#d4af37"),Se.addColorStop(1,"#C5A028"),_.fillStyle=Se,_.fillText(L,ne,ie)}else if(ke==="chrome"){const Se=_.createLinearGradient(ne,ie-20,ne,ie+20);Se.addColorStop(0,"#ebebeb"),Se.addColorStop(.5,"#616161"),Se.addColorStop(.51,"#ebebeb"),Se.addColorStop(1,"#ebebeb"),_.fillStyle=Se,_.fillText(L,ne,ie)}else if(ke==="frozen")_.shadowColor="#03A9F4",_.shadowBlur=20,_.fillStyle="#ffffff",_.fillText(L,ne,ie);else if(ke==="rainbow"){const Se=_.createLinearGradient(ne-100,ie,ne+100,ie);Se.addColorStop(0,"violet"),Se.addColorStop(.16,"indigo"),Se.addColorStop(.32,"blue"),Se.addColorStop(.48,"green"),Se.addColorStop(.64,"yellow"),Se.addColorStop(.8,"orange"),Se.addColorStop(1,"red"),_.fillStyle=Se,_.fillText(L,ne,ie)}else ke==="retro"?(_.fillStyle="#ff00ff",_.shadowColor="#00ffff",_.shadowBlur=0,_.shadowOffsetX=4,_.shadowOffsetY=4,_.fillText(L,ne,ie)):ke==="hologram"?(_.fillStyle="rgba(0, 255, 255, 0.7)",_.shadowColor="rgba(0,255,255,0.5)",_.shadowBlur=10,_.fillText(L,ne,ie)):(ke==="comic"&&(_.lineWidth=3,_.strokeStyle="#000000",_.strokeText(L,ne,ie),_.fillStyle="#ffcc00"),_.fillText(L,ne,ie));if(Le&&Le!=="none"){const Me=_.measureText(L).width;let pe=ne;if(_.textAlign==="center"?pe=ne-Me/2:_.textAlign==="right"&&(pe=ne-Me),_.save(),_.beginPath(),_.lineWidth=Math.max(2,4*ue),_.strokeStyle=_.fillStyle,Le.includes("line-through")&&(_.moveTo(pe,ie),_.lineTo(pe+Me,ie)),Le.includes("underline")){const P=_.font.match(/(\d+(\.\d+)?)px/),Ae=P?parseFloat(P[1]):50,je=ie+Ae*.4;_.moveTo(pe,je),_.lineTo(pe+Me,je)}_.stroke(),_.restore()}},Re=(_,L,ne,ie,ke,Le,Se,Me,pe,P,Ae,je,Be)=>{const Ye=Me?.textCase||"none",G=(ae,te)=>{if(!ae)return ae;if(Ye==="upper")return ae.toUpperCase();if(Ye==="lower")return ae.toLowerCase();if(Ye==="title")return ae.replace(/\w\S*/g,Ne=>Ne.charAt(0).toUpperCase()+Ne.substr(1).toLowerCase());if(Ye==="sentence"){const Ne=ae.toLowerCase();return te?Ne.charAt(0).toUpperCase()+Ne.slice(1):Ne}return Ye==="invert"?ae.replace(/\w\S*/g,Ne=>Ne.charAt(0).toLowerCase()+Ne.slice(1).toUpperCase()):ae};let le=L.words||[];le.length===0&&(le=L.text.split(" ").map(te=>({text:te,startTime:L.time,endTime:L.endTime||L.time+3})));const de=le.filter(ae=>ae.text.trim().length>0).map((ae,te)=>({...ae,text:G(ae.text,te===0).trim()}));_.font=`${je} ${Ae} ${P}px ${pe}`;const Ee=[];let ye=[],he=0,E=.3;["default","custom"].includes(m)?E=.25:m==="monospace"&&(E=.5);const C=_.measureText("M").width*E;de.forEach((ae,te)=>{const Ne=_.measureText(ae.text).width;let et=!ae.text.endsWith(" ");const Fe=/[-]$/,zt=/^[-]/;Fe.test(ae.text.trim())&&(et=!1);const wt=de[te+1];wt&&zt.test(wt.text.trim())&&(et=!1);const Ft=et?C:0;he+Ne>ke&&ye.length>0&&(Ee.push(ye),ye=[],he=0),ye.push(ae),he+=Ne+Ft}),ye.length>0&&Ee.push(ye);const V=ie-(Ee.length-1)*Le/2;let k=Me.highlightColor||"#fb923c",K=Me.highlightBackground||"#ffffff";const I=Me.highlightEffect||"none";Me.useCustomHighlightColors||(I.includes("blue")||I.includes("cyan")?(k="#3b82f6",K="#3b82f6"):I.includes("purple")?(k="#a855f7",K="#a855f7"):I.includes("green")?(k="#22c55e",K="#22c55e"):I.includes("pink")?(k="#ec4899",K="#ec4899"):I.includes("neon")?(k="#ffffff",K="#ffffff"):I.includes("gold")?(k="#FFD700",K="#B8860B"):I.includes("chrome")?(k="#E0E0E0",K="#757575"):I.includes("fire")?(k="#FF4500",K="#FF0000"):I.includes("glass")?(k="#ffffff",K="rgba(255,255,255,0.1)"):I==="karaoke"&&(k="#fb923c",K="#fb923c"));let X=Me.fontColor||"#ffffff";Ee.forEach((ae,te)=>{const Ne=V+te*Le;let Oe=0;ae.forEach((Fe,zt)=>{if(Oe+=_.measureText(Fe.text).width,zt<ae.length-1){let Ft=!Fe.text.endsWith(" ");const en=/[-]$/,st=/^[-]/;en.test(Fe.text.trim())&&(Ft=!1);const _e=ae[zt+1];_e&&st.test(_e.text.trim())&&(Ft=!1),Oe+=Ft?C:0}});let et=ne;_.textAlign==="center"?et=ne-Oe/2:_.textAlign==="right"&&(et=ne-Oe),_.save(),_.textAlign="left",_.textBaseline="middle",ae.forEach((Fe,zt)=>{const wt=_.measureText(Fe.text).width,Ft=Se>=Fe.startTime,en=Se>=Fe.startTime&&Se<Fe.endTime;let st=X;const _e=I.includes("fill")||I==="karaoke-smooth",tt=_e?Ft:en;if(tt&&I!=="none")if(I==="karaoke-smooth")if(en){const Qe=Fe.endTime-Fe.startTime,Et=Se-Fe.startTime,Ht=Math.max(0,Math.min(1,Et/Qe)),ri=_.createLinearGradient(et,0,et+wt,0);ri.addColorStop(Ht,k),ri.addColorStop(Math.min(1,Ht+.001),X),st=ri}else st=k;else st=k;if(_.save(),_.fillStyle=st,(en||_e&&Ft)&&(I.includes("pill")||I.includes("box")||I.includes("rounded")||I.includes("fill")||I.includes("glass"))&&tt){const Qe=I.includes("pill")?P*.4:P*.15;_.fillStyle=K;let Et=4*Be;I.includes("pill")?Et=999:I.includes("rounded")||I.includes("glass")?Et=8*Be:I.includes("box")&&(Et=0),I.includes("glass")&&(_.fillStyle="rgba(255,255,255,0.1)",_.shadowColor="rgba(255,255,255,0.2)",_.shadowBlur=10),_.beginPath(),_.roundRect?_.roundRect(et-Qe,Ne-Le/2,wt+Qe*2,Le,Et):_.rect(et-Qe,Ne-Le/2,wt+Qe*2,Le),_.fill(),I.includes("glass")&&(_.strokeStyle="rgba(255,255,255,0.3)",_.lineWidth=1,_.stroke()),I.includes("fill")||I.includes("pill")||I.includes("box")||I.includes("rounded")?(_.fillStyle="#000000",st="#000000"):_.fillStyle=k}if(tt){if(I.includes("underline")){const Qe=Math.max(2,P*.08),Et=Ne+P*.6;_.fillStyle=k,_.fillRect(et,Et,wt,Qe),_.fillStyle=st}if((I.includes("glow")||I.includes("neon"))&&(I.includes("neon")?(_.fillStyle="#ffffff",_.shadowColor=k,_.shadowBlur=20):(_.shadowColor=k,_.shadowBlur=10)),I.includes("outline")&&(_.strokeStyle=k,_.lineWidth=2*Be,_.strokeText(Fe.text,et,Ne),_.fillStyle="transparent",I==="karaoke-outline"&&(st="transparent",_.fillStyle="transparent")),I.includes("shadow")&&(_.shadowColor="#000000",_.shadowOffsetX=3*Be,_.shadowOffsetY=3*Be,_.shadowBlur=0),I.includes("gradient")){const Qe=_.createLinearGradient(et,Ne-Le/2,et+wt,Ne+Le/2);Qe.addColorStop(0,k),Qe.addColorStop(1,K),_.fillStyle=Qe,st=Qe}}let rt=Ne,Pe=et,_t=0,yt=1,ot=1,Ot=1,fn=0;if(tt){const Qe=Se-Fe.startTime;if(I.includes("bounce")||I==="karaoke-bounce")rt-=10*Be;else if(I.includes("wave"))rt+=Math.sin(Se*5+zt)*8*Be;else if(I.includes("pulse")){const Ht=1+Math.sin(Se*6)*.1;yt=Ht,ot=Ht}else if(I.includes("shake"))Pe+=(Math.random()-.5)*6*Be,rt+=(Math.random()-.5)*6*Be;else if(I.includes("wobble"))_t=Math.sin(Se*6)*.1;else if(I.includes("rotate")&&!I.includes("in"))_t=Math.sin(Se*3)*.1;else if(I.includes("spin"))_t=Se*3%(Math.PI*2);else if(I.includes("jello"))yt=1+Math.sin(Se*8)*.15,ot=1-Math.sin(Se*8)*.15;else if(I.includes("heartbeat")){const Ht=Se*2%1;(Ht<.15||Ht>.3&&Ht<.45)&&(yt=1.15,ot=1.15)}else if(I.includes("flash"))Ot=.5+Math.sin(Se*10)*.5;else if(I.includes("tada")){const Ht=Se*2%1;Ht<.1?(_t=-.05,yt=.9):Ht<.2&&(_t=.05,yt=1.1)}else I.includes("swing")?_t=Math.sin(Se*4)*.15:I.includes("glitch")&&Math.sin(Se*15)>.8&&(Pe+=(Math.random()-.5)*10,rt+=(Math.random()-.5)*10);const Et=.3;if(Qe<Et){const Ht=Qe/Et,jt=(Bn=>1-Math.pow(1-Bn,3))(Ht);if(I.includes("fade"))Ot=Ht;else if(I.includes("slide"))rt+=(1-jt)*30*Be,Ot=jt;else if(I.includes("drop"))rt-=(1-jt)*50*Be,Ot=jt;else if(I.includes("zoom")||I.includes("scale")){const Bn=.5+.5*jt;yt*=Bn,ot*=Bn}else if(I.includes("elastic")){const Bn=Ht===0?0:Ht===1?1:Math.pow(2,-10*Ht)*Math.sin((Ht*10-.75)*(2*Math.PI)/3)+1;yt*=Bn,ot*=Bn}else if(I.includes("flip"))ot*=jt;else if(I.includes("rotate-in"))_t+=(1-jt)*-1,Ot=jt;else if(I.includes("roll"))Pe-=(1-jt)*50*Be,_t-=(1-jt)*Math.PI,Ot=jt;else if(I.includes("lightspeed"))Pe+=(1-jt)*100*Be,Ot=jt;else if(I.includes("blur"))fn=(1-jt)*10,Ot=jt;else if(I.includes("shatter")){const Bn=1+(1-jt)*2;yt*=Bn,ot*=Bn,fn=(1-jt)*10,Ot=jt}else I.includes("spiral")&&(yt*=jt,ot*=jt,_t+=(1-jt)*Math.PI*2)}else I.includes("scale")&&(yt*=1.3,ot*=1.3)}if(_.save(),Ot<1&&(_.globalAlpha*=Ot),fn>0&&(_.filter=`blur(${fn}px)`),_t!==0||yt!==1||ot!==1){const Qe=Pe+wt/2,Et=rt;_.translate(Qe,Et),_.rotate(_t),_.scale(yt,ot),_.translate(-Qe,-Et)}if(tt){if(I.includes("gradient")||I.includes("chrome")||I.includes("gold")){const Qe=_.createLinearGradient(Pe,rt-Le/2,Pe,rt+Le/2);I.includes("gold")?(Qe.addColorStop(0,"#d4af37"),Qe.addColorStop(1,"#C5A028")):I.includes("chrome")?(Qe.addColorStop(0,"#ebebeb"),Qe.addColorStop(.5,"#616161"),Qe.addColorStop(.51,"#ebebeb"),Qe.addColorStop(1,"#ebebeb")):(Qe.addColorStop(0,k),Qe.addColorStop(1,K)),_.fillStyle=Qe}if(I.includes("shadow")&&(_.save(),_.fillStyle="#000000",_.fillText(Fe.text,Pe+2*Be,rt+2*Be),_.restore()),I.includes("3d")){const Qe=_.fillStyle;_.fillStyle="rgba(0,0,0,0.5)";for(let Et=1;Et<=3;Et++)_.fillText(Fe.text,Pe+Et*Be,rt+Et*Be);_.fillStyle=Qe}if(I.includes("neon-multi"))_.shadowBlur=10,_.shadowColor="#fff",_.fillText(Fe.text,Pe,rt),_.shadowBlur=20,_.shadowColor="#ff00de",_.fillText(Fe.text,Pe,rt),_.shadowBlur=35,_.shadowColor="#00ffff",_.fillText(Fe.text,Pe,rt);else if(I.includes("retro")||I.includes("vhs"))_.fillStyle="#ff0000",_.globalCompositeOperation="screen",_.fillText(Fe.text,Pe-2,rt),_.fillStyle="#00ff00",_.fillText(Fe.text,Pe,rt),_.fillStyle="#0000ff",_.fillText(Fe.text,Pe+2,rt);else if(I.includes("fire"))_.shadowBlur=5,_.shadowColor="#ff0000",_.fillStyle="#ff4500",_.fillText(Fe.text,Pe,rt),_.shadowBlur=2,_.shadowColor="#ffff00",_.fillStyle="#ffcc00",_.fillText(Fe.text,Pe+1*Be,rt-1*Be);else if(I.includes("typewriter")){const Qe=Se-Fe.startTime,Et=Fe.endTime-Fe.startTime,Ht=Math.min(1,Math.max(0,Qe/Et)),ri=Math.floor(Fe.text.length*Ht),jt=Fe.text.substring(0,ri);I.includes("outline")?(_.strokeStyle=k,_.strokeText(jt,Pe,rt)):_.fillText(jt,Pe,rt)}else!I.includes("neon-multi")&&!I.includes("retro")&&!I.includes("vhs")&&!I.includes("fire")&&(I.includes("outline")?(_.strokeStyle=k,_.lineWidth=2*Be,_.strokeText(Fe.text,Pe,rt)):_.fillText(Fe.text,Pe,rt))}else _.fillText(Fe.text,Pe,rt);const Vn=Me?.textDecoration||"none";if(Vn!=="none"){if(_.lineWidth=Math.max(2,3*Be),_.strokeStyle=st,_.beginPath(),Vn.includes("underline")&&!I.includes("underline")){const Qe=rt+P*.45;_.moveTo(Pe,Qe),_.lineTo(Pe+wt,Qe)}Vn.includes("line-through")&&(_.moveTo(Pe,rt),_.lineTo(Pe+wt,rt)),_.stroke()}_.restore(),_.restore();let kn=!Fe.text.endsWith(" ");const ai=/[-]$/,ro=/^[-]/;ai.test(Fe.text.trim())&&(kn=!1);const Un=ae[zt+1];Un&&ro.test(Un.text.trim())&&(kn=!1),et+=wt+(kn?C:0)}),_.restore()})},Ue=(_,L,ne,ie,ke,Le,Se,Me)=>{const pe=ce(_,L,ke),P=ie-(pe.length-1)*Le/2;pe.forEach((Ae,je)=>{const Be=P+je*Le;if(Se==="glass"){const Ye=_.measureText(Ae).width;_.save(),_.fillStyle="rgba(255, 255, 255, 0.1)",_.beginPath(),_.roundRect?_.roundRect(ne-(_.textAlign==="center"?Ye/2:_.textAlign==="right"?Ye:0)-10,Be-Le/2,Ye+20,Le,8):_.rect(ne-(_.textAlign==="center"?Ye/2:_.textAlign==="right"?Ye:0)-10,Be-Le/2,Ye+20,Le),_.fill(),_.strokeStyle="rgba(255, 255, 255, 0.2)",_.stroke(),_.restore()}Ie(_,Ae,ne,Be,Se,Me)})},xe='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',it='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',we='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Xe='"Metal Mania", cursive',ze='"Fredoka One", cursive',pt='"Shadows Into Light", cursive',St='"Dancing Script", cursive',Mt='"Orbitron", sans-serif',be='"UnifrakturMaguntia", cursive';let B=xe;m==="classic"?B=it:m==="monospace"?B=we:m==="metal"?B=Xe:m==="kids"?B=ze:m==="sad"?B=pt:m==="romantic"?B=St:m==="tech"?B=Mt:m==="gothic"?B=be:m==="custom"&&(B=N?.fontFamily||xe),x&&(B="CustomFont, sans-serif"),N&&N.fontFamily!=="sans-serif"&&(B=N.fontFamily);const ve=t<=o,ue=Math.min(t,o)/1080;if(N&&(N.backgroundSource==="color"||N.backgroundSource==="smart-gradient")?n.fillStyle=N.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),N?.backgroundSource==="gradient"&&N.backgroundGradient)n.fillStyle=N.backgroundGradient,n.fillRect(0,0,t,o);else if(N?.backgroundSource==="smart-gradient"){const _=N.backgroundColor||"#312e81",L=J(_),ne=n.createLinearGradient(0,0,t,o);ne.addColorStop(0,_),ne.addColorStop(.5,`rgb(${Math.floor(L.r*.6)}, ${Math.floor(L.g*.6)}, ${Math.floor(L.b*.6)})`),ne.addColorStop(1,"#000000"),n.fillStyle=ne,n.fillRect(0,0,t,o)}else if(N?.backgroundSource==="image"&&N.backgroundImage){const _=y.get("__custom_bg__");_&&se(_)}if(N&&N.backgroundBlurStrength>0?n.filter=`blur(${N.backgroundBlurStrength}px)`:T&&(n.filter="blur(12px)"),!N||N.backgroundSource==="timeline"||N.backgroundSource==="custom"){const _=N?N.backgroundSource==="timeline":!0;let L=!1;if(_){const ne=h.filter(ie=>ie.type!=="audio"&&s>=ie.startTime&&s<ie.endTime);ne.sort((ie,ke)=>(ie.layer||0)-(ke.layer||0)),ne.length>0&&(ne.forEach(ie=>{const ke=ie.layer||0;if(N&&N.layerVisibility?.visual?.[ke]===!1)return;const Le=ie.type==="video"?v.get(ie.id):null,Se=ie.type!=="video"?y.get(ie.id):null;Le?se(Le):Se&&se(Se)}),L=!0)}if(!L&&d.coverUrl&&h.length===0){const ne=d.backgroundType==="video"?v.get("background"):null,ie=y.get("cover");ne?se(ne):ie&&se(ie)}}if((N&&N.backgroundBlurStrength>0||T)&&(n.filter="none"),["just_video","none"].includes(m)||(n.fillStyle=N&&(N.backgroundSource==="color"||N.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),m==="just_video"||m==="none")return;const mt=r.findIndex((_,L)=>{if(_.endTime!==void 0)return s>=_.time&&s<_.endTime;const ne=r[L+1];return s>=_.time&&(!ne||s<ne.time)});let gt=mt;if(gt===-1&&r.length>0)if(s<r[0].time)gt=0;else{const _=r.findIndex(L=>L.time>s);gt=_!==-1?_:r.length-1}const z=N?.introMode==="manual"&&N.introText?N.introText:`${d.title}
${d.artist}`;let M=mt===-1&&s<5&&(N?.showIntro??!0)&&(N?.introMode!=="manual"||F)&&(r.length===0||s<r[0].time),ee=(ve?50:60)*ue,Te=(ve?25:30)*ue,Je=(ve?80:100)*ue;if(m==="large"?(ee=(ve?90:120)*ue,Je=(ve?110:140)*ue):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(ee=(ve?80:110)*ue,Je=(ve?110:140)*ue):["sad","romantic","gothic"].includes(m)?(ee=(ve?60:75)*ue,Je=(ve?90:120)*ue):["slideshow","subtitle"].includes(m)&&(ee=(ve?30:40)*ue),ee*=S,Te*=S,Je*=S,(N?.showLyrics??!0)&&(mt!==-1||M||N?.lyricDisplayMode==="all"&&r.length>0)){let _=o/2;N?.contentPosition==="top"?_=o*.25:N?.contentPosition==="bottom"&&(_=o*.75);let L=0;const ne=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(ne||m==="slideshow"||m==="subtitle"){const Me=M?{text:z}:r[mt]||r[gt];if(Me){n.font=`900 ${ee}px ${B}`;const pe=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?Me.text.toUpperCase():Me.text,P=ce(n,pe,t*.9);P.length>1&&(L=(P.length-1)*(ee*1.2)/2)}}let ie=ne?-1:-2,ke=ne?1:2;N?.lyricDisplayMode==="active-only"?(ie=0,ke=0):N?.lyricDisplayMode==="next-only"?(ie=0,ke=1):N?.lyricDisplayMode==="previous-next"?(ie=-1,ke=1):N?.lyricDisplayMode==="all"&&(ie=-r.length,ke=r.length);const Le=new Map,Se=new Map;{const Me=Math.max((ve?30:40)*ue,Je-ee);for(let pe=ie;pe<=ke;pe++){let P=0,Ae=!1;if(M&&pe===0){const je=ee*1.2,Be=Te*1.2,G=z.split(`
`).length>1;P=je+(G?Be:0),Ae=!0}else{const je=gt+pe;if(je>=0&&je<r.length){const Be=r[je];Ae=je===mt;const Ye=Ae?ee:Te;let G=Ae?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",le=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||Ae?(N?.fontWeight&&(G=N.fontWeight),N?.fontStyle&&(le=N.fontStyle)):(G="400",le="normal")),n.font=`${le} ${G} ${Ye}px ${B}`;let de=Be.text,Ee=N?.textCase||"none";Ee==="none"&&Ae&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Ee="upper"),Ee==="upper"?de=de.toUpperCase():Ee==="lower"?de=de.toLowerCase():Ee==="title"?de=de.replace(/\w\S*/g,he=>he.charAt(0).toUpperCase()+he.substr(1).toLowerCase()):Ee==="sentence"?de=de.charAt(0).toUpperCase()+de.slice(1).toLowerCase():Ee==="invert"&&(de=de.replace(/\w\S*/g,he=>he.charAt(0).toLowerCase()+he.slice(1).toUpperCase())),P=ce(n,de,t*.9).length*(Ye*1.2)}}Se.set(pe,P)}Le.set(0,_);for(let pe=1;pe<=ke;pe++){const P=Le.get(pe-1)??_,Ae=Se.get(pe-1)??0,je=Se.get(pe)??0;Le.set(pe,P+Ae/2+Me+je/2)}for(let pe=-1;pe>=ie;pe--){const P=Le.get(pe+1)??_,Ae=Se.get(pe+1)??0,je=Se.get(pe)??0;Le.set(pe,P-Ae/2-Me-je/2)}}for(let Me=ie;Me<=ke;Me++){let pe=null,P=!1;if(M)Me===0&&(pe={time:0,text:z},P=!0);else{const Ae=gt+Me;Ae>=0&&Ae<r.length&&(pe=r[Ae],P=Ae===mt)}if(pe){N?.lyricDisplayMode,n.textAlign=N?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const Ae=N?.fontColor||"#ffffff";let je=Ae;if(!P){const _e=J(Ae);je=`rgba(${_e.r}, ${_e.g}, ${_e.b}, 0.5)`}let Be=P?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",Ye=["classic","romantic"].includes(m)?"italic":"normal",G="none";(m==="custom"||m==="default")&&((N?.lyricStyleTarget||"active-only")==="all"||P?(N?.fontWeight&&(Be=N.fontWeight),N?.fontStyle&&(Ye=N.fontStyle),N?.textDecoration&&(G=N.textDecoration)):(Be="400",Ye="normal",G="none")),n.font=`${Ye} ${Be} ${P?ee:Te}px ${B}`,n.fillStyle=je;const le=N?.transitionEffect||"none";let de=1,Ee=0,ye=0,he=1,E=1,C=0,V=0;if(P&&le!=="none"){const _e=s-pe.time,tt=pe.endTime?pe.endTime-s:.5,rt=.5,Pe=_e<rt?_e/rt:pe.endTime&&tt<rt?tt/rt:1;if(Pe<1){de=Math.min(1,Pe*2);const _t=ot=>1+2.70158*Math.pow(ot-1,3)+1.70158*Math.pow(ot-1,2),yt=ot=>{const Ot=2*Math.PI/3;return ot===0?0:ot===1?1:Math.pow(2,-10*ot)*Math.sin((ot*10-.75)*Ot)+1};if(le==="slide")Ee=(1-Pe)*(_e<rt?30:-30);else if(le==="zoom"){const ot=.5+Pe*.5;he=ot,E=ot}else if(le==="blur")C=(1-Pe)*10;else if(le==="float")Ee=(1-Pe)*(_e<rt?50:-50);else if(le==="drop")Ee=(1-_t(Pe))*-200,de=Pe;else if(le==="flip")E=Pe;else if(le==="rotate-in")V=(1-Pe)*-Math.PI/2,de=Pe;else if(le==="spiral")he=Pe,E=Pe,V=(1-Pe)*Math.PI*2,de=Pe;else if(le==="shatter"){const ot=3-2*Pe;he=ot,E=ot,C=(1-Pe)*20,de=Pe}else if(le==="lightspeed")ye=(1-Pe)*300,de=Pe;else if(le==="roll")ye=(1-Pe)*-300,V=(1-Pe)*-Math.PI,de=Pe;else if(le==="elastic"){const ot=yt(Pe);he=ot,E=ot,de=Pe}}}n.save(),n.globalAlpha=de,C>0&&(n.filter=`blur(${C}px)`);const k=P&&N?.textAnimation||"none";let K=pe.text,I=N?.textCase||"none";I==="none"&&P&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(I="upper"),I==="upper"?K=K.toUpperCase():I==="lower"?K=K.toLowerCase():I==="title"?K=K.replace(/\w\S*/g,_e=>_e.charAt(0).toUpperCase()+_e.substr(1).toLowerCase()):I==="sentence"?K=K.charAt(0).toUpperCase()+K.slice(1).toLowerCase():I==="invert"&&(K=K.replace(/\w\S*/g,_e=>_e.charAt(0).toLowerCase()+_e.slice(1).toUpperCase()));let X=0,ae=0,te=1,Ne=1,Oe=0;if(P&&k!=="none")if(k==="bounce")ae=Math.sin(s*6)*15*ue;else if(k==="pulse"){const _e=1+Math.sin(s*4)*.08;te=_e,Ne=_e}else if(k==="wave")ae=Math.sin(s*4)*20*ue,Oe=Math.sin(s*4)*.05;else if(k==="glitch")Math.sin(s*10)>.8&&(X=(Math.random()-.5)*15*ue,ae=(Math.random()-.5)*15*ue);else if(k==="shake")X=(Math.random()-.5)*5*ue,ae=(Math.random()-.5)*5*ue;else if(k==="typewriter"){const tt=Math.floor((s-pe.time)*30);K=K.substring(0,Math.max(0,tt))}else if(k==="wobble"){Oe=Math.sin(s*5)*.05;const _e=1+Math.sin(s*3)*.05;te=_e,Ne=_e}else if(k==="breathe"){const _e=1+Math.sin(s*2)*.03;te=_e,Ne=_e}else if(k==="rotate")Oe=Math.sin(s*2)*.05;else if(k==="sway")Oe=Math.sin(s*2)*.08;else if(k==="flicker")n.globalAlpha=de*(.8+Math.random()*.2);else if(k==="jello")te=1+Math.sin(s*6)*.1,Ne=1-Math.sin(s*6)*.1;else if(k==="spin")Oe=s%2*Math.PI;else if(k==="heartbeat"){const _e=s*1.5%1;(_e<.1||_e>.3&&_e<.4)&&(te=1.1,Ne=1.1)}else if(k==="tada"){const _e=s*1.5%1;_e<.1?(te=.9,Ne=.9,Oe=-.05):_e<.2?(te=1.1,Ne=1.1,Oe=.05):(te=1,Ne=1,Oe=0)}else k==="swing"&&(Oe=Math.sin(s*3)*.1);let et=0;Le.has(Me)?et=Le.get(Me)+(Me===0?Ee:0):(et=m==="subtitle"&&Me===0&&N?.lyricDisplayMode!=="all"?o-80*ue:_+Me*Je+(Me===0?Ee:0),m!=="custom"&&(Me<0?et-=L:Me>0&&(et+=L))),et+=ae;let Fe=t/2;n.textAlign==="left"?Fe=60*ue:n.textAlign==="right"&&(Fe=t-60*ue),Fe+=ye+X;const zt=he*te,wt=E*Ne,Ft=V+Oe;(zt!==1||wt!==1||Ft!==0)&&(n.translate(Fe,et),n.rotate(Ft),n.scale(zt,wt),n.translate(-Fe,-et));const en=P?N?.textEffect||"preset":"none";if(M&&Me===0&&N?.introMode!=="manual"){const _e=K.split(`
`),tt=_e[0],rt=_e.slice(1).join(`
`),Pe=ee*1.2,_t=Te*1.2,yt=20*ue;let ot=et;rt&&(ot=et-_t/2-yt/2);const Ot=et+Pe/2+yt/2;if(n.font=`${Ye} ${Be} ${ee}px ${B}`,Ue(n,tt,Fe,ot,t*.9,Pe,en,G),rt){const fn=m==="custom"&&N?.fontWeight?N.fontWeight:"400";n.font=`${Ye} ${fn} ${Te}px ${B}`,Ue(n,rt,Fe,Ot,t*.9,_t,en,G)}}else{const _e=P?ee:Te;N&&N.highlightEffect&&N.highlightEffect,P&&pe?Re(n,pe,Fe,et,t*.9,_e*1.2,s,N,B,_e,Be,Ye,ue):Ue(n,K,Fe,et,t*.9,_e*1.2,en,G)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const _=N?N.showTitle||N.showArtist:!0,L=N?N.showCover:!0;if(_||L)if(m==="custom"||m==="default"){const ne=N?.infoPosition||"top-left",ie=N?.infoStyle||"classic",ke=ie==="box",Le=ke?16*ue:12*ue,Se=40*ue*(N?.infoMarginScale??1);let Me="left",pe="top";ne.includes("left")?Me="left":ne.includes("right")?Me="right":Me="center",ne.includes("top")?pe="top":pe="bottom";const P=N?.infoSizeScale??1,Ae=(ie==="minimal"||ie==="modern"?0:100*ue)*P,je=L&&Ae>0&&d.coverUrl!==null,Be=je?d.backgroundType==="video"?v.get("background"):y.get("cover"):null,Ye=(ie==="minimal"?20:ie==="modern"||ie==="modern_art"?40:28)*ue,G=(ie==="minimal"?14:ie==="modern"||ie==="modern_art"?24:18)*ue,le=Ye*P,de=G*P,Ee=`bold ${le}px ${B}`,ye=`${de}px ${B}`,he=20*ue,E=ke?24*ue:0,C=N?.fontColor||"#ffffff",V=ie==="modern"||ie==="modern_art"?C:N?.fontColor||"#d4d4d8";n.font=Ee;const k=n.measureText(d.title),K=N?.showTitle?k.width:0;n.font=ye;const I=n.measureText(d.artist),X=N?.showArtist?I.width:0;let ae=0,te=0;if(Me==="center"){ae=Math.max(je&&Be?Ae:0,K,X)+E*2;let _e=0;je&&Be&&(_e+=Ae),(N?.showTitle??!0)&&(_e+=(je&&Be?he:0)+le),(N?.showArtist??!0)&&(_e+=(je&&Be||(N?.showTitle??!0)?5*ue:0)+de),te=_e+E*2}else{const st=Math.max(K,X);ae=(je&&Be?Ae+he:0)+st+E*2;const tt=(N?.showTitle?le:0)+(N?.showArtist?de+5*ue:0);te=Math.max(tt,je&&Be?Ae:0)+E*2}let Ne=0,Oe=0;Me==="left"?Ne=Se:Me==="right"?Ne=t-Se:Ne=t/2,pe==="top"?Oe=Se:Oe=o-Se;let et=0,Fe=0;Me==="left"?et=Ne:Me==="right"?et=Ne-ae:et=Ne-ae/2,pe==="top"?Fe=Oe:Fe=Oe-te,ke&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(et,Fe,ae,te,Le),n.fill(),n.restore());const zt=et+E,wt=Fe+E,Ft=ae-E*2,en=te-E*2;if(Me==="center"){let st=wt;const _e=zt+Ft/2;if(n.textAlign="center",pe==="top"){if(je&&Be){n.save(),n.beginPath();const tt=_e-Ae/2;ie==="circle_art"?n.arc(_e,st+Ae/2,Ae/2,0,Math.PI*2):n.roundRect(tt,st,Ae,Ae,Le/2),n.clip(),n.drawImage(Be,tt,st,Ae,Ae),n.restore(),st+=Ae+he}(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ee,n.textBaseline="top",n.fillText(d.title,_e,st),st+=le+5*ue),(N?.showArtist??!0)&&(n.fillStyle=V,n.font=ye,n.textBaseline="top",n.fillText(d.artist,_e,st))}else{if(je&&Be){n.save(),n.beginPath();const tt=_e-Ae/2;ie==="circle_art"?n.arc(_e,st+Ae/2,Ae/2,0,Math.PI*2):n.roundRect(tt,st,Ae,Ae,Le/2),n.clip(),n.drawImage(Be,tt,st,Ae,Ae),n.restore(),st+=Ae+he}(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ee,n.textBaseline="top",n.fillText(d.title,_e,st),st+=le+5*ue),(N?.showArtist??!0)&&(n.fillStyle=V,n.font=ye,n.textBaseline="top",n.fillText(d.artist,_e,st))}}else{const st=Me==="right",_e=wt+en/2;let tt=zt;if(st&&(tt=zt+Ft),je&&Be){const _t=_e-Ae/2,yt=st?tt-Ae:tt;n.save(),n.beginPath(),ie==="circle_art"?n.arc(yt+Ae/2,_t+Ae/2,Ae/2,0,Math.PI*2):n.roundRect(yt,_t,Ae,Ae,Le/2),n.clip(),n.drawImage(Be,yt,_t,Ae,Ae),n.restore(),st?tt-=Ae+he:tt+=Ae+he}const rt=(N?.showTitle?le:0)+(N?.showArtist?de+5*ue:0);let Pe=_e-rt/2;n.textAlign=st?"right":"left",n.textBaseline="top",(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ee,n.fillText(d.title,tt,Pe),Pe+=le+5*ue),(N?.showArtist??!0)&&(n.fillStyle=V,n.font=ye,n.fillText(d.artist,tt,Pe))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(_){n.textAlign="center",n.textBaseline="middle";let ne=80*ue;["testing","testing_up","one_line","one_line_up"].includes(m)&&(ne=120*ue),(N?.showTitle??!0)&&(n.font=`bold ${20*ue}px ${B}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?d.title.toUpperCase():d.title,t/2,o-ne-30*ue)),(N?.showArtist??!0)&&(n.font=`${16*ue}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,t/2,o-ne))}}else{const ne=40*ue*(N?.infoMarginScale??1),ie=t===o,ke=(ve?ie?110:150:100)*ue,Le=d.coverUrl?y.get("cover"):null,Se=12*ue;if(ve){const Me=ne*(ie?1.5:3),pe=t/2,P=pe-ke/2,Ae=Me;if(L&&(n.save(),n.beginPath(),n.roundRect(P,Ae,ke,ke,Se),n.clip(),Le?n.drawImage(Le,P,Ae,ke,ke):(n.fillStyle="#27272a",n.fillRect(P,Ae,ke,ke)),n.restore()),_){n.textAlign="center",n.textBaseline="top";const je=Ae+(L?ke+25*ue:0);(N?.showTitle??!0)&&(n.font=`bold ${(ie?26:36)*ue}px ${B}`,n.fillStyle="#ffffff",n.fillText(d.title,pe,je)),(N?.showArtist??!0)&&(n.font=`${(ie?18:24)*ue}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,pe,je+(N?.showTitle??!0?(ie?30:40)*ue:0)))}}else{const Me=ne,pe=ne;if(L&&(n.save(),n.beginPath(),n.roundRect(Me,pe,ke,ke,Se),n.clip(),Le?n.drawImage(Le,Me,pe,ke,ke):(n.fillStyle="#27272a",n.fillRect(Me,pe,ke,ke)),n.restore()),_){n.textAlign="left",n.textBaseline="top";const P=Me+(L?ke+25*ue:0),Ae=28*ue,je=pe+ke/2-Ae;(N?.showTitle??!0)&&(n.font=`bold ${Ae}px ${B}`,n.fillStyle="#ffffff",n.fillText(d.title,P,je)),(N?.showArtist??!0)&&(n.font=`${18*ue}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,P,je+(N?.showTitle??!0?Ae+5*ue:0)))}}}}if(N?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const _=N.channelInfoPosition||"bottom-right",L=N.channelInfoStyle||"classic",ne=N.channelInfoSizeScale??1,ie=N.channelInfoMarginScale??1,ke=y.get("__channel_info__"),Le=N.channelInfoText;if(!(!ke&&!Le)){if(!(L==="logo"&&!ke)){if(!(L==="minimal"&&!Le)){n.save();const Se=40*ue*ie,Me=80*ue*ne,pe=L==="modern"||L==="logo"?Me*1.2:Me,P=20*ue*ne,Ae=y.get("__channel_info_text_svg__"),je=!!Ae;let Be=0,Ye=P;if(je&&Ae){Ye=P*1.5;const K=Ae.width/Ae.height;Be=Ye*K}else n.font=`bold ${P}px sans-serif`,Le&&L!=="logo"&&(Be=n.measureText(Le).width);const G=12*ue*ne,le=12*ue*ne,de=8*ue*ne;let Ee=0,ye=0;const he=!!ke&&L!=="minimal",E=!!Le&&L!=="logo";L==="modern"?(Ee=Math.max(he?pe:0,E?Be+le*2:0),ye=(he?pe:0)+(he&&E?G:0)+(E?Ye+de*2:0)):L==="box"?(Ee=(he?pe:0)+(he&&E?G:0)+(E?Be:0)+le*2,ye=Math.max(he?pe:0,E?Ye:0)+de*2):L==="minimal"?(Ee=E?Be+le*2:0,ye=E?Ye+de*2:0):L==="logo"?(Ee=pe,ye=pe):(Ee=(he?pe:0)+(he&&E?G:0)+(E?Be+le*2:0),ye=Math.max(he?pe:0,E?Ye+de*2:0));let C=0,V=0;_.includes("left")?C=Se:_.includes("right")?C=t-Se-Ee:_.includes("center")&&(C=(t-Ee)/2),_.includes("top")?V=Se:_.includes("bottom")&&(V=o-Se-ye),L==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(C,V,Ee,ye,12*ue*ne),n.fill()):n.fillRect(C,V,Ee,ye),n.shadowColor="transparent",n.shadowBlur=0);const k=(K,I,X,ae,te)=>{if(L!=="box"&&L!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(K,I,X,ae,8*ue*ne),n.fill()):n.fillRect(K,I,X,ae)),je&&Ae){const Ne=K+(X-Be)/2,Oe=I+(ae-Ye)/2;n.drawImage(Ae,Ne,Oe,Be,Ye)}else{n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const Ne=K+(X-Be)/2,Oe=I+(ae-Ye)/2+Ye*.1;n.fillText(te,Ne,Oe),n.shadowColor="transparent"}};if(L==="modern"){let K=V;if(he){const I=C+(Ee-pe)/2;n.drawImage(ke,I,K,pe,pe),K+=pe+G}if(E){const I=Be+le*2,X=Ye+de*2,ae=C+(Ee-I)/2;k(ae,K,I,X,Le)}}else{const K=_.includes("right");let I=C+(L==="box"?le:0);const X=V+ye/2;if(K&&(L==="classic"||L==="circle")){if(E){const ae=Be+le*2,te=Ye+de*2;k(I,X-te/2,ae,te,Le),I+=ae+G}he&&(L==="circle"?(n.save(),n.beginPath(),n.arc(I+pe/2,X,pe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(ke,I,X-pe/2,pe,pe),n.restore()):n.drawImage(ke,I,X-pe/2,pe,pe))}else if(he&&(L==="circle"?(n.save(),n.beginPath(),n.arc(I+pe/2,X,pe/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(ke,I,X-pe/2,pe,pe),n.restore()):n.drawImage(ke,I,X-pe/2,pe,pe),I+=pe+G),E){const ae=Be+(L==="box"?0:le*2),te=Ye+(L==="box"?0:de*2);L==="box"?je&&Ae?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(Ae,I,X-Ye/2,Be,Ye),n.shadowColor="transparent"):(n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(Le,I,X+Ye*.1),n.shadowColor="transparent"):k(I,X-te/2,ae,te,Le)}}n.restore()}}}}};function PA(){const{toast:n,confirm:t}=xr(),o=W.useRef(null),s=W.useRef(null),r=W.useRef(null),d=W.useRef(null),h=W.useRef(null),y=W.useRef(!1),v=W.useRef(()=>{});W.useEffect(()=>{MA()},[]);const[m,x]=W.useState(null),[S,T]=W.useState(0),[A,N]=W.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[O,F]=W.useState([]),[J,se]=W.useState([]),[ce,Ie]=W.useState(0),[Re,Ue]=W.useState(!1),[xe,it]=W.useState("off"),[we,Xe]=W.useState(0),[ze,pt]=W.useState(0),[St,Mt]=W.useState(1),[be,B]=W.useState(!1),[ve,ue]=W.useState(Rn.PLAYER),[mt,gt]=W.useState(!1),[z,M]=W.useState(!1),[ee,Te]=W.useState(!1),[Je,_]=W.useState(!1),[L,ne]=W.useState(!1),[ie,ke]=W.useState(0),[Le,Se]=W.useState("16:9"),[Me,pe]=W.useState("1080p"),[P,Ae]=W.useState("default"),[je,Be]=W.useState(null),[Ye,G]=W.useState("auto"),[le,de]=W.useState(30),[Ee,ye]=W.useState("med"),[he,E]=W.useState(!1),[C,V]=W.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"shadow",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke"}),k=W.useRef(C);W.useEffect(()=>{k.current=C},[C]);const K=C.backgroundBlurStrength>0,I=W.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(oe=>MediaRecorder.isTypeSupported(oe.value)),[]),[X,ae]=W.useState([]),[te,Ne]=W.useState(-1),[Oe,et]=W.useState(!1),Fe=()=>{const D=Me==="1080p";switch(Le){case"9:16":return D?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return D?{w:1080,h:1440}:{w:720,h:960};case"4:3":return D?{w:1440,h:1080}:{w:960,h:720};case"1:1":return D?{w:1080,h:1080}:{w:720,h:720};case"1:2":return D?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return D?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return D?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return D?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return D?{w:1080,h:1350}:{w:720,h:900};case"20:9":return D?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return D?{w:2560,h:1080}:{w:1720,h:720};default:return D?{w:1920,h:1080}:{w:1280,h:720}}},{w:zt,h:wt}=Fe(),[Ft,en]=W.useState(!0),[st,_e]=W.useState(!0),[tt,rt]=W.useState(!1),Pe=W.useMemo(()=>J.filter(oe=>oe.type!=="audio"&&we>=oe.startTime&&we<oe.endTime).sort((oe,Ve)=>(oe.layer||0)-(Ve.layer||0)),[J,we]),_t=J.filter(D=>D.type==="audio"&&we>=D.startTime&&we<D.endTime),yt=W.useMemo(()=>ce===0?O:O.map(D=>({...D,time:D.time+ce,endTime:D.endTime!==void 0?D.endTime+ce:void 0})),[O,ce]),ot=yt.findIndex((D,oe)=>{if(D.endTime!==void 0)return we>=D.time&&we<D.endTime;const Ve=yt[oe+1];return we>=D.time&&(!Ve||we<Ve.time)}),Ot=D=>{const oe=D.target.files?.[0];if(oe){const Ve=URL.createObjectURL(oe);x(Ve);const ge={title:oe.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};N(ge),Dc(()=>import("./jsmediatags.min-DJjCvWcp.js").then(Ce=>Ce.j),[]).then(Ce=>{Ce.read(oe,{onSuccess:nt=>{const{title:dt,artist:ft,picture:at}=nt.tags;let bn=null;if(at){const{data:In,format:Ge}=at;let Xt="";for(let Qt=0;Qt<In.length;Qt++)Xt+=String.fromCharCode(In[Qt]);bn=`data:${Ge};base64,${window.btoa(Xt)}`}N({title:dt||ge.title,artist:ft||ge.artist,coverUrl:bn||null})},onError:nt=>{console.log("Error reading tags:",nt)}})}),Ie(0),Ue(!1),Xe(0),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}D.target.value=""},fn=D=>{const oe=D.target.files?.[0];if(oe){const Ve=URL.createObjectURL(oe),ge=oe.type.startsWith("video/");ge&&_(!1),N(Ce=>({...Ce,coverUrl:Ve,backgroundType:ge?"video":"image"}))}D.target.value=""},Vn=async D=>{const oe=D.target.files?.[0];if(oe)try{const Ve=await oe.text(),ge=oe.name.split(".").pop()?.toLowerCase();let Ce=[];ge==="lrc"?Ce=Bl(Ve):ge==="srt"?Ce=Fl(Ve):(ge==="ttml"||ge==="xml")&&(Ce=Os(Ve)),Ce.some(nt=>nt.words&&nt.words.length>0)&&(V(nt=>({...nt,highlightEffect:"karaoke"})),n.success(`${ge?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),F(Ce)}catch(Ve){console.error("Failed to parse lyrics:",Ve),n.error("Failed to parse lyric file.")}D.target.value=""};W.useEffect(()=>{if(te!==-1&&X[te]){const D=X[te];F(D.parsedLyrics||[])}},[X,te]);const zi=async D=>{const oe=D.target.files?.[0];if(oe){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Ve=URL.createObjectURL(oe),ge=oe.name.replace(/\.[^/.]+$/,""),Ce="CustomFont",nt=new FontFace(Ce,`url(${Ve})`);await nt.load(),document.fonts.add(nt),Be(ge),V(dt=>({...dt,fontFamily:Ce})),n.success(`Loaded font: ${ge}`)}catch(Ve){console.error("Failed to load font:",Ve),n.error("Failed to load font file.")}}D.target.value=""},kn=W.useCallback(async(D,oe=!0,Ve)=>{const ge=Ve||X;if(D<0||D>=ge.length)return;const Ce=ge[D],nt=URL.createObjectURL(Ce.audioFile);if(x(nt),N({title:Ce.metadata.title,artist:Ce.metadata.artist,coverUrl:Ce.metadata.coverUrl||null,backgroundType:"image"}),F([]),Ce.parsedLyrics&&Ce.parsedLyrics.length>0)F(Ce.parsedLyrics);else if(Ce.lyricFile)try{const dt=await Ce.lyricFile.text(),ft=Ce.lyricFile.name.split(".").pop()?.toLowerCase();let at=[];ft==="lrc"?at=Bl(dt):ft==="srt"?at=Fl(dt):(ft==="ttml"||ft==="xml")&&(at=Os(dt)),F(at)}catch(dt){console.error("Failed to load lyrics",dt)}Ie(0),Ne(D),r.current&&(r.current.scrollTop=0),oe?setTimeout(()=>{o.current&&(o.current.play().catch(dt=>console.log("Autoplay failed",dt)),Ue(!0))},100):(Ue(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[X]),ai=W.useCallback(()=>{if(X.length===0)return;const D=(te+1)%X.length;kn(D)},[X,te,kn]),ro=W.useCallback(()=>{if(X.length===0)return;const D=(te-1+X.length)%X.length;kn(D)},[X,te,kn]),Un=()=>{o.current&&(Re?(o.current.pause(),Ue(!1)):!m&&X.length>0?kn(0):(o.current.play().catch(console.error),Ue(!0)))},Qe=W.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,Ue(!1),Xe(0))},[]),Et=()=>{it(D=>D==="off"?"one":D==="one"?"all":D==="all"?"all_repeat":"off")},Ht=()=>{document.fullscreenElement?(document.exitFullscreen(),gt(!1)):(s.current?.requestFullscreen(),gt(!0))},ri=()=>{o.current&&(Xe(o.current.currentTime),L&&ke(o.current.currentTime/ze*100))},jt=()=>{o.current&&pt(o.current.duration)},Bn=D=>{const oe=parseFloat(D.target.value);o.current&&(o.current.currentTime=oe,Xe(oe))},qs=D=>{const oe=parseFloat(D.target.value);Mt(oe),o.current&&(o.current.volume=oe),B(oe===0)},Gi=async()=>{if(!o.current||!d.current)return;const D=C.renderMode==="playlist"&&X.length>0,oe=[];if(D)for(const qe of X){let De=[];if(qe.parsedLyrics&&qe.parsedLyrics.length>0)De=qe.parsedLyrics;else if(qe.lyricFile)try{const He=await qe.lyricFile.text(),nn=qe.lyricFile.name.split(".").pop()?.toLowerCase();nn==="lrc"?De=Bl(He):nn==="srt"?De=Fl(He):(nn==="ttml"||nn==="xml")&&(De=Os(He))}catch(He){console.error("Failed to parse lyrics for playlist item",He)}const ut=URL.createObjectURL(qe.audioFile);oe.push({audioSrc:ut,lyrics:De,metadata:qe.metadata,isFileSource:!0})}else{if(!m)return;oe.push({audioSrc:m,lyrics:yt,metadata:A,isFileSource:!1})}if(oe.length===0)return;const Ve=D?`Start rendering ALL ${oe.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${Le} (${Me}) video? This will play the song from start to finish.`;if(!await t(`${Ve} Please do not switch tabs during rendering.`,"Start Rendering?")){D&&oe.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc));return}E(!1),ne(!0),ke(0),y.current=!1,Qe(),it("off"),ui.current&&clearTimeout(ui.current),M(!1),Te(!0),Kn.current&&Kn.current.pause();const Ce=o.current,nt=P,dt=new Map,ft=new Map,at=new Map,bn=[],In=(qe,De)=>new Promise(ut=>{const He=new Image;He.crossOrigin="anonymous",He.onload=()=>{dt.set(qe,He),ut()},He.onerror=()=>ut(),He.src=De}),Ge=(qe,De)=>new Promise(ut=>{const He=document.createElement("video");He.crossOrigin="anonymous",He.muted=!0,He.playsInline=!0,He.preload="auto";let nn=!1;const Dt=()=>{nn||(nn=!0,ft.set(qe,He),ut())};He.oncanplay=()=>{nn||(He.currentTime=.001)},He.onseeked=()=>Dt(),He.onerror=()=>{console.warn("Failed to load video:",De),Dt()},setTimeout(()=>Dt(),5e3),He.src=De,He.load()}),Xt=(qe,De)=>new Promise(ut=>{const He=document.createElement("audio");He.crossOrigin="anonymous",He.onloadedmetadata=()=>{at.set(qe,He),ut()},He.onerror=()=>ut(),He.src=De});if(J.forEach(qe=>{qe.type==="video"?bn.push(Ge(qe.id,qe.url)):qe.type==="audio"||qe.type==="audio"?bn.push(Xt(qe.id,qe.url)):bn.push(In(qe.id,qe.url))}),C.showChannelInfo&&(C.channelInfoImage&&bn.push(In("__channel_info__",C.channelInfoImage)),C.channelInfoText)){const qe=C.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(qe))try{const De=document.createElement("div");De.style.position="absolute",De.style.visibility="hidden",De.style.whiteSpace="nowrap",De.style.fontFamily="sans-serif",De.style.fontWeight="bold",De.style.fontSize="100px",De.style.display="inline-flex",De.style.alignItems="center",De.style.gap="0.25em",De.innerHTML=qe;const ut=De.getElementsByTagName("svg");for(let wn=0;wn<ut.length;wn++)ut[wn].style.width="auto",ut[wn].style.height="1.5em";document.body.appendChild(De);const{width:He,height:nn}=De.getBoundingClientRect();document.body.removeChild(De);const Dt=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${He}" height="${nn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${qe}
                  </div>
                </foreignObject>
              </svg>
            `,wi=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(Dt).replace(/%([0-9A-F]{2})/g,function(ll,Oi){return String.fromCharCode(parseInt(Oi,16))}))}`;bn.push(In("__channel_info_text_svg__",wi))}catch(De){console.warn("Failed to process SVG channel info",De)}}if(C.backgroundSource==="image"&&C.backgroundImage&&bn.push(In("__custom_bg__",C.backgroundImage)),await Promise.all(bn),y.current){ne(!1),D&&oe.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc));return}const Qt=d.current,Ci=Qt.getContext("2d"),q=Qt.captureStream(le);let ht=null;try{if(Ce.captureStream)ht=Ce.captureStream();else if(Ce.mozCaptureStream)ht=Ce.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),ne(!1);return}const Ut=new(window.AudioContext||window.webkitAudioContext),tn=Ut.createMediaStreamDestination();Ut.createMediaElementSource(Ce).connect(tn),ft.forEach(qe=>{qe.muted=!0,Ut.createMediaElementSource(qe).connect(tn)}),at.forEach(qe=>{qe.muted=!0,Ut.createMediaElementSource(qe).connect(tn)}),tn.stream.getAudioTracks().length>0?q.addTrack(tn.stream.getAudioTracks()[0]):ht&&q.addTrack(ht.getAudioTracks()[0]);const Qn=(()=>{if(Ye!=="auto"&&MediaRecorder.isTypeSupported(Ye))return Ye;const qe=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const De of qe)if(MediaRecorder.isTypeSupported(De))return De;return"video/webm"})(),Zn=Me==="1080p"?8e6:4e6,Fi=le>30?1.5:1,uo=Ee==="high"?2:Ee==="low"?.5:1,co=Zn*Fi*uo,un=new MediaRecorder(q,{mimeType:Qn,videoBitsPerSecond:co});h.current=un;const Fn=[];un.ondataavailable=qe=>{qe.data.size>0&&Fn.push(qe.data)},un.onstop=()=>{if(y.current)console.log("Render aborted");else{const qe=new Blob(Fn,{type:Qn}),De=ut=>{const He=URL.createObjectURL(ut),nn=document.createElement("a");nn.href=He;const Dt=Qn.includes("mp4")?"mp4":"webm",Zt=D?`Playlist_${oe.length}_Songs_${Le.replace(":","-")}.${Dt}`:`${oe[0].metadata.title||"video"}_${Le.replace(":","-")}.${Dt}`;nn.download=Zt,document.body.appendChild(nn),nn.click(),document.body.removeChild(nn),URL.revokeObjectURL(He)};Qn.includes("webm"),De(qe)}Ut.close(),ne(!1),T(qe=>qe+1),D&&oe.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc))};let Wn=0,Z=[],mn=A,vt=0,Ln=0;const Ei=1e3/le,ci=qe=>{if(y.current)return;(un.state==="recording"||un.state==="paused")&&requestAnimationFrame(ci);const De=qe-Ln;if(De<Ei)return;Ln=qe-De%Ei;const ut=Ce.currentTime;vt>0&&ke(ut/vt*100),ft.forEach((He,nn)=>{if(nn==="background"){const Dt=He.duration||1,Zt=ut%Dt;let wi=Math.abs(He.currentTime-Zt);(Zt<He.currentTime&&He.currentTime-Zt>Dt/2||wi>.5)&&(He.currentTime=Zt),He.paused&&He.play().catch(()=>{})}else{const Dt=J.find(Zt=>Zt.id===nn);if(Dt)if(ut>=Dt.startTime&&ut<Dt.endTime){const Zt=Dt.playbackRate||1,wi=(ut-Dt.startTime)*Zt+(Dt.mediaStartOffset||0);Math.abs(He.playbackRate-Zt)>.01&&(He.playbackRate=Zt),Math.abs(He.currentTime-wi)>.5&&(He.currentTime=wi);const wn=Dt.isMuted!==!1;He.muted!==wn&&(He.muted=wn),He.paused&&He.play().catch(()=>{})}else He.paused||He.pause(),He.muted||(He.muted=!0)}}),at.forEach((He,nn)=>{const Dt=J.find(Zt=>Zt.id===nn);if(Dt){const Zt=Dt.layer||0;if(C.layerVisibility?.audio?.[Zt]!==!1&&ut>=Dt.startTime&&ut<Dt.endTime){const wn=Dt.playbackRate||1,ll=(ut-Dt.startTime)*wn+(Dt.mediaStartOffset||0);Math.abs(He.playbackRate-wn)>.01&&(He.playbackRate=wn),Math.abs(He.currentTime-ll)>.5&&(He.currentTime=ll);const Oi=Dt.isMuted===!0;He.muted!==Oi&&(He.muted=Oi),He.paused&&He.play().catch(()=>{})}else He.paused||He.pause(),He.muted||(He.muted=!0)}}),Ci&&LA(Ci,Qt.width,Qt.height,ut,Z,mn,J,dt,ft,nt,je,C.fontSizeScale,C.backgroundBlurStrength>0,vt,C,C.renderMode==="current"||Wn===oe.length-1,C.renderMode==="current"||Wn===0)},Ho=async()=>{if(y.current){un.stop();return}if(Wn>=oe.length){await new Promise(De=>setTimeout(De,500)),un.stop();return}const qe=oe[Wn];un.state==="recording"&&un.pause(),Z=qe.lyrics,mn=qe.metadata,vt=0,qe.metadata.coverUrl&&(qe.metadata.backgroundType==="video"?await Ge("background",qe.metadata.coverUrl):await In("cover",qe.metadata.coverUrl)),Ce.pause(),Ce.src=qe.audioSrc,Ce.load(),await new Promise(De=>{const ut=()=>{Ce.removeEventListener("canplay",ut),De()};Ce.addEventListener("canplay",ut),Ce.readyState>=3&&ut()}),vt=Ce.duration,un.state==="inactive"?(Ut.state==="suspended"&&await Ut.resume(),un.start(),requestAnimationFrame(ci)):un.state==="paused"&&un.resume(),await Ce.play(),await new Promise(De=>{const ut=()=>{Ce.removeEventListener("ended",ut),De()};Ce.addEventListener("ended",ut)}),Wn++,Ho()};await Ho()};W.useEffect(()=>{v.current=Gi});const Go=W.useCallback(()=>{y.current=!0,h.current&&h.current.state==="recording"?h.current.stop():ne(!1),Qe()},[Qe]),Ti=W.useCallback(()=>{if(r.current){const D=o.current?.currentTime||0;if(ot===-1&&D<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(ot!==-1){const oe=r.current.querySelector('[data-lyric-active="true"]');if(oe){const Ve=r.current;if(oe.offsetHeight===0)return;const ge=oe.offsetTop,Ce=oe.offsetHeight,nt=Ve.clientHeight;let dt=.5;C.contentPosition==="top"&&(dt=.25),C.contentPosition==="bottom"&&(dt=.75);const ft=ge-nt*dt+Ce/2;Ve.scrollTo({top:ft,behavior:"smooth"})}}}},[ot,P,C.contentPosition]);W.useEffect(()=>{Ti()},[Ti]),W.useEffect(()=>{const D=setTimeout(()=>{Ti()},550);return()=>clearTimeout(D)},[z,ee,Ft,st,ve,Oe,Ti]);const ui=W.useRef(null),Hi=W.useCallback(()=>{if(M(!1),ui.current&&clearTimeout(ui.current),!L){const D=window.setTimeout(()=>{M(!0)},3e3);ui.current=D}},[L]),Vi=()=>{Hi()};W.useEffect(()=>{const D=oe=>{const Ve=oe.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Ve)||Hi(),!(oe.target instanceof HTMLInputElement||oe.target instanceof HTMLTextAreaElement)){if(L){Ve==="escape"&&Go();return}switch(oe.key.toLowerCase()){case" ":case"k":oe.preventDefault(),Un(),n.success(Re?"Paused":"Playing",{id:"play-pause"});break;case"s":oe.preventDefault(),Qe(),n.success("Stopped",{id:"stop"});break;case"n":oe.preventDefault(),ai(),n.success("Next Song",{id:"next-song"});break;case"o":oe.preventDefault();const Ce=!tt;rt(Ce),Ce&&Te(!0),n.success(`Minimal Mode: ${Ce?"On":"Off"}`,{id:"minimal-mode"});break;case"b":oe.preventDefault(),ro(),n.success("Previous Song",{id:"prev-song"});break;case"r":oe.preventDefault(),Et();const nt=xe==="off"?"one":xe==="one"?"all":xe==="all"?"all_repeat":"off",dt={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${dt[nt]}`,{id:"repeat"});break;case"l":oe.preventDefault();const ft=!Oe;et(ft),ft&&ue(Rn.PLAYER);break;case"h":oe.preventDefault();const at=!ee;Te(at),n.success(at?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"g":oe.preventDefault();const bn=ed.flatMap(De=>De.options.map(ut=>ut.value)),In=k.current.lyricDisplayMode,Xt=(bn.indexOf(In)+1)%bn.length,Qt=bn[Xt];V(De=>({...De,lyricDisplayMode:Qt})),n.success(`Lyric Mode: ${Qt.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":oe.preventDefault();const Ci=Kg,q=k.current.textCase,Ut=(Ci.indexOf(q)+1)%Ci.length,tn=Ci[Ut];V(De=>({...De,textCase:tn})),n.success(`Text Case: ${tn}`,{id:"text-case"});break;case"f":Ht();break;case"i":en(De=>!De);break;case"p":_e(De=>!De);break;case"d":oe.preventDefault(),E(De=>!De);break;case"t":Oe?(et(!1),ue(Rn.EDITOR)):ue(De=>De===Rn.PLAYER?Rn.EDITOR:Rn.PLAYER);break;case"m":oe.preventDefault();const Xn=!be;B(Xn),n.success(Xn?"Muted":"Unmuted",{id:"mute"});break;case"x":oe.preventDefault();const Sn=k.current.highlightEffect==="none";V(De=>({...De,highlightEffect:De.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${Sn?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":oe.preventDefault();const Qn=Zc.flatMap(De=>De.options.map(ut=>ut.value)),Zn=k.current.highlightEffect||"none",Fi=Qn.indexOf(Zn),co=((Fi===-1?0:Fi)+1)%Qn.length,un=Qn[co],Fn=Wc(un);V(De=>{const ut={...De,highlightEffect:un};return ut.useCustomHighlightColors=!1,Fn&&(ut.highlightColor=Fn.color,ut.highlightBackground=Fn.bg),ut}),n.success(`Effect: ${un.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":oe.preventDefault();const Z=(zc.indexOf(P)+1)%zc.length,mn=zc[Z];Ae(mn);const vt=vr[mn];if(vt){const De={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};V(ut=>({...ut,...De,...vt}))}let Ln=mn;for(const De of pd){const ut=De.options.find(He=>He.value===mn);if(ut){Ln=ut.label;break}}n.success(`Preset: ${Ln}`,{id:"preset"});break;case"arrowleft":if(oe.preventDefault(),o.current){const De=Math.max(0,o.current.currentTime-5);o.current.currentTime=De,Xe(De)}break;case"arrowright":if(oe.preventDefault(),o.current){const De=Math.min(ze,o.current.currentTime+5);o.current.currentTime=De,Xe(De)}break;case"arrowup":oe.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":oe.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":oe.preventDefault();const Ei=k.current.fontSizeScale,ci=Math.min(Ei+.1,3);V(De=>({...De,fontSizeScale:ci})),n.success(`Font Size: ${(ci*100).toFixed(0)}%`,{id:"font-size"});break;case"-":oe.preventDefault();const Ho=k.current.fontSizeScale,qe=Math.max(Ho-.1,.1);V(De=>({...De,fontSizeScale:qe})),n.success(`Font Size: ${(qe*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(oe.ctrlKey||oe.metaKey)&&oe.shiftKey&&(oe.preventDefault(),v.current());break}}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[Re,xe,ve,L,Hi,Go,Oe,ai,ro,n,tt,P,ee,be]),W.useEffect(()=>{let D,oe=0;const Ve=1e3/30,ge=Ce=>{if(o.current&&!o.current.paused&&Re){D=requestAnimationFrame(ge);const nt=Ce-oe;nt>Ve&&(oe=Ce-nt%Ve,Xe(o.current.currentTime))}};return Re&&!L&&(D=requestAnimationFrame(ge)),()=>{D&&cancelAnimationFrame(D)}},[Re,L]);const an=Ft&&(!z||ee)&&!L,Bi=st&&(!z||ee)&&!L&&!tt,ol=Pe.length>0?Pe[0]:null;ol?`${ol.url}`:A.coverUrl&&`${A.coverUrl}`;const Kn=W.useRef(null);return W.useEffect(()=>{if(Pe.forEach(D=>{const oe=D.layer||0;if(C.layerVisibility?.visual?.[oe]!==!1&&D.type==="video"){const Ve=document.getElementById(`video-preview-${D.id}`);if(Ve)if(L)Ve.paused||Ve.pause();else{const ge=D.playbackRate||1,Ce=(we-D.startTime)*ge+(D.mediaStartOffset||0);Math.abs(Ve.playbackRate-ge)>.01&&(Ve.playbackRate=ge),Math.abs(Ve.currentTime-Ce)>.2&&(Ve.currentTime=Ce);const nt=D.isMuted!==!1;Ve.muted!==nt&&(Ve.muted=nt);const dt=D.volume!==void 0?D.volume:1;Math.abs(Ve.volume-dt)>.01&&(Ve.volume=dt),Re&&Ve.paused?Ve.play().catch(()=>{}):!Re&&!Ve.paused&&Ve.pause()}}}),A.backgroundType==="video"&&Kn.current){const D=Kn.current;if(L)D.paused||D.pause();else{const oe=D.duration||1,Ve=we%oe;Math.abs(D.currentTime-Ve)>.1&&(D.currentTime=Ve),Re&&D.paused?D.play().catch(()=>{}):!Re&&!D.paused&&D.pause()}}_t.forEach(D=>{const oe=document.getElementById(`audio-preview-${D.id}`);if(oe){const Ve=D.playbackRate||1,ge=(we-D.startTime)*Ve+(D.mediaStartOffset||0);Math.abs(oe.playbackRate-Ve)>.01&&(oe.playbackRate=Ve),Math.abs(oe.currentTime-ge)>.2&&(oe.currentTime=ge);const Ce=D.isMuted===!0;oe.muted!==Ce&&(oe.muted=Ce);const nt=D.volume!==void 0?D.volume:1;Math.abs(oe.volume-nt)>.01&&(oe.volume=nt),Re&&oe.paused?oe.play().catch(()=>{}):!Re&&!oe.paused&&oe.pause()}})},[we,Re,Pe,A,_t,C.layerVisibility]),p.jsxs("div",{ref:s,onMouseMove:Vi,onTouchStart:Vi,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${z&&!ee?"cursor-none":""}`,children:[p.jsx("audio",{ref:o,src:m||void 0,loop:xe==="one",muted:be,onTimeUpdate:ri,onLoadedMetadata:jt,onEnded:()=>{if(L)return;const D=X.length>0;xe==="one"||(xe==="all_repeat"?D?ai():o.current?.play():xe==="all"&&D&&te<X.length-1?ai():Ue(!1))},crossOrigin:"anonymous"},S),_t.map(D=>p.jsx("audio",{id:`audio-preview-${D.id}`,src:D.url,className:"hidden",playsInline:!0},D.id)),p.jsx("canvas",{ref:d,width:zt,height:wt,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),p.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[C.backgroundSource==="color"&&p.jsx("div",{className:"absolute inset-0",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&p.jsx("div",{className:"absolute inset-0",style:{background:C.backgroundGradient}}),C.backgroundSource==="image"&&C.backgroundImage&&p.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${C.backgroundImage})`}}),C.backgroundSource==="smart-gradient"&&p.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const D=C.backgroundColor||"#312e81",oe=parseInt(D.slice(1,3),16),Ve=parseInt(D.slice(3,5),16),ge=parseInt(D.slice(5,7),16),Ce=`${oe},${Ve},${ge}`,nt=`${Math.floor(oe*.6)},${Math.floor(Ve*.6)},${Math.floor(ge*.6)}`;return`linear-gradient(to bottom right, rgb(${Ce}), rgb(${nt}) 50%, #000000)`})()}}),(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&A.coverUrl&&J.length===0&&(A.backgroundType==="video"?p.jsx("video",{ref:Kn,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${Je?"opacity-60":"opacity-0"}`,muted:!0,loop:!L,playsInline:!0,preload:"auto",onLoadedData:()=>_(!0)}):p.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${C.backgroundSource==="custom"||Pe.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),C.backgroundSource==="color"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:C.backgroundGradient}}),C.backgroundSource==="smart-gradient"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const D=C.backgroundColor||"#312e81",oe=parseInt(D.slice(1,3),16),Ve=parseInt(D.slice(3,5),16),ge=parseInt(D.slice(5,7),16),Ce=`${oe},${Ve},${ge}`,nt=`${Math.floor(oe*.6)},${Math.floor(Ve*.6)},${Math.floor(ge*.6)}`;return`linear-gradient(to bottom right, rgb(${Ce}), rgb(${nt}) 50%, #000000)`})()}}),!A.coverUrl&&Pe.length===0&&(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&J.length===0&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),p.jsx("div",{className:`absolute inset-0 pointer-events-none ${C.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:C.backgroundSource==="timeline"&&Pe.map(D=>{const oe=D.layer||0;return C.layerVisibility?.visual?.[oe]===!1?null:p.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:D.type==="video"?p.jsx("video",{id:`video-preview-${D.id}`,src:D.url,className:"w-full h-full object-cover",muted:D.isMuted!==!1,playsInline:!0}):p.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${D.url})`}})},D.id)})}),p.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:C.backgroundBlurStrength>0?`blur(${C.backgroundBlurStrength}px)`:K?"blur(12px)":"none",backgroundColor:C.backgroundBlurStrength>0||K?"rgba(0,0,0,0.4)":void 0}})]}),p.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[C.showChannelInfo&&tt&&p.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${C.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${C.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${C.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":C.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":C.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${C.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.channelInfoSizeScale??1})`,transformOrigin:C.channelInfoPosition?.includes("top")?C.channelInfoPosition?.includes("center")?"top center":C.channelInfoPosition?.includes("left")?"top left":"top right":C.channelInfoPosition?.includes("center")?"bottom center":C.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...C.channelInfoPosition?.includes("center")?C.channelInfoPosition?.includes("top")?{marginTop:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(C.channelInfoMarginScale??1)*1.5}rem`}},children:[C.channelInfoImage&&C.channelInfoStyle!=="minimal"&&p.jsx("img",{src:C.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${C.channelInfoStyle==="circle"?"rounded-full":""}`}),C.channelInfoText&&C.channelInfoStyle!=="logo"&&(()=>{const D=C.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(D)?p.jsx("div",{className:`text-white font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,dangerouslySetInnerHTML:{__html:D}}):p.jsx("p",{className:`text-white font-bold drop-shadow-md text-lg 
                    ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,children:C.channelInfoText})})()]}),tt&&p.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${an?"opacity-100":"opacity-0"}
              ${C.infoPosition==="top-left"?"top-0 left-0 items-start text-left":C.infoPosition==="top-right"?"top-0 right-0 items-end text-right":C.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":C.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${C.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.infoSizeScale??1})`,transformOrigin:C.infoPosition?.includes("top")?C.infoPosition?.includes("center")?"top center":C.infoPosition?.includes("right")?"top right":"top left":C.infoPosition?.includes("center")?"bottom center":C.infoPosition?.includes("right")?"bottom right":"bottom left",...C.infoPosition?.includes("center")?C.infoPosition?.includes("top")?{marginTop:`${(C.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.infoMarginScale??1)*1.5}rem`}:{margin:`${(C.infoMarginScale??1)*1.5}rem`}},children:p.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${C.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${C.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${C.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${C.infoStyle==="modern"||C.infoStyle==="minimal",""}
            `,children:[p.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!C.showCover||C.infoStyle==="minimal"||C.infoStyle==="modern"?"hidden":"block"}
                ${C.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?p.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:D=>D.currentTarget.play(),onMouseOut:D=>D.currentTarget.pause()}):p.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:p.jsx(Pl,{size:24})}),p.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[p.jsx(Lo,{size:20,className:"text-white"}),p.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:fn})]})]}),p.jsxs("div",{className:`flex flex-col justify-center ${C.infoPosition?.includes("right")?"items-end":C.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[p.jsx("h1",{className:`font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${C.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${C.infoStyle==="minimal"?"text-sm":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,children:A.title}),p.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${C.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:p.jsx("p",{className:`drop-shadow-md
                    ${C.infoStyle==="minimal"?"text-zinc-400 text-[10px]":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-white text-sm font-medium":"text-zinc-300 text-xs"}
                  `,children:A.artist})})]})]})}),p.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${an&&!tt?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:p.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[p.jsx("div",{className:"flex gap-4",children:p.jsxs("div",{className:"flex gap-4 items-center",children:[p.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${C.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?p.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:D=>D.currentTarget.play(),onMouseOut:D=>D.currentTarget.pause()}):p.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:p.jsx(Pl,{size:24})}),p.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[p.jsx(Lo,{size:20,className:"text-white"}),p.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:fn})]})]}),p.jsxs("div",{children:[p.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${C.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),p.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${C.showArtist?"opacity-100":"opacity-0"}`,children:p.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),p.jsxs("div",{className:`flex gap-2 flex-wrap ${tt?"hidden":""}`,children:[p.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:p.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),p.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),p.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),p.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),p.jsx("button",{onClick:()=>Te(!ee),className:`p-2 rounded-full transition-colors ${ee?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:ee?p.jsx(Gs,{size:20}):p.jsx(Ps,{size:20})}),p.jsx("button",{onClick:()=>rt(!tt),className:`p-2 rounded-full transition-colors ${tt?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:tt?p.jsx(Bs,{size:20}):p.jsx(s0,{size:20})}),p.jsx("button",{onClick:()=>{const D=!Oe;et(D),D&&ue(Rn.PLAYER)},className:`p-2 rounded-full transition-colors ${Oe?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:p.jsx(cr,{size:20})}),p.jsx("button",{onClick:()=>{Oe&&et(!1),ue(ve===Rn.PLAYER?Rn.EDITOR:Rn.PLAYER)},className:`p-2 rounded-full transition-colors ${ve===Rn.EDITOR&&!Oe?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:p.jsx(Zm,{size:20})}),p.jsx("button",{onMouseDown:D=>{D.stopPropagation(),E(!he)},className:`p-2 rounded-full transition-colors ${he?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:p.jsx(lr,{size:20})}),p.jsx("button",{onClick:Ht,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:mt?p.jsx(s0,{size:20}):p.jsx(Bs,{size:20})})]})]})}),p.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${C.contentPosition==="top"?"items-start pt-[10vh]":C.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:O.length>0?p.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${C.textAlign==="left"?"text-left":C.textAlign==="right"?"text-right":"text-center"} ${C.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:an||Bi?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[p.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${C.fontSizeScale}); line-height: calc(2rem * ${C.fontSizeScale}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${C.fontSizeScale}); line-height: calc(2.25rem * ${C.fontSizeScale}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${C.fontSizeScale}); line-height: calc(2.5rem * ${C.fontSizeScale}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${C.fontSizeScale}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${C.fontSizeScale}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${C.fontSizeScale}); }
              `}),p.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?ve===Rn.EDITOR||Oe?"h-[25vh]":!an&&!Bi?"h-[50vh]":"h-[40vh]":"h-0"}`}),yt.map((D,oe)=>{const Ve=oe===ot,ge=ve===Rn.EDITOR||Oe,Ce=["9:16","3:4","1:1","1:2","2:3"].includes(Le);if(C.lyricDisplayMode!=="all"){if(C.lyricDisplayMode==="active-only"&&oe!==ot)return p.jsx("p",{className:"hidden"},oe);if(C.lyricDisplayMode==="next-only"&&(oe<ot||oe>ot+1))return p.jsx("p",{className:"hidden"},oe);if(C.lyricDisplayMode==="previous-next"&&Math.abs(oe-ot)>1)return p.jsx("p",{className:"hidden"},oe)}else if(P==="none"||P==="just_video")return p.jsx("p",{className:"hidden"},oe);let nt="",dt="";const ft=C.transitionEffect;let at="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap ";if(Ve?ft==="slide"?at+="translate-y-0 opacity-100 ":ft==="zoom"?at+="scale-100 opacity-100 ":ft==="float"?at+="translate-y-0 opacity-100 ":ft==="blur"?at+="blur-0 opacity-100 ":ft==="fade"?at+="opacity-100 ":ft==="drop"?at+="trans-drop-enter opacity-100 ":ft==="lightspeed"?at+="trans-lightspeed-enter opacity-100 ":ft==="roll"?at+="trans-roll-enter opacity-100 ":ft==="elastic"?at+="trans-elastic-enter opacity-100 ":ft==="flip"?at+="trans-flip-enter opacity-100 ":ft==="rotate-in"?at+="trans-rotate-in-enter opacity-100 ":ft==="spiral"?at+="trans-spiral-enter opacity-100 ":ft==="shatter"?at+="trans-shatter-enter opacity-100 ":at+="opacity-100 ":(ft==="slide"?at+="translate-y-4 opacity-0 ":ft==="zoom"?at+="scale-75 opacity-0 ":ft==="float"?at+="translate-y-8 opacity-0 ":ft==="blur"?at+="blur-md opacity-0 ":ft==="fade"?at+="opacity-50 ":ft==="drop"?at+="trans-drop-exit opacity-0 ":ft==="roll"?at+="trans-roll-exit opacity-0 ":at+="opacity-0 ",ft==="none"&&(at=at.replace("opacity-0","opacity-50"))),P==="large"||P==="large_upper"){const Ut=Ce?ge?"text-4xl":"text-6xl":ge?"text-6xl":"text-8xl",tn=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${Ut} font-black text-white ${P==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,dt=`${tn} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(P==="big_center"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} font-black text-white uppercase tracking-tight text-center`,dt=`${ht} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="testing_up"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-white uppercase tracking-tight text-center`,dt=`${ht} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="testing"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-white tracking-tight text-center`,dt=`${ht} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="one_line_up"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-white uppercase tracking-tight text-center`,dt=`${ht} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="one_line"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-white tracking-tight text-center`,dt=`${ht} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(P==="metal"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,dt=`${ht} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(P==="kids"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,dt=`${ht} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(P==="sad"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-7xl",ht=Ce?ge?"text-lg":"text-xl":ge?"text-xl":"text-2xl";nt=`${q} text-zinc-200 tracking-wider text-center drop-shadow-md`,dt=`${ht} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(P==="romantic"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-7xl",ht=Ce?ge?"text-lg":"text-xl":ge?"text-xl":"text-2xl";nt=`${q} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,dt=`${ht} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(P==="tech"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,dt=`${ht} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(P==="gothic"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-7xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl";nt=`${q} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,dt=`${ht} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(P==="monospace"){const q=Ce?ge?"text-2xl":"text-3xl":ge?"text-3xl":"text-5xl",ht=Ce?ge?"text-lg":"text-xl":ge?"text-xl":"text-2xl";nt=`${q} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,dt=`${ht} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(P==="classic"){const q=Ce?ge?"text-2xl":"text-3xl":ge?"text-3xl":"text-6xl",ht=Ce?ge?"text-lg":"text-xl":ge?"text-xl":"text-2xl";nt=`${q} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,dt=`${ht} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(P==="slideshow"||P==="just_video")nt=`${Ce?ge?"text-2xl":"text-3xl":ge?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,dt="hidden";else if(P==="subtitle"){nt=`${Ce?ge?"text-2xl":"text-3xl":ge?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,dt="hidden";let ht="bottom-16";ge&&Bi?ht="bottom-[480px]":ge?ht="bottom-[320px]":Bi&&(ht="bottom-40"),at+=`fixed ${ht} left-1/2 -translate-x-1/2 w-full max-w-4xl px-4 `}else if(P==="custom"){const q=Ce?ge?"text-4xl":"text-5xl":ge?"text-6xl":"text-8xl",ht=Ce?ge?"text-xl":"text-2xl":ge?"text-2xl":"text-3xl",Ut=C.textAlign==="center"?"text-center":C.textAlign==="right"?"text-right":"text-left";nt=`${q} tracking-tight ${Ut}`,dt=`${ht} opacity-40 hover:opacity-100 ${Ut}`}else{const q=Ce?ge?"text-2xl":"text-3xl":ge?"text-3xl":"text-5xl",ht=Ce?ge?"text-lg":"text-xl":ge?"text-xl":"text-2xl";nt=`${q} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,dt=`${ht} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const In=(C.lyricStyleTarget||"active-only")==="all"||Ve;let Ge={color:C.fontColor,fontWeight:In?C.fontWeight:void 0,fontStyle:In?C.fontStyle:void 0,textDecoration:In?C.textDecoration:void 0,fontFamily:C.fontFamily==="CustomFont"?"CustomFont, sans-serif":C.fontFamily};if((P==="custom"||P==="default")&&Ve&&C.textEffect!=="none"){const q=C.textEffect;q==="glow"?Ge.textShadow=`0 0 10px ${C.fontColor}, 0 0 20px ${C.fontColor}`:q==="neon"?Ge.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${C.fontColor}, 0 0 40px ${C.fontColor}, 0 0 80px ${C.fontColor}`:q==="neon-multi"?Ge.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":q==="shadow"?Ge.textShadow="3px 3px 6px rgba(0,0,0,0.7)":q==="outline"?Ge.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":q==="3d"?Ge.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":q==="emboss"?(Ge.color="#ebebeb",Ge.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):q==="gold"?(Ge.background="linear-gradient(to bottom, #d4af37, #C5A028)",Ge.WebkitBackgroundClip="text",Ge.color="transparent"):q==="chrome"?(Ge.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Ge.WebkitBackgroundClip="text",Ge.color="transparent"):q==="fire"?(Ge.color="#fff",Ge.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):q==="frozen"?(Ge.color="#fff",Ge.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):q==="vhs"?Ge.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":q==="gradient"?(Ge.background=`linear-gradient(to right, ${C.fontColor}, #ffffff)`,Ge.WebkitBackgroundClip="text",Ge.color="transparent"):q==="rainbow"?(Ge.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Ge.WebkitBackgroundClip="text",Ge.color="transparent"):q==="glass"?(Ge.backgroundColor="rgba(255, 255, 255, 0.1)",Ge.backdropFilter="blur(8px)",Ge.padding="0.5rem 1rem",Ge.borderRadius="0.75rem",Ge.border="1px solid rgba(255, 255, 255, 0.2)",Ge.display="inline-block"):q==="mirror"?(Ge.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Ge.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):q==="retro"?(Ge.fontFamily="'Press Start 2P', cursive",Ge.color="#ff00ff",Ge.textShadow="4px 4px 0px #00ffff"):q==="hologram"?(Ge.color="rgba(0, 255, 255, 0.7)",Ge.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",Ge.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",Ge.WebkitBackgroundClip="text"):q==="comic"&&(Ge.fontFamily="'Bangers', cursive",Ge.color="#ffcc00",Ge.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",Ge.letterSpacing="1px")}let Xt=D.text;const Qt=C.textCase;Qt==="upper"?Xt=Xt.toUpperCase():Qt==="lower"?Xt=Xt.toLowerCase():Qt==="title"?Xt=Xt.replace(/\w\S*/g,q=>q.charAt(0).toUpperCase()+q.substr(1).toLowerCase()):Qt==="sentence"?Xt=Xt.charAt(0).toUpperCase()+Xt.slice(1).toLowerCase():Qt==="invert"&&(Xt=Xt.replace(/\w\S*/g,q=>q.charAt(0).toLowerCase()+q.slice(1).toUpperCase())),Xt=Xt.replace(/\s*([-])\s*/g,"$1"),Ve&&C.textAnimation==="typewriter"&&(Xt=Xt.substring(0,Math.max(0,Math.floor((we-D.time)*35))));let Ci=Xt;if(Ve&&C.highlightEffect!=="none"){const q=C.highlightEffect,ht=D.words&&D.words.length>0;if((q==="karaoke"||q?.startsWith("karaoke-"))&&ht)Ci=D.words.filter(Ut=>Ut.text===`
`||Ut.text.trim().length>0).map((Ut,tn,Xn)=>{if(Ut.text===`
`)return p.jsx("br",{},tn);let Sn=Ut.text.trim();if(Qt==="upper")Sn=Sn.toUpperCase();else if(Qt==="lower")Sn=Sn.toLowerCase();else if(Qt==="title")Sn=Sn.replace(/\w\S*/g,vt=>vt.charAt(0).toUpperCase()+vt.substr(1).toLowerCase());else if(Qt==="sentence"){const vt=Sn.toLowerCase();Sn=tn===0?vt.charAt(0).toUpperCase()+vt.slice(1):vt}else Qt==="invert"&&(Sn=Sn.replace(/\w\S*/g,vt=>vt.charAt(0).toLowerCase()+vt.slice(1).toUpperCase()));const Qn=Ut.startTime+ce,Zn=Ut.endTime+ce,Fi=we>=Qn&&we<Zn,uo=we>=Zn,co=/[-]$/,un=/^[-]/;let Fn=!Sn.endsWith(" ");co.test(Sn.trim())&&(Fn=!1);const Wn=Xn[tn+1];Wn&&un.test(Wn.text.trim())&&(Fn=!1),Wn&&Wn.text===`
`&&(Fn=!1),tn===Xn.length-1&&(Fn=!1);let Z={display:"inline-block",transition:"all 0.1s ease"};if(C.textDecoration&&C.textDecoration!=="none"&&(Z.textDecoration=C.textDecoration),!Fi&&!uo)Z.opacity=.5,Z.transform="scale(1)";else if(uo)if(q==="karaoke-fill"){const vt=C.highlightBackground||"#fb923c";Z.backgroundColor=vt,Z.color="#000",Z.padding="2px 6px",Z.borderRadius="4px",Z.opacity=1}else P==="custom"&&(Z.color=C.fontColor),Z.opacity=1;if(Fi){const vt=C.highlightColor||"#fb923c",Ln=C.highlightBackground||"#fb923c";q==="karaoke"||q==="color"?(Z.color=vt,Z.textShadow=`0 0 10px ${vt}`):q==="karaoke-neon"?(Z.color="#fff",Z.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${vt}, 0 0 35px ${vt}`):q==="karaoke-scale"?(Z.color=vt,Z.transform="scale(1.3)"):q==="karaoke-underline"?(Z.color=vt,Z.textDecoration=(Z.textDecoration||"")+" underline",Z.textDecorationColor=vt,Z.textUnderlineOffset="4px"):q==="karaoke-bounce"?(Z.color=vt,Z.transform="translateY(-10px)"):q==="karaoke-fill"?(Z.backgroundColor=Ln,Z.color="#000",Z.padding="2px 6px",Z.borderRadius="4px"):q==="karaoke-outline"?(Z.color="transparent",Z.WebkitTextStroke=`2px ${vt}`):q==="karaoke-shadow"?(Z.color=vt,Z.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):q==="karaoke-gradient"?(Z.background=`linear-gradient(90deg, ${vt}, ${Ln})`,Z.WebkitBackgroundClip="text",Z.WebkitTextFillColor="transparent"):q==="karaoke-wave"?(Z.color=vt,Z.animation="bounce 0.3s ease infinite"):q==="karaoke-pill"?(Z.backgroundColor=Ln,Z.color="#000",Z.padding="4px 16px",Z.borderRadius="9999px"):q==="karaoke-box"?(Z.backgroundColor=Ln,Z.color="#000",Z.padding="4px 8px",Z.borderRadius="0"):q==="karaoke-rounded"?(Z.backgroundColor=Ln,Z.color="#000",Z.padding="4px 12px",Z.padding="4px 12px",Z.borderRadius="12px"):q==="karaoke-glass"?(Z.backgroundColor="rgba(255, 255, 255, 0.1)",Z.color="#fff",Z.padding="4px 12px",Z.borderRadius="8px",Z.backdropFilter="blur(4px)",Z.border="1px solid rgba(255, 255, 255, 0.3)",Z.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):q==="karaoke-neon-multi"?(Z.color="#fff",Z.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):q==="karaoke-soft-glow"?(Z.color=vt,Z.textShadow=`0 0 5px ${vt}, 0 0 15px ${vt}, 0 0 30px ${vt}`):q==="karaoke-3d"?Z.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":q==="karaoke-emboss"?(Z.color="#ebebeb",Z.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):q==="karaoke-chrome"?(Z.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Z.WebkitBackgroundClip="text",Z.color="transparent"):q==="karaoke-gold"?(Z.background="linear-gradient(to bottom, #d4af37, #C5A028)",Z.WebkitBackgroundClip="text",Z.color="transparent"):q==="karaoke-fire"?(Z.color="#fff",Z.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):q==="karaoke-frozen"?(Z.color="#fff",Z.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):q==="karaoke-rainbow"?(Z.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Z.WebkitBackgroundClip="text",Z.color="transparent"):q==="karaoke-mirror"?(Z.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Z.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):q==="karaoke-vhs"?Z.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":q==="karaoke-retro"?(Z.fontFamily="'Press Start 2P', cursive",Z.color="#ff00ff",Z.textShadow="4px 4px 0px #00ffff"):q==="karaoke-cyberpunk"?(Z.color="#fcee0a",Z.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8"):q==="karaoke-hologram"?(Z.color="rgba(0, 255, 255, 0.7)",Z.textShadow="0 0 5px rgba(0,255,255,0.5)"):q==="karaoke-comic"?(Z.fontFamily="'Bangers', cursive",Z.color="#ffcc00",Z.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):q==="karaoke-glitch-text"?Z.animation="anim-glitch 0.4s infinite linear":q==="karaoke-pulse"?Z.animation="anim-pulse 1s infinite ease-in-out":q==="karaoke-breathe"?Z.animation="anim-breathe 2s infinite ease-in-out":q==="karaoke-float"?Z.animation="anim-float 2s infinite ease-in-out":q==="karaoke-sway"?Z.animation="anim-sway 2s infinite ease-in-out":q==="karaoke-flicker"?Z.animation="anim-flicker 2s infinite linear":q==="karaoke-shake"?Z.animation="anim-shake 0.2s infinite linear":q==="karaoke-wobble"?Z.animation="anim-wobble 1s infinite ease-in-out":q==="karaoke-jello"?Z.animation="anim-jello 1s infinite":q==="karaoke-rubberband"?Z.animation="anim-rubberband 1s infinite":q==="karaoke-heartbeat"?Z.animation="anim-heartbeat 1.3s infinite ease-in-out":q==="karaoke-flash"?Z.animation="anim-flash 1s infinite":q==="karaoke-tada"?Z.animation="anim-tada 1s infinite":q==="karaoke-swing"?Z.animation="anim-swing 2s infinite":q==="karaoke-rotate"?Z.animation="anim-rotate 4s infinite linear":q==="karaoke-spin"?Z.animation="anim-rotate 1s infinite linear":q==="karaoke-glitch"?Z.animation="anim-glitch 0.3s infinite linear":q==="karaoke-typewriter"?(Z.animation="typewriter-reveal 0.5s steps(10, end) forwards",Z.whiteSpace="nowrap",Z.overflow="hidden",Z.display="inline-block",Z.verticalAlign="bottom"):q==="karaoke-fade"?Z.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":q==="karaoke-slide"?Z.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":q==="karaoke-drop"?Z.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":q==="karaoke-lightspeed"?Z.animation="trans-lightspeed-in 0.5s ease-out forwards":q==="karaoke-roll"?Z.animation="trans-roll-in 0.5s ease-out forwards":q==="karaoke-zoom"?Z.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":q==="karaoke-elastic"?Z.animation="trans-elastic-in 0.7s ease-out forwards":q==="karaoke-scale-rotate"?Z.animation="trans-scale-rotate-in 0.5s ease-out forwards":q==="karaoke-flip"?Z.animation="trans-flip-in 0.5s ease-out forwards":q==="karaoke-rotate-in"?Z.animation="trans-rotate-in 0.5s ease-out forwards":q==="karaoke-spiral"?Z.animation="trans-spiral-in 0.6s ease-out forwards":q==="karaoke-blur"?Z.animation="trans-blur-in 0.4s ease-out forwards":q==="karaoke-shatter"?Z.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes(q||"")&&(Z.color=vt,Z.textShadow=`0 0 10px ${vt}`,q?.includes("glow")&&(Z.textShadow=`0 0 5px ${vt}, 0 0 15px ${vt}, 0 0 30px ${vt}`))}const mn=p.jsx("span",{className:"inline-block",style:Z,children:Sn},tn);return Fn?p.jsxs(Xm.Fragment,{children:[mn," "]},tn):mn});else if(q==="karaoke"||q?.startsWith("karaoke-")){const Ut=C.highlightColor||"#fb923c",tn=C.highlightBackground||"#fb923c";Ge.color=Ut,q==="karaoke-neon"&&(Ge.textShadow=`0 0 10px ${Ut}, 0 0 20px ${Ut}`),q==="karaoke-scale"&&(Ge.transform=(Ge.transform||"")+" scale(1.1)"),q==="karaoke-underline"&&(Ge.textDecoration="underline"),q==="karaoke-bounce"&&(Ge.transform=(Ge.transform||"")+" translateY(-5px)"),q==="karaoke-fill"&&(Ge.backgroundColor=tn,Ge.color="#000",Ge.padding="4px 12px",Ge.borderRadius="6px"),q==="karaoke-outline"&&(Ge.color="transparent",Ge.WebkitTextStroke=`2px ${Ut}`),q==="karaoke-shadow"&&(Ge.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),q==="karaoke-gradient"&&(Ge.background=`linear-gradient(90deg, ${Ut}, ${tn})`,Ge.WebkitBackgroundClip="text",Ge.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes(q)&&(Ge.backgroundColor=tn,Ge.color="#000",Ge.padding="4px 16px",Ge.borderRadius=q==="karaoke-pill"?"9999px":q==="karaoke-rounded"?"12px":"0"),q?.includes("glow")&&(Ge.textShadow=`0 0 10px ${Ut}, 0 0 20px ${Ut}`)}else q==="scale"?Ge.color=C.highlightColor||"#fb923c":C.highlightEffect==="background"&&(Ge.backgroundColor=(C.highlightBackground||"#fb923c")+"4D",Ge.padding="0 10px",Ge.borderRadius="8px")}return p.jsx("p",{"data-lyric-active":Ve?"true":"false",className:`${at} ${Ve?nt:dt} ${Ve&&C.textAnimation!=="none"&&C.textAnimation!=="typewriter"?`text-anim-${C.textAnimation}`:""}`,style:Ge,onClick:()=>{Ve&&(navigator.clipboard.writeText(D.text),n.success("Lyric copied to clipboard",1500)),o.current&&!L&&(o.current.currentTime=D.time,Xe(D.time))},children:Ci},oe)}),p.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?ve===Rn.EDITOR||Oe?"h-[25vh]":!an&&!Bi?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):p.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!ol&&P!=="none"&&p.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[p.jsx(Pl,{size:64,className:"opacity-20"}),p.jsx("p",{children:"Load audio & lyrics to start"}),p.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),p.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Bi?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:p.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 group",children:[p.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Gl(we)}),p.jsxs("div",{className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all",children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full",style:{width:`${we/ze*100}%`}}),p.jsx("input",{type:"range",min:"0",max:ze||0,value:we,onChange:Bn,disabled:L,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait"})]}),p.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Gl(ze)}),p.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[p.jsx("button",{onClick:()=>B(!be),className:"text-zinc-400 hover:text-white",children:be||St===0?p.jsx(Ul,{size:16}):p.jsx(Do,{size:16})}),p.jsxs("div",{className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol",children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors",style:{width:`${be?0:St*100}%`}}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:be?0:St,onChange:qs,className:"absolute inset-0 opacity-0 cursor-pointer"})]})]})]}),p.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[p.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[p.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio",children:[p.jsx(Pl,{size:18}),p.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:Ot,disabled:L})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${O.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt)",children:[p.jsx(ur,{size:18}),p.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml",className:"hidden",onChange:Vn,disabled:L})]}),O.length>0&&p.jsx("button",{onClick:()=>F([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:L,children:p.jsx(xi,{size:14})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[p.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[ce>0?"+":"",ce.toFixed(1),"s"]}),p.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[p.jsx("button",{onClick:()=>Ie(D=>parseFloat((D+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:L,children:p.jsx(n0,{size:12})}),p.jsx("button",{onClick:()=>Ie(D=>parseFloat((D-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:L,children:p.jsx(rr,{size:12})})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${je?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:je?`Custom Font: ${je}`:"Load Custom Font (.ttf, .otf, .woff)",children:[p.jsx(Uo,{size:18}),p.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:zi,disabled:L})]}),je&&p.jsx("button",{onClick:()=>Be(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:L,children:p.jsx(xi,{size:14})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[p.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(C.fontSizeScale*100),"%"]}),p.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[p.jsx("button",{onClick:()=>V(D=>({...D,fontSizeScale:Math.min(D.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:L,children:p.jsx(n0,{size:12})}),p.jsx("button",{onClick:()=>V(D=>({...D,fontSizeScale:Math.max(D.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:L,children:p.jsx(rr,{size:12})})]})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:P,onChange:D=>{const oe=D.target.value;Ae(oe);const Ve=vr[oe];if(Ve){const ge={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};V(Ce=>({...Ce,...ge,...Ve}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:L,title:"Select Visual Preset",children:[p.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),p.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),p.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),p.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),p.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),p.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),p.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),p.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),p.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),p.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),p.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),p.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),p.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),p.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),p.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),p.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),p.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),p.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),p.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),p.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),p.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),p.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:Qe,title:"Stop (S)",disabled:L,children:p.jsx(Pc,{size:20,fill:"currentColor"})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:L||X.length===0,onClick:ro,title:"Previous Song",children:p.jsx(Mb,{size:24})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:L,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:p.jsx(vb,{size:20})}),p.jsx("button",{onClick:Un,disabled:L,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:Re?p.jsx(Wm,{size:28,fill:"currentColor"}):p.jsx(Uc,{size:28,fill:"currentColor",className:"ml-1"})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:L,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:p.jsx(Fx,{size:20})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:L||X.length===0,onClick:ai,title:"Next Song",children:p.jsx(kb,{size:24})}),p.jsxs("button",{className:`transition-colors disabled:opacity-50 ${xe!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:Et,title:`Repeat: ${xe==="off"?"Off":xe==="one"?"One":xe==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:L,children:[xe==="one"&&p.jsx(mb,{size:20}),xe==="all_repeat"&&p.jsx(a0,{size:20}),xe==="all"&&p.jsx(cr,{size:20}),xe==="off"&&p.jsx(a0,{size:20,className:"opacity-50"})]})]}),p.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>V(D=>({...D,backgroundBlurStrength:D.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${K?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${K?"On":"Off"}`,disabled:L,children:K?"BLUR":"SHARP"}),p.jsx("button",{onClick:()=>V(D=>({...D,highlightEffect:D.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${C.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:p.jsx(Uo,{size:20})}),p.jsx("button",{onClick:()=>pe(D=>D==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:L,children:Me}),p.jsx("button",{onClick:()=>Se(D=>D==="16:9"?"9:16":D==="9:16"?"3:4":D==="3:4"?"1:1":D==="1:1"?"1:2":D==="1:2"?"2:1":D==="2:1"?"2:3":D==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:L,children:Le})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:Ye,onChange:D=>G(D.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:L,title:"Select Video Codec",children:[p.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),I.map(D=>p.jsx("option",{value:D.value,className:"bg-zinc-900",children:D.label},D.value))]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:Ee,onChange:D=>ye(D.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:L,title:"Select Quality (Bitrate)",children:[p.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),p.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),p.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),p.jsx("button",{onClick:Gi,disabled:L||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Export as Video",children:p.jsx(Fs,{size:18})})]})]})]})})}),Oe?p.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:p.jsx(NA,{playlist:X,setPlaylist:ae,currentTrackIndex:te,setCurrentTrackIndex:Ne,onPlayTrack:kn,isPlaying:Re,onTogglePlay:Un,currentTime:we,onSeek:D=>{o.current&&!L&&(o.current.currentTime=D,Xe(D))},onClearPlaylist:()=>{Qe(),x(null),F([]),Ne(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:D=>{D===te?(Qe(),x(null),F([]),Ne(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):D<te&&Ne(oe=>oe-1),ae(oe=>{const Ve=[...oe];return Ve.splice(D,1),Ve})},onClose:()=>et(!1)})}):ve===Rn.EDITOR&&p.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:p.jsx(d1,{slides:J,setSlides:se,currentTime:we,duration:ze||60,lyrics:O,onSeek:D=>{o.current&&!L&&(o.current.currentTime=D,Xe(D))},onClose:()=>ue(Rn.PLAYER),renderConfig:C,setRenderConfig:V})})]}),L&&p.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[p.jsx("div",{className:"animate-bounce",children:p.jsx(Fs,{size:48,className:"text-purple-500"})}),p.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Rendering Video (",Le," ",Me,")"]}),p.jsxs("p",{className:"text-zinc-400 max-w-md",children:["Rendering in real-time using Canvas 2D engine.",p.jsx("br",{}),"The audio will play during capture.",p.jsx("br",{}),"Please keep this tab active for best performance."]}),p.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300 ease-linear",style:{width:`${ie}%`}})}),p.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(ie),"%"]}),p.jsxs("button",{onClick:Go,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[p.jsx(Pc,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),he&&p.jsx(UA,{config:C,setConfig:V,preset:P,setPreset:Ae,onClose:()=>E(!1),isPlaylistMode:Oe,hasPlaylist:X.length>0,onRender:Gi,customFontName:je,onFontUpload:zi,onClearCustomFont:()=>Be(null),resolution:Me,setResolution:pe,aspectRatio:Le,setAspectRatio:Se,renderCodec:Ye,setRenderCodec:G,supportedCodecs:I,renderQuality:Ee,setRenderQuality:ye,renderFps:le,setRenderFps:de})]})}const Xg=document.getElementById("root");if(!Xg)throw new Error("Could not find root element to mount to");const GA=ux.createRoot(Xg);GA.render(p.jsx(Xm.StrictMode,{children:p.jsx(a1,{children:p.jsx(PA,{})})}));export{HA as c,Km as g};
