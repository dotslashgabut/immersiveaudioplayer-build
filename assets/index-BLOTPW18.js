(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(r){if(r.ep)return;r.ep=!0;const d=o(r);fetch(r.href,d)}})();var OA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _c={exports:{}},Us={};var $0;function tx(){if($0)return Us;$0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,d){var h=null;if(d!==void 0&&(h=""+d),r.key!==void 0&&(h=""+r.key),"key"in r){d={};for(var y in r)y!=="key"&&(d[y]=r[y])}else d=r;return r=d.ref,{$$typeof:n,type:s,key:h,ref:r!==void 0?r:null,props:d}}return Us.Fragment=t,Us.jsx=o,Us.jsxs=o,Us}var Y0;function nx(){return Y0||(Y0=1,_c.exports=tx()),_c.exports}var p=nx(),Ac={exports:{}},bt={};var J0;function ix(){if(J0)return bt;J0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),T=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function J(D,R,ne){this.props=D,this.context=R,this.refs=F,this.updater=ne||N}J.prototype.isReactComponent={},J.prototype.setState=function(D,R){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,R,"setState")},J.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ue(){}ue.prototype=J.prototype;function fe(D,R,ne){this.props=D,this.context=R,this.refs=F,this.updater=ne||N}var Ge=fe.prototype=new ue;Ge.constructor=fe,O(Ge,J.prototype),Ge.isPureReactComponent=!0;var ke=Array.isArray;function Ve(){}var Se={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function we(D,R,ne){var Ee=ne.ref;return{$$typeof:n,type:D,key:R,ref:Ee!==void 0?Ee:null,props:ne}}function Qe(D,R){return we(D.type,R,D.props)}function Ue(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function ft(D){var R={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ne){return R[ne]})}var St=/\/+/g;function At(D,R){return typeof D=="object"&&D!==null&&D.key!=null?ft(""+D.key):R.toString(36)}function be(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ve,Ve):(D.status="pending",D.then(function(R){D.status==="pending"&&(D.status="fulfilled",D.value=R)},function(R){D.status==="pending"&&(D.status="rejected",D.reason=R)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,R,ne,Ee,Ke){var _=typeof D;(_==="undefined"||_==="boolean")&&(D=null);var P=!1;if(D===null)P=!0;else switch(_){case"bigint":case"string":case"number":P=!0;break;case"object":switch(D.$$typeof){case n:case t:P=!0;break;case x:return P=D._init,B(P(D._payload),R,ne,Ee,Ke)}}if(P)return Ke=Ke(D),P=Ee===""?"."+At(D,0):Ee,ke(Ke)?(ne="",P!=null&&(ne=P.replace(St,"$&/")+"/"),B(Ke,R,ne,"",function(Ie){return Ie})):Ke!=null&&(Ue(Ke)&&(Ke=Qe(Ke,ne+(Ke.key==null||D&&D.key===Ke.key?"":(""+Ke.key).replace(St,"$&/")+"/")+P)),R.push(Ke)),1;P=0;var ie=Ee===""?".":Ee+":";if(ke(D))for(var le=0;le<D.length;le++)Ee=D[le],_=ie+At(Ee,le),P+=B(Ee,R,ne,_,Ke);else if(le=A(D),typeof le=="function")for(D=le.call(D),le=0;!(Ee=D.next()).done;)Ee=Ee.value,_=ie+At(Ee,le++),P+=B(Ee,R,ne,_,Ke);else if(_==="object"){if(typeof D.then=="function")return B(be(D),R,ne,Ee,Ke);throw R=String(D),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return P}function xe(D,R,ne){if(D==null)return D;var Ee=[],Ke=0;return B(D,Ee,"","",function(_){return R.call(ne,_,Ke++)}),Ee}function de(D){if(D._status===-1){var R=D._result;R=R(),R.then(function(ne){(D._status===0||D._status===-1)&&(D._status=1,D._result=ne)},function(ne){(D._status===0||D._status===-1)&&(D._status=2,D._result=ne)}),D._status===-1&&(D._status=0,D._result=R)}if(D._status===1)return D._result.default;throw D._result}var ht=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},mt={map:xe,forEach:function(D,R,ne){xe(D,function(){R.apply(this,arguments)},ne)},count:function(D){var R=0;return xe(D,function(){R++}),R},toArray:function(D){return xe(D,function(R){return R})||[]},only:function(D){if(!Ue(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return bt.Activity=S,bt.Children=mt,bt.Component=J,bt.Fragment=o,bt.Profiler=r,bt.PureComponent=fe,bt.StrictMode=s,bt.Suspense=v,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,bt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Se.H.useMemoCache(D)}},bt.cache=function(D){return function(){return D.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(D,R,ne){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Ee=O({},D.props),Ke=D.key;if(R!=null)for(_ in R.key!==void 0&&(Ke=""+R.key),R)!nt.call(R,_)||_==="key"||_==="__self"||_==="__source"||_==="ref"&&R.ref===void 0||(Ee[_]=R[_]);var _=arguments.length-2;if(_===1)Ee.children=ne;else if(1<_){for(var P=Array(_),ie=0;ie<_;ie++)P[ie]=arguments[ie+2];Ee.children=P}return we(D.type,Ke,Ee)},bt.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:d,_context:D},D},bt.createElement=function(D,R,ne){var Ee,Ke={},_=null;if(R!=null)for(Ee in R.key!==void 0&&(_=""+R.key),R)nt.call(R,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ke[Ee]=R[Ee]);var P=arguments.length-2;if(P===1)Ke.children=ne;else if(1<P){for(var ie=Array(P),le=0;le<P;le++)ie[le]=arguments[le+2];Ke.children=ie}if(D&&D.defaultProps)for(Ee in P=D.defaultProps,P)Ke[Ee]===void 0&&(Ke[Ee]=P[Ee]);return we(D,_,Ke)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(D){return{$$typeof:y,render:D}},bt.isValidElement=Ue,bt.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:de}},bt.memo=function(D,R){return{$$typeof:m,type:D,compare:R===void 0?null:R}},bt.startTransition=function(D){var R=Se.T,ne={};Se.T=ne;try{var Ee=D(),Ke=Se.S;Ke!==null&&Ke(ne,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Ve,ht)}catch(_){ht(_)}finally{R!==null&&ne.types!==null&&(R.types=ne.types),Se.T=R}},bt.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},bt.use=function(D){return Se.H.use(D)},bt.useActionState=function(D,R,ne){return Se.H.useActionState(D,R,ne)},bt.useCallback=function(D,R){return Se.H.useCallback(D,R)},bt.useContext=function(D){return Se.H.useContext(D)},bt.useDebugValue=function(){},bt.useDeferredValue=function(D,R){return Se.H.useDeferredValue(D,R)},bt.useEffect=function(D,R){return Se.H.useEffect(D,R)},bt.useEffectEvent=function(D){return Se.H.useEffectEvent(D)},bt.useId=function(){return Se.H.useId()},bt.useImperativeHandle=function(D,R,ne){return Se.H.useImperativeHandle(D,R,ne)},bt.useInsertionEffect=function(D,R){return Se.H.useInsertionEffect(D,R)},bt.useLayoutEffect=function(D,R){return Se.H.useLayoutEffect(D,R)},bt.useMemo=function(D,R){return Se.H.useMemo(D,R)},bt.useOptimistic=function(D,R){return Se.H.useOptimistic(D,R)},bt.useReducer=function(D,R,ne){return Se.H.useReducer(D,R,ne)},bt.useRef=function(D){return Se.H.useRef(D)},bt.useState=function(D){return Se.H.useState(D)},bt.useSyncExternalStore=function(D,R,ne){return Se.H.useSyncExternalStore(D,R,ne)},bt.useTransition=function(){return Se.H.useTransition()},bt.version="19.2.3",bt}var K0;function od(){return K0||(K0=1,Ac.exports=ix()),Ac.exports}var X=od();const Zm=Qm(X);var Nc={exports:{}},Ls={},Mc={exports:{}},Rc={};var X0;function ox(){return X0||(X0=1,(function(n){function t(B,xe){var de=B.length;B.push(xe);e:for(;0<de;){var ht=de-1>>>1,mt=B[ht];if(0<r(mt,xe))B[ht]=xe,B[de]=mt,de=ht;else break e}}function o(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var xe=B[0],de=B.pop();if(de!==xe){B[0]=de;e:for(var ht=0,mt=B.length,D=mt>>>1;ht<D;){var R=2*(ht+1)-1,ne=B[R],Ee=R+1,Ke=B[Ee];if(0>r(ne,de))Ee<mt&&0>r(Ke,ne)?(B[ht]=Ke,B[Ee]=de,ht=Ee):(B[ht]=ne,B[R]=de,ht=R);else if(Ee<mt&&0>r(Ke,de))B[ht]=Ke,B[Ee]=de,ht=Ee;else break e}}return xe}function r(B,xe){var de=B.sortIndex-xe.sortIndex;return de!==0?de:B.id-xe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,y=h.now();n.unstable_now=function(){return h.now()-y}}var v=[],m=[],x=1,S=null,T=3,A=!1,N=!1,O=!1,F=!1,J=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function Ge(B){for(var xe=o(m);xe!==null;){if(xe.callback===null)s(m);else if(xe.startTime<=B)s(m),xe.sortIndex=xe.expirationTime,t(v,xe);else break;xe=o(m)}}function ke(B){if(O=!1,Ge(B),!N)if(o(v)!==null)N=!0,Ve||(Ve=!0,ft());else{var xe=o(m);xe!==null&&be(ke,xe.startTime-B)}}var Ve=!1,Se=-1,nt=5,we=-1;function Qe(){return F?!0:!(n.unstable_now()-we<nt)}function Ue(){if(F=!1,Ve){var B=n.unstable_now();we=B;var xe=!0;try{e:{N=!1,O&&(O=!1,ue(Se),Se=-1),A=!0;var de=T;try{t:{for(Ge(B),S=o(v);S!==null&&!(S.expirationTime>B&&Qe());){var ht=S.callback;if(typeof ht=="function"){S.callback=null,T=S.priorityLevel;var mt=ht(S.expirationTime<=B);if(B=n.unstable_now(),typeof mt=="function"){S.callback=mt,Ge(B),xe=!0;break t}S===o(v)&&s(v),Ge(B)}else s(v);S=o(v)}if(S!==null)xe=!0;else{var D=o(m);D!==null&&be(ke,D.startTime-B),xe=!1}}break e}finally{S=null,T=de,A=!1}xe=void 0}}finally{xe?ft():Ve=!1}}}var ft;if(typeof fe=="function")ft=function(){fe(Ue)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,At=St.port2;St.port1.onmessage=Ue,ft=function(){At.postMessage(null)}}else ft=function(){J(Ue,0)};function be(B,xe){Se=J(function(){B(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(B){switch(T){case 1:case 2:case 3:var xe=3;break;default:xe=T}var de=T;T=xe;try{return B()}finally{T=de}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(B,xe){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var de=T;T=B;try{return xe()}finally{T=de}},n.unstable_scheduleCallback=function(B,xe,de){var ht=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ht+de:ht):de=ht,B){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=de+mt,B={id:x++,callback:xe,priorityLevel:B,startTime:de,expirationTime:mt,sortIndex:-1},de>ht?(B.sortIndex=de,t(m,B),o(v)===null&&B===o(m)&&(O?(ue(Se),Se=-1):O=!0,be(ke,de-ht))):(B.sortIndex=mt,t(v,B),N||A||(N=!0,Ve||(Ve=!0,ft()))),B},n.unstable_shouldYield=Qe,n.unstable_wrapCallback=function(B){var xe=T;return function(){var de=T;T=xe;try{return B.apply(this,arguments)}finally{T=de}}}})(Rc)),Rc}var Q0;function lx(){return Q0||(Q0=1,Mc.exports=ox()),Mc.exports}var kc={exports:{}},Un={};var Z0;function sx(){if(Z0)return Un;Z0=1;var n=od();function t(v){var m="https://react.dev/errors/"+v;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(v,m,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:v,containerInfo:m,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,m){if(v==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Un.createPortal=function(v,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return d(v,m,null,x)},Un.flushSync=function(v){var m=h.T,x=s.p;try{if(h.T=null,s.p=2,v)return v()}finally{h.T=m,s.p=x,s.d.f()}},Un.preconnect=function(v,m){typeof v=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(v,m))},Un.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Un.preinit=function(v,m){if(typeof v=="string"&&m&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(v,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:A}):x==="script"&&s.d.X(v,{crossOrigin:S,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Un.preinitModule=function(v,m){if(typeof v=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=y(m.as,m.crossOrigin);s.d.M(v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(v)},Un.preload=function(v,m){if(typeof v=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,S=y(x,m.crossOrigin);s.d.L(v,x,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Un.preloadModule=function(v,m){if(typeof v=="string")if(m){var x=y(m.as,m.crossOrigin);s.d.m(v,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(v)},Un.requestFormReset=function(v){s.d.r(v)},Un.unstable_batchedUpdates=function(v,m){return v(m)},Un.useFormState=function(v,m,x){return h.H.useFormState(v,m,x)},Un.useFormStatus=function(){return h.H.useHostTransitionStatus()},Un.version="19.2.3",Un}var W0;function ax(){if(W0)return kc.exports;W0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),kc.exports=sx(),kc.exports}var eh;function rx(){if(eh)return Ls;eh=1;var n=lx(),t=od(),o=ax();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=d(e),i===null)throw Error(s(188));return i!==e?null:e}for(var l=e,a=i;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(a=f.return,a!==null){l=a;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return v(f),e;if(g===a)return v(f),i;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=f,a=g;else{for(var b=!1,E=f.child;E;){if(E===l){b=!0,l=f,a=g;break}if(E===a){b=!0,a=f,l=g;break}E=E.sibling}if(!b){for(E=g.child;E;){if(E===l){b=!0,l=g,a=f;break}if(E===a){b=!0,a=g,l=f;break}E=E.sibling}if(!b)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),Ge=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),Qe=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function ft(e){return e===null||typeof e!="object"?null:(e=Ue&&e[Ue]||e["@@iterator"],typeof e=="function"?e:null)}var St=Symbol.for("react.client.reference");function At(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===St?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case J:return"Profiler";case F:return"StrictMode";case ke:return"Suspense";case Ve:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case fe:return e.displayName||"Context";case ue:return(e._context.displayName||"Context")+".Consumer";case Ge:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Se:return i=e.displayName||null,i!==null?i:At(e.type)||"Memo";case nt:i=e._payload,e=e._init;try{return At(e(i))}catch{}}return null}var be=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ht=[],mt=-1;function D(e){return{current:e}}function R(e){0>mt||(e.current=ht[mt],ht[mt]=null,mt--)}function ne(e,i){mt++,ht[mt]=e.current,e.current=i}var Ee=D(null),Ke=D(null),_=D(null),P=D(null);function ie(e,i){switch(ne(_,i),ne(Ke,e),ne(Ee,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?m0(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=m0(i),e=g0(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}R(Ee),ne(Ee,e)}function le(){R(Ee),R(Ke),R(_)}function Ie(e){e.memoizedState!==null&&ne(P,e);var i=Ee.current,l=g0(i,e.type);i!==l&&(ne(Ke,e),ne(Ee,l))}function Ce(e){Ke.current===e&&(R(Ee),R(Ke)),P.current===e&&(R(P),ks._currentValue=de)}var Te,Ne;function he(e){if(Te===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Te=i&&i[1]||"",Ne=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+e+Ne}var L=!1;function _e(e,i){if(!e||L)return"";L=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(te){var Y=te}Reflect.construct(e,[],ye)}else{try{ye.call()}catch(te){Y=te}e.call(ye.prototype)}}else{try{throw Error()}catch(te){Y=te}(ye=e())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(te){if(te&&Y&&typeof te.stack=="string")return[te.stack,Y.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),b=g[0],E=g[1];if(b&&E){var I=b.split(`
`),j=E.split(`
`);for(f=a=0;a<I.length&&!I[a].includes("DetermineComponentFrameRoot");)a++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(a===I.length||f===j.length)for(a=I.length-1,f=j.length-1;1<=a&&0<=f&&I[a]!==j[f];)f--;for(;1<=a&&0<=f;a--,f--)if(I[a]!==j[f]){if(a!==1||f!==1)do if(a--,f--,0>f||I[a]!==j[f]){var ce=`
`+I[a].replace(" at new "," at ");return e.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",e.displayName)),ce}while(1<=a&&0<=f);break}}}finally{L=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?he(l):""}function Fe(e,i){switch(e.tag){case 26:case 27:case 5:return he(e.type);case 16:return he("Lazy");case 13:return e.child!==i&&i!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return _e(e.type,!1);case 11:return _e(e.type.render,!1);case 1:return _e(e.type,!0);case 31:return he("Activity");default:return""}}function Be(e){try{var i="",l=null;do i+=Fe(e,l),l=e,e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ye=Object.prototype.hasOwnProperty,H=n.unstable_scheduleCallback,ae=n.unstable_cancelCallback,pe=n.unstable_shouldYield,Ae=n.unstable_requestPaint,ve=n.unstable_now,ge=n.unstable_getCurrentPriorityLevel,w=n.unstable_ImmediatePriority,C=n.unstable_UserBlockingPriority,G=n.unstable_NormalPriority,M=n.unstable_LowPriority,Z=n.unstable_IdlePriority,z=n.log,oe=n.unstable_setDisableYieldValue,re=null,K=null;function ze(e){if(typeof z=="function"&&oe(e),K&&typeof K.setStrictMode=="function")try{K.setStrictMode(re,e)}catch{}}var je=Math.clz32?Math.clz32:Et,et=Math.log,De=Math.LN2;function Et(e){return e>>>=0,e===0?32:31-(et(e)/De|0)|0}var _t=256,Yt=262144,nn=4194304;function lt(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Me(e,i,l){var a=e.pendingLanes;if(a===0)return 0;var f=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var E=a&134217727;return E!==0?(a=E&~g,a!==0?f=lt(a):(b&=E,b!==0?f=lt(b):l||(l=E&~e,l!==0&&(f=lt(l))))):(E=a&~g,E!==0?f=lt(E):b!==0?f=lt(b):l||(l=a&~e,l!==0&&(f=lt(l)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:f}function ut(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function st(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function He(){var e=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),e}function Nt(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function dt(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ct(e,i,l,a,f,g){var b=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var E=e.entanglements,I=e.expirationTimes,j=e.hiddenUpdates;for(l=b&~l;0<l;){var ce=31-je(l),ye=1<<ce;E[ce]=0,I[ce]=-1;var Y=j[ce];if(Y!==null)for(j[ce]=null,ce=0;ce<Y.length;ce++){var te=Y[ce];te!==null&&(te.lane&=-536870913)}l&=~ye}a!==0&&Lt(e,a,0),g!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~i))}function Lt(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var a=31-je(i);e.entangledLanes|=i,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function Wt(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var a=31-je(l),f=1<<a;f&i|e[a]&i&&(e[a]|=i),l&=~f}}function On(e,i){var l=i&-i;return l=(l&42)!==0?1:Ri(l),(l&(e.suspendedLanes|i))!==0?0:l}function Ri(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Si(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Hi(){var e=xe.p;return e!==0?e:(e=window.event,e===void 0?32:H0(e.type))}function Ti(e,i){var l=xe.p;try{return xe.p=e,i()}finally{xe.p=l}}var En=Math.random().toString(36).slice(2),tt="__reactFiber$"+En,wt="__reactProps$"+En,kt="__reactContainer$"+En,Qn="__reactEvents$"+En,Ot="__reactListeners$"+En,qn="__reactHandles$"+En,Ys="__reactResources$"+En,Ho="__reactMarker$"+En;function ll(e){delete e[tt],delete e[wt],delete e[Qn],delete e[Ot],delete e[qn]}function ao(e){var i=e[tt];if(i)return i;for(var l=e.parentNode;l;){if(i=l[kt]||l[tt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=C0(e);e!==null;){if(l=e[tt])return l;e=C0(e)}return i}e=l,l=e.parentNode}return null}function Vi(e){if(e=e[tt]||e[kt]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Bi(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function ki(e){var i=e[Ys];return i||(i=e[Ys]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function un(e){e[Ho]=!0}var ro=new Set,sl={};function Ii(e,i){ai(e,i),ai(e+"Capture",i)}function ai(e,i){for(sl[e]=i,e=0;e<i.length;e++)ro.add(i[e])}var uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},co={};function k(e){return Ye.call(co,e)?!0:Ye.call(al,e)?!1:uo.test(e)?co[e]=!0:(al[e]=!0,!1)}function W(e,i,l){if(k(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function Le(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function Q(e,i,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+a)}}function se(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Je(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function at(e,i,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function pt(e){if(!e._valueTracker){var i=Je(e)?"checked":"value";e._valueTracker=at(e,i,""+e[i])}}function xt(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return e&&(a=Je(e)?e.checked?"true":"false":e.value),e=a,e!==l?(i.setValue(e),!0):!1}function pn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zn=/[\n"\\]/g;function Re(e){return e.replace(zn,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Jt(e,i,l,a,f,g,b,E){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+se(i)):e.value!==""+se(i)&&(e.value=""+se(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?Zn(e,b,se(i)):l!=null?Zn(e,b,se(l)):a!=null&&e.removeAttribute("value"),f==null&&g!=null&&(e.defaultChecked=!!g),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+se(E):e.removeAttribute("name")}function on(e,i,l,a,f,g,b,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){pt(e);return}l=l!=null?""+se(l):"",i=i!=null?""+se(i):l,E||i===e.value||(e.value=i),e.defaultValue=i}a=a??f,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=E?e.checked:!!a,e.defaultChecked=!!a,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),pt(e)}function Zn(e,i,l){i==="number"&&pn(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function $(e,i,l,a){if(e=e.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<e.length;l++)f=i.hasOwnProperty("$"+e[l].value),e[l].selected!==f&&(e[l].selected=f),f&&a&&(e[l].defaultSelected=!0)}else{for(l=""+se(l),i=null,f=0;f<e.length;f++){if(e[f].value===l){e[f].selected=!0,a&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function gt(e,i,l){if(i!=null&&(i=""+se(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+se(l):""}function Ut(e,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(be(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=se(i),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),pt(e)}function Kt(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var fo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sn(e,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":a?e.setProperty(i,l):typeof l!="number"||l===0||fo.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function Wn(e,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var f in i)a=i[f],i.hasOwnProperty(f)&&l[f]!==a&&Sn(e,f,a)}else for(var g in i)i.hasOwnProperty(g)&&Sn(e,g,i[g])}function zi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Di(e){return Vo.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function qt(){}var Dn=null;function Pn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ee=null,_n=null;function yt(e){var i=Vi(e);if(i&&(e=i.stateNode)){var l=e[wt]||null;e:switch(e=i.stateNode,i.type){case"input":if(Jt(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Re(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==e&&a.form===e.form){var f=a[wt]||null;if(!f)throw Error(s(90));Jt(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===e.form&&xt(a)}break e;case"textarea":gt(e,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&$(e,!!l.multiple,i,!1)}}}var Gn=!1;function Bo(e,i,l){if(Gn)return e(i,l);Gn=!0;try{var a=e(i);return a}finally{if(Gn=!1,(ee!==null||_n!==null)&&(ka(),ee&&(i=ee,e=_n,_n=ee=null,yt(i),e)))for(i=0;i<e.length;i++)yt(e[i])}}function Ci(e,i){var l=e.stateNode;if(l===null)return null;var a=l[wt]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qe=!1;if(jn)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch{qe=!1}var it=null,Oe=null,tn=null;function Pt(){if(tn)return tn;var e,i=Oe,l=i.length,a,f="value"in it?it.value:it.textContent,g=f.length;for(e=0;e<l&&i[e]===f[e];e++);var b=l-e;for(a=1;a<=b&&i[l-a]===f[g-a];a++);return tn=f.slice(e,1<a?1-a:void 0)}function cn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Hn(){return!0}function An(){return!1}function hn(e){function i(l,a,f,g,b){this._reactName=l,this._targetInst=f,this.type=a,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(l=e[E],this[E]=l?l(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hn:An,this.isPropagationStopped=An,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){},isPersistent:Hn}),i}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=hn(ri),Xl=S({},ri,{view:0,detail:0}),Wg=hn(Xl),Nr,Mr,Ql,Ks=S({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ql&&(Ql&&e.type==="mousemove"?(Nr=e.screenX-Ql.screenX,Mr=e.screenY-Ql.screenY):Mr=Nr=0,Ql=e),Nr)},movementY:function(e){return"movementY"in e?e.movementY:Mr}}),yd=hn(Ks),ey=S({},Ks,{dataTransfer:0}),ty=hn(ey),ny=S({},Xl,{relatedTarget:0}),Rr=hn(ny),iy=S({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),oy=hn(iy),ly=S({},ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sy=hn(ly),ay=S({},ri,{data:0}),vd=hn(ay),ry={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=cy[e])?!!i[e]:!1}function kr(){return dy}var fy=S({},Xl,{key:function(e){if(e.key){var i=ry[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=cn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return e.type==="keypress"?cn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),py=hn(fy),hy=S({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=hn(hy),my=S({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),gy=hn(my),yy=S({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),vy=hn(yy),xy=S({},Ks,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),by=hn(xy),Sy=S({},ri,{newState:0,oldState:0}),Ty=hn(Sy),Cy=[9,13,27,32],Ir=jn&&"CompositionEvent"in window,Zl=null;jn&&"documentMode"in document&&(Zl=document.documentMode);var wy=jn&&"TextEvent"in window&&!Zl,bd=jn&&(!Ir||Zl&&8<Zl&&11>=Zl),Sd=" ",Td=!1;function Cd(e,i){switch(e){case"keyup":return Cy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rl=!1;function Ey(e,i){switch(e){case"compositionend":return wd(i);case"keypress":return i.which!==32?null:(Td=!0,Sd);case"textInput":return e=i.data,e===Sd&&Td?null:e;default:return null}}function _y(e,i){if(rl)return e==="compositionend"||!Ir&&Cd(e,i)?(e=Pt(),tn=Oe=it=null,rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bd&&i.locale!=="ko"?null:i.data;default:return null}}var Ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ed(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ay[e.type]:i==="textarea"}function _d(e,i,l,a){ee?_n?_n.push(a):_n=[a]:ee=a,i=Ga(i,"onChange"),0<i.length&&(l=new Js("onChange","change",null,l,a),e.push({event:l,listeners:i}))}var Wl=null,es=null;function Ny(e){u0(e,0)}function Xs(e){var i=Bi(e);if(xt(i))return e}function Ad(e,i){if(e==="change")return i}var Nd=!1;if(jn){var zr;if(jn){var Dr="oninput"in document;if(!Dr){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),Dr=typeof Md.oninput=="function"}zr=Dr}else zr=!1;Nd=zr&&(!document.documentMode||9<document.documentMode)}function Rd(){Wl&&(Wl.detachEvent("onpropertychange",kd),es=Wl=null)}function kd(e){if(e.propertyName==="value"&&Xs(es)){var i=[];_d(i,es,e,Pn(e)),Bo(Ny,i)}}function My(e,i,l){e==="focusin"?(Rd(),Wl=i,es=l,Wl.attachEvent("onpropertychange",kd)):e==="focusout"&&Rd()}function Ry(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xs(es)}function ky(e,i){if(e==="click")return Xs(i)}function Iy(e,i){if(e==="input"||e==="change")return Xs(i)}function zy(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ei=typeof Object.is=="function"?Object.is:zy;function ts(e,i){if(ei(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var f=l[a];if(!Ye.call(i,f)||!ei(e[f],i[f]))return!1}return!0}function Id(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zd(e,i){var l=Id(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=i&&a>=i)return{node:l,offset:i-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Id(l)}}function Dd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Dd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Ud(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=pn(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=pn(e.document)}return i}function Ur(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Dy=jn&&"documentMode"in document&&11>=document.documentMode,ul=null,Lr=null,ns=null,Pr=!1;function Ld(e,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pr||ul==null||ul!==pn(a)||(a=ul,"selectionStart"in a&&Ur(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ns&&ts(ns,a)||(ns=a,a=Ga(Lr,"onSelect"),0<a.length&&(i=new Js("onSelect","select",null,i,l),e.push({event:i,listeners:a}),i.target=ul)))}function Fo(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var cl={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},Gr={},Pd={};jn&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Oo(e){if(Gr[e])return Gr[e];if(!cl[e])return e;var i=cl[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in Pd)return Gr[e]=i[l];return e}var Gd=Oo("animationend"),Hd=Oo("animationiteration"),Vd=Oo("animationstart"),Uy=Oo("transitionrun"),Ly=Oo("transitionstart"),Py=Oo("transitioncancel"),Bd=Oo("transitionend"),Fd=new Map,Hr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hr.push("scrollEnd");function wi(e,i){Fd.set(e,i),Ii(i,[e])}var Qs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ui=[],dl=0,Vr=0;function Zs(){for(var e=dl,i=Vr=dl=0;i<e;){var l=ui[i];ui[i++]=null;var a=ui[i];ui[i++]=null;var f=ui[i];ui[i++]=null;var g=ui[i];if(ui[i++]=null,a!==null&&f!==null){var b=a.pending;b===null?f.next=f:(f.next=b.next,b.next=f),a.pending=f}g!==0&&Od(l,f,g)}}function Ws(e,i,l,a){ui[dl++]=e,ui[dl++]=i,ui[dl++]=l,ui[dl++]=a,Vr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Br(e,i,l,a){return Ws(e,i,l,a),ea(e)}function qo(e,i){return Ws(e,null,null,i),ea(e)}function Od(e,i,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var f=!1,g=e.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(f=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,f&&i!==null&&(f=31-je(l),e=g.hiddenUpdates,a=e[f],a===null?e[f]=[i]:a.push(i),i.lane=l|536870912),g):null}function ea(e){if(50<ws)throw ws=0,Xu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var fl={};function Gy(e,i,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(e,i,l,a){return new Gy(e,i,l,a)}function Fr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oi(e,i){var l=e.alternate;return l===null?(l=ti(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function qd(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function ta(e,i,l,a,f,g){var b=0;if(a=e,typeof e=="function")Fr(e)&&(b=1);else if(typeof e=="string")b=Ov(e,l,Ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=ti(31,l,i,f),e.elementType=we,e.lanes=g,e;case O:return jo(l.children,f,g,i);case F:b=8,f|=24;break;case J:return e=ti(12,l,i,f|2),e.elementType=J,e.lanes=g,e;case ke:return e=ti(13,l,i,f),e.elementType=ke,e.lanes=g,e;case Ve:return e=ti(19,l,i,f),e.elementType=Ve,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:b=10;break e;case ue:b=9;break e;case Ge:b=11;break e;case Se:b=14;break e;case nt:b=16,a=null;break e}b=29,l=Error(s(130,e===null?"null":typeof e,"")),a=null}return i=ti(b,l,i,f),i.elementType=e,i.type=a,i.lanes=g,i}function jo(e,i,l,a){return e=ti(7,e,a,i),e.lanes=l,e}function Or(e,i,l){return e=ti(6,e,null,i),e.lanes=l,e}function jd(e){var i=ti(18,null,null,0);return i.stateNode=e,i}function qr(e,i,l){return i=ti(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var $d=new WeakMap;function ci(e,i){if(typeof e=="object"&&e!==null){var l=$d.get(e);return l!==void 0?l:(i={value:e,source:i,stack:Be(i)},$d.set(e,i),i)}return{value:e,source:i,stack:Be(i)}}var pl=[],hl=0,na=null,is=0,di=[],fi=0,po=null,Ui=1,Li="";function qi(e,i){pl[hl++]=is,pl[hl++]=na,na=e,is=i}function Yd(e,i,l){di[fi++]=Ui,di[fi++]=Li,di[fi++]=po,po=e;var a=Ui;e=Li;var f=32-je(a)-1;a&=~(1<<f),l+=1;var g=32-je(i)+f;if(30<g){var b=f-f%5;g=(a&(1<<b)-1).toString(32),a>>=b,f-=b,Ui=1<<32-je(i)+f|l<<f|a,Li=g+e}else Ui=1<<g|l<<f|a,Li=e}function jr(e){e.return!==null&&(qi(e,1),Yd(e,1,0))}function $r(e){for(;e===na;)na=pl[--hl],pl[hl]=null,is=pl[--hl],pl[hl]=null;for(;e===po;)po=di[--fi],di[fi]=null,Li=di[--fi],di[fi]=null,Ui=di[--fi],di[fi]=null}function Jd(e,i){di[fi++]=Ui,di[fi++]=Li,di[fi++]=po,Ui=i.id,Li=i.overflow,po=e}var Nn=null,ln=null,Dt=!1,ho=null,pi=!1,Yr=Error(s(519));function mo(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw os(ci(i,e)),Yr}function Kd(e){var i=e.stateNode,l=e.type,a=e.memoizedProps;switch(i[tt]=e,i[wt]=a,l){case"dialog":Rt("cancel",i),Rt("close",i);break;case"iframe":case"object":case"embed":Rt("load",i);break;case"video":case"audio":for(l=0;l<_s.length;l++)Rt(_s[l],i);break;case"source":Rt("error",i);break;case"img":case"image":case"link":Rt("error",i),Rt("load",i);break;case"details":Rt("toggle",i);break;case"input":Rt("invalid",i),on(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Rt("invalid",i);break;case"textarea":Rt("invalid",i),Ut(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||p0(i.textContent,l)?(a.popover!=null&&(Rt("beforetoggle",i),Rt("toggle",i)),a.onScroll!=null&&Rt("scroll",i),a.onScrollEnd!=null&&Rt("scrollend",i),a.onClick!=null&&(i.onclick=qt),i=!0):i=!1,i||mo(e,!0)}function Xd(e){for(Nn=e.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:Nn=Nn.return}}function ml(e){if(e!==Nn)return!1;if(!Dt)return Xd(e),Dt=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||dc(e.type,e.memoizedProps)),l=!l),l&&ln&&mo(e),Xd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));ln=T0(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));ln=T0(e)}else i===27?(i=ln,Mo(e.type)?(e=gc,gc=null,ln=e):ln=i):ln=Nn?mi(e.stateNode.nextSibling):null;return!0}function $o(){ln=Nn=null,Dt=!1}function Jr(){var e=ho;return e!==null&&(Kn===null?Kn=e:Kn.push.apply(Kn,e),ho=null),e}function os(e){ho===null?ho=[e]:ho.push(e)}var Kr=D(null),Yo=null,ji=null;function go(e,i,l){ne(Kr,i._currentValue),i._currentValue=l}function $i(e){e._currentValue=Kr.current,R(Kr)}function Xr(e,i,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===l)break;e=e.return}}function Qr(e,i,l,a){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=f;for(var I=0;I<i.length;I++)if(E.context===i[I]){g.lanes|=l,E=g.alternate,E!==null&&(E.lanes|=l),Xr(g.return,l,e),a||(b=null);break e}g=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),Xr(b,l,e),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===e){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function gl(e,i,l,a){e=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=f.type;ei(f.pendingProps.value,b.value)||(e!==null?e.push(E):e=[E])}}else if(f===P.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(ks):e=[ks])}f=f.return}e!==null&&Qr(i,e,l,a),i.flags|=262144}function ia(e){for(e=e.firstContext;e!==null;){if(!ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Jo(e){Yo=e,ji=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mn(e){return Qd(Yo,e)}function oa(e,i){return Yo===null&&Jo(e),Qd(e,i)}function Qd(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},ji===null){if(e===null)throw Error(s(308));ji=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ji=ji.next=i;return l}var Hy=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Vy=n.unstable_scheduleCallback,By=n.unstable_NormalPriority,yn={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zr(){return{controller:new Hy,data:new Map,refCount:0}}function ls(e){e.refCount--,e.refCount===0&&Vy(By,function(){e.controller.abort()})}var ss=null,Wr=0,yl=0,vl=null;function Fy(e,i){if(ss===null){var l=ss=[];Wr=0,yl=nc(),vl={status:"pending",value:void 0,then:function(a){l.push(a)}}}return Wr++,i.then(Zd,Zd),i}function Zd(){if(--Wr===0&&ss!==null){vl!==null&&(vl.status="fulfilled");var e=ss;ss=null,yl=0,vl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Oy(e,i){var l=[],a={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return e.then(function(){a.status="fulfilled",a.value=i;for(var f=0;f<l.length;f++)(0,l[f])(i)},function(f){for(a.status="rejected",a.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),a}var Wd=B.S;B.S=function(e,i){Pp=ve(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Fy(e,i),Wd!==null&&Wd(e,i)};var Ko=D(null);function eu(){var e=Ko.current;return e!==null?e:en.pooledCache}function la(e,i){i===null?ne(Ko,Ko.current):ne(Ko,i.pool)}function ef(){var e=eu();return e===null?null:{parent:yn._currentValue,pool:e}}var xl=Error(s(460)),tu=Error(s(474)),sa=Error(s(542)),aa={then:function(){}};function tf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nf(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(qt,qt),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,lf(e),e;default:if(typeof i.status=="string")i.then(qt,qt);else{if(e=en,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(a){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=a}},function(a){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,lf(e),e}throw Qo=i,xl}}function Xo(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Qo=l,xl):l}}var Qo=null;function of(){if(Qo===null)throw Error(s(459));var e=Qo;return Qo=null,e}function lf(e){if(e===xl||e===sa)throw Error(s(483))}var bl=null,as=0;function ra(e){var i=as;return as+=1,bl===null&&(bl=[]),nf(bl,e,i)}function rs(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function ua(e,i){throw i.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function sf(e){function i(V,U){if(e){var q=V.deletions;q===null?(V.deletions=[U],V.flags|=16):q.push(U)}}function l(V,U){if(!e)return null;for(;U!==null;)i(V,U),U=U.sibling;return null}function a(V){for(var U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function f(V,U){return V=Oi(V,U),V.index=0,V.sibling=null,V}function g(V,U,q){return V.index=q,e?(q=V.alternate,q!==null?(q=q.index,q<U?(V.flags|=67108866,U):q):(V.flags|=67108866,U)):(V.flags|=1048576,U)}function b(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function E(V,U,q,me){return U===null||U.tag!==6?(U=Or(q,V.mode,me),U.return=V,U):(U=f(U,q),U.return=V,U)}function I(V,U,q,me){var ot=q.type;return ot===O?ce(V,U,q.props.children,me,q.key):U!==null&&(U.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===nt&&Xo(ot)===U.type)?(U=f(U,q.props),rs(U,q),U.return=V,U):(U=ta(q.type,q.key,q.props,null,V.mode,me),rs(U,q),U.return=V,U)}function j(V,U,q,me){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=qr(q,V.mode,me),U.return=V,U):(U=f(U,q.children||[]),U.return=V,U)}function ce(V,U,q,me,ot){return U===null||U.tag!==7?(U=jo(q,V.mode,me,ot),U.return=V,U):(U=f(U,q),U.return=V,U)}function ye(V,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Or(""+U,V.mode,q),U.return=V,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return q=ta(U.type,U.key,U.props,null,V.mode,q),rs(q,U),q.return=V,q;case N:return U=qr(U,V.mode,q),U.return=V,U;case nt:return U=Xo(U),ye(V,U,q)}if(be(U)||ft(U))return U=jo(U,V.mode,q,null),U.return=V,U;if(typeof U.then=="function")return ye(V,ra(U),q);if(U.$$typeof===fe)return ye(V,oa(V,U),q);ua(V,U)}return null}function Y(V,U,q,me){var ot=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ot!==null?null:E(V,U,""+q,me);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===ot?I(V,U,q,me):null;case N:return q.key===ot?j(V,U,q,me):null;case nt:return q=Xo(q),Y(V,U,q,me)}if(be(q)||ft(q))return ot!==null?null:ce(V,U,q,me,null);if(typeof q.then=="function")return Y(V,U,ra(q),me);if(q.$$typeof===fe)return Y(V,U,oa(V,q),me);ua(V,q)}return null}function te(V,U,q,me,ot){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return V=V.get(q)||null,E(U,V,""+me,ot);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case A:return V=V.get(me.key===null?q:me.key)||null,I(U,V,me,ot);case N:return V=V.get(me.key===null?q:me.key)||null,j(U,V,me,ot);case nt:return me=Xo(me),te(V,U,q,me,ot)}if(be(me)||ft(me))return V=V.get(q)||null,ce(U,V,me,ot,null);if(typeof me.then=="function")return te(V,U,q,ra(me),ot);if(me.$$typeof===fe)return te(V,U,q,oa(U,me),ot);ua(U,me)}return null}function Xe(V,U,q,me){for(var ot=null,Gt=null,We=U,Ct=U=0,zt=null;We!==null&&Ct<q.length;Ct++){We.index>Ct?(zt=We,We=null):zt=We.sibling;var Ht=Y(V,We,q[Ct],me);if(Ht===null){We===null&&(We=zt);break}e&&We&&Ht.alternate===null&&i(V,We),U=g(Ht,U,Ct),Gt===null?ot=Ht:Gt.sibling=Ht,Gt=Ht,We=zt}if(Ct===q.length)return l(V,We),Dt&&qi(V,Ct),ot;if(We===null){for(;Ct<q.length;Ct++)We=ye(V,q[Ct],me),We!==null&&(U=g(We,U,Ct),Gt===null?ot=We:Gt.sibling=We,Gt=We);return Dt&&qi(V,Ct),ot}for(We=a(We);Ct<q.length;Ct++)zt=te(We,V,Ct,q[Ct],me),zt!==null&&(e&&zt.alternate!==null&&We.delete(zt.key===null?Ct:zt.key),U=g(zt,U,Ct),Gt===null?ot=zt:Gt.sibling=zt,Gt=zt);return e&&We.forEach(function(Do){return i(V,Do)}),Dt&&qi(V,Ct),ot}function rt(V,U,q,me){if(q==null)throw Error(s(151));for(var ot=null,Gt=null,We=U,Ct=U=0,zt=null,Ht=q.next();We!==null&&!Ht.done;Ct++,Ht=q.next()){We.index>Ct?(zt=We,We=null):zt=We.sibling;var Do=Y(V,We,Ht.value,me);if(Do===null){We===null&&(We=zt);break}e&&We&&Do.alternate===null&&i(V,We),U=g(Do,U,Ct),Gt===null?ot=Do:Gt.sibling=Do,Gt=Do,We=zt}if(Ht.done)return l(V,We),Dt&&qi(V,Ct),ot;if(We===null){for(;!Ht.done;Ct++,Ht=q.next())Ht=ye(V,Ht.value,me),Ht!==null&&(U=g(Ht,U,Ct),Gt===null?ot=Ht:Gt.sibling=Ht,Gt=Ht);return Dt&&qi(V,Ct),ot}for(We=a(We);!Ht.done;Ct++,Ht=q.next())Ht=te(We,V,Ct,Ht.value,me),Ht!==null&&(e&&Ht.alternate!==null&&We.delete(Ht.key===null?Ct:Ht.key),U=g(Ht,U,Ct),Gt===null?ot=Ht:Gt.sibling=Ht,Gt=Ht);return e&&We.forEach(function(ex){return i(V,ex)}),Dt&&qi(V,Ct),ot}function Zt(V,U,q,me){if(typeof q=="object"&&q!==null&&q.type===O&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var ot=q.key;U!==null;){if(U.key===ot){if(ot=q.type,ot===O){if(U.tag===7){l(V,U.sibling),me=f(U,q.props.children),me.return=V,V=me;break e}}else if(U.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===nt&&Xo(ot)===U.type){l(V,U.sibling),me=f(U,q.props),rs(me,q),me.return=V,V=me;break e}l(V,U);break}else i(V,U);U=U.sibling}q.type===O?(me=jo(q.props.children,V.mode,me,q.key),me.return=V,V=me):(me=ta(q.type,q.key,q.props,null,V.mode,me),rs(me,q),me.return=V,V=me)}return b(V);case N:e:{for(ot=q.key;U!==null;){if(U.key===ot)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){l(V,U.sibling),me=f(U,q.children||[]),me.return=V,V=me;break e}else{l(V,U);break}else i(V,U);U=U.sibling}me=qr(q,V.mode,me),me.return=V,V=me}return b(V);case nt:return q=Xo(q),Zt(V,U,q,me)}if(be(q))return Xe(V,U,q,me);if(ft(q)){if(ot=ft(q),typeof ot!="function")throw Error(s(150));return q=ot.call(q),rt(V,U,q,me)}if(typeof q.then=="function")return Zt(V,U,ra(q),me);if(q.$$typeof===fe)return Zt(V,U,oa(V,q),me);ua(V,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(l(V,U.sibling),me=f(U,q),me.return=V,V=me):(l(V,U),me=Or(q,V.mode,me),me.return=V,V=me),b(V)):l(V,U)}return function(V,U,q,me){try{as=0;var ot=Zt(V,U,q,me);return bl=null,ot}catch(We){if(We===xl||We===sa)throw We;var Gt=ti(29,We,null,V.mode);return Gt.lanes=me,Gt.return=V,Gt}}}var Zo=sf(!0),af=sf(!1),yo=!1;function nu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iu(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xo(e,i,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Bt&2)!==0){var f=a.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i,i=ea(e),Od(e,null,l),i}return Ws(e,a,i,l),ea(e)}function us(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,Wt(e,l)}}function ou(e,i){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?f=g=i:g=g.next=i}else f=g=i;l={baseState:a.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var lu=!1;function cs(){if(lu){var e=vl;if(e!==null)throw e}}function ds(e,i,l,a){lu=!1;var f=e.updateQueue;yo=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var I=E,j=I.next;I.next=null,b===null?g=j:b.next=j,b=I;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,E=ce.lastBaseUpdate,E!==b&&(E===null?ce.firstBaseUpdate=j:E.next=j,ce.lastBaseUpdate=I))}if(g!==null){var ye=f.baseState;b=0,ce=j=I=null,E=g;do{var Y=E.lane&-536870913,te=Y!==E.lane;if(te?(It&Y)===Y:(a&Y)===Y){Y!==0&&Y===yl&&(lu=!0),ce!==null&&(ce=ce.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Xe=e,rt=E;Y=i;var Zt=l;switch(rt.tag){case 1:if(Xe=rt.payload,typeof Xe=="function"){ye=Xe.call(Zt,ye,Y);break e}ye=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=rt.payload,Y=typeof Xe=="function"?Xe.call(Zt,ye,Y):Xe,Y==null)break e;ye=S({},ye,Y);break e;case 2:yo=!0}}Y=E.callback,Y!==null&&(e.flags|=64,te&&(e.flags|=8192),te=f.callbacks,te===null?f.callbacks=[Y]:te.push(Y))}else te={lane:Y,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ce===null?(j=ce=te,I=ye):ce=ce.next=te,b|=Y;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;te=E,E=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);ce===null&&(I=ye),f.baseState=I,f.firstBaseUpdate=j,f.lastBaseUpdate=ce,g===null&&(f.shared.lanes=0),wo|=b,e.lanes=b,e.memoizedState=ye}}function rf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function uf(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)rf(l[e],i)}var Sl=D(null),ca=D(0);function cf(e,i){e=to,ne(ca,e),ne(Sl,i),to=e|i.baseLanes}function su(){ne(ca,to),ne(Sl,Sl.current)}function au(){to=ca.current,R(Sl),R(ca)}var ni=D(null),hi=null;function bo(e){var i=e.alternate;ne(mn,mn.current&1),ne(ni,e),hi===null&&(i===null||Sl.current!==null||i.memoizedState!==null)&&(hi=e)}function ru(e){ne(mn,mn.current),ne(ni,e),hi===null&&(hi=e)}function df(e){e.tag===22?(ne(mn,mn.current),ne(ni,e),hi===null&&(hi=e)):So()}function So(){ne(mn,mn.current),ne(ni,ni.current)}function ii(e){R(ni),hi===e&&(hi=null),R(mn)}var mn=D(0);function da(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||hc(l)||mc(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yi=0,Tt=null,Xt=null,vn=null,fa=!1,Tl=!1,Wo=!1,pa=0,fs=0,Cl=null,qy=0;function dn(){throw Error(s(321))}function uu(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ei(e[l],i[l]))return!1;return!0}function cu(e,i,l,a,f,g){return Yi=g,Tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?Jf:Eu,Wo=!1,g=l(a,f),Wo=!1,Tl&&(g=pf(i,l,a,f)),ff(e),g}function ff(e){B.H=ms;var i=Xt!==null&&Xt.next!==null;if(Yi=0,vn=Xt=Tt=null,fa=!1,fs=0,Cl=null,i)throw Error(s(300));e===null||xn||(e=e.dependencies,e!==null&&ia(e)&&(xn=!0))}function pf(e,i,l,a){Tt=e;var f=0;do{if(Tl&&(Cl=null),fs=0,Tl=!1,25<=f)throw Error(s(301));if(f+=1,vn=Xt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=Kf,g=i(l,a)}while(Tl);return g}function jy(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?ps(i):i,e=e.useState()[0],(Xt!==null?Xt.memoizedState:null)!==e&&(Tt.flags|=1024),i}function du(){var e=pa!==0;return pa=0,e}function fu(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function pu(e){if(fa){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}fa=!1}Yi=0,vn=Xt=Tt=null,Tl=!1,fs=pa=0,Cl=null}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Tt.memoizedState=vn=e:vn=vn.next=e,vn}function gn(){if(Xt===null){var e=Tt.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var i=vn===null?Tt.memoizedState:vn.next;if(i!==null)vn=i,Xt=e;else{if(e===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},vn===null?Tt.memoizedState=vn=e:vn=vn.next=e}return vn}function ha(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ps(e){var i=fs;return fs+=1,Cl===null&&(Cl=[]),e=nf(Cl,e,i),i=Tt,(vn===null?i.memoizedState:vn.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?Jf:Eu),e}function ma(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ps(e);if(e.$$typeof===fe)return Mn(e)}throw Error(s(438,String(e)))}function hu(e){var i=null,l=Tt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=Tt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ha(),Tt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),a=0;a<e;a++)l[a]=Qe;return i.index++,l}function Ji(e,i){return typeof i=="function"?i(e):i}function ga(e){var i=gn();return mu(i,Xt,e)}function mu(e,i,l){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var f=e.baseQueue,g=a.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}i.baseQueue=f=g,a.pending=null}if(g=e.baseState,f===null)e.memoizedState=g;else{i=f.next;var E=b=null,I=null,j=i,ce=!1;do{var ye=j.lane&-536870913;if(ye!==j.lane?(It&ye)===ye:(Yi&ye)===ye){var Y=j.revertLane;if(Y===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),ye===yl&&(ce=!0);else if((Yi&Y)===Y){j=j.next,Y===yl&&(ce=!0);continue}else ye={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(E=I=ye,b=g):I=I.next=ye,Tt.lanes|=Y,wo|=Y;ye=j.action,Wo&&l(g,ye),g=j.hasEagerState?j.eagerState:l(g,ye)}else Y={lane:ye,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(E=I=Y,b=g):I=I.next=Y,Tt.lanes|=ye,wo|=ye;j=j.next}while(j!==null&&j!==i);if(I===null?b=g:I.next=E,!ei(g,e.memoizedState)&&(xn=!0,ce&&(l=vl,l!==null)))throw l;e.memoizedState=g,e.baseState=b,e.baseQueue=I,a.lastRenderedState=g}return f===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function gu(e){var i=gn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var a=l.dispatch,f=l.pending,g=i.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do g=e(g,b.action),b=b.next;while(b!==f);ei(g,i.memoizedState)||(xn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,a]}function hf(e,i,l){var a=Tt,f=gn(),g=Dt;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=i();var b=!ei((Xt||f).memoizedState,l);if(b&&(f.memoizedState=l,xn=!0),f=f.queue,xu(yf.bind(null,a,f,e),[e]),f.getSnapshot!==i||b||vn!==null&&vn.memoizedState.tag&1){if(a.flags|=2048,wl(9,{destroy:void 0},gf.bind(null,a,f,l,i),null),en===null)throw Error(s(349));g||(Yi&127)!==0||mf(a,i,l)}return l}function mf(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Tt.updateQueue,i===null?(i=ha(),Tt.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function gf(e,i,l,a){i.value=l,i.getSnapshot=a,vf(i)&&xf(e)}function yf(e,i,l){return l(function(){vf(i)&&xf(e)})}function vf(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ei(e,l)}catch{return!0}}function xf(e){var i=qo(e,2);i!==null&&Xn(i,e,2)}function yu(e){var i=Vn();if(typeof e=="function"){var l=e;if(e=l(),Wo){ze(!0);try{l()}finally{ze(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:e},i}function bf(e,i,l,a){return e.baseState=l,mu(e,Xt,typeof a=="function"?a:Ji)}function $y(e,i,l,a,f){if(xa(e))throw Error(s(485));if(e=i.action,e!==null){var g={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};B.T!==null?l(!0):g.isTransition=!1,a(g),l=i.pending,l===null?(g.next=i.pending=g,Sf(i,g)):(g.next=l.next,i.pending=l.next=g)}}function Sf(e,i){var l=i.action,a=i.payload,f=e.state;if(i.isTransition){var g=B.T,b={};B.T=b;try{var E=l(f,a),I=B.S;I!==null&&I(b,E),Tf(e,i,E)}catch(j){vu(e,i,j)}finally{g!==null&&b.types!==null&&(g.types=b.types),B.T=g}}else try{g=l(f,a),Tf(e,i,g)}catch(j){vu(e,i,j)}}function Tf(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Cf(e,i,a)},function(a){return vu(e,i,a)}):Cf(e,i,l)}function Cf(e,i,l){i.status="fulfilled",i.value=l,wf(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,Sf(e,l)))}function vu(e,i,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,wf(i),i=i.next;while(i!==a)}e.action=null}function wf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Ef(e,i){return i}function _f(e,i){if(Dt){var l=en.formState;if(l!==null){e:{var a=Tt;if(Dt){if(ln){t:{for(var f=ln,g=pi;f.nodeType!==8;){if(!g){f=null;break t}if(f=mi(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){ln=mi(f.nextSibling),a=f.data==="F!";break e}}mo(a)}a=!1}a&&(i=l[0])}}return l=Vn(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:i},l.queue=a,l=jf.bind(null,Tt,a),a.dispatch=l,a=yu(!1),g=wu.bind(null,Tt,!1,a.queue),a=Vn(),f={state:i,dispatch:null,action:e,pending:null},a.queue=f,l=$y.bind(null,Tt,f,g,l),f.dispatch=l,a.memoizedState=e,[i,l,!1]}function Af(e){var i=gn();return Nf(i,Xt,e)}function Nf(e,i,l){if(i=mu(e,i,Ef)[0],e=ga(Ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=ps(i)}catch(b){throw b===xl?sa:b}else a=i;i=gn();var f=i.queue,g=f.dispatch;return l!==i.memoizedState&&(Tt.flags|=2048,wl(9,{destroy:void 0},Yy.bind(null,f,l),null)),[a,g,e]}function Yy(e,i){e.action=i}function Mf(e){var i=gn(),l=Xt;if(l!==null)return Nf(i,l,e);gn(),i=i.memoizedState,l=gn();var a=l.queue.dispatch;return l.memoizedState=e,[i,a,!1]}function wl(e,i,l,a){return e={tag:e,create:l,deps:a,inst:i,next:null},i=Tt.updateQueue,i===null&&(i=ha(),Tt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,i.lastEffect=e),e}function Rf(){return gn().memoizedState}function ya(e,i,l,a){var f=Vn();Tt.flags|=e,f.memoizedState=wl(1|i,{destroy:void 0},l,a===void 0?null:a)}function va(e,i,l,a){var f=gn();a=a===void 0?null:a;var g=f.memoizedState.inst;Xt!==null&&a!==null&&uu(a,Xt.memoizedState.deps)?f.memoizedState=wl(i,g,l,a):(Tt.flags|=e,f.memoizedState=wl(1|i,g,l,a))}function kf(e,i){ya(8390656,8,e,i)}function xu(e,i){va(2048,8,e,i)}function Jy(e){Tt.flags|=4;var i=Tt.updateQueue;if(i===null)i=ha(),Tt.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function If(e){var i=gn().memoizedState;return Jy({ref:i,nextImpl:e}),function(){if((Bt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function zf(e,i){return va(4,2,e,i)}function Df(e,i){return va(4,4,e,i)}function Uf(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Lf(e,i,l){l=l!=null?l.concat([e]):null,va(4,4,Uf.bind(null,i,e),l)}function bu(){}function Pf(e,i){var l=gn();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&uu(i,a[1])?a[0]:(l.memoizedState=[e,i],e)}function Gf(e,i){var l=gn();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&uu(i,a[1]))return a[0];if(a=e(),Wo){ze(!0);try{e()}finally{ze(!1)}}return l.memoizedState=[a,i],a}function Su(e,i,l){return l===void 0||(Yi&1073741824)!==0&&(It&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=Hp(),Tt.lanes|=e,wo|=e,l)}function Hf(e,i,l,a){return ei(l,i)?l:Sl.current!==null?(e=Su(e,l,a),ei(e,i)||(xn=!0),e):(Yi&42)===0||(Yi&1073741824)!==0&&(It&261930)===0?(xn=!0,e.memoizedState=l):(e=Hp(),Tt.lanes|=e,wo|=e,i)}function Vf(e,i,l,a,f){var g=xe.p;xe.p=g!==0&&8>g?g:8;var b=B.T,E={};B.T=E,wu(e,!1,i,l);try{var I=f(),j=B.S;if(j!==null&&j(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ce=Oy(I,a);hs(e,i,ce,si(e))}else hs(e,i,a,si(e))}catch(ye){hs(e,i,{then:function(){},status:"rejected",reason:ye},si())}finally{xe.p=g,b!==null&&E.types!==null&&(b.types=E.types),B.T=b}}function Ky(){}function Tu(e,i,l,a){if(e.tag!==5)throw Error(s(476));var f=Bf(e).queue;Vf(e,f,i,de,l===null?Ky:function(){return Ff(e),l(a)})}function Bf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:de},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Ff(e){var i=Bf(e);i.next===null&&(i=e.alternate.memoizedState),hs(e,i.next.queue,{},si())}function Cu(){return Mn(ks)}function Of(){return gn().memoizedState}function qf(){return gn().memoizedState}function Xy(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=si();e=vo(l);var a=xo(i,e,l);a!==null&&(Xn(a,i,l),us(a,i,l)),i={cache:Zr()},e.payload=i;return}i=i.return}}function Qy(e,i,l){var a=si();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xa(e)?$f(i,l):(l=Br(e,i,l,a),l!==null&&(Xn(l,e,a),Yf(l,i,a)))}function jf(e,i,l){var a=si();hs(e,i,l,a)}function hs(e,i,l,a){var f={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(xa(e))$f(i,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,E=g(b,l);if(f.hasEagerState=!0,f.eagerState=E,ei(E,b))return Ws(e,i,f,0),en===null&&Zs(),!1}catch{}if(l=Br(e,i,f,a),l!==null)return Xn(l,e,a),Yf(l,i,a),!0}return!1}function wu(e,i,l,a){if(a={lane:2,revertLane:nc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xa(e)){if(i)throw Error(s(479))}else i=Br(e,l,a,2),i!==null&&Xn(i,e,2)}function xa(e){var i=e.alternate;return e===Tt||i!==null&&i===Tt}function $f(e,i){Tl=fa=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function Yf(e,i,l){if((l&4194048)!==0){var a=i.lanes;a&=e.pendingLanes,l|=a,i.lanes=l,Wt(e,l)}}var ms={readContext:Mn,use:ma,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};ms.useEffectEvent=dn;var Jf={readContext:Mn,use:ma,useCallback:function(e,i){return Vn().memoizedState=[e,i===void 0?null:i],e},useContext:Mn,useEffect:kf,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,ya(4194308,4,Uf.bind(null,i,e),l)},useLayoutEffect:function(e,i){return ya(4194308,4,e,i)},useInsertionEffect:function(e,i){ya(4,2,e,i)},useMemo:function(e,i){var l=Vn();i=i===void 0?null:i;var a=e();if(Wo){ze(!0);try{e()}finally{ze(!1)}}return l.memoizedState=[a,i],a},useReducer:function(e,i,l){var a=Vn();if(l!==void 0){var f=l(i);if(Wo){ze(!0);try{l(i)}finally{ze(!1)}}}else f=i;return a.memoizedState=a.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},a.queue=e,e=e.dispatch=Qy.bind(null,Tt,e),[a.memoizedState,e]},useRef:function(e){var i=Vn();return e={current:e},i.memoizedState=e},useState:function(e){e=yu(e);var i=e.queue,l=jf.bind(null,Tt,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:bu,useDeferredValue:function(e,i){var l=Vn();return Su(l,e,i)},useTransition:function(){var e=yu(!1);return e=Vf.bind(null,Tt,e.queue,!0,!1),Vn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var a=Tt,f=Vn();if(Dt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),en===null)throw Error(s(349));(It&127)!==0||mf(a,i,l)}f.memoizedState=l;var g={value:l,getSnapshot:i};return f.queue=g,kf(yf.bind(null,a,g,e),[e]),a.flags|=2048,wl(9,{destroy:void 0},gf.bind(null,a,g,l,i),null),l},useId:function(){var e=Vn(),i=en.identifierPrefix;if(Dt){var l=Li,a=Ui;l=(a&~(1<<32-je(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=pa++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=qy++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Cu,useFormState:_f,useActionState:_f,useOptimistic:function(e){var i=Vn();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=wu.bind(null,Tt,!0,l),l.dispatch=i,[e,i]},useMemoCache:hu,useCacheRefresh:function(){return Vn().memoizedState=Xy.bind(null,Tt)},useEffectEvent:function(e){var i=Vn(),l={impl:e};return i.memoizedState=l,function(){if((Bt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Eu={readContext:Mn,use:ma,useCallback:Pf,useContext:Mn,useEffect:xu,useImperativeHandle:Lf,useInsertionEffect:zf,useLayoutEffect:Df,useMemo:Gf,useReducer:ga,useRef:Rf,useState:function(){return ga(Ji)},useDebugValue:bu,useDeferredValue:function(e,i){var l=gn();return Hf(l,Xt.memoizedState,e,i)},useTransition:function(){var e=ga(Ji)[0],i=gn().memoizedState;return[typeof e=="boolean"?e:ps(e),i]},useSyncExternalStore:hf,useId:Of,useHostTransitionStatus:Cu,useFormState:Af,useActionState:Af,useOptimistic:function(e,i){var l=gn();return bf(l,Xt,e,i)},useMemoCache:hu,useCacheRefresh:qf};Eu.useEffectEvent=If;var Kf={readContext:Mn,use:ma,useCallback:Pf,useContext:Mn,useEffect:xu,useImperativeHandle:Lf,useInsertionEffect:zf,useLayoutEffect:Df,useMemo:Gf,useReducer:gu,useRef:Rf,useState:function(){return gu(Ji)},useDebugValue:bu,useDeferredValue:function(e,i){var l=gn();return Xt===null?Su(l,e,i):Hf(l,Xt.memoizedState,e,i)},useTransition:function(){var e=gu(Ji)[0],i=gn().memoizedState;return[typeof e=="boolean"?e:ps(e),i]},useSyncExternalStore:hf,useId:Of,useHostTransitionStatus:Cu,useFormState:Mf,useActionState:Mf,useOptimistic:function(e,i){var l=gn();return Xt!==null?bf(l,Xt,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:hu,useCacheRefresh:qf};Kf.useEffectEvent=If;function _u(e,i,l,a){i=e.memoizedState,l=l(a,i),l=l==null?i:S({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Au={enqueueSetState:function(e,i,l){e=e._reactInternals;var a=si(),f=vo(a);f.payload=i,l!=null&&(f.callback=l),i=xo(e,f,a),i!==null&&(Xn(i,e,a),us(i,e,a))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var a=si(),f=vo(a);f.tag=1,f.payload=i,l!=null&&(f.callback=l),i=xo(e,f,a),i!==null&&(Xn(i,e,a),us(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=si(),a=vo(l);a.tag=2,i!=null&&(a.callback=i),i=xo(e,a,l),i!==null&&(Xn(i,e,l),us(i,e,l))}};function Xf(e,i,l,a,f,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,g,b):i.prototype&&i.prototype.isPureReactComponent?!ts(l,a)||!ts(f,g):!0}function Qf(e,i,l,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==e&&Au.enqueueReplaceState(i,i.state,null)}function el(e,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(e=e.defaultProps){l===i&&(l=S({},l));for(var f in e)l[f]===void 0&&(l[f]=e[f])}return l}function Zf(e){Qs(e)}function Wf(e){console.error(e)}function ep(e){Qs(e)}function ba(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function tp(e,i,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Nu(e,i,l){return l=vo(l),l.tag=3,l.payload={element:null},l.callback=function(){ba(e,i)},l}function np(e){return e=vo(e),e.tag=3,e}function ip(e,i,l,a){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;e.payload=function(){return f(g)},e.callback=function(){tp(i,l,a)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){tp(i,l,a),typeof f!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var E=a.stack;this.componentDidCatch(a.value,{componentStack:E!==null?E:""})})}function Zy(e,i,l,a,f){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&gl(i,l,f,!0),l=ni.current,l!==null){switch(l.tag){case 31:case 13:return hi===null?Ia():l.alternate===null&&fn===0&&(fn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,a===aa?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),Wu(e,a,f)),!1;case 22:return l.flags|=65536,a===aa?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),Wu(e,a,f)),!1}throw Error(s(435,l.tag))}return Wu(e,a,f),Ia(),!1}if(Dt)return i=ni.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,a!==Yr&&(e=Error(s(422),{cause:a}),os(ci(e,l)))):(a!==Yr&&(i=Error(s(423),{cause:a}),os(ci(i,l))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,a=ci(a,l),f=Nu(e.stateNode,a,f),ou(e,f),fn!==4&&(fn=2)),!1;var g=Error(s(520),{cause:a});if(g=ci(g,l),Cs===null?Cs=[g]:Cs.push(g),fn!==4&&(fn=2),i===null)return!0;a=ci(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=f&-f,l.lanes|=e,e=Nu(l.stateNode,a,e),ou(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Eo===null||!Eo.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=np(f),ip(f,e,l,a),ou(l,f),!1}l=l.return}while(l!==null);return!1}var Mu=Error(s(461)),xn=!1;function Rn(e,i,l,a){i.child=e===null?af(i,null,l,a):Zo(i,e.child,l,a)}function op(e,i,l,a,f){l=l.render;var g=i.ref;if("ref"in a){var b={};for(var E in a)E!=="ref"&&(b[E]=a[E])}else b=a;return Jo(i),a=cu(e,i,l,b,g,f),E=du(),e!==null&&!xn?(fu(e,i,f),Ki(e,i,f)):(Dt&&E&&jr(i),i.flags|=1,Rn(e,i,a,f),i.child)}function lp(e,i,l,a,f){if(e===null){var g=l.type;return typeof g=="function"&&!Fr(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,sp(e,i,g,a,f)):(e=ta(l.type,null,a,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!Pu(e,f)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:ts,l(b,a)&&e.ref===i.ref)return Ki(e,i,f)}return i.flags|=1,e=Oi(g,a),e.ref=i.ref,e.return=i,i.child=e}function sp(e,i,l,a,f){if(e!==null){var g=e.memoizedProps;if(ts(g,a)&&e.ref===i.ref)if(xn=!1,i.pendingProps=a=g,Pu(e,f))(e.flags&131072)!==0&&(xn=!0);else return i.lanes=e.lanes,Ki(e,i,f)}return Ru(e,i,l,a,f)}function ap(e,i,l,a){var f=a.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,e!==null){for(a=i.child=e.child,f=0;a!==null;)f=f|a.lanes|a.childLanes,a=a.sibling;a=f&~g}else a=0,i.child=null;return rp(e,i,g,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&la(i,g!==null?g.cachePool:null),g!==null?cf(i,g):su(),df(i);else return a=i.lanes=536870912,rp(e,i,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(la(i,g.cachePool),cf(i,g),So(),i.memoizedState=null):(e!==null&&la(i,null),su(),So());return Rn(e,i,f,l),i.child}function gs(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function rp(e,i,l,a,f){var g=eu();return g=g===null?null:{parent:yn._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},e!==null&&la(i,null),su(),df(i),e!==null&&gl(e,i,a,!0),i.childLanes=f,null}function Sa(e,i){return i=Ca({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function up(e,i,l){return Zo(i,e.child,null,l),e=Sa(i,i.pendingProps),e.flags|=2,ii(i),i.memoizedState=null,e}function Wy(e,i,l){var a=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Dt){if(a.mode==="hidden")return e=Sa(i,a),i.lanes=536870912,gs(null,e);if(ru(i),(e=ln)?(e=S0(e,pi),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:po!==null?{id:Ui,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=jd(e),l.return=i,i.child=l,Nn=i,ln=null)):e=null,e===null)throw mo(i);return i.lanes=536870912,null}return Sa(i,a)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(ru(i),f)if(i.flags&256)i.flags&=-257,i=up(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(xn||gl(e,i,l,!1),f=(l&e.childLanes)!==0,xn||f){if(a=en,a!==null&&(b=On(a,l),b!==0&&b!==g.retryLane))throw g.retryLane=b,qo(e,b),Xn(a,e,b),Mu;Ia(),i=up(e,i,l)}else e=g.treeContext,ln=mi(b.nextSibling),Nn=i,Dt=!0,ho=null,pi=!1,e!==null&&Jd(i,e),i=Sa(i,a),i.flags|=4096;return i}return e=Oi(e.child,{mode:a.mode,children:a.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Ta(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function Ru(e,i,l,a,f){return Jo(i),l=cu(e,i,l,a,void 0,f),a=du(),e!==null&&!xn?(fu(e,i,f),Ki(e,i,f)):(Dt&&a&&jr(i),i.flags|=1,Rn(e,i,l,f),i.child)}function cp(e,i,l,a,f,g){return Jo(i),i.updateQueue=null,l=pf(i,a,l,f),ff(e),a=du(),e!==null&&!xn?(fu(e,i,g),Ki(e,i,g)):(Dt&&a&&jr(i),i.flags|=1,Rn(e,i,l,g),i.child)}function dp(e,i,l,a,f){if(Jo(i),i.stateNode===null){var g=fl,b=l.contextType;typeof b=="object"&&b!==null&&(g=Mn(b)),g=new l(a,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Au,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=a,g.state=i.memoizedState,g.refs={},nu(i),b=l.contextType,g.context=typeof b=="object"&&b!==null?Mn(b):fl,g.state=i.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(_u(i,l,b,a),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Au.enqueueReplaceState(g,g.state,null),ds(i,a,g,f),cs(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(e===null){g=i.stateNode;var E=i.memoizedProps,I=el(l,E);g.props=I;var j=g.context,ce=l.contextType;b=fl,typeof ce=="object"&&ce!==null&&(b=Mn(ce));var ye=l.getDerivedStateFromProps;ce=typeof ye=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,ce||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||j!==b)&&Qf(i,g,a,b),yo=!1;var Y=i.memoizedState;g.state=Y,ds(i,a,g,f),cs(),j=i.memoizedState,E||Y!==j||yo?(typeof ye=="function"&&(_u(i,l,ye,a),j=i.memoizedState),(I=yo||Xf(i,l,I,a,Y,j,b))?(ce||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=j),g.props=a,g.state=j,g.context=b,a=I):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{g=i.stateNode,iu(e,i),b=i.memoizedProps,ce=el(l,b),g.props=ce,ye=i.pendingProps,Y=g.context,j=l.contextType,I=fl,typeof j=="object"&&j!==null&&(I=Mn(j)),E=l.getDerivedStateFromProps,(j=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ye||Y!==I)&&Qf(i,g,a,I),yo=!1,Y=i.memoizedState,g.state=Y,ds(i,a,g,f),cs();var te=i.memoizedState;b!==ye||Y!==te||yo||e!==null&&e.dependencies!==null&&ia(e.dependencies)?(typeof E=="function"&&(_u(i,l,E,a),te=i.memoizedState),(ce=yo||Xf(i,l,ce,a,Y,te,I)||e!==null&&e.dependencies!==null&&ia(e.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,te,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,te,I)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=te),g.props=a,g.state=te,g.context=I,a=ce):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(i.flags|=1024),a=!1)}return g=a,Ta(e,i),a=(i.flags&128)!==0,g||a?(g=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&a?(i.child=Zo(i,e.child,null,f),i.child=Zo(i,null,l,f)):Rn(e,i,l,f),i.memoizedState=g.state,e=i.child):e=Ki(e,i,f),e}function fp(e,i,l,a){return $o(),i.flags|=256,Rn(e,i,l,a),i.child}var ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Iu(e){return{baseLanes:e,cachePool:ef()}}function zu(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=li),e}function pp(e,i,l){var a=i.pendingProps,f=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(mn.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(Dt){if(f?bo(i):So(),(e=ln)?(e=S0(e,pi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:po!==null?{id:Ui,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=jd(e),l.return=i,i.child=l,Nn=i,ln=null)):e=null,e===null)throw mo(i);return mc(e)?i.lanes=32:i.lanes=536870912,null}var E=a.children;return a=a.fallback,f?(So(),f=i.mode,E=Ca({mode:"hidden",children:E},f),a=jo(a,f,l,null),E.return=i,a.return=i,E.sibling=a,i.child=E,a=i.child,a.memoizedState=Iu(l),a.childLanes=zu(e,b,l),i.memoizedState=ku,gs(null,a)):(bo(i),Du(i,E))}var I=e.memoizedState;if(I!==null&&(E=I.dehydrated,E!==null)){if(g)i.flags&256?(bo(i),i.flags&=-257,i=Uu(e,i,l)):i.memoizedState!==null?(So(),i.child=e.child,i.flags|=128,i=null):(So(),E=a.fallback,f=i.mode,a=Ca({mode:"visible",children:a.children},f),E=jo(E,f,l,null),E.flags|=2,a.return=i,E.return=i,a.sibling=E,i.child=a,Zo(i,e.child,null,l),a=i.child,a.memoizedState=Iu(l),a.childLanes=zu(e,b,l),i.memoizedState=ku,i=gs(null,a));else if(bo(i),mc(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var j=b.dgst;b=j,a=Error(s(419)),a.stack="",a.digest=b,os({value:a,source:null,stack:null}),i=Uu(e,i,l)}else if(xn||gl(e,i,l,!1),b=(l&e.childLanes)!==0,xn||b){if(b=en,b!==null&&(a=On(b,l),a!==0&&a!==I.retryLane))throw I.retryLane=a,qo(e,a),Xn(b,e,a),Mu;hc(E)||Ia(),i=Uu(e,i,l)}else hc(E)?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,ln=mi(E.nextSibling),Nn=i,Dt=!0,ho=null,pi=!1,e!==null&&Jd(i,e),i=Du(i,a.children),i.flags|=4096);return i}return f?(So(),E=a.fallback,f=i.mode,I=e.child,j=I.sibling,a=Oi(I,{mode:"hidden",children:a.children}),a.subtreeFlags=I.subtreeFlags&65011712,j!==null?E=Oi(j,E):(E=jo(E,f,l,null),E.flags|=2),E.return=i,a.return=i,a.sibling=E,i.child=a,gs(null,a),a=i.child,E=e.child.memoizedState,E===null?E=Iu(l):(f=E.cachePool,f!==null?(I=yn._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=ef(),E={baseLanes:E.baseLanes|l,cachePool:f}),a.memoizedState=E,a.childLanes=zu(e,b,l),i.memoizedState=ku,gs(e.child,a)):(bo(i),l=e.child,e=l.sibling,l=Oi(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=l,i.memoizedState=null,l)}function Du(e,i){return i=Ca({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Ca(e,i){return e=ti(22,e,null,i),e.lanes=0,e}function Uu(e,i,l){return Zo(i,e.child,null,l),e=Du(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function hp(e,i,l){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),Xr(e.return,i,l)}function Lu(e,i,l,a,f,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:f,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=a,b.tail=l,b.tailMode=f,b.treeForkCount=g)}function mp(e,i,l){var a=i.pendingProps,f=a.revealOrder,g=a.tail;a=a.children;var b=mn.current,E=(b&2)!==0;if(E?(b=b&1|2,i.flags|=128):b&=1,ne(mn,b),Rn(e,i,a,l),a=Dt?is:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hp(e,l,i);else if(e.tag===19)hp(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(l=i.child,f=null;l!==null;)e=l.alternate,e!==null&&da(e)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),Lu(i,!1,f,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&da(e)===null){i.child=f;break}e=f.sibling,f.sibling=l,l=f,f=e}Lu(i,!0,l,null,g,a);break;case"together":Lu(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function Ki(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),wo|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(gl(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,l=Oi(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Oi(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function Pu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ia(e)))}function ev(e,i,l){switch(i.tag){case 3:ie(i,i.stateNode.containerInfo),go(i,yn,e.memoizedState.cache),$o();break;case 27:case 5:Ie(i);break;case 4:ie(i,i.stateNode.containerInfo);break;case 10:go(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ru(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(bo(i),i.flags|=128,null):(l&i.child.childLanes)!==0?pp(e,i,l):(bo(i),e=Ki(e,i,l),e!==null?e.sibling:null);bo(i);break;case 19:var f=(e.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(gl(e,i,l,!1),a=(l&i.childLanes)!==0),f){if(a)return mp(e,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ne(mn,mn.current),a)break;return null;case 22:return i.lanes=0,ap(e,i,l,i.pendingProps);case 24:go(i,yn,e.memoizedState.cache)}return Ki(e,i,l)}function gp(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)xn=!0;else{if(!Pu(e,l)&&(i.flags&128)===0)return xn=!1,ev(e,i,l);xn=(e.flags&131072)!==0}else xn=!1,Dt&&(i.flags&1048576)!==0&&Yd(i,is,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(e=Xo(i.elementType),i.type=e,typeof e=="function")Fr(e)?(a=el(e,a),i.tag=1,i=dp(null,i,e,a,l)):(i.tag=0,i=Ru(null,i,e,a,l));else{if(e!=null){var f=e.$$typeof;if(f===Ge){i.tag=11,i=op(null,i,e,a,l);break e}else if(f===Se){i.tag=14,i=lp(null,i,e,a,l);break e}}throw i=At(e)||e,Error(s(306,i,""))}}return i;case 0:return Ru(e,i,i.type,i.pendingProps,l);case 1:return a=i.type,f=el(a,i.pendingProps),dp(e,i,a,f,l);case 3:e:{if(ie(i,i.stateNode.containerInfo),e===null)throw Error(s(387));a=i.pendingProps;var g=i.memoizedState;f=g.element,iu(e,i),ds(i,a,null,l);var b=i.memoizedState;if(a=b.cache,go(i,yn,a),a!==g.cache&&Qr(i,[yn],l,!0),cs(),a=b.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=fp(e,i,a,l);break e}else if(a!==f){f=ci(Error(s(424)),i),os(f),i=fp(e,i,a,l);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ln=mi(e.firstChild),Nn=i,Dt=!0,ho=null,pi=!0,l=af(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if($o(),a===f){i=Ki(e,i,l);break e}Rn(e,i,a,l)}i=i.child}return i;case 26:return Ta(e,i),e===null?(l=A0(i.type,null,i.pendingProps,null))?i.memoizedState=l:Dt||(l=i.type,e=i.pendingProps,a=Ha(_.current).createElement(l),a[tt]=i,a[wt]=e,kn(a,l,e),un(a),i.stateNode=a):i.memoizedState=A0(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Ie(i),e===null&&Dt&&(a=i.stateNode=w0(i.type,i.pendingProps,_.current),Nn=i,pi=!0,f=ln,Mo(i.type)?(gc=f,ln=mi(a.firstChild)):ln=f),Rn(e,i,i.pendingProps.children,l),Ta(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Dt&&((f=a=ln)&&(a=Rv(a,i.type,i.pendingProps,pi),a!==null?(i.stateNode=a,Nn=i,ln=mi(a.firstChild),pi=!1,f=!0):f=!1),f||mo(i)),Ie(i),f=i.type,g=i.pendingProps,b=e!==null?e.memoizedProps:null,a=g.children,dc(f,g)?a=null:b!==null&&dc(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=cu(e,i,jy,null,null,l),ks._currentValue=f),Ta(e,i),Rn(e,i,a,l),i.child;case 6:return e===null&&Dt&&((e=l=ln)&&(l=kv(l,i.pendingProps,pi),l!==null?(i.stateNode=l,Nn=i,ln=null,e=!0):e=!1),e||mo(i)),null;case 13:return pp(e,i,l);case 4:return ie(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Zo(i,null,a,l):Rn(e,i,a,l),i.child;case 11:return op(e,i,i.type,i.pendingProps,l);case 7:return Rn(e,i,i.pendingProps,l),i.child;case 8:return Rn(e,i,i.pendingProps.children,l),i.child;case 12:return Rn(e,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,go(i,i.type,a.value),Rn(e,i,a.children,l),i.child;case 9:return f=i.type._context,a=i.pendingProps.children,Jo(i),f=Mn(f),a=a(f),i.flags|=1,Rn(e,i,a,l),i.child;case 14:return lp(e,i,i.type,i.pendingProps,l);case 15:return sp(e,i,i.type,i.pendingProps,l);case 19:return mp(e,i,l);case 31:return Wy(e,i,l);case 22:return ap(e,i,l,i.pendingProps);case 24:return Jo(i),a=Mn(yn),e===null?(f=eu(),f===null&&(f=en,g=Zr(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),i.memoizedState={parent:a,cache:f},nu(i),go(i,yn,f)):((e.lanes&l)!==0&&(iu(e,i),ds(i,null,null,l),cs()),f=e.memoizedState,g=i.memoizedState,f.parent!==a?(f={parent:a,cache:a},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),go(i,yn,a)):(a=g.cache,go(i,yn,a),a!==f.cache&&Qr(i,[yn],l,!0))),Rn(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Xi(e){e.flags|=4}function Gu(e,i,l,a,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Op())e.flags|=8192;else throw Qo=aa,tu}else e.flags&=-16777217}function yp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!I0(i))if(Op())e.flags|=8192;else throw Qo=aa,tu}function wa(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?He():536870912,e.lanes|=i,Nl|=i)}function ys(e,i){if(!Dt)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function sn(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(i)for(var f=e.child;f!==null;)l|=f.lanes|f.childLanes,a|=f.subtreeFlags&65011712,a|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)l|=f.lanes|f.childLanes,a|=f.subtreeFlags,a|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=a,e.childLanes=l,i}function tv(e,i,l){var a=i.pendingProps;switch($r(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(i),null;case 1:return sn(i),null;case 3:return l=i.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),$i(yn),le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ml(i)?Xi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Jr())),sn(i),null;case 26:var f=i.type,g=i.memoizedState;return e===null?(Xi(i),g!==null?(sn(i),yp(i,g)):(sn(i),Gu(i,f,null,a,l))):g?g!==e.memoizedState?(Xi(i),sn(i),yp(i,g)):(sn(i),i.flags&=-16777217):(e=e.memoizedProps,e!==a&&Xi(i),sn(i),Gu(i,f,e,a,l)),null;case 27:if(Ce(i),l=_.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&Xi(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return sn(i),null}e=Ee.current,ml(i)?Kd(i):(e=w0(f,a,l),i.stateNode=e,Xi(i))}return sn(i),null;case 5:if(Ce(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&Xi(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return sn(i),null}if(g=Ee.current,ml(i))Kd(i);else{var b=Ha(_.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?b.createElement("select",{is:a.is}):b.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?b.createElement(f,{is:a.is}):b.createElement(f)}}g[tt]=i,g[wt]=a;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(kn(g,f,a),f){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Xi(i)}}return sn(i),Gu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==a&&Xi(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(e=_.current,ml(i)){if(e=i.stateNode,l=i.memoizedProps,a=null,f=Nn,f!==null)switch(f.tag){case 27:case 5:a=f.memoizedProps}e[tt]=i,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||p0(e.nodeValue,l)),e||mo(i,!0)}else e=Ha(e).createTextNode(a),e[tt]=i,i.stateNode=e}return sn(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(a=ml(i),l!==null){if(e===null){if(!a)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[tt]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;sn(i),e=!1}else l=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(ii(i),i):(ii(i),null);if((i.flags&128)!==0)throw Error(s(558))}return sn(i),null;case 13:if(a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=ml(i),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[tt]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;sn(i),f=!1}else f=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ii(i),i):(ii(i),null)}return ii(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=i.child,f=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(f=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==f&&(a.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),wa(i,i.updateQueue),sn(i),null);case 4:return le(),e===null&&sc(i.stateNode.containerInfo),sn(i),null;case 10:return $i(i.type),sn(i),null;case 19:if(R(mn),a=i.memoizedState,a===null)return sn(i),null;if(f=(i.flags&128)!==0,g=a.rendering,g===null)if(f)ys(a,!1);else{if(fn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=da(e),g!==null){for(i.flags|=128,ys(a,!1),e=g.updateQueue,i.updateQueue=e,wa(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)qd(l,e),l=l.sibling;return ne(mn,mn.current&1|2),Dt&&qi(i,a.treeForkCount),i.child}e=e.sibling}a.tail!==null&&ve()>Ma&&(i.flags|=128,f=!0,ys(a,!1),i.lanes=4194304)}else{if(!f)if(e=da(g),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,wa(i,e),ys(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!Dt)return sn(i),null}else 2*ve()-a.renderingStartTime>Ma&&l!==536870912&&(i.flags|=128,f=!0,ys(a,!1),i.lanes=4194304);a.isBackwards?(g.sibling=i.child,i.child=g):(e=a.last,e!==null?e.sibling=g:i.child=g,a.last=g)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ve(),e.sibling=null,l=mn.current,ne(mn,f?l&1|2:l&1),Dt&&qi(i,a.treeForkCount),e):(sn(i),null);case 22:case 23:return ii(i),au(),a=i.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(sn(i),i.subtreeFlags&6&&(i.flags|=8192)):sn(i),l=i.updateQueue,l!==null&&wa(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),e!==null&&R(Ko),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),$i(yn),sn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function nv(e,i){switch($r(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return $i(yn),le(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ce(i),null;case 31:if(i.memoizedState!==null){if(ii(i),i.alternate===null)throw Error(s(340));$o()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ii(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));$o()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return R(mn),null;case 4:return le(),null;case 10:return $i(i.type),null;case 22:case 23:return ii(i),au(),e!==null&&R(Ko),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return $i(yn),null;case 25:return null;default:return null}}function vp(e,i){switch($r(i),i.tag){case 3:$i(yn),le();break;case 26:case 27:case 5:Ce(i);break;case 4:le();break;case 31:i.memoizedState!==null&&ii(i);break;case 13:ii(i);break;case 19:R(mn);break;case 10:$i(i.type);break;case 22:case 23:ii(i),au(),e!==null&&R(Ko);break;case 24:$i(yn)}}function vs(e,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var f=a.next;l=f;do{if((l.tag&e)===e){a=void 0;var g=l.create,b=l.inst;a=g(),b.destroy=a}l=l.next}while(l!==f)}}catch(E){$t(i,i.return,E)}}function To(e,i,l){try{var a=i.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var g=f.next;a=g;do{if((a.tag&e)===e){var b=a.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=i;var I=l,j=E;try{j()}catch(ce){$t(f,I,ce)}}}a=a.next}while(a!==g)}}catch(ce){$t(i,i.return,ce)}}function xp(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{uf(i,l)}catch(a){$t(e,e.return,a)}}}function bp(e,i,l){l.props=el(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){$t(e,i,a)}}function xs(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(f){$t(e,i,f)}}function Pi(e,i){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(f){$t(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){$t(e,i,f)}else l.current=null}function Sp(e){var i=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(f){$t(e,e.return,f)}}function Hu(e,i,l){try{var a=e.stateNode;wv(a,e.type,l,i),a[wt]=i}catch(f){$t(e,e.return,f)}}function Tp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mo(e.type)||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bu(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=qt));else if(a!==4&&(a===27&&Mo(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(Bu(e,i,l),e=e.sibling;e!==null;)Bu(e,i,l),e=e.sibling}function Ea(e,i,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(a!==4&&(a===27&&Mo(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ea(e,i,l),e=e.sibling;e!==null;)Ea(e,i,l),e=e.sibling}function Cp(e){var i=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);kn(i,a,l),i[tt]=e,i[wt]=l}catch(g){$t(e,e.return,g)}}var Qi=!1,bn=!1,Fu=!1,wp=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function iv(e,i){if(e=e.containerInfo,uc=$a,e=Ud(e),Ur(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var f=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,E=-1,I=-1,j=0,ce=0,ye=e,Y=null;t:for(;;){for(var te;ye!==l||f!==0&&ye.nodeType!==3||(E=b+f),ye!==g||a!==0&&ye.nodeType!==3||(I=b+a),ye.nodeType===3&&(b+=ye.nodeValue.length),(te=ye.firstChild)!==null;)Y=ye,ye=te;for(;;){if(ye===e)break t;if(Y===l&&++j===f&&(E=b),Y===g&&++ce===a&&(I=b),(te=ye.nextSibling)!==null)break;ye=Y,Y=ye.parentNode}ye=te}l=E===-1||I===-1?null:{start:E,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(cc={focusedElem:e,selectionRange:l},$a=!1,Cn=i;Cn!==null;)if(i=Cn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Cn=e;else for(;Cn!==null;){switch(i=Cn,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)f=e[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,f=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var Xe=el(l.type,f);e=a.getSnapshotBeforeUpdate(Xe,g),a.__reactInternalSnapshotBeforeUpdate=e}catch(rt){$t(l,l.return,rt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)pc(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Cn=e;break}Cn=i.return}}function Ep(e,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Wi(e,l),a&4&&vs(5,l);break;case 1:if(Wi(e,l),a&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(b){$t(l,l.return,b)}else{var f=el(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){$t(l,l.return,b)}}a&64&&xp(l),a&512&&xs(l,l.return);break;case 3:if(Wi(e,l),a&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{uf(e,i)}catch(b){$t(l,l.return,b)}}break;case 27:i===null&&a&4&&Cp(l);case 26:case 5:Wi(e,l),i===null&&a&4&&Sp(l),a&512&&xs(l,l.return);break;case 12:Wi(e,l);break;case 31:Wi(e,l),a&4&&Np(e,l);break;case 13:Wi(e,l),a&4&&Mp(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=fv.bind(null,l),Iv(e,l))));break;case 22:if(a=l.memoizedState!==null||Qi,!a){i=i!==null&&i.memoizedState!==null||bn,f=Qi;var g=bn;Qi=a,(bn=i)&&!g?eo(e,l,(l.subtreeFlags&8772)!==0):Wi(e,l),Qi=f,bn=g}break;case 30:break;default:Wi(e,l)}}function _p(e){var i=e.alternate;i!==null&&(e.alternate=null,_p(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ll(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rn=null,$n=!1;function Zi(e,i,l){for(l=l.child;l!==null;)Ap(e,i,l),l=l.sibling}function Ap(e,i,l){if(K&&typeof K.onCommitFiberUnmount=="function")try{K.onCommitFiberUnmount(re,l)}catch{}switch(l.tag){case 26:bn||Pi(l,i),Zi(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bn||Pi(l,i);var a=rn,f=$n;Mo(l.type)&&(rn=l.stateNode,$n=!1),Zi(e,i,l),Ns(l.stateNode),rn=a,$n=f;break;case 5:bn||Pi(l,i);case 6:if(a=rn,f=$n,rn=null,Zi(e,i,l),rn=a,$n=f,rn!==null)if($n)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(l.stateNode)}catch(g){$t(l,i,g)}else try{rn.removeChild(l.stateNode)}catch(g){$t(l,i,g)}break;case 18:rn!==null&&($n?(e=rn,x0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Ll(e)):x0(rn,l.stateNode));break;case 4:a=rn,f=$n,rn=l.stateNode.containerInfo,$n=!0,Zi(e,i,l),rn=a,$n=f;break;case 0:case 11:case 14:case 15:To(2,l,i),bn||To(4,l,i),Zi(e,i,l);break;case 1:bn||(Pi(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&bp(l,i,a)),Zi(e,i,l);break;case 21:Zi(e,i,l);break;case 22:bn=(a=bn)||l.memoizedState!==null,Zi(e,i,l),bn=a;break;default:Zi(e,i,l)}}function Np(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ll(e)}catch(l){$t(i,i.return,l)}}}function Mp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ll(e)}catch(l){$t(i,i.return,l)}}function ov(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new wp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new wp),i;default:throw Error(s(435,e.tag))}}function _a(e,i){var l=ov(e);i.forEach(function(a){if(!l.has(a)){l.add(a);var f=pv.bind(null,e,a);a.then(f,f)}})}function Yn(e,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var f=l[a],g=e,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Mo(E.type)){rn=E.stateNode,$n=!1;break e}break;case 5:rn=E.stateNode,$n=!1;break e;case 3:case 4:rn=E.stateNode.containerInfo,$n=!0;break e}E=E.return}if(rn===null)throw Error(s(160));Ap(g,b,f),rn=null,$n=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Rp(i,e),i=i.sibling}var Ei=null;function Rp(e,i){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yn(i,e),Jn(e),a&4&&(To(3,e,e.return),vs(3,e),To(5,e,e.return));break;case 1:Yn(i,e),Jn(e),a&512&&(bn||l===null||Pi(l,l.return)),a&64&&Qi&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var f=Ei;if(Yn(i,e),Jn(e),a&512&&(bn||l===null||Pi(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,f=f.ownerDocument||f;t:switch(a){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ho]||g[tt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(a),f.head.insertBefore(g,f.querySelector("head > title"))),kn(g,a,l),g[tt]=e,un(g),a=g;break e;case"link":var b=R0("link","href",f).get(a+(l.href||""));if(b){for(var E=0;E<b.length;E++)if(g=b[E],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(E,1);break t}}g=f.createElement(a),kn(g,a,l),f.head.appendChild(g);break;case"meta":if(b=R0("meta","content",f).get(a+(l.content||""))){for(E=0;E<b.length;E++)if(g=b[E],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(E,1);break t}}g=f.createElement(a),kn(g,a,l),f.head.appendChild(g);break;default:throw Error(s(468,a))}g[tt]=e,un(g),a=g}e.stateNode=a}else k0(f,e.type,e.stateNode);else e.stateNode=M0(f,a,e.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?k0(f,e.type,e.stateNode):M0(f,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Hu(e,e.memoizedProps,l.memoizedProps)}break;case 27:Yn(i,e),Jn(e),a&512&&(bn||l===null||Pi(l,l.return)),l!==null&&a&4&&Hu(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Yn(i,e),Jn(e),a&512&&(bn||l===null||Pi(l,l.return)),e.flags&32){f=e.stateNode;try{Kt(f,"")}catch(Xe){$t(e,e.return,Xe)}}a&4&&e.stateNode!=null&&(f=e.memoizedProps,Hu(e,f,l!==null?l.memoizedProps:f)),a&1024&&(Fu=!0);break;case 6:if(Yn(i,e),Jn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(Xe){$t(e,e.return,Xe)}}break;case 3:if(Fa=null,f=Ei,Ei=Va(i.containerInfo),Yn(i,e),Ei=f,Jn(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Ll(i.containerInfo)}catch(Xe){$t(e,e.return,Xe)}Fu&&(Fu=!1,kp(e));break;case 4:a=Ei,Ei=Va(e.stateNode.containerInfo),Yn(i,e),Jn(e),Ei=a;break;case 12:Yn(i,e),Jn(e);break;case 31:Yn(i,e),Jn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 13:Yn(i,e),Jn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Na=ve()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 22:f=e.memoizedState!==null;var I=l!==null&&l.memoizedState!==null,j=Qi,ce=bn;if(Qi=j||f,bn=ce||I,Yn(i,e),bn=ce,Qi=j,Jn(e),a&8192)e:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(l===null||I||Qi||bn||tl(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){I=l=i;try{if(g=I.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=I.stateNode;var ye=I.memoizedProps.style,Y=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;E.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Xe){$t(I,I.return,Xe)}}}else if(i.tag===6){if(l===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(Xe){$t(I,I.return,Xe)}}}else if(i.tag===18){if(l===null){I=i;try{var te=I.stateNode;f?b0(te,!0):b0(I.stateNode,!1)}catch(Xe){$t(I,I.return,Xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,_a(e,l))));break;case 19:Yn(i,e),Jn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 30:break;case 21:break;default:Yn(i,e),Jn(e)}}function Jn(e){var i=e.flags;if(i&2){try{for(var l,a=e.return;a!==null;){if(Tp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var f=l.stateNode,g=Vu(e);Ea(e,g,f);break;case 5:var b=l.stateNode;l.flags&32&&(Kt(b,""),l.flags&=-33);var E=Vu(e);Ea(e,E,b);break;case 3:case 4:var I=l.stateNode.containerInfo,j=Vu(e);Bu(e,j,I);break;default:throw Error(s(161))}}catch(ce){$t(e,e.return,ce)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function kp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;kp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Wi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ep(e,i.alternate,i),i=i.sibling}function tl(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:To(4,i,i.return),tl(i);break;case 1:Pi(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&bp(i,i.return,l),tl(i);break;case 27:Ns(i.stateNode);case 26:case 5:Pi(i,i.return),tl(i);break;case 22:i.memoizedState===null&&tl(i);break;case 30:tl(i);break;default:tl(i)}e=e.sibling}}function eo(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,f=e,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:eo(f,g,l),vs(4,g);break;case 1:if(eo(f,g,l),a=g,f=a.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){$t(a,a.return,j)}if(a=g,f=a.updateQueue,f!==null){var E=a.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)rf(I[f],E)}catch(j){$t(a,a.return,j)}}l&&b&64&&xp(g),xs(g,g.return);break;case 27:Cp(g);case 26:case 5:eo(f,g,l),l&&a===null&&b&4&&Sp(g),xs(g,g.return);break;case 12:eo(f,g,l);break;case 31:eo(f,g,l),l&&b&4&&Np(f,g);break;case 13:eo(f,g,l),l&&b&4&&Mp(f,g);break;case 22:g.memoizedState===null&&eo(f,g,l),xs(g,g.return);break;case 30:break;default:eo(f,g,l)}i=i.sibling}}function Ou(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ls(l))}function qu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ls(e))}function _i(e,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ip(e,i,l,a),i=i.sibling}function Ip(e,i,l,a){var f=i.flags;switch(i.tag){case 0:case 11:case 15:_i(e,i,l,a),f&2048&&vs(9,i);break;case 1:_i(e,i,l,a);break;case 3:_i(e,i,l,a),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ls(e)));break;case 12:if(f&2048){_i(e,i,l,a),e=i.stateNode;try{var g=i.memoizedProps,b=g.id,E=g.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){$t(i,i.return,I)}}else _i(e,i,l,a);break;case 31:_i(e,i,l,a);break;case 13:_i(e,i,l,a);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?_i(e,i,l,a):bs(e,i):g._visibility&2?_i(e,i,l,a):(g._visibility|=2,El(e,i,l,a,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Ou(b,i);break;case 24:_i(e,i,l,a),f&2048&&qu(i.alternate,i);break;default:_i(e,i,l,a)}}function El(e,i,l,a,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,b=i,E=l,I=a,j=b.flags;switch(b.tag){case 0:case 11:case 15:El(g,b,E,I,f),vs(8,b);break;case 23:break;case 22:var ce=b.stateNode;b.memoizedState!==null?ce._visibility&2?El(g,b,E,I,f):bs(g,b):(ce._visibility|=2,El(g,b,E,I,f)),f&&j&2048&&Ou(b.alternate,b);break;case 24:El(g,b,E,I,f),f&&j&2048&&qu(b.alternate,b);break;default:El(g,b,E,I,f)}i=i.sibling}}function bs(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,a=i,f=a.flags;switch(a.tag){case 22:bs(l,a),f&2048&&Ou(a.alternate,a);break;case 24:bs(l,a),f&2048&&qu(a.alternate,a);break;default:bs(l,a)}i=i.sibling}}var Ss=8192;function _l(e,i,l){if(e.subtreeFlags&Ss)for(e=e.child;e!==null;)zp(e,i,l),e=e.sibling}function zp(e,i,l){switch(e.tag){case 26:_l(e,i,l),e.flags&Ss&&e.memoizedState!==null&&qv(l,Ei,e.memoizedState,e.memoizedProps);break;case 5:_l(e,i,l);break;case 3:case 4:var a=Ei;Ei=Va(e.stateNode.containerInfo),_l(e,i,l),Ei=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Ss,Ss=16777216,_l(e,i,l),Ss=a):_l(e,i,l));break;default:_l(e,i,l)}}function Dp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ts(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Cn=a,Lp(a,e)}Dp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Up(e),e=e.sibling}function Up(e){switch(e.tag){case 0:case 11:case 15:Ts(e),e.flags&2048&&To(9,e,e.return);break;case 3:Ts(e);break;case 12:Ts(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Aa(e)):Ts(e);break;default:Ts(e)}}function Aa(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Cn=a,Lp(a,e)}Dp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:To(8,i,i.return),Aa(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Aa(i));break;default:Aa(i)}e=e.sibling}}function Lp(e,i){for(;Cn!==null;){var l=Cn;switch(l.tag){case 0:case 11:case 15:To(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ls(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Cn=a;else e:for(l=e;Cn!==null;){a=Cn;var f=a.sibling,g=a.return;if(_p(a),a===l){Cn=null;break e}if(f!==null){f.return=g,Cn=f;break e}Cn=g}}}var lv={getCacheForType:function(e){var i=Mn(yn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return Mn(yn).controller.signal}},sv=typeof WeakMap=="function"?WeakMap:Map,Bt=0,en=null,Mt=null,It=0,jt=0,oi=null,Co=!1,Al=!1,ju=!1,to=0,fn=0,wo=0,nl=0,$u=0,li=0,Nl=0,Cs=null,Kn=null,Yu=!1,Na=0,Pp=0,Ma=1/0,Ra=null,Eo=null,Tn=0,_o=null,Ml=null,no=0,Ju=0,Ku=null,Gp=null,ws=0,Xu=null;function si(){return(Bt&2)!==0&&It!==0?It&-It:B.T!==null?nc():Hi()}function Hp(){if(li===0)if((It&536870912)===0||Dt){var e=Yt;Yt<<=1,(Yt&3932160)===0&&(Yt=262144),li=e}else li=536870912;return e=ni.current,e!==null&&(e.flags|=32),li}function Xn(e,i,l){(e===en&&(jt===2||jt===9)||e.cancelPendingCommit!==null)&&(Rl(e,0),Ao(e,It,li,!1)),dt(e,l),((Bt&2)===0||e!==en)&&(e===en&&((Bt&2)===0&&(nl|=l),fn===4&&Ao(e,It,li,!1)),Gi(e))}function Vp(e,i,l){if((Bt&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&e.expiredLanes)===0||ut(e,i),f=a?uv(e,i):Zu(e,i,!0),g=a;do{if(f===0){Al&&!a&&Ao(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!av(l)){f=Zu(e,i,!1),g=!1;continue}if(f===2){if(g=i,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var E=e;f=Cs;var I=E.current.memoizedState.isDehydrated;if(I&&(Rl(E,b).flags|=256),b=Zu(E,b,!1),b!==2){if(ju&&!I){E.errorRecoveryDisabledLanes|=g,nl|=g,f=4;break e}g=Kn,Kn=f,g!==null&&(Kn===null?Kn=g:Kn.push.apply(Kn,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){Rl(e,0),Ao(e,i,0,!0);break}e:{switch(a=e,g=f,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ao(a,i,li,!Co);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Na+300-ve(),10<f)){if(Ao(a,i,li,!Co),Me(a,0,!0)!==0)break e;no=i,a.timeoutHandle=y0(Bp.bind(null,a,l,Kn,Ra,Yu,i,li,nl,Nl,Co,g,"Throttled",-0,0),f);break e}Bp(a,l,Kn,Ra,Yu,i,li,nl,Nl,Co,g,null,-0,0)}}break}while(!0);Gi(e)}function Bp(e,i,l,a,f,g,b,E,I,j,ce,ye,Y,te){if(e.timeoutHandle=-1,ye=i.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qt},zp(i,g,ye);var Xe=(g&62914560)===g?Na-ve():(g&4194048)===g?Pp-ve():0;if(Xe=jv(ye,Xe),Xe!==null){no=g,e.cancelPendingCommit=Xe(Kp.bind(null,e,i,g,l,a,f,b,E,I,ce,ye,null,Y,te)),Ao(e,g,b,!j);return}}Kp(e,i,g,l,a,f,b,E,I)}function av(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var f=l[a],g=f.getSnapshot;f=f.value;try{if(!ei(g(),f))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ao(e,i,l,a){i&=~$u,i&=~nl,e.suspendedLanes|=i,e.pingedLanes&=~i,a&&(e.warmLanes|=i),a=e.expirationTimes;for(var f=i;0<f;){var g=31-je(f),b=1<<g;a[g]=-1,f&=~b}l!==0&&Lt(e,l,i)}function ka(){return(Bt&6)===0?(Es(0),!1):!0}function Qu(){if(Mt!==null){if(jt===0)var e=Mt.return;else e=Mt,ji=Yo=null,pu(e),bl=null,as=0,e=Mt;for(;e!==null;)vp(e.alternate,e),e=e.return;Mt=null}}function Rl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Av(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),no=0,Qu(),en=e,Mt=l=Oi(e.current,null),It=i,jt=0,oi=null,Co=!1,Al=ut(e,i),ju=!1,Nl=li=$u=nl=wo=fn=0,Kn=Cs=null,Yu=!1,(i&8)!==0&&(i|=i&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=i;0<a;){var f=31-je(a),g=1<<f;i|=e[f],a&=~g}return to=i,Zs(),l}function Fp(e,i){Tt=null,B.H=ms,i===xl||i===sa?(i=of(),jt=3):i===tu?(i=of(),jt=4):jt=i===Mu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,oi=i,Mt===null&&(fn=1,ba(e,ci(i,e.current)))}function Op(){var e=ni.current;return e===null?!0:(It&4194048)===It?hi===null:(It&62914560)===It||(It&536870912)!==0?e===hi:!1}function qp(){var e=B.H;return B.H=ms,e===null?ms:e}function jp(){var e=B.A;return B.A=lv,e}function Ia(){fn=4,Co||(It&4194048)!==It&&ni.current!==null||(Al=!0),(wo&134217727)===0&&(nl&134217727)===0||en===null||Ao(en,It,li,!1)}function Zu(e,i,l){var a=Bt;Bt|=2;var f=qp(),g=jp();(en!==e||It!==i)&&(Ra=null,Rl(e,i)),i=!1;var b=fn;e:do try{if(jt!==0&&Mt!==null){var E=Mt,I=oi;switch(jt){case 8:Qu(),b=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(i=!0);var j=jt;if(jt=0,oi=null,kl(e,E,I,j),l&&Al){b=0;break e}break;default:j=jt,jt=0,oi=null,kl(e,E,I,j)}}rv(),b=fn;break}catch(ce){Fp(e,ce)}while(!0);return i&&e.shellSuspendCounter++,ji=Yo=null,Bt=a,B.H=f,B.A=g,Mt===null&&(en=null,It=0,Zs()),b}function rv(){for(;Mt!==null;)$p(Mt)}function uv(e,i){var l=Bt;Bt|=2;var a=qp(),f=jp();en!==e||It!==i?(Ra=null,Ma=ve()+500,Rl(e,i)):Al=ut(e,i);e:do try{if(jt!==0&&Mt!==null){i=Mt;var g=oi;t:switch(jt){case 1:jt=0,oi=null,kl(e,i,g,1);break;case 2:case 9:if(tf(g)){jt=0,oi=null,Yp(i);break}i=function(){jt!==2&&jt!==9||en!==e||(jt=7),Gi(e)},g.then(i,i);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:tf(g)?(jt=0,oi=null,Yp(i)):(jt=0,oi=null,kl(e,i,g,7));break;case 5:var b=null;switch(Mt.tag){case 26:b=Mt.memoizedState;case 5:case 27:var E=Mt;if(b?I0(b):E.stateNode.complete){jt=0,oi=null;var I=E.sibling;if(I!==null)Mt=I;else{var j=E.return;j!==null?(Mt=j,za(j)):Mt=null}break t}}jt=0,oi=null,kl(e,i,g,5);break;case 6:jt=0,oi=null,kl(e,i,g,6);break;case 8:Qu(),fn=6;break e;default:throw Error(s(462))}}cv();break}catch(ce){Fp(e,ce)}while(!0);return ji=Yo=null,B.H=a,B.A=f,Bt=l,Mt!==null?0:(en=null,It=0,Zs(),fn)}function cv(){for(;Mt!==null&&!pe();)$p(Mt)}function $p(e){var i=gp(e.alternate,e,to);e.memoizedProps=e.pendingProps,i===null?za(e):Mt=i}function Yp(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=cp(l,i,i.pendingProps,i.type,void 0,It);break;case 11:i=cp(l,i,i.pendingProps,i.type.render,i.ref,It);break;case 5:pu(i);default:vp(l,i),i=Mt=qd(i,to),i=gp(l,i,to)}e.memoizedProps=e.pendingProps,i===null?za(e):Mt=i}function kl(e,i,l,a){ji=Yo=null,pu(i),bl=null,as=0;var f=i.return;try{if(Zy(e,f,i,l,It)){fn=1,ba(e,ci(l,e.current)),Mt=null;return}}catch(g){if(f!==null)throw Mt=f,g;fn=1,ba(e,ci(l,e.current)),Mt=null;return}i.flags&32768?(Dt||a===1?e=!0:Al||(It&536870912)!==0?e=!1:(Co=e=!0,(a===2||a===9||a===3||a===6)&&(a=ni.current,a!==null&&a.tag===13&&(a.flags|=16384))),Jp(i,e)):za(i)}function za(e){var i=e;do{if((i.flags&32768)!==0){Jp(i,Co);return}e=i.return;var l=tv(i.alternate,i,to);if(l!==null){Mt=l;return}if(i=i.sibling,i!==null){Mt=i;return}Mt=i=e}while(i!==null);fn===0&&(fn=5)}function Jp(e,i){do{var l=nv(e.alternate,e);if(l!==null){l.flags&=32767,Mt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=l}while(e!==null);fn=6,Mt=null}function Kp(e,i,l,a,f,g,b,E,I){e.cancelPendingCommit=null;do Da();while(Tn!==0);if((Bt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Vr,ct(e,l,g,b,E,I),e===en&&(Mt=en=null,It=0),Ml=i,_o=e,no=l,Ju=g,Ku=f,Gp=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,hv(G,function(){return e0(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null,f=xe.p,xe.p=2,b=Bt,Bt|=4;try{iv(e,i,l)}finally{Bt=b,xe.p=f,B.T=a}}Tn=1,Xp(),Qp(),Zp()}}function Xp(){if(Tn===1){Tn=0;var e=_o,i=Ml,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var a=xe.p;xe.p=2;var f=Bt;Bt|=4;try{Rp(i,e);var g=cc,b=Ud(e.containerInfo),E=g.focusedElem,I=g.selectionRange;if(b!==E&&E&&E.ownerDocument&&Dd(E.ownerDocument.documentElement,E)){if(I!==null&&Ur(E)){var j=I.start,ce=I.end;if(ce===void 0&&(ce=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(ce,E.value.length);else{var ye=E.ownerDocument||document,Y=ye&&ye.defaultView||window;if(Y.getSelection){var te=Y.getSelection(),Xe=E.textContent.length,rt=Math.min(I.start,Xe),Zt=I.end===void 0?rt:Math.min(I.end,Xe);!te.extend&&rt>Zt&&(b=Zt,Zt=rt,rt=b);var V=zd(E,rt),U=zd(E,Zt);if(V&&U&&(te.rangeCount!==1||te.anchorNode!==V.node||te.anchorOffset!==V.offset||te.focusNode!==U.node||te.focusOffset!==U.offset)){var q=ye.createRange();q.setStart(V.node,V.offset),te.removeAllRanges(),rt>Zt?(te.addRange(q),te.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),te.addRange(q))}}}}for(ye=[],te=E;te=te.parentNode;)te.nodeType===1&&ye.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ye.length;E++){var me=ye[E];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}$a=!!uc,cc=uc=null}finally{Bt=f,xe.p=a,B.T=l}}e.current=i,Tn=2}}function Qp(){if(Tn===2){Tn=0;var e=_o,i=Ml,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var a=xe.p;xe.p=2;var f=Bt;Bt|=4;try{Ep(e,i.alternate,i)}finally{Bt=f,xe.p=a,B.T=l}}Tn=3}}function Zp(){if(Tn===4||Tn===3){Tn=0,Ae();var e=_o,i=Ml,l=no,a=Gp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Tn=5:(Tn=0,Ml=_o=null,Wp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Eo=null),Si(l),i=i.stateNode,K&&typeof K.onCommitFiberRoot=="function")try{K.onCommitFiberRoot(re,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=B.T,f=xe.p,xe.p=2,B.T=null;try{for(var g=e.onRecoverableError,b=0;b<a.length;b++){var E=a[b];g(E.value,{componentStack:E.stack})}}finally{B.T=i,xe.p=f}}(no&3)!==0&&Da(),Gi(e),f=e.pendingLanes,(l&261930)!==0&&(f&42)!==0?e===Xu?ws++:(ws=0,Xu=e):ws=0,Es(0)}}function Wp(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ls(i)))}function Da(){return Xp(),Qp(),Zp(),e0()}function e0(){if(Tn!==5)return!1;var e=_o,i=Ju;Ju=0;var l=Si(no),a=B.T,f=xe.p;try{xe.p=32>l?32:l,B.T=null,l=Ku,Ku=null;var g=_o,b=no;if(Tn=0,Ml=_o=null,no=0,(Bt&6)!==0)throw Error(s(331));var E=Bt;if(Bt|=4,Up(g.current),Ip(g,g.current,b,l),Bt=E,Es(0,!1),K&&typeof K.onPostCommitFiberRoot=="function")try{K.onPostCommitFiberRoot(re,g)}catch{}return!0}finally{xe.p=f,B.T=a,Wp(e,i)}}function t0(e,i,l){i=ci(l,i),i=Nu(e.stateNode,i,2),e=xo(e,i,2),e!==null&&(dt(e,2),Gi(e))}function $t(e,i,l){if(e.tag===3)t0(e,e,l);else for(;i!==null;){if(i.tag===3){t0(i,e,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Eo===null||!Eo.has(a))){e=ci(l,e),l=np(2),a=xo(i,l,2),a!==null&&(ip(l,a,i,e),dt(a,2),Gi(a));break}}i=i.return}}function Wu(e,i,l){var a=e.pingCache;if(a===null){a=e.pingCache=new sv;var f=new Set;a.set(i,f)}else f=a.get(i),f===void 0&&(f=new Set,a.set(i,f));f.has(l)||(ju=!0,f.add(l),e=dv.bind(null,e,i,l),i.then(e,e))}function dv(e,i,l){var a=e.pingCache;a!==null&&a.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,en===e&&(It&l)===l&&(fn===4||fn===3&&(It&62914560)===It&&300>ve()-Na?(Bt&2)===0&&Rl(e,0):$u|=l,Nl===It&&(Nl=0)),Gi(e)}function n0(e,i){i===0&&(i=He()),e=qo(e,i),e!==null&&(dt(e,i),Gi(e))}function fv(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),n0(e,l)}function pv(e,i){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,f=e.memoizedState;f!==null&&(l=f.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),n0(e,l)}function hv(e,i){return H(e,i)}var Ua=null,Il=null,ec=!1,La=!1,tc=!1,No=0;function Gi(e){e!==Il&&e.next===null&&(Il===null?Ua=Il=e:Il=Il.next=e),La=!0,ec||(ec=!0,gv())}function Es(e,i){if(!tc&&La){tc=!0;do for(var l=!1,a=Ua;a!==null;){if(e!==0){var f=a.pendingLanes;if(f===0)var g=0;else{var b=a.suspendedLanes,E=a.pingedLanes;g=(1<<31-je(42|e)+1)-1,g&=f&~(b&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,s0(a,g))}else g=It,g=Me(a,a===en?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||ut(a,g)||(l=!0,s0(a,g));a=a.next}while(l);tc=!1}}function mv(){i0()}function i0(){La=ec=!1;var e=0;No!==0&&_v()&&(e=No);for(var i=ve(),l=null,a=Ua;a!==null;){var f=a.next,g=o0(a,i);g===0?(a.next=null,l===null?Ua=f:l.next=f,f===null&&(Il=l)):(l=a,(e!==0||(g&3)!==0)&&(La=!0)),a=f}Tn!==0&&Tn!==5||Es(e),No!==0&&(No=0)}function o0(e,i){for(var l=e.suspendedLanes,a=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-je(g),E=1<<b,I=f[b];I===-1?((E&l)===0||(E&a)!==0)&&(f[b]=st(E,i)):I<=i&&(e.expiredLanes|=E),g&=~E}if(i=en,l=It,l=Me(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===i&&(jt===2||jt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ae(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||ut(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(a!==null&&ae(a),Si(l)){case 2:case 8:l=C;break;case 32:l=G;break;case 268435456:l=Z;break;default:l=G}return a=l0.bind(null,e),l=H(l,a),e.callbackPriority=i,e.callbackNode=l,i}return a!==null&&a!==null&&ae(a),e.callbackPriority=2,e.callbackNode=null,2}function l0(e,i){if(Tn!==0&&Tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Da()&&e.callbackNode!==l)return null;var a=It;return a=Me(e,e===en?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Vp(e,a,i),o0(e,ve()),e.callbackNode!=null&&e.callbackNode===l?l0.bind(null,e):null)}function s0(e,i){if(Da())return null;Vp(e,i,!0)}function gv(){Nv(function(){(Bt&6)!==0?H(w,mv):i0()})}function nc(){if(No===0){var e=yl;e===0&&(e=_t,_t<<=1,(_t&261888)===0&&(_t=256)),No=e}return No}function a0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Di(""+e)}function r0(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function yv(e,i,l,a,f){if(i==="submit"&&l&&l.stateNode===f){var g=a0((f[wt]||null).action),b=a.submitter;b&&(i=(i=b[wt]||null)?a0(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var E=new Js("action","action",null,a,f);e.push({event:E,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(No!==0){var I=b?r0(f,b):new FormData(f);Tu(l,{pending:!0,data:I,method:f.method,action:g},null,I)}}else typeof g=="function"&&(E.preventDefault(),I=b?r0(f,b):new FormData(f),Tu(l,{pending:!0,data:I,method:f.method,action:g},g,I))},currentTarget:f}]})}}for(var ic=0;ic<Hr.length;ic++){var oc=Hr[ic],vv=oc.toLowerCase(),xv=oc[0].toUpperCase()+oc.slice(1);wi(vv,"on"+xv)}wi(Gd,"onAnimationEnd"),wi(Hd,"onAnimationIteration"),wi(Vd,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(Uy,"onTransitionRun"),wi(Ly,"onTransitionStart"),wi(Py,"onTransitionCancel"),wi(Bd,"onTransitionEnd"),ai("onMouseEnter",["mouseout","mouseover"]),ai("onMouseLeave",["mouseout","mouseover"]),ai("onPointerEnter",["pointerout","pointerover"]),ai("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_s));function u0(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],f=a.event;a=a.listeners;e:{var g=void 0;if(i)for(var b=a.length-1;0<=b;b--){var E=a[b],I=E.instance,j=E.currentTarget;if(E=E.listener,I!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=j;try{g(f)}catch(ce){Qs(ce)}f.currentTarget=null,g=I}else for(b=0;b<a.length;b++){if(E=a[b],I=E.instance,j=E.currentTarget,E=E.listener,I!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=j;try{g(f)}catch(ce){Qs(ce)}f.currentTarget=null,g=I}}}}function Rt(e,i){var l=i[Qn];l===void 0&&(l=i[Qn]=new Set);var a=e+"__bubble";l.has(a)||(c0(i,e,2,!1),l.add(a))}function lc(e,i,l){var a=0;i&&(a|=4),c0(l,e,a,i)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function sc(e){if(!e[Pa]){e[Pa]=!0,ro.forEach(function(l){l!=="selectionchange"&&(bv.has(l)||lc(l,!1,e),lc(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Pa]||(i[Pa]=!0,lc("selectionchange",!1,i))}}function c0(e,i,l,a){switch(H0(i)){case 2:var f=Jv;break;case 8:f=Kv;break;default:f=Sc}l=f.bind(null,i,l,e),f=void 0,!qe||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),a?f!==void 0?e.addEventListener(i,l,{capture:!0,passive:f}):e.addEventListener(i,l,!0):f!==void 0?e.addEventListener(i,l,{passive:f}):e.addEventListener(i,l,!1)}function ac(e,i,l,a,f){var g=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var b=a.tag;if(b===3||b===4){var E=a.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=a.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=ao(E),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){a=g=b;continue e}E=E.parentNode}}a=a.return}Bo(function(){var j=g,ce=Pn(l),ye=[];e:{var Y=Fd.get(e);if(Y!==void 0){var te=Js,Xe=e;switch(e){case"keypress":if(cn(l)===0)break e;case"keydown":case"keyup":te=py;break;case"focusin":Xe="focus",te=Rr;break;case"focusout":Xe="blur",te=Rr;break;case"beforeblur":case"afterblur":te=Rr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=ty;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=gy;break;case Gd:case Hd:case Vd:te=oy;break;case Bd:te=vy;break;case"scroll":case"scrollend":te=Wg;break;case"wheel":te=by;break;case"copy":case"cut":case"paste":te=sy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=xd;break;case"toggle":case"beforetoggle":te=Ty}var rt=(i&4)!==0,Zt=!rt&&(e==="scroll"||e==="scrollend"),V=rt?Y!==null?Y+"Capture":null:Y;rt=[];for(var U=j,q;U!==null;){var me=U;if(q=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||q===null||V===null||(me=Ci(U,V),me!=null&&rt.push(As(U,me,q))),Zt)break;U=U.return}0<rt.length&&(Y=new te(Y,Xe,null,l,ce),ye.push({event:Y,listeners:rt}))}}if((i&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",Y&&l!==Dn&&(Xe=l.relatedTarget||l.fromElement)&&(ao(Xe)||Xe[kt]))break e;if((te||Y)&&(Y=ce.window===ce?ce:(Y=ce.ownerDocument)?Y.defaultView||Y.parentWindow:window,te?(Xe=l.relatedTarget||l.toElement,te=j,Xe=Xe?ao(Xe):null,Xe!==null&&(Zt=d(Xe),rt=Xe.tag,Xe!==Zt||rt!==5&&rt!==27&&rt!==6)&&(Xe=null)):(te=null,Xe=j),te!==Xe)){if(rt=yd,me="onMouseLeave",V="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(rt=xd,me="onPointerLeave",V="onPointerEnter",U="pointer"),Zt=te==null?Y:Bi(te),q=Xe==null?Y:Bi(Xe),Y=new rt(me,U+"leave",te,l,ce),Y.target=Zt,Y.relatedTarget=q,me=null,ao(ce)===j&&(rt=new rt(V,U+"enter",Xe,l,ce),rt.target=q,rt.relatedTarget=Zt,me=rt),Zt=me,te&&Xe)t:{for(rt=Sv,V=te,U=Xe,q=0,me=V;me;me=rt(me))q++;me=0;for(var ot=U;ot;ot=rt(ot))me++;for(;0<q-me;)V=rt(V),q--;for(;0<me-q;)U=rt(U),me--;for(;q--;){if(V===U||U!==null&&V===U.alternate){rt=V;break t}V=rt(V),U=rt(U)}rt=null}else rt=null;te!==null&&d0(ye,Y,te,rt,!1),Xe!==null&&Zt!==null&&d0(ye,Zt,Xe,rt,!0)}}e:{if(Y=j?Bi(j):window,te=Y.nodeName&&Y.nodeName.toLowerCase(),te==="select"||te==="input"&&Y.type==="file")var Gt=Ad;else if(Ed(Y))if(Nd)Gt=Iy;else{Gt=Ry;var We=My}else te=Y.nodeName,!te||te.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?j&&zi(j.elementType)&&(Gt=Ad):Gt=ky;if(Gt&&(Gt=Gt(e,j))){_d(ye,Gt,l,ce);break e}We&&We(e,Y,j),e==="focusout"&&j&&Y.type==="number"&&j.memoizedProps.value!=null&&Zn(Y,"number",Y.value)}switch(We=j?Bi(j):window,e){case"focusin":(Ed(We)||We.contentEditable==="true")&&(ul=We,Lr=j,ns=null);break;case"focusout":ns=Lr=ul=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,Ld(ye,l,ce);break;case"selectionchange":if(Dy)break;case"keydown":case"keyup":Ld(ye,l,ce)}var Ct;if(Ir)e:{switch(e){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else rl?Cd(e,l)&&(zt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(zt="onCompositionStart");zt&&(bd&&l.locale!=="ko"&&(rl||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&rl&&(Ct=Pt()):(it=ce,Oe="value"in it?it.value:it.textContent,rl=!0)),We=Ga(j,zt),0<We.length&&(zt=new vd(zt,e,null,l,ce),ye.push({event:zt,listeners:We}),Ct?zt.data=Ct:(Ct=wd(l),Ct!==null&&(zt.data=Ct)))),(Ct=wy?Ey(e,l):_y(e,l))&&(zt=Ga(j,"onBeforeInput"),0<zt.length&&(We=new vd("onBeforeInput","beforeinput",null,l,ce),ye.push({event:We,listeners:zt}),We.data=Ct)),yv(ye,e,j,l,ce)}u0(ye,i)})}function As(e,i,l){return{instance:e,listener:i,currentTarget:l}}function Ga(e,i){for(var l=i+"Capture",a=[];e!==null;){var f=e,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Ci(e,l),f!=null&&a.unshift(As(e,f,g)),f=Ci(e,i),f!=null&&a.push(As(e,f,g))),e.tag===3)return a;e=e.return}return[]}function Sv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function d0(e,i,l,a,f){for(var g=i._reactName,b=[];l!==null&&l!==a;){var E=l,I=E.alternate,j=E.stateNode;if(E=E.tag,I!==null&&I===a)break;E!==5&&E!==26&&E!==27||j===null||(I=j,f?(j=Ci(l,g),j!=null&&b.unshift(As(l,j,I))):f||(j=Ci(l,g),j!=null&&b.push(As(l,j,I)))),l=l.return}b.length!==0&&e.push({event:i,listeners:b})}var Tv=/\r\n?/g,Cv=/\u0000|\uFFFD/g;function f0(e){return(typeof e=="string"?e:""+e).replace(Tv,`
`).replace(Cv,"")}function p0(e,i){return i=f0(i),f0(e)===i}function Qt(e,i,l,a,f,g){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||Kt(e,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&Kt(e,""+a);break;case"className":Le(e,"class",a);break;case"tabIndex":Le(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Le(e,l,a);break;case"style":Wn(e,a,g);break;case"data":if(i!=="object"){Le(e,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=Di(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&Qt(e,i,"name",f.name,f,null),Qt(e,i,"formEncType",f.formEncType,f,null),Qt(e,i,"formMethod",f.formMethod,f,null),Qt(e,i,"formTarget",f.formTarget,f,null)):(Qt(e,i,"encType",f.encType,f,null),Qt(e,i,"method",f.method,f,null),Qt(e,i,"target",f.target,f,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=Di(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=qt);break;case"onScroll":a!=null&&Rt("scroll",e);break;case"onScrollEnd":a!=null&&Rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=Di(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":Rt("beforetoggle",e),Rt("toggle",e),W(e,"popover",a);break;case"xlinkActuate":Q(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Q(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Q(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Q(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Q(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Q(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Q(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Q(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Q(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":W(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Fi.get(l)||l,W(e,l,a))}}function rc(e,i,l,a,f,g){switch(l){case"style":Wn(e,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof a=="string"?Kt(e,a):(typeof a=="number"||typeof a=="bigint")&&Kt(e,""+a);break;case"onScroll":a!=null&&Rt("scroll",e);break;case"onScrollEnd":a!=null&&Rt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=qt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),i=l.slice(2,f?l.length-7:void 0),g=e[wt]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,f),typeof a=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,a,f);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):W(e,l,a)}}}function kn(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",e),Rt("load",e);var a=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":a=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qt(e,i,g,b,l,null)}}f&&Qt(e,i,"srcSet",l.srcSet,l,null),a&&Qt(e,i,"src",l.src,l,null);return;case"input":Rt("invalid",e);var E=g=b=f=null,I=null,j=null;for(a in l)if(l.hasOwnProperty(a)){var ce=l[a];if(ce!=null)switch(a){case"name":f=ce;break;case"type":b=ce;break;case"checked":I=ce;break;case"defaultChecked":j=ce;break;case"value":g=ce;break;case"defaultValue":E=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,i));break;default:Qt(e,i,a,ce,l,null)}}on(e,g,E,I,j,b,f,!1);return;case"select":Rt("invalid",e),a=b=g=null;for(f in l)if(l.hasOwnProperty(f)&&(E=l[f],E!=null))switch(f){case"value":g=E;break;case"defaultValue":b=E;break;case"multiple":a=E;default:Qt(e,i,f,E,l,null)}i=g,l=b,e.multiple=!!a,i!=null?$(e,!!a,i,!1):l!=null&&$(e,!!a,l,!0);return;case"textarea":Rt("invalid",e),g=f=a=null;for(b in l)if(l.hasOwnProperty(b)&&(E=l[b],E!=null))switch(b){case"value":a=E;break;case"defaultValue":f=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Qt(e,i,b,E,l,null)}Ut(e,a,f,g);return;case"option":for(I in l)l.hasOwnProperty(I)&&(a=l[I],a!=null)&&(I==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":Qt(e,i,I,a,l,null));return;case"dialog":Rt("beforetoggle",e),Rt("toggle",e),Rt("cancel",e),Rt("close",e);break;case"iframe":case"object":Rt("load",e);break;case"video":case"audio":for(a=0;a<_s.length;a++)Rt(_s[a],e);break;case"image":Rt("error",e),Rt("load",e);break;case"details":Rt("toggle",e);break;case"embed":case"source":case"link":Rt("error",e),Rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(a=l[j],a!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qt(e,i,j,a,l,null)}return;default:if(zi(i)){for(ce in l)l.hasOwnProperty(ce)&&(a=l[ce],a!==void 0&&rc(e,i,ce,a,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(a=l[E],a!=null&&Qt(e,i,E,a,l,null))}function wv(e,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,E=null,I=null,j=null,ce=null;for(te in l){var ye=l[te];if(l.hasOwnProperty(te)&&ye!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":I=ye;default:a.hasOwnProperty(te)||Qt(e,i,te,null,a,ye)}}for(var Y in a){var te=a[Y];if(ye=l[Y],a.hasOwnProperty(Y)&&(te!=null||ye!=null))switch(Y){case"type":g=te;break;case"name":f=te;break;case"checked":j=te;break;case"defaultChecked":ce=te;break;case"value":b=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,i));break;default:te!==ye&&Qt(e,i,Y,te,a,ye)}}Jt(e,b,E,I,j,ce,g,f);return;case"select":te=b=E=Y=null;for(g in l)if(I=l[g],l.hasOwnProperty(g)&&I!=null)switch(g){case"value":break;case"multiple":te=I;default:a.hasOwnProperty(g)||Qt(e,i,g,null,a,I)}for(f in a)if(g=a[f],I=l[f],a.hasOwnProperty(f)&&(g!=null||I!=null))switch(f){case"value":Y=g;break;case"defaultValue":E=g;break;case"multiple":b=g;default:g!==I&&Qt(e,i,f,g,a,I)}i=E,l=b,a=te,Y!=null?$(e,!!l,Y,!1):!!a!=!!l&&(i!=null?$(e,!!l,i,!0):$(e,!!l,l?[]:"",!1));return;case"textarea":te=Y=null;for(E in l)if(f=l[E],l.hasOwnProperty(E)&&f!=null&&!a.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Qt(e,i,E,null,a,f)}for(b in a)if(f=a[b],g=l[b],a.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":Y=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==g&&Qt(e,i,b,f,a,g)}gt(e,Y,te);return;case"option":for(var Xe in l)Y=l[Xe],l.hasOwnProperty(Xe)&&Y!=null&&!a.hasOwnProperty(Xe)&&(Xe==="selected"?e.selected=!1:Qt(e,i,Xe,null,a,Y));for(I in a)Y=a[I],te=l[I],a.hasOwnProperty(I)&&Y!==te&&(Y!=null||te!=null)&&(I==="selected"?e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":Qt(e,i,I,Y,a,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in l)Y=l[rt],l.hasOwnProperty(rt)&&Y!=null&&!a.hasOwnProperty(rt)&&Qt(e,i,rt,null,a,Y);for(j in a)if(Y=a[j],te=l[j],a.hasOwnProperty(j)&&Y!==te&&(Y!=null||te!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Qt(e,i,j,Y,a,te)}return;default:if(zi(i)){for(var Zt in l)Y=l[Zt],l.hasOwnProperty(Zt)&&Y!==void 0&&!a.hasOwnProperty(Zt)&&rc(e,i,Zt,void 0,a,Y);for(ce in a)Y=a[ce],te=l[ce],!a.hasOwnProperty(ce)||Y===te||Y===void 0&&te===void 0||rc(e,i,ce,Y,a,te);return}}for(var V in l)Y=l[V],l.hasOwnProperty(V)&&Y!=null&&!a.hasOwnProperty(V)&&Qt(e,i,V,null,a,Y);for(ye in a)Y=a[ye],te=l[ye],!a.hasOwnProperty(ye)||Y===te||Y==null&&te==null||Qt(e,i,ye,Y,a,te)}function h0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ev(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var f=l[a],g=f.transferSize,b=f.initiatorType,E=f.duration;if(g&&E&&h0(b)){for(b=0,E=f.responseEnd,a+=1;a<l.length;a++){var I=l[a],j=I.startTime;if(j>E)break;var ce=I.transferSize,ye=I.initiatorType;ce&&h0(ye)&&(I=I.responseEnd,b+=ce*(I<E?1:(E-j)/(I-j)))}if(--a,i+=8*(g+b)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var uc=null,cc=null;function Ha(e){return e.nodeType===9?e:e.ownerDocument}function m0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g0(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function dc(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fc=null;function _v(){var e=window.event;return e&&e.type==="popstate"?e===fc?!1:(fc=e,!0):(fc=null,!1)}var y0=typeof setTimeout=="function"?setTimeout:void 0,Av=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,Nv=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(e){return v0.resolve(null).then(e).catch(Mv)}:y0;function Mv(e){setTimeout(function(){throw e})}function Mo(e){return e==="head"}function x0(e,i){var l=i,a=0;do{var f=l.nextSibling;if(e.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(f),Ll(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Ns(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Ns(l);for(var g=l.firstChild;g;){var b=g.nextSibling,E=g.nodeName;g[Ho]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=b}}else l==="body"&&Ns(e.ownerDocument.body);l=f}while(l);Ll(i)}function b0(e,i){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function pc(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":pc(l),ll(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Rv(e,i,l,a){for(;e.nodeType===1;){var f=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Ho])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=mi(e.nextSibling),e===null)break}return null}function kv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=mi(e.nextSibling),e===null))return null;return e}function S0(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=mi(e.nextSibling),e===null))return null;return e}function hc(e){return e.data==="$?"||e.data==="$~"}function mc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Iv(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function mi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var gc=null;function T0(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return mi(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function C0(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function w0(e,i,l){switch(i=Ha(l),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ns(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ll(e)}var gi=new Map,E0=new Set;function Va(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var io=xe.d;xe.d={f:zv,r:Dv,D:Uv,C:Lv,L:Pv,m:Gv,X:Vv,S:Hv,M:Bv};function zv(){var e=io.f(),i=ka();return e||i}function Dv(e){var i=Vi(e);i!==null&&i.tag===5&&i.type==="form"?Ff(i):io.r(e)}var zl=typeof document>"u"?null:document;function _0(e,i,l){var a=zl;if(a&&typeof i=="string"&&i){var f=Re(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),E0.has(f)||(E0.add(f),e={rel:e,crossOrigin:l,href:i},a.querySelector(f)===null&&(i=a.createElement("link"),kn(i,"link",e),un(i),a.head.appendChild(i)))}}function Uv(e){io.D(e),_0("dns-prefetch",e,null)}function Lv(e,i){io.C(e,i),_0("preconnect",e,i)}function Pv(e,i,l){io.L(e,i,l);var a=zl;if(a&&e&&i){var f='link[rel="preload"][as="'+Re(i)+'"]';i==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Re(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Re(l.imageSizes)+'"]')):f+='[href="'+Re(e)+'"]';var g=f;switch(i){case"style":g=Dl(e);break;case"script":g=Ul(e)}gi.has(g)||(e=S({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),gi.set(g,e),a.querySelector(f)!==null||i==="style"&&a.querySelector(Ms(g))||i==="script"&&a.querySelector(Rs(g))||(i=a.createElement("link"),kn(i,"link",e),un(i),a.head.appendChild(i)))}}function Gv(e,i){io.m(e,i);var l=zl;if(l&&e){var a=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Re(a)+'"][href="'+Re(e)+'"]',g=f;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ul(e)}if(!gi.has(g)&&(e=S({rel:"modulepreload",href:e},i),gi.set(g,e),l.querySelector(f)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Rs(g)))return}a=l.createElement("link"),kn(a,"link",e),un(a),l.head.appendChild(a)}}}function Hv(e,i,l){io.S(e,i,l);var a=zl;if(a&&e){var f=ki(a).hoistableStyles,g=Dl(e);i=i||"default";var b=f.get(g);if(!b){var E={loading:0,preload:null};if(b=a.querySelector(Ms(g)))E.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":i},l),(l=gi.get(g))&&yc(e,l);var I=b=a.createElement("link");un(I),kn(I,"link",e),I._p=new Promise(function(j,ce){I.onload=j,I.onerror=ce}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ba(b,i,a)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(g,b)}}}function Vv(e,i){io.X(e,i);var l=zl;if(l&&e){var a=ki(l).hoistableScripts,f=Ul(e),g=a.get(f);g||(g=l.querySelector(Rs(f)),g||(e=S({src:e,async:!0},i),(i=gi.get(f))&&vc(e,i),g=l.createElement("script"),un(g),kn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function Bv(e,i){io.M(e,i);var l=zl;if(l&&e){var a=ki(l).hoistableScripts,f=Ul(e),g=a.get(f);g||(g=l.querySelector(Rs(f)),g||(e=S({src:e,async:!0,type:"module"},i),(i=gi.get(f))&&vc(e,i),g=l.createElement("script"),un(g),kn(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(f,g))}}function A0(e,i,l,a){var f=(f=_.current)?Va(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Dl(l.href),l=ki(f).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Dl(l.href);var g=ki(f).hoistableStyles,b=g.get(e);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=f.querySelector(Ms(e)))&&!g._p&&(b.instance=g,b.state.loading=5),gi.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},gi.set(e,l),g||Fv(f,e,l,b.state))),i&&a===null)throw Error(s(528,""));return b}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ul(l),l=ki(f).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Dl(e){return'href="'+Re(e)+'"'}function Ms(e){return'link[rel="stylesheet"]['+e+"]"}function N0(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Fv(e,i,l,a){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=e.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),kn(i,"link",l),un(i),e.head.appendChild(i))}function Ul(e){return'[src="'+Re(e)+'"]'}function Rs(e){return"script[async]"+e}function M0(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=e.querySelector('style[data-href~="'+Re(l.href)+'"]');if(a)return i.instance=a,un(a),a;var f=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),un(a),kn(a,"style",f),Ba(a,l.precedence,e),i.instance=a;case"stylesheet":f=Dl(l.href);var g=e.querySelector(Ms(f));if(g)return i.state.loading|=4,i.instance=g,un(g),g;a=N0(l),(f=gi.get(f))&&yc(a,f),g=(e.ownerDocument||e).createElement("link"),un(g);var b=g;return b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),kn(g,"link",a),i.state.loading|=4,Ba(g,l.precedence,e),i.instance=g;case"script":return g=Ul(l.src),(f=e.querySelector(Rs(g)))?(i.instance=f,un(f),f):(a=l,(f=gi.get(g))&&(a=S({},l),vc(a,f)),e=e.ownerDocument||e,f=e.createElement("script"),un(f),kn(f,"link",a),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Ba(a,l.precedence,e));return i.instance}function Ba(e,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=a.length?a[a.length-1]:null,g=f,b=0;b<a.length;b++){var E=a[b];if(E.dataset.precedence===i)g=E;else if(g!==f)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function yc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function vc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Fa=null;function R0(e,i,l){if(Fa===null){var a=new Map,f=Fa=new Map;f.set(l,a)}else f=Fa,a=f.get(l),a||(a=new Map,f.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),f=0;f<l.length;f++){var g=l[f];if(!(g[Ho]||g[tt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=e+b;var E=a.get(b);E?E.push(g):a.set(b,[g])}}return a}function k0(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Ov(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function I0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function qv(e,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=Dl(a.href),g=i.querySelector(Ms(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Oa.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=g,un(g);return}g=i.ownerDocument||i,a=N0(a),(f=gi.get(f))&&yc(a,f),g=g.createElement("link"),un(g);var b=g;b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),kn(g,"link",a),l.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Oa.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var xc=0;function jv(e,i){return e.stylesheets&&e.count===0&&ja(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&ja(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&xc===0&&(xc=62500*Ev());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ja(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>xc?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(f)}}:null}function Oa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ja(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qa=null;function ja(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qa=new Map,i.forEach($v,e),qa=null,Oa.call(e))}function $v(e,i){if(!(i.state.loading&4)){var l=qa.get(e);if(l)var a=l.get(null);else{l=new Map,qa.set(e,l);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),a=b)}a&&l.set(null,a)}f=i.instance,b=f.getAttribute("data-precedence"),g=l.get(b)||a,g===a&&l.set(null,f),l.set(b,f),this.count++,a=Oa.bind(this),f.addEventListener("load",a),f.addEventListener("error",a),g?g.parentNode.insertBefore(f,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var ks={$$typeof:fe,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Yv(e,i,l,a,f,g,b,E,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=a,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function z0(e,i,l,a,f,g,b,E,I,j,ce,ye){return e=new Yv(e,i,l,b,I,j,ce,ye,E),i=1,g===!0&&(i|=24),g=ti(3,null,null,i),e.current=g,g.stateNode=e,i=Zr(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:i},nu(g),e}function D0(e){return e?(e=fl,e):fl}function U0(e,i,l,a,f,g){f=D0(f),a.context===null?a.context=f:a.pendingContext=f,a=vo(i),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=xo(e,a,i),l!==null&&(Xn(l,e,i),us(l,e,i))}function L0(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function bc(e,i){L0(e,i),(e=e.alternate)&&L0(e,i)}function P0(e){if(e.tag===13||e.tag===31){var i=qo(e,67108864);i!==null&&Xn(i,e,67108864),bc(e,67108864)}}function G0(e){if(e.tag===13||e.tag===31){var i=si();i=Ri(i);var l=qo(e,i);l!==null&&Xn(l,e,i),bc(e,i)}}var $a=!0;function Jv(e,i,l,a){var f=B.T;B.T=null;var g=xe.p;try{xe.p=2,Sc(e,i,l,a)}finally{xe.p=g,B.T=f}}function Kv(e,i,l,a){var f=B.T;B.T=null;var g=xe.p;try{xe.p=8,Sc(e,i,l,a)}finally{xe.p=g,B.T=f}}function Sc(e,i,l,a){if($a){var f=Tc(a);if(f===null)ac(e,i,a,Ya,l),V0(e,a);else if(Qv(f,e,i,l,a))a.stopPropagation();else if(V0(e,a),i&4&&-1<Xv.indexOf(e)){for(;f!==null;){var g=Vi(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=lt(g.pendingLanes);if(b!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var I=1<<31-je(b);E.entanglements[1]|=I,b&=~I}Gi(g),(Bt&6)===0&&(Ma=ve()+500,Es(0))}}break;case 31:case 13:E=qo(g,2),E!==null&&Xn(E,g,2),ka(),bc(g,2)}if(g=Tc(a),g===null&&ac(e,i,a,Ya,l),g===f)break;f=g}f!==null&&a.stopPropagation()}else ac(e,i,a,null,l)}}function Tc(e){return e=Pn(e),Cc(e)}var Ya=null;function Cc(e){if(Ya=null,e=ao(e),e!==null){var i=d(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=h(i),e!==null)return e;e=null}else if(l===31){if(e=y(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ya=e,null}function H0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case w:return 2;case C:return 8;case G:case M:return 32;case Z:return 268435456;default:return 32}default:return 32}}var wc=!1,Ro=null,ko=null,Io=null,Is=new Map,zs=new Map,zo=[],Xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V0(e,i){switch(e){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":Is.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(i.pointerId)}}function Ds(e,i,l,a,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Vi(i),i!==null&&P0(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Qv(e,i,l,a,f){switch(i){case"focusin":return Ro=Ds(Ro,e,i,l,a,f),!0;case"dragenter":return ko=Ds(ko,e,i,l,a,f),!0;case"mouseover":return Io=Ds(Io,e,i,l,a,f),!0;case"pointerover":var g=f.pointerId;return Is.set(g,Ds(Is.get(g)||null,e,i,l,a,f)),!0;case"gotpointercapture":return g=f.pointerId,zs.set(g,Ds(zs.get(g)||null,e,i,l,a,f)),!0}return!1}function B0(e){var i=ao(e.target);if(i!==null){var l=d(i);if(l!==null){if(i=l.tag,i===13){if(i=h(l),i!==null){e.blockedOn=i,Ti(e.priority,function(){G0(l)});return}}else if(i===31){if(i=y(l),i!==null){e.blockedOn=i,Ti(e.priority,function(){G0(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ja(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Tc(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);Dn=a,l.target.dispatchEvent(a),Dn=null}else return i=Vi(l),i!==null&&P0(i),e.blockedOn=l,!1;i.shift()}return!0}function F0(e,i,l){Ja(e)&&l.delete(i)}function Zv(){wc=!1,Ro!==null&&Ja(Ro)&&(Ro=null),ko!==null&&Ja(ko)&&(ko=null),Io!==null&&Ja(Io)&&(Io=null),Is.forEach(F0),zs.forEach(F0)}function Ka(e,i){e.blockedOn===i&&(e.blockedOn=null,wc||(wc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Zv)))}var Xa=null;function O0(e){Xa!==e&&(Xa=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xa===e&&(Xa=null);for(var i=0;i<e.length;i+=3){var l=e[i],a=e[i+1],f=e[i+2];if(typeof a!="function"){if(Cc(a||l)===null)continue;break}var g=Vi(l);g!==null&&(e.splice(i,3),i-=3,Tu(g,{pending:!0,data:f,method:l.method,action:a},a,f))}}))}function Ll(e){function i(I){return Ka(I,e)}Ro!==null&&Ka(Ro,e),ko!==null&&Ka(ko,e),Io!==null&&Ka(Io,e),Is.forEach(i),zs.forEach(i);for(var l=0;l<zo.length;l++){var a=zo[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<zo.length&&(l=zo[0],l.blockedOn===null);)B0(l),l.blockedOn===null&&zo.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var f=l[a],g=l[a+1],b=f[wt]||null;if(typeof g=="function")b||O0(l);else if(b){var E=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[wt]||null)E=b.formAction;else if(Cc(f)!==null)continue}else E=b.action;typeof E=="function"?l[a+1]=E:(l.splice(a,3),a-=3),O0(l)}}}function q0(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Ec(e){this._internalRoot=e}Qa.prototype.render=Ec.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=si();U0(l,a,e,i,null,null)},Qa.prototype.unmount=Ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;U0(e.current,2,null,e,null,null),ka(),i[kt]=null}};function Qa(e){this._internalRoot=e}Qa.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hi();e={blockedOn:null,target:e,priority:i};for(var l=0;l<zo.length&&i!==0&&i<zo[l].priority;l++);zo.splice(l,0,e),l===0&&B0(e)}};var j0=t.version;if(j0!=="19.2.3")throw Error(s(527,j0,"19.2.3"));xe.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Wv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Za.isDisabled&&Za.supportsFiber)try{re=Za.inject(Wv),K=Za}catch{}}return Ls.createRoot=function(e,i){if(!r(e))throw Error(s(299));var l=!1,a="",f=Zf,g=Wf,b=ep;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=z0(e,1,!1,null,null,l,a,null,f,g,b,q0),e[kt]=i.current,sc(e),new Ec(i)},Ls.hydrateRoot=function(e,i,l){if(!r(e))throw Error(s(299));var a=!1,f="",g=Zf,b=Wf,E=ep,I=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(I=l.formState)),i=z0(e,1,!0,i,l??null,a,f,I,g,b,E,q0),i.context=D0(null),l=i.current,a=si(),a=Ri(a),f=vo(a),f.callback=null,xo(l,f,a),l=a,i.current.lanes=l,dt(i,l),Gi(i),e[kt]=i.current,sc(e),new Qa(i)},Ls.version="19.2.3",Ls}var th;function ux(){if(th)return Nc.exports;th=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Nc.exports=rx(),Nc.exports}var cx=ux();const dx=Qm(cx),fx="modulepreload",px=function(n){return"/"+n},nh={},Uc=function(t,o,s){let r=Promise.resolve();if(o&&o.length>0){let v=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");r=v(o.map(m=>{if(m=px(m),m in nh)return;nh[m]=!0;const x=m.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":fx,x||(T.as="script"),T.crossOrigin="",T.href=m,y&&T.setAttribute("nonce",y),document.head.appendChild(T),x)return new Promise((A,N)=>{T.addEventListener("load",A),T.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(h){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=h,window.dispatchEvent(y),!y.defaultPrevented)throw h}return r.then(h=>{for(const y of h||[])y.status==="rejected"&&d(y.reason);return t().catch(d)})};const hx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,s)=>s?s.toUpperCase():o.toLowerCase()),ih=n=>{const t=mx(n);return t.charAt(0).toUpperCase()+t.slice(1)},Wm=(...n)=>n.filter((t,o,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===o).join(" ").trim(),gx=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var yx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vx=X.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:r="",children:d,iconNode:h,...y},v)=>X.createElement("svg",{ref:v,...yx,width:t,height:t,stroke:n,strokeWidth:s?Number(o)*24/Number(t):o,className:Wm("lucide",r),...!d&&!gx(y)&&{"aria-hidden":"true"},...y},[...h.map(([m,x])=>X.createElement(m,x)),...Array.isArray(d)?d:[d]]));const Ze=(n,t)=>{const o=X.forwardRef(({className:s,...r},d)=>X.createElement(vx,{ref:d,iconNode:t,className:Wm(`lucide-${hx(ih(n))}`,`lucide-${n}`,s),...r}));return o.displayName=ih(n),o};const xx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],bx=Ze("align-vertical-justify-center",xx);const Sx=[["rect",{width:"14",height:"6",x:"5",y:"12",rx:"2",key:"4l4tp2"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 22h20",key:"272qi7"}]],Tx=Ze("align-vertical-justify-end",Sx);const Cx=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"6",rx:"2",key:"13squh"}],["path",{d:"M2 2h20",key:"1ennik"}]],wx=Ze("align-vertical-justify-start",Cx);const Ex=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],_x=Ze("bold",Ex);const Ax=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Nx=Ze("check",Ax);const Mx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$s=Ze("chevron-down",Mx);const Rx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Lc=Ze("chevron-up",Rx);const kx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ix=Ze("circle-alert",kx);const zx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Dx=Ze("clipboard",zx);const Ux=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Lx=Ze("copy",Ux);const Px=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Gx=Ze("disc",Px);const Hx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vx=Ze("download",Hx);const Bx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hs=Ze("eye-off",Bx);const Fx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vs=Ze("eye",Fx);const Ox=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],qx=Ze("fast-forward",Ox);const jx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cr=Ze("file-text",jx);const $x=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],eg=Ze("film",$x);const Yx=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Jx=Ze("folder",Yx);const Kx=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],Wa=Ze("grip-horizontal",Kx);const Xx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],oh=Ze("image",Xx);const Qx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Zx=Ze("info",Qx);const Wx=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],eb=Ze("italic",Wx);const tb=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],nb=Ze("key",tb);const ib=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],lh=Ze("keyboard",ib);const ob=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],dr=Ze("list-music",ob);const lb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],sh=Ze("loader-circle",lb);const sb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Os=Ze("maximize",sb);const ab=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],ah=Ze("minimize",ab);const rb=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Hl=Ze("music",rb);const ub=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],cb=Ze("palette",ub);const db=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],fb=Ze("panels-top-left",db);const pb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],tg=Ze("pause",pb);const hb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Pc=Ze("play",hb);const mb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ng=Ze("plus",mb);const gb=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],yb=Ze("redo-2",gb);const vb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]],xb=Ze("repeat-1",vb);const bb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],rh=Ze("repeat",bb);const Sb=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z",key:"2a1g8i"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z",key:"rg3s36"}]],Tb=Ze("rewind",Sb);const Cb=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gc=Ze("rotate-ccw",Cb);const wb=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Eb=Ze("scissors",wb);const _b=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ab=Ze("search",_b);const Nb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ar=Ze("settings",Nb);const Mb=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Rb=Ze("shuffle",Mb);const kb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Ib=Ze("skip-back",kb);const zb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Db=Ze("skip-forward",zb);const Ub=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Hc=Ze("sparkles",Ub);const Lb=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Pb=Ze("split",Lb);const Gb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Vc=Ze("square",Gb);const Hb=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Vb=Ze("strikethrough",Hb);const Bb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fr=Ze("trash-2",Bb);const Fb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ob=Ze("triangle-alert",Fb);const qb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Lo=Ze("type",qb);const jb=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],$b=Ze("underline",jb);const Yb=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Jb=Ze("undo-2",Yb);const Kb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Po=Ze("upload",Kb);const Xb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qb=Ze("user",Xb);const Zb=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],qs=Ze("video",Zb);const Wb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Uo=Ze("volume-2",Wb);const e1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Pl=Ze("volume-x",e1);const t1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vi=Ze("x",t1);const n1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],i1=Ze("zoom-in",n1);const o1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],l1=Ze("zoom-out",o1);var In=(n=>(n.PLAYER="PLAYER",n.EDITOR="EDITOR",n))(In||{});const ig=n=>{const t=/([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])\s+([\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF])/g;return n.replace(t,"$1$2")},Bs=n=>{if(!n)return 0;const o=n.replace(",",".").trim().split(":");let s=0;return o.length===3?(s+=parseInt(o[0],10)*3600,s+=parseInt(o[1],10)*60,s+=parseFloat(o[2])):o.length===2?(s+=parseInt(o[0],10)*60,s+=parseFloat(o[1])):o.length===1&&(s+=parseFloat(o[0])),isNaN(s)?0:s},Vl=n=>{const t=Math.floor(n/60),o=Math.floor(n%60);return`${t}:${o.toString().padStart(2,"0")}`},Ol=n=>{const t=n.split(`
`),o=[],s=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?\]/g,r=/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g;return t.forEach(d=>{const h=[...d.matchAll(s)];if(h.length>0){let y=d.replace(s,"").trim();const v=[...y.matchAll(r)];let m,x=y.replace(r,"").replace(/  +/g," ").trim();if(x=x.replace(/\\n/g,`
`),v.length>0){m=[];for(let S=0;S<v.length;S++){const T=v[S],A=parseInt(T[1],10),N=parseInt(T[2],10),O=T[4];let F=A*60+N;O&&(F+=parseInt(O,10)/(O.length===3?1e3:100));const J=(T.index||0)+T[0].length,ue=S<v.length-1?v[S+1].index:y.length,fe=y.substring(J,ue);fe&&fe.split(/(\\n)/g).forEach(ke=>{ke&&m.push({text:ke==="\\n"?`
`:ke,startTime:F,endTime:0})})}for(let S=0;S<m.length;S++)S<m.length-1?m[S].endTime=m[S+1].startTime:m[S].endTime=m[S].startTime+.5}h.forEach(S=>{const T=parseInt(S[1],10),A=parseInt(S[2],10),N=S[4];let O=T*60+A;N&&(N.length===2?O+=parseInt(N,10)/100:(N.length,O+=parseInt(N,10)/1e3)),o.push({time:O,text:x,words:m})})}}),o.sort((d,h)=>d.time-h.time)},ql=n=>{const o=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`

`),s=[],r=/(\d{2}):(\d{2}):(\d{2}),(\d{3})/,d=h=>{const y=h.match(r);if(y){const v=parseInt(y[1],10),m=parseInt(y[2],10),x=parseInt(y[3],10),S=parseInt(y[4],10);return v*3600+m*60+x+S/1e3}return null};return o.forEach(h=>{const y=h.split(`
`);if(y.length>=3){const v=y[1],x=y.slice(2).join(" ").trim(),S=ig(x),T=v.split(" --> ");if(T.length>=2){const A=d(T[0]),N=d(T[1]);A!==null&&S&&s.push({time:A,text:S,endTime:N!==null?N:void 0})}}}),s},js=n=>{const t=[];try{const s=new DOMParser().parseFromString(n,"text/xml"),d=Array.from(s.getElementsByTagName("*")).filter(v=>v.localName==="p"),h=v=>{if(!v)return;const m=v.trim();return m.endsWith("ms")?parseFloat(m.slice(0,-2))/1e3:m.endsWith("s")?parseFloat(m.slice(0,-1)):Bs(m)},y=(v,m)=>{if(v.hasAttribute(m))return v.getAttribute(m);for(let x=0;x<v.attributes.length;x++)if(v.attributes[x].localName===m)return v.attributes[x].value;return null};for(let v=0;v<d.length;v++){const m=d[v],x=y(m,"begin"),S=y(m,"end"),T=ig(m.textContent?.replace(/\s+/g," ").trim()||"");if(x&&T){const A=h(x),N=h(S),O=[],J=Array.from(m.getElementsByTagName("*")).filter(ue=>ue.localName==="span");for(let ue=0;ue<J.length;ue++){const fe=J[ue],Ge=y(fe,"begin"),ke=y(fe,"end"),Ve=fe.textContent?.replace(/\s+/g," ");if(Ge&&ke&&Ve&&Ve.length>0){const Se=h(Ge),nt=h(ke);Se!==void 0&&nt!==void 0&&O.push({text:Ve,startTime:Se,endTime:nt})}}A!==void 0&&t.push({time:A,text:T,endTime:N,words:O.length>0?O:void 0})}}}catch(o){console.error("Failed to parse TTML",o)}return t.sort((o,s)=>o.time-s.time)},s1=n=>{try{const t=JSON.parse(n);if(Array.isArray(t)&&t.every(s=>typeof s=="object"&&s!==null&&typeof s.time=="number"&&typeof s.text=="string"))return t}catch(t){console.warn("Failed to parse JSON lyrics",t)}return[]},a1=({toast:n,onRemove:t})=>{const[o,s]=X.useState(!1);X.useEffect(()=>{const y=setTimeout(()=>{r()},n.duration||500);return()=>clearTimeout(y)},[]);const r=()=>{s(!0),setTimeout(t,300)},d=()=>{switch(n.type){case"success":return p.jsx(Nx,{size:18,className:"text-green-400"});case"error":return p.jsx(Ix,{size:18,className:"text-red-400"});default:return p.jsx(Zx,{size:18,className:"text-blue-400"})}},h=()=>{switch(n.type){case"success":return"border-green-500/30";case"error":return"border-red-500/30";default:return"border-blue-500/30"}};return p.jsxs("div",{className:`
        flex items-center gap-3 bg-zinc-900/60 backdrop-blur-xl border ${h()} 
        text-zinc-100 px-4 py-3 rounded-xl shadow-2xl min-w-[300px] max-w-md
        transition-all duration-300 transform
        ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}
        animate-in slide-in-from-right fade-in
      `,role:"alert",children:[p.jsx("div",{className:"shrink-0",children:d()}),p.jsx("p",{className:"text-sm font-medium flex-1",children:n.message}),p.jsx("button",{onClick:r,className:"text-zinc-500 hover:text-white transition-colors",children:p.jsx(vi,{size:16})})]})},r1=({toasts:n,removeToast:t})=>p.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:n.map(o=>p.jsx("div",{className:"pointer-events-auto",children:p.jsx(a1,{toast:o,onRemove:()=>t(o.id)})},o.id))}),u1=({isOpen:n,message:t,onConfirm:o,onCancel:s,title:r="Confirm Action"})=>{const[d,h]=X.useState(!1);return X.useEffect(()=>{n?h(!0):setTimeout(()=>h(!1),300)},[n]),X.useEffect(()=>{const y=v=>{n&&(v.key==="Enter"?(v.preventDefault(),o()):v.key==="Escape"&&(v.preventDefault(),s()))};return n&&window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[n,o,s]),!n&&!d?null:p.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${n?"opacity-100":"opacity-0"}`,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),p.jsxs("div",{className:`
        relative bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300
        ${n?"scale-100 translate-y-0":"scale-95 translate-y-4"}
      `,children:[p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"p-3 bg-orange-500/10 rounded-full shrink-0",children:p.jsx(Ob,{className:"text-orange-500",size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r}),p.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t})]}),p.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",children:p.jsx(vi,{size:20})})]})}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-zinc-950/50 border-t border-white/5",children:[p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:"Cancel"}),p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-500 rounded-lg shadow-lg hover:shadow-purple-500/20 transition-all",children:"Confirm"})]})]})]})},og=X.createContext(void 0),br=()=>{const n=X.useContext(og);if(!n)throw new Error("useUI must be used within a UIProvider");return n},c1=({children:n})=>{const[t,o]=X.useState([]),s=X.useCallback((S,T,A)=>{let N,O;typeof A=="number"?N=A:typeof A=="object"&&(N=A.duration,O=A.id);const F=O||Math.random().toString(36).substr(2,9);o(J=>[...J.filter(fe=>fe.id!==F),{id:F,type:S,message:T,duration:N}])},[]),r=X.useCallback(S=>{o(T=>T.filter(A=>A.id!==S))},[]),d={success:(S,T)=>s("success",S,T),error:(S,T)=>s("error",S,T),info:(S,T)=>s("info",S,T)},[h,y]=X.useState({isOpen:!1,message:"",title:"",resolve:null}),v=X.useCallback((S,T="Confirm Action")=>new Promise(A=>{y({isOpen:!0,message:S,title:T,resolve:A})}),[]),m=X.useCallback(()=>{h.resolve&&h.resolve(!0),y(S=>({...S,isOpen:!1,resolve:null}))},[h]),x=X.useCallback(()=>{h.resolve&&h.resolve(!1),y(S=>({...S,isOpen:!1,resolve:null}))},[h]);return p.jsxs(og.Provider,{value:{toast:d,confirm:v},children:[n,p.jsx(r1,{toasts:t,removeToast:r}),p.jsx(u1,{isOpen:h.isOpen,message:h.message,title:h.title,onConfirm:m,onCancel:x})]})},er=n=>n>=150?.5:n>=100?1:n>=60?2:n>=40?5:n>=25?10:15,d1=(n,t)=>{const o=Math.floor(n/60),s=n%60;return t<1?`${o}:${s.toFixed(1).padStart(4,"0")}`:`${o}:${Math.floor(s).toString().padStart(2,"0")}`},uh=10,f1=50,Ft={VISUAL_L2_TOP:32,VISUAL_L2_HEIGHT:48,VISUAL_L1_TOP:84,VISUAL_L1_HEIGHT:48,LYRICS_TOP:136,LYRICS_HEIGHT:32,AUDIO_L1_TOP:172,AUDIO_L1_HEIGHT:32,AUDIO_L2_TOP:208,AUDIO_L2_HEIGHT:32},p1=n=>new Promise(t=>{const o=URL.createObjectURL(n),s=document.createElement(n.type.startsWith("audio/")?"audio":"video");s.preload="metadata",s.onloadedmetadata=()=>{t(s.duration),URL.revokeObjectURL(o)},s.onerror=()=>{URL.revokeObjectURL(o),t(0)},s.src=o}),h1=({value:n,onChange:t})=>{const[o,s]=X.useState(n.toString());X.useEffect(()=>{const h=parseFloat(o);!isNaN(h)&&Math.abs(h-n)<.001||s(n.toString())},[n]);const r=()=>{const h=parseFloat(o);o===""||isNaN(h)?s(n.toString()):t(h)},d=h=>{const y=parseFloat(o),v=isNaN(y)?n:y,m=Math.round((v+h)*100)/100;m<.05||(t(m),s(m.toString()))};return p.jsxs("div",{className:"flex items-center bg-zinc-900 rounded border border-zinc-700 h-[18px]",children:[p.jsx("button",{onClick:()=>d(-.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-r border-zinc-700",children:p.jsx($s,{size:10})}),p.jsx("input",{type:"text",className:"bg-transparent text-[10px] text-zinc-300 focus:outline-none w-10 text-center",value:o,onChange:h=>{/^\d*\.?\d*$/.test(h.target.value)&&s(h.target.value)},onBlur:r,onKeyDown:h=>{h.stopPropagation(),h.key==="ArrowUp"&&(h.preventDefault(),d(.05)),h.key==="ArrowDown"&&(h.preventDefault(),d(-.05)),h.key==="Enter"&&h.currentTarget.blur()}}),p.jsx("button",{onClick:()=>d(.05),className:"px-0.5 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors h-full flex items-center justify-center border-l border-zinc-700",children:p.jsx(Lc,{size:10})})]})},m1=({slides:n,setSlides:t,currentTime:o,duration:s,lyrics:r,onSeek:d,onClose:h,renderConfig:y,setRenderConfig:v})=>{const{confirm:m}=br(),x=X.useRef(null),S=X.useRef(null),T=X.useRef(null),[A,N]=X.useState(40),[O,F]=X.useState([n]),[J,ue]=X.useState(0),fe=X.useRef(!1);X.useEffect(()=>{if(fe.current){fe.current=!1;return}const w=O[J];if(JSON.stringify(w)!==JSON.stringify(n)){const C=O.slice(0,J+1);C.push(n),C.length>f1?(C.shift(),F(C)):(F(C),ue(J+1))}},[n,O,J]);const Ge=J>0,ke=J<O.length-1,Ve=X.useCallback(()=>{if(J>0){const w=J-1;ue(w),fe.current=!0,t(O[w])}},[t,O,J]),Se=X.useCallback(()=>{if(J<O.length-1){const w=J+1;ue(w),fe.current=!0,t(O[w])}},[t,O,J]),nt=Math.max(0,...n.map(w=>w.endTime)),we=Math.max(s,60,nt),Qe=we*A,[Ue,ft]=X.useState([]),[St,At]=X.useState(null),[be,B]=X.useState([]),xe=X.useCallback(()=>{if(Ue.length===0)return;const w=n.filter(C=>Ue.includes(C.id));B(w)},[Ue,n]),de=X.useCallback(()=>{if(Ue.length===0)return;const w=n.filter(C=>Ue.includes(C.id));B(w),t(C=>C.filter(G=>!Ue.includes(G.id))),ft([])},[Ue,n,t]),ht=X.useRef(n),mt=X.useRef(A);X.useEffect(()=>{ht.current=n,mt.current=A},[n,A]);const D=X.useCallback(()=>{if(be.length===0)return;const w=Math.min(...be.map(M=>M.startTime)),C=o-w,G=be.map(M=>({...M,id:Math.random().toString(36).substr(2,9),startTime:M.startTime+C,endTime:M.endTime+C}));t(M=>[...M,...G].sort((Z,z)=>Z.startTime-z.startTime)),ft(G.map(M=>M.id))},[be,o,t]),R=X.useCallback(()=>{const w=n.filter(Z=>Ue.includes(Z.id)&&o>Z.startTime&&o<Z.endTime);if(w.length===0)return;let C=[];const G=[],M=[];w.forEach(Z=>{const z=o,oe={...Z,id:Math.random().toString(36).substr(2,9),endTime:z},re=z-Z.startTime,K={...Z,id:Math.random().toString(36).substr(2,9),startTime:z,mediaStartOffset:(Z.mediaStartOffset||0)+re};G.push(Z.id),C.push(oe,K),M.push(K.id)}),t(Z=>[...Z.filter(oe=>!G.includes(oe.id)),...C].sort((oe,re)=>oe.startTime-re.startTime)),ft(M)},[n,Ue,o,t]),[ne,Ee]=X.useState(null),[Ke,_]=X.useState(!1),[P,ie]=X.useState(null),le=async w=>{if(w.target.files&&w.target.files.length>0){const C=Array.from(w.target.files),G=C.every(Z=>Z.type.startsWith("image/")),M=[];if(G){const Z=C.length,z=o,re=Math.max(0,s-z)/Z,K=Math.max(3,re);C.forEach((ze,je)=>{const et=URL.createObjectURL(ze),De=z+je*K,Et=De+K;M.push({id:Math.random().toString(36).substr(2,9),url:et,type:"image",startTime:De,endTime:Et,name:ze.name,layer:0})})}else{let Z=o;for(const z of C){const oe=z.type.startsWith("image/")?"image":z.type.startsWith("video/")?"video":"audio";let re=5;if(oe!=="image"){const ze=await p1(z);ze>0&&(re=ze)}const K=URL.createObjectURL(z);M.push({id:Math.random().toString(36).substr(2,9),url:K,type:oe,startTime:Z,endTime:Z+re,mediaDuration:oe!=="image"?re:void 0,name:z.name,isMuted:oe==="video",volume:oe==="video"||oe==="audio"?1:void 0,layer:0}),Z+=re}}t(Z=>[...Z,...M].sort((z,oe)=>z.startTime-oe.startTime)),w.target.value=""}},Ie=w=>{t(C=>C.filter(G=>G.id!==w))},Ce=async w=>{w.stopPropagation(),n.length!==0&&await m("Are you sure you want to remove all visual slides?","Remove All Slides")&&t([])},Te=(w,C,G)=>{if(w.stopPropagation(),w.preventDefault(),x.current?.focus(),w.shiftKey&&St){const K=n.findIndex(je=>je.id===St),ze=n.findIndex(je=>je.id===C);if(K!==-1&&ze!==-1){const je=Math.min(K,ze),et=Math.max(K,ze),De=n.slice(je,et+1).map(Et=>Et.id);ft(Et=>{const _t=new Set([...Et,...De]);return Array.from(_t)})}}else w.ctrlKey||w.metaKey?(ft(K=>K.includes(C)?K.filter(ze=>ze!==C):[...K,C]),At(C)):(Ue.includes(C)||ft([C]),At(C));const M=n.find(K=>K.id===C);if(!M)return;const Z=Ue.includes(C),z=w.ctrlKey||w.metaKey||w.shiftKey;let oe=[];if(!z&&!Z)oe=[C];else if(z){if(oe=[C],(w.ctrlKey||w.metaKey)&&!Z)oe=[...Ue,C];else if((w.ctrlKey||w.metaKey)&&Z){oe=Ue.filter(K=>K!==C);return}}else oe=Ue;const re={};n.forEach(K=>{oe.includes(K.id)&&(re[K.id]={start:K.startTime,end:K.endTime})}),re[C]||(re[C]={start:M.startTime,end:M.endTime}),Ee({id:C,type:G,startX:w.clientX,initialStart:M.startTime,initialEnd:M.endTime,initialMap:re}),window.addEventListener("mousemove",H),window.addEventListener("mouseup",ae)},Ne=w=>{w.button===0&&(w.stopPropagation(),x.current?.focus(),ft([]),_(!0),L(w.clientX),window.addEventListener("mousemove",_e),window.addEventListener("mouseup",Fe))},he=w=>{if(w.button!==0)return;x.current?.focus();const C=w.clientX,G=w.clientY,M=T.current?.getBoundingClientRect();if(!M)return;const Z=C-M.left,z=G-M.top;let oe=!1;const re=ze=>{const je=Math.sqrt(Math.pow(ze.clientX-C,2)+Math.pow(ze.clientY-G,2));if(!oe&&je>5&&(oe=!0,ie({x:Z,y:z,w:0,h:0})),oe&&T.current){const et=T.current.getBoundingClientRect(),De=ze.clientX-et.left,Et=ze.clientY-et.top;ie(dt=>{if(!dt)return null;const ct=De-Z,Lt=Et-z;return{x:ct>0?Z:De,y:Lt>0?z:Et,w:Math.abs(ct),h:Math.abs(Lt)}});const _t=[],Yt=ht.current,nn=mt.current,lt=Math.min(Z,De),Me=Math.min(z,Et),ut=Math.abs(De-Z),st=Math.abs(Et-z),He=lt+ut,Nt=Me+st;Yt.forEach(dt=>{const ct=dt.startTime*nn+96,Lt=dt.endTime*nn+96;let Wt=0,On=0;const Ri=dt.layer||0;dt.type==="audio"?Ri===0?(Wt=Ft.AUDIO_L1_TOP,On=Ft.AUDIO_L1_TOP+Ft.AUDIO_L1_HEIGHT):(Wt=Ft.AUDIO_L2_TOP,On=Ft.AUDIO_L2_TOP+Ft.AUDIO_L2_HEIGHT):Ri===0?(Wt=Ft.VISUAL_L1_TOP,On=Ft.VISUAL_L1_TOP+Ft.VISUAL_L1_HEIGHT):(Wt=Ft.VISUAL_L2_TOP,On=Ft.VISUAL_L2_TOP+Ft.VISUAL_L2_HEIGHT);const Si=lt<Lt&&He>ct,Hi=Me<On&&Nt>Wt;Si&&Hi&&_t.push(dt.id)}),ft(_t)}},K=ze=>{oe||(ft([]),L(ze.clientX)),ie(null),window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",K)};window.addEventListener("mousemove",re),window.addEventListener("mouseup",K)},L=w=>{if(!T.current)return;const C=T.current.getBoundingClientRect(),G=w-C.left-96;let M=Math.max(0,Math.min(G/A,we));M=Ye(M),d(M)},_e=w=>{L(w.clientX)},Fe=()=>{_(!1),window.removeEventListener("mousemove",_e),window.removeEventListener("mouseup",Fe)},Be=w=>{const C=w.target;if(!(C.tagName==="INPUT"||C.tagName==="TEXTAREA"||C.isContentEditable)){if((w.ctrlKey||w.metaKey)&&w.key==="z"&&!w.shiftKey){w.preventDefault(),Ve();return}if((w.ctrlKey||w.metaKey)&&(w.key==="y"||w.key==="z"&&w.shiftKey)){w.preventDefault(),Se();return}if((w.ctrlKey||w.metaKey)&&w.key==="c"){w.preventDefault(),xe();return}if((w.ctrlKey||w.metaKey)&&w.key==="x"){w.preventDefault(),de();return}if((w.ctrlKey||w.metaKey)&&w.key==="v"){w.preventDefault(),D();return}if(w.key.toLowerCase()==="x"&&!w.ctrlKey&&!w.metaKey||(w.ctrlKey||w.metaKey)&&w.key==="k"){w.preventDefault(),w.stopPropagation(),R();return}if((w.key==="Delete"||w.key==="Backspace")&&Ue.length>0&&(w.preventDefault(),t(G=>G.filter(M=>!Ue.includes(M.id))),ft([])),Ue.length>0&&(w.key==="ArrowLeft"||w.key==="ArrowRight")){w.preventDefault(),w.stopPropagation();const G=w.key==="ArrowRight"?.01:-.01,M=n.find(Z=>Z.id===Ue[0]);if(M){const Z=Math.max(0,M.startTime+G);d(Z)}t(Z=>Z.map(oe=>{if(Ue.includes(oe.id)){const re=oe.endTime-oe.startTime;let K=oe.startTime+G;return K=Math.max(0,K),{...oe,startTime:K,endTime:K+re}}return oe}).sort((oe,re)=>oe.startTime-re.startTime))}}},Ye=(w,C=[])=>{const G=uh/A,M=[0,s,o],Z=er(A),z=Math.round(w/Z)*Z;M.push(z),n.forEach(K=>{C.includes(K.id)||(M.push(K.startTime),M.push(K.endTime))}),r.forEach(K=>{M.push(K.time)});let oe=w,re=G;for(const K of M){const ze=Math.abs(K-w);ze<re&&(re=ze,oe=K)}return oe},H=w=>{Ee(C=>{if(!C)return null;const M=(w.clientX-C.startX)/A;return t(Z=>{if(C.type==="move"){const z=Object.keys(C.initialMap),oe=Object.values(C.initialMap),re=Math.min(...oe.map(Me=>Me.start)),K=Math.max(...oe.map(Me=>Me.end)),ze=C.initialMap[C.id],je=[{type:"drag-start",initVal:ze.start},{type:"drag-end",initVal:ze.end},{type:"group-start",initVal:re},{type:"group-end",initVal:K}],et=uh/A,De=[0,s,o],Et=er(A);n.forEach(Me=>{z.includes(Me.id)||(De.push(Me.startTime),De.push(Me.endTime))}),r.forEach(Me=>{De.push(Me.time)});let _t=M,Yt=et,nn=!1;je.forEach(Me=>{const ut=Me.initVal+M;for(const Nt of De){const dt=Math.abs(Nt-ut);dt<Yt&&(Yt=dt,_t=Nt-Me.initVal,nn=!0)}const st=Math.round(ut/Et)*Et,He=Math.abs(st-ut);He<Yt&&(Yt=He,_t=st-Me.initVal,nn=!0)});let lt=nn?_t:M;return re+lt<0&&(lt=-re),Z.map(Me=>{const ut=C.initialMap[Me.id];if(ut){const st=ut.end-ut.start;let He=Me.layer||0;const Nt=(ct,Lt,Wt)=>ct>=Lt&&ct<=Lt+Wt,dt=T.current?.getBoundingClientRect();if(dt){const ct=w.clientY-dt.top;Me.type==="audio"?(Nt(ct,Ft.AUDIO_L1_TOP,Ft.AUDIO_L1_HEIGHT)&&(He=0),Nt(ct,Ft.AUDIO_L2_TOP,Ft.AUDIO_L2_HEIGHT)&&(He=1)):(Nt(ct,Ft.VISUAL_L1_TOP,Ft.VISUAL_L1_HEIGHT)&&(He=0),Nt(ct,Ft.VISUAL_L2_TOP,Ft.VISUAL_L2_HEIGHT)&&(He=1))}return{...Me,startTime:ut.start+lt,endTime:ut.start+lt+st,layer:He}}return Me})}else if(C.type==="resize-start"){let z=C.initialStart+M;z=Ye(z,[C.id]);const oe=.5,re=C.initialEnd;return z=Math.max(0,Math.min(z,re-oe)),Z.map(K=>K.id!==C.id?K:{...K,startTime:z})}else{let z=C.initialEnd+M;z=Ye(z,[C.id]);const oe=.5,re=C.initialStart;return z=Math.max(re+oe,z),Z.map(K=>K.id!==C.id?K:{...K,endTime:z})}}),C})},ae=w=>{ne&&ne.type==="move"&&Math.abs(w.clientX-ne.startX)<5&&!w.ctrlKey&&!w.metaKey&&!w.shiftKey&&ft([ne.id]),Ee(null),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",ae),t(C=>[...C].sort((G,M)=>G.startTime-M.startTime))},pe=()=>N(w=>Math.min(200,w+10)),Ae=()=>N(w=>Math.max(10,w-10)),ve=(w,C)=>{v(G=>{const M=G.layerVisibility?.[w]||{},Z={...M,[C]:M[C]===!1};return{...G,layerVisibility:{...G.layerVisibility,[w]:Z,...w==="visual"?{audio:G.layerVisibility?.audio||{}}:{visual:G.layerVisibility?.visual||{}}}}})},ge=(w,C)=>y.layerVisibility?.[w]?.[C]!==!1;return p.jsxs("div",{ref:x,className:"w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl outline-none overflow-hidden",tabIndex:0,onMouseDown:w=>w.currentTarget.focus(),onKeyDown:Be,children:[p.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[p.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[p.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[p.jsx(eg,{size:16,className:"text-purple-400"}),"Timeline"]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-purple-600 hover:bg-purple-500 rounded text-xs font-medium cursor-pointer transition-colors text-white whitespace-nowrap",children:[p.jsx(ng,{size:14})," Import Media",p.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*,audio/*",multiple:!0,onChange:le})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:Ae,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom Out",children:p.jsx(l1,{size:14})}),p.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono min-w-[50px] text-center",children:[A,"px/s"]}),p.jsx("button",{onClick:pe,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",title:"Zoom In",children:p.jsx(i1,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:Ve,disabled:!Ge,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:p.jsx(Jb,{size:14})}),p.jsx("button",{onClick:Se,disabled:!ke,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:p.jsx(yb,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:xe,disabled:Ue.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Copy (Ctrl+C)",children:p.jsx(Lx,{size:14})}),p.jsx("button",{onClick:de,disabled:Ue.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Cut (Ctrl+X)",children:p.jsx(Eb,{size:14})}),p.jsx("button",{onClick:D,disabled:be.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Paste (Ctrl+V)",children:p.jsx(Dx,{size:14})})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsx("div",{className:"flex items-center gap-1",children:p.jsx("button",{onClick:R,disabled:Ue.length===0,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Split Content (X)",children:p.jsx(Pb,{size:14})})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>{n.length>0&&Ue.length===n.length?ft([]):ft(n.map(w=>w.id))},className:"px-2 py-0.5 text-[10px] bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-300 transition-colors",children:"Select All"}),Ue.length===1&&p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded px-1 border border-zinc-700",children:[p.jsx("span",{className:"text-[10px] text-zinc-500 px-1",children:"Dur:"}),p.jsx("input",{type:"text",className:"w-12 bg-transparent text-[10px] text-white font-mono focus:outline-none py-0.5 text-center",placeholder:"MM:SS",defaultValue:(()=>{const w=n.find(C=>C.id===Ue[0]);return w?Vl(w.endTime-w.startTime):"00:00"})(),onBlur:w=>{const G=w.target.value.split(":");if(G.length===2){const Z=parseInt(G[0])||0,z=parseInt(G[1])||0,oe=Z*60+z;oe>0&&t(re=>re.map(K=>K.id===Ue[0]?{...K,endTime:K.startTime+oe}:K))}const M=n.find(Z=>Z.id===Ue[0]);M&&(w.target.value=Vl(M.endTime-M.startTime))},onKeyDown:w=>{w.key==="Enter"&&w.currentTarget.blur()}},Ue[0])]}),Ue.length===1&&(()=>{const w=n.find(C=>C.id===Ue[0]);return w&&(w.type==="video"||w.type==="audio")?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded px-2 border border-zinc-700 h-[22px]",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Vol:"}),p.jsxs("div",{className:"flex items-center gap-1 w-20",children:[p.jsx("button",{onClick:()=>{t(C=>C.map(G=>G.id===w.id?{...G,isMuted:!G.isMuted}:G))},className:"p-0.5 hover:bg-zinc-700 rounded cursor-pointer text-zinc-400 hover:text-white",title:w.isMuted!==!1?"Unmute":"Mute",children:w.isMuted!==!1?p.jsx(Pl,{size:10}):p.jsx(Uo,{size:10})}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer",value:w.volume!==void 0?w.volume:1,onChange:C=>{const G=parseFloat(C.target.value);t(M=>M.map(Z=>Z.id===w.id?{...Z,volume:G,isMuted:G===0}:Z))}})]}),p.jsxs("span",{className:"text-[9px] text-zinc-400 w-6 text-right",children:[Math.round((w.volume||1)*100),"%"]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Spd:"}),p.jsx(h1,{value:w.playbackRate||1,onChange:C=>{t(G=>G.map(M=>M.id===w.id?{...M,playbackRate:C}:M))}})]})]}):null})()]})]}),p.jsxs("div",{className:"flex gap-2 shrink-0",children:[p.jsx("button",{onClick:Ce,className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear All Slides",children:p.jsx(fr,{size:14})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),p.jsx("button",{onClick:h,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Timeline",children:p.jsx(vi,{size:14})})]})]}),p.jsx("div",{ref:S,onWheel:w=>{S.current&&w.shiftKey&&(w.preventDefault(),S.current.scrollLeft+=w.deltaY)},className:"flex-1 overflow-x-auto overflow-y-auto relative bg-zinc-950 scroll-smooth custom-scrollbar cursor-default",children:p.jsxs("div",{ref:T,className:"relative",style:{width:`${Qe+96}px`,minWidth:"100%",height:"max(100%, 280px)"},onMouseDown:he,children:[P&&p.jsx("div",{className:"absolute border border-purple-500 bg-purple-500/20 z-50 pointer-events-none",style:{left:P.x,top:P.y,width:P.w,height:P.h}}),p.jsxs("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none z-0",children:[(()=>{const w=er(A);return Array.from({length:Math.ceil(Qe/(A*w))}).map((C,G)=>p.jsx("div",{className:"absolute top-0 bottom-0 border-l border-white/5",style:{left:G*w*A}},G))})(),s>0&&p.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-red-900/50 flex flex-col justify-end z-0",style:{left:s*A},children:p.jsx("span",{className:"text-[9px] text-red-900/50 bg-black/50 px-1 whitespace-nowrap",children:"End"})})]}),p.jsxs("div",{className:"sticky top-0 left-0 right-0 h-6 border-b border-white/10 bg-zinc-900/90 backdrop-blur-sm select-none cursor-pointer z-[60] flex",onMouseDown:Ne,children:[p.jsx("div",{className:"w-[96px] shrink-0 border-r border-white/10 flex items-center justify-center text-[10px] text-zinc-500 bg-zinc-900/90",children:"Time"}),p.jsx("div",{className:"relative flex-1",children:(()=>{const w=er(A);return Array.from({length:Math.ceil(Qe/(A*w))}).map((C,G)=>{const M=G*w;return M>we?null:p.jsx("div",{className:"absolute bottom-0 border-l border-white/20 text-[9px] text-zinc-500 font-mono pl-1 pb-0.5 pointer-events-none",style:{left:M*A,width:w*A},children:d1(M,w)},G)})})()})]}),p.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-red-500 z-50 pointer-events-none",style:{left:"96px",transform:`translateX(${o*A}px)`,willChange:"transform"},children:p.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-red-500 rotate-45 transform origin-center shadow-sm"})}),p.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Ft.VISUAL_L1_TOP,height:Ft.VISUAL_L1_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Visual 1"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),ve("visual",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ge("visual",0)?p.jsx(Vs,{size:12}):p.jsx(Hs,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ge("visual",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(w=>w.type!=="audio"&&(w.layer===0||w.layer===void 0)).map(w=>p.jsxs("div",{style:{left:w.startTime*A,width:Math.max(10,(w.endTime-w.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                      ${ne?.id===w.id||Ue.includes(w.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                      ${Ue.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>Te(C,w.id,"move"),children:[w.type==="video"?p.jsx("video",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):p.jsx("img",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:w.name}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:p.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:w.name})}),w.type==="video"&&w.mediaDuration&&w.endTime-w.startTime>w.mediaDuration+.1&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(G=>G.map(M=>M.id===w.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:p.jsx(Gc,{size:10})}),w.type==="video"&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(G=>G.map(M=>M.id===w.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:w.isMuted!==!1?"Unmute":"Mute",children:w.isMuted!==!1?p.jsx(Pl,{size:10}):p.jsx(Uo,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Ie(w.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-start"),children:p.jsx(Wa,{size:10,className:"text-white/70 rotate-90"})}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-end"),children:p.jsx(Wa,{size:10,className:"text-white/70 rotate-90"})})]},w.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-b border-white/5 bg-zinc-900/20",style:{top:Ft.VISUAL_L2_TOP,height:Ft.VISUAL_L2_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Visual 2"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),ve("visual",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ge("visual",1)?p.jsx(Vs,{size:12}):p.jsx(Hs,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ge("visual",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(w=>w.type!=="audio"&&w.layer===1).map(w=>p.jsxs("div",{style:{left:w.startTime*A,width:Math.max(10,(w.endTime-w.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-zinc-800 border shadow-sm select-none cursor-move
                     ${ne?.id===w.id||Ue.includes(w.id)?"border-purple-400 z-30 shadow-xl opacity-90":"border-zinc-600 hover:border-zinc-400 z-10 hover:z-20"}
                     ${Ue.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                   `,onMouseDown:C=>Te(C,w.id,"move"),children:[w.type==="video"?p.jsx("video",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",muted:!0}):p.jsx("img",{src:w.url,className:"w-full h-full object-cover opacity-60 pointer-events-none",draggable:!1,alt:w.name}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-end",children:p.jsx("span",{className:"text-[10px] font-bold drop-shadow-md truncate text-zinc-200 bg-black/30 px-1 rounded w-max max-w-full",children:w.name})}),w.type==="video"&&w.mediaDuration&&w.endTime-w.startTime>w.mediaDuration+.1&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(G=>G.map(M=>M.id===w.id&&M.mediaDuration?{...M,endTime:M.startTime+M.mediaDuration}:M))},className:"absolute top-1 left-1 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:"Reset to Original Duration",children:p.jsx(Gc,{size:10})}),w.type==="video"&&p.jsx("button",{onClick:C=>{C.stopPropagation(),t(G=>G.map(M=>M.id===w.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-zinc-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:w.isMuted!==!1?p.jsx(Pl,{size:10}):p.jsx(Uo,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Ie(w.id)},className:"absolute top-1 right-4 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-30",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-3 cursor-w-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-start"),children:p.jsx(Wa,{size:10,className:"text-white/70 rotate-90"})}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-3 cursor-e-resize flex items-center justify-center bg-black/20 hover:bg-purple-500/80 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-end"),children:p.jsx(Wa,{size:10,className:"text-white/70 rotate-90"})})]},w.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 overflow-hidden",style:{top:Ft.LYRICS_TOP,height:Ft.LYRICS_HEIGHT},children:[p.jsx("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center px-2 text-[10px] text-zinc-400 backdrop-blur-sm select-none",children:p.jsx("span",{children:"Lyrics"})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-[96px] right-0 pointer-events-none",children:r.map((w,C)=>p.jsxs("div",{className:"absolute top-1 bottom-1 text-[10px] text-zinc-400 truncate hover:text-white transition-colors hover:bg-zinc-800/50 rounded px-2 cursor-pointer border-l border-zinc-700 flex items-center whitespace-nowrap pointer-events-auto",style:{left:w.time*A},title:`${Vl(w.time)} - ${w.text}`,onClick:G=>{G.stopPropagation(),d(w.time)},children:[p.jsx("span",{className:"mr-1 text-zinc-600 font-mono text-[9px]",children:Vl(w.time)}),w.text]},C))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Ft.AUDIO_L1_TOP,height:Ft.AUDIO_L1_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Audio 1"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),ve("audio",0)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ge("audio",0)?p.jsx(Vs,{size:12}):p.jsx(Hs,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ge("audio",0)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(w=>w.type==="audio"&&(w.layer===0||w.layer===void 0)).map(w=>p.jsxs("div",{style:{left:w.startTime*A,width:Math.max(10,(w.endTime-w.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ne?.id===w.id||Ue.includes(w.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Ue.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>Te(C,w.id,"move"),children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:p.jsx(Uo,{size:16,className:"text-emerald-200"})}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:p.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:w.name})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),t(G=>G.map(M=>M.id===w.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:w.isMuted===!0?"Unmute":"Mute",children:w.isMuted===!0?p.jsx(Pl,{size:10}):p.jsx(Uo,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Ie(w.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-start")}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-end")})]},w.id))})]}),p.jsxs("div",{className:"absolute left-0 right-0 border-t border-white/5 bg-zinc-900/40",style:{top:Ft.AUDIO_L2_TOP,height:Ft.AUDIO_L2_HEIGHT},children:[p.jsxs("div",{className:"sticky left-0 w-[96px] h-full bg-zinc-900/90 border-r border-white/10 z-30 flex items-center justify-between px-2 text-[10px] text-zinc-400 backdrop-blur-sm",children:[p.jsx("span",{children:"Audio 2"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),ve("audio",1)},className:"p-1 hover:text-white hover:bg-zinc-700 rounded transition-colors",children:ge("audio",1)?p.jsx(Vs,{size:12}):p.jsx(Hs,{size:12,className:"text-zinc-600"})})]}),p.jsx("div",{className:`absolute top-0 bottom-0 left-[96px] right-0 ${ge("audio",1)?"":"opacity-30 grayscale pointer-events-none"}`,children:n.filter(w=>w.type==="audio"&&w.layer===1).map(w=>p.jsxs("div",{style:{left:w.startTime*A,width:Math.max(10,(w.endTime-w.startTime)*A)},className:`absolute top-1 bottom-1 rounded-md overflow-hidden group bg-emerald-900/50 border shadow-sm select-none cursor-move
                      ${ne?.id===w.id||Ue.includes(w.id)?"border-emerald-400 z-30 shadow-xl opacity-90":"border-emerald-700/50 hover:border-emerald-500 z-10 hover:z-20"}
                      ${Ue.includes(w.id)?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                    `,onMouseDown:C=>Te(C,w.id,"move"),children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:p.jsx(Uo,{size:16,className:"text-emerald-200"})}),p.jsx("div",{className:"absolute inset-0 p-1 pointer-events-none flex flex-col justify-center",children:p.jsx("span",{className:"text-[9px] font-bold drop-shadow-md truncate text-emerald-100 px-1",children:w.name})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),t(G=>G.map(M=>M.id===w.id?{...M,isMuted:!M.isMuted}:M))},className:"absolute top-1 right-10 p-0.5 bg-black/60 hover:bg-emerald-600 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",title:w.isMuted===!0?"Unmute":"Mute",children:w.isMuted===!0?p.jsx(Pl,{size:10}):p.jsx(Uo,{size:10})}),p.jsx("button",{onClick:C=>{C.stopPropagation(),Ie(w.id)},className:"absolute top-1 right-3 p-0.5 bg-black/60 hover:bg-red-500 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-40",children:p.jsx(vi,{size:10})}),p.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-2 cursor-w-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-start")}),p.jsx("div",{className:"absolute top-0 bottom-0 right-0 w-2 cursor-e-resize flex items-center justify-center hover:bg-emerald-500/50 transition-colors z-20",onMouseDown:C=>Te(C,w.id,"resize-end")})]},w.id))})]})]})})]})};var g1={};let y1,v1;function x1(){return{geminiUrl:y1,vertexUrl:v1}}function b1(n,t,o,s){var r,d;if(!n?.baseUrl){const h=x1();return t?(r=h.vertexUrl)!==null&&r!==void 0?r:o:(d=h.geminiUrl)!==null&&d!==void 0?d:s}return n.baseUrl}class lo{}function $e(n,t){const o=/\{([^}]+)\}/g;return n.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const d=t[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(n,t,o){for(let d=0;d<t.length-1;d++){const h=t[d];if(h.endsWith("[]")){const y=h.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[y])){const v=n[y];if(Array.isArray(o))for(let m=0;m<v.length;m++){const x=v[m];c(x,t.slice(d+1),o[m])}else for(const m of v)c(m,t.slice(d+1),o)}return}else if(h.endsWith("[0]")){const y=h.slice(0,-3);y in n||(n[y]=[{}]);const v=n[y];c(v[0],t.slice(d+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const s=t[t.length-1],r=n[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[s]=o}function u(n,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let s=0;s<t.length;s++){if(typeof n!="object"||n===null)return o;const r=t[s];if(r.endsWith("[]")){const d=r.slice(0,-2);if(d in n){const h=n[d];return Array.isArray(h)?h.map(y=>u(y,t.slice(s+1),o)):o}else return o}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return o;throw s}}function S1(n,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),d=s.split("."),h=new Set;let y=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){y=v;break}if(y!==-1&&d.length>y)for(let v=y;v<d.length;v++){const m=d[v];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&h.add(m)}Bc(n,r,d,0,h)}}function Bc(n,t,o,s,r){if(s>=t.length||typeof n!="object"||n===null)return;const d=t[s];if(d.endsWith("[]")){const h=d.slice(0,-2),y=n;if(h in y&&Array.isArray(y[h]))for(const v of y[h])Bc(v,t,o,s+1,r)}else if(d==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,y=Object.keys(h).filter(m=>!m.startsWith("_")&&!r.has(m)),v={};for(const m of y)v[m]=h[m];for(const[m,x]of Object.entries(v)){const S=[];for(const T of o.slice(s))T==="*"?S.push(m):S.push(T);c(h,S,x)}for(const m of y)delete h[m]}}else{const h=n;d in h&&Bc(h[d],t,o,s+1,r)}}function ld(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function T1(n){const t={},o=u(n,["operationName"]);o!=null&&c(t,["operationName"],o);const s=u(n,["resourceName"]);return s!=null&&c(t,["_url","resourceName"],s),t}function C1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response","generateVideoResponse"]);return h!=null&&c(t,["response"],E1(h)),t}function w1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],_1(h)),t}function E1(n){const t={},o=u(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>A1(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function _1(n){const t={},o=u(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>N1(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function A1(n){const t={},o=u(n,["video"]);return o!=null&&c(t,["video"],D1(o)),t}function N1(n){const t={},o=u(n,["_self"]);return o!=null&&c(t,["video"],U1(o)),t}function M1(n){const t={},o=u(n,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function R1(n){const t={},o=u(n,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function k1(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],I1(h)),t}function I1(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function lg(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],z1(h)),t}function z1(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function D1(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&c(t,["videoBytes"],ld(s));const r=u(n,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function U1(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],ld(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}var ch;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ch||(ch={}));var dh;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(dh||(dh={}));var fh;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(fh||(fh={}));var an;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(an||(an={}));var ph;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ph||(ph={}));var hh;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(hh||(hh={}));var mh;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(mh||(mh={}));var gh;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gh||(gh={}));var yh;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(yh||(yh={}));var vh;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(vh||(vh={}));var xh;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(xh||(xh={}));var bh;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(bh||(bh={}));var Sh;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Sh||(Sh={}));var Th;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Th||(Th={}));var Ch;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ch||(Ch={}));var wh;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wh||(wh={}));var Eh;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Eh||(Eh={}));var _h;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(_h||(_h={}));var Ah;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ah||(Ah={}));var pr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(pr||(pr={}));var Nh;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Nh||(Nh={}));var Mh;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Mh||(Mh={}));var Rh;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Rh||(Rh={}));var Fc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fc||(Fc={}));var kh;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kh||(kh={}));var Ih;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Ih||(Ih={}));var zh;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(zh||(zh={}));var Dh;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Dh||(Dh={}));var Uh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Uh||(Uh={}));var Lh;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Lh||(Lh={}));var Ph;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Ph||(Ph={}));var Gh;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Gh||(Gh={}));var Hh;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Hh||(Hh={}));var Vh;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Vh||(Vh={}));var Bh;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Bh||(Bh={}));var Fh;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fh||(Fh={}));var Oh;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Oh||(Oh={}));var qh;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qh||(qh={}));var jh;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(jh||(jh={}));var $h;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})($h||($h={}));var Yh;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Yh||(Yh={}));var Jh;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Jh||(Jh={}));var Kh;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Kh||(Kh={}));var Xh;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Xh||(Xh={}));var Qh;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Qh||(Qh={}));var Zh;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Zh||(Zh={}));var Wh;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Wh||(Wh={}));var em;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(em||(em={}));var tm;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(tm||(tm={}));var nm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nm||(nm={}));var im;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(im||(im={}));var om;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(om||(om={}));var lm;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(lm||(lm={}));var sm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sm||(sm={}));var am;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(am||(am={}));var Bl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Bl||(Bl={}));class Oc{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ps{get text(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const S=[];for(const T of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[A,N]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&S.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;x=!0,m+=T.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const S of(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)!==null&&v!==void 0?v:[]){for(const[T,A]of Object.entries(S))T!=="inlineData"&&(A!==null||A!==void 0)&&x.push(T);S.inlineData&&typeof S.inlineData.data=="string"&&(m+=atob(S.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,o,s,r,d,h,y,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(m?.length!==0)return m}get executableCode(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,o,s,r,d,h,y,v,m;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(v=(y=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||y===void 0?void 0:y.parts)===null||v===void 0?void 0:v.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if(x?.length!==0)return(m=x?.[0])===null||m===void 0?void 0:m.output}}class rm{}class um{}class L1{}class P1{}class G1{}class H1{}class cm{}class dm{}class fm{}class V1{}class hr{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new hr;let r;const d=t;return o?r=w1(d):r=C1(d),Object.assign(s,r),s}}class pm{}class hm{}class mm{}class gm{}class B1{}class F1{}class O1{}class sd{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new sd,d=k1(t);return Object.assign(s,d),s}}class q1{}class j1{}class $1{}class ym{}class Y1{get text(){var t,o,s;let r="",d=!1;const h=[];for(const y of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,m]of Object.entries(y))v!=="text"&&v!=="thought"&&m!==null&&h.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;d=!0,r+=y.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var t,o,s;let r="";const d=[];for(const h of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,v]of Object.entries(h))y!=="inlineData"&&v!==null&&d.push(y);h.inlineData&&typeof h.inlineData.data=="string"&&(r+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class J1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ad{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new ad,d=lg(t);return Object.assign(s,d),s}}function Vt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function sg(n,t){const o=Vt(n,t);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function ag(n){return Array.isArray(n)?n.map(t=>mr(t)):[mr(n)]}function mr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function rg(n){const t=mr(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ug(n){const t=mr(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vm(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function cg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>vm(t)):[vm(n)]}function qc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function bm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Ln(n){if(n==null)throw new Error("ContentUnion is required");return qc(n)?n:{role:"user",parts:cg(n)}}function rd(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=Ln(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const o=Ln(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>Ln(o)):[Ln(t)]}function xi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xm(n)||bm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ln(n)]}const t=[],o=[],s=qc(n[0]);for(const r of n){const d=qc(r);if(d!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(r);else{if(xm(r)||bm(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:cg(o)}),t}function K1(n,t){n.includes("null")&&(t.nullable=!0);const o=n.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(an).includes(o[0].toUpperCase())?o[0].toUpperCase():an.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(an).includes(s.toUpperCase())?s.toUpperCase():an.TYPE_UNSPECIFIED})}}function jl(n){const t={},o=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=n.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(t.nullable=!0,n=d[1]):d[1].type==="null"&&(t.nullable=!0,n=d[0])),n.type instanceof Array&&K1(n.type,t);for(const[h,y]of Object.entries(n))if(y!=null)if(h=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;t.type=Object.values(an).includes(y.toUpperCase())?y.toUpperCase():an.TYPE_UNSPECIFIED}else if(o.includes(h))t[h]=jl(y);else if(s.includes(h)){const v=[];for(const m of y){if(m.type=="null"){t.nullable=!0;continue}v.push(jl(m))}t[h]=v}else if(r.includes(h)){const v={};for(const[m,x]of Object.entries(y))v[m]=jl(x);t[h]=v}else{if(h==="additionalProperties")continue;t[h]=y}return t}function ud(n){return jl(n)}function cd(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function dd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Yl(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=jl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=jl(t.response));return n}function Jl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of n)t.push(o);return t}function X1(n,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function so(n,t){if(typeof t!="string")throw new Error("name must be a string");return X1(n,t,"cachedContents")}function dg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Go(n){return ld(n)}function Q1(n){return n!=null&&typeof n=="object"&&"name"in n}function Z1(n){return n!=null&&typeof n=="object"&&"video"in n}function W1(n){return n!=null&&typeof n=="object"&&"uri"in n}function fg(n){var t;let o;if(Q1(n)&&(o=n.name),!(W1(n)&&(o=n.uri,o===void 0))&&!(Z1(n)&&(o=(t=n.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function pg(n,t){let o;return n.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function hg(n){for(const t of["models","tunedModels","publisherModels"])if(eS(n,t))return n[t];return[]}function eS(n,t){return n!==null&&typeof n=="object"&&t in n}function tS(n,t={}){const o=n,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function nS(n,t={}){const o=[],s=new Set;for(const r of n){const d=r.name;if(s.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);s.add(d);const h=tS(r,t);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function mg(n,t){let o;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function iS(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function gg(n){if(typeof n!="object"||n===null)return{};const t=n,o=t.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let d=!1;for(const h of r){if(typeof h!="object"||h===null)continue;const v=h.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){d=!0;break}}return d&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function Kl(n,t){const o=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function yg(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function oS(n){const t={},o=u(n,["responsesFile"]);o!=null&&c(t,["fileName"],o);const s=u(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>GS(h))),c(t,["inlinedResponses"],d)}const r=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["inlinedEmbedContentResponses"],d)}return t}function lS(n){const t={},o=u(n,["predictionsFormat"]);o!=null&&c(t,["format"],o);const s=u(n,["gcsDestination","outputUriPrefix"]);s!=null&&c(t,["gcsUri"],s);const r=u(n,["bigqueryDestination","outputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function sS(n){const t={},o=u(n,["format"]);o!=null&&c(t,["predictionsFormat"],o);const s=u(n,["gcsUri"]);s!=null&&c(t,["gcsDestination","outputUriPrefix"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&c(t,["bigqueryDestination","outputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function rr(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata","displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["metadata","state"]);r!=null&&c(t,["state"],yg(r));const d=u(n,["metadata","createTime"]);d!=null&&c(t,["createTime"],d);const h=u(n,["metadata","endTime"]);h!=null&&c(t,["endTime"],h);const y=u(n,["metadata","updateTime"]);y!=null&&c(t,["updateTime"],y);const v=u(n,["metadata","model"]);v!=null&&c(t,["model"],v);const m=u(n,["metadata","output"]);return m!=null&&c(t,["dest"],oS(gg(m))),t}function jc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["state"]);r!=null&&c(t,["state"],yg(r));const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["createTime"]);h!=null&&c(t,["createTime"],h);const y=u(n,["startTime"]);y!=null&&c(t,["startTime"],y);const v=u(n,["endTime"]);v!=null&&c(t,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(t,["updateTime"],m);const x=u(n,["model"]);x!=null&&c(t,["model"],x);const S=u(n,["inputConfig"]);S!=null&&c(t,["src"],aS(S));const T=u(n,["outputConfig"]);T!=null&&c(t,["dest"],lS(gg(T)));const A=u(n,["completionStats"]);return A!=null&&c(t,["completionStats"],A),t}function aS(n){const t={},o=u(n,["instancesFormat"]);o!=null&&c(t,["format"],o);const s=u(n,["gcsSource","uris"]);s!=null&&c(t,["gcsUri"],s);const r=u(n,["bigquerySource","inputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function rS(n,t){const o={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(t,["fileName"]);s!=null&&c(o,["fileName"],s);const r=u(t,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>PS(n,h))),c(o,["requests","requests"],d)}return o}function uS(n){const t={},o=u(n,["format"]);o!=null&&c(t,["instancesFormat"],o);const s=u(n,["gcsUri"]);s!=null&&c(t,["gcsSource","uris"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&c(t,["bigquerySource","inputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function cS(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function dS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Kl(n,s)),o}function fS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Kl(n,s)),o}function pS(n){const t={},o=u(n,["content"]);o!=null&&c(t,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],hS(s));const r=u(n,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const d=u(n,["finishReason"]);d!=null&&c(t,["finishReason"],d);const h=u(n,["avgLogprobs"]);h!=null&&c(t,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(t,["groundingMetadata"],y);const v=u(n,["index"]);v!=null&&c(t,["index"],v);const m=u(n,["logprobsResult"]);m!=null&&c(t,["logprobsResult"],m);const x=u(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),c(t,["safetyRatings"],T)}const S=u(n,["urlContextMetadata"]);return S!=null&&c(t,["urlContextMetadata"],S),t}function hS(n){const t={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function vg(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>jS(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function mS(n,t){const o={},s=u(n,["displayName"]);if(t!==void 0&&s!=null&&c(t,["batch","displayName"],s),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function gS(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["dest"]);return t!==void 0&&r!=null&&c(t,["outputConfig"],sS(iS(r))),o}function Sm(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],rS(n,mg(n,r)));const d=u(t,["config"]);return d!=null&&mS(d,o),o}function yS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],Vt(n,s));const r=u(t,["src"]);r!=null&&c(o,["inputConfig"],uS(mg(n,r)));const d=u(t,["config"]);return d!=null&&gS(d,o),o}function vS(n,t){const o={},s=u(n,["displayName"]);return t!==void 0&&s!=null&&c(t,["batch","displayName"],s),o}function xS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],_S(n,r));const d=u(t,["config"]);return d!=null&&vS(d,o),o}function bS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Kl(n,s)),o}function SS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Kl(n,s)),o}function TS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);return d!=null&&c(t,["error"],d),t}function CS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);return d!=null&&c(t,["error"],d),t}function wS(n,t){const o={},s=u(t,["contents"]);if(s!=null){let d=rd(n,s);Array.isArray(d)&&(d=d.map(h=>h)),c(o,["requests[]","request","content"],d)}const r=u(t,["config"]);return r!=null&&(c(o,["_self"],ES(r,o)),S1(o,{"requests[].*":"requests[].request.*"})),o}function ES(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const d=u(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function _S(n,t){const o={},s=u(t,["fileName"]);s!=null&&c(o,["file_name"],s);const r=u(t,["inlinedRequests"]);return r!=null&&c(o,["requests"],wS(n,r)),o}function AS(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function NS(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function MS(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function RS(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],vg(Ln(r)));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const J=u(t,["responseSchema"]);J!=null&&c(s,["responseSchema"],ud(J));const ue=u(t,["responseJsonSchema"]);if(ue!=null&&c(s,["responseJsonSchema"],ue),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const fe=u(t,["safetySettings"]);if(o!==void 0&&fe!=null){let St=fe;Array.isArray(St)&&(St=St.map(At=>$S(At))),c(o,["safetySettings"],St)}const Ge=u(t,["tools"]);if(o!==void 0&&Ge!=null){let St=Jl(Ge);Array.isArray(St)&&(St=St.map(At=>JS(Yl(At)))),c(o,["tools"],St)}const ke=u(t,["toolConfig"]);if(o!==void 0&&ke!=null&&c(o,["toolConfig"],YS(ke)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Ve=u(t,["cachedContent"]);o!==void 0&&Ve!=null&&c(o,["cachedContent"],so(n,Ve));const Se=u(t,["responseModalities"]);Se!=null&&c(s,["responseModalities"],Se);const nt=u(t,["mediaResolution"]);nt!=null&&c(s,["mediaResolution"],nt);const we=u(t,["speechConfig"]);if(we!=null&&c(s,["speechConfig"],cd(we)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=u(t,["thinkingConfig"]);Qe!=null&&c(s,["thinkingConfig"],Qe);const Ue=u(t,["imageConfig"]);Ue!=null&&c(s,["imageConfig"],LS(Ue));const ft=u(t,["enableEnhancedCivicAnswers"]);return ft!=null&&c(s,["enableEnhancedCivicAnswers"],ft),s}function kS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>pS(m))),c(t,["candidates"],v)}const r=u(n,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const d=u(n,["promptFeedback"]);d!=null&&c(t,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(t,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(t,["usageMetadata"],y),t}function IS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Kl(n,s)),o}function zS(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Kl(n,s)),o}function DS(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function US(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function LS(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function PS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["request","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let y=xi(r);Array.isArray(y)&&(y=y.map(v=>vg(v))),c(o,["request","contents"],y)}const d=u(t,["metadata"]);d!=null&&c(o,["metadata"],d);const h=u(t,["config"]);return h!=null&&c(o,["request","generationConfig"],RS(n,h,u(o,["request"],{}))),o}function GS(n){const t={},o=u(n,["response"]);o!=null&&c(t,["response"],kS(o));const s=u(n,["error"]);return s!=null&&c(t,["error"],s),t}function HS(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);if(t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function VS(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);t!==void 0&&r!=null&&c(t,["_query","pageToken"],r);const d=u(n,["filter"]);return t!==void 0&&d!=null&&c(t,["_query","filter"],d),o}function BS(n){const t={},o=u(n,["config"]);return o!=null&&HS(o,t),t}function FS(n){const t={},o=u(n,["config"]);return o!=null&&VS(o,t),t}function OS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>rr(h))),c(t,["batchJobs"],d)}return t}function qS(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>jc(h))),c(t,["batchJobs"],d)}return t}function jS(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],AS(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],NS(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],cS(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function $S(n){const t={},o=u(n,["category"]);if(o!=null&&c(t,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function YS(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],MS(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function JS(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],DS(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],US(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}var oo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(oo||(oo={}));class ol{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,d;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o?.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!s||Object.keys(s).length===0?h={config:{}}:typeof s=="object"?h=Object.assign({},s):h=s,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(d=(r=h.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}class KS extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ol(oo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=Sm(this.apiClient,t),s=o._url,r=$e("{model}:batchGenerateContent",s),y=o.batch.inputConfig.requests,v=y.requests,m=[];for(const x of v){const S=Object.assign({},x);if(S.systemInstruction){const T=S.systemInstruction;delete S.systemInstruction;const A=S.request;A.systemInstruction=T,S.request=A}m.push(S)}return y.requests=m,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const d=this.getGcsUri(t),h=this.getBigqueryUri(t);if(d)d.endsWith(".jsonl")?s.dest=`${d.slice(0,-6)}/dest`:s.dest=`${d}_dest_${r}`;else if(h)s.dest=`${h}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=yS(this.apiClient,t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>jc(x))}else{const m=Sm(this.apiClient,t);return y=$e("{model}:batchGenerateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>rr(x))}}async createEmbeddingsInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=xS(this.apiClient,t);return d=$e("{model}:asyncBatchEmbedContent",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>rr(v))}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=zS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>jc(x))}else{const m=IS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>rr(x))}}async cancel(t){var o,s,r,d;let h="",y={};if(this.apiClient.isVertexAI()){const v=fS(this.apiClient,t);h=$e("batchPredictionJobs/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=dS(this.apiClient,t);h=$e("batches/{name}:cancel",v._url),y=v._query,delete v._url,delete v._query,await this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=FS(t);return y=$e("batchPredictionJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=qS(x),T=new ym;return Object.assign(T,S),T})}else{const m=BS(t);return y=$e("batches",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=OS(x),T=new ym;return Object.assign(T,S),T})}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=SS(this.apiClient,t);return y=$e("batchPredictionJobs/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>CS(x))}else{const m=bS(this.apiClient,t);return y=$e("batches/{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>TS(x))}}}function XS(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Tm(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>xT(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function QS(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const d=u(n,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const h=u(n,["contents"]);if(t!==void 0&&h!=null){let x=xi(h);Array.isArray(x)&&(x=x.map(S=>Tm(S))),c(t,["contents"],x)}const y=u(n,["systemInstruction"]);t!==void 0&&y!=null&&c(t,["systemInstruction"],Tm(Ln(y)));const v=u(n,["tools"]);if(t!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>ST(S))),c(t,["tools"],x)}const m=u(n,["toolConfig"]);if(t!==void 0&&m!=null&&c(t,["toolConfig"],bT(m)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function ZS(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const d=u(n,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const h=u(n,["contents"]);if(t!==void 0&&h!=null){let S=xi(h);Array.isArray(S)&&(S=S.map(T=>T)),c(t,["contents"],S)}const y=u(n,["systemInstruction"]);t!==void 0&&y!=null&&c(t,["systemInstruction"],Ln(y));const v=u(n,["tools"]);if(t!==void 0&&v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>TT(T))),c(t,["tools"],S)}const m=u(n,["toolConfig"]);t!==void 0&&m!=null&&c(t,["toolConfig"],m);const x=u(n,["kmsKeyName"]);return t!==void 0&&x!=null&&c(t,["encryption_spec","kmsKeyName"],x),o}function WS(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],sg(n,s));const r=u(t,["config"]);return r!=null&&QS(r,o),o}function eT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],sg(n,s));const r=u(t,["config"]);return r!=null&&ZS(r,o),o}function tT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function nT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function iT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function oT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function lT(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function sT(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function aT(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function rT(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function uT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function cT(n,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],so(n,s)),o}function dT(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function fT(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function pT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function hT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function mT(n){const t={},o=u(n,["config"]);return o!=null&&pT(o,t),t}function gT(n){const t={},o=u(n,["config"]);return o!=null&&hT(o,t),t}function yT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["cachedContents"],d)}return t}function vT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["cachedContents"],d)}return t}function xT(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],lT(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],sT(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],XS(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function bT(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],aT(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function ST(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],dT(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],fT(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function TT(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>rT(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function CT(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function wT(n,t){const o={},s=u(n,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(n,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function ET(n,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],so(n,s));const r=u(t,["config"]);return r!=null&&CT(r,o),o}function _T(n,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],so(n,s));const r=u(t,["config"]);return r!=null&&wT(r,o),o}class AT extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ol(oo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eT(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=WS(this.apiClient,t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=cT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=uT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=nT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=oT(x),T=new mm;return Object.assign(T,S),T})}else{const m=tT(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=iT(x),T=new mm;return Object.assign(T,S),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_T(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const m=ET(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=gT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=vT(x),T=new gm;return Object.assign(T,S),T})}else{const m=mT(t);return y=$e("cachedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=yT(x),T=new gm;return Object.assign(T,S),T})}}}function gr(n,t){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(o[s[r]]=n[s[r]]);return o}function Cm(n){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&n[t],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(n){return this instanceof vt?(this.v=n,this):new vt(n)}function Ai(n,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,t||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",h),r[Symbol.asyncIterator]=function(){return this},r;function h(A){return function(N){return Promise.resolve(N).then(A,S)}}function y(A,N){s[A]&&(r[A]=function(O){return new Promise(function(F,J){d.push([A,O,F,J])>1||v(A,O)})},N&&(r[A]=N(r[A])))}function v(A,N){try{m(s[A](N))}catch(O){T(d[0][3],O)}}function m(A){A.value instanceof vt?Promise.resolve(A.value.v).then(x,S):T(d[0][2],A)}function x(A){v("next",A)}function S(A){v("throw",A)}function T(A,N){A(N),d.shift(),d.length&&v(d[0][0],d[0][1])}}function Ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],o;return t?t.call(n):(n=typeof Cm=="function"?Cm(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(d){o[d]=n[d]&&function(h){return new Promise(function(y,v){h=n[d](h),r(y,v,h.done,h.value)})}}function r(d,h,y,v){Promise.resolve(v).then(function(m){d({value:m,done:y})},h)}}function NT(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const o=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:xg(o)}function xg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function MT(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function wm(n){if(n===void 0||n.length===0)return[];const t=[],o=n.length;let s=0;for(;s<o;)if(n[s].role==="user")t.push(n[s]),s++;else{const r=[];let d=!0;for(;s<o&&n[s].role==="model";)r.push(n[s]),d&&!xg(n[s])&&(d=!1),s++;d?t.push(...r):t.pop()}return t}class RT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new kT(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class kT{constructor(t,o,s,r={},d=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),MT(d)}async sendMessage(t){var o;await this.sendPromise;const s=Ln(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var d,h,y;const v=await r,m=(h=(d=v.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content,x=v.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let T=[];x!=null&&(T=(y=x.slice(S))!==null&&y!==void 0?y:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=Ln(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,s)}getHistory(t=!1){const o=t?wm(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return Ai(this,arguments,function*(){var r,d,h,y,v,m;const x=[];try{for(var S=!0,T=Ni(t),A;A=yield vt(T.next()),r=A.done,!r;S=!0){y=A.value,S=!1;const N=y;if(NT(N)){const O=(m=(v=N.candidates)===null||v===void 0?void 0:v[0])===null||m===void 0?void 0:m.content;O!==void 0&&x.push(O)}yield yield vt(N)}}catch(N){d={error:N}}finally{try{!S&&!r&&(h=T.return)&&(yield vt(h.call(T)))}finally{if(d)throw d.error}}this.recordHistory(o,x)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(d=>d.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...wm(s)):this.history.push(t),this.history.push(...r)}}class Sr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Sr.prototype)}}function IT(n){const t={},o=u(n,["file"]);return o!=null&&c(t,["file"],o),t}function zT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function DT(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","file"],fg(o)),t}function UT(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function LT(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","file"],fg(o)),t}function PT(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function GT(n){const t={},o=u(n,["config"]);return o!=null&&PT(o,t),t}function HT(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["files"],d)}return t}class VT extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ol(oo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=GT(t);return d=$e("files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=HT(v),x=new q1;return Object.assign(x,m),x})}}async createInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=IT(t);return d=$e("upload/v1beta/files",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=zT(v),x=new j1;return Object.assign(x,m),x})}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=LT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=DT(t);return d=$e("files/{file}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=UT(v),x=new $1;return Object.assign(x,m),x})}}}function ur(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function BT(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>iC(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function FT(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function OT(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function qT(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function jT(n){const t={},o=u(n,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const d=u(n,["candidateCount"]);d!=null&&c(t,["candidateCount"],d);const h=u(n,["enableAffectiveDialog"]);h!=null&&c(t,["enableAffectiveDialog"],h);const y=u(n,["frequencyPenalty"]);y!=null&&c(t,["frequencyPenalty"],y);const v=u(n,["logprobs"]);v!=null&&c(t,["logprobs"],v);const m=u(n,["maxOutputTokens"]);m!=null&&c(t,["maxOutputTokens"],m);const x=u(n,["mediaResolution"]);x!=null&&c(t,["mediaResolution"],x);const S=u(n,["presencePenalty"]);S!=null&&c(t,["presencePenalty"],S);const T=u(n,["responseLogprobs"]);T!=null&&c(t,["responseLogprobs"],T);const A=u(n,["responseMimeType"]);A!=null&&c(t,["responseMimeType"],A);const N=u(n,["responseModalities"]);N!=null&&c(t,["responseModalities"],N);const O=u(n,["responseSchema"]);O!=null&&c(t,["responseSchema"],O);const F=u(n,["routingConfig"]);F!=null&&c(t,["routingConfig"],F);const J=u(n,["seed"]);J!=null&&c(t,["seed"],J);const ue=u(n,["speechConfig"]);ue!=null&&c(t,["speechConfig"],ue);const fe=u(n,["stopSequences"]);fe!=null&&c(t,["stopSequences"],fe);const Ge=u(n,["temperature"]);Ge!=null&&c(t,["temperature"],Ge);const ke=u(n,["thinkingConfig"]);ke!=null&&c(t,["thinkingConfig"],ke);const Ve=u(n,["topK"]);Ve!=null&&c(t,["topK"],Ve);const Se=u(n,["topP"]);if(Se!=null&&c(t,["topP"],Se),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function $T(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function YT(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function JT(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],dd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],BT(Ln(N)));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let Ve=Jl(O);Array.isArray(Ve)&&(Ve=Ve.map(Se=>lC(Yl(Se)))),c(t,["setup","tools"],Ve)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],oC(F));const J=u(n,["inputAudioTranscription"]);t!==void 0&&J!=null&&c(t,["setup","inputAudioTranscription"],J);const ue=u(n,["outputAudioTranscription"]);t!==void 0&&ue!=null&&c(t,["setup","outputAudioTranscription"],ue);const fe=u(n,["realtimeInputConfig"]);t!==void 0&&fe!=null&&c(t,["setup","realtimeInputConfig"],fe);const Ge=u(n,["contextWindowCompression"]);t!==void 0&&Ge!=null&&c(t,["setup","contextWindowCompression"],Ge);const ke=u(n,["proactivity"]);if(t!==void 0&&ke!=null&&c(t,["setup","proactivity"],ke),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function KT(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],jT(s));const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],dd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],Ln(N));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let Se=Jl(O);Array.isArray(Se)&&(Se=Se.map(nt=>sC(Yl(nt)))),c(t,["setup","tools"],Se)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],F);const J=u(n,["inputAudioTranscription"]);t!==void 0&&J!=null&&c(t,["setup","inputAudioTranscription"],J);const ue=u(n,["outputAudioTranscription"]);t!==void 0&&ue!=null&&c(t,["setup","outputAudioTranscription"],ue);const fe=u(n,["realtimeInputConfig"]);t!==void 0&&fe!=null&&c(t,["setup","realtimeInputConfig"],fe);const Ge=u(n,["contextWindowCompression"]);t!==void 0&&Ge!=null&&c(t,["setup","contextWindowCompression"],Ge);const ke=u(n,["proactivity"]);t!==void 0&&ke!=null&&c(t,["setup","proactivity"],ke);const Ve=u(n,["explicitVadSignal"]);return t!==void 0&&Ve!=null&&c(t,["setup","explicitVadSignal"],Ve),o}function XT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Vt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],JT(r,o)),o}function QT(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Vt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],KT(r,o)),o}function ZT(n){const t={},o=u(n,["musicGenerationConfig"]);return o!=null&&c(t,["musicGenerationConfig"],o),t}function WT(n){const t={},o=u(n,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["weightedPrompts"],s)}return t}function eC(n){const t={},o=u(n,["media"]);if(o!=null){let m=ag(o);Array.isArray(m)&&(m=m.map(x=>ur(x))),c(t,["mediaChunks"],m)}const s=u(n,["audio"]);s!=null&&c(t,["audio"],ur(ug(s)));const r=u(n,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const d=u(n,["video"]);d!=null&&c(t,["video"],ur(rg(d)));const h=u(n,["text"]);h!=null&&c(t,["text"],h);const y=u(n,["activityStart"]);y!=null&&c(t,["activityStart"],y);const v=u(n,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function tC(n){const t={},o=u(n,["media"]);if(o!=null){let m=ag(o);Array.isArray(m)&&(m=m.map(x=>x)),c(t,["mediaChunks"],m)}const s=u(n,["audio"]);s!=null&&c(t,["audio"],ug(s));const r=u(n,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const d=u(n,["video"]);d!=null&&c(t,["video"],rg(d));const h=u(n,["text"]);h!=null&&c(t,["text"],h);const y=u(n,["activityStart"]);y!=null&&c(t,["activityStart"],y);const v=u(n,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function nC(n){const t={},o=u(n,["setupComplete"]);o!=null&&c(t,["setupComplete"],o);const s=u(n,["serverContent"]);s!=null&&c(t,["serverContent"],s);const r=u(n,["toolCall"]);r!=null&&c(t,["toolCall"],r);const d=u(n,["toolCallCancellation"]);d!=null&&c(t,["toolCallCancellation"],d);const h=u(n,["usageMetadata"]);h!=null&&c(t,["usageMetadata"],aC(h));const y=u(n,["goAway"]);y!=null&&c(t,["goAway"],y);const v=u(n,["sessionResumptionUpdate"]);v!=null&&c(t,["sessionResumptionUpdate"],v);const m=u(n,["voiceActivityDetectionSignal"]);return m!=null&&c(t,["voiceActivityDetectionSignal"],m),t}function iC(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],FT(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],OT(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],ur(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function oC(n){const t={},o=u(n,["handle"]);if(o!=null&&c(t,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function lC(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],$T(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],YT(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function sC(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>qT(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function aC(n){const t={},o=u(n,["promptTokenCount"]);o!=null&&c(t,["promptTokenCount"],o);const s=u(n,["cachedContentTokenCount"]);s!=null&&c(t,["cachedContentTokenCount"],s);const r=u(n,["candidatesTokenCount"]);r!=null&&c(t,["responseTokenCount"],r);const d=u(n,["toolUsePromptTokenCount"]);d!=null&&c(t,["toolUsePromptTokenCount"],d);const h=u(n,["thoughtsTokenCount"]);h!=null&&c(t,["thoughtsTokenCount"],h);const y=u(n,["totalTokenCount"]);y!=null&&c(t,["totalTokenCount"],y);const v=u(n,["promptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["promptTokensDetails"],A)}const m=u(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["cacheTokensDetails"],A)}const x=u(n,["candidatesTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["responseTokensDetails"],A)}const S=u(n,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(N=>N)),c(t,["toolUsePromptTokensDetails"],A)}const T=u(n,["trafficType"]);return T!=null&&c(t,["trafficType"],T),t}function rC(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function uC(n){const t={},o=u(n,["content"]);o!=null&&c(t,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],cC(s));const r=u(n,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const d=u(n,["finishReason"]);d!=null&&c(t,["finishReason"],d);const h=u(n,["avgLogprobs"]);h!=null&&c(t,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(t,["groundingMetadata"],y);const v=u(n,["index"]);v!=null&&c(t,["index"],v);const m=u(n,["logprobsResult"]);m!=null&&c(t,["logprobsResult"],m);const x=u(n,["safetyRatings"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>A)),c(t,["safetyRatings"],T)}const S=u(n,["urlContextMetadata"]);return S!=null&&c(t,["urlContextMetadata"],S),t}function cC(n){const t={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function dC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let d=xi(r);Array.isArray(d)&&(d=d.map(h=>h)),c(o,["contents"],d)}return o}function fC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(t,["tokensInfo"],r)}return t}function pC(n){const t={},o=u(n,["values"]);o!=null&&c(t,["values"],o);const s=u(n,["statistics"]);return s!=null&&c(t,["statistics"],hC(s)),t}function hC(n){const t={},o=u(n,["truncated"]);o!=null&&c(t,["truncated"],o);const s=u(n,["token_count"]);return s!=null&&c(t,["tokenCount"],s),t}function Tr(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>Cw(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function mC(n){const t={},o=u(n,["controlType"]);o!=null&&c(t,["controlType"],o);const s=u(n,["enableControlImageComputation"]);return s!=null&&c(t,["computeControl"],s),t}function gC(n){const t={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function yC(n,t){const o={},s=u(n,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],Ln(s));const r=u(n,["tools"]);if(t!==void 0&&r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>Cg(y))),c(t,["tools"],h)}const d=u(n,["generationConfig"]);return t!==void 0&&d!=null&&c(t,["generationConfig"],rw(d)),o}function vC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>Tr(y))),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&gC(d),o}function xC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&yC(d,o),o}function bC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);s!=null&&c(t,["totalTokens"],s);const r=u(n,["cachedContentTokenCount"]);return r!=null&&c(t,["cachedContentTokenCount"],r),t}function SC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);return s!=null&&c(t,["totalTokens"],s),t}function TC(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Vt(n,s)),o}function CC(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Vt(n,s)),o}function wC(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function EC(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function _C(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const d=u(n,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const h=u(n,["aspectRatio"]);t!==void 0&&h!=null&&c(t,["parameters","aspectRatio"],h);const y=u(n,["guidanceScale"]);t!==void 0&&y!=null&&c(t,["parameters","guidanceScale"],y);const v=u(n,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const m=u(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&c(t,["parameters","includeSafetyAttributes"],S);const T=u(n,["includeRaiReason"]);t!==void 0&&T!=null&&c(t,["parameters","includeRaiReason"],T);const A=u(n,["language"]);t!==void 0&&A!=null&&c(t,["parameters","language"],A);const N=u(n,["outputMimeType"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","mimeType"],N);const O=u(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&c(t,["parameters","outputOptions","compressionQuality"],O);const F=u(n,["addWatermark"]);t!==void 0&&F!=null&&c(t,["parameters","addWatermark"],F);const J=u(n,["labels"]);t!==void 0&&J!=null&&c(t,["labels"],J);const ue=u(n,["editMode"]);t!==void 0&&ue!=null&&c(t,["parameters","editMode"],ue);const fe=u(n,["baseSteps"]);return t!==void 0&&fe!=null&&c(t,["parameters","editConfig","baseSteps"],fe),o}function AC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>Mw(v))),c(o,["instances[0]","referenceImages"],y)}const h=u(t,["config"]);return h!=null&&_C(h,o),o}function NC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Cr(d))),c(t,["generatedImages"],r)}return t}function MC(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const d=u(n,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function RC(n,t){const o={},s=u(n,["taskType"]);t!==void 0&&s!=null&&c(t,["instances[]","task_type"],s);const r=u(n,["title"]);t!==void 0&&r!=null&&c(t,["instances[]","title"],r);const d=u(n,["outputDimensionality"]);t!==void 0&&d!=null&&c(t,["parameters","outputDimensionality"],d);const h=u(n,["mimeType"]);t!==void 0&&h!=null&&c(t,["instances[]","mimeType"],h);const y=u(n,["autoTruncate"]);return t!==void 0&&y!=null&&c(t,["parameters","autoTruncate"],y),o}function kC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let y=rd(n,r);Array.isArray(y)&&(y=y.map(v=>v)),c(o,["requests[]","content"],y)}const d=u(t,["config"]);d!=null&&MC(d,o);const h=u(t,["model"]);return h!==void 0&&c(o,["requests[]","model"],Vt(n,h)),o}function IC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let h=rd(n,r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["instances[]","content"],h)}const d=u(t,["config"]);return d!=null&&RC(d,o),o}function zC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["embeddings"],d)}const r=u(n,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function DC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions[]","embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>pC(h))),c(t,["embeddings"],d)}const r=u(n,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function UC(n){const t={},o=u(n,["endpoint"]);o!=null&&c(t,["name"],o);const s=u(n,["deployedModelId"]);return s!=null&&c(t,["deployedModelId"],s),t}function LC(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function PC(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GC(n){const t={},o=u(n,["mode"]);o!=null&&c(t,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&c(t,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function HC(n){const t={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&c(t,["description"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const r=u(n,["parameters"]);r!=null&&c(t,["parameters"],r);const d=u(n,["parametersJsonSchema"]);d!=null&&c(t,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(t,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(t,["responseJsonSchema"],y),t}function VC(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Tr(Ln(r)));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const J=u(t,["responseSchema"]);J!=null&&c(s,["responseSchema"],ud(J));const ue=u(t,["responseJsonSchema"]);if(ue!=null&&c(s,["responseJsonSchema"],ue),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const fe=u(t,["safetySettings"]);if(o!==void 0&&fe!=null){let St=fe;Array.isArray(St)&&(St=St.map(At=>Rw(At))),c(o,["safetySettings"],St)}const Ge=u(t,["tools"]);if(o!==void 0&&Ge!=null){let St=Jl(Ge);Array.isArray(St)&&(St=St.map(At=>Pw(Yl(At)))),c(o,["tools"],St)}const ke=u(t,["toolConfig"]);if(o!==void 0&&ke!=null&&c(o,["toolConfig"],Lw(ke)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Ve=u(t,["cachedContent"]);o!==void 0&&Ve!=null&&c(o,["cachedContent"],so(n,Ve));const Se=u(t,["responseModalities"]);Se!=null&&c(s,["responseModalities"],Se);const nt=u(t,["mediaResolution"]);nt!=null&&c(s,["mediaResolution"],nt);const we=u(t,["speechConfig"]);if(we!=null&&c(s,["speechConfig"],cd(we)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Qe=u(t,["thinkingConfig"]);Qe!=null&&c(s,["thinkingConfig"],Qe);const Ue=u(t,["imageConfig"]);Ue!=null&&c(s,["imageConfig"],pw(Ue));const ft=u(t,["enableEnhancedCivicAnswers"]);return ft!=null&&c(s,["enableEnhancedCivicAnswers"],ft),s}function BC(n,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Ln(r));const d=u(t,["temperature"]);d!=null&&c(s,["temperature"],d);const h=u(t,["topP"]);h!=null&&c(s,["topP"],h);const y=u(t,["topK"]);y!=null&&c(s,["topK"],y);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const m=u(t,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(t,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const S=u(t,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const T=u(t,["logprobs"]);T!=null&&c(s,["logprobs"],T);const A=u(t,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const N=u(t,["frequencyPenalty"]);N!=null&&c(s,["frequencyPenalty"],N);const O=u(t,["seed"]);O!=null&&c(s,["seed"],O);const F=u(t,["responseMimeType"]);F!=null&&c(s,["responseMimeType"],F);const J=u(t,["responseSchema"]);J!=null&&c(s,["responseSchema"],ud(J));const ue=u(t,["responseJsonSchema"]);ue!=null&&c(s,["responseJsonSchema"],ue);const fe=u(t,["routingConfig"]);fe!=null&&c(s,["routingConfig"],fe);const Ge=u(t,["modelSelectionConfig"]);Ge!=null&&c(s,["modelConfig"],Ge);const ke=u(t,["safetySettings"]);if(o!==void 0&&ke!=null){let B=ke;Array.isArray(B)&&(B=B.map(xe=>xe)),c(o,["safetySettings"],B)}const Ve=u(t,["tools"]);if(o!==void 0&&Ve!=null){let B=Jl(Ve);Array.isArray(B)&&(B=B.map(xe=>Cg(Yl(xe)))),c(o,["tools"],B)}const Se=u(t,["toolConfig"]);o!==void 0&&Se!=null&&c(o,["toolConfig"],Se);const nt=u(t,["labels"]);o!==void 0&&nt!=null&&c(o,["labels"],nt);const we=u(t,["cachedContent"]);o!==void 0&&we!=null&&c(o,["cachedContent"],so(n,we));const Qe=u(t,["responseModalities"]);Qe!=null&&c(s,["responseModalities"],Qe);const Ue=u(t,["mediaResolution"]);Ue!=null&&c(s,["mediaResolution"],Ue);const ft=u(t,["speechConfig"]);ft!=null&&c(s,["speechConfig"],cd(ft));const St=u(t,["audioTimestamp"]);St!=null&&c(s,["audioTimestamp"],St);const At=u(t,["thinkingConfig"]);At!=null&&c(s,["thinkingConfig"],At);const be=u(t,["imageConfig"]);if(be!=null&&c(s,["imageConfig"],hw(be)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Em(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>Tr(y))),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&c(o,["generationConfig"],VC(n,d,o)),o}function _m(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["contents"]);if(r!=null){let h=xi(r);Array.isArray(h)&&(h=h.map(y=>y)),c(o,["contents"],h)}const d=u(t,["config"]);return d!=null&&c(o,["generationConfig"],BC(n,d,o)),o}function Am(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(m=>uC(m))),c(t,["candidates"],v)}const r=u(n,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const d=u(n,["promptFeedback"]);d!=null&&c(t,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(t,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(t,["usageMetadata"],y),t}function Nm(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(x=>x)),c(t,["candidates"],m)}const r=u(n,["createTime"]);r!=null&&c(t,["createTime"],r);const d=u(n,["modelVersion"]);d!=null&&c(t,["modelVersion"],d);const h=u(n,["promptFeedback"]);h!=null&&c(t,["promptFeedback"],h);const y=u(n,["responseId"]);y!=null&&c(t,["responseId"],y);const v=u(n,["usageMetadata"]);return v!=null&&c(t,["usageMetadata"],v),t}function FC(n,t){const o={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(n,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["aspectRatio"]);t!==void 0&&r!=null&&c(t,["parameters","aspectRatio"],r);const d=u(n,["guidanceScale"]);if(t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=u(n,["safetyFilterLevel"]);t!==void 0&&h!=null&&c(t,["parameters","safetySetting"],h);const y=u(n,["personGeneration"]);t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y);const v=u(n,["includeSafetyAttributes"]);t!==void 0&&v!=null&&c(t,["parameters","includeSafetyAttributes"],v);const m=u(n,["includeRaiReason"]);t!==void 0&&m!=null&&c(t,["parameters","includeRaiReason"],m);const x=u(n,["language"]);t!==void 0&&x!=null&&c(t,["parameters","language"],x);const S=u(n,["outputMimeType"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","mimeType"],S);const T=u(n,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&c(t,["parameters","outputOptions","compressionQuality"],T),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=u(n,["imageSize"]);if(t!==void 0&&A!=null&&c(t,["parameters","sampleImageSize"],A),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function OC(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const d=u(n,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const h=u(n,["aspectRatio"]);t!==void 0&&h!=null&&c(t,["parameters","aspectRatio"],h);const y=u(n,["guidanceScale"]);t!==void 0&&y!=null&&c(t,["parameters","guidanceScale"],y);const v=u(n,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const m=u(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["includeSafetyAttributes"]);t!==void 0&&S!=null&&c(t,["parameters","includeSafetyAttributes"],S);const T=u(n,["includeRaiReason"]);t!==void 0&&T!=null&&c(t,["parameters","includeRaiReason"],T);const A=u(n,["language"]);t!==void 0&&A!=null&&c(t,["parameters","language"],A);const N=u(n,["outputMimeType"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","mimeType"],N);const O=u(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&c(t,["parameters","outputOptions","compressionQuality"],O);const F=u(n,["addWatermark"]);t!==void 0&&F!=null&&c(t,["parameters","addWatermark"],F);const J=u(n,["labels"]);t!==void 0&&J!=null&&c(t,["labels"],J);const ue=u(n,["imageSize"]);t!==void 0&&ue!=null&&c(t,["parameters","sampleImageSize"],ue);const fe=u(n,["enhancePrompt"]);return t!==void 0&&fe!=null&&c(t,["parameters","enhancePrompt"],fe),o}function qC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["config"]);return d!=null&&FC(d,o),o}function jC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["config"]);return d!=null&&OC(d,o),o}function $C(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>ow(h))),c(t,["generatedImages"],d)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],Sg(r)),t}function YC(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>Cr(h))),c(t,["generatedImages"],d)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],Tg(r)),t}function JC(n,t){const o={},s=u(n,["numberOfVideos"]);if(t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(n,["durationSeconds"]);if(t!==void 0&&r!=null&&c(t,["parameters","durationSeconds"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["aspectRatio"]);t!==void 0&&d!=null&&c(t,["parameters","aspectRatio"],d);const h=u(n,["resolution"]);t!==void 0&&h!=null&&c(t,["parameters","resolution"],h);const y=u(n,["personGeneration"]);if(t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=u(n,["negativePrompt"]);t!==void 0&&v!=null&&c(t,["parameters","negativePrompt"],v);const m=u(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&c(t,["parameters","enhancePrompt"],m),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=u(n,["lastFrame"]);t!==void 0&&x!=null&&c(t,["instances[0]","lastFrame"],wr(x));const S=u(n,["referenceImages"]);if(t!==void 0&&S!=null){let T=S;Array.isArray(T)&&(T=T.map(A=>Xw(A))),c(t,["instances[0]","referenceImages"],T)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function KC(n,t){const o={},s=u(n,["numberOfVideos"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const d=u(n,["fps"]);t!==void 0&&d!=null&&c(t,["parameters","fps"],d);const h=u(n,["durationSeconds"]);t!==void 0&&h!=null&&c(t,["parameters","durationSeconds"],h);const y=u(n,["seed"]);t!==void 0&&y!=null&&c(t,["parameters","seed"],y);const v=u(n,["aspectRatio"]);t!==void 0&&v!=null&&c(t,["parameters","aspectRatio"],v);const m=u(n,["resolution"]);t!==void 0&&m!=null&&c(t,["parameters","resolution"],m);const x=u(n,["personGeneration"]);t!==void 0&&x!=null&&c(t,["parameters","personGeneration"],x);const S=u(n,["pubsubTopic"]);t!==void 0&&S!=null&&c(t,["parameters","pubsubTopic"],S);const T=u(n,["negativePrompt"]);t!==void 0&&T!=null&&c(t,["parameters","negativePrompt"],T);const A=u(n,["enhancePrompt"]);t!==void 0&&A!=null&&c(t,["parameters","enhancePrompt"],A);const N=u(n,["generateAudio"]);t!==void 0&&N!=null&&c(t,["parameters","generateAudio"],N);const O=u(n,["lastFrame"]);t!==void 0&&O!=null&&c(t,["instances[0]","lastFrame"],Mi(O));const F=u(n,["referenceImages"]);if(t!==void 0&&F!=null){let fe=F;Array.isArray(fe)&&(fe=fe.map(Ge=>Qw(Ge))),c(t,["instances[0]","referenceImages"],fe)}const J=u(n,["mask"]);t!==void 0&&J!=null&&c(t,["instances[0]","mask"],Kw(J));const ue=u(n,["compressionQuality"]);return t!==void 0&&ue!=null&&c(t,["parameters","compressionQuality"],ue),o}function XC(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response","generateVideoResponse"]);return h!=null&&c(t,["response"],ew(h)),t}function QC(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],tw(h)),t}function ZC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["image"]);d!=null&&c(o,["instances[0]","image"],wr(d));const h=u(t,["video"]);h!=null&&c(o,["instances[0]","video"],wg(h));const y=u(t,["source"]);y!=null&&nw(y,o);const v=u(t,["config"]);return v!=null&&JC(v,o),o}function WC(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const d=u(t,["image"]);d!=null&&c(o,["instances[0]","image"],Mi(d));const h=u(t,["video"]);h!=null&&c(o,["instances[0]","video"],Eg(h));const y=u(t,["source"]);y!=null&&iw(y,o);const v=u(t,["config"]);return v!=null&&KC(v,o),o}function ew(n){const t={},o=u(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>sw(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function tw(n){const t={},o=u(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>aw(h))),c(t,["generatedVideos"],d)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function nw(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],wr(r));const d=u(n,["video"]);return t!==void 0&&d!=null&&c(t,["instances[0]","video"],wg(d)),o}function iw(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Mi(r));const d=u(n,["video"]);return t!==void 0&&d!=null&&c(t,["instances[0]","video"],Eg(d)),o}function ow(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["image"],mw(o));const s=u(n,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(n,["_self"]);return r!=null&&c(t,["safetyAttributes"],Sg(r)),t}function Cr(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["image"],bg(o));const s=u(n,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(n,["_self"]);r!=null&&c(t,["safetyAttributes"],Tg(r));const d=u(n,["prompt"]);return d!=null&&c(t,["enhancedPrompt"],d),t}function lw(n){const t={},o=u(n,["_self"]);o!=null&&c(t,["mask"],bg(o));const s=u(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(t,["labels"],r)}return t}function sw(n){const t={},o=u(n,["video"]);return o!=null&&c(t,["video"],Yw(o)),t}function aw(n){const t={},o=u(n,["_self"]);return o!=null&&c(t,["video"],Jw(o)),t}function rw(n){const t={},o=u(n,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const d=u(n,["candidateCount"]);d!=null&&c(t,["candidateCount"],d);const h=u(n,["enableAffectiveDialog"]);h!=null&&c(t,["enableAffectiveDialog"],h);const y=u(n,["frequencyPenalty"]);y!=null&&c(t,["frequencyPenalty"],y);const v=u(n,["logprobs"]);v!=null&&c(t,["logprobs"],v);const m=u(n,["maxOutputTokens"]);m!=null&&c(t,["maxOutputTokens"],m);const x=u(n,["mediaResolution"]);x!=null&&c(t,["mediaResolution"],x);const S=u(n,["presencePenalty"]);S!=null&&c(t,["presencePenalty"],S);const T=u(n,["responseLogprobs"]);T!=null&&c(t,["responseLogprobs"],T);const A=u(n,["responseMimeType"]);A!=null&&c(t,["responseMimeType"],A);const N=u(n,["responseModalities"]);N!=null&&c(t,["responseModalities"],N);const O=u(n,["responseSchema"]);O!=null&&c(t,["responseSchema"],O);const F=u(n,["routingConfig"]);F!=null&&c(t,["routingConfig"],F);const J=u(n,["seed"]);J!=null&&c(t,["seed"],J);const ue=u(n,["speechConfig"]);ue!=null&&c(t,["speechConfig"],ue);const fe=u(n,["stopSequences"]);fe!=null&&c(t,["stopSequences"],fe);const Ge=u(n,["temperature"]);Ge!=null&&c(t,["temperature"],Ge);const ke=u(n,["thinkingConfig"]);ke!=null&&c(t,["thinkingConfig"],ke);const Ve=u(n,["topK"]);Ve!=null&&c(t,["topK"],Ve);const Se=u(n,["topP"]);if(Se!=null&&c(t,["topP"],Se),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function uw(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Vt(n,s)),o}function cw(n,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Vt(n,s)),o}function dw(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function fw(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function pw(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function hw(n){const t={},o=u(n,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(n,["imageSize"]);s!=null&&c(t,["imageSize"],s);const r=u(n,["outputMimeType"]);r!=null&&c(t,["imageOutputOptions","mimeType"],r);const d=u(n,["outputCompressionQuality"]);return d!=null&&c(t,["imageOutputOptions","compressionQuality"],d),t}function mw(n){const t={},o=u(n,["bytesBase64Encoded"]);o!=null&&c(t,["imageBytes"],Go(o));const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function bg(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["imageBytes"],Go(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function wr(n){const t={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(n,["imageBytes"]);o!=null&&c(t,["bytesBase64Encoded"],Go(o));const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Mi(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["imageBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Go(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function gw(n,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const d=u(t,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const h=u(t,["filter"]);o!==void 0&&h!=null&&c(o,["_query","filter"],h);const y=u(t,["queryBase"]);return o!==void 0&&y!=null&&c(o,["_url","models_url"],pg(n,y)),s}function yw(n,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const d=u(t,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const h=u(t,["filter"]);o!==void 0&&h!=null&&c(o,["_query","filter"],h);const y=u(t,["queryBase"]);return o!==void 0&&y!=null&&c(o,["_url","models_url"],pg(n,y)),s}function vw(n,t){const o={},s=u(t,["config"]);return s!=null&&gw(n,s,o),o}function xw(n,t){const o={},s=u(t,["config"]);return s!=null&&yw(n,s,o),o}function bw(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let d=hg(r);Array.isArray(d)&&(d=d.map(h=>$c(h))),c(t,["models"],d)}return t}function Sw(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let d=hg(r);Array.isArray(d)&&(d=d.map(h=>Yc(h))),c(t,["models"],d)}return t}function Tw(n){const t={},o=u(n,["maskMode"]);o!=null&&c(t,["maskMode"],o);const s=u(n,["segmentationClasses"]);s!=null&&c(t,["maskClasses"],s);const r=u(n,["maskDilation"]);return r!=null&&c(t,["dilation"],r),t}function $c(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);r!=null&&c(t,["description"],r);const d=u(n,["version"]);d!=null&&c(t,["version"],d);const h=u(n,["_self"]);h!=null&&c(t,["tunedModelInfo"],Gw(h));const y=u(n,["inputTokenLimit"]);y!=null&&c(t,["inputTokenLimit"],y);const v=u(n,["outputTokenLimit"]);v!=null&&c(t,["outputTokenLimit"],v);const m=u(n,["supportedGenerationMethods"]);m!=null&&c(t,["supportedActions"],m);const x=u(n,["temperature"]);x!=null&&c(t,["temperature"],x);const S=u(n,["maxTemperature"]);S!=null&&c(t,["maxTemperature"],S);const T=u(n,["topP"]);T!=null&&c(t,["topP"],T);const A=u(n,["topK"]);A!=null&&c(t,["topK"],A);const N=u(n,["thinking"]);return N!=null&&c(t,["thinking"],N),t}function Yc(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);r!=null&&c(t,["description"],r);const d=u(n,["versionId"]);d!=null&&c(t,["version"],d);const h=u(n,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(T=>UC(T))),c(t,["endpoints"],S)}const y=u(n,["labels"]);y!=null&&c(t,["labels"],y);const v=u(n,["_self"]);v!=null&&c(t,["tunedModelInfo"],Hw(v));const m=u(n,["defaultCheckpointId"]);m!=null&&c(t,["defaultCheckpointId"],m);const x=u(n,["checkpoints"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(T=>T)),c(t,["checkpoints"],S)}return t}function Cw(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],LC(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],PC(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],rC(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function ww(n){const t={},o=u(n,["productImage"]);return o!=null&&c(t,["image"],Mi(o)),t}function Ew(n,t){const o={},s=u(n,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(n,["baseSteps"]);t!==void 0&&r!=null&&c(t,["parameters","baseSteps"],r);const d=u(n,["outputGcsUri"]);t!==void 0&&d!=null&&c(t,["parameters","storageUri"],d);const h=u(n,["seed"]);t!==void 0&&h!=null&&c(t,["parameters","seed"],h);const y=u(n,["safetyFilterLevel"]);t!==void 0&&y!=null&&c(t,["parameters","safetySetting"],y);const v=u(n,["personGeneration"]);t!==void 0&&v!=null&&c(t,["parameters","personGeneration"],v);const m=u(n,["addWatermark"]);t!==void 0&&m!=null&&c(t,["parameters","addWatermark"],m);const x=u(n,["outputMimeType"]);t!==void 0&&x!=null&&c(t,["parameters","outputOptions","mimeType"],x);const S=u(n,["outputCompressionQuality"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","compressionQuality"],S);const T=u(n,["enhancePrompt"]);t!==void 0&&T!=null&&c(t,["parameters","enhancePrompt"],T);const A=u(n,["labels"]);return t!==void 0&&A!=null&&c(t,["labels"],A),o}function _w(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["source"]);r!=null&&Nw(r,o);const d=u(t,["config"]);return d!=null&&Ew(d,o),o}function Aw(n){const t={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Cr(r))),c(t,["generatedImages"],s)}return t}function Nw(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["personImage"]);t!==void 0&&r!=null&&c(t,["instances[0]","personImage","image"],Mi(r));const d=u(n,["productImages"]);if(t!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>ww(y))),c(t,["instances[0]","productImages"],h)}return o}function Mw(n){const t={},o=u(n,["referenceImage"]);o!=null&&c(t,["referenceImage"],Mi(o));const s=u(n,["referenceId"]);s!=null&&c(t,["referenceId"],s);const r=u(n,["referenceType"]);r!=null&&c(t,["referenceType"],r);const d=u(n,["maskImageConfig"]);d!=null&&c(t,["maskImageConfig"],Tw(d));const h=u(n,["controlImageConfig"]);h!=null&&c(t,["controlImageConfig"],mC(h));const y=u(n,["styleImageConfig"]);y!=null&&c(t,["styleImageConfig"],y);const v=u(n,["subjectImageConfig"]);return v!=null&&c(t,["subjectImageConfig"],v),t}function Sg(n){const t={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(n,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function Tg(n){const t={},o=u(n,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(n,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function Rw(n){const t={},o=u(n,["category"]);if(o!=null&&c(t,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function kw(n){const t={},o=u(n,["image"]);return o!=null&&c(t,["image"],Mi(o)),t}function Iw(n,t){const o={},s=u(n,["mode"]);t!==void 0&&s!=null&&c(t,["parameters","mode"],s);const r=u(n,["maxPredictions"]);t!==void 0&&r!=null&&c(t,["parameters","maxPredictions"],r);const d=u(n,["confidenceThreshold"]);t!==void 0&&d!=null&&c(t,["parameters","confidenceThreshold"],d);const h=u(n,["maskDilation"]);t!==void 0&&h!=null&&c(t,["parameters","maskDilation"],h);const y=u(n,["binaryColorThreshold"]);t!==void 0&&y!=null&&c(t,["parameters","binaryColorThreshold"],y);const v=u(n,["labels"]);return t!==void 0&&v!=null&&c(t,["labels"],v),o}function zw(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["source"]);r!=null&&Uw(r,o);const d=u(t,["config"]);return d!=null&&Iw(d,o),o}function Dw(n){const t={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>lw(r))),c(t,["generatedMasks"],s)}return t}function Uw(n,t){const o={},s=u(n,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(n,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Mi(r));const d=u(n,["scribbleImage"]);return t!==void 0&&d!=null&&c(t,["instances[0]","scribble"],kw(d)),o}function Lw(n){const t={},o=u(n,["functionCallingConfig"]);o!=null&&c(t,["functionCallingConfig"],GC(o));const s=u(n,["retrievalConfig"]);return s!=null&&c(t,["retrievalConfig"],s),t}function Pw(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],dw(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],fw(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function Cg(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(T=>HC(T))),c(t,["functionDeclarations"],S)}const s=u(n,["retrieval"]);s!=null&&c(t,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const d=u(n,["computerUse"]);if(d!=null&&c(t,["computerUse"],d),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=u(n,["codeExecution"]);h!=null&&c(t,["codeExecution"],h);const y=u(n,["enterpriseWebSearch"]);y!=null&&c(t,["enterpriseWebSearch"],y);const v=u(n,["googleMaps"]);v!=null&&c(t,["googleMaps"],v);const m=u(n,["googleSearch"]);m!=null&&c(t,["googleSearch"],m);const x=u(n,["urlContext"]);return x!=null&&c(t,["urlContext"],x),t}function Gw(n){const t={},o=u(n,["baseModel"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function Hw(n){const t={},o=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function Vw(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const d=u(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),o}function Bw(n,t){const o={},s=u(n,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(n,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const d=u(n,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),o}function Fw(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","name"],Vt(n,s));const r=u(t,["config"]);return r!=null&&Vw(r,o),o}function Ow(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["config"]);return r!=null&&Bw(r,o),o}function qw(n,t){const o={},s=u(n,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&c(t,["parameters","safetySetting"],r);const d=u(n,["personGeneration"]);t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d);const h=u(n,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const y=u(n,["outputMimeType"]);t!==void 0&&y!=null&&c(t,["parameters","outputOptions","mimeType"],y);const v=u(n,["outputCompressionQuality"]);t!==void 0&&v!=null&&c(t,["parameters","outputOptions","compressionQuality"],v);const m=u(n,["enhanceInputImage"]);t!==void 0&&m!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],m);const x=u(n,["imagePreservationFactor"]);t!==void 0&&x!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],x);const S=u(n,["labels"]);t!==void 0&&S!=null&&c(t,["labels"],S);const T=u(n,["numberOfImages"]);t!==void 0&&T!=null&&c(t,["parameters","sampleCount"],T);const A=u(n,["mode"]);return t!==void 0&&A!=null&&c(t,["parameters","mode"],A),o}function jw(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Vt(n,s));const r=u(t,["image"]);r!=null&&c(o,["instances[0]","image"],Mi(r));const d=u(t,["upscaleFactor"]);d!=null&&c(o,["parameters","upscaleConfig","upscaleFactor"],d);const h=u(t,["config"]);return h!=null&&qw(h,o),o}function $w(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>Cr(d))),c(t,["generatedImages"],r)}return t}function Yw(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&c(t,["videoBytes"],Go(s));const r=u(n,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function Jw(n){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],Go(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Kw(n){const t={},o=u(n,["image"]);o!=null&&c(t,["_self"],Mi(o));const s=u(n,["maskMode"]);return s!=null&&c(t,["maskMode"],s),t}function Xw(n){const t={},o=u(n,["image"]);o!=null&&c(t,["image"],wr(o));const s=u(n,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function Qw(n){const t={},o=u(n,["image"]);o!=null&&c(t,["image"],Mi(o));const s=u(n,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function wg(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["uri"],o);const s=u(n,["videoBytes"]);s!=null&&c(t,["encodedVideo"],Go(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["encoding"],r),t}function Eg(n){const t={},o=u(n,["uri"]);o!=null&&c(t,["gcsUri"],o);const s=u(n,["videoBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Go(s));const r=u(n,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Zw(n,t){const o={},s=u(n,["displayName"]);return t!==void 0&&s!=null&&c(t,["displayName"],s),o}function Ww(n){const t={},o=u(n,["config"]);return o!=null&&Zw(o,t),t}function eE(n,t){const o={},s=u(n,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function tE(n){const t={},o=u(n,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(n,["config"]);return s!=null&&eE(s,t),t}function nE(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function iE(n,t){const o={},s=u(n,["customMetadata"]);if(t!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["customMetadata"],d)}const r=u(n,["chunkingConfig"]);return t!==void 0&&r!=null&&c(t,["chunkingConfig"],r),o}function oE(n){const t={},o=u(n,["name"]);o!=null&&c(t,["name"],o);const s=u(n,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(n,["done"]);r!=null&&c(t,["done"],r);const d=u(n,["error"]);d!=null&&c(t,["error"],d);const h=u(n,["response"]);return h!=null&&c(t,["response"],sE(h)),t}function lE(n){const t={},o=u(n,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(n,["fileName"]);s!=null&&c(t,["fileName"],s);const r=u(n,["config"]);return r!=null&&iE(r,t),t}function sE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&c(t,["parent"],s);const r=u(n,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function aE(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function rE(n){const t={},o=u(n,["config"]);return o!=null&&aE(o,t),t}function uE(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["fileSearchStores"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["fileSearchStores"],d)}return t}function _g(n,t){const o={},s=u(n,["mimeType"]);t!==void 0&&s!=null&&c(t,["mimeType"],s);const r=u(n,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const d=u(n,["customMetadata"]);if(t!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>v)),c(t,["customMetadata"],y)}const h=u(n,["chunkingConfig"]);return t!==void 0&&h!=null&&c(t,["chunkingConfig"],h),o}function cE(n){const t={},o=u(n,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(n,["config"]);return s!=null&&_g(s,t),t}function dE(n){const t={},o=u(n,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}const fE="Content-Type",pE="X-Server-Timeout",hE="User-Agent",Jc="x-goog-api-client",mE="1.34.0",gE=`google-genai-sdk/${mE}`,yE="v1beta1",vE="v1beta";class xE{constructor(t){var o,s;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:yE,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:vE,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[h,y]of Object.entries(t.queryParams))r.searchParams.append(h,String(y));let d={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=t.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.unaryApiCall(r,d,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,d]of Object.entries(o))typeof d=="object"?s[r]=Object.assign(Object.assign({},s[r]),d):d!==void 0&&(s[r]=d);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=t.body,d=await this.includeExtraHttpOptionsToRequestInit(d,o,r.toString(),t.abortSignal),this.streamApiCall(r,d,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const d=new AbortController,h=d.signal;if(o.timeout&&o?.timeout>0){const y=setTimeout(()=>d.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{d.abort()}),t.signal=h}return o&&o.extraBody!==null&&bE(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Mm(r),new Oc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await Mm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Ai(this,arguments,function*(){var s;const r=(s=t?.body)===null||s===void 0?void 0:s.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let h="";const y="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:x}=yield vt(r.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const S=d.decode(x,{stream:!0});try{const N=JSON.parse(S);if("error"in N){const O=JSON.parse(JSON.stringify(N.error)),F=O.status,J=O.code,ue=`got status: ${F}. ${JSON.stringify(N)}`;if(J>=400&&J<600)throw new Sr({message:ue,status:J})}}catch(N){if(N.name==="ApiError")throw N}h+=S;let T=-1,A=0;for(;;){T=-1,A=0;for(const F of v){const J=h.indexOf(F);J!==-1&&(T===-1||J<T)&&(T=J,A=F.length)}if(T===-1)break;const N=h.substring(0,T);h=h.substring(T+A);const O=N.trim();if(O.startsWith(y)){const F=O.substring(y.length).trim();try{const J=new Response(F,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield vt(new Oc(J))}catch(J){throw new Error(`exception parsing stream chunk ${F}. ${J}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=gE+" "+this.clientOptions.userAgentExtra;return t[hE]=o,t[Jc]=o,t[fE]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,d]of Object.entries(t.headers))s.append(r,d);t.timeout&&t.timeout>0&&s.append(pE,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,h=await d.stat(t);r.sizeBytes=String(h.size);const y=(s=o?.mimeType)!==null&&s!==void 0?s:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const v={file:r},m=this.getFileName(t),x=$e("upload/v1beta/files",v._url),S=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,m,v,o?.httpOptions);return d.upload(t,S,this)}async uploadFileToFileSearchStore(t,o,s){var r;const d=this.clientOptions.uploader,h=await d.stat(o),y=String(h.size),v=(r=s?.mimeType)!==null&&r!==void 0?r:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,x=this.getFileName(o),S={};s!=null&&_g(s,S);const T=await this.fetchUploadUrl(m,y,v,x,S,s?.httpOptions);return d.uploadToFileSearchStore(o,T,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,d,h){var y;let v={};h?v=h:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(d),httpMethod:"POST",httpOptions:v});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(y=m?.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Mm(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let s;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new Sr({message:r,status:o}):new Error(r)}}function bE(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const d=JSON.parse(n.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))o=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(d,h){const y=Object.assign({},d);for(const v in h)if(Object.prototype.hasOwnProperty.call(h,v)){const m=h[v],x=y[v];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?y[v]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),y[v]=m)}return y}const r=s(o,t);n.body=JSON.stringify(r)}const SE="mcp_used/unknown";let TE=!1;function Ag(n){for(const t of n)if(CE(t)||typeof t=="object"&&"inputSchema"in t)return!0;return TE}function Ng(n){var t;const o=(t=n[Jc])!==null&&t!==void 0?t:"";n[Jc]=(o+` ${SE}`).trimStart()}function CE(n){return n!==null&&typeof n=="object"&&n instanceof fd}function wE(n){return Ai(this,arguments,function*(o,s=100){let r,d=0;for(;d<s;){const h=yield vt(o.listTools({cursor:r}));for(const y of h.tools)yield yield vt(y),d++;if(!h.nextCursor)break;r=h.nextCursor}})}class fd{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new fd(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const d={},h=[];for(const x of this.mcpClients)try{for(var y=!0,v=(o=void 0,Ni(wE(x))),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const S=r;h.push(S);const T=S.name;if(d[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);d[T]=x}}catch(S){o={error:S}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),nS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const h=await r.callTool({name:s.name,arguments:s.args},void 0,d);o.push({functionResponse:{name:s.name,response:h.isError?{error:h}:h}})}return o}}async function EE(n,t,o){const s=new J1;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class _E{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),h=ME(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${y}`;let m=()=>{};const x=new Promise(fe=>{m=fe}),S=t.callbacks,T=function(){m({})},A=this.apiClient,N={onopen:T,onmessage:fe=>{EE(A,S.onmessage,fe)},onerror:(o=S?.onerror)!==null&&o!==void 0?o:function(fe){},onclose:(s=S?.onclose)!==null&&s!==void 0?s:function(fe){}},O=this.webSocketFactory.create(v,NE(h),N);O.connect(),await x;const ue={setup:{model:Vt(this.apiClient,t.model)}};return O.send(JSON.stringify(ue)),new AE(O,this.apiClient)}}class AE{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=WT(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=ZT(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Bl.PLAY)}pause(){this.sendPlaybackControl(Bl.PAUSE)}stop(){this.sendPlaybackControl(Bl.STOP)}resetContext(){this.sendPlaybackControl(Bl.RESET_CONTEXT)}close(){this.conn.close()}}function NE(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function ME(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const RE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function kE(n,t,o){const s=new Y1;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const d=JSON.parse(r);if(n.isVertexAI()){const h=nC(d);Object.assign(s,h)}else Object.assign(s,d);t(s)}class IE{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new _E(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,d,h,y;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const S=this.apiClient.getHeaders();t.config&&t.config.tools&&Ag(t.config.tools)&&Ng(S);const T=LE(S);if(this.apiClient.isVertexAI())x=`${v}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,x);else{const we=this.apiClient.getApiKey();let Qe="BidiGenerateContent",Ue="key";we?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Qe="BidiGenerateContentConstrained",Ue="access_token"),x=`${v}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Qe}?${Ue}=${we}`}let A=()=>{};const N=new Promise(we=>{A=we}),O=t.callbacks,F=function(){var we;(we=O?.onopen)===null||we===void 0||we.call(O),A({})},J=this.apiClient,ue={onopen:F,onmessage:we=>{kE(J,O.onmessage,we)},onerror:(o=O?.onerror)!==null&&o!==void 0?o:function(we){},onclose:(s=O?.onclose)!==null&&s!==void 0?s:function(we){}},fe=this.webSocketFactory.create(x,UE(T),ue);fe.connect(),await N;let Ge=Vt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&Ge.startsWith("publishers/")){const we=this.apiClient.getProject(),Qe=this.apiClient.getLocation();Ge=`projects/${we}/locations/${Qe}/`+Ge}let ke={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[pr.AUDIO]}:t.config.responseModalities=[pr.AUDIO]),!((d=t.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Ve=(y=(h=t.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[],Se=[];for(const we of Ve)if(this.isCallableTool(we)){const Qe=we;Se.push(await Qe.tool())}else Se.push(we);Se.length>0&&(t.config.tools=Se);const nt={model:Ge,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ke=QT(this.apiClient,nt):ke=XT(this.apiClient,nt),delete ke.config,fe.send(JSON.stringify(ke)),new DE(fe,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const zE={turnComplete:!0};class DE{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=xi(o.turns),t.isVertexAI()||(s=s.map(r=>Tr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const d of s){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!t.isVertexAI()&&!("id"in d))throw new Error(RE)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},zE),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:tC(t)}:o={realtimeInput:eC(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function UE(n){const t={};return n.forEach((o,s)=>{t[s]=o}),t}function LE(n){const t=new Headers;for(const[o,s]of Object.entries(n))t.append(o,s);return t}const Rm=10;function km(n){var t,o,s;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const h of(o=n?.tools)!==null&&o!==void 0?o:[])if($l(h)){r=!0;break}if(!r)return!0;const d=(s=n?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function $l(n){return"callTool"in n&&typeof n.callTool=="function"}function PE(n){var t,o,s;return(s=(o=(t=n.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>$l(r)))!==null&&s!==void 0?s:!1}function Im(n){var t;const o=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((s,r)=>{if($l(s))return;const d=s;d.functionDeclarations&&d.functionDeclarations.length>0&&o.push(r)}),o}function zm(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}class GE extends lo{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,d,h,y;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!PE(o)||km(o.config))return await this.generateContentInternal(v);const m=Im(o);if(m.length>0){const O=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let x,S;const T=xi(v.contents),A=(d=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:Rm;let N=0;for(;N<A&&(x=await this.generateContentInternal(v),!(!x.functionCalls||x.functionCalls.length===0));){const O=x.candidates[0].content,F=[];for(const J of(y=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&y!==void 0?y:[])if($l(J)){const fe=await J.callTool(x.functionCalls);F.push(...fe)}N++,S={role:"user",parts:F},v.contents=xi(v.contents),v.contents.push(O),v.contents.push(S),zm(v.config)&&(T.push(O),T.push(S))}return zm(v.config)&&(x.automaticFunctionCallingHistory=T),x},this.generateContentStream=async o=>{var s,r,d,h,y;if(this.maybeMoveToResponseJsonSchem(o),km(o.config)){const S=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(S)}const v=Im(o);if(v.length>0){const S=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(d=(r=(s=o?.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||d===void 0?void 0:d.streamFunctionCallArguments,x=(y=(h=o?.config)===null||h===void 0?void 0:h.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(m&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let d;const h=[];if(s?.generatedImages)for(const v of s.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=v?.safetyAttributes:h.push(v);let y;return d?y={generatedImages:h,positivePromptSafetyAttributes:d,sdkHttpResponse:s.sdkHttpResponse}:y={generatedImages:h,sdkHttpResponse:s.sdkHttpResponse},y}),this.list=async o=>{var s;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o?.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((s=h.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new ol(oo.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(h),h)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,d,h,y,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(d=o.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.uri&&(!((v=(y=o.source)===null||y===void 0?void 0:y.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const d=(o=t.config)===null||o===void 0?void 0:o.tools;if(!d)return t;const h=await Promise.all(d.map(async v=>$l(v)?await v.tool():v)),y={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:h})};if(y.config.tools=h,t.config&&t.config.tools&&Ag(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},v);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Ng(m),y.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return y}async initAfcToolsMap(t){var o,s,r;const d=new Map;for(const h of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if($l(h)){const y=h,v=await y.tool();for(const m of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(d.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);d.set(m.name,y)}}return d}async processAfcStream(t){var o,s,r;const d=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Rm;let h=!1,y=0;const v=await this.initAfcToolsMap(t);return(function(m,x,S){return Ai(this,arguments,function*(){for(var T,A,N,O,F,J;y<d;){h&&(y++,h=!1);const ke=yield vt(m.processParamsMaybeAddMcpUsage(S)),Ve=yield vt(m.generateContentStreamInternal(ke)),Se=[],nt=[];try{for(var ue=!0,fe=(A=void 0,Ni(Ve)),Ge;Ge=yield vt(fe.next()),T=Ge.done,!T;ue=!0){O=Ge.value,ue=!1;const we=O;if(yield yield vt(we),we.candidates&&(!((F=we.candidates[0])===null||F===void 0)&&F.content)){nt.push(we.candidates[0].content);for(const Qe of(J=we.candidates[0].content.parts)!==null&&J!==void 0?J:[])if(y<d&&Qe.functionCall){if(!Qe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(Qe.functionCall.name)){const Ue=yield vt(x.get(Qe.functionCall.name).callTool([Qe.functionCall]));Se.push(...Ue)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${Qe.functionCall.name}`)}}}}catch(we){A={error:we}}finally{try{!ue&&!T&&(N=fe.return)&&(yield vt(N.call(fe)))}finally{if(A)throw A.error}}if(Se.length>0){h=!0;const we=new Ps;we.candidates=[{content:{role:"user",parts:Se}}],yield yield vt(we);const Qe=[];Qe.push(...nt),Qe.push({role:"user",parts:Se});const Ue=xi(S.contents).concat(Qe);S.contents=Ue}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_m(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Nm(x),T=new Ps;return Object.assign(T,S),T})}else{const m=Em(this.apiClient,t);return y=$e("{model}:generateContent",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Am(x),T=new Ps;return Object.assign(T,S),T})}}async generateContentStreamInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=_m(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),h.then(function(S){return Ai(this,arguments,function*(){var T,A,N,O;try{for(var F=!0,J=Ni(S),ue;ue=yield vt(J.next()),T=ue.done,!T;F=!0){O=ue.value,F=!1;const fe=O,Ge=Nm(yield vt(fe.json()));Ge.sdkHttpResponse={headers:fe.headers};const ke=new Ps;Object.assign(ke,Ge),yield yield vt(ke)}}catch(fe){A={error:fe}}finally{try{!F&&!T&&(N=J.return)&&(yield vt(N.call(J)))}finally{if(A)throw A.error}}})})}else{const m=Em(this.apiClient,t);return y=$e("{model}:streamGenerateContent?alt=sse",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.requestStream({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}),h.then(function(S){return Ai(this,arguments,function*(){var T,A,N,O;try{for(var F=!0,J=Ni(S),ue;ue=yield vt(J.next()),T=ue.done,!T;F=!0){O=ue.value,F=!1;const fe=O,Ge=Am(yield vt(fe.json()));Ge.sdkHttpResponse={headers:fe.headers};const ke=new Ps;Object.assign(ke,Ge),yield yield vt(ke)}}catch(fe){A={error:fe}}finally{try{!F&&!T&&(N=J.return)&&(yield vt(N.call(J)))}finally{if(A)throw A.error}}})})}}async embedContent(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=IC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=DC(x),T=new rm;return Object.assign(T,S),T})}else{const m=kC(this.apiClient,t);return y=$e("{model}:batchEmbedContents",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=zC(x),T=new rm;return Object.assign(T,S),T})}}async generateImagesInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=jC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=YC(x),T=new um;return Object.assign(T,S),T})}else{const m=qC(this.apiClient,t);return y=$e("{model}:predict",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=$C(x),T=new um;return Object.assign(T,S),T})}}async editImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=AC(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=NC(v),x=new L1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=jw(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=$w(v),x=new P1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=_w(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=Aw(v),x=new G1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=zw(this.apiClient,t);return d=$e("{model}:predict",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=Dw(v),x=new H1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=cw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>Yc(x))}else{const m=uw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>$c(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xw(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Sw(x),T=new cm;return Object.assign(T,S),T})}else{const m=vw(this.apiClient,t);return y=$e("{models_url}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=bw(x),T=new cm;return Object.assign(T,S),T})}}async update(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=Ow(this.apiClient,t);return y=$e("{model}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>Yc(x))}else{const m=Fw(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>$c(x))}}async delete(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=CC(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=EC(x),T=new dm;return Object.assign(T,S),T})}else{const m=TC(this.apiClient,t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=wC(x),T=new dm;return Object.assign(T,S),T})}}async countTokens(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=xC(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=SC(x),T=new fm;return Object.assign(T,S),T})}else{const m=vC(this.apiClient,t);return y=$e("{model}:countTokens",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=bC(x),T=new fm;return Object.assign(T,S),T})}}async computeTokens(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=dC(this.apiClient,t);return d=$e("{model}:computeTokens",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>{const m=fC(v),x=new V1;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=WC(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h.then(x=>{const S=QC(x),T=new hr;return Object.assign(T,S),T})}else{const m=ZC(this.apiClient,t);return y=$e("{model}:predictLongRunning",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>{const S=XC(x),T=new hr;return Object.assign(T,S),T})}}}class HE extends lo{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let d;s&&"httpOptions"in s&&(d=s.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=R1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),h}else{const m=M1(t);return y=$e("{operationName}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=T1(t);return d=$e("{resourceName}:fetchPredictOperation",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function VE(n){const t={},o=u(n,["data"]);if(o!=null&&c(t,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function BE(n){const t={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(d=>XE(d))),c(t,["parts"],r)}const s=u(n,["role"]);return s!=null&&c(t,["role"],s),t}function FE(n,t,o){const s={},r=u(t,["expireTime"]);o!==void 0&&r!=null&&c(o,["expireTime"],r);const d=u(t,["newSessionExpireTime"]);o!==void 0&&d!=null&&c(o,["newSessionExpireTime"],d);const h=u(t,["uses"]);o!==void 0&&h!=null&&c(o,["uses"],h);const y=u(t,["liveConnectConstraints"]);o!==void 0&&y!=null&&c(o,["bidiGenerateContentSetup"],KE(n,y));const v=u(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&c(o,["fieldMask"],v),s}function OE(n,t){const o={},s=u(t,["config"]);return s!=null&&c(o,["config"],FE(n,s,o)),o}function qE(n){const t={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function jE(n){const t={},o=u(n,["id"]);o!=null&&c(t,["id"],o);const s=u(n,["args"]);s!=null&&c(t,["args"],s);const r=u(n,["name"]);if(r!=null&&c(t,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function $E(n){const t={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function YE(n){const t={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function JE(n,t){const o={},s=u(n,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const d=u(n,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const h=u(n,["topP"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","topP"],h);const y=u(n,["topK"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","topK"],y);const v=u(n,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const m=u(n,["mediaResolution"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","mediaResolution"],m);const x=u(n,["seed"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","seed"],x);const S=u(n,["speechConfig"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","speechConfig"],dd(S));const T=u(n,["thinkingConfig"]);t!==void 0&&T!=null&&c(t,["setup","generationConfig","thinkingConfig"],T);const A=u(n,["enableAffectiveDialog"]);t!==void 0&&A!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],A);const N=u(n,["systemInstruction"]);t!==void 0&&N!=null&&c(t,["setup","systemInstruction"],BE(Ln(N)));const O=u(n,["tools"]);if(t!==void 0&&O!=null){let Ve=Jl(O);Array.isArray(Ve)&&(Ve=Ve.map(Se=>ZE(Yl(Se)))),c(t,["setup","tools"],Ve)}const F=u(n,["sessionResumption"]);t!==void 0&&F!=null&&c(t,["setup","sessionResumption"],QE(F));const J=u(n,["inputAudioTranscription"]);t!==void 0&&J!=null&&c(t,["setup","inputAudioTranscription"],J);const ue=u(n,["outputAudioTranscription"]);t!==void 0&&ue!=null&&c(t,["setup","outputAudioTranscription"],ue);const fe=u(n,["realtimeInputConfig"]);t!==void 0&&fe!=null&&c(t,["setup","realtimeInputConfig"],fe);const Ge=u(n,["contextWindowCompression"]);t!==void 0&&Ge!=null&&c(t,["setup","contextWindowCompression"],Ge);const ke=u(n,["proactivity"]);if(t!==void 0&&ke!=null&&c(t,["setup","proactivity"],ke),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function KE(n,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Vt(n,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],JE(r,o)),o}function XE(n){const t={},o=u(n,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&c(t,["executableCode"],r);const d=u(n,["fileData"]);d!=null&&c(t,["fileData"],qE(d));const h=u(n,["functionCall"]);h!=null&&c(t,["functionCall"],jE(h));const y=u(n,["functionResponse"]);y!=null&&c(t,["functionResponse"],y);const v=u(n,["inlineData"]);v!=null&&c(t,["inlineData"],VE(v));const m=u(n,["text"]);m!=null&&c(t,["text"],m);const x=u(n,["thought"]);x!=null&&c(t,["thought"],x);const S=u(n,["thoughtSignature"]);S!=null&&c(t,["thoughtSignature"],S);const T=u(n,["videoMetadata"]);return T!=null&&c(t,["videoMetadata"],T),t}function QE(n){const t={},o=u(n,["handle"]);if(o!=null&&c(t,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ZE(n){const t={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>S)),c(t,["functionDeclarations"],x)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&c(t,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&c(t,["computerUse"],r);const d=u(n,["fileSearch"]);d!=null&&c(t,["fileSearch"],d);const h=u(n,["codeExecution"]);if(h!=null&&c(t,["codeExecution"],h),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&c(t,["googleMaps"],$E(y));const v=u(n,["googleSearch"]);v!=null&&c(t,["googleSearch"],YE(v));const m=u(n,["urlContext"]);return m!=null&&c(t,["urlContext"],m),t}function WE(n){const t=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const s=n[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(d=>`${o}.${d}`);t.push(...r)}else t.push(o)}return t.join(",")}function e_(n,t){let o=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const d=s.setup;typeof d=="object"&&d!==null?(n.bidiGenerateContentSetup=d,o=d):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const d=WE(o);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)d?n.fieldMask=d:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(m=>h.includes(m)?`generationConfig.${m}`:m));const v=[];d&&v.push(d),y.length>0&&v.push(...y),v.length>0?n.fieldMask=v.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class t_ extends lo{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=OE(this.apiClient,t);d=$e("auth_tokens",y._url),h=y._query,delete y.config,delete y._url,delete y._query;const v=e_(y,t.config);return r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}function n_(n,t){const o={},s=u(n,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function i_(n){const t={},o=u(n,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(n,["config"]);return s!=null&&n_(s,t),t}function o_(n){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function l_(n,t){const o={},s=u(n,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(n,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function s_(n){const t={},o=u(n,["parent"]);o!=null&&c(t,["_url","parent"],o);const s=u(n,["config"]);return s!=null&&l_(s,t),t}function a_(n){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(n,["documents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(t,["documents"],d)}return t}class r_ extends lo{constructor(t){super(),this.apiClient=t,this.list=async o=>new ol(oo.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=o_(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=i_(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=s_(t);return d=$e("{parent}/documents",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=a_(v),x=new B1;return Object.assign(x,m),x})}}}class u_ extends lo{constructor(t,o=new r_(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new ol(oo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Ww(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=nE(t);return d=$e("{name}",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tE(t);r=$e("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=rE(t);return d=$e("fileSearchStores",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=uE(v),x=new F1;return Object.assign(x,m),x})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=cE(t);return d=$e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=dE(v),x=new O1;return Object.assign(x,m),x})}}async importFile(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=lE(t);return d=$e("{file_search_store_name}:importFile",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const m=oE(v),x=new sd;return Object.assign(x,m),x})}}}let Mg=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Mg=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),o=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const c_=()=>Mg();function Kc(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Xc=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class bi extends Error{}class Fn extends bi{constructor(t,o,s,r){super(`${Fn.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o?.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Er({message:s,cause:Xc(o)});const d=o;return t===400?new kg(t,d,s,r):t===401?new Ig(t,d,s,r):t===403?new zg(t,d,s,r):t===404?new Dg(t,d,s,r):t===409?new Ug(t,d,s,r):t===422?new Lg(t,d,s,r):t===429?new Pg(t,d,s,r):t>=500?new Gg(t,d,s,r):new Fn(t,d,s,r)}}class Qc extends Fn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Er extends Fn{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Rg extends Er{constructor({message:t}={}){super({message:t??"Request timed out."})}}class kg extends Fn{}class Ig extends Fn{}class zg extends Fn{}class Dg extends Fn{}class Ug extends Fn{}class Lg extends Fn{}class Pg extends Fn{}class Gg extends Fn{}const d_=/^[a-z][a-z0-9+.-]*:/i,f_=n=>d_.test(n);let Zc=n=>(Zc=Array.isArray,Zc(n));const p_=Zc;let h_=p_;const Dm=h_;function m_(n){if(!n)return!0;for(const t in n)return!1;return!0}function g_(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const y_=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new bi(`${n} must be an integer`);if(t<0)throw new bi(`${n} must be a positive integer`);return t},v_=n=>{try{return JSON.parse(n)}catch{return}};const x_=n=>new Promise(t=>setTimeout(t,n));const Gl="0.0.1";function b_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const S_=()=>{var n,t,o,s,r;const d=b_();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gl,"X-Stainless-OS":Lm(Deno.build.os),"X-Stainless-Arch":Um(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gl,"X-Stainless-OS":Lm((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Um((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const h=T_();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Gl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function T_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of n){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,d=s[2]||0,h=s[3]||0;return{browser:t,version:`${r}.${d}.${h}`}}}return null}const Um=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Lm=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let tr;const C_=()=>tr??(tr=S_());function w_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Hg(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function E_(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Hg({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function Vg(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const o=await t.read();return o?.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function __(n){var t,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(t=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}const A_=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});const Bg=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ic(n,t,o){return Bg(),new File(n,t??"unknown_file",o)}function N_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const M_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const Fg=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",R_=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Fg(n),k_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function I_(n,t,o){if(Bg(),n=await n,R_(n))return n instanceof File?n:Ic([await n.arrayBuffer()],n.name);if(k_(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),Ic(await Wc(r),t,o)}const s=await Wc(n);if(t||(t=N_(n)),!o?.type){const r=s.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return Ic(s,t,o)}async function Wc(n){var t,o,s,r,d;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(Fg(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(M_(n))try{for(var y=!0,v=Ni(n),m;m=await v.next(),t=m.done,!t;y=!0){r=m.value,y=!1;const x=r;h.push(...await Wc(x))}}catch(x){o={error:x}}finally{try{!y&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const x=(d=n?.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${z_(n)}`)}return h}function z_(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}class Og{constructor(t){this._client=t}}Og._key=[];function qg(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Pm=Object.freeze(Object.create(null)),D_=(n=qg)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const d=[],h=o.reduce((x,S,T)=>{var A,N,O;/[?#]/.test(S)&&(r=!0);const F=s[T];let J=(r?encodeURIComponent:n)(""+F);return T!==s.length&&(F==null||typeof F=="object"&&F.toString===((O=Object.getPrototypeOf((N=Object.getPrototypeOf((A=F.hasOwnProperty)!==null&&A!==void 0?A:Pm))!==null&&N!==void 0?N:Pm))===null||O===void 0?void 0:O.toString))&&(J=F+"",d.push({start:x.length+S.length,length:J.length,error:`Value of type ${Object.prototype.toString.call(F).slice(8,-1)} is not a valid path parameter`})),x+S+(T===s.length?"":J)},""),y=h.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=v.exec(y))!==null;)d.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(d.sort((x,S)=>x.start-S.start),d.length>0){let x=0;const S=d.reduce((T,A)=>{const N=" ".repeat(A.start-x),O="^".repeat(A.length);return x=A.start+A.length,T+N+O},"");throw new bi(`Path parameters result in path with invalid segments:
${d.map(T=>T.error).join(`
`)}
${h}
${S}`)}return h}),nr=D_(qg);class jg extends Og{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,d=gr(t,["api_version"]);if("model"in d&&"agent_config"in d)throw new bi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new bi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(nr`/${r}/interactions`,Object.assign(Object.assign({body:d},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(nr`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(nr`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const d=o??{},{api_version:h=this._client.apiVersion}=d,y=gr(d,["api_version"]);return this._client.get(nr`/${h}/interactions/${t}`,Object.assign(Object.assign({query:y},s),{stream:(r=o?.stream)!==null&&r!==void 0?r:!1}))}}jg._key=Object.freeze(["interactions"]);class $g extends jg{}function U_(n){let t=0;for(const r of n)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of n)o.set(r,s),s+=r.length;return o}let ir;function pd(n){let t;return(ir??(t=new globalThis.TextEncoder,ir=t.encode.bind(t)))(n)}let or;function Gm(n){let t;return(or??(t=new globalThis.TextDecoder,or=t.decode.bind(t)))(n)}class _r{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?pd(t):t;this.buffer=U_([this.buffer,o]);const s=[];let r;for(;(r=L_(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Gm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,h=Gm(this.buffer.subarray(0,d));s.push(h),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}_r.NEWLINE_CHARS=new Set([`
`,"\r"]);_r.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function L_(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function P_(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const yr={off:0,error:200,warn:300,info:400,debug:500},Hm=(n,t,o)=>{if(n){if(g_(yr,n))return n;Bn(o).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(yr))}`)}};function Fs(){}function lr(n,t,o){return!t||yr[n]>yr[o]?Fs:t[n].bind(t)}const G_={error:Fs,warn:Fs,info:Fs,debug:Fs};let Vm=new WeakMap;function Bn(n){var t;const o=n.logger,s=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!o)return G_;const r=Vm.get(o);if(r&&r[0]===s)return r[1];const d={error:lr("error",o,s),warn:lr("warn",o,s),info:lr("info",o,s),debug:lr("debug",o,s)};return Vm.set(o,[s,d]),d}const il=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Fl{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const d=s?Bn(s):console;function h(){return Ai(this,arguments,function*(){var v,m,x,S;if(r)throw new bi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=Ni(H_(t,o)),O;O=yield vt(N.next()),v=O.done,!v;A=!0){S=O.value,A=!1;const F=S;if(!T)if(F.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield vt(JSON.parse(F.data))}catch(J){throw d.error("Could not parse message into JSON:",F.data),d.error("From chunk:",F.raw),J}}}catch(F){m={error:F}}finally{try{!A&&!v&&(x=N.return)&&(yield vt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(F){if(Kc(F))return yield vt(void 0);throw F}finally{T||o.abort()}})}return new Fl(h,o,s)}static fromReadableStream(t,o,s){let r=!1;function d(){return Ai(this,arguments,function*(){var v,m,x,S;const T=new _r,A=Vg(t);try{for(var N=!0,O=Ni(A),F;F=yield vt(O.next()),v=F.done,!v;N=!0){S=F.value,N=!1;const J=S;for(const ue of T.decode(J))yield yield vt(ue)}}catch(J){m={error:J}}finally{try{!N&&!v&&(x=O.return)&&(yield vt(x.call(O)))}finally{if(m)throw m.error}}for(const J of T.flush())yield yield vt(J)})}function h(){return Ai(this,arguments,function*(){var v,m,x,S;if(r)throw new bi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,N=Ni(d()),O;O=yield vt(N.next()),v=O.done,!v;A=!0){S=O.value,A=!1;const F=S;T||F&&(yield yield vt(JSON.parse(F)))}}catch(F){m={error:F}}finally{try{!A&&!v&&(x=N.return)&&(yield vt(x.call(N)))}finally{if(m)throw m.error}}T=!0}catch(F){if(Kc(F))return yield vt(void 0);throw F}finally{T||o.abort()}})}return new Fl(h,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=d=>({next:()=>{if(d.length===0){const h=s.next();t.push(h),o.push(h)}return d.shift()}});return[new Fl(()=>r(t),this.controller,this.client),new Fl(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return Hg({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:d}=await o.next();if(d)return s.close();const h=pd(JSON.stringify(r)+`
`);s.enqueue(h)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function H_(n,t){return Ai(this,arguments,function*(){var s,r,d,h;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bi("Attempted to iterate over a response with no body");const y=new B_,v=new _r,m=Vg(n.body);try{for(var x=!0,S=Ni(V_(m)),T;T=yield vt(S.next()),s=T.done,!s;x=!0){h=T.value,x=!1;const A=h;for(const N of v.decode(A)){const O=y.decode(N);O&&(yield yield vt(O))}}}catch(A){r={error:A}}finally{try{!x&&!s&&(d=S.return)&&(yield vt(d.call(S)))}finally{if(r)throw r.error}}for(const A of v.flush()){const N=y.decode(A);N&&(yield yield vt(N))}})}function V_(n){return Ai(this,arguments,function*(){var o,s,r,d;let h=new Uint8Array;try{for(var y=!0,v=Ni(n),m;m=yield vt(v.next()),o=m.done,!o;y=!0){d=m.value,y=!1;const x=d;if(x==null)continue;const S=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?pd(x):x;let T=new Uint8Array(h.length+S.length);T.set(h),T.set(S,h.length),h=T;let A;for(;(A=P_(h))!==-1;)yield yield vt(h.slice(0,A)),h=h.slice(A)}}catch(x){s={error:x}}finally{try{!y&&!o&&(r=v.return)&&(yield vt(r.call(v)))}finally{if(s)throw s.error}}h.length>0&&(yield yield vt(h))})}class B_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=F_(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function F_(n,t){const o=n.indexOf(t);return o!==-1?[n.substring(0,o),t,n.substring(o+t.length)]:[n,"",""]}async function O_(n,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:d}=t,h=await(async()=>{var y;if(t.options.stream)return Bn(n).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,n):Fl.fromSSEResponse(o,t.controller,n);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),m=(y=v?.split(";")[0])===null||y===void 0?void 0:y.trim();return m?.includes("application/json")||m?.endsWith("+json")?await o.json():await o.text()})();return Bn(n).debug(`[${s}] response parsed`,il({retryOfRequestLogID:r,url:o.url,status:o.status,body:h,durationMs:Date.now()-d})),h}class hd extends Promise{constructor(t,o,s=O_){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new hd(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}const Yg=Symbol("brand.privateNullableHeaders");function*q_(n){if(!n)return;if(Yg in n){const{values:s,nulls:r}=n;yield*s.entries();for(const d of r)yield[d,null];return}let t=!1,o;n instanceof Headers?o=n.entries():Dm(n)?o=n:(t=!0,o=Object.entries(n??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const d=Dm(s[1])?s[1]:[s[1]];let h=!1;for(const y of d)y!==void 0&&(t&&!h&&(h=!0,yield[r,null]),yield[r,y])}}const Gs=n=>{const t=new Headers,o=new Set;for(const s of n){const r=new Set;for(const[d,h]of q_(s)){const y=d.toLowerCase();r.has(y)||(t.delete(d),r.add(y)),h===null?(t.delete(d),o.add(y)):(t.append(d,h),o.delete(y))}}return{[Yg]:!0,values:t,nulls:o}};const zc=n=>{var t,o,s,r,d,h;if(typeof globalThis.process<"u")return(s=(o=(t=g1)===null||t===void 0?void 0:t[n])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(h=(d=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||d===void 0?void 0:d.call(r,n))===null||h===void 0?void 0:h.trim()};var Jg;class Ar{constructor(t){var o,s,r,d,h,y,v,{baseURL:m=zc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(o=zc("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:S="v1beta"}=t,T=gr(t,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:x,apiVersion:S},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Ar.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(h=(d=Hm(A.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:Hm(zc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(y=A.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(v=A.fetch)!==null&&v!==void 0?v:w_(),this.encoder=A_,this._options=A,this.apiKey=x,this.apiVersion=S,this.clientAdapter=A.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=Gs([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Gs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Gs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new bi(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Gl}`}defaultIdempotencyKey(){return`stainless-node-retry-${c_()}`}makeStatusError(t,o,s,r){return Fn.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,d=f_(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),h=this.defaultQuery();return m_(h)||(o=Object.assign(Object.assign({},h),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(d.search=this.stringifyQuery(o)),d.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new hd(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,d,h;const y=await t,v=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(y);const{req:m,url:x,timeout:S}=await this.buildRequest(y,{retryCount:v-o});await this.prepareRequest(m,{url:x,options:y});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Bn(this).debug(`[${T}] sending request`,il({retryOfRequestLogID:s,method:y.method,url:x,options:y,headers:m.headers})),!((d=y.signal)===null||d===void 0)&&d.aborted)throw new Qc;const O=new AbortController,F=await this.fetchWithTimeout(x,m,S,O).catch(Xc),J=Date.now();if(F instanceof globalThis.Error){const fe=`retrying, ${o} attempts remaining`;if(!((h=y.signal)===null||h===void 0)&&h.aborted)throw new Qc;const Ge=Kc(F)||/timed? ?out/i.test(String(F)+("cause"in F?String(F.cause):""));if(o)return Bn(this).info(`[${T}] connection ${Ge?"timed out":"failed"} - ${fe}`),Bn(this).debug(`[${T}] connection ${Ge?"timed out":"failed"} (${fe})`,il({retryOfRequestLogID:s,url:x,durationMs:J-N,message:F.message})),this.retryRequest(y,o,s??T);throw Bn(this).info(`[${T}] connection ${Ge?"timed out":"failed"} - error; no more retries left`),Bn(this).debug(`[${T}] connection ${Ge?"timed out":"failed"} (error; no more retries left)`,il({retryOfRequestLogID:s,url:x,durationMs:J-N,message:F.message})),Ge?new Rg:new Er({cause:F})}const ue=`[${T}${A}] ${m.method} ${x} ${F.ok?"succeeded":"failed"} with status ${F.status} in ${J-N}ms`;if(!F.ok){const fe=await this.shouldRetry(F);if(o&&fe){const we=`retrying, ${o} attempts remaining`;return await __(F.body),Bn(this).info(`${ue} - ${we}`),Bn(this).debug(`[${T}] response error (${we})`,il({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,durationMs:J-N})),this.retryRequest(y,o,s??T,F.headers)}const Ge=fe?"error; no more retries left":"error; not retryable";Bn(this).info(`${ue} - ${Ge}`);const ke=await F.text().catch(we=>Xc(we).message),Ve=v_(ke),Se=Ve?void 0:ke;throw Bn(this).debug(`[${T}] response error (${Ge})`,il({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,message:Se,durationMs:Date.now()-N})),this.makeStatusError(F.status,Ve,Se,F.headers)}return Bn(this).info(ue),Bn(this).debug(`[${T}] response start`,il({retryOfRequestLogID:s,url:F.url,status:F.status,headers:F.headers,durationMs:J-N})),{response:F,options:y,controller:O,requestLogID:T,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(t,o,s,r){const d=o||{},{signal:h,method:y}=d,v=gr(d,["signal","method"]);h&&h.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),x=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),v);y&&(S.method=y.toUpperCase());try{return await this.fetch.call(void 0,t,S)}finally{clearTimeout(m)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var d;let h;const y=r?.get("retry-after-ms");if(y){const m=parseFloat(y);Number.isNaN(m)||(h=m)}const v=r?.get("retry-after");if(v&&!h){const m=parseFloat(v);Number.isNaN(m)?h=Date.parse(v)-Date.now():h=m*1e3}if(!(h&&0<=h&&h<60*1e3)){const m=(d=t.maxRetries)!==null&&d!==void 0?d:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(o,m)}return await x_(h),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const d=o-t,h=Math.min(.5*Math.pow(2,d),8),y=1-Math.random()*.25;return h*y*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,d;const h=Object.assign({},t),{method:y,path:v,query:m,defaultBaseURL:x}=h,S=this.buildURL(v,m,x);"timeout"in h&&y_("timeout",h.timeout),h.timeout=(s=h.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:h}),N=await this.buildHeaders({options:t,method:y,bodyHeaders:T,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:N},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(d=h.fetchOptions)!==null&&d!==void 0?d:{}),url:S,timeout:h.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let d={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const h=await this.authHeaders(t);let y=Gs([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),C_()),this._options.defaultHeaders,s,t.headers,h]);return this.validateHeaders(y),y.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=Gs([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:E_(t)}:this.encoder({body:t,headers:s})}}Ar.DEFAULT_TIMEOUT=6e4;class wn extends Ar{constructor(){super(...arguments),this.interactions=new $g(this)}}Jg=wn;wn.GeminiNextGenAPIClient=Jg;wn.GeminiNextGenAPIClientError=bi;wn.APIError=Fn;wn.APIConnectionError=Er;wn.APIConnectionTimeoutError=Rg;wn.APIUserAbortError=Qc;wn.NotFoundError=Dg;wn.ConflictError=Ug;wn.RateLimitError=Pg;wn.BadRequestError=kg;wn.AuthenticationError=Ig;wn.InternalServerError=Gg;wn.PermissionDeniedError=zg;wn.UnprocessableEntityError=Lg;wn.toFile=I_;wn.Interactions=$g;function j_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function $_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function Y_(n,t){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function J_(n,t){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function K_(n,t,o){const s={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&c(t,["displayName"],r),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=u(n,["epochCount"]);t!==void 0&&d!=null&&c(t,["tuningTask","hyperparameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);if(h!=null&&c(s,["tuningTask","hyperparameters","learningRateMultiplier"],h),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=u(n,["batchSize"]);t!==void 0&&y!=null&&c(t,["tuningTask","hyperparameters","batchSize"],y);const v=u(n,["learningRate"]);if(t!==void 0&&v!=null&&c(t,["tuningTask","hyperparameters","learningRate"],v),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function X_(n,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=u(n,["validationDataset"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec"],Bm(A))}else if(r==="PREFERENCE_TUNING"){const A=u(n,["validationDataset"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec"],Bm(A))}const d=u(n,["tunedModelDisplayName"]);t!==void 0&&d!=null&&c(t,["tunedModelDisplayName"],d);const h=u(n,["description"]);t!==void 0&&h!=null&&c(t,["description"],h);let y=u(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=u(n,["epochCount"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(y==="PREFERENCE_TUNING"){const A=u(n,["epochCount"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let v=u(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=u(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(v==="PREFERENCE_TUNING"){const A=u(n,["learningRateMultiplier"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=u(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=u(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=u(n,["exportLastCheckpointOnly"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let x=u(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=u(n,["adapterSize"]);t!==void 0&&A!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(x==="PREFERENCE_TUNING"){const A=u(n,["adapterSize"]);t!==void 0&&A!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=u(n,["labels"]);t!==void 0&&S!=null&&c(t,["labels"],S);const T=u(n,["beta"]);return t!==void 0&&T!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function Q_(n,t){const o={},s=u(n,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const d=u(n,["trainingDataset"]);d!=null&&rA(d);const h=u(n,["config"]);return h!=null&&K_(h,o),o}function Z_(n,t){const o={},s=u(n,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const d=u(n,["trainingDataset"]);d!=null&&uA(d,o,t);const h=u(n,["config"]);return h!=null&&X_(h,o,t),o}function W_(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function eA(n,t){const o={},s=u(n,["name"]);return s!=null&&c(o,["_url","name"],s),o}function tA(n,t,o){const s={},r=u(n,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const d=u(n,["pageToken"]);t!==void 0&&d!=null&&c(t,["_query","pageToken"],d);const h=u(n,["filter"]);return t!==void 0&&h!=null&&c(t,["_query","filter"],h),s}function nA(n,t,o){const s={},r=u(n,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const d=u(n,["pageToken"]);t!==void 0&&d!=null&&c(t,["_query","pageToken"],d);const h=u(n,["filter"]);return t!==void 0&&h!=null&&c(t,["_query","filter"],h),s}function iA(n,t){const o={},s=u(n,["config"]);return s!=null&&tA(s,o),o}function oA(n,t){const o={},s=u(n,["config"]);return s!=null&&nA(s,o),o}function lA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const d=u(n,["tunedModels"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>Kg(y))),c(o,["tuningJobs"],h)}return o}function sA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const d=u(n,["tuningJobs"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>ed(y))),c(o,["tuningJobs"],h)}return o}function aA(n,t){const o={},s=u(n,["name"]);s!=null&&c(o,["model"],s);const r=u(n,["name"]);return r!=null&&c(o,["endpoint"],r),o}function rA(n,t){const o={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(d=>d)),c(o,["examples","examples"],r)}return o}function uA(n,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=u(n,["gcsUri"]);t!==void 0&&h!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(r==="PREFERENCE_TUNING"){const h=u(n,["gcsUri"]);t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let d=u(o,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=u(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(d==="PREFERENCE_TUNING"){const h=u(n,["vertexDatasetResource"]);t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Kg(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["state"]);d!=null&&c(o,["state"],dg(d));const h=u(n,["createTime"]);h!=null&&c(o,["createTime"],h);const y=u(n,["tuningTask","startTime"]);y!=null&&c(o,["startTime"],y);const v=u(n,["tuningTask","completeTime"]);v!=null&&c(o,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(o,["updateTime"],m);const x=u(n,["description"]);x!=null&&c(o,["description"],x);const S=u(n,["baseModel"]);S!=null&&c(o,["baseModel"],S);const T=u(n,["_self"]);return T!=null&&c(o,["tunedModel"],aA(T)),o}function ed(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["state"]);d!=null&&c(o,["state"],dg(d));const h=u(n,["createTime"]);h!=null&&c(o,["createTime"],h);const y=u(n,["startTime"]);y!=null&&c(o,["startTime"],y);const v=u(n,["endTime"]);v!=null&&c(o,["endTime"],v);const m=u(n,["updateTime"]);m!=null&&c(o,["updateTime"],m);const x=u(n,["error"]);x!=null&&c(o,["error"],x);const S=u(n,["description"]);S!=null&&c(o,["description"],S);const T=u(n,["baseModel"]);T!=null&&c(o,["baseModel"],T);const A=u(n,["tunedModel"]);A!=null&&c(o,["tunedModel"],A);const N=u(n,["preTunedModel"]);N!=null&&c(o,["preTunedModel"],N);const O=u(n,["supervisedTuningSpec"]);O!=null&&c(o,["supervisedTuningSpec"],O);const F=u(n,["preferenceOptimizationSpec"]);F!=null&&c(o,["preferenceOptimizationSpec"],F);const J=u(n,["tuningDataStats"]);J!=null&&c(o,["tuningDataStats"],J);const ue=u(n,["encryptionSpec"]);ue!=null&&c(o,["encryptionSpec"],ue);const fe=u(n,["partnerModelTuningSpec"]);fe!=null&&c(o,["partnerModelTuningSpec"],fe);const Ge=u(n,["customBaseModel"]);Ge!=null&&c(o,["customBaseModel"],Ge);const ke=u(n,["experiment"]);ke!=null&&c(o,["experiment"],ke);const Ve=u(n,["labels"]);Ve!=null&&c(o,["labels"],Ve);const Se=u(n,["outputUri"]);Se!=null&&c(o,["outputUri"],Se);const nt=u(n,["pipelineJob"]);nt!=null&&c(o,["pipelineJob"],nt);const we=u(n,["serviceAccount"]);we!=null&&c(o,["serviceAccount"],we);const Qe=u(n,["tunedModelDisplayName"]);Qe!=null&&c(o,["tunedModelDisplayName"],Qe);const Ue=u(n,["veoTuningSpec"]);return Ue!=null&&c(o,["veoTuningSpec"],Ue),o}function cA(n,t){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&c(o,["name"],r);const d=u(n,["metadata"]);d!=null&&c(o,["metadata"],d);const h=u(n,["done"]);h!=null&&c(o,["done"],h);const y=u(n,["error"]);return y!=null&&c(o,["error"],y),o}function Bm(n,t){const o={},s=u(n,["gcsUri"]);s!=null&&c(o,["validationDatasetUri"],s);const r=u(n,["vertexDatasetResource"]);return r!=null&&c(o,["validationDatasetUri"],r),o}class dA extends lo{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new ol(oo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},o),{preTunedModel:r});return d.baseModel=void 0,await this.tuneInternal(d)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),d=await this.tuneMldevInternal(r);let h="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?h=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(h=d.name.split("/operations/")[0]),{name:h,state:Fc.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=eA(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>ed(x))}else{const m=W_(t);return y=$e("{name}",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>Kg(x))}}async listInternal(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=oA(t);return y=$e("tuningJobs",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=sA(x),T=new pm;return Object.assign(T,S),T})}else{const m=iA(t);return y=$e("tunedModels",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=lA(x),T=new pm;return Object.assign(T,S),T})}}async cancel(t){var o,s,r,d;let h,y="",v={};if(this.apiClient.isVertexAI()){const m=$_(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=J_(x),T=new hm;return Object.assign(T,S),T})}else{const m=j_(t);return y=$e("{name}:cancel",m._url),v=m._query,delete m._url,delete m._query,h=this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:x.headers},T})),h.then(x=>{const S=Y_(x),T=new hm;return Object.assign(T,S),T})}}async tuneInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI()){const y=Z_(t,t);return d=$e("tuningJobs",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>ed(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Q_(t);return d=$e("tunedModels",y._url),h=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(m=>{const x=m;return x.sdkHttpResponse={headers:v.headers},x})),r.then(v=>cA(v))}}}class fA{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pA=1024*1024*8,hA=3,mA=1e3,gA=2,vr="x-goog-upload-status";async function yA(n,t,o){var s;const r=await Xg(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[vr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function vA(n,t,o){var s;const r=await Xg(n,t,o),d=await r?.json();if(((s=r?.headers)===null||s===void 0?void 0:s[vr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=lg(d),y=new ad;return Object.assign(y,h),y}async function Xg(n,t,o){var s,r;let d=0,h=0,y=new Oc(new Response),v="upload";for(d=n.size;h<d;){const m=Math.min(pA,d-h),x=n.slice(h,h+m);h+m>=d&&(v+=", finalize");let S=0,T=mA;for(;S<hA&&(y=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m)}}}),!(!((s=y?.headers)===null||s===void 0)&&s[vr]));)S++,await bA(T),T=T*gA;if(h+=m,((r=y?.headers)===null||r===void 0?void 0:r[vr])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function xA(n){return{size:n.size,type:n.type}}function bA(n){return new Promise(t=>setTimeout(t,n))}class SA{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yA(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vA(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xA(t)}}class TA{create(t,o,s){return new CA(t,o,s)}}class CA{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Fm="x-goog-api-key";class wA{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(Fm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Fm,this.apiKey)}}}const EA="gl-node/";class _A{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new wn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=b1(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new wA(this.apiKey);this.apiClient=new xE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:EA+"web",uploader:new SA,downloader:new fA}),this.models=new GE(this.apiClient),this.live=new IE(this.apiClient,r,new TA),this.batches=new KS(this.apiClient),this.chats=new RT(this.models,this.apiClient),this.caches=new AT(this.apiClient),this.files=new VT(this.apiClient),this.operations=new HE(this.apiClient),this.authTokens=new t_(this.apiClient),this.tunings=new dA(this.apiClient),this.fileSearchStores=new u_(this.apiClient)}}const AA=n=>new _A({apiKey:n}),NA={type:an.OBJECT,properties:{segments:{type:an.ARRAY,items:{type:an.OBJECT,properties:{startTime:{type:an.STRING,description:"Absolute timestamp in MM:SS.mmm format (e.g. '01:05.300'). Cumulative from start."},endTime:{type:an.STRING,description:"Absolute timestamp in MM:SS.mmm format."},text:{type:an.STRING,description:"Transcribed text. Exact words spoken. No hallucinations. Must include every single word."}},required:["startTime","endTime","text"]}}},required:["segments"]},MA={type:an.OBJECT,properties:{segments:{type:an.ARRAY,items:{type:an.OBJECT,properties:{startTime:{type:an.STRING},endTime:{type:an.STRING},text:{type:an.STRING},words:{type:an.ARRAY,items:{type:an.OBJECT,properties:{text:{type:an.STRING,description:"The single word, or character (for Chinese), or linguistic unit."},startTime:{type:an.STRING,description:"Start time of the word"},endTime:{type:an.STRING,description:"End time of the word"}},required:["text","startTime","endTime"]}}},required:["startTime","endTime","text","words"]}}},required:["segments"]};function sr(n){if(!n)return"00:00.000";let t=n.trim().replace(/[^\d:.]/g,""),o=0;if(!t.includes(":")&&/^[\d.]+$/.test(t))o=parseFloat(t);else{const h=t.split(":");if(h.length===3){const y=parseInt(h[0],10)||0,v=parseInt(h[1],10)||0,m=h[2].split("."),x=parseInt(m[0],10)||0;let S=0;m[1]&&(S=parseFloat("0."+m[1])),o=y*3600+v*60+x+S}else if(h.length===2){const y=parseInt(h[0],10)||0,v=h[1].split("."),m=parseInt(v[0],10)||0;let x=0;v[1]&&(x=parseFloat("0."+v[1])),o=y*60+m+x}}if(isNaN(o)||o<0)return"00:00.000";const s=Math.floor(o/60),r=Math.floor(o%60),d=Math.round(o%1*1e3);return`${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}.${String(d).padStart(3,"0")}`}function RA(n){const t=n.trim();try{const h=JSON.parse(t);if(h.segments&&Array.isArray(h.segments))return h;if(Array.isArray(h))return{segments:h}}catch{}const o=t.lastIndexOf("}");if(o!==-1){const h=["]}","}","]}"];for(const v of h)try{const m=t+v,x=JSON.parse(m);if(x.segments)return x}catch{}const y=t.substring(0,o+1)+"]}";try{const v=JSON.parse(y);if(v.segments&&Array.isArray(v.segments))return v}catch{}}if(t.includes('"words"'))throw new Error("Complex nested JSON (word-level) could not be parsed. PLease try again.");const s=[],r=/\{\s*"startTime"\s*:\s*"?([^",]+)"?\s*,\s*"endTime"\s*:\s*"?([^",]+)"?\s*,\s*"text"\s*:\s*(?:"((?:[^"\\]|\\.)*)"|'((?:[^'\\]|\\.)*)')/g;let d;for(;(d=r.exec(t))!==null;){const h=d[3]!==void 0?d[3]:d[4];let y=h;try{y=JSON.parse(`"${h.replace(/"/g,'\\"')}"`)}catch{y=h.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}s.push({startTime:d[1],endTime:d[2],text:y})}if(s.length>0)return{segments:s};throw new Error("Response structure invalid and could not be repaired.")}async function kA(n,t,o,s,r,d="line"){try{const h=AA(s),y=n.includes("gemini-3"),v=`
    TIMING RULES:
    1. FORMAT: strictly **MM:SS.mmm** (e.g., 01:23.450).
    2. CONTINUITY: Timestamps must be strictly chronological.
    3. ACCURACY: Sync text exactly to the audio.
    4. PRECISION: For fast speech/rap, ensure word-level timestamps are millisecond-accurate.
    `;let m="";d==="word"?m=`
    SEGMENTATION: HIERARCHICAL WORD-LEVEL (TTML/KARAOKE/Enhanced LRC)
    ---------------------------------------------------
    CRITICAL: You are generating data for rich TTML or Karaoke display.
    
    1. STRUCTURE: Group words into short, natural lines/phrases (this is the parent object).
    2. LINE LENGTH: **CRITICAL** Keep lines SHORT (approx 3-8 words). Split long sentences into multiple lines.
       - Example: "I will love you forever and ever" -> Line 1: "I will love you", Line 2: "forever and ever".
    3. DETAILS: Inside each line object, you MUST provide a "words" array.
    4. WORDS: The "words" array must contain EVERY single word from that line with its own precise start/end time.
    5. CJK HANDLING: For Chinese, Japanese, or Korean scripts, treat each character (or logical block of characters) as a separate "word" for the purposes of karaoke timing.
    6. FAST SPEECH / RAP HANDLING:
       - Anticipate RAPID speech delivery (high words-per-minute).
       - Ensure NO DRIFT: Align every word's start/end exactly to its pronunciation.
       - For rapid-fire lyrics, word segments should be distinct and tightly packed.
      `:m=`
    SEGMENTATION: LINE-LEVEL (SUBTITLE/LRC MODE)
    ---------------------------------------------------
    CRITICAL: You are generating subtitles for a movie/music video.

    1. PHRASES: Group words into complete sentences or musical phrases.
    2. CLARITY: Do not break a sentence in the middle unless there is a pause.
    3. REPETITIONS: Separate repetitive vocalizations (e.g. "Oh oh oh") from the main lyrics into their own lines.
    4. LENGTH: Keep segments between 2 and 6 seconds for readability.
    5. WORDS ARRAY: You may omit the "words" array in this mode to save tokens.
      `;const x=`
    You are an expert Audio Transcription AI specialized in generating timed lyrics.
    
    TASK: Transcribe the audio file into JSON segments.
    MODE: ${d.toUpperCase()} LEVEL.
    
    ${v}
    
    ${m}

    LANGUAGE HANDLING (CRITICAL):
    1. RAPID CODE-SWITCHING: Audio often contains multiple languages mixed within the SAME sentence.
    2. MULTI-LINGUAL EQUALITY: The languages might NOT include English (e.g. Indonesian mixed with Japanese, Chinese mixed with Japanese). Treat all detected languages as equally probable.
    3. WORD-LEVEL DETECTION: Detect the language of every individual word.
    4. NATIVE SCRIPT STRICTNESS: Write EACH word in its native script.
       - Example: "Aku cinta kamu" (Indonesian) -> Latin.
       - Example: "" (Japanese) -> Kanji/Kana.
    5. MIXED SCRIPT PRESERVATION (IMPORTANT):
       - If specific English/Latin words are spoken amidst Japanese/Chinese/etc., KEEP them in LATIN script.
       - DO NOT transliterate English words into Katakana (e.g. if audio says "I love you", write "I love you", NOT "").
       - Maintain mixed text (Kanji/Kana + Latin) exactly as spoken.
    6. PROHIBITIONS:
       - DO NOT translate.
       - DO NOT romanize (unless explicitly spelled out).
       - DO NOT force English if it is not spoken.
    
    GENERAL RULES:
    - Verbatim: Transcribe exactly what is heard. Include fillers (um, ah) if sung.
    - Completeness: Transcribe from 00:00 to the very end. Do not summarize.
    - JSON Only: Output pure JSON. No markdown fences.
    `,S={responseMimeType:"application/json",responseSchema:d==="word"?MA:NA,temperature:.1};y&&(S.thinkingConfig={thinkingBudget:1024});const T=new Promise((J,ue)=>{r?.aborted&&ue(new DOMException("Aborted","AbortError")),r?.addEventListener("abort",()=>ue(new DOMException("Aborted","AbortError")))});let N=(await Promise.race([h.models.generateContent({model:n,contents:[{parts:[{inlineData:{data:t,mimeType:o}},{text:x}]}],config:S}),T])).text;if(!N)throw new Error("Empty response from model");return N=N.trim(),N.startsWith("```json")?N=N.replace(/^```json\s*/,"").replace(/\s*```$/,""):N.startsWith("```")&&(N=N.replace(/^```\s*/,"").replace(/\s*```$/,"")),(RA(N).segments||[]).map(J=>({startTime:sr(String(J.startTime)),endTime:sr(String(J.endTime)),text:String(J.text),words:J.words?J.words.map(ue=>({text:String(ue.text),startTime:sr(String(ue.startTime)),endTime:sr(String(ue.endTime))})):void 0}))}catch(h){throw h.name==="AbortError"?h:(console.error(`Error with ${n}:`,h),new Error(h.message||"Transcription failed"))}}const IA=({playlist:n,setPlaylist:t,currentTrackIndex:o,setCurrentTrackIndex:s,onPlayTrack:r,isPlaying:d,onTogglePlay:h,onSeek:y,onClearPlaylist:v,onRemoveTrack:m,currentTime:x,onClose:S})=>{const{confirm:T}=br(),A=X.useRef(null),N=X.useRef(new Map),O=H=>{const ae=Math.floor(H/60).toString().padStart(2,"0"),pe=(H%60).toFixed(2).padStart(5,"0");return`[${ae}:${pe}]`},[F,J]=X.useState(null),[ue,fe]=X.useState({key:null,direction:"asc"}),[Ge,ke]=X.useState(new Set),[Ve,Se]=X.useState(new Set),[nt,we]=X.useState(localStorage.getItem("gemini_api_key")||""),[Qe,Ue]=X.useState("gemini-2.5-flash"),[ft,St]=X.useState("line"),[At,be]=X.useState(!1),B=X.useRef(null),[xe,de]=X.useState(null);X.useEffect(()=>{nt&&localStorage.setItem("gemini_api_key",nt)},[nt]);const ht=o>=0?n[o]:null,mt=ht?.parsedLyrics||[],D=X.useMemo(()=>ht?mt.findIndex((H,ae)=>{if(H.endTime!==void 0)return x>=H.time&&x<H.endTime;const pe=mt[ae+1];return x>=H.time&&(!pe||x<pe.time)}):-1,[x,ht,mt]);X.useEffect(()=>{if(D!==-1){const H=document.getElementById(`lyric-active-${o}`);H&&H.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}},[D,o]);const R=H=>{if(n.length===0)return;const ae=o>=0?n[o]:null,pe=[...n];let Ae="asc";if(H==="random"){fe({key:"random",direction:"asc"});for(let ve=pe.length-1;ve>0;ve--){const ge=Math.floor(Math.random()*(ve+1));[pe[ve],pe[ge]]=[pe[ge],pe[ve]]}}else{ue.key===H&&ue.direction==="asc"&&(Ae="desc"),fe({key:H,direction:Ae});const ve=Ae==="asc"?1:-1;H==="filename"?pe.sort((ge,w)=>ve*ge.audioFile.name.localeCompare(w.audioFile.name)):H==="artist"?pe.sort((ge,w)=>ve*(ge.metadata.artist||"").localeCompare(w.metadata.artist||"")):H==="title"?pe.sort((ge,w)=>ve*(ge.metadata.title||"").localeCompare(w.metadata.title||"")):H==="album"&&pe.sort((ge,w)=>ve*(ge.metadata.album||"").localeCompare(w.metadata.album||""))}if(t(pe),ae){const ve=pe.findIndex(ge=>ge.id===ae.id);ve!==-1&&s(ve)}},ne=X.useCallback(H=>{F!==null&&H.key==="Delete"?(H.preventDefault(),H.stopPropagation(),m?m(F):t(ae=>{const pe=[...ae];return pe.splice(F,1),pe}),F>=n.length-1&&J(n.length>1?n.length-2:null)):H.key==="ArrowDown"&&n.length>0?(H.preventDefault(),H.stopPropagation(),J(ae=>ae===null?0:Math.min(ae+1,n.length-1))):H.key==="ArrowUp"&&n.length>0?(H.preventDefault(),H.stopPropagation(),J(ae=>ae===null?0:Math.max(ae-1,0))):H.key==="Enter"&&F!==null?(H.preventDefault(),H.stopPropagation(),r(F)):H.key==="Escape"&&J(null)},[F,n.length,t,r]);X.useEffect(()=>{const H=A.current;if(H)return H.addEventListener("keydown",ne),()=>H.removeEventListener("keydown",ne)},[ne]),X.useEffect(()=>{F!==null&&F>=n.length&&J(n.length>0?n.length-1:null)},[n.length,F]);const Ee=async H=>{const ae=new Map;H.forEach(ge=>{const w=ge.name.split(".").pop()?.toLowerCase(),G=(ge.webkitRelativePath||ge.name).replace(/\.[^/.]+$/,"");ae.has(G)||ae.set(G,{});const M=ae.get(G);["mp3","wav","ogg","flac","m4a"].includes(w||"")?M.audio=ge:["lrc","srt","ttml","xml","json"].includes(w||"")&&(M.lyric=ge)});const pe=[],Ae=async(ge,w)=>new Promise(C=>{Uc(()=>import("./jsmediatags.min-C6cZ4Kch.js").then(G=>G.j),[]).then(G=>{G.read(ge,{onSuccess:M=>{const{title:Z,artist:z,album:oe,picture:re}=M.tags;let K=null;if(re){const{data:ze,format:je}=re;let et="";for(let De=0;De<ze.length;De++)et+=String.fromCharCode(ze[De]);K=`data:${je};base64,${window.btoa(et)}`}C({title:Z||w,artist:z||"Unknown Artist",album:oe||void 0,coverUrl:K})},onError:()=>{C({title:w,artist:"Unknown Artist",coverUrl:null})}})}).catch(()=>{C({title:w,artist:"Unknown Artist",coverUrl:null})})}),ve=async ge=>{try{const w=await ge.text(),C=ge.name.split(".").pop()?.toLowerCase();if(C==="lrc")return Ol(w);if(C==="srt")return ql(w);if(C==="ttml"||C==="xml")return js(w);if(C==="json")return s1(w)}catch(w){console.error("Failed to parse lyrics",w)}return[]};for(const[ge,w]of ae.entries())if(w.audio){const C=await Ae(w.audio,ge),G=Math.random().toString(36).substr(2,9);let M=[];w.lyric&&(M=await ve(w.lyric)),pe.push({id:G,audioFile:w.audio,lyricFile:w.lyric,parsedLyrics:M,metadata:C,duration:0})}if(pe.length>0){const ge=[...n,...pe];t(ge),r(0,!1,ge)}},Ke=async H=>{if(H.target.files&&H.target.files.length>0){const ae=Array.from(H.target.files);await Ee(ae),H.target.value=""}},[_,P]=X.useState(!1),ie=H=>{H.preventDefault(),H.stopPropagation(),P(!0)},le=H=>{H.preventDefault(),H.stopPropagation(),P(!1)},Ie=async H=>{if(H.preventDefault(),H.stopPropagation(),P(!1),H.dataTransfer.files&&H.dataTransfer.files.length>0){const ae=Array.from(H.dataTransfer.files);await Ee(ae)}},Ce=H=>{m?m(H):t(ae=>{const pe=[...ae];return pe.splice(H,1),pe})},Te=H=>new Promise((ae,pe)=>{const Ae=new FileReader;Ae.readAsDataURL(H),Ae.onload=()=>{const ve=Ae.result.split(",")[1];ae(ve)},Ae.onerror=ve=>pe(ve)}),Ne=async H=>{if(!navigator.onLine){alert("Unable to transcribe: No internet connection.");return}if(Ge.has(H.id)){const ve=N.current.get(H.id);ve&&ve.abort();return}const ae=nt||"PLACEHOLDER_API_KEY";if(ae.trim().length!==39){alert(`Invalid API Key length (${ae.trim().length}). It must be exactly 39 characters.`),be(!0);return}ke(ve=>new Set(ve).add(H.id));const pe=new AbortController;N.current.set(H.id,pe);const Ae=19.5*1024*1024;if(H.audioFile.size>Ae){alert(`File is too large (${(H.audioFile.size/1024/1024).toFixed(1)}MB). Gemini inline audio limit is ~20MB.

Please convert to MP3/M4A or use a smaller file.`),ke(ve=>{const ge=new Set(ve);return ge.delete(H.id),ge}),N.current.delete(H.id);return}try{const ve=await Te(H.audioFile);let ge=H.duration||0;if(ge===0)try{ge=await new Promise(G=>{const M=new Audio(URL.createObjectURL(H.audioFile));M.onloadedmetadata=()=>{G(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>{URL.revokeObjectURL(M.src),G(0)}})}catch(G){console.warn("Could not determine duration for AI validation",G)}let C=(await kA(Qe,ve,H.audioFile.type,ae,pe.signal,ft)).map(G=>({time:Bs(G.startTime),text:G.text,endTime:Bs(G.endTime),words:G.words?G.words.map(M=>({text:M.text,startTime:Bs(M.startTime),endTime:Bs(M.endTime)})):void 0}));ge>0&&(C=C.filter(G=>G.time<ge&&G.time>=0)),t(G=>G.map(M=>M.id===H.id?{...M,parsedLyrics:C.sort((Z,z)=>Z.time-z.time),duration:ge>0?ge:M.duration}:M))}catch(ve){if(ve.name==="AbortError")console.log("Transcription aborted via user action.");else{console.error("Transcription failed:",ve);let ge="Transcription failed. Please check your API key or file format.";if(!navigator.onLine)ge="Connection lost. Please check your internet connection.";else if(ve.message){const w=ve.message.toLowerCase();w.includes("fetch")||w.includes("network")||w.includes("failed to connect")?ge="Network error. Please check your connection.":(w.includes("api key")||ve.message.includes("400")||ve.message.includes("401")||ve.message.includes("403"))&&(ge="API Key Error: Please check if your key is valid and has credits.")}alert(ge)}}finally{N.current.delete(H.id),ke(ve=>{const ge=new Set(ve);return ge.delete(H.id),ge})}},he=async H=>{if(!navigator.onLine){alert("No internet connection.");return}Se(ae=>new Set(ae).add(H.id));try{const ae=await Uc(()=>import("./index.min-5PyHkHJr.js").then(C=>C.i),[]);let pe;const Ae=ae.default||ae;console.log("SyncLyrics Module:",ae);const ve=["musixmatch","lrclib","netease"];if(typeof Ae=="function"&&Ae.prototype&&Ae.prototype.getLyrics){console.log("Detected Class usage");const C=new Ae({sources:ve});pe=G=>C.getLyrics(G)}else if(Ae.getLyrics&&typeof Ae.getLyrics=="function")console.log("Detected Instance usage"),pe=C=>Ae.getLyrics(C);else if(Ae.SyncLyrics){console.log("Detected Mod.SyncLyrics export");const C=Ae.SyncLyrics;if(typeof C=="function"&&C.prototype&&C.prototype.getLyrics){console.log("Using SyncLyrics as Class");const G=new C({sources:ve});pe=M=>G.getLyrics(M)}else if(typeof C=="function")console.log("Using SyncLyrics as Function"),pe=C;else throw new Error("Mod.SyncLyrics found but is not a function or class.")}else if(typeof Ae=="function")console.log("Detected Function usage"),pe=Ae;else throw new Error(`Could not find suitable search function. Mod type: ${typeof Ae}. Keys: ${typeof Ae=="object"?JSON.stringify(Object.keys(Ae)):"N/A"}`);const ge={track:H.metadata.title,artist:H.metadata.artist,album:H.metadata.album,sources:ve};console.log("Searching lyrics with options:",ge);const w=await pe(ge);if(w&&typeof w=="string")L(w,H);else{console.warn("npm package returned no result. Attempting fallback to LrcLib.net API directly...");let C=H.duration||0;if(C===0)try{C=await new Promise(z=>{const oe=new Audio(URL.createObjectURL(H.audioFile));oe.onloadedmetadata=()=>{const re=oe.duration;URL.revokeObjectURL(oe.src),z(re)},oe.onerror=()=>z(0)})}catch(z){console.warn("Could not determine duration for search",z)}const G=new URLSearchParams({artist_name:H.metadata.artist,track_name:H.metadata.title,album_name:H.metadata.album||"",duration:C.toString()}),M=await fetch(`https://lrclib.net/api/get?${G.toString()}`);if(!M.ok){const z=await fetch(`https://lrclib.net/api/search?q=${encodeURIComponent(H.metadata.title+" "+H.metadata.artist)}`);if(z.ok){const oe=await z.json();if(Array.isArray(oe)&&oe.length>0){const re=oe.find(K=>K.syncedLyrics);if(re){L(re.syncedLyrics,H);return}else if(oe[0].plainLyrics){L(oe[0].plainLyrics,H);return}}}throw new Error("No lyrics found in fallback source.")}const Z=await M.json();Z.syncedLyrics?L(Z.syncedLyrics,H):Z.plainLyrics?L(Z.plainLyrics,H):alert("No lyrics found.")}}catch(ae){console.error("Search failed:",ae),ae.message?.includes("CORS")||ae.message?.includes("etwork")||ae.message?.includes("Failed to fetch")?alert(`Network Error: Could not connect to lyric services. 
(Possible CORS blocking in browser).`):alert("Search failed: "+ae.message)}finally{Se(ae=>{const pe=new Set(ae);return pe.delete(H.id),pe})}},L=(H,ae)=>{let pe=Ol(H);if(pe.length===0&&(pe=ql(H)),pe.length>0){const Ae=pe.some(ve=>ve.words&&ve.words.length>0);console.log(Ae?"Word-level (enhanced) lyrics found!":"Line-level lyrics found."),t(ve=>ve.map(ge=>ge.id===ae.id?{...ge,parsedLyrics:pe,lyricFile:new File([H],`synched-lyrics${Ae?".lrc-enhanced":".lrc"}`,{type:"text/plain"})}:ge))}else alert("Lyrics found but could not be parsed.")},_e=(H,ae,pe)=>{const Ae=new Blob([H],{type:"application/octet-stream"}),ve=URL.createObjectURL(Ae),ge=document.createElement("a");ge.href=ve,ge.download=ae,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(ve)},Fe=async(H,ae)=>{const pe=H.parsedLyrics||[];if(pe.length===0)return;let Ae="";const ve=ae==="lrc-enhanced"?"lrc":ae,ge=`${H.metadata.title||"lyrics"}.${ve}`;let w=H.duration||0;if(w===0)try{w=await new Promise(G=>{const M=new Audio(URL.createObjectURL(H.audioFile));M.onloadedmetadata=()=>{G(M.duration),URL.revokeObjectURL(M.src)},M.onerror=()=>G(0)})}catch(G){console.warn("Could not determine duration for export check",G)}const C=pe.map(G=>({...G,words:G.words?G.words.filter(M=>M.text.trim().length>0).map(M=>({...M})):void 0}));for(let G=0;G<C.length;G++){const M=C[G],Z=C[G+1];if(M.endTime===void 0&&(Z?M.endTime=Z.time:M.endTime=w>0?w:M.time+5),M.words&&M.words.length>0)for(let z=0;z<M.words.length;z++){const oe=M.words[z],re=M.words[z+1];(oe.endTime===void 0||oe.endTime<=oe.startTime)&&(re?oe.endTime=re.startTime:oe.endTime=M.endTime)}}if(ae==="txt")Ae=C.map(G=>G.text).join(`
`);else if(ae==="json")Ae=JSON.stringify(C,null,2);else if(ae==="srt"){const G=M=>{const Z=Math.floor(M/3600).toString().padStart(2,"0"),z=Math.floor(M%3600/60).toString().padStart(2,"0"),oe=Math.floor(M%60).toString().padStart(2,"0"),re=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${Z}:${z}:${oe},${re}`};Ae=C.map((M,Z)=>{const z=G(M.time),oe=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+2,re=G(oe);return`${Z+1}
${z} --> ${re}
${M.text}
`}).join(`
`)}else if(ae==="lrc"){const G=[],M=Z=>{const z=Math.floor(Z/60).toString().padStart(2,"0"),oe=(Z%60).toFixed(2).padStart(5,"0");return`[${z}:${oe}]`};for(let Z=0;Z<pe.length;Z++){const z=pe[Z],oe=pe[Z+1];G.push(`${M(z.time)}${z.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n")}`);const K=(z.endTime??z.time+3)+4;(!(w>0)||K<=w)&&(oe?oe.time>K&&G.push(`${M(K)}`):G.push(`${M(K)}`))}Ae=G.join(`
`)}else if(ae==="lrc-enhanced"){const G=[],M=z=>{const oe=Math.floor(z/60).toString().padStart(2,"0"),re=(z%60).toFixed(2).padStart(5,"0");return`[${oe}:${re}]`},Z=z=>{const oe=Math.floor(z/60).toString().padStart(2,"0"),re=(z%60).toFixed(2).padStart(5,"0");return`<${oe}:${re}>`};for(let z=0;z<pe.length;z++){const oe=pe[z],re=pe[z+1];let K="";oe.words&&oe.words.length>0?oe.words.forEach((De,Et)=>{const _t=De.text.replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n");K+=`${Z(De.startTime)}${_t}`,Et<oe.words.length-1&&!_t.endsWith("-")&&(K+=" ")}):K=oe.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim().replace(/\n/g,"\\n"),G.push(`${M(oe.time)}${K}`);const je=(oe.endTime??oe.time+3)+4;(!(w>0)||je<=w)&&(re?re.time>je&&G.push(`${M(je)}`):G.push(`${M(je)}`))}Ae=G.join(`
`)}else if(ae==="ttml"){const G=M=>{const Z=Math.floor(M/3600).toString().padStart(2,"0"),z=Math.floor(M%3600/60).toString().padStart(2,"0"),oe=Math.floor(M%60).toString().padStart(2,"0"),re=Math.floor(M%1*1e3).toString().padStart(3,"0");return`${Z}:${z}:${oe}.${re}`};Ae=`<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="en" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling">
  <body>
    <div>`,C.forEach(M=>{const Z=G(M.time),z=M.endTime!==void 0&&M.endTime>M.time?M.endTime:M.time+3,oe=G(z);Ae+=`
      <p begin="${Z}" end="${oe}">`,M.words&&M.words.length>0?M.words.forEach(re=>{if(!re.text.trim())return;const K=G(re.startTime);let ze=re.endTime;(ze===void 0||ze<=re.startTime)&&(ze=re.startTime+.5);const je=G(ze);let et=re.text.replace(/[ \t]+/g," ").trim();et.endsWith("-")||(et+=" "),Ae+=`
        <span begin="${K}" end="${je}">${et}</span>`}):Ae+=`
        <span begin="${Z}" end="${oe}">${M.text.replace(/-\s+/g,"-").replace(/[ \t]+/g," ").trim()}</span>`,Ae+=`
      </p>`}),Ae+=`
    </div>
  </body>
</tt>`}_e(Ae,ge)},Be=async H=>{await T("Are you sure you want to clear the lyric timeline?","Clear Lyrics")&&t(ae=>ae.map(pe=>pe.id===H.id?{...pe,parsedLyrics:[],lyricFile:void 0}:pe))},Ye=async H=>{const ae=H.target.files?.[0];if(!(!ae||!xe)){try{const pe=await ae.text(),Ae=ae.name.split(".").pop()?.toLowerCase();let ve=[];Ae==="lrc"?ve=Ol(pe):Ae==="srt"?ve=ql(pe):(Ae==="ttml"||Ae==="xml")&&(ve=js(pe)),ve.length>0?t(ge=>ge.map(w=>w.id===xe?{...w,lyricFile:ae,parsedLyrics:ve}:w)):alert("Could not parse lyrics. Ensure file is .lrc or .srt")}catch(pe){console.error("Failed to load lyrics",pe),alert("Failed to load lyrics file.")}de(null),H.target.value=""}};return p.jsxs("div",{className:`w-full max-w-[100vw] h-64 flex flex-col bg-zinc-900/95 backdrop-blur-md border-t border-white/10 z-20 shadow-xl overflow-hidden outline-none relative transition-colors ${_?"bg-zinc-800 border-orange-500":""}`,onDragOver:ie,onDragLeave:le,onDrop:Ie,children:[_&&p.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-zinc-900/90 backdrop-blur-sm pointer-events-none",children:p.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500 animate-pulse",children:[p.jsx(Po,{size:48}),p.jsx("h3",{className:"text-xl font-bold",children:"Drop Audio & Lyrics Here"}),p.jsx("p",{className:"text-sm text-zinc-400",children:"Supported formats: MP3, WAV, OGG, FLAC, M4A, LRC, SRT, TTML"})]})}),p.jsx("input",{type:"file",ref:B,className:"hidden",accept:".lrc,.srt,.ttml,.xml",onChange:Ye}),p.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center justify-between bg-zinc-900 z-30 shrink-0 h-12",children:[p.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[p.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2 text-zinc-300 whitespace-nowrap",children:[p.jsx(dr,{size:16,className:"text-orange-400"}),"Playlist"]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex bg-orange-600 rounded overflow-hidden",children:[p.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs font-medium whitespace-nowrap border-r border-orange-700",children:[p.jsx(ng,{size:14})," Add Files",p.jsx("input",{type:"file",className:"hidden",accept:"audio/*,.lrc,.srt,.ttml,.xml",multiple:!0,onChange:Ke})]}),p.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 hover:bg-orange-500 cursor-pointer transition-colors text-white text-xs whitespace-nowrap",title:"Add Folder",children:[p.jsx(Jx,{size:14}),p.jsx("input",{type:"file",className:"hidden",multiple:!0,webkitdirectory:"",onChange:Ke})]})]}),p.jsx("div",{className:"w-px h-4 bg-zinc-700"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>R("filename"),className:`p-1 rounded transition-colors ${ue.key==="filename"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Filename ${ue.key==="filename"?ue.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(cr,{size:14,className:ue.key==="filename"&&ue.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>R("artist"),className:`p-1 rounded transition-colors ${ue.key==="artist"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Artist ${ue.key==="artist"?ue.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Qb,{size:14,className:ue.key==="artist"&&ue.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>R("title"),className:`p-1 rounded transition-colors ${ue.key==="title"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Title ${ue.key==="title"?ue.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Hl,{size:14,className:ue.key==="title"&&ue.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>R("album"),className:`p-1 rounded transition-colors ${ue.key==="album"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:`Sort by Album ${ue.key==="album"?ue.direction==="asc"?"(A-Z)":"(Z-A)":""}`,children:p.jsx(Gx,{size:14,className:ue.key==="album"&&ue.direction==="desc"?"rotate-180 transition-transform":"transition-transform"})}),p.jsx("button",{onClick:()=>R("random"),className:`p-1 rounded transition-colors ${ue.key==="random"?"bg-zinc-700 text-white":"hover:bg-zinc-700 text-zinc-400 hover:text-white"}`,title:"Shuffle",children:p.jsx(Rb,{size:14})})]})]}),p.jsxs("div",{className:"flex gap-2 shrink-0 items-center",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded px-1",children:[p.jsx("button",{onClick:()=>be(!At),className:`p-1 rounded transition-colors ${At?"text-orange-400":"text-zinc-500 hover:text-zinc-300"}`,title:"Gemini API Key",children:p.jsx(nb,{size:14})}),At&&p.jsx("input",{type:nt?"password":"text",value:nt,onChange:H=>we(H.target.value),placeholder:"Paste API Key here",className:"bg-transparent border-none outline-none text-xs text-zinc-200 w-32 placeholder:text-zinc-600",autoFocus:!0,autoComplete:"off",spellCheck:!1})]}),p.jsx("div",{className:"relative group",children:p.jsxs("select",{value:Qe,onChange:H=>Ue(H.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700",title:"Select Gemini Model",children:[p.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),p.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash Preview"})]})}),p.jsx("div",{className:"relative group",children:p.jsxs("select",{value:ft,onChange:H=>St(H.target.value),className:"bg-zinc-800 text-[10px] text-zinc-300 border border-zinc-700 rounded px-1 py-1 focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-zinc-700 w-[60px]",title:"Transcription Mode (Line or Word Level)",children:[p.jsx("option",{value:"line",children:"Line"}),p.jsx("option",{value:"word",children:"Word"})]})}),p.jsx("button",{onClick:async()=>{n.length>0&&await T("Clear entire playlist?","Clear Playlist")&&(v(),t([]))},className:"p-1 hover:bg-red-900/50 text-zinc-500 hover:text-red-200 rounded transition-colors",title:"Clear Playlist",children:p.jsx(fr,{size:14})}),p.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1 self-center"}),p.jsx("button",{onClick:S,className:"p-1 hover:bg-zinc-700 text-zinc-400 hover:text-white rounded transition-colors",title:"Close Playlist",children:p.jsx(vi,{size:14})})]})]}),p.jsx("div",{ref:A,tabIndex:0,onMouseEnter:()=>A.current?.focus(),className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-zinc-950 p-1 space-y-1 focus:outline-none",children:n.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-xs",children:[p.jsx(dr,{size:32,className:"mb-2 opacity-50"}),p.jsx("p",{children:"Playlist is empty"}),p.jsx("p",{className:"opacity-50",children:"Add audio files (matches .lrc/.srt/.ttml by name)"})]}):n.map((H,ae)=>{const pe=ae===o,Ae=ae===F,ve=H.parsedLyrics||[],ge=pe?ve.findIndex((w,C)=>{if(w.endTime!==void 0)return x>=w.time&&x<w.endTime;const G=ve[C+1];return x>=w.time&&(!G||x<G.time)}):-1;return p.jsxs("div",{onClick:()=>J(ae),className:`group relative flex gap-2 p-1.5 rounded-md border transition-all cursor-pointer
                            ${pe?"bg-zinc-800 border-orange-500/50 shadow-lg":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700"}
                            ${Ae?"ring-2 ring-blue-500/70 ring-offset-1 ring-offset-zinc-950":""}
                        `,children:[p.jsxs("div",{className:"flex flex-col gap-1 shrink-0 w-48",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:w=>{w.stopPropagation(),pe?h():r(ae)},className:`p-1.5 rounded-full transition-colors flex-shrink-0
                                        ${pe?"bg-orange-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"}
                                    `,children:pe?d?p.jsx(tg,{size:14}):p.jsx(Pc,{size:14}):p.jsx(Pc,{size:14})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:`text-xs font-medium truncate ${pe?"text-orange-100":"text-zinc-300"}`,title:H.audioFile.name,children:H.metadata.title}),p.jsx("div",{className:"text-[9px] text-zinc-500 truncate",title:H.metadata.artist,children:H.metadata.artist})]})]}),p.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[p.jsxs("span",{className:"text-[8px] text-zinc-600",children:[(H.audioFile.size/1024/1024).toFixed(1),"MB"]}),H.lyricFile?p.jsxs("div",{className:"flex items-center gap-0.5 text-[8px] px-1 rounded bg-blue-900/30 text-blue-300/80",title:H.lyricFile.name,children:[p.jsx(cr,{size:7}),p.jsx("span",{className:"truncate max-w-[80px]",children:H.lyricFile.name})]}):p.jsx("span",{className:"text-[8px] text-zinc-700 italic",children:"No Lyrics"})]})]}),p.jsx("div",{className:"flex-1 min-w-0 h-12 bg-zinc-950/50 rounded border border-zinc-800/50 overflow-x-auto overflow-y-hidden custom-scrollbar",children:ve.length>0?p.jsx("div",{className:"relative h-full min-w-max flex items-center px-1",children:ve.map((w,C)=>{const G=C===ge;return p.jsxs("div",{id:G?`lyric-active-${ae}`:void 0,className:`flex items-center gap-1 px-1.5 py-0.5 mx-0.5 rounded text-[9px] transition-colors whitespace-nowrap cursor-pointer
                                                        ${G?"bg-orange-600 text-white border border-orange-400 shadow-[0_0_10px_rgba(234,88,12,0.3)]":"bg-zinc-800/50 hover:bg-blue-900/50 border border-zinc-700/30 hover:border-blue-500/50 text-zinc-400"}
                                                    `,title:`${O(w.time)} - ${w.text}`,onClick:M=>{M.stopPropagation(),ae!==o?(r(ae),setTimeout(()=>y(w.time),150)):y(w.time)},children:[p.jsx("span",{className:`font-mono text-[8px] ${G?"text-orange-200":"text-zinc-500"}`,children:O(w.time)}),p.jsx("span",{className:`truncate max-w-[120px] ${G?"text-white font-medium":"text-zinc-400"}`,children:w.text||""})]},C)})}):p.jsx("div",{className:"h-full flex items-center justify-center text-zinc-700 text-[9px] italic",children:"No lyric timeline"})}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0 px-1",children:[p.jsx("button",{onClick:w=>{w.stopPropagation(),de(H.id),B.current&&(B.current.value=""),B.current?.click()},className:"p-1.5 rounded bg-blue-900/30 border border-blue-500/30 text-blue-400 hover:bg-blue-800/50 transition-colors",title:"Load Lyrics Manually",children:p.jsx(Po,{size:14})}),p.jsx("button",{onClick:w=>{w.stopPropagation(),he(H)},className:`group/btn relative p-1.5 rounded bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-800/50 transition-colors ${Ve.has(H.id)?"animate-pulse":""}`,title:"Search Lyrics (Online)",disabled:Ve.has(H.id),children:Ve.has(H.id)?p.jsx(sh,{size:14,className:"animate-spin"}):p.jsx(Ab,{size:14})}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Ne(H)},className:`group/btn relative p-1.5 rounded bg-purple-900/30 border border-purple-500/30 text-purple-400 hover:bg-purple-800/50 transition-colors ${Ge.has(H.id)?"text-red-400 border-red-500/50 hover:bg-red-900/30":""}`,title:Ge.has(H.id)?"Stop Transcription":"AI Sync Transcribe",children:Ge.has(H.id)?p.jsxs(p.Fragment,{children:[p.jsx(sh,{size:14,className:"animate-spin group-hover/btn:hidden"}),p.jsx(Vc,{size:14,className:"hidden group-hover/btn:block fill-current"})]}):p.jsx(Hc,{size:14})}),ve.length>0&&p.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-800/50 rounded p-0.5 border border-zinc-700/50",children:[p.jsx("button",{onClick:w=>{w.stopPropagation(),Fe(H,"txt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TXT",children:"TXT"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Fe(H,"lrc")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download LRC",children:"LRC"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Fe(H,"lrc-enhanced")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download Enhanced LRC (Word Level)",children:"eLRC"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Fe(H,"srt")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download SRT",children:"SRT"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Fe(H,"ttml")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download TTML",children:"TTML"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Fe(H,"json")},className:"p-1 hover:bg-white/10 rounded text-[8px] text-zinc-400 font-bold",title:"Download JSON",children:"JSON"}),p.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-0.5"}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Be(H)},className:"p-1 hover:bg-red-900/50 rounded text-[8px] text-red-500 hover:text-red-300 font-bold",title:"Clear Lyrics",children:"CLR"})]})]}),p.jsx("button",{onClick:w=>{w.stopPropagation(),Ce(ae)},className:"p-1 text-zinc-600 hover:text-red-400 hover:bg-red-900/20 rounded self-start",title:"Remove Track",children:p.jsx(fr,{size:12})})]},H.id)})})]})},md=[{label:"Modern & Clean",options:[{label:"System Sans Serif",value:"ui-sans-serif, system-ui, sans-serif"},{label:"Inter",value:"'Inter', sans-serif"},{label:"Roboto",value:"'Roboto', sans-serif"},{label:"Poppins",value:"'Poppins', sans-serif"},{label:"Montserrat",value:"'Montserrat', sans-serif"},{label:"Open Sans",value:"'Open Sans', sans-serif"},{label:"Lato",value:"'Lato', sans-serif"},{label:"Raleway",value:"'Raleway', sans-serif"},{label:"Outfit",value:"'Outfit', sans-serif"},{label:"Nunito",value:"'Nunito', sans-serif"}]},{label:"Classic & Elegant",options:[{label:"System Serif",value:"ui-serif, Georgia, serif"},{label:"Playfair Display",value:"'Playfair Display', serif"},{label:"Merriweather",value:"'Merriweather', serif"},{label:"Lora",value:"'Lora', serif"},{label:"Crimson Text",value:"'Crimson Text', serif"},{label:"EB Garamond",value:"'EB Garamond', serif"},{label:"Libre Baskerville",value:"'Libre Baskerville', serif"}]},{label:"Display & Bold",options:[{label:"Bebas Neue",value:"'Bebas Neue', sans-serif"},{label:"Anton",value:"'Anton', sans-serif"},{label:"Oswald",value:"'Oswald', sans-serif"},{label:"Archivo Black",value:"'Archivo Black', sans-serif"},{label:"Staatliches",value:"'Staatliches', cursive"},{label:"Righteous",value:"'Righteous', cursive"},{label:"Bungee",value:"'Bungee', cursive"}]},{label:"Handwritten & Script",options:[{label:"Dancing Script",value:"'Dancing Script', cursive"},{label:"Pacifico",value:"'Pacifico', cursive"},{label:"Great Vibes",value:"'Great Vibes', cursive"},{label:"Satisfy",value:"'Satisfy', cursive"},{label:"Shadows Into Light",value:"'Shadows Into Light', cursive"},{label:"Caveat",value:"'Caveat', cursive"},{label:"Indie Flower",value:"'Indie Flower', cursive"},{label:"Kalam",value:"'Kalam', cursive"},{label:"Sacramento",value:"'Sacramento', cursive"}]},{label:"Fun & Playful",options:[{label:"Fredoka One",value:"'Fredoka One', cursive"},{label:"Bangers",value:"'Bangers', cursive"},{label:"Luckiest Guy",value:"'Luckiest Guy', cursive"},{label:"Chewy",value:"'Chewy', cursive"},{label:"Bubblegum Sans",value:"'Bubblegum Sans', cursive"},{label:"Cherry Cream Soda",value:"'Cherry Cream Soda', cursive"},{label:"Patrick Hand",value:"'Patrick Hand', cursive"}]},{label:"Tech & Futuristic",options:[{label:"System Monospace",value:"ui-monospace, monospace"},{label:"Orbitron",value:"'Orbitron', sans-serif"},{label:"Audiowide",value:"'Audiowide', cursive"},{label:"Share Tech Mono",value:"'Share Tech Mono', monospace"},{label:"VT323",value:"'VT323', monospace"},{label:"Press Start 2P",value:"'Press Start 2P', cursive"},{label:"Fira Code",value:"'Fira Code', monospace"},{label:"JetBrains Mono",value:"'JetBrains Mono', monospace"}]},{label:"Decorative & Themed",options:[{label:"Metal Mania",value:"'Metal Mania', cursive"},{label:"UnifrakturMaguntia",value:"'UnifrakturMaguntia', cursive"},{label:"Cinzel",value:"'Cinzel', serif"},{label:"Creepster",value:"'Creepster', cursive"},{label:"Pirata One",value:"'Pirata One', cursive"},{label:"Rubik Moonrocks",value:"'Rubik Moonrocks', cursive"},{label:"Nabla",value:"'Nabla', cursive"}]},{label:"International & Multilingual",options:[{label:"Noto Sans SC (Chinese)",value:"'Noto Sans SC', sans-serif"},{label:"Noto Sans JP (Japanese)",value:"'Noto Sans JP', sans-serif"},{label:"Noto Sans KR (Korean)",value:"'Noto Sans KR', sans-serif"},{label:"Noto Sans Arabic (Arabic)",value:"'Noto Sans Arabic', sans-serif"},{label:"Noto Sans Devanagari (Hindi)",value:"'Noto Sans Devanagari', sans-serif"}]}],zA=()=>{const n=new Set;if(md.forEach(y=>{y.options.forEach(v=>{const m=v.value.split(",")[0].trim().replace(/['"]/g,"");!m.startsWith("ui-")&&m!=="system-ui"&&m!=="sans-serif"&&m!=="serif"&&m!=="monospace"&&n.add(m)})}),n.size===0)return;const s=`https://fonts.googleapis.com/css2?${Array.from(n).map(y=>`family=${y.replace(/ /g,"+")}:wght@400;700`).join("&")}&display=swap`;if(document.getElementById("google-fonts-loader"))return;const r=document.createElement("link");r.id="google-fonts-loader",r.rel="stylesheet",r.href=s,document.head.appendChild(r);const d=document.createElement("link");d.rel="preconnect",d.href="https://fonts.googleapis.com",document.head.appendChild(d);const h=document.createElement("link");h.rel="preconnect",h.href="https://fonts.gstatic.com",h.crossOrigin="anonymous",document.head.appendChild(h)},gd=[{label:"Basic",options:[{label:"Default",value:"default"},{label:"Custom",value:"custom"}]},{label:"Typography",options:[{label:"Large Text",value:"large"},{label:"Large Uppercase",value:"large_upper"},{label:"Big Center",value:"big_center"},{label:"Classic Serif",value:"classic"},{label:"Monospace",value:"monospace"}]},{label:"Thematic",options:[{label:"Heavy Metal",value:"metal"},{label:"Kids Fun",value:"kids"},{label:"Melancholy",value:"sad"},{label:"Romantic",value:"romantic"},{label:"Tech / Sci-Fi",value:"tech"},{label:"Gothic",value:"gothic"}]},{label:"Layout & Minimal",options:[{label:"Slideshow (Small)",value:"slideshow"},{label:"Subtitle Mode",value:"subtitle"},{label:"Video Only",value:"just_video"}]},{label:"Debug",options:[{label:"Testing",value:"testing"},{label:"Testing Up",value:"testing_up"}]}],xr={default:{fontSizeScale:1,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"none",textAlign:"center",fontColor:"#ffffff"},large:{fontSizeScale:1.8,fontFamily:"ui-sans-serif, system-ui, sans-serif",fontColor:"#ffffff",fontWeight:"bold"},classic:{fontSizeScale:1,fontFamily:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',fontColor:"#fef3c7",fontStyle:"italic",fontWeight:"bold"},large_upper:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",fontColor:"#ffffff",fontWeight:"bold"},monospace:{fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontColor:"#ffffff",fontWeight:"bold"},big_center:{fontSizeScale:1.6,fontFamily:"ui-sans-serif, system-ui, sans-serif",textCase:"upper",textAlign:"center",contentPosition:"center",fontColor:"#ffffff",fontWeight:"bold"},metal:{fontFamily:'"Metal Mania", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},kids:{fontFamily:'"Fredoka One", cursive',fontSizeScale:1.6,textCase:"upper",fontColor:"#ffffff"},sad:{fontFamily:'"Shadows Into Light", cursive',fontSizeScale:1.2,fontColor:"#e4e4e7"},romantic:{fontFamily:'"Dancing Script", cursive',fontSizeScale:1.2,fontColor:"#fce7f3",fontStyle:"italic"},tech:{fontFamily:'"Orbitron", sans-serif',fontSizeScale:1.6,textCase:"upper",fontColor:"#ecfeff",fontWeight:"bold"},gothic:{fontFamily:'"UnifrakturMaguntia", cursive',fontSizeScale:1.2,fontColor:"#d4d4d8"},slideshow:{fontSizeScale:.6,fontColor:"#ffffff"},just_video:{},subtitle:{fontSizeScale:.6,contentPosition:"bottom",fontColor:"#ffffff"},testing:{fontSizeScale:1.6},testing_up:{fontSizeScale:1.6,textCase:"upper"}},Dc=gd.flatMap(n=>n.options.map(t=>t.value)),Om={backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"shadow",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,infoSizeScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",showChannelInfo:!1,channelInfoText:"Music Channel",channelInfoPosition:"bottom-right",channelInfoStyle:"classic",channelInfoSizeScale:1,channelInfoMarginScale:1,channelInfoImage:void 0,useCustomHighlightColors:!1,backgroundImage:void 0,visualTransitionType:"none",visualTransitionDuration:1,enableGradientOverlay:!1},qm=[{label:"Basic",options:[{label:"Use Preset Default",value:"preset"},{label:"None",value:"none"},{label:"Drop Shadow",value:"shadow"},{label:"Outline",value:"outline"}]},{label:"Glow Effects",options:[{label:"Soft Glow",value:"glow"},{label:"Neon Glow",value:"neon"},{label:"Multi-Color Neon",value:"neon-multi"}]},{label:"3D & Pop",options:[{label:"3D Pop",value:"3d"},{label:"Embossed",value:"emboss"},{label:"Chrome Metallic",value:"chrome"},{label:"Gold Foil",value:"gold"}]},{label:"Artistic",options:[{label:"Glassmorphism",value:"glass"},{label:"Gradient Fill",value:"gradient"},{label:"Fire",value:"fire"},{label:"Frozen Ice",value:"frozen"},{label:"Rainbow",value:"rainbow"},{label:"Reflection",value:"mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"vhs"},{label:"Retro 80s",value:"retro"},{label:"Cyberpunk",value:"cyberpunk"},{label:"Hologram",value:"hologram"},{label:"Comic Book",value:"comic"},{label:"Digital Glitch",value:"glitch-text"}]}],jm=[{label:"Static",options:[{label:"None (Static)",value:"none"}]},{label:"Subtle",options:[{label:"Pulse",value:"pulse"},{label:"Breathe",value:"breathe"},{label:"Float",value:"float"},{label:"Sway",value:"sway"},{label:"Flicker",value:"flicker"}]},{label:"Energetic",options:[{label:"Bounce",value:"bounce"},{label:"Shake",value:"shake"},{label:"Wave",value:"wave"},{label:"Wobble",value:"wobble"},{label:"Jello",value:"jello"},{label:"Rubber Band",value:"rubberband"}]},{label:"Attention",options:[{label:"Heartbeat",value:"heartbeat"},{label:"Flash",value:"flash"},{label:"Tada!",value:"tada"},{label:"Swing",value:"swing"}]},{label:"Rotation",options:[{label:"Gentle Rotate",value:"rotate"},{label:"Spin",value:"spin"}]},{label:"Special",options:[{label:"Glitch",value:"glitch"},{label:"Typewriter",value:"typewriter"}]}],$m=[{label:"Basic",options:[{label:"Instant",value:"none"},{label:"Smooth Fade",value:"fade"}]},{label:"Slide & Move",options:[{label:"Slide In",value:"slide"},{label:"Float Up",value:"float"},{label:"Drop In",value:"drop"},{label:"Lightspeed",value:"lightspeed"},{label:"Roll In",value:"roll"}]},{label:"Scale & Transform",options:[{label:"Zoom In",value:"zoom"},{label:"Bounce In",value:"bounce"},{label:"Elastic Pop",value:"elastic"},{label:"Scale + Rotate",value:"scale-rotate"}]},{label:"Rotation",options:[{label:"Flip In",value:"flip"},{label:"Rotate In",value:"rotate-in"},{label:"Spiral In",value:"spiral"},{label:"Swing In",value:"swing"}]},{label:"Special",options:[{label:"Motion Blur",value:"blur"},{label:"Shatter In",value:"shatter"},{label:"Typewriter",value:"typewriter"}]}],Ym=[{label:"Visual Transition",options:[{label:"None (Cut)",value:"none"},{label:"Crossfade",value:"crossfade"},{label:"Fade Through Black",value:"fade-to-black"}]}],td=[{label:"Basic",options:[{label:"None",value:"none"},{label:"Simple Color",value:"color"},{label:"Scale Up",value:"scale"},{label:"Intense Glow",value:"glow"},{label:"Background Box",value:"background"}]},{label:"Karaoke Standard",options:[{label:"Default (Line/Fill)",value:"karaoke"},{label:"Smooth Transition",value:"karaoke-smooth"},{label:"Fill Background",value:"karaoke-fill"},{label:"Outline Only",value:"karaoke-outline"},{label:"Underline",value:"karaoke-underline"},{label:"Shadow",value:"karaoke-shadow"},{label:"Gradient",value:"karaoke-gradient"}]},{label:"Animations",options:[{label:"Bounce",value:"karaoke-bounce"},{label:"Wave",value:"karaoke-wave"},{label:"Zoom In",value:"karaoke-scale"}]},{label:"Neon & Glow",options:[{label:"Neon White",value:"karaoke-neon"},{label:"Glow Blue",value:"karaoke-glow-blue"},{label:"Glow Pink",value:"karaoke-glow-pink"},{label:"Multi-Color Neon",value:"karaoke-neon-multi"},{label:"Soft Glow",value:"karaoke-soft-glow"}]},{label:"3D & Artistic",options:[{label:"3D Pop",value:"karaoke-3d"},{label:"Embossed",value:"karaoke-emboss"},{label:"Chrome Metallic",value:"karaoke-chrome"},{label:"Gold Foil",value:"karaoke-gold"},{label:"Glassmorphism",value:"karaoke-glass"},{label:"Gradient Fill",value:"karaoke-gradient-fill"},{label:"Fire",value:"karaoke-fire"},{label:"Frozen Ice",value:"karaoke-frozen"},{label:"Rainbow",value:"karaoke-rainbow"},{label:"Reflection",value:"karaoke-mirror"}]},{label:"Retro & Stylized",options:[{label:"VHS Glitch",value:"karaoke-vhs"},{label:"Retro 80s",value:"karaoke-retro"},{label:"Cyberpunk",value:"karaoke-cyberpunk"},{label:"Hologram",value:"karaoke-hologram"},{label:"Comic Book",value:"karaoke-comic"},{label:"Digital Glitch",value:"karaoke-glitch-text"}]},{label:"Detailed Animations",options:[{label:"Pulse",value:"karaoke-pulse"},{label:"Breathe",value:"karaoke-breathe"},{label:"Float",value:"karaoke-float"},{label:"Sway",value:"karaoke-sway"},{label:"Flicker",value:"karaoke-flicker"},{label:"Shake",value:"karaoke-shake"},{label:"Wobble",value:"karaoke-wobble"},{label:"Jello",value:"karaoke-jello"},{label:"Rubber Band",value:"karaoke-rubberband"},{label:"Heartbeat",value:"karaoke-heartbeat"},{label:"Flash",value:"karaoke-flash"},{label:"Tada!",value:"karaoke-tada"},{label:"Swing",value:"karaoke-swing"},{label:"Gentle Rotate",value:"karaoke-rotate"},{label:"Spin",value:"karaoke-spin"},{label:"Glitch Anim",value:"karaoke-glitch"},{label:"Typewriter",value:"karaoke-typewriter"}]},{label:"Motion & Transitions",options:[{label:"Smooth Fade",value:"karaoke-fade"},{label:"Slide In",value:"karaoke-slide"},{label:"Drop In",value:"karaoke-drop"},{label:"Lightspeed",value:"karaoke-lightspeed"},{label:"Roll In",value:"karaoke-roll"},{label:"Zoom In",value:"karaoke-zoom"},{label:"Elastic Pop",value:"karaoke-elastic"},{label:"Scale + Rotate",value:"karaoke-scale-rotate"},{label:"Flip In",value:"karaoke-flip"},{label:"Rotate In",value:"karaoke-rotate-in"},{label:"Spiral In",value:"karaoke-spiral"},{label:"Motion Blur",value:"karaoke-blur"},{label:"Shatter",value:"karaoke-shatter"}]},{label:"Solid Colors",options:[{label:"Blue",value:"karaoke-blue"},{label:"Purple",value:"karaoke-purple"},{label:"Green",value:"karaoke-green"},{label:"Pink",value:"karaoke-pink"},{label:"Cyan",value:"karaoke-cyan"}]},{label:"Shapes",options:[{label:"Pill Shape",value:"karaoke-pill"},{label:"Square Box",value:"karaoke-box"},{label:"Rounded Box",value:"karaoke-rounded"}]}],nd=n=>{let t="",o="";return n.includes("blue")||n.includes("cyan")?(t=n.includes("cyan")?"#06b6d4":"#3b82f6",o=t):n.includes("purple")?(t="#a855f7",o=t):n.includes("green")?(t="#22c55e",o=t):n.includes("pink")?(t="#ec4899",o=t):(n==="karaoke-pill"||n==="karaoke-box"||n==="karaoke-rounded")&&(t="#fb923c",o="#fb923c"),t?{color:t,bg:o}:null},Jm=[{label:"Source",options:[{label:"From Timeline",value:"timeline"},{label:"Metadata / Default",value:"custom"},{label:"Smart Gradient",value:"smart-gradient"},{label:"Gradient (Manual)",value:"gradient"},{label:"Solid Color",value:"color"},{label:"Custom Image",value:"image"}]}],id=[{label:"Display Modes",options:[{label:"Show All (Default)",value:"all"},{label:"Prev & Next (Centered)",value:"previous-next"},{label:"Current & Next",value:"next-only"},{label:"Current Line Only",value:"active-only"}]}],Qg=["none","upper","lower","title","sentence","invert"],Km=[{label:"Layout Styles",options:[{label:"Classic (Detailed)",value:"classic"},{label:"Modern + Cover",value:"modern_art"},{label:"Circle Cover",value:"circle_art"},{label:"Modern (Text Only)",value:"modern"},{label:"Boxed Cover",value:"box"},{label:"Minimal (Text Only)",value:"minimal"}]}],Xm=[{label:"Layout Styles",options:[{label:"Classic (Row)",value:"classic"},{label:"Modern (Col)",value:"modern"},{label:"Minimal (Text Only)",value:"minimal"},{label:"Circle (Avatar)",value:"circle"},{label:"Logo Only",value:"logo"},{label:"Boxed",value:"box"}]}],DA=[{label:"Frame Rate",options:[{label:"24 FPS (Cinematic)",value:"24"},{label:"30 FPS (Standard)",value:"30"},{label:"60 FPS (Smooth)",value:"60"}]}],yi=({value:n,onChange:t,groups:o})=>{const[s,r]=X.useState(!1),[d,h]=X.useState(n);X.useEffect(()=>{s||h(n)},[n,s]);const y=S=>{for(const T of o){const A=T.options.find(N=>N.value===S);if(A)return A.label}return S},v=S=>{t(S)},m=()=>{s&&t(d),r(!1)},x=S=>{t(S),h(S),r(!1)};return p.jsxs("div",{className:"space-y-2 relative",onMouseLeave:m,children:[p.jsxs("button",{onClick:()=>r(!s),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:s?"Close List":"Expand List",children:[p.jsx("span",{className:"truncate",children:y(n)}),p.jsx($s,{size:14,className:`transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&p.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2 z-10",children:o.map(S=>p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),p.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(T=>p.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,children:T.label},T.value))})]},S.label))})]})},UA=(n,t,o)=>{if(n==="CustomFont"&&o)return o;for(const s of t){const r=s.options.find(d=>d.value===n);if(r)return r.label}return"Select Font"},LA=({value:n,onChange:t,customFontName:o,groups:s=md})=>{const[r,d]=X.useState(!1),[h,y]=X.useState(n);X.useEffect(()=>{r||y(n)},[n,r]);const v=S=>{t(S)},m=()=>{r&&t(h)},x=S=>{t(S),y(S),d(!1)};return p.jsxs("div",{className:"space-y-2",onMouseLeave:m,children:[p.jsxs("button",{onClick:()=>d(!r),className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-zinc-200 flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-purple-500 hover:bg-zinc-700/50 transition-colors",title:r?"Close Font List":"Expand Font List",children:[p.jsx("span",{className:"truncate",style:{fontFamily:n},children:UA(n,s,o)}),p.jsx($s,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&p.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-lg overflow-hidden transition-all animate-in fade-in slide-in-from-top-2",children:[o&&p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:"Custom"}),p.jsx("button",{onMouseEnter:()=>v("CustomFont"),onClick:()=>x("CustomFont"),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${n==="CustomFont"?"bg-purple-600 text-white":"text-zinc-300 hover:bg-white/10"}`,children:p.jsxs("span",{style:{fontFamily:"CustomFont"},children:[" ",o]})})]}),s.map(S=>p.jsxs("div",{className:"px-2 py-1.5 border-b border-white/5 last:border-0",children:[p.jsx("div",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 px-2",children:S.label}),p.jsx("div",{className:"grid grid-cols-1 gap-0.5",children:S.options.map(T=>p.jsx("button",{onMouseEnter:()=>v(T.value),onClick:()=>x(T.value),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${n===T.value?"bg-purple-600/50 text-white":"text-zinc-300 hover:bg-white/10"}`,title:T.label,children:p.jsx("span",{style:{fontFamily:T.value},children:T.label})},T.value))})]},S.label))]})]})},PA=Object.values(xr).filter(n=>n.fontFamily).reduce((n,t)=>{if(!n.find(o=>o.value===t.fontFamily)){let o=t.fontFamily.split(",")[0].replace(/['"]/g,"");o.includes("ui-serif")?o="Classic Serif":o.includes("ui-monospace")?o="Monospace":o==="sans-serif"&&(o="Default Sans"),n.push({label:`${o} (Preset)`,value:t.fontFamily})}return n},[]),GA=[{label:"Visual Presets",options:PA},...md],HA=({config:n,setConfig:t,preset:o,setPreset:s,onClose:r,isPlaylistMode:d,hasPlaylist:h,onRender:y,customFontName:v,onFontUpload:m,onClearCustomFont:x,resolution:S,setResolution:T,aspectRatio:A,setAspectRatio:N,renderCodec:O,setRenderCodec:F,supportedCodecs:J,renderQuality:ue,setRenderQuality:fe,renderFps:Ge,setRenderFps:ke})=>{const{toast:Ve,confirm:Se}=br(),nt=X.useRef(null),we=X.useRef(null),Qe=X.useRef(null),Ue=X.useRef(null),ft=X.useRef(null),[St,At]=X.useState(!1),be=(R,ne)=>{let Ee={...n,[R]:ne};if(R==="highlightEffect"){const _=nd(ne);Ee.useCustomHighlightColors=!1,_&&(Ee.highlightColor=_.color,Ee.highlightBackground=_.bg)}t(Ee)},B=R=>{s(R);const ne=xr[R];ne&&t({...n,...{fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"},...ne})},xe=R=>{const ne=R.target.files?.[0];if(ne){const Ee=new FileReader;Ee.onload=Ke=>{Ke.target?.result&&be("channelInfoImage",Ke.target.result)},Ee.readAsDataURL(ne)}R.target.value=""},de=R=>{const ne=R.target.files?.[0];if(ne){const Ee=new FileReader;Ee.onload=Ke=>{Ke.target?.result&&be("backgroundImage",Ke.target.result)},Ee.readAsDataURL(ne)}R.target.value=""},ht=async()=>{await Se("Reset all render settings, including styles and watermark, to default values?","Reset All Settings")&&(t(Om),s("default"),T("1080p"),N("16:9"),F("auto"),ke(30),fe("med"),Qe.current&&(Qe.current.value=""),Ue.current&&(Ue.current.value=""),x(),be("enableGradientOverlay",!1),Ve.success("All settings have been reset to default."))},mt=()=>{const R=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),ne={...n,fontSizeScale:typeof n.fontSizeScale=="number"?Number(n.fontSizeScale.toFixed(6)):n.fontSizeScale,infoSizeScale:typeof n.infoSizeScale=="number"?Number(n.infoSizeScale.toFixed(6)):n.infoSizeScale,infoMarginScale:typeof n.infoMarginScale=="number"?Number(n.infoMarginScale.toFixed(6)):n.infoMarginScale,channelInfoSizeScale:typeof n.channelInfoSizeScale=="number"?Number(n.channelInfoSizeScale.toFixed(6)):n.channelInfoSizeScale,channelInfoMarginScale:typeof n.channelInfoMarginScale=="number"?Number(n.channelInfoMarginScale.toFixed(6)):n.channelInfoMarginScale,preset:o,resolution:S,aspectRatio:A,renderCodec:O,renderFps:Ge,renderQuality:ue,customFontName:v};ne.backgroundSource!=="image"&&(ne.backgroundImage=void 0),ne.showChannelInfo||(ne.channelInfoImage=void 0);try{const Ee=JSON.stringify(ne,null,2),Ke=new Blob([Ee],{type:"application/json"}),_=URL.createObjectURL(Ke),P=document.createElement("a");P.setAttribute("href",_),P.setAttribute("download",`render_settings_${R}.json`),document.body.appendChild(P),P.click(),P.remove(),URL.revokeObjectURL(_)}catch(Ee){console.error("Export failed:",Ee),Ve.error("Failed to export settings.")}},D=R=>{const ne=R.target.files?.[0];if(!ne)return;const Ee=new FileReader;Ee.onload=Ke=>{try{const _=JSON.parse(Ke.target?.result);if(_&&typeof _=="object"){const{resolution:P,aspectRatio:ie,renderCodec:le,renderFps:Ie,renderQuality:Ce,preset:Te,customFontName:Ne,...he}=_,L={...Om,...he};if(["backgroundBlurStrength","fontSizeScale","infoMarginScale","infoSizeScale","channelInfoSizeScale","infoSizeScale","channelInfoSizeScale","channelInfoMarginScale","visualTransitionDuration"].forEach(Ye=>{L[Ye]!==void 0&&(L[Ye]=Number(L[Ye]))}),L.useCustomHighlightColors!==void 0&&(L.useCustomHighlightColors=!!L.useCustomHighlightColors),L.showChannelInfo!==void 0&&(L.showChannelInfo=!!L.showChannelInfo),L.showIntro!==void 0&&(L.showIntro=!!L.showIntro),L.showTitle!==void 0&&(L.showTitle=!!L.showTitle),L.showArtist!==void 0&&(L.showArtist=!!L.showArtist),L.showCover!==void 0&&(L.showCover=!!L.showCover),L.showLyrics!==void 0&&(L.showLyrics=!!L.showLyrics),L.highlightEffect&&(!L.highlightColor||!L.highlightBackground)){const Ye=nd(L.highlightEffect);Ye&&(L.highlightColor||(L.highlightColor=Ye.color),L.highlightBackground||(L.highlightBackground=Ye.bg))}const Fe=(Ye,H)=>H.some(ae=>ae.options.some(pe=>pe.value===Ye));L.textEffect&&!Fe(L.textEffect,qm)&&(L.textEffect="shadow"),L.textAnimation&&!Fe(L.textAnimation,jm)&&(L.textAnimation="none"),L.transitionEffect&&!Fe(L.transitionEffect,$m)&&(L.transitionEffect="none"),L.visualTransitionType&&!Fe(L.visualTransitionType,Ym)&&(L.visualTransitionType="none"),L.highlightEffect&&!Fe(L.highlightEffect,td)&&(L.highlightEffect="karaoke"),L.backgroundSource&&!Fe(L.backgroundSource,Jm)&&(L.backgroundSource="custom"),["current","playlist"].includes(L.renderMode)||(L.renderMode="current"),["left","center","right"].includes(L.textAlign)||(L.textAlign="center"),["top","center","bottom"].includes(L.contentPosition)||(L.contentPosition="center"),L.lyricDisplayMode&&!Fe(L.lyricDisplayMode,id)&&(L.lyricDisplayMode="all"),["normal","bold"].includes(L.fontWeight)||(L.fontWeight="bold"),["normal","italic"].includes(L.fontStyle)||(L.fontStyle="normal"),["none","underline","line-through"].includes(L.textDecoration)||(L.textDecoration="none"),Qg.includes(L.textCase)||(L.textCase="none"),["auto","manual"].includes(L.introMode)||(L.introMode="auto"),L.lyricStyleTarget&&!["active-only","all"].includes(L.lyricStyleTarget)&&(L.lyricStyleTarget="active-only");const Be=["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center"];L.infoPosition&&!Be.includes(L.infoPosition)&&(L.infoPosition="top-left"),L.infoStyle&&!Fe(L.infoStyle,Km)&&(L.infoStyle="classic"),L.channelInfoPosition&&!Be.includes(L.channelInfoPosition)&&(L.channelInfoPosition="bottom-right"),L.channelInfoStyle&&!Fe(L.channelInfoStyle,Xm)&&(L.channelInfoStyle="classic"),t(L),P&&T(P),ie&&N(ie),le&&F(le),Ie&&ke(Number(Ie)),Ce&&fe(Ce),s(Te||"custom"),Ne&&Ne!==v?Ve.success(`Settings loaded. Note: Config used font "${Ne}".`):Ve.success("Settings loaded successfully!")}}catch(_){console.error(_),Ve.error("Failed to parse settings file. Please ensure it is a valid JSON file.")}},Ee.readAsText(ne),R.target.value=""};return X.useEffect(()=>{const R=ne=>{nt.current&&!nt.current.contains(ne.target)&&r()};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[r]),p.jsxs("div",{ref:nt,onMouseDown:R=>R.stopPropagation(),className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 z-50 flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[p.jsxs("div",{className:"h-14 border-b border-white/10 flex items-center justify-between px-3 md:px-4 bg-zinc-900/50",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ar,{size:18,className:"text-purple-400"}),p.jsx("h2",{className:"font-bold text-zinc-200",children:"Render Settings"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{ref:ft,type:"file",accept:".json,.txt",className:"hidden",onChange:D}),p.jsx("button",{onClick:()=>ft.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Import Settings",children:p.jsx(Po,{size:16})}),p.jsx("button",{onClick:mt,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Export Settings",children:p.jsx(Vx,{size:16})}),p.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),p.jsx("button",{onClick:ht,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",title:"Reset to Default",children:p.jsx(Gc,{size:16})}),p.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:p.jsx(vi,{size:20})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-6 custom-scrollbar",children:[p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Hc,{size:14})," Visual Preset"]}),p.jsx(yi,{value:o,onChange:R=>B(R),groups:gd})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(qs,{size:14})," Render Scope"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("button",{onClick:()=>be("renderMode","current"),className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="current"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20"}`,children:"Current Song"}),p.jsx("button",{onClick:()=>be("renderMode","playlist"),disabled:!h,className:`px-3 py-2 rounded-lg text-xs font-medium border transition-all ${n.renderMode==="playlist"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_10px_rgba(147,51,234,0.3)]":"bg-zinc-800/50 border-white/5 text-zinc-400 hover:border-white/20 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:"All Playlist"})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(oh,{size:14})," Background Source"]}),p.jsx(yi,{value:n.backgroundSource,onChange:R=>{R==="gradient"&&!n.backgroundGradient?(s("custom"),t({...n,backgroundSource:"gradient",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)"})):R==="smart-gradient"&&(!n.backgroundColor||n.backgroundColor==="#000000")?(s("custom"),t({...n,backgroundSource:"smart-gradient",backgroundColor:"#581c87"})):R==="color"&&!n.backgroundColor?(s("custom"),t({...n,backgroundSource:"color",backgroundColor:"#000000"})):be("backgroundSource",R)},groups:Jm}),n.backgroundSource==="smart-gradient"&&p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.backgroundColor,onChange:R=>be("backgroundColor",R.target.value),className:"w-10 h-10 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Pick Base Color"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Hex:"}),p.jsx("input",{type:"text",value:n.backgroundColor,onChange:R=>be("backgroundColor",R.target.value),className:"bg-transparent border-b border-zinc-700 focus:border-purple-500 text-[10px] text-zinc-300 font-mono focus:outline-none p-0 w-20 uppercase"})]})]})]}),n.backgroundSource==="color"&&p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.backgroundColor,onChange:R=>be("backgroundColor",R.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.backgroundColor,onChange:R=>be("backgroundColor",R.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]}),n.backgroundSource==="gradient"&&p.jsx("input",{type:"text",value:n.backgroundGradient,onChange:R=>be("backgroundGradient",R.target.value),placeholder:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",className:"w-full bg-zinc-800 border border-white/10 rounded-lg px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-purple-500"}),n.backgroundSource==="image"&&p.jsx("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200",children:p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Background Image"}),p.jsx("input",{ref:Ue,type:"file",accept:"image/*",onChange:de,className:"hidden"}),n.backgroundImage?p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[p.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:p.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),p.jsx("button",{onClick:()=>be("backgroundImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),p.jsx("button",{onClick:()=>Ue.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:p.jsx(ar,{size:14})})]}):p.jsxs("button",{onClick:()=>Ue.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Po,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Background"})]})]})})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(cb,{size:14})," Background Effects"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex bg-zinc-800 p-1 rounded-lg border border-white/5",children:[p.jsx("button",{onClick:()=>be("backgroundBlurStrength",0),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength===0?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Sharp"}),p.jsx("button",{onClick:()=>be("backgroundBlurStrength",12),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${n.backgroundBlurStrength>0?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-white/5"}`,children:"Blur"})]}),n.backgroundBlurStrength>0&&p.jsxs("div",{className:"space-y-1.5 animate-in slide-in-from-top-2 fade-in duration-200",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Blur Intensity"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.backgroundBlurStrength,"px"]})]}),p.jsx("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:p.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n.backgroundBlurStrength,onChange:R=>be("backgroundBlurStrength",parseInt(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),p.jsxs("label",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-2.5 flex items-center justify-between cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Black Gradient Overlay"}),p.jsx("span",{className:"text-[10px] text-zinc-500",children:"Fade bottom to top (readability)"})]}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n.enableGradientOverlay??!1,onChange:R=>be("enableGradientOverlay",R.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(cr,{size:14})," Lyric Display Mode"]}),p.jsx(yi,{value:n.lyricDisplayMode,onChange:R=>be("lyricDisplayMode",R),groups:id})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Hc,{size:14})," Highlight Effect"]}),p.jsx(yi,{value:n.highlightEffect||"none",onChange:R=>{be("highlightEffect",R)},groups:td}),n.highlightEffect&&n.highlightEffect!=="none"&&p.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2",children:[p.jsxs("button",{onClick:()=>be("useCustomHighlightColors",!n.useCustomHighlightColors),className:`w-full flex items-center justify-between p-2 rounded-lg border text-xs font-medium transition-all ${n.useCustomHighlightColors?"bg-purple-900/30 border-purple-500/50 text-purple-200":"bg-zinc-800 border-white/5 text-zinc-400 hover:bg-zinc-700"}`,children:[p.jsx("span",{children:"Custom Colors"}),p.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${n.useCustomHighlightColors?"bg-purple-500":"bg-zinc-600"}`,children:p.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transition-transform ${n.useCustomHighlightColors?"translate-x-4":"translate-x-0"}`})})]}),n.useCustomHighlightColors&&p.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-200",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Text/Glow Color"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.highlightColor||"#fb923c",onChange:R=>be("highlightColor",R.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.highlightColor||"#fb923c",onChange:R=>be("highlightColor",R.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Back/Shape Color"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 p-1.5 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.highlightBackground||"#fb923c",onChange:R=>be("highlightBackground",R.target.value),className:"w-8 h-6 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.highlightBackground||"#fb923c",onChange:R=>be("highlightBackground",R.target.value),className:"bg-transparent border-none text-[10px] text-zinc-300 font-mono w-full focus:outline-none uppercase"})]})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(fb,{size:14})," Visible Elements"]}),p.jsx("div",{className:"space-y-2",children:[{label:"Lyrics / Subtitles",key:"showLyrics"},{label:"Song Title",key:"showTitle"},{label:"Artist Name",key:"showArtist"},{label:"Cover Art",key:"showCover"},{label:"Intro Info",key:"showIntro"}].map(R=>p.jsxs("label",{className:"flex items-center justify-between p-2 rounded-lg bg-zinc-800/30 border border-white/5 hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[p.jsx("span",{className:"text-xs text-zinc-300",children:R.label}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n[R.key],onChange:ne=>be(R.key,ne.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]},R.key))})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Lo,{size:14})," Intro Settings"]}),p.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Intro Text"}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-md p-1 border border-white/5",children:[p.jsx("button",{onClick:()=>be("introMode","auto"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="auto"?"bg-zinc-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Auto"}),p.jsx("button",{onClick:()=>be("introMode","manual"),className:`px-2 py-1 text-[10px] font-medium rounded transition-all ${n.introMode==="manual"?"bg-purple-600 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200"}`,children:"Manual"})]})]}),n.introMode==="manual"&&p.jsxs("div",{className:"space-y-1 animate-in slide-in-from-top-1 fade-in duration-200",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Custom Intro Content"}),p.jsx("textarea",{value:n.introText,onChange:R=>be("introText",R.target.value),placeholder:"Enter intro text...",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[60px]"})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(oh,{size:14})," Channel Info / Watermark"]}),p.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-lg p-3 space-y-3",children:[p.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[p.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:"Show Channel Info"}),p.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:n.showChannelInfo??!1,onChange:R=>be("showChannelInfo",R.target.checked),className:"sr-only peer"}),p.jsx("div",{className:"w-8 h-4 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-purple-600"})]})]}),n.showChannelInfo&&p.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-1 fade-in duration-200 pt-2 border-t border-white/5",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Logo / Image"}),p.jsx("input",{ref:Qe,type:"file",accept:"image/*",onChange:xe,className:"hidden"}),n.channelInfoImage?p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800 p-2 rounded-lg border border-white/10",children:[p.jsx("div",{className:"w-10 h-10 rounded bg-zinc-700/50 flex items-center justify-center overflow-hidden border border-white/5",children:p.jsx("img",{src:n.channelInfoImage,alt:"Channel",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-zinc-300 truncate",children:"Image Loaded"}),p.jsx("button",{onClick:()=>be("channelInfoImage",void 0),className:"text-[10px] text-red-400 hover:text-red-300",children:"Remove"})]}),p.jsx("button",{onClick:()=>Qe.current?.click(),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white",children:p.jsx(ar,{size:14})})]}):p.jsxs("button",{onClick:()=>Qe.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-3 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Po,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Image"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Channel Name / SVG Code"}),p.jsx("textarea",{value:n.channelInfoText??"",onChange:R=>be("channelInfoText",R.target.value),placeholder:"Display Name or <svg>...</svg>",className:"w-full bg-zinc-900 border border-white/10 rounded-md px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-purple-500 min-h-[40px] resize-y font-mono",rows:2})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx("button",{onClick:()=>be("channelInfoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.channelInfoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Left",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.channelInfoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Center",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.channelInfoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Top Right",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.channelInfoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Left",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.channelInfoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Center",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("channelInfoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.channelInfoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,title:"Bottom Right",children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsx(yi,{value:n.channelInfoStyle||"classic",onChange:R=>be("channelInfoStyle",R),groups:Xm})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoMarginScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Os,{size:12})}),p.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.channelInfoMarginScale??1,onChange:R=>be("channelInfoMarginScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.channelInfoSizeScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Os,{size:12})}),p.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.channelInfoSizeScale??1,onChange:R=>be("channelInfoSizeScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Hl,{size:14})," Song Info Design"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Position"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx("button",{onClick:()=>be("infoPosition","top-left"),className:`h-8 rounded-md border flex items-start justify-start p-1 transition-all ${n.infoPosition==="top-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","top-center"),className:`h-8 rounded-md border flex items-start justify-center p-1 transition-all ${n.infoPosition==="top-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","top-right"),className:`h-8 rounded-md border flex items-start justify-end p-1 transition-all ${n.infoPosition==="top-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","bottom-left"),className:`h-8 rounded-md border flex items-end justify-start p-1 transition-all ${n.infoPosition==="bottom-left"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","bottom-center"),className:`h-8 rounded-md border flex items-end justify-center p-1 transition-all ${n.infoPosition==="bottom-center"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})}),p.jsx("button",{onClick:()=>be("infoPosition","bottom-right"),className:`h-8 rounded-md border flex items-end justify-end p-1 transition-all ${n.infoPosition==="bottom-right"?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:border-white/20"}`,children:p.jsx("div",{className:"w-2 h-2 bg-current rounded-sm"})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsx(yi,{value:n.infoStyle||"classic",onChange:R=>be("infoStyle",R),groups:Km})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Edge Margin"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoMarginScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Os,{size:12})}),p.jsx("input",{type:"range",min:"0.0",max:"5.0",step:"0.1",value:n.infoMarginScale??1,onChange:R=>be("infoMarginScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Info Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.infoSizeScale??1).toFixed(1),"x"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Lo,{size:12})}),p.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:n.infoSizeScale??1,onChange:R=>be("infoSizeScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})]})]})]})]}),p.jsxs("section",{className:"space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(Lo,{size:14})," Typography & Style"]}),p.jsxs("div",{className:"space-y-4 pt-1",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Alignment"}),p.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:["left","center","right"].map(R=>p.jsx("button",{onClick:()=>be("textAlign",R),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${n.textAlign===R?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:R},R))})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Vertical Position"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>be("contentPosition","top"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="top"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Top",children:p.jsx(wx,{size:14})}),p.jsx("button",{onClick:()=>be("contentPosition","center"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="center"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Center",children:p.jsx(bx,{size:14})}),p.jsx("button",{onClick:()=>be("contentPosition","bottom"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.contentPosition==="bottom"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bottom",children:p.jsx(Tx,{size:14})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Style"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>be("fontWeight",n.fontWeight==="bold"?"normal":"bold"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontWeight==="bold"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Bold",children:p.jsx(_x,{size:14})}),p.jsx("button",{onClick:()=>be("fontStyle",n.fontStyle==="italic"?"normal":"italic"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.fontStyle==="italic"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Italic",children:p.jsx(eb,{size:14})}),p.jsx("button",{onClick:()=>be("textDecoration",n.textDecoration==="underline"?"none":"underline"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="underline"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Underline",children:p.jsx($b,{size:14})}),p.jsx("button",{onClick:()=>be("textDecoration",n.textDecoration==="line-through"?"none":"line-through"),className:`flex-1 py-1.5 rounded-md flex items-center justify-center transition-all ${n.textDecoration==="line-through"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,title:"Strikethrough",children:p.jsx(Vb,{size:14})})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Apply Style To"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1 gap-1",children:[p.jsx("button",{onClick:()=>be("lyricStyleTarget","active-only"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="active-only"||!n.lyricStyleTarget?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to current line only (others normal)",children:"Current Only"}),p.jsx("button",{onClick:()=>be("lyricStyleTarget","all"),className:`flex-1 py-1.5 rounded-md text-[10px] transition-all ${n.lyricStyleTarget==="all"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,title:"Apply style to all lines (previous, current, next)",children:"All Lines"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Case"}),p.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>be("textCase","none"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="none"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Normal"}),p.jsx("button",{onClick:()=>be("textCase","upper"),className:`py-1.5 rounded-md text-[10px] uppercase transition-all ${n.textCase==="upper"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Upper"}),p.jsx("button",{onClick:()=>be("textCase","lower"),className:`py-1.5 rounded-md text-[10px] lowercase transition-all ${n.textCase==="lower"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Lower"}),p.jsx("button",{onClick:()=>be("textCase","title"),className:`py-1.5 rounded-md text-[10px] capitalize transition-all ${n.textCase==="title"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Title Case"}),p.jsx("button",{onClick:()=>be("textCase","sentence"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="sentence"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Sentence case"}),p.jsx("button",{onClick:()=>be("textCase","invert"),className:`py-1.5 rounded-md text-[10px] transition-all ${n.textCase==="invert"?"bg-zinc-600 text-white shadow-sm font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Invert Case"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Family"}),p.jsx(LA,{value:n.fontFamily,onChange:R=>be("fontFamily",R),customFontName:v,groups:GA})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Custom Font File"}),p.jsx("input",{ref:we,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:m,className:"hidden"}),v?p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800/50 border border-purple-500/30 rounded-lg px-3 py-2",children:[p.jsx(Lo,{size:14,className:"text-purple-400 shrink-0"}),p.jsx("span",{className:"text-xs text-purple-300 font-medium truncate flex-1",children:v}),p.jsx("button",{onClick:()=>{be("fontFamily","CustomFont")},className:`text-[10px] px-2 py-1 rounded transition-colors ${n.fontFamily==="CustomFont"?"bg-purple-600 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:n.fontFamily==="CustomFont"?"Active":"Use"}),p.jsx("button",{onClick:x,className:"p-1 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove custom font",children:p.jsx(fr,{size:14})})]}):p.jsxs("button",{onClick:()=>we.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/50 border border-dashed border-white/10 hover:border-purple-500/50 rounded-lg px-3 py-2.5 text-zinc-400 hover:text-purple-300 transition-colors",children:[p.jsx(Po,{size:14}),p.jsx("span",{className:"text-xs",children:"Upload Custom Font (.ttf, .otf, .woff2)"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Font Size"}),p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[(n.fontSizeScale*100).toFixed(0),"%"]})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-zinc-800 border border-white/10 rounded-lg px-2 py-1.5",children:[p.jsx("span",{className:"text-zinc-500",children:p.jsx(Lo,{size:12})}),p.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.fontSizeScale,onChange:R=>be("fontSizeScale",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"}),p.jsx("span",{className:"text-zinc-300",children:p.jsx(Lo,{size:16})})]})]}),n.fontFamily!=="sans-serif"&&n.fontFamily!=="CustomFont"&&p.jsx("div",{className:"text-[10px] text-zinc-500 bg-zinc-800/30 p-2 rounded border border-white/5",children:"Some presets like Gothic, Metal, or Tech use specific fonts. Changing Font Family here might override that look."}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Color"}),p.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/30 p-2 rounded-lg border border-white/5",children:[p.jsx("input",{type:"color",value:n.fontColor,onChange:R=>be("fontColor",R.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none shrink-0"}),p.jsx("input",{type:"text",value:n.fontColor,onChange:R=>be("fontColor",R.target.value),className:"bg-transparent border-b border-zinc-700 text-xs text-zinc-300 font-mono flex-1 focus:outline-none focus:border-purple-500 uppercase py-1"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Effect"}),p.jsx(yi,{value:n.textEffect,onChange:R=>be("textEffect",R),groups:qm})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Text Animation"}),p.jsx(yi,{value:n.textAnimation,onChange:R=>be("textAnimation",R),groups:jm})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Transition"}),p.jsx(yi,{value:n.transitionEffect,onChange:R=>be("transitionEffect",R),groups:$m})]}),p.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Visual Transition (Images/Video)"}),n.visualTransitionDuration&&p.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono",children:[n.visualTransitionDuration.toFixed(1),"s"]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("div",{className:"flex-1",children:p.jsx(yi,{value:n.visualTransitionType||"none",onChange:R=>be("visualTransitionType",R),groups:Ym})}),n.visualTransitionType&&n.visualTransitionType!=="none"&&p.jsx("div",{className:"w-1/3 flex items-center bg-zinc-800 border border-white/10 rounded-lg px-2",children:p.jsx("input",{type:"range",min:"0.1",max:"5.0",step:"0.1",value:n.visualTransitionDuration||1,onChange:R=>be("visualTransitionDuration",parseFloat(R.target.value)),className:"w-full h-1 bg-zinc-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-purple-400 transition-all"})})]})]}),p.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-3",children:[p.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[p.jsx(qs,{size:14})," Output Settings"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Resolution"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>T("720p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="720p"?"bg-zinc-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"720p"}),p.jsx("button",{onClick:()=>T("1080p"),className:`flex-1 py-1 px-2 rounded-md text-[10px] font-bold transition-all ${S==="1080p"?"bg-purple-600 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:"1080p"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"FPS"}),p.jsx(yi,{value:String(Ge),onChange:R=>ke(parseInt(R)),groups:DA})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Aspect Ratio"}),p.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","9:16","1:1","4:5","3:4","4:3","2:3","3:2","1:2","2:1","20:9","21:9"].map(R=>p.jsx("button",{onClick:()=>N(R),className:`py-1.5 rounded-md text-[10px] font-mono transition-all border ${A===R?"bg-purple-600 border-purple-500 text-white":"bg-zinc-800 border-white/5 text-zinc-500 hover:bg-zinc-700 hover:text-zinc-300"}`,children:R},R))})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Video Codec"}),p.jsx(yi,{value:O,onChange:R=>F(R),groups:[{label:"Format",options:[{label:"Auto Select (Best)",value:"auto"},...J]}]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:"Render Quality (Bitrate)"}),p.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[p.jsx("button",{onClick:()=>fe("low"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${ue==="low"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Low"}),p.jsx("button",{onClick:()=>fe("med"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${ue==="med"?"bg-zinc-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"Medium"}),p.jsx("button",{onClick:()=>fe("high"),className:`flex-1 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${ue==="high"?"bg-purple-600 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:"High"})]})]})]}),p.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-2",children:[p.jsxs("p",{className:"text-[10px] text-zinc-500 italic leading-relaxed",children:[p.jsx("span",{className:"text-purple-400 font-bold",children:"*Tip:"})," You can backup your current configuration using the ",p.jsx("span",{className:"text-zinc-300",children:"Export"})," button above."]}),p.jsxs("button",{onClick:()=>At(!0),className:"w-full flex items-center justify-center gap-2 bg-zinc-800/30 border border-white/5 hover:bg-zinc-800 hover:border-white/20 text-xs text-zinc-400 hover:text-white py-2 rounded-lg transition-all",children:[p.jsx(lh,{size:14})," View Keyboard Shortcuts"]})]})]}),St&&p.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in cursor-default",onClick:()=>At(!1),children:p.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-xl shadow-2xl w-[480px] max-w-[90vw] overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-5",onClick:R=>R.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-zinc-800/50",children:[p.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[p.jsx(lh,{size:18,className:"text-purple-400"}),"Keyboard Shortcuts"]}),p.jsx("button",{onClick:()=>At(!1),className:"p-1.5 hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:p.jsx(vi,{size:18})})]}),p.jsxs("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Media Controls"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Play / Pause"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Space"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Stop"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"S"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Next Song"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"N"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Prev Song"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"B"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Repeat Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"R"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Mute / Unmute"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"M"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"View & Appearance"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Fullscreen"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"F"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Playlist Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"L"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Timeline / Edit"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"T"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Info"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"I"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Player"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"P"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Auto-Hide HUD"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"H"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Minimal Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"O"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Lyric Display Mode"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"G"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Text Case"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"C"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Render Settings"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"D"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Visual Effects"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Toggle Highlight On/Off"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"X"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Cycle Next Highlight Effect"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Z"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Adjustment & Export"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Cycle Presets"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"J"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Font Size"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"+ / -"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Seek +/- 5s"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Arrows"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-zinc-300",children:"Scroll Lyrics"})," ",p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-400 font-mono text-[10px] border border-white/10",children:"Up/Down"})]}),p.jsxs("div",{className:"flex justify-between col-span-2 items-center bg-purple-900/20 p-2 rounded-lg border border-purple-500/20",children:[p.jsx("span",{className:"text-purple-300 font-medium",children:"Quick Export"}),p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Ctrl"}),p.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"Shift"}),p.jsx("span",{className:"text-zinc-500 text-[10px]",children:"+"}),p.jsx("kbd",{className:"bg-zinc-800 px-1.5 py-0.5 rounded text-zinc-300 font-mono text-[10px] border border-white/10",children:"E"})]})]})]})]})]}),p.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 text-center",children:p.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Press ",p.jsx("kbd",{className:"font-mono text-zinc-400",children:"Esc"})," to close"]})})]})})]}),p.jsxs("div",{className:"p-4 border-t border-white/10 bg-zinc-900/50 space-y-3",children:[p.jsxs("button",{onClick:y,className:"w-full py-2.5 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-bold text-sm shadow-lg shadow-purple-500/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[p.jsx(qs,{size:16})," Start Render"]}),p.jsx("p",{className:"text-[10px] text-zinc-500 text-center leading-relaxed italic",children:"These settings will be applied to the final video. Ensure all sources are loaded correctly."})]})]})},VA=(n,t,o,s,r,d,h,y,v,m,x,S,T,A,N,O=!0,F=!0)=>{const J=_=>{const P=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return P?{r:parseInt(P[1],16),g:parseInt(P[2],16),b:parseInt(P[3],16)}:{r:255,g:255,b:255}},ue=_=>{let P=0,ie=0;if(_ instanceof ImageBitmap?(P=_.width,ie=_.height):_ instanceof HTMLVideoElement?(P=_.videoWidth,ie=_.videoHeight):(P=_.width,ie=_.height),P&&ie){const le=Math.max(t/P,o/ie),Ie=t/2-P/2*le,Ce=o/2-ie/2*le;n.drawImage(_,Ie,Ce,P*le,ie*le)}},fe=(_,P,ie)=>{if(P.includes(`
`))return P.split(`
`).flatMap(Ne=>fe(_,Ne,ie));const le=P.split(" ");let Ie=[],Ce=le[0]||"";for(let Ne=1;Ne<le.length;Ne++){const he=le[Ne],L=Ce+" "+he;_.measureText(L).width<ie?Ce=L:(Ie.push(Ce),Ce=he)}Ie.push(Ce);const Te=[];for(const Ne of Ie)if(_.measureText(Ne).width<=ie)Te.push(Ne);else{let he="";for(const L of Ne)_.measureText(he+L).width<=ie?he+=L:(he&&Te.push(he),he=L);he&&Te.push(he)}return Te},Ge=(_,P,ie,le,Ie,Ce)=>{if(Ie==="vhs"&&_ instanceof CanvasRenderingContext2D)_.save(),_.globalCompositeOperation="screen",_.fillStyle="#ff0000",_.fillText(P,ie-2,le),_.fillStyle="#00ff00",_.fillText(P,ie,le),_.fillStyle="#0000ff",_.fillText(P,ie+2,le),_.restore();else if(Ie==="3d"){const Te=_.fillStyle;_.fillStyle="rgba(0,0,0,0.5)";for(let Ne=1;Ne<=4;Ne++)_.fillText(P,ie+Ne,le+Ne);_.fillStyle=Te,_.fillText(P,ie,le)}else if(Ie==="neon"){const Te=_.fillStyle;_.shadowColor=Te,_.shadowBlur=20,_.fillText(P,ie,le),_.shadowBlur=40,_.fillText(P,ie,le)}else if(Ie==="outline")_.strokeText(P,ie,le),_.fillText(P,ie,le);else if(Ie==="gradient"){const Te=_.createLinearGradient(ie,le-20,ie,le+20);Te.addColorStop(0,_.fillStyle),Te.addColorStop(1,"#ffffff"),_.fillStyle=Te,_.fillText(P,ie,le)}else if(Ie==="fire")_.save(),_.shadowBlur=5,_.shadowColor="#ff0000",_.fillStyle="#ff4500",_.fillText(P,ie,le),_.shadowBlur=2,_.shadowColor="#ffff00",_.fillStyle="#ffcc00",_.fillText(P,ie+1,le-1),_.restore();else if(Ie==="emboss")_.fillStyle="rgba(255,255,255,0.7)",_.fillText(P,ie-1,le-1),_.fillStyle="rgba(0,0,0,0.7)",_.fillText(P,ie+1,le+1),_.fillStyle="rgba(128,128,128,0.5)",_.fillText(P,ie,le);else if(Ie==="mirror")_.fillText(P,ie,le),_.save(),_.translate(ie,le),_.scale(1,-1),_.translate(-ie,-le),_.globalAlpha*=.2,_.fillText(P,ie,le-40),_.restore();else if(Ie==="neon-multi")_.fillStyle,_.shadowBlur=10,_.shadowColor="#fff",_.fillText(P,ie,le),_.shadowBlur=20,_.shadowColor="#ff00de",_.fillText(P,ie,le),_.shadowBlur=35,_.shadowColor="#00ffff",_.fillText(P,ie,le);else if(Ie==="gold"){const Te=_.createLinearGradient(ie,le-20,ie,le+20);Te.addColorStop(0,"#d4af37"),Te.addColorStop(1,"#C5A028"),_.fillStyle=Te,_.fillText(P,ie,le)}else if(Ie==="chrome"){const Te=_.createLinearGradient(ie,le-20,ie,le+20);Te.addColorStop(0,"#ebebeb"),Te.addColorStop(.5,"#616161"),Te.addColorStop(.51,"#ebebeb"),Te.addColorStop(1,"#ebebeb"),_.fillStyle=Te,_.fillText(P,ie,le)}else if(Ie==="frozen")_.shadowColor="#03A9F4",_.shadowBlur=20,_.fillStyle="#ffffff",_.fillText(P,ie,le);else if(Ie==="rainbow"){const Te=_.createLinearGradient(ie-100,le,ie+100,le);Te.addColorStop(0,"violet"),Te.addColorStop(.16,"indigo"),Te.addColorStop(.32,"blue"),Te.addColorStop(.48,"green"),Te.addColorStop(.64,"yellow"),Te.addColorStop(.8,"orange"),Te.addColorStop(1,"red"),_.fillStyle=Te,_.fillText(P,ie,le)}else Ie==="retro"?(_.fillStyle="#ff00ff",_.shadowColor="#00ffff",_.shadowBlur=0,_.shadowOffsetX=4,_.shadowOffsetY=4,_.fillText(P,ie,le)):Ie==="hologram"?(_.fillStyle="rgba(0, 255, 255, 0.7)",_.shadowColor="rgba(0,255,255,0.5)",_.shadowBlur=10,_.fillText(P,ie,le)):(Ie==="comic"&&(_.lineWidth=3,_.strokeStyle="#000000",_.strokeText(P,ie,le),_.fillStyle="#ffcc00"),_.fillText(P,ie,le));if(Ce&&Ce!=="none"){const Ne=_.measureText(P).width;let he=ie;if(_.textAlign==="center"?he=ie-Ne/2:_.textAlign==="right"&&(he=ie-Ne),_.save(),_.beginPath(),_.lineWidth=Math.max(2,4*de),_.strokeStyle=_.fillStyle,Ce.includes("line-through")&&(_.moveTo(he,le),_.lineTo(he+Ne,le)),Ce.includes("underline")){const L=_.font.match(/(\d+(\.\d+)?)px/),_e=L?parseFloat(L[1]):50,Fe=le+_e*.4;_.moveTo(he,Fe),_.lineTo(he+Ne,Fe)}_.stroke(),_.restore()}},ke=(_,P,ie,le,Ie,Ce,Te,Ne,he,L,_e,Fe,Be)=>{const Ye=Ne?.textCase||"none",H=(re,K)=>{if(!re)return re;if(Ye==="upper")return re.toUpperCase();if(Ye==="lower")return re.toLowerCase();if(Ye==="title")return re.replace(/\w\S*/g,ze=>ze.charAt(0).toUpperCase()+ze.substr(1).toLowerCase());if(Ye==="sentence"){const ze=re.toLowerCase();return K?ze.charAt(0).toUpperCase()+ze.slice(1):ze}return Ye==="invert"?re.replace(/\w\S*/g,ze=>ze.charAt(0).toLowerCase()+ze.slice(1).toUpperCase()):re};let ae=P.words||[];ae.length===0&&(ae=P.text.split(" ").map(K=>({text:K,startTime:P.time,endTime:P.endTime||P.time+3})));const pe=ae.filter(re=>re.text.trim().length>0).map((re,K)=>({...re,text:H(re.text,K===0).trim()}));_.font=`${Fe} ${_e} ${L}px ${he}`;const Ae=[];let ve=[],ge=0,w=.3;["default","custom"].includes(m)?w=.25:m==="monospace"&&(w=.5);const C=_.measureText("M").width*w;pe.forEach((re,K)=>{const ze=_.measureText(re.text).width;let et=!re.text.endsWith(" ");const De=/[-]$/,Et=/^[-]/;De.test(re.text.trim())&&(et=!1);const _t=pe[K+1];_t&&Et.test(_t.text.trim())&&(et=!1);const Yt=et?C:0;ge+ze>Ie&&ve.length>0&&(Ae.push(ve),ve=[],ge=0),ve.push(re),ge+=ze+Yt}),ve.length>0&&Ae.push(ve);const G=le-(Ae.length-1)*Ce/2;let M=Ne.highlightColor||"#fb923c",Z=Ne.highlightBackground||"#ffffff";const z=Ne.highlightEffect||"none";Ne.useCustomHighlightColors||(z.includes("blue")||z.includes("cyan")?(M="#3b82f6",Z="#3b82f6"):z.includes("purple")?(M="#a855f7",Z="#a855f7"):z.includes("green")?(M="#22c55e",Z="#22c55e"):z.includes("pink")?(M="#ec4899",Z="#ec4899"):z.includes("neon")?(M="#ffffff",Z="#ffffff"):z.includes("gold")?(M="#FFD700",Z="#B8860B"):z.includes("chrome")?(M="#E0E0E0",Z="#757575"):z.includes("fire")?(M="#FF4500",Z="#FF0000"):z.includes("glass")?(M="#ffffff",Z="rgba(255,255,255,0.1)"):z==="karaoke"&&(M="#fb923c",Z="#fb923c"));let oe=Ne.fontColor||"#ffffff";Ae.forEach((re,K)=>{const ze=G+K*Ce;let je=0;re.forEach((De,Et)=>{if(je+=_.measureText(De.text).width,Et<re.length-1){let Yt=!De.text.endsWith(" ");const nn=/[-]$/,lt=/^[-]/;nn.test(De.text.trim())&&(Yt=!1);const Me=re[Et+1];Me&&lt.test(Me.text.trim())&&(Yt=!1),je+=Yt?C:0}});let et=ie;_.textAlign==="center"?et=ie-je/2:_.textAlign==="right"&&(et=ie-je),_.save(),_.textAlign="left",_.textBaseline="middle",re.forEach((De,Et)=>{const _t=_.measureText(De.text).width,Yt=Te>=De.startTime,nn=Te>=De.startTime&&Te<De.endTime;let lt=oe;const Me=z.includes("fill")||z==="karaoke-smooth",ut=Me?Yt:nn;if(ut&&z!=="none")if(z==="karaoke-smooth")if(nn){const tt=De.endTime-De.startTime,wt=Te-De.startTime,kt=Math.max(0,Math.min(1,wt/tt)),Qn=_.createLinearGradient(et,0,et+_t,0);Qn.addColorStop(kt,M),Qn.addColorStop(Math.min(1,kt+.001),oe),lt=Qn}else lt=M;else lt=M;if(_.save(),_.fillStyle=lt,(nn||Me&&Yt)&&(z.includes("pill")||z.includes("box")||z.includes("rounded")||z.includes("fill")||z.includes("glass"))&&ut){const tt=z.includes("pill")?L*.4:L*.15;_.fillStyle=Z;let wt=4*Be;z.includes("pill")?wt=999:z.includes("rounded")||z.includes("glass")?wt=8*Be:z.includes("box")&&(wt=0),z.includes("glass")&&(_.fillStyle="rgba(255,255,255,0.1)",_.shadowColor="rgba(255,255,255,0.2)",_.shadowBlur=10),_.beginPath(),_.roundRect?_.roundRect(et-tt,ze-Ce/2,_t+tt*2,Ce,wt):_.rect(et-tt,ze-Ce/2,_t+tt*2,Ce),_.fill(),z.includes("glass")&&(_.strokeStyle="rgba(255,255,255,0.3)",_.lineWidth=1,_.stroke()),z.includes("fill")||z.includes("pill")||z.includes("box")||z.includes("rounded")?(_.fillStyle="#000000",lt="#000000"):_.fillStyle=M}if(ut){if(z.includes("underline")){const tt=Math.max(2,L*.08),wt=ze+L*.6;_.fillStyle=M,_.fillRect(et,wt,_t,tt),_.fillStyle=lt}if((z.includes("glow")||z.includes("neon"))&&(z.includes("neon")?(_.fillStyle="#ffffff",_.shadowColor=M,_.shadowBlur=20):(_.shadowColor=M,_.shadowBlur=10)),z.includes("outline")&&(_.strokeStyle=M,_.lineWidth=2*Be,_.strokeText(De.text,et,ze),_.fillStyle="transparent",z==="karaoke-outline"&&(lt="transparent",_.fillStyle="transparent")),z.includes("shadow")&&(_.shadowColor="#000000",_.shadowOffsetX=3*Be,_.shadowOffsetY=3*Be,_.shadowBlur=0),z.includes("gradient")){const tt=_.createLinearGradient(et,ze-Ce/2,et+_t,ze+Ce/2);tt.addColorStop(0,M),tt.addColorStop(1,Z),_.fillStyle=tt,lt=tt}}let st=ze,He=et,Nt=0,dt=1,ct=1,Lt=1,Wt=0;if(ut){const tt=Te-De.startTime;if(z.includes("bounce")||z==="karaoke-bounce")st-=10*Be;else if(z.includes("wave"))st+=Math.sin(Te*5+Et)*8*Be;else if(z.includes("pulse")){const kt=1+Math.sin(Te*6)*.1;dt=kt,ct=kt}else if(z.includes("shake"))He+=(Math.random()-.5)*6*Be,st+=(Math.random()-.5)*6*Be;else if(z.includes("wobble"))Nt=Math.sin(Te*6)*.1;else if(z.includes("rotate")&&!z.includes("in"))Nt=Math.sin(Te*3)*.1;else if(z.includes("spin"))Nt=Te*3%(Math.PI*2);else if(z.includes("jello"))dt=1+Math.sin(Te*8)*.15,ct=1-Math.sin(Te*8)*.15;else if(z.includes("heartbeat")){const kt=Te*2%1;(kt<.15||kt>.3&&kt<.45)&&(dt=1.15,ct=1.15)}else if(z.includes("flash"))Lt=.5+Math.sin(Te*10)*.5;else if(z.includes("tada")){const kt=Te*2%1;kt<.1?(Nt=-.05,dt=.9):kt<.2&&(Nt=.05,dt=1.1)}else z.includes("swing")?Nt=Math.sin(Te*4)*.15:z.includes("glitch")&&Math.sin(Te*15)>.8&&(He+=(Math.random()-.5)*10,st+=(Math.random()-.5)*10);const wt=.3;if(tt<wt){const kt=tt/wt,Ot=(qn=>1-Math.pow(1-qn,3))(kt);if(z.includes("fade"))Lt=kt;else if(z.includes("slide"))st+=(1-Ot)*30*Be,Lt=Ot;else if(z.includes("drop"))st-=(1-Ot)*50*Be,Lt=Ot;else if(z.includes("zoom")||z.includes("scale")){const qn=.5+.5*Ot;dt*=qn,ct*=qn}else if(z.includes("elastic")){const qn=kt===0?0:kt===1?1:Math.pow(2,-10*kt)*Math.sin((kt*10-.75)*(2*Math.PI)/3)+1;dt*=qn,ct*=qn}else if(z.includes("flip"))ct*=Ot;else if(z.includes("rotate-in"))Nt+=(1-Ot)*-1,Lt=Ot;else if(z.includes("roll"))He-=(1-Ot)*50*Be,Nt-=(1-Ot)*Math.PI,Lt=Ot;else if(z.includes("lightspeed"))He+=(1-Ot)*100*Be,Lt=Ot;else if(z.includes("blur"))Wt=(1-Ot)*10,Lt=Ot;else if(z.includes("shatter")){const qn=1+(1-Ot)*2;dt*=qn,ct*=qn,Wt=(1-Ot)*10,Lt=Ot}else z.includes("spiral")&&(dt*=Ot,ct*=Ot,Nt+=(1-Ot)*Math.PI*2)}else z.includes("scale")&&(dt*=1.3,ct*=1.3)}if(_.save(),Lt<1&&(_.globalAlpha*=Lt),Wt>0&&(_.filter=`blur(${Wt}px)`),Nt!==0||dt!==1||ct!==1){const tt=He+_t/2,wt=st;_.translate(tt,wt),_.rotate(Nt),_.scale(dt,ct),_.translate(-tt,-wt)}if(ut){if(z.includes("gradient")||z.includes("chrome")||z.includes("gold")){const tt=_.createLinearGradient(He,st-Ce/2,He,st+Ce/2);z.includes("gold")?(tt.addColorStop(0,"#d4af37"),tt.addColorStop(1,"#C5A028")):z.includes("chrome")?(tt.addColorStop(0,"#ebebeb"),tt.addColorStop(.5,"#616161"),tt.addColorStop(.51,"#ebebeb"),tt.addColorStop(1,"#ebebeb")):(tt.addColorStop(0,M),tt.addColorStop(1,Z)),_.fillStyle=tt}if(z.includes("shadow")&&(_.save(),_.fillStyle="#000000",_.fillText(De.text,He+2*Be,st+2*Be),_.restore()),z.includes("3d")){const tt=_.fillStyle;_.fillStyle="rgba(0,0,0,0.5)";for(let wt=1;wt<=3;wt++)_.fillText(De.text,He+wt*Be,st+wt*Be);_.fillStyle=tt}if(z.includes("neon-multi"))_.shadowBlur=10,_.shadowColor="#fff",_.fillText(De.text,He,st),_.shadowBlur=20,_.shadowColor="#ff00de",_.fillText(De.text,He,st),_.shadowBlur=35,_.shadowColor="#00ffff",_.fillText(De.text,He,st);else if(z.includes("retro")||z.includes("vhs"))_.fillStyle="#ff0000",_.globalCompositeOperation="screen",_.fillText(De.text,He-2,st),_.fillStyle="#00ff00",_.fillText(De.text,He,st),_.fillStyle="#0000ff",_.fillText(De.text,He+2,st);else if(z.includes("fire"))_.shadowBlur=5,_.shadowColor="#ff0000",_.fillStyle="#ff4500",_.fillText(De.text,He,st),_.shadowBlur=2,_.shadowColor="#ffff00",_.fillStyle="#ffcc00",_.fillText(De.text,He+1*Be,st-1*Be);else if(z.includes("typewriter")){const tt=Te-De.startTime,wt=De.endTime-De.startTime,kt=Math.min(1,Math.max(0,tt/wt)),Qn=Math.floor(De.text.length*kt),Ot=De.text.substring(0,Qn);z.includes("outline")?(_.strokeStyle=M,_.strokeText(Ot,He,st)):_.fillText(Ot,He,st)}else!z.includes("neon-multi")&&!z.includes("retro")&&!z.includes("vhs")&&!z.includes("fire")&&(z.includes("outline")?(_.strokeStyle=M,_.lineWidth=2*Be,_.strokeText(De.text,He,st)):_.fillText(De.text,He,st))}else _.fillText(De.text,He,st);const On=Ne?.textDecoration||"none";if(On!=="none"){if(_.lineWidth=Math.max(2,3*Be),_.strokeStyle=lt,_.beginPath(),On.includes("underline")&&!z.includes("underline")){const tt=st+L*.45;_.moveTo(He,tt),_.lineTo(He+_t,tt)}On.includes("line-through")&&(_.moveTo(He,st),_.lineTo(He+_t,st)),_.stroke()}_.restore(),_.restore();let Si=!De.text.endsWith(" ");const Hi=/[-]$/,Ti=/^[-]/;Hi.test(De.text.trim())&&(Si=!1);const En=re[Et+1];En&&Ti.test(En.text.trim())&&(Si=!1),et+=_t+(Si?C:0)}),_.restore()})},Ve=(_,P,ie,le,Ie,Ce,Te,Ne)=>{const he=fe(_,P,Ie),L=le-(he.length-1)*Ce/2;he.forEach((_e,Fe)=>{const Be=L+Fe*Ce;if(Te==="glass"){const Ye=_.measureText(_e).width;_.save(),_.fillStyle="rgba(255, 255, 255, 0.1)",_.beginPath(),_.roundRect?_.roundRect(ie-(_.textAlign==="center"?Ye/2:_.textAlign==="right"?Ye:0)-10,Be-Ce/2,Ye+20,Ce,8):_.rect(ie-(_.textAlign==="center"?Ye/2:_.textAlign==="right"?Ye:0)-10,Be-Ce/2,Ye+20,Ce),_.fill(),_.strokeStyle="rgba(255, 255, 255, 0.2)",_.stroke(),_.restore()}Ge(_,_e,ie,Be,Te,Ne)})},Se='ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',nt='ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',we='ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',Qe='"Metal Mania", cursive',Ue='"Fredoka One", cursive',ft='"Shadows Into Light", cursive',St='"Dancing Script", cursive',At='"Orbitron", sans-serif',be='"UnifrakturMaguntia", cursive';let B=Se;m==="classic"?B=nt:m==="monospace"?B=we:m==="metal"?B=Qe:m==="kids"?B=Ue:m==="sad"?B=ft:m==="romantic"?B=St:m==="tech"?B=At:m==="gothic"?B=be:m==="custom"&&(B=N?.fontFamily||Se),x&&(B="CustomFont, sans-serif"),N&&N.fontFamily!=="sans-serif"&&(B=N.fontFamily);const xe=t<=o,de=Math.min(t,o)/1080;if(N&&(N.backgroundSource==="color"||N.backgroundSource==="smart-gradient")?n.fillStyle=N.backgroundColor||"#000000":n.fillStyle="#000000",n.fillRect(0,0,t,o),N?.backgroundSource==="gradient"&&N.backgroundGradient)n.fillStyle=N.backgroundGradient,n.fillRect(0,0,t,o);else if(N?.backgroundSource==="smart-gradient"){const _=N.backgroundColor||"#312e81",P=J(_),ie=n.createLinearGradient(0,0,t,o);ie.addColorStop(0,_),ie.addColorStop(.5,`rgb(${Math.floor(P.r*.6)}, ${Math.floor(P.g*.6)}, ${Math.floor(P.b*.6)})`),ie.addColorStop(1,"#000000"),n.fillStyle=ie,n.fillRect(0,0,t,o)}else if(N?.backgroundSource==="image"&&N.backgroundImage){const _=y.get("__custom_bg__");_&&ue(_)}if(N&&N.backgroundBlurStrength>0?n.filter=`blur(${N.backgroundBlurStrength}px)`:T&&(n.filter="blur(12px)"),!N||N.backgroundSource==="timeline"||N.backgroundSource==="custom"){const _=N?N.backgroundSource==="timeline":!0;let P=!1;if(_){const ie=N?.visualTransitionType||"none",le=N?.visualTransitionDuration||1,Ie=h.filter(Ce=>Ce.type==="audio"?!1:s>=Ce.startTime&&s<Ce.endTime||ie==="crossfade"&&s>=Ce.endTime&&s<Ce.endTime+le);Ie.sort((Ce,Te)=>{const Ne=(Ce.layer||0)-(Te.layer||0);return Ne!==0?Ne:Ce.startTime-Te.startTime}),Ie.length>0&&(Ie.forEach(Ce=>{const Te=Ce.layer||0;if(N&&N.layerVisibility?.visual?.[Te]===!1)return;const Ne=Ce.type==="video"?v.get(Ce.id):null,he=Ce.type!=="video"?y.get(Ce.id):null;let L=1;if(ie!=="none"){if(s<Ce.startTime+le){const _e=(s-Ce.startTime)/le;L=Math.max(0,Math.min(1,_e))}if(s>=Ce.endTime){let _e=!1;if(ie==="crossfade"&&(_e=h.some(Fe=>Fe.id!==Ce.id&&(Fe.layer||0)===(Ce.layer||0)&&Fe.startTime>=Ce.endTime-.1&&Fe.startTime<Ce.endTime+.2)),!_e){const Be=1-(s-Ce.endTime)/le;L=Math.min(L,Math.max(0,Math.min(1,Be)))}}else if(ie==="fade-to-black"&&s>Ce.endTime-le){const _e=(Ce.endTime-s)/le;L=Math.min(L,Math.max(0,Math.min(1,_e)))}}L>0&&(n.save(),n.globalAlpha=L,Ne?ue(Ne):he&&ue(he),n.restore())}),P=!0)}if(!P&&d.coverUrl&&h.length===0){const ie=d.backgroundType==="video"?v.get("background"):null,le=y.get("cover");ie?ue(ie):le&&ue(le)}}if((N&&N.backgroundBlurStrength>0||T)&&(n.filter="none"),["just_video","none"].includes(m)||(n.fillStyle=N&&(N.backgroundSource==="color"||N.backgroundSource==="gradient")?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.5)",n.fillRect(0,0,t,o)),N?.enableGradientOverlay){const _=n.createLinearGradient(0,o,0,0);_.addColorStop(0,"rgba(0, 0, 0, 0.95)"),_.addColorStop(.35,"rgba(0, 0, 0, 0.6)"),_.addColorStop(.7,"rgba(0, 0, 0, 0)"),n.fillStyle=_,n.fillRect(0,0,t,o)}if(m==="just_video"||m==="none")return;const ht=r.findIndex((_,P)=>{if(_.endTime!==void 0)return s>=_.time&&s<_.endTime;const ie=r[P+1];return s>=_.time&&(!ie||s<ie.time)});let mt=ht;if(mt===-1&&r.length>0)if(s<r[0].time)mt=0;else{const _=r.findIndex(P=>P.time>s);mt=_!==-1?_:r.length-1}const D=N?.introMode==="manual"&&N.introText?N.introText:`${d.title}
${d.artist}`;let R=ht===-1&&s<5&&(N?.showIntro??!0)&&(N?.introMode!=="manual"||F)&&(r.length===0||s<r[0].time),ne=(xe?50:60)*de,Ee=(xe?25:30)*de,Ke=(xe?80:100)*de;if(m==="large"?(ne=(xe?90:120)*de,Ke=(xe?110:140)*de):["large_upper","big_center","metal","kids","tech","testing","testing_up","one_line","one_line_up","custom"].includes(m)?(ne=(xe?80:110)*de,Ke=(xe?110:140)*de):["sad","romantic","gothic"].includes(m)?(ne=(xe?60:75)*de,Ke=(xe?90:120)*de):["slideshow","subtitle"].includes(m)&&(ne=(xe?30:40)*de),ne*=S,Ee*=S,Ke*=S,(N?.showLyrics??!0)&&(ht!==-1||R||N?.lyricDisplayMode==="all"&&r.length>0)){let _=o/2;N?.contentPosition==="top"?_=o*.25:N?.contentPosition==="bottom"&&(_=o*.75);let P=0;const ie=["large","large_upper","big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","custom"].includes(m);if(ie||m==="slideshow"||m==="subtitle"){const Ne=R?{text:D}:r[ht]||r[mt];if(Ne){n.font=`900 ${ne}px ${B}`;const he=["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)?Ne.text.toUpperCase():Ne.text,L=fe(n,he,t*.9);L.length>1&&(P=(L.length-1)*(ne*1.2)/2)}}let le=ie?-1:-2,Ie=ie?1:2;N?.lyricDisplayMode==="active-only"?(le=0,Ie=0):N?.lyricDisplayMode==="next-only"?(le=0,Ie=1):N?.lyricDisplayMode==="previous-next"?(le=-1,Ie=1):N?.lyricDisplayMode==="all"&&(le=-r.length,Ie=r.length);const Ce=new Map,Te=new Map;{const Ne=Math.max((xe?30:40)*de,Ke-ne);for(let he=le;he<=Ie;he++){let L=0,_e=!1;if(R&&he===0){const Fe=ne*1.2,Be=Ee*1.2,H=D.split(`
`).length>1;L=Fe+(H?Be:0),_e=!0}else{const Fe=mt+he;if(Fe>=0&&Fe<r.length){const Be=r[Fe];_e=Fe===ht;const Ye=_e?ne:Ee;let H=_e?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",ae=["classic","romantic"].includes(m)?"italic":"normal";m==="custom"&&((N?.lyricStyleTarget||"active-only")==="all"||_e?(N?.fontWeight&&(H=N.fontWeight),N?.fontStyle&&(ae=N.fontStyle)):(H="400",ae="normal")),n.font=`${ae} ${H} ${Ye}px ${B}`;let pe=Be.text,Ae=N?.textCase||"none";Ae==="none"&&_e&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(Ae="upper"),Ae==="upper"?pe=pe.toUpperCase():Ae==="lower"?pe=pe.toLowerCase():Ae==="title"?pe=pe.replace(/\w\S*/g,ge=>ge.charAt(0).toUpperCase()+ge.substr(1).toLowerCase()):Ae==="sentence"?pe=pe.charAt(0).toUpperCase()+pe.slice(1).toLowerCase():Ae==="invert"&&(pe=pe.replace(/\w\S*/g,ge=>ge.charAt(0).toLowerCase()+ge.slice(1).toUpperCase())),L=fe(n,pe,t*.9).length*(Ye*1.2)}}Te.set(he,L)}Ce.set(0,_);for(let he=1;he<=Ie;he++){const L=Ce.get(he-1)??_,_e=Te.get(he-1)??0,Fe=Te.get(he)??0;Ce.set(he,L+_e/2+Ne+Fe/2)}for(let he=-1;he>=le;he--){const L=Ce.get(he+1)??_,_e=Te.get(he+1)??0,Fe=Te.get(he)??0;Ce.set(he,L-_e/2-Ne-Fe/2)}}for(let Ne=le;Ne<=Ie;Ne++){let he=null,L=!1;if(R)Ne===0&&(he={time:0,text:D},L=!0);else{const _e=mt+Ne;_e>=0&&_e<r.length&&(he=r[_e],L=_e===ht)}if(he){N?.lyricDisplayMode,n.textAlign=N?.textAlign||(["large","large_upper"].includes(m)?"left":"center"),n.textBaseline="middle";const _e=N?.fontColor||"#ffffff";let Fe=_e;if(!L){const Me=J(_e);Fe=`rgba(${Me.r}, ${Me.g}, ${Me.b}, 0.5)`}let Be=L?["large","large_upper","big_center","metal","tech"].includes(m)?"900":"bold":"400",Ye=["classic","romantic"].includes(m)?"italic":"normal",H="none";(m==="custom"||m==="default")&&((N?.lyricStyleTarget||"active-only")==="all"||L?(N?.fontWeight&&(Be=N.fontWeight),N?.fontStyle&&(Ye=N.fontStyle),N?.textDecoration&&(H=N.textDecoration)):(Be="400",Ye="normal",H="none")),n.font=`${Ye} ${Be} ${L?ne:Ee}px ${B}`,n.fillStyle=Fe;const ae=N?.transitionEffect||"none";let pe=1,Ae=0,ve=0,ge=1,w=1,C=0,G=0;if(L&&ae!=="none"){const Me=s-he.time,ut=he.endTime?he.endTime-s:.5,st=.5,He=Me<st?Me/st:he.endTime&&ut<st?ut/st:1;if(He<1){pe=Math.min(1,He*2);const Nt=ct=>1+2.70158*Math.pow(ct-1,3)+1.70158*Math.pow(ct-1,2),dt=ct=>{const Lt=2*Math.PI/3;return ct===0?0:ct===1?1:Math.pow(2,-10*ct)*Math.sin((ct*10-.75)*Lt)+1};if(ae==="slide")Ae=(1-He)*(Me<st?30:-30);else if(ae==="zoom"){const ct=.5+He*.5;ge=ct,w=ct}else if(ae==="blur")C=(1-He)*10;else if(ae==="float")Ae=(1-He)*(Me<st?50:-50);else if(ae==="drop")Ae=(1-Nt(He))*-200,pe=He;else if(ae==="flip")w=He;else if(ae==="rotate-in")G=(1-He)*-Math.PI/2,pe=He;else if(ae==="spiral")ge=He,w=He,G=(1-He)*Math.PI*2,pe=He;else if(ae==="shatter"){const ct=3-2*He;ge=ct,w=ct,C=(1-He)*20,pe=He}else if(ae==="lightspeed")ve=(1-He)*300,pe=He;else if(ae==="roll")ve=(1-He)*-300,G=(1-He)*-Math.PI,pe=He;else if(ae==="elastic"){const ct=dt(He);ge=ct,w=ct,pe=He}}}n.save(),n.globalAlpha=pe,C>0&&(n.filter=`blur(${C}px)`);const M=L&&N?.textAnimation||"none";let Z=he.text,z=N?.textCase||"none";z==="none"&&L&&["large_upper","big_center","metal","tech","testing_up","one_line_up"].includes(m)&&(z="upper"),z==="upper"?Z=Z.toUpperCase():z==="lower"?Z=Z.toLowerCase():z==="title"?Z=Z.replace(/\w\S*/g,Me=>Me.charAt(0).toUpperCase()+Me.substr(1).toLowerCase()):z==="sentence"?Z=Z.charAt(0).toUpperCase()+Z.slice(1).toLowerCase():z==="invert"&&(Z=Z.replace(/\w\S*/g,Me=>Me.charAt(0).toLowerCase()+Me.slice(1).toUpperCase()));let oe=0,re=0,K=1,ze=1,je=0;if(L&&M!=="none")if(M==="bounce")re=Math.sin(s*6)*15*de;else if(M==="pulse"){const Me=1+Math.sin(s*4)*.08;K=Me,ze=Me}else if(M==="wave")re=Math.sin(s*4)*20*de,je=Math.sin(s*4)*.05;else if(M==="glitch")Math.sin(s*10)>.8&&(oe=(Math.random()-.5)*15*de,re=(Math.random()-.5)*15*de);else if(M==="shake")oe=(Math.random()-.5)*5*de,re=(Math.random()-.5)*5*de;else if(M==="typewriter"){const ut=Math.floor((s-he.time)*30);Z=Z.substring(0,Math.max(0,ut))}else if(M==="wobble"){je=Math.sin(s*5)*.05;const Me=1+Math.sin(s*3)*.05;K=Me,ze=Me}else if(M==="breathe"){const Me=1+Math.sin(s*2)*.03;K=Me,ze=Me}else if(M==="rotate")je=Math.sin(s*2)*.05;else if(M==="sway")je=Math.sin(s*2)*.08;else if(M==="flicker")n.globalAlpha=pe*(.8+Math.random()*.2);else if(M==="jello")K=1+Math.sin(s*6)*.1,ze=1-Math.sin(s*6)*.1;else if(M==="spin")je=s%2*Math.PI;else if(M==="heartbeat"){const Me=s*1.5%1;(Me<.1||Me>.3&&Me<.4)&&(K=1.1,ze=1.1)}else if(M==="tada"){const Me=s*1.5%1;Me<.1?(K=.9,ze=.9,je=-.05):Me<.2?(K=1.1,ze=1.1,je=.05):(K=1,ze=1,je=0)}else M==="swing"&&(je=Math.sin(s*3)*.1);let et=0;Ce.has(Ne)?et=Ce.get(Ne)+(Ne===0?Ae:0):(et=m==="subtitle"&&Ne===0&&N?.lyricDisplayMode!=="all"?o-140*de:_+Ne*Ke+(Ne===0?Ae:0),m!=="custom"&&(Ne<0?et-=P:Ne>0&&(et+=P))),et+=re;let De=t/2;n.textAlign==="left"?De=60*de:n.textAlign==="right"&&(De=t-60*de),De+=ve+oe;const Et=ge*K,_t=w*ze,Yt=G+je;(Et!==1||_t!==1||Yt!==0)&&(n.translate(De,et),n.rotate(Yt),n.scale(Et,_t),n.translate(-De,-et));const nn=L?N?.textEffect||"preset":"none";if(R&&Ne===0&&N?.introMode!=="manual"){const Me=Z.split(`
`),ut=Me[0],st=Me.slice(1).join(`
`),He=ne*1.2,Nt=Ee*1.2,dt=20*de;let ct=et;st&&(ct=et-Nt/2-dt/2);const Lt=et+He/2+dt/2;if(n.font=`${Ye} ${Be} ${ne}px ${B}`,Ve(n,ut,De,ct,t*.9,He,nn,H),st){const Wt=m==="custom"&&N?.fontWeight?N.fontWeight:"400";n.font=`${Ye} ${Wt} ${Ee}px ${B}`,Ve(n,st,De,Lt,t*.9,Nt,nn,H)}}else{const Me=L?ne:Ee;N&&N.highlightEffect&&N.highlightEffect,L&&he?ke(n,he,De,et,t*.9,Me*1.2,s,N,B,Me,Be,Ye,de):Ve(n,Z,De,et,t*.9,Me*1.2,nn,H)}n.restore()}}}if(!["subtitle","just_video","none"].includes(m)){const _=N?N.showTitle||N.showArtist:!0,P=N?N.showCover:!0;if(_||P)if(m==="custom"||m==="default"){const ie=N?.infoPosition||"top-left",le=N?.infoStyle||"classic",Ie=le==="box",Ce=Ie?16*de:12*de,Te=40*de*(N?.infoMarginScale??1);let Ne="left",he="top";ie.includes("left")?Ne="left":ie.includes("right")?Ne="right":Ne="center",ie.includes("top")?he="top":he="bottom";const L=N?.infoSizeScale??1,_e=(le==="minimal"||le==="modern"?0:100*de)*L,Fe=P&&_e>0&&d.coverUrl!==null,Be=Fe?d.backgroundType==="video"?v.get("background"):y.get("cover"):null,Ye=(le==="minimal"?20:le==="modern"||le==="modern_art"?40:28)*de,H=(le==="minimal"?14:le==="modern"||le==="modern_art"?24:18)*de,ae=Ye*L,pe=H*L,Ae=`bold ${ae}px ${B}`,ve=`${pe}px ${B}`,ge=20*de,w=Ie?24*de:0,C=N?.fontColor||"#ffffff",G=le==="modern"||le==="modern_art"?C:N?.fontColor||"#d4d4d8";n.font=Ae;const M=n.measureText(d.title),Z=N?.showTitle?M.width:0;n.font=ve;const z=n.measureText(d.artist),oe=N?.showArtist?z.width:0;let re=0,K=0;if(Ne==="center"){re=Math.max(Fe&&Be?_e:0,Z,oe)+w*2;let Me=0;Fe&&Be&&(Me+=_e),(N?.showTitle??!0)&&(Me+=(Fe&&Be?ge:0)+ae),(N?.showArtist??!0)&&(Me+=(Fe&&Be||(N?.showTitle??!0)?5*de:0)+pe),K=Me+w*2}else{const lt=Math.max(Z,oe);re=(Fe&&Be?_e+ge:0)+lt+w*2;const ut=(N?.showTitle?ae:0)+(N?.showArtist?pe+5*de:0);K=Math.max(ut,Fe&&Be?_e:0)+w*2}let ze=0,je=0;Ne==="left"?ze=Te:Ne==="right"?ze=t-Te:ze=t/2,he==="top"?je=Te:je=o-Te;let et=0,De=0;Ne==="left"?et=ze:Ne==="right"?et=ze-re:et=ze-re/2,he==="top"?De=je:De=je-K,Ie&&(n.save(),n.fillStyle="rgba(0, 0, 0, 0.6)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=20,n.beginPath(),n.roundRect(et,De,re,K,Ce),n.fill(),n.restore());const Et=et+w,_t=De+w,Yt=re-w*2,nn=K-w*2;if(Ne==="center"){let lt=_t;const Me=Et+Yt/2;if(n.textAlign="center",he==="top"){if(Fe&&Be){n.save(),n.beginPath();const ut=Me-_e/2;le==="circle_art"?n.arc(Me,lt+_e/2,_e/2,0,Math.PI*2):n.roundRect(ut,lt,_e,_e,Ce/2),n.clip(),n.drawImage(Be,ut,lt,_e,_e),n.restore(),lt+=_e+ge}(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ae,n.textBaseline="top",n.fillText(d.title,Me,lt),lt+=ae+5*de),(N?.showArtist??!0)&&(n.fillStyle=G,n.font=ve,n.textBaseline="top",n.fillText(d.artist,Me,lt))}else{if(Fe&&Be){n.save(),n.beginPath();const ut=Me-_e/2;le==="circle_art"?n.arc(Me,lt+_e/2,_e/2,0,Math.PI*2):n.roundRect(ut,lt,_e,_e,Ce/2),n.clip(),n.drawImage(Be,ut,lt,_e,_e),n.restore(),lt+=_e+ge}(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ae,n.textBaseline="top",n.fillText(d.title,Me,lt),lt+=ae+5*de),(N?.showArtist??!0)&&(n.fillStyle=G,n.font=ve,n.textBaseline="top",n.fillText(d.artist,Me,lt))}}else{const lt=Ne==="right",Me=_t+nn/2;let ut=Et;if(lt&&(ut=Et+Yt),Fe&&Be){const Nt=Me-_e/2,dt=lt?ut-_e:ut;n.save(),n.beginPath(),le==="circle_art"?n.arc(dt+_e/2,Nt+_e/2,_e/2,0,Math.PI*2):n.roundRect(dt,Nt,_e,_e,Ce/2),n.clip(),n.drawImage(Be,dt,Nt,_e,_e),n.restore(),lt?ut-=_e+ge:ut+=_e+ge}const st=(N?.showTitle?ae:0)+(N?.showArtist?pe+5*de:0);let He=Me-st/2;n.textAlign=lt?"right":"left",n.textBaseline="top",(N?.showTitle??!0)&&(n.fillStyle=C,n.font=Ae,n.fillText(d.title,ut,He),He+=ae+5*de),(N?.showArtist??!0)&&(n.fillStyle=G,n.font=ve,n.fillText(d.artist,ut,He))}}else if(["big_center","metal","kids","sad","romantic","tech","gothic","testing","testing_up","one_line","one_line_up","slideshow","subtitle"].includes(m)){if(_){n.textAlign="center",n.textBaseline="middle";let ie=80*de;["testing","testing_up","one_line","one_line_up"].includes(m)&&(ie=120*de),(N?.showTitle??!0)&&(n.font=`bold ${20*de}px ${B}`,n.fillStyle="#ffffff",n.fillText(m==="tech"?d.title.toUpperCase():d.title,t/2,o-ie-30*de)),(N?.showArtist??!0)&&(n.font=`${16*de}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,t/2,o-ie))}}else{const ie=40*de*(N?.infoMarginScale??1),le=t===o,Ie=(xe?le?110:150:100)*de,Ce=d.coverUrl?y.get("cover"):null,Te=12*de;if(xe){const Ne=ie*(le?1.5:3),he=t/2,L=he-Ie/2,_e=Ne;if(P&&(n.save(),n.beginPath(),n.roundRect(L,_e,Ie,Ie,Te),n.clip(),Ce?n.drawImage(Ce,L,_e,Ie,Ie):(n.fillStyle="#27272a",n.fillRect(L,_e,Ie,Ie)),n.restore()),_){n.textAlign="center",n.textBaseline="top";const Fe=_e+(P?Ie+25*de:0);(N?.showTitle??!0)&&(n.font=`bold ${(le?26:36)*de}px ${B}`,n.fillStyle="#ffffff",n.fillText(d.title,he,Fe)),(N?.showArtist??!0)&&(n.font=`${(le?18:24)*de}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,he,Fe+(N?.showTitle??!0?(le?30:40)*de:0)))}}else{const Ne=ie,he=ie;if(P&&(n.save(),n.beginPath(),n.roundRect(Ne,he,Ie,Ie,Te),n.clip(),Ce?n.drawImage(Ce,Ne,he,Ie,Ie):(n.fillStyle="#27272a",n.fillRect(Ne,he,Ie,Ie)),n.restore()),_){n.textAlign="left",n.textBaseline="top";const L=Ne+(P?Ie+25*de:0),_e=28*de,Fe=he+Ie/2-_e;(N?.showTitle??!0)&&(n.font=`bold ${_e}px ${B}`,n.fillStyle="#ffffff",n.fillText(d.title,L,Fe)),(N?.showArtist??!0)&&(n.font=`${18*de}px ${B}`,n.fillStyle="#d4d4d8",n.fillText(d.artist,L,Fe+(N?.showTitle??!0?_e+5*de:0)))}}}}if(N?.showChannelInfo&&!["subtitle","just_video","none"].includes(m)){const _=N.channelInfoPosition||"bottom-right",P=N.channelInfoStyle||"classic",ie=N.channelInfoSizeScale??1,le=N.channelInfoMarginScale??1,Ie=y.get("__channel_info__"),Ce=N.channelInfoText;if(!(!Ie&&!Ce)){if(!(P==="logo"&&!Ie)){if(!(P==="minimal"&&!Ce)){n.save();const Te=40*de*le,Ne=80*de*ie,he=P==="modern"||P==="logo"?Ne*1.2:Ne,L=20*de*ie,_e=y.get("__channel_info_text_svg__"),Fe=!!_e;let Be=0,Ye=L;if(Fe&&_e){Ye=L*1.5;const Z=_e.width/_e.height;Be=Ye*Z}else n.font=`bold ${L}px sans-serif`,Ce&&P!=="logo"&&(Be=n.measureText(Ce).width);const H=12*de*ie,ae=12*de*ie,pe=8*de*ie;let Ae=0,ve=0;const ge=!!Ie&&P!=="minimal",w=!!Ce&&P!=="logo";P==="modern"?(Ae=Math.max(ge?he:0,w?Be+ae*2:0),ve=(ge?he:0)+(ge&&w?H:0)+(w?Ye+pe*2:0)):P==="box"?(Ae=(ge?he:0)+(ge&&w?H:0)+(w?Be:0)+ae*2,ve=Math.max(ge?he:0,w?Ye:0)+pe*2):P==="minimal"?(Ae=w?Be+ae*2:0,ve=w?Ye+pe*2:0):P==="logo"?(Ae=he,ve=he):(Ae=(ge?he:0)+(ge&&w?H:0)+(w?Be+ae*2:0),ve=Math.max(ge?he:0,w?Ye+pe*2:0));let C=0,G=0;_.includes("left")?C=Te:_.includes("right")?C=t-Te-Ae:_.includes("center")&&(C=(t-Ae)/2),_.includes("top")?G=Te:_.includes("bottom")&&(G=o-Te-ve),P==="box"&&(n.fillStyle="rgba(0, 0, 0, 0.4)",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=10,n.roundRect?(n.beginPath(),n.roundRect(C,G,Ae,ve,12*de*ie),n.fill()):n.fillRect(C,G,Ae,ve),n.shadowColor="transparent",n.shadowBlur=0);const M=(Z,z,oe,re,K)=>{if(P!=="box"&&P!=="minimal"&&(n.fillStyle="rgba(0, 0, 0, 0.2)",n.roundRect?(n.beginPath(),n.roundRect(Z,z,oe,re,8*de*ie),n.fill()):n.fillRect(Z,z,oe,re)),Fe&&_e){const ze=Z+(oe-Be)/2,je=z+(re-Ye)/2;n.drawImage(_e,ze,je,Be,Ye)}else{n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="top",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4;const ze=Z+(oe-Be)/2,je=z+(re-Ye)/2+Ye*.1;n.fillText(K,ze,je),n.shadowColor="transparent"}};if(P==="modern"){let Z=G;if(ge){const z=C+(Ae-he)/2;n.drawImage(Ie,z,Z,he,he),Z+=he+H}if(w){const z=Be+ae*2,oe=Ye+pe*2,re=C+(Ae-z)/2;M(re,Z,z,oe,Ce)}}else{const Z=_.includes("right");let z=C+(P==="box"?ae:0);const oe=G+ve/2;if(Z&&(P==="classic"||P==="circle")){if(w){const re=Be+ae*2,K=Ye+pe*2;M(z,oe-K/2,re,K,Ce),z+=re+H}ge&&(P==="circle"?(n.save(),n.beginPath(),n.arc(z+he/2,oe,he/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Ie,z,oe-he/2,he,he),n.restore()):n.drawImage(Ie,z,oe-he/2,he,he))}else if(ge&&(P==="circle"?(n.save(),n.beginPath(),n.arc(z+he/2,oe,he/2,0,Math.PI*2),n.closePath(),n.clip(),n.drawImage(Ie,z,oe-he/2,he,he),n.restore()):n.drawImage(Ie,z,oe-he/2,he,he),z+=he+H),w){const re=Be+(P==="box"?0:ae*2),K=Ye+(P==="box"?0:pe*2);P==="box"?Fe&&_e?(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.drawImage(_e,z,oe-Ye/2,Be,Ye),n.shadowColor="transparent"):(n.fillStyle="#ffffff",n.textAlign="left",n.textBaseline="middle",n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(Ce,z,oe+Ye*.1),n.shadowColor="transparent"):M(z,oe-K/2,re,K,Ce)}}n.restore()}}}}};function BA(){const{toast:n,confirm:t}=br(),o=X.useRef(null),s=X.useRef(null),r=X.useRef(null),d=X.useRef(null),h=X.useRef(null),y=X.useRef(!1),v=X.useRef(()=>{});X.useEffect(()=>{zA()},[]);const[m,x]=X.useState(null),[S,T]=X.useState(0),[A,N]=X.useState({title:"No Audio Loaded",artist:"Select a file",coverUrl:null}),[O,F]=X.useState([]),[J,ue]=X.useState([]),[fe,Ge]=X.useState(0),[ke,Ve]=X.useState(!1),[Se,nt]=X.useState("off"),[we,Qe]=X.useState(0),[Ue,ft]=X.useState(0),[St,At]=X.useState(1),[be,B]=X.useState(!1),[xe,de]=X.useState(In.PLAYER),[ht,mt]=X.useState(!1),[D,R]=X.useState(!1),[ne,Ee]=X.useState(!1),[Ke,_]=X.useState(!1),[P,ie]=X.useState(!1),[le,Ie]=X.useState(0),[Ce,Te]=X.useState("16:9"),[Ne,he]=X.useState("1080p"),[L,_e]=X.useState("default"),[Fe,Be]=X.useState(null),[Ye,H]=X.useState("auto"),[ae,pe]=X.useState(30),[Ae,ve]=X.useState("med"),[ge,w]=X.useState(!1),[C,G]=X.useState({backgroundSource:"timeline",backgroundColor:"#581c87",backgroundGradient:"linear-gradient(to bottom right, #312e81, #581c87, #000000)",renderMode:"current",textAlign:"center",contentPosition:"center",fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",textEffect:"shadow",textAnimation:"none",transitionEffect:"none",lyricDisplayMode:"all",fontWeight:"bold",fontStyle:"normal",lyricStyleTarget:"active-only",textDecoration:"none",showTitle:!0,showArtist:!0,showCover:!0,showIntro:!0,showLyrics:!0,infoPosition:"top-left",infoStyle:"classic",infoMarginScale:1,backgroundBlurStrength:0,introMode:"auto",introText:"",textCase:"none",highlightEffect:"karaoke"}),M=X.useRef(C);X.useEffect(()=>{M.current=C},[C]);const Z=X.useRef(null),z=X.useRef(null),oe=C.backgroundBlurStrength>0,re=X.useMemo(()=>[{label:"VP9 (WebM)",value:"video/webm; codecs=vp9,opus"},{label:"H.264 (MP4)",value:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'},{label:"AV1 (MP4)",value:'video/mp4; codecs="av01.0.05M.08"'},{label:"AV1 (WebM)",value:"video/webm; codecs=av1"},{label:"H.264 High (MP4)",value:'video/mp4; codecs="avc1.64001E, mp4a.40.2"'}].filter(W=>MediaRecorder.isTypeSupported(W.value)),[]),[K,ze]=X.useState([]),[je,et]=X.useState(-1),[De,Et]=X.useState(!1),_t=()=>{const k=Ne==="1080p";switch(Ce){case"9:16":return k?{w:1080,h:1920}:{w:720,h:1280};case"3:4":return k?{w:1080,h:1440}:{w:720,h:960};case"4:3":return k?{w:1440,h:1080}:{w:960,h:720};case"1:1":return k?{w:1080,h:1080}:{w:720,h:720};case"1:2":return k?{w:1080,h:2160}:{w:720,h:1440};case"2:1":return k?{w:2160,h:1080}:{w:1440,h:720};case"2:3":return k?{w:1080,h:1620}:{w:720,h:1080};case"3:2":return k?{w:1620,h:1080}:{w:1080,h:720};case"4:5":return k?{w:1080,h:1350}:{w:720,h:900};case"20:9":return k?{w:2400,h:1080}:{w:1600,h:720};case"21:9":return k?{w:2560,h:1080}:{w:1720,h:720};default:return k?{w:1920,h:1080}:{w:1280,h:720}}},{w:Yt,h:nn}=_t(),[lt,Me]=X.useState(!0),[ut,st]=X.useState(!0),[He,Nt]=X.useState(!1),dt=X.useMemo(()=>{const k=C.visualTransitionType||"none",W=C.visualTransitionDuration||1;return J.filter(Q=>Q.type==="audio"?!1:we>=Q.startTime&&we<Q.endTime||k==="crossfade"&&we>=Q.endTime&&we<Q.endTime+W).sort((Q,se)=>{const Je=(Q.layer||0)-(se.layer||0);return Je!==0?Je:Q.startTime-se.startTime})},[J,we,C.visualTransitionType,C.visualTransitionDuration]),ct=J.filter(k=>k.type==="audio"&&we>=k.startTime&&we<k.endTime),Lt=X.useMemo(()=>fe===0?O:O.map(k=>({...k,time:k.time+fe,endTime:k.endTime!==void 0?k.endTime+fe:void 0})),[O,fe]),Wt=Lt.findIndex((k,W)=>{if(k.endTime!==void 0)return we>=k.time&&we<k.endTime;const Le=Lt[W+1];return we>=k.time&&(!Le||we<Le.time)}),On=k=>{const W=k.target.files?.[0];if(W){const Le=URL.createObjectURL(W);x(Le);const Q={title:W.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",coverUrl:null};N(Q),Uc(()=>import("./jsmediatags.min-C6cZ4Kch.js").then(se=>se.j),[]).then(se=>{se.read(W,{onSuccess:Je=>{const{title:at,artist:pt,picture:xt}=Je.tags;let pn=null;if(xt){const{data:zn,format:Re}=xt;let Jt="";for(let on=0;on<zn.length;on++)Jt+=String.fromCharCode(zn[on]);pn=`data:${Re};base64,${window.btoa(Jt)}`}N({title:at||Q.title,artist:pt||Q.artist,coverUrl:pn||null})},onError:Je=>{console.log("Error reading tags:",Je)}})}),Ge(0),Ve(!1),Qe(0),r.current&&(r.current.scrollTop=0),o.current&&o.current.load()}k.target.value=""},Ri=k=>{const W=k.target.files?.[0];if(W){const Le=URL.createObjectURL(W),Q=W.type.startsWith("video/");Q&&_(!1),N(se=>({...se,coverUrl:Le,backgroundType:Q?"video":"image"}))}k.target.value=""},Si=async k=>{const W=k.target.files?.[0];if(W)try{const Le=await W.text(),Q=W.name.split(".").pop()?.toLowerCase();let se=[];Q==="lrc"?se=Ol(Le):Q==="srt"?se=ql(Le):(Q==="ttml"||Q==="xml")&&(se=js(Le)),se.some(Je=>Je.words&&Je.words.length>0)&&(G(Je=>({...Je,highlightEffect:"karaoke"})),n.success(`${Q?.toUpperCase()} loaded with word-level timing! Karaoke mode enabled.`)),F(se)}catch(Le){console.error("Failed to parse lyrics:",Le),n.error("Failed to parse lyric file.")}k.target.value=""};X.useEffect(()=>{if(je!==-1&&K[je]){const k=K[je];F(k.parsedLyrics||[])}},[K,je]);const Hi=async k=>{const W=k.target.files?.[0];if(W){if(!window.FontFace||!document.fonts){n.error("Custom fonts are not supported in this browser.");return}try{const Le=URL.createObjectURL(W),Q=W.name.replace(/\.[^/.]+$/,""),se="CustomFont",Je=new FontFace(se,`url(${Le})`);await Je.load(),document.fonts.add(Je),Be(Q),G(at=>({...at,fontFamily:se})),n.success(`Loaded font: ${Q}`)}catch(Le){console.error("Failed to load font:",Le),n.error("Failed to load font file.")}}k.target.value=""},Ti=X.useCallback(async(k,W=!0,Le)=>{const Q=Le||K;if(k<0||k>=Q.length)return;const se=Q[k],Je=URL.createObjectURL(se.audioFile);if(x(Je),N({title:se.metadata.title,artist:se.metadata.artist,coverUrl:se.metadata.coverUrl||null,backgroundType:"image"}),F([]),se.parsedLyrics&&se.parsedLyrics.length>0)F(se.parsedLyrics);else if(se.lyricFile)try{const at=await se.lyricFile.text(),pt=se.lyricFile.name.split(".").pop()?.toLowerCase();let xt=[];pt==="lrc"?xt=Ol(at):pt==="srt"?xt=ql(at):(pt==="ttml"||pt==="xml")&&(xt=js(at)),F(xt)}catch(at){console.error("Failed to load lyrics",at)}Ge(0),et(k),r.current&&(r.current.scrollTop=0),W?setTimeout(()=>{o.current&&(o.current.play().catch(at=>console.log("Autoplay failed",at)),Ve(!0))},100):(Ve(!1),o.current&&(o.current.pause(),o.current.currentTime=0))},[K]),En=X.useCallback(()=>{if(K.length===0)return;const k=(je+1)%K.length;Ti(k)},[K,je,Ti]),tt=X.useCallback(()=>{if(K.length===0)return;const k=(je-1+K.length)%K.length;Ti(k)},[K,je,Ti]),wt=()=>{o.current&&(ke?(o.current.pause(),Ve(!1)):!m&&K.length>0?Ti(0):(o.current.play().catch(console.error),Ve(!0)))},kt=X.useCallback(()=>{o.current&&(o.current.pause(),o.current.currentTime=0,Ve(!1),Qe(0))},[]),Qn=()=>{nt(k=>k==="off"?"one":k==="one"?"all":k==="all"?"all_repeat":"off")},Ot=()=>{document.fullscreenElement?(document.exitFullscreen(),mt(!1)):(s.current?.requestFullscreen(),mt(!0))},qn=()=>{o.current&&(Qe(o.current.currentTime),P&&Ie(o.current.currentTime/Ue*100))},Ys=()=>{o.current&&ft(o.current.duration)},Ho=k=>{const W=parseFloat(k.target.value);o.current&&(o.current.currentTime=W,Qe(W))},ll=k=>{if(!Z.current||P||!Ue)return;const W=Z.current.getBoundingClientRect(),se=Math.max(0,Math.min(k-W.left,W.width))/W.width*Ue;o.current&&(o.current.currentTime=se,Qe(se))},ao=k=>{const W=parseFloat(k.target.value);At(W),o.current&&(o.current.volume=W),B(W===0)},Vi=k=>{if(!z.current)return;const W=z.current.getBoundingClientRect(),Q=Math.max(0,Math.min(k-W.left,W.width))/W.width;At(Q),o.current&&(o.current.volume=Q),B(Q===0)},Bi=async()=>{if(!o.current||!d.current)return;const k=C.renderMode==="playlist"&&K.length>0,W=[];if(k)for(const qe of K){let Pe=[];if(qe.parsedLyrics&&qe.parsedLyrics.length>0)Pe=qe.parsedLyrics;else if(qe.lyricFile)try{const Oe=await qe.lyricFile.text(),tn=qe.lyricFile.name.split(".").pop()?.toLowerCase();tn==="lrc"?Pe=Ol(Oe):tn==="srt"?Pe=ql(Oe):(tn==="ttml"||tn==="xml")&&(Pe=js(Oe))}catch(Oe){console.error("Failed to parse lyrics for playlist item",Oe)}const it=URL.createObjectURL(qe.audioFile);W.push({audioSrc:it,lyrics:Pe,metadata:qe.metadata,isFileSource:!0})}else{if(!m)return;W.push({audioSrc:m,lyrics:Lt,metadata:A,isFileSource:!1})}if(W.length===0)return;const Le=k?`Start rendering ALL ${W.length} songs from the playlist? This will result in one continuous video.`:`Start rendering ${Ce} (${Ne}) video? This will play the song from start to finish.`;if(!await t(`${Le} Please do not switch tabs during rendering.`,"Start Rendering?")){k&&W.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc));return}w(!1),ie(!0),Ie(0),y.current=!1,kt(),nt("off"),ro.current&&clearTimeout(ro.current),R(!1),Ee(!0),co.current&&co.current.pause();const se=o.current,Je=L,at=new Map,pt=new Map,xt=new Map,pn=[],zn=(qe,Pe)=>new Promise(it=>{const Oe=new Image;Oe.crossOrigin="anonymous",Oe.onload=()=>{at.set(qe,Oe),it()},Oe.onerror=()=>it(),Oe.src=Pe}),Re=(qe,Pe)=>new Promise(it=>{const Oe=document.createElement("video");Oe.crossOrigin="anonymous",Oe.muted=!0,Oe.playsInline=!0,Oe.preload="auto";let tn=!1;const Pt=()=>{tn||(tn=!0,pt.set(qe,Oe),it())};Oe.oncanplay=()=>{tn||(Oe.currentTime=.001)},Oe.onseeked=()=>Pt(),Oe.onerror=()=>{console.warn("Failed to load video:",Pe),Pt()},setTimeout(()=>Pt(),5e3),Oe.src=Pe,Oe.load()}),Jt=(qe,Pe)=>new Promise(it=>{const Oe=document.createElement("audio");Oe.crossOrigin="anonymous",Oe.onloadedmetadata=()=>{xt.set(qe,Oe),it()},Oe.onerror=()=>it(),Oe.src=Pe});if(J.forEach(qe=>{qe.type==="video"?pn.push(Re(qe.id,qe.url)):qe.type==="audio"||qe.type==="audio"?pn.push(Jt(qe.id,qe.url)):pn.push(zn(qe.id,qe.url))}),C.showChannelInfo&&(C.channelInfoImage&&pn.push(zn("__channel_info__",C.channelInfoImage)),C.channelInfoText)){const qe=C.channelInfoText.trim();if(/<svg[\s\S]*?>/i.test(qe))try{const Pe=document.createElement("div");Pe.style.position="absolute",Pe.style.visibility="hidden",Pe.style.whiteSpace="nowrap",Pe.style.fontFamily="sans-serif",Pe.style.fontWeight="bold",Pe.style.fontSize="100px",Pe.style.display="inline-flex",Pe.style.alignItems="center",Pe.style.gap="0.25em",Pe.innerHTML=qe;const it=Pe.getElementsByTagName("svg");for(let An=0;An<it.length;An++)it[An].style.width="auto",it[An].style.height="1.5em";document.body.appendChild(Pe);const{width:Oe,height:tn}=Pe.getBoundingClientRect();document.body.removeChild(Pe);const Pt=`
              <svg xmlns="http://www.w3.org/2000/svg" width="${Oe}" height="${tn}">
                <foreignObject width="100%" height="100%">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: sans-serif; font-weight: bold; font-size: 100px; color: white; display: inline-flex; align-items: center; gap: 0.25em; white-space: nowrap;">
                    <style>svg { width: auto; height: 1.5em; }</style>
                    ${qe}
                  </div>
                </foreignObject>
              </svg>
            `,Hn=`data:image/svg+xml;base64,${window.btoa(encodeURIComponent(Pt).replace(/%([0-9A-F]{2})/g,function(hn,ri){return String.fromCharCode(parseInt(ri,16))}))}`;pn.push(zn("__channel_info_text_svg__",Hn))}catch(Pe){console.warn("Failed to process SVG channel info",Pe)}}if(C.backgroundSource==="image"&&C.backgroundImage&&pn.push(zn("__custom_bg__",C.backgroundImage)),await Promise.all(pn),y.current){ie(!1),k&&W.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc));return}const on=d.current,Zn=on.getContext("2d"),$=on.captureStream(ae);let gt=null;try{if(se.captureStream)gt=se.captureStream();else if(se.mozCaptureStream)gt=se.mozCaptureStream();else throw new Error("Audio capture not supported")}catch{n.error("Your browser does not support audio capture for recording."),ie(!1);return}const Ut=new(window.AudioContext||window.webkitAudioContext),Kt=Ut.createMediaStreamDestination();Ut.createMediaElementSource(se).connect(Kt),pt.forEach(qe=>{qe.muted=!0,Ut.createMediaElementSource(qe).connect(Kt)}),xt.forEach(qe=>{qe.muted=!0,Ut.createMediaElementSource(qe).connect(Kt)}),Kt.stream.getAudioTracks().length>0?$.addTrack(Kt.stream.getAudioTracks()[0]):gt&&$.addTrack(gt.getAudioTracks()[0]);const Wn=(()=>{if(Ye!=="auto"&&MediaRecorder.isTypeSupported(Ye))return Ye;const qe=["video/webm; codecs=vp9,opus","video/webm; codecs=vp9","video/webm; codecs=av1",'video/mp4; codecs="av01.0.05M.08"','video/mp4; codecs="avc1.4D401E, mp4a.40.2"','video/mp4; codecs="avc1.64001E, mp4a.40.2"',"video/mp4","video/webm"];for(const Pe of qe)if(MediaRecorder.isTypeSupported(Pe))return Pe;return"video/webm"})(),zi=Ne==="1080p"?8e6:4e6,Fi=ae>30?1.5:1,Vo=Ae==="high"?2:Ae==="low"?.5:1,Di=zi*Fi*Vo,qt=new MediaRecorder($,{mimeType:Wn,videoBitsPerSecond:Di});h.current=qt;const Dn=[];qt.ondataavailable=qe=>{qe.data.size>0&&Dn.push(qe.data)},qt.onstop=()=>{if(y.current)console.log("Render aborted");else{const qe=new Blob(Dn,{type:Wn}),Pe=it=>{const Oe=URL.createObjectURL(it),tn=document.createElement("a");tn.href=Oe;const Pt=Wn.includes("mp4")?"mp4":"webm",cn=k?`Playlist_${W.length}_Songs_${Ce.replace(":","-")}.${Pt}`:`${W[0].metadata.title||"video"}_${Ce.replace(":","-")}.${Pt}`;tn.download=cn,document.body.appendChild(tn),tn.click(),document.body.removeChild(tn),URL.revokeObjectURL(Oe)};Wn.includes("webm"),Pe(qe)}Ut.close(),ie(!1),T(qe=>qe+1),k&&W.forEach(qe=>qe.isFileSource&&URL.revokeObjectURL(qe.audioSrc))};let Pn=0,ee=[],_n=A,yt=0,Gn=0;const Bo=1e3/ae,Ci=qe=>{if(y.current)return;(qt.state==="recording"||qt.state==="paused")&&requestAnimationFrame(Ci);const Pe=qe-Gn;if(Pe<Bo)return;Gn=qe-Pe%Bo;const it=se.currentTime;yt>0&&Ie(it/yt*100),pt.forEach((Oe,tn)=>{if(tn==="background"){const Pt=Oe.duration||1,cn=it%Pt;let Hn=Math.abs(Oe.currentTime-cn);(cn<Oe.currentTime&&Oe.currentTime-cn>Pt/2||Hn>.5)&&(Oe.currentTime=cn),Oe.paused&&Oe.play().catch(()=>{})}else{const Pt=J.find(cn=>cn.id===tn);if(Pt)if(it>=Pt.startTime&&it<Pt.endTime){const cn=Pt.playbackRate||1;let Hn=(it-Pt.startTime)*cn+(Pt.mediaStartOffset||0);const An=Pt.mediaDuration||Oe.duration;An&&An>0&&Hn>=An&&(Hn=Hn%An),Math.abs(Oe.playbackRate-cn)>.01&&(Oe.playbackRate=cn),Math.abs(Oe.currentTime-Hn)>.5&&(Oe.currentTime=Hn);const hn=Pt.isMuted!==!1;Oe.muted!==hn&&(Oe.muted=hn),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),xt.forEach((Oe,tn)=>{const Pt=J.find(cn=>cn.id===tn);if(Pt){const cn=Pt.layer||0;if(C.layerVisibility?.audio?.[cn]!==!1&&it>=Pt.startTime&&it<Pt.endTime){const An=Pt.playbackRate||1,hn=(it-Pt.startTime)*An+(Pt.mediaStartOffset||0);Math.abs(Oe.playbackRate-An)>.01&&(Oe.playbackRate=An),Math.abs(Oe.currentTime-hn)>.5&&(Oe.currentTime=hn);const ri=Pt.isMuted===!0;Oe.muted!==ri&&(Oe.muted=ri),Oe.paused&&Oe.play().catch(()=>{})}else Oe.paused||Oe.pause(),Oe.muted||(Oe.muted=!0)}}),Zn&&VA(Zn,on.width,on.height,it,ee,_n,J,at,pt,Je,Fe,C.fontSizeScale,C.backgroundBlurStrength>0,yt,C,C.renderMode==="current"||Pn===W.length-1,C.renderMode==="current"||Pn===0)},jn=async()=>{if(y.current){qt.stop();return}if(Pn>=W.length){await new Promise(Pe=>setTimeout(Pe,500)),qt.stop();return}const qe=W[Pn];qt.state==="recording"&&qt.pause(),ee=qe.lyrics,_n=qe.metadata,yt=0,qe.metadata.coverUrl&&(qe.metadata.backgroundType==="video"?await Re("background",qe.metadata.coverUrl):await zn("cover",qe.metadata.coverUrl)),se.pause(),se.src=qe.audioSrc,se.load(),await new Promise(Pe=>{const it=()=>{se.removeEventListener("canplay",it),Pe()};se.addEventListener("canplay",it),se.readyState>=3&&it()}),yt=se.duration,qt.state==="inactive"?(Ut.state==="suspended"&&await Ut.resume(),qt.start(),requestAnimationFrame(Ci)):qt.state==="paused"&&qt.resume(),await se.play(),await new Promise(Pe=>{const it=()=>{se.removeEventListener("ended",it),Pe()};se.addEventListener("ended",it)}),Pn++,jn()};await jn()};X.useEffect(()=>{v.current=Bi});const ki=X.useCallback(()=>{y.current=!0,h.current&&h.current.state==="recording"?h.current.stop():ie(!1),kt()},[kt]),un=X.useCallback(()=>{if(r.current){const k=o.current?.currentTime||0;if(Wt===-1&&k<2){r.current.scrollTo({top:0,behavior:"smooth"});return}if(Wt!==-1){const W=r.current.querySelector('[data-lyric-active="true"]');if(W){const Le=r.current;if(W.offsetHeight===0)return;const Q=W.offsetTop,se=W.offsetHeight,Je=Le.clientHeight;let at=.5;C.contentPosition==="top"&&(at=.25),C.contentPosition==="bottom"&&(at=.75);const pt=Q-Je*at+se/2;Le.scrollTo({top:pt,behavior:"smooth"})}}}},[Wt,L,C.contentPosition]);X.useEffect(()=>{un()},[un]),X.useEffect(()=>{const k=setTimeout(()=>{un()},550);return()=>clearTimeout(k)},[D,ne,lt,ut,xe,De,un]);const ro=X.useRef(null),sl=X.useCallback(()=>{if(R(!1),ro.current&&clearTimeout(ro.current),!P){const k=window.setTimeout(()=>{R(!0)},3e3);ro.current=k}},[P]),Ii=()=>{sl()};X.useEffect(()=>{const k=W=>{const Le=W.key.toLowerCase();if([" ","k","s","t","l","r","f","h","g","m","j","d","e","c","x","z","arrowleft","arrowright","arrowup","arrowdown","meta","control","shift","alt","printscreen","fn","+","-","="].includes(Le)||sl(),!(W.target instanceof HTMLInputElement||W.target instanceof HTMLTextAreaElement)){if(P){Le==="escape"&&ki();return}switch(W.key.toLowerCase()){case" ":case"k":W.preventDefault(),wt(),n.success(ke?"Paused":"Playing",{id:"play-pause"});break;case"s":W.preventDefault(),kt(),n.success("Stopped",{id:"stop"});break;case"n":W.preventDefault(),En(),n.success("Next Song",{id:"next-song"});break;case"o":W.preventDefault();const se=!He;Nt(se),se&&Ee(!0),n.success(`Minimal Mode: ${se?"On":"Off"}`,{id:"minimal-mode"});break;case"b":W.preventDefault(),tt(),n.success("Previous Song",{id:"prev-song"});break;case"r":W.preventDefault(),Qn();const Je=Se==="off"?"one":Se==="one"?"all":Se==="all"?"all_repeat":"off",at={off:"Repeat Off",one:"Loop One",all:"Play All (Stop)",all_repeat:"Loop Playlist"};n.success(`Repeat: ${at[Je]}`,{id:"repeat"});break;case"l":W.preventDefault();const pt=!De;Et(pt),pt&&de(In.PLAYER);break;case"h":W.preventDefault();const xt=!ne;Ee(xt),n.success(xt?"HUD: Always Visible":"HUD: Auto-Hide",{id:"hud-mode"});break;case"g":W.preventDefault();const pn=id.flatMap(Pe=>Pe.options.map(it=>it.value)),zn=M.current.lyricDisplayMode,Jt=(pn.indexOf(zn)+1)%pn.length,on=pn[Jt];G(Pe=>({...Pe,lyricDisplayMode:on})),n.success(`Lyric Mode: ${on.replace("-"," ")}`,{id:"lyric-mode"});break;case"c":W.preventDefault();const Zn=Qg,$=M.current.textCase,Ut=(Zn.indexOf($)+1)%Zn.length,Kt=Zn[Ut];G(Pe=>({...Pe,textCase:Kt})),n.success(`Text Case: ${Kt}`,{id:"text-case"});break;case"f":Ot();break;case"i":Me(Pe=>!Pe);break;case"p":st(Pe=>!Pe);break;case"d":W.preventDefault(),w(Pe=>!Pe);break;case"t":De?(Et(!1),de(In.EDITOR)):de(Pe=>Pe===In.PLAYER?In.EDITOR:In.PLAYER);break;case"m":W.preventDefault();const fo=!be;B(fo),n.success(fo?"Muted":"Unmuted",{id:"mute"});break;case"x":W.preventDefault();const Sn=M.current.highlightEffect==="none";G(Pe=>({...Pe,highlightEffect:Pe.highlightEffect==="none"?"karaoke":"none"})),n.success(`Highlight: ${Sn?"On (Karaoke)":"Off"}`,{id:"highlight-toggle"});break;case"z":W.preventDefault();const Wn=td.flatMap(Pe=>Pe.options.map(it=>it.value)),zi=M.current.highlightEffect||"none",Fi=Wn.indexOf(zi),Di=((Fi===-1?0:Fi)+1)%Wn.length,qt=Wn[Di],Dn=nd(qt);G(Pe=>{const it={...Pe,highlightEffect:qt};return it.useCustomHighlightColors=!1,Dn&&(it.highlightColor=Dn.color,it.highlightBackground=Dn.bg),it}),n.success(`Effect: ${qt.replace(/-/g," ")}`,{id:"highlight-effect"});break;case"j":W.preventDefault();const ee=(Dc.indexOf(L)+1)%Dc.length,_n=Dc[ee];_e(_n);const yt=xr[_n];if(yt){const Pe={fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};G(it=>({...it,...Pe,...yt}))}let Gn=_n;for(const Pe of gd){const it=Pe.options.find(Oe=>Oe.value===_n);if(it){Gn=it.label;break}}n.success(`Preset: ${Gn}`,{id:"preset"});break;case"arrowleft":if(W.preventDefault(),o.current){const Pe=Math.max(0,o.current.currentTime-5);o.current.currentTime=Pe,Qe(Pe)}break;case"arrowright":if(W.preventDefault(),o.current){const Pe=Math.min(Ue,o.current.currentTime+5);o.current.currentTime=Pe,Qe(Pe)}break;case"arrowup":W.preventDefault(),r.current&&r.current.scrollBy({top:-100,behavior:"smooth"});break;case"arrowdown":W.preventDefault(),r.current&&r.current.scrollBy({top:100,behavior:"smooth"});break;case"+":case"=":W.preventDefault();const Bo=M.current.fontSizeScale,Ci=Math.min(Bo+.1,3);G(Pe=>({...Pe,fontSizeScale:Ci})),n.success(`Font Size: ${(Ci*100).toFixed(0)}%`,{id:"font-size"});break;case"-":W.preventDefault();const jn=M.current.fontSizeScale,qe=Math.max(jn-.1,.1);G(Pe=>({...Pe,fontSizeScale:qe})),n.success(`Font Size: ${(qe*100).toFixed(0)}%`,{id:"font-size"});break;case"e":(W.ctrlKey||W.metaKey)&&W.shiftKey&&(W.preventDefault(),v.current());break}}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[ke,Se,xe,P,sl,ki,De,En,tt,n,He,L,ne,be]),X.useEffect(()=>{let k,W=0;const Le=1e3/30,Q=se=>{if(o.current&&!o.current.paused&&ke){k=requestAnimationFrame(Q);const Je=se-W;Je>Le&&(W=se-Je%Le,Qe(o.current.currentTime))}};return ke&&!P&&(k=requestAnimationFrame(Q)),()=>{k&&cancelAnimationFrame(k)}},[ke,P]);const ai=lt&&(!D||ne)&&!P,uo=ut&&(!D||ne)&&!P&&!He,al=dt.length>0?dt[0]:null;al?`${al.url}`:A.coverUrl&&`${A.coverUrl}`;const co=X.useRef(null);return X.useEffect(()=>{if(dt.forEach(k=>{const W=k.layer||0;if(C.layerVisibility?.visual?.[W]!==!1&&k.type==="video"){const Le=document.getElementById(`video-preview-${k.id}`);if(Le)if(P)Le.paused||Le.pause();else{const Q=k.playbackRate||1;let se=(we-k.startTime)*Q+(k.mediaStartOffset||0);const Je=k.mediaDuration||Le.duration;Je&&Je>0&&se>=Je&&(se=se%Je),Math.abs(Le.playbackRate-Q)>.01&&(Le.playbackRate=Q),Math.abs(Le.currentTime-se)>.2&&(Le.currentTime=se);const at=k.isMuted!==!1;Le.muted!==at&&(Le.muted=at);const pt=k.volume!==void 0?k.volume:1;Math.abs(Le.volume-pt)>.01&&(Le.volume=pt),ke&&Le.paused?Le.play().catch(()=>{}):!ke&&!Le.paused&&Le.pause()}}}),A.backgroundType==="video"&&co.current){const k=co.current;if(P)k.paused||k.pause();else{const W=k.duration||1,Le=we%W;Math.abs(k.currentTime-Le)>.1&&(k.currentTime=Le),ke&&k.paused?k.play().catch(()=>{}):!ke&&!k.paused&&k.pause()}}ct.forEach(k=>{const W=document.getElementById(`audio-preview-${k.id}`);if(W){const Le=k.playbackRate||1,Q=(we-k.startTime)*Le+(k.mediaStartOffset||0);Math.abs(W.playbackRate-Le)>.01&&(W.playbackRate=Le),Math.abs(W.currentTime-Q)>.2&&(W.currentTime=Q);const se=k.isMuted===!0;W.muted!==se&&(W.muted=se);const Je=k.volume!==void 0?k.volume:1;Math.abs(W.volume-Je)>.01&&(W.volume=Je),ke&&W.paused?W.play().catch(()=>{}):!ke&&!W.paused&&W.pause()}})},[we,ke,dt,A,ct,C.layerVisibility]),p.jsxs("div",{ref:s,onMouseMove:Ii,onTouchStart:Ii,className:`relative w-full h-[100dvh] bg-black overflow-hidden flex font-sans select-none ${D&&!ne?"cursor-none":""}`,children:[p.jsx("audio",{ref:o,src:m||void 0,loop:Se==="one",muted:be,onTimeUpdate:qn,onLoadedMetadata:Ys,onEnded:()=>{if(P)return;const k=K.length>0;Se==="one"||(Se==="all_repeat"?k?En():o.current?.play():Se==="all"&&k&&je<K.length-1?En():Ve(!1))},crossOrigin:"anonymous"},S),ct.map(k=>p.jsx("audio",{id:`audio-preview-${k.id}`,src:k.url,className:"hidden",playsInline:!0},k.id)),p.jsx("canvas",{ref:d,width:Yt,height:nn,className:"absolute top-0 left-0 hidden pointer-events-none opacity-0"}),p.jsxs("div",{className:"absolute inset-0 bg-black overflow-hidden pointer-events-none",children:[C.backgroundSource==="color"&&p.jsx("div",{className:"absolute inset-0",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&p.jsx("div",{className:"absolute inset-0",style:{background:C.backgroundGradient}}),C.backgroundSource==="image"&&C.backgroundImage&&p.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${C.backgroundImage})`}}),C.backgroundSource==="smart-gradient"&&p.jsx("div",{className:"absolute inset-0",style:{background:(()=>{const k=C.backgroundColor||"#312e81",W=parseInt(k.slice(1,3),16),Le=parseInt(k.slice(3,5),16),Q=parseInt(k.slice(5,7),16),se=`${W},${Le},${Q}`,Je=`${Math.floor(W*.6)},${Math.floor(Le*.6)},${Math.floor(Q*.6)}`;return`linear-gradient(to bottom right, rgb(${se}), rgb(${Je}) 50%, #000000)`})()}}),(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&A.coverUrl&&J.length===0&&(A.backgroundType==="video"?p.jsx("video",{ref:co,src:A.coverUrl,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ${Ke?"opacity-60":"opacity-0"}`,muted:!0,loop:!P,playsInline:!0,preload:"auto",onLoadedData:()=>_(!0)}):p.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out ${C.backgroundSource==="custom"||dt.length===0?"opacity-60":"opacity-0"}`,style:{backgroundImage:`url(${A.coverUrl})`}})),C.backgroundSource==="color"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:C.backgroundColor}}),C.backgroundSource==="gradient"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:C.backgroundGradient}}),C.backgroundSource==="smart-gradient"&&p.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{background:(()=>{const k=C.backgroundColor||"#312e81",W=parseInt(k.slice(1,3),16),Le=parseInt(k.slice(3,5),16),Q=parseInt(k.slice(5,7),16),se=`${W},${Le},${Q}`,Je=`${Math.floor(W*.6)},${Math.floor(Le*.6)},${Math.floor(Q*.6)}`;return`linear-gradient(to bottom right, rgb(${se}), rgb(${Je}) 50%, #000000)`})()}}),!A.coverUrl&&dt.length===0&&(C.backgroundSource==="timeline"||C.backgroundSource==="custom")&&J.length===0&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"}),p.jsx("div",{className:`absolute inset-0 pointer-events-none ${C.backgroundSource==="timeline"?"opacity-100":"opacity-0"}`,children:C.backgroundSource==="timeline"&&dt.map(k=>{const W=k.layer||0;if(C.layerVisibility?.visual?.[W]===!1)return null;const Le=C.visualTransitionType||"none",Q=C.visualTransitionDuration||1;let se=1;if(Le!=="none"){if(we<k.startTime+Q){const Je=(we-k.startTime)/Q;se=Math.max(0,Math.min(1,Je))}if(we>=k.endTime){let Je=!1;if(Le==="crossfade"&&(Je=J.some(at=>at.id!==k.id&&(at.layer||0)===(k.layer||0)&&at.startTime>=k.endTime-.1&&at.startTime<k.endTime+.2)),!Je){const pt=1-(we-k.endTime)/Q;se=Math.min(se,Math.max(0,Math.min(1,pt)))}}else if(Le==="fade-to-black"&&we>k.endTime-Q){const Je=(k.endTime-we)/Q;se=Math.min(se,Math.max(0,Math.min(1,Je)))}}return p.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",style:{opacity:se},children:k.type==="video"?p.jsx("video",{id:`video-preview-${k.id}`,src:k.url,className:"w-full h-full object-cover",muted:k.isMuted!==!1,playsInline:!0}):p.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${k.url})`}})},k.id)})}),p.jsx("div",{className:"absolute inset-0 bg-black/30 transition-all duration-700",style:{backdropFilter:C.backgroundBlurStrength>0?`blur(${C.backgroundBlurStrength}px)`:oe?"blur(12px)":"none",backgroundColor:C.backgroundBlurStrength>0||oe?"rgba(0,0,0,0.4)":void 0}}),C.enableGradientOverlay&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/60 to-transparent pointer-events-none z-0"})]}),p.jsxs("div",{className:"relative z-10 flex-1 flex flex-col transition-all duration-500",children:[C.showChannelInfo&&He&&p.jsxs("div",{className:`absolute z-[60] flex gap-2 p-6 pointer-events-none transition-all duration-500
              ${C.channelInfoStyle==="modern"?"flex-col items-center":"flex-row items-center"}
              ${C.channelInfoStyle==="box"?"bg-black/40 backdrop-blur-md rounded-xl border border-white/10":""}
              ${C.channelInfoPosition==="top-left"?"top-0 left-0 items-start text-left":C.channelInfoPosition==="top-right"?"top-0 right-0 items-end text-right":C.channelInfoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.channelInfoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.channelInfoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"bottom-0 right-0 items-end text-right"}
            `,style:{transform:`${C.channelInfoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.channelInfoSizeScale??1})`,transformOrigin:C.channelInfoPosition?.includes("top")?C.channelInfoPosition?.includes("center")?"top center":C.channelInfoPosition?.includes("left")?"top left":"top right":C.channelInfoPosition?.includes("center")?"bottom center":C.channelInfoPosition?.includes("left")?"bottom left":"bottom right",...C.channelInfoPosition?.includes("center")?C.channelInfoPosition?.includes("top")?{marginTop:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.channelInfoMarginScale??1)*1.5}rem`}:{margin:`${(C.channelInfoMarginScale??1)*1.5}rem`}},children:[C.channelInfoImage&&C.channelInfoStyle!=="minimal"&&p.jsx("img",{src:C.channelInfoImage,alt:"Channel",className:`w-20 h-20 object-contain drop-shadow-lg ${C.channelInfoStyle==="circle"?"rounded-full":""}`}),C.channelInfoText&&C.channelInfoStyle!=="logo"&&(()=>{const k=C.channelInfoText.trim();return/<svg[\s\S]*?>/i.test(k)?p.jsx("div",{className:`text-white font-bold drop-shadow-md text-lg inline-flex items-center gap-1
                        ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}
                        [&>svg]:w-auto [&>svg]:h-[1.5em]`,dangerouslySetInnerHTML:{__html:k}}):p.jsx("p",{className:`text-white font-bold drop-shadow-md text-lg 
                    ${C.channelInfoStyle==="minimal"||C.channelInfoStyle==="box"?"":"px-2 py-1 bg-black/20 rounded-lg backdrop-blur-sm"}`,children:C.channelInfoText})})()]}),He&&p.jsx("div",{className:`absolute z-20 flex flex-col gap-2 p-6 transition-all duration-500 pointer-events-none
              ${ai?"opacity-100":"opacity-0"}
              ${C.infoPosition==="top-left"?"top-0 left-0 items-start text-left":C.infoPosition==="top-right"?"top-0 right-0 items-end text-right":C.infoPosition==="top-center"?"top-0 left-1/2 items-center text-center":C.infoPosition==="bottom-left"?"bottom-0 left-0 items-start text-left":C.infoPosition==="bottom-right"?"bottom-0 right-0 items-end text-right":C.infoPosition==="bottom-center"?"bottom-0 left-1/2 items-center text-center":"top-0 left-0 items-start text-left"}
            `,style:{transform:`${C.infoPosition?.includes("center")?"translateX(-50%)":""} scale(${C.infoSizeScale??1})`,transformOrigin:C.infoPosition?.includes("top")?C.infoPosition?.includes("center")?"top center":C.infoPosition?.includes("right")?"top right":"top left":C.infoPosition?.includes("center")?"bottom center":C.infoPosition?.includes("right")?"bottom right":"bottom left",...C.infoPosition?.includes("center")?C.infoPosition?.includes("top")?{marginTop:`${(C.infoMarginScale??1)*1.5}rem`}:{marginBottom:`${(C.infoMarginScale??1)*1.5}rem`}:{margin:`${(C.infoMarginScale??1)*1.5}rem`}},children:p.jsxs("div",{className:`
              flex items-center gap-4 pointer-events-auto
              ${C.infoPosition?.includes("center")?"flex-col justify-center":""}
              ${C.infoPosition?.includes("right")?"flex-row-reverse":"flex-row"}
              ${C.infoStyle==="box"?"bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10":""}
              ${C.infoStyle==="modern"||C.infoStyle==="minimal",""}
            `,children:[p.jsxs("div",{className:`relative group shrink-0 transition-opacity duration-300 
                ${!C.showCover||C.infoStyle==="minimal"||C.infoStyle==="modern"?"hidden":"block"}
                ${C.infoStyle==="circle_art"?"rounded-full":"rounded-md"}
                overflow-hidden bg-zinc-800 shadow-lg border border-white/10
                w-12 h-12 md:w-16 md:h-16
              `,children:[A.coverUrl?A.backgroundType==="video"?p.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):p.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:p.jsx(Hl,{size:24})}),p.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[p.jsx(Po,{size:20,className:"text-white"}),p.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:Ri})]})]}),p.jsxs("div",{className:`flex flex-col justify-center ${C.infoPosition?.includes("right")?"items-end":C.infoPosition?.includes("center")?"items-center":"items-start"}`,children:[p.jsx("h1",{className:`font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 
                  ${C.showTitle?"opacity-100":"opacity-0 h-0 w-0"}
                  ${C.infoStyle==="minimal"?"text-sm":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-xl":"text-lg"}
                `,children:A.title}),p.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 
                  ${C.showArtist?"opacity-100":"opacity-0 h-0 w-0"}
                `,children:p.jsx("p",{className:`drop-shadow-md
                    ${C.infoStyle==="minimal"?"text-zinc-400 text-[10px]":C.infoStyle==="modern"||C.infoStyle==="modern_art"?"text-white text-sm font-medium":"text-zinc-300 text-xs"}
                  `,children:A.artist})})]})]})}),p.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${ai&&!He?"max-h-80 md:max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:p.jsxs("div",{className:"p-4 md:p-6 flex flex-col md:flex-row justify-between items-start gap-4 md:gap-0",children:[p.jsx("div",{className:"flex gap-4",children:p.jsxs("div",{className:"flex gap-4 items-center",children:[p.jsxs("div",{className:`relative group w-16 h-16 rounded-md overflow-hidden bg-zinc-800 shadow-lg border border-white/10 shrink-0 transition-opacity duration-300 ${C.showCover?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none w-0 h-0 -ml-4"}`,children:[A.coverUrl?A.backgroundType==="video"?p.jsx("video",{src:A.coverUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseOver:k=>k.currentTarget.play(),onMouseOut:k=>k.currentTarget.pause()}):p.jsx("img",{src:A.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:p.jsx(Hl,{size:24})}),p.jsxs("label",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",children:[p.jsx(Po,{size:20,className:"text-white"}),p.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:Ri})]})]}),p.jsxs("div",{children:[p.jsx("h1",{className:`text-xl font-bold text-white drop-shadow-md line-clamp-1 transition-opacity duration-300 ${C.showTitle?"opacity-100":"opacity-0"}`,children:A.title}),p.jsx("div",{className:`flex items-center gap-2 transition-opacity duration-300 ${C.showArtist?"opacity-100":"opacity-0"}`,children:p.jsx("p",{className:"text-zinc-300 text-sm drop-shadow-md",children:A.artist})})]})]})}),p.jsxs("div",{className:`flex gap-2 flex-wrap ${He?"hidden":""}`,children:[p.jsx("a",{href:"https://github.com/dotslashgabut/immersive-audio-player-lyric-video-maker",target:"_blank",rel:"noopener noreferrer",title:"Immersive Audio Player & Lyric Video Maker | GitHub",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#eee",class:"bi bi-github",viewBox:"0 0 16 16",children:p.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})})}),p.jsx("a",{href:"https://ai.studio/apps/drive/1M1VfxdBlNB_eOPQqQiHspvVwizaEs0aI?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricFlow - Turn Audio into Subtitles",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricFlow"}),p.jsx("a",{href:"https://ai.studio/apps/drive/1WKA-bCxzIKD-DcI_pq0HzxN3m1_oNEkg?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"LyricalVision - Visualize lyrics with Gemini AI",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"LyricalVision"}),p.jsx("a",{href:"https://ai.studio/apps/drive/1IQUhhLIAJ_dYYbcOLni-x8LLk7Py4SSX?fullscreenApplet=true",target:"_blank",rel:"noopener noreferrer",title:"GeminiTranscription - Transcribe, Translate, and Compare Models",className:"px-3 py-2 rounded-full transition-colors bg-black/30 text-zinc-300 hover:bg-white/10 text-xs font-bold flex items-center",children:"GeminiTranscription"}),p.jsx("button",{onClick:()=>Ee(!ne),className:`p-2 rounded-full transition-colors ${ne?"bg-purple-600/50 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Bypass Auto-hide (H)",children:ne?p.jsx(Vs,{size:20}):p.jsx(Hs,{size:20})}),p.jsx("button",{onClick:()=>Nt(!He),className:`p-2 rounded-full transition-colors ${He?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Minimal Mode (O)",children:He?p.jsx(Os,{size:20}):p.jsx(ah,{size:20})}),p.jsx("button",{onClick:()=>{const k=!De;Et(k),k&&de(In.PLAYER)},className:`p-2 rounded-full transition-colors ${De?"bg-orange-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Playlist (L)",children:p.jsx(dr,{size:20})}),p.jsx("button",{onClick:()=>{De&&Et(!1),de(xe===In.PLAYER?In.EDITOR:In.PLAYER)},className:`p-2 rounded-full transition-colors ${xe===In.EDITOR&&!De?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Toggle Timeline (T)",children:p.jsx(eg,{size:20})}),p.jsx("button",{onMouseDown:k=>{k.stopPropagation(),w(!ge)},className:`p-2 rounded-full transition-colors ${ge?"bg-purple-600 text-white":"bg-black/30 text-zinc-300 hover:bg-white/10"}`,title:"Render Settings (D)",children:p.jsx(ar,{size:20})}),p.jsx("button",{onClick:Ot,className:"p-2 rounded-full bg-black/30 text-zinc-300 hover:bg-white/10 transition-colors",title:"Fullscreen (F)",children:ht?p.jsx(ah,{size:20}):p.jsx(Os,{size:20})})]})]})}),p.jsx("div",{className:`flex-1 flex justify-center overflow-hidden relative ${C.contentPosition==="top"?"items-start pt-[10vh]":C.contentPosition==="bottom"?"items-end pb-[10vh]":"items-center"}`,children:O.length>0?p.jsxs("div",{ref:r,className:`w-full max-w-5xl max-h-full overflow-y-auto no-scrollbar px-4 md:px-6 space-y-4 md:space-y-6 transition-all duration-500 lyrics-root ${C.textAlign==="left"?"text-left":C.textAlign==="right"?"text-right":"text-center"} ${C.showLyrics?"opacity-100":"opacity-0 pointer-events-none"}`,style:{maskImage:ai||uo?"linear-gradient(to bottom, transparent, black 10%, black 90%, transparent)":"none"},children:[p.jsx("style",{children:`
                .lyrics-root .text-lg { font-size: calc(1.125rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-xl { font-size: calc(1.25rem * ${C.fontSizeScale}); line-height: calc(1.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-2xl { font-size: calc(1.5rem * ${C.fontSizeScale}); line-height: calc(2rem * ${C.fontSizeScale}); }
                .lyrics-root .text-3xl { font-size: calc(1.875rem * ${C.fontSizeScale}); line-height: calc(2.25rem * ${C.fontSizeScale}); }
                .lyrics-root .text-4xl { font-size: calc(2.25rem * ${C.fontSizeScale}); line-height: calc(2.5rem * ${C.fontSizeScale}); }
                .lyrics-root .text-5xl { font-size: calc(3rem * ${C.fontSizeScale}); }
                .lyrics-root .text-6xl { font-size: calc(3.75rem * ${C.fontSizeScale}); }
                .lyrics-root .text-7xl { font-size: calc(4.5rem * ${C.fontSizeScale}); }
                .lyrics-root .text-8xl { font-size: calc(6rem * ${C.fontSizeScale}); }
              `}),p.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?xe===In.EDITOR||De?"h-[25vh]":!ai&&!uo?"h-[50vh]":"h-[40vh]":"h-0"}`}),Lt.map((k,W)=>{const Le=W===Wt,Q=xe===In.EDITOR||De,se=["9:16","3:4","1:1","1:2","2:3"].includes(Ce);if(C.lyricDisplayMode!=="all"){if(C.lyricDisplayMode==="active-only"&&W!==Wt)return p.jsx("p",{className:"hidden"},W);if(C.lyricDisplayMode==="next-only"&&(W<Wt||W>Wt+1))return p.jsx("p",{className:"hidden"},W);if(C.lyricDisplayMode==="previous-next"&&Math.abs(W-Wt)>1)return p.jsx("p",{className:"hidden"},W)}else if(L==="none"||L==="just_video")return p.jsx("p",{className:"hidden"},W);let Je="",at="";const pt=C.transitionEffect;let xt="transition-[color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,text-shadow] duration-500 cursor-pointer whitespace-pre-wrap break-words ";if(Le?pt==="slide"?xt+="translate-y-0 opacity-100 ":pt==="zoom"?xt+="scale-100 opacity-100 ":pt==="float"?xt+="translate-y-0 opacity-100 ":pt==="blur"?xt+="blur-0 opacity-100 ":pt==="fade"?xt+="opacity-100 ":pt==="drop"?xt+="trans-drop-enter opacity-100 ":pt==="lightspeed"?xt+="trans-lightspeed-enter opacity-100 ":pt==="roll"?xt+="trans-roll-enter opacity-100 ":pt==="elastic"?xt+="trans-elastic-enter opacity-100 ":pt==="flip"?xt+="trans-flip-enter opacity-100 ":pt==="rotate-in"?xt+="trans-rotate-in-enter opacity-100 ":pt==="spiral"?xt+="trans-spiral-enter opacity-100 ":pt==="shatter"?xt+="trans-shatter-enter opacity-100 ":xt+="opacity-100 ":(pt==="slide"?xt+="translate-y-4 opacity-0 ":pt==="zoom"?xt+="scale-75 opacity-0 ":pt==="float"?xt+="translate-y-8 opacity-0 ":pt==="blur"?xt+="blur-md opacity-0 ":pt==="fade"?xt+="opacity-50 ":pt==="drop"?xt+="trans-drop-exit opacity-0 ":pt==="roll"?xt+="trans-roll-exit opacity-0 ":xt+="opacity-0 ",pt==="none"&&(xt=xt.replace("opacity-0","opacity-50"))),L==="large"||L==="large_upper"){const Ut=se?Q?"text-4xl":"text-6xl":Q?"text-6xl":"text-8xl",Kt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${Ut} font-black text-white ${L==="large_upper"?"uppercase":""} tracking-tight text-left pl-4`,at=`${Kt} text-zinc-600/40 hover:text-zinc-400 text-left pl-4`}else if(L==="big_center"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} font-black text-white uppercase tracking-tight text-center`,at=`${gt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(L==="testing_up"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-white uppercase tracking-tight text-center`,at=`${gt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(L==="testing"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-white tracking-tight text-center`,at=`${gt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(L==="one_line_up"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-white uppercase tracking-tight text-center`,at=`${gt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(L==="one_line"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-white tracking-tight text-center`,at=`${gt} text-zinc-600/40 hover:text-zinc-400 text-center`}else if(L==="metal"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-white uppercase tracking-wide text-center drop-shadow-[0_4px_6px_rgba(255,0,0,0.5)]`,at=`${gt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(L==="kids"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-white tracking-wide text-center drop-shadow-[3px_3px_0px_rgba(0,0,0,0.5)]`,at=`${gt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(L==="sad"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-7xl",gt=se?Q?"text-lg":"text-xl":Q?"text-xl":"text-2xl";Je=`${$} text-zinc-200 tracking-wider text-center drop-shadow-md`,at=`${gt} text-zinc-600/60 hover:text-zinc-400 text-center`}else if(L==="romantic"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-7xl",gt=se?Q?"text-lg":"text-xl":Q?"text-xl":"text-2xl";Je=`${$} text-pink-100 italic tracking-wide text-center drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]`,at=`${gt} text-zinc-600/60 hover:text-zinc-400 text-center italic`}else if(L==="tech"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-cyan-50 font-bold uppercase tracking-widest text-center drop-shadow-[0_0_10px_rgba(34,211,238,0.8)]`,at=`${gt} text-cyan-900/40 hover:text-cyan-800 text-center uppercase`}else if(L==="gothic"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-7xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl";Je=`${$} text-zinc-300 tracking-normal text-center drop-shadow-[0_4px_10px_rgba(0,0,0,0.9)]`,at=`${gt} text-zinc-700/60 hover:text-zinc-500 text-center`}else if(L==="monospace"){const $=se?Q?"text-2xl":"text-3xl":Q?"text-3xl":"text-5xl",gt=se?Q?"text-lg":"text-xl":Q?"text-xl":"text-2xl";Je=`${$} font-mono font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,at=`${gt} font-mono text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}else if(L==="classic"){const $=se?Q?"text-2xl":"text-3xl":Q?"text-3xl":"text-6xl",gt=se?Q?"text-lg":"text-xl":Q?"text-xl":"text-2xl";Je=`${$} font-serif italic font-bold text-amber-100 drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)]`,at=`${gt} font-serif text-zinc-500/60 hover:text-zinc-300 italic`}else if(L==="slideshow"||L==="just_video")Je=`${se?Q?"text-2xl":"text-3xl":Q?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,at="hidden";else if(L==="subtitle"){Je=`${se?Q?"text-2xl":"text-3xl":Q?"text-3xl":"text-4xl"} text-white tracking-wide text-center`,at="hidden";let gt="bottom-16";Q&&uo?gt="bottom-[540px]":Q?gt="bottom-[360px]":uo&&(gt="bottom-48"),xt+=`fixed ${gt} left-1/2 -translate-x-1/2 w-full max-w-4xl px-4 `}else if(L==="custom"){const $=se?Q?"text-4xl":"text-5xl":Q?"text-6xl":"text-8xl",gt=se?Q?"text-xl":"text-2xl":Q?"text-2xl":"text-3xl",Ut=C.textAlign==="center"?"text-center":C.textAlign==="right"?"text-right":"text-left";Je=`${$} tracking-tight ${Ut}`,at=`${gt} opacity-40 hover:opacity-100 ${Ut}`}else{const $=se?Q?"text-2xl":"text-3xl":Q?"text-3xl":"text-5xl",gt=se?Q?"text-lg":"text-xl":Q?"text-xl":"text-2xl";Je=`${$} font-bold text-white scale-105 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]`,at=`${gt} text-zinc-500/60 hover:text-zinc-300 drop-shadow-sm`}const zn=(C.lyricStyleTarget||"active-only")==="all"||Le;let Re={color:C.fontColor,fontWeight:zn?C.fontWeight:void 0,fontStyle:zn?C.fontStyle:void 0,textDecoration:zn?C.textDecoration:void 0,fontFamily:C.fontFamily==="CustomFont"?"CustomFont, sans-serif":C.fontFamily};if((L==="custom"||L==="default")&&Le&&C.textEffect!=="none"){const $=C.textEffect;$==="glow"?Re.textShadow=`0 0 10px ${C.fontColor}, 0 0 20px ${C.fontColor}`:$==="neon"?Re.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${C.fontColor}, 0 0 40px ${C.fontColor}, 0 0 80px ${C.fontColor}`:$==="neon-multi"?Re.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de, 0 0 50px #00ffff":$==="shadow"?Re.textShadow="3px 3px 6px rgba(0,0,0,0.7)":$==="outline"?Re.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000":$==="3d"?Re.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":$==="emboss"?(Re.color="#ebebeb",Re.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):$==="gold"?(Re.background="linear-gradient(to bottom, #d4af37, #C5A028)",Re.WebkitBackgroundClip="text",Re.color="transparent"):$==="chrome"?(Re.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",Re.WebkitBackgroundClip="text",Re.color="transparent"):$==="fire"?(Re.color="#fff",Re.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):$==="frozen"?(Re.color="#fff",Re.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4, 0 0 40px #03A9F4"):$==="vhs"?Re.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":$==="gradient"?(Re.background=`linear-gradient(to right, ${C.fontColor}, #ffffff)`,Re.WebkitBackgroundClip="text",Re.color="transparent"):$==="rainbow"?(Re.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",Re.WebkitBackgroundClip="text",Re.color="transparent"):$==="glass"?(Re.backgroundColor="rgba(255, 255, 255, 0.1)",Re.backdropFilter="blur(8px)",Re.padding="0.5rem 1rem",Re.borderRadius="0.75rem",Re.border="1px solid rgba(255, 255, 255, 0.2)",Re.display="inline-block"):$==="mirror"?(Re.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",Re.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):$==="retro"?(Re.fontFamily="'Press Start 2P', cursive",Re.color="#ff00ff",Re.textShadow="4px 4px 0px #00ffff"):$==="hologram"?(Re.color="rgba(0, 255, 255, 0.7)",Re.textShadow="0 0 5px rgba(0,255,255,0.5), 0 0 10px rgba(0,255,255,0.5)",Re.backgroundImage="repeating-linear-gradient(0deg, transparent, transparent 2px, #00ffff 3px)",Re.WebkitBackgroundClip="text"):$==="comic"&&(Re.fontFamily="'Bangers', cursive",Re.color="#ffcc00",Re.textShadow="2px 2px 0px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",Re.letterSpacing="1px")}let Jt=k.text;const on=C.textCase;on==="upper"?Jt=Jt.toUpperCase():on==="lower"?Jt=Jt.toLowerCase():on==="title"?Jt=Jt.replace(/\w\S*/g,$=>$.charAt(0).toUpperCase()+$.substr(1).toLowerCase()):on==="sentence"?Jt=Jt.charAt(0).toUpperCase()+Jt.slice(1).toLowerCase():on==="invert"&&(Jt=Jt.replace(/\w\S*/g,$=>$.charAt(0).toLowerCase()+$.slice(1).toUpperCase())),Jt=Jt.replace(/\s*([-])\s*/g,"$1"),Le&&C.textAnimation==="typewriter"&&(Jt=Jt.substring(0,Math.max(0,Math.floor((we-k.time)*35))));let Zn=Jt;if(Le&&C.highlightEffect!=="none"){const $=C.highlightEffect,gt=k.words&&k.words.length>0;if(($==="karaoke"||$?.startsWith("karaoke-"))&&gt)Zn=k.words.filter(Ut=>Ut.text===`
`||Ut.text.trim().length>0).map((Ut,Kt,fo)=>{if(Ut.text===`
`)return p.jsx("br",{},Kt);let Sn=Ut.text.trim();if(on==="upper")Sn=Sn.toUpperCase();else if(on==="lower")Sn=Sn.toLowerCase();else if(on==="title")Sn=Sn.replace(/\w\S*/g,yt=>yt.charAt(0).toUpperCase()+yt.substr(1).toLowerCase());else if(on==="sentence"){const yt=Sn.toLowerCase();Sn=Kt===0?yt.charAt(0).toUpperCase()+yt.slice(1):yt}else on==="invert"&&(Sn=Sn.replace(/\w\S*/g,yt=>yt.charAt(0).toLowerCase()+yt.slice(1).toUpperCase()));const Wn=Ut.startTime+fe,zi=Ut.endTime+fe,Fi=we>=Wn&&we<zi,Vo=we>=zi,Di=/[-]$/,qt=/^[-]/;let Dn=!Sn.endsWith(" ");Di.test(Sn.trim())&&(Dn=!1);const Pn=fo[Kt+1];Pn&&qt.test(Pn.text.trim())&&(Dn=!1),Pn&&Pn.text===`
`&&(Dn=!1),Kt===fo.length-1&&(Dn=!1);let ee={display:"inline-block",transition:"all 0.1s ease"};if(C.textDecoration&&C.textDecoration!=="none"&&(ee.textDecoration=C.textDecoration),!Fi&&!Vo)ee.opacity=.5,ee.transform="scale(1)";else if(Vo)if($==="karaoke-fill"){const yt=C.highlightBackground||"#fb923c";ee.backgroundColor=yt,ee.color="#000",ee.padding="2px 6px",ee.borderRadius="4px",ee.opacity=1}else L==="custom"&&(ee.color=C.fontColor),ee.opacity=1;if(Fi){const yt=C.highlightColor||"#fb923c",Gn=C.highlightBackground||"#fb923c";$==="karaoke"||$==="color"?(ee.color=yt,ee.textShadow=`0 0 10px ${yt}`):$==="karaoke-neon"?(ee.color="#fff",ee.textShadow=`0 0 5px #fff, 0 0 10px #fff, 0 0 20px ${yt}, 0 0 35px ${yt}`):$==="karaoke-scale"?(ee.color=yt,ee.transform="scale(1.3)"):$==="karaoke-underline"?(ee.color=yt,ee.textDecoration=(ee.textDecoration||"")+" underline",ee.textDecorationColor=yt,ee.textUnderlineOffset="4px"):$==="karaoke-bounce"?(ee.color=yt,ee.transform="translateY(-10px)"):$==="karaoke-fill"?(ee.backgroundColor=Gn,ee.color="#000",ee.padding="2px 6px",ee.borderRadius="4px"):$==="karaoke-outline"?(ee.color="transparent",ee.WebkitTextStroke=`2px ${yt}`):$==="karaoke-shadow"?(ee.color=yt,ee.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"):$==="karaoke-gradient"?(ee.background=`linear-gradient(90deg, ${yt}, ${Gn})`,ee.WebkitBackgroundClip="text",ee.WebkitTextFillColor="transparent"):$==="karaoke-wave"?(ee.color=yt,ee.animation="bounce 0.3s ease infinite"):$==="karaoke-pill"?(ee.backgroundColor=Gn,ee.color="#000",ee.padding="4px 16px",ee.borderRadius="9999px"):$==="karaoke-box"?(ee.backgroundColor=Gn,ee.color="#000",ee.padding="4px 8px",ee.borderRadius="0"):$==="karaoke-rounded"?(ee.backgroundColor=Gn,ee.color="#000",ee.padding="4px 12px",ee.padding="4px 12px",ee.borderRadius="12px"):$==="karaoke-glass"?(ee.backgroundColor="rgba(255, 255, 255, 0.1)",ee.color="#fff",ee.padding="4px 12px",ee.borderRadius="8px",ee.backdropFilter="blur(4px)",ee.border="1px solid rgba(255, 255, 255, 0.3)",ee.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"):$==="karaoke-neon-multi"?(ee.color="#fff",ee.textShadow="0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 35px #00ffff, 0 0 40px #ff00de"):$==="karaoke-soft-glow"?(ee.color=yt,ee.textShadow=`0 0 5px ${yt}, 0 0 15px ${yt}, 0 0 30px ${yt}`):$==="karaoke-3d"?ee.textShadow="1px 1px 0px #ccc, 2px 2px 0px #bbb, 3px 3px 0px #aaa, 4px 4px 0px rgba(0,0,0,0.5)":$==="karaoke-emboss"?(ee.color="#ebebeb",ee.textShadow="1px 2px 3px rgba(255,255,255,0.8), -1px -2px 3px rgba(0,0,0,0.8)"):$==="karaoke-chrome"?(ee.background="linear-gradient(to bottom, #ebebeb 50%, #616161 50%, #ebebeb)",ee.WebkitBackgroundClip="text",ee.color="transparent"):$==="karaoke-gold"?(ee.background="linear-gradient(to bottom, #d4af37, #C5A028)",ee.WebkitBackgroundClip="text",ee.color="transparent"):$==="karaoke-fire"?(ee.color="#fff",ee.textShadow="0 -5px 4px #FFC107, 2px -10px 6px #FF9800, -2px -15px 11px #FF5722, 2px -25px 18px #795548"):$==="karaoke-frozen"?(ee.color="#fff",ee.textShadow="0 0 5px rgba(255,255,255,0.8), 0 0 10px rgba(255,255,255,0.5), 0 0 20px #03A9F4, 0 0 30px #03A9F4"):$==="karaoke-rainbow"?(ee.background="linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red)",ee.WebkitBackgroundClip="text",ee.color="transparent"):$==="karaoke-mirror"?(ee.transform="scaleY(1.3) perspective(500px) rotateX(-10deg)",ee.textShadow="0 15px 5px rgba(0,0,0,0.1), 0 -1px 3px rgba(0,0,0,0.3)"):$==="karaoke-vhs"?ee.textShadow="2px 0 0 rgba(255,0,0,0.7), -2px 0 0 rgba(0,0,255,0.7)":$==="karaoke-retro"?(ee.fontFamily="'Press Start 2P', cursive",ee.color="#ff00ff",ee.textShadow="4px 4px 0px #00ffff"):$==="karaoke-cyberpunk"?(ee.color="#fcee0a",ee.textShadow="2px 2px 0px #000, -1px -1px 0 #05d9e8"):$==="karaoke-hologram"?(ee.color="rgba(0, 255, 255, 0.7)",ee.textShadow="0 0 5px rgba(0,255,255,0.5)"):$==="karaoke-comic"?(ee.fontFamily="'Bangers', cursive",ee.color="#ffcc00",ee.textShadow="2px 2px 0px #000, -1px -1px 0 #000"):$==="karaoke-glitch-text"?ee.animation="anim-glitch 0.4s infinite linear":$==="karaoke-pulse"?ee.animation="anim-pulse 1s infinite ease-in-out":$==="karaoke-breathe"?ee.animation="anim-breathe 2s infinite ease-in-out":$==="karaoke-float"?ee.animation="anim-float 2s infinite ease-in-out":$==="karaoke-sway"?ee.animation="anim-sway 2s infinite ease-in-out":$==="karaoke-flicker"?ee.animation="anim-flicker 2s infinite linear":$==="karaoke-shake"?ee.animation="anim-shake 0.2s infinite linear":$==="karaoke-wobble"?ee.animation="anim-wobble 1s infinite ease-in-out":$==="karaoke-jello"?ee.animation="anim-jello 1s infinite":$==="karaoke-rubberband"?ee.animation="anim-rubberband 1s infinite":$==="karaoke-heartbeat"?ee.animation="anim-heartbeat 1.3s infinite ease-in-out":$==="karaoke-flash"?ee.animation="anim-flash 1s infinite":$==="karaoke-tada"?ee.animation="anim-tada 1s infinite":$==="karaoke-swing"?ee.animation="anim-swing 2s infinite":$==="karaoke-rotate"?ee.animation="anim-rotate 4s infinite linear":$==="karaoke-spin"?ee.animation="anim-rotate 1s infinite linear":$==="karaoke-glitch"?ee.animation="anim-glitch 0.3s infinite linear":$==="karaoke-typewriter"?(ee.animation="typewriter-reveal 0.5s steps(10, end) forwards",ee.whiteSpace="nowrap",ee.overflow="hidden",ee.display="inline-block",ee.verticalAlign="bottom"):$==="karaoke-fade"?ee.animation="trans-fade-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards":$==="karaoke-slide"?ee.animation="trans-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards":$==="karaoke-drop"?ee.animation="trans-drop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":$==="karaoke-lightspeed"?ee.animation="trans-lightspeed-in 0.5s ease-out forwards":$==="karaoke-roll"?ee.animation="trans-roll-in 0.5s ease-out forwards":$==="karaoke-zoom"?ee.animation="trans-zoom-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards":$==="karaoke-elastic"?ee.animation="trans-elastic-in 0.7s ease-out forwards":$==="karaoke-scale-rotate"?ee.animation="trans-scale-rotate-in 0.5s ease-out forwards":$==="karaoke-flip"?ee.animation="trans-flip-in 0.5s ease-out forwards":$==="karaoke-rotate-in"?ee.animation="trans-rotate-in 0.5s ease-out forwards":$==="karaoke-spiral"?ee.animation="trans-spiral-in 0.6s ease-out forwards":$==="karaoke-blur"?ee.animation="trans-blur-in 0.4s ease-out forwards":$==="karaoke-shatter"?ee.animation="trans-shatter-in 0.5s ease-out forwards":["karaoke-blue","karaoke-purple","karaoke-green","karaoke-pink","karaoke-cyan","karaoke-glow-blue","karaoke-glow-pink"].includes($||"")&&(ee.color=yt,ee.textShadow=`0 0 10px ${yt}`,$?.includes("glow")&&(ee.textShadow=`0 0 5px ${yt}, 0 0 15px ${yt}, 0 0 30px ${yt}`))}const _n=p.jsx("span",{className:"inline-block",style:ee,children:Sn},Kt);return Dn?p.jsxs(Zm.Fragment,{children:[_n," "]},Kt):_n});else if($==="karaoke"||$?.startsWith("karaoke-")){const Ut=C.highlightColor||"#fb923c",Kt=C.highlightBackground||"#fb923c";Re.color=Ut,$==="karaoke-neon"&&(Re.textShadow=`0 0 10px ${Ut}, 0 0 20px ${Ut}`),$==="karaoke-scale"&&(Re.transform=(Re.transform||"")+" scale(1.1)"),$==="karaoke-underline"&&(Re.textDecoration="underline"),$==="karaoke-bounce"&&(Re.transform=(Re.transform||"")+" translateY(-5px)"),$==="karaoke-fill"&&(Re.backgroundColor=Kt,Re.color="#000",Re.padding="4px 12px",Re.borderRadius="6px"),$==="karaoke-outline"&&(Re.color="transparent",Re.WebkitTextStroke=`2px ${Ut}`),$==="karaoke-shadow"&&(Re.textShadow="3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"),$==="karaoke-gradient"&&(Re.background=`linear-gradient(90deg, ${Ut}, ${Kt})`,Re.WebkitBackgroundClip="text",Re.WebkitTextFillColor="transparent"),["karaoke-pill","karaoke-box","karaoke-rounded"].includes($)&&(Re.backgroundColor=Kt,Re.color="#000",Re.padding="4px 16px",Re.borderRadius=$==="karaoke-pill"?"9999px":$==="karaoke-rounded"?"12px":"0"),$?.includes("glow")&&(Re.textShadow=`0 0 10px ${Ut}, 0 0 20px ${Ut}`)}else $==="scale"?Re.color=C.highlightColor||"#fb923c":C.highlightEffect==="background"&&(Re.backgroundColor=(C.highlightBackground||"#fb923c")+"4D",Re.padding="0 10px",Re.borderRadius="8px")}return p.jsx("p",{"data-lyric-active":Le?"true":"false",className:`${xt} ${Le?Je:at} ${Le&&C.textAnimation!=="none"&&C.textAnimation!=="typewriter"?`text-anim-${C.textAnimation}`:""}`,style:Re,onClick:()=>{Le&&(navigator.clipboard.writeText(k.text),n.success("Lyric copied to clipboard",1500)),o.current&&!P&&(o.current.currentTime=k.time,Qe(k.time))},children:Zn},W)}),p.jsx("div",{className:`transition-all duration-500 ${C.contentPosition==="center"?xe===In.EDITOR||De?"h-[25vh]":!ai&&!uo?"h-[50vh]":"h-[40vh]":"h-0"}`})]}):p.jsx("div",{className:"text-center text-zinc-400/50 select-none pointer-events-none",children:!al&&L!=="none"&&p.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[p.jsx(Hl,{size:64,className:"opacity-20"}),p.jsx("p",{children:"Load audio & lyrics to start"}),p.jsx("p",{className:"text-xs opacity-50",children:"Shortcuts: Space (Play), S (Stop), R (Repeat), H (Hold UI)"})]})})}),p.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${uo?"max-h-60 opacity-100 translate-y-0":"max-h-0 opacity-0 translate-y-4"}`,children:p.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/30 to-transparent p-4 pb-6 lg:p-6 lg:pb-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 group",children:[p.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10 text-right",children:Vl(we)}),p.jsxs("div",{ref:Z,className:"flex-1 h-1 bg-zinc-700/50 rounded-full relative cursor-pointer group-hover:h-2 transition-all touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),ll(k.clientX)},onPointerMove:k=>{k.buttons===1&&ll(k.clientX)},children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 rounded-full pointer-events-none",style:{width:`${we/Ue*100}%`}}),p.jsx("input",{type:"range",min:"0",max:Ue||0,value:we,onChange:Ho,disabled:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-wait pointer-events-none"})]}),p.jsx("span",{className:"text-xs text-zinc-400 font-mono w-10",children:Vl(Ue)}),p.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[p.jsx("button",{onClick:()=>B(!be),className:"text-zinc-400 hover:text-white",children:be||St===0?p.jsx(Pl,{size:16}):p.jsx(Uo,{size:16})}),p.jsxs("div",{ref:z,className:"w-16 h-1 bg-zinc-700/50 rounded-full relative overflow-hidden group/vol cursor-pointer touch-none",onPointerDown:k=>{k.currentTarget.setPointerCapture(k.pointerId),Vi(k.clientX)},onPointerMove:k=>{k.buttons===1&&Vi(k.clientX)},children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-zinc-300 group-hover/vol:bg-purple-400 transition-colors pointer-events-none",style:{width:`${be?0:St*100}%`}}),p.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:be?0:St,onChange:ao,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"})]})]})]}),p.jsxs("div",{className:"flex flex-wrap lg:grid lg:grid-cols-[1fr_auto_1fr] items-center justify-center gap-4",children:[p.jsxs("div",{className:"flex gap-1 justify-center lg:justify-start flex-wrap order-2 lg:order-none w-auto lg:w-full",children:[p.jsxs("label",{className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Load Audio",children:[p.jsx(Hl,{size:18}),p.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:On,disabled:P})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${O.length>0?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:"Load Lyrics (.lrc, .srt)",children:[p.jsx(cr,{size:18}),p.jsx("input",{type:"file",accept:".lrc,.srt,.ttml,.xml",className:"hidden",onChange:Si,disabled:P})]}),O.length>0&&p.jsx("button",{onClick:()=>F([]),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Clear Lyrics",disabled:P,children:p.jsx(vi,{size:14})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[p.jsxs("span",{className:"text-xs text-zinc-300 w-12 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[fe>0?"+":"",fe.toFixed(1),"s"]}),p.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[p.jsx("button",{onClick:()=>Ge(k=>parseFloat((k+.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Lyric Offset (+0.1s)",disabled:P,children:p.jsx(Lc,{size:12})}),p.jsx("button",{onClick:()=>Ge(k=>parseFloat((k-.1).toFixed(1))),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Lyric Offset (-0.1s)",disabled:P,children:p.jsx($s,{size:12})})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("label",{className:`p-2 rounded-lg hover:bg-white/10 cursor-pointer transition-colors ${Fe?"text-purple-400":"text-zinc-400 hover:text-white"}`,title:Fe?`Custom Font: ${Fe}`:"Load Custom Font (.ttf, .otf, .woff)",children:[p.jsx(Lo,{size:18}),p.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",className:"hidden",onChange:Hi,disabled:P})]}),Fe&&p.jsx("button",{onClick:()=>Be(null),className:"p-1 rounded-full text-zinc-500 hover:text-red-400 hover:bg-white/5 transition-colors",title:"Reset Default Font",disabled:P,children:p.jsx(vi,{size:14})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800/50 rounded-lg px-2 py-1 h-9",children:[p.jsxs("span",{className:"text-xs text-zinc-300 w-10 text-center font-mono select-none border-r border-white/10 pr-2 mr-1",children:[Math.round(C.fontSizeScale*100),"%"]}),p.jsxs("div",{className:"flex flex-col -my-1 h-full justify-center",children:[p.jsx("button",{onClick:()=>G(k=>({...k,fontSizeScale:Math.min(k.fontSizeScale+.1,3)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Increase Font Size",disabled:P,children:p.jsx(Lc,{size:12})}),p.jsx("button",{onClick:()=>G(k=>({...k,fontSizeScale:Math.max(k.fontSizeScale-.1,.1)})),className:"text-zinc-400 hover:text-white flex items-center justify-center h-3.5 w-4 hover:bg-white/10 rounded-sm transition-colors",title:"Decrease Font Size",disabled:P,children:p.jsx($s,{size:12})})]})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:L,onChange:k=>{const W=k.target.value;_e(W);const Le=xr[W];if(Le){const Q={fontFamily:"sans-serif",fontSizeScale:1,fontColor:"#ffffff",fontWeight:"bold",fontStyle:"normal",textCase:"none",textAlign:"center",contentPosition:"center",textDecoration:"none",textEffect:"shadow",textAnimation:"none",highlightEffect:"karaoke",highlightColor:"#fb923c",highlightBackground:"#fb923c",useCustomHighlightColors:!1,lyricStyleTarget:"active-only",transitionEffect:"none"};G(se=>({...se,...Q,...Le}))}},className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 h-9 w-24 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:P,title:"Select Visual Preset",children:[p.jsx("option",{value:"custom",className:"bg-zinc-900 font-bold text-purple-400",children:"Custom "}),p.jsx("option",{value:"default",className:"bg-zinc-900",children:"Default"}),p.jsx("option",{value:"large",className:"bg-zinc-900",children:"Big Text"}),p.jsx("option",{value:"large_upper",className:"bg-zinc-900",children:"Big Text (UP)"}),p.jsx("option",{value:"big_center",className:"bg-zinc-900",children:"Big Center"}),p.jsx("option",{value:"metal",className:"bg-zinc-900",children:"Metal"}),p.jsx("option",{value:"kids",className:"bg-zinc-900",children:"Kids"}),p.jsx("option",{value:"sad",className:"bg-zinc-900",children:"Sad"}),p.jsx("option",{value:"romantic",className:"bg-zinc-900",children:"Romantic"}),p.jsx("option",{value:"tech",className:"bg-zinc-900",children:"Tech"}),p.jsx("option",{value:"gothic",className:"bg-zinc-900",children:"Gothic"}),p.jsx("option",{value:"classic",className:"bg-zinc-900",children:"Classic Serif"}),p.jsx("option",{value:"monospace",className:"bg-zinc-900",children:"Monospace"}),p.jsx("option",{value:"testing_up",className:"bg-zinc-900",children:"Testing (UP)"}),p.jsx("option",{value:"testing",className:"bg-zinc-900",children:"Testing"}),p.jsx("option",{value:"one_line_up",className:"bg-zinc-900",children:"One Line (UP)"}),p.jsx("option",{value:"one_line",className:"bg-zinc-900",children:"One Line"}),p.jsx("option",{value:"slideshow",className:"bg-zinc-900",children:"Slideshow"}),p.jsx("option",{value:"just_video",className:"bg-zinc-900",children:"Just Video"}),p.jsx("option",{value:"subtitle",className:"bg-zinc-900",children:"Subtitle"}),p.jsx("option",{value:"none",className:"bg-zinc-900",children:"None"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),p.jsxs("div",{className:"flex items-center gap-4 lg:gap-6 justify-center order-1 lg:order-none w-full lg:w-auto mb-2 lg:mb-0",children:[p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",onClick:kt,title:"Stop (S)",disabled:P,children:p.jsx(Vc,{size:20,fill:"currentColor"})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P||K.length===0,onClick:tt,title:"Previous Song",children:p.jsx(Ib,{size:24})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P,onClick:()=>o.current&&(o.current.currentTime-=5),title:"Rewind 5s",children:p.jsx(Tb,{size:20})}),p.jsx("button",{onClick:wt,disabled:P,className:"w-14 h-14 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:hover:scale-100",children:ke?p.jsx(tg,{size:28,fill:"currentColor"}):p.jsx(Pc,{size:28,fill:"currentColor",className:"ml-1"})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P,onClick:()=>o.current&&(o.current.currentTime+=5),title:"Fast Forward 5s",children:p.jsx(qx,{size:20})}),p.jsx("button",{className:"text-zinc-400 hover:text-white transition-colors disabled:opacity-50",disabled:P||K.length===0,onClick:En,title:"Next Song",children:p.jsx(Db,{size:24})}),p.jsxs("button",{className:`transition-colors disabled:opacity-50 ${Se!=="off"?"text-green-400 hover:text-green-300":"text-zinc-400 hover:text-white"}`,onClick:Qn,title:`Repeat: ${Se==="off"?"Off":Se==="one"?"One":Se==="all"?"Play All (No Repeat)":"Loop All"} (R)`,disabled:P,children:[Se==="one"&&p.jsx(xb,{size:20}),Se==="all_repeat"&&p.jsx(rh,{size:20}),Se==="all"&&p.jsx(dr,{size:20}),Se==="off"&&p.jsx(rh,{size:20,className:"opacity-50"})]})]}),p.jsxs("div",{className:"flex items-center gap-1 justify-center lg:justify-end group flex-wrap order-3 lg:order-none w-auto lg:w-full",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>G(k=>({...k,backgroundBlurStrength:k.backgroundBlurStrength>0?0:12})),className:`bg-zinc-800/50 border border-white/5 text-[10px] font-mono rounded-lg px-2 h-9 transition-colors disabled:opacity-30 ${oe?"text-purple-400 border-purple-500/50":"text-zinc-300 hover:text-white"}`,title:`Background Blur: ${oe?"On":"Off"}`,disabled:P,children:oe?"BLUR":"SHARP"}),p.jsx("button",{onClick:()=>G(k=>({...k,highlightEffect:k.highlightEffect==="none"?"karaoke":"none"})),className:`p-2 rounded-full transition-all ${C.highlightEffect!=="none"?"bg-orange-500 text-white shadow-[0_0_15px_rgba(249,115,22,0.5)]":"hover:bg-zinc-800 text-zinc-400"}`,title:"Toggle Lyric Highlight",children:p.jsx(Lo,{size:20})}),p.jsx("button",{onClick:()=>he(k=>k==="1080p"?"720p":"1080p"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Resolution (720p / 1080p)",disabled:P,children:Ne}),p.jsx("button",{onClick:()=>Te(k=>k==="16:9"?"9:16":k==="9:16"?"3:4":k==="3:4"?"1:1":k==="1:1"?"1:2":k==="1:2"?"2:1":k==="2:1"?"2:3":k==="2:3"?"3:2":"16:9"),className:"bg-zinc-800/50 border border-white/5 text-[10px] font-mono text-zinc-300 hover:text-white rounded-lg px-2 h-9 transition-colors disabled:opacity-30",title:"Toggle Aspect Ratio (16:9 / 9:16 / 3:4 / 1:1 / 1:2 / 2:1 / 2:3 / 3:2)",disabled:P,children:Ce})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:Ye,onChange:k=>H(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-28 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:P,title:"Select Video Codec",children:[p.jsx("option",{value:"auto",className:"bg-zinc-900",children:"Codec: Auto"}),re.map(k=>p.jsx("option",{value:k.value,className:"bg-zinc-900",children:k.label},k.value))]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("select",{value:Ae,onChange:k=>ve(k.target.value),className:"appearance-none bg-zinc-800/50 border border-white/5 text-zinc-300 text-xs rounded-lg px-3 pr-8 w-16 h-9 focus:outline-none focus:border-purple-500 cursor-pointer",disabled:P,title:"Select Quality (Bitrate)",children:[p.jsx("option",{value:"low",className:"bg-zinc-900",children:"Low"}),p.jsx("option",{value:"med",className:"bg-zinc-900",children:"Med"}),p.jsx("option",{value:"high",className:"bg-zinc-900",children:"High"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-zinc-500",children:p.jsx("svg",{className:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),p.jsx("button",{onClick:Bi,disabled:P||!m,className:"p-2 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-white cursor-pointer transition-colors",title:"Export as Video",children:p.jsx(qs,{size:18})})]})]})]})})}),De?p.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:p.jsx(IA,{playlist:K,setPlaylist:ze,currentTrackIndex:je,setCurrentTrackIndex:et,onPlayTrack:Ti,isPlaying:ke,onTogglePlay:wt,currentTime:we,onSeek:k=>{o.current&&!P&&(o.current.currentTime=k,Qe(k))},onClearPlaylist:()=>{kt(),x(null),F([]),et(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})},onRemoveTrack:k=>{k===je?(kt(),x(null),F([]),et(-1),N({title:"No Audio Loaded",artist:"Select a file",coverUrl:null,backgroundType:"image"})):k<je&&et(W=>W-1),ze(W=>{const Le=[...W];return Le.splice(k,1),Le})},onClose:()=>Et(!1)})}):xe===In.EDITOR&&p.jsx("div",{className:"animate-slide-up border-t border-white/10 z-30 shrink-0 w-full max-w-[100vw] overflow-hidden",children:p.jsx(m1,{slides:J,setSlides:ue,currentTime:we,duration:Ue||60,lyrics:O,onSeek:k=>{o.current&&!P&&(o.current.currentTime=k,Qe(k))},onClose:()=>de(In.PLAYER),renderConfig:C,setRenderConfig:G})})]}),P&&p.jsxs("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-8 text-center space-y-6",children:[p.jsx("div",{className:"animate-bounce",children:p.jsx(qs,{size:48,className:"text-purple-500"})}),p.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Rendering Video (",Ce," ",Ne,")"]}),p.jsxs("p",{className:"text-zinc-400 max-w-md",children:["Rendering in real-time using Canvas 2D engine.",p.jsx("br",{}),"The audio will play during capture.",p.jsx("br",{}),"Please keep this tab active for best performance."]}),p.jsx("div",{className:"w-full max-w-md h-2 bg-zinc-800 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300 ease-linear",style:{width:`${le}%`}})}),p.jsxs("p",{className:"text-sm font-mono text-zinc-500",children:[Math.round(le),"%"]}),p.jsxs("button",{onClick:ki,className:"mt-4 px-6 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 hover:text-red-300 rounded-full transition-colors flex items-center gap-2 border border-red-500/50",children:[p.jsx(Vc,{size:16,fill:"currentColor"}),"Abort Rendering"]})]}),ge&&p.jsx(HA,{config:C,setConfig:G,preset:L,setPreset:_e,onClose:()=>w(!1),isPlaylistMode:De,hasPlaylist:K.length>0,onRender:Bi,customFontName:Fe,onFontUpload:Hi,onClearCustomFont:()=>Be(null),resolution:Ne,setResolution:he,aspectRatio:Ce,setAspectRatio:Te,renderCodec:Ye,setRenderCodec:H,supportedCodecs:re,renderQuality:Ae,setRenderQuality:ve,renderFps:ae,setRenderFps:pe})]})}const Zg=document.getElementById("root");if(!Zg)throw new Error("Could not find root element to mount to");const FA=dx.createRoot(Zg);FA.render(p.jsx(Zm.StrictMode,{children:p.jsx(c1,{children:p.jsx(BA,{})})}));export{OA as c,Qm as g};
